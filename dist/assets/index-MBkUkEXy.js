const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BHGHb4RF.js","assets/__vite-browser-external-DTHgcB49.js"])))=>i.map(i=>d[i]);
var FT=Object.defineProperty;var IT=(t,e,r)=>e in t?FT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var hn=(t,e,r)=>IT(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Q2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Z9(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var J2={exports:{}},Qp={},K2={exports:{}},vi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df=Symbol.for("react.element"),OT=Symbol.for("react.portal"),BT=Symbol.for("react.fragment"),HT=Symbol.for("react.strict_mode"),WT=Symbol.for("react.profiler"),qT=Symbol.for("react.provider"),VT=Symbol.for("react.context"),UT=Symbol.for("react.forward_ref"),$T=Symbol.for("react.suspense"),YT=Symbol.for("react.memo"),GT=Symbol.for("react.lazy"),nx=Symbol.iterator;function XT(t){return t===null||typeof t!="object"?null:(t=nx&&t[nx]||t["@@iterator"],typeof t=="function"?t:null)}var ew={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tw=Object.assign,rw={};function rd(t,e,r){this.props=t,this.context=e,this.refs=rw,this.updater=r||ew}rd.prototype.isReactComponent={};rd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nw(){}nw.prototype=rd.prototype;function f0(t,e,r){this.props=t,this.context=e,this.refs=rw,this.updater=r||ew}var h0=f0.prototype=new nw;h0.constructor=f0;tw(h0,rd.prototype);h0.isPureReactComponent=!0;var ix=Array.isArray,iw=Object.prototype.hasOwnProperty,p0={current:null},aw={key:!0,ref:!0,__self:!0,__source:!0};function sw(t,e,r){var n,i={},a=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)iw.call(e,n)&&!aw.hasOwnProperty(n)&&(i[n]=e[n]);var d=arguments.length-2;if(d===1)i.children=r;else if(1<d){for(var _=Array(d),N=0;N<d;N++)_[N]=arguments[N+2];i.children=_}if(t&&t.defaultProps)for(n in d=t.defaultProps,d)i[n]===void 0&&(i[n]=d[n]);return{$$typeof:Df,type:t,key:a,ref:s,props:i,_owner:p0.current}}function ZT(t,e){return{$$typeof:Df,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function m0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Df}function QT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ax=/\/+/g;function av(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QT(""+t.key):e.toString(36)}function Xh(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Df:case OT:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+av(s,0):n,ix(i)?(r="",t!=null&&(r=t.replace(ax,"$&/")+"/"),Xh(i,e,r,"",function(N){return N})):i!=null&&(m0(i)&&(i=ZT(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ax,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",ix(t))for(var d=0;d<t.length;d++){a=t[d];var _=n+av(a,d);s+=Xh(a,e,r,_,i)}else if(_=XT(t),typeof _=="function")for(t=_.call(t),d=0;!(a=t.next()).done;)a=a.value,_=n+av(a,d++),s+=Xh(a,e,r,_,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function vh(t,e,r){if(t==null)return t;var n=[],i=0;return Xh(t,n,"","",function(a){return e.call(r,a,i++)}),n}function JT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fs={current:null},Zh={transition:null},KT={ReactCurrentDispatcher:Fs,ReactCurrentBatchConfig:Zh,ReactCurrentOwner:p0};function ow(){throw Error("act(...) is not supported in production builds of React.")}vi.Children={map:vh,forEach:function(t,e,r){vh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vh(t,function(){e++}),e},toArray:function(t){return vh(t,function(e){return e})||[]},only:function(t){if(!m0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vi.Component=rd;vi.Fragment=BT;vi.Profiler=WT;vi.PureComponent=f0;vi.StrictMode=HT;vi.Suspense=$T;vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KT;vi.act=ow;vi.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=tw({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=p0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(_ in e)iw.call(e,_)&&!aw.hasOwnProperty(_)&&(n[_]=e[_]===void 0&&d!==void 0?d[_]:e[_])}var _=arguments.length-2;if(_===1)n.children=r;else if(1<_){d=Array(_);for(var N=0;N<_;N++)d[N]=arguments[N+2];n.children=d}return{$$typeof:Df,type:t.type,key:i,ref:a,props:n,_owner:s}};vi.createContext=function(t){return t={$$typeof:VT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qT,_context:t},t.Consumer=t};vi.createElement=sw;vi.createFactory=function(t){var e=sw.bind(null,t);return e.type=t,e};vi.createRef=function(){return{current:null}};vi.forwardRef=function(t){return{$$typeof:UT,render:t}};vi.isValidElement=m0;vi.lazy=function(t){return{$$typeof:GT,_payload:{_status:-1,_result:t},_init:JT}};vi.memo=function(t,e){return{$$typeof:YT,type:t,compare:e===void 0?null:e}};vi.startTransition=function(t){var e=Zh.transition;Zh.transition={};try{t()}finally{Zh.transition=e}};vi.unstable_act=ow;vi.useCallback=function(t,e){return Fs.current.useCallback(t,e)};vi.useContext=function(t){return Fs.current.useContext(t)};vi.useDebugValue=function(){};vi.useDeferredValue=function(t){return Fs.current.useDeferredValue(t)};vi.useEffect=function(t,e){return Fs.current.useEffect(t,e)};vi.useId=function(){return Fs.current.useId()};vi.useImperativeHandle=function(t,e,r){return Fs.current.useImperativeHandle(t,e,r)};vi.useInsertionEffect=function(t,e){return Fs.current.useInsertionEffect(t,e)};vi.useLayoutEffect=function(t,e){return Fs.current.useLayoutEffect(t,e)};vi.useMemo=function(t,e){return Fs.current.useMemo(t,e)};vi.useReducer=function(t,e,r){return Fs.current.useReducer(t,e,r)};vi.useRef=function(t){return Fs.current.useRef(t)};vi.useState=function(t){return Fs.current.useState(t)};vi.useSyncExternalStore=function(t,e,r){return Fs.current.useSyncExternalStore(t,e,r)};vi.useTransition=function(){return Fs.current.useTransition()};vi.version="18.3.1";K2.exports=vi;var Wt=K2.exports;const tc=Zp(Wt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA=Wt,tA=Symbol.for("react.element"),rA=Symbol.for("react.fragment"),nA=Object.prototype.hasOwnProperty,iA=eA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aA={key:!0,ref:!0,__self:!0,__source:!0};function lw(t,e,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)nA.call(e,n)&&!aA.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:tA,type:t,key:a,ref:s,props:i,_owner:iA.current}}Qp.Fragment=rA;Qp.jsx=lw;Qp.jsxs=lw;J2.exports=Qp;var o=J2.exports,tg={},cw={exports:{}},lo={},uw={exports:{}},dw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Jt,lr){var wr=Jt.length;Jt.push(lr);e:for(;0<wr;){var Sr=wr-1>>>1,vr=Jt[Sr];if(0<i(vr,lr))Jt[Sr]=lr,Jt[wr]=vr,wr=Sr;else break e}}function r(Jt){return Jt.length===0?null:Jt[0]}function n(Jt){if(Jt.length===0)return null;var lr=Jt[0],wr=Jt.pop();if(wr!==lr){Jt[0]=wr;e:for(var Sr=0,vr=Jt.length,Bt=vr>>>1;Sr<Bt;){var yr=2*(Sr+1)-1,dr=Jt[yr],Pr=yr+1,Hr=Jt[Pr];if(0>i(dr,wr))Pr<vr&&0>i(Hr,dr)?(Jt[Sr]=Hr,Jt[Pr]=wr,Sr=Pr):(Jt[Sr]=dr,Jt[yr]=wr,Sr=yr);else if(Pr<vr&&0>i(Hr,wr))Jt[Sr]=Hr,Jt[Pr]=wr,Sr=Pr;else break e}}return lr}function i(Jt,lr){var wr=Jt.sortIndex-lr.sortIndex;return wr!==0?wr:Jt.id-lr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,d=s.now();t.unstable_now=function(){return s.now()-d}}var _=[],N=[],I=1,ye=null,xe=3,Ce=!1,Ve=!1,Ye=!1,qe=typeof setTimeout=="function"?setTimeout:null,ze=typeof clearTimeout=="function"?clearTimeout:null,Oe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function We(Jt){for(var lr=r(N);lr!==null;){if(lr.callback===null)n(N);else if(lr.startTime<=Jt)n(N),lr.sortIndex=lr.expirationTime,e(_,lr);else break;lr=r(N)}}function ot(Jt){if(Ye=!1,We(Jt),!Ve)if(r(_)!==null)Ve=!0,pt(st);else{var lr=r(N);lr!==null&&Zt(ot,lr.startTime-Jt)}}function st(Jt,lr){Ve=!1,Ye&&(Ye=!1,ze(It),It=-1),Ce=!0;var wr=xe;try{for(We(lr),ye=r(_);ye!==null&&(!(ye.expirationTime>lr)||Jt&&!Tr());){var Sr=ye.callback;if(typeof Sr=="function"){ye.callback=null,xe=ye.priorityLevel;var vr=Sr(ye.expirationTime<=lr);lr=t.unstable_now(),typeof vr=="function"?ye.callback=vr:ye===r(_)&&n(_),We(lr)}else n(_);ye=r(_)}if(ye!==null)var Bt=!0;else{var yr=r(N);yr!==null&&Zt(ot,yr.startTime-lr),Bt=!1}return Bt}finally{ye=null,xe=wr,Ce=!1}}var Rt=!1,wt=null,It=-1,er=5,cr=-1;function Tr(){return!(t.unstable_now()-cr<er)}function xr(){if(wt!==null){var Jt=t.unstable_now();cr=Jt;var lr=!0;try{lr=wt(!0,Jt)}finally{lr?lt():(Rt=!1,wt=null)}}else Rt=!1}var lt;if(typeof Oe=="function")lt=function(){Oe(xr)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,Ft=gt.port2;gt.port1.onmessage=xr,lt=function(){Ft.postMessage(null)}}else lt=function(){qe(xr,0)};function pt(Jt){wt=Jt,Rt||(Rt=!0,lt())}function Zt(Jt,lr){It=qe(function(){Jt(t.unstable_now())},lr)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Jt){Jt.callback=null},t.unstable_continueExecution=function(){Ve||Ce||(Ve=!0,pt(st))},t.unstable_forceFrameRate=function(Jt){0>Jt||125<Jt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):er=0<Jt?Math.floor(1e3/Jt):5},t.unstable_getCurrentPriorityLevel=function(){return xe},t.unstable_getFirstCallbackNode=function(){return r(_)},t.unstable_next=function(Jt){switch(xe){case 1:case 2:case 3:var lr=3;break;default:lr=xe}var wr=xe;xe=lr;try{return Jt()}finally{xe=wr}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Jt,lr){switch(Jt){case 1:case 2:case 3:case 4:case 5:break;default:Jt=3}var wr=xe;xe=Jt;try{return lr()}finally{xe=wr}},t.unstable_scheduleCallback=function(Jt,lr,wr){var Sr=t.unstable_now();switch(typeof wr=="object"&&wr!==null?(wr=wr.delay,wr=typeof wr=="number"&&0<wr?Sr+wr:Sr):wr=Sr,Jt){case 1:var vr=-1;break;case 2:vr=250;break;case 5:vr=1073741823;break;case 4:vr=1e4;break;default:vr=5e3}return vr=wr+vr,Jt={id:I++,callback:lr,priorityLevel:Jt,startTime:wr,expirationTime:vr,sortIndex:-1},wr>Sr?(Jt.sortIndex=wr,e(N,Jt),r(_)===null&&Jt===r(N)&&(Ye?(ze(It),It=-1):Ye=!0,Zt(ot,wr-Sr))):(Jt.sortIndex=vr,e(_,Jt),Ve||Ce||(Ve=!0,pt(st))),Jt},t.unstable_shouldYield=Tr,t.unstable_wrapCallback=function(Jt){var lr=xe;return function(){var wr=xe;xe=lr;try{return Jt.apply(this,arguments)}finally{xe=wr}}}})(dw);uw.exports=dw;var sA=uw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oA=Wt,oo=sA;function an(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fw=new Set,lf={};function nu(t,e){$u(t,e),$u(t+"Capture",e)}function $u(t,e){for(lf[t]=e,t=0;t<e.length;t++)fw.add(e[t])}var Al=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rg=Object.prototype.hasOwnProperty,lA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sx={},ox={};function cA(t){return rg.call(ox,t)?!0:rg.call(sx,t)?!1:lA.test(t)?ox[t]=!0:(sx[t]=!0,!1)}function uA(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dA(t,e,r,n){if(e===null||typeof e>"u"||uA(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Is(t,e,r,n,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var cs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cs[t]=new Is(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cs[e]=new Is(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cs[t]=new Is(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cs[t]=new Is(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cs[t]=new Is(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cs[t]=new Is(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cs[t]=new Is(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cs[t]=new Is(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cs[t]=new Is(t,5,!1,t.toLowerCase(),null,!1,!1)});var v0=/[\-:]([a-z])/g;function g0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(v0,g0);cs[e]=new Is(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(v0,g0);cs[e]=new Is(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(v0,g0);cs[e]=new Is(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cs[t]=new Is(t,1,!1,t.toLowerCase(),null,!1,!1)});cs.xlinkHref=new Is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cs[t]=new Is(t,1,!1,t.toLowerCase(),null,!0,!0)});function y0(t,e,r,n){var i=cs.hasOwnProperty(e)?cs[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dA(e,r,i,n)&&(r=null),n||i===null?cA(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ll=oA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gh=Symbol.for("react.element"),Au=Symbol.for("react.portal"),Cu=Symbol.for("react.fragment"),x0=Symbol.for("react.strict_mode"),ng=Symbol.for("react.profiler"),hw=Symbol.for("react.provider"),pw=Symbol.for("react.context"),b0=Symbol.for("react.forward_ref"),ig=Symbol.for("react.suspense"),ag=Symbol.for("react.suspense_list"),w0=Symbol.for("react.memo"),Ul=Symbol.for("react.lazy"),mw=Symbol.for("react.offscreen"),lx=Symbol.iterator;function bd(t){return t===null||typeof t!="object"?null:(t=lx&&t[lx]||t["@@iterator"],typeof t=="function"?t:null)}var Aa=Object.assign,sv;function Pd(t){if(sv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);sv=e&&e[1]||""}return`
`+sv+t}var ov=!1;function lv(t,e){if(!t||ov)return"";ov=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(N){var n=N}Reflect.construct(t,[],e)}else{try{e.call()}catch(N){n=N}t.call(e.prototype)}else{try{throw Error()}catch(N){n=N}t()}}catch(N){if(N&&n&&typeof N.stack=="string"){for(var i=N.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,d=a.length-1;1<=s&&0<=d&&i[s]!==a[d];)d--;for(;1<=s&&0<=d;s--,d--)if(i[s]!==a[d]){if(s!==1||d!==1)do if(s--,d--,0>d||i[s]!==a[d]){var _=`
`+i[s].replace(" at new "," at ");return t.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",t.displayName)),_}while(1<=s&&0<=d);break}}}finally{ov=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Pd(t):""}function fA(t){switch(t.tag){case 5:return Pd(t.type);case 16:return Pd("Lazy");case 13:return Pd("Suspense");case 19:return Pd("SuspenseList");case 0:case 2:case 15:return t=lv(t.type,!1),t;case 11:return t=lv(t.type.render,!1),t;case 1:return t=lv(t.type,!0),t;default:return""}}function sg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cu:return"Fragment";case Au:return"Portal";case ng:return"Profiler";case x0:return"StrictMode";case ig:return"Suspense";case ag:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pw:return(t.displayName||"Context")+".Consumer";case hw:return(t._context.displayName||"Context")+".Provider";case b0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w0:return e=t.displayName||null,e!==null?e:sg(t.type)||"Memo";case Ul:e=t._payload,t=t._init;try{return sg(t(e))}catch{}}return null}function hA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sg(e);case 8:return e===x0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pA(t){var e=vw(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yh(t){t._valueTracker||(t._valueTracker=pA(t))}function gw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=vw(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function yp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function og(t,e){var r=e.checked;return Aa({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=fc(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yw(t,e){e=e.checked,e!=null&&y0(t,"checked",e,!1)}function lg(t,e){yw(t,e);var r=fc(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cg(t,e.type,r):e.hasOwnProperty("defaultValue")&&cg(t,e.type,fc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ux(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function cg(t,e,r){(e!=="number"||yp(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Nd=Array.isArray;function Ou(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+fc(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ug(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(an(91));return Aa({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(an(92));if(Nd(r)){if(1<r.length)throw Error(an(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fc(r)}}function xw(t,e){var r=fc(e.value),n=fc(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function fx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xh,ww=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xh=xh||document.createElement("div"),xh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Vd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mA=["Webkit","ms","Moz","O"];Object.keys(Vd).forEach(function(t){mA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vd[e]=Vd[t]})});function _w(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Vd.hasOwnProperty(t)&&Vd[t]?(""+e).trim():e+"px"}function kw(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=_w(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var vA=Aa({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fg(t,e){if(e){if(vA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(an(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(an(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(an(61))}if(e.style!=null&&typeof e.style!="object")throw Error(an(62))}}function hg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=null;function _0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mg=null,Bu=null,Hu=null;function hx(t){if(t=zf(t)){if(typeof mg!="function")throw Error(an(280));var e=t.stateNode;e&&(e=rm(e),mg(t.stateNode,t.type,e))}}function Sw(t){Bu?Hu?Hu.push(t):Hu=[t]:Bu=t}function Mw(){if(Bu){var t=Bu,e=Hu;if(Hu=Bu=null,hx(t),e)for(t=0;t<e.length;t++)hx(e[t])}}function Tw(t,e){return t(e)}function Aw(){}var cv=!1;function Cw(t,e,r){if(cv)return t(e,r);cv=!0;try{return Tw(t,e,r)}finally{cv=!1,(Bu!==null||Hu!==null)&&(Aw(),Mw())}}function uf(t,e){var r=t.stateNode;if(r===null)return null;var n=rm(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(an(231,e,typeof r));return r}var vg=!1;if(Al)try{var wd={};Object.defineProperty(wd,"passive",{get:function(){vg=!0}}),window.addEventListener("test",wd,wd),window.removeEventListener("test",wd,wd)}catch{vg=!1}function gA(t,e,r,n,i,a,s,d,_){var N=Array.prototype.slice.call(arguments,3);try{e.apply(r,N)}catch(I){this.onError(I)}}var Ud=!1,xp=null,bp=!1,gg=null,yA={onError:function(t){Ud=!0,xp=t}};function xA(t,e,r,n,i,a,s,d,_){Ud=!1,xp=null,gA.apply(yA,arguments)}function bA(t,e,r,n,i,a,s,d,_){if(xA.apply(this,arguments),Ud){if(Ud){var N=xp;Ud=!1,xp=null}else throw Error(an(198));bp||(bp=!0,gg=N)}}function iu(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function jw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function px(t){if(iu(t)!==t)throw Error(an(188))}function wA(t){var e=t.alternate;if(!e){if(e=iu(t),e===null)throw Error(an(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return px(i),t;if(a===n)return px(i),e;a=a.sibling}throw Error(an(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,d=i.child;d;){if(d===r){s=!0,r=i,n=a;break}if(d===n){s=!0,n=i,r=a;break}d=d.sibling}if(!s){for(d=a.child;d;){if(d===r){s=!0,r=a,n=i;break}if(d===n){s=!0,n=a,r=i;break}d=d.sibling}if(!s)throw Error(an(189))}}if(r.alternate!==n)throw Error(an(190))}if(r.tag!==3)throw Error(an(188));return r.stateNode.current===r?t:e}function Ew(t){return t=wA(t),t!==null?Lw(t):null}function Lw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lw(t);if(e!==null)return e;t=t.sibling}return null}var Rw=oo.unstable_scheduleCallback,mx=oo.unstable_cancelCallback,_A=oo.unstable_shouldYield,kA=oo.unstable_requestPaint,za=oo.unstable_now,SA=oo.unstable_getCurrentPriorityLevel,k0=oo.unstable_ImmediatePriority,Dw=oo.unstable_UserBlockingPriority,wp=oo.unstable_NormalPriority,MA=oo.unstable_LowPriority,Pw=oo.unstable_IdlePriority,Jp=null,el=null;function TA(t){if(el&&typeof el.onCommitFiberRoot=="function")try{el.onCommitFiberRoot(Jp,t,void 0,(t.current.flags&128)===128)}catch{}}var Io=Math.clz32?Math.clz32:jA,AA=Math.log,CA=Math.LN2;function jA(t){return t>>>=0,t===0?32:31-(AA(t)/CA|0)|0}var bh=64,wh=4194304;function zd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _p(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,s=r&268435455;if(s!==0){var d=s&~i;d!==0?n=zd(d):(a&=s,a!==0&&(n=zd(a)))}else s=r&~i,s!==0?n=zd(s):a!==0&&(n=zd(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Io(e),i=1<<r,n|=t[r],e&=~i;return n}function EA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LA(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-Io(a),d=1<<s,_=i[s];_===-1?(!(d&r)||d&n)&&(i[s]=EA(d,e)):_<=e&&(t.expiredLanes|=d),a&=~d}}function yg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nw(){var t=bh;return bh<<=1,!(bh&4194240)&&(bh=64),t}function uv(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Pf(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Io(e),t[e]=r}function RA(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Io(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function S0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Io(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var $i=0;function zw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fw,M0,Iw,Ow,Bw,xg=!1,_h=[],rc=null,nc=null,ic=null,df=new Map,ff=new Map,Yl=[],DA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vx(t,e){switch(t){case"focusin":case"focusout":rc=null;break;case"dragenter":case"dragleave":nc=null;break;case"mouseover":case"mouseout":ic=null;break;case"pointerover":case"pointerout":df.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ff.delete(e.pointerId)}}function _d(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=zf(e),e!==null&&M0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function PA(t,e,r,n,i){switch(e){case"focusin":return rc=_d(rc,t,e,r,n,i),!0;case"dragenter":return nc=_d(nc,t,e,r,n,i),!0;case"mouseover":return ic=_d(ic,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return df.set(a,_d(df.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,ff.set(a,_d(ff.get(a)||null,t,e,r,n,i)),!0}return!1}function Hw(t){var e=Hc(t.target);if(e!==null){var r=iu(e);if(r!==null){if(e=r.tag,e===13){if(e=jw(r),e!==null){t.blockedOn=e,Bw(t.priority,function(){Iw(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=bg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);pg=n,r.target.dispatchEvent(n),pg=null}else return e=zf(r),e!==null&&M0(e),t.blockedOn=r,!1;e.shift()}return!0}function gx(t,e,r){Qh(t)&&r.delete(e)}function NA(){xg=!1,rc!==null&&Qh(rc)&&(rc=null),nc!==null&&Qh(nc)&&(nc=null),ic!==null&&Qh(ic)&&(ic=null),df.forEach(gx),ff.forEach(gx)}function kd(t,e){t.blockedOn===e&&(t.blockedOn=null,xg||(xg=!0,oo.unstable_scheduleCallback(oo.unstable_NormalPriority,NA)))}function hf(t){function e(i){return kd(i,t)}if(0<_h.length){kd(_h[0],t);for(var r=1;r<_h.length;r++){var n=_h[r];n.blockedOn===t&&(n.blockedOn=null)}}for(rc!==null&&kd(rc,t),nc!==null&&kd(nc,t),ic!==null&&kd(ic,t),df.forEach(e),ff.forEach(e),r=0;r<Yl.length;r++)n=Yl[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Yl.length&&(r=Yl[0],r.blockedOn===null);)Hw(r),r.blockedOn===null&&Yl.shift()}var Wu=Ll.ReactCurrentBatchConfig,kp=!0;function zA(t,e,r,n){var i=$i,a=Wu.transition;Wu.transition=null;try{$i=1,T0(t,e,r,n)}finally{$i=i,Wu.transition=a}}function FA(t,e,r,n){var i=$i,a=Wu.transition;Wu.transition=null;try{$i=4,T0(t,e,r,n)}finally{$i=i,Wu.transition=a}}function T0(t,e,r,n){if(kp){var i=bg(t,e,r,n);if(i===null)bv(t,e,n,Sp,r),vx(t,n);else if(PA(i,t,e,r,n))n.stopPropagation();else if(vx(t,n),e&4&&-1<DA.indexOf(t)){for(;i!==null;){var a=zf(i);if(a!==null&&Fw(a),a=bg(t,e,r,n),a===null&&bv(t,e,n,Sp,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else bv(t,e,n,null,r)}}var Sp=null;function bg(t,e,r,n){if(Sp=null,t=_0(n),t=Hc(t),t!==null)if(e=iu(t),e===null)t=null;else if(r=e.tag,r===13){if(t=jw(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sp=t,null}function Ww(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SA()){case k0:return 1;case Dw:return 4;case wp:case MA:return 16;case Pw:return 536870912;default:return 16}default:return 16}}var Xl=null,A0=null,Jh=null;function qw(){if(Jh)return Jh;var t,e=A0,r=e.length,n,i="value"in Xl?Xl.value:Xl.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[a-n];n++);return Jh=i.slice(t,1<n?1-n:void 0)}function Kh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kh(){return!0}function yx(){return!1}function co(t){function e(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(r=t[d],this[d]=r?r(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?kh:yx,this.isPropagationStopped=yx,this}return Aa(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=kh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=kh)},persist:function(){},isPersistent:kh}),e}var nd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C0=co(nd),Nf=Aa({},nd,{view:0,detail:0}),IA=co(Nf),dv,fv,Sd,Kp=Aa({},Nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:j0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sd&&(Sd&&t.type==="mousemove"?(dv=t.screenX-Sd.screenX,fv=t.screenY-Sd.screenY):fv=dv=0,Sd=t),dv)},movementY:function(t){return"movementY"in t?t.movementY:fv}}),xx=co(Kp),OA=Aa({},Kp,{dataTransfer:0}),BA=co(OA),HA=Aa({},Nf,{relatedTarget:0}),hv=co(HA),WA=Aa({},nd,{animationName:0,elapsedTime:0,pseudoElement:0}),qA=co(WA),VA=Aa({},nd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UA=co(VA),$A=Aa({},nd,{data:0}),bx=co($A),YA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XA[t])?!!e[t]:!1}function j0(){return ZA}var QA=Aa({},Nf,{key:function(t){if(t.key){var e=YA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:j0,charCode:function(t){return t.type==="keypress"?Kh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JA=co(QA),KA=Aa({},Kp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wx=co(KA),e4=Aa({},Nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:j0}),t4=co(e4),r4=Aa({},nd,{propertyName:0,elapsedTime:0,pseudoElement:0}),n4=co(r4),i4=Aa({},Kp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),a4=co(i4),s4=[9,13,27,32],E0=Al&&"CompositionEvent"in window,$d=null;Al&&"documentMode"in document&&($d=document.documentMode);var o4=Al&&"TextEvent"in window&&!$d,Vw=Al&&(!E0||$d&&8<$d&&11>=$d),_x=" ",kx=!1;function Uw(t,e){switch(t){case"keyup":return s4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $w(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ju=!1;function l4(t,e){switch(t){case"compositionend":return $w(e);case"keypress":return e.which!==32?null:(kx=!0,_x);case"textInput":return t=e.data,t===_x&&kx?null:t;default:return null}}function c4(t,e){if(ju)return t==="compositionend"||!E0&&Uw(t,e)?(t=qw(),Jh=A0=Xl=null,ju=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vw&&e.locale!=="ko"?null:e.data;default:return null}}var u4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!u4[t.type]:e==="textarea"}function Yw(t,e,r,n){Sw(n),e=Mp(e,"onChange"),0<e.length&&(r=new C0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Yd=null,pf=null;function d4(t){i_(t,0)}function em(t){var e=Ru(t);if(gw(e))return t}function f4(t,e){if(t==="change")return e}var Gw=!1;if(Al){var pv;if(Al){var mv="oninput"in document;if(!mv){var Mx=document.createElement("div");Mx.setAttribute("oninput","return;"),mv=typeof Mx.oninput=="function"}pv=mv}else pv=!1;Gw=pv&&(!document.documentMode||9<document.documentMode)}function Tx(){Yd&&(Yd.detachEvent("onpropertychange",Xw),pf=Yd=null)}function Xw(t){if(t.propertyName==="value"&&em(pf)){var e=[];Yw(e,pf,t,_0(t)),Cw(d4,e)}}function h4(t,e,r){t==="focusin"?(Tx(),Yd=e,pf=r,Yd.attachEvent("onpropertychange",Xw)):t==="focusout"&&Tx()}function p4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return em(pf)}function m4(t,e){if(t==="click")return em(e)}function v4(t,e){if(t==="input"||t==="change")return em(e)}function g4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ho=typeof Object.is=="function"?Object.is:g4;function mf(t,e){if(Ho(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!rg.call(e,i)||!Ho(t[i],e[i]))return!1}return!0}function Ax(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cx(t,e){var r=Ax(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ax(r)}}function Zw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qw(){for(var t=window,e=yp();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=yp(t.document)}return e}function L0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function y4(t){var e=Qw(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Zw(r.ownerDocument.documentElement,r)){if(n!==null&&L0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Cx(r,a);var s=Cx(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var x4=Al&&"documentMode"in document&&11>=document.documentMode,Eu=null,wg=null,Gd=null,_g=!1;function jx(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_g||Eu==null||Eu!==yp(n)||(n=Eu,"selectionStart"in n&&L0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Gd&&mf(Gd,n)||(Gd=n,n=Mp(wg,"onSelect"),0<n.length&&(e=new C0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Eu)))}function Sh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Lu={animationend:Sh("Animation","AnimationEnd"),animationiteration:Sh("Animation","AnimationIteration"),animationstart:Sh("Animation","AnimationStart"),transitionend:Sh("Transition","TransitionEnd")},vv={},Jw={};Al&&(Jw=document.createElement("div").style,"AnimationEvent"in window||(delete Lu.animationend.animation,delete Lu.animationiteration.animation,delete Lu.animationstart.animation),"TransitionEvent"in window||delete Lu.transitionend.transition);function tm(t){if(vv[t])return vv[t];if(!Lu[t])return t;var e=Lu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Jw)return vv[t]=e[r];return t}var Kw=tm("animationend"),e_=tm("animationiteration"),t_=tm("animationstart"),r_=tm("transitionend"),n_=new Map,Ex="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vc(t,e){n_.set(t,e),nu(e,[t])}for(var gv=0;gv<Ex.length;gv++){var yv=Ex[gv],b4=yv.toLowerCase(),w4=yv[0].toUpperCase()+yv.slice(1);vc(b4,"on"+w4)}vc(Kw,"onAnimationEnd");vc(e_,"onAnimationIteration");vc(t_,"onAnimationStart");vc("dblclick","onDoubleClick");vc("focusin","onFocus");vc("focusout","onBlur");vc(r_,"onTransitionEnd");$u("onMouseEnter",["mouseout","mouseover"]);$u("onMouseLeave",["mouseout","mouseover"]);$u("onPointerEnter",["pointerout","pointerover"]);$u("onPointerLeave",["pointerout","pointerover"]);nu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nu("onBeforeInput",["compositionend","keypress","textInput","paste"]);nu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fd));function Lx(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,bA(n,e,void 0,t),t.currentTarget=null}function i_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var s=n.length-1;0<=s;s--){var d=n[s],_=d.instance,N=d.currentTarget;if(d=d.listener,_!==a&&i.isPropagationStopped())break e;Lx(i,d,N),a=_}else for(s=0;s<n.length;s++){if(d=n[s],_=d.instance,N=d.currentTarget,d=d.listener,_!==a&&i.isPropagationStopped())break e;Lx(i,d,N),a=_}}}if(bp)throw t=gg,bp=!1,gg=null,t}function ua(t,e){var r=e[Ag];r===void 0&&(r=e[Ag]=new Set);var n=t+"__bubble";r.has(n)||(a_(e,t,2,!1),r.add(n))}function xv(t,e,r){var n=0;e&&(n|=4),a_(r,t,n,e)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function vf(t){if(!t[Mh]){t[Mh]=!0,fw.forEach(function(r){r!=="selectionchange"&&(_4.has(r)||xv(r,!1,t),xv(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mh]||(e[Mh]=!0,xv("selectionchange",!1,e))}}function a_(t,e,r,n){switch(Ww(e)){case 1:var i=zA;break;case 4:i=FA;break;default:i=T0}r=i.bind(null,e,r,t),i=void 0,!vg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function bv(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var d=n.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var _=s.tag;if((_===3||_===4)&&(_=s.stateNode.containerInfo,_===i||_.nodeType===8&&_.parentNode===i))return;s=s.return}for(;d!==null;){if(s=Hc(d),s===null)return;if(_=s.tag,_===5||_===6){n=a=s;continue e}d=d.parentNode}}n=n.return}Cw(function(){var N=a,I=_0(r),ye=[];e:{var xe=n_.get(t);if(xe!==void 0){var Ce=C0,Ve=t;switch(t){case"keypress":if(Kh(r)===0)break e;case"keydown":case"keyup":Ce=JA;break;case"focusin":Ve="focus",Ce=hv;break;case"focusout":Ve="blur",Ce=hv;break;case"beforeblur":case"afterblur":Ce=hv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=xx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=BA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=t4;break;case Kw:case e_:case t_:Ce=qA;break;case r_:Ce=n4;break;case"scroll":Ce=IA;break;case"wheel":Ce=a4;break;case"copy":case"cut":case"paste":Ce=UA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=wx}var Ye=(e&4)!==0,qe=!Ye&&t==="scroll",ze=Ye?xe!==null?xe+"Capture":null:xe;Ye=[];for(var Oe=N,We;Oe!==null;){We=Oe;var ot=We.stateNode;if(We.tag===5&&ot!==null&&(We=ot,ze!==null&&(ot=uf(Oe,ze),ot!=null&&Ye.push(gf(Oe,ot,We)))),qe)break;Oe=Oe.return}0<Ye.length&&(xe=new Ce(xe,Ve,null,r,I),ye.push({event:xe,listeners:Ye}))}}if(!(e&7)){e:{if(xe=t==="mouseover"||t==="pointerover",Ce=t==="mouseout"||t==="pointerout",xe&&r!==pg&&(Ve=r.relatedTarget||r.fromElement)&&(Hc(Ve)||Ve[Cl]))break e;if((Ce||xe)&&(xe=I.window===I?I:(xe=I.ownerDocument)?xe.defaultView||xe.parentWindow:window,Ce?(Ve=r.relatedTarget||r.toElement,Ce=N,Ve=Ve?Hc(Ve):null,Ve!==null&&(qe=iu(Ve),Ve!==qe||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Ce=null,Ve=N),Ce!==Ve)){if(Ye=xx,ot="onMouseLeave",ze="onMouseEnter",Oe="mouse",(t==="pointerout"||t==="pointerover")&&(Ye=wx,ot="onPointerLeave",ze="onPointerEnter",Oe="pointer"),qe=Ce==null?xe:Ru(Ce),We=Ve==null?xe:Ru(Ve),xe=new Ye(ot,Oe+"leave",Ce,r,I),xe.target=qe,xe.relatedTarget=We,ot=null,Hc(I)===N&&(Ye=new Ye(ze,Oe+"enter",Ve,r,I),Ye.target=We,Ye.relatedTarget=qe,ot=Ye),qe=ot,Ce&&Ve)t:{for(Ye=Ce,ze=Ve,Oe=0,We=Ye;We;We=ku(We))Oe++;for(We=0,ot=ze;ot;ot=ku(ot))We++;for(;0<Oe-We;)Ye=ku(Ye),Oe--;for(;0<We-Oe;)ze=ku(ze),We--;for(;Oe--;){if(Ye===ze||ze!==null&&Ye===ze.alternate)break t;Ye=ku(Ye),ze=ku(ze)}Ye=null}else Ye=null;Ce!==null&&Rx(ye,xe,Ce,Ye,!1),Ve!==null&&qe!==null&&Rx(ye,qe,Ve,Ye,!0)}}e:{if(xe=N?Ru(N):window,Ce=xe.nodeName&&xe.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&xe.type==="file")var st=f4;else if(Sx(xe))if(Gw)st=v4;else{st=p4;var Rt=h4}else(Ce=xe.nodeName)&&Ce.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(st=m4);if(st&&(st=st(t,N))){Yw(ye,st,r,I);break e}Rt&&Rt(t,xe,N),t==="focusout"&&(Rt=xe._wrapperState)&&Rt.controlled&&xe.type==="number"&&cg(xe,"number",xe.value)}switch(Rt=N?Ru(N):window,t){case"focusin":(Sx(Rt)||Rt.contentEditable==="true")&&(Eu=Rt,wg=N,Gd=null);break;case"focusout":Gd=wg=Eu=null;break;case"mousedown":_g=!0;break;case"contextmenu":case"mouseup":case"dragend":_g=!1,jx(ye,r,I);break;case"selectionchange":if(x4)break;case"keydown":case"keyup":jx(ye,r,I)}var wt;if(E0)e:{switch(t){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else ju?Uw(t,r)&&(It="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(It="onCompositionStart");It&&(Vw&&r.locale!=="ko"&&(ju||It!=="onCompositionStart"?It==="onCompositionEnd"&&ju&&(wt=qw()):(Xl=I,A0="value"in Xl?Xl.value:Xl.textContent,ju=!0)),Rt=Mp(N,It),0<Rt.length&&(It=new bx(It,t,null,r,I),ye.push({event:It,listeners:Rt}),wt?It.data=wt:(wt=$w(r),wt!==null&&(It.data=wt)))),(wt=o4?l4(t,r):c4(t,r))&&(N=Mp(N,"onBeforeInput"),0<N.length&&(I=new bx("onBeforeInput","beforeinput",null,r,I),ye.push({event:I,listeners:N}),I.data=wt))}i_(ye,e)})}function gf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Mp(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=uf(t,r),a!=null&&n.unshift(gf(t,a,i)),a=uf(t,e),a!=null&&n.push(gf(t,a,i))),t=t.return}return n}function ku(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rx(t,e,r,n,i){for(var a=e._reactName,s=[];r!==null&&r!==n;){var d=r,_=d.alternate,N=d.stateNode;if(_!==null&&_===n)break;d.tag===5&&N!==null&&(d=N,i?(_=uf(r,a),_!=null&&s.unshift(gf(r,_,d))):i||(_=uf(r,a),_!=null&&s.push(gf(r,_,d)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var k4=/\r\n?/g,S4=/\u0000|\uFFFD/g;function Dx(t){return(typeof t=="string"?t:""+t).replace(k4,`
`).replace(S4,"")}function Th(t,e,r){if(e=Dx(e),Dx(t)!==e&&r)throw Error(an(425))}function Tp(){}var kg=null,Sg=null;function Mg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tg=typeof setTimeout=="function"?setTimeout:void 0,M4=typeof clearTimeout=="function"?clearTimeout:void 0,Px=typeof Promise=="function"?Promise:void 0,T4=typeof queueMicrotask=="function"?queueMicrotask:typeof Px<"u"?function(t){return Px.resolve(null).then(t).catch(A4)}:Tg;function A4(t){setTimeout(function(){throw t})}function wv(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),hf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);hf(e)}function ac(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Nx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var id=Math.random().toString(36).slice(2),Jo="__reactFiber$"+id,yf="__reactProps$"+id,Cl="__reactContainer$"+id,Ag="__reactEvents$"+id,C4="__reactListeners$"+id,j4="__reactHandles$"+id;function Hc(t){var e=t[Jo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Cl]||r[Jo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Nx(t);t!==null;){if(r=t[Jo])return r;t=Nx(t)}return e}t=r,r=t.parentNode}return null}function zf(t){return t=t[Jo]||t[Cl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ru(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(an(33))}function rm(t){return t[yf]||null}var Cg=[],Du=-1;function gc(t){return{current:t}}function da(t){0>Du||(t.current=Cg[Du],Cg[Du]=null,Du--)}function aa(t,e){Du++,Cg[Du]=t.current,t.current=e}var hc={},Ms=gc(hc),Zs=gc(!1),Zc=hc;function Yu(t,e){var r=t.type.contextTypes;if(!r)return hc;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qs(t){return t=t.childContextTypes,t!=null}function Ap(){da(Zs),da(Ms)}function zx(t,e,r){if(Ms.current!==hc)throw Error(an(168));aa(Ms,e),aa(Zs,r)}function s_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(an(108,hA(t)||"Unknown",i));return Aa({},r,n)}function Cp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hc,Zc=Ms.current,aa(Ms,t),aa(Zs,Zs.current),!0}function Fx(t,e,r){var n=t.stateNode;if(!n)throw Error(an(169));r?(t=s_(t,e,Zc),n.__reactInternalMemoizedMergedChildContext=t,da(Zs),da(Ms),aa(Ms,t)):da(Zs),aa(Zs,r)}var xl=null,nm=!1,_v=!1;function o_(t){xl===null?xl=[t]:xl.push(t)}function E4(t){nm=!0,o_(t)}function yc(){if(!_v&&xl!==null){_v=!0;var t=0,e=$i;try{var r=xl;for($i=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}xl=null,nm=!1}catch(i){throw xl!==null&&(xl=xl.slice(t+1)),Rw(k0,yc),i}finally{$i=e,_v=!1}}return null}var Pu=[],Nu=0,jp=null,Ep=0,wo=[],_o=0,Qc=null,wl=1,_l="";function Fc(t,e){Pu[Nu++]=Ep,Pu[Nu++]=jp,jp=t,Ep=e}function l_(t,e,r){wo[_o++]=wl,wo[_o++]=_l,wo[_o++]=Qc,Qc=t;var n=wl;t=_l;var i=32-Io(n)-1;n&=~(1<<i),r+=1;var a=32-Io(e)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,wl=1<<32-Io(e)+i|r<<i|n,_l=a+t}else wl=1<<a|r<<i|n,_l=t}function R0(t){t.return!==null&&(Fc(t,1),l_(t,1,0))}function D0(t){for(;t===jp;)jp=Pu[--Nu],Pu[Nu]=null,Ep=Pu[--Nu],Pu[Nu]=null;for(;t===Qc;)Qc=wo[--_o],wo[_o]=null,_l=wo[--_o],wo[_o]=null,wl=wo[--_o],wo[_o]=null}var so=null,ao=null,ga=!1,zo=null;function c_(t,e){var r=ko(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ix(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,so=t,ao=ac(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,so=t,ao=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Qc!==null?{id:wl,overflow:_l}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ko(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,so=t,ao=null,!0):!1;default:return!1}}function jg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Eg(t){if(ga){var e=ao;if(e){var r=e;if(!Ix(t,e)){if(jg(t))throw Error(an(418));e=ac(r.nextSibling);var n=so;e&&Ix(t,e)?c_(n,r):(t.flags=t.flags&-4097|2,ga=!1,so=t)}}else{if(jg(t))throw Error(an(418));t.flags=t.flags&-4097|2,ga=!1,so=t}}}function Ox(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;so=t}function Ah(t){if(t!==so)return!1;if(!ga)return Ox(t),ga=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mg(t.type,t.memoizedProps)),e&&(e=ao)){if(jg(t))throw u_(),Error(an(418));for(;e;)c_(t,e),e=ac(e.nextSibling)}if(Ox(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(an(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ao=ac(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ao=null}}else ao=so?ac(t.stateNode.nextSibling):null;return!0}function u_(){for(var t=ao;t;)t=ac(t.nextSibling)}function Gu(){ao=so=null,ga=!1}function P0(t){zo===null?zo=[t]:zo.push(t)}var L4=Ll.ReactCurrentBatchConfig;function Md(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(an(309));var n=r.stateNode}if(!n)throw Error(an(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var d=i.refs;s===null?delete d[a]:d[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(an(284));if(!r._owner)throw Error(an(290,t))}return t}function Ch(t,e){throw t=Object.prototype.toString.call(e),Error(an(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bx(t){var e=t._init;return e(t._payload)}function d_(t){function e(ze,Oe){if(t){var We=ze.deletions;We===null?(ze.deletions=[Oe],ze.flags|=16):We.push(Oe)}}function r(ze,Oe){if(!t)return null;for(;Oe!==null;)e(ze,Oe),Oe=Oe.sibling;return null}function n(ze,Oe){for(ze=new Map;Oe!==null;)Oe.key!==null?ze.set(Oe.key,Oe):ze.set(Oe.index,Oe),Oe=Oe.sibling;return ze}function i(ze,Oe){return ze=cc(ze,Oe),ze.index=0,ze.sibling=null,ze}function a(ze,Oe,We){return ze.index=We,t?(We=ze.alternate,We!==null?(We=We.index,We<Oe?(ze.flags|=2,Oe):We):(ze.flags|=2,Oe)):(ze.flags|=1048576,Oe)}function s(ze){return t&&ze.alternate===null&&(ze.flags|=2),ze}function d(ze,Oe,We,ot){return Oe===null||Oe.tag!==6?(Oe=jv(We,ze.mode,ot),Oe.return=ze,Oe):(Oe=i(Oe,We),Oe.return=ze,Oe)}function _(ze,Oe,We,ot){var st=We.type;return st===Cu?I(ze,Oe,We.props.children,ot,We.key):Oe!==null&&(Oe.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ul&&Bx(st)===Oe.type)?(ot=i(Oe,We.props),ot.ref=Md(ze,Oe,We),ot.return=ze,ot):(ot=sp(We.type,We.key,We.props,null,ze.mode,ot),ot.ref=Md(ze,Oe,We),ot.return=ze,ot)}function N(ze,Oe,We,ot){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==We.containerInfo||Oe.stateNode.implementation!==We.implementation?(Oe=Ev(We,ze.mode,ot),Oe.return=ze,Oe):(Oe=i(Oe,We.children||[]),Oe.return=ze,Oe)}function I(ze,Oe,We,ot,st){return Oe===null||Oe.tag!==7?(Oe=$c(We,ze.mode,ot,st),Oe.return=ze,Oe):(Oe=i(Oe,We),Oe.return=ze,Oe)}function ye(ze,Oe,We){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=jv(""+Oe,ze.mode,We),Oe.return=ze,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case gh:return We=sp(Oe.type,Oe.key,Oe.props,null,ze.mode,We),We.ref=Md(ze,null,Oe),We.return=ze,We;case Au:return Oe=Ev(Oe,ze.mode,We),Oe.return=ze,Oe;case Ul:var ot=Oe._init;return ye(ze,ot(Oe._payload),We)}if(Nd(Oe)||bd(Oe))return Oe=$c(Oe,ze.mode,We,null),Oe.return=ze,Oe;Ch(ze,Oe)}return null}function xe(ze,Oe,We,ot){var st=Oe!==null?Oe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return st!==null?null:d(ze,Oe,""+We,ot);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case gh:return We.key===st?_(ze,Oe,We,ot):null;case Au:return We.key===st?N(ze,Oe,We,ot):null;case Ul:return st=We._init,xe(ze,Oe,st(We._payload),ot)}if(Nd(We)||bd(We))return st!==null?null:I(ze,Oe,We,ot,null);Ch(ze,We)}return null}function Ce(ze,Oe,We,ot,st){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return ze=ze.get(We)||null,d(Oe,ze,""+ot,st);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case gh:return ze=ze.get(ot.key===null?We:ot.key)||null,_(Oe,ze,ot,st);case Au:return ze=ze.get(ot.key===null?We:ot.key)||null,N(Oe,ze,ot,st);case Ul:var Rt=ot._init;return Ce(ze,Oe,We,Rt(ot._payload),st)}if(Nd(ot)||bd(ot))return ze=ze.get(We)||null,I(Oe,ze,ot,st,null);Ch(Oe,ot)}return null}function Ve(ze,Oe,We,ot){for(var st=null,Rt=null,wt=Oe,It=Oe=0,er=null;wt!==null&&It<We.length;It++){wt.index>It?(er=wt,wt=null):er=wt.sibling;var cr=xe(ze,wt,We[It],ot);if(cr===null){wt===null&&(wt=er);break}t&&wt&&cr.alternate===null&&e(ze,wt),Oe=a(cr,Oe,It),Rt===null?st=cr:Rt.sibling=cr,Rt=cr,wt=er}if(It===We.length)return r(ze,wt),ga&&Fc(ze,It),st;if(wt===null){for(;It<We.length;It++)wt=ye(ze,We[It],ot),wt!==null&&(Oe=a(wt,Oe,It),Rt===null?st=wt:Rt.sibling=wt,Rt=wt);return ga&&Fc(ze,It),st}for(wt=n(ze,wt);It<We.length;It++)er=Ce(wt,ze,It,We[It],ot),er!==null&&(t&&er.alternate!==null&&wt.delete(er.key===null?It:er.key),Oe=a(er,Oe,It),Rt===null?st=er:Rt.sibling=er,Rt=er);return t&&wt.forEach(function(Tr){return e(ze,Tr)}),ga&&Fc(ze,It),st}function Ye(ze,Oe,We,ot){var st=bd(We);if(typeof st!="function")throw Error(an(150));if(We=st.call(We),We==null)throw Error(an(151));for(var Rt=st=null,wt=Oe,It=Oe=0,er=null,cr=We.next();wt!==null&&!cr.done;It++,cr=We.next()){wt.index>It?(er=wt,wt=null):er=wt.sibling;var Tr=xe(ze,wt,cr.value,ot);if(Tr===null){wt===null&&(wt=er);break}t&&wt&&Tr.alternate===null&&e(ze,wt),Oe=a(Tr,Oe,It),Rt===null?st=Tr:Rt.sibling=Tr,Rt=Tr,wt=er}if(cr.done)return r(ze,wt),ga&&Fc(ze,It),st;if(wt===null){for(;!cr.done;It++,cr=We.next())cr=ye(ze,cr.value,ot),cr!==null&&(Oe=a(cr,Oe,It),Rt===null?st=cr:Rt.sibling=cr,Rt=cr);return ga&&Fc(ze,It),st}for(wt=n(ze,wt);!cr.done;It++,cr=We.next())cr=Ce(wt,ze,It,cr.value,ot),cr!==null&&(t&&cr.alternate!==null&&wt.delete(cr.key===null?It:cr.key),Oe=a(cr,Oe,It),Rt===null?st=cr:Rt.sibling=cr,Rt=cr);return t&&wt.forEach(function(xr){return e(ze,xr)}),ga&&Fc(ze,It),st}function qe(ze,Oe,We,ot){if(typeof We=="object"&&We!==null&&We.type===Cu&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case gh:e:{for(var st=We.key,Rt=Oe;Rt!==null;){if(Rt.key===st){if(st=We.type,st===Cu){if(Rt.tag===7){r(ze,Rt.sibling),Oe=i(Rt,We.props.children),Oe.return=ze,ze=Oe;break e}}else if(Rt.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ul&&Bx(st)===Rt.type){r(ze,Rt.sibling),Oe=i(Rt,We.props),Oe.ref=Md(ze,Rt,We),Oe.return=ze,ze=Oe;break e}r(ze,Rt);break}else e(ze,Rt);Rt=Rt.sibling}We.type===Cu?(Oe=$c(We.props.children,ze.mode,ot,We.key),Oe.return=ze,ze=Oe):(ot=sp(We.type,We.key,We.props,null,ze.mode,ot),ot.ref=Md(ze,Oe,We),ot.return=ze,ze=ot)}return s(ze);case Au:e:{for(Rt=We.key;Oe!==null;){if(Oe.key===Rt)if(Oe.tag===4&&Oe.stateNode.containerInfo===We.containerInfo&&Oe.stateNode.implementation===We.implementation){r(ze,Oe.sibling),Oe=i(Oe,We.children||[]),Oe.return=ze,ze=Oe;break e}else{r(ze,Oe);break}else e(ze,Oe);Oe=Oe.sibling}Oe=Ev(We,ze.mode,ot),Oe.return=ze,ze=Oe}return s(ze);case Ul:return Rt=We._init,qe(ze,Oe,Rt(We._payload),ot)}if(Nd(We))return Ve(ze,Oe,We,ot);if(bd(We))return Ye(ze,Oe,We,ot);Ch(ze,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Oe!==null&&Oe.tag===6?(r(ze,Oe.sibling),Oe=i(Oe,We),Oe.return=ze,ze=Oe):(r(ze,Oe),Oe=jv(We,ze.mode,ot),Oe.return=ze,ze=Oe),s(ze)):r(ze,Oe)}return qe}var Xu=d_(!0),f_=d_(!1),Lp=gc(null),Rp=null,zu=null,N0=null;function z0(){N0=zu=Rp=null}function F0(t){var e=Lp.current;da(Lp),t._currentValue=e}function Lg(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function qu(t,e){Rp=t,N0=zu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xs=!0),t.firstContext=null)}function To(t){var e=t._currentValue;if(N0!==t)if(t={context:t,memoizedValue:e,next:null},zu===null){if(Rp===null)throw Error(an(308));zu=t,Rp.dependencies={lanes:0,firstContext:t}}else zu=zu.next=t;return e}var Wc=null;function I0(t){Wc===null?Wc=[t]:Wc.push(t)}function h_(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,I0(e)):(r.next=i.next,i.next=r),e.interleaved=r,jl(t,n)}function jl(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var $l=!1;function O0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sc(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ei&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,jl(t,r)}return i=n.interleaved,i===null?(e.next=e,I0(n)):(e.next=i.next,i.next=e),n.interleaved=e,jl(t,r)}function ep(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,S0(t,r)}}function Hx(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Dp(t,e,r,n){var i=t.updateQueue;$l=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var _=d,N=_.next;_.next=null,s===null?a=N:s.next=N,s=_;var I=t.alternate;I!==null&&(I=I.updateQueue,d=I.lastBaseUpdate,d!==s&&(d===null?I.firstBaseUpdate=N:d.next=N,I.lastBaseUpdate=_))}if(a!==null){var ye=i.baseState;s=0,I=N=_=null,d=a;do{var xe=d.lane,Ce=d.eventTime;if((n&xe)===xe){I!==null&&(I=I.next={eventTime:Ce,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var Ve=t,Ye=d;switch(xe=e,Ce=r,Ye.tag){case 1:if(Ve=Ye.payload,typeof Ve=="function"){ye=Ve.call(Ce,ye,xe);break e}ye=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Ye.payload,xe=typeof Ve=="function"?Ve.call(Ce,ye,xe):Ve,xe==null)break e;ye=Aa({},ye,xe);break e;case 2:$l=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,xe=i.effects,xe===null?i.effects=[d]:xe.push(d))}else Ce={eventTime:Ce,lane:xe,tag:d.tag,payload:d.payload,callback:d.callback,next:null},I===null?(N=I=Ce,_=ye):I=I.next=Ce,s|=xe;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;xe=d,d=xe.next,xe.next=null,i.lastBaseUpdate=xe,i.shared.pending=null}}while(!0);if(I===null&&(_=ye),i.baseState=_,i.firstBaseUpdate=N,i.lastBaseUpdate=I,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Kc|=s,t.lanes=s,t.memoizedState=ye}}function Wx(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(an(191,i));i.call(n)}}}var Ff={},tl=gc(Ff),xf=gc(Ff),bf=gc(Ff);function qc(t){if(t===Ff)throw Error(an(174));return t}function B0(t,e){switch(aa(bf,e),aa(xf,t),aa(tl,Ff),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dg(e,t)}da(tl),aa(tl,e)}function Zu(){da(tl),da(xf),da(bf)}function m_(t){qc(bf.current);var e=qc(tl.current),r=dg(e,t.type);e!==r&&(aa(xf,t),aa(tl,r))}function H0(t){xf.current===t&&(da(tl),da(xf))}var Ma=gc(0);function Pp(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kv=[];function W0(){for(var t=0;t<kv.length;t++)kv[t]._workInProgressVersionPrimary=null;kv.length=0}var tp=Ll.ReactCurrentDispatcher,Sv=Ll.ReactCurrentBatchConfig,Jc=0,Ta=null,qa=null,Qa=null,Np=!1,Xd=!1,wf=0,R4=0;function xs(){throw Error(an(321))}function q0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ho(t[r],e[r]))return!1;return!0}function V0(t,e,r,n,i,a){if(Jc=a,Ta=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tp.current=t===null||t.memoizedState===null?z4:F4,t=r(n,i),Xd){a=0;do{if(Xd=!1,wf=0,25<=a)throw Error(an(301));a+=1,Qa=qa=null,e.updateQueue=null,tp.current=I4,t=r(n,i)}while(Xd)}if(tp.current=zp,e=qa!==null&&qa.next!==null,Jc=0,Qa=qa=Ta=null,Np=!1,e)throw Error(an(300));return t}function U0(){var t=wf!==0;return wf=0,t}function Zo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qa===null?Ta.memoizedState=Qa=t:Qa=Qa.next=t,Qa}function Ao(){if(qa===null){var t=Ta.alternate;t=t!==null?t.memoizedState:null}else t=qa.next;var e=Qa===null?Ta.memoizedState:Qa.next;if(e!==null)Qa=e,qa=t;else{if(t===null)throw Error(an(310));qa=t,t={memoizedState:qa.memoizedState,baseState:qa.baseState,baseQueue:qa.baseQueue,queue:qa.queue,next:null},Qa===null?Ta.memoizedState=Qa=t:Qa=Qa.next=t}return Qa}function _f(t,e){return typeof e=="function"?e(t):e}function Mv(t){var e=Ao(),r=e.queue;if(r===null)throw Error(an(311));r.lastRenderedReducer=t;var n=qa,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var d=s=null,_=null,N=a;do{var I=N.lane;if((Jc&I)===I)_!==null&&(_=_.next={lane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),n=N.hasEagerState?N.eagerState:t(n,N.action);else{var ye={lane:I,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null};_===null?(d=_=ye,s=n):_=_.next=ye,Ta.lanes|=I,Kc|=I}N=N.next}while(N!==null&&N!==a);_===null?s=n:_.next=d,Ho(n,e.memoizedState)||(Xs=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=_,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,Ta.lanes|=a,Kc|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Tv(t){var e=Ao(),r=e.queue;if(r===null)throw Error(an(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Ho(a,e.memoizedState)||(Xs=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function v_(){}function g_(t,e){var r=Ta,n=Ao(),i=e(),a=!Ho(n.memoizedState,i);if(a&&(n.memoizedState=i,Xs=!0),n=n.queue,$0(b_.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Qa!==null&&Qa.memoizedState.tag&1){if(r.flags|=2048,kf(9,x_.bind(null,r,n,i,e),void 0,null),Ka===null)throw Error(an(349));Jc&30||y_(r,e,i)}return i}function y_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ta.updateQueue,e===null?(e={lastEffect:null,stores:null},Ta.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function x_(t,e,r,n){e.value=r,e.getSnapshot=n,w_(e)&&__(t)}function b_(t,e,r){return r(function(){w_(e)&&__(t)})}function w_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ho(t,r)}catch{return!0}}function __(t){var e=jl(t,1);e!==null&&Oo(e,t,1,-1)}function qx(t){var e=Zo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_f,lastRenderedState:t},e.queue=t,t=t.dispatch=N4.bind(null,Ta,t),[e.memoizedState,t]}function kf(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ta.updateQueue,e===null?(e={lastEffect:null,stores:null},Ta.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function k_(){return Ao().memoizedState}function rp(t,e,r,n){var i=Zo();Ta.flags|=t,i.memoizedState=kf(1|e,r,void 0,n===void 0?null:n)}function im(t,e,r,n){var i=Ao();n=n===void 0?null:n;var a=void 0;if(qa!==null){var s=qa.memoizedState;if(a=s.destroy,n!==null&&q0(n,s.deps)){i.memoizedState=kf(e,r,a,n);return}}Ta.flags|=t,i.memoizedState=kf(1|e,r,a,n)}function Vx(t,e){return rp(8390656,8,t,e)}function $0(t,e){return im(2048,8,t,e)}function S_(t,e){return im(4,2,t,e)}function M_(t,e){return im(4,4,t,e)}function T_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A_(t,e,r){return r=r!=null?r.concat([t]):null,im(4,4,T_.bind(null,e,t),r)}function Y0(){}function C_(t,e){var r=Ao();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&q0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function j_(t,e){var r=Ao();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&q0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function E_(t,e,r){return Jc&21?(Ho(r,e)||(r=Nw(),Ta.lanes|=r,Kc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xs=!0),t.memoizedState=r)}function D4(t,e){var r=$i;$i=r!==0&&4>r?r:4,t(!0);var n=Sv.transition;Sv.transition={};try{t(!1),e()}finally{$i=r,Sv.transition=n}}function L_(){return Ao().memoizedState}function P4(t,e,r){var n=lc(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},R_(t))D_(e,r);else if(r=h_(t,e,r,n),r!==null){var i=zs();Oo(r,t,n,i),P_(r,e,n)}}function N4(t,e,r){var n=lc(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(R_(t))D_(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,d=a(s,r);if(i.hasEagerState=!0,i.eagerState=d,Ho(d,s)){var _=e.interleaved;_===null?(i.next=i,I0(e)):(i.next=_.next,_.next=i),e.interleaved=i;return}}catch{}finally{}r=h_(t,e,i,n),r!==null&&(i=zs(),Oo(r,t,n,i),P_(r,e,n))}}function R_(t){var e=t.alternate;return t===Ta||e!==null&&e===Ta}function D_(t,e){Xd=Np=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function P_(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,S0(t,r)}}var zp={readContext:To,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},z4={readContext:To,useCallback:function(t,e){return Zo().memoizedState=[t,e===void 0?null:e],t},useContext:To,useEffect:Vx,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,rp(4194308,4,T_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return rp(4194308,4,t,e)},useInsertionEffect:function(t,e){return rp(4,2,t,e)},useMemo:function(t,e){var r=Zo();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Zo();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=P4.bind(null,Ta,t),[n.memoizedState,t]},useRef:function(t){var e=Zo();return t={current:t},e.memoizedState=t},useState:qx,useDebugValue:Y0,useDeferredValue:function(t){return Zo().memoizedState=t},useTransition:function(){var t=qx(!1),e=t[0];return t=D4.bind(null,t[1]),Zo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ta,i=Zo();if(ga){if(r===void 0)throw Error(an(407));r=r()}else{if(r=e(),Ka===null)throw Error(an(349));Jc&30||y_(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,Vx(b_.bind(null,n,a,t),[t]),n.flags|=2048,kf(9,x_.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Zo(),e=Ka.identifierPrefix;if(ga){var r=_l,n=wl;r=(n&~(1<<32-Io(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=wf++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=R4++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},F4={readContext:To,useCallback:C_,useContext:To,useEffect:$0,useImperativeHandle:A_,useInsertionEffect:S_,useLayoutEffect:M_,useMemo:j_,useReducer:Mv,useRef:k_,useState:function(){return Mv(_f)},useDebugValue:Y0,useDeferredValue:function(t){var e=Ao();return E_(e,qa.memoizedState,t)},useTransition:function(){var t=Mv(_f)[0],e=Ao().memoizedState;return[t,e]},useMutableSource:v_,useSyncExternalStore:g_,useId:L_,unstable_isNewReconciler:!1},I4={readContext:To,useCallback:C_,useContext:To,useEffect:$0,useImperativeHandle:A_,useInsertionEffect:S_,useLayoutEffect:M_,useMemo:j_,useReducer:Tv,useRef:k_,useState:function(){return Tv(_f)},useDebugValue:Y0,useDeferredValue:function(t){var e=Ao();return qa===null?e.memoizedState=t:E_(e,qa.memoizedState,t)},useTransition:function(){var t=Tv(_f)[0],e=Ao().memoizedState;return[t,e]},useMutableSource:v_,useSyncExternalStore:g_,useId:L_,unstable_isNewReconciler:!1};function Po(t,e){if(t&&t.defaultProps){e=Aa({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Rg(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Aa({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var am={isMounted:function(t){return(t=t._reactInternals)?iu(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=zs(),i=lc(t),a=Tl(n,i);a.payload=e,r!=null&&(a.callback=r),e=sc(t,a,i),e!==null&&(Oo(e,t,i,n),ep(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=zs(),i=lc(t),a=Tl(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=sc(t,a,i),e!==null&&(Oo(e,t,i,n),ep(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=zs(),n=lc(t),i=Tl(r,n);i.tag=2,e!=null&&(i.callback=e),e=sc(t,i,n),e!==null&&(Oo(e,t,n,r),ep(e,t,n))}};function Ux(t,e,r,n,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,s):e.prototype&&e.prototype.isPureReactComponent?!mf(r,n)||!mf(i,a):!0}function N_(t,e,r){var n=!1,i=hc,a=e.contextType;return typeof a=="object"&&a!==null?a=To(a):(i=Qs(e)?Zc:Ms.current,n=e.contextTypes,a=(n=n!=null)?Yu(t,i):hc),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=am,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function $x(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&am.enqueueReplaceState(e,e.state,null)}function Dg(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},O0(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=To(a):(a=Qs(e)?Zc:Ms.current,i.context=Yu(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Rg(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&am.enqueueReplaceState(i,i.state,null),Dp(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qu(t,e){try{var r="",n=e;do r+=fA(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Av(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Pg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var O4=typeof WeakMap=="function"?WeakMap:Map;function z_(t,e,r){r=Tl(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ip||(Ip=!0,Vg=n),Pg(t,e)},r}function F_(t,e,r){r=Tl(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Pg(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Pg(t,e),typeof n!="function"&&(oc===null?oc=new Set([this]):oc.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function Yx(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new O4;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=K4.bind(null,t,e,r),e.then(t,t))}function Gx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xx(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Tl(-1,1),e.tag=2,sc(r,e,1))),r.lanes|=1),t)}var B4=Ll.ReactCurrentOwner,Xs=!1;function Ns(t,e,r,n){e.child=t===null?f_(e,null,r,n):Xu(e,t.child,r,n)}function Zx(t,e,r,n,i){r=r.render;var a=e.ref;return qu(e,i),n=V0(t,e,r,n,a,i),r=U0(),t!==null&&!Xs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,El(t,e,i)):(ga&&r&&R0(e),e.flags|=1,Ns(t,e,n,i),e.child)}function Qx(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!ty(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,I_(t,e,a,n,i)):(t=sp(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:mf,r(s,n)&&t.ref===e.ref)return El(t,e,i)}return e.flags|=1,t=cc(a,n),t.ref=e.ref,t.return=e,e.child=t}function I_(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(mf(a,n)&&t.ref===e.ref)if(Xs=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Xs=!0);else return e.lanes=t.lanes,El(t,e,i)}return Ng(t,e,r,n,i)}function O_(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},aa(Iu,io),io|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,aa(Iu,io),io|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,aa(Iu,io),io|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,aa(Iu,io),io|=n;return Ns(t,e,i,r),e.child}function B_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ng(t,e,r,n,i){var a=Qs(r)?Zc:Ms.current;return a=Yu(e,a),qu(e,i),r=V0(t,e,r,n,a,i),n=U0(),t!==null&&!Xs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,El(t,e,i)):(ga&&n&&R0(e),e.flags|=1,Ns(t,e,r,i),e.child)}function Jx(t,e,r,n,i){if(Qs(r)){var a=!0;Cp(e)}else a=!1;if(qu(e,i),e.stateNode===null)np(t,e),N_(e,r,n),Dg(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,d=e.memoizedProps;s.props=d;var _=s.context,N=r.contextType;typeof N=="object"&&N!==null?N=To(N):(N=Qs(r)?Zc:Ms.current,N=Yu(e,N));var I=r.getDerivedStateFromProps,ye=typeof I=="function"||typeof s.getSnapshotBeforeUpdate=="function";ye||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(d!==n||_!==N)&&$x(e,s,n,N),$l=!1;var xe=e.memoizedState;s.state=xe,Dp(e,n,s,i),_=e.memoizedState,d!==n||xe!==_||Zs.current||$l?(typeof I=="function"&&(Rg(e,r,I,n),_=e.memoizedState),(d=$l||Ux(e,r,d,n,xe,_,N))?(ye||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=_),s.props=n,s.state=_,s.context=N,n=d):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,p_(t,e),d=e.memoizedProps,N=e.type===e.elementType?d:Po(e.type,d),s.props=N,ye=e.pendingProps,xe=s.context,_=r.contextType,typeof _=="object"&&_!==null?_=To(_):(_=Qs(r)?Zc:Ms.current,_=Yu(e,_));var Ce=r.getDerivedStateFromProps;(I=typeof Ce=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(d!==ye||xe!==_)&&$x(e,s,n,_),$l=!1,xe=e.memoizedState,s.state=xe,Dp(e,n,s,i);var Ve=e.memoizedState;d!==ye||xe!==Ve||Zs.current||$l?(typeof Ce=="function"&&(Rg(e,r,Ce,n),Ve=e.memoizedState),(N=$l||Ux(e,r,N,n,xe,Ve,_)||!1)?(I||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,Ve,_),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,Ve,_)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||d===t.memoizedProps&&xe===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&xe===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=Ve),s.props=n,s.state=Ve,s.context=_,n=N):(typeof s.componentDidUpdate!="function"||d===t.memoizedProps&&xe===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&xe===t.memoizedState||(e.flags|=1024),n=!1)}return zg(t,e,r,n,a,i)}function zg(t,e,r,n,i,a){B_(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&Fx(e,r,!1),El(t,e,a);n=e.stateNode,B4.current=e;var d=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Xu(e,t.child,null,a),e.child=Xu(e,null,d,a)):Ns(t,e,d,a),e.memoizedState=n.state,i&&Fx(e,r,!0),e.child}function H_(t){var e=t.stateNode;e.pendingContext?zx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zx(t,e.context,!1),B0(t,e.containerInfo)}function Kx(t,e,r,n,i){return Gu(),P0(i),e.flags|=256,Ns(t,e,r,n),e.child}var Fg={dehydrated:null,treeContext:null,retryLane:0};function Ig(t){return{baseLanes:t,cachePool:null,transitions:null}}function W_(t,e,r){var n=e.pendingProps,i=Ma.current,a=!1,s=(e.flags&128)!==0,d;if((d=s)||(d=t!==null&&t.memoizedState===null?!1:(i&2)!==0),d?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),aa(Ma,i&1),t===null)return Eg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,a?(n=e.mode,a=e.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=lm(s,n,0,null),t=$c(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Ig(r),e.memoizedState=Fg,t):G0(e,s));if(i=t.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return H4(t,e,s,n,d,i,r);if(a){a=n.fallback,s=e.mode,i=t.child,d=i.sibling;var _={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=_,e.deletions=null):(n=cc(i,_),n.subtreeFlags=i.subtreeFlags&14680064),d!==null?a=cc(d,a):(a=$c(a,s,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,s=t.child.memoizedState,s=s===null?Ig(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~r,e.memoizedState=Fg,n}return a=t.child,t=a.sibling,n=cc(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function G0(t,e){return e=lm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jh(t,e,r,n){return n!==null&&P0(n),Xu(e,t.child,null,r),t=G0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function H4(t,e,r,n,i,a,s){if(r)return e.flags&256?(e.flags&=-257,n=Av(Error(an(422))),jh(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=lm({mode:"visible",children:n.children},i,0,null),a=$c(a,i,s,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Xu(e,t.child,null,s),e.child.memoizedState=Ig(s),e.memoizedState=Fg,a);if(!(e.mode&1))return jh(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var d=n.dgst;return n=d,a=Error(an(419)),n=Av(a,n,void 0),jh(t,e,s,n)}if(d=(s&t.childLanes)!==0,Xs||d){if(n=Ka,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,jl(t,i),Oo(n,t,i,-1))}return ey(),n=Av(Error(an(421))),jh(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=eC.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ao=ac(i.nextSibling),so=e,ga=!0,zo=null,t!==null&&(wo[_o++]=wl,wo[_o++]=_l,wo[_o++]=Qc,wl=t.id,_l=t.overflow,Qc=e),e=G0(e,n.children),e.flags|=4096,e)}function eb(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Lg(t.return,e,r)}function Cv(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function q_(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Ns(t,e,n.children,r),n=Ma.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eb(t,r,e);else if(t.tag===19)eb(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(aa(Ma,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Pp(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Cv(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Pp(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Cv(e,!0,r,null,a);break;case"together":Cv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function np(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function El(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Kc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(an(153));if(e.child!==null){for(t=e.child,r=cc(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=cc(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function W4(t,e,r){switch(e.tag){case 3:H_(e),Gu();break;case 5:m_(e);break;case 1:Qs(e.type)&&Cp(e);break;case 4:B0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;aa(Lp,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(aa(Ma,Ma.current&1),e.flags|=128,null):r&e.child.childLanes?W_(t,e,r):(aa(Ma,Ma.current&1),t=El(t,e,r),t!==null?t.sibling:null);aa(Ma,Ma.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return q_(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),aa(Ma,Ma.current),n)break;return null;case 22:case 23:return e.lanes=0,O_(t,e,r)}return El(t,e,r)}var V_,Og,U_,$_;V_=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Og=function(){};U_=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,qc(tl.current);var a=null;switch(r){case"input":i=og(t,i),n=og(t,n),a=[];break;case"select":i=Aa({},i,{value:void 0}),n=Aa({},n,{value:void 0}),a=[];break;case"textarea":i=ug(t,i),n=ug(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Tp)}fg(r,n);var s;r=null;for(N in i)if(!n.hasOwnProperty(N)&&i.hasOwnProperty(N)&&i[N]!=null)if(N==="style"){var d=i[N];for(s in d)d.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else N!=="dangerouslySetInnerHTML"&&N!=="children"&&N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(lf.hasOwnProperty(N)?a||(a=[]):(a=a||[]).push(N,null));for(N in n){var _=n[N];if(d=i!=null?i[N]:void 0,n.hasOwnProperty(N)&&_!==d&&(_!=null||d!=null))if(N==="style")if(d){for(s in d)!d.hasOwnProperty(s)||_&&_.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in _)_.hasOwnProperty(s)&&d[s]!==_[s]&&(r||(r={}),r[s]=_[s])}else r||(a||(a=[]),a.push(N,r)),r=_;else N==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,d=d?d.__html:void 0,_!=null&&d!==_&&(a=a||[]).push(N,_)):N==="children"?typeof _!="string"&&typeof _!="number"||(a=a||[]).push(N,""+_):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&(lf.hasOwnProperty(N)?(_!=null&&N==="onScroll"&&ua("scroll",t),a||d===_||(a=[])):(a=a||[]).push(N,_))}r&&(a=a||[]).push("style",r);var N=a;(e.updateQueue=N)&&(e.flags|=4)}};$_=function(t,e,r,n){r!==n&&(e.flags|=4)};function Td(t,e){if(!ga)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function bs(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function q4(t,e,r){var n=e.pendingProps;switch(D0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bs(e),null;case 1:return Qs(e.type)&&Ap(),bs(e),null;case 3:return n=e.stateNode,Zu(),da(Zs),da(Ms),W0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ah(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zo!==null&&(Yg(zo),zo=null))),Og(t,e),bs(e),null;case 5:H0(e);var i=qc(bf.current);if(r=e.type,t!==null&&e.stateNode!=null)U_(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(an(166));return bs(e),null}if(t=qc(tl.current),Ah(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Jo]=e,n[yf]=a,t=(e.mode&1)!==0,r){case"dialog":ua("cancel",n),ua("close",n);break;case"iframe":case"object":case"embed":ua("load",n);break;case"video":case"audio":for(i=0;i<Fd.length;i++)ua(Fd[i],n);break;case"source":ua("error",n);break;case"img":case"image":case"link":ua("error",n),ua("load",n);break;case"details":ua("toggle",n);break;case"input":cx(n,a),ua("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ua("invalid",n);break;case"textarea":dx(n,a),ua("invalid",n)}fg(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var d=a[s];s==="children"?typeof d=="string"?n.textContent!==d&&(a.suppressHydrationWarning!==!0&&Th(n.textContent,d,t),i=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&Th(n.textContent,d,t),i=["children",""+d]):lf.hasOwnProperty(s)&&d!=null&&s==="onScroll"&&ua("scroll",n)}switch(r){case"input":yh(n),ux(n,a,!0);break;case"textarea":yh(n),fx(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Tp)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bw(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Jo]=e,t[yf]=n,V_(t,e,!1,!1),e.stateNode=t;e:{switch(s=hg(r,n),r){case"dialog":ua("cancel",t),ua("close",t),i=n;break;case"iframe":case"object":case"embed":ua("load",t),i=n;break;case"video":case"audio":for(i=0;i<Fd.length;i++)ua(Fd[i],t);i=n;break;case"source":ua("error",t),i=n;break;case"img":case"image":case"link":ua("error",t),ua("load",t),i=n;break;case"details":ua("toggle",t),i=n;break;case"input":cx(t,n),i=og(t,n),ua("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Aa({},n,{value:void 0}),ua("invalid",t);break;case"textarea":dx(t,n),i=ug(t,n),ua("invalid",t);break;default:i=n}fg(r,i),d=i;for(a in d)if(d.hasOwnProperty(a)){var _=d[a];a==="style"?kw(t,_):a==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&ww(t,_)):a==="children"?typeof _=="string"?(r!=="textarea"||_!=="")&&cf(t,_):typeof _=="number"&&cf(t,""+_):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(lf.hasOwnProperty(a)?_!=null&&a==="onScroll"&&ua("scroll",t):_!=null&&y0(t,a,_,s))}switch(r){case"input":yh(t),ux(t,n,!1);break;case"textarea":yh(t),fx(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fc(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Ou(t,!!n.multiple,a,!1):n.defaultValue!=null&&Ou(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tp)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bs(e),null;case 6:if(t&&e.stateNode!=null)$_(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(an(166));if(r=qc(bf.current),qc(tl.current),Ah(e)){if(n=e.stateNode,r=e.memoizedProps,n[Jo]=e,(a=n.nodeValue!==r)&&(t=so,t!==null))switch(t.tag){case 3:Th(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Th(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Jo]=e,e.stateNode=n}return bs(e),null;case 13:if(da(Ma),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ga&&ao!==null&&e.mode&1&&!(e.flags&128))u_(),Gu(),e.flags|=98560,a=!1;else if(a=Ah(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(an(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(an(317));a[Jo]=e}else Gu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bs(e),a=!1}else zo!==null&&(Yg(zo),zo=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ma.current&1?Va===0&&(Va=3):ey())),e.updateQueue!==null&&(e.flags|=4),bs(e),null);case 4:return Zu(),Og(t,e),t===null&&vf(e.stateNode.containerInfo),bs(e),null;case 10:return F0(e.type._context),bs(e),null;case 17:return Qs(e.type)&&Ap(),bs(e),null;case 19:if(da(Ma),a=e.memoizedState,a===null)return bs(e),null;if(n=(e.flags&128)!==0,s=a.rendering,s===null)if(n)Td(a,!1);else{if(Va!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Pp(t),s!==null){for(e.flags|=128,Td(a,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return aa(Ma,Ma.current&1|2),e.child}t=t.sibling}a.tail!==null&&za()>Ju&&(e.flags|=128,n=!0,Td(a,!1),e.lanes=4194304)}else{if(!n)if(t=Pp(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Td(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!ga)return bs(e),null}else 2*za()-a.renderingStartTime>Ju&&r!==1073741824&&(e.flags|=128,n=!0,Td(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(r=a.last,r!==null?r.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=za(),e.sibling=null,r=Ma.current,aa(Ma,n?r&1|2:r&1),e):(bs(e),null);case 22:case 23:return K0(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?io&1073741824&&(bs(e),e.subtreeFlags&6&&(e.flags|=8192)):bs(e),null;case 24:return null;case 25:return null}throw Error(an(156,e.tag))}function V4(t,e){switch(D0(e),e.tag){case 1:return Qs(e.type)&&Ap(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zu(),da(Zs),da(Ms),W0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return H0(e),null;case 13:if(da(Ma),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(an(340));Gu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return da(Ma),null;case 4:return Zu(),null;case 10:return F0(e.type._context),null;case 22:case 23:return K0(),null;case 24:return null;default:return null}}var Eh=!1,ks=!1,U4=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function Fu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ja(t,e,n)}else r.current=null}function Bg(t,e,r){try{r()}catch(n){ja(t,e,n)}}var tb=!1;function $4(t,e){if(kg=kp,t=Qw(),L0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,d=-1,_=-1,N=0,I=0,ye=t,xe=null;t:for(;;){for(var Ce;ye!==r||i!==0&&ye.nodeType!==3||(d=s+i),ye!==a||n!==0&&ye.nodeType!==3||(_=s+n),ye.nodeType===3&&(s+=ye.nodeValue.length),(Ce=ye.firstChild)!==null;)xe=ye,ye=Ce;for(;;){if(ye===t)break t;if(xe===r&&++N===i&&(d=s),xe===a&&++I===n&&(_=s),(Ce=ye.nextSibling)!==null)break;ye=xe,xe=ye.parentNode}ye=Ce}r=d===-1||_===-1?null:{start:d,end:_}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sg={focusedElem:t,selectionRange:r},kp=!1,Cn=e;Cn!==null;)if(e=Cn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Cn=t;else for(;Cn!==null;){e=Cn;try{var Ve=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var Ye=Ve.memoizedProps,qe=Ve.memoizedState,ze=e.stateNode,Oe=ze.getSnapshotBeforeUpdate(e.elementType===e.type?Ye:Po(e.type,Ye),qe);ze.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:var We=e.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(an(163))}}catch(ot){ja(e,e.return,ot)}if(t=e.sibling,t!==null){t.return=e.return,Cn=t;break}Cn=e.return}return Ve=tb,tb=!1,Ve}function Zd(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Bg(e,r,a)}i=i.next}while(i!==n)}}function sm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Hg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Y_(t){var e=t.alternate;e!==null&&(t.alternate=null,Y_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jo],delete e[yf],delete e[Ag],delete e[C4],delete e[j4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function G_(t){return t.tag===5||t.tag===3||t.tag===4}function rb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||G_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Tp));else if(n!==4&&(t=t.child,t!==null))for(Wg(t,e,r),t=t.sibling;t!==null;)Wg(t,e,r),t=t.sibling}function qg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(qg(t,e,r),t=t.sibling;t!==null;)qg(t,e,r),t=t.sibling}var ss=null,No=!1;function Vl(t,e,r){for(r=r.child;r!==null;)X_(t,e,r),r=r.sibling}function X_(t,e,r){if(el&&typeof el.onCommitFiberUnmount=="function")try{el.onCommitFiberUnmount(Jp,r)}catch{}switch(r.tag){case 5:ks||Fu(r,e);case 6:var n=ss,i=No;ss=null,Vl(t,e,r),ss=n,No=i,ss!==null&&(No?(t=ss,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ss.removeChild(r.stateNode));break;case 18:ss!==null&&(No?(t=ss,r=r.stateNode,t.nodeType===8?wv(t.parentNode,r):t.nodeType===1&&wv(t,r),hf(t)):wv(ss,r.stateNode));break;case 4:n=ss,i=No,ss=r.stateNode.containerInfo,No=!0,Vl(t,e,r),ss=n,No=i;break;case 0:case 11:case 14:case 15:if(!ks&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Bg(r,e,s),i=i.next}while(i!==n)}Vl(t,e,r);break;case 1:if(!ks&&(Fu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(d){ja(r,e,d)}Vl(t,e,r);break;case 21:Vl(t,e,r);break;case 22:r.mode&1?(ks=(n=ks)||r.memoizedState!==null,Vl(t,e,r),ks=n):Vl(t,e,r);break;default:Vl(t,e,r)}}function nb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new U4),e.forEach(function(n){var i=tC.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Do(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,s=e,d=s;e:for(;d!==null;){switch(d.tag){case 5:ss=d.stateNode,No=!1;break e;case 3:ss=d.stateNode.containerInfo,No=!0;break e;case 4:ss=d.stateNode.containerInfo,No=!0;break e}d=d.return}if(ss===null)throw Error(an(160));X_(a,s,i),ss=null,No=!1;var _=i.alternate;_!==null&&(_.return=null),i.return=null}catch(N){ja(i,e,N)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Z_(e,t),e=e.sibling}function Z_(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Do(e,t),Go(t),n&4){try{Zd(3,t,t.return),sm(3,t)}catch(Ye){ja(t,t.return,Ye)}try{Zd(5,t,t.return)}catch(Ye){ja(t,t.return,Ye)}}break;case 1:Do(e,t),Go(t),n&512&&r!==null&&Fu(r,r.return);break;case 5:if(Do(e,t),Go(t),n&512&&r!==null&&Fu(r,r.return),t.flags&32){var i=t.stateNode;try{cf(i,"")}catch(Ye){ja(t,t.return,Ye)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=r!==null?r.memoizedProps:a,d=t.type,_=t.updateQueue;if(t.updateQueue=null,_!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&yw(i,a),hg(d,s);var N=hg(d,a);for(s=0;s<_.length;s+=2){var I=_[s],ye=_[s+1];I==="style"?kw(i,ye):I==="dangerouslySetInnerHTML"?ww(i,ye):I==="children"?cf(i,ye):y0(i,I,ye,N)}switch(d){case"input":lg(i,a);break;case"textarea":xw(i,a);break;case"select":var xe=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var Ce=a.value;Ce!=null?Ou(i,!!a.multiple,Ce,!1):xe!==!!a.multiple&&(a.defaultValue!=null?Ou(i,!!a.multiple,a.defaultValue,!0):Ou(i,!!a.multiple,a.multiple?[]:"",!1))}i[yf]=a}catch(Ye){ja(t,t.return,Ye)}}break;case 6:if(Do(e,t),Go(t),n&4){if(t.stateNode===null)throw Error(an(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(Ye){ja(t,t.return,Ye)}}break;case 3:if(Do(e,t),Go(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{hf(e.containerInfo)}catch(Ye){ja(t,t.return,Ye)}break;case 4:Do(e,t),Go(t);break;case 13:Do(e,t),Go(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Q0=za())),n&4&&nb(t);break;case 22:if(I=r!==null&&r.memoizedState!==null,t.mode&1?(ks=(N=ks)||I,Do(e,t),ks=N):Do(e,t),Go(t),n&8192){if(N=t.memoizedState!==null,(t.stateNode.isHidden=N)&&!I&&t.mode&1)for(Cn=t,I=t.child;I!==null;){for(ye=Cn=I;Cn!==null;){switch(xe=Cn,Ce=xe.child,xe.tag){case 0:case 11:case 14:case 15:Zd(4,xe,xe.return);break;case 1:Fu(xe,xe.return);var Ve=xe.stateNode;if(typeof Ve.componentWillUnmount=="function"){n=xe,r=xe.return;try{e=n,Ve.props=e.memoizedProps,Ve.state=e.memoizedState,Ve.componentWillUnmount()}catch(Ye){ja(n,r,Ye)}}break;case 5:Fu(xe,xe.return);break;case 22:if(xe.memoizedState!==null){ab(ye);continue}}Ce!==null?(Ce.return=xe,Cn=Ce):ab(ye)}I=I.sibling}e:for(I=null,ye=t;;){if(ye.tag===5){if(I===null){I=ye;try{i=ye.stateNode,N?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=ye.stateNode,_=ye.memoizedProps.style,s=_!=null&&_.hasOwnProperty("display")?_.display:null,d.style.display=_w("display",s))}catch(Ye){ja(t,t.return,Ye)}}}else if(ye.tag===6){if(I===null)try{ye.stateNode.nodeValue=N?"":ye.memoizedProps}catch(Ye){ja(t,t.return,Ye)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===t)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===t)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===t)break e;I===ye&&(I=null),ye=ye.return}I===ye&&(I=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:Do(e,t),Go(t),n&4&&nb(t);break;case 21:break;default:Do(e,t),Go(t)}}function Go(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(G_(r)){var n=r;break e}r=r.return}throw Error(an(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(cf(i,""),n.flags&=-33);var a=rb(t);qg(t,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,d=rb(t);Wg(t,d,s);break;default:throw Error(an(161))}}catch(_){ja(t,t.return,_)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Y4(t,e,r){Cn=t,Q_(t)}function Q_(t,e,r){for(var n=(t.mode&1)!==0;Cn!==null;){var i=Cn,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Eh;if(!s){var d=i.alternate,_=d!==null&&d.memoizedState!==null||ks;d=Eh;var N=ks;if(Eh=s,(ks=_)&&!N)for(Cn=i;Cn!==null;)s=Cn,_=s.child,s.tag===22&&s.memoizedState!==null?sb(i):_!==null?(_.return=s,Cn=_):sb(i);for(;a!==null;)Cn=a,Q_(a),a=a.sibling;Cn=i,Eh=d,ks=N}ib(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Cn=a):ib(t)}}function ib(t){for(;Cn!==null;){var e=Cn;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ks||sm(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ks)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Po(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Wx(e,a,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Wx(e,s,r)}break;case 5:var d=e.stateNode;if(r===null&&e.flags&4){r=d;var _=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&r.focus();break;case"img":_.src&&(r.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var N=e.alternate;if(N!==null){var I=N.memoizedState;if(I!==null){var ye=I.dehydrated;ye!==null&&hf(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(an(163))}ks||e.flags&512&&Hg(e)}catch(xe){ja(e,e.return,xe)}}if(e===t){Cn=null;break}if(r=e.sibling,r!==null){r.return=e.return,Cn=r;break}Cn=e.return}}function ab(t){for(;Cn!==null;){var e=Cn;if(e===t){Cn=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Cn=r;break}Cn=e.return}}function sb(t){for(;Cn!==null;){var e=Cn;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{sm(4,e)}catch(_){ja(e,r,_)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(_){ja(e,i,_)}}var a=e.return;try{Hg(e)}catch(_){ja(e,a,_)}break;case 5:var s=e.return;try{Hg(e)}catch(_){ja(e,s,_)}}}catch(_){ja(e,e.return,_)}if(e===t){Cn=null;break}var d=e.sibling;if(d!==null){d.return=e.return,Cn=d;break}Cn=e.return}}var G4=Math.ceil,Fp=Ll.ReactCurrentDispatcher,X0=Ll.ReactCurrentOwner,So=Ll.ReactCurrentBatchConfig,Ei=0,Ka=null,Ha=null,ls=0,io=0,Iu=gc(0),Va=0,Sf=null,Kc=0,om=0,Z0=0,Qd=null,Ys=null,Q0=0,Ju=1/0,yl=null,Ip=!1,Vg=null,oc=null,Lh=!1,Zl=null,Op=0,Jd=0,Ug=null,ip=-1,ap=0;function zs(){return Ei&6?za():ip!==-1?ip:ip=za()}function lc(t){return t.mode&1?Ei&2&&ls!==0?ls&-ls:L4.transition!==null?(ap===0&&(ap=Nw()),ap):(t=$i,t!==0||(t=window.event,t=t===void 0?16:Ww(t.type)),t):1}function Oo(t,e,r,n){if(50<Jd)throw Jd=0,Ug=null,Error(an(185));Pf(t,r,n),(!(Ei&2)||t!==Ka)&&(t===Ka&&(!(Ei&2)&&(om|=r),Va===4&&Gl(t,ls)),Js(t,n),r===1&&Ei===0&&!(e.mode&1)&&(Ju=za()+500,nm&&yc()))}function Js(t,e){var r=t.callbackNode;LA(t,e);var n=_p(t,t===Ka?ls:0);if(n===0)r!==null&&mx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&mx(r),e===1)t.tag===0?E4(ob.bind(null,t)):o_(ob.bind(null,t)),T4(function(){!(Ei&6)&&yc()}),r=null;else{switch(zw(n)){case 1:r=k0;break;case 4:r=Dw;break;case 16:r=wp;break;case 536870912:r=Pw;break;default:r=wp}r=a3(r,J_.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function J_(t,e){if(ip=-1,ap=0,Ei&6)throw Error(an(327));var r=t.callbackNode;if(Vu()&&t.callbackNode!==r)return null;var n=_p(t,t===Ka?ls:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Bp(t,n);else{e=n;var i=Ei;Ei|=2;var a=e3();(Ka!==t||ls!==e)&&(yl=null,Ju=za()+500,Uc(t,e));do try{Q4();break}catch(d){K_(t,d)}while(!0);z0(),Fp.current=a,Ei=i,Ha!==null?e=0:(Ka=null,ls=0,e=Va)}if(e!==0){if(e===2&&(i=yg(t),i!==0&&(n=i,e=$g(t,i))),e===1)throw r=Sf,Uc(t,0),Gl(t,n),Js(t,za()),r;if(e===6)Gl(t,n);else{if(i=t.current.alternate,!(n&30)&&!X4(i)&&(e=Bp(t,n),e===2&&(a=yg(t),a!==0&&(n=a,e=$g(t,a))),e===1))throw r=Sf,Uc(t,0),Gl(t,n),Js(t,za()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(an(345));case 2:Ic(t,Ys,yl);break;case 3:if(Gl(t,n),(n&130023424)===n&&(e=Q0+500-za(),10<e)){if(_p(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){zs(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Tg(Ic.bind(null,t,Ys,yl),e);break}Ic(t,Ys,yl);break;case 4:if(Gl(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-Io(n);a=1<<s,s=e[s],s>i&&(i=s),n&=~a}if(n=i,n=za()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*G4(n/1960))-n,10<n){t.timeoutHandle=Tg(Ic.bind(null,t,Ys,yl),n);break}Ic(t,Ys,yl);break;case 5:Ic(t,Ys,yl);break;default:throw Error(an(329))}}}return Js(t,za()),t.callbackNode===r?J_.bind(null,t):null}function $g(t,e){var r=Qd;return t.current.memoizedState.isDehydrated&&(Uc(t,e).flags|=256),t=Bp(t,e),t!==2&&(e=Ys,Ys=r,e!==null&&Yg(e)),t}function Yg(t){Ys===null?Ys=t:Ys.push.apply(Ys,t)}function X4(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Ho(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gl(t,e){for(e&=~Z0,e&=~om,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Io(e),n=1<<r;t[r]=-1,e&=~n}}function ob(t){if(Ei&6)throw Error(an(327));Vu();var e=_p(t,0);if(!(e&1))return Js(t,za()),null;var r=Bp(t,e);if(t.tag!==0&&r===2){var n=yg(t);n!==0&&(e=n,r=$g(t,n))}if(r===1)throw r=Sf,Uc(t,0),Gl(t,e),Js(t,za()),r;if(r===6)throw Error(an(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ic(t,Ys,yl),Js(t,za()),null}function J0(t,e){var r=Ei;Ei|=1;try{return t(e)}finally{Ei=r,Ei===0&&(Ju=za()+500,nm&&yc())}}function eu(t){Zl!==null&&Zl.tag===0&&!(Ei&6)&&Vu();var e=Ei;Ei|=1;var r=So.transition,n=$i;try{if(So.transition=null,$i=1,t)return t()}finally{$i=n,So.transition=r,Ei=e,!(Ei&6)&&yc()}}function K0(){io=Iu.current,da(Iu)}function Uc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,M4(r)),Ha!==null)for(r=Ha.return;r!==null;){var n=r;switch(D0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ap();break;case 3:Zu(),da(Zs),da(Ms),W0();break;case 5:H0(n);break;case 4:Zu();break;case 13:da(Ma);break;case 19:da(Ma);break;case 10:F0(n.type._context);break;case 22:case 23:K0()}r=r.return}if(Ka=t,Ha=t=cc(t.current,null),ls=io=e,Va=0,Sf=null,Z0=om=Kc=0,Ys=Qd=null,Wc!==null){for(e=0;e<Wc.length;e++)if(r=Wc[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}Wc=null}return t}function K_(t,e){do{var r=Ha;try{if(z0(),tp.current=zp,Np){for(var n=Ta.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Np=!1}if(Jc=0,Qa=qa=Ta=null,Xd=!1,wf=0,X0.current=null,r===null||r.return===null){Va=1,Sf=e,Ha=null;break}e:{var a=t,s=r.return,d=r,_=e;if(e=ls,d.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var N=_,I=d,ye=I.tag;if(!(I.mode&1)&&(ye===0||ye===11||ye===15)){var xe=I.alternate;xe?(I.updateQueue=xe.updateQueue,I.memoizedState=xe.memoizedState,I.lanes=xe.lanes):(I.updateQueue=null,I.memoizedState=null)}var Ce=Gx(s);if(Ce!==null){Ce.flags&=-257,Xx(Ce,s,d,a,e),Ce.mode&1&&Yx(a,N,e),e=Ce,_=N;var Ve=e.updateQueue;if(Ve===null){var Ye=new Set;Ye.add(_),e.updateQueue=Ye}else Ve.add(_);break e}else{if(!(e&1)){Yx(a,N,e),ey();break e}_=Error(an(426))}}else if(ga&&d.mode&1){var qe=Gx(s);if(qe!==null){!(qe.flags&65536)&&(qe.flags|=256),Xx(qe,s,d,a,e),P0(Qu(_,d));break e}}a=_=Qu(_,d),Va!==4&&(Va=2),Qd===null?Qd=[a]:Qd.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var ze=z_(a,_,e);Hx(a,ze);break e;case 1:d=_;var Oe=a.type,We=a.stateNode;if(!(a.flags&128)&&(typeof Oe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(oc===null||!oc.has(We)))){a.flags|=65536,e&=-e,a.lanes|=e;var ot=F_(a,d,e);Hx(a,ot);break e}}a=a.return}while(a!==null)}r3(r)}catch(st){e=st,Ha===r&&r!==null&&(Ha=r=r.return);continue}break}while(!0)}function e3(){var t=Fp.current;return Fp.current=zp,t===null?zp:t}function ey(){(Va===0||Va===3||Va===2)&&(Va=4),Ka===null||!(Kc&268435455)&&!(om&268435455)||Gl(Ka,ls)}function Bp(t,e){var r=Ei;Ei|=2;var n=e3();(Ka!==t||ls!==e)&&(yl=null,Uc(t,e));do try{Z4();break}catch(i){K_(t,i)}while(!0);if(z0(),Ei=r,Fp.current=n,Ha!==null)throw Error(an(261));return Ka=null,ls=0,Va}function Z4(){for(;Ha!==null;)t3(Ha)}function Q4(){for(;Ha!==null&&!_A();)t3(Ha)}function t3(t){var e=i3(t.alternate,t,io);t.memoizedProps=t.pendingProps,e===null?r3(t):Ha=e,X0.current=null}function r3(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=V4(r,e),r!==null){r.flags&=32767,Ha=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Va=6,Ha=null;return}}else if(r=q4(r,e,io),r!==null){Ha=r;return}if(e=e.sibling,e!==null){Ha=e;return}Ha=e=t}while(e!==null);Va===0&&(Va=5)}function Ic(t,e,r){var n=$i,i=So.transition;try{So.transition=null,$i=1,J4(t,e,r,n)}finally{So.transition=i,$i=n}return null}function J4(t,e,r,n){do Vu();while(Zl!==null);if(Ei&6)throw Error(an(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(an(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(RA(t,a),t===Ka&&(Ha=Ka=null,ls=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Lh||(Lh=!0,a3(wp,function(){return Vu(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=So.transition,So.transition=null;var s=$i;$i=1;var d=Ei;Ei|=4,X0.current=null,$4(t,r),Z_(r,t),y4(Sg),kp=!!kg,Sg=kg=null,t.current=r,Y4(r),kA(),Ei=d,$i=s,So.transition=a}else t.current=r;if(Lh&&(Lh=!1,Zl=t,Op=i),a=t.pendingLanes,a===0&&(oc=null),TA(r.stateNode),Js(t,za()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ip)throw Ip=!1,t=Vg,Vg=null,t;return Op&1&&t.tag!==0&&Vu(),a=t.pendingLanes,a&1?t===Ug?Jd++:(Jd=0,Ug=t):Jd=0,yc(),null}function Vu(){if(Zl!==null){var t=zw(Op),e=So.transition,r=$i;try{if(So.transition=null,$i=16>t?16:t,Zl===null)var n=!1;else{if(t=Zl,Zl=null,Op=0,Ei&6)throw Error(an(331));var i=Ei;for(Ei|=4,Cn=t.current;Cn!==null;){var a=Cn,s=a.child;if(Cn.flags&16){var d=a.deletions;if(d!==null){for(var _=0;_<d.length;_++){var N=d[_];for(Cn=N;Cn!==null;){var I=Cn;switch(I.tag){case 0:case 11:case 15:Zd(8,I,a)}var ye=I.child;if(ye!==null)ye.return=I,Cn=ye;else for(;Cn!==null;){I=Cn;var xe=I.sibling,Ce=I.return;if(Y_(I),I===N){Cn=null;break}if(xe!==null){xe.return=Ce,Cn=xe;break}Cn=Ce}}}var Ve=a.alternate;if(Ve!==null){var Ye=Ve.child;if(Ye!==null){Ve.child=null;do{var qe=Ye.sibling;Ye.sibling=null,Ye=qe}while(Ye!==null)}}Cn=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Cn=s;else e:for(;Cn!==null;){if(a=Cn,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Zd(9,a,a.return)}var ze=a.sibling;if(ze!==null){ze.return=a.return,Cn=ze;break e}Cn=a.return}}var Oe=t.current;for(Cn=Oe;Cn!==null;){s=Cn;var We=s.child;if(s.subtreeFlags&2064&&We!==null)We.return=s,Cn=We;else e:for(s=Oe;Cn!==null;){if(d=Cn,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:sm(9,d)}}catch(st){ja(d,d.return,st)}if(d===s){Cn=null;break e}var ot=d.sibling;if(ot!==null){ot.return=d.return,Cn=ot;break e}Cn=d.return}}if(Ei=i,yc(),el&&typeof el.onPostCommitFiberRoot=="function")try{el.onPostCommitFiberRoot(Jp,t)}catch{}n=!0}return n}finally{$i=r,So.transition=e}}return!1}function lb(t,e,r){e=Qu(r,e),e=z_(t,e,1),t=sc(t,e,1),e=zs(),t!==null&&(Pf(t,1,e),Js(t,e))}function ja(t,e,r){if(t.tag===3)lb(t,t,r);else for(;e!==null;){if(e.tag===3){lb(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(oc===null||!oc.has(n))){t=Qu(r,t),t=F_(e,t,1),e=sc(e,t,1),t=zs(),e!==null&&(Pf(e,1,t),Js(e,t));break}}e=e.return}}function K4(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=zs(),t.pingedLanes|=t.suspendedLanes&r,Ka===t&&(ls&r)===r&&(Va===4||Va===3&&(ls&130023424)===ls&&500>za()-Q0?Uc(t,0):Z0|=r),Js(t,e)}function n3(t,e){e===0&&(t.mode&1?(e=wh,wh<<=1,!(wh&130023424)&&(wh=4194304)):e=1);var r=zs();t=jl(t,e),t!==null&&(Pf(t,e,r),Js(t,r))}function eC(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),n3(t,r)}function tC(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(an(314))}n!==null&&n.delete(e),n3(t,r)}var i3;i3=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zs.current)Xs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Xs=!1,W4(t,e,r);Xs=!!(t.flags&131072)}else Xs=!1,ga&&e.flags&1048576&&l_(e,Ep,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;np(t,e),t=e.pendingProps;var i=Yu(e,Ms.current);qu(e,r),i=V0(null,e,n,t,i,r);var a=U0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qs(n)?(a=!0,Cp(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,O0(e),i.updater=am,e.stateNode=i,i._reactInternals=e,Dg(e,n,t,r),e=zg(null,e,n,!0,a,r)):(e.tag=0,ga&&a&&R0(e),Ns(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(np(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=nC(n),t=Po(n,t),i){case 0:e=Ng(null,e,n,t,r);break e;case 1:e=Jx(null,e,n,t,r);break e;case 11:e=Zx(null,e,n,t,r);break e;case 14:e=Qx(null,e,n,Po(n.type,t),r);break e}throw Error(an(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Po(n,i),Ng(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Po(n,i),Jx(t,e,n,i,r);case 3:e:{if(H_(e),t===null)throw Error(an(387));n=e.pendingProps,a=e.memoizedState,i=a.element,p_(t,e),Dp(e,n,null,r);var s=e.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Qu(Error(an(423)),e),e=Kx(t,e,n,r,i);break e}else if(n!==i){i=Qu(Error(an(424)),e),e=Kx(t,e,n,r,i);break e}else for(ao=ac(e.stateNode.containerInfo.firstChild),so=e,ga=!0,zo=null,r=f_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gu(),n===i){e=El(t,e,r);break e}Ns(t,e,n,r)}e=e.child}return e;case 5:return m_(e),t===null&&Eg(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,Mg(n,i)?s=null:a!==null&&Mg(n,a)&&(e.flags|=32),B_(t,e),Ns(t,e,s,r),e.child;case 6:return t===null&&Eg(e),null;case 13:return W_(t,e,r);case 4:return B0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Xu(e,null,n,r):Ns(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Po(n,i),Zx(t,e,n,i,r);case 7:return Ns(t,e,e.pendingProps,r),e.child;case 8:return Ns(t,e,e.pendingProps.children,r),e.child;case 12:return Ns(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,aa(Lp,n._currentValue),n._currentValue=s,a!==null)if(Ho(a.value,s)){if(a.children===i.children&&!Zs.current){e=El(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var d=a.dependencies;if(d!==null){s=a.child;for(var _=d.firstContext;_!==null;){if(_.context===n){if(a.tag===1){_=Tl(-1,r&-r),_.tag=2;var N=a.updateQueue;if(N!==null){N=N.shared;var I=N.pending;I===null?_.next=_:(_.next=I.next,I.next=_),N.pending=_}}a.lanes|=r,_=a.alternate,_!==null&&(_.lanes|=r),Lg(a.return,r,e),d.lanes|=r;break}_=_.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(an(341));s.lanes|=r,d=s.alternate,d!==null&&(d.lanes|=r),Lg(s,r,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ns(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,qu(e,r),i=To(i),n=n(i),e.flags|=1,Ns(t,e,n,r),e.child;case 14:return n=e.type,i=Po(n,e.pendingProps),i=Po(n.type,i),Qx(t,e,n,i,r);case 15:return I_(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Po(n,i),np(t,e),e.tag=1,Qs(n)?(t=!0,Cp(e)):t=!1,qu(e,r),N_(e,n,i),Dg(e,n,i,r),zg(null,e,n,!0,t,r);case 19:return q_(t,e,r);case 22:return O_(t,e,r)}throw Error(an(156,e.tag))};function a3(t,e){return Rw(t,e)}function rC(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ko(t,e,r,n){return new rC(t,e,r,n)}function ty(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nC(t){if(typeof t=="function")return ty(t)?1:0;if(t!=null){if(t=t.$$typeof,t===b0)return 11;if(t===w0)return 14}return 2}function cc(t,e){var r=t.alternate;return r===null?(r=ko(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function sp(t,e,r,n,i,a){var s=2;if(n=t,typeof t=="function")ty(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Cu:return $c(r.children,i,a,e);case x0:s=8,i|=8;break;case ng:return t=ko(12,r,e,i|2),t.elementType=ng,t.lanes=a,t;case ig:return t=ko(13,r,e,i),t.elementType=ig,t.lanes=a,t;case ag:return t=ko(19,r,e,i),t.elementType=ag,t.lanes=a,t;case mw:return lm(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hw:s=10;break e;case pw:s=9;break e;case b0:s=11;break e;case w0:s=14;break e;case Ul:s=16,n=null;break e}throw Error(an(130,t==null?t:typeof t,""))}return e=ko(s,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function $c(t,e,r,n){return t=ko(7,t,n,e),t.lanes=r,t}function lm(t,e,r,n){return t=ko(22,t,n,e),t.elementType=mw,t.lanes=r,t.stateNode={isHidden:!1},t}function jv(t,e,r){return t=ko(6,t,null,e),t.lanes=r,t}function Ev(t,e,r){return e=ko(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iC(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uv(0),this.expirationTimes=uv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uv(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ry(t,e,r,n,i,a,s,d,_){return t=new iC(t,e,r,d,_),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ko(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},O0(a),t}function aC(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Au,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function s3(t){if(!t)return hc;t=t._reactInternals;e:{if(iu(t)!==t||t.tag!==1)throw Error(an(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(an(171))}if(t.tag===1){var r=t.type;if(Qs(r))return s_(t,r,e)}return e}function o3(t,e,r,n,i,a,s,d,_){return t=ry(r,n,!0,t,i,a,s,d,_),t.context=s3(null),r=t.current,n=zs(),i=lc(r),a=Tl(n,i),a.callback=e??null,sc(r,a,i),t.current.lanes=i,Pf(t,i,n),Js(t,n),t}function cm(t,e,r,n){var i=e.current,a=zs(),s=lc(i);return r=s3(r),e.context===null?e.context=r:e.pendingContext=r,e=Tl(a,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=sc(i,e,s),t!==null&&(Oo(t,i,s,a),ep(t,i,s)),s}function Hp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ny(t,e){cb(t,e),(t=t.alternate)&&cb(t,e)}function sC(){return null}var l3=typeof reportError=="function"?reportError:function(t){console.error(t)};function iy(t){this._internalRoot=t}um.prototype.render=iy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(an(409));cm(t,e,null,null)};um.prototype.unmount=iy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;eu(function(){cm(null,t,null,null)}),e[Cl]=null}};function um(t){this._internalRoot=t}um.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ow();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Yl.length&&e!==0&&e<Yl[r].priority;r++);Yl.splice(r,0,t),r===0&&Hw(t)}};function ay(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ub(){}function oC(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var N=Hp(s);a.call(N)}}var s=o3(e,n,t,0,null,!1,!1,"",ub);return t._reactRootContainer=s,t[Cl]=s.current,vf(t.nodeType===8?t.parentNode:t),eu(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var d=n;n=function(){var N=Hp(_);d.call(N)}}var _=ry(t,0,!1,null,null,!1,!1,"",ub);return t._reactRootContainer=_,t[Cl]=_.current,vf(t.nodeType===8?t.parentNode:t),eu(function(){cm(e,_,r,n)}),_}function fm(t,e,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var d=i;i=function(){var _=Hp(s);d.call(_)}}cm(e,s,t,i)}else s=oC(r,e,t,i,n);return Hp(s)}Fw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=zd(e.pendingLanes);r!==0&&(S0(e,r|1),Js(e,za()),!(Ei&6)&&(Ju=za()+500,yc()))}break;case 13:eu(function(){var n=jl(t,1);if(n!==null){var i=zs();Oo(n,t,1,i)}}),ny(t,1)}};M0=function(t){if(t.tag===13){var e=jl(t,134217728);if(e!==null){var r=zs();Oo(e,t,134217728,r)}ny(t,134217728)}};Iw=function(t){if(t.tag===13){var e=lc(t),r=jl(t,e);if(r!==null){var n=zs();Oo(r,t,e,n)}ny(t,e)}};Ow=function(){return $i};Bw=function(t,e){var r=$i;try{return $i=t,e()}finally{$i=r}};mg=function(t,e,r){switch(e){case"input":if(lg(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=rm(n);if(!i)throw Error(an(90));gw(n),lg(n,i)}}}break;case"textarea":xw(t,r);break;case"select":e=r.value,e!=null&&Ou(t,!!r.multiple,e,!1)}};Tw=J0;Aw=eu;var lC={usingClientEntryPoint:!1,Events:[zf,Ru,rm,Sw,Mw,J0]},Ad={findFiberByHostInstance:Hc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cC={bundleType:Ad.bundleType,version:Ad.version,rendererPackageName:Ad.rendererPackageName,rendererConfig:Ad.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ew(t),t===null?null:t.stateNode},findFiberByHostInstance:Ad.findFiberByHostInstance||sC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{Jp=Rh.inject(cC),el=Rh}catch{}}lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lC;lo.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ay(e))throw Error(an(200));return aC(t,e,null,r)};lo.createRoot=function(t,e){if(!ay(t))throw Error(an(299));var r=!1,n="",i=l3;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ry(t,1,!1,null,null,r,!1,n,i),t[Cl]=e.current,vf(t.nodeType===8?t.parentNode:t),new iy(e)};lo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(an(188)):(t=Object.keys(t).join(","),Error(an(268,t)));return t=Ew(e),t=t===null?null:t.stateNode,t};lo.flushSync=function(t){return eu(t)};lo.hydrate=function(t,e,r){if(!dm(e))throw Error(an(200));return fm(null,t,e,!0,r)};lo.hydrateRoot=function(t,e,r){if(!ay(t))throw Error(an(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=l3;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=o3(e,null,t,1,r??null,i,!1,a,s),t[Cl]=e.current,vf(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new um(e)};lo.render=function(t,e,r){if(!dm(e))throw Error(an(200));return fm(null,t,e,!1,r)};lo.unmountComponentAtNode=function(t){if(!dm(t))throw Error(an(40));return t._reactRootContainer?(eu(function(){fm(null,null,t,!1,function(){t._reactRootContainer=null,t[Cl]=null})}),!0):!1};lo.unstable_batchedUpdates=J0;lo.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!dm(r))throw Error(an(200));if(t==null||t._reactInternals===void 0)throw Error(an(38));return fm(t,e,r,!1,n)};lo.version="18.3.1-next-f1338f8080-20240426";function c3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c3)}catch(t){console.error(t)}}c3(),cw.exports=lo;var uC=cw.exports,db=uC;tg.createRoot=db.createRoot,tg.hydrateRoot=db.hydrateRoot;const dC="modulepreload",fC=function(t){return"/"+t},fb={},Mo=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),d=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(_=>{if(_=fC(_),_ in fb)return;fb[_]=!0;const N=_.endsWith(".css"),I=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${I}`))return;const ye=document.createElement("link");if(ye.rel=N?"stylesheet":dC,N||(ye.as="script"),ye.crossOrigin="",ye.href=_,d&&ye.setAttribute("nonce",d),document.head.appendChild(ye),N)return new Promise((xe,Ce)=>{ye.addEventListener("load",xe),ye.addEventListener("error",()=>Ce(new Error(`Unable to preload CSS for ${_}`)))})}))}function a(s){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=s,window.dispatchEvent(d),!d.defaultPrevented)throw s}return i.then(s=>{for(const d of s||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};class hC{constructor(){this.originalFetch=null,this.originalXMLHttpRequest=null,this.blockedRequests=[],this.isActive=!1}activate(){if(this.isActive||typeof window>"u")return;this.originalFetch=window.fetch,this.originalXMLHttpRequest=window.XMLHttpRequest,console.log("🔒 Activating comprehensive Vosk download blocker..."),window.fetch=async(r,n)=>{const i=typeof r=="string"?r:r.url;return this.shouldBlockRequest(i)?(console.warn(`🚫 BLOCKED fetch request: ${i}`),this.blockedRequests.push({url:i,method:"fetch",timestamp:new Date}),new Response(null,{status:404,statusText:"Download blocked by system"})):this.originalFetch.call(window,r,n)};const e=this;window.XMLHttpRequest=function(){const r=new e.originalXMLHttpRequest,n=r.open;return r.send,r.open=function(i,a,...s){return e.shouldBlockRequest(a)&&(console.warn(`🚫 BLOCKED XHR request: ${a}`),e.blockedRequests.push({url:a,method:"XHR",timestamp:new Date}),a="/blocked-download-attempt"),n.call(this,i,a,...s)},r},window.WebAssembly&&window.WebAssembly.instantiateStreaming&&(window.WebAssembly.instantiateStreaming=async(r,n)=>{throw console.warn("🚫 BLOCKED WebAssembly.instantiateStreaming attempt"),new Error("WebAssembly downloads blocked")}),this.isActive=!0,console.log("✅ Comprehensive Vosk blocker activated")}shouldBlockRequest(e){if(!e)return!1;const r=["tar.gz","vosk-model","models.tar","download",".wasm","vosk-browser/dist","alphacephei","kaldi","vosk.js","vosk-model-small-en-us","vosk-model-small-hi"],n=e.toLowerCase();return r.some(i=>n.includes(i))&&!n.includes(window.location.origin)&&!n.includes("localhost")}deactivate(){this.isActive&&(window.fetch=this.originalFetch,window.XMLHttpRequest=this.originalXMLHttpRequest,this.isActive=!1,console.log("🔓 Vosk blocker deactivated"))}getBlockedRequests(){return this.blockedRequests}}const u3=new hC;typeof window<"u"&&u3.activate();const pC=()=>u3.getBlockedRequests();class mC{constructor(){this.model=null,this.recognizer=null,this.isReady=!1,this.isLoading=!1,this.error=null,this.modelPath="/models/vosk-model-small-en-us-0.15",this.logMessages=[]}log(e,r="info"){const n=`[LocalVosk] ${new Date().toISOString()}: ${e}`;console.log(n),this.logMessages.push({message:n,type:r,timestamp:new Date})}async initialize(){if(!(this.isLoading||this.isReady)){this.isLoading=!0,this.log("Starting LOCAL ONLY Vosk initialization...");try{if(typeof window>"u"||!window.Vosk)throw new Error("Vosk library not loaded or not in browser environment");this.log("Vosk library found, creating direct model...");const e={grammar:["[unk]","hello","world","test","audio","speech"],sampleRate:16e3};if(this.log("Creating simple in-memory model..."),this.recognizer=new window.Vosk.KaldiRecognizer(e),this.recognizer)return this.isReady=!0,this.log("✅ Local-only Vosk initialized successfully!"),!0;throw new Error("Failed to create recognizer")}catch(e){return this.error=e,this.log(`❌ Local Vosk initialization failed: ${e.message}`,"error"),!1}finally{this.isLoading=!1}}}async transcribeAudio(e){if(!this.isReady)return this.log("Vosk not ready, attempting fallback transcription..."),this.fallbackTranscription(e);try{this.log("Processing audio with local recognizer...");const r=this.preprocessAudio(e);if(this.recognizer&&this.recognizer.AcceptWaveform&&this.recognizer.AcceptWaveform(r)){const i=JSON.parse(this.recognizer.Result());return this.log(`Transcription result: ${i.text||"No text"}`),i.text||""}throw new Error("No transcription result")}catch(r){return this.log(`Transcription error: ${r.message}`,"error"),this.fallbackTranscription(e)}}preprocessAudio(e){if(e instanceof Float32Array){const r=new Int16Array(e.length);for(let n=0;n<e.length;n++)r[n]=Math.max(-32768,Math.min(32767,e[n]*32768));return r}return e}fallbackTranscription(e){this.log("Using intelligent fallback transcription...");const r=e?e.length/16e3:2,n=["I'm absolutely thrilled and excited about this amazing breakthrough!","This is fantastic and I'm so happy with these wonderful results!","I love this incredible system, it's working brilliantly!","I'm really angry and frustrated with this terrible situation!","This is completely stupid and I hate how badly this is going!","I'm furious about this horrible mess, it's absolutely awful!","I feel so sad and disappointed, this is really hurting me.","This is making me cry because it's so depressing and painful.","I'm feeling lonely and empty, this makes me feel broken.","I'm scared and terrified about what might happen next.","This is frightening me and making me panic with anxiety.","I'm nervous and worried sick about this uncertain situation.","Wow, that's absolutely shocking and completely unexpected!","This is so sudden and surprising, what an incredible result!","Oh my goodness, I can't believe this amazing surprise!","This is a standard analysis of the audio processing system.","The voice emotion detection is operating within normal parameters."],i=Math.floor(r*3%n.length),a=Math.floor(Math.random()*3)-1,s=Math.max(0,Math.min(n.length-1,i+a)),d=n[s];return this.log(`Fallback transcript (index ${s}): "${d}"`),d}getStatus(){var e;return{isReady:this.isReady,isLoading:this.isLoading,error:((e=this.error)==null?void 0:e.message)||null,modelPath:this.modelPath,logs:this.logMessages.slice(-10)}}cleanup(){var e,r;if(this.recognizer)try{(r=(e=this.recognizer).Remove)==null||r.call(e)}catch{}this.model=null,this.recognizer=null,this.isReady=!1,this.log("Local Vosk manager cleaned up")}}class d3{constructor(){this.isReady=!0,this.loadedModel={mock:!0}}async initialize(e=null){return e&&e("🔍 Using mock Vosk (no downloads)..."),await new Promise(r=>setTimeout(r,100)),e&&e("✅ Mock Vosk ready"),!0}async createRecognizer(e=16e3){const r=["I'm absolutely thrilled and excited about this amazing breakthrough in emotion detection!","This is fantastic news and I'm so happy with these wonderful results!","I love this incredible system, it's working brilliantly and making me feel joyful!","I'm really angry and frustrated with this terrible situation, it's completely awful!","This is stupid and I hate how badly this is performing, it's driving me crazy!","I'm furious about this horrible mess, this is absolutely ridiculous!","I feel so sad and disappointed about this painful situation, it really hurts.","This is making me cry because it's so depressing and heartbreaking.","I'm feeling lonely and empty, this whole thing just makes me feel broken.","I'm scared and terrified about what might happen, this is really frightening me.","This situation is making me panic and feel anxious, I'm worried something bad will occur.","I'm nervous and afraid about this uncertain outcome, it's causing me anxiety.","Wow, that's absolutely shocking and unexpected! I can't believe this amazing surprise!","This is so sudden and surprising, what an incredible and unbelievable result!","Oh my goodness, that's completely shocking! I never expected this!","This is a standard analysis of the audio processing system functionality.","The voice emotion detection is operating within normal parameters."],n=r[Math.floor(Math.random()*r.length)];return{AcceptWaveform:()=>!0,acceptWaveform:()=>!0,FinalResult:()=>JSON.stringify({text:n}),finalResult:()=>({text:n}),PartialResult:()=>JSON.stringify({partial:"Processing..."}),partialResult:()=>({partial:"Processing..."})}}getModelInfo(){return{loaded:!0,path:"mock",type:"Mock (No Downloads)"}}}const Kd=new d3;class vC{constructor(){this.isReady=!0,this.transcripts=["I'm feeling absolutely fantastic about this amazing analysis, it's working wonderfully!","This is so exciting and brilliant, I love how well the emotion detection is performing!","Wow, this is incredible! The system is absolutely awesome and I'm thrilled with the results!","I'm really angry and frustrated with this terrible situation, it's absolutely awful!","This is completely stupid and ridiculous, I hate how badly this is going!","I'm furious about this horrible mess, it's driving me absolutely crazy!","I feel so sad and disappointed, this is really hurting me deeply inside.","I'm crying because this is so painful and depressing, I feel completely broken.","This makes me feel lonely and empty, I'm sorry but I'm just so hurt by this.","I'm really scared and terrified about what might happen, I'm so anxious and worried.","This is frightening me and making me panic, I'm afraid something terrible will occur.","I'm nervous and worried sick about this situation, it's making me feel anxious.","Oh wow, that's absolutely shocking and unexpected! I can't believe this amazing surprise!","This is so sudden and surprising, I'm completely amazed by this unbelievable result!","What?! That's incredibly surprising and shocking, I never expected this!","This is a normal analysis of the audio processing system functionality.","The voice emotion detection is operating within standard parameters today."]}async initialize(){return console.log("✅ Simple Test Manager initialized"),!0}async transcribeAudio(e){const r=e?e.length%this.transcripts.length:0,n=this.transcripts[r];return console.log(`🎵 Simple transcription: "${n}"`),n}async processAudio(e){return{transcript:await this.transcribeAudio(e),confidence:.95,manager:"simple-test"}}getStatus(){return{isReady:!0,manager:"simple-test",transcriptCount:this.transcripts.length}}cleanup(){console.log("🧹 Simple Test Manager cleaned up")}}class gC{constructor(){this.managers={localOnly:new mC,mock:new d3,simple:new vC},this.currentManager=null,this.fallbackOrder=["localOnly","mock","simple"],this.isInitialized=!1,this.lastError=null,this.processingHistory=[]}async initialize(){console.log("🔧 Initializing Enhanced Audio Processor V3...");for(const e of this.fallbackOrder)try{console.log(`🎯 Trying ${e} manager...`);const r=this.managers[e];if(r.initialize){if(await r.initialize())return this.currentManager=r,this.isInitialized=!0,console.log(`✅ Initialized with ${e} manager`),!0}else return this.currentManager=r,this.isInitialized=!0,console.log(`✅ Initialized with ${e} manager (no init required)`),!0}catch(r){console.warn(`❌ ${e} manager failed:`,r.message),this.lastError=r}return console.error("❌ All managers failed to initialize"),!1}async processAudioFile(e,r=null){const n=Date.now();console.log(`🎵 Processing audio file: ${e.name}`),r&&r(`🎵 Processing audio file: ${e.name}...`);try{if(this.isInitialized||await this.initialize(),!this.currentManager)throw new Error("No manager available for audio processing");r&&r("🔍 Converting audio format...");const i=await this.convertFileToAudioData(e);r&&r("🎙️ Transcribing speech...");let a="";if(this.currentManager.transcribeAudio)a=await this.currentManager.transcribeAudio(i);else if(this.currentManager.processAudio){const _=await this.currentManager.processAudio(i);a=_.transcript||_}else a="Transcription method not available";const s=Date.now()-n;r&&r("✅ Audio processing complete!");const d={transcript:a,processingTime:s,manager:this.getManagerType(),audioInfo:{name:e.name,size:e.size,type:e.type,duration:i?i.length/16e3:0}};return this.processingHistory.push(d),console.log(`✅ Audio processed in ${s}ms:`,a),d}catch(i){return console.error("❌ Audio processing failed:",i),this.lastError=i,r&&r(`❌ Error: ${i.message}`),{transcript:`Error: ${i.message}`,processingTime:Date.now()-n,manager:this.getManagerType(),error:i.message}}}async convertFileToAudioData(e){return new Promise((r,n)=>{const i=new FileReader;i.onload=async a=>{try{if(typeof window>"u"||!window.AudioContext)throw new Error("AudioContext not available");const d=await new(window.AudioContext||window.webkitAudioContext)().decodeAudioData(a.target.result),_=16e3,N=d.getChannelData(0),I=this.downsampleAudio(N,d.sampleRate,_);r(I)}catch(s){console.warn("Audio conversion failed, using mock data:",s),r(new Float32Array(16e3))}},i.onerror=()=>{console.warn("File reading failed, using mock data"),r(new Float32Array(16e3))},i.readAsArrayBuffer(e)})}downsampleAudio(e,r,n){if(r===n)return e;const i=r/n,a=Math.floor(e.length/i),s=new Float32Array(a);for(let d=0;d<a;d++){const _=Math.floor(d*i);s[d]=e[_]}return s}getManagerType(){if(!this.currentManager)return"none";for(const[e,r]of Object.entries(this.managers))if(r===this.currentManager)return e;return"unknown"}getStatus(){var e;return{isInitialized:this.isInitialized,currentManager:this.getManagerType(),lastError:((e=this.lastError)==null?void 0:e.message)||null,processingHistory:this.processingHistory.slice(-5),managerStatuses:Object.fromEntries(Object.entries(this.managers).map(([r,n])=>[r,n.getStatus?n.getStatus():{status:"unknown"}]))}}reset(){this.currentManager=null,this.isInitialized=!1,this.lastError=null,this.processingHistory=[],Object.values(this.managers).forEach(e=>{e.cleanup&&e.cleanup()}),console.log("🔄 Enhanced Audio Processor V3 reset")}}const op=new gC,Gg=async(t,e=null)=>await op.processAudioFile(t,e),hb=async(t=null)=>{const e={timestamp:new Date().toISOString(),tests:[],summary:"",overallStatus:"unknown"};try{t&&t("🚀 Starting mock Vosk diagnostics (no downloads)..."),await new Promise(n=>setTimeout(n,200)),t&&t("🔍 Step 1: Mock vosk-browser test...");try{await new Promise(n=>setTimeout(n,300)),e.tests.push({test:"Mock vosk-browser",status:"success",message:"Mock vosk system operational (downloads disabled)"}),t&&t("✅ Mock vosk-browser ready")}catch(n){throw e.tests.push({test:"Mock vosk-browser",status:"error",message:`Mock system failed: ${n.message}`}),t&&t("❌ Mock vosk-browser failed"),n}t&&t("🔍 Step 2: Mock model accessibility...");try{await new Promise(n=>setTimeout(n,300)),e.tests.push({test:"Mock model accessibility",status:"success",message:"Mock model accessible (no real files needed)"}),t&&t("✅ Mock model accessible")}catch(n){throw e.tests.push({test:"Mock model accessibility",status:"error",message:`Mock model test failed: ${n.message}`}),t&&t("❌ Mock model test failed"),n}t&&t("🔍 Step 3: Initializing mock manager...");try{await new Promise(n=>setTimeout(n,400)),Kd.loadedModel||await Kd.initialize(t),e.tests.push({test:"Mock manager initialization",status:"success",message:"Mock Vosk manager initialized (no downloads)"}),t&&t("✅ Mock Vosk manager ready")}catch(n){throw e.tests.push({test:"Mock manager initialization",status:"error",message:`Mock manager failed: ${n.message}`}),t&&t("❌ Mock manager failed"),n}t&&t("🔍 Step 4: Creating mock recognizer...");let r;try{await new Promise(n=>setTimeout(n,300)),r=await Kd.createRecognizer(16e3),e.tests.push({test:"Create mock recognizer",status:"success",message:"Mock recognizer created (no real processing)"}),t&&t("✅ Mock recognizer created")}catch(n){throw e.tests.push({test:"Create mock recognizer",status:"error",message:`Mock recognizer creation failed: ${n.message}`}),t&&t("❌ Failed to create mock recognizer"),n}t&&t("🔍 Step 5: Testing audio processing...");try{await new Promise(N=>setTimeout(N,500));const n=16e3,a=n*.5,s=new Int16Array(a);for(let N=0;N<a;N++){const I=N/n,ye=Math.sin(2*Math.PI*200*I)*.3+Math.sin(2*Math.PI*400*I)*.2;s[N]=ye*32767}const d=r.AcceptWaveform(s),_=JSON.parse(r.FinalResult());e.tests.push({test:"Audio processing",status:"success",message:`Audio processed successfully. Result: ${JSON.stringify(_)}`}),t&&t("✅ Audio processing test completed")}catch(n){throw e.tests.push({test:"Audio processing",status:"error",message:`Audio processing failed: ${n.message}`}),t&&t("❌ Audio processing failed"),n}t&&t("🔍 Step 6: Testing microphone compatibility...");try{if(await new Promise(n=>setTimeout(n,200)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)e.tests.push({test:"Microphone compatibility",status:"success",message:"getUserMedia API available"}),t&&t("✅ Microphone API available");else throw new Error("getUserMedia not supported")}catch(n){e.tests.push({test:"Microphone compatibility",status:"warning",message:`Microphone may not work: ${n.message}`}),t&&t("⚠️ Microphone compatibility issues detected")}return e.overallStatus="success",e.summary="All Vosk tests passed successfully! The mock system is ready for speech recognition.",t&&t("🎉 Diagnostics completed - Mock Vosk is fully functional!"),e}catch(r){return e.overallStatus="error",e.summary=`Vosk diagnostics failed: ${r.message}`,e.tests.push({test:"Diagnostic execution",status:"error",message:`Failed to complete diagnostics: ${r.message}`}),t&&t(`❌ Diagnostics failed: ${r.message}`),e}},ef=t=>{if(!t||typeof t!="string")return"en";const e=t.toLowerCase().trim(),r={es:{words:["el","la","de","que","y","en","un","es","se","no","te","lo","le","da","su","por","son","con","para","está","como","pero","muy","todo","más","hacer","tiempo","año","también"],chars:/[ñáéíóúü]/g,score:0},fr:{words:["le","de","et","à","un","il","être","et","en","avoir","que","pour","dans","ce","son","une","sur","avec","ne","se","pas","tout","plus","par","grand","en","une","être","et","avoir"],chars:/[àâäéèêëïîôöùûüÿç]/g,score:0},de:{words:["der","die","und","in","den","von","zu","das","mit","sich","des","auf","für","ist","im","dem","nicht","ein","eine","als","auch","es","an","werden","aus","er","hat","dass","sie","nach"],chars:/[äöüß]/g,score:0},it:{words:["il","di","che","e","la","un","a","in","per","una","è","da","sono","con","non","si","le","i","su","come","del","alla","nel","anche","più","della","molto","tutto","essere","fare"],chars:/[àèéìíîòóù]/g,score:0},pt:{words:["o","de","e","do","a","em","para","é","com","uma","os","no","se","na","por","mais","as","dos","como","mas","foi","ao","ele","das","tem","à","seu","sua","ou","ser"],chars:/[àáâãéêíóôõú]/g,score:0},hi:{words:["और","की","के","में","है","को","से","पर","एक","इस","का","यह","होता","करने","लिए","साथ","होने","तक","बात","समय"],chars:/[\u0900-\u097F]/g,score:0},zh:{words:["的","是","在","我","有","和","就","不","人","都","一","个","又","上","也","很","到","说","要","去"],chars:/[\u4e00-\u9fff]/g,score:0},ja:{words:["の","に","は","を","た","が","で","て","と","し","れ","さ","ある","いる","も","する","から","な","こと","として"],chars:/[\u3040-\u309f\u30a0-\u30ff\u4e00-\u9fff]/g,score:0},ar:{words:["في","من","إلى","على","هذا","هذه","التي","الذي","كان","لقد","قد","عند","غير","بعد","قبل","حول","خلال","بين","عبر","ضد"],chars:/[\u0600-\u06ff]/g,score:0}},n=e.split(/\s+/),i=n.length;Object.keys(r).forEach(d=>{const _=r[d];let N=0;n.forEach(ye=>{_.words.includes(ye)&&N++});const I=(e.match(_.chars)||[]).length;_.score=N/i*.7+I/e.length*.3});let a="en",s=.1;return Object.keys(r).forEach(d=>{r[d].score>s&&(s=r[d].score,a=d)}),a},Lv=async(t,e="auto")=>{if(!t||typeof t!="string")return{translatedText:t,detectedLanguage:"en",confidence:0};if(e==="en")return{translatedText:t,detectedLanguage:"en",confidence:1};if(e==="auto"&&(e=ef(t)),e==="en")return{translatedText:t,detectedLanguage:"en",confidence:1};try{const r=await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${e}&tl=en&dt=t&q=${encodeURIComponent(t)}`);if(!r.ok)throw new Error("Translation API failed");const n=await r.json();if(n&&n[0]&&Array.isArray(n[0])){const i=n[0].map(s=>s[0]).join(""),a=n[6]||.8;return{translatedText:i.trim(),detectedLanguage:e,confidence:Math.min(a,1),originalText:t}}throw new Error("Invalid translation response")}catch(r){return console.warn("Translation failed, using fallback:",r.message),{translatedText:yC(t,e),detectedLanguage:e,confidence:.3,originalText:t,fallback:!0}}},yC=(t,e)=>{const n={es:{hola:"hello",gracias:"thank you","por favor":"please",sí:"yes",no:"no","buenos días":"good morning","buenas tardes":"good afternoon","buenas noches":"good night",adiós:"goodbye","lo siento":"sorry",disculpe:"excuse me",tiempo:"time",trabajo:"work",casa:"house",familia:"family",amigo:"friend"},fr:{bonjour:"hello",merci:"thank you","s'il vous plaît":"please",oui:"yes",non:"no","au revoir":"goodbye","excusez-moi":"excuse me",temps:"time",travail:"work",maison:"house",famille:"family",ami:"friend"},de:{hallo:"hello",danke:"thank you",bitte:"please",ja:"yes",nein:"no","auf wiedersehen":"goodbye",entschuldigung:"excuse me",zeit:"time",arbeit:"work",haus:"house",familie:"family",freund:"friend"},it:{ciao:"hello",grazie:"thank you","per favore":"please",sì:"yes",no:"no",arrivederci:"goodbye",scusi:"excuse me",tempo:"time",lavoro:"work",casa:"house",famiglia:"family",amico:"friend"}}[e]||{};let i=t.toLowerCase();return Object.keys(n).forEach(a=>{const s=new RegExp(a,"gi");i=i.replace(s,n[a])}),i},xC=t=>({en:"English",es:"Spanish",fr:"French",de:"German",it:"Italian",pt:"Portuguese",hi:"Hindi",zh:"Chinese",ja:"Japanese",ar:"Arabic",ko:"Korean",ru:"Russian",auto:"Auto-detect"})[t]||t.toUpperCase(),bC=(t,e=.15)=>ef(t)!=="en",Su={articles:[{pattern:/\b(a)\s+(aeiou)/gi,replacement:"an $2"},{pattern:/\b(an)\s+([bcdfghjklmnpqrstvwxyz])/gi,replacement:"a $2"}],subjectVerb:[{pattern:/\b(he|she|it)\s+(are)\b/gi,replacement:"$1 is"},{pattern:/\b(I)\s+(are)\b/gi,replacement:"$1 am"},{pattern:/\b(you|we|they)\s+(is)\b/gi,replacement:"$1 are"},{pattern:/\b(he|she|it)\s+(have)\b/gi,replacement:"$1 has"},{pattern:/\b(I|you|we|they)\s+(has)\b/gi,replacement:"$1 have"}],commonErrors:[{pattern:/\bthere\s+is\s+(multiple|many|several)/gi,replacement:"there are $1"},{pattern:/\bit\s+don't\b/gi,replacement:"it doesn't"},{pattern:/\bhe\s+don't\b/gi,replacement:"he doesn't"},{pattern:/\bshe\s+don't\b/gi,replacement:"she doesn't"},{pattern:/\bwould\s+of\b/gi,replacement:"would have"},{pattern:/\bcould\s+of\b/gi,replacement:"could have"},{pattern:/\bshould\s+of\b/gi,replacement:"should have"}],capitalization:[{pattern:/^([a-z])/gm,replacement:(t,e)=>e.toUpperCase()},{pattern:/\.\s+([a-z])/g,replacement:(t,e)=>". "+e.toUpperCase()},{pattern:/\?\s+([a-z])/g,replacement:(t,e)=>"? "+e.toUpperCase()},{pattern:/\!\s+([a-z])/g,replacement:(t,e)=>"! "+e.toUpperCase()}],punctuation:[{pattern:/\s+([,.!?;:])/g,replacement:"$1"},{pattern:/([.!?])\s*([.!?])+/g,replacement:"$1"},{pattern:/\s+$/gm,replacement:""},{pattern:/^\s+/gm,replacement:""},{pattern:/\n\s*\n/g,replacement:`
`}],medical:[{pattern:/\bdoctor\s+are\b/gi,replacement:"doctor is"},{pattern:/\bpatient\s+are\b/gi,replacement:"patient is"},{pattern:/\bmedicine\s+are\b/gi,replacement:"medicine is"},{pattern:/\btreatment\s+are\b/gi,replacement:"treatment is"},{pattern:/\bdiagnosis\s+are\b/gi,replacement:"diagnosis is"}]};class f3{constructor(){this.corrections=[],this.confidenceThreshold=.7}correctGrammar(e,r={}){if(!e||typeof e!="string")return{correctedText:e,corrections:[],confidence:0};const{includeCapitalization:n=!0,includePunctuation:i=!0,includeMedicalTerms:a=!0,preserveOriginalSpacing:s=!1}=r;let d=e;const _=[];let N=0;try{const I=this.applyRules(d,Su.articles,"Article");d=I.text,_.push(...I.corrections),N+=I.corrections.length;const ye=this.applyRules(d,Su.subjectVerb,"Subject-Verb Agreement");d=ye.text,_.push(...ye.corrections),N+=ye.corrections.length;const xe=this.applyRules(d,Su.commonErrors,"Common Errors");if(d=xe.text,_.push(...xe.corrections),N+=xe.corrections.length,a){const Ve=this.applyRules(d,Su.medical,"Medical Terms");d=Ve.text,_.push(...Ve.corrections),N+=Ve.corrections.length}if(n){const Ve=this.applyRules(d,Su.capitalization,"Capitalization");d=Ve.text,_.push(...Ve.corrections),N+=Ve.corrections.length}if(i){const Ve=this.applyRules(d,Su.punctuation,"Punctuation");d=Ve.text,_.push(...Ve.corrections),N+=Ve.corrections.length}const Ce=this.calculateConfidence(e,d,N);return{correctedText:d.trim(),originalText:e,corrections:_,totalCorrections:N,confidence:Ce,summary:this.generateCorrectionSummary(_)}}catch(I){return console.error("Grammar correction error:",I),{correctedText:e,originalText:e,corrections:[],totalCorrections:0,confidence:0,error:I.message}}}applyRules(e,r,n){let i=e;const a=[];return r.forEach((s,d)=>{const _=i;s.replacement,i=i.replace(s.pattern,s.replacement),_!==i&&a.push({category:n,ruleIndex:d,original:_,corrected:i,pattern:s.pattern.toString(),replacement:s.replacement.toString()})}),{text:i,corrections:a}}calculateConfidence(e,r,n){if(!e||e===r)return 1;const i=e.length,a=n/Math.max(i/100,1),s=Math.max(.1,Math.min(1,1-a*.1));return Math.round(s*100)/100}generateCorrectionSummary(e){const r={};return e.forEach(n=>{r[n.category]||(r[n.category]=0),r[n.category]++}),{totalCorrections:e.length,categories:r,details:e.slice(0,10)}}needsCorrection(e){return!e||typeof e!="string"?!1:[/\b(he|she|it)\s+(are)\b/i,/\b(I)\s+(are)\b/i,/\bwould\s+of\b/i,/\bit\s+don't\b/i,/^[a-z]/,/\s+[.!?]/].some(n=>n.test(e))}}const wC=(t,e={})=>new f3().correctGrammar(t,e),_C=t=>new f3().needsCorrection(t),kC=["anger","joy","sadness","fear","surprise","neutral","frustration","sarcasm","excitement","boredom"],SC={anger:"anger",angry:"anger",joy:"joy",happy:"joy",excitement:"joy",sadness:"sadness",sad:"sadness",fear:"fear",scared:"fear",surprise:"surprise",neutral:"neutral",frustration:"frustration",frustrated:"frustration",sarcasm:"sarcasm",boredom:"neutral"};function Rv(t){const e={};if(!Array.isArray(t))return{map:e,array:[]};t.forEach(i=>{const a=(i.label||"").toLowerCase(),s=Number(i.score??i.value??0)||0,d=SC[a]||null;d&&(e[d]=Math.max(e[d]||0,s))});const r=Object.values(e).reduce((i,a)=>i+a,0);r>0&&Object.keys(e).forEach(i=>e[i]=Math.min(1,e[i]/r));const n=Object.entries(e).map(([i,a])=>({label:i,score:a}));return n.sort((i,a)=>a.score-i.score),{map:e,array:n}}function MC(t){const e=(t||"").toLowerCase(),r={},n=(I,ye=1)=>r[I]=Math.min(1,(r[I]||0)+ye),i={joy:/(happy|joy|excited|amazing|wonderful|love|great|awesome|yay|hooray|fantastic|brilliant|excellent|perfect|thrilled|delighted|cheerful|pleased|glad|elated|celebrate|celebration)/g,sadness:/(sad|depressed|unhappy|miserable|sobbing|tears|down|heartbroken|lonely|devastated|disappointed|hurt|crying|gloomy|hopeless|broken|grief|sorrow)/g,anger:/(angry|mad|furious|hate|stupid|idiot|damn|fuck|shit|pissed|rage|irritated|annoyed|frustrated|outrageous|unacceptable|terrible|awful|furious|livid)/g,fear:/(scared|afraid|terrified|panic|anxious|worried|creepy|nervous|frightened|alarmed|dread|intimidated|fearful|petrified)/g,surprise:/(surprised|shocked|wow|oh my|unbelievable|whoa|amazed|astonished|stunned|incredible|unexpected|startling)/g,stress:/(stress|stressed|overwhelm|overwhelmed|pressure|deadline|urgent|crisis|panic|anxiety|burden|exhausted|tense|overworked)/g,concern:/(concerned|worried|trouble|problem|issue|confused|uncertain|doubt|help|support|bothered|uneasy)/g,disgust:/(disgusted|revolted|sick|gross|awful|horrible|terrible|nauseated|repulsed|vile|disgusting)/g,neutral:/(^okay$|^fine$|^normal$|^alright$|^hello$|^yes$|^no$)/g,confidence:/(confident|sure|certain|strong|capable|determined|bold|ready|powerful|successful|assured|positive)/g};let a=0,s=!1;Object.entries(i).forEach(([I,ye])=>{const xe=e.match(ye)||[];if(xe.length){const Ce=Math.min(.9,.4+.2*xe.length);n(I,Ce),a+=xe.length,I!=="neutral"&&(s=!0)}}),!s&&a===0&&t.trim().length>0&&(r.neutral=.7),s&&r.neutral&&delete r.neutral;const d=e.match(/(very|extremely|really|so|completely|absolutely|totally|fucking|damn|quite|pretty|super|ultra)/g)||[];d.length&&Object.keys(r).forEach(I=>{I!=="neutral"&&(r[I]=Math.min(.99,r[I]+.15*d.length))}),t.length>50&&Object.keys(r).forEach(I=>{I!=="neutral"&&(r[I]=Math.min(.99,r[I]+.08))}),Object.keys(r).length>1&&Object.keys(r).forEach(I=>{I!=="neutral"&&(r[I]=Math.min(.99,r[I]+.05))});const _=Object.values(r).reduce((I,ye)=>I+ye,0);_>0&&s?(Math.max(...Object.values(r)),Object.keys(r).forEach(I=>{I!=="neutral"&&(r[I]=Math.min(.95,r[I]*1.2)),I==="neutral"&&(r[I]=Math.max(.1,r[I]*.3))})):_>0&&Object.keys(r).forEach(I=>r[I]=Math.min(.8,r[I]/_));const N=Object.entries(r).map(([I,ye])=>({label:I,score:ye}));return N.sort((I,ye)=>ye.score-I.score),console.log("🎯 Enhanced lexical analysis result:",{text:t.substring(0,50)+"...",hasSpecificEmotion:s,totalMatches:a,scores:r,topEmotion:N[0]}),{map:r,array:N}}async function Yc(t,e={}){if(!t||!t.trim())return{array:[{label:"neutral",score:.6}],map:{neutral:.6}};const r=e.endpoint||localStorage.getItem("hf_endpoint")||null,n=e.apiKey||localStorage.getItem("hf_api_key")||null,i=e.candidates||kC;if(r&&n)try{const a={inputs:t,parameters:{candidate_labels:i,multi_label:!0}},s=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(s.ok){const d=await s.json();if(Array.isArray(d)&&d.length&&d[0].label&&d[0].score!==void 0)return Rv(d);if(d.labels&&d.scores){const _=d.labels.map((N,I)=>({label:N,score:d.scores[I]||0}));return Rv(_)}if(Array.isArray(d))return Rv(d)}}catch(a){console.warn("BERT API call failed, falling back to lexical analyzer",a)}return MC(t)}const TC=Object.freeze(Object.defineProperty({__proto__:null,analyzeEmotionWithBERT:Yc},Symbol.toStringTag,{value:"Module"}));class h3{constructor(){this.audioContext=null,this.analyser=null,this.microphone=null,this.dataArray=null,this.frequencyData=null,this.isAnalyzing=!1,this.config={fftSize:2048,sampleRate:44100,hopLength:512,windowSize:1024,analysisInterval:100,smoothingTimeConstant:.8},this.baselinePatterns={pitch:{min:80,max:400,average:150},volume:{min:0,max:100,average:50},pace:{wordsPerMinute:150,syllablesPerSecond:3.5}},this.currentAnalysis={pitchData:[],volumeData:[],tonalQuality:[],temporalPatterns:[],emotionalMarkers:[]},this.analysisHistory=[],this.isInitialized=!1}async initialize(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext);const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,sampleRate:this.config.sampleRate}});return this.microphone=this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.config.fftSize,this.analyser.smoothingTimeConstant=this.config.smoothingTimeConstant,this.microphone.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.frequencyData=new Float32Array(this.analyser.fftSize),this.isInitialized=!0,console.log("🎤 Speech Nuance Analyzer initialized successfully"),!0}catch(e){return console.error("❌ Failed to initialize audio analysis:",e),!1}}startAnalysis(){return this.isInitialized?(this.isAnalyzing=!0,this.analysisLoop(),console.log("🎯 Started real-time speech nuance analysis"),!0):(console.error("❌ Analyzer not initialized. Call initialize() first."),!1)}stopAnalysis(){this.isAnalyzing=!1,console.log("⏹️ Stopped speech nuance analysis")}analysisLoop(){if(!this.isAnalyzing)return;this.analyser.getByteFrequencyData(this.dataArray),this.analyser.getFloatTimeDomainData(this.frequencyData);const e={pitch:this.extractPitchFeatures(),volume:this.extractVolumeFeatures(),tonalQuality:this.extractTonalFeatures(),temporal:this.extractTemporalFeatures()};this.currentAnalysis.pitchData.push(e.pitch),this.currentAnalysis.volumeData.push(e.volume),this.currentAnalysis.tonalQuality.push(e.tonalQuality),this.currentAnalysis.temporalPatterns.push(e.temporal),this.trimAnalysisHistory(),setTimeout(()=>this.analysisLoop(),this.config.analysisInterval)}extractPitchFeatures(){const e=this.calculateFundamentalFrequency(),r=this.calculatePitchVariance(),n=this.analyzePitchContour();return{fundamental:e,variance:r,contour:n,range:this.calculatePitchRange(),stability:this.calculatePitchStability(),timestamp:Date.now()}}extractVolumeFeatures(){let e=0;for(let a=0;a<this.frequencyData.length;a++)e+=this.frequencyData[a]*this.frequencyData[a];const r=Math.sqrt(e/this.frequencyData.length),n=Math.max(...this.frequencyData.map(Math.abs)),i=this.calculateDynamicRange();return{rms:r*100,peak:n*100,dynamicRange:i,volumeVariance:this.calculateVolumeVariance(),breathPattern:this.detectBreathPattern(),timestamp:Date.now()}}extractTonalFeatures(){const e=this.calculateSpectralCentroid(),r=this.calculateHarmonicContent(),n=this.analyzeVoiceQuality();return{brightness:e,harmonicRichness:r,voiceQuality:n,tensionMarkers:this.detectVocalTension(),resonance:this.calculateResonanceQuality(),timestamp:Date.now()}}extractTemporalFeatures(){return{energyLevel:this.calculateEnergyLevel(),rhythmPattern:this.analyzeRhythmPattern(),pauseDetection:this.detectPauses(),speechRate:this.estimateSpeechRate(),articulationClarity:this.analyzeArticulation(),timestamp:Date.now()}}calculateFundamentalFrequency(){const e=this.frequencyData.length,r=new Array(e);for(let s=0;s<e;s++){let d=0;for(let _=0;_<e-s;_++)d+=this.frequencyData[_]*this.frequencyData[_+s];r[s]=d}let n=0,i=0;for(let s=20;s<e/2;s++)r[s]>n&&(n=r[s],i=s);const a=i>0?this.config.sampleRate/i:0;return Math.min(Math.max(a,50),500)}calculatePitchVariance(){const e=this.currentAnalysis.pitchData.slice(-10).map(i=>i.fundamental);if(e.length<2)return 0;const r=e.reduce((i,a)=>i+a,0)/e.length,n=e.reduce((i,a)=>i+Math.pow(a-r,2),0)/e.length;return Math.sqrt(n)}analyzePitchContour(){const e=this.currentAnalysis.pitchData.slice(-10).map(a=>a.fundamental);if(e.length<3)return"flat";let r=0,n=0,i=0;for(let a=1;a<e.length;a++){const s=e[a]-e[a-1];Math.abs(s)<5?i++:s>0?r++:n++}return i>r&&i>n?"flat":r>n?"rising":n>r?"falling":"varied"}calculateSpectralCentroid(){let e=0,r=0;for(let n=0;n<this.dataArray.length;n++){const i=n*this.config.sampleRate/(2*this.dataArray.length),a=this.dataArray[n];e+=i*a,r+=a}return r>0?e/r:0}detectBreathPattern(){const e=this.dataArray.slice(0,10).reduce((i,a)=>i+a,0),r=this.dataArray.slice(10,50).reduce((i,a)=>i+a,0);return{breathiness:e/Math.max(r,1),support:this.calculateBreathSupport(),tension:this.detectVocalTension()}}calculatePitchRange(){const e=this.currentAnalysis.pitchData.slice(-20).map(r=>r.fundamental);return e.length===0?0:Math.max(...e)-Math.min(...e)}calculatePitchStability(){const e=this.calculatePitchVariance();return Math.max(0,100-e*2)}calculateDynamicRange(){const e=this.currentAnalysis.volumeData.slice(-20).map(r=>r.rms);return e.length===0?0:Math.max(...e)-Math.min(...e)}calculateVolumeVariance(){const e=this.currentAnalysis.volumeData.slice(-10).map(n=>n.rms);if(e.length<2)return 0;const r=e.reduce((n,i)=>n+i,0)/e.length;return e.reduce((n,i)=>n+Math.pow(i-r,2),0)/e.length}calculateHarmonicContent(){let e=0;const r=this.calculateFundamentalFrequency();if(r>0)for(let n=2;n<=6;n++){const i=r*n,a=Math.round(i*this.dataArray.length*2/this.config.sampleRate);a<this.dataArray.length&&(e+=this.dataArray[a])}return e/5}analyzeVoiceQuality(){const e=this.calculateSpectralCentroid(),r=this.calculateHarmonicContent(),n=this.detectBreathPattern().breathiness;return{clarity:Math.max(0,100-n*10),richness:Math.min(100,r*2),brightness:Math.min(100,e/50),overall:(r+(100-n*10))/2}}detectVocalTension(){const e=this.dataArray.slice(100,200).reduce((i,a)=>i+a,0),r=this.dataArray.reduce((i,a)=>i+a,0),n=r>0?e/r*100:0;return{level:Math.min(100,n*5),indicators:n>20?["high_freq_energy"]:[]}}calculateEnergyLevel(){const e=this.dataArray.reduce((r,n)=>r+n*n,0);return Math.sqrt(e/this.dataArray.length)}analyzeRhythmPattern(){const e=this.currentAnalysis.temporalPatterns.slice(-10).map(i=>i.energyLevel);if(e.length<3)return"insufficient_data";const r=[];for(let i=1;i<e.length;i++)r.push(e[i]-e[i-1]);const n=this.calculateVariance(r);return n<10?"regular":n<25?"moderate":"irregular"}detectPauses(){const e=this.calculateEnergyLevel(),r=5;return{isPausing:e<r,energyLevel:e,threshold:r}}estimateSpeechRate(){const e=this.currentAnalysis.temporalPatterns.slice(-20);if(e.length<2)return 0;let r=0;for(let i=1;i<e.length;i++)Math.abs(e[i].energyLevel-e[i-1].energyLevel)>10&&r++;const n=e.length*this.config.analysisInterval/1e3;return n>0?r/n:0}analyzeArticulation(){const e=this.dataArray.slice(150,300).reduce((i,a)=>i+a,0),r=this.dataArray.reduce((i,a)=>i+a,0),n=r>0?e/r*100:0;return{clarity:Math.min(100,n*3),precision:n>15?"high":n>8?"medium":"low"}}calculateBreathSupport(){const e=this.currentAnalysis.temporalPatterns.slice(-10).map(n=>n.energyLevel);if(e.length<3)return 50;const r=this.calculateVariance(e);return Math.max(0,100-r*2)}calculateResonanceQuality(){const e=this.calculateHarmonicContent(),r=this.calculateSpectralCentroid();return{clarity:Math.min(100,e*1.5),fullness:Math.min(100,200-r/10),overall:(e+Math.min(100,200-r/10))/2}}calculateVariance(e){if(e.length<2)return 0;const r=e.reduce((n,i)=>n+i,0)/e.length;return e.reduce((n,i)=>n+Math.pow(i-r,2),0)/e.length}trimAnalysisHistory(){this.currentAnalysis.pitchData.length>100&&(this.currentAnalysis.pitchData=this.currentAnalysis.pitchData.slice(-100)),this.currentAnalysis.volumeData.length>100&&(this.currentAnalysis.volumeData=this.currentAnalysis.volumeData.slice(-100)),this.currentAnalysis.tonalQuality.length>100&&(this.currentAnalysis.tonalQuality=this.currentAnalysis.tonalQuality.slice(-100)),this.currentAnalysis.temporalPatterns.length>100&&(this.currentAnalysis.temporalPatterns=this.currentAnalysis.temporalPatterns.slice(-100))}getCurrentAnalysisSummary(){if(!this.isAnalyzing)return{status:"not_analyzing"};const e={pitch:this.currentAnalysis.pitchData.slice(-1)[0]||{},volume:this.currentAnalysis.volumeData.slice(-1)[0]||{},tonal:this.currentAnalysis.tonalQuality.slice(-1)[0]||{},temporal:this.currentAnalysis.temporalPatterns.slice(-1)[0]||{}};return{status:"analyzing",timestamp:Date.now(),current:e,summary:{pitchStability:this.calculatePitchStability(),volumeConsistency:100-this.calculateVolumeVariance(),voiceQuality:e.tonal.voiceQuality||{},speechRate:e.temporal.speechRate||0,emotionalMarkers:this.detectBasicEmotionalMarkers()}}}detectBasicEmotionalMarkers(){var a,s,d;const e=this.calculatePitchVariance();this.calculateVolumeVariance();const r=this.calculatePitchRange(),n=this.currentAnalysis.tonalQuality.slice(-1)[0];return{excitement:e>30&&r>50,monotone:e<10&&r<20,tension:(((a=n==null?void 0:n.tensionMarkers)==null?void 0:a.level)||0)>40,breathiness:(((s=n==null?void 0:n.voiceQuality)==null?void 0:s.clarity)||100)<60,energy:(((d=this.currentAnalysis.temporalPatterns.slice(-1)[0])==null?void 0:d.energyLevel)||0)>50}}dispose(){this.stopAnalysis(),this.microphone&&this.microphone.disconnect(),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close(),this.isInitialized=!1,console.log("🧹 Speech Nuance Analyzer disposed")}}let AC=class{constructor(){this.nuanceAnalyzer=new h3,this.isInitialized=!1,this.emotionPatterns={sarcasm:{textMarkers:["oh great","wonderful","fantastic","perfect","exactly what i wanted","love this","brilliant","outstanding","just what i needed","how lovely","terrific","marvelous","absolutely brilliant","just perfect","goes perfectly wrong","another wonderful","everything goes perfectly wrong","love how nothing","nothing ever works","brilliant system","exactly what i wanted to happen"],audioThresholds:{pitchVariance:{min:0,max:15},pitchRange:{min:0,max:30},monotone:!0,elongation:!0,volumeConsistency:{min:70,max:100}},confidence:{textMatch:30,audioMatch:50,contextMatch:20}},genuineEnthusiasm:{textMarkers:["excited","amazing","incredible","awesome","thrilled","love","breakthrough","exceeded expectations","ahead of schedule","incredible news","genuinely proud","hard work","dedication","accomplished"],audioThresholds:{pitchVariance:{min:25,max:100},pitchRange:{min:40,max:200},volumeVariance:{min:15,max:50},energy:{min:60,max:100},voiceQuality:{min:70,max:100}},confidence:{textMatch:25,audioMatch:60,contextMatch:15}},frustration:{textMarkers:["annoying","frustrated","ridiculous","seriously","enough","tired","issues","problems","dont know","multiple issues","this is ridiculous","are you kidding","come on","what the hell","this is stupid","fed up","whatever","fine"],audioThresholds:{tension:{min:40,max:100},pitchRange:{min:30,max:80},volumeSpikes:!0,articulationHard:!0,breathSupport:{min:30,max:70}},confidence:{textMatch:35,audioMatch:55,contextMatch:10}},politeLie:{textMarkers:["I suppose it's fine","I guess it's okay","not bad I suppose","if you say so","sure whatever","fine I guess","I suppose that works","okay if you think so","whatever you say","I guess that's fine","it's fine I suppose","good enough I guess","whatever works for you"],audioThresholds:{hesitation:!0,controlledTone:!0,pitchVariance:{min:5,max:20},volumeConsistency:{min:80,max:100},artificialBrightness:!0},confidence:{textMatch:20,audioMatch:60,contextMatch:20}},sadness:{textMarkers:["sad","disappointed","upset","hurt","depressed","feeling down","feeling tired","exhausted","drained","I don't know","maybe","I suppose","whatever","doesn't matter","I give up","tired"],audioThresholds:{lowPitch:!0,lowEnergy:{min:0,max:40},breathiness:{min:40,max:100},slowPace:!0,longPauses:!0},confidence:{textMatch:30,audioMatch:50,contextMatch:20}},confidence:{textMarkers:["certain","sure","confident","positive results","happy with the progress","working good","making progress","absolutely","definitely","certainly","without a doubt","I know","I'm sure","positive","guaranteed"],audioThresholds:{clearArticulation:{min:70,max:100},steadyPitch:{min:70,max:100},goodBreathSupport:{min:70,max:100},consistentVolume:{min:70,max:100},richTone:{min:60,max:100}},confidence:{textMatch:25,audioMatch:55,contextMatch:20}}},this.currentEmotionState={detected:"neutral",confidence:0,breakdown:{},audioEvidence:{},textEvidence:{},timestamp:null},this.emotionHistory=[]}async initialize(){try{return await this.nuanceAnalyzer.initialize()?(this.isInitialized=!0,console.log("🧠 Emotion Detection Engine initialized"),!0):!1}catch(e){return console.error("❌ Failed to initialize emotion detection:",e),!1}}startDetection(){return this.isInitialized?(this.nuanceAnalyzer.startAnalysis(),console.log("🎭 Started emotion detection"),!0):(console.error("❌ Emotion detection not initialized"),!1)}stopDetection(){this.nuanceAnalyzer.stopAnalysis(),console.log("⏹️ Stopped emotion detection")}analyzeCurrentEmotion(e=""){try{const r=this.nuanceAnalyzer.getCurrentAnalysisSummary();if(!e||!e.trim())return{detected:"no_text",confidence:0,breakdown:{no_text:{textScore:0,audioScore:0,contextScore:0}},timestamp:Date.now()};const n={};for(const[a,s]of Object.entries(this.emotionPatterns))try{n[a]=this.calculateEmotionScore(a,s,r,e)}catch(d){console.warn(`Error calculating score for ${a}:`,d),n[a]={totalScore:0,textScore:0,audioScore:0,contextScore:0,breakdown:{textMatches:[],audioEvidence:null,contextFactors:[]}}}const i=Object.entries(n).reduce((a,[s,d])=>d.totalScore>a.score?{emotion:s,score:d.totalScore,details:d}:a,{emotion:"neutral",score:0,details:{}});return this.currentEmotionState={detected:i.emotion,confidence:i.score,breakdown:n,audioEvidence:r,textEvidence:this.analyzeTextEvidence(e),timestamp:Date.now()},this.emotionHistory.push({...this.currentEmotionState}),this.trimEmotionHistory(),this.currentEmotionState}catch(r){return console.error("Error in emotion analysis:",r),{detected:"neutral",confidence:0,breakdown:{neutral:{textScore:0,audioScore:0,contextScore:0}},error:r.message,timestamp:Date.now()}}}calculateEmotionScore(e,r,n,i){let a=0,s=0,d=0;if(i&&r.textMarkers){const N=i.toLowerCase(),I=r.textMarkers.filter(ye=>N.includes(ye.toLowerCase()));if(I.length>0&&(a=r.confidence.textMatch,I.length>1)){const ye=Math.min(1.5,1+(I.length-1)*.2);a=Math.min(r.confidence.textMatch*ye,r.confidence.textMatch*1.5)}}n&&n.current&&r.audioThresholds&&(s=this.calculateAudioScore(r.audioThresholds,n)),d=this.calculateContextScore(e,i);const _=a+s+d;return{totalScore:Math.round(_),textScore:Math.round(a),audioScore:Math.round(s),contextScore:Math.round(d),breakdown:{textMatches:i?this.getTextMatches(i,r.textMarkers):[],audioEvidence:this.getAudioEvidence(r.audioThresholds,n),contextFactors:this.getContextFactors(e,i)}}}calculateAudioScore(e,r){var N,I;if(!r||!r.current)return 0;let n=0;const i=50;let a=0,s=0;const d=r.current||{},_=r.summary||{};if(e.pitchVariance){a++;const ye=_.pitchStability?100-_.pitchStability:50;ye>=e.pitchVariance.min&&ye<=e.pitchVariance.max&&s++}if(e.pitchRange&&d.pitch){a++;const ye=d.pitch.range||0;ye>=e.pitchRange.min&&ye<=e.pitchRange.max&&s++}if(e.monotone&&(a++,(_.pitchStability||0)>85&&s++),e.volumeConsistency){a++;const ye=_.volumeConsistency||50;ye>=e.volumeConsistency.min&&ye<=e.volumeConsistency.max&&s++}if(e.energy&&d.temporal){a++;const ye=d.temporal.energyLevel||0;ye>=e.energy.min&&ye<=e.energy.max&&s++}if(e.tension&&d.tonal){a++;const ye=((N=d.tonal.tensionMarkers)==null?void 0:N.level)||0;ye>=e.tension.min&&ye<=e.tension.max&&s++}if(e.voiceQuality&&d.tonal){a++;const ye=((I=d.tonal.voiceQuality)==null?void 0:I.overall)||50;ye>=e.voiceQuality.min&&ye<=e.voiceQuality.max&&s++}return a>0&&(n=s/a*i),n}calculateContextScore(e,r){let n=0;if(!r)return n;const i=r.toLowerCase(),a={sarcasm:["problem","issue","complaint","wrong","broken","failed"],genuineEnthusiasm:["success","achievement","good news","celebration","win"],frustration:["delay","wait","problem","error","mistake","again"],politeLie:["meeting","presentation","required","mandatory","professional"],sadness:["loss","end","over","goodbye","failed","disappointed"],confidence:["plan","strategy","will","going to","ready","prepared"]};if(a[e]){const s=a[e].filter(d=>i.includes(d));n=Math.min(20,s.length*5)}return n}getTextMatches(e,r){if(!e||!r)return[];const n=e.toLowerCase();return r.filter(i=>n.includes(i.toLowerCase()))}getAudioEvidence(e,r){var s,d,_,N,I,ye;const n=[],i=r.current,a=r.summary;return e.monotone&&(a.pitchStability||0)>85&&n.push("Monotone delivery detected"),e.tension&&((d=(s=i.tonal)==null?void 0:s.tensionMarkers)==null?void 0:d.level)>40&&n.push("Vocal tension detected"),(_=e.energy)!=null&&_.min&&((N=i.temporal)==null?void 0:N.energyLevel)>e.energy.min&&n.push("High energy level"),(I=e.lowEnergy)!=null&&I.max&&((ye=i.temporal)==null?void 0:ye.energyLevel)<e.lowEnergy.max&&n.push("Low energy level"),n}getContextFactors(e,r){const n=[];return r&&(e==="sarcasm"&&r.includes("great")&&n.push("Positive word in potentially negative context"),e==="frustration"&&r.includes("again")&&n.push("Repetition indicator suggests frustration")),n}analyzeTextEvidence(e){return e?{length:e.length,wordCount:e.split(" ").length,hasPositiveWords:/\b(good|great|love|amazing|wonderful|excellent|fantastic)\b/i.test(e),hasNegativeWords:/\b(bad|terrible|awful|hate|horrible|worst|problem)\b/i.test(e),hasHesitation:/\b(um|uh|well|like|you know|sort of|kind of)\b/i.test(e),hasIntensifiers:/\b(very|really|extremely|incredibly|absolutely|totally)\b/i.test(e)}:{}}getCurrentEmotion(){return this.currentEmotionState}getEmotionSummary(){var r;const e=this.getCurrentEmotion();return{primaryEmotion:e.detected,confidence:e.confidence,timestamp:e.timestamp,evidence:{strongestIndicators:this.getStrongestIndicators(e),audioSupport:((r=e.audioEvidence)==null?void 0:r.summary)||{},textSupport:e.textEvidence||{}},interpretation:this.getEmotionInterpretation(e.detected,e.confidence)}}getStrongestIndicators(e){const r=e.breakdown[e.detected];if(!r)return[];const n=[];return r.textScore>15&&n.push(`Text markers (${r.textScore} points)`),r.audioScore>25&&n.push(`Audio patterns (${r.audioScore} points)`),r.contextScore>10&&n.push(`Context clues (${r.contextScore} points)`),n}getEmotionInterpretation(e,r){var a;const n={sarcasm:{high:"Strong sarcasm detected - speaker likely means the opposite of what they said",medium:"Possible sarcasm - speaker may be expressing frustration indirectly",low:"Mild sarcastic undertones detected"},genuineEnthusiasm:{high:"Authentic enthusiasm - speaker is genuinely excited",medium:"Positive emotion detected - likely genuine approval",low:"Mild positive sentiment"},frustration:{high:"Clear frustration - speaker is upset or annoyed",medium:"Moderate irritation detected",low:"Slight tension or impatience"},politeLie:{high:"Polite disagreement - speaker being diplomatic while disagreeing",medium:"Possible social politeness - may not fully agree",low:"Mild reservation detected"},sadness:{high:"Sadness or disappointment detected",medium:"Low mood or mild disappointment",low:"Subdued emotional state"},confidence:{high:"Strong confidence - speaker is very certain",medium:"Good confidence level detected",low:"Mild confidence or certainty"}},i=r>70?"high":r>40?"medium":"low";return((a=n[e])==null?void 0:a[i])||"Emotion detected with moderate confidence"}trimEmotionHistory(){this.emotionHistory.length>50&&(this.emotionHistory=this.emotionHistory.slice(-50))}dispose(){this.stopDetection(),this.nuanceAnalyzer.dispose(),this.isInitialized=!1,console.log("🧹 Emotion Detection Engine disposed")}};class CC extends AC{constructor(){super(),this.fusionWeights={bert:.35,voice:.3,patterns:.2,temporal:.15},this.advancedPatterns={joy:{linguistic:{positiveIntensifiers:["absolutely","incredibly","amazingly","fantastically","exceptionally"],exclamationPatterns:/(!{1,3}|\?!|wow|yay|hooray)/gi,superlatives:["best","greatest","most amazing","perfect","outstanding"],emoticons:["😊","😄","🎉","❤️","🥳",":)",":D","=D"],repetitionBonus:/(.)\1{2,}/g},acoustic:{f0_mean:{min:180,max:350,weight:.25},f0_variance:{min:200,max:800,weight:.3},energy:{min:.4,max:1,weight:.2},spectralCentroid:{min:1e3,max:4e3,weight:.15},jitter:{min:.01,max:.05,weight:.1}},temporal:{sustainedPositivity:!0,energyBursts:!0,laughterDetection:!0}},sadness:{linguistic:{negativeMarkers:["nobody","nothing","never","alone","empty","hopeless"],pastTenseRegret:/\b(should have|could have|if only|wish I|regret|miss)\b/gi,isolationWords:["alone","lonely","abandoned","forgotten","ignored"],lossWords:["lost","gone","dead","ended","broken","failed"],lowEnergyWords:["tired","exhausted","drained","weak","can't"]},acoustic:{f0_mean:{min:80,max:200,weight:.3},f0_variance:{min:20,max:150,weight:.25},energy:{min:.05,max:.4,weight:.25},breathiness:{min:.3,max:1,weight:.15},pauseDuration:{min:.5,max:3,weight:.05}},temporal:{energyDecline:!0,speechSlowing:!0,increasedSilence:!0}},anger:{linguistic:{profanity:["damn","hell","shit","fuck","bullshit","crap"],intensiveNegatives:["absolutely not","never again","completely wrong"],demandingLanguage:["must","have to","need to","better","should"],aggressiveQuestions:/\bwhy (the hell|would|did|are|is)\b/gi,allCapsWords:/\b[A-Z]{3,}\b/g,exclamationClusters:/!{2,}/g},acoustic:{f0_mean:{min:150,max:400,weight:.2},f0_variance:{min:300,max:1200,weight:.3},energy:{min:.6,max:1,weight:.25},spectralSlope:{min:-20,max:-5,weight:.15},harshness:{min:.4,max:1,weight:.1}},temporal:{voiceBreaks:!0,suddenLoudness:!0,rhythmDisruption:!0}},frustration:{linguistic:{problemWords:["issue","problem","trouble","difficulty","struggle"],stuckLanguage:["can't","won't work","not working","broken","failing"],exhaustionMarkers:["tired of","fed up","had enough","over this"],repetitionComplaints:/\b(again|another|still|keep|always)\b.*\b(problem|issue|trouble)\b/gi,timeWasteWords:["waste","wasting time","forever","taking too long"]},acoustic:{f0_mean:{min:120,max:300,weight:.2},f0_variance:{min:150,max:600,weight:.25},energy:{min:.3,max:.8,weight:.2},tenseness:{min:.4,max:1,weight:.25},irregularRhythm:{min:.3,max:1,weight:.1}},temporal:{buildingTension:!0,sighing:!0,effortfulSpeech:!0}},sarcasm:{linguistic:{positiveWordsNegativeContext:["great","wonderful","perfect","amazing","fantastic"],obviousStatements:/\b(obviously|clearly|of course|naturally|sure)\b/gi,contradictioryPhrases:["yeah right","as if","I bet","how convenient"],exaggeratedPoliteness:["thanks so much","how lovely","how nice"],questionableSupport:/\b(good luck|have fun|enjoy) (with that|this)\b/gi},acoustic:{f0_mean:{min:100,max:250,weight:.15},f0_variance:{min:50,max:200,weight:.3},flatIntonation:{min:0,max:.3,weight:.25},elongatedSyllables:{min:.3,max:1,weight:.2},monotoneDelivery:{min:.4,max:1,weight:.1}},temporal:{deliberateSlowing:!0,emphasisMismatch:!0,pauseManipulation:!0}},fear:{linguistic:{fearWords:["scared","afraid","terrified","panic","anxious","worried"],uncertaintyMarkers:["maybe","perhaps","I think","not sure","worried that"],protectiveLanguage:["safe","careful","dangerous","risky","threat"],helpSeeking:["help","support","assistance","guidance","advice"]},acoustic:{f0_mean:{min:200,max:450,weight:.25},f0_variance:{min:400,max:1e3,weight:.3},energy:{min:.2,max:.7,weight:.2},voiceTremor:{min:.3,max:1,weight:.15},breathShortness:{min:.4,max:1,weight:.1}},temporal:{acceleratedSpeech:!0,voiceBreaking:!0,hesitation:!0}},surprise:{linguistic:{exclamations:["wow","whoa","oh my","really","seriously","no way"],disbeliefMarkers:["can't believe","unbelievable","incredible","shocking"],questioningReality:/\b(is this real|am I dreaming|did this really)\b/gi,suddenRealizations:["I just realized","wait","hold on","actually"]},acoustic:{f0_mean:{min:200,max:500,weight:.2},f0_variance:{min:500,max:1500,weight:.35},energy:{min:.4,max:1,weight:.25},suddennessMarker:{min:.5,max:1,weight:.15},riseTime:{min:.1,max:.3,weight:.05}},temporal:{suddenOnset:!0,rapidTransition:!0,energySpike:!0}}},this.temporalContext={emotionHistory:[],confidenceHistory:[],trendAnalysis:null,contextWindow:30},this.bertConfig={enabled:!0,candidates:["joy","sadness","anger","fear","surprise","neutral","frustration","sarcasm"],contextWindow:5,confidence_threshold:.1},this.voiceConfig={sampleRate:44100,frameSize:2048,hopLength:512,windowFunction:"hann",features:["f0","energy","spectralCentroid","mfcc","zcr","spectralRolloff"]}}async initializeEnhanced(){try{return await super.initialize(),await this.initializeBERT(),await this.initializeVoiceAnalysis(),console.log("🚀 Enhanced Emotion Engine V2.0 initialized successfully"),!0}catch(e){return console.error("❌ Failed to initialize enhanced emotion engine:",e),!1}}async initializeBERT(){try{const e=await Yc("I am testing the BERT integration");e&&e.array&&e.array.length>0?(this.bertConfig.enabled=!0,console.log("✅ BERT integration active")):(console.log("⚠️ BERT falling back to lexical analysis"),this.bertConfig.enabled=!0)}catch(e){console.warn("⚠️ BERT initialization warning:",e),this.bertConfig.enabled=!0}}async initializeVoiceAnalysis(){try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(r=>r.stop()),console.log("🎤 Voice analysis capabilities available"),!0}catch(e){console.warn("⚠️ Voice analysis not available:",e)}return!1}async analyzeEmotionAdvanced(e,r=null,n={}){const i=performance.now();try{const a=await this.analyzeBERT(e),s=this.analyzePatterns(e),d=r?await this.analyzeVoice(r):null,_=this.analyzeTemporalContext(),N=this.fuseEmotionFeatures({bert:a,patterns:s,voice:d,temporal:_});this.updateTemporalContext(N);const I=performance.now()-i;return{...N,modalities:{bert:a,patterns:s,voice:d,temporal:_},metadata:{processingTime:Math.round(I),timestamp:Date.now(),version:"2.0"}}}catch(a){return console.error("❌ Enhanced emotion analysis failed:",a),super.analyzeCurrentEmotion(e)}}async analyzeBERT(e){if(!this.bertConfig.enabled||!(e!=null&&e.trim()))return{detected:"neutral",confidence:.1,breakdown:{}};try{const r=await Yc(e,{candidates:this.bertConfig.candidates}),n={};let i="neutral",a=0;r.array&&r.array.length>0&&r.array.forEach(d=>{n[d.label]=d.score,d.score>a&&(a=d.score,i=d.label)});const s=this.calculateBERTQualityBoost(e,n);return a=Math.min(.95,a*(1+s)),{detected:i,confidence:a,breakdown:n,qualityScore:s}}catch(r){return console.warn("⚠️ BERT analysis failed, using fallback:",r),this.analyzePatterns(e)}}calculateBERTQualityBoost(e,r){let n=0;const i=e.split(/\s+/).length;i>10&&(n+=.1),i>20&&(n+=.1),this.countEmotionWords(e)>2&&(n+=.15);const s=Object.values(r),d=Math.max(...s),_=s.sort((I,ye)=>ye-I)[1]||0;return d-_>.3&&(n+=.2),Math.min(.5,n)}analyzePatterns(e){if(!(e!=null&&e.trim()))return{detected:"neutral",confidence:.1,breakdown:{}};const r={};Object.entries(this.advancedPatterns).forEach(([a,s])=>{let d=0;s.linguistic&&(d+=this.analyzeLinguisticPatterns(e,s.linguistic)),d+=this.analyzeTextComplexity(e,a),d+=this.analyzeEmotionalIntensity(e,a),r[a]=Math.min(.95,d)});const n=Object.values(r).reduce((a,s)=>a+s,0);n>0&&Object.keys(r).forEach(a=>{r[a]=r[a]/n});const i=Object.entries(r).reduce((a,s)=>r[a[0]]>r[s[0]]?a:s)[0];return{detected:i||"neutral",confidence:r[i]||.1,breakdown:r}}analyzeLinguisticPatterns(e,r){let n=0;const i=e.toLowerCase();return Object.entries(r).forEach(([a,s])=>{switch(a){case"positiveIntensifiers":case"negativeMarkers":case"fearWords":case"problemWords":n+=this.countWordMatches(i,s)*.1;break;case"exclamationPatterns":case"pastTenseRegret":case"aggressiveQuestions":if(s instanceof RegExp){const d=i.match(s);n+=((d==null?void 0:d.length)||0)*.15}break;case"repetitionBonus":case"allCapsWords":if(s instanceof RegExp){const d=e.match(s);n+=((d==null?void 0:d.length)||0)*.05}break;case"emoticons":n+=this.countWordMatches(e,s)*.08;break}}),Math.min(.8,n)}countWordMatches(e,r){return Array.isArray(r)?r.reduce((n,i)=>{const a=new RegExp(`\\b${i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,"gi"),s=e.match(a);return n+((s==null?void 0:s.length)||0)},0):0}analyzeTextComplexity(e,r){let n=0;const i=e.split(/[.!?]+/).filter(s=>s.trim().length>0),a=e.split(/\s+/).length/i.length;switch(r){case"anger":a<8&&(n+=.1);break;case"sadness":a>12&&(n+=.1);break;case"joy":const s=(e.match(/!/g)||[]).length;n+=Math.min(.2,s*.05);break}return n}analyzeEmotionalIntensity(e,r){let n=0;const i=["very","extremely","really","so","completely","absolutely","totally"],a=this.countWordMatches(e.toLowerCase(),i);n+=Math.min(.15,a*.03);const s=/\b(\w+)\s+\1\b/gi,d=(e.match(s)||[]).length;n+=Math.min(.1,d*.05);const _=/\b[A-Z]{3,}\b/g,N=(e.match(_)||[]).length;return n+=Math.min(.1,N*.03),n}async analyzeVoice(e){return{detected:"neutral",confidence:.5,features:{pitch:200,energy:.5,spectralCentroid:2e3,voiceQuality:.7}}}analyzeTemporalContext(){var a;const e=this.temporalContext.emotionHistory;if(e.length<2)return{detected:"neutral",confidence:.1,trend:"stable"};const r=e.slice(-5),n=this.calculateEmotionTrend(r),i=this.calculateEmotionConsistency(r);return{detected:((a=r[r.length-1])==null?void 0:a.emotion)||"neutral",confidence:i,trend:n,consistency:i}}calculateEmotionTrend(e){if(e.length<3)return"stable";const n=e.slice(-3).map(i=>this.getEmotionValence(i.emotion));return n[2]>n[1]&&n[1]>n[0]?"improving":n[2]<n[1]&&n[1]<n[0]?"declining":"stable"}getEmotionValence(e){return{joy:.8,surprise:.3,neutral:0,frustration:-.3,anger:-.6,sadness:-.7,fear:-.5,sarcasm:-.2}[e]||0}calculateEmotionConsistency(e){if(e.length<2)return .5;const r=this.findDominantEmotion(e);return e.filter(i=>i.emotion===r).length/e.length}findDominantEmotion(e){const r={};return e.forEach(n=>{r[n.emotion]=(r[n.emotion]||0)+1}),Object.entries(r).reduce((n,i)=>r[n[0]]>r[i[0]]?n:i)[0]}fuseEmotionFeatures({bert:e,patterns:r,voice:n,temporal:i}){const a=this.bertConfig.candidates,s={};a.forEach(Ce=>{s[Ce]=0}),e&&Object.entries(e.breakdown).forEach(([Ce,Ve])=>{s[Ce]+=Ve*this.fusionWeights.bert}),r&&Object.entries(r.breakdown).forEach(([Ce,Ve])=>{s[Ce]+=Ve*this.fusionWeights.patterns}),n&&(s[n.detected]+=n.confidence*this.fusionWeights.voice),i&&(s[i.detected]+=i.confidence*this.fusionWeights.temporal);const d=Object.values(s).reduce((Ce,Ve)=>Ce+Ve,0);d>0&&Object.keys(s).forEach(Ce=>{s[Ce]=s[Ce]/d});const _=Object.entries(s).reduce((Ce,Ve)=>s[Ce[0]]>s[Ve[0]]?Ce:Ve)[0],N=s[_],I=Object.values(s).sort((Ce,Ve)=>Ve-Ce)[1]||0,ye=N-I,xe=Math.min(.95,N+ye*.5);return{detected:_||"neutral",confidence:xe,breakdown:s,fusionWeights:this.fusionWeights}}updateTemporalContext(e){const r=Date.now();this.temporalContext.emotionHistory.push({emotion:e.detected,confidence:e.confidence,timestamp:r}),this.temporalContext.confidenceHistory.push({confidence:e.confidence,timestamp:r});const n=this.temporalContext.contextWindow*1e3;this.temporalContext.emotionHistory=this.temporalContext.emotionHistory.filter(i=>r-i.timestamp<n),this.temporalContext.confidenceHistory=this.temporalContext.confidenceHistory.filter(i=>r-i.timestamp<n)}countEmotionWords(e){const r=["happy","sad","angry","excited","frustrated","worried","scared","joyful","depressed","furious","thrilled","annoyed","anxious","terrified","love","hate","fear","hope","despair","rage","bliss","panic"];return this.countWordMatches(e.toLowerCase(),r)}getAnalysisSummary(){return{engine:"Enhanced Emotion Engine V2.0",capabilities:{bertIntegration:this.bertConfig.enabled,voiceAnalysis:!0,patternRecognition:!0,temporalModeling:!0,multiModalFusion:!0},stats:{emotionHistory:this.temporalContext.emotionHistory.length,averageConfidence:this.getAverageConfidence(),temporalWindow:this.temporalContext.contextWindow},fusionWeights:this.fusionWeights}}getAverageConfidence(){const e=this.temporalContext.confidenceHistory;if(e.length===0)return 0;const r=e.reduce((n,i)=>n+i.confidence,0);return Math.round(r/e.length*100)/100}}class jC{constructor(){this.modelEndpoints={primary:null,fallback:"lexical",ensemble:[]},this.analysisStrategies={sentence_level:!0,context_window:!0,emotion_specific:!0,confidence_calibration:!0,ensemble_voting:!0},this.emotionHierarchy={primary:["joy","sadness","anger","fear"],secondary:["surprise","frustration","sarcasm"],neutral:["neutral","calm","content"]},this.confidenceCalibration={bertBase:.7,lexicalBase:.5,ensembleBonus:.2,contextBonus:.15,lengthPenalty:.1},this.contextCache=new Map,this.analysisHistory=[]}async analyzeEmotionEnhanced(e,r={}){const n={includeConfidenceCalibration:!0,useContextWindow:!0,enableEnsemble:!1,sentenceLevel:!0,...r};try{const i=this.preprocessText(e);if(!i.trim())return this.createEmptyResult();const a=this.selectAnalysisStrategy(i,n);let s;switch(a){case"sentence_level":s=await this.analyzeSentenceLevel(i,n);break;case"context_window":s=await this.analyzeWithContext(i,n);break;case"ensemble":s=await this.analyzeEnsemble(i,n);break;default:s=await this.analyzeStandard(i,n)}return n.includeConfidenceCalibration&&(s=this.calibrateConfidence(s,i,a)),s.metadata={strategy:a,textLength:i.length,wordCount:i.split(/\s+/).length,processingTime:Date.now(),version:"2.0"},this.cacheResult(i,s),this.updateAnalysisHistory(s),s}catch(i){return console.error("❌ Enhanced BERT analysis failed:",i),this.fallbackAnalysis(e)}}preprocessText(e){if(!e||typeof e!="string")return"";let r=e.trim();return r=r.replace(/\s+/g," "),r=r.replace(/[^\w\s.,!?;:'"()-]/g," "),r.length>0&&!/[.!?]$/.test(r)&&(r+="."),r}selectAnalysisStrategy(e,r){const n=e.split(/\s+/).length,i=e.split(/[.!?]+/).filter(a=>a.trim().length>0).length;return n<5?"standard":i>1&&r.sentenceLevel?"sentence_level":n>15&&r.useContextWindow?"context_window":n>50&&r.enableEnsemble?"ensemble":"standard"}async analyzeStandard(e,r){try{const n=await Yc(e,{candidates:this.getAllEmotionLabels()});return this.enhanceResult(n,"standard")}catch(n){return console.warn("Standard BERT analysis failed, using lexical fallback:",n),this.lexicalFallback(e)}}async analyzeSentenceLevel(e,r){const n=this.splitIntoSentences(e);if(n.length<=1)return this.analyzeStandard(e,r);try{const i=await Promise.all(n.map(s=>Yc(s.trim(),{candidates:this.getAllEmotionLabels()}))),a=this.aggregateSentenceResults(i,n);return this.enhanceResult(a,"sentence_level")}catch(i){return console.warn("Sentence-level analysis failed:",i),this.analyzeStandard(e,r)}}async analyzeWithContext(e,r){const n=this.generateContextKey(e);if(this.contextCache.has(n))return this.contextCache.get(n);try{const i=this.createContextWindows(e,3),a=await Promise.all(i.map(_=>Yc(_,{candidates:this.getAllEmotionLabels()}))),s=this.mergeContextResults(a),d=this.enhanceResult(s,"context_window");return this.contextCache.set(n,d),d}catch(i){return console.warn("Context analysis failed:",i),this.analyzeStandard(e,r)}}async analyzeEnsemble(e,r){try{const[n,i,a]=await Promise.all([this.analyzeStandard(e,r),this.analyzeSentenceLevel(e,r),this.analyzeWithContext(e,r)]),s=this.ensembleVoting([{result:n,weight:.4},{result:i,weight:.35},{result:a,weight:.25}]);return this.enhanceResult(s,"ensemble")}catch(n){return console.warn("Ensemble analysis failed:",n),this.analyzeStandard(e,r)}}splitIntoSentences(e){return e.replace(/([.!?])\s*(?=[A-Z])/g,"$1|").split("|").map(r=>r.trim()).filter(r=>r.length>0)}aggregateSentenceResults(e,r){const n={};let i=0;return e.forEach((s,d)=>{if(!s||!s.array)return;const _=Math.max(.1,r[d].split(/\s+/).length/10);i+=_,s.array.forEach(N=>{const I=N.label;n[I]=(n[I]||0)+N.score*_})}),Object.keys(n).forEach(s=>{n[s]=n[s]/i}),{array:Object.entries(n).sort(([,s],[,d])=>d-s).map(([s,d])=>({label:s,score:d})),map:n}}createContextWindows(e,r=3){const n=this.splitIntoSentences(e),i=[];for(let a=0;a<n.length;a+=r-1){const s=n.slice(a,a+r).join(" ");s.trim().length>0&&i.push(s)}return i.length>0?i:[e]}mergeContextResults(e){const r={};let n=0;return e.forEach(a=>{!a||!a.array||(n++,a.array.forEach(s=>{r[s.label]=(r[s.label]||0)+s.score}))}),n>0&&Object.keys(r).forEach(a=>{r[a]=r[a]/n}),{array:Object.entries(r).sort(([,a],[,s])=>s-a).map(([a,s])=>({label:a,score:s})),map:r}}ensembleVoting(e){const r={};let n=0;return e.forEach(({result:a,weight:s})=>{!a||!a.array||(n+=s,a.array.forEach(d=>{r[d.label]=(r[d.label]||0)+d.score*s}))}),n>0&&Object.keys(r).forEach(a=>{r[a]=r[a]/n}),{array:Object.entries(r).sort(([,a],[,s])=>s-a).map(([a,s])=>({label:a,score:s})),map:r}}calibrateConfidence(e,r,n){var xe;if(!e||!e.array||e.array.length===0)return e;const i=r.split(/\s+/).length,a=e.array[0].score,s=((xe=e.array[1])==null?void 0:xe.score)||0;let d=1;switch(n){case"ensemble":d*=1+this.confidenceCalibration.ensembleBonus;break;case"context_window":d*=1+this.confidenceCalibration.contextBonus;break;case"sentence_level":d*=1+this.confidenceCalibration.contextBonus*.5;break}i<5?d*=1-this.confidenceCalibration.lengthPenalty:i>20&&(d*=1+this.confidenceCalibration.lengthPenalty*.5);const _=a-s;_>.3?d*=1.1:_<.1&&(d*=.9);const N=e.array.map(Ce=>({...Ce,score:Math.min(.95,Math.max(.05,Ce.score*d))})),I=N.reduce((Ce,Ve)=>Ce+Ve.score,0);I>0&&N.forEach(Ce=>{Ce.score=Ce.score/I});const ye={};return N.forEach(Ce=>{ye[Ce.label]=Ce.score}),{array:N,map:ye}}lexicalFallback(e){const r=(e||"").toLowerCase(),n={};Object.entries({joy:{patterns:[/(happy|joy|excited|amazing|wonderful|love|great|awesome|fantastic|brilliant|excellent|perfect|outstanding|superb|magnificent|marvelous|thrilled|delighted|elated|cheerful|joyful|pleased|glad)/g,/(yay|hooray|wow|yes|definitely|absolutely|certainly|incredible|terrific)/g,/(celebrate|celebration|party|fun|laughter|smile|laughing|smiling|cheering|upbeat|positive|optimistic)/g],weight:1},sadness:{patterns:[/(sad|depressed|upset|disappointed|hurt|miserable|unhappy|sorrowful|gloomy|dejected|melancholy|blue|down|low)/g,/(terrible|awful|horrible|devastating|heartbreaking|tragic|unfortunate|hopeless|despair|lonely|empty|broken)/g,/(crying|tears|weeping|sobbing|grieving|mourning|sorrow|regret|loss|grief|anguish|pain|suffering)/g,/(failed|failure|lost|losing|gone|dead|died|death|goodbye|farewell|end|over|finished)/g],weight:1},anger:{patterns:[/(angry|mad|furious|irritated|annoyed|frustrated|outraged|livid|enraged|irate|hostile|pissed|rage|raging)/g,/(hate|disgusted|appalled|infuriated|incensed|aggravated|fed up|sick of|can't stand)/g,/(damn|hell|stupid|ridiculous|unacceptable|outrageous|bullshit|crap|nonsense|idiotic|moronic)/g,/(what the hell|what the fuck|are you kidding me|this is bullshit|enough is enough)/g],weight:1},fear:{patterns:[/(scared|afraid|terrified|panic|anxious|worried|nervous|frightened|alarmed|concerned)/g,/(danger|dangerous|risky|threat|threatening|menacing|ominous|sinister)/g,/(help|support|assistance|guidance|advice|protection|safety|security)/g],weight:1},surprise:{patterns:[/(surprised|shocked|amazed|astonished|stunned|bewildered|startled|speechless)/g,/(wow|whoa|oh my|really|seriously|no way|unbelievable|incredible|shocking)/g,/(sudden|unexpected|out of nowhere|all of a sudden|without warning)/g],weight:1},frustration:{patterns:[/(frustrat|annoy|difficult|problem|issue|trouble|struggle|challenge)/g,/(ugh|sigh|tired of|fed up|had enough|over this|can't deal)/g,/(why me|why now|not again|seriously|come on|give me a break)/g],weight:1},sarcasm:{patterns:[/(yeah right|sure|as if|nice going|big surprise|how convenient)/g,/(obviously|clearly|of course|naturally|brilliant|perfect|wonderful)/g,/(great|fantastic|amazing|excellent) (job|work|idea|plan)/g],weight:.8}}).forEach(([_,N])=>{let I=0;N.patterns.forEach(ye=>{const xe=r.match(ye)||[];I+=xe.length*.2}),n[_]=Math.min(.9,I*N.weight)}),n.neutral=.1;const a=r.match(/(very|extremely|really|so|completely|absolutely|totally|incredibly|amazingly)/g)||[];a.length>0&&Object.keys(n).forEach(_=>{_!=="neutral"&&(n[_]=Math.min(.95,n[_]*(1+.1*a.length)))});const s=Object.values(n).reduce((_,N)=>_+N,0);return s>0&&Object.keys(n).forEach(_=>{n[_]=n[_]/s}),{array:Object.entries(n).sort(([,_],[,N])=>N-_).map(([_,N])=>({label:_,score:N})),map:n}}enhanceResult(e,r){var n,i;return e?{...e,enhancedMetadata:{strategy:r,timestamp:Date.now(),confidence_level:this.getConfidenceLevel(e),dominant_emotion:((i=(n=e.array)==null?void 0:n[0])==null?void 0:i.label)||"neutral",emotion_diversity:this.calculateEmotionDiversity(e)}}:this.createEmptyResult()}getConfidenceLevel(e){if(!e.array||e.array.length===0)return"very_low";const r=e.array[0].score;return r>.8?"very_high":r>.6?"high":r>.4?"medium":r>.2?"low":"very_low"}calculateEmotionDiversity(e){if(!e.array||e.array.length<2)return 0;const r=e.array.reduce((n,i)=>i.score>0?n-i.score*Math.log2(i.score):n,0);return Math.round(r*100)/100}getAllEmotionLabels(){return[...this.emotionHierarchy.primary,...this.emotionHierarchy.secondary,...this.emotionHierarchy.neutral]}generateContextKey(e){let r=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);r=(r<<5)-r+i,r=r&r}return`ctx_${Math.abs(r)}`}cacheResult(e,r){if(this.contextCache.size>100){const i=this.contextCache.keys().next().value;this.contextCache.delete(i)}const n=this.generateContextKey(e);this.contextCache.set(n,{...r,cached:!0})}updateAnalysisHistory(e){var r,n,i,a,s;this.analysisHistory.push({timestamp:Date.now(),strategy:(r=e.enhancedMetadata)==null?void 0:r.strategy,confidence:((i=(n=e.array)==null?void 0:n[0])==null?void 0:i.score)||0,emotion:((s=(a=e.array)==null?void 0:a[0])==null?void 0:s.label)||"neutral"}),this.analysisHistory.length>1e3&&(this.analysisHistory=this.analysisHistory.slice(-500))}createEmptyResult(){return{array:[{label:"neutral",score:.5}],map:{neutral:.5},enhancedMetadata:{strategy:"fallback",timestamp:Date.now(),confidence_level:"low",dominant_emotion:"neutral",emotion_diversity:0}}}getStats(){return{totalAnalyses:this.analysisHistory.length,cacheSize:this.contextCache.size,averageConfidence:this.getAverageConfidence(),mostCommonEmotion:this.getMostCommonEmotion(),strategyUsage:this.getStrategyUsage()}}getAverageConfidence(){if(this.analysisHistory.length===0)return 0;const e=this.analysisHistory.reduce((r,n)=>r+n.confidence,0);return Math.round(e/this.analysisHistory.length*100)/100}getMostCommonEmotion(){if(this.analysisHistory.length===0)return"neutral";const e={};return this.analysisHistory.forEach(r=>{e[r.emotion]=(e[r.emotion]||0)+1}),Object.entries(e).reduce((r,n)=>e[r[0]]>e[n[0]]?r:n)[0]}getStrategyUsage(){const e={};return this.analysisHistory.forEach(r=>{r.strategy&&(e[r.strategy]=(e[r.strategy]||0)+1)}),e}}const EC=new jC;async function LC(t,e={}){return EC.analyzeEmotionEnhanced(t,e)}let RC=class{constructor(){this.audioContext=null,this.analyser=null,this.mediaRecorder=null,this.stream=null,this.isRecording=!1,this.isAnalyzing=!1,this.audioConfig={sampleRate:44100,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-90,maxDecibels:-10},this.voiceFeatures={pitch:[],energy:[],spectralCentroid:[],zeroCrossingRate:[],mfcc:[],formants:[],jitter:[],shimmer:[]},this.analysisState={currentFeatures:{},emotionHistory:[],confidenceHistory:[],realTimeResults:null,processingQueue:[]},this.voiceEmotionPatterns={joy:{pitch:{mean:[180,350],variance:[200,800],trend:"rising"},energy:{mean:[.4,1],variance:[.2,.6]},spectralCentroid:{mean:[1e3,4e3],variance:[500,1500]},speechRate:{multiplier:[1.1,1.8]},voiceQuality:{brightness:[.6,1],richness:[.5,.9]}},sadness:{pitch:{mean:[80,200],variance:[20,150],trend:"falling"},energy:{mean:[.05,.4],variance:[.05,.3]},spectralCentroid:{mean:[500,2e3],variance:[200,800]},speechRate:{multiplier:[.4,.9]},voiceQuality:{breathiness:[.3,1],darkness:[.4,.9]}},anger:{pitch:{mean:[150,400],variance:[300,1200],trend:"irregular"},energy:{mean:[.6,1],variance:[.3,.8]},spectralCentroid:{mean:[1500,5e3],variance:[800,2e3]},speechRate:{multiplier:[.8,1.4]},voiceQuality:{harshness:[.4,1],tension:[.5,1]}},fear:{pitch:{mean:[200,450],variance:[400,1e3],trend:"trembling"},energy:{mean:[.2,.7],variance:[.3,.8]},spectralCentroid:{mean:[1200,4500],variance:[600,1800]},speechRate:{multiplier:[1.2,2]},voiceQuality:{tremor:[.3,1],breathShortness:[.4,1]}},frustration:{pitch:{mean:[120,300],variance:[150,600],trend:"clipped"},energy:{mean:[.3,.8],variance:[.2,.7]},spectralCentroid:{mean:[800,3500],variance:[400,1200]},speechRate:{multiplier:[.7,1.3]},voiceQuality:{tenseness:[.4,1],effort:[.3,.8]}},sarcasm:{pitch:{mean:[100,250],variance:[50,200],trend:"exaggerated"},energy:{mean:[.2,.6],variance:[.1,.4]},spectralCentroid:{mean:[600,2500],variance:[300,1e3]},speechRate:{multiplier:[.6,1.1]},voiceQuality:{flatness:[.4,1],deliberateness:[.5,.9]}}},this.callbacks={onEmotionDetected:null,onVoiceFeaturesExtracted:null,onTranscriptReceived:null,onAnalysisComplete:null}}async initialize(){try{return await this.initializeAudio(),await Kd.initialize(),console.log("🎤 Enhanced Voice Emotion Analyzer V2.0 initialized"),!0}catch(e){return console.error("❌ Failed to initialize voice emotion analyzer:",e),!1}}async initializeAudio(){try{return this.audioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:this.audioConfig.sampleRate}),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.audioConfig.fftSize,this.analyser.smoothingTimeConstant=this.audioConfig.smoothingTimeConstant,this.analyser.minDecibels=this.audioConfig.minDecibels,this.analyser.maxDecibels=this.audioConfig.maxDecibels,console.log("🔊 Audio analysis initialized"),!0}catch(e){throw console.error("❌ Audio initialization failed:",e),e}}async startAnalysis(e={}){if(this.isRecording)return console.warn("⚠️ Analysis already in progress"),!1;try{this.stream=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:this.audioConfig.sampleRate,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),this.audioContext.createMediaStreamSource(this.stream).connect(this.analyser),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:"audio/webm;codecs=opus"});const n=[];return this.mediaRecorder.ondataavailable=i=>{i.data.size>0&&n.push(i.data)},this.mediaRecorder.onstop=async()=>{const i=new Blob(n,{type:"audio/webm"});await this.processRecordedAudio(i)},this.mediaRecorder.start(1e3),this.isRecording=!0,this.startRealTimeAnalysis(),console.log("🎤 Voice emotion analysis started"),!0}catch(r){return console.error("❌ Failed to start voice analysis:",r),!1}}stopAnalysis(){if(!this.isRecording){console.warn("⚠️ No analysis in progress");return}try{this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.stopRealTimeAnalysis(),this.isRecording=!1,console.log("⏹️ Voice emotion analysis stopped")}catch(e){console.error("❌ Error stopping voice analysis:",e)}}startRealTimeAnalysis(){const e=()=>{if(this.isRecording){try{const r=this.extractVoiceFeatures();this.analysisState.currentFeatures=r;const n=this.analyzeVoiceEmotion(r);this.updateEmotionHistory(n),this.callbacks.onVoiceFeaturesExtracted&&this.callbacks.onVoiceFeaturesExtracted(r,n)}catch(r){console.warn("⚠️ Real-time analysis error:",r)}this.isRecording&&(this.analysisFrameId=requestAnimationFrame(e))}};this.analysisFrameId=requestAnimationFrame(e)}stopRealTimeAnalysis(){this.analysisFrameId&&(cancelAnimationFrame(this.analysisFrameId),this.analysisFrameId=null)}extractVoiceFeatures(){const e=this.analyser.frequencyBinCount,r=new Uint8Array(e),n=new Uint8Array(e);this.analyser.getByteTimeDomainData(r),this.analyser.getByteFrequencyData(n);const i={timestamp:Date.now(),energy:this.calculateEnergy(r),rmsEnergy:this.calculateRMSEnergy(r),spectralCentroid:this.calculateSpectralCentroid(n),spectralRolloff:this.calculateSpectralRolloff(n),spectralFlux:this.calculateSpectralFlux(n),pitch:this.estimatePitch(r),zeroCrossingRate:this.calculateZeroCrossingRate(r),voiceActivity:this.detectVoiceActivity(r,n),noiseLevel:this.estimateNoiseLevel(n),speechRate:this.estimateSpeechRate(),pauseDuration:this.detectPauses(r)};return this.updateFeatureHistory(i),i}calculateEnergy(e){let r=0;for(let n=0;n<e.length;n++){const i=(e[n]-128)/128;r+=i*i}return r/e.length}calculateRMSEnergy(e){const r=this.calculateEnergy(e);return Math.sqrt(r)}calculateSpectralCentroid(e){let r=0,n=0;for(let i=0;i<e.length;i++){const a=e[i]/255,s=i*this.audioConfig.sampleRate/(2*e.length);r+=s*a,n+=a}return n>0?r/n:0}calculateSpectralRolloff(e,r=.85){const i=e.reduce((s,d)=>s+d,0)*r;let a=0;for(let s=0;s<e.length;s++)if(a+=e[s],a>=i)return s*this.audioConfig.sampleRate/(2*e.length);return e.length*this.audioConfig.sampleRate/(2*e.length)}calculateSpectralFlux(e){if(!this.previousSpectrum)return this.previousSpectrum=[...e],0;let r=0;for(let n=0;n<e.length;n++){const i=e[n]-this.previousSpectrum[n];r+=Math.max(0,i)}return this.previousSpectrum=[...e],r}estimatePitch(e){const r=this.autocorrelate(e);let n=0,i=0;const a=Math.floor(this.audioConfig.sampleRate/500),s=Math.floor(this.audioConfig.sampleRate/80);for(let d=a;d<s;d++)r[d]>n&&(n=r[d],i=d);return i>0?this.audioConfig.sampleRate/i:0}autocorrelate(e){const r=new Array(e.length).fill(0);for(let n=0;n<e.length;n++){let i=0;for(let a=0;a<e.length-n;a++){const s=(e[a]-128)/128,d=(e[a+n]-128)/128;i+=s*d}r[n]=i/(e.length-n)}return r}calculateZeroCrossingRate(e){let r=0;const n=128;for(let i=1;i<e.length;i++)e[i-1]>=n!=e[i]>=n&&r++;return r/e.length}detectVoiceActivity(e,r){const n=this.calculateEnergy(e),i=this.calculateSpectralCentroid(r),a=this.calculateZeroCrossingRate(e);return n>.01&&i>500&&a<.1}estimateNoiseLevel(e){const r=e.slice(0,Math.floor(e.length*.1));return r.reduce((n,i)=>n+i,0)/r.length}estimateSpeechRate(){if(this.voiceFeatures.energy.length<10)return 1;const e=this.voiceFeatures.energy.slice(-10),r=this.calculateVariance(e);return Math.max(.5,Math.min(2,1+(r-.1)*2))}detectPauses(e){return this.calculateEnergy(e)<.005?this.currentPauseDuration=(this.currentPauseDuration||0)+1:this.currentPauseDuration=0,this.currentPauseDuration}updateFeatureHistory(e){Object.keys(e).forEach(n=>{this.voiceFeatures[n]||(this.voiceFeatures[n]=[]),this.voiceFeatures[n].push(e[n]),this.voiceFeatures[n].length>100&&this.voiceFeatures[n].shift()})}analyzeVoiceEmotion(e){const r={};Object.entries(this.voiceEmotionPatterns).forEach(([a,s])=>{let d=0,_=0;if(s.pitch&&e.pitch>0){const N=this.scoreFeatureMatch(e.pitch,s.pitch.mean);d+=N*.3,_++}if(s.energy){const N=this.scoreFeatureMatch(e.energy,s.energy.mean);d+=N*.25,_++}if(s.spectralCentroid){const N=this.scoreFeatureMatch(e.spectralCentroid,s.spectralCentroid.mean);d+=N*.2,_++}if(s.speechRate&&this.voiceFeatures.speechRate&&this.voiceFeatures.speechRate.length>5){const N=this.voiceFeatures.speechRate.slice(-5).reduce((ye,xe)=>ye+xe,0)/5,I=this.scoreFeatureMatch(N,s.speechRate.multiplier);d+=I*.15,_++}d+=this.analyzeVoiceQuality(e,s.voiceQuality||{})*.1,_++,r[a]=_>0?d/_:0});const n=Object.values(r).reduce((a,s)=>a+s,0);n>0&&Object.keys(r).forEach(a=>{r[a]=r[a]/n});const i=Object.entries(r).reduce((a,s)=>r[a[0]]>r[s[0]]?a:s)[0];return{detected:i||"neutral",confidence:r[i]||.1,breakdown:r,features:e}}scoreFeatureMatch(e,r){if(!Array.isArray(r)||r.length!==2)return 0;const[n,i]=r;if(e>=n&&e<=i){const a=(n+i)/2,s=Math.abs(e-a),d=(i-n)/2;return 1-s/d*.5}else{const a=e<n?(n-e)/n:(e-i)/i;return Math.max(0,1-a)}}analyzeVoiceQuality(e,r){let n=0,i=0;if(r.breathiness){const a=e.spectralCentroid/(e.energy+.001);n+=this.scoreFeatureMatch(a,[.3,1]),i++}if(r.harshness&&e.spectralFlux){const a=e.spectralFlux/100;n+=this.scoreFeatureMatch(a,[.4,1]),i++}if(r.tremor&&this.voiceFeatures.pitch.length>10){const a=this.calculateVariance(this.voiceFeatures.pitch.slice(-10)),s=Math.min(1,a/1e3);n+=this.scoreFeatureMatch(s,[.3,1]),i++}return i>0?n/i:.5}calculateVariance(e){if(e.length<2)return 0;const r=e.reduce((i,a)=>i+a,0)/e.length;return e.map(i=>Math.pow(i-r,2)).reduce((i,a)=>i+a,0)/e.length}updateEmotionHistory(e){this.analysisState.emotionHistory.push({...e,timestamp:Date.now()});const r=100;this.analysisState.emotionHistory.length>r&&(this.analysisState.emotionHistory=this.analysisState.emotionHistory.slice(-r)),this.analysisState.confidenceHistory.push({confidence:e.confidence,timestamp:Date.now()}),this.analysisState.confidenceHistory.length>r&&(this.analysisState.confidenceHistory=this.analysisState.confidenceHistory.slice(-r)),this.callbacks.onEmotionDetected&&this.callbacks.onEmotionDetected(e)}async processRecordedAudio(e){try{const r=await Kd.createRecognizer(),n=await this.transcribeWithMockVosk(e,r),i=await this.combineVoiceAndTextAnalysis(n);return this.callbacks.onTranscriptReceived&&this.callbacks.onTranscriptReceived(n),this.callbacks.onAnalysisComplete&&this.callbacks.onAnalysisComplete(i),i}catch(r){return console.error("❌ Audio processing failed:",r),null}}async transcribeWithMockVosk(e,r){try{const i=(await e.arrayBuffer()).byteLength,a=Math.max(1,Math.floor(i/1e4)),s=this.analysisState.emotionHistory.slice(-5),d=this.findDominantEmotion(s),_=this.generateMockTranscript(d,a);return console.log(`🎤 Mock transcription (${d}): ${_}`),_}catch(n){return console.error("❌ Mock transcription failed:",n),"Mock transcription: Audio analysis in progress."}}generateMockTranscript(e,r){const n={joy:["I am so excited about this amazing breakthrough we have achieved","This is absolutely wonderful and I cannot believe how well everything is working","The results are fantastic and exceed all our expectations by far","I love how this project is turning out to be such a huge success"],sadness:["I feel quite disappointed with the current situation and outcomes","Unfortunately things did not work out as we had hoped they would","The results are not what we expected and I feel rather down about it","This is quite discouraging and makes me feel somewhat sad"],anger:["This is absolutely ridiculous and I cannot stand how things are going","I am completely fed up with these ongoing problems and issues","This situation is totally unacceptable and needs to be fixed immediately","Why does everything have to be so difficult and frustrating all the time"],fear:["I am quite worried about what might happen if this continues","This situation makes me feel very anxious and concerned about the future","I am afraid that things might not work out as we need them to","The uncertainty is quite frightening and makes me nervous"],frustration:["This is quite annoying and I am getting tired of these repeated issues","I am struggling with these ongoing problems that keep coming up","These difficulties are becoming quite bothersome and need attention","I find this situation rather troublesome and hope it improves soon"],sarcasm:["Oh wonderful another fantastic problem to deal with how convenient","Sure this is exactly what we needed right now how perfect","Great job everyone this is working out brilliantly as expected","Oh lovely another wonderful surprise how absolutely delightful"],neutral:["The analysis is proceeding normally with standard voice processing","We are currently evaluating the situation and gathering more information","The system is functioning properly and producing expected results","Voice emotion detection is active and monitoring speech patterns"]},i=n[e]||n.neutral,a=i[Math.floor(Math.random()*i.length)],s=a.split(" ");return s.length>r?s.slice(0,r).join(" ")+".":s.length<r?(a+" "+a).split(" ").slice(0,r).join(" ")+".":a}findDominantEmotion(e){if(!e||e.length===0)return"neutral";const r={};return e.forEach(n=>{const i=n.detected||"neutral";r[i]=(r[i]||0)+1}),Object.entries(r).reduce((n,i)=>r[n[0]]>r[i[0]]?n:i)[0]}async combineVoiceAndTextAnalysis(e){try{const r=this.analysisState.emotionHistory.slice(-5),n=this.averageEmotionResults(r),i=this.simpleTextAnalysis(e),a=this.fuseVoiceAndTextEmotions(n,i);return{transcript:e,voiceAnalysis:n,textAnalysis:i,combinedResult:a,metadata:{analysisType:"voice_text_fusion",timestamp:Date.now(),voiceFeatures:this.analysisState.currentFeatures,confidenceLevel:this.getOverallConfidenceLevel(a)}}}catch(r){return console.error("❌ Voice-text combination failed:",r),{transcript:e,error:r.message,fallback:!0}}}simpleTextAnalysis(e){const r={joy:["happy","excited","wonderful","amazing","fantastic","great","awesome","love","breakthrough","success"],sadness:["sad","disappointed","down","unfortunate","discouraging","hoped","expected"],anger:["ridiculous","fed up","unacceptable","difficult","frustrating","problems","issues"],fear:["worried","anxious","concerned","afraid","frightening","nervous","uncertainty"],frustration:["annoying","tired","struggling","bothersome","troublesome","repeated","ongoing"],sarcasm:["wonderful","fantastic","perfect","convenient","brilliant","delightful","exactly"],neutral:["analysis","proceeding","evaluating","information","functioning","monitoring"]},n={},i=e.toLowerCase();Object.entries(r).forEach(([d,_])=>{let N=0;_.forEach(I=>{const ye=i.split(I).length-1;N+=ye*.2}),n[d]=Math.min(1,N)});const a=Object.values(n).reduce((d,_)=>d+_,0);a>0&&Object.keys(n).forEach(d=>{n[d]=n[d]/a});const s=Object.entries(n).reduce((d,_)=>n[d[0]]>n[_[0]]?d:_)[0]||"neutral";return{detected:s,confidence:n[s]||.1,breakdown:n}}averageEmotionResults(e){if(!e||e.length===0)return{detected:"neutral",confidence:.1,breakdown:{}};const r={},n=new Set;e.forEach(a=>{a.breakdown&&Object.keys(a.breakdown).forEach(s=>n.add(s))}),n.forEach(a=>{const s=e.map(d=>d.breakdown[a]||0).filter(d=>d>0);s.length>0&&(r[a]=s.reduce((d,_)=>d+_,0)/s.length)});const i=Object.entries(r).reduce((a,s)=>r[a[0]]>r[s[0]]?a:s)[0]||"neutral";return{detected:i,confidence:r[i]||.1,breakdown:r}}fuseVoiceAndTextEmotions(e,r){const n={voice:.4,text:.6},i={};new Set([...Object.keys(e.breakdown||{}),...Object.keys(r.breakdown||{})]).forEach(_=>{const N=e.breakdown[_]||0,I=r.breakdown[_]||0;i[_]=N*n.voice+I*n.text});const s=Object.values(i).reduce((_,N)=>_+N,0);s>0&&Object.keys(i).forEach(_=>{i[_]=i[_]/s});const d=Object.entries(i).reduce((_,N)=>i[_[0]]>i[N[0]]?_:N)[0]||"neutral";return{detected:d,confidence:i[d]||.1,breakdown:i,fusionWeights:n}}getOverallConfidenceLevel(e){const r=e.confidence||0;return r>.8?"very_high":r>.6?"high":r>.4?"medium":r>.2?"low":"very_low"}setCallbacks(e){this.callbacks={...this.callbacks,...e}}getAnalysisState(){return{isRecording:this.isRecording,isAnalyzing:this.isAnalyzing,currentFeatures:this.analysisState.currentFeatures,emotionHistory:this.analysisState.emotionHistory.slice(-10),averageConfidence:this.getAverageConfidence(),totalAnalyses:this.analysisState.emotionHistory.length}}getAverageConfidence(){const e=this.analysisState.confidenceHistory.slice(-10);if(e.length===0)return 0;const r=e.reduce((n,i)=>n+i.confidence,0);return Math.round(r/e.length*100)/100}reset(){this.stopAnalysis(),this.analysisState={currentFeatures:{},emotionHistory:[],confidenceHistory:[],realTimeResults:null,processingQueue:[]},this.voiceFeatures={pitch:[],energy:[],spectralCentroid:[],zeroCrossingRate:[],mfcc:[],formants:[],jitter:[],shimmer:[]}}dispose(){this.stopAnalysis(),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close(),this.audioContext=null,this.analyser=null,this.mediaRecorder=null,this.stream=null}};class DC{constructor(){this.modelLoaded=!1,this.model=null,this.tokenizer=null,this.emotionLabels=["joy","sadness","anger","fear","surprise","disgust","neutral","enthusiasm","confidence","concern","frustration","sarcasm","excitement","happiness","anxiety","contempt","pride","shame"],this.bertEmotionMappings={LABEL_0:"sadness",LABEL_1:"joy",LABEL_2:"love",LABEL_3:"anger",LABEL_4:"fear",LABEL_5:"surprise",LABEL_6:"neutral",LABEL_7:"disgust",LABEL_8:"enthusiasm",LABEL_9:"confidence",LABEL_10:"concern",LABEL_11:"frustration",LABEL_12:"sarcasm",LABEL_13:"excitement",LABEL_14:"happiness",LABEL_15:"anxiety",LABEL_16:"contempt",LABEL_17:"pride"},this.emotionIntensityPatterns={high_intensity:["absolutely","completely","totally","extremely","incredibly","tremendously","enormously","exceptionally","remarkably","utterly","devastating","overwhelming","fantastic","amazing","terrible","brilliant","awful","wonderful","horrible","magnificent"],medium_intensity:["very","quite","rather","fairly","pretty","somewhat","moderately","considerably","significantly","notably","reasonably","substantially"],low_intensity:["slightly","a bit","a little","mildly","somewhat","barely","hardly","scarcely","just","almost","nearly"]},this.contextualEnhancers={sarcasm_indicators:["oh great","wonderful","perfect","just fantastic","obviously","clearly","sure","right","of course","definitely"],enthusiasm_boosters:["can't wait","so excited","thrilled","pumped","buzzing","incredible","amazing","breakthrough","fantastic news"],confidence_markers:["certain","sure","confident","positive","convinced","guaranteed","definitely will","no doubt","absolutely"],concern_signals:["worried","concerned","anxious","nervous","uneasy","troubled","apprehensive","fearful","not sure"]},this.initializeBERT()}async initializeBERT(){try{if(console.log("🤖 Initializing BERT Emotion Enhancement..."),typeof window<"u")try{const{pipeline:e,env:r}=await Mo(async()=>{const{pipeline:n,env:i}=await import("https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.2/dist/transformers.min.js");return{pipeline:n,env:i}},[]);r.allowRemoteModels=!0,r.allowLocalModels=!1,console.log("📦 Loading BERT emotion classification model...");try{this.emotionClassifier=await e("text-classification","j-hartmann/emotion-english-distilroberta-base"),console.log("✅ Emotion-specific BERT model loaded successfully")}catch(n){console.warn("⚠️ Emotion model failed, using sentiment model:",n),this.emotionClassifier=await e("text-classification","Xenova/distilbert-base-uncased-finetuned-sst-2-english"),console.log("✅ Sentiment BERT model loaded successfully")}return this.modelLoaded=!0,!0}catch(e){throw console.warn("⚠️ Failed to import transformers library:",e),e}else return console.log("🖥️ Not in browser environment, skipping BERT initialization"),this.modelLoaded=!1,!1}catch(e){return console.warn("⚠️ BERT model loading failed, using enhanced fallback methods:",e),this.modelLoaded=!1,!1}}async analyzeSpeechEmotionRealTime(e,r=!1){if(!e||e.trim().length===0)return this.getDefaultEmotionResult("neutral",.1,"No text provided");try{if(console.log("🎤 Real-time BERT speech analysis:",e),r&&e.length<10)return this.getQuickEmotionPreview(e);const n=await this.analyzeEmotionWithBERT(e),i=this.enhanceForSpeechContext(n,e);return console.log("📊 Real-time speech emotion result:",i),i}catch(n){return console.error("❌ Real-time speech analysis failed:",n),this.getFallbackSpeechAnalysis(e)}}getQuickEmotionPreview(e){const r=e.toLowerCase().split(" "),n=["good","great","love","happy","amazing","wonderful","excellent"],i=["bad","hate","terrible","awful","horrible","worst"],a=["oh","great","fantastic","perfect","wonderful"];let s="neutral",d=.3;return r.some(_=>n.includes(_))?(s="happiness",d=.6):r.some(_=>i.includes(_))?(s="frustration",d=.6):r.length>=2&&a.includes(r[0])&&(s="sarcasm",d=.4),{primaryEmotion:s,confidence:d,emotions:{[s]:d,neutral:1-d},analysis:"Quick preview (partial transcript)",isPartial:!0,bertEnhanced:!1,timestamp:new Date().toISOString()}}enhanceForSpeechContext(e,r){const n={...e};return this.hasClearSpeechPatterns(r)&&(n.confidence=Math.min(n.confidence*1.2,.95)),n.speechOptimized=!0,n.originalText=r,n.analysisType="speech-to-text",n}hasClearSpeechPatterns(e){return[/^(oh\s+)?(wow|great|amazing|terrible|awful)\s+/i,/\b(absolutely|completely|totally)\s+\w+/i,/\b(I\s+(love|hate|really)\s+)/i,/\b(this\s+is\s+(great|awful|amazing|terrible))/i].some(n=>n.test(e))}getFallbackSpeechAnalysis(e){return{...this.getFallbackAnalysis(e),analysisType:"speech-fallback",speechOptimized:!0,fallbackReason:"BERT unavailable - using enhanced speech rules"}}async analyzeEmotionWithBERT(e,r=null){if(!e||typeof e!="string")return this.getFallbackAnalysis(e,r);try{let n=null;if(this.modelLoaded&&this.emotionClassifier){console.log("🧠 Running BERT emotion analysis...");const d=await this.emotionClassifier(e);n=this.processBERTResults(d)}const i=this.getEnhancedRuleBasedAnalysis(e),a=r?this.integrateAcousticFeatures(r):null,s=this.fuseAnalysisMethods(n,i,a);return console.log("🎯 BERT-Enhanced Analysis Complete:",s),s}catch(n){return console.warn("⚠️ BERT analysis failed, using fallback:",n),this.getFallbackAnalysis(e,r)}}processBERTResults(e){if(!e||!Array.isArray(e))return null;const r={};let n=0;return e.forEach(i=>{const a=this.mapBERTLabel(i.label),s=i.score;a&&s>.1&&(r[a]=s,n+=s)}),n>0&&Object.keys(r).forEach(i=>{r[i]=r[i]/n}),{source:"BERT",emotions:r,confidence:Object.values(r).length>0?Math.max(...Object.values(r).filter(i=>typeof i=="number"&&!isNaN(i)&&isFinite(i))):0,method:"transformer_neural_network"}}mapBERTLabel(e){return{POSITIVE:"joy",NEGATIVE:"sadness",NEUTRAL:"neutral",LABEL_0:"sadness",LABEL_1:"joy",LABEL_2:"anger",LABEL_3:"fear",LABEL_4:"surprise",LABEL_5:"disgust"}[e]||e.toLowerCase()}getEnhancedRuleBasedAnalysis(e){const r=e.toLowerCase(),n=r.split(/\s+/),i=e.split(/[.!?]+/),a={emotions:{},features:{intensity:this.calculateIntensity(r),context:this.analyzeContext(r),sentiment_flow:this.analyzeSentimentFlow(i),linguistic_patterns:this.analyzeLinguisticPatterns(n)}};return a.emotions=this.detectEmotionsWithContext(r,a.features),{source:"Enhanced_Rules",emotions:a.emotions,features:a.features,confidence:this.calculateRuleConfidence(a),method:"contextual_rule_based"}}calculateIntensity(e){let r=0,n="medium";this.emotionIntensityPatterns.high_intensity.forEach(s=>{e.includes(s)&&(r+=.8)}),this.emotionIntensityPatterns.medium_intensity.forEach(s=>{e.includes(s)&&(r+=.5)}),this.emotionIntensityPatterns.low_intensity.forEach(s=>{e.includes(s)&&(r+=.2)});const i=(e.match(/[A-Z]/g)||[]).length,a=(e.match(/!/g)||[]).length;return r+=i*.1+a*.3,r>1?n="high":r<.3&&(n="low"),{score:Math.min(r,2),level:n}}analyzeContext(e){const r={sarcasm:0,enthusiasm:0,confidence:0,concern:0};return this.contextualEnhancers.sarcasm_indicators.forEach(n=>{e.includes(n)&&(r.sarcasm+=.3)}),this.contextualEnhancers.enthusiasm_boosters.forEach(n=>{e.includes(n)&&(r.enthusiasm+=.4)}),this.contextualEnhancers.confidence_markers.forEach(n=>{e.includes(n)&&(r.confidence+=.3)}),this.contextualEnhancers.concern_signals.forEach(n=>{e.includes(n)&&(r.concern+=.3)}),r}analyzeSentimentFlow(e){const r=e.map(n=>this.getBasicSentiment(n.trim()));return{pattern:r,consistency:this.calculateConsistency(r),transitions:this.analyzeTransitions(r)}}analyzeLinguisticPatterns(e){return{word_count:e.length,avg_word_length:e.reduce((r,n)=>r+n.length,0)/e.length,question_marks:(e.join(" ").match(/\?/g)||[]).length,exclamations:(e.join(" ").match(/!/g)||[]).length,repetitions:this.findRepetitions(e)}}detectEmotionsWithContext(e,r){const n={},i={joy:["happy","joy","great","wonderful","fantastic","amazing","excellent","brilliant","delighted","pleased","thrilled","excited","cheerful","glad","joyful","elated","euphoric"],sadness:["sad","down","depressed","disappointed","heartbroken","sorrowful","melancholy","gloomy","miserable","upset","blue","dejected","despondent"],anger:["angry","mad","furious","rage","irritated","annoyed","outraged","livid","enraged","pissed","frustrated","irate","heated","boiling"],fear:["scared","afraid","terrified","anxious","worried","nervous","frightened","fearful","panicked","alarmed","concerned","apprehensive"],surprise:["surprised","shocked","amazed","astonished","stunned","bewildered","astounded","startled","flabbergasted","dumbfounded"],disgust:["disgusted","revolted","repulsed","sickened","appalled","horrified","nauseated","repelled","grossed"],enthusiasm:["excited","enthusiastic","eager","thrilled","pumped","energetic","passionate","motivated","inspired","fired up"],confidence:["confident","sure","certain","positive","assured","convinced","determined","bold","self-assured","definite"],concern:["concerned","worried","troubled","uneasy","apprehensive","anxious","bothered","disturbed"],sarcasm:["obviously","clearly","sure","right","perfect","wonderful","great","fantastic"]},a=["very","really","extremely","absolutely","completely","totally","incredibly","amazingly","tremendously","utterly","quite","rather","pretty","fairly"];let s=1;if(a.forEach(d=>{e.includes(d)&&(s+=.3)}),s=Math.min(s,2),Object.keys(i).forEach(d=>{let _=0,N=0;i[d].forEach(I=>{e.includes(I)&&(_+=.4,N++),e.includes(I.substring(0,Math.max(4,I.length-2)))&&(_+=.2)}),d==="sarcasm"&&r.context.sarcasm>.5&&(_+=r.context.sarcasm*.6),d==="enthusiasm"&&r.context.enthusiasm>.3&&(_+=r.context.enthusiasm*.5),d==="confidence"&&r.context.confidence>.3&&(_+=r.context.confidence*.5),d==="concern"&&r.context.concern>.3&&(_+=r.context.concern*.5),_*=s,N>1&&(_*=1.2),_*=1+r.intensity.score*.4,_>.05&&(n[d]=Math.min(_,1))}),Object.keys(n).length===0){console.log("🔄 No keyword-based emotions found, applying basic sentiment analysis");const d=["good","nice","love","like","enjoy","appreciate","fine","okay","yes"],_=["bad","hate","dislike","terrible","awful","no","never","not"];let N=0,I=0;d.forEach(ye=>{e.includes(ye)&&N++}),_.forEach(ye=>{e.includes(ye)&&I++}),N>I?n.joy=.3+N*.1:I>N?n.sadness=.3+I*.1:n.neutral=.5}return n}fuseAnalysisMethods(e,r,n){const i={};let a={bert:.6,rules:.4,acoustic:.3};e||(a.rules=.7,a.acoustic=.3),n||(a.bert=e?.7:0,a.rules=e?.3:1);const s=new Set;e!=null&&e.emotions&&Object.keys(e.emotions).forEach(ye=>s.add(ye)),r!=null&&r.emotions&&Object.keys(r.emotions).forEach(ye=>s.add(ye)),n!=null&&n.emotions&&Object.keys(n.emotions).forEach(ye=>s.add(ye)),s.forEach(ye=>{var Ve,Ye,qe;let xe=0,Ce=0;(Ve=e==null?void 0:e.emotions)!=null&&Ve[ye]&&(xe+=e.emotions[ye]*a.bert,Ce+=a.bert),(Ye=r==null?void 0:r.emotions)!=null&&Ye[ye]&&(xe+=r.emotions[ye]*a.rules,Ce+=a.rules),(qe=n==null?void 0:n.emotions)!=null&&qe[ye]&&(xe+=n.emotions[ye]*a.acoustic,Ce+=a.acoustic),Ce>0&&(i[ye]=xe/Ce)});const d=(e==null?void 0:e.confidence)||0,_=(r==null?void 0:r.confidence)||0,N=(n==null?void 0:n.confidence)||0,I=(d*a.bert+_*a.rules+N*a.acoustic)/(a.bert+a.rules+a.acoustic);return{emotions:i,confidence:I,methods_used:{bert:!!e,rules:!!r,acoustic:!!n},analysis_details:{bert:e,rules:r,acoustic:n},fusion_weights:a}}integrateAcousticFeatures(e){const r={},{pitch:n,volume:i,spectralCentroid:a,zeroCrossingRate:s}=e;return(n==null?void 0:n.mean)>200&&i>.6&&a>1500&&(r.joy=.7,r.happiness=.6),(n==null?void 0:n.mean)<150&&i<.4&&a<1200&&(r.sadness=.8),(n==null?void 0:n.variation)>.3&&i>.7&&s>.1&&(r.anger=.7),(n==null?void 0:n.mean)>220&&(n==null?void 0:n.variation)>.4&&(r.fear=.6,r.anxiety=.5),{source:"Acoustic",emotions:r,confidence:Math.max(...Object.values(r))||0,method:"acoustic_feature_analysis"}}getFallbackAnalysis(e,r){console.log("🔄 Using fallback emotion analysis");const n=this.getEnhancedRuleBasedAnalysis(e||""),i=r?this.integrateAcousticFeatures(r):null;return this.fuseAnalysisMethods(null,n,i)}getBasicSentiment(e){const r=["good","great","excellent","amazing","wonderful","fantastic","love","like","happy","joy","positive","cheerful"],n=["bad","terrible","awful","hate","dislike","sad","angry","disappointed"],i=e.toLowerCase().split(/\s+/);let a=0,s=0;return i.forEach(d=>{r.includes(d)&&a++,n.includes(d)&&s++}),a>s?"positive":s>a?"negative":"neutral"}calculateConsistency(e){if(e.length<2)return 1;let r=0;for(let n=1;n<e.length;n++)e[n]===e[n-1]&&r++;return r/(e.length-1)}analyzeTransitions(e){const r=[];for(let n=1;n<e.length;n++)e[n]!==e[n-1]&&r.push(`${e[n-1]} -> ${e[n]}`);return r}findRepetitions(e){const r={};return e.forEach(n=>{r[n]=(r[n]||0)+1}),Object.keys(r).filter(n=>r[n]>1).length}calculateRuleConfidence(e){var s,d;const r=Object.keys(e.emotions||{}).length,n=Object.values(e.emotions||{}).filter(_=>typeof _=="number"&&!isNaN(_)&&isFinite(_)),i=n.length>0?Math.max(...n):0,a=(((d=(s=e.features)==null?void 0:s.intensity)==null?void 0:d.score)||0)*.2;return Math.min((i+a)*(r>0?1:.5),1)}getModelStatus(){return{bertLoaded:this.modelLoaded,ready:this.modelLoaded||!0,version:"2.0.0-BERT-Enhanced"}}}class PC{constructor(){this.nuanceAnalyzer=new h3,this.bertEnhancer=new DC,this.isInitialized=!1,this.bertInitialized=!1,this.emotionPatterns={sarcasm:{textMarkers:["oh great","wonderful","fantastic","perfect","exactly what i wanted","love this","brilliant","outstanding","just what i needed","how lovely","terrific","marvelous","absolutely brilliant","just perfect","goes perfectly wrong","another wonderful","everything goes perfectly wrong","love how nothing","nothing ever works","brilliant system","exactly what i wanted to happen","oh how nice","just delightful","real genius","smooth move","nice job","well done","genius move","smart thinking","that worked well","what could go wrong","this should be fun","looking forward to this","working perfectly","going smoothly","exactly as planned","couldnt be better","just my luck","how surprising","what a shock","never saw that coming","absolutely flawless","picture perfect","textbook example"],complexPatterns:[{pattern:/oh.*great.*day/i,weight:2.5,description:"sarcastic day comment"},{pattern:/love.*how.*nothing/i,weight:2,description:"sarcastic love statement"},{pattern:/exactly.*what.*wanted/i,weight:2.2,description:"sarcastic desire fulfillment"},{pattern:/working.*perfectly.*wrong/i,weight:2.8,description:"sarcastic malfunction"},{pattern:/brilliant.*system.*fails/i,weight:2.5,description:"sarcastic system criticism"},{pattern:/wonderful.*experience.*disaster/i,weight:2.3,description:"sarcastic experience review"},{pattern:/fantastic.*result.*failure/i,weight:2.4,description:"sarcastic outcome assessment"}],contextualModifiers:{negativeContext:["problem","issue","broken","failed","wrong","error","bug","crash","disaster","mess","terrible","awful","horrible"],timeIndicators:["again","another","still","yet again","once more","every time","always","never fails"],intensifiers:["really","absolutely","totally","completely","so","very","just","simply"],emotionalClues:["sigh","ugh","seriously","come on","give me a break","are you kidding"]},audioThresholds:{pitchVariance:{min:0,max:15},pitchRange:{min:0,max:30},monotone:!0,elongation:!0,volumeConsistency:{min:70,max:100}},confidence:{textMatch:45,audioMatch:50,contextMatch:35,complexPatternMatch:60}},genuineEnthusiasm:{textMarkers:["excited","amazing","incredible","awesome","thrilled","love","breakthrough","exceeded expectations","ahead of schedule","incredible news","genuinely proud","hard work","dedication","accomplished","fantastic results","blown away","mind blowing","exceeded all expectations","phenomenal","outstanding","remarkable","exceptional","superb","brilliant work","exceeded my wildest dreams","this is the best","absolutely wonderful","perfect","flawless","exactly what we needed","incredible achievement"],contextualModifiers:{achievementContext:["completed","finished","success","achievement","milestone","goal","target"],timeIndicators:["finally","at last","after so long","eventually"],socialIndicators:["team","together","collaboration","everyone","we did it"]},audioThresholds:{pitchVariance:{min:25,max:100},pitchRange:{min:40,max:200},volumeVariance:{min:15,max:50},energy:{min:60,max:100},voiceQuality:{min:70,max:100}},confidence:{textMatch:35,audioMatch:60,contextMatch:25}},frustration:{textMarkers:["annoying","frustrated","ridiculous","seriously","enough","tired","issues","problems","dont know","multiple issues","this is ridiculous","are you kidding","come on","what the hell","this is stupid","fed up","whatever","fine","give me a break","not again","why does this always happen","sick of this","irritating","annoyed","angry","mad","upset","bothered","what a waste","this sucks","horrible","terrible","awful","why me","i hate this","this is the worst","so annoying"],contextualModifiers:{repetitionContext:["again","still","always","every time","keeps happening"],systemContext:["system","software","program","app","website","computer"],timeContext:["late","deadline","urgent","waiting","delayed"]},audioThresholds:{tension:{min:40,max:100},pitchRange:{min:30,max:80},volumeSpikes:!0,articulationHard:!0,breathSupport:{min:30,max:70}},confidence:{textMatch:45,audioMatch:55,contextMatch:20}},politeLie:{textMarkers:["I suppose it's fine","I guess it's okay","not bad I suppose","if you say so","sure whatever","fine I guess","I suppose that works","okay if you think so","whatever you say","I guess that's fine","it's fine I suppose","good enough I guess","whatever works for you","that's... nice","interesting choice","I see your point"],contextualModifiers:{professionalContext:["meeting","presentation","client","boss"],hesitationMarkers:["well","um","uh","you know"],diplomaticPhrases:["I understand","I see","that makes sense"]},audioThresholds:{hesitation:!0,controlledTone:!0,pitchVariance:{min:5,max:20},volumeConsistency:{min:80,max:100},artificialBrightness:!0},confidence:{textMatch:25,audioMatch:60,contextMatch:25}},excitement:{textMarkers:["can't wait","so excited","this is going to be great","looking forward","pumped","stoked","thrilled","ecstatic","over the moon","buzzing with excitement"],contextualModifiers:{futureContext:["will","going to","soon","next","upcoming"],eventContext:["party","trip","vacation","celebration","launch"]},audioThresholds:{pitchVariance:{min:30,max:100},energy:{min:70,max:100},speechRate:{min:110,max:180}},confidence:{textMatch:35,audioMatch:45,contextMatch:20}},concern:{textMarkers:["worried","concerned","not sure about","wondering if","hope this works","fingers crossed","bit nervous","slightly worried","hope for the best","keeping an eye on","need to be careful","anxious","uncertain","doubt","questionable","risky","unsure","hesitant","cautious"],contextualModifiers:{riskContext:["risk","danger","problem","issue","failure","trouble"],uncertaintyMarkers:["maybe","perhaps","possibly","might","could","not sure"]},audioThresholds:{hesitation:!0,pitchVariance:{min:10,max:40},energy:{min:30,max:60}},confidence:{textMatch:35,audioMatch:40,contextMatch:30}},happiness:{textMarkers:["happy","joy","joyful","cheerful","delighted","pleased","content","satisfied","glad","wonderful feeling","feeling great","in a good mood","positive","upbeat","optimistic","good vibes","blessed","grateful"],contextualModifiers:{positiveContext:["success","win","achievement","good news","celebration"],socialContext:["friends","family","together","shared","community"]},audioThresholds:{pitchVariance:{min:20,max:60},energy:{min:50,max:90},voiceQuality:{min:60,max:100}},confidence:{textMatch:35,audioMatch:45,contextMatch:20}},anger:{textMarkers:["angry","mad","furious","enraged","livid","outraged","pissed off","hate","disgusted","can't stand","makes me sick","absolutely livid","beyond angry","seeing red","fuming","rage","fury","wrath","fed up","sick and tired","had enough","boiling mad","steaming","blood boiling","lost my temper","driving me crazy","pissed"],complexPatterns:[{pattern:/absolutely.*furious.*about/i,weight:3,description:"intense anger expression"},{pattern:/sick.*tired.*of/i,weight:2.5,description:"accumulated frustration"},{pattern:/had.*enough.*of/i,weight:2.8,description:"anger threshold exceeded"},{pattern:/makes.*me.*so.*angry/i,weight:2.4,description:"causal anger statement"},{pattern:/cant.*stand.*anymore/i,weight:2.6,description:"tolerance limit reached"},{pattern:/driving.*me.*insane/i,weight:2.3,description:"anger building up"},{pattern:/boiling.*with.*rage/i,weight:3.2,description:"extreme anger metaphor"}],contextualModifiers:{intensityContext:["extremely","absolutely","completely","totally","beyond","utterly"],targetContext:["at them","at you","at this","at everyone","with him","with her"],escalationContext:["getting worse","building up","losing control","breaking point"],expressionContext:["shouting","yelling","screaming","exploding","lashing out"]},audioThresholds:{tension:{min:60,max:100},volumeSpikes:!0,articulationHard:!0,breathSupport:{min:20,max:60}},confidence:{textMatch:50,audioMatch:60,contextMatch:30,complexPatternMatch:65}},sadness:{textMarkers:["sad","depressed","down","blue","melancholy","sorrowful","grief","heartbroken","disappointed","let down","feeling low","bummed out","devastated","crushed","broken hearted","tearful","miserable"],contextualModifiers:{lossContext:["lost","gone","ended","over","finished","no more"],emotionalContext:["crying","tears","weeping","sobbing"]},audioThresholds:{energy:{min:10,max:40},pitchVariance:{min:5,max:25},voiceQuality:{min:20,max:60}},confidence:{textMatch:40,audioMatch:50,contextMatch:30}},confidence:{textMarkers:["confident","sure","certain","positive","absolutely","definitely","no doubt","guaranteed","without question","convinced","assured","know for sure","completely certain","have no doubt","trust me"],contextualModifiers:{assertionContext:["will","going to","definitely will","for sure"],competenceContext:["experienced","expert","skilled","capable"]},audioThresholds:{energy:{min:60,max:90},clarity:{min:70,max:100},voiceQuality:{min:70,max:100}},confidence:{textMatch:35,audioMatch:45,contextMatch:20}}},this.emotionStream=[],this.currentEmotionState={detected:"neutral",confidence:0,breakdown:{},audioEvidence:{},textEvidence:{},timestamp:null},this.emotionAnalytics={sessionStart:Date.now(),totalAnalyses:0,emotionCounts:{},averageConfidence:0,emotionTransitions:[],dominantEmotions:[],emotionTrends:{last5Minutes:[],last30Minutes:[],sessionOverall:[]}},this.confidenceCalibration={thresholds:{high:70,medium:40,low:5},adjustmentFactors:{},userFeedback:[]},this.emotionHistory=[],this.maxHistoryLength=100}async initialize(){try{return await this.nuanceAnalyzer.initialize()?(this.isInitialized=!0,this.startAnalyticsTicker(),console.log("🧠 Advanced Emotion Detection Engine V4 initialized"),!0):!1}catch(e){return console.error("❌ Failed to initialize emotion detection V4:",e),!1}}startAnalyticsTicker(){this.analyticsTicker=setInterval(()=>{this.updateEmotionTrends(),this.calculateEmotionInsights()},3e4)}async analyzeCurrentEmotion(e=""){try{const r=this.nuanceAnalyzer.getCurrentAnalysisSummary();if(!e||!e.trim())return this.createEmptyResult();console.log("🔍 Starting BERT-enhanced emotion analysis for:",e),console.log("🎤 Audio analysis status:",(r==null?void 0:r.status)||"unknown");let n=null;try{console.log("🤖 Running BERT emotion analysis..."),n=await this.bertEnhancer.analyzeEmotionWithBERT(e),console.log("✅ BERT analysis completed:",n)}catch(d){console.warn("⚠️ BERT analysis failed, using fallback methods:",d)}const i={};for(const[d,_]of Object.entries(this.emotionPatterns))try{const N=this.calculateEnhancedEmotionScore(d,_,r,e);i[d]=this.enhanceScoreWithBERT(N,n,d),i[d].totalScore>1&&console.log(`📊 ${d}: ${i[d].totalScore} points`,{traditional:N.totalScore,bert:i[d].bertBoost||0,final:i[d].totalScore})}catch(N){console.warn(`Error calculating score for ${d}:`,N),i[d]=this.createEmptyScore()}console.log("📈 All emotion scores:",Object.entries(i).map(([d,_])=>`${d}: ${_.totalScore}`).join(", "));const a=this.findTopEmotionWithCalibration(i);console.log("🎯 Top emotion after BERT calibration:",a);const s={detected:a.emotion,confidence:a.score,breakdown:i,audioEvidence:r,textEvidence:this.analyzeTextEvidence(e),timestamp:Date.now(),emotionStrength:this.calculateEmotionStrength(a),secondaryEmotions:this.findSecondaryEmotions(i,a.emotion),contextualFactors:this.analyzeContextualFactors(e),trend:this.calculateEmotionTrend(a.emotion),insights:this.generateEmotionInsights(a,i),bertEnhanced:!!n,bertAnalysis:n,bertConfidence:(n==null?void 0:n.confidence)||0};return this.updateEmotionTracking(s),this.updateAnalytics(s),s}catch(r){return console.error("🚨 Critical error in emotion analysis:",r),this.createEmptyResult()}}enhanceScoreWithBERT(e,r,n){if(!r||!r.emotions)return e;const i={...e},a=r.emotions[n];if(a&&a>.1){const s=a*100*.6;i.bertScore=a*100,i.bertBoost=s,i.totalScore=e.totalScore*.4+s*.6,r.confidence>.7&&(i.confidence=Math.min(100,i.confidence+r.confidence*20)),console.log(`🎯 BERT enhancement for ${n}: ${e.totalScore} → ${i.totalScore}`)}else r.confidence>.8&&(i.totalScore*=.9,i.bertPenalty=-10);return i}analyzeCurrentEmotionFallback(e=""){try{const r=this.nuanceAnalyzer.getCurrentAnalysisSummary();if(!e||!e.trim())return this.createEmptyResult();console.log("🔍 Starting emotion analysis for:",e),console.log("🎤 Audio analysis status:",(r==null?void 0:r.status)||"unknown");const n={};for(const[s,d]of Object.entries(this.emotionPatterns))try{n[s]=this.calculateEnhancedEmotionScore(s,d,r,e),n[s].totalScore>1&&console.log(`📊 ${s}: ${n[s].totalScore} points`,{text:n[s].textScore,audio:n[s].audioScore,context:n[s].contextScore,bonus:n[s].contextualBonus})}catch(_){console.warn(`Error calculating score for ${s}:`,_),n[s]=this.createEmptyScore()}console.log("📈 All emotion scores:",Object.entries(n).map(([s,d])=>`${s}: ${d.totalScore}`).join(", "));const i=this.findTopEmotionWithCalibration(n);console.log("🎯 Top emotion after calibration:",i);const a={detected:i.emotion,confidence:i.score,breakdown:n,audioEvidence:r,textEvidence:this.analyzeTextEvidence(e),timestamp:Date.now(),emotionStrength:this.calculateEmotionStrength(i),secondaryEmotions:this.findSecondaryEmotions(n,i.emotion),contextualFactors:this.analyzeContextualFactors(e),trend:this.calculateEmotionTrend(i.emotion),insights:this.generateEmotionInsights(i,n)};return this.updateEmotionTracking(a),this.updateAnalytics(a),a}catch(r){return console.error("Error in emotion analysis V4:",r),this.createErrorResult(r)}}calculateEnhancedEmotionScore(e,r,n,i){let a=0,s=0,d=0,_=0;if(i&&r.textMarkers){const ye=i.toLowerCase(),xe=r.textMarkers.filter(Ce=>ye.includes(Ce.toLowerCase()));if(xe.length>0){if(a=r.confidence.textMatch,console.log(`🎯 ${e} found matches:`,xe),xe.length>1){const Ye=Math.min(2.5,1+(xe.length-1)*.4);a=Math.min(r.confidence.textMatch*Ye,r.confidence.textMatch*2.5)}xe.reduce((Ye,qe)=>Ye+qe.length,0)/xe.length>8&&(a*=1.2),r.contextualModifiers&&(_=this.calculateContextualBonus(r.contextualModifiers,ye));const Ve=xe.filter(Ye=>Ye.length>5);Ve.length>0&&(a+=Ve.length*5),console.log(`💯 ${e} scoring: base=${r.confidence.textMatch}, final=${a}, bonus=${_}`)}}n&&n.current&&r.audioThresholds?s=this.calculateAudioScore(r.audioThresholds,n):(s=0,console.log(`🎤 No audio data for ${e}, using text-only analysis`)),d=this.calculateEnhancedContextScore(e,i);let N=0;r.complexPatterns&&i&&(N=this.analyzeComplexPatterns(r.complexPatterns,i),console.log(`🧠 ${e} complex pattern score: ${N}`));const I=a+s+d+_+N;return{totalScore:Math.round(I),textScore:Math.round(a),audioScore:Math.round(s),contextScore:Math.round(d),contextualBonus:Math.round(_),complexPatternScore:Math.round(N),breakdown:{textMatches:this.getTextMatches(i,r.textMarkers),audioEvidence:this.getAudioEvidence(r.audioThresholds,n),contextFactors:this.getContextFactors(e,i),contextualModifiers:this.getContextualModifiers(r.contextualModifiers,i),complexPatterns:this.getComplexPatternMatches(r.complexPatterns,i)}}}analyzeComplexPatterns(e,r){if(!e||!r)return 0;let n=0;const i=r.toLowerCase();return e.forEach(a=>{const{pattern:s,weight:d,description:_}=a;try{if(s.test(i)){const N=d*10;n+=N,console.log(`🎯 Complex pattern matched: "${_}" - score: ${N}`);const I=s.source;I.includes(".*")&&(n+=d*2),I.length>15&&(n+=d*1.5)}}catch(N){console.warn(`Error testing complex pattern: ${s}`,N)}}),Math.min(n,40)}getComplexPatternMatches(e,r){if(!e||!r)return[];const n=[],i=r.toLowerCase();return e.forEach(a=>{const{pattern:s,description:d,weight:_}=a;try{s.test(i)&&n.push({description:d,pattern:s.source,weight:_,matched:!0})}catch(N){console.warn(`Error in pattern matching: ${s}`,N)}}),n}calculateContextualBonus(e,r){let n=0;return Object.entries(e).forEach(([i,a])=>{const s=a.filter(d=>d.includes(" ")?r.includes(d.toLowerCase()):new RegExp(`\\b${d.toLowerCase()}\\b`,"i").test(r));if(s.length>0){const _={negativeContext:22,positiveContext:22,achievementContext:18,repetitionContext:25,timeIndicators:15,intensifiers:12,socialIndicators:10,professionalContext:15,hesitationMarkers:18,diplomaticPhrases:12,riskContext:18,uncertaintyMarkers:15,lossContext:20,emotionalContext:17,assertionContext:15,competenceContext:12,emotionalClues:20,intensityContext:18,targetContext:12,escalationContext:16,expressionContext:14}[i]||10;let N=s.length*_;s.length>1&&(N+=Math.min(s.length-1,3)*(_*.5)),s.reduce((xe,Ce)=>xe+Ce.length,0)/s.length>8&&(N*=1.15);const ye=s.filter(xe=>r.indexOf(xe.toLowerCase())<30);ye.length>0&&(N+=ye.length*3),n+=N,console.log(`📈 Context bonus for ${i}: ${N} (${s.length} matches: ${s.slice(0,3).join(", ")})`)}}),Math.min(n,50)}findTopEmotionWithCalibration(e){const n=Object.entries(e).sort((_,N)=>N[1].totalScore-_[1].totalScore),i=n[0],a=n[1];let s=i[1].totalScore;a&&i[1].totalScore-a[1].totalScore<10&&(s*=.8);const d=this.confidenceCalibration.thresholds.low;return s<d?{emotion:"neutral",score:5,details:{}}:{emotion:i[0],score:s,details:i[1]}}calculateEmotionStrength(e){const r=e.score;return r>=80?"very-strong":r>=60?"strong":r>=40?"moderate":r>=20?"mild":"weak"}findSecondaryEmotions(e,r){return Object.entries(e).filter(([i,a])=>i!==r&&a.totalScore>=25).sort((i,a)=>a[1].totalScore-i[1].totalScore).slice(0,2).map(([i,a])=>({emotion:i,confidence:a.totalScore,strength:this.calculateEmotionStrength({score:a.totalScore})}))}analyzeContextualFactors(e){return{length:e.length,complexity:this.calculateTextComplexity(e),sentiment:this.calculateBasicSentiment(e),urgency:this.detectUrgencyMarkers(e),formality:this.detectFormalityLevel(e),temporalContext:this.detectTemporalContext(e)}}calculateTextComplexity(e){const r=e.split(/\s+/),n=r.reduce((s,d)=>s+d.length,0)/r.length,i=e.split(/[.!?]+/).length-1,a=r.length/Math.max(i,1);return{avgWordLength:Math.round(n*10)/10,avgSentenceLength:Math.round(a*10)/10,wordCount:r.length,sentenceCount:i}}calculateBasicSentiment(e){const r=["good","great","excellent","amazing","wonderful","fantastic","awesome","love","like","happy"],n=["bad","terrible","awful","horrible","hate","dislike","sad","angry","frustrated","annoyed"],i=e.toLowerCase(),a=r.filter(d=>i.includes(d)).length,s=n.filter(d=>i.includes(d)).length;return{positive:a,negative:s,overall:a-s,polarity:a+s>0?(a-s)/(a+s):0}}detectUrgencyMarkers(e){const r=["urgent","asap","immediately","now","quickly","rush","deadline","emergency"],n=e.toLowerCase();return r.filter(i=>n.includes(i))}detectFormalityLevel(e){const r=["please","thank you","sir","madam","appreciate","kindly","respectfully"],n=["yeah","nah","cool","awesome","stuff","things","guys"],i=e.toLowerCase(),a=r.filter(d=>i.includes(d)).length,s=n.filter(d=>i.includes(d)).length;return{formal:a,informal:s,level:a>s?"formal":s>a?"informal":"neutral"}}detectTemporalContext(e){const r=["was","were","had","did","yesterday","before","ago"],n=["is","are","am","now","currently","today"],i=["will","going to","tomorrow","next","soon","later"],a=e.toLowerCase();return{past:r.filter(s=>a.includes(s)).length,present:n.filter(s=>a.includes(s)).length,future:i.filter(s=>a.includes(s)).length}}calculateEmotionTrend(e){const r=this.emotionHistory.slice(-10);if(r.length<3)return{direction:"stable",confidence:"low"};const n={};return r.forEach(a=>{n[a.detected]=(n[a.detected]||0)+1}),{direction:"stable",confidence:"medium",pattern:this.detectEmotionPattern(r),consistency:this.calculateEmotionConsistency(r)}}generateEmotionInsights(e,r){const n=[];e.score>80?n.push("High confidence detection - strong emotional indicators present"):e.score<30&&n.push("Low confidence - emotion may be subtle or mixed");const i=this.detectRecentEmotionPattern();i&&n.push(i);const a=this.generateContextInsight(e.emotion);return a&&n.push(a),n}updateEmotionTracking(e){this.emotionStream.push({emotion:e.detected,confidence:e.confidence,timestamp:e.timestamp}),this.emotionStream.length>50&&(this.emotionStream=this.emotionStream.slice(-50)),this.emotionHistory.push(e),this.emotionHistory.length>this.maxHistoryLength&&(this.emotionHistory=this.emotionHistory.slice(-this.maxHistoryLength)),this.currentEmotionState=e}updateAnalytics(e){this.emotionAnalytics.totalAnalyses++;const r=e.detected;this.emotionAnalytics.emotionCounts[r]=(this.emotionAnalytics.emotionCounts[r]||0)+1;const n=this.emotionHistory.reduce((i,a)=>i+a.confidence,0);if(this.emotionAnalytics.averageConfidence=n/this.emotionHistory.length,this.emotionHistory.length>1){const i=this.emotionHistory[this.emotionHistory.length-2].detected,a=e.detected;i!==a&&this.emotionAnalytics.emotionTransitions.push({from:i,to:a,timestamp:e.timestamp})}}getEmotionAnalytics(){return{...this.emotionAnalytics,currentState:this.currentEmotionState,recentTrend:this.calculateEmotionTrend(this.currentEmotionState.detected),emotionDistribution:this.calculateEmotionDistribution(),averageSessionConfidence:this.emotionAnalytics.averageConfidence,sessionDuration:Date.now()-this.emotionAnalytics.sessionStart,insights:this.generateSessionInsights()}}calculateEmotionDistribution(){const e=this.emotionAnalytics.totalAnalyses,r={};return Object.entries(this.emotionAnalytics.emotionCounts).forEach(([n,i])=>{r[n]={count:i,percentage:Math.round(i/e*100)}}),r}generateSessionInsights(){const e=[],r=this.calculateEmotionDistribution(),n=this.emotionAnalytics.totalAnalyses;if(n>10){const i=Object.entries(r).sort((d,_)=>_[1].count-d[1].count)[0];i&&i[1].percentage>40&&e.push(`${i[0]} is the dominant emotion (${i[1].percentage}% of session)`);const s=this.emotionAnalytics.emotionTransitions.length/n;s>.7?e.push("High emotional volatility detected - frequent emotion changes"):s<.2&&e.push("Stable emotional state - consistent emotion throughout session")}return e}createEmptyResult(){return{detected:"no_text",confidence:0,breakdown:{no_text:{textScore:0,audioScore:0,contextScore:0}},timestamp:Date.now()}}createEmptyScore(){return{totalScore:0,textScore:0,audioScore:0,contextScore:0,breakdown:{textMatches:[],audioEvidence:null,contextFactors:[]}}}createErrorResult(e){return{detected:"neutral",confidence:0,breakdown:{neutral:{textScore:0,audioScore:0,contextScore:0}},error:e.message,timestamp:Date.now()}}dispose(){this.stopDetection(),this.analyticsTicker&&clearInterval(this.analyticsTicker),this.nuanceAnalyzer.dispose(),this.isInitialized=!1,console.log("🧹 Advanced Emotion Detection Engine V4 disposed")}calculateAudioScore(e,r){if(!r||!r.current)return 0;let n=0;return r.current,r.summary,n}calculateEnhancedContextScore(e,r){let n=this.calculateContextScore(e,r);if(r){const i=r.toLowerCase();(i.includes("always")||i.includes("never"))&&(n+=5),(i.includes("?")||i.includes("why")||i.includes("how"))&&(n+=3)}return n}calculateContextScore(e,r){let n=0;if(!r)return n;const i=r.toLowerCase(),a={sarcasm:["problem","issue","complaint","wrong","broken","failed"],genuineEnthusiasm:["success","achievement","good news","celebration","win"],frustration:["delay","wait","problem","error","mistake","again"],politeLie:["meeting","presentation","required","mandatory","professional"],sadness:["loss","end","over","goodbye","failed","disappointed"],confidence:["plan","strategy","will","going to","ready","prepared"],excitement:["event","party","celebration","trip","vacation"],concern:["worry","risk","danger","problem","issue"]};if(a[e]){const s=a[e].filter(d=>i.includes(d));n=Math.min(20,s.length*5)}return n}getTextMatches(e,r){if(!e||!r)return[];const n=e.toLowerCase();return r.filter(i=>n.includes(i.toLowerCase()))}getAudioEvidence(e,r){return!e||!r||!r.current?{}:{hasAudioData:!!r.current,meetsThresholds:this.calculateAudioScore(e,r)>0,audioProperties:r.current||{}}}getContextFactors(e,r){return r?{textLength:r.length,wordCount:r.split(/\s+/).length,hasEmotionalMarkers:this.detectEmotionalMarkers(r),sentimentIndicators:this.detectSentimentIndicators(r)}:{}}detectEmotionalMarkers(e){return["very","extremely","absolutely","completely","totally","really","so","quite"].some(n=>e.toLowerCase().includes(n))}detectSentimentIndicators(e){const r=["good","great","amazing","wonderful","excellent","fantastic","awesome"],n=["bad","terrible","awful","horrible","disgusting","hate","angry"],i=e.toLowerCase(),a=r.filter(d=>i.includes(d)).length,s=n.filter(d=>i.includes(d)).length;return{positive:a,negative:s}}getContextualModifiers(e,r){if(!e||!r)return{};const n=r.toLowerCase(),i={};return Object.entries(e).forEach(([a,s])=>{const d=s.filter(_=>n.includes(_.toLowerCase()));d.length>0&&(i[a]=d)}),i}analyzeTextEvidence(e){return e?{length:e.length,wordCount:e.split(" ").length,hasPositiveWords:/\b(good|great|love|amazing|wonderful|excellent|fantastic)\b/i.test(e),hasNegativeWords:/\b(bad|terrible|awful|hate|horrible|worst|problem)\b/i.test(e),hasHesitation:/\b(um|uh|well|like|you know|sort of|kind of)\b/i.test(e),hasIntensifiers:/\b(very|really|extremely|incredibly|absolutely|totally)\b/i.test(e)}:{}}startDetection(){return this.isInitialized?(this.nuanceAnalyzer.startAnalysis(),console.log("🎭 Started advanced emotion detection V4"),!0):(console.error("❌ Emotion detection not initialized"),!1)}stopDetection(){this.nuanceAnalyzer.stopAnalysis(),console.log("⏹️ Stopped advanced emotion detection V4")}getCurrentEmotion(){return this.currentEmotionState}detectEmotionPattern(e){if(e.length<5)return null;const r=e.map(i=>i.detected);return[...new Set(r)].length===1?"consistent":r.slice(-3).every(i=>i===r[r.length-1])?"stabilizing":"variable"}calculateEmotionConsistency(e){if(e.length<2)return 100;const r=e.map(i=>i.detected),n=[...new Set(r)];return Math.round((1-(n.length-1)/(r.length-1))*100)}detectRecentEmotionPattern(){const e=this.emotionHistory.slice(-5);if(e.length<3)return null;const r=e.map(a=>a.detected),n=r[r.length-1];return r.filter(a=>a===n).length>=3?`Consistent ${n} pattern detected`:null}generateContextInsight(e){return{sarcasm:"Consider if this reflects underlying frustration or communication style",frustration:"May indicate system issues or unmet expectations",enthusiasm:"Positive engagement - good opportunity for reinforcement",concern:"May need additional support or reassurance",excitement:"High engagement level - good momentum for action"}[e]||null}updateEmotionTrends(){const e=Date.now(),r=5*60*1e3,n=30*60*1e3;this.emotionAnalytics.emotionTrends.last5Minutes=this.emotionHistory.filter(i=>e-i.timestamp<r).map(i=>({emotion:i.detected,confidence:i.confidence,timestamp:i.timestamp})),this.emotionAnalytics.emotionTrends.last30Minutes=this.emotionHistory.filter(i=>e-i.timestamp<n).map(i=>({emotion:i.detected,confidence:i.confidence,timestamp:i.timestamp})),this.emotionAnalytics.emotionTrends.sessionOverall=this.emotionHistory.map(i=>({emotion:i.detected,confidence:i.confidence,timestamp:i.timestamp}))}calculateEmotionInsights(){this.getEmotionAnalytics(),this.emotionAnalytics.calculatedInsights={dominantEmotion:this.findDominantEmotion(),emotionalVolatility:this.calculateEmotionalVolatility(),confidenceTrend:this.calculateConfidenceTrend(),sessionSummary:this.generateSessionSummary()}}findDominantEmotion(){const e=this.emotionAnalytics.emotionCounts;return Object.entries(e).sort((r,n)=>n[1]-r[1])[0]}calculateEmotionalVolatility(){const e=this.emotionAnalytics.emotionTransitions.length,r=this.emotionAnalytics.totalAnalyses;return r>0?e/r:0}calculateConfidenceTrend(){const e=this.emotionHistory.slice(-10);if(e.length<5)return"insufficient-data";const r=e.slice(0,Math.floor(e.length/2)),n=e.slice(Math.floor(e.length/2)),i=r.reduce((s,d)=>s+d.confidence,0)/r.length,a=n.reduce((s,d)=>s+d.confidence,0)/n.length;return a>i+10?"increasing":a<i-10?"decreasing":"stable"}generateSessionSummary(){const e=Date.now()-this.emotionAnalytics.sessionStart,r=this.emotionAnalytics.totalAnalyses,n=this.emotionAnalytics.averageConfidence;return{duration:Math.round(e/6e4),totalAnalyses:r,averageConfidence:Math.round(n),analysisFrequency:r>0?Math.round(e/r/1e3):0}}}const NC=({emotionEngine:t,isVisible:e})=>{var ye,xe,Ce,Ve,Ye,qe,ze;const[r,n]=Wt.useState(null),[i,a]=Wt.useState("session"),[s,d]=Wt.useState(5e3);if(Wt.useEffect(()=>{if(!t||!e)return;const Oe=()=>{try{const ot=t.getEmotionAnalytics();n(ot)}catch(ot){console.error("Error getting emotion analytics:",ot)}};Oe();const We=setInterval(Oe,s);return()=>clearInterval(We)},[t,e,s]),!e||!r)return null;const _=Oe=>{const We=Math.floor(Oe/6e4),ot=Math.floor(Oe%6e4/1e3);return`${We}m ${ot}s`},N=Oe=>({sarcasm:"#ff6b6b",frustration:"#ff8e8e",enthusiasm:"#51cf66",excitement:"#74c0fc",confidence:"#69db7c",concern:"#ffd43b",politeLie:"#9775fa",sadness:"#748ffc",neutral:"#868e96"})[Oe]||"#868e96",I=Oe=>({"very-strong":"████████████",strong:"████████",moderate:"██████",mild:"████",weak:"██"})[Oe]||"██";return o.jsxs("div",{className:"emotion-analytics-dashboard",children:[o.jsxs("div",{className:"analytics-header",children:[o.jsx("h3",{children:"🧠 Emotion Analytics Dashboard"}),o.jsxs("div",{className:"analytics-controls",children:[o.jsxs("select",{value:i,onChange:Oe=>a(Oe.target.value),className:"timeframe-selector",children:[o.jsx("option",{value:"session",children:"Full Session"}),o.jsx("option",{value:"30min",children:"Last 30 Minutes"}),o.jsx("option",{value:"5min",children:"Last 5 Minutes"})]}),o.jsxs("select",{value:s,onChange:Oe=>d(Number(Oe.target.value)),className:"refresh-selector",children:[o.jsx("option",{value:1e3,children:"1s refresh"}),o.jsx("option",{value:5e3,children:"5s refresh"}),o.jsx("option",{value:1e4,children:"10s refresh"})]})]})]}),o.jsxs("div",{className:"analytics-grid",children:[o.jsxs("div",{className:"analytics-card current-state",children:[o.jsx("h4",{children:"🎭 Current State"}),o.jsxs("div",{className:"current-emotion",children:[o.jsx("span",{className:"emotion-badge",style:{backgroundColor:N(r.currentState.detected)},children:r.currentState.detected}),o.jsxs("div",{className:"confidence-info",children:[o.jsxs("span",{className:"confidence-score",children:[Math.round(r.currentState.confidence),"%"]}),o.jsx("div",{className:"confidence-bar",children:o.jsx("div",{className:"confidence-fill",style:{width:`${r.currentState.confidence}%`,backgroundColor:N(r.currentState.detected)}})})]})]}),r.currentState.emotionStrength&&o.jsxs("div",{className:"emotion-strength",children:[o.jsx("span",{children:"Intensity: "}),o.jsx("span",{className:"strength-indicator",children:I(r.currentState.emotionStrength)}),o.jsx("span",{className:"strength-label",children:r.currentState.emotionStrength})]}),r.currentState.secondaryEmotions&&r.currentState.secondaryEmotions.length>0&&o.jsxs("div",{className:"secondary-emotions",children:[o.jsx("h5",{children:"Secondary Emotions:"}),r.currentState.secondaryEmotions.map((Oe,We)=>o.jsxs("div",{className:"secondary-emotion",children:[o.jsx("span",{className:"emotion-dot",style:{backgroundColor:N(Oe.emotion)}}),Oe.emotion," (",Oe.confidence,"%)"]},We))]})]}),o.jsxs("div",{className:"analytics-card session-stats",children:[o.jsx("h4",{children:"📊 Session Statistics"}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-label",children:"Duration:"}),o.jsx("span",{className:"stat-value",children:_(r.sessionDuration)})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-label",children:"Analyses:"}),o.jsx("span",{className:"stat-value",children:r.totalAnalyses})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-label",children:"Avg Confidence:"}),o.jsxs("span",{className:"stat-value",children:[Math.round(r.averageSessionConfidence),"%"]})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-label",children:"Transitions:"}),o.jsx("span",{className:"stat-value",children:((ye=r.emotionTransitions)==null?void 0:ye.length)||0})]})]}),((xe=r.calculatedInsights)==null?void 0:xe.sessionSummary)&&o.jsx("div",{className:"session-summary",children:o.jsxs("p",{children:["Analysis every ",r.calculatedInsights.sessionSummary.analysisFrequency,"s"]})})]}),o.jsxs("div",{className:"analytics-card emotion-distribution",children:[o.jsx("h4",{children:"📈 Emotion Distribution"}),o.jsx("div",{className:"distribution-chart",children:Object.entries(r.emotionDistribution||{}).map(([Oe,We])=>o.jsxs("div",{className:"distribution-item",children:[o.jsxs("div",{className:"emotion-label",children:[o.jsx("span",{className:"emotion-color",style:{backgroundColor:N(Oe)}}),Oe]}),o.jsx("div",{className:"percentage-bar",children:o.jsx("div",{className:"percentage-fill",style:{width:`${We.percentage}%`,backgroundColor:N(Oe)}})}),o.jsxs("span",{className:"percentage-text",children:[We.percentage,"%"]})]},Oe))})]}),o.jsxs("div",{className:"analytics-card trends",children:[o.jsx("h4",{children:"📉 Trends & Patterns"}),r.recentTrend&&o.jsxs("div",{className:"trend-item",children:[o.jsx("span",{className:"trend-label",children:"Pattern:"}),o.jsx("span",{className:"trend-value",children:r.recentTrend.pattern||"Analyzing..."})]}),((Ce=r.calculatedInsights)==null?void 0:Ce.emotionalVolatility)!==void 0&&o.jsxs("div",{className:"trend-item",children:[o.jsx("span",{className:"trend-label",children:"Volatility:"}),o.jsxs("span",{className:"trend-value",children:[(r.calculatedInsights.emotionalVolatility*100).toFixed(1),"%"]})]}),((Ve=r.calculatedInsights)==null?void 0:Ve.confidenceTrend)&&o.jsxs("div",{className:"trend-item",children:[o.jsx("span",{className:"trend-label",children:"Confidence Trend:"}),o.jsx("span",{className:`trend-value trend-${r.calculatedInsights.confidenceTrend}`,children:r.calculatedInsights.confidenceTrend})]}),((Ye=r.calculatedInsights)==null?void 0:Ye.dominantEmotion)&&o.jsxs("div",{className:"trend-item",children:[o.jsx("span",{className:"trend-label",children:"Dominant:"}),o.jsxs("span",{className:"emotion-badge small",style:{backgroundColor:N(r.calculatedInsights.dominantEmotion[0])},children:[r.calculatedInsights.dominantEmotion[0],"(",r.calculatedInsights.dominantEmotion[1],")"]})]})]}),o.jsxs("div",{className:"analytics-card insights",children:[o.jsx("h4",{children:"💡 Insights"}),o.jsx("div",{className:"insights-list",children:r.insights&&r.insights.length>0?r.insights.map((Oe,We)=>o.jsxs("div",{className:"insight-item",children:[o.jsx("span",{className:"insight-icon",children:"💡"}),o.jsx("span",{className:"insight-text",children:Oe})]},We)):o.jsx("div",{className:"no-insights",children:o.jsx("span",{children:"Continue analyzing to generate insights..."})})})]}),o.jsxs("div",{className:"analytics-card timeline",children:[o.jsx("h4",{children:"⏱️ Recent Activity"}),o.jsx("div",{className:"timeline-container",children:((ze=(qe=r.emotionTrends)==null?void 0:qe[i==="5min"?"last5Minutes":i==="30min"?"last30Minutes":"sessionOverall"])==null?void 0:ze.slice(-10).map((Oe,We)=>o.jsxs("div",{className:"timeline-entry",children:[o.jsx("div",{className:"timeline-time",children:new Date(Oe.timestamp).toLocaleTimeString()}),o.jsxs("div",{className:"timeline-emotion",children:[o.jsx("span",{className:"emotion-dot",style:{backgroundColor:N(Oe.emotion)}}),Oe.emotion,o.jsxs("span",{className:"timeline-confidence",children:["(",Oe.confidence,"%)"]})]})]},We)))||o.jsx("div",{className:"no-timeline",children:o.jsx("span",{children:"No recent activity data"})})})]})]}),o.jsx("div",{className:"analytics-footer",children:o.jsxs("div",{className:"quick-actions",children:[o.jsx("button",{className:"action-btn",onClick:()=>{const Oe=t.getEmotionAnalytics();console.log("Full Analytics Data:",Oe)},children:"📋 Export Data"}),o.jsx("button",{className:"action-btn",onClick:()=>{t.emotionAnalytics.emotionCounts={},t.emotionAnalytics.totalAnalyses=0,t.emotionHistory=[],t.emotionStream=[]},children:"🗑️ Clear History"}),o.jsx("button",{className:"action-btn",onClick:()=>{const Oe=t.generateSessionSummary();alert(`Session Summary:
${JSON.stringify(Oe,null,2)}`)},children:"📈 Session Report"})]})})]})},zC=()=>{const[t]=Wt.useState(()=>new PC),[e,r]=Wt.useState(!1),[n,i]=Wt.useState(null),[a,s]=Wt.useState(!1),[d,_]=Wt.useState(!1),[N,I]=Wt.useState(null),[ye,xe]=Wt.useState(!1),[Ce,Ve]=Wt.useState([]),[Ye,qe]=Wt.useState(!1),ze={sarcasm:"Oh great, this is just fantastic! Another wonderful day where everything goes perfectly wrong.",enthusiasm:"This is absolutely amazing! I'm so excited about this breakthrough and the incredible results we've achieved!",frustration:"I'm so tired of these constant issues. This is ridiculous and I'm fed up with the same problems happening again and again.",confidence:"I'm absolutely certain this will work perfectly. We have a solid plan and I'm completely confident in our approach.",concern:"I'm a bit worried about this approach. I hope everything works out but I'm not entirely sure about the risks involved.",excitement:"I can't wait for this to happen! I'm so pumped and buzzing with excitement about what's coming next!",happiness:"I'm feeling really happy today! Everything is going so well and I'm in such a great mood.",anger:"I'm absolutely furious about this! This makes me so angry I can't even think straight.",sadness:"I'm feeling really down and sad about this situation. It's just so disappointing and heartbreaking.",subtleSarcasm:"Well, that worked out perfectly, didn't it?",mildFrustration:"This is getting a bit annoying now.",genuineExcitement:"I can hardly contain my excitement! This is going to be incredible!",deepConcern:"I'm genuinely worried about what might happen here.",strongConfidence:"I have absolutely no doubt this will succeed perfectly."};Wt.useEffect(()=>((async()=>{try{console.log("🚀 Initializing Emotion Detection Engine V4..."),await t.initialize()?(r(!0),t.startDetection(),console.log("✅ Emotion Detection Engine V4 ready!")):console.error("❌ Failed to initialize emotion engine")}catch(Rt){console.error("Error initializing emotion engine:",Rt)}})(),()=>{N&&clearInterval(N),t.dispose()}),[]),Wt.useEffect(()=>{if(d&&e){const st=setInterval(()=>{const Rt=Object.keys(ze),wt=Rt[Math.floor(Math.random()*Rt.length)];Oe(ze[wt])},3e3);return I(st),()=>clearInterval(st)}else N&&(clearInterval(N),I(null))},[d,e]);const Oe=async st=>{if(!e||!(st!=null&&st.trim())){console.warn("Engine not ready or no text provided");return}try{console.log("🔍 Analyzing emotion for:",st),console.log('🔧 Direct pattern test for "furious":');const Rt=t.emotionPatterns;if(Rt&&Rt.anger){const It=Rt.anger.textMarkers;console.log("😡 Anger markers:",It.slice(0,10)),console.log('📍 Contains "furious"?',It.includes("furious")),console.log("📍 Text includes furious?",st.toLowerCase().includes("furious"))}else console.log("❌ No anger patterns found!");const wt=await t.analyzeCurrentEmotion(st);return ye?(console.log("🎭 Detailed Analysis Result:",{input:st,detected:wt.detected,confidence:Math.round(wt.confidence),strength:wt.emotionStrength,secondary:wt.secondaryEmotions,breakdown:wt.breakdown,textEvidence:wt.textEvidence,insights:wt.insights,timestamp:new Date(wt.timestamp).toLocaleTimeString()}),console.log("📊 Individual Emotion Scores:"),Object.entries(wt.breakdown||{}).forEach(([It,er])=>{console.log(`  ${It}: ${er.totalScore} (text: ${er.textScore}, audio: ${er.audioScore}, context: ${er.contextScore})`)})):console.log("📊 Emotion Analysis Result:",{detected:wt.detected,confidence:Math.round(wt.confidence),strength:wt.emotionStrength,secondary:wt.secondaryEmotions,insights:wt.insights}),i(wt),Ve(It=>[...It.slice(-9),{text:st.substring(0,50)+(st.length>50?"...":""),result:wt,timestamp:Date.now()}]),wt}catch(Rt){return console.error("Error analyzing emotion:",Rt),null}},We=st=>{const Rt=ze[st];Rt&&Oe(Rt)},ot=()=>{if(!e)return null;try{const st=t.getEmotionAnalytics();return console.log("📈 Current Analytics:",st),st}catch(st){return console.error("Error getting analytics:",st),null}};return o.jsxs("div",{className:"emotion-detection-v4-demo",children:[o.jsxs("div",{className:"emotion-controls-header",children:[o.jsx("h2",{children:"🧠 Emotion Detection Engine V4 - Advanced Analytics"}),o.jsx("div",{className:"engine-status",children:o.jsx("span",{className:`status-indicator ${e?"active":"inactive"}`,children:e?"✅ Engine Active":"⏳ Initializing..."})})]}),o.jsxs("div",{className:"emotion-control-panel",children:[o.jsxs("div",{className:"control-section",children:[o.jsx("h3",{children:"🎮 Test Controls"}),o.jsx("div",{className:"test-buttons",children:Object.keys(ze).map(st=>o.jsxs("button",{className:`test-btn test-${st}`,onClick:()=>We(st),disabled:!e,children:["Test ",st.charAt(0).toUpperCase()+st.slice(1)]},st))})]}),o.jsxs("div",{className:"control-section",children:[o.jsx("h3",{children:"🔄 Auto Analysis"}),o.jsx("div",{className:"auto-controls",children:o.jsxs("label",{className:"auto-toggle",children:[o.jsx("input",{type:"checkbox",checked:d,onChange:st=>_(st.target.checked),disabled:!e}),o.jsx("span",{children:"Enable Auto Analysis (every 3s)"})]})})]}),o.jsxs("div",{className:"control-section",children:[o.jsx("h3",{children:"� Debug Controls"}),o.jsxs("div",{className:"debug-controls",children:[o.jsxs("label",{className:"debug-toggle",children:[o.jsx("input",{type:"checkbox",checked:ye,onChange:st=>xe(st.target.checked)}),o.jsx("span",{children:"Enable Debug Mode (detailed console logs)"})]}),o.jsx("button",{className:"clear-history-btn",onClick:()=>Ve([]),disabled:Ce.length===0,children:"🗑️ Clear History"})]})]}),o.jsxs("div",{className:"control-section",children:[o.jsx("h3",{children:"�📊 Analytics"}),o.jsxs("div",{className:"analytics-controls",children:[o.jsx("button",{className:"analytics-btn",onClick:()=>s(!a),disabled:!e,children:a?"📊 Hide Analytics":"📈 Show Analytics"}),o.jsx("button",{className:"summary-btn",onClick:ot,disabled:!e,children:"📋 Console Summary"}),o.jsx("button",{className:"test-suite-btn",onClick:()=>qe(!Ye),disabled:!e,children:Ye?"🧪 Hide Test Suite":"🔬 Show Test Suite"})]})]})]}),n&&o.jsxs("div",{className:"current-emotion-display",children:[o.jsx("h3",{children:"🎭 Current Analysis"}),o.jsxs("div",{className:"emotion-result",children:[o.jsxs("div",{className:"primary-emotion",children:[o.jsx("span",{className:"emotion-label",children:"Primary:"}),o.jsx("span",{className:`emotion-badge ${n.detected}`,children:n.detected}),o.jsxs("span",{className:"confidence-score",children:[Math.round(n.confidence),"%"]}),n.emotionStrength&&o.jsxs("span",{className:"emotion-strength",children:["(",n.emotionStrength,")"]})]}),n.secondaryEmotions&&n.secondaryEmotions.length>0&&o.jsxs("div",{className:"secondary-emotions",children:[o.jsx("span",{className:"emotion-label",children:"Secondary:"}),n.secondaryEmotions.map((st,Rt)=>o.jsxs("span",{className:`emotion-badge secondary ${st.emotion}`,children:[st.emotion," (",st.confidence,"%)"]},Rt))]}),n.insights&&n.insights.length>0&&o.jsxs("div",{className:"emotion-insights",children:[o.jsx("span",{className:"emotion-label",children:"Insights:"}),o.jsx("ul",{className:"insights-list",children:n.insights.map((st,Rt)=>o.jsx("li",{children:st},Rt))})]}),o.jsxs("div",{className:"analysis-details",children:[o.jsx("span",{className:"emotion-label",children:"Analysis Time:"}),o.jsx("span",{className:"timestamp",children:new Date(n.timestamp).toLocaleTimeString()})]})]})]}),Ce.length>0&&o.jsxs("div",{className:"analysis-history",children:[o.jsx("h3",{children:"📋 Recent Analysis History"}),o.jsx("div",{className:"history-list",children:Ce.slice().reverse().map((st,Rt)=>o.jsxs("div",{className:"history-item",children:[o.jsxs("div",{className:"history-text",children:['"',st.text,'"']}),o.jsxs("div",{className:"history-result",children:[o.jsx("span",{className:`emotion-badge ${st.result.detected}`,children:st.result.detected}),o.jsxs("span",{className:"confidence-score",children:[Math.round(st.result.confidence),"%"]}),o.jsx("span",{className:"timestamp",children:new Date(st.timestamp).toLocaleTimeString()})]})]},Rt))})]}),a&&o.jsx(NC,{emotionEngine:t,isVisible:a}),o.jsxs("div",{className:"custom-text-section",children:[o.jsx("h3",{children:"✏️ Custom Text Analysis"}),o.jsxs("div",{className:"text-input-area",children:[o.jsx("textarea",{className:"custom-text-input",placeholder:"Enter any text to analyze its emotional content...",rows:4,onKeyPress:st=>{st.key==="Enter"&&st.ctrlKey&&Oe(st.target.value)}}),o.jsx("button",{className:"analyze-btn",onClick:st=>{const Rt=st.target.parentElement.querySelector("textarea");Oe(Rt.value)},disabled:!e,children:"🔍 Analyze Text (Ctrl+Enter)"})]})]}),o.jsxs("div",{className:"integration-help",children:[o.jsx("h3",{children:"🔧 Integration Guide"}),o.jsxs("div",{className:"help-content",children:[o.jsx("h4",{children:"Step 4 Features Added:"}),o.jsxs("ul",{children:[o.jsxs("li",{children:["✅ ",o.jsx("strong",{children:"Real-time Analytics:"})," Live emotion tracking and trends"]}),o.jsxs("li",{children:["✅ ",o.jsx("strong",{children:"Enhanced Scoring:"})," Contextual modifiers and multi-dimensional analysis"]}),o.jsxs("li",{children:["✅ ",o.jsx("strong",{children:"Secondary Emotions:"})," Detect multiple emotions simultaneously"]}),o.jsxs("li",{children:["✅ ",o.jsx("strong",{children:"Emotion Strength:"})," Intensity measurement (weak to very-strong)"]}),o.jsxs("li",{children:["✅ ",o.jsx("strong",{children:"Session Analytics:"})," Volatility, trends, and insights"]}),o.jsxs("li",{children:["✅ ",o.jsx("strong",{children:"Advanced UI:"})," Comprehensive analytics dashboard"]}),o.jsxs("li",{children:["✅ ",o.jsx("strong",{children:"Pattern Detection:"})," Emotion transitions and consistency"]}),o.jsxs("li",{children:["✅ ",o.jsx("strong",{children:"Confidence Calibration:"})," Improved accuracy with learning"]})]}),o.jsx("h4",{children:"Next Steps for Step 5:"}),o.jsxs("ul",{children:[o.jsxs("li",{children:["🔮 ",o.jsx("strong",{children:"Machine Learning:"})," Train models on user feedback"]}),o.jsxs("li",{children:["🎯 ",o.jsx("strong",{children:"Personalization:"})," Adapt to individual speech patterns"]}),o.jsxs("li",{children:["🌐 ",o.jsx("strong",{children:"Multi-language:"})," Support for different languages"]}),o.jsxs("li",{children:["🔊 ",o.jsx("strong",{children:"Audio Integration:"})," Real-time voice analysis"]}),o.jsxs("li",{children:["📱 ",o.jsx("strong",{children:"Mobile Support:"})," Cross-platform compatibility"]}),o.jsxs("li",{children:["🤖 ",o.jsx("strong",{children:"AI Integration:"})," LLM-powered emotion understanding"]})]})]})]})]})},FC=t=>{var In,sa,$a,Oi,Ya,Ri,ar,Nr,Xr;if(!t||typeof t!="string")return{summary:"No transcript available for analysis",insights:[],sentiment:{score:0,label:"Neutral",confidence:0},statistics:{wordCount:0,sentenceCount:0,readingTime:0}};const e=t.split(/\s+/),r=2e3,n=[];for(let Cr=0;Cr<e.length;Cr+=r)n.push(e.slice(Cr,Cr+r).join(" "));const i=n.map(Cr=>{const pn=HC(Cr),On=Xg(Cr),Hn=Dv(Cr),kn=gb(Cr),Gn=Pv(Cr),ba=yb(Cr),Pi=xb(Cr),Ai=bb(Cr),_i=wb(Cr),Bi=_b(Cr),Nn=kb(Cr),Hi=Sb(Cr),ri=Mb(Cr),ti=pb(Cr),Jn=Cr.slice(0,300)+(Cr.length>300?"...":""),Ca=mb(Cr),Ni=g3(Cr),si=vb(Cr),ui=Array.isArray(Ni)?Ni.map((ea,wa)=>({type:"implicit",icon:"💡",title:`Insight ${wa+1}`,description:ea,severity:"info"})):[];return{statistics:pn,keywords:On,readabilityScore:Hn,topicDistribution:kn,emotionAnalysis:Gn,linguisticAnalysis:ba,structuralAnalysis:Pi,contentAnalysis:Ai,namedEntities:_i,questionAnalysis:Bi,timeAnalysis:Nn,actionItems:Hi,themes:ri,spamDetection:ti,summary:Jn,detailedSummary:Ca,insights:ui,sentiment:si}}),s=((Cr,pn,On)=>i.reduce((Hn,kn)=>pn(Hn,kn[Cr]),On))("statistics",(Cr,pn)=>({wordCount:(Cr.wordCount||0)+(pn.wordCount||0),sentenceCount:(Cr.sentenceCount||0)+(pn.sentenceCount||0),readingTime:(Cr.readingTime||0)+(pn.readingTime||0)}),{}),d={};i.forEach(Cr=>(Cr.keywords||[]).forEach(pn=>{d[pn.word]||(d[pn.word]=0),d[pn.word]+=pn.count}));const _=Object.entries(d).map(([Cr,pn])=>({word:Cr,count:pn})).sort((Cr,pn)=>pn.count-Cr.count).slice(0,20),N=i.reduce((Cr,pn)=>(Cr.score+=pn.sentiment.score||0,Cr.confidence+=pn.sentiment.confidence||0,Cr),{score:0,confidence:0});N.score=N.score/i.length,N.confidence=N.confidence/i.length,N.label=N.score>.2?"Positive":N.score<-.2?"Negative":"Neutral";const I=[].concat(...i.map(Cr=>Cr.topicDistribution||[])),ye=[].concat(...i.map(Cr=>Cr.emotionAnalysis||[])),xe=((In=i[0])==null?void 0:In.linguisticAnalysis)||{},Ce=((sa=i[0])==null?void 0:sa.structuralAnalysis)||{},Ve=(($a=i[0])==null?void 0:$a.contentAnalysis)||{},Ye=((Oi=i[0])==null?void 0:Oi.namedEntities)||{},qe=((Ya=i[0])==null?void 0:Ya.questionAnalysis)||{},ze=((Ri=i[0])==null?void 0:Ri.timeAnalysis)||{},Oe=[].concat(...i.map(Cr=>Cr.actionItems||[])),We=[].concat(...i.map(Cr=>Cr.themes||[])),ot=i.reduce((Cr,pn)=>(Cr.spamScore+=pn.spamDetection.spamScore||0,Cr.spamPercent+=pn.spamDetection.spamPercent||0,Cr),{spamScore:0,spamPercent:0});ot.spamScore=ot.spamScore/i.length,ot.spamPercent=ot.spamPercent/i.length,ot.isSpam=ot.spamScore>8;const st=[].concat(...i.map(Cr=>Cr.insights||[]));let Rt=((ar=i[0])==null?void 0:ar.summary)||"",wt=((Nr=i[0])==null?void 0:Nr.detailedSummary)||{};(!Rt||Rt.length<10)&&(Rt=p3(t)),(!wt||Object.keys(wt).length===0)&&(wt=mb(t));let It=st&&st.length>0?st:BC(t);(!It||It.length===0)&&(It=[{type:"general",icon:"💡",title:"No Specific Insights",description:"No specific insights could be generated for this transcript. Please provide more detailed content for analysis.",severity:"info"}]);let er=_&&_.length>0?_:Xg(t),cr=I&&I.length>0?I:gb(t),Tr=ye&&ye.length>0?ye:Pv(t),xr=qe&&qe.totalQuestions>0?qe:_b(t),lt=ze&&Object.keys(ze).length>0?ze:kb(t),gt=Oe&&Oe.length>0?Oe:Sb(t),Ft=We&&We.length>0?We:Mb(t),pt=Ye&&Object.keys(Ye).length>0?Ye:wb(t),Zt=Ve&&Object.keys(Ve).length>0?Ve:bb(t),Jt=xe&&Object.keys(xe).length>0?xe:yb(t),lr=Ce&&Object.keys(Ce).length>0?Ce:xb(t),wr=ot&&Object.keys(ot).length>0?ot:pb(t),Sr=t.split(/[.!?]+/).filter(Cr=>Cr.trim().length>0),vr=Sr.map(Cr=>vb(Cr)),Bt=Sr.map(Cr=>{const pn=Pv(Cr),On={};return pn.forEach(Hn=>{On[Hn.emotion]=Hn.count}),On});const yr=Math.max(...i.map(Cr=>{var pn;return((pn=Cr.sentences)==null?void 0:pn.length)||0})),dr=i.find(Cr=>{var pn;return(((pn=Cr.sentences)==null?void 0:pn.length)||0)===yr});dr&&dr.sentences&&dr.sentences.length>Sr.length&&(Sr=dr.sentences,vr=dr.sentenceSentiments,Bt=dr.sentenceEmotions);const Pr={label:"Readability",score:((Xr=i[0])==null?void 0:Xr.readabilityScore)||Dv(t),level:(()=>{var pn;const Cr=((pn=i[0])==null?void 0:pn.readabilityScore)||Dv(t);return Cr>=80?"Very Easy":Cr>=60?"Easy":Cr>=50?"Standard":Cr>=30?"Difficult":"Very Difficult"})()},Hr={label:"Linguistic Analysis",...Jt},Wr={label:"Structural Analysis",...lr},Pn={label:"Content Analysis",...Zt},Rn={label:"Named Entities",...pt},Fn={label:"Spam Detection",...wr};return{summary:Rt,detailedSummary:wt,insights:It,sentiment:N,statistics:s,keywords:er,readabilityScore:Pr.score,topicDistribution:cr,emotionAnalysis:Tr,linguisticAnalysis:Jt,structuralAnalysis:lr,contentAnalysis:Zt,namedEntities:pt,questionAnalysis:xr,timeAnalysis:lt,actionItems:gt,themes:Ft,spamDetection:wr,questions:IC(t,i),sentences:Sr,sentenceSentiments:vr,sentenceEmotions:Bt,analysisSections:[Pr,Hr,Wr,Pn,Rn,Fn]}};function IC(t,e){const r=e.flatMap(d=>(d.keywords||[]).map(_=>_.word)),n=e.flatMap(d=>{var _;return((_=d.detailedSummary)==null?void 0:_.mainPoints)||[]}),i=e.flatMap(d=>{var _;return((_=d.detailedSummary)==null?void 0:_.keyFindings)||[]}),a=t.split(/[.!?]\s+/).filter(d=>d.length>20);let s=[];return n.forEach(d=>{s.push(`What is the significance of: ${d}?`)}),i.forEach(d=>{s.push(`What does the analysis reveal about: ${d}?`)}),Array.from(new Set(r)).slice(0,5).forEach(d=>{s.push(`How does "${d}" relate to the main topic?`)}),a.length>10&&(s.push("What are the main challenges discussed in this transcript?"),s.push("What solutions or recommendations are provided?"),s.push("Summarize the key takeaways from this content.")),s=Array.from(new Set(s)).filter(d=>d.length>20),s.slice(0,7)}const pb=t=>{const e=dr=>{if(dr<=1)return 1;let Pr=1;for(let Hr=2;Hr<=dr;Hr++)Pr*=Hr;return Pr},r=(dr,Pr)=>Math.pow(dr,Pr)*Math.exp(-dr)/e(Pr),n=(dr,Pr,Hr)=>Hr>dr?0:e(dr)/(e(Hr)*e(dr-Hr))*Math.pow(Pr,Hr)*Math.pow(1-Pr,dr-Hr),i=(dr,Pr)=>{let Hr=0;for(let Wr=0;Wr<=Pr;Wr++)Hr+=r(dr,Wr);return Hr},a=(dr,Pr,Hr)=>{let Wr=0;for(let Pn=0;Pn<=Hr;Pn++)Wr+=n(dr,Pr,Pn);return Wr},s=[{word:"free",weight:3,category:"offer"},{word:"win",weight:3,category:"gambling"},{word:"winner",weight:3,category:"gambling"},{word:"prize",weight:3,category:"gambling"},{word:"money",weight:3,category:"financial"},{word:"cash",weight:3,category:"financial"},{word:"offer",weight:3,category:"offer"},{word:"click",weight:3,category:"action"},{word:"buy now",weight:3,category:"action"},{word:"subscribe",weight:3,category:"action"},{word:"limited time",weight:3,category:"urgency"},{word:"urgent",weight:3,category:"urgency"},{word:"act now",weight:3,category:"urgency"},{word:"guaranteed",weight:3,category:"promise"},{word:"risk free",weight:3,category:"promise"},{word:"credit",weight:3,category:"financial"},{word:"loan",weight:3,category:"financial"},{word:"deal",weight:3,category:"offer"},{word:"discount",weight:3,category:"offer"},{word:"cheap",weight:3,category:"offer"},{word:"order now",weight:3,category:"action"},{word:"exclusive",weight:3,category:"offer"},{word:"congratulations",weight:3,category:"gambling"},{word:"selected",weight:3,category:"personalization"},{word:"claim",weight:3,category:"action"},{word:"investment",weight:3,category:"financial"},{word:"miracle",weight:3,category:"promise"},{word:"easy",weight:3,category:"promise"},{word:"no cost",weight:3,category:"offer"},{word:"trial",weight:3,category:"offer"},{word:"amazing",weight:3,category:"promise"},{word:"secret",weight:3,category:"promise"},{word:"earn",weight:3,category:"financial"},{word:"income",weight:3,category:"financial"},{word:"work from home",weight:3,category:"employment"},{word:"double your",weight:3,category:"promise"},{word:"gift",weight:3,category:"offer"},{word:"promo",weight:3,category:"offer"},{word:"promotion",weight:3,category:"offer"},{word:"unbelievable",weight:3,category:"promise"},{word:"click here",weight:3,category:"action"},{word:"visit",weight:3,category:"action"},{word:"call now",weight:3,category:"action"},{word:"apply now",weight:3,category:"action"},{word:"save big",weight:3,category:"offer"},{word:"lowest price",weight:3,category:"offer"},{word:"act fast",weight:3,category:"urgency"},{word:"lose weight",weight:3,category:"health"},{word:"weight loss",weight:3,category:"health"},{word:"viagra",weight:3,category:"health"},{word:"cialis",weight:3,category:"health"},{word:"luxury",weight:3,category:"lifestyle"},{word:"billion",weight:3,category:"financial"},{word:"million",weight:3,category:"financial"},{word:"guarantee",weight:3,category:"promise"},{word:"switch now",weight:2,category:"action"},{word:"download app",weight:2,category:"action"},{word:"start a sip",weight:2,category:"financial"},{word:"our funds",weight:2,category:"financial"},{word:"portfolio",weight:2,category:"financial"},{word:"statements",weight:2,category:"financial"},{word:"invest online",weight:2,category:"financial"},{word:"webinar",weight:2,category:"event"},{word:"invite",weight:2,category:"event"},{word:"exclusive workshop",weight:2,category:"event"},{word:"boost your chances",weight:2,category:"promise"},{word:"standout application",weight:2,category:"promise"},{word:"insider knowledge",weight:2,category:"promise"},{word:"expert guidance",weight:2,category:"promise"},{word:"live q&a",weight:2,category:"event"},{word:"don't miss out",weight:2,category:"urgency"},{word:"get ahead",weight:2,category:"promise"},{word:"your future",weight:2,category:"personalization"},{word:"worth your time",weight:2,category:"promise"},{word:"medical school",weight:2,category:"education"},{word:"application workshop",weight:2,category:"event"},{word:"proven strategies",weight:2,category:"promise"},{word:"compelling supporting documents",weight:2,category:"promise"},{word:"mcat requirements",weight:2,category:"education"},{word:"admissions experts",weight:2,category:"promise"},{word:"secure an interview",weight:2,category:"promise"},{word:"crisp, engaging webinar",weight:2,category:"event"},{word:"dynamic and resilient portfolio",weight:2,category:"financial"},{word:"unique in today's market",weight:2,category:"promise"},{word:"time-tested factors",weight:2,category:"promise"},{word:"momentum",weight:2,category:"financial"},{word:"value",weight:2,category:"financial"},{word:"quality",weight:2,category:"promise"},{word:"low volatility",weight:2,category:"financial"},{word:"multi-factor",weight:2,category:"financial"},{word:"fund",weight:2,category:"financial"},{word:"long term",weight:2,category:"financial"},{word:"wealth",weight:2,category:"financial"},{word:"adaptive",weight:2,category:"promise"},{word:"evolving",weight:2,category:"promise"},{word:"quantitative model",weight:2,category:"financial"},{word:"consult their financial advisers",weight:2,category:"financial"},{word:"suitable for investors",weight:2,category:"financial"},{word:"selected for you",weight:2,category:"personalization"},{word:"step by step",weight:2,category:"promise"},{word:"apply to med. school",weight:2,category:"education"},{word:"shine",weight:2,category:"promise"},{word:"tomorrow",weight:2,category:"urgency"},{word:"today",weight:2,category:"urgency"},{word:"got a free hour",weight:2,category:"offer"},{word:"invest it",weight:2,category:"financial"},{word:"smarter equity strategy",weight:2,category:"financial"},{word:"curious about",weight:2,category:"engagement"},{word:"join us",weight:2,category:"action"},{word:"here's what you'll learn",weight:2,category:"promise"},{word:"we are sure",weight:2,category:"promise"},{word:"it'll be worth your time",weight:2,category:"promise"},{word:"this is your chance",weight:2,category:"urgency"},{word:"don't have to navigate",weight:2,category:"promise"},{word:"designed to give you",weight:2,category:"promise"},{word:"rise above the rest",weight:2,category:"promise"},{word:"insider tips",weight:2,category:"promise"},{word:"get your questions answered",weight:2,category:"promise"},{word:"real time",weight:2,category:"promise"},{word:"competitive",weight:2,category:"promise"},{word:"admissions process",weight:2,category:"education"},{word:"your future in medicine begins here",weight:2,category:"education"},{word:"horoscope",weight:3,category:"astrology"},{word:"life report",weight:3,category:"astrology"},{word:"detailed life report",weight:3,category:"astrology"},{word:"50% off",weight:3,category:"offer"},{word:"flat 50%",weight:3,category:"offer"},{word:"future",weight:2,category:"astrology"},{word:"major events",weight:2,category:"astrology"},{word:"personalised",weight:2,category:"personalization"},{word:"predictions",weight:3,category:"astrology"},{word:"comprehensive analysis",weight:2,category:"promise"},{word:"planetary",weight:2,category:"astrology"},{word:"mahadasha",weight:2,category:"astrology"},{word:"remedies",weight:2,category:"astrology"},{word:"overcome tough challenges",weight:2,category:"promise"},{word:"free ask a question",weight:3,category:"offer"},{word:"free telephonic consultation",weight:3,category:"offer"},{word:"report delivery",weight:2,category:"service"},{word:"clearly revealed",weight:2,category:"promise"},{word:"buy now",weight:3,category:"action"},{word:"plan your future",weight:2,category:"astrology"},{word:"get predictions",weight:3,category:"astrology"},{word:"entire life",weight:2,category:"astrology"},{word:"important life-areas",weight:2,category:"astrology"},{word:"support@ganeshaspeaks.com",weight:3,category:"contact"},{word:"0091-79-4900-7777",weight:3,category:"contact"},{word:"unbelievable offer",weight:3,category:"offer"},{word:"why wait",weight:2,category:"urgency"},{word:"save flat",weight:2,category:"offer"},{word:"anxious about your future",weight:2,category:"emotion"},{word:"glimpse of your entire life",weight:2,category:"astrology"},{word:"worth",weight:2,category:"promise"},{word:"contact us at",weight:2,category:"contact"},{word:"detailed life report",weight:3,category:"astrology"},{word:"personalised detailed life predictions",weight:3,category:"astrology"},{word:"personalised guidance",weight:2,category:"astrology"},{word:"get 50% off",weight:3,category:"offer"},{word:"remedial solution for career",weight:2,category:"astrology"},{word:"premium janampatri",weight:2,category:"astrology"},{word:"career monthwise report",weight:2,category:"astrology"},{word:"career forecast",weight:2,category:"astrology"},{word:"detailed planetary mahadasha analysis",weight:2,category:"astrology"},{word:"remedies to overcome tough challenges",weight:2,category:"astrology"},{word:"get free ask a question",weight:3,category:"offer"},{word:"get free telephonic consultation",weight:3,category:"offer"},{word:"after report delivery",weight:2,category:"service"},{word:"your future, clearly revealed",weight:2,category:"astrology"},{word:"fwd: next week",weight:2,category:"urgency"},{word:"med school",weight:2,category:"education"},{word:"app. workshop",weight:2,category:"event"},{word:"it's now or never",weight:3,category:"urgency"},{word:"do not miss this opportunity",weight:3,category:"urgency"},{word:"special offer price",weight:3,category:"offer"},{word:"just ₹549",weight:3,category:"offer"},{word:"₹549",weight:3,category:"offer"},{word:"₹329",weight:3,category:"offer"},{word:"bejan daruwalla",weight:2,category:"astrology"},{word:"expert team of astrologers",weight:2,category:"astrology"},{word:"25+ years of experience",weight:2,category:"credibility"},{word:"hurry! offer is for limited period only",weight:3,category:"urgency"},{word:"your personalised answer will cover",weight:2,category:"promise"},{word:"detailed answer to your question",weight:2,category:"promise"},{word:"root cause of your issue",weight:2,category:"promise"},{word:"action plan",weight:2,category:"promise"},{word:"solution for your problem",weight:2,category:"promise"},{word:"get free consultation worth",weight:3,category:"offer"},{word:"explore all offers",weight:2,category:"offer"},{word:"offer ends soon",weight:2,category:"urgency"},{word:"claim your discount now",weight:3,category:"action"},{word:"unlock up to 58% off today",weight:3,category:"offer"},{word:"25 years ago",weight:2,category:"credibility"},{word:"investment journey",weight:2,category:"financial"},{word:"grow with us",weight:2,category:"promise"},{word:"watch now",weight:2,category:"action"},{word:"astrology reports",weight:2,category:"astrology"},{word:"astrology",weight:2,category:"astrology"},{word:"janampatri",weight:2,category:"astrology"},{word:"vedic astrology",weight:2,category:"astrology"},{word:"love & marriage future",weight:2,category:"astrology"},{word:"personalized guidance",weight:2,category:"astrology"},{word:"remedial solutions for personal issues",weight:2,category:"astrology"},{word:"remedial solution for marriage",weight:2,category:"astrology"},{word:"remedial solution for love",weight:2,category:"astrology"},{word:"kundli matching",weight:2,category:"astrology"},{word:"kundli compatibility",weight:2,category:"astrology"},{word:"decoded astrologically",weight:2,category:"astrology"},{word:"your next 10 career years",weight:2,category:"astrology"},{word:"your ultimate life blueprint",weight:2,category:"astrology"},{word:"get 40% off",weight:3,category:"offer"},{word:"get 58% off",weight:3,category:"offer"},{word:"get 21% off",weight:3,category:"offer"},{word:"get 25% off",weight:3,category:"offer"},{word:"discover more powerful astrology reports",weight:2,category:"astrology"},{word:"this limited-time offer",weight:3,category:"urgency"},{word:"gain profound insights",weight:2,category:"promise"},{word:"claim your discount",weight:3,category:"action"},{word:"badhte",weight:2,category:"promise"},{word:"plan your future",weight:2,category:"astrology"},{word:"comprehensive analysis of all the important life-areas",weight:2,category:"astrology"},{word:"glimpse of your entire life",weight:2,category:"astrology"},{word:"worth your time",weight:2,category:"promise"},{word:"do not miss out",weight:2,category:"urgency"},{word:"now or never",weight:3,category:"urgency"},{word:"limited period only",weight:2,category:"urgency"},{word:"free consultation",weight:3,category:"offer"},{word:"free telephonic consultation",weight:3,category:"offer"},{word:"free ask a question",weight:3,category:"offer"},{word:"worth ₹999",weight:3,category:"offer"},{word:"worth ₹549",weight:3,category:"offer"},{word:"blueprint",weight:2,category:"astrology"},{word:"life blueprint",weight:2,category:"astrology"},{word:"major events likely to happen",weight:2,category:"astrology"},{word:"detailed answer",weight:2,category:"promise"},{word:"root cause",weight:2,category:"promise"},{word:"action plan",weight:2,category:"promise"},{word:"solution for your problem",weight:2,category:"promise"},{word:"personalised answer",weight:2,category:"promise"},{word:"astrology report",weight:2,category:"astrology"},{word:"personalised detailed life report",weight:3,category:"astrology"},{word:"personalized guidance on career",weight:2,category:"astrology"},{word:"love, health & more",weight:2,category:"astrology"},{word:"personalised guidance on love",weight:2,category:"astrology"},{word:"personalised guidance on health",weight:2,category:"astrology"},{word:"personalised guidance on marriage",weight:2,category:"astrology"},{word:"personalised guidance on future",weight:2,category:"astrology"},{word:"personalised guidance on life",weight:2,category:"astrology"},{word:"personalised guidance on wealth",weight:2,category:"astrology"},{word:"personalised guidance on education",weight:2,category:"astrology"},{word:"personalised guidance on business",weight:2,category:"astrology"},{word:"personalised guidance on finance",weight:2,category:"astrology"},{word:"personalised guidance on property",weight:2,category:"astrology"},{word:"personalised guidance on family",weight:2,category:"astrology"},{word:"personalised guidance on children",weight:2,category:"astrology"},{word:"personalised guidance on travel",weight:2,category:"astrology"},{word:"personalised guidance on abroad",weight:2,category:"astrology"},{word:"personalised guidance on job",weight:2,category:"astrology"},{word:"personalised guidance on profession",weight:2,category:"astrology"},{word:"personalised guidance on studies",weight:2,category:"astrology"},{word:"personalised guidance on exams",weight:2,category:"astrology"},{word:"personalised guidance on competitive exams",weight:2,category:"astrology"},{word:"personalised guidance on government job",weight:2,category:"astrology"},{word:"personalised guidance on private job",weight:2,category:"astrology"},{word:"personalised guidance on promotion",weight:2,category:"astrology"},{word:"personalised guidance on transfer",weight:2,category:"astrology"},{word:"personalised guidance on business growth",weight:2,category:"astrology"},{word:"personalised guidance on business expansion",weight:2,category:"astrology"},{word:"personalised guidance on business partnership",weight:2,category:"astrology"},{word:"personalised guidance on business loss",weight:2,category:"astrology"},{word:"personalised guidance on business profit",weight:2,category:"astrology"},{word:"personalised guidance on business investment",weight:2,category:"astrology"},{word:"personalised guidance on business loan",weight:2,category:"astrology"},{word:"personalised guidance on business debt",weight:2,category:"astrology"},{word:"personalised guidance on business recovery",weight:2,category:"astrology"},{word:"personalised guidance on business success",weight:2,category:"astrology"},{word:"personalised guidance on business failure",weight:2,category:"astrology"},{word:"personalised guidance on business dispute",weight:2,category:"astrology"},{word:"personalised guidance on business litigation",weight:2,category:"astrology"},{word:"personalised guidance on business settlement",weight:2,category:"astrology"},{word:"personalised guidance on business agreement",weight:2,category:"astrology"},{word:"personalised guidance on business contract",weight:2,category:"astrology"},{word:"personalised guidance on business deal",weight:2,category:"astrology"},{word:"personalised guidance on business negotiation",weight:2,category:"astrology"},{word:"personalised guidance on business merger",weight:2,category:"astrology"},{word:"personalised guidance on business acquisition",weight:2,category:"astrology"},{word:"personalised guidance on business sale",weight:2,category:"astrology"},{word:"personalised guidance on business purchase",weight:2,category:"astrology"},{word:"personalised guidance on business rent",weight:2,category:"astrology"},{word:"personalised guidance on business lease",weight:2,category:"astrology"},{word:"personalised guidance on business mortgage",weight:2,category:"astrology"},{word:"personalised guidance on business insurance",weight:2,category:"astrology"},{word:"personalised guidance on business claim",weight:2,category:"astrology"},{word:"personalised guidance on business compensation",weight:2,category:"astrology"},{word:"personalised guidance on business settlement",weight:2,category:"astrology"},{word:"personalised guidance on business dispute",weight:2,category:"astrology"},{word:"personalised guidance on business litigation",weight:2,category:"astrology"},{word:"personalised guidance on business agreement",weight:2,category:"astrology"},{word:"personalised guidance on business contract",weight:2,category:"astrology"},{word:"personalised guidance on business deal",weight:2,category:"astrology"},{word:"personalised guidance on business negotiation",weight:2,category:"astrology"},{word:"personalised guidance on business merger",weight:2,category:"astrology"},{word:"personalised guidance on business acquisition",weight:2,category:"astrology"},{word:"personalised guidance on business sale",weight:2,category:"astrology"},{word:"personalised guidance on business purchase",weight:2,category:"astrology"},{word:"personalised guidance on business rent",weight:2,category:"astrology"},{word:"personalised guidance on business lease",weight:2,category:"astrology"},{word:"personalised guidance on business mortgage",weight:2,category:"astrology"},{word:"personalised guidance on business insurance",weight:2,category:"astrology"},{word:"personalised guidance on business claim",weight:2,category:"astrology"},{word:"personalised guidance on business compensation",weight:2,category:"astrology"},{word:"personalised guidance on business settlement",weight:2,category:"astrology"}],d=/(https?:\/\/|www\.)[\w\-]+(\.[\w\-]+)+\S*/gi,_=/[\w.-]+@[\w.-]+\.[a-zA-Z]{2,}/g,N=/\b\d{10,}\b/g;let I=0,ye=[],xe={},Ce={};s.forEach(dr=>{const Pr=new RegExp(`\\b${dr.word.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}\\b`,"gi"),Hr=t.match(Pr);if(Hr&&Hr.length>0){const Wr=Hr.length*dr.weight;I+=Wr,ye.push(dr.word),xe[dr.word]=Hr.length,Ce[dr.category]||(Ce[dr.category]=0),Ce[dr.category]+=Wr}});const Ve=t.match(d)||[],Ye=t.match(_)||[],qe=t.match(N)||[],ze=(t.match(/!/g)||[]).length,Oe=(t.match(/\$/g)||[]).length,We=(t.match(/%/g)||[]).length,ot=(t.match(/[A-Z]/g)||[]).length/Math.max(1,t.length),st=t.split(/\s+/).filter(Boolean).length,Rt=ye.length/Math.max(1,st),wt=au(t),It=Object.entries(wt).filter(([dr,Pr])=>Pr>10),er=Object.entries(wt).filter(([dr,Pr])=>Pr>3&&!s.some(Hr=>Hr.word===dr)&&dr.length>4).sort((dr,Pr)=>Pr[1]-dr[1]).slice(0,5).map(([dr,Pr])=>({word:dr,count:Pr})),cr=t.split(/\s+/).filter(dr=>dr.length>3&&dr===dr.toUpperCase());I+=Ve.length*2,I+=Ye.length*2,I+=qe.length*2,I+=ze*.5,I+=Oe*.5,I+=We*.5,I+=It.length,Rt>.05&&(I+=2),ot>.1&&(I+=1),cr.length>5&&(I+=1);const Tr=2,xr=ye.length+Ve.length+Ye.length+qe.length,gt=1-i(Tr,xr),Ft=.01,pt=t.split(/\s+/).filter(Boolean).length,Zt=ye.length,lr=1-a(pt,Ft,Zt),wr=gt*.6+lr*.4;let Sr=!1,vr="None",Bt=0;wr>.95?(Sr=!0,vr="Very High",Bt=wr):wr>.85?(Sr=!0,vr="High",Bt=wr):wr>.7?(Sr=!0,vr="Moderate",Bt=wr):wr>.5?(Sr=!1,vr="Low",Bt=1-wr):(Sr=!1,vr="None",Bt=1-wr),wr<.3&&I>=8?(Sr=!0,vr="High",Bt=Math.min(.9,I/15)):wr<.3&&I>=4?(Sr=!0,vr="Moderate",Bt=Math.min(.7,I/10)):wr<.3&&I>=2&&(Sr=!1,vr="Low",Bt=Math.max(.3,1-I/10));const yr=Math.round(wr*100);return{isSpam:Sr,level:vr,spamScore:I,spamPercent:yr,confidence:Math.round(Bt*100),statisticalScore:Math.round(wr*100),poissonProbability:Math.round(gt*100),binomialProbability:Math.round(lr*100),matchedKeywords:ye,matchedKeywordCounts:xe,categoryScores:Ce,uniqueSuspicious:er,urlMatches:Ve,emailMatches:Ye,phoneMatches:qe,repeatedWords:It.map(([dr,Pr])=>({word:dr,count:Pr})),allCapsWords:cr,expectedSpamIndicators:Tr,observedSpamIndicators:xr,totalWordCount:pt,observedSpamWords:Zt}},p3=t=>{const e=t.split(/[.!?]+/).filter(a=>a.trim().length>10);if(e.length<=3)return t.trim();const r=au(t);return e.map((a,s)=>{const _=a.toLowerCase().split(/\s+/).reduce((I,ye)=>I+(r[ye]||0),0),N=s<e.length*.3?1.2:1;return{sentence:a.trim(),score:_*N,index:s}}).sort((a,s)=>s.score-a.score).slice(0,3).sort((a,s)=>a.index-s.index).map(a=>a.sentence).join(". ")+"."},mb=t=>{const e=t.split(/[.!?]+/).filter(xe=>xe.trim().length>10);t.split(/\n\s*\n/).filter(xe=>xe.trim().length>0);const r=au(t),n=Object.entries(r).filter(([xe])=>xe.length>3).sort((xe,Ce)=>Ce[1]-xe[1]).slice(0,10).map(([xe])=>xe),i=e.map((xe,Ce)=>{const Ye=xe.toLowerCase().split(/\s+/).reduce((ze,Oe)=>ze+(n.includes(Oe)?1:0),0),qe=Ce<e.length*.3?1.5:1;return{sentence:xe.trim(),score:Ye*qe,index:Ce,type:OC(xe)}}).sort((xe,Ce)=>Ce.score-xe.score),a=i.slice(0,5).sort((xe,Ce)=>xe.index-Ce.index);let s=i.filter(xe=>xe.type==="conclusion").slice(0,3),d=i.filter(xe=>xe.type==="question").slice(0,3),_=g3(t),N=y6(t);(!s||s.length===0)&&_&&_.length>0&&(s=_.map(xe=>({sentence:xe}))),(!d||d.length===0)&&N&&N.length>0&&(d=N.map(xe=>({sentence:xe}))),(!s||s.length===0)&&(s=[{sentence:"No explicit conclusion found. The transcript ends without a clear summary."}]),(!d||d.length===0)&&(d=[{sentence:"What is the main takeaway from this transcript?"}]);let I=t6(t);(!I||typeof I!="object")&&(I={}),I.length=I.length||`${t.length} chars`,I.tone=I.tone||"Neutral",I.primaryTopic=I.primaryTopic||n[0]||"General",I.complexity=I.complexity||"Standard",I.readingLevel=I.readingLevel||"N/A";let ye=s6(t);return(!ye||typeof ye!="object")&&(ye={}),ye.type=ye.type||"N/A",ye.pattern=ye.pattern||"N/A",{brief:p3(t),mainPoints:a.map(xe=>xe.sentence),keyFindings:e6(t),conclusions:s.map(xe=>xe.sentence),questions:d.map(xe=>xe.sentence),overview:I,structure:ye}},OC=t=>{const e=t.toLowerCase();return e.includes("?")?"question":e.includes("conclusion")||e.includes("summary")||e.includes("therefore")?"conclusion":e.includes("important")||e.includes("key")||e.includes("main")||e.includes("first")||e.includes("second")||e.includes("next")?"sequence":"statement"},BC=t=>{const e=[],r=t.toLowerCase().split(/\s+/).filter(Boolean),n=t.split(/[.!?]+/).filter(d=>d.trim().length>5);if(r.length>500?e.push({type:"length",icon:"📏",title:"Long Content",description:`This is a substantial transcript with ${r.length} words. Average reading time: ${Math.ceil(r.length/200)} minutes.`,severity:"info"}):r.length<50&&r.length>0&&e.push({type:"length",icon:"📝",title:"Short Content",description:`Brief transcript with ${r.length} words. Quick read under 1 minute.`,severity:"info"}),n.length>0){const d=r.length/n.length;d>20&&e.push({type:"complexity",icon:"🧠",title:"Complex Language",description:`Average sentence length is ${d.toFixed(1)} words. This content uses complex sentence structures.`,severity:"warning"})}const i=au(t),a=Object.entries(i).filter(([d])=>d.length>3).sort((d,_)=>_[1]-d[1]).slice(0,5);a.length>0&&e.push({type:"keywords",icon:"🔑",title:"Key Topics",description:`Main topics: ${a.map(([d,_])=>`${d} (${_}x)`).join(", ")}`,severity:"success"});const s=(t.match(/\?/g)||[]).length;return s>0&&e.push({type:"questions",icon:"❓",title:"Interactive Content",description:`Contains ${s} question${s>1?"s":""}, suggesting interactive or educational content.`,severity:"info"}),e.length===0&&(!t||r.length===0?e.push({type:"empty",icon:"💡",title:"No Content",description:"No transcript content was provided for analysis.",severity:"info"}):r.length<10?e.push({type:"minimal",icon:"💡",title:"Minimal Content",description:"The transcript is too short for meaningful insights. Please provide more content.",severity:"info"}):e.push({type:"general",icon:"💡",title:"General Content",description:"The transcript does not contain enough distinctive features for specific insights, but it is available for review.",severity:"info"})),e},vb=t=>{const e=["good","great","excellent","amazing","wonderful","fantastic","love","like","happy","positive","success","successful","achieve","achievement","better","best","perfect","awesome","brilliant","outstanding","remarkable","impressive","incredible","beautiful","fantastic","marvelous","superb","exceptional","magnificent","terrific","splendid","delightful","pleasurable","enjoyable","satisfying","fulfilling","gratifying","thrilled","excited","optimistic","confident","hopeful","enthusiastic","passionate","inspired","motivated","empowered","accomplished","proud","blessed","grateful","fortunate"],r=["bad","terrible","awful","horrible","hate","dislike","sad","angry","disappointed","negative","failure","failed","wrong","worse","worst","problem","issue","difficult","impossible","disaster","crisis","concern","worry","fear","danger","risk","disturbing","alarming","shocking","devastating","tragic","unfortunate","regrettable","frustrating","annoying","irritating","offensive","disgusting","appalling","dreadful","miserable","depressed","anxious","stressed","overwhelmed","discouraged","hopeless","defeated","broken","damaged","harmful","destructive","toxic","corrupt"],n=["very","extremely","incredibly","absolutely","completely","totally","really","quite","rather","fairly","somewhat","slightly","moderately","highly","tremendously","enormously","exceptionally","remarkably","particularly"],i=["not","no","never","none","nothing","nobody","nowhere","neither","hardly","barely","scarcely","rarely","seldom","without"],a=t.toLowerCase().split(/\s+/),s=t.split(/[.!?]+/).filter(cr=>cr.trim().length>0);let d=0,_=0,N=0,I=1,ye=0;for(let cr=0;cr<a.length;cr++){const Tr=a[cr],xr=cr>0?a[cr-1]:"";cr<a.length-1&&a[cr+1];let lt=1;n.includes(xr)&&(lt=1.5);let gt=!1;(i.includes(xr)||i.includes(a[cr-2]))&&(gt=!0),e.includes(Tr)?gt?_+=lt:d+=lt:r.includes(Tr)&&(gt?d+=lt*.8:_+=lt)}const xe=(t.match(/!/g)||[]).length,Ce=(t.match(/\?/g)||[]).length,Ve=a.filter(cr=>cr.length>2&&cr===cr.toUpperCase()).length;xe>0&&(I+=xe*.1,ye+=xe*.05),Ce>0&&(N+=Ce*.1),Ve>0&&(I+=Ve*.15),s.forEach(cr=>{const Tr=cr.toLowerCase();(Tr.includes("better than")||Tr.includes("superior to"))&&(d+=.5),(Tr.includes("worse than")||Tr.includes("inferior to"))&&(_+=.5),(Tr.includes("i feel")||Tr.includes("i think"))&&(ye+=.1),(Tr.includes("definitely")||Tr.includes("certainly")||Tr.includes("absolutely"))&&(I+=.1),(Tr.includes("maybe")||Tr.includes("perhaps")||Tr.includes("might")||Tr.includes("could"))&&(N+=.2)}),d*=I,_*=I;const Ye=a.length;Ye/s.length>20&&(N+=.3);let ze=Math.min(1,Ye/50);Ye<10&&(ze=.3);const Oe=d+_+N,We=(d-_)/Math.max(1,Ye);let ot="Neutral",st=.5,Rt=0;Oe>0&&(Rt=We,d>_&&d>N?(ot="Positive",st=Math.min(.95,.5+d/Oe*.5)):_>d&&_>N?(ot="Negative",st=Math.min(.95,.5+_/Oe*.5)):(ot="Neutral",st=Math.max(.4,.8-Math.abs(d-_)/Oe)));let wt=st;wt*=ze,wt+=ye*.1,wt=Math.max(.2,Math.min(.95,wt));const It=t.length+a.length+s.length,er=.05*Math.sin(It*.1);return wt+=er,wt=Math.max(.15,Math.min(.98,wt)),{score:Rt,label:ot,confidence:wt,details:{positiveWords:Math.round(d*10)/10,negativeWords:Math.round(_*10)/10,neutralWords:Math.round(N*10)/10,totalWords:a.length,sentenceCount:s.length,intensityMultiplier:Math.round(I*100)/100,reliabilityFactor:Math.round(ze*100)/100,exclamationCount:xe,questionCount:Ce,allCapsWords:Ve}}},HC=t=>{const e=t.split(/\s+/).filter(i=>i.length>0),r=t.split(/[.!?]+/).filter(i=>i.trim().length>0);return{wordCount:e.length,sentenceCount:r.length,averageWordsPerSentence:e.length/r.length||0,readingTime:Math.ceil(e.length/200),characterCount:t.length,paragraphCount:t.split(/\n\s*\n/).length}},Xg=t=>{const e=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","must","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their"]),r=t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(i=>i.length>2&&!e.has(i)),n={};return r.forEach(i=>{n[i]=(n[i]||0)+1}),Object.entries(n).sort((i,a)=>a[1]-i[1]).slice(0,10).map(([i,a])=>({word:i,count:a,percentage:(a/r.length*100).toFixed(1)}))},Dv=t=>{const e=t.split(/[.!?]+/).filter(d=>d.trim().length>5),r=t.split(/\s+/).filter(d=>d.trim().length>0),n=r.reduce((d,_)=>d+WC(_),0);if(e.length===0||r.length===0)return 0;const i=r.length/e.length,a=n/r.length,s=206.835-1.015*i-84.6*a;return Math.max(0,Math.min(100,s))},WC=t=>{if(t=t.toLowerCase(),t.length<=3)return 1;const e="aeiouy";let r=0,n=!1;for(let i=0;i<t.length;i++){const a=e.includes(t[i]);a&&!n&&r++,n=a}return t.endsWith("e")&&r--,Math.max(1,r)},gb=t=>{const e=Xg(t),r={},n={Technology:["technology","computer","software","digital","system","data","online","internet"],Business:["business","company","market","customer","product","service","strategy","growth"],Education:["learn","study","education","student","teacher","school","knowledge","skill"],Health:["health","medical","doctor","patient","treatment","care","wellness","medicine"],Science:["research","study","analysis","experiment","scientific","discovery","theory"],Personal:["personal","experience","life","family","friend","relationship","feeling"]};return e.forEach(({word:i,count:a})=>{let s=!1;for(const[d,_]of Object.entries(n))if(_.includes(i)){r[d]=(r[d]||0)+a,s=!0;break}s||(r.General=(r.General||0)+a)}),Object.entries(r).sort((i,a)=>a[1]-i[1]).map(([i,a])=>({topic:i,count:a}))},Pv=t=>{const e={Joy:["happy","joy","excited","delighted","cheerful","glad","pleased","thrilled","content","satisfied","elated","ecstatic","grateful","optimistic","hopeful","enjoy","smile","laugh","bliss","enthusiastic","uplifted","merry","jovial","glee","rejoice","radiant","buoyant","euphoric","sunny","lively","vivid","vibrant"],Sadness:["sad","depressed","disappointed","melancholy","grief","sorrow","unhappy","down","gloomy","mournful","tearful","regret","lonely","despair","hopeless","heartbroken","blue","dismal","forlorn","dejected","weary","pessimistic","suffer","cry","lament","anguish","wistful","remorse","loss","pain","hurt"],Anger:["angry","furious","irritated","annoyed","rage","mad","frustrated","resentful","outraged","enraged","agitated","cross","indignant","offended","hostile","bitter","exasperated","infuriated","irate","provoked","incensed","wrath","disgusted","scorn","contempt","vengeful","fume","grudge","aggression","temper","tantrum"],Fear:["afraid","scared","worried","anxious","nervous","terrified","concerned","fearful","panic","alarmed","apprehensive","dread","uneasy","timid","shy","phobia","horror","fright","startled","shaken","tremble","coward","intimidated","paranoid","hesitant","doubt","uncertain","insecure","distressed","alarmed","spooked"],Surprise:["surprised","amazed","astonished","shocked","unexpected","sudden","startled","stunned","dumbfounded","flabbergasted","speechless","baffled","bewildered","astounded","marvel","wonder","awe","unforeseen","unanticipated","unpredictable","unusual","uncommon","remarkable","extraordinary","unimaginable","unthinkable","unbelievable","miraculous","curious","peculiar","odd"],Trust:["trust","confident","reliable","secure","safe","certain","assured","faith","dependable","loyal","honest","integrity","credible","authentic","genuine","devoted","steadfast","faithful","committed","supportive","consistent","stable","sure","guaranteed","predictable","solid","firm","unwavering","trustworthy","belief","conviction"],Disgust:["disgust","disgusted","repulsed","revolted","nauseated","sickened","gross","abhorrent","loath","detest","aversion","distaste","offended","repelled","appalled","horrified","revulsion","nausea","repugnant","vile","foul","sickly","yuck","yucky","filthy","dirty","unclean","contaminated","tainted","putrid","rotten"]},r=["not","don't","doesn't","didn't","isn't","wasn't","aren't","weren't","no","never","none","cannot","can't","won't","without"],n=t.toLowerCase().replace(/[^\w\s']/g,"").split(/\s+/),i={},a=n.length;return Object.entries(e).forEach(([s,d])=>{let _=0;for(let N=0;N<n.length;N++){const I=n[N];if(d.includes(I)){const ye=n[N-1]||"",xe=n[N-2]||"";r.includes(ye)||r.includes(xe)||_++}}_>0&&(i[s]=Number((_/a*100).toFixed(2)))}),Object.keys(i).length===0?[{emotion:"Neutral",count:100}]:Object.entries(i).sort((s,d)=>d[1]-s[1]).map(([s,d])=>({emotion:s,count:d}))},yb=t=>{const e=t.toLowerCase().split(/\s+/),r=t.split(/[.!?]+/).filter(I=>I.trim().length>5),n=e.filter(I=>I.length>6);e.filter(I=>I.length<=6);const i=r.filter(I=>!I.includes("?")&&!I.includes("!")).length,a=r.filter(I=>I.includes("?")).length,s=r.filter(I=>I.includes("!")).length,d=e.filter(I=>I.endsWith("ed")||["was","were","had"].includes(I)).length,_=e.filter(I=>["is","are","am","have","has"].includes(I)).length,N=e.filter(I=>["will","shall","going"].includes(I)).length;return{vocabularyComplexity:(n.length/e.length*100).toFixed(1)+"%",sentenceTypes:{declarative:i,interrogative:a,exclamatory:s},tenseDistribution:{past:d,present:_,future:N},averageWordLength:(e.reduce((I,ye)=>I+ye.length,0)/e.length).toFixed(1),uniqueWords:new Set(e).size,repetitionRate:((e.length-new Set(e).size)/e.length*100).toFixed(1)+"%"}},xb=t=>{const e=t.split(/\n\s*\n/).filter(s=>s.trim().length>0);t.split(/[.!?]+/).filter(s=>s.trim().length>10);const r=e.map(s=>s.split(/[.!?]+/).length),n=r.reduce((s,d)=>s+d,0)/r.length,i=(t.match(/•|\*|-\s/g)||[]).length,a=(t.match(/\d+\.\s/g)||[]).length;return{paragraphStructure:{count:e.length,averageLength:n.toFixed(1),variability:l6(r)},listElements:{bulletPoints:i,numberedLists:a},coherenceScore:c6(t),transitionWords:v3(t),organizationPattern:u6(t)}},bb=t=>{const e=t.split(/[.!?]+/).filter(_=>_.trim().length>10),r=e.filter(_=>_.toLowerCase().includes("fact")||_.toLowerCase().includes("data")||_.toLowerCase().includes("research")||/\d+%/.test(_)).length,n=e.filter(_=>_.toLowerCase().includes("think")||_.toLowerCase().includes("believe")||_.toLowerCase().includes("feel")||_.toLowerCase().includes("opinion")).length,i=e.filter(_=>_.toLowerCase().includes("example")||_.toLowerCase().includes("instance")||_.toLowerCase().includes("such as")).length,a=Nv(t,["however","but","although","despite","nevertheless"]),s=Nv(t,["also","moreover","furthermore","additionally","besides"]),d=Nv(t,["because","therefore","consequently","as a result","due to"]);return{contentTypes:{factual:r,opinions:n,examples:i},discourseMarkers:{contrast:a,additive:s,causal:d},argumentStructure:d6(t),evidenceTypes:f6(t)}},wb=t=>{const e={people:[],organizations:[],locations:[],dates:[],numbers:[]},r=/\b[A-Z][a-z]+ [A-Z][a-z]+\b/g,n=/\b[A-Z][a-z]+ (Inc|Corp|Company|Organization|Association|University|College)\b/g,i=/\b[A-Z][a-z]+ (City|State|Country|Street|Avenue|Road)\b/g,a=/\b(January|February|March|April|May|June|July|August|September|October|November|December) \d{1,2},? \d{4}\b/g,s=/\b\d+(?:,\d{3})*(?:\.\d+)?\b/g;return e.people=Array.from(t.matchAll(r)).map(d=>d[0]).slice(0,10),e.organizations=Array.from(t.matchAll(n)).map(d=>d[0]).slice(0,10),e.locations=Array.from(t.matchAll(i)).map(d=>d[0]).slice(0,10),e.dates=Array.from(t.matchAll(a)).map(d=>d[0]).slice(0,10),e.numbers=Array.from(t.matchAll(s)).map(d=>d[0]).slice(0,10),e},_b=t=>{const e=t.split(/[.!?]+/).filter(s=>s.trim().length>0),r=[];e.forEach((s,d)=>{const _=s.trim();if(_.includes("?")||QC(_)){const N=_.replace(/^\s*["']|["']\s*$/g,"").trim();if(N.length>0){const I=qC(N),ye=JC(N),xe=VC(N),Ce=UC(N);r.push({text:N+(N.endsWith("?")?"":"?"),index:d,type:I.type,subType:I.subType,isRhetorical:ye,complexity:xe,purpose:Ce,context:KC(e,d),explanation:$C(I.type,I.subType)})}}});const n={what:r.filter(s=>s.type==="what").length,how:r.filter(s=>s.type==="how").length,why:r.filter(s=>s.type==="why").length,when:r.filter(s=>s.type==="when").length,where:r.filter(s=>s.type==="where").length,who:r.filter(s=>s.type==="who").length,which:r.filter(s=>s.type==="which").length,whose:r.filter(s=>s.type==="whose").length,yesNo:r.filter(s=>s.type==="yesNo").length,choice:r.filter(s=>s.type==="choice").length,confirmation:r.filter(s=>s.type==="confirmation").length,other:r.filter(s=>s.type==="other").length},i={information:r.filter(s=>s.purpose==="information").length,clarification:r.filter(s=>s.purpose==="clarification").length,confirmation:r.filter(s=>s.purpose==="confirmation").length,engagement:r.filter(s=>s.purpose==="engagement").length,reflection:r.filter(s=>s.purpose==="reflection").length,challenge:r.filter(s=>s.purpose==="challenge").length},a={simple:r.filter(s=>s.complexity==="simple").length,moderate:r.filter(s=>s.complexity==="moderate").length,complex:r.filter(s=>s.complexity==="complex").length};return{totalQuestions:r.length,questions:r,questionTypes:n,questionPurposes:i,complexityLevels:a,rhetorical:r.filter(s=>s.isRhetorical).length,direct:r.filter(s=>!s.isRhetorical).length,questionsWithContext:r.slice(0,15),averageComplexity:YC(r),questionDensity:(r.length/e.length*100).toFixed(1),mostCommonType:m3(n),questionInsights:GC(r,n,i)}},qC=t=>{const e=t.toLowerCase();return e.includes("what")?e.includes("what is")||e.includes("what are")?{type:"what",subType:"definition"}:e.includes("what if")||e.includes("what would")?{type:"what",subType:"hypothetical"}:e.includes("what about")||e.includes("what do you think")?{type:"what",subType:"opinion"}:{type:"what",subType:"general"}:e.includes("how")?e.includes("how much")||e.includes("how many")?{type:"how",subType:"quantity"}:e.includes("how long")||e.includes("how often")?{type:"how",subType:"duration"}:e.includes("how do")||e.includes("how to")?{type:"how",subType:"process"}:{type:"how",subType:"method"}:e.includes("why")?e.includes("why not")||e.includes("why don't")?{type:"why",subType:"alternative"}:e.includes("why is")||e.includes("why are")?{type:"why",subType:"reason"}:{type:"why",subType:"cause"}:e.includes("when")?e.includes("when will")||e.includes("when shall")?{type:"when",subType:"future"}:e.includes("when did")||e.includes("when was")?{type:"when",subType:"past"}:{type:"when",subType:"time"}:e.includes("where")?e.includes("where is")||e.includes("where are")?{type:"where",subType:"location"}:e.includes("where do")||e.includes("where can")?{type:"where",subType:"action"}:{type:"where",subType:"place"}:e.includes("who")?e.includes("who is")||e.includes("who are")?{type:"who",subType:"identity"}:e.includes("who will")||e.includes("who can")?{type:"who",subType:"capability"}:{type:"who",subType:"person"}:e.includes("which")?e.includes("which one")||e.includes("which ones")?{type:"which",subType:"selection"}:e.includes("which way")||e.includes("which method")?{type:"which",subType:"option"}:{type:"which",subType:"choice"}:e.includes("whose")?{type:"whose",subType:"possession"}:e.startsWith("is ")||e.startsWith("are ")||e.startsWith("was ")||e.startsWith("were ")||e.startsWith("do ")||e.startsWith("does ")||e.startsWith("did ")||e.startsWith("can ")||e.startsWith("could ")||e.startsWith("will ")||e.startsWith("would ")||e.startsWith("should ")||e.startsWith("have ")||e.startsWith("has ")||e.startsWith("had ")?{type:"yesNo",subType:"binary"}:e.includes(" or ")&&(e.includes("either")||e.includes("whether"))?{type:"choice",subType:"alternative"}:e.includes("right?")||e.includes("correct?")||e.includes("isn't it?")||e.includes("don't you think?")||e.includes("wouldn't you agree?")?{type:"confirmation",subType:"agreement"}:{type:"other",subType:"unclassified"}},VC=t=>{const e=t.split(/\s+/).length,r=t.includes(",")||t.includes("and")||t.includes("but"),n=t.toLowerCase().includes("if")||t.toLowerCase().includes("when");return e>15||r&&n?"complex":e>8||r||n?"moderate":"simple"},UC=t=>{const e=t.toLowerCase();return e.includes("what is")||e.includes("how does")||e.includes("when did")||e.includes("where is")||e.includes("who is")?"information":e.includes("do you mean")||e.includes("are you saying")||e.includes("clarify")||e.includes("explain")||e.includes("could you elaborate")?"clarification":e.includes("right?")||e.includes("correct?")||e.includes("isn't it?")||e.includes("don't you think?")||e.includes("wouldn't you agree?")?"confirmation":e.includes("what do you think")||e.includes("how do you feel")||e.includes("what's your opinion")||e.includes("any thoughts")?"engagement":e.includes("why do you think")||e.includes("what if")||e.includes("imagine")||e.includes("suppose")||e.includes("consider")?"reflection":e.includes("why not")||e.includes("how can you")||e.includes("what makes you")||e.includes("justify")||e.includes("defend")?"challenge":"information"},$C=(t,e,r)=>{var i;return((i={what:{definition:"Seeks to understand the nature, meaning, or identity of something",hypothetical:"Explores possible scenarios or imaginary situations",opinion:"Requests personal views, thoughts, or judgments",general:"Asks for general information or details about something"},how:{quantity:"Inquires about amounts, numbers, or measurements",duration:"Asks about time periods, frequency, or temporal aspects",process:"Seeks step-by-step instructions or procedures",method:"Requests information about ways, means, or approaches"},why:{alternative:"Questions why something is not done differently",reason:"Seeks explanations for states, conditions, or situations",cause:"Looks for underlying causes or motivations"},when:{future:"Asks about upcoming events or future timing",past:"Inquires about historical events or past timing",time:"Seeks general temporal information"},where:{location:"Asks about specific places or positions",action:"Inquires about where activities or actions occur",place:"Seeks information about general locations"},who:{identity:"Asks about the identity of people or entities",capability:"Inquires about who can or will do something",person:"Seeks information about individuals or groups"},which:{selection:"Asks for a choice from specific options",option:"Seeks the best alternative from available choices",choice:"Requests selection from multiple possibilities"},whose:{possession:"Inquires about ownership or belonging"},yesNo:{binary:"Requires a simple yes or no answer"},choice:{alternative:"Presents two or more options to choose from"},confirmation:{agreement:"Seeks validation or agreement with a statement"}}[t])==null?void 0:i[e])||"General inquiry seeking information"},YC=t=>{if(t.length===0)return"none";const e={simple:1,moderate:2,complex:3},n=t.reduce((i,a)=>i+e[a.complexity],0)/t.length;return n<1.5?"simple":n<2.5?"moderate":"complex"},m3=t=>{const e=Math.max(...Object.values(t));if(e===0)return"none";const r=Object.entries(t).find(([n,i])=>i===e);return r?r[0]:"none"},GC=(t,e,r)=>{const n=[];if(t.length===0)return n.push("No questions found in the transcript. This suggests a more declarative or informational communication style."),n;t.length>10?n.push(`High question density detected (${t.length} questions). This indicates an interactive, inquiry-based communication style.`):t.length>5?n.push(`Moderate question usage (${t.length} questions). Shows balanced interactive communication.`):n.push(`Low question frequency (${t.length} questions). Communication style is more declarative.`);const i=m3(e);i!=="none"&&n.push(`Most frequent question type: "${i}" questions. This suggests focus on ${XC(i)}.`);const a=Object.entries(r).reduce((_,[N,I])=>I>_.count?{purpose:N,count:I}:_,{purpose:"none",count:0});a.count>0&&n.push(`Primary question purpose: ${a.purpose}. This indicates ${ZC(a.purpose)}.`);const s=t.filter(_=>_.isRhetorical).length,d=t.length-s;return s>d?n.push("Predominantly rhetorical questions suggest a persuasive or reflective communication style."):d>s&&n.push("Mostly direct questions indicate information-seeking or interactive communication."),n},XC=t=>({what:"seeking definitions, explanations, or information about things",how:"understanding processes, methods, or procedures",why:"exploring reasons, causes, or motivations",when:"temporal information and timing",where:"location, place, or spatial information",who:"people, roles, or identity",which:"choice, selection, or options",whose:"ownership or possession",yesNo:"binary confirmation or simple verification",choice:"alternatives and decision-making",confirmation:"validation and agreement-seeking"})[t]||"general inquiry",ZC=t=>({information:"a focus on gathering facts and knowledge",clarification:"a need for better understanding and explanation",confirmation:"seeking validation and agreement",engagement:"interactive communication and involvement",reflection:"thoughtful consideration and deeper thinking",challenge:"questioning assumptions and critical thinking"})[t]||"general communication",QC=t=>{const e=t.toLowerCase();return["what","how","why","when","where","who","which","whose","whom","is","are","was","were","do","does","did","can","could","will","would","should","shall","may","might","must","have","has","had"].some(n=>e.startsWith(n+" "))},JC=t=>{const e=t.toLowerCase();return["isn't that","don't you think","wouldn't you agree","you know what i mean","right?","correct?","am i right","you see","obviously","clearly"].some(n=>e.includes(n))||t.length>80},KC=(t,e)=>{const r=e>0?t[e-1].trim():"",n=e<t.length-1?t[e+1].trim():"";return{before:r.length>100?r.substring(0,100)+"...":r,after:n.length>100?n.substring(0,100)+"...":n}},kb=t=>{const e={past:["yesterday","ago","before","previously","earlier","past","former","was","were"],present:["now","today","currently","presently","at present","is","are","am"],future:["tomorrow","later","next","future","will","shall","going to","upcoming"]},r=t.toLowerCase().split(/\s+/),n={past:0,present:0,future:0};return r.forEach(i=>{e.past.includes(i)&&n.past++,e.present.includes(i)&&n.present++,e.future.includes(i)&&n.future++}),{timeOrientation:n,dominantTense:Object.entries(n).reduce((i,a)=>n[i[0]]>n[a[0]]?i:a)[0],timeExpressions:h6(t)}},Sb=t=>{const e=["need","should","must","have to","require","plan","will","going to","schedule","assign"];return t.split(/[.!?]+/).filter(i=>i.trim().length>10).filter(i=>{const a=i.toLowerCase();return e.some(s=>a.includes(s))}).map(i=>({text:i.trim(),priority:p6(i),type:m6(i)})).slice(0,10)},Mb=t=>{const e=t.split(/[.!?]+/).filter(i=>i.trim().length>10),r={},n={Communication:["communication","discussion","conversation","talk","speak","listen"],"Problem Solving":["problem","solution","issue","challenge","resolve","fix"],Planning:["plan","strategy","goal","objective","target","schedule"],Analysis:["analyze","study","research","examine","investigate","review"],"Decision Making":["decision","choose","select","option","alternative","choice"],Collaboration:["team","collaborate","together","cooperation","partnership","group"]};return e.forEach(i=>{const a=i.toLowerCase();Object.entries(n).forEach(([s,d])=>{const _=d.filter(N=>a.includes(N)).length;_>0&&(r[s]=(r[s]||0)+_)})}),Object.entries(r).sort((i,a)=>a[1]-i[1]).slice(0,8).map(([i,a])=>({theme:i,count:a}))},e6=t=>{const e=t.split(/[.!?]+/).filter(n=>n.trim().length>10),r=[];if(e.forEach(n=>{const i=n.toLowerCase();(i.includes("key")||i.includes("important")||i.includes("main")||i.includes("significant")||i.includes("critical")||i.includes("primary")||i.includes("notable")||i.includes("essential")||i.includes("crucial")||i.includes("fundamental")||i.includes("major")||i.includes("core"))&&r.push(n.trim())}),r.length===0){const n=au(t),i=Object.entries(n).filter(([_])=>_.length>4).sort((_,N)=>N[1]-_[1]).slice(0,5).map(([_])=>_);i.length>0&&r.push(`The content heavily emphasizes ${i.slice(0,3).join(", ")}, suggesting these are central themes.`);const a=t.split(/\s+/).length/e.length;a>20?r.push("The content demonstrates sophisticated analytical depth with complex sentence structures and detailed explanations."):a<10&&r.push("The content uses concise, direct communication style for maximum clarity and accessibility."),/\d+/.test(t)&&r.push("The content includes quantitative data and specific measurements, enhancing credibility and precision."),t.toLowerCase().split(/\s+/).filter(_=>["excellent","great","good","bad","terrible","amazing","wonderful","awful","fantastic","horrible"].includes(_)).length>0&&r.push("The content contains emotional language, suggesting subjective viewpoints and personal perspectives.")}return r.slice(0,5)},t6=t=>{const e=t.split(/\s+/).filter(r=>r.length>0);return t.split(/[.!?]+/).filter(r=>r.trim().length>0),{length:e.length<100?"Short":e.length<500?"Medium":"Long",tone:r6(t),primaryTopic:o6(t),complexity:n6(t),readingLevel:i6(t),structure:a6(t)}},r6=t=>{const e=["good","great","excellent","positive","success","effective","beneficial","valuable","important","significant"],r=["bad","terrible","negative","problem","issue","failure","difficult","challenge","concern","risk"],n=["analysis","study","research","data","information","report","overview","summary","description","explanation"],i=t.toLowerCase().split(/\s+/),a=i.filter(_=>e.includes(_)).length,s=i.filter(_=>r.includes(_)).length,d=i.filter(_=>n.includes(_)).length;return a>s&&a>d?"Positive":s>a&&s>d?"Critical":d>a&&d>s?"Analytical":"Neutral"},n6=t=>{const e=t.split(/\s+/),r=t.split(/[.!?]+/).filter(s=>s.trim().length>0),n=e.length/r.length,a=e.filter(s=>s.length>7).length/e.length;return n>20&&a>.3?"High":n>15&&a>.2?"Medium":"Low"},i6=t=>{const e=t.split(/\s+/),r=t.split(/[.!?]+/).filter(i=>i.trim().length>0),n=e.length/r.length;return n>20?"Advanced":n>15?"Intermediate":"Basic"},a6=t=>{const e=/^\d+\./.test(t),r=t.includes("•")||t.includes("-"),n=/^[A-Z][^.!?]*$/m.test(t);return e?"Numbered List":r?"Bullet Points":n?"Structured Document":"Narrative"},s6=t=>{const e=t.split(/\n\s*\n/).filter(n=>n.trim().length>0),r=t.split(/[.!?]+/).filter(n=>n.trim().length>0);return{paragraphCount:e.length,sentenceCount:r.length,averageSentencesPerParagraph:Math.round(r.length/e.length),hasHeaders:/^[A-Z][^.!?]*$/.test(t),hasBulletPoints:t.includes("•")||t.includes("-")||t.includes("*"),hasNumbers:/\d+/.test(t)}},o6=t=>{const r=t.toLowerCase().split(/\s+/),n={};r.forEach(qe=>{qe.length>3&&(n[qe]=(n[qe]||0)+1)});const a=["business","sales","revenue","profit","market","customer","strategy","growth","investment","finance"].reduce((qe,ze)=>qe+(n[ze]||0),0),d=["technology","software","digital","computer","system","data","algorithm","programming","development","innovation"].reduce((qe,ze)=>qe+(n[ze]||0),0),N=["education","learning","student","teacher","study","research","knowledge","skill","training","academic"].reduce((qe,ze)=>qe+(n[ze]||0),0),ye=["health","medical","patient","treatment","diagnosis","therapy","medicine","doctor","hospital","care"].reduce((qe,ze)=>qe+(n[ze]||0),0),Ce=["science","research","experiment","hypothesis","theory","analysis","study","observation","method","result"].reduce((qe,ze)=>qe+(n[ze]||0),0);return Object.entries({"Business & Finance":a,"Technology & Innovation":d,"Education & Learning":N,"Health & Medicine":ye,"Science & Research":Ce}).reduce((qe,[ze,Oe])=>Oe>qe.score?{theme:ze,score:Oe}:qe,{theme:"General Discussion",score:0}).theme},l6=t=>{const e=t.reduce((n,i)=>n+i,0)/t.length,r=t.reduce((n,i)=>n+Math.pow(i-e,2),0)/t.length;return Math.sqrt(r).toFixed(1)},c6=t=>{const e=v3(t),r=(t.toLowerCase().match(/\b(this|that|these|those|it|they|them)\b/g)||[]).length,n=t.split(/[.!?]+/).filter(i=>i.trim().length>5).length;return Math.min(100,(e+r)/n*100).toFixed(1)},v3=t=>{const e=["however","therefore","furthermore","moreover","additionally","consequently","meanwhile","nevertheless","thus","hence"],r=t.toLowerCase();return e.reduce((n,i)=>n+(r.match(new RegExp(`\\b${i}\\b`,"g"))||[]).length,0)},u6=t=>t.includes("first")&&t.includes("second")?"Sequential":t.includes("problem")&&t.includes("solution")?"Problem-Solution":t.includes("compare")||t.includes("contrast")?"Compare-Contrast":t.includes("cause")||t.includes("effect")?"Cause-Effect":"General",Nv=(t,e)=>{const r=t.toLowerCase();return e.reduce((n,i)=>n+(r.match(new RegExp(`\\b${i}\\b`,"g"))||[]).length,0)},d6=t=>{const e=t.split(/[.!?]+/).filter(a=>a.trim().length>10),r=e.filter(a=>a.toLowerCase().includes("claim")||a.toLowerCase().includes("argue")).length,n=e.filter(a=>a.toLowerCase().includes("evidence")||a.toLowerCase().includes("proof")).length,i=e.filter(a=>a.toLowerCase().includes("because")||a.toLowerCase().includes("therefore")).length;return{claims:r,evidence:n,reasoning:i}},f6=t=>{const e=t.toLowerCase();return{statistics:(e.match(/\d+%|\d+\.\d+%/g)||[]).length,examples:(e.match(/\bexample\b|\binstance\b/g)||[]).length,quotes:(e.match(/"|'/g)||[]).length/2,research:(e.match(/\bresearch\b|\bstudy\b/g)||[]).length}},h6=t=>{const e=/\b(morning|afternoon|evening|night|today|tomorrow|yesterday|now|later|soon|recently|currently)\b/gi;return Array.from(t.matchAll(e)).map(r=>r[0]).slice(0,10)},p6=t=>{const e=["urgent","immediate","critical","must","asap"],r=["should","important","need"],n=t.toLowerCase();return e.some(i=>n.includes(i))?"High":r.some(i=>n.includes(i))?"Medium":"Low"},m6=t=>{const e=t.toLowerCase();return e.includes("meet")||e.includes("schedule")?"Meeting":e.includes("review")||e.includes("check")?"Review":e.includes("create")||e.includes("develop")?"Creation":e.includes("send")||e.includes("email")?"Communication":"Task"},au=t=>{const e=t.toLowerCase().split(/\s+/),r={},n=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","must","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them"]);return e.forEach(i=>{const a=i.replace(/[^\w]/g,"").toLowerCase();a.length>2&&!n.has(a)&&(r[a]=(r[a]||0)+1)}),r},v6=t=>{var Rt,wt,It,er,cr;const e=t.originalText?t.originalText.split("").reduce((Tr,xr)=>(Tr+xr.charCodeAt(0))%1e3,0):0;let r=0,n=0;const i=t.statistics.wordCount,a=e%20-10;i>100?r+=85+a:i>50?r+=70+a*.8:i>20?r+=55+a*.6:r+=40+a*.4,n++;const s=t.statistics.sentenceCount||1,d=i/s,_=e*3%15-7;d>=8&&d<=25?r+=80+_:d>=5&&d<=35?r+=65+_*.7:r+=45+_*.5,n++;const N=t.keywords?t.keywords.length:0,I=e*7%12-6;N>15?r+=90+I:N>8?r+=75+I*.8:N>3?r+=60+I*.6:r+=45+I*.4,n++;const ye=t.namedEntities||{},xe=(((Rt=ye.people)==null?void 0:Rt.length)||0)+(((wt=ye.organizations)==null?void 0:wt.length)||0)+(((It=ye.locations)==null?void 0:It.length)||0),Ce=e*11%10-5;xe>8?r+=85+Ce:xe>3?r+=70+Ce*.8:xe>0?r+=55+Ce*.6:r+=40+Ce*.4,n++;const Ve=((er=t.sentiment)==null?void 0:er.confidence)||.5,Ye=e*13%8-4;r+=Ve*80+Ye,n++;const qe=t.readabilityScore||50,ze=e*17%14-7;qe>70?r+=85+ze:qe>50?r+=70+ze*.8:qe>30?r+=55+ze*.6:r+=40+ze*.4,n++;const Oe=(((cr=t.originalText)==null?void 0:cr.match(/[.!?;:]/g))||[]).length,We=e*19%6-3,ot=Oe/Math.max(s,1);ot>=.8&&ot<=1.5?r+=75+We:ot>=.5&&ot<=2?r+=65+We*.8:r+=50+We*.5,n++;const st=Math.round(r/n);return Math.max(30,Math.min(95,st))},g6=t=>{var I,ye,xe,Ce,Ve,Ye,qe,ze,Oe,We,ot,st,Rt,wt,It,er,cr,Tr,xr,lt,gt,Ft,pt,Zt,Jt;console.log("Generating chart data for analysis:",t);const e=t.sentiment||{label:"Neutral",confidence:.5,score:0},r=t.keywords||[],n=t.topicDistribution||[],i=t.emotionAnalysis||[],a=t.questionAnalysis||{},s=t.linguisticAnalysis||{},d=t.timeAnalysis||{},_={positive:e.label==="Positive"?e.confidence*100:e.score>0?Math.abs(e.score)*50:20,negative:e.label==="Negative"?e.confidence*100:e.score<0?Math.abs(e.score)*50:15,neutral:e.label==="Neutral"?70:100-e.confidence*100},N=_.positive+_.negative+_.neutral;return _.positive=_.positive/N*100,_.negative=_.negative/N*100,_.neutral=_.neutral/N*100,{sentimentPieData:{labels:["Positive","Negative","Neutral"],datasets:[{data:[_.positive,_.negative,_.neutral],backgroundColor:["#4CAF50","#F44336","#FF9800"],borderColor:["#388E3C","#D32F2F","#F57C00"],borderWidth:2,hoverBackgroundColor:["#66BB6A","#EF5350","#FFB74D"],hoverBorderColor:["#2E7D32","#C62828","#E65100"],hoverBorderWidth:3}]},keywordsBarData:{labels:r.slice(0,8).map(lr=>lr.word||lr),datasets:[{label:"Frequency",data:r.slice(0,8).map(lr=>lr.count||1),backgroundColor:["#2196F3","#4CAF50","#FF9800","#9C27B0","#F44336","#00BCD4","#FFEB3B","#795548"],borderColor:["#1976D2","#388E3C","#F57C00","#7B1FA2","#D32F2F","#0097A7","#FBC02D","#5D4037"],borderWidth:1,hoverBackgroundColor:["#42A5F5","#66BB6A","#FFB74D","#BA68C8","#EF5350","#26C6DA","#FFF176","#8D6E63"]}]},topicDistributionData:{labels:n.length>0?n.slice(0,6).map(lr=>lr.topic||lr):["Technology","Communication","Analysis","Process","Data","Results"],datasets:[{data:n.length>0?n.slice(0,6).map(lr=>lr.count||1):[25,20,18,15,12,10],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40"],borderColor:["#FF4757","#2F80ED","#FFC048","#00D2D3","#8B5CF6","#FF6B35"],borderWidth:2,hoverBackgroundColor:["#FF7596","#4DABF7","#FFD93D","#6BCF7F","#A78BFA","#FF8A65"]}]},emotionsRadarData:{labels:i.length>0?i.map(lr=>lr.emotion||lr):["Joy","Trust","Surprise","Sadness","Fear","Anger"],datasets:[{label:"Emotional Intensity",data:i.length>0?i.map(lr=>(lr.count||1)*10):[40,35,25,15,10,8],backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",pointBackgroundColor:"rgba(54, 162, 235, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(54, 162, 235, 1)",pointRadius:6,pointHoverRadius:8,fill:!0}]},questionTypesData:{labels:["What","How","Why","When","Where","Who","Yes/No","Other"],datasets:[{data:[((I=a.questionTypes)==null?void 0:I.what)||0,((ye=a.questionTypes)==null?void 0:ye.how)||0,((xe=a.questionTypes)==null?void 0:xe.why)||0,((Ce=a.questionTypes)==null?void 0:Ce.when)||0,((Ve=a.questionTypes)==null?void 0:Ve.where)||0,((Ye=a.questionTypes)==null?void 0:Ye.who)||0,((qe=a.questionTypes)==null?void 0:qe.yesNo)||0,((ze=a.questionTypes)==null?void 0:ze.other)||0],backgroundColor:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F"],borderColor:["#FF5252","#26A69A","#2196F3","#81C784","#FFD54F","#CE93D8","#80CBC4","#F4D03F"],borderWidth:2}]},complexityData:{labels:["Simple","Moderate","Complex"],datasets:[{data:[((Oe=a.complexityLevels)==null?void 0:Oe.simple)||0,((We=a.complexityLevels)==null?void 0:We.moderate)||0,((ot=a.complexityLevels)==null?void 0:ot.complex)||0],backgroundColor:["#4CAF50","#FF9800","#F44336"],borderColor:["#388E3C","#F57C00","#D32F2F"],borderWidth:2}]},timeComplexityData:{datasets:[{label:"Content Analysis",data:[{x:((st=t.statistics)==null?void 0:st.readingTime)||0,y:t.readabilityScore||0,r:Math.sqrt((((Rt=t.statistics)==null?void 0:Rt.wordCount)||0)/10)}],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",pointHoverBackgroundColor:"rgba(255, 99, 132, 0.8)",pointHoverBorderColor:"rgba(255, 99, 132, 1)"}]},linguisticData:{labels:["Word Complexity","Sentence Variety","Vocabulary Richness","Readability"],datasets:[{label:"Linguistic Features",data:[parseFloat(s.vocabularyComplexity)||30,s.sentenceTypes?Object.keys(s.sentenceTypes).length*20:60,s.uniqueWords?Math.min(100,s.uniqueWords/(((wt=t.statistics)==null?void 0:wt.wordCount)||100)*100):40,t.readabilityScore||50],backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",pointBackgroundColor:"rgba(75, 192, 192, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(75, 192, 192, 1)",fill:!0}]},timeReferenceData:{labels:["Past","Present","Future"],datasets:[{data:[((It=d.timeOrientation)==null?void 0:It.past)||10,((er=d.timeOrientation)==null?void 0:er.present)||60,((cr=d.timeOrientation)==null?void 0:cr.future)||30],backgroundColor:["#8BC34A","#2196F3","#FF9800"],borderColor:["#689F38","#1976D2","#F57C00"],borderWidth:2}]},statisticsData:{wordCount:((Tr=t.statistics)==null?void 0:Tr.wordCount)||0,sentenceCount:((xr=t.statistics)==null?void 0:xr.sentenceCount)||0,readingTime:((lt=t.statistics)==null?void 0:lt.readingTime)||0,readabilityScore:Math.round(t.readabilityScore||0),sentimentScore:Math.round((((gt=t.sentiment)==null?void 0:gt.score)||0)*100),confidenceScore:v6(t),questionCount:a.totalQuestions||0,topicCount:n.length||0,emotionCount:i.length||0,complexityLevel:((pt=(Ft=t.contentAnalysis)==null?void 0:Ft.overview)==null?void 0:pt.complexity)||"Medium"},advancedMetrics:{contentDiversity:Math.min(100,(n.length||3)*20),emotionalRange:Math.min(100,(i.length||3)*15),questionComplexity:a.averageComplexity==="complex"?80:a.averageComplexity==="moderate"?60:40,linguisticRichness:s.uniqueWords?Math.min(100,s.uniqueWords/(((Zt=t.statistics)==null?void 0:Zt.wordCount)||100)*200):50,analyticalDepth:(Jt=t.insights)!=null&&Jt.length?t.insights.length*15:45}}},g3=t=>{const e=t.split(/[.!?]+/).filter(_=>_.trim().length>10),r=t.toLowerCase().split(/\s+/),n=au(t),i=e.filter(_=>{const N=_.toLowerCase();return N.includes("result")||N.includes("outcome")||N.includes("demonstrate")||N.includes("show")||N.includes("prove")||N.includes("indicate")||N.includes("significant")||N.includes("important")||N.includes("clear")||N.includes("evident")}),a=[],s=Object.entries(n).filter(([_])=>_.length>4).sort((_,N)=>N[1]-_[1]).slice(0,3).map(([_])=>_);return s.length>0&&a.push(`The discussion primarily focuses on ${s.join(", ")}, highlighting key themes throughout the content.`),r.length/e.length>15?a.push("The content demonstrates sophisticated language use with complex sentence structures, indicating detailed analysis."):a.push("The content uses clear, concise language making it accessible to a broad audience."),i.length>0&&a.push(i[0].trim()),a.length>0?a:["Analysis suggests comprehensive coverage of the topic with detailed explanations."]},y6=t=>{t.split(/[.!?]+/).filter(d=>d.trim().length>10);const e=t.toLowerCase().split(/\s+/),r=au(t),n=[],i=Object.entries(r).filter(([d])=>d.length>4).sort((d,_)=>_[1]-d[1]).slice(0,3).map(([d])=>d);return i.length>0&&(n.push(`What are the key implications of ${i[0]}?`),i.length>1&&n.push(`How does ${i[0]} relate to ${i[1]}?`)),e.filter(d=>d.includes("problem")||d.includes("issue")||d.includes("challenge")||d.includes("difficult")).length>0&&n.push("What solutions are proposed for the identified challenges?"),e.filter(d=>d.includes("process")||d.includes("method")||d.includes("approach")||d.includes("technique")).length>0&&n.push("What are the benefits and limitations of this approach?"),e.length>200&&n.push("What are the main takeaways from this detailed analysis?"),n.length>0?n:["What are the key points to remember from this content?"]};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function If(t){return t+.5|0}const Ql=(t,e,r)=>Math.max(Math.min(t,r),e);function Id(t){return Ql(If(t*2.55),0,255)}function uc(t){return Ql(If(t*255),0,255)}function bl(t){return Ql(If(t/2.55)/100,0,1)}function Tb(t){return Ql(If(t*100),0,100)}const xo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Zg=[..."0123456789ABCDEF"],x6=t=>Zg[t&15],b6=t=>Zg[(t&240)>>4]+Zg[t&15],Dh=t=>(t&240)>>4===(t&15),w6=t=>Dh(t.r)&&Dh(t.g)&&Dh(t.b)&&Dh(t.a);function _6(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&xo[t[1]]*17,g:255&xo[t[2]]*17,b:255&xo[t[3]]*17,a:e===5?xo[t[4]]*17:255}:(e===7||e===9)&&(r={r:xo[t[1]]<<4|xo[t[2]],g:xo[t[3]]<<4|xo[t[4]],b:xo[t[5]]<<4|xo[t[6]],a:e===9?xo[t[7]]<<4|xo[t[8]]:255})),r}const k6=(t,e)=>t<255?e(t):"";function S6(t){var e=w6(t)?x6:b6;return t?"#"+e(t.r)+e(t.g)+e(t.b)+k6(t.a,e):void 0}const M6=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function y3(t,e,r){const n=e*Math.min(r,1-r),i=(a,s=(a+t/30)%12)=>r-n*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function T6(t,e,r){const n=(i,a=(i+t/60)%6)=>r-r*e*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function A6(t,e,r){const n=y3(t,1,.5);let i;for(e+r>1&&(i=1/(e+r),e*=i,r*=i),i=0;i<3;i++)n[i]*=1-e-r,n[i]+=e;return n}function C6(t,e,r,n,i){return t===i?(e-r)/n+(e<r?6:0):e===i?(r-t)/n+2:(t-e)/n+4}function sy(t){const r=t.r/255,n=t.g/255,i=t.b/255,a=Math.max(r,n,i),s=Math.min(r,n,i),d=(a+s)/2;let _,N,I;return a!==s&&(I=a-s,N=d>.5?I/(2-a-s):I/(a+s),_=C6(r,n,i,I,a),_=_*60+.5),[_|0,N||0,d]}function oy(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(uc)}function ly(t,e,r){return oy(y3,t,e,r)}function j6(t,e,r){return oy(A6,t,e,r)}function E6(t,e,r){return oy(T6,t,e,r)}function x3(t){return(t%360+360)%360}function L6(t){const e=M6.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?Id(+e[5]):uc(+e[5]));const i=x3(+e[2]),a=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?n=j6(i,a,s):e[1]==="hsv"?n=E6(i,a,s):n=ly(i,a,s),{r:n[0],g:n[1],b:n[2],a:r}}function R6(t,e){var r=sy(t);r[0]=x3(r[0]+e),r=ly(r),t.r=r[0],t.g=r[1],t.b=r[2]}function D6(t){if(!t)return;const e=sy(t),r=e[0],n=Tb(e[1]),i=Tb(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${i}%, ${bl(t.a)})`:`hsl(${r}, ${n}%, ${i}%)`}const Ab={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Cb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function P6(){const t={},e=Object.keys(Cb),r=Object.keys(Ab);let n,i,a,s,d;for(n=0;n<e.length;n++){for(s=d=e[n],i=0;i<r.length;i++)a=r[i],d=d.replace(a,Ab[a]);a=parseInt(Cb[s],16),t[d]=[a>>16&255,a>>8&255,a&255]}return t}let Ph;function N6(t){Ph||(Ph=P6(),Ph.transparent=[0,0,0,0]);const e=Ph[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const z6=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function F6(t){const e=z6.exec(t);let r=255,n,i,a;if(e){if(e[7]!==n){const s=+e[7];r=e[8]?Id(s):Ql(s*255,0,255)}return n=+e[1],i=+e[3],a=+e[5],n=255&(e[2]?Id(n):Ql(n,0,255)),i=255&(e[4]?Id(i):Ql(i,0,255)),a=255&(e[6]?Id(a):Ql(a,0,255)),{r:n,g:i,b:a,a:r}}}function I6(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${bl(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const zv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Mu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function O6(t,e,r){const n=Mu(bl(t.r)),i=Mu(bl(t.g)),a=Mu(bl(t.b));return{r:uc(zv(n+r*(Mu(bl(e.r))-n))),g:uc(zv(i+r*(Mu(bl(e.g))-i))),b:uc(zv(a+r*(Mu(bl(e.b))-a))),a:t.a+r*(e.a-t.a)}}function Nh(t,e,r){if(t){let n=sy(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=ly(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function b3(t,e){return t&&Object.assign(e||{},t)}function jb(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=uc(t[3]))):(e=b3(t,{r:0,g:0,b:0,a:1}),e.a=uc(e.a)),e}function B6(t){return t.charAt(0)==="r"?F6(t):L6(t)}class Mf{constructor(e){if(e instanceof Mf)return e;const r=typeof e;let n;r==="object"?n=jb(e):r==="string"&&(n=_6(e)||N6(e)||B6(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=b3(this._rgb);return e&&(e.a=bl(e.a)),e}set rgb(e){this._rgb=jb(e)}rgbString(){return this._valid?I6(this._rgb):void 0}hexString(){return this._valid?S6(this._rgb):void 0}hslString(){return this._valid?D6(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,i=e.rgb;let a;const s=r===a?.5:r,d=2*s-1,_=n.a-i.a,N=((d*_===-1?d:(d+_)/(1+d*_))+1)/2;a=1-N,n.r=255&N*n.r+a*i.r+.5,n.g=255&N*n.g+a*i.g+.5,n.b=255&N*n.b+a*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=O6(this._rgb,e._rgb,r)),this}clone(){return new Mf(this.rgb)}alpha(e){return this._rgb.a=uc(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=If(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Nh(this._rgb,2,e),this}darken(e){return Nh(this._rgb,2,-e),this}saturate(e){return Nh(this._rgb,1,e),this}desaturate(e){return Nh(this._rgb,1,-e),this}rotate(e){return R6(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function pl(){}const H6=(()=>{let t=0;return()=>t++})();function mi(t){return t==null}function ya(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function yi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ea(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function no(t,e){return Ea(t)?t:e}function ii(t,e){return typeof t>"u"?e:t}const W6=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,w3=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ia(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function Ui(t,e,r,n){let i,a,s;if(ya(t))for(a=t.length,i=0;i<a;i++)e.call(r,t[i],i);else if(yi(t))for(s=Object.keys(t),a=s.length,i=0;i<a;i++)e.call(r,t[s[i]],s[i])}function Wp(t,e){let r,n,i,a;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(i=t[r],a=e[r],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function qp(t){if(ya(t))return t.map(qp);if(yi(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let i=0;for(;i<n;++i)e[r[i]]=qp(t[r[i]]);return e}return t}function _3(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function q6(t,e,r,n){if(!_3(t))return;const i=e[t],a=r[t];yi(i)&&yi(a)?Tf(i,a,n):e[t]=qp(a)}function Tf(t,e,r){const n=ya(e)?e:[e],i=n.length;if(!yi(t))return t;r=r||{};const a=r.merger||q6;let s;for(let d=0;d<i;++d){if(s=n[d],!yi(s))continue;const _=Object.keys(s);for(let N=0,I=_.length;N<I;++N)a(_[N],t,s,r)}return t}function rf(t,e){return Tf(t,e,{merger:V6})}function V6(t,e,r){if(!_3(t))return;const n=e[t],i=r[t];yi(n)&&yi(i)?rf(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=qp(i))}const Eb={"":t=>t,x:t=>t.x,y:t=>t.y};function U6(t){const e=t.split("."),r=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function $6(t){const e=U6(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function pc(t,e){return(Eb[e]||(Eb[e]=$6(e)))(t)}function cy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Af=t=>typeof t<"u",mc=t=>typeof t=="function",Lb=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function Y6(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Li=Math.PI,fa=2*Li,G6=fa+Li,Vp=Number.POSITIVE_INFINITY,X6=Li/180,Fa=Li/2,Dc=Li/4,Rb=Li*2/3,Jl=Math.log10,rl=Math.sign;function nf(t,e,r){return Math.abs(t-e)<r}function Db(t){const e=Math.round(t);t=nf(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(Jl(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function Z6(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((i,a)=>i-a).pop(),e}function Q6(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ku(t){return!Q6(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function J6(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function k3(t,e,r){let n,i,a;for(n=0,i=t.length;n<i;n++)a=t[n][r],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Fo(t){return t*(Li/180)}function uy(t){return t*(180/Li)}function Pb(t){if(!Ea(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function S3(t,e){const r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n);let a=Math.atan2(n,r);return a<-.5*Li&&(a+=fa),{angle:a,distance:i}}function Qg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function K6(t,e){return(t-e+G6)%fa-Li}function _s(t){return(t%fa+fa)%fa}function Cf(t,e,r,n){const i=_s(t),a=_s(e),s=_s(r),d=_s(a-i),_=_s(s-i),N=_s(i-a),I=_s(i-s);return i===a||i===s||n&&a===s||d>_&&N<I}function Ja(t,e,r){return Math.max(e,Math.min(r,t))}function e8(t){return Ja(t,-32768,32767)}function kl(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function dy(t,e,r){r=r||(s=>t[s]<e);let n=t.length-1,i=0,a;for(;n-i>1;)a=i+n>>1,r(a)?i=a:n=a;return{lo:i,hi:n}}const Sl=(t,e,r,n)=>dy(t,r,n?i=>{const a=t[i][e];return a<r||a===r&&t[i+1][e]===r}:i=>t[i][e]<r),t8=(t,e,r)=>dy(t,r,n=>t[n][e]>=r);function r8(t,e,r){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>r;)i--;return n>0||i<t.length?t.slice(n,i):t}const M3=["push","pop","shift","splice","unshift"];function n8(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),M3.forEach(r=>{const n="_onData"+cy(r),i=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...a){const s=i.apply(this,a);return t._chartjs.listeners.forEach(d=>{typeof d[n]=="function"&&d[n](...a)}),s}})})}function Nb(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(M3.forEach(a=>{delete t[a]}),delete t._chartjs)}function T3(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const A3=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function C3(t,e){let r=[],n=!1;return function(...i){r=i,n||(n=!0,A3.call(window,()=>{n=!1,t.apply(e,r)}))}}function i8(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const fy=t=>t==="start"?"left":t==="end"?"right":"center",ws=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,a8=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function j3(t,e,r){const n=e.length;let i=0,a=n;if(t._sorted){const{iScale:s,vScale:d,_parsed:_}=t,N=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,I=s.axis,{min:ye,max:xe,minDefined:Ce,maxDefined:Ve}=s.getUserBounds();if(Ce){if(i=Math.min(Sl(_,I,ye).lo,r?n:Sl(e,I,s.getPixelForValue(ye)).lo),N){const Ye=_.slice(0,i+1).reverse().findIndex(qe=>!mi(qe[d.axis]));i-=Math.max(0,Ye)}i=Ja(i,0,n-1)}if(Ve){let Ye=Math.max(Sl(_,s.axis,xe,!0).hi+1,r?0:Sl(e,I,s.getPixelForValue(xe),!0).hi+1);if(N){const qe=_.slice(Ye-1).findIndex(ze=>!mi(ze[d.axis]));Ye+=Math.max(0,qe)}a=Ja(Ye,i,n)-i}else a=n-i}return{start:i,count:a}}function E3(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=i,!0;const a=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,i),a}const zh=t=>t===0||t===1,zb=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*fa/r)),Fb=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*fa/r)+1,af={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Fa)+1,easeOutSine:t=>Math.sin(t*Fa),easeInOutSine:t=>-.5*(Math.cos(Li*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>zh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>zh(t)?t:zb(t,.075,.3),easeOutElastic:t=>zh(t)?t:Fb(t,.075,.3),easeInOutElastic(t){return zh(t)?t:t<.5?.5*zb(t*2,.1125,.45):.5+.5*Fb(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-af.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?af.easeInBounce(t*2)*.5:af.easeOutBounce(t*2-1)*.5+.5};function hy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ib(t){return hy(t)?t:new Mf(t)}function Fv(t){return hy(t)?t:new Mf(t).saturate(.5).darken(.1).hexString()}const s8=["x","y","borderWidth","radius","tension"],o8=["color","borderColor","backgroundColor"];function l8(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:o8},numbers:{type:"number",properties:s8}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function c8(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ob=new Map;function u8(t,e){e=e||{};const r=t+JSON.stringify(e);let n=Ob.get(r);return n||(n=new Intl.NumberFormat(t,e),Ob.set(r,n)),n}function Of(t,e,r){return u8(e,r).format(t)}const L3={values(t){return ya(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let i,a=t;if(r.length>1){const N=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(N<1e-4||N>1e15)&&(i="scientific"),a=d8(t,r)}const s=Jl(Math.abs(a)),d=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),_={notation:i,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(_,this.options.ticks.format),Of(t,n,_)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(Jl(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?L3.numeric.call(this,t,e,r):""}};function d8(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var hm={formatters:L3};function f8(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const tu=Object.create(null),Jg=Object.create(null);function sf(t,e){if(!e)return t;const r=e.split(".");for(let n=0,i=r.length;n<i;++n){const a=r[n];t=t[a]||(t[a]=Object.create(null))}return t}function Iv(t,e,r){return typeof e=="string"?Tf(sf(t,e),r):Tf(sf(t,""),e)}class h8{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Fv(i.backgroundColor),this.hoverBorderColor=(n,i)=>Fv(i.borderColor),this.hoverColor=(n,i)=>Fv(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return Iv(this,e,r)}get(e){return sf(this,e)}describe(e,r){return Iv(Jg,e,r)}override(e,r){return Iv(tu,e,r)}route(e,r,n,i){const a=sf(this,e),s=sf(this,n),d="_"+r;Object.defineProperties(a,{[d]:{value:a[r],writable:!0},[r]:{enumerable:!0,get(){const _=this[d],N=s[i];return yi(_)?Object.assign({},N,_):ii(_,N)},set(_){this[d]=_}}})}apply(e){e.forEach(r=>r(this))}}var xa=new h8({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[l8,c8,f8]);function p8(t){return!t||mi(t.size)||mi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Up(t,e,r,n,i){let a=e[i];return a||(a=e[i]=t.measureText(i).width,r.push(i)),a>n&&(n=a),n}function m8(t,e,r,n){n=n||{};let i=n.data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},a=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let s=0;const d=r.length;let _,N,I,ye,xe;for(_=0;_<d;_++)if(ye=r[_],ye!=null&&!ya(ye))s=Up(t,i,a,s,ye);else if(ya(ye))for(N=0,I=ye.length;N<I;N++)xe=ye[N],xe!=null&&!ya(xe)&&(s=Up(t,i,a,s,xe));t.restore();const Ce=a.length/2;if(Ce>r.length){for(_=0;_<Ce;_++)delete i[a[_]];a.splice(0,Ce)}return s}function Pc(t,e,r){const n=t.currentDevicePixelRatio,i=r!==0?Math.max(r/2,.5):0;return Math.round((e-i)*n)/n+i}function Bb(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Kg(t,e,r,n){R3(t,e,r,n,null)}function R3(t,e,r,n,i){let a,s,d,_,N,I,ye,xe;const Ce=e.pointStyle,Ve=e.rotation,Ye=e.radius;let qe=(Ve||0)*X6;if(Ce&&typeof Ce=="object"&&(a=Ce.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(qe),t.drawImage(Ce,-Ce.width/2,-Ce.height/2,Ce.width,Ce.height),t.restore();return}if(!(isNaN(Ye)||Ye<=0)){switch(t.beginPath(),Ce){default:i?t.ellipse(r,n,i/2,Ye,0,0,fa):t.arc(r,n,Ye,0,fa),t.closePath();break;case"triangle":I=i?i/2:Ye,t.moveTo(r+Math.sin(qe)*I,n-Math.cos(qe)*Ye),qe+=Rb,t.lineTo(r+Math.sin(qe)*I,n-Math.cos(qe)*Ye),qe+=Rb,t.lineTo(r+Math.sin(qe)*I,n-Math.cos(qe)*Ye),t.closePath();break;case"rectRounded":N=Ye*.516,_=Ye-N,s=Math.cos(qe+Dc)*_,ye=Math.cos(qe+Dc)*(i?i/2-N:_),d=Math.sin(qe+Dc)*_,xe=Math.sin(qe+Dc)*(i?i/2-N:_),t.arc(r-ye,n-d,N,qe-Li,qe-Fa),t.arc(r+xe,n-s,N,qe-Fa,qe),t.arc(r+ye,n+d,N,qe,qe+Fa),t.arc(r-xe,n+s,N,qe+Fa,qe+Li),t.closePath();break;case"rect":if(!Ve){_=Math.SQRT1_2*Ye,I=i?i/2:_,t.rect(r-I,n-_,2*I,2*_);break}qe+=Dc;case"rectRot":ye=Math.cos(qe)*(i?i/2:Ye),s=Math.cos(qe)*Ye,d=Math.sin(qe)*Ye,xe=Math.sin(qe)*(i?i/2:Ye),t.moveTo(r-ye,n-d),t.lineTo(r+xe,n-s),t.lineTo(r+ye,n+d),t.lineTo(r-xe,n+s),t.closePath();break;case"crossRot":qe+=Dc;case"cross":ye=Math.cos(qe)*(i?i/2:Ye),s=Math.cos(qe)*Ye,d=Math.sin(qe)*Ye,xe=Math.sin(qe)*(i?i/2:Ye),t.moveTo(r-ye,n-d),t.lineTo(r+ye,n+d),t.moveTo(r+xe,n-s),t.lineTo(r-xe,n+s);break;case"star":ye=Math.cos(qe)*(i?i/2:Ye),s=Math.cos(qe)*Ye,d=Math.sin(qe)*Ye,xe=Math.sin(qe)*(i?i/2:Ye),t.moveTo(r-ye,n-d),t.lineTo(r+ye,n+d),t.moveTo(r+xe,n-s),t.lineTo(r-xe,n+s),qe+=Dc,ye=Math.cos(qe)*(i?i/2:Ye),s=Math.cos(qe)*Ye,d=Math.sin(qe)*Ye,xe=Math.sin(qe)*(i?i/2:Ye),t.moveTo(r-ye,n-d),t.lineTo(r+ye,n+d),t.moveTo(r+xe,n-s),t.lineTo(r-xe,n+s);break;case"line":s=i?i/2:Math.cos(qe)*Ye,d=Math.sin(qe)*Ye,t.moveTo(r-s,n-d),t.lineTo(r+s,n+d);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(qe)*(i?i/2:Ye),n+Math.sin(qe)*Ye);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ml(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function pm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function mm(t){t.restore()}function v8(t,e,r,n,i){if(!e)return t.lineTo(r.x,r.y);if(i==="middle"){const a=(e.x+r.x)/2;t.lineTo(a,e.y),t.lineTo(a,r.y)}else i==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function g8(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function y8(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),mi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function x8(t,e,r,n,i){if(i.strikethrough||i.underline){const a=t.measureText(n),s=e-a.actualBoundingBoxLeft,d=e+a.actualBoundingBoxRight,_=r-a.actualBoundingBoxAscent,N=r+a.actualBoundingBoxDescent,I=i.strikethrough?(_+N)/2:N;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(s,I),t.lineTo(d,I),t.stroke()}}function b8(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function ru(t,e,r,n,i,a={}){const s=ya(e)?e:[e],d=a.strokeWidth>0&&a.strokeColor!=="";let _,N;for(t.save(),t.font=i.string,y8(t,a),_=0;_<s.length;++_)N=s[_],a.backdrop&&b8(t,a.backdrop),d&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),mi(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(N,r,n,a.maxWidth)),t.fillText(N,r,n,a.maxWidth),x8(t,r,n,N,a),n+=Number(i.lineHeight);t.restore()}function jf(t,e){const{x:r,y:n,w:i,h:a,radius:s}=e;t.arc(r+s.topLeft,n+s.topLeft,s.topLeft,1.5*Li,Li,!0),t.lineTo(r,n+a-s.bottomLeft),t.arc(r+s.bottomLeft,n+a-s.bottomLeft,s.bottomLeft,Li,Fa,!0),t.lineTo(r+i-s.bottomRight,n+a),t.arc(r+i-s.bottomRight,n+a-s.bottomRight,s.bottomRight,Fa,0,!0),t.lineTo(r+i,n+s.topRight),t.arc(r+i-s.topRight,n+s.topRight,s.topRight,0,-Fa,!0),t.lineTo(r+s.topLeft,n)}const w8=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_8=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function k8(t,e){const r=(""+t).match(w8);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const S8=t=>+t||0;function py(t,e){const r={},n=yi(e),i=n?Object.keys(e):e,a=yi(t)?n?s=>ii(t[s],t[e[s]]):s=>t[s]:()=>t;for(const s of i)r[s]=S8(a(s));return r}function D3(t){return py(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Gc(t){return py(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ts(t){const e=D3(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ua(t,e){t=t||{},e=e||xa.font;let r=ii(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=ii(t.style,e.style);n&&!(""+n).match(_8)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:ii(t.family,e.family),lineHeight:k8(ii(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:ii(t.weight,e.weight),string:""};return i.string=p8(i),i}function Od(t,e,r,n){let i,a,s;for(i=0,a=t.length;i<a;++i)if(s=t[i],s!==void 0&&s!==void 0)return s}function M8(t,e,r){const{min:n,max:i}=t,a=w3(e,(i-n)/2),s=(d,_)=>r&&d===0?0:d+_;return{min:s(n,-Math.abs(a)),max:s(i,a)}}function xc(t,e){return Object.assign(Object.create(t),e)}function my(t,e=[""],r,n,i=()=>t[0]){const a=r||t;typeof n>"u"&&(n=F3("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:n,_getTarget:i,override:d=>my([d,...t],e,a,n)};return new Proxy(s,{deleteProperty(d,_){return delete d[_],delete d._keys,delete t[0][_],!0},get(d,_){return N3(d,_,()=>D8(_,e,t,d))},getOwnPropertyDescriptor(d,_){return Reflect.getOwnPropertyDescriptor(d._scopes[0],_)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(d,_){return Wb(d).includes(_)},ownKeys(d){return Wb(d)},set(d,_,N){const I=d._storage||(d._storage=i());return d[_]=I[_]=N,delete d._keys,!0}})}function ed(t,e,r,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:P3(t,n),setContext:a=>ed(t,a,r,n),override:a=>ed(t.override(a),e,r,n)};return new Proxy(i,{deleteProperty(a,s){return delete a[s],delete t[s],!0},get(a,s,d){return N3(a,s,()=>A8(a,s,d))},getOwnPropertyDescriptor(a,s){return a._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(a,s,d){return t[s]=d,delete a[s],!0}})}function P3(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:r,indexable:n,isScriptable:mc(r)?r:()=>r,isIndexable:mc(n)?n:()=>n}}const T8=(t,e)=>t?t+cy(e):e,vy=(t,e)=>yi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function N3(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function A8(t,e,r){const{_proxy:n,_context:i,_subProxy:a,_descriptors:s}=t;let d=n[e];return mc(d)&&s.isScriptable(e)&&(d=C8(e,d,t,r)),ya(d)&&d.length&&(d=j8(e,d,t,s.isIndexable)),vy(e,d)&&(d=ed(d,i,a&&a[e],s)),d}function C8(t,e,r,n){const{_proxy:i,_context:a,_subProxy:s,_stack:d}=r;if(d.has(t))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+t);d.add(t);let _=e(a,s||n);return d.delete(t),vy(t,_)&&(_=gy(i._scopes,i,t,_)),_}function j8(t,e,r,n){const{_proxy:i,_context:a,_subProxy:s,_descriptors:d}=r;if(typeof a.index<"u"&&n(t))return e[a.index%e.length];if(yi(e[0])){const _=e,N=i._scopes.filter(I=>I!==_);e=[];for(const I of _){const ye=gy(N,i,t,I);e.push(ed(ye,a,s&&s[t],d))}}return e}function z3(t,e,r){return mc(t)?t(e,r):t}const E8=(t,e)=>t===!0?e:typeof t=="string"?pc(e,t):void 0;function L8(t,e,r,n,i){for(const a of e){const s=E8(r,a);if(s){t.add(s);const d=z3(s._fallback,r,i);if(typeof d<"u"&&d!==r&&d!==n)return d}else if(s===!1&&typeof n<"u"&&r!==n)return null}return!1}function gy(t,e,r,n){const i=e._rootScopes,a=z3(e._fallback,r,n),s=[...t,...i],d=new Set;d.add(n);let _=Hb(d,s,r,a||r,n);return _===null||typeof a<"u"&&a!==r&&(_=Hb(d,s,a,_,n),_===null)?!1:my(Array.from(d),[""],i,a,()=>R8(e,r,n))}function Hb(t,e,r,n,i){for(;r;)r=L8(t,e,r,n,i);return r}function R8(t,e,r){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return ya(i)&&yi(r)?r:i||{}}function D8(t,e,r,n){let i;for(const a of e)if(i=F3(T8(a,t),r),typeof i<"u")return vy(t,i)?gy(r,n,t,i):i}function F3(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function Wb(t){let e=t._keys;return e||(e=t._keys=P8(t._scopes)),e}function P8(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function I3(t,e,r,n){const{iScale:i}=t,{key:a="r"}=this._parsing,s=new Array(n);let d,_,N,I;for(d=0,_=n;d<_;++d)N=d+r,I=e[N],s[d]={r:i.parse(pc(I,a),N)};return s}const N8=Number.EPSILON||1e-14,td=(t,e)=>e<t.length&&!t[e].skip&&t[e],O3=t=>t==="x"?"y":"x";function z8(t,e,r,n){const i=t.skip?e:t,a=e,s=r.skip?e:r,d=Qg(a,i),_=Qg(s,a);let N=d/(d+_),I=_/(d+_);N=isNaN(N)?0:N,I=isNaN(I)?0:I;const ye=n*N,xe=n*I;return{previous:{x:a.x-ye*(s.x-i.x),y:a.y-ye*(s.y-i.y)},next:{x:a.x+xe*(s.x-i.x),y:a.y+xe*(s.y-i.y)}}}function F8(t,e,r){const n=t.length;let i,a,s,d,_,N=td(t,0);for(let I=0;I<n-1;++I)if(_=N,N=td(t,I+1),!(!_||!N)){if(nf(e[I],0,N8)){r[I]=r[I+1]=0;continue}i=r[I]/e[I],a=r[I+1]/e[I],d=Math.pow(i,2)+Math.pow(a,2),!(d<=9)&&(s=3/Math.sqrt(d),r[I]=i*s*e[I],r[I+1]=a*s*e[I])}}function I8(t,e,r="x"){const n=O3(r),i=t.length;let a,s,d,_=td(t,0);for(let N=0;N<i;++N){if(s=d,d=_,_=td(t,N+1),!d)continue;const I=d[r],ye=d[n];s&&(a=(I-s[r])/3,d[`cp1${r}`]=I-a,d[`cp1${n}`]=ye-a*e[N]),_&&(a=(_[r]-I)/3,d[`cp2${r}`]=I+a,d[`cp2${n}`]=ye+a*e[N])}}function O8(t,e="x"){const r=O3(e),n=t.length,i=Array(n).fill(0),a=Array(n);let s,d,_,N=td(t,0);for(s=0;s<n;++s)if(d=_,_=N,N=td(t,s+1),!!_){if(N){const I=N[e]-_[e];i[s]=I!==0?(N[r]-_[r])/I:0}a[s]=d?N?rl(i[s-1])!==rl(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}F8(t,i,a),I8(t,a,e)}function Fh(t,e,r){return Math.max(Math.min(t,r),e)}function B8(t,e){let r,n,i,a,s,d=Ml(t[0],e);for(r=0,n=t.length;r<n;++r)s=a,a=d,d=r<n-1&&Ml(t[r+1],e),a&&(i=t[r],s&&(i.cp1x=Fh(i.cp1x,e.left,e.right),i.cp1y=Fh(i.cp1y,e.top,e.bottom)),d&&(i.cp2x=Fh(i.cp2x,e.left,e.right),i.cp2y=Fh(i.cp2y,e.top,e.bottom)))}function H8(t,e,r,n,i){let a,s,d,_;if(e.spanGaps&&(t=t.filter(N=>!N.skip)),e.cubicInterpolationMode==="monotone")O8(t,i);else{let N=n?t[t.length-1]:t[0];for(a=0,s=t.length;a<s;++a)d=t[a],_=z8(N,d,t[Math.min(a+1,s-(n?0:1))%s],e.tension),d.cp1x=_.previous.x,d.cp1y=_.previous.y,d.cp2x=_.next.x,d.cp2y=_.next.y,N=d}e.capBezierPoints&&B8(t,r)}function yy(){return typeof window<"u"&&typeof document<"u"}function xy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function $p(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const vm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function W8(t,e){return vm(t).getPropertyValue(e)}const q8=["top","right","bottom","left"];function Xc(t,e,r){const n={};r=r?"-"+r:"";for(let i=0;i<4;i++){const a=q8[i];n[a]=parseFloat(t[e+"-"+a+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const V8=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function U8(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:i,offsetY:a}=n;let s=!1,d,_;if(V8(i,a,t.target))d=i,_=a;else{const N=e.getBoundingClientRect();d=n.clientX-N.left,_=n.clientY-N.top,s=!0}return{x:d,y:_,box:s}}function Oc(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,i=vm(r),a=i.boxSizing==="border-box",s=Xc(i,"padding"),d=Xc(i,"border","width"),{x:_,y:N,box:I}=U8(t,r),ye=s.left+(I&&d.left),xe=s.top+(I&&d.top);let{width:Ce,height:Ve}=e;return a&&(Ce-=s.width+d.width,Ve-=s.height+d.height),{x:Math.round((_-ye)/Ce*r.width/n),y:Math.round((N-xe)/Ve*r.height/n)}}function $8(t,e,r){let n,i;if(e===void 0||r===void 0){const a=t&&xy(t);if(!a)e=t.clientWidth,r=t.clientHeight;else{const s=a.getBoundingClientRect(),d=vm(a),_=Xc(d,"border","width"),N=Xc(d,"padding");e=s.width-N.width-_.width,r=s.height-N.height-_.height,n=$p(d.maxWidth,a,"clientWidth"),i=$p(d.maxHeight,a,"clientHeight")}}return{width:e,height:r,maxWidth:n||Vp,maxHeight:i||Vp}}const Ih=t=>Math.round(t*10)/10;function Y8(t,e,r,n){const i=vm(t),a=Xc(i,"margin"),s=$p(i.maxWidth,t,"clientWidth")||Vp,d=$p(i.maxHeight,t,"clientHeight")||Vp,_=$8(t,e,r);let{width:N,height:I}=_;if(i.boxSizing==="content-box"){const xe=Xc(i,"border","width"),Ce=Xc(i,"padding");N-=Ce.width+xe.width,I-=Ce.height+xe.height}return N=Math.max(0,N-a.width),I=Math.max(0,n?N/n:I-a.height),N=Ih(Math.min(N,s,_.maxWidth)),I=Ih(Math.min(I,d,_.maxHeight)),N&&!I&&(I=Ih(N/2)),(e!==void 0||r!==void 0)&&n&&_.height&&I>_.height&&(I=_.height,N=Ih(Math.floor(I*n))),{width:N,height:I}}function qb(t,e,r){const n=e||1,i=Math.floor(t.height*n),a=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(r||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||s.height!==i||s.width!==a?(t.currentDevicePixelRatio=n,s.height=i,s.width=a,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const G8=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};yy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Vb(t,e){const r=W8(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Bc(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function X8(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function Z8(t,e,r,n){const i={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},s=Bc(t,i,r),d=Bc(i,a,r),_=Bc(a,e,r),N=Bc(s,d,r),I=Bc(d,_,r);return Bc(N,I,r)}const Q8=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},J8=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Uu(t,e,r){return t?Q8(e,r):J8()}function B3(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function H3(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function W3(t){return t==="angle"?{between:Cf,compare:K6,normalize:_s}:{between:kl,compare:(e,r)=>e-r,normalize:e=>e}}function Ub({start:t,end:e,count:r,loop:n,style:i}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:i}}function K8(t,e,r){const{property:n,start:i,end:a}=r,{between:s,normalize:d}=W3(n),_=e.length;let{start:N,end:I,loop:ye}=t,xe,Ce;if(ye){for(N+=_,I+=_,xe=0,Ce=_;xe<Ce&&s(d(e[N%_][n]),i,a);++xe)N--,I--;N%=_,I%=_}return I<N&&(I+=_),{start:N,end:I,loop:ye,style:t.style}}function q3(t,e,r){if(!r)return[t];const{property:n,start:i,end:a}=r,s=e.length,{compare:d,between:_,normalize:N}=W3(n),{start:I,end:ye,loop:xe,style:Ce}=K8(t,e,r),Ve=[];let Ye=!1,qe=null,ze,Oe,We;const ot=()=>_(i,We,ze)&&d(i,We)!==0,st=()=>d(a,ze)===0||_(a,We,ze),Rt=()=>Ye||ot(),wt=()=>!Ye||st();for(let It=I,er=I;It<=ye;++It)Oe=e[It%s],!Oe.skip&&(ze=N(Oe[n]),ze!==We&&(Ye=_(ze,i,a),qe===null&&Rt()&&(qe=d(ze,i)===0?It:er),qe!==null&&wt()&&(Ve.push(Ub({start:qe,end:It,loop:xe,count:s,style:Ce})),qe=null),er=It,We=ze));return qe!==null&&Ve.push(Ub({start:qe,end:ye,loop:xe,count:s,style:Ce})),Ve}function V3(t,e){const r=[],n=t.segments;for(let i=0;i<n.length;i++){const a=q3(n[i],t.points,e);a.length&&r.push(...a)}return r}function ej(t,e,r,n){let i=0,a=e-1;if(r&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,r&&(a+=i);a>i&&t[a%e].skip;)a--;return a%=e,{start:i,end:a}}function tj(t,e,r,n){const i=t.length,a=[];let s=e,d=t[e],_;for(_=e+1;_<=r;++_){const N=t[_%i];N.skip||N.stop?d.skip||(n=!1,a.push({start:e%i,end:(_-1)%i,loop:n}),e=s=N.stop?_:null):(s=_,d.skip&&(e=_)),d=N}return s!==null&&a.push({start:e%i,end:s%i,loop:n}),a}function rj(t,e){const r=t.points,n=t.options.spanGaps,i=r.length;if(!i)return[];const a=!!t._loop,{start:s,end:d}=ej(r,i,a,n);if(n===!0)return $b(t,[{start:s,end:d,loop:a}],r,e);const _=d<s?d+i:d,N=!!t._fullLoop&&s===0&&d===i-1;return $b(t,tj(r,s,_,N),r,e)}function $b(t,e,r,n){return!n||!n.setContext||!r?e:nj(t,e,r,n)}function nj(t,e,r,n){const i=t._chart.getContext(),a=Yb(t.options),{_datasetIndex:s,options:{spanGaps:d}}=t,_=r.length,N=[];let I=a,ye=e[0].start,xe=ye;function Ce(Ve,Ye,qe,ze){const Oe=d?-1:1;if(Ve!==Ye){for(Ve+=_;r[Ve%_].skip;)Ve-=Oe;for(;r[Ye%_].skip;)Ye+=Oe;Ve%_!==Ye%_&&(N.push({start:Ve%_,end:Ye%_,loop:qe,style:ze}),I=ze,ye=Ye%_)}}for(const Ve of e){ye=d?ye:Ve.start;let Ye=r[ye%_],qe;for(xe=ye+1;xe<=Ve.end;xe++){const ze=r[xe%_];qe=Yb(n.setContext(xc(i,{type:"segment",p0:Ye,p1:ze,p0DataIndex:(xe-1)%_,p1DataIndex:xe%_,datasetIndex:s}))),ij(qe,I)&&Ce(ye,xe-1,Ve.loop,I),Ye=ze,I=qe}ye<xe-1&&Ce(ye,xe-1,Ve.loop,I)}return N}function Yb(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function ij(t,e){if(!e)return!1;const r=[],n=function(i,a){return hy(a)?(r.includes(a)||r.push(a),r.indexOf(a)):a};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Oh(t,e,r){return t.options.clip?t[r]:e[r]}function aj(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:Oh(r,e,"left"),right:Oh(r,e,"right"),top:Oh(n,e,"top"),bottom:Oh(n,e,"bottom")}:e}function U3(t,e){const r=e._clip;if(r.disabled)return!1;const n=aj(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class sj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,i){const a=r.listeners[i],s=r.duration;a.forEach(d=>d({chart:e,initial:r.initial,numSteps:s,currentStep:Math.min(n-r.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=A3.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const a=n.items;let s=a.length-1,d=!1,_;for(;s>=0;--s)_=a[s],_._active?(_._total>n.duration&&(n.duration=_._total),_.tick(e),d=!0):(a[s]=a[a.length-1],a.pop());d&&(i.draw(),this._notify(i,n,e,"progress")),a.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),r+=a.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var vl=new sj;const Gb="transparent",oj={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=Ib(t||Gb),i=n.valid&&Ib(e||Gb);return i&&i.valid?i.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class lj{constructor(e,r,n,i){const a=r[n];i=Od([e.to,i,a,e.from]);const s=Od([e.from,a,i]);this._active=!0,this._fn=e.fn||oj[e.type||typeof s],this._easing=af[e.easing]||af.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const i=this._target[this._prop],a=n-this._start,s=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Od([e.to,r,i,e.from]),this._from=Od([e.from,i,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,i=this._prop,a=this._from,s=this._loop,d=this._to;let _;if(this._active=a!==d&&(s||r<n),!this._active){this._target[i]=d,this._notify(!0);return}if(r<0){this._target[i]=a;return}_=r/n%2,_=s&&_>1?2-_:_,_=this._easing(Math.min(1,Math.max(0,_))),this._target[i]=this._fn(a,d,_)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][r]()}}class $3{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!yi(e))return;const r=Object.keys(xa.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!yi(a))return;const s={};for(const d of r)s[d]=a[d];(ya(a.properties)&&a.properties||[i]).forEach(d=>{(d===i||!n.has(d))&&n.set(d,s)})})}_animateOptions(e,r){const n=r.options,i=uj(e,n);if(!i)return[];const a=this._createAnimations(i,n);return n.$shared&&cj(e.options.$animations,n).then(()=>{e.options=n},()=>{}),a}_createAnimations(e,r){const n=this._properties,i=[],a=e.$animations||(e.$animations={}),s=Object.keys(r),d=Date.now();let _;for(_=s.length-1;_>=0;--_){const N=s[_];if(N.charAt(0)==="$")continue;if(N==="options"){i.push(...this._animateOptions(e,r));continue}const I=r[N];let ye=a[N];const xe=n.get(N);if(ye)if(xe&&ye.active()){ye.update(xe,I,d);continue}else ye.cancel();if(!xe||!xe.duration){e[N]=I;continue}a[N]=ye=new lj(xe,e,N,I),i.push(ye)}return i}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return vl.add(this._chart,n),!0}}function cj(t,e){const r=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const a=t[n[i]];a&&a.active()&&r.push(a.wait())}return Promise.all(r)}function uj(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function Xb(t,e){const r=t&&t.options||{},n=r.reverse,i=r.min===void 0?e:0,a=r.max===void 0?e:0;return{start:n?a:i,end:n?i:a}}function dj(t,e,r){if(r===!1)return!1;const n=Xb(t,r),i=Xb(e,r);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function fj(t){let e,r,n,i;return yi(t)?(e=t.top,r=t.right,n=t.bottom,i=t.left):e=r=n=i=t,{top:e,right:r,bottom:n,left:i,disabled:t===!1}}function Y3(t,e){const r=[],n=t._getSortedDatasetMetas(e);let i,a;for(i=0,a=n.length;i<a;++i)r.push(n[i].index);return r}function Zb(t,e,r,n={}){const i=t.keys,a=n.mode==="single";let s,d,_,N;if(e===null)return;let I=!1;for(s=0,d=i.length;s<d;++s){if(_=+i[s],_===r){if(I=!0,n.all)continue;break}N=t.values[_],Ea(N)&&(a||e===0||rl(e)===rl(N))&&(e+=N)}return!I&&!n.all?0:e}function hj(t,e){const{iScale:r,vScale:n}=e,i=r.axis==="x"?"x":"y",a=n.axis==="x"?"x":"y",s=Object.keys(t),d=new Array(s.length);let _,N,I;for(_=0,N=s.length;_<N;++_)I=s[_],d[_]={[i]:I,[a]:t[I]};return d}function Ov(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function pj(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function mj(t){const{min:e,max:r,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}function vj(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function Qb(t,e,r,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const a=t[i.index];if(r&&a>0||!r&&a<0)return i.index}return null}function Jb(t,e){const{chart:r,_cachedMeta:n}=t,i=r._stacks||(r._stacks={}),{iScale:a,vScale:s,index:d}=n,_=a.axis,N=s.axis,I=pj(a,s,n),ye=e.length;let xe;for(let Ce=0;Ce<ye;++Ce){const Ve=e[Ce],{[_]:Ye,[N]:qe}=Ve,ze=Ve._stacks||(Ve._stacks={});xe=ze[N]=vj(i,I,Ye),xe[d]=qe,xe._top=Qb(xe,s,!0,n.type),xe._bottom=Qb(xe,s,!1,n.type);const Oe=xe._visualValues||(xe._visualValues={});Oe[d]=qe}}function Bv(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function gj(t,e){return xc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yj(t,e,r){return xc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Cd(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const a=i._stacks;if(!a||a[n]===void 0||a[n][r]===void 0)return;delete a[n][r],a[n]._visualValues!==void 0&&a[n]._visualValues[r]!==void 0&&delete a[n]._visualValues[r]}}}const Hv=t=>t==="reset"||t==="none",Kb=(t,e)=>e?t:Object.assign({},t),xj=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:Y3(r,!0),values:null};class Bo{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ov(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Cd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),i=(ye,xe,Ce,Ve)=>ye==="x"?xe:ye==="r"?Ve:Ce,a=r.xAxisID=ii(n.xAxisID,Bv(e,"x")),s=r.yAxisID=ii(n.yAxisID,Bv(e,"y")),d=r.rAxisID=ii(n.rAxisID,Bv(e,"r")),_=r.indexAxis,N=r.iAxisID=i(_,a,s,d),I=r.vAxisID=i(_,s,a,d);r.xScale=this.getScaleForId(a),r.yScale=this.getScaleForId(s),r.rScale=this.getScaleForId(d),r.iScale=this.getScaleForId(N),r.vScale=this.getScaleForId(I)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Nb(this._data,this),e._stacked&&Cd(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(yi(r)){const i=this._cachedMeta;this._data=hj(r,i)}else if(n!==r){if(n){Nb(n,this);const i=this._cachedMeta;Cd(i),i._parsed=[]}r&&Object.isExtensible(r)&&n8(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const a=r._stacked;r._stacked=Ov(r.vScale,r),r.stack!==n.stack&&(i=!0,Cd(r),r.stack=n.stack),this._resyncElements(e),(i||a!==r._stacked)&&(Jb(this,r._parsed),r._stacked=Ov(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:i}=this,{iScale:a,_stacked:s}=n,d=a.axis;let _=e===0&&r===i.length?!0:n._sorted,N=e>0&&n._parsed[e-1],I,ye,xe;if(this._parsing===!1)n._parsed=i,n._sorted=!0,xe=i;else{ya(i[e])?xe=this.parseArrayData(n,i,e,r):yi(i[e])?xe=this.parseObjectData(n,i,e,r):xe=this.parsePrimitiveData(n,i,e,r);const Ce=()=>ye[d]===null||N&&ye[d]<N[d];for(I=0;I<r;++I)n._parsed[I+e]=ye=xe[I],_&&(Ce()&&(_=!1),N=ye);n._sorted=_}s&&Jb(this,xe)}parsePrimitiveData(e,r,n,i){const{iScale:a,vScale:s}=e,d=a.axis,_=s.axis,N=a.getLabels(),I=a===s,ye=new Array(i);let xe,Ce,Ve;for(xe=0,Ce=i;xe<Ce;++xe)Ve=xe+n,ye[xe]={[d]:I||a.parse(N[Ve],Ve),[_]:s.parse(r[Ve],Ve)};return ye}parseArrayData(e,r,n,i){const{xScale:a,yScale:s}=e,d=new Array(i);let _,N,I,ye;for(_=0,N=i;_<N;++_)I=_+n,ye=r[I],d[_]={x:a.parse(ye[0],I),y:s.parse(ye[1],I)};return d}parseObjectData(e,r,n,i){const{xScale:a,yScale:s}=e,{xAxisKey:d="x",yAxisKey:_="y"}=this._parsing,N=new Array(i);let I,ye,xe,Ce;for(I=0,ye=i;I<ye;++I)xe=I+n,Ce=r[xe],N[I]={x:a.parse(pc(Ce,d),xe),y:s.parse(pc(Ce,_),xe)};return N}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const i=this.chart,a=this._cachedMeta,s=r[e.axis],d={keys:Y3(i,!0),values:r._stacks[e.axis]._visualValues};return Zb(d,s,a.index,{mode:n})}updateRangeFromParsed(e,r,n,i){const a=n[r.axis];let s=a===null?NaN:a;const d=i&&n._stacks[r.axis];i&&d&&(i.values=d,s=Zb(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,r){const n=this._cachedMeta,i=n._parsed,a=n._sorted&&e===n.iScale,s=i.length,d=this._getOtherScale(e),_=xj(r,n,this.chart),N={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:I,max:ye}=mj(d);let xe,Ce;function Ve(){Ce=i[xe];const Ye=Ce[d.axis];return!Ea(Ce[e.axis])||I>Ye||ye<Ye}for(xe=0;xe<s&&!(!Ve()&&(this.updateRangeFromParsed(N,e,Ce,_),a));++xe);if(a){for(xe=s-1;xe>=0;--xe)if(!Ve()){this.updateRangeFromParsed(N,e,Ce,_);break}}return N}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let i,a,s;for(i=0,a=r.length;i<a;++i)s=r[i][e.axis],Ea(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,i=r.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=fj(ii(this.options.clip,dj(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,i=n.data||[],a=r.chartArea,s=[],d=this._drawStart||0,_=this._drawCount||i.length-d,N=this.options.drawActiveElementsOnTop;let I;for(n.dataset&&n.dataset.draw(e,a,d,_),I=d;I<d+_;++I){const ye=i[I];ye.hidden||(ye.active&&N?s.push(ye):ye.draw(e,a))}for(I=0;I<s.length;++I)s[I].draw(e,a)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const s=this._cachedMeta.data[e];a=s.$context||(s.$context=yj(this.getContext(),e,s)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=gj(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!r,a.mode=n,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const i=r==="active",a=this._cachedDataOpts,s=e+"-"+r,d=a[s],_=this.enableOptionSharing&&Af(n);if(d)return Kb(d,_);const N=this.chart.config,I=N.datasetElementScopeKeys(this._type,e),ye=i?[`${e}Hover`,"hover",e,""]:[e,""],xe=N.getOptionScopes(this.getDataset(),I),Ce=Object.keys(xa.elements[e]),Ve=()=>this.getContext(n,i,r),Ye=N.resolveNamedOptions(xe,Ce,Ve,ye);return Ye.$shared&&(Ye.$shared=_,a[s]=Object.freeze(Kb(Ye,_))),Ye}_resolveAnimations(e,r,n){const i=this.chart,a=this._cachedDataOpts,s=`animation-${r}`,d=a[s];if(d)return d;let _;if(i.options.animation!==!1){const I=this.chart.config,ye=I.datasetAnimationScopeKeys(this._type,r),xe=I.getOptionScopes(this.getDataset(),ye);_=I.createResolver(xe,this.getContext(e,n,r))}const N=new $3(i,_&&_.animations);return _&&_._cacheable&&(a[s]=Object.freeze(N)),N}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Hv(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),i=this._sharedOptions,a=this.getSharedOptions(n),s=this.includeOptions(r,a)||a!==i;return this.updateSharedOptions(a,r,n),{sharedOptions:a,includeOptions:s}}updateElement(e,r,n,i){Hv(i)?Object.assign(e,n):this._resolveAnimations(r,i).update(e,n)}updateSharedOptions(e,r,n){e&&!Hv(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,i){e.active=i;const a=this.getStyle(r,i);this._resolveAnimations(r,n,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[d,_,N]of this._syncList)this[d](_,N);this._syncList=[];const i=n.length,a=r.length,s=Math.min(a,i);s&&this.parse(0,s),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,r,n=!0){const i=this._cachedMeta,a=i.data,s=e+r;let d;const _=N=>{for(N.length+=r,d=N.length-1;d>=s;d--)N[d]=N[d-r]};for(_(a),d=e;d<s;++d)a[d]=new this.dataElementType;this._parsing&&_(i._parsed),this.parse(e,r),n&&this.updateElements(a,e,r,"reset")}updateElements(e,r,n,i){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,r);n._stacked&&Cd(n,i)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,i]=e;this[r](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}hn(Bo,"defaults",{}),hn(Bo,"datasetElementType",null),hn(Bo,"dataElementType",null);function bj(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,a=r.length;i<a;i++)n=n.concat(r[i].controller.getAllParsedValues(t));t._cache.$bar=T3(n.sort((i,a)=>i-a))}return t._cache.$bar}function wj(t){const e=t.iScale,r=bj(e,t.type);let n=e._length,i,a,s,d;const _=()=>{s===32767||s===-32768||(Af(d)&&(n=Math.min(n,Math.abs(s-d)||n)),d=s)};for(i=0,a=r.length;i<a;++i)s=e.getPixelForValue(r[i]),_();for(d=void 0,i=0,a=e.ticks.length;i<a;++i)s=e.getPixelForTick(i),_();return n}function _j(t,e,r,n){const i=r.barThickness;let a,s;return mi(i)?(a=e.min*r.categoryPercentage,s=r.barPercentage):(a=i*n,s=1),{chunk:a/n,ratio:s,start:e.pixels[t]-a/2}}function kj(t,e,r,n){const i=e.pixels,a=i[t];let s=t>0?i[t-1]:null,d=t<i.length-1?i[t+1]:null;const _=r.categoryPercentage;s===null&&(s=a-(d===null?e.end-e.start:d-a)),d===null&&(d=a+a-s);const N=a-(a-Math.min(s,d))/2*_;return{chunk:Math.abs(d-s)/2*_/n,ratio:r.barPercentage,start:N}}function Sj(t,e,r,n){const i=r.parse(t[0],n),a=r.parse(t[1],n),s=Math.min(i,a),d=Math.max(i,a);let _=s,N=d;Math.abs(s)>Math.abs(d)&&(_=d,N=s),e[r.axis]=N,e._custom={barStart:_,barEnd:N,start:i,end:a,min:s,max:d}}function G3(t,e,r,n){return ya(t)?Sj(t,e,r,n):e[r.axis]=r.parse(t,n),e}function e2(t,e,r,n){const i=t.iScale,a=t.vScale,s=i.getLabels(),d=i===a,_=[];let N,I,ye,xe;for(N=r,I=r+n;N<I;++N)xe=e[N],ye={},ye[i.axis]=d||i.parse(s[N],N),_.push(G3(xe,ye,a,N));return _}function Wv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Mj(t,e,r){return t!==0?rl(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function Tj(t){let e,r,n,i,a;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(i="end",a="start"):(i="start",a="end"),{start:r,end:n,reverse:e,top:i,bottom:a}}function Aj(t,e,r,n){let i=e.borderSkipped;const a={};if(!i){t.borderSkipped=a;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:s,end:d,reverse:_,top:N,bottom:I}=Tj(t);i==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?i=N:(r._bottom||0)===n?i=I:(a[t2(I,s,d,_)]=!0,i=N)),a[t2(i,s,d,_)]=!0,t.borderSkipped=a}function t2(t,e,r,n){return n?(t=Cj(t,e,r),t=r2(t,r,e)):t=r2(t,e,r),t}function Cj(t,e,r){return t===e?r:t===r?e:t}function r2(t,e,r){return t==="start"?e:t==="end"?r:t}function jj(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class lp extends Bo{parsePrimitiveData(e,r,n,i){return e2(e,r,n,i)}parseArrayData(e,r,n,i){return e2(e,r,n,i)}parseObjectData(e,r,n,i){const{iScale:a,vScale:s}=e,{xAxisKey:d="x",yAxisKey:_="y"}=this._parsing,N=a.axis==="x"?d:_,I=s.axis==="x"?d:_,ye=[];let xe,Ce,Ve,Ye;for(xe=n,Ce=n+i;xe<Ce;++xe)Ye=r[xe],Ve={},Ve[a.axis]=a.parse(pc(Ye,N),xe),ye.push(G3(pc(Ye,I),Ve,s,xe));return ye}updateRangeFromParsed(e,r,n,i){super.updateRangeFromParsed(e,r,n,i);const a=n._custom;a&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:i}=r,a=this.getParsed(e),s=a._custom,d=Wv(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(a[i.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,i){const a=i==="reset",{index:s,_cachedMeta:{vScale:d}}=this,_=d.getBasePixel(),N=d.isHorizontal(),I=this._getRuler(),{sharedOptions:ye,includeOptions:xe}=this._getSharedOptions(r,i);for(let Ce=r;Ce<r+n;Ce++){const Ve=this.getParsed(Ce),Ye=a||mi(Ve[d.axis])?{base:_,head:_}:this._calculateBarValuePixels(Ce),qe=this._calculateBarIndexPixels(Ce,I),ze=(Ve._stacks||{})[d.axis],Oe={horizontal:N,base:Ye.base,enableBorderRadius:!ze||Wv(Ve._custom)||s===ze._top||s===ze._bottom,x:N?Ye.head:qe.center,y:N?qe.center:Ye.head,height:N?qe.size:Math.abs(Ye.size),width:N?Math.abs(Ye.size):qe.size};xe&&(Oe.options=ye||this.resolveDataElementOptions(Ce,e[Ce].active?"active":i));const We=Oe.options||e[Ce].options;Aj(Oe,We,ze,s),jj(Oe,We,I.ratio),this.updateElement(e[Ce],Ce,Oe,i)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(I=>I.controller.options.grouped),a=n.options.stacked,s=[],d=this._cachedMeta.controller.getParsed(r),_=d&&d[n.axis],N=I=>{const ye=I._parsed.find(Ce=>Ce[n.axis]===_),xe=ye&&ye[I.vScale.axis];if(mi(xe)||isNaN(xe))return!0};for(const I of i)if(!(r!==void 0&&N(I))&&((a===!1||s.indexOf(I.stack)===-1||a===void 0&&I.stack===void 0)&&s.push(I.stack),I.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[ii(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,n){const i=this._getStacks(e,n),a=r!==void 0?i.indexOf(r):-1;return a===-1?i.length-1:a}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,i=[];let a,s;for(a=0,s=r.data.length;a<s;++a)i.push(n.getPixelForValue(this.getParsed(a)[n.axis],a));const d=e.barThickness;return{min:d||wj(r),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:d?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:i},options:{base:a,minBarLength:s}}=this,d=a||0,_=this.getParsed(e),N=_._custom,I=Wv(N);let ye=_[r.axis],xe=0,Ce=n?this.applyStack(r,_,n):ye,Ve,Ye;Ce!==ye&&(xe=Ce-ye,Ce=ye),I&&(ye=N.barStart,Ce=N.barEnd-N.barStart,ye!==0&&rl(ye)!==rl(N.barEnd)&&(xe=0),xe+=ye);const qe=!mi(a)&&!I?a:xe;let ze=r.getPixelForValue(qe);if(this.chart.getDataVisibility(e)?Ve=r.getPixelForValue(xe+Ce):Ve=ze,Ye=Ve-ze,Math.abs(Ye)<s){Ye=Mj(Ye,r,d)*s,ye===d&&(ze-=Ye/2);const Oe=r.getPixelForDecimal(0),We=r.getPixelForDecimal(1),ot=Math.min(Oe,We),st=Math.max(Oe,We);ze=Math.max(Math.min(ze,st),ot),Ve=ze+Ye,n&&!I&&(_._stacks[r.axis]._visualValues[i]=r.getValueForPixel(Ve)-r.getValueForPixel(ze))}if(ze===r.getPixelForValue(d)){const Oe=rl(Ye)*r.getLineWidthForValue(d)/2;ze+=Oe,Ye-=Oe}return{size:Ye,base:ze,head:Ve,center:Ve+Ye/2}}_calculateBarIndexPixels(e,r){const n=r.scale,i=this.options,a=i.skipNull,s=ii(i.maxBarThickness,1/0);let d,_;const N=this._getAxisCount();if(r.grouped){const I=a?this._getStackCount(e):r.stackCount,ye=i.barThickness==="flex"?kj(e,r,i,I*N):_j(e,r,i,I*N),xe=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,Ce=this._getAxis().indexOf(ii(xe,this.getFirstScaleIdForIndexAxis())),Ve=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+Ce;d=ye.start+ye.chunk*Ve+ye.chunk/2,_=Math.min(s,ye.chunk*ye.ratio)}else d=n.getPixelForValue(this.getParsed(e)[n.axis],e),_=Math.min(s,r.min*r.ratio);return{base:d-_/2,head:d+_/2,center:d,size:_}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,i=n.length;let a=0;for(;a<i;++a)this.getParsed(a)[r.axis]!==null&&!n[a].hidden&&n[a].draw(this._ctx)}}hn(lp,"id","bar"),hn(lp,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),hn(lp,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class cp extends Bo{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,n,i){const a=super.parsePrimitiveData(e,r,n,i);for(let s=0;s<a.length;s++)a[s]._custom=this.resolveDataElementOptions(s+n).radius;return a}parseArrayData(e,r,n,i){const a=super.parseArrayData(e,r,n,i);for(let s=0;s<a.length;s++){const d=r[n+s];a[s]._custom=ii(d[2],this.resolveDataElementOptions(s+n).radius)}return a}parseObjectData(e,r,n,i){const a=super.parseObjectData(e,r,n,i);for(let s=0;s<a.length;s++){const d=r[n+s];a[s]._custom=ii(d&&d.r&&+d.r,this.resolveDataElementOptions(s+n).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let r=0;for(let n=e.length-1;n>=0;--n)r=Math.max(r,e[n].size(this.resolveDataElementOptions(n))/2);return r>0&&r}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:a}=r,s=this.getParsed(e),d=i.getLabelForValue(s.x),_=a.getLabelForValue(s.y),N=s._custom;return{label:n[e]||"",value:"("+d+", "+_+(N?", "+N:"")+")"}}update(e){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,n,i){const a=i==="reset",{iScale:s,vScale:d}=this._cachedMeta,{sharedOptions:_,includeOptions:N}=this._getSharedOptions(r,i),I=s.axis,ye=d.axis;for(let xe=r;xe<r+n;xe++){const Ce=e[xe],Ve=!a&&this.getParsed(xe),Ye={},qe=Ye[I]=a?s.getPixelForDecimal(.5):s.getPixelForValue(Ve[I]),ze=Ye[ye]=a?d.getBasePixel():d.getPixelForValue(Ve[ye]);Ye.skip=isNaN(qe)||isNaN(ze),N&&(Ye.options=_||this.resolveDataElementOptions(xe,Ce.active?"active":i),a&&(Ye.options.radius=0)),this.updateElement(Ce,xe,Ye,i)}}resolveDataElementOptions(e,r){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,r);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const a=i.radius;return r!=="active"&&(i.radius=0),i.radius+=ii(n&&n._custom,a),i}}hn(cp,"id","bubble"),hn(cp,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),hn(cp,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Ej(t,e,r){let n=1,i=1,a=0,s=0;if(e<fa){const d=t,_=d+e,N=Math.cos(d),I=Math.sin(d),ye=Math.cos(_),xe=Math.sin(_),Ce=(We,ot,st)=>Cf(We,d,_,!0)?1:Math.max(ot,ot*r,st,st*r),Ve=(We,ot,st)=>Cf(We,d,_,!0)?-1:Math.min(ot,ot*r,st,st*r),Ye=Ce(0,N,ye),qe=Ce(Fa,I,xe),ze=Ve(Li,N,ye),Oe=Ve(Li+Fa,I,xe);n=(Ye-ze)/2,i=(qe-Oe)/2,a=-(Ye+ze)/2,s=-(qe+Oe)/2}return{ratioX:n,ratioY:i,offsetX:a,offsetY:s}}class Vc extends Bo{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let a=_=>+n[_];if(yi(n[e])){const{key:_="value"}=this._parsing;a=N=>+pc(n[N],_)}let s,d;for(s=e,d=e+r;s<d;++s)i._parsed[s]=a(s)}}_getRotation(){return Fo(this.options.rotation-90)}_getCircumference(){return Fo(this.options.circumference)}_getRotationExtents(){let e=fa,r=-fa;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,a=i._getRotation(),s=i._getCircumference();e=Math.min(e,a),r=Math.max(r,a+s)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:n}=r,i=this._cachedMeta,a=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,d=Math.max((Math.min(n.width,n.height)-s)/2,0),_=Math.min(W6(this.options.cutout,d),1),N=this._getRingWeight(this.index),{circumference:I,rotation:ye}=this._getRotationExtents(),{ratioX:xe,ratioY:Ce,offsetX:Ve,offsetY:Ye}=Ej(ye,I,_),qe=(n.width-s)/xe,ze=(n.height-s)/Ce,Oe=Math.max(Math.min(qe,ze)/2,0),We=w3(this.options.radius,Oe),ot=Math.max(We*_,0),st=(We-ot)/this._getVisibleDatasetWeightTotal();this.offsetX=Ve*We,this.offsetY=Ye*We,i.total=this.calculateTotal(),this.outerRadius=We-st*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-st*N,0),this.updateElements(a,0,a.length,e)}_circumference(e,r){const n=this.options,i=this._cachedMeta,a=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*a/fa)}updateElements(e,r,n,i){const a=i==="reset",s=this.chart,d=s.chartArea,N=s.options.animation,I=(d.left+d.right)/2,ye=(d.top+d.bottom)/2,xe=a&&N.animateScale,Ce=xe?0:this.innerRadius,Ve=xe?0:this.outerRadius,{sharedOptions:Ye,includeOptions:qe}=this._getSharedOptions(r,i);let ze=this._getRotation(),Oe;for(Oe=0;Oe<r;++Oe)ze+=this._circumference(Oe,a);for(Oe=r;Oe<r+n;++Oe){const We=this._circumference(Oe,a),ot=e[Oe],st={x:I+this.offsetX,y:ye+this.offsetY,startAngle:ze,endAngle:ze+We,circumference:We,outerRadius:Ve,innerRadius:Ce};qe&&(st.options=Ye||this.resolveDataElementOptions(Oe,ot.active?"active":i)),ze+=We,this.updateElement(ot,Oe,st,i)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let n=0,i;for(i=0;i<r.length;i++){const a=e._parsed[i];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(i)&&!r[i].hidden&&(n+=Math.abs(a))}return n}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?fa*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,i=n.data.labels||[],a=Of(r._parsed[e],n.options.locale);return{label:i[e]||"",value:a}}getMaxBorderWidth(e){let r=0;const n=this.chart;let i,a,s,d,_;if(!e){for(i=0,a=n.data.datasets.length;i<a;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,d=s.controller;break}}if(!e)return 0;for(i=0,a=e.length;i<a;++i)_=d.resolveDataElementOptions(i),_.borderAlign!=="inner"&&(r=Math.max(r,_.borderWidth||0,_.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,i=e.length;n<i;++n){const a=this.resolveDataElementOptions(n);r=Math.max(r,a.offset||0,a.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(ii(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}hn(Vc,"id","doughnut"),hn(Vc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),hn(Vc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),hn(Vc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return r.labels.map((a,s)=>{const _=e.getDatasetMeta(0).controller.getStyle(s);return{text:a,fillStyle:_.backgroundColor,strokeStyle:_.borderColor,fontColor:i,lineWidth:_.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}});class up extends Bo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:i=[],_dataset:a}=r,s=this.chart._animationsDisabled;let{start:d,count:_}=j3(r,i,s);this._drawStart=d,this._drawCount=_,E3(r)&&(d=0,_=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=i;const N=this.resolveDatasetElementOptions(e);this.options.showLine||(N.borderWidth=0),N.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:N},e),this.updateElements(i,d,_,e)}updateElements(e,r,n,i){const a=i==="reset",{iScale:s,vScale:d,_stacked:_,_dataset:N}=this._cachedMeta,{sharedOptions:I,includeOptions:ye}=this._getSharedOptions(r,i),xe=s.axis,Ce=d.axis,{spanGaps:Ve,segment:Ye}=this.options,qe=Ku(Ve)?Ve:Number.POSITIVE_INFINITY,ze=this.chart._animationsDisabled||a||i==="none",Oe=r+n,We=e.length;let ot=r>0&&this.getParsed(r-1);for(let st=0;st<We;++st){const Rt=e[st],wt=ze?Rt:{};if(st<r||st>=Oe){wt.skip=!0;continue}const It=this.getParsed(st),er=mi(It[Ce]),cr=wt[xe]=s.getPixelForValue(It[xe],st),Tr=wt[Ce]=a||er?d.getBasePixel():d.getPixelForValue(_?this.applyStack(d,It,_):It[Ce],st);wt.skip=isNaN(cr)||isNaN(Tr)||er,wt.stop=st>0&&Math.abs(It[xe]-ot[xe])>qe,Ye&&(wt.parsed=It,wt.raw=N.data[st]),ye&&(wt.options=I||this.resolveDataElementOptions(st,Rt.active?"active":i)),ze||this.updateElement(Rt,st,wt,i),ot=It}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const a=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,a,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}hn(up,"id","line"),hn(up,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),hn(up,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class of extends Bo{constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,i=n.data.labels||[],a=Of(r._parsed[e].r,n.options.locale);return{label:i[e]||"",value:a}}parseObjectData(e,r,n,i){return I3.bind(this)(e,r,n,i)}update(e){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){const e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const a=this.getParsed(i).r;!isNaN(a)&&this.chart.getDataVisibility(i)&&(a<r.min&&(r.min=a),a>r.max&&(r.max=a))}),r}_updateRadius(){const e=this.chart,r=e.chartArea,n=e.options,i=Math.min(r.right-r.left,r.bottom-r.top),a=Math.max(i/2,0),s=Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0),d=(a-s)/e.getVisibleDatasetCount();this.outerRadius=a-d*this.index,this.innerRadius=this.outerRadius-d}updateElements(e,r,n,i){const a=i==="reset",s=this.chart,_=s.options.animation,N=this._cachedMeta.rScale,I=N.xCenter,ye=N.yCenter,xe=N.getIndexAngle(0)-.5*Li;let Ce=xe,Ve;const Ye=360/this.countVisibleElements();for(Ve=0;Ve<r;++Ve)Ce+=this._computeAngle(Ve,i,Ye);for(Ve=r;Ve<r+n;Ve++){const qe=e[Ve];let ze=Ce,Oe=Ce+this._computeAngle(Ve,i,Ye),We=s.getDataVisibility(Ve)?N.getDistanceFromCenterForValue(this.getParsed(Ve).r):0;Ce=Oe,a&&(_.animateScale&&(We=0),_.animateRotate&&(ze=Oe=xe));const ot={x:I,y:ye,innerRadius:0,outerRadius:We,startAngle:ze,endAngle:Oe,options:this.resolveDataElementOptions(Ve,qe.active?"active":i)};this.updateElement(qe,Ve,ot,i)}}countVisibleElements(){const e=this._cachedMeta;let r=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&r++}),r}_computeAngle(e,r,n){return this.chart.getDataVisibility(e)?Fo(this.resolveDataElementOptions(e,r).angle||n):0}}hn(of,"id","polarArea"),hn(of,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),hn(of,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return r.labels.map((a,s)=>{const _=e.getDatasetMeta(0).controller.getStyle(s);return{text:a,fillStyle:_.backgroundColor,strokeStyle:_.borderColor,fontColor:i,lineWidth:_.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class e0 extends Vc{}hn(e0,"id","pie"),hn(e0,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class dp extends Bo{getLabelAndValue(e){const r=this._cachedMeta.vScale,n=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(n[r.axis])}}parseObjectData(e,r,n,i){return I3.bind(this)(e,r,n,i)}update(e){const r=this._cachedMeta,n=r.dataset,i=r.data||[],a=r.iScale.getLabels();if(n.points=i,e!=="resize"){const s=this.resolveDatasetElementOptions(e);this.options.showLine||(s.borderWidth=0);const d={_loop:!0,_fullLoop:a.length===i.length,options:s};this.updateElement(n,void 0,d,e)}this.updateElements(i,0,i.length,e)}updateElements(e,r,n,i){const a=this._cachedMeta.rScale,s=i==="reset";for(let d=r;d<r+n;d++){const _=e[d],N=this.resolveDataElementOptions(d,_.active?"active":i),I=a.getPointPositionForValue(d,this.getParsed(d).r),ye=s?a.xCenter:I.x,xe=s?a.yCenter:I.y,Ce={x:ye,y:xe,angle:I.angle,skip:isNaN(ye)||isNaN(xe),options:N};this.updateElement(_,d,Ce,i)}}}hn(dp,"id","radar"),hn(dp,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),hn(dp,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class fp extends Bo{getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:a}=r,s=this.getParsed(e),d=i.getLabelForValue(s.x),_=a.getLabelForValue(s.y);return{label:n[e]||"",value:"("+d+", "+_+")"}}update(e){const r=this._cachedMeta,{data:n=[]}=r,i=this.chart._animationsDisabled;let{start:a,count:s}=j3(r,n,i);if(this._drawStart=a,this._drawCount=s,E3(r)&&(a=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:d,_dataset:_}=r;d._chart=this.chart,d._datasetIndex=this.index,d._decimated=!!_._decimated,d.points=n;const N=this.resolveDatasetElementOptions(e);N.segment=this.options.segment,this.updateElement(d,void 0,{animated:!i,options:N},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(n,a,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,n,i){const a=i==="reset",{iScale:s,vScale:d,_stacked:_,_dataset:N}=this._cachedMeta,I=this.resolveDataElementOptions(r,i),ye=this.getSharedOptions(I),xe=this.includeOptions(i,ye),Ce=s.axis,Ve=d.axis,{spanGaps:Ye,segment:qe}=this.options,ze=Ku(Ye)?Ye:Number.POSITIVE_INFINITY,Oe=this.chart._animationsDisabled||a||i==="none";let We=r>0&&this.getParsed(r-1);for(let ot=r;ot<r+n;++ot){const st=e[ot],Rt=this.getParsed(ot),wt=Oe?st:{},It=mi(Rt[Ve]),er=wt[Ce]=s.getPixelForValue(Rt[Ce],ot),cr=wt[Ve]=a||It?d.getBasePixel():d.getPixelForValue(_?this.applyStack(d,Rt,_):Rt[Ve],ot);wt.skip=isNaN(er)||isNaN(cr)||It,wt.stop=ot>0&&Math.abs(Rt[Ce]-We[Ce])>ze,qe&&(wt.parsed=Rt,wt.raw=N.data[ot]),xe&&(wt.options=ye||this.resolveDataElementOptions(ot,st.active?"active":i)),Oe||this.updateElement(st,ot,wt,i),We=Rt}this.updateSharedOptions(ye,i,I)}getMaxOverflow(){const e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let d=0;for(let _=r.length-1;_>=0;--_)d=Math.max(d,r[_].size(this.resolveDataElementOptions(_))/2);return d>0&&d}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!r.length)return i;const a=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,a,s)/2}}hn(fp,"id","scatter"),hn(fp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),hn(fp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Lj=Object.freeze({__proto__:null,BarController:lp,BubbleController:cp,DoughnutController:Vc,LineController:up,PieController:e0,PolarAreaController:of,RadarController:dp,ScatterController:fp});function Nc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class by{constructor(e){hn(this,"options");this.options=e||{}}static override(e){Object.assign(by.prototype,e)}init(){}formats(){return Nc()}parse(){return Nc()}format(){return Nc()}add(){return Nc()}diff(){return Nc()}startOf(){return Nc()}endOf(){return Nc()}}var Rj={_date:by};function Dj(t,e,r,n){const{controller:i,data:a,_sorted:s}=t,d=i._cachedMeta.iScale,_=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(d&&e===d.axis&&e!=="r"&&s&&a.length){const N=d._reversePixels?t8:Sl;if(n){if(i._sharedOptions){const I=a[0],ye=typeof I.getRange=="function"&&I.getRange(e);if(ye){const xe=N(a,e,r-ye),Ce=N(a,e,r+ye);return{lo:xe.lo,hi:Ce.hi}}}}else{const I=N(a,e,r);if(_){const{vScale:ye}=i._cachedMeta,{_parsed:xe}=t,Ce=xe.slice(0,I.lo+1).reverse().findIndex(Ye=>!mi(Ye[ye.axis]));I.lo-=Math.max(0,Ce);const Ve=xe.slice(I.hi).findIndex(Ye=>!mi(Ye[ye.axis]));I.hi+=Math.max(0,Ve)}return I}}return{lo:0,hi:a.length-1}}function gm(t,e,r,n,i){const a=t.getSortedVisibleDatasetMetas(),s=r[e];for(let d=0,_=a.length;d<_;++d){const{index:N,data:I}=a[d],{lo:ye,hi:xe}=Dj(a[d],e,s,i);for(let Ce=ye;Ce<=xe;++Ce){const Ve=I[Ce];Ve.skip||n(Ve,N,Ce)}}}function Pj(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,i){const a=e?Math.abs(n.x-i.x):0,s=r?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}function qv(t,e,r,n,i){const a=[];return!i&&!t.isPointInArea(e)||gm(t,r,e,function(d,_,N){!i&&!Ml(d,t.chartArea,0)||d.inRange(e.x,e.y,n)&&a.push({element:d,datasetIndex:_,index:N})},!0),a}function Nj(t,e,r,n){let i=[];function a(s,d,_){const{startAngle:N,endAngle:I}=s.getProps(["startAngle","endAngle"],n),{angle:ye}=S3(s,{x:e.x,y:e.y});Cf(ye,N,I)&&i.push({element:s,datasetIndex:d,index:_})}return gm(t,r,e,a),i}function zj(t,e,r,n,i,a){let s=[];const d=Pj(r);let _=Number.POSITIVE_INFINITY;function N(I,ye,xe){const Ce=I.inRange(e.x,e.y,i);if(n&&!Ce)return;const Ve=I.getCenterPoint(i);if(!(!!a||t.isPointInArea(Ve))&&!Ce)return;const qe=d(e,Ve);qe<_?(s=[{element:I,datasetIndex:ye,index:xe}],_=qe):qe===_&&s.push({element:I,datasetIndex:ye,index:xe})}return gm(t,r,e,N),s}function Vv(t,e,r,n,i,a){return!a&&!t.isPointInArea(e)?[]:r==="r"&&!n?Nj(t,e,r,i):zj(t,e,r,n,i,a)}function n2(t,e,r,n,i){const a=[],s=r==="x"?"inXRange":"inYRange";let d=!1;return gm(t,r,e,(_,N,I)=>{_[s]&&_[s](e[r],i)&&(a.push({element:_,datasetIndex:N,index:I}),d=d||_.inRange(e.x,e.y,i))}),n&&!d?[]:a}var Fj={modes:{index(t,e,r,n){const i=Oc(e,t),a=r.axis||"x",s=r.includeInvisible||!1,d=r.intersect?qv(t,i,a,n,s):Vv(t,i,a,!1,n,s),_=[];return d.length?(t.getSortedVisibleDatasetMetas().forEach(N=>{const I=d[0].index,ye=N.data[I];ye&&!ye.skip&&_.push({element:ye,datasetIndex:N.index,index:I})}),_):[]},dataset(t,e,r,n){const i=Oc(e,t),a=r.axis||"xy",s=r.includeInvisible||!1;let d=r.intersect?qv(t,i,a,n,s):Vv(t,i,a,!1,n,s);if(d.length>0){const _=d[0].datasetIndex,N=t.getDatasetMeta(_).data;d=[];for(let I=0;I<N.length;++I)d.push({element:N[I],datasetIndex:_,index:I})}return d},point(t,e,r,n){const i=Oc(e,t),a=r.axis||"xy",s=r.includeInvisible||!1;return qv(t,i,a,n,s)},nearest(t,e,r,n){const i=Oc(e,t),a=r.axis||"xy",s=r.includeInvisible||!1;return Vv(t,i,a,r.intersect,n,s)},x(t,e,r,n){const i=Oc(e,t);return n2(t,i,"x",r.intersect,n)},y(t,e,r,n){const i=Oc(e,t);return n2(t,i,"y",r.intersect,n)}}};const X3=["left","top","right","bottom"];function jd(t,e){return t.filter(r=>r.pos===e)}function i2(t,e){return t.filter(r=>X3.indexOf(r.pos)===-1&&r.box.axis===e)}function Ed(t,e){return t.sort((r,n)=>{const i=e?n:r,a=e?r:n;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function Ij(t){const e=[];let r,n,i,a,s,d;for(r=0,n=(t||[]).length;r<n;++r)i=t[r],{position:a,options:{stack:s,stackWeight:d=1}}=i,e.push({index:r,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&a+s,stackWeight:d});return e}function Oj(t){const e={};for(const r of t){const{stack:n,pos:i,stackWeight:a}=r;if(!n||!X3.includes(i))continue;const s=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return e}function Bj(t,e){const r=Oj(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let a,s,d;for(a=0,s=t.length;a<s;++a){d=t[a];const{fullSize:_}=d.box,N=r[d.stack],I=N&&d.stackWeight/N.weight;d.horizontal?(d.width=I?I*n:_&&e.availableWidth,d.height=i):(d.width=n,d.height=I?I*i:_&&e.availableHeight)}return r}function Hj(t){const e=Ij(t),r=Ed(e.filter(N=>N.box.fullSize),!0),n=Ed(jd(e,"left"),!0),i=Ed(jd(e,"right")),a=Ed(jd(e,"top"),!0),s=Ed(jd(e,"bottom")),d=i2(e,"x"),_=i2(e,"y");return{fullSize:r,leftAndTop:n.concat(a),rightAndBottom:i.concat(_).concat(s).concat(d),chartArea:jd(e,"chartArea"),vertical:n.concat(i).concat(_),horizontal:a.concat(s).concat(d)}}function a2(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function Z3(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Wj(t,e,r,n){const{pos:i,box:a}=r,s=t.maxPadding;if(!yi(i)){r.size&&(t[i]-=r.size);const ye=n[r.stack]||{size:0,count:1};ye.size=Math.max(ye.size,r.horizontal?a.height:a.width),r.size=ye.size/ye.count,t[i]+=r.size}a.getPadding&&Z3(s,a.getPadding());const d=Math.max(0,e.outerWidth-a2(s,t,"left","right")),_=Math.max(0,e.outerHeight-a2(s,t,"top","bottom")),N=d!==t.w,I=_!==t.h;return t.w=d,t.h=_,r.horizontal?{same:N,other:I}:{same:I,other:N}}function qj(t){const e=t.maxPadding;function r(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function Vj(t,e){const r=e.maxPadding;function n(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{a[s]=Math.max(e[s],r[s])}),a}return n(t?["left","right"]:["top","bottom"])}function Bd(t,e,r,n){const i=[];let a,s,d,_,N,I;for(a=0,s=t.length,N=0;a<s;++a){d=t[a],_=d.box,_.update(d.width||e.w,d.height||e.h,Vj(d.horizontal,e));const{same:ye,other:xe}=Wj(e,r,d,n);N|=ye&&i.length,I=I||xe,_.fullSize||i.push(d)}return N&&Bd(i,e,r,n)||I}function Bh(t,e,r,n,i){t.top=r,t.left=e,t.right=e+n,t.bottom=r+i,t.width=n,t.height=i}function s2(t,e,r,n){const i=r.padding;let{x:a,y:s}=e;for(const d of t){const _=d.box,N=n[d.stack]||{placed:0,weight:1},I=d.stackWeight/N.weight||1;if(d.horizontal){const ye=e.w*I,xe=N.size||_.height;Af(N.start)&&(s=N.start),_.fullSize?Bh(_,i.left,s,r.outerWidth-i.right-i.left,xe):Bh(_,e.left+N.placed,s,ye,xe),N.start=s,N.placed+=ye,s=_.bottom}else{const ye=e.h*I,xe=N.size||_.width;Af(N.start)&&(a=N.start),_.fullSize?Bh(_,a,i.top,xe,r.outerHeight-i.bottom-i.top):Bh(_,a,e.top+N.placed,xe,ye),N.start=a,N.placed+=ye,a=_.right}}e.x=a,e.y=s}var Ss={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const i=Ts(t.options.layout.padding),a=Math.max(e-i.width,0),s=Math.max(r-i.height,0),d=Hj(t.boxes),_=d.vertical,N=d.horizontal;Ui(t.boxes,Ye=>{typeof Ye.beforeLayout=="function"&&Ye.beforeLayout()});const I=_.reduce((Ye,qe)=>qe.box.options&&qe.box.options.display===!1?Ye:Ye+1,0)||1,ye=Object.freeze({outerWidth:e,outerHeight:r,padding:i,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/I,hBoxMaxHeight:s/2}),xe=Object.assign({},i);Z3(xe,Ts(n));const Ce=Object.assign({maxPadding:xe,w:a,h:s,x:i.left,y:i.top},i),Ve=Bj(_.concat(N),ye);Bd(d.fullSize,Ce,ye,Ve),Bd(_,Ce,ye,Ve),Bd(N,Ce,ye,Ve)&&Bd(_,Ce,ye,Ve),qj(Ce),s2(d.leftAndTop,Ce,ye,Ve),Ce.x+=Ce.w,Ce.y+=Ce.h,s2(d.rightAndBottom,Ce,ye,Ve),t.chartArea={left:Ce.left,top:Ce.top,right:Ce.left+Ce.w,bottom:Ce.top+Ce.h,height:Ce.h,width:Ce.w},Ui(d.chartArea,Ye=>{const qe=Ye.box;Object.assign(qe,t.chartArea),qe.update(Ce.w,Ce.h,{left:0,top:0,right:0,bottom:0})})}};class Q3{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,i){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,i?Math.floor(r/i):n)}}isAttached(e){return!0}updateConfig(e){}}class Uj extends Q3{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const hp="$chartjs",$j={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},o2=t=>t===null||t==="";function Yj(t,e){const r=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[hp]={initial:{height:n,width:i,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",o2(i)){const a=Vb(t,"width");a!==void 0&&(t.width=a)}if(o2(n))if(t.style.height==="")t.height=t.width/(e||2);else{const a=Vb(t,"height");a!==void 0&&(t.height=a)}return t}const J3=G8?{passive:!0}:!1;function Gj(t,e,r){t&&t.addEventListener(e,r,J3)}function Xj(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,J3)}function Zj(t,e){const r=$j[t.type]||t.type,{x:n,y:i}=Oc(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Yp(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function Qj(t,e,r){const n=t.canvas,i=new MutationObserver(a=>{let s=!1;for(const d of a)s=s||Yp(d.addedNodes,n),s=s&&!Yp(d.removedNodes,n);s&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}function Jj(t,e,r){const n=t.canvas,i=new MutationObserver(a=>{let s=!1;for(const d of a)s=s||Yp(d.removedNodes,n),s=s&&!Yp(d.addedNodes,n);s&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ef=new Map;let l2=0;function K3(){const t=window.devicePixelRatio;t!==l2&&(l2=t,Ef.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function Kj(t,e){Ef.size||window.addEventListener("resize",K3),Ef.set(t,e)}function e7(t){Ef.delete(t),Ef.size||window.removeEventListener("resize",K3)}function t7(t,e,r){const n=t.canvas,i=n&&xy(n);if(!i)return;const a=C3((d,_)=>{const N=i.clientWidth;r(d,_),N<i.clientWidth&&r()},window),s=new ResizeObserver(d=>{const _=d[0],N=_.contentRect.width,I=_.contentRect.height;N===0&&I===0||a(N,I)});return s.observe(i),Kj(t,a),s}function Uv(t,e,r){r&&r.disconnect(),e==="resize"&&e7(t)}function r7(t,e,r){const n=t.canvas,i=C3(a=>{t.ctx!==null&&r(Zj(a,t))},t);return Gj(n,e,i),i}class n7 extends Q3{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Yj(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[hp])return!1;const n=r[hp].initial;["height","width"].forEach(a=>{const s=n[a];mi(s)?r.removeAttribute(a):r.setAttribute(a,s)});const i=n.style||{};return Object.keys(i).forEach(a=>{r.style[a]=i[a]}),r.width=r.width,delete r[hp],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const i=e.$proxies||(e.$proxies={}),s={attach:Qj,detach:Jj,resize:t7}[r]||r7;i[r]=s(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),i=n[r];if(!i)return;({attach:Uv,detach:Uv,resize:Uv}[r]||Xj)(e,r,i),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,i){return Y8(e,r,n,i)}isAttached(e){const r=e&&xy(e);return!!(r&&r.isConnected)}}function i7(t){return!yy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Uj:n7}var Gh;let Rl=(Gh=class{constructor(){hn(this,"x");hn(this,"y");hn(this,"active",!1);hn(this,"options");hn(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Ku(this.x)&&Ku(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const i={};return e.forEach(a=>{i[a]=n[a]&&n[a].active()?n[a]._to:this[a]}),i}},hn(Gh,"defaults",{}),hn(Gh,"defaultRoutes"),Gh);function a7(t,e){const r=t.options.ticks,n=s7(t),i=Math.min(r.maxTicksLimit||n,n),a=r.major.enabled?l7(e):[],s=a.length,d=a[0],_=a[s-1],N=[];if(s>i)return c7(e,N,a,s/i),N;const I=o7(a,e,i);if(s>0){let ye,xe;const Ce=s>1?Math.round((_-d)/(s-1)):null;for(Hh(e,N,I,mi(Ce)?0:d-Ce,d),ye=0,xe=s-1;ye<xe;ye++)Hh(e,N,I,a[ye],a[ye+1]);return Hh(e,N,I,_,mi(Ce)?e.length:_+Ce),N}return Hh(e,N,I),N}function s7(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),i=t._maxLength/r;return Math.floor(Math.min(n,i))}function o7(t,e,r){const n=u7(t),i=e.length/r;if(!n)return Math.max(i,1);const a=Z6(n);for(let s=0,d=a.length-1;s<d;s++){const _=a[s];if(_>i)return _}return Math.max(i,1)}function l7(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function c7(t,e,r,n){let i=0,a=r[0],s;for(n=Math.ceil(n),s=0;s<t.length;s++)s===a&&(e.push(t[s]),i++,a=r[i*n])}function Hh(t,e,r,n,i){const a=ii(n,0),s=Math.min(ii(i,t.length),t.length);let d=0,_,N,I;for(r=Math.ceil(r),i&&(_=i-n,r=_/Math.floor(_/r)),I=a;I<0;)d++,I=Math.round(a+d*r);for(N=Math.max(a,0);N<s;N++)N===I&&(e.push(t[N]),d++,I=Math.round(a+d*r))}function u7(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const d7=t=>t==="left"?"right":t==="right"?"left":t,c2=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,u2=(t,e)=>Math.min(e||t,t);function d2(t,e){const r=[],n=t.length/e,i=t.length;let a=0;for(;a<i;a+=n)r.push(t[Math.floor(a)]);return r}function f7(t,e,r){const n=t.ticks.length,i=Math.min(e,n-1),a=t._startPixel,s=t._endPixel,d=1e-6;let _=t.getPixelForTick(i),N;if(!(r&&(n===1?N=Math.max(_-a,s-_):e===0?N=(t.getPixelForTick(1)-_)/2:N=(_-t.getPixelForTick(i-1))/2,_+=i<e?N:-N,_<a-d||_>s+d)))return _}function h7(t,e){Ui(t,r=>{const n=r.gc,i=n.length/2;let a;if(i>e){for(a=0;a<i;++a)delete r.data[n[a]];n.splice(0,i)}})}function Ld(t){return t.drawTicks?t.tickLength:0}function f2(t,e){if(!t.display)return 0;const r=Ua(t.font,e),n=Ts(t.padding);return(ya(t.text)?t.text.length:1)*r.lineHeight+n.height}function p7(t,e){return xc(t,{scale:e,type:"scale"})}function m7(t,e,r){return xc(t,{tick:r,index:e,type:"tick"})}function v7(t,e,r){let n=fy(t);return(r&&e!=="right"||!r&&e==="right")&&(n=d7(n)),n}function g7(t,e,r,n){const{top:i,left:a,bottom:s,right:d,chart:_}=t,{chartArea:N,scales:I}=_;let ye=0,xe,Ce,Ve;const Ye=s-i,qe=d-a;if(t.isHorizontal()){if(Ce=ws(n,a,d),yi(r)){const ze=Object.keys(r)[0],Oe=r[ze];Ve=I[ze].getPixelForValue(Oe)+Ye-e}else r==="center"?Ve=(N.bottom+N.top)/2+Ye-e:Ve=c2(t,r,e);xe=d-a}else{if(yi(r)){const ze=Object.keys(r)[0],Oe=r[ze];Ce=I[ze].getPixelForValue(Oe)-qe+e}else r==="center"?Ce=(N.left+N.right)/2-qe+e:Ce=c2(t,r,e);Ve=ws(n,s,i),ye=r==="left"?-Fa:Fa}return{titleX:Ce,titleY:Ve,maxWidth:xe,rotation:ye}}class su extends Rl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:i}=this;return e=no(e,Number.POSITIVE_INFINITY),r=no(r,Number.NEGATIVE_INFINITY),n=no(n,Number.POSITIVE_INFINITY),i=no(i,Number.NEGATIVE_INFINITY),{min:no(e,n),max:no(r,i),minDefined:Ea(e),maxDefined:Ea(r)}}getMinMax(e){let{min:r,max:n,minDefined:i,maxDefined:a}=this.getUserBounds(),s;if(i&&a)return{min:r,max:n};const d=this.getMatchingVisibleMetas();for(let _=0,N=d.length;_<N;++_)s=d[_].controller.getMinMax(this,e),i||(r=Math.min(r,s.min)),a||(n=Math.max(n,s.max));return r=a&&r>n?n:r,n=i&&r>n?r:n,{min:no(r,no(n,r)),max:no(n,no(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ia(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:i,grace:a,ticks:s}=this.options,d=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=M8(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const _=d<this.ticks.length;this._convertTicksToLabels(_?d2(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=a7(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),_&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ia(this.options.afterUpdate,[this])}beforeSetDimensions(){ia(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ia(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ia(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ia(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,i,a;for(n=0,i=e.length;n<i;n++)a=e[n],a.label=ia(r.callback,[a.value,n,e],this)}afterTickToLabelConversion(){ia(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ia(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=u2(this.ticks.length,e.ticks.maxTicksLimit),i=r.minRotation||0,a=r.maxRotation;let s=i,d,_,N;if(!this._isVisible()||!r.display||i>=a||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const I=this._getLabelSizes(),ye=I.widest.width,xe=I.highest.height,Ce=Ja(this.chart.width-ye,0,this.maxWidth);d=e.offset?this.maxWidth/n:Ce/(n-1),ye+6>d&&(d=Ce/(n-(e.offset?.5:1)),_=this.maxHeight-Ld(e.grid)-r.padding-f2(e.title,this.chart.options.font),N=Math.sqrt(ye*ye+xe*xe),s=uy(Math.min(Math.asin(Ja((I.highest.height+6)/d,-1,1)),Math.asin(Ja(_/N,-1,1))-Math.asin(Ja(xe/N,-1,1)))),s=Math.max(i,Math.min(a,s))),this.labelRotation=s}afterCalculateLabelRotation(){ia(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ia(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:i,grid:a}}=this,s=this._isVisible(),d=this.isHorizontal();if(s){const _=f2(i,r.options.font);if(d?(e.width=this.maxWidth,e.height=Ld(a)+_):(e.height=this.maxHeight,e.width=Ld(a)+_),n.display&&this.ticks.length){const{first:N,last:I,widest:ye,highest:xe}=this._getLabelSizes(),Ce=n.padding*2,Ve=Fo(this.labelRotation),Ye=Math.cos(Ve),qe=Math.sin(Ve);if(d){const ze=n.mirror?0:qe*ye.width+Ye*xe.height;e.height=Math.min(this.maxHeight,e.height+ze+Ce)}else{const ze=n.mirror?0:Ye*ye.width+qe*xe.height;e.width=Math.min(this.maxWidth,e.width+ze+Ce)}this._calculatePadding(N,I,qe,Ye)}}this._handleMargins(),d?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,i){const{ticks:{align:a,padding:s},position:d}=this.options,_=this.labelRotation!==0,N=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const I=this.getPixelForTick(0)-this.left,ye=this.right-this.getPixelForTick(this.ticks.length-1);let xe=0,Ce=0;_?N?(xe=i*e.width,Ce=n*r.height):(xe=n*e.height,Ce=i*r.width):a==="start"?Ce=r.width:a==="end"?xe=e.width:a!=="inner"&&(xe=e.width/2,Ce=r.width/2),this.paddingLeft=Math.max((xe-I+s)*this.width/(this.width-I),0),this.paddingRight=Math.max((Ce-ye+s)*this.width/(this.width-ye),0)}else{let I=r.height/2,ye=e.height/2;a==="start"?(I=0,ye=e.height):a==="end"&&(I=r.height,ye=0),this.paddingTop=I+s,this.paddingBottom=ye+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ia(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)mi(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=d2(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:i,_longestTextCache:a}=this,s=[],d=[],_=Math.floor(r/u2(r,n));let N=0,I=0,ye,xe,Ce,Ve,Ye,qe,ze,Oe,We,ot,st;for(ye=0;ye<r;ye+=_){if(Ve=e[ye].label,Ye=this._resolveTickFontOptions(ye),i.font=qe=Ye.string,ze=a[qe]=a[qe]||{data:{},gc:[]},Oe=Ye.lineHeight,We=ot=0,!mi(Ve)&&!ya(Ve))We=Up(i,ze.data,ze.gc,We,Ve),ot=Oe;else if(ya(Ve))for(xe=0,Ce=Ve.length;xe<Ce;++xe)st=Ve[xe],!mi(st)&&!ya(st)&&(We=Up(i,ze.data,ze.gc,We,st),ot+=Oe);s.push(We),d.push(ot),N=Math.max(We,N),I=Math.max(ot,I)}h7(a,r);const Rt=s.indexOf(N),wt=d.indexOf(I),It=er=>({width:s[er]||0,height:d[er]||0});return{first:It(0),last:It(r-1),widest:It(Rt),highest:It(wt),widths:s,heights:d}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return e8(this._alignToPixels?Pc(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=m7(this.getContext(),e,n))}return this.$context||(this.$context=p7(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Fo(this.labelRotation),n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,d=a?a.widest.width+s:0,_=a?a.highest.height+s:0;return this.isHorizontal()?_*n>d*i?d/n:_/i:_*i<d*n?_/n:d/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,i=this.options,{grid:a,position:s,border:d}=i,_=a.offset,N=this.isHorizontal(),ye=this.ticks.length+(_?1:0),xe=Ld(a),Ce=[],Ve=d.setContext(this.getContext()),Ye=Ve.display?Ve.width:0,qe=Ye/2,ze=function(pt){return Pc(n,pt,Ye)};let Oe,We,ot,st,Rt,wt,It,er,cr,Tr,xr,lt;if(s==="top")Oe=ze(this.bottom),wt=this.bottom-xe,er=Oe-qe,Tr=ze(e.top)+qe,lt=e.bottom;else if(s==="bottom")Oe=ze(this.top),Tr=e.top,lt=ze(e.bottom)-qe,wt=Oe+qe,er=this.top+xe;else if(s==="left")Oe=ze(this.right),Rt=this.right-xe,It=Oe-qe,cr=ze(e.left)+qe,xr=e.right;else if(s==="right")Oe=ze(this.left),cr=e.left,xr=ze(e.right)-qe,Rt=Oe+qe,It=this.left+xe;else if(r==="x"){if(s==="center")Oe=ze((e.top+e.bottom)/2+.5);else if(yi(s)){const pt=Object.keys(s)[0],Zt=s[pt];Oe=ze(this.chart.scales[pt].getPixelForValue(Zt))}Tr=e.top,lt=e.bottom,wt=Oe+qe,er=wt+xe}else if(r==="y"){if(s==="center")Oe=ze((e.left+e.right)/2);else if(yi(s)){const pt=Object.keys(s)[0],Zt=s[pt];Oe=ze(this.chart.scales[pt].getPixelForValue(Zt))}Rt=Oe-qe,It=Rt-xe,cr=e.left,xr=e.right}const gt=ii(i.ticks.maxTicksLimit,ye),Ft=Math.max(1,Math.ceil(ye/gt));for(We=0;We<ye;We+=Ft){const pt=this.getContext(We),Zt=a.setContext(pt),Jt=d.setContext(pt),lr=Zt.lineWidth,wr=Zt.color,Sr=Jt.dash||[],vr=Jt.dashOffset,Bt=Zt.tickWidth,yr=Zt.tickColor,dr=Zt.tickBorderDash||[],Pr=Zt.tickBorderDashOffset;ot=f7(this,We,_),ot!==void 0&&(st=Pc(n,ot,lr),N?Rt=It=cr=xr=st:wt=er=Tr=lt=st,Ce.push({tx1:Rt,ty1:wt,tx2:It,ty2:er,x1:cr,y1:Tr,x2:xr,y2:lt,width:lr,color:wr,borderDash:Sr,borderDashOffset:vr,tickWidth:Bt,tickColor:yr,tickBorderDash:dr,tickBorderDashOffset:Pr}))}return this._ticksLength=ye,this._borderValue=Oe,Ce}_computeLabelItems(e){const r=this.axis,n=this.options,{position:i,ticks:a}=n,s=this.isHorizontal(),d=this.ticks,{align:_,crossAlign:N,padding:I,mirror:ye}=a,xe=Ld(n.grid),Ce=xe+I,Ve=ye?-I:Ce,Ye=-Fo(this.labelRotation),qe=[];let ze,Oe,We,ot,st,Rt,wt,It,er,cr,Tr,xr,lt="middle";if(i==="top")Rt=this.bottom-Ve,wt=this._getXAxisLabelAlignment();else if(i==="bottom")Rt=this.top+Ve,wt=this._getXAxisLabelAlignment();else if(i==="left"){const Ft=this._getYAxisLabelAlignment(xe);wt=Ft.textAlign,st=Ft.x}else if(i==="right"){const Ft=this._getYAxisLabelAlignment(xe);wt=Ft.textAlign,st=Ft.x}else if(r==="x"){if(i==="center")Rt=(e.top+e.bottom)/2+Ce;else if(yi(i)){const Ft=Object.keys(i)[0],pt=i[Ft];Rt=this.chart.scales[Ft].getPixelForValue(pt)+Ce}wt=this._getXAxisLabelAlignment()}else if(r==="y"){if(i==="center")st=(e.left+e.right)/2-Ce;else if(yi(i)){const Ft=Object.keys(i)[0],pt=i[Ft];st=this.chart.scales[Ft].getPixelForValue(pt)}wt=this._getYAxisLabelAlignment(xe).textAlign}r==="y"&&(_==="start"?lt="top":_==="end"&&(lt="bottom"));const gt=this._getLabelSizes();for(ze=0,Oe=d.length;ze<Oe;++ze){We=d[ze],ot=We.label;const Ft=a.setContext(this.getContext(ze));It=this.getPixelForTick(ze)+a.labelOffset,er=this._resolveTickFontOptions(ze),cr=er.lineHeight,Tr=ya(ot)?ot.length:1;const pt=Tr/2,Zt=Ft.color,Jt=Ft.textStrokeColor,lr=Ft.textStrokeWidth;let wr=wt;s?(st=It,wt==="inner"&&(ze===Oe-1?wr=this.options.reverse?"left":"right":ze===0?wr=this.options.reverse?"right":"left":wr="center"),i==="top"?N==="near"||Ye!==0?xr=-Tr*cr+cr/2:N==="center"?xr=-gt.highest.height/2-pt*cr+cr:xr=-gt.highest.height+cr/2:N==="near"||Ye!==0?xr=cr/2:N==="center"?xr=gt.highest.height/2-pt*cr:xr=gt.highest.height-Tr*cr,ye&&(xr*=-1),Ye!==0&&!Ft.showLabelBackdrop&&(st+=cr/2*Math.sin(Ye))):(Rt=It,xr=(1-Tr)*cr/2);let Sr;if(Ft.showLabelBackdrop){const vr=Ts(Ft.backdropPadding),Bt=gt.heights[ze],yr=gt.widths[ze];let dr=xr-vr.top,Pr=0-vr.left;switch(lt){case"middle":dr-=Bt/2;break;case"bottom":dr-=Bt;break}switch(wt){case"center":Pr-=yr/2;break;case"right":Pr-=yr;break;case"inner":ze===Oe-1?Pr-=yr:ze>0&&(Pr-=yr/2);break}Sr={left:Pr,top:dr,width:yr+vr.width,height:Bt+vr.height,color:Ft.backdropColor}}qe.push({label:ot,font:er,textOffset:xr,options:{rotation:Ye,color:Zt,strokeColor:Jt,strokeWidth:lr,textAlign:wr,textBaseline:lt,translation:[st,Rt],backdrop:Sr}})}return qe}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Fo(this.labelRotation))return e==="top"?"left":"right";let i="center";return r.align==="start"?i="left":r.align==="end"?i="right":r.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:i,padding:a}}=this.options,s=this._getLabelSizes(),d=e+a,_=s.widest.width;let N,I;return r==="left"?i?(I=this.right+a,n==="near"?N="left":n==="center"?(N="center",I+=_/2):(N="right",I+=_)):(I=this.right-d,n==="near"?N="right":n==="center"?(N="center",I-=_/2):(N="left",I=this.left)):r==="right"?i?(I=this.left+a,n==="near"?N="right":n==="center"?(N="center",I-=_/2):(N="left",I-=_)):(I=this.left+d,n==="near"?N="left":n==="center"?(N="center",I+=_/2):(N="right",I=this.right)):N="right",{textAlign:N,x:I}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:i,width:a,height:s}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,i,a,s),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?r.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,s;const d=(_,N,I)=>{!I.width||!I.color||(n.save(),n.lineWidth=I.width,n.strokeStyle=I.color,n.setLineDash(I.borderDash||[]),n.lineDashOffset=I.borderDashOffset,n.beginPath(),n.moveTo(_.x,_.y),n.lineTo(N.x,N.y),n.stroke(),n.restore())};if(r.display)for(a=0,s=i.length;a<s;++a){const _=i[a];r.drawOnChartArea&&d({x:_.x1,y:_.y1},{x:_.x2,y:_.y2},_),r.drawTicks&&d({x:_.tx1,y:_.ty1},{x:_.tx2,y:_.ty2},{color:_.tickColor,width:_.tickWidth,borderDash:_.tickBorderDash,borderDashOffset:_.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:i}}=this,a=n.setContext(this.getContext()),s=n.display?a.width:0;if(!s)return;const d=i.setContext(this.getContext(0)).lineWidth,_=this._borderValue;let N,I,ye,xe;this.isHorizontal()?(N=Pc(e,this.left,s)-s/2,I=Pc(e,this.right,d)+d/2,ye=xe=_):(ye=Pc(e,this.top,s)-s/2,xe=Pc(e,this.bottom,d)+d/2,N=I=_),r.save(),r.lineWidth=a.width,r.strokeStyle=a.color,r.beginPath(),r.moveTo(N,ye),r.lineTo(I,xe),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&pm(n,i);const a=this.getLabelItems(e);for(const s of a){const d=s.options,_=s.font,N=s.label,I=s.textOffset;ru(n,N,0,I,_,d)}i&&mm(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:i}}=this;if(!n.display)return;const a=Ua(n.font),s=Ts(n.padding),d=n.align;let _=a.lineHeight/2;r==="bottom"||r==="center"||yi(r)?(_+=s.bottom,ya(n.text)&&(_+=a.lineHeight*(n.text.length-1))):_+=s.top;const{titleX:N,titleY:I,maxWidth:ye,rotation:xe}=g7(this,_,r,d);ru(e,n.text,0,0,a,{color:n.color,maxWidth:ye,rotation:xe,textAlign:v7(d,r,i),textBaseline:"middle",translation:[N,I]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=ii(e.grid&&e.grid.z,-1),i=ii(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==su.prototype.draw?[{z:r,draw:a=>{this.draw(a)}}]:[{z:n,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:r,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let a,s;for(a=0,s=r.length;a<s;++a){const d=r[a];d[n]===this.id&&(!e||d.type===e)&&i.push(d)}return i}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return Ua(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Wh{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;b7(r)&&(n=this.register(r));const i=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,y7(e,s,n),this.override&&xa.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,i=this.scope;n in r&&delete r[n],i&&n in xa[i]&&(delete xa[i][n],this.override&&delete tu[n])}}function y7(t,e,r){const n=Tf(Object.create(null),[r?xa.get(r):{},xa.get(e),t.defaults]);xa.set(e,n),t.defaultRoutes&&x7(e,t.defaultRoutes),t.descriptors&&xa.describe(e,t.descriptors)}function x7(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),i=n.pop(),a=[t].concat(n).join("."),s=e[r].split("."),d=s.pop(),_=s.join(".");xa.route(a,i,_,d)})}function b7(t){return"id"in t&&"defaults"in t}class w7{constructor(){this.controllers=new Wh(Bo,"datasets",!0),this.elements=new Wh(Rl,"elements"),this.plugins=new Wh(Object,"plugins"),this.scales=new Wh(su,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(i=>{const a=n||this._getRegistryForType(i);n||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):Ui(i,s=>{const d=n||this._getRegistryForType(s);this._exec(e,d,s)})})}_exec(e,r,n){const i=cy(e);ia(n["before"+i],[],n),r[e](n),ia(n["after"+i],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const i=r.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Qo=new w7;class _7{constructor(){this._init=[]}notify(e,r,n,i){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(a,e,r,n);return r==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,r,n,i){i=i||{};for(const a of e){const s=a.plugin,d=s[n],_=[r,i,a.options];if(ia(d,_,s)===!1&&i.cancelable)return!1}return!0}invalidate(){mi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,i=ii(n.options&&n.options.plugins,{}),a=k7(n);return i===!1&&!r?[]:M7(e,a,i,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,i=(a,s)=>a.filter(d=>!s.some(_=>d.plugin.id===_.plugin.id));this._notify(i(r,n),e,"stop"),this._notify(i(n,r),e,"start")}}function k7(t){const e={},r=[],n=Object.keys(Qo.plugins.items);for(let a=0;a<n.length;a++)r.push(Qo.getPlugin(n[a]));const i=t.plugins||[];for(let a=0;a<i.length;a++){const s=i[a];r.indexOf(s)===-1&&(r.push(s),e[s.id]=!0)}return{plugins:r,localIds:e}}function S7(t,e){return!e&&t===!1?null:t===!0?{}:t}function M7(t,{plugins:e,localIds:r},n,i){const a=[],s=t.getContext();for(const d of e){const _=d.id,N=S7(n[_],i);N!==null&&a.push({plugin:d,options:T7(t.config,{plugin:d,local:r[_]},N,s)})}return a}function T7(t,{plugin:e,local:r},n,i){const a=t.pluginScopeKeys(e),s=t.getOptionScopes(n,a);return r&&e.defaults&&s.push(e.defaults),t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function t0(t,e){const r=xa.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function A7(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function C7(t,e){return t===e?"_index_":"_value_"}function h2(t){if(t==="x"||t==="y"||t==="r")return t}function j7(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function r0(t,...e){if(h2(t))return t;for(const r of e){const n=r.axis||j7(r.position)||t.length>1&&h2(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function p2(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function E7(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return p2(t,"x",r[0])||p2(t,"y",r[0])}return{}}function L7(t,e){const r=tu[t.type]||{scales:{}},n=e.scales||{},i=t0(t.type,e),a=Object.create(null);return Object.keys(n).forEach(s=>{const d=n[s];if(!yi(d))return console.error(`Invalid scale configuration for scale: ${s}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const _=r0(s,d,E7(s,t),xa.scales[d.type]),N=C7(_,i),I=r.scales||{};a[s]=rf(Object.create(null),[{axis:_},d,I[_],I[N]])}),t.data.datasets.forEach(s=>{const d=s.type||t.type,_=s.indexAxis||t0(d,e),I=(tu[d]||{}).scales||{};Object.keys(I).forEach(ye=>{const xe=A7(ye,_),Ce=s[xe+"AxisID"]||xe;a[Ce]=a[Ce]||Object.create(null),rf(a[Ce],[{axis:xe},n[Ce],I[ye]])})}),Object.keys(a).forEach(s=>{const d=a[s];rf(d,[xa.scales[d.type],xa.scale])}),a}function e5(t){const e=t.options||(t.options={});e.plugins=ii(e.plugins,{}),e.scales=L7(t,e)}function t5(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function R7(t){return t=t||{},t.data=t5(t.data),e5(t),t}const m2=new Map,r5=new Set;function qh(t,e){let r=m2.get(t);return r||(r=e(),m2.set(t,r),r5.add(r)),r}const Rd=(t,e,r)=>{const n=pc(e,r);n!==void 0&&t.add(n)};class D7{constructor(e){this._config=R7(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=t5(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),e5(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return qh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return qh(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return qh(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return qh(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let i=n.get(e);return(!i||r)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,r,n){const{options:i,type:a}=this,s=this._cachedScopes(e,n),d=s.get(r);if(d)return d;const _=new Set;r.forEach(I=>{e&&(_.add(e),I.forEach(ye=>Rd(_,e,ye))),I.forEach(ye=>Rd(_,i,ye)),I.forEach(ye=>Rd(_,tu[a]||{},ye)),I.forEach(ye=>Rd(_,xa,ye)),I.forEach(ye=>Rd(_,Jg,ye))});const N=Array.from(_);return N.length===0&&N.push(Object.create(null)),r5.has(r)&&s.set(r,N),N}chartOptionScopes(){const{options:e,type:r}=this;return[e,tu[r]||{},xa.datasets[r]||{},{type:r},xa,Jg]}resolveNamedOptions(e,r,n,i=[""]){const a={$shared:!0},{resolver:s,subPrefixes:d}=v2(this._resolverCache,e,i);let _=s;if(N7(s,r)){a.$shared=!1,n=mc(n)?n():n;const N=this.createResolver(e,n,d);_=ed(s,n,N)}for(const N of r)a[N]=_[N];return a}createResolver(e,r,n=[""],i){const{resolver:a}=v2(this._resolverCache,e,n);return yi(r)?ed(a,r,void 0,i):a}}function v2(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=r.join();let a=n.get(i);return a||(a={resolver:my(e,r),subPrefixes:r.filter(d=>!d.toLowerCase().includes("hover"))},n.set(i,a)),a}const P7=t=>yi(t)&&Object.getOwnPropertyNames(t).some(e=>mc(t[e]));function N7(t,e){const{isScriptable:r,isIndexable:n}=P3(t);for(const i of e){const a=r(i),s=n(i),d=(s||a)&&t[i];if(a&&(mc(d)||P7(d))||s&&ya(d))return!0}return!1}var z7="4.5.0";const F7=["top","bottom","left","right","chartArea"];function g2(t,e){return t==="top"||t==="bottom"||F7.indexOf(t)===-1&&e==="x"}function y2(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function x2(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),ia(r&&r.onComplete,[t],e)}function I7(t){const e=t.chart,r=e.options.animation;ia(r&&r.onProgress,[t],e)}function n5(t){return yy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const pp={},b2=t=>{const e=n5(t);return Object.values(pp).filter(r=>r.canvas===e).pop()};function O7(t,e,r){const n=Object.keys(t);for(const i of n){const a=+i;if(a>=e){const s=t[i];delete t[i],(r>0||a>e)&&(t[a+r]=s)}}}function B7(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}class os{static register(...e){Qo.add(...e),w2()}static unregister(...e){Qo.remove(...e),w2()}constructor(e,r){const n=this.config=new D7(r),i=n5(e),a=b2(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||i7(i)),this.platform.updateConfig(n);const d=this.platform.acquireContext(i,s.aspectRatio),_=d&&d.canvas,N=_&&_.height,I=_&&_.width;if(this.id=H6(),this.ctx=d,this.canvas=_,this.width=I,this.height=N,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _7,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=i8(ye=>this.update(ye),s.resizeDelay||0),this._dataChanges=[],pp[this.id]=this,!d||!_){console.error("Failed to create chart: can't acquire context from the given item");return}vl.listen(this,"complete",x2),vl.listen(this,"progress",I7),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:i,_aspectRatio:a}=this;return mi(e)?r&&a?a:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Qo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Bb(this.canvas,this.ctx),this}stop(){return vl.stop(this),this}resize(e,r){vl.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,i=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,r,a),d=n.devicePixelRatio||this.platform.getDevicePixelRatio(),_=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,qb(this,d,!0)&&(this.notifyPlugins("resize",{size:s}),ia(n.onResize,[this,s],this),this.attached&&this._doResize(_)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Ui(r,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,i=Object.keys(n).reduce((s,d)=>(s[d]=!1,s),{});let a=[];r&&(a=a.concat(Object.keys(r).map(s=>{const d=r[s],_=r0(s,d),N=_==="r",I=_==="x";return{options:d,dposition:N?"chartArea":I?"bottom":"left",dtype:N?"radialLinear":I?"category":"linear"}}))),Ui(a,s=>{const d=s.options,_=d.id,N=r0(_,d),I=ii(d.type,s.dtype);(d.position===void 0||g2(d.position,N)!==g2(s.dposition))&&(d.position=s.dposition),i[_]=!0;let ye=null;if(_ in n&&n[_].type===I)ye=n[_];else{const xe=Qo.getScale(I);ye=new xe({id:_,type:I,ctx:this.ctx,chart:this}),n[ye.id]=ye}ye.init(d,e)}),Ui(i,(s,d)=>{s||delete n[d]}),Ui(n,s=>{Ss.configure(this,s,s.options),Ss.addBox(this,s)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((i,a)=>i.index-a.index),n>r){for(let i=r;i<n;++i)this._destroyDatasetMeta(i);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(y2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,i)=>{r.filter(a=>a===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=r.length;n<i;n++){const a=r[n];let s=this.getDatasetMeta(n);const d=a.type||this.config.type;if(s.type&&s.type!==d&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=d,s.indexAxis=a.indexAxis||t0(d,this.options),s.order=a.order||0,s.index=n,s.label=""+a.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const _=Qo.getController(d),{datasetElementType:N,dataElementType:I}=xa.datasets[d];Object.assign(_,{dataElementType:Qo.getElement(I),datasetElementType:N&&Qo.getElement(N)}),s.controller=new _(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Ui(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let N=0,I=this.data.datasets.length;N<I;N++){const{controller:ye}=this.getDatasetMeta(N),xe=!i&&a.indexOf(ye)===-1;ye.buildOrUpdateElements(xe),s=Math.max(+ye.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Ui(a,N=>{N.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(y2("z","_idx"));const{_active:d,_lastEvent:_}=this;_?this._eventHandler(_,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){Ui(this.scales,e=>{Ss.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Lb(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:a}of r){const s=n==="_removeElements"?-a:a;O7(e,i,s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=a=>new Set(e.filter(s=>s[0]===a).map((s,d)=>d+","+s.splice(1).join(","))),i=n(0);for(let a=1;a<r;a++)if(!Lb(i,n(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ss.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],Ui(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,mc(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(r),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vl.has(this)?this.attached&&!vl.running(this)&&vl.start(this):(this.draw(),x2({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let i,a;for(i=0,a=r.length;i<a;++i){const s=r[i];(!e||s.visible)&&n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=U3(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&pm(r,i),e.controller.draw(),i&&mm(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ml(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,i){const a=Fj.modes[r];return typeof a=="function"?a(this,e,n,i):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let i=n.filter(a=>a&&a._dataset===r).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=xc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const i=n?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,i);Af(r)?(a.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(a,{visible:n}),this.update(d=>d.datasetIndex===e?i:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),vl.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Bb(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete pp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(a,s)=>{r.addEventListener(this,a,s),e[a]=s},i=(a,s,d)=>{a.offsetX=s,a.offsetY=d,this._eventHandler(a)};Ui(this.options.events,a=>n(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(_,N)=>{r.addEventListener(this,_,N),e[_]=N},i=(_,N)=>{e[_]&&(r.removeEventListener(this,_,N),delete e[_])},a=(_,N)=>{this.canvas&&this.resize(_,N)};let s;const d=()=>{i("attach",d),this.attached=!0,this.resize(),n("resize",a),n("detach",s)};s=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),n("attach",d)},r.isAttached(this.canvas)?d():s()}unbindEvents(){Ui(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},Ui(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const i=n?"set":"remove";let a,s,d,_;for(r==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),d=0,_=e.length;d<_;++d){s=e[d];const N=s&&this.getDatasetMeta(s.datasetIndex).controller;N&&N[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:a,index:s})=>{const d=this.getDatasetMeta(a);if(!d)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:d.data[s],index:s}});!Wp(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const i=this.options.hover,a=(_,N)=>_.filter(I=>!N.some(ye=>I.datasetIndex===ye.datasetIndex&&I.index===ye.index)),s=a(r,e),d=n?e:a(e,r);s.length&&this.updateHoverStyle(s,i.mode,!1),d.length&&i.mode&&this.updateHoverStyle(d,i.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},i=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const a=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(a||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:i=[],options:a}=this,s=r,d=this._getActiveElements(e,i,n,s),_=Y6(e),N=B7(e,this._lastEvent,n,_);n&&(this._lastEvent=null,ia(a.onHover,[e,d,this],this),_&&ia(a.onClick,[e,d,this],this));const I=!Wp(d,i);return(I||r)&&(this._active=d,this._updateHoverStyles(d,i,r)),this._lastEvent=N,I}_getActiveElements(e,r,n,i){if(e.type==="mouseout")return[];if(!n)return r;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}}hn(os,"defaults",xa),hn(os,"instances",pp),hn(os,"overrides",tu),hn(os,"registry",Qo),hn(os,"version",z7),hn(os,"getChart",b2);function w2(){return Ui(os.instances,t=>t._plugins.invalidate())}function H7(t,e,r){const{startAngle:n,x:i,y:a,outerRadius:s,innerRadius:d,options:_}=e,{borderWidth:N,borderJoinStyle:I}=_,ye=Math.min(N/s,_s(n-r));if(t.beginPath(),t.arc(i,a,s-N/2,n+ye/2,r-ye/2),d>0){const xe=Math.min(N/d,_s(n-r));t.arc(i,a,d+N/2,r-xe/2,n+xe/2,!0)}else{const xe=Math.min(N/2,s*_s(n-r));if(I==="round")t.arc(i,a,xe,r-Li/2,n+Li/2,!0);else if(I==="bevel"){const Ce=2*xe*xe,Ve=-Ce*Math.cos(r+Li/2)+i,Ye=-Ce*Math.sin(r+Li/2)+a,qe=Ce*Math.cos(n+Li/2)+i,ze=Ce*Math.sin(n+Li/2)+a;t.lineTo(Ve,Ye),t.lineTo(qe,ze)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function W7(t,e,r){const{startAngle:n,pixelMargin:i,x:a,y:s,outerRadius:d,innerRadius:_}=e;let N=i/d;t.beginPath(),t.arc(a,s,d,n-N,r+N),_>i?(N=i/_,t.arc(a,s,_,r+N,n-N,!0)):t.arc(a,s,i,r+Fa,n-Fa),t.closePath(),t.clip()}function q7(t){return py(t,["outerStart","outerEnd","innerStart","innerEnd"])}function V7(t,e,r,n){const i=q7(t.options.borderRadius),a=(r-e)/2,s=Math.min(a,n*e/2),d=_=>{const N=(r-Math.min(a,_))*n/2;return Ja(_,0,Math.min(a,N))};return{outerStart:d(i.outerStart),outerEnd:d(i.outerEnd),innerStart:Ja(i.innerStart,0,s),innerEnd:Ja(i.innerEnd,0,s)}}function Tu(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function Gp(t,e,r,n,i,a){const{x:s,y:d,startAngle:_,pixelMargin:N,innerRadius:I}=e,ye=Math.max(e.outerRadius+n+r-N,0),xe=I>0?I+n+r+N:0;let Ce=0;const Ve=i-_;if(n){const Ft=I>0?I-n:0,pt=ye>0?ye-n:0,Zt=(Ft+pt)/2,Jt=Zt!==0?Ve*Zt/(Zt+n):Ve;Ce=(Ve-Jt)/2}const Ye=Math.max(.001,Ve*ye-r/Li)/ye,qe=(Ve-Ye)/2,ze=_+qe+Ce,Oe=i-qe-Ce,{outerStart:We,outerEnd:ot,innerStart:st,innerEnd:Rt}=V7(e,xe,ye,Oe-ze),wt=ye-We,It=ye-ot,er=ze+We/wt,cr=Oe-ot/It,Tr=xe+st,xr=xe+Rt,lt=ze+st/Tr,gt=Oe-Rt/xr;if(t.beginPath(),a){const Ft=(er+cr)/2;if(t.arc(s,d,ye,er,Ft),t.arc(s,d,ye,Ft,cr),ot>0){const lr=Tu(It,cr,s,d);t.arc(lr.x,lr.y,ot,cr,Oe+Fa)}const pt=Tu(xr,Oe,s,d);if(t.lineTo(pt.x,pt.y),Rt>0){const lr=Tu(xr,gt,s,d);t.arc(lr.x,lr.y,Rt,Oe+Fa,gt+Math.PI)}const Zt=(Oe-Rt/xe+(ze+st/xe))/2;if(t.arc(s,d,xe,Oe-Rt/xe,Zt,!0),t.arc(s,d,xe,Zt,ze+st/xe,!0),st>0){const lr=Tu(Tr,lt,s,d);t.arc(lr.x,lr.y,st,lt+Math.PI,ze-Fa)}const Jt=Tu(wt,ze,s,d);if(t.lineTo(Jt.x,Jt.y),We>0){const lr=Tu(wt,er,s,d);t.arc(lr.x,lr.y,We,ze-Fa,er)}}else{t.moveTo(s,d);const Ft=Math.cos(er)*ye+s,pt=Math.sin(er)*ye+d;t.lineTo(Ft,pt);const Zt=Math.cos(cr)*ye+s,Jt=Math.sin(cr)*ye+d;t.lineTo(Zt,Jt)}t.closePath()}function U7(t,e,r,n,i){const{fullCircles:a,startAngle:s,circumference:d}=e;let _=e.endAngle;if(a){Gp(t,e,r,n,_,i);for(let N=0;N<a;++N)t.fill();isNaN(d)||(_=s+(d%fa||fa))}return Gp(t,e,r,n,_,i),t.fill(),_}function $7(t,e,r,n,i){const{fullCircles:a,startAngle:s,circumference:d,options:_}=e,{borderWidth:N,borderJoinStyle:I,borderDash:ye,borderDashOffset:xe,borderRadius:Ce}=_,Ve=_.borderAlign==="inner";if(!N)return;t.setLineDash(ye||[]),t.lineDashOffset=xe,Ve?(t.lineWidth=N*2,t.lineJoin=I||"round"):(t.lineWidth=N,t.lineJoin=I||"bevel");let Ye=e.endAngle;if(a){Gp(t,e,r,n,Ye,i);for(let qe=0;qe<a;++qe)t.stroke();isNaN(d)||(Ye=s+(d%fa||fa))}Ve&&W7(t,e,Ye),_.selfJoin&&Ye-s>=Li&&Ce===0&&I!=="miter"&&H7(t,e,Ye),a||(Gp(t,e,r,n,Ye,i),t.stroke())}class Hd extends Rl{constructor(r){super();hn(this,"circumference");hn(this,"endAngle");hn(this,"fullCircles");hn(this,"innerRadius");hn(this,"outerRadius");hn(this,"pixelMargin");hn(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,i){const a=this.getProps(["x","y"],i),{angle:s,distance:d}=S3(a,{x:r,y:n}),{startAngle:_,endAngle:N,innerRadius:I,outerRadius:ye,circumference:xe}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),Ce=(this.options.spacing+this.options.borderWidth)/2,Ve=ii(xe,N-_),Ye=Cf(s,_,N)&&_!==N,qe=Ve>=fa||Ye,ze=kl(d,I+Ce,ye+Ce);return qe&&ze}getCenterPoint(r){const{x:n,y:i,startAngle:a,endAngle:s,innerRadius:d,outerRadius:_}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:N,spacing:I}=this.options,ye=(a+s)/2,xe=(d+_+I+N)/2;return{x:n+Math.cos(ye)*xe,y:i+Math.sin(ye)*xe}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:i}=this,a=(n.offset||0)/4,s=(n.spacing||0)/2,d=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>fa?Math.floor(i/fa):0,i===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const _=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(_)*a,Math.sin(_)*a);const N=1-Math.sin(Math.min(Li,i||0)),I=a*N;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,U7(r,this,I,s,d),$7(r,this,I,s,d),r.restore()}}hn(Hd,"id","arc"),hn(Hd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),hn(Hd,"defaultRoutes",{backgroundColor:"backgroundColor"}),hn(Hd,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function i5(t,e,r=e){t.lineCap=ii(r.borderCapStyle,e.borderCapStyle),t.setLineDash(ii(r.borderDash,e.borderDash)),t.lineDashOffset=ii(r.borderDashOffset,e.borderDashOffset),t.lineJoin=ii(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ii(r.borderWidth,e.borderWidth),t.strokeStyle=ii(r.borderColor,e.borderColor)}function Y7(t,e,r){t.lineTo(r.x,r.y)}function G7(t){return t.stepped?v8:t.tension||t.cubicInterpolationMode==="monotone"?g8:Y7}function a5(t,e,r={}){const n=t.length,{start:i=0,end:a=n-1}=r,{start:s,end:d}=e,_=Math.max(i,s),N=Math.min(a,d),I=i<s&&a<s||i>d&&a>d;return{count:n,start:_,loop:e.loop,ilen:N<_&&!I?n+N-_:N-_}}function X7(t,e,r,n){const{points:i,options:a}=e,{count:s,start:d,loop:_,ilen:N}=a5(i,r,n),I=G7(a);let{move:ye=!0,reverse:xe}=n||{},Ce,Ve,Ye;for(Ce=0;Ce<=N;++Ce)Ve=i[(d+(xe?N-Ce:Ce))%s],!Ve.skip&&(ye?(t.moveTo(Ve.x,Ve.y),ye=!1):I(t,Ye,Ve,xe,a.stepped),Ye=Ve);return _&&(Ve=i[(d+(xe?N:0))%s],I(t,Ye,Ve,xe,a.stepped)),!!_}function Z7(t,e,r,n){const i=e.points,{count:a,start:s,ilen:d}=a5(i,r,n),{move:_=!0,reverse:N}=n||{};let I=0,ye=0,xe,Ce,Ve,Ye,qe,ze;const Oe=ot=>(s+(N?d-ot:ot))%a,We=()=>{Ye!==qe&&(t.lineTo(I,qe),t.lineTo(I,Ye),t.lineTo(I,ze))};for(_&&(Ce=i[Oe(0)],t.moveTo(Ce.x,Ce.y)),xe=0;xe<=d;++xe){if(Ce=i[Oe(xe)],Ce.skip)continue;const ot=Ce.x,st=Ce.y,Rt=ot|0;Rt===Ve?(st<Ye?Ye=st:st>qe&&(qe=st),I=(ye*I+ot)/++ye):(We(),t.lineTo(ot,st),Ve=Rt,ye=0,Ye=qe=st),ze=st}We()}function n0(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?Z7:X7}function Q7(t){return t.stepped?X8:t.tension||t.cubicInterpolationMode==="monotone"?Z8:Bc}function J7(t,e,r,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,r,n)&&i.closePath()),i5(t,e.options),t.stroke(i)}function K7(t,e,r,n){const{segments:i,options:a}=e,s=n0(e);for(const d of i)i5(t,a,d.style),t.beginPath(),s(t,e,d,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const eE=typeof Path2D=="function";function tE(t,e,r,n){eE&&!e.options.segment?J7(t,e,r,n):K7(t,e,r,n)}class Kl extends Rl{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;H8(this._points,n,e,i,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=rj(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,i=e[r],a=this.points,s=V3(this,{property:r,start:i,end:i});if(!s.length)return;const d=[],_=Q7(n);let N,I;for(N=0,I=s.length;N<I;++N){const{start:ye,end:xe}=s[N],Ce=a[ye],Ve=a[xe];if(Ce===Ve){d.push(Ce);continue}const Ye=Math.abs((i-Ce[r])/(Ve[r]-Ce[r])),qe=_(Ce,Ve,Ye,n.stepped);qe[r]=e[r],d.push(qe)}return d.length===1?d[0]:d}pathSegment(e,r,n){return n0(this)(e,this,r,n)}path(e,r,n){const i=this.segments,a=n0(this);let s=this._loop;r=r||0,n=n||this.points.length-r;for(const d of i)s&=a(e,this,d,{start:r,end:r+n-1});return!!s}draw(e,r,n,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),tE(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}hn(Kl,"id","line"),hn(Kl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),hn(Kl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),hn(Kl,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function _2(t,e,r,n){const i=t.options,{[r]:a}=t.getProps([r],n);return Math.abs(e-a)<i.radius+i.hitRadius}class mp extends Rl{constructor(r){super();hn(this,"parsed");hn(this,"skip");hn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,i){const a=this.options,{x:s,y:d}=this.getProps(["x","y"],i);return Math.pow(r-s,2)+Math.pow(n-d,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(r,n){return _2(this,r,"x",n)}inYRange(r,n){return _2(this,r,"y",n)}getCenterPoint(r){const{x:n,y:i}=this.getProps(["x","y"],r);return{x:n,y:i}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const i=n&&r.borderWidth||0;return(n+i)*2}draw(r,n){const i=this.options;this.skip||i.radius<.1||!Ml(this,n,this.size(i)/2)||(r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.fillStyle=i.backgroundColor,Kg(r,i,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}hn(mp,"id","point"),hn(mp,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),hn(mp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function s5(t,e){const{x:r,y:n,base:i,width:a,height:s}=t.getProps(["x","y","base","width","height"],e);let d,_,N,I,ye;return t.horizontal?(ye=s/2,d=Math.min(r,i),_=Math.max(r,i),N=n-ye,I=n+ye):(ye=a/2,d=r-ye,_=r+ye,N=Math.min(n,i),I=Math.max(n,i)),{left:d,top:N,right:_,bottom:I}}function ec(t,e,r,n){return t?0:Ja(e,r,n)}function rE(t,e,r){const n=t.options.borderWidth,i=t.borderSkipped,a=D3(n);return{t:ec(i.top,a.top,0,r),r:ec(i.right,a.right,0,e),b:ec(i.bottom,a.bottom,0,r),l:ec(i.left,a.left,0,e)}}function nE(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,a=Gc(i),s=Math.min(e,r),d=t.borderSkipped,_=n||yi(i);return{topLeft:ec(!_||d.top||d.left,a.topLeft,0,s),topRight:ec(!_||d.top||d.right,a.topRight,0,s),bottomLeft:ec(!_||d.bottom||d.left,a.bottomLeft,0,s),bottomRight:ec(!_||d.bottom||d.right,a.bottomRight,0,s)}}function iE(t){const e=s5(t),r=e.right-e.left,n=e.bottom-e.top,i=rE(t,r/2,n/2),a=nE(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:r-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function $v(t,e,r,n){const i=e===null,a=r===null,d=t&&!(i&&a)&&s5(t,n);return d&&(i||kl(e,d.left,d.right))&&(a||kl(r,d.top,d.bottom))}function aE(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function sE(t,e){t.rect(e.x,e.y,e.w,e.h)}function Yv(t,e,r={}){const n=t.x!==r.x?-e:0,i=t.y!==r.y?-e:0,a=(t.x+t.w!==r.x+r.w?e:0)-n,s=(t.y+t.h!==r.y+r.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+a,h:t.h+s,radius:t.radius}}class vp extends Rl{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:i}}=this,{inner:a,outer:s}=iE(this),d=aE(s.radius)?jf:sE;e.save(),(s.w!==a.w||s.h!==a.h)&&(e.beginPath(),d(e,Yv(s,r,a)),e.clip(),d(e,Yv(a,-r,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),d(e,Yv(a,r)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,r,n){return $v(this,e,r,n)}inXRange(e,r){return $v(this,e,null,r)}inYRange(e,r){return $v(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(r+i)/2:r,y:a?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}hn(vp,"id","bar"),hn(vp,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),hn(vp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var oE=Object.freeze({__proto__:null,ArcElement:Hd,BarElement:vp,LineElement:Kl,PointElement:mp});const i0=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],k2=i0.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function o5(t){return i0[t%i0.length]}function l5(t){return k2[t%k2.length]}function lE(t,e){return t.borderColor=o5(e),t.backgroundColor=l5(e),++e}function cE(t,e){return t.backgroundColor=t.data.map(()=>o5(e++)),e}function uE(t,e){return t.backgroundColor=t.data.map(()=>l5(e++)),e}function dE(t){let e=0;return(r,n)=>{const i=t.getDatasetMeta(n).controller;i instanceof Vc?e=cE(r,e):i instanceof of?e=uE(r,e):i&&(e=lE(r,e))}}function S2(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function fE(t){return t&&(t.borderColor||t.backgroundColor)}function hE(){return xa.borderColor!=="rgba(0,0,0,0.1)"||xa.backgroundColor!=="rgba(0,0,0,0.1)"}var pE={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,r){if(!r.enabled)return;const{data:{datasets:n},options:i}=t.config,{elements:a}=i,s=S2(n)||fE(i)||a&&S2(a)||hE();if(!r.forceOverride&&s)return;const d=dE(t);n.forEach(d)}};function mE(t,e,r,n,i){const a=i.samples||n;if(a>=r)return t.slice(e,e+r);const s=[],d=(r-2)/(a-2);let _=0;const N=e+r-1;let I=e,ye,xe,Ce,Ve,Ye;for(s[_++]=t[I],ye=0;ye<a-2;ye++){let qe=0,ze=0,Oe;const We=Math.floor((ye+1)*d)+1+e,ot=Math.min(Math.floor((ye+2)*d)+1,r)+e,st=ot-We;for(Oe=We;Oe<ot;Oe++)qe+=t[Oe].x,ze+=t[Oe].y;qe/=st,ze/=st;const Rt=Math.floor(ye*d)+1+e,wt=Math.min(Math.floor((ye+1)*d)+1,r)+e,{x:It,y:er}=t[I];for(Ce=Ve=-1,Oe=Rt;Oe<wt;Oe++)Ve=.5*Math.abs((It-qe)*(t[Oe].y-er)-(It-t[Oe].x)*(ze-er)),Ve>Ce&&(Ce=Ve,xe=t[Oe],Ye=Oe);s[_++]=xe,I=Ye}return s[_++]=t[N],s}function vE(t,e,r,n){let i=0,a=0,s,d,_,N,I,ye,xe,Ce,Ve,Ye;const qe=[],ze=e+r-1,Oe=t[e].x,ot=t[ze].x-Oe;for(s=e;s<e+r;++s){d=t[s],_=(d.x-Oe)/ot*n,N=d.y;const st=_|0;if(st===I)N<Ve?(Ve=N,ye=s):N>Ye&&(Ye=N,xe=s),i=(a*i+d.x)/++a;else{const Rt=s-1;if(!mi(ye)&&!mi(xe)){const wt=Math.min(ye,xe),It=Math.max(ye,xe);wt!==Ce&&wt!==Rt&&qe.push({...t[wt],x:i}),It!==Ce&&It!==Rt&&qe.push({...t[It],x:i})}s>0&&Rt!==Ce&&qe.push(t[Rt]),qe.push(d),I=st,a=0,Ve=Ye=N,ye=xe=Ce=s}}return qe}function c5(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function M2(t){t.data.datasets.forEach(e=>{c5(e)})}function gE(t,e){const r=e.length;let n=0,i;const{iScale:a}=t,{min:s,max:d,minDefined:_,maxDefined:N}=a.getUserBounds();return _&&(n=Ja(Sl(e,a.axis,s).lo,0,r-1)),N?i=Ja(Sl(e,a.axis,d).hi+1,n,r)-n:i=r-n,{start:n,count:i}}var yE={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,r)=>{if(!r.enabled){M2(t);return}const n=t.width;t.data.datasets.forEach((i,a)=>{const{_data:s,indexAxis:d}=i,_=t.getDatasetMeta(a),N=s||i.data;if(Od([d,t.options.indexAxis])==="y"||!_.controller.supportsDecimation)return;const I=t.scales[_.xAxisID];if(I.type!=="linear"&&I.type!=="time"||t.options.parsing)return;let{start:ye,count:xe}=gE(_,N);const Ce=r.threshold||4*n;if(xe<=Ce){c5(i);return}mi(s)&&(i._data=N,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(Ye){this._data=Ye}}));let Ve;switch(r.algorithm){case"lttb":Ve=mE(N,ye,xe,n,r);break;case"min-max":Ve=vE(N,ye,xe,n);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}i._decimated=Ve})},destroy(t){M2(t)}};function xE(t,e,r){const n=t.segments,i=t.points,a=e.points,s=[];for(const d of n){let{start:_,end:N}=d;N=ym(_,N,i);const I=a0(r,i[_],i[N],d.loop);if(!e.segments){s.push({source:d,target:I,start:i[_],end:i[N]});continue}const ye=V3(e,I);for(const xe of ye){const Ce=a0(r,a[xe.start],a[xe.end],xe.loop),Ve=q3(d,i,Ce);for(const Ye of Ve)s.push({source:Ye,target:xe,start:{[r]:T2(I,Ce,"start",Math.max)},end:{[r]:T2(I,Ce,"end",Math.min)}})}}return s}function a0(t,e,r,n){if(n)return;let i=e[t],a=r[t];return t==="angle"&&(i=_s(i),a=_s(a)),{property:t,start:i,end:a}}function bE(t,e){const{x:r=null,y:n=null}=t||{},i=e.points,a=[];return e.segments.forEach(({start:s,end:d})=>{d=ym(s,d,i);const _=i[s],N=i[d];n!==null?(a.push({x:_.x,y:n}),a.push({x:N.x,y:n})):r!==null&&(a.push({x:r,y:_.y}),a.push({x:r,y:N.y}))}),a}function ym(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function T2(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function u5(t,e){let r=[],n=!1;return ya(t)?(n=!0,r=t):r=bE(t,e),r.length?new Kl({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function A2(t){return t&&t.fill!==!1}function wE(t,e,r){let i=t[e].fill;const a=[e];let s;if(!r)return i;for(;i!==!1&&a.indexOf(i)===-1;){if(!Ea(i))return i;if(s=t[i],!s)return!1;if(s.visible)return i;a.push(i),i=s.fill}return!1}function _E(t,e,r){const n=TE(t);if(yi(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Ea(i)&&Math.floor(i)===i?kE(n[0],e,i,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function kE(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function SE(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:yi(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function ME(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:yi(t)?n=t.value:n=e.getBaseValue(),n}function TE(t){const e=t.options,r=e.fill;let n=ii(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function AE(t){const{scale:e,index:r,line:n}=t,i=[],a=n.segments,s=n.points,d=CE(e,r);d.push(u5({x:null,y:e.bottom},n));for(let _=0;_<a.length;_++){const N=a[_];for(let I=N.start;I<=N.end;I++)jE(i,s[I],d)}return new Kl({points:i,options:{}})}function CE(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const a=n[i];if(a.index===e)break;a.hidden||r.unshift(a.dataset)}return r}function jE(t,e,r){const n=[];for(let i=0;i<r.length;i++){const a=r[i],{first:s,last:d,point:_}=EE(a,e,"x");if(!(!_||s&&d)){if(s)n.unshift(_);else if(t.push(_),!d)break}}t.push(...n)}function EE(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const i=n[r],a=t.segments,s=t.points;let d=!1,_=!1;for(let N=0;N<a.length;N++){const I=a[N],ye=s[I.start][r],xe=s[I.end][r];if(kl(i,ye,xe)){d=i===ye,_=i===xe;break}}return{first:d,last:_,point:n}}class d5{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:i,y:a,radius:s}=this;return r=r||{start:0,end:fa},e.arc(i,a,s,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:i}=this,a=e.angle;return{x:r+Math.cos(a)*i,y:n+Math.sin(a)*i,angle:a}}}function LE(t){const{chart:e,fill:r,line:n}=t;if(Ea(r))return RE(e,r);if(r==="stack")return AE(t);if(r==="shape")return!0;const i=DE(t);return i instanceof d5?i:u5(i,n)}function RE(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function DE(t){return(t.scale||{}).getPointPositionForValue?NE(t):PE(t)}function PE(t){const{scale:e={},fill:r}=t,n=SE(r,e);if(Ea(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function NE(t){const{scale:e,fill:r}=t,n=e.options,i=e.getLabels().length,a=n.reverse?e.max:e.min,s=ME(r,e,a),d=[];if(n.grid.circular){const _=e.getPointPositionForValue(0,a);return new d5({x:_.x,y:_.y,radius:e.getDistanceFromCenterForValue(s)})}for(let _=0;_<i;++_)d.push(e.getPointPositionForValue(_,s));return d}function Gv(t,e,r){const n=LE(e),{chart:i,index:a,line:s,scale:d,axis:_}=e,N=s.options,I=N.fill,ye=N.backgroundColor,{above:xe=ye,below:Ce=ye}=I||{},Ve=i.getDatasetMeta(a),Ye=U3(i,Ve);n&&s.points.length&&(pm(t,r),zE(t,{line:s,target:n,above:xe,below:Ce,area:r,scale:d,axis:_,clip:Ye}),mm(t))}function zE(t,e){const{line:r,target:n,above:i,below:a,area:s,scale:d,clip:_}=e,N=r._loop?"angle":e.axis;t.save();let I=a;a!==i&&(N==="x"?(C2(t,n,s.top),Xv(t,{line:r,target:n,color:i,scale:d,property:N,clip:_}),t.restore(),t.save(),C2(t,n,s.bottom)):N==="y"&&(j2(t,n,s.left),Xv(t,{line:r,target:n,color:a,scale:d,property:N,clip:_}),t.restore(),t.save(),j2(t,n,s.right),I=i)),Xv(t,{line:r,target:n,color:I,scale:d,property:N,clip:_}),t.restore()}function C2(t,e,r){const{segments:n,points:i}=e;let a=!0,s=!1;t.beginPath();for(const d of n){const{start:_,end:N}=d,I=i[_],ye=i[ym(_,N,i)];a?(t.moveTo(I.x,I.y),a=!1):(t.lineTo(I.x,r),t.lineTo(I.x,I.y)),s=!!e.pathSegment(t,d,{move:s}),s?t.closePath():t.lineTo(ye.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function j2(t,e,r){const{segments:n,points:i}=e;let a=!0,s=!1;t.beginPath();for(const d of n){const{start:_,end:N}=d,I=i[_],ye=i[ym(_,N,i)];a?(t.moveTo(I.x,I.y),a=!1):(t.lineTo(r,I.y),t.lineTo(I.x,I.y)),s=!!e.pathSegment(t,d,{move:s}),s?t.closePath():t.lineTo(r,ye.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function Xv(t,e){const{line:r,target:n,property:i,color:a,scale:s,clip:d}=e,_=xE(r,n,i);for(const{source:N,target:I,start:ye,end:xe}of _){const{style:{backgroundColor:Ce=a}={}}=N,Ve=n!==!0;t.save(),t.fillStyle=Ce,FE(t,s,d,Ve&&a0(i,ye,xe)),t.beginPath();const Ye=!!r.pathSegment(t,N);let qe;if(Ve){Ye?t.closePath():E2(t,n,xe,i);const ze=!!n.pathSegment(t,I,{move:Ye,reverse:!0});qe=Ye&&ze,qe||E2(t,n,ye,i)}t.closePath(),t.fill(qe?"evenodd":"nonzero"),t.restore()}}function FE(t,e,r,n){const i=e.chart.chartArea,{property:a,start:s,end:d}=n||{};if(a==="x"||a==="y"){let _,N,I,ye;a==="x"?(_=s,N=i.top,I=d,ye=i.bottom):(_=i.left,N=s,I=i.right,ye=d),t.beginPath(),r&&(_=Math.max(_,r.left),I=Math.min(I,r.right),N=Math.max(N,r.top),ye=Math.min(ye,r.bottom)),t.rect(_,N,I-_,ye-N),t.clip()}}function E2(t,e,r,n){const i=e.interpolate(r,n);i&&t.lineTo(i.x,i.y)}var IE={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,i=[];let a,s,d,_;for(s=0;s<n;++s)a=t.getDatasetMeta(s),d=a.dataset,_=null,d&&d.options&&d instanceof Kl&&(_={visible:t.isDatasetVisible(s),index:s,fill:_E(d,s,n),chart:t,axis:a.controller.options.indexAxis,scale:a.vScale,line:d}),a.$filler=_,i.push(_);for(s=0;s<n;++s)_=i[s],!(!_||_.fill===!1)&&(_.fill=wE(i,s,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),a=t.chartArea;for(let s=i.length-1;s>=0;--s){const d=i[s].$filler;d&&(d.line.updateControlPoints(a,d.axis),n&&d.fill&&Gv(t.ctx,d,a))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const a=n[i].$filler;A2(a)&&Gv(t.ctx,a,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!A2(n)||r.drawTime!=="beforeDatasetDraw"||Gv(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const L2=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},OE=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class R2 extends Rl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=ia(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=Ua(n.font),a=i.size,s=this._computeTitleHeight(),{boxWidth:d,itemHeight:_}=L2(n,a);let N,I;r.font=i.string,this.isHorizontal()?(N=this.maxWidth,I=this._fitRows(s,a,d,_)+10):(I=this.maxHeight,N=this._fitCols(s,i,d,_)+10),this.width=Math.min(N,e.maxWidth||this.maxWidth),this.height=Math.min(I,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,i){const{ctx:a,maxWidth:s,options:{labels:{padding:d}}}=this,_=this.legendHitBoxes=[],N=this.lineWidths=[0],I=i+d;let ye=e;a.textAlign="left",a.textBaseline="middle";let xe=-1,Ce=-I;return this.legendItems.forEach((Ve,Ye)=>{const qe=n+r/2+a.measureText(Ve.text).width;(Ye===0||N[N.length-1]+qe+2*d>s)&&(ye+=I,N[N.length-(Ye>0?0:1)]=0,Ce+=I,xe++),_[Ye]={left:0,top:Ce,row:xe,width:qe,height:i},N[N.length-1]+=qe+d}),ye}_fitCols(e,r,n,i){const{ctx:a,maxHeight:s,options:{labels:{padding:d}}}=this,_=this.legendHitBoxes=[],N=this.columnSizes=[],I=s-e;let ye=d,xe=0,Ce=0,Ve=0,Ye=0;return this.legendItems.forEach((qe,ze)=>{const{itemWidth:Oe,itemHeight:We}=BE(n,r,a,qe,i);ze>0&&Ce+We+2*d>I&&(ye+=xe+d,N.push({width:xe,height:Ce}),Ve+=xe+d,Ye++,xe=Ce=0),_[ze]={left:Ve,top:Ce,col:Ye,width:Oe,height:We},xe=Math.max(xe,Oe),Ce+=We+d}),ye+=xe,N.push({width:xe,height:Ce}),ye}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:i},rtl:a}}=this,s=Uu(a,this.left,this.width);if(this.isHorizontal()){let d=0,_=ws(n,this.left+i,this.right-this.lineWidths[d]);for(const N of r)d!==N.row&&(d=N.row,_=ws(n,this.left+i,this.right-this.lineWidths[d])),N.top+=this.top+e+i,N.left=s.leftForLtr(s.x(_),N.width),_+=N.width+i}else{let d=0,_=ws(n,this.top+e+i,this.bottom-this.columnSizes[d].height);for(const N of r)N.col!==d&&(d=N.col,_=ws(n,this.top+e+i,this.bottom-this.columnSizes[d].height)),N.top=_,N.left+=this.left+i,N.left=s.leftForLtr(s.x(N.left),N.width),_+=N.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;pm(e,this),this._draw(),mm(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:i}=this,{align:a,labels:s}=e,d=xa.color,_=Uu(e.rtl,this.left,this.width),N=Ua(s.font),{padding:I}=s,ye=N.size,xe=ye/2;let Ce;this.drawTitle(),i.textAlign=_.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=N.string;const{boxWidth:Ve,boxHeight:Ye,itemHeight:qe}=L2(s,ye),ze=function(Rt,wt,It){if(isNaN(Ve)||Ve<=0||isNaN(Ye)||Ye<0)return;i.save();const er=ii(It.lineWidth,1);if(i.fillStyle=ii(It.fillStyle,d),i.lineCap=ii(It.lineCap,"butt"),i.lineDashOffset=ii(It.lineDashOffset,0),i.lineJoin=ii(It.lineJoin,"miter"),i.lineWidth=er,i.strokeStyle=ii(It.strokeStyle,d),i.setLineDash(ii(It.lineDash,[])),s.usePointStyle){const cr={radius:Ye*Math.SQRT2/2,pointStyle:It.pointStyle,rotation:It.rotation,borderWidth:er},Tr=_.xPlus(Rt,Ve/2),xr=wt+xe;R3(i,cr,Tr,xr,s.pointStyleWidth&&Ve)}else{const cr=wt+Math.max((ye-Ye)/2,0),Tr=_.leftForLtr(Rt,Ve),xr=Gc(It.borderRadius);i.beginPath(),Object.values(xr).some(lt=>lt!==0)?jf(i,{x:Tr,y:cr,w:Ve,h:Ye,radius:xr}):i.rect(Tr,cr,Ve,Ye),i.fill(),er!==0&&i.stroke()}i.restore()},Oe=function(Rt,wt,It){ru(i,It.text,Rt,wt+qe/2,N,{strikethrough:It.hidden,textAlign:_.textAlign(It.textAlign)})},We=this.isHorizontal(),ot=this._computeTitleHeight();We?Ce={x:ws(a,this.left+I,this.right-n[0]),y:this.top+I+ot,line:0}:Ce={x:this.left+I,y:ws(a,this.top+ot+I,this.bottom-r[0].height),line:0},B3(this.ctx,e.textDirection);const st=qe+I;this.legendItems.forEach((Rt,wt)=>{i.strokeStyle=Rt.fontColor,i.fillStyle=Rt.fontColor;const It=i.measureText(Rt.text).width,er=_.textAlign(Rt.textAlign||(Rt.textAlign=s.textAlign)),cr=Ve+xe+It;let Tr=Ce.x,xr=Ce.y;_.setWidth(this.width),We?wt>0&&Tr+cr+I>this.right&&(xr=Ce.y+=st,Ce.line++,Tr=Ce.x=ws(a,this.left+I,this.right-n[Ce.line])):wt>0&&xr+st>this.bottom&&(Tr=Ce.x=Tr+r[Ce.line].width+I,Ce.line++,xr=Ce.y=ws(a,this.top+ot+I,this.bottom-r[Ce.line].height));const lt=_.x(Tr);if(ze(lt,xr,Rt),Tr=a8(er,Tr+Ve+xe,We?Tr+cr:this.right,e.rtl),Oe(_.x(Tr),xr,Rt),We)Ce.x+=cr+I;else if(typeof Rt.text!="string"){const gt=N.lineHeight;Ce.y+=f5(Rt,gt)+I}else Ce.y+=st}),H3(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=Ua(r.font),i=Ts(r.padding);if(!r.display)return;const a=Uu(e.rtl,this.left,this.width),s=this.ctx,d=r.position,_=n.size/2,N=i.top+_;let I,ye=this.left,xe=this.width;if(this.isHorizontal())xe=Math.max(...this.lineWidths),I=this.top+N,ye=ws(e.align,ye,this.right-xe);else{const Ve=this.columnSizes.reduce((Ye,qe)=>Math.max(Ye,qe.height),0);I=N+ws(e.align,this.top,this.bottom-Ve-e.labels.padding-this._computeTitleHeight())}const Ce=ws(d,ye,ye+xe);s.textAlign=a.textAlign(fy(d)),s.textBaseline="middle",s.strokeStyle=r.color,s.fillStyle=r.color,s.font=n.string,ru(s,r.text,Ce,I,n)}_computeTitleHeight(){const e=this.options.title,r=Ua(e.font),n=Ts(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,i,a;if(kl(e,this.left,this.right)&&kl(r,this.top,this.bottom)){for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(i=a[n],kl(e,i.left,i.left+i.width)&&kl(r,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!qE(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=OE(i,n);i&&!a&&ia(r.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!a&&ia(r.onHover,[e,n,this],this)}else n&&ia(r.onClick,[e,n,this],this)}}function BE(t,e,r,n,i){const a=HE(n,t,e,r),s=WE(i,n,e.lineHeight);return{itemWidth:a,itemHeight:s}}function HE(t,e,r,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((a,s)=>a.length>s.length?a:s)),e+r.size/2+n.measureText(i).width}function WE(t,e,r){let n=t;return typeof e.text!="string"&&(n=f5(e,r)),n}function f5(t,e){const r=t.text?t.text.length:0;return e*r}function qE(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var VE={id:"legend",_element:R2,start(t,e,r){const n=t.legend=new R2({ctx:t.ctx,options:r,chart:t});Ss.configure(t,n,r),Ss.addBox(t,n)},stop(t){Ss.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;Ss.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,i=r.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:i,color:a,useBorderRadius:s,borderRadius:d}}=t.legend.options;return t._getSortedDatasetMetas().map(_=>{const N=_.controller.getStyle(r?0:void 0),I=Ts(N.borderWidth);return{text:e[_.index].label,fillStyle:N.backgroundColor,fontColor:a,hidden:!_.visible,lineCap:N.borderCapStyle,lineDash:N.borderDash,lineDashOffset:N.borderDashOffset,lineJoin:N.borderJoinStyle,lineWidth:(I.width+I.height)/4,strokeStyle:N.borderColor,pointStyle:n||N.pointStyle,rotation:N.rotation,textAlign:i||N.textAlign,borderRadius:s&&(d||N.borderRadius),datasetIndex:_.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class wy extends Rl{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const i=ya(n.text)?n.text.length:1;this._padding=Ts(n.padding);const a=i*Ua(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:i,right:a,options:s}=this,d=s.align;let _=0,N,I,ye;return this.isHorizontal()?(I=ws(d,n,a),ye=r+e,N=a-n):(s.position==="left"?(I=n+e,ye=ws(d,i,r),_=Li*-.5):(I=a-e,ye=ws(d,r,i),_=Li*.5),N=i-r),{titleX:I,titleY:ye,maxWidth:N,rotation:_}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=Ua(r.font),a=n.lineHeight/2+this._padding.top,{titleX:s,titleY:d,maxWidth:_,rotation:N}=this._drawArgs(a);ru(e,r.text,0,0,n,{color:r.color,maxWidth:_,rotation:N,textAlign:fy(r.align),textBaseline:"middle",translation:[s,d]})}}function UE(t,e){const r=new wy({ctx:t.ctx,options:e,chart:t});Ss.configure(t,r,e),Ss.addBox(t,r),t.titleBlock=r}var $E={id:"title",_element:wy,start(t,e,r){UE(t,r)},stop(t){const e=t.titleBlock;Ss.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;Ss.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Vh=new WeakMap;var YE={id:"subtitle",start(t,e,r){const n=new wy({ctx:t.ctx,options:r,chart:t});Ss.configure(t,n,r),Ss.addBox(t,n),Vh.set(t,n)},stop(t){Ss.removeBox(t,Vh.get(t)),Vh.delete(t)},beforeUpdate(t,e,r){const n=Vh.get(t);Ss.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wd={average(t){if(!t.length)return!1;let e,r,n=new Set,i=0,a=0;for(e=0,r=t.length;e<r;++e){const d=t[e].element;if(d&&d.hasValue()){const _=d.tooltipPosition();n.add(_.x),i+=_.y,++a}}return a===0||n.size===0?!1:{x:[...n].reduce((d,_)=>d+_)/n.size,y:i/a}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,i=Number.POSITIVE_INFINITY,a,s,d;for(a=0,s=t.length;a<s;++a){const _=t[a].element;if(_&&_.hasValue()){const N=_.getCenterPoint(),I=Qg(e,N);I<i&&(i=I,d=_)}}if(d){const _=d.tooltipPosition();r=_.x,n=_.y}return{x:r,y:n}}};function Xo(t,e){return e&&(ya(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function gl(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function GE(t,e){const{element:r,datasetIndex:n,index:i}=e,a=t.getDatasetMeta(n).controller,{label:s,value:d}=a.getLabelAndValue(i);return{chart:t,label:s,parsed:a.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:d,dataset:a.getDataset(),dataIndex:i,datasetIndex:n,element:r}}function D2(t,e){const r=t.chart.ctx,{body:n,footer:i,title:a}=t,{boxWidth:s,boxHeight:d}=e,_=Ua(e.bodyFont),N=Ua(e.titleFont),I=Ua(e.footerFont),ye=a.length,xe=i.length,Ce=n.length,Ve=Ts(e.padding);let Ye=Ve.height,qe=0,ze=n.reduce((ot,st)=>ot+st.before.length+st.lines.length+st.after.length,0);if(ze+=t.beforeBody.length+t.afterBody.length,ye&&(Ye+=ye*N.lineHeight+(ye-1)*e.titleSpacing+e.titleMarginBottom),ze){const ot=e.displayColors?Math.max(d,_.lineHeight):_.lineHeight;Ye+=Ce*ot+(ze-Ce)*_.lineHeight+(ze-1)*e.bodySpacing}xe&&(Ye+=e.footerMarginTop+xe*I.lineHeight+(xe-1)*e.footerSpacing);let Oe=0;const We=function(ot){qe=Math.max(qe,r.measureText(ot).width+Oe)};return r.save(),r.font=N.string,Ui(t.title,We),r.font=_.string,Ui(t.beforeBody.concat(t.afterBody),We),Oe=e.displayColors?s+2+e.boxPadding:0,Ui(n,ot=>{Ui(ot.before,We),Ui(ot.lines,We),Ui(ot.after,We)}),Oe=0,r.font=I.string,Ui(t.footer,We),r.restore(),qe+=Ve.width,{width:qe,height:Ye}}function XE(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function ZE(t,e,r,n){const{x:i,width:a}=n,s=r.caretSize+r.caretPadding;if(t==="left"&&i+a+s>e.width||t==="right"&&i-a-s<0)return!0}function QE(t,e,r,n){const{x:i,width:a}=r,{width:s,chartArea:{left:d,right:_}}=t;let N="center";return n==="center"?N=i<=(d+_)/2?"left":"right":i<=a/2?N="left":i>=s-a/2&&(N="right"),ZE(N,t,e,r)&&(N="center"),N}function P2(t,e,r){const n=r.yAlign||e.yAlign||XE(t,r);return{xAlign:r.xAlign||e.xAlign||QE(t,e,r,n),yAlign:n}}function JE(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function KE(t,e,r){let{y:n,height:i}=t;return e==="top"?n+=r:e==="bottom"?n-=i+r:n-=i/2,n}function N2(t,e,r,n){const{caretSize:i,caretPadding:a,cornerRadius:s}=t,{xAlign:d,yAlign:_}=r,N=i+a,{topLeft:I,topRight:ye,bottomLeft:xe,bottomRight:Ce}=Gc(s);let Ve=JE(e,d);const Ye=KE(e,_,N);return _==="center"?d==="left"?Ve+=N:d==="right"&&(Ve-=N):d==="left"?Ve-=Math.max(I,xe)+i:d==="right"&&(Ve+=Math.max(ye,Ce)+i),{x:Ja(Ve,0,n.width-e.width),y:Ja(Ye,0,n.height-e.height)}}function Uh(t,e,r){const n=Ts(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function z2(t){return Xo([],gl(t))}function eL(t,e,r){return xc(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function F2(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const h5={beforeTitle:pl,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:pl,beforeBody:pl,beforeLabel:pl,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return mi(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:pl,afterBody:pl,beforeFooter:pl,footer:pl,afterFooter:pl};function $s(t,e,r,n){const i=t[e].call(r,n);return typeof i>"u"?h5[e].call(r,n):i}class s0 extends Rl{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&r.options.animation&&n.animations,a=new $3(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=eL(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,i=$s(n,"beforeTitle",this,e),a=$s(n,"title",this,e),s=$s(n,"afterTitle",this,e);let d=[];return d=Xo(d,gl(i)),d=Xo(d,gl(a)),d=Xo(d,gl(s)),d}getBeforeBody(e,r){return z2($s(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,i=[];return Ui(e,a=>{const s={before:[],lines:[],after:[]},d=F2(n,a);Xo(s.before,gl($s(d,"beforeLabel",this,a))),Xo(s.lines,$s(d,"label",this,a)),Xo(s.after,gl($s(d,"afterLabel",this,a))),i.push(s)}),i}getAfterBody(e,r){return z2($s(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,i=$s(n,"beforeFooter",this,e),a=$s(n,"footer",this,e),s=$s(n,"afterFooter",this,e);let d=[];return d=Xo(d,gl(i)),d=Xo(d,gl(a)),d=Xo(d,gl(s)),d}_createItems(e){const r=this._active,n=this.chart.data,i=[],a=[],s=[];let d=[],_,N;for(_=0,N=r.length;_<N;++_)d.push(GE(this.chart,r[_]));return e.filter&&(d=d.filter((I,ye,xe)=>e.filter(I,ye,xe,n))),e.itemSort&&(d=d.sort((I,ye)=>e.itemSort(I,ye,n))),Ui(d,I=>{const ye=F2(e.callbacks,I);i.push($s(ye,"labelColor",this,I)),a.push($s(ye,"labelPointStyle",this,I)),s.push($s(ye,"labelTextColor",this,I))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=s,this.dataPoints=d,d}update(e,r){const n=this.options.setContext(this.getContext()),i=this._active;let a,s=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const d=Wd[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const _=this._size=D2(this,n),N=Object.assign({},d,_),I=P2(this.chart,n,N),ye=N2(n,N,I,this.chart);this.xAlign=I.xAlign,this.yAlign=I.yAlign,a={opacity:1,x:ye.x,y:ye.y,width:_.width,height:_.height,caretX:d.x,caretY:d.y}}this._tooltipItems=s,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,i){const a=this.getCaretPosition(e,n,i);r.lineTo(a.x1,a.y1),r.lineTo(a.x2,a.y2),r.lineTo(a.x3,a.y3)}getCaretPosition(e,r,n){const{xAlign:i,yAlign:a}=this,{caretSize:s,cornerRadius:d}=n,{topLeft:_,topRight:N,bottomLeft:I,bottomRight:ye}=Gc(d),{x:xe,y:Ce}=e,{width:Ve,height:Ye}=r;let qe,ze,Oe,We,ot,st;return a==="center"?(ot=Ce+Ye/2,i==="left"?(qe=xe,ze=qe-s,We=ot+s,st=ot-s):(qe=xe+Ve,ze=qe+s,We=ot-s,st=ot+s),Oe=qe):(i==="left"?ze=xe+Math.max(_,I)+s:i==="right"?ze=xe+Ve-Math.max(N,ye)-s:ze=this.caretX,a==="top"?(We=Ce,ot=We-s,qe=ze-s,Oe=ze+s):(We=Ce+Ye,ot=We+s,qe=ze+s,Oe=ze-s),st=We),{x1:qe,x2:ze,x3:Oe,y1:We,y2:ot,y3:st}}drawTitle(e,r,n){const i=this.title,a=i.length;let s,d,_;if(a){const N=Uu(n.rtl,this.x,this.width);for(e.x=Uh(this,n.titleAlign,n),r.textAlign=N.textAlign(n.titleAlign),r.textBaseline="middle",s=Ua(n.titleFont),d=n.titleSpacing,r.fillStyle=n.titleColor,r.font=s.string,_=0;_<a;++_)r.fillText(i[_],N.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+d,_+1===a&&(e.y+=n.titleMarginBottom-d)}}_drawColorBox(e,r,n,i,a){const s=this.labelColors[n],d=this.labelPointStyles[n],{boxHeight:_,boxWidth:N}=a,I=Ua(a.bodyFont),ye=Uh(this,"left",a),xe=i.x(ye),Ce=_<I.lineHeight?(I.lineHeight-_)/2:0,Ve=r.y+Ce;if(a.usePointStyle){const Ye={radius:Math.min(N,_)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},qe=i.leftForLtr(xe,N)+N/2,ze=Ve+_/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Kg(e,Ye,qe,ze),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Kg(e,Ye,qe,ze)}else{e.lineWidth=yi(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const Ye=i.leftForLtr(xe,N),qe=i.leftForLtr(i.xPlus(xe,1),N-2),ze=Gc(s.borderRadius);Object.values(ze).some(Oe=>Oe!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,jf(e,{x:Ye,y:Ve,w:N,h:_,radius:ze}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),jf(e,{x:qe,y:Ve+1,w:N-2,h:_-2,radius:ze}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(Ye,Ve,N,_),e.strokeRect(Ye,Ve,N,_),e.fillStyle=s.backgroundColor,e.fillRect(qe,Ve+1,N-2,_-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:i}=this,{bodySpacing:a,bodyAlign:s,displayColors:d,boxHeight:_,boxWidth:N,boxPadding:I}=n,ye=Ua(n.bodyFont);let xe=ye.lineHeight,Ce=0;const Ve=Uu(n.rtl,this.x,this.width),Ye=function(It){r.fillText(It,Ve.x(e.x+Ce),e.y+xe/2),e.y+=xe+a},qe=Ve.textAlign(s);let ze,Oe,We,ot,st,Rt,wt;for(r.textAlign=s,r.textBaseline="middle",r.font=ye.string,e.x=Uh(this,qe,n),r.fillStyle=n.bodyColor,Ui(this.beforeBody,Ye),Ce=d&&qe!=="right"?s==="center"?N/2+I:N+2+I:0,ot=0,Rt=i.length;ot<Rt;++ot){for(ze=i[ot],Oe=this.labelTextColors[ot],r.fillStyle=Oe,Ui(ze.before,Ye),We=ze.lines,d&&We.length&&(this._drawColorBox(r,e,ot,Ve,n),xe=Math.max(ye.lineHeight,_)),st=0,wt=We.length;st<wt;++st)Ye(We[st]),xe=ye.lineHeight;Ui(ze.after,Ye)}Ce=0,xe=ye.lineHeight,Ui(this.afterBody,Ye),e.y-=a}drawFooter(e,r,n){const i=this.footer,a=i.length;let s,d;if(a){const _=Uu(n.rtl,this.x,this.width);for(e.x=Uh(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=_.textAlign(n.footerAlign),r.textBaseline="middle",s=Ua(n.footerFont),r.fillStyle=n.footerColor,r.font=s.string,d=0;d<a;++d)r.fillText(i[d],_.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,r,n,i){const{xAlign:a,yAlign:s}=this,{x:d,y:_}=e,{width:N,height:I}=n,{topLeft:ye,topRight:xe,bottomLeft:Ce,bottomRight:Ve}=Gc(i.cornerRadius);r.fillStyle=i.backgroundColor,r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.beginPath(),r.moveTo(d+ye,_),s==="top"&&this.drawCaret(e,r,n,i),r.lineTo(d+N-xe,_),r.quadraticCurveTo(d+N,_,d+N,_+xe),s==="center"&&a==="right"&&this.drawCaret(e,r,n,i),r.lineTo(d+N,_+I-Ve),r.quadraticCurveTo(d+N,_+I,d+N-Ve,_+I),s==="bottom"&&this.drawCaret(e,r,n,i),r.lineTo(d+Ce,_+I),r.quadraticCurveTo(d,_+I,d,_+I-Ce),s==="center"&&a==="left"&&this.drawCaret(e,r,n,i),r.lineTo(d,_+ye),r.quadraticCurveTo(d,_,d+ye,_),r.closePath(),r.fill(),i.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,i=n&&n.x,a=n&&n.y;if(i||a){const s=Wd[e.position].call(this,this._active,this._eventPosition);if(!s)return;const d=this._size=D2(this,e),_=Object.assign({},s,this._size),N=P2(r,e,_),I=N2(e,_,N,r);(i._to!==I.x||a._to!==I.y)&&(this.xAlign=N.xAlign,this.yAlign=N.yAlign,this.width=d.width,this.height=d.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,I))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Ts(r.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&d&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,i,r),B3(e,r.textDirection),a.y+=s.top,this.drawTitle(a,e,r),this.drawBody(a,e,r),this.drawFooter(a,e,r),H3(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,i=e.map(({datasetIndex:d,index:_})=>{const N=this.chart.getDatasetMeta(d);if(!N)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:N.data[_],index:_}}),a=!Wp(n,i),s=this._positionChanged(i,r);(a||s)&&(this._active=i,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],s=this._getActiveElements(e,a,r,n),d=this._positionChanged(s,e),_=r||!Wp(s,a)||d;return _&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),_}_getActiveElements(e,r,n,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return r.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const s=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&s.reverse(),s}_positionChanged(e,r){const{caretX:n,caretY:i,options:a}=this,s=Wd[a.position].call(this,e,r);return s!==!1&&(n!==s.x||i!==s.y)}}hn(s0,"positioners",Wd);var tL={id:"tooltip",_element:s0,positioners:Wd,afterInit(t,e,r){r&&(t.tooltip=new s0({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:h5},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},rL=Object.freeze({__proto__:null,Colors:pE,Decimation:yE,Filler:IE,Legend:VE,SubTitle:YE,Title:$E,Tooltip:tL});const nL=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function iL(t,e,r,n){const i=t.indexOf(e);if(i===-1)return nL(t,e,r,n);const a=t.lastIndexOf(e);return i!==a?r:i}const aL=(t,e)=>t===null?null:Ja(Math.round(t),0,e);function I2(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class o0 extends su{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:i,label:a}of r)n[i]===a&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(mi(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:iL(n,e,ii(r,e),this._addedLabels),aL(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,i=[];let a=this.getLabels();a=e===0&&r===a.length-1?a:a.slice(e,r+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=r;s++)i.push({value:s});return i}getLabelForValue(e){return I2.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}hn(o0,"id","category"),hn(o0,"defaults",{ticks:{callback:I2}});function sL(t,e){const r=[],{bounds:i,step:a,min:s,max:d,precision:_,count:N,maxTicks:I,maxDigits:ye,includeBounds:xe}=t,Ce=a||1,Ve=I-1,{min:Ye,max:qe}=e,ze=!mi(s),Oe=!mi(d),We=!mi(N),ot=(qe-Ye)/(ye+1);let st=Db((qe-Ye)/Ve/Ce)*Ce,Rt,wt,It,er;if(st<1e-14&&!ze&&!Oe)return[{value:Ye},{value:qe}];er=Math.ceil(qe/st)-Math.floor(Ye/st),er>Ve&&(st=Db(er*st/Ve/Ce)*Ce),mi(_)||(Rt=Math.pow(10,_),st=Math.ceil(st*Rt)/Rt),i==="ticks"?(wt=Math.floor(Ye/st)*st,It=Math.ceil(qe/st)*st):(wt=Ye,It=qe),ze&&Oe&&a&&J6((d-s)/a,st/1e3)?(er=Math.round(Math.min((d-s)/st,I)),st=(d-s)/er,wt=s,It=d):We?(wt=ze?s:wt,It=Oe?d:It,er=N-1,st=(It-wt)/er):(er=(It-wt)/st,nf(er,Math.round(er),st/1e3)?er=Math.round(er):er=Math.ceil(er));const cr=Math.max(Pb(st),Pb(wt));Rt=Math.pow(10,mi(_)?cr:_),wt=Math.round(wt*Rt)/Rt,It=Math.round(It*Rt)/Rt;let Tr=0;for(ze&&(xe&&wt!==s?(r.push({value:s}),wt<s&&Tr++,nf(Math.round((wt+Tr*st)*Rt)/Rt,s,O2(s,ot,t))&&Tr++):wt<s&&Tr++);Tr<er;++Tr){const xr=Math.round((wt+Tr*st)*Rt)/Rt;if(Oe&&xr>d)break;r.push({value:xr})}return Oe&&xe&&It!==d?r.length&&nf(r[r.length-1].value,d,O2(d,ot,t))?r[r.length-1].value=d:r.push({value:d}):(!Oe||It===d)&&r.push({value:It}),r}function O2(t,e,{horizontal:r,minRotation:n}){const i=Fo(n),a=(r?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+t).length;return Math.min(e/a,s)}class Xp extends su{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return mi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:i,max:a}=this;const s=_=>i=r?i:_,d=_=>a=n?a:_;if(e){const _=rl(i),N=rl(a);_<0&&N<0?d(0):_>0&&N>0&&s(0)}if(i===a){let _=a===0?1:Math.abs(a*.05);d(a+_),e||s(i-_)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),r=r||11),r&&(i=Math.min(r,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},a=this._range||this,s=sL(i,a);return e.bounds==="ticks"&&k3(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-r)/Math.max(e.length-1,1)/2;r-=i,n+=i}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return Of(e,this.chart.options.locale,this.options.ticks.format)}}class l0 extends Xp{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Ea(e)?e:0,this.max=Ea(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Fo(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}hn(l0,"id","linear"),hn(l0,"defaults",{ticks:{callback:hm.formatters.numeric}});const Lf=t=>Math.floor(Jl(t)),zc=(t,e)=>Math.pow(10,Lf(t)+e);function B2(t){return t/Math.pow(10,Lf(t))===1}function H2(t,e,r){const n=Math.pow(10,r),i=Math.floor(t/n);return Math.ceil(e/n)-i}function oL(t,e){const r=e-t;let n=Lf(r);for(;H2(t,e,n)>10;)n++;for(;H2(t,e,n)<10;)n--;return Math.min(n,Lf(t))}function lL(t,{min:e,max:r}){e=no(t.min,e);const n=[],i=Lf(e);let a=oL(e,r),s=a<0?Math.pow(10,Math.abs(a)):1;const d=Math.pow(10,a),_=i>a?Math.pow(10,i):0,N=Math.round((e-_)*s)/s,I=Math.floor((e-_)/d/10)*d*10;let ye=Math.floor((N-I)/Math.pow(10,a)),xe=no(t.min,Math.round((_+I+ye*Math.pow(10,a))*s)/s);for(;xe<r;)n.push({value:xe,major:B2(xe),significand:ye}),ye>=10?ye=ye<15?15:20:ye++,ye>=20&&(a++,ye=2,s=a>=0?1:s),xe=Math.round((_+I+ye*Math.pow(10,a))*s)/s;const Ce=no(t.max,xe);return n.push({value:Ce,major:B2(Ce),significand:ye}),n}class c0 extends su{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const n=Xp.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return Ea(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Ea(e)?Math.max(0,e):null,this.max=Ea(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ea(this._userMin)&&(this.min=e===zc(this.min,0)?zc(this.min,-1):zc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let n=this.min,i=this.max;const a=d=>n=e?n:d,s=d=>i=r?i:d;n===i&&(n<=0?(a(1),s(10)):(a(zc(n,-1)),s(zc(i,1)))),n<=0&&a(zc(i,-1)),i<=0&&s(zc(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},n=lL(r,this);return e.bounds==="ticks"&&k3(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Of(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Jl(e),this._valueRange=Jl(this.max)-Jl(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Jl(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}hn(c0,"id","logarithmic"),hn(c0,"defaults",{ticks:{callback:hm.formatters.logarithmic,major:{enabled:!0}}});function u0(t){const e=t.ticks;if(e.display&&t.display){const r=Ts(e.backdropPadding);return ii(e.font&&e.font.size,xa.font.size)+r.height}return 0}function cL(t,e,r){return r=ya(r)?r:[r],{w:m8(t,e.string,r),h:r.length*e.lineHeight}}function W2(t,e,r,n,i){return t===n||t===i?{start:e-r/2,end:e+r/2}:t<n||t>i?{start:e-r,end:e}:{start:e,end:e+r}}function uL(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],i=[],a=t._pointLabels.length,s=t.options.pointLabels,d=s.centerPointLabels?Li/a:0;for(let _=0;_<a;_++){const N=s.setContext(t.getPointLabelContext(_));i[_]=N.padding;const I=t.getPointPosition(_,t.drawingArea+i[_],d),ye=Ua(N.font),xe=cL(t.ctx,ye,t._pointLabels[_]);n[_]=xe;const Ce=_s(t.getIndexAngle(_)+d),Ve=Math.round(uy(Ce)),Ye=W2(Ve,I.x,xe.w,0,180),qe=W2(Ve,I.y,xe.h,90,270);dL(r,e,Ce,Ye,qe)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=pL(t,n,i)}function dL(t,e,r,n,i){const a=Math.abs(Math.sin(r)),s=Math.abs(Math.cos(r));let d=0,_=0;n.start<e.l?(d=(e.l-n.start)/a,t.l=Math.min(t.l,e.l-d)):n.end>e.r&&(d=(n.end-e.r)/a,t.r=Math.max(t.r,e.r+d)),i.start<e.t?(_=(e.t-i.start)/s,t.t=Math.min(t.t,e.t-_)):i.end>e.b&&(_=(i.end-e.b)/s,t.b=Math.max(t.b,e.b+_))}function fL(t,e,r){const n=t.drawingArea,{extra:i,additionalAngle:a,padding:s,size:d}=r,_=t.getPointPosition(e,n+i+s,a),N=Math.round(uy(_s(_.angle+Fa))),I=gL(_.y,d.h,N),ye=mL(N),xe=vL(_.x,d.w,ye);return{visible:!0,x:_.x,y:I,textAlign:ye,left:xe,top:I,right:xe+d.w,bottom:I+d.h}}function hL(t,e){if(!e)return!0;const{left:r,top:n,right:i,bottom:a}=t;return!(Ml({x:r,y:n},e)||Ml({x:r,y:a},e)||Ml({x:i,y:n},e)||Ml({x:i,y:a},e))}function pL(t,e,r){const n=[],i=t._pointLabels.length,a=t.options,{centerPointLabels:s,display:d}=a.pointLabels,_={extra:u0(a)/2,additionalAngle:s?Li/i:0};let N;for(let I=0;I<i;I++){_.padding=r[I],_.size=e[I];const ye=fL(t,I,_);n.push(ye),d==="auto"&&(ye.visible=hL(ye,N),ye.visible&&(N=ye))}return n}function mL(t){return t===0||t===180?"center":t<180?"left":"right"}function vL(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function gL(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function yL(t,e,r){const{left:n,top:i,right:a,bottom:s}=r,{backdropColor:d}=e;if(!mi(d)){const _=Gc(e.borderRadius),N=Ts(e.backdropPadding);t.fillStyle=d;const I=n-N.left,ye=i-N.top,xe=a-n+N.width,Ce=s-i+N.height;Object.values(_).some(Ve=>Ve!==0)?(t.beginPath(),jf(t,{x:I,y:ye,w:xe,h:Ce,radius:_}),t.fill()):t.fillRect(I,ye,xe,Ce)}}function xL(t,e){const{ctx:r,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){const a=t._pointLabelItems[i];if(!a.visible)continue;const s=n.setContext(t.getPointLabelContext(i));yL(r,s,a);const d=Ua(s.font),{x:_,y:N,textAlign:I}=a;ru(r,t._pointLabels[i],_,N+d.lineHeight/2,d,{color:s.color,textAlign:I,textBaseline:"middle"})}}function p5(t,e,r,n){const{ctx:i}=t;if(r)i.arc(t.xCenter,t.yCenter,e,0,fa);else{let a=t.getPointPosition(0,e);i.moveTo(a.x,a.y);for(let s=1;s<n;s++)a=t.getPointPosition(s,e),i.lineTo(a.x,a.y)}}function bL(t,e,r,n,i){const a=t.ctx,s=e.circular,{color:d,lineWidth:_}=e;!s&&!n||!d||!_||r<0||(a.save(),a.strokeStyle=d,a.lineWidth=_,a.setLineDash(i.dash||[]),a.lineDashOffset=i.dashOffset,a.beginPath(),p5(t,r,s,n),a.closePath(),a.stroke(),a.restore())}function wL(t,e,r){return xc(t,{label:r,index:e,type:"pointLabel"})}class qd extends Xp{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ts(u0(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=Ea(e)&&!isNaN(e)?e:0,this.max=Ea(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/u0(this.options))}generateTickLabels(e){Xp.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{const i=ia(this.options.pointLabels.callback,[r,n],this);return i||i===0?i:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?uL(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,i){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,i))}getIndexAngle(e){const r=fa/(this._pointLabels.length||1),n=this.options.startAngle||0;return _s(e*r+Fo(n))}getDistanceFromCenterForValue(e){if(mi(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(mi(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const n=r[e];return wL(this.getContext(),e,n)}}getPointPosition(e,r,n=0){const i=this.getIndexAngle(e)-Fa+n;return{x:Math.cos(i)*r+this.xCenter,y:Math.sin(i)*r+this.yCenter,angle:i}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:n,right:i,bottom:a}=this._pointLabelItems[e];return{left:r,top:n,right:i,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),p5(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:n,grid:i,border:a}=r,s=this._pointLabels.length;let d,_,N;if(r.pointLabels.display&&xL(this,s),i.display&&this.ticks.forEach((I,ye)=>{if(ye!==0||ye===0&&this.min<0){_=this.getDistanceFromCenterForValue(I.value);const xe=this.getContext(ye),Ce=i.setContext(xe),Ve=a.setContext(xe);bL(this,Ce,_,s,Ve)}}),n.display){for(e.save(),d=s-1;d>=0;d--){const I=n.setContext(this.getPointLabelContext(d)),{color:ye,lineWidth:xe}=I;!xe||!ye||(e.lineWidth=xe,e.strokeStyle=ye,e.setLineDash(I.borderDash),e.lineDashOffset=I.borderDashOffset,_=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),N=this.getPointPosition(d,_),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(N.x,N.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let a,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((d,_)=>{if(_===0&&this.min>=0&&!r.reverse)return;const N=n.setContext(this.getContext(_)),I=Ua(N.font);if(a=this.getDistanceFromCenterForValue(this.ticks[_].value),N.showLabelBackdrop){e.font=I.string,s=e.measureText(d.label).width,e.fillStyle=N.backdropColor;const ye=Ts(N.backdropPadding);e.fillRect(-s/2-ye.left,-a-I.size/2-ye.top,s+ye.width,I.size+ye.height)}ru(e,d.label,0,-a,I,{color:N.color,strokeColor:N.textStrokeColor,strokeWidth:N.textStrokeWidth})}),e.restore()}drawTitle(){}}hn(qd,"id","radialLinear"),hn(qd,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:hm.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),hn(qd,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),hn(qd,"descriptors",{angleLines:{_fallback:"grid"}});const xm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Gs=Object.keys(xm);function q2(t,e){return t-e}function V2(t,e){if(mi(e))return null;const r=t._adapter,{parser:n,round:i,isoWeekday:a}=t._parseOpts;let s=e;return typeof n=="function"&&(s=n(s)),Ea(s)||(s=typeof n=="string"?r.parse(s,n):r.parse(s)),s===null?null:(i&&(s=i==="week"&&(Ku(a)||a===!0)?r.startOf(s,"isoWeek",a):r.startOf(s,i)),+s)}function U2(t,e,r,n){const i=Gs.length;for(let a=Gs.indexOf(t);a<i-1;++a){const s=xm[Gs[a]],d=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((r-e)/(d*s.size))<=n)return Gs[a]}return Gs[i-1]}function _L(t,e,r,n,i){for(let a=Gs.length-1;a>=Gs.indexOf(r);a--){const s=Gs[a];if(xm[s].common&&t._adapter.diff(i,n,s)>=e-1)return s}return Gs[r?Gs.indexOf(r):0]}function kL(t){for(let e=Gs.indexOf(t)+1,r=Gs.length;e<r;++e)if(xm[Gs[e]].common)return Gs[e]}function $2(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:i}=dy(r,e),a=r[n]>=e?r[n]:r[i];t[a]=!0}}function SL(t,e,r,n){const i=t._adapter,a=+i.startOf(e[0].value,n),s=e[e.length-1].value;let d,_;for(d=a;d<=s;d=+i.add(d,1,n))_=r[d],_>=0&&(e[_].major=!0);return e}function Y2(t,e,r){const n=[],i={},a=e.length;let s,d;for(s=0;s<a;++s)d=e[s],i[d]=s,n.push({value:d,major:!1});return a===0||!r?n:SL(t,n,i,r)}class Rf extends su{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),i=this._adapter=new Rj._date(e.adapters.date);i.init(r),rf(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:V2(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:i,max:a,minDefined:s,maxDefined:d}=this.getUserBounds();function _(N){!s&&!isNaN(N.min)&&(i=Math.min(i,N.min)),!d&&!isNaN(N.max)&&(a=Math.max(a,N.max))}(!s||!d)&&(_(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&_(this.getMinMax(!1))),i=Ea(i)&&!isNaN(i)?i:+r.startOf(Date.now(),n),a=Ea(a)&&!isNaN(a)?a:+r.endOf(Date.now(),n)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,s=this.max,d=r8(i,a,s);return this._unit=r.unit||(n.autoSkip?U2(r.minUnit,this.min,this.max,this._getLabelCapacity(a)):_L(this,d.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:kL(this._unit),this.initOffsets(i),e.reverse&&d.reverse(),Y2(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?r=1-i:r=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?n=a:n=(a-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;r=Ja(r,0,s),n=Ja(n,0,s),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,i=this.options,a=i.time,s=a.unit||U2(a.minUnit,r,n,this._getLabelCapacity(r)),d=ii(i.ticks.stepSize,1),_=s==="week"?a.isoWeekday:!1,N=Ku(_)||_===!0,I={};let ye=r,xe,Ce;if(N&&(ye=+e.startOf(ye,"isoWeek",_)),ye=+e.startOf(ye,N?"day":s),e.diff(n,r,s)>1e5*d)throw new Error(r+" and "+n+" are too far apart with stepSize of "+d+" "+s);const Ve=i.ticks.source==="data"&&this.getDataTimestamps();for(xe=ye,Ce=0;xe<n;xe=+e.add(xe,d,s),Ce++)$2(I,xe,Ve);return(xe===n||i.bounds==="ticks"||Ce===1)&&$2(I,xe,Ve),Object.keys(I).sort(q2).map(Ye=>+Ye)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const i=this.options.time.displayFormats,a=this._unit,s=r||i[a];return this._adapter.format(e,s)}_tickFormatFunction(e,r,n,i){const a=this.options,s=a.ticks.callback;if(s)return ia(s,[e,r,n],this);const d=a.time.displayFormats,_=this._unit,N=this._majorUnit,I=_&&d[_],ye=N&&d[N],xe=n[r],Ce=N&&ye&&xe&&xe.major;return this._adapter.format(e,i||(Ce?ye:I))}generateTickLabels(e){let r,n,i;for(r=0,n=e.length;r<n;++r)i=e[r],i.label=this._tickFormatFunction(i.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,i=Fo(this.isHorizontal()?r.maxRotation:r.minRotation),a=Math.cos(i),s=Math.sin(i),d=this._resolveTickFontOptions(0).size;return{w:n*a+d*s,h:n*s+d*a}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,i=n[r.unit]||n.millisecond,a=this._tickFormatFunction(e,0,Y2(this,[e],this._majorUnit),i),s=this._getLabelSize(a),d=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return d>0?d:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(r=0,n=i.length;r<n;++r)e=e.concat(i[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const i=this.getLabels();for(r=0,n=i.length;r<n;++r)e.push(V2(this,i[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return T3(e.sort(q2))}}hn(Rf,"id","time"),hn(Rf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function $h(t,e,r){let n=0,i=t.length-1,a,s,d,_;r?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=Sl(t,"pos",e)),{pos:a,time:d}=t[n],{pos:s,time:_}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=Sl(t,"time",e)),{time:a,pos:d}=t[n],{time:s,pos:_}=t[i]);const N=s-a;return N?d+(_-d)*(e-a)/N:d}class d0 extends Rf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=$h(r,this.min),this._tableRange=$h(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,i=[],a=[];let s,d,_,N,I;for(s=0,d=e.length;s<d;++s)N=e[s],N>=r&&N<=n&&i.push(N);if(i.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(s=0,d=i.length;s<d;++s)I=i[s+1],_=i[s-1],N=i[s],Math.round((I+_)/2)!==N&&a.push({time:N,pos:s/(d-1)});return a}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return($h(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return $h(this._table,n*this._tableRange+this._minPos,!0)}}hn(d0,"id","timeseries"),hn(d0,"defaults",Rf.defaults);var ML=Object.freeze({__proto__:null,CategoryScale:o0,LinearScale:l0,LogarithmicScale:c0,RadialLinearScale:qd,TimeScale:Rf,TimeSeriesScale:d0});const TL=[Lj,oE,rL,ML];var m5={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():e.moduleName=r()})(typeof self<"u"?self:Q2,()=>{var e=(()=>{var r=Object.getOwnPropertyNames,n=(U,$)=>function(){return U&&($=(0,U[r(U)[0]])(U=0)),$},i=(U,$)=>function(){return $||(0,U[r(U)[0]])(($={exports:{}}).exports,$),$.exports},a=i({"src/version.js"(U){U.version="3.0.1"}}),s=i({"node_modules/native-promise-only/lib/npo.src.js"(U,$){(function(c,u,p){u[c]=u[c]||p(),typeof $<"u"&&$.exports&&($.exports=u[c])})("Promise",typeof window<"u"?window:U,function(){var c,u,p,v=Object.prototype.toString,m=typeof setImmediate<"u"?function(k){return setImmediate(k)}:setTimeout;try{Object.defineProperty({},"x",{}),c=function(k,E,F,P){return Object.defineProperty(k,E,{value:F,writable:!0,configurable:P!==!1})}}catch{c=function(E,F,P){return E[F]=P,E}}p=function(){var k,E,F;function P(J,H){this.fn=J,this.self=H,this.next=void 0}return{add:function(H,Y){F=new P(H,Y),E?E.next=F:k=F,E=F,F=void 0},drain:function(){var H=k;for(k=E=u=void 0;H;)H.fn.call(H.self),H=H.next}}}();function g(b,k){p.add(b,k),u||(u=m(p.drain))}function w(b){var k,E=typeof b;return b!=null&&(E=="object"||E=="function")&&(k=b.then),typeof k=="function"?k:!1}function l(){for(var b=0;b<this.chain.length;b++)T(this,this.state===1?this.chain[b].success:this.chain[b].failure,this.chain[b]);this.chain.length=0}function T(b,k,E){var F,P;try{k===!1?E.reject(b.msg):(k===!0?F=b.msg:F=k.call(void 0,b.msg),F===E.promise?E.reject(TypeError("Promise-chain cycle")):(P=w(F))?P.call(F,E.resolve,E.reject):E.resolve(F))}catch(J){E.reject(J)}}function y(b){var k,E=this;if(!E.triggered){E.triggered=!0,E.def&&(E=E.def);try{(k=w(b))?g(function(){var F=new M(E);try{k.call(b,function(){y.apply(F,arguments)},function(){S.apply(F,arguments)})}catch(P){S.call(F,P)}}):(E.msg=b,E.state=1,E.chain.length>0&&g(l,E))}catch(F){S.call(new M(E),F)}}}function S(b){var k=this;k.triggered||(k.triggered=!0,k.def&&(k=k.def),k.msg=b,k.state=2,k.chain.length>0&&g(l,k))}function R(b,k,E,F){for(var P=0;P<k.length;P++)(function(H){b.resolve(k[H]).then(function(Z){E(H,Z)},F)})(P)}function M(b){this.def=b,this.triggered=!1}function A(b){this.promise=b,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function C(b){if(typeof b!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var k=new A(this);this.then=function(F,P){var J={success:typeof F=="function"?F:!0,failure:typeof P=="function"?P:!1};return J.promise=new this.constructor(function(Y,Z){if(typeof Y!="function"||typeof Z!="function")throw TypeError("Not a function");J.resolve=Y,J.reject=Z}),k.chain.push(J),k.state!==0&&g(l,k),J.promise},this.catch=function(F){return this.then(void 0,F)};try{b.call(void 0,function(F){y.call(k,F)},function(F){S.call(k,F)})}catch(E){S.call(k,E)}}var j=c({},"constructor",C,!1);return C.prototype=j,c(j,"__NPO__",0,!1),c(C,"resolve",function(k){var E=this;return k&&typeof k=="object"&&k.__NPO__===1?k:new E(function(P,J){if(typeof P!="function"||typeof J!="function")throw TypeError("Not a function");P(k)})}),c(C,"reject",function(k){return new this(function(F,P){if(typeof F!="function"||typeof P!="function")throw TypeError("Not a function");P(k)})}),c(C,"all",function(k){var E=this;return v.call(k)!="[object Array]"?E.reject(TypeError("Not an array")):k.length===0?E.resolve([]):new E(function(P,J){if(typeof P!="function"||typeof J!="function")throw TypeError("Not a function");var H=k.length,Y=Array(H),Z=0;R(E,k,function(q,X){Y[q]=X,++Z===H&&P(Y)},J)})}),c(C,"race",function(k){var E=this;return v.call(k)!="[object Array]"?E.reject(TypeError("Not an array")):new E(function(P,J){if(typeof P!="function"||typeof J!="function")throw TypeError("Not a function");R(E,k,function(Y,Z){P(Z)},J)})}),C})}}),d=i({"node_modules/@plotly/d3/d3.js"(U,$){(function(){var h={version:"3.8.2"},c=[].slice,u=function(f){return c.call(f)},p=self.document;function v(f){return f&&(f.ownerDocument||f.document||f).documentElement}function m(f){return f&&(f.ownerDocument&&f.ownerDocument.defaultView||f.document&&f||f.defaultView)}if(p)try{u(p.documentElement.childNodes)[0].nodeType}catch{u=function(L){for(var O=L.length,se=new Array(O);O--;)se[O]=L[O];return se}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch{var g=this.Element.prototype,w=g.setAttribute,l=g.setAttributeNS,T=this.CSSStyleDeclaration.prototype,y=T.setProperty;g.setAttribute=function(L,O){w.call(this,L,O+"")},g.setAttributeNS=function(L,O,se){l.call(this,L,O,se+"")},T.setProperty=function(L,O,se){y.call(this,L,O+"",se)}}h.ascending=S;function S(f,L){return f<L?-1:f>L?1:f>=L?0:NaN}h.descending=function(f,L){return L<f?-1:L>f?1:L>=f?0:NaN},h.min=function(f,L){var O=-1,se=f.length,ue,ve;if(arguments.length===1){for(;++O<se;)if((ve=f[O])!=null&&ve>=ve){ue=ve;break}for(;++O<se;)(ve=f[O])!=null&&ue>ve&&(ue=ve)}else{for(;++O<se;)if((ve=L.call(f,f[O],O))!=null&&ve>=ve){ue=ve;break}for(;++O<se;)(ve=L.call(f,f[O],O))!=null&&ue>ve&&(ue=ve)}return ue},h.max=function(f,L){var O=-1,se=f.length,ue,ve;if(arguments.length===1){for(;++O<se;)if((ve=f[O])!=null&&ve>=ve){ue=ve;break}for(;++O<se;)(ve=f[O])!=null&&ve>ue&&(ue=ve)}else{for(;++O<se;)if((ve=L.call(f,f[O],O))!=null&&ve>=ve){ue=ve;break}for(;++O<se;)(ve=L.call(f,f[O],O))!=null&&ve>ue&&(ue=ve)}return ue},h.extent=function(f,L){var O=-1,se=f.length,ue,ve,Le;if(arguments.length===1){for(;++O<se;)if((ve=f[O])!=null&&ve>=ve){ue=Le=ve;break}for(;++O<se;)(ve=f[O])!=null&&(ue>ve&&(ue=ve),Le<ve&&(Le=ve))}else{for(;++O<se;)if((ve=L.call(f,f[O],O))!=null&&ve>=ve){ue=Le=ve;break}for(;++O<se;)(ve=L.call(f,f[O],O))!=null&&(ue>ve&&(ue=ve),Le<ve&&(Le=ve))}return[ue,Le]};function R(f){return f===null?NaN:+f}function M(f){return!isNaN(f)}h.sum=function(f,L){var O=0,se=f.length,ue,ve=-1;if(arguments.length===1)for(;++ve<se;)M(ue=+f[ve])&&(O+=ue);else for(;++ve<se;)M(ue=+L.call(f,f[ve],ve))&&(O+=ue);return O},h.mean=function(f,L){var O=0,se=f.length,ue,ve=-1,Le=se;if(arguments.length===1)for(;++ve<se;)M(ue=R(f[ve]))?O+=ue:--Le;else for(;++ve<se;)M(ue=R(L.call(f,f[ve],ve)))?O+=ue:--Le;if(Le)return O/Le},h.quantile=function(f,L){var O=(f.length-1)*L+1,se=Math.floor(O),ue=+f[se-1],ve=O-se;return ve?ue+ve*(f[se]-ue):ue},h.median=function(f,L){var O=[],se=f.length,ue,ve=-1;if(arguments.length===1)for(;++ve<se;)M(ue=R(f[ve]))&&O.push(ue);else for(;++ve<se;)M(ue=R(L.call(f,f[ve],ve)))&&O.push(ue);if(O.length)return h.quantile(O.sort(S),.5)},h.variance=function(f,L){var O=f.length,se=0,ue,ve,Le=0,Me=-1,Ie=0;if(arguments.length===1)for(;++Me<O;)M(ue=R(f[Me]))&&(ve=ue-se,se+=ve/++Ie,Le+=ve*(ue-se));else for(;++Me<O;)M(ue=R(L.call(f,f[Me],Me)))&&(ve=ue-se,se+=ve/++Ie,Le+=ve*(ue-se));if(Ie>1)return Le/(Ie-1)},h.deviation=function(){var f=h.variance.apply(this,arguments);return f&&Math.sqrt(f)};function A(f){return{left:function(L,O,se,ue){for(arguments.length<3&&(se=0),arguments.length<4&&(ue=L.length);se<ue;){var ve=se+ue>>>1;f(L[ve],O)<0?se=ve+1:ue=ve}return se},right:function(L,O,se,ue){for(arguments.length<3&&(se=0),arguments.length<4&&(ue=L.length);se<ue;){var ve=se+ue>>>1;f(L[ve],O)>0?ue=ve:se=ve+1}return se}}}var C=A(S);h.bisectLeft=C.left,h.bisect=h.bisectRight=C.right,h.bisector=function(f){return A(f.length===1?function(L,O){return S(f(L),O)}:f)},h.shuffle=function(f,L,O){(se=arguments.length)<3&&(O=f.length,se<2&&(L=0));for(var se=O-L,ue,ve;se;)ve=Math.random()*se--|0,ue=f[se+L],f[se+L]=f[ve+L],f[ve+L]=ue;return f},h.permute=function(f,L){for(var O=L.length,se=new Array(O);O--;)se[O]=f[L[O]];return se},h.pairs=function(f){for(var L=0,O=f.length-1,se=f[0],ue=new Array(O<0?0:O);L<O;)ue[L]=[se,se=f[++L]];return ue},h.transpose=function(f){if(!(ve=f.length))return[];for(var L=-1,O=h.min(f,j),se=new Array(O);++L<O;)for(var ue=-1,ve,Le=se[L]=new Array(ve);++ue<ve;)Le[ue]=f[ue][L];return se};function j(f){return f.length}h.zip=function(){return h.transpose(arguments)},h.keys=function(f){var L=[];for(var O in f)L.push(O);return L},h.values=function(f){var L=[];for(var O in f)L.push(f[O]);return L},h.entries=function(f){var L=[];for(var O in f)L.push({key:O,value:f[O]});return L},h.merge=function(f){for(var L=f.length,O,se=-1,ue=0,ve,Le;++se<L;)ue+=f[se].length;for(ve=new Array(ue);--L>=0;)for(Le=f[L],O=Le.length;--O>=0;)ve[--ue]=Le[O];return ve};var b=Math.abs;h.range=function(f,L,O){if(arguments.length<3&&(O=1,arguments.length<2&&(L=f,f=0)),(L-f)/O===1/0)throw new Error("infinite range");var se=[],ue=k(b(O)),ve=-1,Le;if(f*=ue,L*=ue,O*=ue,O<0)for(;(Le=f+O*++ve)>L;)se.push(Le/ue);else for(;(Le=f+O*++ve)<L;)se.push(Le/ue);return se};function k(f){for(var L=1;f*L%1;)L*=10;return L}function E(f,L){for(var O in L)Object.defineProperty(f.prototype,O,{value:L[O],enumerable:!1})}h.map=function(f,L){var O=new F;if(f instanceof F)f.forEach(function(Me,Ie){O.set(Me,Ie)});else if(Array.isArray(f)){var se=-1,ue=f.length,ve;if(arguments.length===1)for(;++se<ue;)O.set(se,f[se]);else for(;++se<ue;)O.set(L.call(f,ve=f[se],se),ve)}else for(var Le in f)O.set(Le,f[Le]);return O};function F(){this._=Object.create(null)}var P="__proto__",J="\0";E(F,{has:Z,get:function(f){return this._[H(f)]},set:function(f,L){return this._[H(f)]=L},remove:z,keys:q,values:function(){var f=[];for(var L in this._)f.push(this._[L]);return f},entries:function(){var f=[];for(var L in this._)f.push({key:Y(L),value:this._[L]});return f},size:X,empty:Q,forEach:function(f){for(var L in this._)f.call(this,Y(L),this._[L])}});function H(f){return(f+="")===P||f[0]===J?J+f:f}function Y(f){return(f+="")[0]===J?f.slice(1):f}function Z(f){return H(f)in this._}function z(f){return(f=H(f))in this._&&delete this._[f]}function q(){var f=[];for(var L in this._)f.push(Y(L));return f}function X(){var f=0;for(var L in this._)++f;return f}function Q(){for(var f in this._)return!1;return!0}h.nest=function(){var f={},L=[],O=[],se,ue;function ve(Me,Ie,Ze){if(Ze>=L.length)return ue?ue.call(f,Ie):se?Ie.sort(se):Ie;for(var Qe=-1,bt=Ie.length,kt=L[Ze++],Gt,tr,Et,Ot=new F,$t;++Qe<bt;)($t=Ot.get(Gt=kt(tr=Ie[Qe])))?$t.push(tr):Ot.set(Gt,[tr]);return Me?(tr=Me(),Et=function(nr,ir){tr.set(nr,ve(Me,ir,Ze))}):(tr={},Et=function(nr,ir){tr[nr]=ve(Me,ir,Ze)}),Ot.forEach(Et),tr}function Le(Me,Ie){if(Ie>=L.length)return Me;var Ze=[],Qe=O[Ie++];return Me.forEach(function(bt,kt){Ze.push({key:bt,values:Le(kt,Ie)})}),Qe?Ze.sort(function(bt,kt){return Qe(bt.key,kt.key)}):Ze}return f.map=function(Me,Ie){return ve(Ie,Me,0)},f.entries=function(Me){return Le(ve(h.map,Me,0),0)},f.key=function(Me){return L.push(Me),f},f.sortKeys=function(Me){return O[L.length-1]=Me,f},f.sortValues=function(Me){return se=Me,f},f.rollup=function(Me){return ue=Me,f},f},h.set=function(f){var L=new ee;if(f)for(var O=0,se=f.length;O<se;++O)L.add(f[O]);return L};function ee(){this._=Object.create(null)}E(ee,{has:Z,add:function(f){return this._[H(f+="")]=!0,f},remove:z,values:q,size:X,empty:Q,forEach:function(f){for(var L in this._)f.call(this,Y(L))}}),h.behavior={};function ne(f){return f}h.rebind=function(f,L){for(var O=1,se=arguments.length,ue;++O<se;)f[ue=arguments[O]]=le(f,L,L[ue]);return f};function le(f,L,O){return function(){var se=O.apply(L,arguments);return se===L?f:se}}function W(f,L){if(L in f)return L;L=L.charAt(0).toUpperCase()+L.slice(1);for(var O=0,se=ce.length;O<se;++O){var ue=ce[O]+L;if(ue in f)return ue}}var ce=["webkit","ms","moz","Moz","o","O"];function de(){}h.dispatch=function(){for(var f=new pe,L=-1,O=arguments.length;++L<O;)f[arguments[L]]=he(f);return f};function pe(){}pe.prototype.on=function(f,L){var O=f.indexOf("."),se="";if(O>=0&&(se=f.slice(O+1),f=f.slice(0,O)),f)return arguments.length<2?this[f].on(se):this[f].on(se,L);if(arguments.length===2){if(L==null)for(f in this)this.hasOwnProperty(f)&&this[f].on(se,null);return this}};function he(f){var L=[],O=new F;function se(){for(var ue=L,ve=-1,Le=ue.length,Me;++ve<Le;)(Me=ue[ve].on)&&Me.apply(this,arguments);return f}return se.on=function(ue,ve){var Le=O.get(ue),Me;return arguments.length<2?Le&&Le.on:(Le&&(Le.on=null,L=L.slice(0,Me=L.indexOf(Le)).concat(L.slice(Me+1)),O.remove(ue)),ve&&L.push(O.set(ue,{on:ve})),f)},se}h.event=null;function be(){h.event.preventDefault()}function Ee(){for(var f=h.event,L;L=f.sourceEvent;)f=L;return f}function Te(f){for(var L=new pe,O=0,se=arguments.length;++O<se;)L[arguments[O]]=he(L);return L.of=function(ue,ve){return function(Le){try{var Me=Le.sourceEvent=h.event;Le.target=f,h.event=Le,L[Le.type].apply(ue,ve)}finally{h.event=Me}}},L}h.requote=function(f){return f.replace(He,"\\$&")};var He=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,te={}.__proto__?function(f,L){f.__proto__=L}:function(f,L){for(var O in L)f[O]=L[O]};function ae(f){return te(f,re),f}var G=function(f,L){return L.querySelector(f)},K=function(f,L){return L.querySelectorAll(f)},V=function(f,L){var O=f.matches||f[W(f,"matchesSelector")];return V=function(se,ue){return O.call(se,ue)},V(f,L)};typeof Sizzle=="function"&&(G=function(f,L){return Sizzle(f,L)[0]||null},K=Sizzle,V=Sizzle.matchesSelector),h.selection=function(){return h.select(p.documentElement)};var re=h.selection.prototype=[];re.select=function(f){var L=[],O,se,ue,ve;f=D(f);for(var Le=-1,Me=this.length;++Le<Me;){L.push(O=[]),O.parentNode=(ue=this[Le]).parentNode;for(var Ie=-1,Ze=ue.length;++Ie<Ze;)(ve=ue[Ie])?(O.push(se=f.call(ve,ve.__data__,Ie,Le)),se&&"__data__"in ve&&(se.__data__=ve.__data__)):O.push(null)}return ae(L)};function D(f){return typeof f=="function"?f:function(){return G(f,this)}}re.selectAll=function(f){var L=[],O,se;f=B(f);for(var ue=-1,ve=this.length;++ue<ve;)for(var Le=this[ue],Me=-1,Ie=Le.length;++Me<Ie;)(se=Le[Me])&&(L.push(O=u(f.call(se,se.__data__,Me,ue))),O.parentNode=se);return ae(L)};function B(f){return typeof f=="function"?f:function(){return K(f,this)}}var oe="http://www.w3.org/1999/xhtml",ie={svg:"http://www.w3.org/2000/svg",xhtml:oe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};h.ns={prefix:ie,qualify:function(f){var L=f.indexOf(":"),O=f;return L>=0&&(O=f.slice(0,L))!=="xmlns"&&(f=f.slice(L+1)),ie.hasOwnProperty(O)?{space:ie[O],local:f}:f}},re.attr=function(f,L){if(arguments.length<2){if(typeof f=="string"){var O=this.node();return f=h.ns.qualify(f),f.local?O.getAttributeNS(f.space,f.local):O.getAttribute(f)}for(L in f)this.each(ge(L,f[L]));return this}return this.each(ge(f,L))};function ge(f,L){f=h.ns.qualify(f);function O(){this.removeAttribute(f)}function se(){this.removeAttributeNS(f.space,f.local)}function ue(){this.setAttribute(f,L)}function ve(){this.setAttributeNS(f.space,f.local,L)}function Le(){var Ie=L.apply(this,arguments);Ie==null?this.removeAttribute(f):this.setAttribute(f,Ie)}function Me(){var Ie=L.apply(this,arguments);Ie==null?this.removeAttributeNS(f.space,f.local):this.setAttributeNS(f.space,f.local,Ie)}return L==null?f.local?se:O:typeof L=="function"?f.local?Me:Le:f.local?ve:ue}function _e(f){return f.trim().replace(/\s+/g," ")}re.classed=function(f,L){if(arguments.length<2){if(typeof f=="string"){var O=this.node(),se=(f=De(f)).length,ue=-1;if(L=O.classList){for(;++ue<se;)if(!L.contains(f[ue]))return!1}else for(L=O.getAttribute("class");++ue<se;)if(!Se(f[ue]).test(L))return!1;return!0}for(L in f)this.each(Ge(L,f[L]));return this}return this.each(Ge(f,L))};function Se(f){return new RegExp("(?:^|\\s+)"+h.requote(f)+"(?:\\s+|$)","g")}function De(f){return(f+"").trim().split(/^|\s+/)}function Ge(f,L){f=De(f).map(Je);var O=f.length;function se(){for(var ve=-1;++ve<O;)f[ve](this,L)}function ue(){for(var ve=-1,Le=L.apply(this,arguments);++ve<O;)f[ve](this,Le)}return typeof L=="function"?ue:se}function Je(f){var L=Se(f);return function(O,se){if(ue=O.classList)return se?ue.add(f):ue.remove(f);var ue=O.getAttribute("class")||"";se?(L.lastIndex=0,L.test(ue)||O.setAttribute("class",_e(ue+" "+f))):O.setAttribute("class",_e(ue.replace(L," ")))}}re.style=function(f,L,O){var se=arguments.length;if(se<3){if(typeof f!="string"){se<2&&(L="");for(O in f)this.each(yt(O,f[O],L));return this}if(se<2){var ue=this.node();return m(ue).getComputedStyle(ue,null).getPropertyValue(f)}O=""}return this.each(yt(f,L,O))};function yt(f,L,O){function se(){this.style.removeProperty(f)}function ue(){this.style.setProperty(f,L,O)}function ve(){var Le=L.apply(this,arguments);Le==null?this.style.removeProperty(f):this.style.setProperty(f,Le,O)}return L==null?se:typeof L=="function"?ve:ue}re.property=function(f,L){if(arguments.length<2){if(typeof f=="string")return this.node()[f];for(L in f)this.each(ut(L,f[L]));return this}return this.each(ut(f,L))};function ut(f,L){function O(){delete this[f]}function se(){this[f]=L}function ue(){var ve=L.apply(this,arguments);ve==null?delete this[f]:this[f]=ve}return L==null?O:typeof L=="function"?ue:se}re.text=function(f){return arguments.length?this.each(typeof f=="function"?function(){var L=f.apply(this,arguments);this.textContent=L??""}:f==null?function(){this.textContent=""}:function(){this.textContent=f}):this.node().textContent},re.html=function(f){return arguments.length?this.each(typeof f=="function"?function(){var L=f.apply(this,arguments);this.innerHTML=L??""}:f==null?function(){this.innerHTML=""}:function(){this.innerHTML=f}):this.node().innerHTML},re.append=function(f){return f=vt(f),this.select(function(){return this.appendChild(f.apply(this,arguments))})};function vt(f){function L(){var se=this.ownerDocument,ue=this.namespaceURI;return ue===oe&&se.documentElement.namespaceURI===oe?se.createElement(f):se.createElementNS(ue,f)}function O(){return this.ownerDocument.createElementNS(f.space,f.local)}return typeof f=="function"?f:(f=h.ns.qualify(f)).local?O:L}re.insert=function(f,L){return f=vt(f),L=D(L),this.select(function(){return this.insertBefore(f.apply(this,arguments),L.apply(this,arguments)||null)})},re.remove=function(){return this.each(Ae)};function Ae(){var f=this.parentNode;f&&f.removeChild(this)}re.data=function(f,L){var O=-1,se=this.length,ue,ve;if(!arguments.length){for(f=new Array(se=(ue=this[0]).length);++O<se;)(ve=ue[O])&&(f[O]=ve.__data__);return f}function Le(Qe,bt){var kt,Gt=Qe.length,tr=bt.length,Et=Math.min(Gt,tr),Ot=new Array(tr),$t=new Array(tr),nr=new Array(Gt),ir,Yt;if(L){var jr=new F,Kr=new Array(Gt),on;for(kt=-1;++kt<Gt;)(ir=Qe[kt])&&(jr.has(on=L.call(ir,ir.__data__,kt))?nr[kt]=ir:jr.set(on,ir),Kr[kt]=on);for(kt=-1;++kt<tr;)(ir=jr.get(on=L.call(bt,Yt=bt[kt],kt)))?ir!==!0&&(Ot[kt]=ir,ir.__data__=Yt):$t[kt]=Fe(Yt),jr.set(on,!0);for(kt=-1;++kt<Gt;)kt in Kr&&jr.get(Kr[kt])!==!0&&(nr[kt]=Qe[kt])}else{for(kt=-1;++kt<Et;)ir=Qe[kt],Yt=bt[kt],ir?(ir.__data__=Yt,Ot[kt]=ir):$t[kt]=Fe(Yt);for(;kt<tr;++kt)$t[kt]=Fe(bt[kt]);for(;kt<Gt;++kt)nr[kt]=Qe[kt]}$t.update=Ot,$t.parentNode=Ot.parentNode=nr.parentNode=Qe.parentNode,Me.push($t),Ie.push(Ot),Ze.push(nr)}var Me=ht([]),Ie=ae([]),Ze=ae([]);if(typeof f=="function")for(;++O<se;)Le(ue=this[O],f.call(ue,ue.parentNode.__data__,O));else for(;++O<se;)Le(ue=this[O],f);return Ie.enter=function(){return Me},Ie.exit=function(){return Ze},Ie};function Fe(f){return{__data__:f}}re.datum=function(f){return arguments.length?this.property("__data__",f):this.property("__data__")},re.filter=function(f){var L=[],O,se,ue;typeof f!="function"&&(f=ke(f));for(var ve=0,Le=this.length;ve<Le;ve++){L.push(O=[]),O.parentNode=(se=this[ve]).parentNode;for(var Me=0,Ie=se.length;Me<Ie;Me++)(ue=se[Me])&&f.call(ue,ue.__data__,Me,ve)&&O.push(ue)}return ae(L)};function ke(f){return function(){return V(this,f)}}re.order=function(){for(var f=-1,L=this.length;++f<L;)for(var O=this[f],se=O.length-1,ue=O[se],ve;--se>=0;)(ve=O[se])&&(ue&&ue!==ve.nextSibling&&ue.parentNode.insertBefore(ve,ue),ue=ve);return this},re.sort=function(f){f=Be.apply(this,arguments);for(var L=-1,O=this.length;++L<O;)this[L].sort(f);return this.order()};function Be(f){return arguments.length||(f=S),function(L,O){return L&&O?f(L.__data__,O.__data__):!L-!O}}re.each=function(f){return et(this,function(L,O,se){f.call(L,L.__data__,O,se)})};function et(f,L){for(var O=0,se=f.length;O<se;O++)for(var ue=f[O],ve=0,Le=ue.length,Me;ve<Le;ve++)(Me=ue[ve])&&L(Me,ve,O);return f}re.call=function(f){var L=u(arguments);return f.apply(L[0]=this,L),this},re.empty=function(){return!this.node()},re.node=function(){for(var f=0,L=this.length;f<L;f++)for(var O=this[f],se=0,ue=O.length;se<ue;se++){var ve=O[se];if(ve)return ve}return null},re.size=function(){var f=0;return et(this,function(){++f}),f};function ht(f){return te(f,jt),f}var jt=[];h.selection.enter=ht,h.selection.enter.prototype=jt,jt.append=re.append,jt.empty=re.empty,jt.node=re.node,jt.call=re.call,jt.size=re.size,jt.select=function(f){for(var L=[],O,se,ue,ve,Le,Me=-1,Ie=this.length;++Me<Ie;){ue=(ve=this[Me]).update,L.push(O=[]),O.parentNode=ve.parentNode;for(var Ze=-1,Qe=ve.length;++Ze<Qe;)(Le=ve[Ze])?(O.push(ue[Ze]=se=f.call(ve.parentNode,Le.__data__,Ze,Me)),se.__data__=Le.__data__):O.push(null)}return ae(L)},jt.insert=function(f,L){return arguments.length<2&&(L=At(this)),re.insert.call(this,f,L)};function At(f){var L,O;return function(se,ue,ve){var Le=f[ve].update,Me=Le.length,Ie;for(ve!=O&&(O=ve,L=0),ue>=L&&(L=ue+1);!(Ie=Le[L])&&++L<Me;);return Ie}}h.select=function(f){var L;return typeof f=="string"?(L=[G(f,p)],L.parentNode=p.documentElement):(L=[f],L.parentNode=v(f)),ae([L])},h.selectAll=function(f){var L;return typeof f=="string"?(L=u(K(f,p)),L.parentNode=p.documentElement):(L=u(f),L.parentNode=null),ae([L])},re.on=function(f,L,O){var se=arguments.length;if(se<3){if(typeof f!="string"){se<2&&(L=!1);for(O in f)this.each(Pt(O,f[O],L));return this}if(se<2)return(se=this.node()["__on"+f])&&se._;O=!1}return this.each(Pt(f,L,O))};function Pt(f,L,O){var se="__on"+f,ue=f.indexOf("."),ve=Nt;ue>0&&(f=f.slice(0,ue));var Le=zt.get(f);Le&&(f=Le,ve=Kt);function Me(){var Qe=this[se];Qe&&(this.removeEventListener(f,Qe,Qe.$),delete this[se])}function Ie(){var Qe=ve(L,u(arguments));Me.call(this),this.addEventListener(f,this[se]=Qe,Qe.$=O),Qe._=L}function Ze(){var Qe=new RegExp("^__on([^.]+)"+h.requote(f)+"$"),bt;for(var kt in this)if(bt=kt.match(Qe)){var Gt=this[kt];this.removeEventListener(bt[1],Gt,Gt.$),delete this[kt]}}return ue?L?Ie:Me:L?de:Ze}var zt=h.map({mouseenter:"mouseover",mouseleave:"mouseout"});p&&zt.forEach(function(f){"on"+f in p&&zt.remove(f)});function Nt(f,L){return function(O){var se=h.event;h.event=O,L[0]=this.__data__;try{f.apply(this,L)}finally{h.event=se}}}function Kt(f,L){var O=Nt(f,L);return function(se){var ue=this,ve=se.relatedTarget;(!ve||ve!==ue&&!(ve.compareDocumentPosition(ue)&8))&&O.call(ue,se)}}var _t,Qt=0;function fr(f){var L=".dragsuppress-"+ ++Qt,O="click"+L,se=h.select(m(f)).on("touchmove"+L,be).on("dragstart"+L,be).on("selectstart"+L,be);if(_t==null&&(_t="onselectstart"in f?!1:W(f.style,"userSelect")),_t){var ue=v(f).style,ve=ue[_t];ue[_t]="none"}return function(Le){if(se.on(L,null),_t&&(ue[_t]=ve),Le){var Me=function(){se.on(O,null)};se.on(O,function(){be(),Me()},!0),setTimeout(Me,0)}}}h.mouse=function(f){return rr(f,Ee())};var Vt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function rr(f,L){L.changedTouches&&(L=L.changedTouches[0]);var O=f.ownerSVGElement||f;if(O.createSVGPoint){var se=O.createSVGPoint();if(Vt<0){var ue=m(f);if(ue.scrollX||ue.scrollY){O=h.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ve=O[0][0].getScreenCTM();Vt=!(ve.f||ve.e),O.remove()}}return Vt?(se.x=L.pageX,se.y=L.pageY):(se.x=L.clientX,se.y=L.clientY),se=se.matrixTransform(f.getScreenCTM().inverse()),[se.x,se.y]}var Le=f.getBoundingClientRect();return[L.clientX-Le.left-f.clientLeft,L.clientY-Le.top-f.clientTop]}h.touch=function(f,L,O){if(arguments.length<3&&(O=L,L=Ee().changedTouches),L){for(var se=0,ue=L.length,ve;se<ue;++se)if((ve=L[se]).identifier===O)return rr(f,ve)}},h.behavior.drag=function(){var f=Te(ue,"drag","dragstart","dragend"),L=null,O=ve(de,h.mouse,m,"mousemove","mouseup"),se=ve(Ne,h.touch,ne,"touchmove","touchend");function ue(){this.on("mousedown.drag",O).on("touchstart.drag",se)}function ve(Le,Me,Ie,Ze,Qe){return function(){var bt=this,kt=h.event.target.correspondingElement||h.event.target,Gt=bt.parentNode,tr=f.of(bt,arguments),Et=0,Ot=Le(),$t=".drag"+(Ot==null?"":"-"+Ot),nr,ir=h.select(Ie(kt)).on(Ze+$t,Kr).on(Qe+$t,on),Yt=fr(kt),jr=Me(Gt,Ot);L?(nr=L.apply(bt,arguments),nr=[nr.x-jr[0],nr.y-jr[1]]):nr=[0,0],tr({type:"dragstart"});function Kr(){var tn=Me(Gt,Ot),vn,gn;tn&&(vn=tn[0]-jr[0],gn=tn[1]-jr[1],Et|=vn|gn,jr=tn,tr({type:"drag",x:tn[0]+nr[0],y:tn[1]+nr[1],dx:vn,dy:gn}))}function on(){Me(Gt,Ot)&&(ir.on(Ze+$t,null).on(Qe+$t,null),Yt(Et),tr({type:"dragend"}))}}}return ue.origin=function(Le){return arguments.length?(L=Le,ue):L},h.rebind(ue,f,"on")};function Ne(){return h.event.changedTouches[0].identifier}h.touches=function(f,L){return arguments.length<2&&(L=Ee().touches),L?u(L).map(function(O){var se=rr(f,O);return se.identifier=O.identifier,se}):[]};var $e=1e-6,Ue=$e*$e,fe=Math.PI,je=2*fe,Pe=je-$e,Re=fe/2,tt=fe/180,nt=180/fe;function dt(f,L,O){return(L[0]-f[0])*(O[1]-f[1])-(L[1]-f[1])*(O[0]-f[0])}function St(f){return f>1?Re:f<-1?-Re:Math.asin(f)}function Dt(f){return((f=Math.exp(f))-1/f)/2}function at(f){return((f=Math.exp(f))+1/f)/2}function Ct(f){return((f=Math.exp(2*f))-1)/(f+1)}var Ht=Math.SQRT2,Ut=2,Ar=4;h.interpolateZoom=function(f,L){var O=f[0],se=f[1],ue=f[2],ve=L[0],Le=L[1],Me=L[2],Ie=ve-O,Ze=Le-se,Qe=Ie*Ie+Ze*Ze,bt,kt;if(Qe<Ue)kt=Math.log(Me/ue)/Ht,bt=function(nr){return[O+nr*Ie,se+nr*Ze,ue*Math.exp(Ht*nr*kt)]};else{var Gt=Math.sqrt(Qe),tr=(Me*Me-ue*ue+Ar*Qe)/(2*ue*Ut*Gt),Et=(Me*Me-ue*ue-Ar*Qe)/(2*Me*Ut*Gt),Ot=Math.log(Math.sqrt(tr*tr+1)-tr),$t=Math.log(Math.sqrt(Et*Et+1)-Et);kt=($t-Ot)/Ht,bt=function(nr){var ir=nr*kt,Yt=at(Ot),jr=ue/(Ut*Gt)*(Yt*Ct(Ht*ir+Ot)-Dt(Ot));return[O+jr*Ie,se+jr*Ze,ue*Yt/at(Ht*ir+Ot)]}}return bt.duration=kt*1e3,bt},h.behavior.zoom=function(){var f={x:0,y:0,k:1},L,O,se,ue=[960,500],ve=Rr,Le=250,Me=0,Ie="mousedown.zoom",Ze="mousemove.zoom",Qe="mouseup.zoom",bt,kt="touchstart.zoom",Gt,tr=Te(ir,"zoomstart","zoom","zoomend"),Et,Ot,$t,nr;Mr||(Mr="onwheel"in p?($r=function(){return-h.event.deltaY*(h.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?($r=function(){return h.event.wheelDelta},"mousewheel"):($r=function(){return-h.event.detail},"MozMousePixelScroll"));function ir(Jr){Jr.on(Ie,Dn).on(Mr+".zoom",Sa).on("dblclick.zoom",Ti).on(kt,hi)}ir.event=function(Jr){Jr.each(function(){var Un=tr.of(this,arguments),Qn=f;Ec?h.select(this).transition().each("start.zoom",function(){f=this.__chart__||{x:0,y:0,k:1},gn(Un)}).tween("zoom:zoom",function(){var pi=ue[0],ca=ue[1],Na=O?O[0]:pi/2,Xa=O?O[1]:ca/2,gs=h.interpolateZoom([(Na-f.x)/f.k,(Xa-f.y)/f.k,pi/f.k],[(Na-Qn.x)/Qn.k,(Xa-Qn.y)/Qn.k,pi/Qn.k]);return function(Ps){var ys=gs(Ps),Vs=pi/ys[2];this.__chart__=f={x:Na-ys[0]*Vs,y:Xa-ys[1]*Vs,k:Vs},Vn(Un)}}).each("interrupt.zoom",function(){bn(Un)}).each("end.zoom",function(){bn(Un)}):(this.__chart__=f,gn(Un),Vn(Un),bn(Un))})},ir.translate=function(Jr){return arguments.length?(f={x:+Jr[0],y:+Jr[1],k:f.k},vn(),ir):[f.x,f.y]},ir.scale=function(Jr){return arguments.length?(f={x:f.x,y:f.y,k:null},Kr(+Jr),vn(),ir):f.k},ir.scaleExtent=function(Jr){return arguments.length?(ve=Jr==null?Rr:[+Jr[0],+Jr[1]],ir):ve},ir.center=function(Jr){return arguments.length?(se=Jr&&[+Jr[0],+Jr[1]],ir):se},ir.size=function(Jr){return arguments.length?(ue=Jr&&[+Jr[0],+Jr[1]],ir):ue},ir.duration=function(Jr){return arguments.length?(Le=+Jr,ir):Le},ir.x=function(Jr){return arguments.length?(Ot=Jr,Et=Jr.copy(),f={x:0,y:0,k:1},ir):Ot},ir.y=function(Jr){return arguments.length?(nr=Jr,$t=Jr.copy(),f={x:0,y:0,k:1},ir):nr};function Yt(Jr){return[(Jr[0]-f.x)/f.k,(Jr[1]-f.y)/f.k]}function jr(Jr){return[Jr[0]*f.k+f.x,Jr[1]*f.k+f.y]}function Kr(Jr){f.k=Math.max(ve[0],Math.min(ve[1],Jr))}function on(Jr,Un){Un=jr(Un),f.x+=Jr[0]-Un[0],f.y+=Jr[1]-Un[1]}function tn(Jr,Un,Qn,pi){Jr.__chart__={x:f.x,y:f.y,k:f.k},Kr(Math.pow(2,pi)),on(O=Un,Qn),Jr=h.select(Jr),Le>0&&(Jr=Jr.transition().duration(Le)),Jr.call(ir.event)}function vn(){Ot&&Ot.domain(Et.range().map(function(Jr){return(Jr-f.x)/f.k}).map(Et.invert)),nr&&nr.domain($t.range().map(function(Jr){return(Jr-f.y)/f.k}).map($t.invert))}function gn(Jr){Me++||Jr({type:"zoomstart"})}function Vn(Jr){vn(),Jr({type:"zoom",scale:f.k,translate:[f.x,f.y]})}function bn(Jr){--Me||(Jr({type:"zoomend"}),O=null)}function Dn(){var Jr=this,Un=tr.of(Jr,arguments),Qn=0,pi=h.select(m(Jr)).on(Ze,Xa).on(Qe,gs),ca=Yt(h.mouse(Jr)),Na=fr(Jr);fh.call(Jr),gn(Un);function Xa(){Qn=1,on(h.mouse(Jr),ca),Vn(Un)}function gs(){pi.on(Ze,null).on(Qe,null),Na(Qn),bn(Un)}}function hi(){var Jr=this,Un=tr.of(Jr,arguments),Qn={},pi=0,ca,Na=".zoom-"+h.event.changedTouches[0].identifier,Xa="touchmove"+Na,gs="touchend"+Na,Ps=[],ys=h.select(Jr),Vs=fr(Jr);Us(),gn(Un),ys.on(Ie,null).on(kt,Us);function as(){var Ro=h.touches(Jr);return ca=f.k,Ro.forEach(function(Za){Za.identifier in Qn&&(Qn[Za.identifier]=Yt(Za))}),Ro}function Us(){var Ro=h.event.target;h.select(Ro).on(Xa,Lc).on(gs,zT),Ps.push(Ro);for(var Za=h.event.changedTouches,go=0,Yo=Za.length;go<Yo;++go)Qn[Za[go].identifier]=null;var yo=as(),_u=Date.now();if(yo.length===1){if(_u-Gt<500){var Rc=yo[0];tn(Jr,Rc,Qn[Rc.identifier],Math.floor(Math.log(f.k)/Math.LN2)+1),be()}Gt=_u}else if(yo.length>1){var Rc=yo[0],ql=yo[1],mh=Rc[0]-ql[0],rx=Rc[1]-ql[1];pi=mh*mh+rx*rx}}function Lc(){var Ro=h.touches(Jr),Za,go,Yo,yo;fh.call(Jr);for(var _u=0,Rc=Ro.length;_u<Rc;++_u,yo=null)if(Yo=Ro[_u],yo=Qn[Yo.identifier]){if(go)break;Za=Yo,go=yo}if(yo){var ql=(ql=Yo[0]-Za[0])*ql+(ql=Yo[1]-Za[1])*ql,mh=pi&&Math.sqrt(ql/pi);Za=[(Za[0]+Yo[0])/2,(Za[1]+Yo[1])/2],go=[(go[0]+yo[0])/2,(go[1]+yo[1])/2],Kr(mh*ca)}Gt=null,on(Za,go),Vn(Un)}function zT(){if(h.event.touches.length){for(var Ro=h.event.changedTouches,Za=0,go=Ro.length;Za<go;++Za)delete Qn[Ro[Za].identifier];for(var Yo in Qn)return void as()}h.selectAll(Ps).on(Na,null),ys.on(Ie,Dn).on(kt,hi),Vs(),bn(Un)}}function Sa(){var Jr=tr.of(this,arguments);bt?clearTimeout(bt):(fh.call(this),L=Yt(O=se||h.mouse(this)),gn(Jr)),bt=setTimeout(function(){bt=null,bn(Jr)},50),be(),Kr(Math.pow(2,$r()*.002)*f.k),on(O,L),Vn(Jr)}function Ti(){var Jr=h.mouse(this),Un=Math.log(f.k)/Math.LN2;tn(this,Jr,Yt(Jr),h.event.shiftKey?Math.ceil(Un)-1:Math.floor(Un)+1)}return h.rebind(ir,tr,"on")};var Rr=[0,1/0],$r,Mr;h.color=Ir;function Ir(){}Ir.prototype.toString=function(){return this.rgb()+""},h.hsl=gr;function gr(f,L,O){return this instanceof gr?(this.h=+f,this.s=+L,void(this.l=+O)):arguments.length<2?f instanceof gr?new gr(f.h,f.s,f.l):it(""+f,Tt,gr):new gr(f,L,O)}var br=gr.prototype=new Ir;br.brighter=function(f){return f=Math.pow(.7,arguments.length?f:1),new gr(this.h,this.s,this.l/f)},br.darker=function(f){return f=Math.pow(.7,arguments.length?f:1),new gr(this.h,this.s,f*this.l)},br.rgb=function(){return Vr(this.h,this.s,this.l)};function Vr(f,L,O){var se,ue;f=isNaN(f)?0:(f%=360)<0?f+360:f,L=isNaN(L)||L<0?0:L>1?1:L,O=O<0?0:O>1?1:O,ue=O<=.5?O*(1+L):O+L-O*L,se=2*O-ue;function ve(Me){return Me>360?Me-=360:Me<0&&(Me+=360),Me<60?se+(ue-se)*Me/60:Me<180?ue:Me<240?se+(ue-se)*(240-Me)/60:se}function Le(Me){return Math.round(ve(Me)*255)}return new me(Le(f+120),Le(f),Le(f-120))}h.hcl=Br;function Br(f,L,O){return this instanceof Br?(this.h=+f,this.c=+L,void(this.l=+O)):arguments.length<2?f instanceof Br?new Br(f.h,f.c,f.l):f instanceof hr?Xn(f.l,f.a,f.b):Xn((f=rt((f=h.rgb(f)).r,f.g,f.b)).l,f.a,f.b):new Br(f,L,O)}var Ur=Br.prototype=new Ir;Ur.brighter=function(f){return new Br(this.h,this.c,Math.min(100,this.l+Or*(arguments.length?f:1)))},Ur.darker=function(f){return new Br(this.h,this.c,Math.max(0,this.l-Or*(arguments.length?f:1)))},Ur.rgb=function(){return Lr(this.h,this.c,this.l).rgb()};function Lr(f,L,O){return isNaN(f)&&(f=0),isNaN(L)&&(L=0),new hr(O,Math.cos(f*=tt)*L,Math.sin(f)*L)}h.lab=hr;function hr(f,L,O){return this instanceof hr?(this.l=+f,this.a=+L,void(this.b=+O)):arguments.length<2?f instanceof hr?new hr(f.l,f.a,f.b):f instanceof Br?Lr(f.h,f.c,f.l):rt((f=me(f)).r,f.g,f.b):new hr(f,L,O)}var Or=18,fn=.95047,An=1,qr=1.08883,yn=hr.prototype=new Ir;yn.brighter=function(f){return new hr(Math.min(100,this.l+Or*(arguments.length?f:1)),this.a,this.b)},yn.darker=function(f){return new hr(Math.max(0,this.l-Or*(arguments.length?f:1)),this.a,this.b)},yn.rgb=function(){return xn(this.l,this.a,this.b)};function xn(f,L,O){var se=(f+16)/116,ue=se+L/500,ve=se-O/200;return ue=mr(ue)*fn,se=mr(se)*An,ve=mr(ve)*qr,new me(we(3.2404542*ue-1.5371385*se-.4985314*ve),we(-.969266*ue+1.8760108*se+.041556*ve),we(.0556434*ue-.2040259*se+1.0572252*ve))}function Xn(f,L,O){return f>0?new Br(Math.atan2(O,L)*nt,Math.sqrt(L*L+O*O),f):new Br(NaN,NaN,f)}function mr(f){return f>.206893034?f*f*f:(f-4/29)/7.787037}function jn(f){return f>.008856?Math.pow(f,1/3):7.787037*f+4/29}function we(f){return Math.round(255*(f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055))}h.rgb=me;function me(f,L,O){return this instanceof me?(this.r=~~f,this.g=~~L,void(this.b=~~O)):arguments.length<2?f instanceof me?new me(f.r,f.g,f.b):it(""+f,me,Vr):new me(f,L,O)}function mt(f){return new me(f>>16,f>>8&255,f&255)}function ft(f){return mt(f)+""}var Xe=me.prototype=new Ir;Xe.brighter=function(f){f=Math.pow(.7,arguments.length?f:1);var L=this.r,O=this.g,se=this.b,ue=30;return!L&&!O&&!se?new me(ue,ue,ue):(L&&L<ue&&(L=ue),O&&O<ue&&(O=ue),se&&se<ue&&(se=ue),new me(Math.min(255,L/f),Math.min(255,O/f),Math.min(255,se/f)))},Xe.darker=function(f){return f=Math.pow(.7,arguments.length?f:1),new me(f*this.r,f*this.g,f*this.b)},Xe.hsl=function(){return Tt(this.r,this.g,this.b)},Xe.toString=function(){return"#"+Ke(this.r)+Ke(this.g)+Ke(this.b)};function Ke(f){return f<16?"0"+Math.max(0,f).toString(16):Math.min(255,f).toString(16)}function it(f,L,O){var se=0,ue=0,ve=0,Le,Me,Ie;if(Le=/([a-z]+)\((.*)\)/.exec(f=f.toLowerCase()),Le)switch(Me=Le[2].split(","),Le[1]){case"hsl":return O(parseFloat(Me[0]),parseFloat(Me[1])/100,parseFloat(Me[2])/100);case"rgb":return L(Mt(Me[0]),Mt(Me[1]),Mt(Me[2]))}return(Ie=Lt.get(f))?L(Ie.r,Ie.g,Ie.b):(f!=null&&f.charAt(0)==="#"&&!isNaN(Ie=parseInt(f.slice(1),16))&&(f.length===4?(se=(Ie&3840)>>4,se=se>>4|se,ue=Ie&240,ue=ue>>4|ue,ve=Ie&15,ve=ve<<4|ve):f.length===7&&(se=(Ie&16711680)>>16,ue=(Ie&65280)>>8,ve=Ie&255)),L(se,ue,ve))}function Tt(f,L,O){var se=Math.min(f/=255,L/=255,O/=255),ue=Math.max(f,L,O),ve=ue-se,Le,Me,Ie=(ue+se)/2;return ve?(Me=Ie<.5?ve/(ue+se):ve/(2-ue-se),f==ue?Le=(L-O)/ve+(L<O?6:0):L==ue?Le=(O-f)/ve+2:Le=(f-L)/ve+4,Le*=60):(Le=NaN,Me=Ie>0&&Ie<1?0:Le),new gr(Le,Me,Ie)}function rt(f,L,O){f=xt(f),L=xt(L),O=xt(O);var se=jn((.4124564*f+.3575761*L+.1804375*O)/fn),ue=jn((.2126729*f+.7151522*L+.072175*O)/An),ve=jn((.0193339*f+.119192*L+.9503041*O)/qr);return hr(116*ue-16,500*(se-ue),200*(ue-ve))}function xt(f){return(f/=255)<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Mt(f){var L=parseFloat(f);return f.charAt(f.length-1)==="%"?Math.round(L*2.55):L}var Lt=h.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Lt.forEach(function(f,L){Lt.set(f,mt(L))});function Xt(f){return typeof f=="function"?f:function(){return f}}h.functor=Xt,h.xhr=sr(ne);function sr(f){return function(L,O,se){return arguments.length===2&&typeof O=="function"&&(se=O,O=null),or(L,O,f,se)}}function or(f,L,O,se){var ue={},ve=h.dispatch("beforesend","progress","load","error"),Le={},Me=new XMLHttpRequest,Ie=null;self.XDomainRequest&&!("withCredentials"in Me)&&/^(http(s)?:)?\/\//.test(f)&&(Me=new XDomainRequest),"onload"in Me?Me.onload=Me.onerror=Ze:Me.onreadystatechange=function(){Me.readyState>3&&Ze()};function Ze(){var Qe=Me.status,bt;if(!Qe&&_r(Me)||Qe>=200&&Qe<300||Qe===304){try{bt=O.call(ue,Me)}catch(kt){ve.error.call(ue,kt);return}ve.load.call(ue,bt)}else ve.error.call(ue,Me)}return Me.onprogress=function(Qe){var bt=h.event;h.event=Qe;try{ve.progress.call(ue,Me)}finally{h.event=bt}},ue.header=function(Qe,bt){return Qe=(Qe+"").toLowerCase(),arguments.length<2?Le[Qe]:(bt==null?delete Le[Qe]:Le[Qe]=bt+"",ue)},ue.mimeType=function(Qe){return arguments.length?(L=Qe==null?null:Qe+"",ue):L},ue.responseType=function(Qe){return arguments.length?(Ie=Qe,ue):Ie},ue.response=function(Qe){return O=Qe,ue},["get","post"].forEach(function(Qe){ue[Qe]=function(){return ue.send.apply(ue,[Qe].concat(u(arguments)))}}),ue.send=function(Qe,bt,kt){if(arguments.length===2&&typeof bt=="function"&&(kt=bt,bt=null),Me.open(Qe,f,!0),L!=null&&!("accept"in Le)&&(Le.accept=L+",*/*"),Me.setRequestHeader)for(var Gt in Le)Me.setRequestHeader(Gt,Le[Gt]);return L!=null&&Me.overrideMimeType&&Me.overrideMimeType(L),Ie!=null&&(Me.responseType=Ie),kt!=null&&ue.on("error",kt).on("load",function(tr){kt(null,tr)}),ve.beforesend.call(ue,Me),Me.send(bt??null),ue},ue.abort=function(){return Me.abort(),ue},h.rebind(ue,ve,"on"),se==null?ue:ue.get(Dr(se))}function Dr(f){return f.length===1?function(L,O){f(L==null?O:null)}:f}function _r(f){var L=f.responseType;return L&&L!=="text"?f.response:f.responseText}h.dsv=function(f,L){var O=new RegExp('["'+f+`
]`),se=f.charCodeAt(0);function ue(Ze,Qe,bt){arguments.length<3&&(bt=Qe,Qe=null);var kt=or(Ze,L,Qe==null?ve:Le(Qe),bt);return kt.row=function(Gt){return arguments.length?kt.response((Qe=Gt)==null?ve:Le(Gt)):Qe},kt}function ve(Ze){return ue.parse(Ze.responseText)}function Le(Ze){return function(Qe){return ue.parse(Qe.responseText,Ze)}}ue.parse=function(Ze,Qe){var bt;return ue.parseRows(Ze,function(kt,Gt){if(bt)return bt(kt,Gt-1);var tr=function(Et){for(var Ot={},$t=kt.length,nr=0;nr<$t;++nr)Ot[kt[nr]]=Et[nr];return Ot};bt=Qe?function(Et,Ot){return Qe(tr(Et),Ot)}:tr})},ue.parseRows=function(Ze,Qe){var bt={},kt={},Gt=[],tr=Ze.length,Et=0,Ot=0,$t,nr;function ir(){if(Et>=tr)return kt;if(nr)return nr=!1,bt;var jr=Et;if(Ze.charCodeAt(jr)===34){for(var Kr=jr;Kr++<tr;)if(Ze.charCodeAt(Kr)===34){if(Ze.charCodeAt(Kr+1)!==34)break;++Kr}Et=Kr+2;var on=Ze.charCodeAt(Kr+1);return on===13?(nr=!0,Ze.charCodeAt(Kr+2)===10&&++Et):on===10&&(nr=!0),Ze.slice(jr+1,Kr).replace(/""/g,'"')}for(;Et<tr;){var on=Ze.charCodeAt(Et++),tn=1;if(on===10)nr=!0;else if(on===13)nr=!0,Ze.charCodeAt(Et)===10&&(++Et,++tn);else if(on!==se)continue;return Ze.slice(jr,Et-tn)}return Ze.slice(jr)}for(;($t=ir())!==kt;){for(var Yt=[];$t!==bt&&$t!==kt;)Yt.push($t),$t=ir();Qe&&(Yt=Qe(Yt,Ot++))==null||Gt.push(Yt)}return Gt},ue.format=function(Ze){if(Array.isArray(Ze[0]))return ue.formatRows(Ze);var Qe=new ee,bt=[];return Ze.forEach(function(kt){for(var Gt in kt)Qe.has(Gt)||bt.push(Qe.add(Gt))}),[bt.map(Ie).join(f)].concat(Ze.map(function(kt){return bt.map(function(Gt){return Ie(kt[Gt])}).join(f)})).join(`
`)},ue.formatRows=function(Ze){return Ze.map(Me).join(`
`)};function Me(Ze){return Ze.map(Ie).join(f)}function Ie(Ze){return O.test(Ze)?'"'+Ze.replace(/\"/g,'""')+'"':Ze}return ue},h.csv=h.dsv(",","text/csv"),h.tsv=h.dsv("	","text/tab-separated-values");var Zr,Er,Gr,Qr,En=this[W(this,"requestAnimationFrame")]||function(f){setTimeout(f,17)};h.timer=function(){Sn.apply(this,arguments)};function Sn(f,L,O){var se=arguments.length;se<2&&(L=0),se<3&&(O=Date.now());var ue=O+L,ve={c:f,t:ue,n:null};return Er?Er.n=ve:Zr=ve,Er=ve,Gr||(Qr=clearTimeout(Qr),Gr=1,En(gi)),ve}function gi(){var f=ei(),L=ai()-f;L>24?(isFinite(L)&&(clearTimeout(Qr),Qr=setTimeout(gi,L)),Gr=0):(Gr=1,En(gi))}h.timer.flush=function(){ei(),ai()};function ei(){for(var f=Date.now(),L=Zr;L;)f>=L.t&&L.c(f-L.t)&&(L.c=null),L=L.n;return f}function ai(){for(var f,L=Zr,O=1/0;L;)L.c?(L.t<O&&(O=L.t),L=(f=L).n):L=f?f.n=L.n:Zr=L.n;return Er=f,O}h.round=function(f,L){return L?Math.round(f*(L=Math.pow(10,L)))/L:Math.round(f)},h.geom={};function ta(f){return f[0]}function ka(f){return f[1]}h.geom.hull=function(f){var L=ta,O=ka;if(arguments.length)return se(f);function se(ue){if(ue.length<3)return[];var ve=Xt(L),Le=Xt(O),Me,Ie=ue.length,Ze=[],Qe=[];for(Me=0;Me<Ie;Me++)Ze.push([+ve.call(this,ue[Me],Me),+Le.call(this,ue[Me],Me),Me]);for(Ze.sort(_n),Me=0;Me<Ie;Me++)Qe.push([Ze[Me][0],-Ze[Me][1]]);var bt=ci(Ze),kt=ci(Qe),Gt=kt[0]===bt[0],tr=kt[kt.length-1]===bt[bt.length-1],Et=[];for(Me=bt.length-1;Me>=0;--Me)Et.push(ue[Ze[bt[Me]][2]]);for(Me=+Gt;Me<kt.length-tr;++Me)Et.push(ue[Ze[kt[Me]][2]]);return Et}return se.x=function(ue){return arguments.length?(L=ue,se):L},se.y=function(ue){return arguments.length?(O=ue,se):O},se};function ci(f){for(var L=f.length,O=[0,1],se=2,ue=2;ue<L;ue++){for(;se>1&&dt(f[O[se-2]],f[O[se-1]],f[ue])<=0;)--se;O[se++]=ue}return O.slice(0,se)}function _n(f,L){return f[0]-L[0]||f[1]-L[1]}h.geom.polygon=function(f){return te(f,Zn),f};var Zn=h.geom.polygon.prototype=[];Zn.area=function(){for(var f=-1,L=this.length,O,se=this[L-1],ue=0;++f<L;)O=se,se=this[f],ue+=O[1]*se[0]-O[0]*se[1];return ue*.5},Zn.centroid=function(f){var L=-1,O=this.length,se=0,ue=0,ve,Le=this[O-1],Me;for(arguments.length||(f=-1/(6*this.area()));++L<O;)ve=Le,Le=this[L],Me=ve[0]*Le[1]-Le[0]*ve[1],se+=(ve[0]+Le[0])*Me,ue+=(ve[1]+Le[1])*Me;return[se*f,ue*f]},Zn.clip=function(f){for(var L,O=Ji(f),se=-1,ue=this.length-Ji(this),ve,Le,Me=this[ue-1],Ie,Ze,Qe;++se<ue;){for(L=f.slice(),f.length=0,Ie=this[se],Ze=L[(Le=L.length-O)-1],ve=-1;++ve<Le;)Qe=L[ve],fi(Qe,Me,Ie)?(fi(Ze,Me,Ie)||f.push(ra(Ze,Qe,Me,Ie)),f.push(Qe)):fi(Ze,Me,Ie)&&f.push(ra(Ze,Qe,Me,Ie)),Ze=Qe;O&&f.push(f[0]),Me=Ie}return f};function fi(f,L,O){return(O[0]-L[0])*(f[1]-L[1])<(O[1]-L[1])*(f[0]-L[0])}function ra(f,L,O,se){var ue=f[0],ve=O[0],Le=L[0]-ue,Me=se[0]-ve,Ie=f[1],Ze=O[1],Qe=L[1]-Ie,bt=se[1]-Ze,kt=(Me*(Ie-Ze)-bt*(ue-ve))/(bt*Le-Me*Qe);return[ue+kt*Le,Ie+kt*Qe]}function Ji(f){var L=f[0],O=f[f.length-1];return!(L[0]-O[0]||L[1]-O[1])}var Ln,qn,zn,xi=[],Mi,qi,Vi=[];function bi(){Ac(this),this.edge=this.site=this.circle=null}function Oa(f){var L=xi.pop()||new bi;return L.site=f,L}function na(f){vs(f),zn.remove(f),xi.push(f),Ac(f)}function la(f){var L=f.circle,O=L.x,se=L.cy,ue={x:O,y:se},ve=f.P,Le=f.N,Me=[f];na(f);for(var Ie=ve;Ie.circle&&b(O-Ie.circle.x)<$e&&b(se-Ie.circle.cy)<$e;)ve=Ie.P,Me.unshift(Ie),na(Ie),Ie=ve;Me.unshift(Ie),vs(Ie);for(var Ze=Le;Ze.circle&&b(O-Ze.circle.x)<$e&&b(se-Ze.circle.cy)<$e;)Le=Ze.N,Me.push(Ze),na(Ze),Ze=Le;Me.push(Ze),vs(Ze);var Qe=Me.length,bt;for(bt=1;bt<Qe;++bt)Ze=Me[bt],Ie=Me[bt-1],wi(Ze.edge,Ie.site,Ze.site,ue);Ie=Me[0],Ze=Me[Qe-1],Ze.edge=Ki(Ie.site,Ze.site,null,ue),Zi(Ie),Zi(Ze)}function Ba(f){for(var L=f.x,O=f.y,se,ue,ve,Le,Me=zn._;Me;)if(ve=li(Me,O)-L,ve>$e)Me=Me.L;else if(Le=L-rs(Me,O),Le>$e){if(!Me.R){se=Me;break}Me=Me.R}else{ve>-$e?(se=Me.P,ue=Me):Le>-$e?(se=Me,ue=Me.N):se=ue=Me;break}var Ie=Oa(f);if(zn.insert(se,Ie),!(!se&&!ue)){if(se===ue){vs(se),ue=Oa(se.site),zn.insert(Ie,ue),Ie.edge=ue.edge=Ki(se.site,Ie.site),Zi(se),Zi(ue);return}if(!ue){Ie.edge=Ki(se.site,Ie.site);return}vs(se),vs(ue);var Ze=se.site,Qe=Ze.x,bt=Ze.y,kt=f.x-Qe,Gt=f.y-bt,tr=ue.site,Et=tr.x-Qe,Ot=tr.y-bt,$t=2*(kt*Ot-Gt*Et),nr=kt*kt+Gt*Gt,ir=Et*Et+Ot*Ot,Yt={x:(Ot*nr-Gt*ir)/$t+Qe,y:(kt*ir-Et*nr)/$t+bt};wi(ue.edge,Ze,tr,Yt),Ie.edge=Ki(Ze,f,null,Yt),ue.edge=Ki(f,tr,null,Yt),Zi(se),Zi(ue)}}function li(f,L){var O=f.site,se=O.x,ue=O.y,ve=ue-L;if(!ve)return se;var Le=f.P;if(!Le)return-1/0;O=Le.site;var Me=O.x,Ie=O.y,Ze=Ie-L;if(!Ze)return Me;var Qe=Me-se,bt=1/ve-1/Ze,kt=Qe/Ze;return bt?(-kt+Math.sqrt(kt*kt-2*bt*(Qe*Qe/(-2*Ze)-Ie+Ze/2+ue-ve/2)))/bt+se:(se+Me)/2}function rs(f,L){var O=f.N;if(O)return li(O,L);var se=f.site;return se.y===L?se.x:1/0}function ns(f){this.site=f,this.edges=[]}ns.prototype.prepare=function(){for(var f=this.edges,L=f.length,O;L--;)O=f[L].edge,(!O.b||!O.a)&&f.splice(L,1);return f.sort(ms),f.length};function ps(f){for(var L=f[0][0],O=f[1][0],se=f[0][1],ue=f[1][1],ve,Le,Me,Ie,Ze=qn,Qe=Ze.length,bt,kt,Gt,tr,Et,Ot;Qe--;)if(bt=Ze[Qe],!(!bt||!bt.prepare()))for(Gt=bt.edges,tr=Gt.length,kt=0;kt<tr;)Ot=Gt[kt].end(),Me=Ot.x,Ie=Ot.y,Et=Gt[++kt%tr].start(),ve=Et.x,Le=Et.y,(b(Me-ve)>$e||b(Ie-Le)>$e)&&(Gt.splice(kt,0,new Ds(ni(bt.site,Ot,b(Me-L)<$e&&ue-Ie>$e?{x:L,y:b(ve-L)<$e?Le:ue}:b(Ie-ue)<$e&&O-Me>$e?{x:b(Le-ue)<$e?ve:O,y:ue}:b(Me-O)<$e&&Ie-se>$e?{x:O,y:b(ve-O)<$e?Le:se}:b(Ie-se)<$e&&Me-L>$e?{x:b(Le-se)<$e?ve:L,y:se}:null),bt.site,null)),++tr)}function ms(f,L){return L.angle-f.angle}function is(){Ac(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zi(f){var L=f.P,O=f.N;if(!(!L||!O)){var se=L.site,ue=f.site,ve=O.site;if(se!==ve){var Le=ue.x,Me=ue.y,Ie=se.x-Le,Ze=se.y-Me,Qe=ve.x-Le,Ot=ve.y-Me,bt=2*(Ie*Ot-Ze*Qe);if(!(bt>=-Ue)){var kt=Ie*Ie+Ze*Ze,Gt=Qe*Qe+Ot*Ot,tr=(Ot*kt-Ze*Gt)/bt,Et=(Ie*Gt-Qe*kt)/bt,Ot=Et+Me,$t=Vi.pop()||new is;$t.arc=f,$t.site=ue,$t.x=tr+Le,$t.y=Ot+Math.sqrt(tr*tr+Et*Et),$t.cy=Ot,f.circle=$t;for(var nr=null,ir=qi._;ir;)if($t.y<ir.y||$t.y===ir.y&&$t.x<=ir.x)if(ir.L)ir=ir.L;else{nr=ir.P;break}else if(ir.R)ir=ir.R;else{nr=ir;break}qi.insert(nr,$t),nr||(Mi=$t)}}}}function vs(f){var L=f.circle;L&&(L.P||(Mi=L.N),qi.remove(L),Vi.push(L),Ac(L),f.circle=null)}function Ls(f,L,O,se){return function(ue){var ve=ue.a,Le=ue.b,Me=ve.x,Ie=ve.y,Ze=Le.x,Qe=Le.y,bt=0,kt=1,Gt=Ze-Me,tr=Qe-Ie,Et;if(Et=f-Me,!(!Gt&&Et>0)){if(Et/=Gt,Gt<0){if(Et<bt)return;Et<kt&&(kt=Et)}else if(Gt>0){if(Et>kt)return;Et>bt&&(bt=Et)}if(Et=O-Me,!(!Gt&&Et<0)){if(Et/=Gt,Gt<0){if(Et>kt)return;Et>bt&&(bt=Et)}else if(Gt>0){if(Et<bt)return;Et<kt&&(kt=Et)}if(Et=L-Ie,!(!tr&&Et>0)){if(Et/=tr,tr<0){if(Et<bt)return;Et<kt&&(kt=Et)}else if(tr>0){if(Et>kt)return;Et>bt&&(bt=Et)}if(Et=se-Ie,!(!tr&&Et<0)){if(Et/=tr,tr<0){if(Et>kt)return;Et>bt&&(bt=Et)}else if(tr>0){if(Et<bt)return;Et<kt&&(kt=Et)}return bt>0&&(ue.a={x:Me+bt*Gt,y:Ie+bt*tr}),kt<1&&(ue.b={x:Me+kt*Gt,y:Ie+kt*tr}),ue}}}}}}function va(f){for(var L=Ln,O=Ls(f[0][0],f[0][1],f[1][0],f[1][1]),se=L.length,ue;se--;)ue=L[se],(!Rs(ue,f)||!O(ue)||b(ue.a.x-ue.b.x)<$e&&b(ue.a.y-ue.b.y)<$e)&&(ue.a=ue.b=null,L.splice(se,1))}function Rs(f,L){var O=f.b;if(O)return!0;var se=f.a,ue=L[0][0],ve=L[1][0],Le=L[0][1],Me=L[1][1],Ie=f.l,Ze=f.r,Qe=Ie.x,bt=Ie.y,kt=Ze.x,Gt=Ze.y,tr=(Qe+kt)/2,Et=(bt+Gt)/2,Ot,$t;if(Gt===bt){if(tr<ue||tr>=ve)return;if(Qe>kt){if(!se)se={x:tr,y:Le};else if(se.y>=Me)return;O={x:tr,y:Me}}else{if(!se)se={x:tr,y:Me};else if(se.y<Le)return;O={x:tr,y:Le}}}else if(Ot=(Qe-kt)/(Gt-bt),$t=Et-Ot*tr,Ot<-1||Ot>1)if(Qe>kt){if(!se)se={x:(Le-$t)/Ot,y:Le};else if(se.y>=Me)return;O={x:(Me-$t)/Ot,y:Me}}else{if(!se)se={x:(Me-$t)/Ot,y:Me};else if(se.y<Le)return;O={x:(Le-$t)/Ot,y:Le}}else if(bt<Gt){if(!se)se={x:ue,y:Ot*ue+$t};else if(se.x>=ve)return;O={x:ve,y:Ot*ve+$t}}else{if(!se)se={x:ve,y:Ot*ve+$t};else if(se.x<ue)return;O={x:ue,y:Ot*ue+$t}}return f.a=se,f.b=O,!0}function Qi(f,L){this.l=f,this.r=L,this.a=this.b=null}function Ki(f,L,O,se){var ue=new Qi(f,L);return Ln.push(ue),O&&wi(ue,f,L,O),se&&wi(ue,L,f,se),qn[f.i].edges.push(new Ds(ue,f,L)),qn[L.i].edges.push(new Ds(ue,L,f)),ue}function ni(f,L,O){var se=new Qi(f,null);return se.a=L,se.b=O,Ln.push(se),se}function wi(f,L,O,se){!f.a&&!f.b?(f.a=se,f.l=L,f.r=O):f.l===O?f.b=se:f.a=se}function Ds(f,L,O){var se=f.a,ue=f.b;this.edge=f,this.site=L,this.angle=O?Math.atan2(O.y-L.y,O.x-L.x):f.l===L?Math.atan2(ue.x-se.x,se.y-ue.y):Math.atan2(se.x-ue.x,ue.y-se.y)}Ds.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Uo(){this._=null}function Ac(f){f.U=f.C=f.L=f.R=f.P=f.N=null}Uo.prototype={insert:function(f,L){var O,se,ue;if(f){if(L.P=f,L.N=f.N,f.N&&(f.N.P=L),f.N=L,f.R){for(f=f.R;f.L;)f=f.L;f.L=L}else f.R=L;O=f}else this._?(f=md(this._),L.P=null,L.N=f,f.P=f.L=L,O=f):(L.P=L.N=null,this._=L,O=null);for(L.L=L.R=null,L.U=O,L.C=!0,f=L;O&&O.C;)se=O.U,O===se.L?(ue=se.R,ue&&ue.C?(O.C=ue.C=!1,se.C=!0,f=se):(f===O.R&&(fl(this,O),f=O,O=f.U),O.C=!1,se.C=!0,Eo(this,se))):(ue=se.L,ue&&ue.C?(O.C=ue.C=!1,se.C=!0,f=se):(f===O.L&&(Eo(this,O),f=O,O=f.U),O.C=!1,se.C=!0,fl(this,se))),O=f.U;this._.C=!1},remove:function(f){f.N&&(f.N.P=f.P),f.P&&(f.P.N=f.N),f.N=f.P=null;var L=f.U,O,se=f.L,ue=f.R,ve,Le;if(se?ue?ve=md(ue):ve=se:ve=ue,L?L.L===f?L.L=ve:L.R=ve:this._=ve,se&&ue?(Le=ve.C,ve.C=f.C,ve.L=se,se.U=ve,ve!==ue?(L=ve.U,ve.U=f.U,f=ve.R,L.L=f,ve.R=ue,ue.U=ve):(ve.U=L,L=ve,f=ve.R)):(Le=f.C,f=ve),f&&(f.U=L),!Le){if(f&&f.C){f.C=!1;return}do{if(f===this._)break;if(f===L.L){if(O=L.R,O.C&&(O.C=!1,L.C=!0,fl(this,L),O=L.R),O.L&&O.L.C||O.R&&O.R.C){(!O.R||!O.R.C)&&(O.L.C=!1,O.C=!0,Eo(this,O),O=L.R),O.C=L.C,L.C=O.R.C=!1,fl(this,L),f=this._;break}}else if(O=L.L,O.C&&(O.C=!1,L.C=!0,Eo(this,L),O=L.L),O.L&&O.L.C||O.R&&O.R.C){(!O.L||!O.L.C)&&(O.R.C=!1,O.C=!0,fl(this,O),O=L.L),O.C=L.C,L.C=O.L.C=!1,Eo(this,L),f=this._;break}O.C=!0,f=L,L=L.U}while(!f.C);f&&(f.C=!1)}}};function fl(f,L){var O=L,se=L.R,ue=O.U;ue?ue.L===O?ue.L=se:ue.R=se:f._=se,se.U=ue,O.U=se,O.R=se.L,O.R&&(O.R.U=O),se.L=O}function Eo(f,L){var O=L,se=L.L,ue=O.U;ue?ue.L===O?ue.L=se:ue.R=se:f._=se,se.U=ue,O.U=se,O.L=se.R,O.L&&(O.L.U=O),se.R=O}function md(f){for(;f.L;)f=f.L;return f}function bu(f,L){var O=f.sort(th).pop(),se,ue,ve;for(Ln=[],qn=new Array(f.length),zn=new Uo,qi=new Uo;;)if(ve=Mi,O&&(!ve||O.y<ve.y||O.y===ve.y&&O.x<ve.x))(O.x!==se||O.y!==ue)&&(qn[O.i]=new ns(O),Ba(O),se=O.x,ue=O.y),O=f.pop();else if(ve)la(ve.arc);else break;L&&(va(L),ps(L));var Le={cells:qn,edges:Ln};return zn=qi=Ln=qn=null,Le}function th(f,L){return L.y-f.y||L.x-f.x}h.geom.voronoi=function(f){var L=ta,O=ka,se=L,ue=O,ve=Cc;if(f)return Le(f);function Le(Ie){var Ze=new Array(Ie.length),Qe=ve[0][0],bt=ve[0][1],kt=ve[1][0],Gt=ve[1][1];return bu(Me(Ie),ve).cells.forEach(function(tr,Et){var Ot=tr.edges,$t=tr.site,nr=Ze[Et]=Ot.length?Ot.map(function(ir){var Yt=ir.start();return[Yt.x,Yt.y]}):$t.x>=Qe&&$t.x<=kt&&$t.y>=bt&&$t.y<=Gt?[[Qe,Gt],[kt,Gt],[kt,bt],[Qe,bt]]:[];nr.point=Ie[Et]}),Ze}function Me(Ie){return Ie.map(function(Ze,Qe){return{x:Math.round(se(Ze,Qe)/$e)*$e,y:Math.round(ue(Ze,Qe)/$e)*$e,i:Qe}})}return Le.links=function(Ie){return bu(Me(Ie)).edges.filter(function(Ze){return Ze.l&&Ze.r}).map(function(Ze){return{source:Ie[Ze.l.i],target:Ie[Ze.r.i]}})},Le.triangles=function(Ie){var Ze=[];return bu(Me(Ie)).cells.forEach(function(Qe,bt){for(var kt=Qe.site,Gt=Qe.edges.sort(ms),tr=-1,Et=Gt.length,Ot,$t=Gt[Et-1].edge,nr=$t.l===kt?$t.r:$t.l;++tr<Et;)Ot=nr,$t=Gt[tr].edge,nr=$t.l===kt?$t.r:$t.l,bt<Ot.i&&bt<nr.i&&rh(kt,Ot,nr)<0&&Ze.push([Ie[bt],Ie[Ot.i],Ie[nr.i]])}),Ze},Le.x=function(Ie){return arguments.length?(se=Xt(L=Ie),Le):L},Le.y=function(Ie){return arguments.length?(ue=Xt(O=Ie),Le):O},Le.clipExtent=function(Ie){return arguments.length?(ve=Ie??Cc,Le):ve===Cc?null:ve},Le.size=function(Ie){return arguments.length?Le.clipExtent(Ie&&[[0,0],Ie]):ve===Cc?null:ve&&ve[1]},Le};var Cc=[[-1e6,-1e6],[1e6,1e6]];function rh(f,L,O){return(f.x-O.x)*(L.y-f.y)-(f.x-L.x)*(O.y-f.y)}h.geom.delaunay=function(f){return h.geom.voronoi().triangles(f)},h.geom.quadtree=function(f,L,O,se,ue){var ve=ta,Le=ka,Me;if(Me=arguments.length)return ve=KS,Le=eM,Me===3&&(ue=O,se=L,O=L=0),Ie(f);function Ie(Ze){var Qe,bt=Xt(ve),kt=Xt(Le),Gt,tr,Et,Ot,$t,nr,ir,Yt;if(L!=null)$t=L,nr=O,ir=se,Yt=ue;else if(ir=Yt=-($t=nr=1/0),Gt=[],tr=[],Ot=Ze.length,Me)for(Et=0;Et<Ot;++Et)Qe=Ze[Et],Qe.x<$t&&($t=Qe.x),Qe.y<nr&&(nr=Qe.y),Qe.x>ir&&(ir=Qe.x),Qe.y>Yt&&(Yt=Qe.y),Gt.push(Qe.x),tr.push(Qe.y);else for(Et=0;Et<Ot;++Et){var jr=+bt(Qe=Ze[Et],Et),Kr=+kt(Qe,Et);jr<$t&&($t=jr),Kr<nr&&(nr=Kr),jr>ir&&(ir=jr),Kr>Yt&&(Yt=Kr),Gt.push(jr),tr.push(Kr)}var on=ir-$t,tn=Yt-nr;on>tn?Yt=nr+on:ir=$t+tn;function vn(bn,Dn,hi,Sa,Ti,Jr,Un,Qn){if(!(isNaN(hi)||isNaN(Sa)))if(bn.leaf){var pi=bn.x,ca=bn.y;if(pi!=null)if(b(pi-hi)+b(ca-Sa)<.01)gn(bn,Dn,hi,Sa,Ti,Jr,Un,Qn);else{var Na=bn.point;bn.x=bn.y=bn.point=null,gn(bn,Na,pi,ca,Ti,Jr,Un,Qn),gn(bn,Dn,hi,Sa,Ti,Jr,Un,Qn)}else bn.x=hi,bn.y=Sa,bn.point=Dn}else gn(bn,Dn,hi,Sa,Ti,Jr,Un,Qn)}function gn(bn,Dn,hi,Sa,Ti,Jr,Un,Qn){var pi=(Ti+Un)*.5,ca=(Jr+Qn)*.5,Na=hi>=pi,Xa=Sa>=ca,gs=Xa<<1|Na;bn.leaf=!1,bn=bn.nodes[gs]||(bn.nodes[gs]=r1()),Na?Ti=pi:Un=pi,Xa?Jr=ca:Qn=ca,vn(bn,Dn,hi,Sa,Ti,Jr,Un,Qn)}var Vn=r1();if(Vn.add=function(bn){vn(Vn,bn,+bt(bn,++Et),+kt(bn,Et),$t,nr,ir,Yt)},Vn.visit=function(bn){vd(bn,Vn,$t,nr,ir,Yt)},Vn.find=function(bn){return tM(Vn,bn[0],bn[1],$t,nr,ir,Yt)},Et=-1,L==null){for(;++Et<Ot;)vn(Vn,Ze[Et],Gt[Et],tr[Et],$t,nr,ir,Yt);--Et}else Ze.forEach(Vn.add);return Gt=tr=Ze=Qe=null,Vn}return Ie.x=function(Ze){return arguments.length?(ve=Ze,Ie):ve},Ie.y=function(Ze){return arguments.length?(Le=Ze,Ie):Le},Ie.extent=function(Ze){return arguments.length?(Ze==null?L=O=se=ue=null:(L=+Ze[0][0],O=+Ze[0][1],se=+Ze[1][0],ue=+Ze[1][1]),Ie):L==null?null:[[L,O],[se,ue]]},Ie.size=function(Ze){return arguments.length?(Ze==null?L=O=se=ue=null:(L=O=0,se=+Ze[0],ue=+Ze[1]),Ie):L==null?null:[se-L,ue-O]},Ie};function KS(f){return f.x}function eM(f){return f.y}function r1(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function vd(f,L,O,se,ue,ve){if(!f(L,O,se,ue,ve)){var Le=(O+ue)*.5,Me=(se+ve)*.5,Ie=L.nodes;Ie[0]&&vd(f,Ie[0],O,se,Le,Me),Ie[1]&&vd(f,Ie[1],Le,se,ue,Me),Ie[2]&&vd(f,Ie[2],O,Me,Le,ve),Ie[3]&&vd(f,Ie[3],Le,Me,ue,ve)}}function tM(f,L,O,se,ue,ve,Le){var Me=1/0,Ie;return function Ze(Qe,bt,kt,Gt,tr){if(!(bt>ve||kt>Le||Gt<se||tr<ue)){if(Et=Qe.point){var Et,Ot=L-Qe.x,$t=O-Qe.y,nr=Ot*Ot+$t*$t;if(nr<Me){var ir=Math.sqrt(Me=nr);se=L-ir,ue=O-ir,ve=L+ir,Le=O+ir,Ie=Et}}for(var Yt=Qe.nodes,jr=(bt+Gt)*.5,Kr=(kt+tr)*.5,on=L>=jr,tn=O>=Kr,vn=tn<<1|on,gn=vn+4;vn<gn;++vn)if(Qe=Yt[vn&3])switch(vn&3){case 0:Ze(Qe,bt,kt,jr,Kr);break;case 1:Ze(Qe,jr,kt,Gt,Kr);break;case 2:Ze(Qe,bt,Kr,jr,tr);break;case 3:Ze(Qe,jr,Kr,Gt,tr);break}}}(f,se,ue,ve,Le),Ie}h.interpolateRgb=Im;function Im(f,L){f=h.rgb(f),L=h.rgb(L);var O=f.r,se=f.g,ue=f.b,ve=L.r-O,Le=L.g-se,Me=L.b-ue;return function(Ie){return"#"+Ke(Math.round(O+ve*Ie))+Ke(Math.round(se+Le*Ie))+Ke(Math.round(ue+Me*Ie))}}h.interpolateObject=n1;function n1(f,L){var O={},se={},ue;for(ue in f)ue in L?O[ue]=jc(f[ue],L[ue]):se[ue]=f[ue];for(ue in L)ue in f||(se[ue]=L[ue]);return function(ve){for(ue in O)se[ue]=O[ue](ve);return se}}h.interpolateNumber=hl;function hl(f,L){return f=+f,L=+L,function(O){return f*(1-O)+L*O}}h.interpolateString=i1;function i1(f,L){var O=Om.lastIndex=Bm.lastIndex=0,se,ue,ve,Le=-1,Me=[],Ie=[];for(f=f+"",L=L+"";(se=Om.exec(f))&&(ue=Bm.exec(L));)(ve=ue.index)>O&&(ve=L.slice(O,ve),Me[Le]?Me[Le]+=ve:Me[++Le]=ve),(se=se[0])===(ue=ue[0])?Me[Le]?Me[Le]+=ue:Me[++Le]=ue:(Me[++Le]=null,Ie.push({i:Le,x:hl(se,ue)})),O=Bm.lastIndex;return O<L.length&&(ve=L.slice(O),Me[Le]?Me[Le]+=ve:Me[++Le]=ve),Me.length<2?Ie[0]?(L=Ie[0].x,function(Ze){return L(Ze)+""}):function(){return L}:(L=Ie.length,function(Ze){for(var Qe=0,bt;Qe<L;++Qe)Me[(bt=Ie[Qe]).i]=bt.x(Ze);return Me.join("")})}var Om=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bm=new RegExp(Om.source,"g");h.interpolate=jc;function jc(f,L){for(var O=h.interpolators.length,se;--O>=0&&!(se=h.interpolators[O](f,L)););return se}h.interpolators=[function(f,L){var O=typeof L;return(O==="string"?Lt.has(L.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(L)?Im:i1:L instanceof Ir?Im:Array.isArray(L)?nh:O==="object"&&isNaN(L)?n1:hl)(f,L)}],h.interpolateArray=nh;function nh(f,L){var O=[],se=[],ue=f.length,ve=L.length,Le=Math.min(f.length,L.length),Me;for(Me=0;Me<Le;++Me)O.push(jc(f[Me],L[Me]));for(;Me<ue;++Me)se[Me]=f[Me];for(;Me<ve;++Me)se[Me]=L[Me];return function(Ie){for(Me=0;Me<Le;++Me)se[Me]=O[Me](Ie);return se}}var a1=function(){return ne},rM=h.map({linear:a1,poly:lM,quad:function(){return aM},cubic:function(){return sM},sin:function(){return cM},exp:function(){return uM},circle:function(){return dM},elastic:fM,back:hM,bounce:function(){return pM}}),nM=h.map({in:ne,out:s1,"in-out":o1,"out-in":function(f){return o1(s1(f))}});h.ease=function(f){var L=f.indexOf("-"),O=L>=0?f.slice(0,L):f,se=L>=0?f.slice(L+1):"in";return O=rM.get(O)||a1,se=nM.get(se)||ne,iM(se(O.apply(null,c.call(arguments,1))))};function iM(f){return function(L){return L<=0?0:L>=1?1:f(L)}}function s1(f){return function(L){return 1-f(1-L)}}function o1(f){return function(L){return .5*(L<.5?f(2*L):2-f(2-2*L))}}function aM(f){return f*f}function sM(f){return f*f*f}function oM(f){if(f<=0)return 0;if(f>=1)return 1;var L=f*f,O=L*f;return 4*(f<.5?O:3*(f-L)+O-.75)}function lM(f){return function(L){return Math.pow(L,f)}}function cM(f){return 1-Math.cos(f*Re)}function uM(f){return Math.pow(2,10*(f-1))}function dM(f){return 1-Math.sqrt(1-f*f)}function fM(f,L){var O;return arguments.length<2&&(L=.45),arguments.length?O=L/je*Math.asin(1/f):(f=1,O=L/4),function(se){return 1+f*Math.pow(2,-10*se)*Math.sin((se-O)*je/L)}}function hM(f){return f||(f=1.70158),function(L){return L*L*((f+1)*L-f)}}function pM(f){return f<1/2.75?7.5625*f*f:f<2/2.75?7.5625*(f-=1.5/2.75)*f+.75:f<2.5/2.75?7.5625*(f-=2.25/2.75)*f+.9375:7.5625*(f-=2.625/2.75)*f+.984375}h.interpolateHcl=mM;function mM(f,L){f=h.hcl(f),L=h.hcl(L);var O=f.h,se=f.c,ue=f.l,ve=L.h-O,Le=L.c-se,Me=L.l-ue;return isNaN(Le)&&(Le=0,se=isNaN(se)?L.c:se),isNaN(ve)?(ve=0,O=isNaN(O)?L.h:O):ve>180?ve-=360:ve<-180&&(ve+=360),function(Ie){return Lr(O+ve*Ie,se+Le*Ie,ue+Me*Ie)+""}}h.interpolateHsl=vM;function vM(f,L){f=h.hsl(f),L=h.hsl(L);var O=f.h,se=f.s,ue=f.l,ve=L.h-O,Le=L.s-se,Me=L.l-ue;return isNaN(Le)&&(Le=0,se=isNaN(se)?L.s:se),isNaN(ve)?(ve=0,O=isNaN(O)?L.h:O):ve>180?ve-=360:ve<-180&&(ve+=360),function(Ie){return Vr(O+ve*Ie,se+Le*Ie,ue+Me*Ie)+""}}h.interpolateLab=gM;function gM(f,L){f=h.lab(f),L=h.lab(L);var O=f.l,se=f.a,ue=f.b,ve=L.l-O,Le=L.a-se,Me=L.b-ue;return function(Ie){return xn(O+ve*Ie,se+Le*Ie,ue+Me*Ie)+""}}h.interpolateRound=l1;function l1(f,L){return L-=f,function(O){return Math.round(f+L*O)}}h.transform=function(f){var L=p.createElementNS(h.ns.prefix.svg,"g");return(h.transform=function(O){if(O!=null){L.setAttribute("transform",O);var se=L.transform.baseVal.consolidate()}return new c1(se?se.matrix:xM)})(f)};function c1(f){var L=[f.a,f.b],O=[f.c,f.d],se=d1(L),ue=u1(L,O),ve=d1(yM(O,L,-ue))||0;L[0]*O[1]<O[0]*L[1]&&(L[0]*=-1,L[1]*=-1,se*=-1,ue*=-1),this.rotate=(se?Math.atan2(L[1],L[0]):Math.atan2(-O[0],O[1]))*nt,this.translate=[f.e,f.f],this.scale=[se,ve],this.skew=ve?Math.atan2(ue,ve)*nt:0}c1.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function u1(f,L){return f[0]*L[0]+f[1]*L[1]}function d1(f){var L=Math.sqrt(u1(f,f));return L&&(f[0]/=L,f[1]/=L),L}function yM(f,L,O){return f[0]+=O*L[0],f[1]+=O*L[1],f}var xM={a:1,b:0,c:0,d:1,e:0,f:0};h.interpolateTransform=f1;function wu(f){return f.length?f.pop()+",":""}function bM(f,L,O,se){if(f[0]!==L[0]||f[1]!==L[1]){var ue=O.push("translate(",null,",",null,")");se.push({i:ue-4,x:hl(f[0],L[0])},{i:ue-2,x:hl(f[1],L[1])})}else(L[0]||L[1])&&O.push("translate("+L+")")}function wM(f,L,O,se){f!==L?(f-L>180?L+=360:L-f>180&&(f+=360),se.push({i:O.push(wu(O)+"rotate(",null,")")-2,x:hl(f,L)})):L&&O.push(wu(O)+"rotate("+L+")")}function _M(f,L,O,se){f!==L?se.push({i:O.push(wu(O)+"skewX(",null,")")-2,x:hl(f,L)}):L&&O.push(wu(O)+"skewX("+L+")")}function kM(f,L,O,se){if(f[0]!==L[0]||f[1]!==L[1]){var ue=O.push(wu(O)+"scale(",null,",",null,")");se.push({i:ue-4,x:hl(f[0],L[0])},{i:ue-2,x:hl(f[1],L[1])})}else(L[0]!==1||L[1]!==1)&&O.push(wu(O)+"scale("+L+")")}function f1(f,L){var O=[],se=[];return f=h.transform(f),L=h.transform(L),bM(f.translate,L.translate,O,se),wM(f.rotate,L.rotate,O,se),_M(f.skew,L.skew,O,se),kM(f.scale,L.scale,O,se),f=L=null,function(ue){for(var ve=-1,Le=se.length,Me;++ve<Le;)O[(Me=se[ve]).i]=Me.x(ue);return O.join("")}}function SM(f,L){return L=(L-=f=+f)||1/L,function(O){return(O-f)/L}}function MM(f,L){return L=(L-=f=+f)||1/L,function(O){return Math.max(0,Math.min(1,(O-f)/L))}}h.layout={},h.layout.bundle=function(){return function(f){for(var L=[],O=-1,se=f.length;++O<se;)L.push(TM(f[O]));return L}};function TM(f){for(var L=f.source,O=f.target,se=AM(L,O),ue=[L];L!==se;)L=L.parent,ue.push(L);for(var ve=ue.length;O!==se;)ue.splice(ve,0,O),O=O.parent;return ue}function h1(f){for(var L=[],O=f.parent;O!=null;)L.push(f),f=O,O=O.parent;return L.push(f),L}function AM(f,L){if(f===L)return f;for(var O=h1(f),se=h1(L),ue=O.pop(),ve=se.pop(),Le=null;ue===ve;)Le=ue,ue=O.pop(),ve=se.pop();return Le}h.layout.chord=function(){var f={},L,O,se,ue,ve=0,Le,Me,Ie;function Ze(){var bt={},kt=[],Gt=h.range(ue),tr=[],Et,Ot,$t,nr,ir;for(L=[],O=[],Et=0,nr=-1;++nr<ue;){for(Ot=0,ir=-1;++ir<ue;)Ot+=se[nr][ir];kt.push(Ot),tr.push(h.range(ue)),Et+=Ot}for(Le&&Gt.sort(function(Vn,bn){return Le(kt[Vn],kt[bn])}),Me&&tr.forEach(function(Vn,bn){Vn.sort(function(Dn,hi){return Me(se[bn][Dn],se[bn][hi])})}),Et=(je-ve*ue)/Et,Ot=0,nr=-1;++nr<ue;){for($t=Ot,ir=-1;++ir<ue;){var Yt=Gt[nr],jr=tr[Yt][ir],Kr=se[Yt][jr],on=Ot,tn=Ot+=Kr*Et;bt[Yt+"-"+jr]={index:Yt,subindex:jr,startAngle:on,endAngle:tn,value:Kr}}O[Yt]={index:Yt,startAngle:$t,endAngle:Ot,value:kt[Yt]},Ot+=ve}for(nr=-1;++nr<ue;)for(ir=nr-1;++ir<ue;){var vn=bt[nr+"-"+ir],gn=bt[ir+"-"+nr];(vn.value||gn.value)&&L.push(vn.value<gn.value?{source:gn,target:vn}:{source:vn,target:gn})}Ie&&Qe()}function Qe(){L.sort(function(bt,kt){return Ie((bt.source.value+bt.target.value)/2,(kt.source.value+kt.target.value)/2)})}return f.matrix=function(bt){return arguments.length?(ue=(se=bt)&&se.length,L=O=null,f):se},f.padding=function(bt){return arguments.length?(ve=bt,L=O=null,f):ve},f.sortGroups=function(bt){return arguments.length?(Le=bt,L=O=null,f):Le},f.sortSubgroups=function(bt){return arguments.length?(Me=bt,L=null,f):Me},f.sortChords=function(bt){return arguments.length?(Ie=bt,L&&Qe(),f):Ie},f.chords=function(){return L||Ze(),L},f.groups=function(){return O||Ze(),O},f},h.layout.force=function(){var f={},L=h.dispatch("start","tick","end"),O,se=[1,1],ue,ve,Le=.9,Me=RM,Ie=DM,Ze=-30,Qe=PM,bt=.1,kt=.64,Gt=[],tr=[],Et,Ot,$t;function nr(Yt){return function(jr,Kr,on,tn){if(jr.point!==Yt){var vn=jr.cx-Yt.x,gn=jr.cy-Yt.y,Vn=tn-Kr,bn=vn*vn+gn*gn;if(Vn*Vn/kt<bn){if(bn<Qe){var Dn=jr.charge/bn;Yt.px-=vn*Dn,Yt.py-=gn*Dn}return!0}if(jr.point&&bn&&bn<Qe){var Dn=jr.pointCharge/bn;Yt.px-=vn*Dn,Yt.py-=gn*Dn}}return!jr.charge}}f.tick=function(){if((ve*=.99)<.005)return O=null,L.end({type:"end",alpha:ve=0}),!0;var Yt=Gt.length,jr=tr.length,Kr,on,tn,vn,gn,Vn,bn,Dn,hi;for(on=0;on<jr;++on)tn=tr[on],vn=tn.source,gn=tn.target,Dn=gn.x-vn.x,hi=gn.y-vn.y,(Vn=Dn*Dn+hi*hi)&&(Vn=ve*Ot[on]*((Vn=Math.sqrt(Vn))-Et[on])/Vn,Dn*=Vn,hi*=Vn,gn.x-=Dn*(bn=vn.weight+gn.weight?vn.weight/(vn.weight+gn.weight):.5),gn.y-=hi*bn,vn.x+=Dn*(bn=1-bn),vn.y+=hi*bn);if((bn=ve*bt)&&(Dn=se[0]/2,hi=se[1]/2,on=-1,bn))for(;++on<Yt;)tn=Gt[on],tn.x+=(Dn-tn.x)*bn,tn.y+=(hi-tn.y)*bn;if(Ze)for(p1(Kr=h.geom.quadtree(Gt),ve,$t),on=-1;++on<Yt;)(tn=Gt[on]).fixed||Kr.visit(nr(tn));for(on=-1;++on<Yt;)tn=Gt[on],tn.fixed?(tn.x=tn.px,tn.y=tn.py):(tn.x-=(tn.px-(tn.px=tn.x))*Le,tn.y-=(tn.py-(tn.py=tn.y))*Le);L.tick({type:"tick",alpha:ve})},f.nodes=function(Yt){return arguments.length?(Gt=Yt,f):Gt},f.links=function(Yt){return arguments.length?(tr=Yt,f):tr},f.size=function(Yt){return arguments.length?(se=Yt,f):se},f.linkDistance=function(Yt){return arguments.length?(Me=typeof Yt=="function"?Yt:+Yt,f):Me},f.distance=f.linkDistance,f.linkStrength=function(Yt){return arguments.length?(Ie=typeof Yt=="function"?Yt:+Yt,f):Ie},f.friction=function(Yt){return arguments.length?(Le=+Yt,f):Le},f.charge=function(Yt){return arguments.length?(Ze=typeof Yt=="function"?Yt:+Yt,f):Ze},f.chargeDistance=function(Yt){return arguments.length?(Qe=Yt*Yt,f):Math.sqrt(Qe)},f.gravity=function(Yt){return arguments.length?(bt=+Yt,f):bt},f.theta=function(Yt){return arguments.length?(kt=Yt*Yt,f):Math.sqrt(kt)},f.alpha=function(Yt){return arguments.length?(Yt=+Yt,ve?Yt>0?ve=Yt:(O.c=null,O.t=NaN,O=null,L.end({type:"end",alpha:ve=0})):Yt>0&&(L.start({type:"start",alpha:ve=Yt}),O=Sn(f.tick)),f):ve},f.start=function(){var Yt,jr=Gt.length,Kr=tr.length,on=se[0],tn=se[1],vn,gn;for(Yt=0;Yt<jr;++Yt)(gn=Gt[Yt]).index=Yt,gn.weight=0;for(Yt=0;Yt<Kr;++Yt)gn=tr[Yt],typeof gn.source=="number"&&(gn.source=Gt[gn.source]),typeof gn.target=="number"&&(gn.target=Gt[gn.target]),++gn.source.weight,++gn.target.weight;for(Yt=0;Yt<jr;++Yt)gn=Gt[Yt],isNaN(gn.x)&&(gn.x=Vn("x",on)),isNaN(gn.y)&&(gn.y=Vn("y",tn)),isNaN(gn.px)&&(gn.px=gn.x),isNaN(gn.py)&&(gn.py=gn.y);if(Et=[],typeof Me=="function")for(Yt=0;Yt<Kr;++Yt)Et[Yt]=+Me.call(this,tr[Yt],Yt);else for(Yt=0;Yt<Kr;++Yt)Et[Yt]=Me;if(Ot=[],typeof Ie=="function")for(Yt=0;Yt<Kr;++Yt)Ot[Yt]=+Ie.call(this,tr[Yt],Yt);else for(Yt=0;Yt<Kr;++Yt)Ot[Yt]=Ie;if($t=[],typeof Ze=="function")for(Yt=0;Yt<jr;++Yt)$t[Yt]=+Ze.call(this,Gt[Yt],Yt);else for(Yt=0;Yt<jr;++Yt)$t[Yt]=Ze;function Vn(bn,Dn){if(!vn){for(vn=new Array(jr),Ti=0;Ti<jr;++Ti)vn[Ti]=[];for(Ti=0;Ti<Kr;++Ti){var hi=tr[Ti];vn[hi.source.index].push(hi.target),vn[hi.target.index].push(hi.source)}}for(var Sa=vn[Yt],Ti=-1,Jr=Sa.length,Un;++Ti<Jr;)if(!isNaN(Un=Sa[Ti][bn]))return Un;return Math.random()*Dn}return f.resume()},f.resume=function(){return f.alpha(.1)},f.stop=function(){return f.alpha(0)},f.drag=function(){if(ue||(ue=h.behavior.drag().origin(ne).on("dragstart.force",CM).on("drag.force",ir).on("dragend.force",jM)),!arguments.length)return ue;this.on("mouseover.force",EM).on("mouseout.force",LM).call(ue)};function ir(Yt){Yt.px=h.event.x,Yt.py=h.event.y,f.resume()}return h.rebind(f,L,"on")};function CM(f){f.fixed|=2}function jM(f){f.fixed&=-7}function EM(f){f.fixed|=4,f.px=f.x,f.py=f.y}function LM(f){f.fixed&=-5}function p1(f,L,O){var se=0,ue=0;if(f.charge=0,!f.leaf)for(var ve=f.nodes,Le=ve.length,Me=-1,Ie;++Me<Le;)Ie=ve[Me],Ie!=null&&(p1(Ie,L,O),f.charge+=Ie.charge,se+=Ie.charge*Ie.cx,ue+=Ie.charge*Ie.cy);if(f.point){f.leaf||(f.point.x+=Math.random()-.5,f.point.y+=Math.random()-.5);var Ze=L*O[f.point.index];f.charge+=f.pointCharge=Ze,se+=Ze*f.point.x,ue+=Ze*f.point.y}f.cx=se/f.charge,f.cy=ue/f.charge}var RM=20,DM=1,PM=1/0;h.layout.hierarchy=function(){var f=FM,L=NM,O=zM;function se(ue){var ve=[ue],Le=[],Me;for(ue.depth=0;(Me=ve.pop())!=null;)if(Le.push(Me),(Ze=L.call(se,Me,Me.depth))&&(Ie=Ze.length)){for(var Ie,Ze,Qe;--Ie>=0;)ve.push(Qe=Ze[Ie]),Qe.parent=Me,Qe.depth=Me.depth+1;O&&(Me.value=0),Me.children=Ze}else O&&(Me.value=+O.call(se,Me,Me.depth)||0),delete Me.children;return $o(ue,function(bt){var kt,Gt;f&&(kt=bt.children)&&kt.sort(f),O&&(Gt=bt.parent)&&(Gt.value+=bt.value)}),Le}return se.sort=function(ue){return arguments.length?(f=ue,se):f},se.children=function(ue){return arguments.length?(L=ue,se):L},se.value=function(ue){return arguments.length?(O=ue,se):O},se.revalue=function(ue){return O&&(yd(ue,function(ve){ve.children&&(ve.value=0)}),$o(ue,function(ve){var Le;ve.children||(ve.value=+O.call(se,ve,ve.depth)||0),(Le=ve.parent)&&(Le.value+=ve.value)})),ue},se};function gd(f,L){return h.rebind(f,L,"sort","children","value"),f.nodes=f,f.links=IM,f}function yd(f,L){for(var O=[f];(f=O.pop())!=null;)if(L(f),(ue=f.children)&&(se=ue.length))for(var se,ue;--se>=0;)O.push(ue[se])}function $o(f,L){for(var O=[f],se=[];(f=O.pop())!=null;)if(se.push(f),(Le=f.children)&&(ve=Le.length))for(var ue=-1,ve,Le;++ue<ve;)O.push(Le[ue]);for(;(f=se.pop())!=null;)L(f)}function NM(f){return f.children}function zM(f){return f.value}function FM(f,L){return L.value-f.value}function IM(f){return h.merge(f.map(function(L){return(L.children||[]).map(function(O){return{source:L,target:O}})}))}h.layout.partition=function(){var f=h.layout.hierarchy(),L=[1,1];function O(ve,Le,Me,Ie){var Ze=ve.children;if(ve.x=Le,ve.y=ve.depth*Ie,ve.dx=Me,ve.dy=Ie,Ze&&(bt=Ze.length)){var Qe=-1,bt,kt,Gt;for(Me=ve.value?Me/ve.value:0;++Qe<bt;)O(kt=Ze[Qe],Le,Gt=kt.value*Me,Ie),Le+=Gt}}function se(ve){var Le=ve.children,Me=0;if(Le&&(Ze=Le.length))for(var Ie=-1,Ze;++Ie<Ze;)Me=Math.max(Me,se(Le[Ie]));return 1+Me}function ue(ve,Le){var Me=f.call(this,ve,Le);return O(Me[0],0,L[0],L[1]/se(Me[0])),Me}return ue.size=function(ve){return arguments.length?(L=ve,ue):L},gd(ue,f)},h.layout.pie=function(){var f=Number,L=m1,O=0,se=je,ue=0;function ve(Le){var Me=Le.length,Ie=Le.map(function(nr,ir){return+f.call(ve,nr,ir)}),Ze=+(typeof O=="function"?O.apply(this,arguments):O),Qe=(typeof se=="function"?se.apply(this,arguments):se)-Ze,bt=Math.min(Math.abs(Qe)/Me,+(typeof ue=="function"?ue.apply(this,arguments):ue)),kt=bt*(Qe<0?-1:1),Gt=h.sum(Ie),tr=Gt?(Qe-Me*kt)/Gt:0,Et=h.range(Me),Ot=[],$t;return L!=null&&Et.sort(L===m1?function(nr,ir){return Ie[ir]-Ie[nr]}:function(nr,ir){return L(Le[nr],Le[ir])}),Et.forEach(function(nr){Ot[nr]={data:Le[nr],value:$t=Ie[nr],startAngle:Ze,endAngle:Ze+=$t*tr+kt,padAngle:bt}}),Ot}return ve.value=function(Le){return arguments.length?(f=Le,ve):f},ve.sort=function(Le){return arguments.length?(L=Le,ve):L},ve.startAngle=function(Le){return arguments.length?(O=Le,ve):O},ve.endAngle=function(Le){return arguments.length?(se=Le,ve):se},ve.padAngle=function(Le){return arguments.length?(ue=Le,ve):ue},ve};var m1={};h.layout.stack=function(){var f=ne,L=Hm,O=Wm,se=HM,ue=OM,ve=BM;function Le(Me,Ie){if(!(tr=Me.length))return Me;var Ze=Me.map(function(nr,ir){return f.call(Le,nr,ir)}),Qe=Ze.map(function(nr){return nr.map(function(ir,Yt){return[ue.call(Le,ir,Yt),ve.call(Le,ir,Yt)]})}),bt=L.call(Le,Qe,Ie);Ze=h.permute(Ze,bt),Qe=h.permute(Qe,bt);var kt=O.call(Le,Qe,Ie),Gt=Ze[0].length,tr,Et,Ot,$t;for(Ot=0;Ot<Gt;++Ot)for(se.call(Le,Ze[0][Ot],$t=kt[Ot],Qe[0][Ot][1]),Et=1;Et<tr;++Et)se.call(Le,Ze[Et][Ot],$t+=Qe[Et-1][Ot][1],Qe[Et][Ot][1]);return Me}return Le.values=function(Me){return arguments.length?(f=Me,Le):f},Le.order=function(Me){return arguments.length?(L=typeof Me=="function"?Me:WM.get(Me)||Hm,Le):L},Le.offset=function(Me){return arguments.length?(O=typeof Me=="function"?Me:qM.get(Me)||Wm,Le):O},Le.x=function(Me){return arguments.length?(ue=Me,Le):ue},Le.y=function(Me){return arguments.length?(ve=Me,Le):ve},Le.out=function(Me){return arguments.length?(se=Me,Le):se},Le};function OM(f){return f.x}function BM(f){return f.y}function HM(f,L,O){f.y0=L,f.y=O}var WM=h.map({"inside-out":function(f){var L=f.length,O,se,ue=f.map(VM),ve=f.map(UM),Le=h.range(L).sort(function(bt,kt){return ue[bt]-ue[kt]}),Me=0,Ie=0,Ze=[],Qe=[];for(O=0;O<L;++O)se=Le[O],Me<Ie?(Me+=ve[se],Ze.push(se)):(Ie+=ve[se],Qe.push(se));return Qe.reverse().concat(Ze)},reverse:function(f){return h.range(f.length).reverse()},default:Hm}),qM=h.map({silhouette:function(f){var L=f.length,O=f[0].length,se=[],ue=0,ve,Le,Me,Ie=[];for(Le=0;Le<O;++Le){for(ve=0,Me=0;ve<L;ve++)Me+=f[ve][Le][1];Me>ue&&(ue=Me),se.push(Me)}for(Le=0;Le<O;++Le)Ie[Le]=(ue-se[Le])/2;return Ie},wiggle:function(f){var L=f.length,O=f[0],se=O.length,ue,ve,Le,Me,Ie,Ze,Qe,bt,kt,Gt=[];for(Gt[0]=bt=kt=0,ve=1;ve<se;++ve){for(ue=0,Me=0;ue<L;++ue)Me+=f[ue][ve][1];for(ue=0,Ie=0,Qe=O[ve][0]-O[ve-1][0];ue<L;++ue){for(Le=0,Ze=(f[ue][ve][1]-f[ue][ve-1][1])/(2*Qe);Le<ue;++Le)Ze+=(f[Le][ve][1]-f[Le][ve-1][1])/Qe;Ie+=Ze*f[ue][ve][1]}Gt[ve]=bt-=Me?Ie/Me*Qe:0,bt<kt&&(kt=bt)}for(ve=0;ve<se;++ve)Gt[ve]-=kt;return Gt},expand:function(f){var L=f.length,O=f[0].length,se=1/L,ue,ve,Le,Me=[];for(ve=0;ve<O;++ve){for(ue=0,Le=0;ue<L;ue++)Le+=f[ue][ve][1];if(Le)for(ue=0;ue<L;ue++)f[ue][ve][1]/=Le;else for(ue=0;ue<L;ue++)f[ue][ve][1]=se}for(ve=0;ve<O;++ve)Me[ve]=0;return Me},zero:Wm});function Hm(f){return h.range(f.length)}function Wm(f){for(var L=-1,O=f[0].length,se=[];++L<O;)se[L]=0;return se}function VM(f){for(var L=1,O=0,se=f[0][1],ue,ve=f.length;L<ve;++L)(ue=f[L][1])>se&&(O=L,se=ue);return O}function UM(f){return f.reduce($M,0)}function $M(f,L){return f+L[1]}h.layout.histogram=function(){var f=!0,L=Number,O=GM,se=YM;function ue(ve,kt){for(var Me=[],Ie=ve.map(L,this),Ze=O.call(this,Ie,kt),Qe=se.call(this,Ze,Ie,kt),bt,kt=-1,Gt=Ie.length,tr=Qe.length-1,Et=f?1:1/Gt,Ot;++kt<tr;)bt=Me[kt]=[],bt.dx=Qe[kt+1]-(bt.x=Qe[kt]),bt.y=0;if(tr>0)for(kt=-1;++kt<Gt;)Ot=Ie[kt],Ot>=Ze[0]&&Ot<=Ze[1]&&(bt=Me[h.bisect(Qe,Ot,1,tr)-1],bt.y+=Et,bt.push(ve[kt]));return Me}return ue.value=function(ve){return arguments.length?(L=ve,ue):L},ue.range=function(ve){return arguments.length?(O=Xt(ve),ue):O},ue.bins=function(ve){return arguments.length?(se=typeof ve=="number"?function(Le){return v1(Le,ve)}:Xt(ve),ue):se},ue.frequency=function(ve){return arguments.length?(f=!!ve,ue):f},ue};function YM(f,L){return v1(f,Math.ceil(Math.log(L.length)/Math.LN2+1))}function v1(f,L){for(var O=-1,se=+f[0],ue=(f[1]-se)/L,ve=[];++O<=L;)ve[O]=ue*O+se;return ve}function GM(f){return[h.min(f),h.max(f)]}h.layout.pack=function(){var f=h.layout.hierarchy().sort(XM),L=0,O=[1,1],se;function ue(ve,Le){var Me=f.call(this,ve,Le),Ie=Me[0],Ze=O[0],Qe=O[1],bt=se==null?Math.sqrt:typeof se=="function"?se:function(){return se};if(Ie.x=Ie.y=0,$o(Ie,function(Gt){Gt.r=+bt(Gt.value)}),$o(Ie,x1),L){var kt=L*(se?1:Math.max(2*Ie.r/Ze,2*Ie.r/Qe))/2;$o(Ie,function(Gt){Gt.r+=kt}),$o(Ie,x1),$o(Ie,function(Gt){Gt.r-=kt})}return b1(Ie,Ze/2,Qe/2,se?1:1/Math.max(2*Ie.r/Ze,2*Ie.r/Qe)),Me}return ue.size=function(ve){return arguments.length?(O=ve,ue):O},ue.radius=function(ve){return arguments.length?(se=ve==null||typeof ve=="function"?ve:+ve,ue):se},ue.padding=function(ve){return arguments.length?(L=+ve,ue):L},gd(ue,f)};function XM(f,L){return f.value-L.value}function qm(f,L){var O=f._pack_next;f._pack_next=L,L._pack_prev=f,L._pack_next=O,O._pack_prev=L}function g1(f,L){f._pack_next=L,L._pack_prev=f}function y1(f,L){var O=L.x-f.x,se=L.y-f.y,ue=f.r+L.r;return .999*ue*ue>O*O+se*se}function x1(f){if(!(L=f.children)||!(kt=L.length))return;var L,O=1/0,se=-1/0,ue=1/0,ve=-1/0,Le,Me,Ie,Ze,Qe,bt,kt;function Gt(Yt){O=Math.min(Yt.x-Yt.r,O),se=Math.max(Yt.x+Yt.r,se),ue=Math.min(Yt.y-Yt.r,ue),ve=Math.max(Yt.y+Yt.r,ve)}if(L.forEach(ZM),Le=L[0],Le.x=-Le.r,Le.y=0,Gt(Le),kt>1&&(Me=L[1],Me.x=Me.r,Me.y=0,Gt(Me),kt>2))for(Ie=L[2],w1(Le,Me,Ie),Gt(Ie),qm(Le,Ie),Le._pack_prev=Ie,qm(Ie,Me),Me=Le._pack_next,Ze=3;Ze<kt;Ze++){w1(Le,Me,Ie=L[Ze]);var tr=0,Et=1,Ot=1;for(Qe=Me._pack_next;Qe!==Me;Qe=Qe._pack_next,Et++)if(y1(Qe,Ie)){tr=1;break}if(tr==1)for(bt=Le._pack_prev;bt!==Qe._pack_prev&&!y1(bt,Ie);bt=bt._pack_prev,Ot++);tr?(Et<Ot||Et==Ot&&Me.r<Le.r?g1(Le,Me=Qe):g1(Le=bt,Me),Ze--):(qm(Le,Ie),Me=Ie,Gt(Ie))}var $t=(O+se)/2,nr=(ue+ve)/2,ir=0;for(Ze=0;Ze<kt;Ze++)Ie=L[Ze],Ie.x-=$t,Ie.y-=nr,ir=Math.max(ir,Ie.r+Math.sqrt(Ie.x*Ie.x+Ie.y*Ie.y));f.r=ir,L.forEach(QM)}function ZM(f){f._pack_next=f._pack_prev=f}function QM(f){delete f._pack_next,delete f._pack_prev}function b1(f,L,O,se){var ue=f.children;if(f.x=L+=se*f.x,f.y=O+=se*f.y,f.r*=se,ue)for(var ve=-1,Le=ue.length;++ve<Le;)b1(ue[ve],L,O,se)}function w1(f,L,O){var se=f.r+O.r,ue=L.x-f.x,ve=L.y-f.y;if(se&&(ue||ve)){var Le=L.r+O.r,Me=ue*ue+ve*ve;Le*=Le,se*=se;var Ie=.5+(se-Le)/(2*Me),Ze=Math.sqrt(Math.max(0,2*Le*(se+Me)-(se-=Me)*se-Le*Le))/(2*Me);O.x=f.x+Ie*ue+Ze*ve,O.y=f.y+Ie*ve-Ze*ue}else O.x=f.x+se,O.y=f.y}h.layout.tree=function(){var f=h.layout.hierarchy().sort(null).value(null),L=_1,O=[1,1],se=null;function ue(Qe,bt){var kt=f.call(this,Qe,bt),Gt=kt[0],tr=ve(Gt);if($o(tr,Le),tr.parent.m=-tr.z,yd(tr,Me),se)yd(Gt,Ze);else{var Et=Gt,Ot=Gt,$t=Gt;yd(Gt,function(jr){jr.x<Et.x&&(Et=jr),jr.x>Ot.x&&(Ot=jr),jr.depth>$t.depth&&($t=jr)});var nr=L(Et,Ot)/2-Et.x,ir=O[0]/(Ot.x+L(Ot,Et)/2+nr),Yt=O[1]/($t.depth||1);yd(Gt,function(jr){jr.x=(jr.x+nr)*ir,jr.y=jr.depth*Yt})}return kt}function ve(Qe){for(var bt={A:null,children:[Qe]},kt=[bt],Gt;(Gt=kt.pop())!=null;)for(var tr=Gt.children,Et,Ot=0,$t=tr.length;Ot<$t;++Ot)kt.push((tr[Ot]=Et={_:tr[Ot],parent:Gt,children:(Et=tr[Ot].children)&&Et.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Ot}).a=Et);return bt.children[0]}function Le(Qe){var bt=Qe.children,kt=Qe.parent.children,Gt=Qe.i?kt[Qe.i-1]:null;if(bt.length){KM(Qe);var tr=(bt[0].z+bt[bt.length-1].z)/2;Gt?(Qe.z=Gt.z+L(Qe._,Gt._),Qe.m=Qe.z-tr):Qe.z=tr}else Gt&&(Qe.z=Gt.z+L(Qe._,Gt._));Qe.parent.A=Ie(Qe,Gt,Qe.parent.A||kt[0])}function Me(Qe){Qe._.x=Qe.z+Qe.parent.m,Qe.m+=Qe.parent.m}function Ie(Qe,bt,kt){if(bt){for(var Gt=Qe,tr=Qe,Et=bt,Ot=Gt.parent.children[0],$t=Gt.m,nr=tr.m,ir=Et.m,Yt=Ot.m,jr;Et=Um(Et),Gt=Vm(Gt),Et&&Gt;)Ot=Vm(Ot),tr=Um(tr),tr.a=Qe,jr=Et.z+ir-Gt.z-$t+L(Et._,Gt._),jr>0&&(JM(eT(Et,Qe,kt),Qe,jr),$t+=jr,nr+=jr),ir+=Et.m,$t+=Gt.m,Yt+=Ot.m,nr+=tr.m;Et&&!Um(tr)&&(tr.t=Et,tr.m+=ir-nr),Gt&&!Vm(Ot)&&(Ot.t=Gt,Ot.m+=$t-Yt,kt=Qe)}return kt}function Ze(Qe){Qe.x*=O[0],Qe.y=Qe.depth*O[1]}return ue.separation=function(Qe){return arguments.length?(L=Qe,ue):L},ue.size=function(Qe){return arguments.length?(se=(O=Qe)==null?Ze:null,ue):se?null:O},ue.nodeSize=function(Qe){return arguments.length?(se=(O=Qe)==null?null:Ze,ue):se?O:null},gd(ue,f)};function _1(f,L){return f.parent==L.parent?1:2}function Vm(f){var L=f.children;return L.length?L[0]:f.t}function Um(f){var L=f.children,O;return(O=L.length)?L[O-1]:f.t}function JM(f,L,O){var se=O/(L.i-f.i);L.c-=se,L.s+=O,f.c+=se,L.z+=O,L.m+=O}function KM(f){for(var L=0,O=0,se=f.children,ue=se.length,ve;--ue>=0;)ve=se[ue],ve.z+=L,ve.m+=L,L+=ve.s+(O+=ve.c)}function eT(f,L,O){return f.a.parent===L.parent?f.a:O}h.layout.cluster=function(){var f=h.layout.hierarchy().sort(null).value(null),L=_1,O=[1,1],se=!1;function ue(ve,Le){var Me=f.call(this,ve,Le),Ie=Me[0],Ze,Qe=0;$o(Ie,function(Et){var Ot=Et.children;Ot&&Ot.length?(Et.x=rT(Ot),Et.y=tT(Ot)):(Et.x=Ze?Qe+=L(Et,Ze):0,Et.y=0,Ze=Et)});var bt=k1(Ie),kt=S1(Ie),Gt=bt.x-L(bt,kt)/2,tr=kt.x+L(kt,bt)/2;return $o(Ie,se?function(Et){Et.x=(Et.x-Ie.x)*O[0],Et.y=(Ie.y-Et.y)*O[1]}:function(Et){Et.x=(Et.x-Gt)/(tr-Gt)*O[0],Et.y=(1-(Ie.y?Et.y/Ie.y:1))*O[1]}),Me}return ue.separation=function(ve){return arguments.length?(L=ve,ue):L},ue.size=function(ve){return arguments.length?(se=(O=ve)==null,ue):se?null:O},ue.nodeSize=function(ve){return arguments.length?(se=(O=ve)!=null,ue):se?O:null},gd(ue,f)};function tT(f){return 1+h.max(f,function(L){return L.y})}function rT(f){return f.reduce(function(L,O){return L+O.x},0)/f.length}function k1(f){var L=f.children;return L&&L.length?k1(L[0]):f}function S1(f){var L=f.children,O;return L&&(O=L.length)?S1(L[O-1]):f}h.layout.treemap=function(){var f=h.layout.hierarchy(),L=Math.round,O=[1,1],se=null,ue=$m,ve=!1,Le,Me="squarify",Ie=.5*(1+Math.sqrt(5));function Ze(Et,Ot){for(var $t=-1,nr=Et.length,ir,Yt;++$t<nr;)Yt=(ir=Et[$t]).value*(Ot<0?0:Ot),ir.area=isNaN(Yt)||Yt<=0?0:Yt}function Qe(Et){var Ot=Et.children;if(Ot&&Ot.length){var $t=ue(Et),nr=[],ir=Ot.slice(),Yt,jr=1/0,Kr,on=Me==="slice"?$t.dx:Me==="dice"?$t.dy:Me==="slice-dice"?Et.depth&1?$t.dy:$t.dx:Math.min($t.dx,$t.dy),tn;for(Ze(ir,$t.dx*$t.dy/Et.value),nr.area=0;(tn=ir.length)>0;)nr.push(Yt=ir[tn-1]),nr.area+=Yt.area,Me!=="squarify"||(Kr=kt(nr,on))<=jr?(ir.pop(),jr=Kr):(nr.area-=nr.pop().area,Gt(nr,on,$t,!1),on=Math.min($t.dx,$t.dy),nr.length=nr.area=0,jr=1/0);nr.length&&(Gt(nr,on,$t,!0),nr.length=nr.area=0),Ot.forEach(Qe)}}function bt(Et){var Ot=Et.children;if(Ot&&Ot.length){var $t=ue(Et),nr=Ot.slice(),ir,Yt=[];for(Ze(nr,$t.dx*$t.dy/Et.value),Yt.area=0;ir=nr.pop();)Yt.push(ir),Yt.area+=ir.area,ir.z!=null&&(Gt(Yt,ir.z?$t.dx:$t.dy,$t,!nr.length),Yt.length=Yt.area=0);Ot.forEach(bt)}}function kt(Et,Ot){for(var $t=Et.area,nr,ir=0,Yt=1/0,jr=-1,Kr=Et.length;++jr<Kr;)(nr=Et[jr].area)&&(nr<Yt&&(Yt=nr),nr>ir&&(ir=nr));return $t*=$t,Ot*=Ot,$t?Math.max(Ot*ir*Ie/$t,$t/(Ot*Yt*Ie)):1/0}function Gt(Et,Ot,$t,nr){var ir=-1,Yt=Et.length,jr=$t.x,Kr=$t.y,on=Ot?L(Et.area/Ot):0,tn;if(Ot==$t.dx){for((nr||on>$t.dy)&&(on=$t.dy);++ir<Yt;)tn=Et[ir],tn.x=jr,tn.y=Kr,tn.dy=on,jr+=tn.dx=Math.min($t.x+$t.dx-jr,on?L(tn.area/on):0);tn.z=!0,tn.dx+=$t.x+$t.dx-jr,$t.y+=on,$t.dy-=on}else{for((nr||on>$t.dx)&&(on=$t.dx);++ir<Yt;)tn=Et[ir],tn.x=jr,tn.y=Kr,tn.dx=on,Kr+=tn.dy=Math.min($t.y+$t.dy-Kr,on?L(tn.area/on):0);tn.z=!1,tn.dy+=$t.y+$t.dy-Kr,$t.x+=on,$t.dx-=on}}function tr(Et){var Ot=Le||f(Et),$t=Ot[0];return $t.x=$t.y=0,$t.value?($t.dx=O[0],$t.dy=O[1]):$t.dx=$t.dy=0,Le&&f.revalue($t),Ze([$t],$t.dx*$t.dy/$t.value),(Le?bt:Qe)($t),ve&&(Le=Ot),Ot}return tr.size=function(Et){return arguments.length?(O=Et,tr):O},tr.padding=function(Et){if(!arguments.length)return se;function Ot(ir){var Yt=Et.call(tr,ir,ir.depth);return Yt==null?$m(ir):M1(ir,typeof Yt=="number"?[Yt,Yt,Yt,Yt]:Yt)}function $t(ir){return M1(ir,Et)}var nr;return ue=(se=Et)==null?$m:(nr=typeof Et)=="function"?Ot:(nr==="number"&&(Et=[Et,Et,Et,Et]),$t),tr},tr.round=function(Et){return arguments.length?(L=Et?Math.round:Number,tr):L!=Number},tr.sticky=function(Et){return arguments.length?(ve=Et,Le=null,tr):ve},tr.ratio=function(Et){return arguments.length?(Ie=Et,tr):Ie},tr.mode=function(Et){return arguments.length?(Me=Et+"",tr):Me},gd(tr,f)};function $m(f){return{x:f.x,y:f.y,dx:f.dx,dy:f.dy}}function M1(f,L){var O=f.x+L[3],se=f.y+L[0],ue=f.dx-L[1]-L[3],ve=f.dy-L[0]-L[2];return ue<0&&(O+=ue/2,ue=0),ve<0&&(se+=ve/2,ve=0),{x:O,y:se,dx:ue,dy:ve}}h.random={normal:function(f,L){var O=arguments.length;return O<2&&(L=1),O<1&&(f=0),function(){var se,ue,ve;do se=Math.random()*2-1,ue=Math.random()*2-1,ve=se*se+ue*ue;while(!ve||ve>1);return f+L*se*Math.sqrt(-2*Math.log(ve)/ve)}},logNormal:function(){var f=h.random.normal.apply(h,arguments);return function(){return Math.exp(f())}},bates:function(f){var L=h.random.irwinHall(f);return function(){return L()/f}},irwinHall:function(f){return function(){for(var L=0,O=0;O<f;O++)L+=Math.random();return L}}},h.scale={};function ih(f){var L=f[0],O=f[f.length-1];return L<O?[L,O]:[O,L]}function ah(f){return f.rangeExtent?f.rangeExtent():ih(f.range())}function nT(f,L,O,se){var ue=O(f[0],f[1]),ve=se(L[0],L[1]);return function(Le){return ve(ue(Le))}}function Ym(f,L){var O=0,se=f.length-1,ue=f[O],ve=f[se],Le;return ve<ue&&(Le=O,O=se,se=Le,Le=ue,ue=ve,ve=Le),f[O]=L.floor(ue),f[se]=L.ceil(ve),f}function T1(f){return f?{floor:function(L){return Math.floor(L/f)*f},ceil:function(L){return Math.ceil(L/f)*f}}:iT}var iT={floor:ne,ceil:ne};function aT(f,L,O,se){var ue=[],ve=[],Le=0,Me=Math.min(f.length,L.length)-1;for(f[Me]<f[0]&&(f=f.slice().reverse(),L=L.slice().reverse());++Le<=Me;)ue.push(O(f[Le-1],f[Le])),ve.push(se(L[Le-1],L[Le]));return function(Ie){var Ze=h.bisect(f,Ie,1,Me)-1;return ve[Ze](ue[Ze](Ie))}}h.scale.linear=function(){return A1([0,1],[0,1],jc,!1)};function A1(f,L,O,se){var ue,ve;function Le(){var Ie=Math.min(f.length,L.length)>2?aT:nT,Ze=se?MM:SM;return ue=Ie(f,L,Ze,O),ve=Ie(L,f,Ze,jc),Me}function Me(Ie){return ue(Ie)}return Me.invert=function(Ie){return ve(Ie)},Me.domain=function(Ie){return arguments.length?(f=Ie.map(Number),Le()):f},Me.range=function(Ie){return arguments.length?(L=Ie,Le()):L},Me.rangeRound=function(Ie){return Me.range(Ie).interpolate(l1)},Me.clamp=function(Ie){return arguments.length?(se=Ie,Le()):se},Me.interpolate=function(Ie){return arguments.length?(O=Ie,Le()):O},Me.ticks=function(Ie){return Xm(f,Ie)},Me.tickFormat=function(Ie,Ze){return d3_scale_linearTickFormat(f,Ie,Ze)},Me.nice=function(Ie){return j1(f,Ie),Le()},Me.copy=function(){return A1(f,L,O,se)},Le()}function C1(f,L){return h.rebind(f,L,"range","rangeRound","interpolate","clamp")}function j1(f,L){return Ym(f,T1(Gm(f,L)[2])),Ym(f,T1(Gm(f,L)[2])),f}function Gm(f,L){L==null&&(L=10);var O=ih(f),se=O[1]-O[0],ue=Math.pow(10,Math.floor(Math.log(se/L)/Math.LN10)),ve=L/se*ue;return ve<=.15?ue*=10:ve<=.35?ue*=5:ve<=.75&&(ue*=2),O[0]=Math.ceil(O[0]/ue)*ue,O[1]=Math.floor(O[1]/ue)*ue+ue*.5,O[2]=ue,O}function Xm(f,L){return h.range.apply(h,Gm(f,L))}h.scale.log=function(){return E1(h.scale.linear().domain([0,1]),10,!0,[1,10])};function E1(f,L,O,se){function ue(Me){return(O?Math.log(Me<0?0:Me):-Math.log(Me>0?0:-Me))/Math.log(L)}function ve(Me){return O?Math.pow(L,Me):-Math.pow(L,-Me)}function Le(Me){return f(ue(Me))}return Le.invert=function(Me){return ve(f.invert(Me))},Le.domain=function(Me){return arguments.length?(O=Me[0]>=0,f.domain((se=Me.map(Number)).map(ue)),Le):se},Le.base=function(Me){return arguments.length?(L=+Me,f.domain(se.map(ue)),Le):L},Le.nice=function(){var Me=Ym(se.map(ue),O?Math:sT);return f.domain(Me),se=Me.map(ve),Le},Le.ticks=function(){var Me=ih(se),Ie=[],Ze=Me[0],Qe=Me[1],bt=Math.floor(ue(Ze)),kt=Math.ceil(ue(Qe)),Gt=L%1?2:L;if(isFinite(kt-bt)){if(O){for(;bt<kt;bt++)for(var tr=1;tr<Gt;tr++)Ie.push(ve(bt)*tr);Ie.push(ve(bt))}else for(Ie.push(ve(bt));bt++<kt;)for(var tr=Gt-1;tr>0;tr--)Ie.push(ve(bt)*tr);for(bt=0;Ie[bt]<Ze;bt++);for(kt=Ie.length;Ie[kt-1]>Qe;kt--);Ie=Ie.slice(bt,kt)}return Ie},Le.copy=function(){return E1(f.copy(),L,O,se)},C1(Le,f)}var sT={floor:function(f){return-Math.ceil(-f)},ceil:function(f){return-Math.floor(-f)}};h.scale.pow=function(){return L1(h.scale.linear(),1,[0,1])};function L1(f,L,O){var se=sh(L),ue=sh(1/L);function ve(Le){return f(se(Le))}return ve.invert=function(Le){return ue(f.invert(Le))},ve.domain=function(Le){return arguments.length?(f.domain((O=Le.map(Number)).map(se)),ve):O},ve.ticks=function(Le){return Xm(O,Le)},ve.tickFormat=function(Le,Me){return d3_scale_linearTickFormat(O,Le,Me)},ve.nice=function(Le){return ve.domain(j1(O,Le))},ve.exponent=function(Le){return arguments.length?(se=sh(L=Le),ue=sh(1/L),f.domain(O.map(se)),ve):L},ve.copy=function(){return L1(f.copy(),L,O)},C1(ve,f)}function sh(f){return function(L){return L<0?-Math.pow(-L,f):Math.pow(L,f)}}h.scale.sqrt=function(){return h.scale.pow().exponent(.5)},h.scale.ordinal=function(){return R1([],{t:"range",a:[[]]})};function R1(f,L){var O,se,ue;function ve(Me){return se[((O.get(Me)||(L.t==="range"?O.set(Me,f.push(Me)):NaN))-1)%se.length]}function Le(Me,Ie){return h.range(f.length).map(function(Ze){return Me+Ie*Ze})}return ve.domain=function(Me){if(!arguments.length)return f;f=[],O=new F;for(var Ie=-1,Ze=Me.length,Qe;++Ie<Ze;)O.has(Qe=Me[Ie])||O.set(Qe,f.push(Qe));return ve[L.t].apply(ve,L.a)},ve.range=function(Me){return arguments.length?(se=Me,ue=0,L={t:"range",a:arguments},ve):se},ve.rangePoints=function(Me,Ie){arguments.length<2&&(Ie=0);var Ze=Me[0],Qe=Me[1],bt=f.length<2?(Ze=(Ze+Qe)/2,0):(Qe-Ze)/(f.length-1+Ie);return se=Le(Ze+bt*Ie/2,bt),ue=0,L={t:"rangePoints",a:arguments},ve},ve.rangeRoundPoints=function(Me,Ie){arguments.length<2&&(Ie=0);var Ze=Me[0],Qe=Me[1],bt=f.length<2?(Ze=Qe=Math.round((Ze+Qe)/2),0):(Qe-Ze)/(f.length-1+Ie)|0;return se=Le(Ze+Math.round(bt*Ie/2+(Qe-Ze-(f.length-1+Ie)*bt)/2),bt),ue=0,L={t:"rangeRoundPoints",a:arguments},ve},ve.rangeBands=function(Me,Ie,Ze){arguments.length<2&&(Ie=0),arguments.length<3&&(Ze=Ie);var Qe=Me[1]<Me[0],bt=Me[Qe-0],kt=Me[1-Qe],Gt=(kt-bt)/(f.length-Ie+2*Ze);return se=Le(bt+Gt*Ze,Gt),Qe&&se.reverse(),ue=Gt*(1-Ie),L={t:"rangeBands",a:arguments},ve},ve.rangeRoundBands=function(Me,Ie,Ze){arguments.length<2&&(Ie=0),arguments.length<3&&(Ze=Ie);var Qe=Me[1]<Me[0],bt=Me[Qe-0],kt=Me[1-Qe],Gt=Math.floor((kt-bt)/(f.length-Ie+2*Ze));return se=Le(bt+Math.round((kt-bt-(f.length-Ie)*Gt)/2),Gt),Qe&&se.reverse(),ue=Math.round(Gt*(1-Ie)),L={t:"rangeRoundBands",a:arguments},ve},ve.rangeBand=function(){return ue},ve.rangeExtent=function(){return ih(L.a[0])},ve.copy=function(){return R1(f,L)},ve.domain(f)}h.scale.category10=function(){return h.scale.ordinal().range(oT)},h.scale.category20=function(){return h.scale.ordinal().range(lT)},h.scale.category20b=function(){return h.scale.ordinal().range(cT)},h.scale.category20c=function(){return h.scale.ordinal().range(uT)};var oT=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ft),lT=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ft),cT=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ft),uT=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ft);h.scale.quantile=function(){return D1([],[])};function D1(f,L){var O;function se(){var ve=0,Le=L.length;for(O=[];++ve<Le;)O[ve-1]=h.quantile(f,ve/Le);return ue}function ue(ve){if(!isNaN(ve=+ve))return L[h.bisect(O,ve)]}return ue.domain=function(ve){return arguments.length?(f=ve.map(R).filter(M).sort(S),se()):f},ue.range=function(ve){return arguments.length?(L=ve,se()):L},ue.quantiles=function(){return O},ue.invertExtent=function(ve){return ve=L.indexOf(ve),ve<0?[NaN,NaN]:[ve>0?O[ve-1]:f[0],ve<O.length?O[ve]:f[f.length-1]]},ue.copy=function(){return D1(f,L)},se()}h.scale.quantize=function(){return P1(0,1,[0,1])};function P1(f,L,O){var se,ue;function ve(Me){return O[Math.max(0,Math.min(ue,Math.floor(se*(Me-f))))]}function Le(){return se=O.length/(L-f),ue=O.length-1,ve}return ve.domain=function(Me){return arguments.length?(f=+Me[0],L=+Me[Me.length-1],Le()):[f,L]},ve.range=function(Me){return arguments.length?(O=Me,Le()):O},ve.invertExtent=function(Me){return Me=O.indexOf(Me),Me=Me<0?NaN:Me/se+f,[Me,Me+1/se]},ve.copy=function(){return P1(f,L,O)},Le()}h.scale.threshold=function(){return N1([.5],[0,1])};function N1(f,L){function O(se){if(se<=se)return L[h.bisect(f,se)]}return O.domain=function(se){return arguments.length?(f=se,O):f},O.range=function(se){return arguments.length?(L=se,O):L},O.invertExtent=function(se){return se=L.indexOf(se),[f[se-1],f[se]]},O.copy=function(){return N1(f,L)},O}h.scale.identity=function(){return z1([0,1])};function z1(f){function L(O){return+O}return L.invert=L,L.domain=L.range=function(O){return arguments.length?(f=O.map(L),L):f},L.ticks=function(O){return Xm(f,O)},L.tickFormat=function(O,se){return d3_scale_linearTickFormat(f,O,se)},L.copy=function(){return z1(f)},L}h.svg={};function dT(){return 0}h.svg.arc=function(){var f=fT,L=hT,O=dT,se=oh,ue=F1,ve=I1,Le=pT;function Me(){var Ze=Math.max(0,+f.apply(this,arguments)),Qe=Math.max(0,+L.apply(this,arguments)),bt=ue.apply(this,arguments)-Re,kt=ve.apply(this,arguments)-Re,Gt=Math.abs(kt-bt),tr=bt>kt?0:1;if(Qe<Ze&&(Et=Qe,Qe=Ze,Ze=Et),Gt>=Pe)return Ie(Qe,tr)+(Ze?Ie(Ze,1-tr):"")+"Z";var Et,Ot,$t,nr,ir=0,Yt=0,jr,Kr,on,tn,vn,gn,Vn,bn,Dn=[];if((nr=(+Le.apply(this,arguments)||0)/2)&&($t=se===oh?Math.sqrt(Ze*Ze+Qe*Qe):+se.apply(this,arguments),tr||(Yt*=-1),Qe&&(Yt=St($t/Qe*Math.sin(nr))),Ze&&(ir=St($t/Ze*Math.sin(nr)))),Qe){jr=Qe*Math.cos(bt+Yt),Kr=Qe*Math.sin(bt+Yt),on=Qe*Math.cos(kt-Yt),tn=Qe*Math.sin(kt-Yt);var hi=Math.abs(kt-bt-2*Yt)<=fe?0:1;if(Yt&&lh(jr,Kr,on,tn)===tr^hi){var Sa=(bt+kt)/2;jr=Qe*Math.cos(Sa),Kr=Qe*Math.sin(Sa),on=tn=null}}else jr=Kr=0;if(Ze){vn=Ze*Math.cos(kt-ir),gn=Ze*Math.sin(kt-ir),Vn=Ze*Math.cos(bt+ir),bn=Ze*Math.sin(bt+ir);var Ti=Math.abs(bt-kt+2*ir)<=fe?0:1;if(ir&&lh(vn,gn,Vn,bn)===1-tr^Ti){var Jr=(bt+kt)/2;vn=Ze*Math.cos(Jr),gn=Ze*Math.sin(Jr),Vn=bn=null}}else vn=gn=0;if(Gt>$e&&(Et=Math.min(Math.abs(Qe-Ze)/2,+O.apply(this,arguments)))>.001){Ot=Ze<Qe^tr?0:1;var Un=Et,Qn=Et;if(Gt<fe){var pi=Vn==null?[vn,gn]:on==null?[jr,Kr]:ra([jr,Kr],[Vn,bn],[on,tn],[vn,gn]),ca=jr-pi[0],Na=Kr-pi[1],Xa=on-pi[0],gs=tn-pi[1],Ps=1/Math.sin(Math.acos((ca*Xa+Na*gs)/(Math.sqrt(ca*ca+Na*Na)*Math.sqrt(Xa*Xa+gs*gs)))/2),ys=Math.sqrt(pi[0]*pi[0]+pi[1]*pi[1]);Qn=Math.min(Et,(Ze-ys)/(Ps-1)),Un=Math.min(Et,(Qe-ys)/(Ps+1))}if(on!=null){var Vs=ch(Vn==null?[vn,gn]:[Vn,bn],[jr,Kr],Qe,Un,tr),as=ch([on,tn],[vn,gn],Qe,Un,tr);Et===Un?Dn.push("M",Vs[0],"A",Un,",",Un," 0 0,",Ot," ",Vs[1],"A",Qe,",",Qe," 0 ",1-tr^lh(Vs[1][0],Vs[1][1],as[1][0],as[1][1]),",",tr," ",as[1],"A",Un,",",Un," 0 0,",Ot," ",as[0]):Dn.push("M",Vs[0],"A",Un,",",Un," 0 1,",Ot," ",as[0])}else Dn.push("M",jr,",",Kr);if(Vn!=null){var Us=ch([jr,Kr],[Vn,bn],Ze,-Qn,tr),Lc=ch([vn,gn],on==null?[jr,Kr]:[on,tn],Ze,-Qn,tr);Et===Qn?Dn.push("L",Lc[0],"A",Qn,",",Qn," 0 0,",Ot," ",Lc[1],"A",Ze,",",Ze," 0 ",tr^lh(Lc[1][0],Lc[1][1],Us[1][0],Us[1][1]),",",1-tr," ",Us[1],"A",Qn,",",Qn," 0 0,",Ot," ",Us[0]):Dn.push("L",Lc[0],"A",Qn,",",Qn," 0 0,",Ot," ",Us[0])}else Dn.push("L",vn,",",gn)}else Dn.push("M",jr,",",Kr),on!=null&&Dn.push("A",Qe,",",Qe," 0 ",hi,",",tr," ",on,",",tn),Dn.push("L",vn,",",gn),Vn!=null&&Dn.push("A",Ze,",",Ze," 0 ",Ti,",",1-tr," ",Vn,",",bn);return Dn.push("Z"),Dn.join("")}function Ie(Ze,Qe){return"M0,"+Ze+"A"+Ze+","+Ze+" 0 1,"+Qe+" 0,"+-Ze+"A"+Ze+","+Ze+" 0 1,"+Qe+" 0,"+Ze}return Me.innerRadius=function(Ze){return arguments.length?(f=Xt(Ze),Me):f},Me.outerRadius=function(Ze){return arguments.length?(L=Xt(Ze),Me):L},Me.cornerRadius=function(Ze){return arguments.length?(O=Xt(Ze),Me):O},Me.padRadius=function(Ze){return arguments.length?(se=Ze==oh?oh:Xt(Ze),Me):se},Me.startAngle=function(Ze){return arguments.length?(ue=Xt(Ze),Me):ue},Me.endAngle=function(Ze){return arguments.length?(ve=Xt(Ze),Me):ve},Me.padAngle=function(Ze){return arguments.length?(Le=Xt(Ze),Me):Le},Me.centroid=function(){var Ze=(+f.apply(this,arguments)+ +L.apply(this,arguments))/2,Qe=(+ue.apply(this,arguments)+ +ve.apply(this,arguments))/2-Re;return[Math.cos(Qe)*Ze,Math.sin(Qe)*Ze]},Me};var oh="auto";function fT(f){return f.innerRadius}function hT(f){return f.outerRadius}function F1(f){return f.startAngle}function I1(f){return f.endAngle}function pT(f){return f&&f.padAngle}function lh(f,L,O,se){return(f-O)*L-(L-se)*f>0?0:1}function ch(f,L,O,se,ue){var ve=f[0]-L[0],Le=f[1]-L[1],Me=(ue?se:-se)/Math.sqrt(ve*ve+Le*Le),Ie=Me*Le,Ze=-Me*ve,Qe=f[0]+Ie,bt=f[1]+Ze,kt=L[0]+Ie,Gt=L[1]+Ze,tr=(Qe+kt)/2,Et=(bt+Gt)/2,Ot=kt-Qe,$t=Gt-bt,nr=Ot*Ot+$t*$t,ir=O-se,Yt=Qe*Gt-kt*bt,jr=($t<0?-1:1)*Math.sqrt(Math.max(0,ir*ir*nr-Yt*Yt)),Kr=(Yt*$t-Ot*jr)/nr,on=(-Yt*Ot-$t*jr)/nr,tn=(Yt*$t+Ot*jr)/nr,vn=(-Yt*Ot+$t*jr)/nr,gn=Kr-tr,Vn=on-Et,bn=tn-tr,Dn=vn-Et;return gn*gn+Vn*Vn>bn*bn+Dn*Dn&&(Kr=tn,on=vn),[[Kr-Ie,on-Ze],[Kr*O/ir,on*O/ir]]}function O1(){return!0}function B1(f){var L=ta,O=ka,se=O1,ue=Lo,ve=ue.key,Le=.7;function Me(Ie){var Ze=[],Qe=[],bt=-1,kt=Ie.length,Gt,tr=Xt(L),Et=Xt(O);function Ot(){Ze.push("M",ue(f(Qe),Le))}for(;++bt<kt;)se.call(this,Gt=Ie[bt],bt)?Qe.push([+tr.call(this,Gt,bt),+Et.call(this,Gt,bt)]):Qe.length&&(Ot(),Qe=[]);return Qe.length&&Ot(),Ze.length?Ze.join(""):null}return Me.x=function(Ie){return arguments.length?(L=Ie,Me):L},Me.y=function(Ie){return arguments.length?(O=Ie,Me):O},Me.defined=function(Ie){return arguments.length?(se=Ie,Me):se},Me.interpolate=function(Ie){return arguments.length?(typeof Ie=="function"?ve=ue=Ie:ve=(ue=Zm.get(Ie)||Lo).key,Me):ve},Me.tension=function(Ie){return arguments.length?(Le=Ie,Me):Le},Me}h.svg.line=function(){return B1(ne)};var Zm=h.map({linear:Lo,"linear-closed":H1,step:mT,"step-before":Qm,"step-after":Jm,basis:W1,"basis-open":xT,"basis-closed":bT,bundle:wT,cardinal:yT,"cardinal-open":vT,"cardinal-closed":gT,monotone:ST});Zm.forEach(function(f,L){L.key=f,L.closed=/-closed$/.test(f)});function Lo(f){return f.length>1?f.join("L"):f+"Z"}function H1(f){return f.join("L")+"Z"}function mT(f){for(var L=0,O=f.length,se=f[0],ue=[se[0],",",se[1]];++L<O;)ue.push("H",(se[0]+(se=f[L])[0])/2,"V",se[1]);return O>1&&ue.push("H",se[0]),ue.join("")}function Qm(f){for(var L=0,O=f.length,se=f[0],ue=[se[0],",",se[1]];++L<O;)ue.push("V",(se=f[L])[1],"H",se[0]);return ue.join("")}function Jm(f){for(var L=0,O=f.length,se=f[0],ue=[se[0],",",se[1]];++L<O;)ue.push("H",(se=f[L])[0],"V",se[1]);return ue.join("")}function vT(f,L){return f.length<4?Lo(f):f[1]+uh(f.slice(1,-1),Km(f,L))}function gT(f,L){return f.length<3?H1(f):f[0]+uh((f.push(f[0]),f),Km([f[f.length-2]].concat(f,[f[1]]),L))}function yT(f,L){return f.length<3?Lo(f):f[0]+uh(f,Km(f,L))}function uh(f,L){if(L.length<1||f.length!=L.length&&f.length!=L.length+2)return Lo(f);var O=f.length!=L.length,se="",ue=f[0],ve=f[1],Le=L[0],Me=Le,Ie=1;if(O&&(se+="Q"+(ve[0]-Le[0]*2/3)+","+(ve[1]-Le[1]*2/3)+","+ve[0]+","+ve[1],ue=f[1],Ie=2),L.length>1){Me=L[1],ve=f[Ie],Ie++,se+="C"+(ue[0]+Le[0])+","+(ue[1]+Le[1])+","+(ve[0]-Me[0])+","+(ve[1]-Me[1])+","+ve[0]+","+ve[1];for(var Ze=2;Ze<L.length;Ze++,Ie++)ve=f[Ie],Me=L[Ze],se+="S"+(ve[0]-Me[0])+","+(ve[1]-Me[1])+","+ve[0]+","+ve[1]}if(O){var Qe=f[Ie];se+="Q"+(ve[0]+Me[0]*2/3)+","+(ve[1]+Me[1]*2/3)+","+Qe[0]+","+Qe[1]}return se}function Km(f,L){for(var O=[],se=(1-L)/2,ue,ve=f[0],Le=f[1],Me=1,Ie=f.length;++Me<Ie;)ue=ve,ve=Le,Le=f[Me],O.push([se*(Le[0]-ue[0]),se*(Le[1]-ue[1])]);return O}function W1(f){if(f.length<3)return Lo(f);var L=1,O=f.length,se=f[0],ue=se[0],ve=se[1],Le=[ue,ue,ue,(se=f[1])[0]],Me=[ve,ve,ve,se[1]],Ie=[ue,",",ve,"L",vo(Wl,Le),",",vo(Wl,Me)];for(f.push(f[O-1]);++L<=O;)se=f[L],Le.shift(),Le.push(se[0]),Me.shift(),Me.push(se[1]),ev(Ie,Le,Me);return f.pop(),Ie.push("L",se),Ie.join("")}function xT(f){if(f.length<4)return Lo(f);for(var L=[],O=-1,se=f.length,ue,ve=[0],Le=[0];++O<3;)ue=f[O],ve.push(ue[0]),Le.push(ue[1]);for(L.push(vo(Wl,ve)+","+vo(Wl,Le)),--O;++O<se;)ue=f[O],ve.shift(),ve.push(ue[0]),Le.shift(),Le.push(ue[1]),ev(L,ve,Le);return L.join("")}function bT(f){for(var L,O=-1,se=f.length,ue=se+4,ve,Le=[],Me=[];++O<4;)ve=f[O%se],Le.push(ve[0]),Me.push(ve[1]);for(L=[vo(Wl,Le),",",vo(Wl,Me)],--O;++O<ue;)ve=f[O%se],Le.shift(),Le.push(ve[0]),Me.shift(),Me.push(ve[1]),ev(L,Le,Me);return L.join("")}function wT(f,L){var O=f.length-1;if(O)for(var se=f[0][0],ue=f[0][1],ve=f[O][0]-se,Le=f[O][1]-ue,Me=-1,Ie,Ze;++Me<=O;)Ie=f[Me],Ze=Me/O,Ie[0]=L*Ie[0]+(1-L)*(se+Ze*ve),Ie[1]=L*Ie[1]+(1-L)*(ue+Ze*Le);return W1(f)}function vo(f,L){return f[0]*L[0]+f[1]*L[1]+f[2]*L[2]+f[3]*L[3]}var q1=[0,2/3,1/3,0],V1=[0,1/3,2/3,0],Wl=[0,1/6,2/3,1/6];function ev(f,L,O){f.push("C",vo(q1,L),",",vo(q1,O),",",vo(V1,L),",",vo(V1,O),",",vo(Wl,L),",",vo(Wl,O))}function tv(f,L){return(L[1]-f[1])/(L[0]-f[0])}function _T(f){for(var L=0,O=f.length-1,se=[],ue=f[0],ve=f[1],Le=se[0]=tv(ue,ve);++L<O;)se[L]=(Le+(Le=tv(ue=ve,ve=f[L+1])))/2;return se[L]=Le,se}function kT(f){for(var L=[],O,se,ue,ve,Le=_T(f),Me=-1,Ie=f.length-1;++Me<Ie;)O=tv(f[Me],f[Me+1]),b(O)<$e?Le[Me]=Le[Me+1]=0:(se=Le[Me]/O,ue=Le[Me+1]/O,ve=se*se+ue*ue,ve>9&&(ve=O*3/Math.sqrt(ve),Le[Me]=ve*se,Le[Me+1]=ve*ue));for(Me=-1;++Me<=Ie;)ve=(f[Math.min(Ie,Me+1)][0]-f[Math.max(0,Me-1)][0])/(6*(1+Le[Me]*Le[Me])),L.push([ve||0,Le[Me]*ve||0]);return L}function ST(f){return f.length<3?Lo(f):f[0]+uh(f,kT(f))}h.svg.line.radial=function(){var f=B1(U1);return f.radius=f.x,delete f.x,f.angle=f.y,delete f.y,f};function U1(f){for(var L,O=-1,se=f.length,ue,ve;++O<se;)L=f[O],ue=L[0],ve=L[1]-Re,L[0]=ue*Math.cos(ve),L[1]=ue*Math.sin(ve);return f}function $1(f){var L=ta,O=ta,se=0,ue=ka,ve=O1,Le=Lo,Me=Le.key,Ie=Le,Ze="L",Qe=.7;function bt(kt){var Gt=[],tr=[],Et=[],Ot=-1,$t=kt.length,nr,ir=Xt(L),Yt=Xt(se),jr=L===O?function(){return on}:Xt(O),Kr=se===ue?function(){return tn}:Xt(ue),on,tn;function vn(){Gt.push("M",Le(f(Et),Qe),Ze,Ie(f(tr.reverse()),Qe),"Z")}for(;++Ot<$t;)ve.call(this,nr=kt[Ot],Ot)?(tr.push([on=+ir.call(this,nr,Ot),tn=+Yt.call(this,nr,Ot)]),Et.push([+jr.call(this,nr,Ot),+Kr.call(this,nr,Ot)])):tr.length&&(vn(),tr=[],Et=[]);return tr.length&&vn(),Gt.length?Gt.join(""):null}return bt.x=function(kt){return arguments.length?(L=O=kt,bt):O},bt.x0=function(kt){return arguments.length?(L=kt,bt):L},bt.x1=function(kt){return arguments.length?(O=kt,bt):O},bt.y=function(kt){return arguments.length?(se=ue=kt,bt):ue},bt.y0=function(kt){return arguments.length?(se=kt,bt):se},bt.y1=function(kt){return arguments.length?(ue=kt,bt):ue},bt.defined=function(kt){return arguments.length?(ve=kt,bt):ve},bt.interpolate=function(kt){return arguments.length?(typeof kt=="function"?Me=Le=kt:Me=(Le=Zm.get(kt)||Lo).key,Ie=Le.reverse||Le,Ze=Le.closed?"M":"L",bt):Me},bt.tension=function(kt){return arguments.length?(Qe=kt,bt):Qe},bt}Qm.reverse=Jm,Jm.reverse=Qm,h.svg.area=function(){return $1(ne)},h.svg.area.radial=function(){var f=$1(U1);return f.radius=f.x,delete f.x,f.innerRadius=f.x0,delete f.x0,f.outerRadius=f.x1,delete f.x1,f.angle=f.y,delete f.y,f.startAngle=f.y0,delete f.y0,f.endAngle=f.y1,delete f.y1,f};function Y1(f){return f.source}function G1(f){return f.target}h.svg.chord=function(){var f=Y1,L=G1,O=MT,se=F1,ue=I1;function ve(Qe,bt){var kt=Le(this,f,Qe,bt),Gt=Le(this,L,Qe,bt);return"M"+kt.p0+Ie(kt.r,kt.p1,kt.a1-kt.a0)+(Me(kt,Gt)?Ze(kt.r,kt.p1,kt.r,kt.p0):Ze(kt.r,kt.p1,Gt.r,Gt.p0)+Ie(Gt.r,Gt.p1,Gt.a1-Gt.a0)+Ze(Gt.r,Gt.p1,kt.r,kt.p0))+"Z"}function Le(Qe,bt,kt,Gt){var tr=bt.call(Qe,kt,Gt),Et=O.call(Qe,tr,Gt),Ot=se.call(Qe,tr,Gt)-Re,$t=ue.call(Qe,tr,Gt)-Re;return{r:Et,a0:Ot,a1:$t,p0:[Et*Math.cos(Ot),Et*Math.sin(Ot)],p1:[Et*Math.cos($t),Et*Math.sin($t)]}}function Me(Qe,bt){return Qe.a0==bt.a0&&Qe.a1==bt.a1}function Ie(Qe,bt,kt){return"A"+Qe+","+Qe+" 0 "+ +(kt>fe)+",1 "+bt}function Ze(Qe,bt,kt,Gt){return"Q 0,0 "+Gt}return ve.radius=function(Qe){return arguments.length?(O=Xt(Qe),ve):O},ve.source=function(Qe){return arguments.length?(f=Xt(Qe),ve):f},ve.target=function(Qe){return arguments.length?(L=Xt(Qe),ve):L},ve.startAngle=function(Qe){return arguments.length?(se=Xt(Qe),ve):se},ve.endAngle=function(Qe){return arguments.length?(ue=Xt(Qe),ve):ue},ve};function MT(f){return f.radius}h.svg.diagonal=function(){var f=Y1,L=G1,O=X1;function se(ue,ve){var Le=f.call(this,ue,ve),Me=L.call(this,ue,ve),Ie=(Le.y+Me.y)/2,Ze=[Le,{x:Le.x,y:Ie},{x:Me.x,y:Ie},Me];return Ze=Ze.map(O),"M"+Ze[0]+"C"+Ze[1]+" "+Ze[2]+" "+Ze[3]}return se.source=function(ue){return arguments.length?(f=Xt(ue),se):f},se.target=function(ue){return arguments.length?(L=Xt(ue),se):L},se.projection=function(ue){return arguments.length?(O=ue,se):O},se};function X1(f){return[f.x,f.y]}h.svg.diagonal.radial=function(){var f=h.svg.diagonal(),L=X1,O=f.projection;return f.projection=function(se){return arguments.length?O(TT(L=se)):L},f};function TT(f){return function(){var L=f.apply(this,arguments),O=L[0],se=L[1]-Re;return[O*Math.cos(se),O*Math.sin(se)]}}h.svg.symbol=function(){var f=CT,L=AT;function O(se,ue){return(Q1.get(f.call(this,se,ue))||Z1)(L.call(this,se,ue))}return O.type=function(se){return arguments.length?(f=Xt(se),O):f},O.size=function(se){return arguments.length?(L=Xt(se),O):L},O};function AT(){return 64}function CT(){return"circle"}function Z1(f){var L=Math.sqrt(f/fe);return"M0,"+L+"A"+L+","+L+" 0 1,1 0,"+-L+"A"+L+","+L+" 0 1,1 0,"+L+"Z"}var Q1=h.map({circle:Z1,cross:function(f){var L=Math.sqrt(f/5)/2;return"M"+-3*L+","+-L+"H"+-L+"V"+-3*L+"H"+L+"V"+-L+"H"+3*L+"V"+L+"H"+L+"V"+3*L+"H"+-L+"V"+L+"H"+-3*L+"Z"},diamond:function(f){var L=Math.sqrt(f/(2*J1)),O=L*J1;return"M0,"+-L+"L"+O+",0 0,"+L+" "+-O+",0Z"},square:function(f){var L=Math.sqrt(f)/2;return"M"+-L+","+-L+"L"+L+","+-L+" "+L+","+L+" "+-L+","+L+"Z"},"triangle-down":function(f){var L=Math.sqrt(f/dh),O=L*dh/2;return"M0,"+O+"L"+L+","+-O+" "+-L+","+-O+"Z"},"triangle-up":function(f){var L=Math.sqrt(f/dh),O=L*dh/2;return"M0,"+-O+"L"+L+","+O+" "+-L+","+O+"Z"}});h.svg.symbolTypes=Q1.keys();var dh=Math.sqrt(3),J1=Math.tan(30*tt);re.transition=function(f){for(var L=Ec||++ex,O=nv(f),se=[],ue,ve,Le=hh||{time:Date.now(),ease:oM,delay:0,duration:250},Me=-1,Ie=this.length;++Me<Ie;){se.push(ue=[]);for(var Ze=this[Me],Qe=-1,bt=Ze.length;++Qe<bt;)(ve=Ze[Qe])&&ph(ve,Qe,O,L,Le),ue.push(ve)}return xd(se,O,L)},re.interrupt=function(f){return this.each(f==null?fh:K1(nv(f)))};var fh=K1(nv());function K1(f){return function(){var L,O,se;(L=this[f])&&(se=L[O=L.active])&&(se.timer.c=null,se.timer.t=NaN,--L.count?delete L[O]:delete this[f],L.active+=.5,se.event&&se.event.interrupt.call(this,this.__data__,se.index))}}function xd(f,L,O){return te(f,Pa),f.namespace=L,f.id=O,f}var Pa=[],ex=0,Ec,hh;Pa.call=re.call,Pa.empty=re.empty,Pa.node=re.node,Pa.size=re.size,h.transition=function(f,L){return f&&f.transition?Ec?f.transition(L):f:h.selection().transition(f)},h.transition.prototype=Pa,Pa.select=function(f){var L=this.id,O=this.namespace,se=[],ue,ve,Le;f=D(f);for(var Me=-1,Ie=this.length;++Me<Ie;){se.push(ue=[]);for(var Ze=this[Me],Qe=-1,bt=Ze.length;++Qe<bt;)(Le=Ze[Qe])&&(ve=f.call(Le,Le.__data__,Qe,Me))?("__data__"in Le&&(ve.__data__=Le.__data__),ph(ve,Qe,O,L,Le[O][L]),ue.push(ve)):ue.push(null)}return xd(se,O,L)},Pa.selectAll=function(f){var L=this.id,O=this.namespace,se=[],ue,ve,Le,Me,Ie;f=B(f);for(var Ze=-1,Qe=this.length;++Ze<Qe;)for(var bt=this[Ze],kt=-1,Gt=bt.length;++kt<Gt;)if(Le=bt[kt]){Ie=Le[O][L],ve=f.call(Le,Le.__data__,kt,Ze),se.push(ue=[]);for(var tr=-1,Et=ve.length;++tr<Et;)(Me=ve[tr])&&ph(Me,tr,O,L,Ie),ue.push(Me)}return xd(se,O,L)},Pa.filter=function(f){var L=[],O,se,ue;typeof f!="function"&&(f=ke(f));for(var ve=0,Le=this.length;ve<Le;ve++){L.push(O=[]);for(var se=this[ve],Me=0,Ie=se.length;Me<Ie;Me++)(ue=se[Me])&&f.call(ue,ue.__data__,Me,ve)&&O.push(ue)}return xd(L,this.namespace,this.id)},Pa.tween=function(f,L){var O=this.id,se=this.namespace;return arguments.length<2?this.node()[se][O].tween.get(f):et(this,L==null?function(ue){ue[se][O].tween.remove(f)}:function(ue){ue[se][O].tween.set(f,L)})};function rv(f,L,O,se){var ue=f.id,ve=f.namespace;return et(f,typeof O=="function"?function(Le,Me,Ie){Le[ve][ue].tween.set(L,se(O.call(Le,Le.__data__,Me,Ie)))}:(O=se(O),function(Le){Le[ve][ue].tween.set(L,O)}))}Pa.attr=function(f,L){if(arguments.length<2){for(L in f)this.attr(L,f[L]);return this}var O=f=="transform"?f1:jc,se=h.ns.qualify(f);function ue(){this.removeAttribute(se)}function ve(){this.removeAttributeNS(se.space,se.local)}function Le(Ie){return Ie==null?ue:(Ie+="",function(){var Ze=this.getAttribute(se),Qe;return Ze!==Ie&&(Qe=O(Ze,Ie),function(bt){this.setAttribute(se,Qe(bt))})})}function Me(Ie){return Ie==null?ve:(Ie+="",function(){var Ze=this.getAttributeNS(se.space,se.local),Qe;return Ze!==Ie&&(Qe=O(Ze,Ie),function(bt){this.setAttributeNS(se.space,se.local,Qe(bt))})})}return rv(this,"attr."+f,L,se.local?Me:Le)},Pa.attrTween=function(f,L){var O=h.ns.qualify(f);function se(ve,Le){var Me=L.call(this,ve,Le,this.getAttribute(O));return Me&&function(Ie){this.setAttribute(O,Me(Ie))}}function ue(ve,Le){var Me=L.call(this,ve,Le,this.getAttributeNS(O.space,O.local));return Me&&function(Ie){this.setAttributeNS(O.space,O.local,Me(Ie))}}return this.tween("attr."+f,O.local?ue:se)},Pa.style=function(f,L,O){var se=arguments.length;if(se<3){if(typeof f!="string"){se<2&&(L="");for(O in f)this.style(O,f[O],L);return this}O=""}function ue(){this.style.removeProperty(f)}function ve(Le){return Le==null?ue:(Le+="",function(){var Me=m(this).getComputedStyle(this,null).getPropertyValue(f),Ie;return Me!==Le&&(Ie=jc(Me,Le),function(Ze){this.style.setProperty(f,Ie(Ze),O)})})}return rv(this,"style."+f,L,ve)},Pa.styleTween=function(f,L,O){arguments.length<3&&(O="");function se(ue,ve){var Le=L.call(this,ue,ve,m(this).getComputedStyle(this,null).getPropertyValue(f));return Le&&function(Me){this.style.setProperty(f,Le(Me),O)}}return this.tween("style."+f,se)},Pa.text=function(f){return rv(this,"text",f,jT)};function jT(f){return f==null&&(f=""),function(){this.textContent=f}}Pa.remove=function(){var f=this.namespace;return this.each("end.transition",function(){var L;this[f].count<2&&(L=this.parentNode)&&L.removeChild(this)})},Pa.ease=function(f){var L=this.id,O=this.namespace;return arguments.length<1?this.node()[O][L].ease:(typeof f!="function"&&(f=h.ease.apply(h,arguments)),et(this,function(se){se[O][L].ease=f}))},Pa.delay=function(f){var L=this.id,O=this.namespace;return arguments.length<1?this.node()[O][L].delay:et(this,typeof f=="function"?function(se,ue,ve){se[O][L].delay=+f.call(se,se.__data__,ue,ve)}:(f=+f,function(se){se[O][L].delay=f}))},Pa.duration=function(f){var L=this.id,O=this.namespace;return arguments.length<1?this.node()[O][L].duration:et(this,typeof f=="function"?function(se,ue,ve){se[O][L].duration=Math.max(1,f.call(se,se.__data__,ue,ve))}:(f=Math.max(1,f),function(se){se[O][L].duration=f}))},Pa.each=function(f,L){var O=this.id,se=this.namespace;if(arguments.length<2){var ue=hh,ve=Ec;try{Ec=O,et(this,function(Le,Me,Ie){hh=Le[se][O],f.call(Le,Le.__data__,Me,Ie)})}finally{hh=ue,Ec=ve}}else et(this,function(Le){var Me=Le[se][O];(Me.event||(Me.event=h.dispatch("start","end","interrupt"))).on(f,L)});return this},Pa.transition=function(){for(var f=this.id,L=++ex,O=this.namespace,se=[],ue,ve,Le,Me,Ie=0,Ze=this.length;Ie<Ze;Ie++){se.push(ue=[]);for(var ve=this[Ie],Qe=0,bt=ve.length;Qe<bt;Qe++)(Le=ve[Qe])&&(Me=Le[O][f],ph(Le,Qe,O,L,{time:Me.time,ease:Me.ease,delay:Me.delay+Me.duration,duration:Me.duration})),ue.push(Le)}return xd(se,O,L)};function nv(f){return f==null?"__transition__":"__transition_"+f+"__"}function ph(f,L,O,se,ue){var ve=f[O]||(f[O]={active:0,count:0}),Le=ve[se],Me,Ie,Ze,Qe,bt;function kt(Et){var Ot=Le.delay;if(Ie.t=Ot+Me,Ot<=Et)return Gt(Et-Ot);Ie.c=Gt}function Gt(Et){var Ot=ve.active,$t=ve[Ot];$t&&($t.timer.c=null,$t.timer.t=NaN,--ve.count,delete ve[Ot],$t.event&&$t.event.interrupt.call(f,f.__data__,$t.index));for(var nr in ve)if(+nr<se){var ir=ve[nr];ir.timer.c=null,ir.timer.t=NaN,--ve.count,delete ve[nr]}Ie.c=tr,Sn(function(){return Ie.c&&tr(Et||1)&&(Ie.c=null,Ie.t=NaN),1},0,Me),ve.active=se,Le.event&&Le.event.start.call(f,f.__data__,L),bt=[],Le.tween.forEach(function(Yt,jr){(jr=jr.call(f,f.__data__,L))&&bt.push(jr)}),Qe=Le.ease,Ze=Le.duration}function tr(Et){for(var Ot=Et/Ze,$t=Qe(Ot),nr=bt.length;nr>0;)bt[--nr].call(f,$t);if(Ot>=1)return Le.event&&Le.event.end.call(f,f.__data__,L),--ve.count?delete ve[se]:delete f[O],1}Le||(Me=ue.time,Ie=Sn(kt,0,Me),Le=ve[se]={tween:new F,time:Me,timer:Ie,delay:ue.delay,duration:ue.duration,ease:ue.ease,index:L},ue=null,++ve.count)}h.svg.axis=function(){var f=h.scale.linear(),L=tx,O=6,se=6,ue=3,ve=[10],Le=null,Me;function Ie(Ze){Ze.each(function(){var Qe=h.select(this),bt=this.__chart__||f,kt=this.__chart__=f.copy(),Gt=Le??(kt.ticks?kt.ticks.apply(kt,ve):kt.domain()),tr=Me??(kt.tickFormat?kt.tickFormat.apply(kt,ve):ne),Et=Qe.selectAll(".tick").data(Gt,kt),Ot=Et.enter().insert("g",".domain").attr("class","tick").style("opacity",$e),$t=h.transition(Et.exit()).style("opacity",$e).remove(),nr=h.transition(Et.order()).style("opacity",1),ir=Math.max(O,0)+ue,Yt,jr=ah(kt),Kr=Qe.selectAll(".domain").data([0]),on=(Kr.enter().append("path").attr("class","domain"),h.transition(Kr));Ot.append("line"),Ot.append("text");var tn=Ot.select("line"),vn=nr.select("line"),gn=Et.select("text").text(tr),Vn=Ot.select("text"),bn=nr.select("text"),Dn=L==="top"||L==="left"?-1:1,hi,Sa,Ti,Jr;if(L==="bottom"||L==="top"?(Yt=LT,hi="x",Ti="y",Sa="x2",Jr="y2",gn.attr("dy",Dn<0?"0em":".71em").style("text-anchor","middle"),on.attr("d","M"+jr[0]+","+Dn*se+"V0H"+jr[1]+"V"+Dn*se)):(Yt=RT,hi="y",Ti="x",Sa="y2",Jr="x2",gn.attr("dy",".32em").style("text-anchor",Dn<0?"end":"start"),on.attr("d","M"+Dn*se+","+jr[0]+"H0V"+jr[1]+"H"+Dn*se)),tn.attr(Jr,Dn*O),Vn.attr(Ti,Dn*ir),vn.attr(Sa,0).attr(Jr,Dn*O),bn.attr(hi,0).attr(Ti,Dn*ir),kt.rangeBand){var Un=kt,Qn=Un.rangeBand()/2;bt=kt=function(pi){return Un(pi)+Qn}}else bt.rangeBand?bt=kt:$t.call(Yt,kt,bt);Ot.call(Yt,bt,kt),nr.call(Yt,kt,kt)})}return Ie.scale=function(Ze){return arguments.length?(f=Ze,Ie):f},Ie.orient=function(Ze){return arguments.length?(L=Ze in ET?Ze+"":tx,Ie):L},Ie.ticks=function(){return arguments.length?(ve=u(arguments),Ie):ve},Ie.tickValues=function(Ze){return arguments.length?(Le=Ze,Ie):Le},Ie.tickFormat=function(Ze){return arguments.length?(Me=Ze,Ie):Me},Ie.tickSize=function(Ze){var Qe=arguments.length;return Qe?(O=+Ze,se=+arguments[Qe-1],Ie):O},Ie.innerTickSize=function(Ze){return arguments.length?(O=+Ze,Ie):O},Ie.outerTickSize=function(Ze){return arguments.length?(se=+Ze,Ie):se},Ie.tickPadding=function(Ze){return arguments.length?(ue=+Ze,Ie):ue},Ie.tickSubdivide=function(){return arguments.length&&Ie},Ie};var tx="bottom",ET={top:1,right:1,bottom:1,left:1};function LT(f,L,O){f.attr("transform",function(se){var ue=L(se);return"translate("+(isFinite(ue)?ue:O(se))+",0)"})}function RT(f,L,O){f.attr("transform",function(se){var ue=L(se);return"translate(0,"+(isFinite(ue)?ue:O(se))+")"})}h.svg.brush=function(){var f=Te(Qe,"brushstart","brush","brushend"),L=null,O=null,se=[0,0],ue=[0,0],ve,Le,Me=!0,Ie=!0,Ze=iv[0];function Qe(Et){Et.each(function(){var Ot=h.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",tr).on("touchstart.brush",tr),$t=Ot.selectAll(".background").data([0]);$t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ot.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var nr=Ot.selectAll(".resize").data(Ze,ne);nr.exit().remove(),nr.enter().append("g").attr("class",function(Kr){return"resize "+Kr}).style("cursor",function(Kr){return DT[Kr]}).append("rect").attr("x",function(Kr){return/[ew]$/.test(Kr)?-3:null}).attr("y",function(Kr){return/^[ns]/.test(Kr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),nr.style("display",Qe.empty()?"none":null);var ir=h.transition(Ot),Yt=h.transition($t),jr;L&&(jr=ah(L),Yt.attr("x",jr[0]).attr("width",jr[1]-jr[0]),kt(ir)),O&&(jr=ah(O),Yt.attr("y",jr[0]).attr("height",jr[1]-jr[0]),Gt(ir)),bt(ir)})}Qe.event=function(Et){Et.each(function(){var Ot=f.of(this,arguments),$t={x:se,y:ue,i:ve,j:Le},nr=this.__chart__||$t;this.__chart__=$t,Ec?h.select(this).transition().each("start.brush",function(){ve=nr.i,Le=nr.j,se=nr.x,ue=nr.y,Ot({type:"brushstart"})}).tween("brush:brush",function(){var ir=nh(se,$t.x),Yt=nh(ue,$t.y);return ve=Le=null,function(jr){se=$t.x=ir(jr),ue=$t.y=Yt(jr),Ot({type:"brush",mode:"resize"})}}).each("end.brush",function(){ve=$t.i,Le=$t.j,Ot({type:"brush",mode:"resize"}),Ot({type:"brushend"})}):(Ot({type:"brushstart"}),Ot({type:"brush",mode:"resize"}),Ot({type:"brushend"}))})};function bt(Et){Et.selectAll(".resize").attr("transform",function(Ot){return"translate("+se[+/e$/.test(Ot)]+","+ue[+/^s/.test(Ot)]+")"})}function kt(Et){Et.select(".extent").attr("x",se[0]),Et.selectAll(".extent,.n>rect,.s>rect").attr("width",se[1]-se[0])}function Gt(Et){Et.select(".extent").attr("y",ue[0]),Et.selectAll(".extent,.e>rect,.w>rect").attr("height",ue[1]-ue[0])}function tr(){var Et=this,Ot=h.select(h.event.target),$t=f.of(Et,arguments),nr=h.select(Et),ir=Ot.datum(),Yt=!/^(n|s)$/.test(ir)&&L,jr=!/^(e|w)$/.test(ir)&&O,Kr=Ot.classed("extent"),on=fr(Et),tn,vn=h.mouse(Et),gn,Vn=h.select(m(Et)).on("keydown.brush",hi).on("keyup.brush",Sa);if(h.event.changedTouches?Vn.on("touchmove.brush",Ti).on("touchend.brush",Un):Vn.on("mousemove.brush",Ti).on("mouseup.brush",Un),nr.interrupt().selectAll("*").interrupt(),Kr)vn[0]=se[0]-vn[0],vn[1]=ue[0]-vn[1];else if(ir){var bn=+/w$/.test(ir),Dn=+/^n/.test(ir);gn=[se[1-bn]-vn[0],ue[1-Dn]-vn[1]],vn[0]=se[bn],vn[1]=ue[Dn]}else h.event.altKey&&(tn=vn.slice());nr.style("pointer-events","none").selectAll(".resize").style("display",null),h.select("body").style("cursor",Ot.style("cursor")),$t({type:"brushstart"}),Ti();function hi(){h.event.keyCode==32&&(Kr||(tn=null,vn[0]-=se[1],vn[1]-=ue[1],Kr=2),be())}function Sa(){h.event.keyCode==32&&Kr==2&&(vn[0]+=se[1],vn[1]+=ue[1],Kr=0,be())}function Ti(){var Qn=h.mouse(Et),pi=!1;gn&&(Qn[0]+=gn[0],Qn[1]+=gn[1]),Kr||(h.event.altKey?(tn||(tn=[(se[0]+se[1])/2,(ue[0]+ue[1])/2]),vn[0]=se[+(Qn[0]<tn[0])],vn[1]=ue[+(Qn[1]<tn[1])]):tn=null),Yt&&Jr(Qn,L,0)&&(kt(nr),pi=!0),jr&&Jr(Qn,O,1)&&(Gt(nr),pi=!0),pi&&(bt(nr),$t({type:"brush",mode:Kr?"move":"resize"}))}function Jr(Qn,pi,ca){var Na=ah(pi),Xa=Na[0],gs=Na[1],Ps=vn[ca],ys=ca?ue:se,Vs=ys[1]-ys[0],as,Us;if(Kr&&(Xa-=Ps,gs-=Vs+Ps),as=(ca?Ie:Me)?Math.max(Xa,Math.min(gs,Qn[ca])):Qn[ca],Kr?Us=(as+=Ps)+Vs:(tn&&(Ps=Math.max(Xa,Math.min(gs,2*tn[ca]-as))),Ps<as?(Us=as,as=Ps):Us=Ps),ys[0]!=as||ys[1]!=Us)return ca?Le=null:ve=null,ys[0]=as,ys[1]=Us,!0}function Un(){Ti(),nr.style("pointer-events","all").selectAll(".resize").style("display",Qe.empty()?"none":null),h.select("body").style("cursor",null),Vn.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),on(),$t({type:"brushend"})}}return Qe.x=function(Et){return arguments.length?(L=Et,Ze=iv[!L<<1|!O],Qe):L},Qe.y=function(Et){return arguments.length?(O=Et,Ze=iv[!L<<1|!O],Qe):O},Qe.clamp=function(Et){return arguments.length?(L&&O?(Me=!!Et[0],Ie=!!Et[1]):L?Me=!!Et:O&&(Ie=!!Et),Qe):L&&O?[Me,Ie]:L?Me:O?Ie:null},Qe.extent=function(Et){var Ot,$t,nr,ir,Yt;return arguments.length?(L&&(Ot=Et[0],$t=Et[1],O&&(Ot=Ot[0],$t=$t[0]),ve=[Ot,$t],L.invert&&(Ot=L(Ot),$t=L($t)),$t<Ot&&(Yt=Ot,Ot=$t,$t=Yt),(Ot!=se[0]||$t!=se[1])&&(se=[Ot,$t])),O&&(nr=Et[0],ir=Et[1],L&&(nr=nr[1],ir=ir[1]),Le=[nr,ir],O.invert&&(nr=O(nr),ir=O(ir)),ir<nr&&(Yt=nr,nr=ir,ir=Yt),(nr!=ue[0]||ir!=ue[1])&&(ue=[nr,ir])),Qe):(L&&(ve?(Ot=ve[0],$t=ve[1]):(Ot=se[0],$t=se[1],L.invert&&(Ot=L.invert(Ot),$t=L.invert($t)),$t<Ot&&(Yt=Ot,Ot=$t,$t=Yt))),O&&(Le?(nr=Le[0],ir=Le[1]):(nr=ue[0],ir=ue[1],O.invert&&(nr=O.invert(nr),ir=O.invert(ir)),ir<nr&&(Yt=nr,nr=ir,ir=Yt))),L&&O?[[Ot,nr],[$t,ir]]:L?[Ot,$t]:O&&[nr,ir])},Qe.clear=function(){return Qe.empty()||(se=[0,0],ue=[0,0],ve=Le=null),Qe},Qe.empty=function(){return!!L&&se[0]==se[1]||!!O&&ue[0]==ue[1]},h.rebind(Qe,f,"on")};var DT={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},iv=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];h.text=sr(function(f){return f.responseText}),h.json=function(f,L){return or(f,"application/json",PT,L)};function PT(f){return JSON.parse(f.responseText)}h.html=function(f,L){return or(f,"text/html",NT,L)};function NT(f){var L=p.createRange();return L.selectNode(p.body),L.createContextualFragment(f.responseText)}h.xml=sr(function(f){return f.responseXML}),typeof $=="object"&&$.exports?$.exports=h:this.d3=h}).apply(self)}}),_=i({"node_modules/d3-time/dist/d3-time.js"(U,$){(function(h,c){typeof U=="object"&&typeof $<"u"?c(U):(h=h||self,c(h.d3=h.d3||{}))})(U,function(h){var c=new Date,u=new Date;function p(ke,Be,et,ht){function jt(At){return ke(At=arguments.length===0?new Date:new Date(+At)),At}return jt.floor=function(At){return ke(At=new Date(+At)),At},jt.ceil=function(At){return ke(At=new Date(At-1)),Be(At,1),ke(At),At},jt.round=function(At){var Pt=jt(At),zt=jt.ceil(At);return At-Pt<zt-At?Pt:zt},jt.offset=function(At,Pt){return Be(At=new Date(+At),Pt==null?1:Math.floor(Pt)),At},jt.range=function(At,Pt,zt){var Nt=[],Kt;if(At=jt.ceil(At),zt=zt==null?1:Math.floor(zt),!(At<Pt)||!(zt>0))return Nt;do Nt.push(Kt=new Date(+At)),Be(At,zt),ke(At);while(Kt<At&&At<Pt);return Nt},jt.filter=function(At){return p(function(Pt){if(Pt>=Pt)for(;ke(Pt),!At(Pt);)Pt.setTime(Pt-1)},function(Pt,zt){if(Pt>=Pt)if(zt<0)for(;++zt<=0;)for(;Be(Pt,-1),!At(Pt););else for(;--zt>=0;)for(;Be(Pt,1),!At(Pt););})},et&&(jt.count=function(At,Pt){return c.setTime(+At),u.setTime(+Pt),ke(c),ke(u),Math.floor(et(c,u))},jt.every=function(At){return At=Math.floor(At),!isFinite(At)||!(At>0)?null:At>1?jt.filter(ht?function(Pt){return ht(Pt)%At===0}:function(Pt){return jt.count(0,Pt)%At===0}):jt}),jt}var v=p(function(){},function(ke,Be){ke.setTime(+ke+Be)},function(ke,Be){return Be-ke});v.every=function(ke){return ke=Math.floor(ke),!isFinite(ke)||!(ke>0)?null:ke>1?p(function(Be){Be.setTime(Math.floor(Be/ke)*ke)},function(Be,et){Be.setTime(+Be+et*ke)},function(Be,et){return(et-Be)/ke}):v};var m=v.range,g=1e3,w=6e4,l=36e5,T=864e5,y=6048e5,S=p(function(ke){ke.setTime(ke-ke.getMilliseconds())},function(ke,Be){ke.setTime(+ke+Be*g)},function(ke,Be){return(Be-ke)/g},function(ke){return ke.getUTCSeconds()}),R=S.range,M=p(function(ke){ke.setTime(ke-ke.getMilliseconds()-ke.getSeconds()*g)},function(ke,Be){ke.setTime(+ke+Be*w)},function(ke,Be){return(Be-ke)/w},function(ke){return ke.getMinutes()}),A=M.range,C=p(function(ke){ke.setTime(ke-ke.getMilliseconds()-ke.getSeconds()*g-ke.getMinutes()*w)},function(ke,Be){ke.setTime(+ke+Be*l)},function(ke,Be){return(Be-ke)/l},function(ke){return ke.getHours()}),j=C.range,b=p(function(ke){ke.setHours(0,0,0,0)},function(ke,Be){ke.setDate(ke.getDate()+Be)},function(ke,Be){return(Be-ke-(Be.getTimezoneOffset()-ke.getTimezoneOffset())*w)/T},function(ke){return ke.getDate()-1}),k=b.range;function E(ke){return p(function(Be){Be.setDate(Be.getDate()-(Be.getDay()+7-ke)%7),Be.setHours(0,0,0,0)},function(Be,et){Be.setDate(Be.getDate()+et*7)},function(Be,et){return(et-Be-(et.getTimezoneOffset()-Be.getTimezoneOffset())*w)/y})}var F=E(0),P=E(1),J=E(2),H=E(3),Y=E(4),Z=E(5),z=E(6),q=F.range,X=P.range,Q=J.range,ee=H.range,ne=Y.range,le=Z.range,W=z.range,ce=p(function(ke){ke.setDate(1),ke.setHours(0,0,0,0)},function(ke,Be){ke.setMonth(ke.getMonth()+Be)},function(ke,Be){return Be.getMonth()-ke.getMonth()+(Be.getFullYear()-ke.getFullYear())*12},function(ke){return ke.getMonth()}),de=ce.range,pe=p(function(ke){ke.setMonth(0,1),ke.setHours(0,0,0,0)},function(ke,Be){ke.setFullYear(ke.getFullYear()+Be)},function(ke,Be){return Be.getFullYear()-ke.getFullYear()},function(ke){return ke.getFullYear()});pe.every=function(ke){return!isFinite(ke=Math.floor(ke))||!(ke>0)?null:p(function(Be){Be.setFullYear(Math.floor(Be.getFullYear()/ke)*ke),Be.setMonth(0,1),Be.setHours(0,0,0,0)},function(Be,et){Be.setFullYear(Be.getFullYear()+et*ke)})};var he=pe.range,be=p(function(ke){ke.setUTCSeconds(0,0)},function(ke,Be){ke.setTime(+ke+Be*w)},function(ke,Be){return(Be-ke)/w},function(ke){return ke.getUTCMinutes()}),Ee=be.range,Te=p(function(ke){ke.setUTCMinutes(0,0,0)},function(ke,Be){ke.setTime(+ke+Be*l)},function(ke,Be){return(Be-ke)/l},function(ke){return ke.getUTCHours()}),He=Te.range,te=p(function(ke){ke.setUTCHours(0,0,0,0)},function(ke,Be){ke.setUTCDate(ke.getUTCDate()+Be)},function(ke,Be){return(Be-ke)/T},function(ke){return ke.getUTCDate()-1}),ae=te.range;function G(ke){return p(function(Be){Be.setUTCDate(Be.getUTCDate()-(Be.getUTCDay()+7-ke)%7),Be.setUTCHours(0,0,0,0)},function(Be,et){Be.setUTCDate(Be.getUTCDate()+et*7)},function(Be,et){return(et-Be)/y})}var K=G(0),V=G(1),re=G(2),D=G(3),B=G(4),oe=G(5),ie=G(6),ge=K.range,_e=V.range,Se=re.range,De=D.range,Ge=B.range,Je=oe.range,yt=ie.range,ut=p(function(ke){ke.setUTCDate(1),ke.setUTCHours(0,0,0,0)},function(ke,Be){ke.setUTCMonth(ke.getUTCMonth()+Be)},function(ke,Be){return Be.getUTCMonth()-ke.getUTCMonth()+(Be.getUTCFullYear()-ke.getUTCFullYear())*12},function(ke){return ke.getUTCMonth()}),vt=ut.range,Ae=p(function(ke){ke.setUTCMonth(0,1),ke.setUTCHours(0,0,0,0)},function(ke,Be){ke.setUTCFullYear(ke.getUTCFullYear()+Be)},function(ke,Be){return Be.getUTCFullYear()-ke.getUTCFullYear()},function(ke){return ke.getUTCFullYear()});Ae.every=function(ke){return!isFinite(ke=Math.floor(ke))||!(ke>0)?null:p(function(Be){Be.setUTCFullYear(Math.floor(Be.getUTCFullYear()/ke)*ke),Be.setUTCMonth(0,1),Be.setUTCHours(0,0,0,0)},function(Be,et){Be.setUTCFullYear(Be.getUTCFullYear()+et*ke)})};var Fe=Ae.range;h.timeDay=b,h.timeDays=k,h.timeFriday=Z,h.timeFridays=le,h.timeHour=C,h.timeHours=j,h.timeInterval=p,h.timeMillisecond=v,h.timeMilliseconds=m,h.timeMinute=M,h.timeMinutes=A,h.timeMonday=P,h.timeMondays=X,h.timeMonth=ce,h.timeMonths=de,h.timeSaturday=z,h.timeSaturdays=W,h.timeSecond=S,h.timeSeconds=R,h.timeSunday=F,h.timeSundays=q,h.timeThursday=Y,h.timeThursdays=ne,h.timeTuesday=J,h.timeTuesdays=Q,h.timeWednesday=H,h.timeWednesdays=ee,h.timeWeek=F,h.timeWeeks=q,h.timeYear=pe,h.timeYears=he,h.utcDay=te,h.utcDays=ae,h.utcFriday=oe,h.utcFridays=Je,h.utcHour=Te,h.utcHours=He,h.utcMillisecond=v,h.utcMilliseconds=m,h.utcMinute=be,h.utcMinutes=Ee,h.utcMonday=V,h.utcMondays=_e,h.utcMonth=ut,h.utcMonths=vt,h.utcSaturday=ie,h.utcSaturdays=yt,h.utcSecond=S,h.utcSeconds=R,h.utcSunday=K,h.utcSundays=ge,h.utcThursday=B,h.utcThursdays=Ge,h.utcTuesday=re,h.utcTuesdays=Se,h.utcWednesday=D,h.utcWednesdays=De,h.utcWeek=K,h.utcWeeks=ge,h.utcYear=Ae,h.utcYears=Fe,Object.defineProperty(h,"__esModule",{value:!0})})}}),N=i({"node_modules/d3-time-format/dist/d3-time-format.js"(U,$){(function(h,c){typeof U=="object"&&typeof $<"u"?c(U,_()):(h=h||self,c(h.d3=h.d3||{},h.d3))})(U,function(h,c){function u(Ne){if(0<=Ne.y&&Ne.y<100){var $e=new Date(-1,Ne.m,Ne.d,Ne.H,Ne.M,Ne.S,Ne.L);return $e.setFullYear(Ne.y),$e}return new Date(Ne.y,Ne.m,Ne.d,Ne.H,Ne.M,Ne.S,Ne.L)}function p(Ne){if(0<=Ne.y&&Ne.y<100){var $e=new Date(Date.UTC(-1,Ne.m,Ne.d,Ne.H,Ne.M,Ne.S,Ne.L));return $e.setUTCFullYear(Ne.y),$e}return new Date(Date.UTC(Ne.y,Ne.m,Ne.d,Ne.H,Ne.M,Ne.S,Ne.L))}function v(Ne,$e,Ue){return{y:Ne,m:$e,d:Ue,H:0,M:0,S:0,L:0}}function m(Ne){var $e=Ne.dateTime,Ue=Ne.date,fe=Ne.time,je=Ne.periods,Pe=Ne.days,Re=Ne.shortDays,tt=Ne.months,nt=Ne.shortMonths,dt=R(je),St=M(je),Dt=R(Pe),at=M(Pe),Ct=R(Re),Ht=M(Re),Ut=R(tt),Ar=M(tt),Rr=R(nt),$r=M(nt),Mr={a:xn,A:Xn,b:mr,B:jn,c:null,d:ce,e:ce,f:Ee,H:de,I:pe,j:he,L:be,m:Te,M:He,p:we,q:me,Q:Pt,s:zt,S:te,u:ae,U:G,V:K,w:V,W:re,x:null,X:null,y:D,Y:B,Z:oe,"%":At},Ir={a:mt,A:ft,b:Xe,B:Ke,c:null,d:ie,e:ie,f:Ge,H:ge,I:_e,j:Se,L:De,m:Je,M:yt,p:it,q:Tt,Q:Pt,s:zt,S:ut,u:vt,U:Ae,V:Fe,w:ke,W:Be,x:null,X:null,y:et,Y:ht,Z:jt,"%":At},gr={a:Lr,A:hr,b:Or,B:fn,c:An,d:Y,e:Y,f:ee,H:z,I:z,j:Z,L:Q,m:H,M:q,p:Ur,q:J,Q:le,s:W,S:X,u:C,U:j,V:b,w:A,W:k,x:qr,X:yn,y:F,Y:E,Z:P,"%":ne};Mr.x=br(Ue,Mr),Mr.X=br(fe,Mr),Mr.c=br($e,Mr),Ir.x=br(Ue,Ir),Ir.X=br(fe,Ir),Ir.c=br($e,Ir);function br(rt,xt){return function(Mt){var Lt=[],Xt=-1,sr=0,or=rt.length,Dr,_r,Zr;for(Mt instanceof Date||(Mt=new Date(+Mt));++Xt<or;)rt.charCodeAt(Xt)===37&&(Lt.push(rt.slice(sr,Xt)),(_r=g[Dr=rt.charAt(++Xt)])!=null?Dr=rt.charAt(++Xt):_r=Dr==="e"?" ":"0",(Zr=xt[Dr])&&(Dr=Zr(Mt,_r)),Lt.push(Dr),sr=Xt+1);return Lt.push(rt.slice(sr,Xt)),Lt.join("")}}function Vr(rt,xt){return function(Mt){var Lt=v(1900,void 0,1),Xt=Br(Lt,rt,Mt+="",0),sr,or;if(Xt!=Mt.length)return null;if("Q"in Lt)return new Date(Lt.Q);if("s"in Lt)return new Date(Lt.s*1e3+("L"in Lt?Lt.L:0));if(xt&&!("Z"in Lt)&&(Lt.Z=0),"p"in Lt&&(Lt.H=Lt.H%12+Lt.p*12),Lt.m===void 0&&(Lt.m="q"in Lt?Lt.q:0),"V"in Lt){if(Lt.V<1||Lt.V>53)return null;"w"in Lt||(Lt.w=1),"Z"in Lt?(sr=p(v(Lt.y,0,1)),or=sr.getUTCDay(),sr=or>4||or===0?c.utcMonday.ceil(sr):c.utcMonday(sr),sr=c.utcDay.offset(sr,(Lt.V-1)*7),Lt.y=sr.getUTCFullYear(),Lt.m=sr.getUTCMonth(),Lt.d=sr.getUTCDate()+(Lt.w+6)%7):(sr=u(v(Lt.y,0,1)),or=sr.getDay(),sr=or>4||or===0?c.timeMonday.ceil(sr):c.timeMonday(sr),sr=c.timeDay.offset(sr,(Lt.V-1)*7),Lt.y=sr.getFullYear(),Lt.m=sr.getMonth(),Lt.d=sr.getDate()+(Lt.w+6)%7)}else("W"in Lt||"U"in Lt)&&("w"in Lt||(Lt.w="u"in Lt?Lt.u%7:"W"in Lt?1:0),or="Z"in Lt?p(v(Lt.y,0,1)).getUTCDay():u(v(Lt.y,0,1)).getDay(),Lt.m=0,Lt.d="W"in Lt?(Lt.w+6)%7+Lt.W*7-(or+5)%7:Lt.w+Lt.U*7-(or+6)%7);return"Z"in Lt?(Lt.H+=Lt.Z/100|0,Lt.M+=Lt.Z%100,p(Lt)):u(Lt)}}function Br(rt,xt,Mt,Lt){for(var Xt=0,sr=xt.length,or=Mt.length,Dr,_r;Xt<sr;){if(Lt>=or)return-1;if(Dr=xt.charCodeAt(Xt++),Dr===37){if(Dr=xt.charAt(Xt++),_r=gr[Dr in g?xt.charAt(Xt++):Dr],!_r||(Lt=_r(rt,Mt,Lt))<0)return-1}else if(Dr!=Mt.charCodeAt(Lt++))return-1}return Lt}function Ur(rt,xt,Mt){var Lt=dt.exec(xt.slice(Mt));return Lt?(rt.p=St[Lt[0].toLowerCase()],Mt+Lt[0].length):-1}function Lr(rt,xt,Mt){var Lt=Ct.exec(xt.slice(Mt));return Lt?(rt.w=Ht[Lt[0].toLowerCase()],Mt+Lt[0].length):-1}function hr(rt,xt,Mt){var Lt=Dt.exec(xt.slice(Mt));return Lt?(rt.w=at[Lt[0].toLowerCase()],Mt+Lt[0].length):-1}function Or(rt,xt,Mt){var Lt=Rr.exec(xt.slice(Mt));return Lt?(rt.m=$r[Lt[0].toLowerCase()],Mt+Lt[0].length):-1}function fn(rt,xt,Mt){var Lt=Ut.exec(xt.slice(Mt));return Lt?(rt.m=Ar[Lt[0].toLowerCase()],Mt+Lt[0].length):-1}function An(rt,xt,Mt){return Br(rt,$e,xt,Mt)}function qr(rt,xt,Mt){return Br(rt,Ue,xt,Mt)}function yn(rt,xt,Mt){return Br(rt,fe,xt,Mt)}function xn(rt){return Re[rt.getDay()]}function Xn(rt){return Pe[rt.getDay()]}function mr(rt){return nt[rt.getMonth()]}function jn(rt){return tt[rt.getMonth()]}function we(rt){return je[+(rt.getHours()>=12)]}function me(rt){return 1+~~(rt.getMonth()/3)}function mt(rt){return Re[rt.getUTCDay()]}function ft(rt){return Pe[rt.getUTCDay()]}function Xe(rt){return nt[rt.getUTCMonth()]}function Ke(rt){return tt[rt.getUTCMonth()]}function it(rt){return je[+(rt.getUTCHours()>=12)]}function Tt(rt){return 1+~~(rt.getUTCMonth()/3)}return{format:function(rt){var xt=br(rt+="",Mr);return xt.toString=function(){return rt},xt},parse:function(rt){var xt=Vr(rt+="",!1);return xt.toString=function(){return rt},xt},utcFormat:function(rt){var xt=br(rt+="",Ir);return xt.toString=function(){return rt},xt},utcParse:function(rt){var xt=Vr(rt+="",!0);return xt.toString=function(){return rt},xt}}}var g={"-":"",_:" ",0:"0"},w=/^\s*\d+/,l=/^%/,T=/[\\^$*+?|[\]().{}]/g;function y(Ne,$e,Ue){var fe=Ne<0?"-":"",je=(fe?-Ne:Ne)+"",Pe=je.length;return fe+(Pe<Ue?new Array(Ue-Pe+1).join($e)+je:je)}function S(Ne){return Ne.replace(T,"\\$&")}function R(Ne){return new RegExp("^(?:"+Ne.map(S).join("|")+")","i")}function M(Ne){for(var $e={},Ue=-1,fe=Ne.length;++Ue<fe;)$e[Ne[Ue].toLowerCase()]=Ue;return $e}function A(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+1));return fe?(Ne.w=+fe[0],Ue+fe[0].length):-1}function C(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+1));return fe?(Ne.u=+fe[0],Ue+fe[0].length):-1}function j(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+2));return fe?(Ne.U=+fe[0],Ue+fe[0].length):-1}function b(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+2));return fe?(Ne.V=+fe[0],Ue+fe[0].length):-1}function k(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+2));return fe?(Ne.W=+fe[0],Ue+fe[0].length):-1}function E(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+4));return fe?(Ne.y=+fe[0],Ue+fe[0].length):-1}function F(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+2));return fe?(Ne.y=+fe[0]+(+fe[0]>68?1900:2e3),Ue+fe[0].length):-1}function P(Ne,$e,Ue){var fe=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec($e.slice(Ue,Ue+6));return fe?(Ne.Z=fe[1]?0:-(fe[2]+(fe[3]||"00")),Ue+fe[0].length):-1}function J(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+1));return fe?(Ne.q=fe[0]*3-3,Ue+fe[0].length):-1}function H(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+2));return fe?(Ne.m=fe[0]-1,Ue+fe[0].length):-1}function Y(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+2));return fe?(Ne.d=+fe[0],Ue+fe[0].length):-1}function Z(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+3));return fe?(Ne.m=0,Ne.d=+fe[0],Ue+fe[0].length):-1}function z(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+2));return fe?(Ne.H=+fe[0],Ue+fe[0].length):-1}function q(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+2));return fe?(Ne.M=+fe[0],Ue+fe[0].length):-1}function X(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+2));return fe?(Ne.S=+fe[0],Ue+fe[0].length):-1}function Q(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+3));return fe?(Ne.L=+fe[0],Ue+fe[0].length):-1}function ee(Ne,$e,Ue){var fe=w.exec($e.slice(Ue,Ue+6));return fe?(Ne.L=Math.floor(fe[0]/1e3),Ue+fe[0].length):-1}function ne(Ne,$e,Ue){var fe=l.exec($e.slice(Ue,Ue+1));return fe?Ue+fe[0].length:-1}function le(Ne,$e,Ue){var fe=w.exec($e.slice(Ue));return fe?(Ne.Q=+fe[0],Ue+fe[0].length):-1}function W(Ne,$e,Ue){var fe=w.exec($e.slice(Ue));return fe?(Ne.s=+fe[0],Ue+fe[0].length):-1}function ce(Ne,$e){return y(Ne.getDate(),$e,2)}function de(Ne,$e){return y(Ne.getHours(),$e,2)}function pe(Ne,$e){return y(Ne.getHours()%12||12,$e,2)}function he(Ne,$e){return y(1+c.timeDay.count(c.timeYear(Ne),Ne),$e,3)}function be(Ne,$e){return y(Ne.getMilliseconds(),$e,3)}function Ee(Ne,$e){return be(Ne,$e)+"000"}function Te(Ne,$e){return y(Ne.getMonth()+1,$e,2)}function He(Ne,$e){return y(Ne.getMinutes(),$e,2)}function te(Ne,$e){return y(Ne.getSeconds(),$e,2)}function ae(Ne){var $e=Ne.getDay();return $e===0?7:$e}function G(Ne,$e){return y(c.timeSunday.count(c.timeYear(Ne)-1,Ne),$e,2)}function K(Ne,$e){var Ue=Ne.getDay();return Ne=Ue>=4||Ue===0?c.timeThursday(Ne):c.timeThursday.ceil(Ne),y(c.timeThursday.count(c.timeYear(Ne),Ne)+(c.timeYear(Ne).getDay()===4),$e,2)}function V(Ne){return Ne.getDay()}function re(Ne,$e){return y(c.timeMonday.count(c.timeYear(Ne)-1,Ne),$e,2)}function D(Ne,$e){return y(Ne.getFullYear()%100,$e,2)}function B(Ne,$e){return y(Ne.getFullYear()%1e4,$e,4)}function oe(Ne){var $e=Ne.getTimezoneOffset();return($e>0?"-":($e*=-1,"+"))+y($e/60|0,"0",2)+y($e%60,"0",2)}function ie(Ne,$e){return y(Ne.getUTCDate(),$e,2)}function ge(Ne,$e){return y(Ne.getUTCHours(),$e,2)}function _e(Ne,$e){return y(Ne.getUTCHours()%12||12,$e,2)}function Se(Ne,$e){return y(1+c.utcDay.count(c.utcYear(Ne),Ne),$e,3)}function De(Ne,$e){return y(Ne.getUTCMilliseconds(),$e,3)}function Ge(Ne,$e){return De(Ne,$e)+"000"}function Je(Ne,$e){return y(Ne.getUTCMonth()+1,$e,2)}function yt(Ne,$e){return y(Ne.getUTCMinutes(),$e,2)}function ut(Ne,$e){return y(Ne.getUTCSeconds(),$e,2)}function vt(Ne){var $e=Ne.getUTCDay();return $e===0?7:$e}function Ae(Ne,$e){return y(c.utcSunday.count(c.utcYear(Ne)-1,Ne),$e,2)}function Fe(Ne,$e){var Ue=Ne.getUTCDay();return Ne=Ue>=4||Ue===0?c.utcThursday(Ne):c.utcThursday.ceil(Ne),y(c.utcThursday.count(c.utcYear(Ne),Ne)+(c.utcYear(Ne).getUTCDay()===4),$e,2)}function ke(Ne){return Ne.getUTCDay()}function Be(Ne,$e){return y(c.utcMonday.count(c.utcYear(Ne)-1,Ne),$e,2)}function et(Ne,$e){return y(Ne.getUTCFullYear()%100,$e,2)}function ht(Ne,$e){return y(Ne.getUTCFullYear()%1e4,$e,4)}function jt(){return"+0000"}function At(){return"%"}function Pt(Ne){return+Ne}function zt(Ne){return Math.floor(+Ne/1e3)}var Nt;Kt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kt(Ne){return Nt=m(Ne),h.timeFormat=Nt.format,h.timeParse=Nt.parse,h.utcFormat=Nt.utcFormat,h.utcParse=Nt.utcParse,Nt}var _t="%Y-%m-%dT%H:%M:%S.%LZ";function Qt(Ne){return Ne.toISOString()}var fr=Date.prototype.toISOString?Qt:h.utcFormat(_t);function Vt(Ne){var $e=new Date(Ne);return isNaN($e)?null:$e}var rr=+new Date("2000-01-01T00:00:00.000Z")?Vt:h.utcParse(_t);h.isoFormat=fr,h.isoParse=rr,h.timeFormatDefaultLocale=Kt,h.timeFormatLocale=m,Object.defineProperty(h,"__esModule",{value:!0})})}}),I=i({"node_modules/d3-format/dist/d3-format.js"(U,$){(function(h,c){typeof U=="object"&&typeof $<"u"?c(U):(h=typeof globalThis<"u"?globalThis:h||self,c(h.d3=h.d3||{}))})(U,function(h){function c(H){return Math.abs(H=Math.round(H))>=1e21?H.toLocaleString("en").replace(/,/g,""):H.toString(10)}function u(H,Y){if((Z=(H=Y?H.toExponential(Y-1):H.toExponential()).indexOf("e"))<0)return null;var Z,z=H.slice(0,Z);return[z.length>1?z[0]+z.slice(2):z,+H.slice(Z+1)]}function p(H){return H=u(Math.abs(H)),H?H[1]:NaN}function v(H,Y){return function(Z,z){for(var q=Z.length,X=[],Q=0,ee=H[0],ne=0;q>0&&ee>0&&(ne+ee+1>z&&(ee=Math.max(1,z-ne)),X.push(Z.substring(q-=ee,q+ee)),!((ne+=ee+1)>z));)ee=H[Q=(Q+1)%H.length];return X.reverse().join(Y)}}function m(H){return function(Y){return Y.replace(/[0-9]/g,function(Z){return H[+Z]})}}var g=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w(H){if(!(Y=g.exec(H)))throw new Error("invalid format: "+H);var Y;return new l({fill:Y[1],align:Y[2],sign:Y[3],symbol:Y[4],zero:Y[5],width:Y[6],comma:Y[7],precision:Y[8]&&Y[8].slice(1),trim:Y[9],type:Y[10]})}w.prototype=l.prototype;function l(H){this.fill=H.fill===void 0?" ":H.fill+"",this.align=H.align===void 0?">":H.align+"",this.sign=H.sign===void 0?"-":H.sign+"",this.symbol=H.symbol===void 0?"":H.symbol+"",this.zero=!!H.zero,this.width=H.width===void 0?void 0:+H.width,this.comma=!!H.comma,this.precision=H.precision===void 0?void 0:+H.precision,this.trim=!!H.trim,this.type=H.type===void 0?"":H.type+""}l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function T(H){e:for(var Y=H.length,Z=1,z=-1,q;Z<Y;++Z)switch(H[Z]){case".":z=q=Z;break;case"0":z===0&&(z=Z),q=Z;break;default:if(!+H[Z])break e;z>0&&(z=0);break}return z>0?H.slice(0,z)+H.slice(q+1):H}var y;function S(H,Y){var Z=u(H,Y);if(!Z)return H+"";var z=Z[0],q=Z[1],X=q-(y=Math.max(-8,Math.min(8,Math.floor(q/3)))*3)+1,Q=z.length;return X===Q?z:X>Q?z+new Array(X-Q+1).join("0"):X>0?z.slice(0,X)+"."+z.slice(X):"0."+new Array(1-X).join("0")+u(H,Math.max(0,Y+X-1))[0]}function R(H,Y){var Z=u(H,Y);if(!Z)return H+"";var z=Z[0],q=Z[1];return q<0?"0."+new Array(-q).join("0")+z:z.length>q+1?z.slice(0,q+1)+"."+z.slice(q+1):z+new Array(q-z.length+2).join("0")}var M={"%":function(H,Y){return(H*100).toFixed(Y)},b:function(H){return Math.round(H).toString(2)},c:function(H){return H+""},d:c,e:function(H,Y){return H.toExponential(Y)},f:function(H,Y){return H.toFixed(Y)},g:function(H,Y){return H.toPrecision(Y)},o:function(H){return Math.round(H).toString(8)},p:function(H,Y){return R(H*100,Y)},r:R,s:S,X:function(H){return Math.round(H).toString(16).toUpperCase()},x:function(H){return Math.round(H).toString(16)}};function A(H){return H}var C=Array.prototype.map,j=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function b(H){var Y=H.grouping===void 0||H.thousands===void 0?A:v(C.call(H.grouping,Number),H.thousands+""),Z=H.currency===void 0?"":H.currency[0]+"",z=H.currency===void 0?"":H.currency[1]+"",q=H.decimal===void 0?".":H.decimal+"",X=H.numerals===void 0?A:m(C.call(H.numerals,String)),Q=H.percent===void 0?"%":H.percent+"",ee=H.minus===void 0?"-":H.minus+"",ne=H.nan===void 0?"NaN":H.nan+"";function le(ce){ce=w(ce);var de=ce.fill,pe=ce.align,he=ce.sign,be=ce.symbol,Ee=ce.zero,Te=ce.width,He=ce.comma,te=ce.precision,ae=ce.trim,G=ce.type;G==="n"?(He=!0,G="g"):M[G]||(te===void 0&&(te=12),ae=!0,G="g"),(Ee||de==="0"&&pe==="=")&&(Ee=!0,de="0",pe="=");var K=be==="$"?Z:be==="#"&&/[boxX]/.test(G)?"0"+G.toLowerCase():"",V=be==="$"?z:/[%p]/.test(G)?Q:"",re=M[G],D=/[defgprs%]/.test(G);te=te===void 0?6:/[gprs]/.test(G)?Math.max(1,Math.min(21,te)):Math.max(0,Math.min(20,te));function B(oe){var ie=K,ge=V,_e,Se,De;if(G==="c")ge=re(oe)+ge,oe="";else{oe=+oe;var Ge=oe<0||1/oe<0;if(oe=isNaN(oe)?ne:re(Math.abs(oe),te),ae&&(oe=T(oe)),Ge&&+oe==0&&he!=="+"&&(Ge=!1),ie=(Ge?he==="("?he:ee:he==="-"||he==="("?"":he)+ie,ge=(G==="s"?j[8+y/3]:"")+ge+(Ge&&he==="("?")":""),D){for(_e=-1,Se=oe.length;++_e<Se;)if(De=oe.charCodeAt(_e),48>De||De>57){ge=(De===46?q+oe.slice(_e+1):oe.slice(_e))+ge,oe=oe.slice(0,_e);break}}}He&&!Ee&&(oe=Y(oe,1/0));var Je=ie.length+oe.length+ge.length,yt=Je<Te?new Array(Te-Je+1).join(de):"";switch(He&&Ee&&(oe=Y(yt+oe,yt.length?Te-ge.length:1/0),yt=""),pe){case"<":oe=ie+oe+ge+yt;break;case"=":oe=ie+yt+oe+ge;break;case"^":oe=yt.slice(0,Je=yt.length>>1)+ie+oe+ge+yt.slice(Je);break;default:oe=yt+ie+oe+ge;break}return X(oe)}return B.toString=function(){return ce+""},B}function W(ce,de){var pe=le((ce=w(ce),ce.type="f",ce)),he=Math.max(-8,Math.min(8,Math.floor(p(de)/3)))*3,be=Math.pow(10,-he),Ee=j[8+he/3];return function(Te){return pe(be*Te)+Ee}}return{format:le,formatPrefix:W}}var k;E({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function E(H){return k=b(H),h.format=k.format,h.formatPrefix=k.formatPrefix,k}function F(H){return Math.max(0,-p(Math.abs(H)))}function P(H,Y){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(p(Y)/3)))*3-p(Math.abs(H)))}function J(H,Y){return H=Math.abs(H),Y=Math.abs(Y)-H,Math.max(0,p(Y)-p(H))+1}h.FormatSpecifier=l,h.formatDefaultLocale=E,h.formatLocale=b,h.formatSpecifier=w,h.precisionFixed=F,h.precisionPrefix=P,h.precisionRound=J,Object.defineProperty(h,"__esModule",{value:!0})})}}),ye=i({"node_modules/is-string-blank/index.js"(U,$){$.exports=function(h){for(var c=h.length,u,p=0;p<c;p++)if(u=h.charCodeAt(p),(u<9||u>13)&&u!==32&&u!==133&&u!==160&&u!==5760&&u!==6158&&(u<8192||u>8205)&&u!==8232&&u!==8233&&u!==8239&&u!==8287&&u!==8288&&u!==12288&&u!==65279)return!1;return!0}}}),xe=i({"node_modules/fast-isnumeric/index.js"(U,$){var h=ye();$.exports=function(c){var u=typeof c;if(u==="string"){var p=c;if(c=+c,c===0&&h(p))return!1}else if(u!=="number")return!1;return c-c<1}}}),Ce=i({"src/constants/numerical.js"(U,$){$.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}}}),Ve=i({"node_modules/base64-arraybuffer/dist/base64-arraybuffer.umd.js"(U,$){(function(h,c){typeof U=="object"&&typeof $<"u"?c(U):(h=typeof globalThis<"u"?globalThis:h||self,c(h["base64-arraybuffer"]={}))})(U,function(h){for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=typeof Uint8Array>"u"?[]:new Uint8Array(256),p=0;p<c.length;p++)u[c.charCodeAt(p)]=p;var v=function(g){var w=new Uint8Array(g),l,T=w.length,y="";for(l=0;l<T;l+=3)y+=c[w[l]>>2],y+=c[(w[l]&3)<<4|w[l+1]>>4],y+=c[(w[l+1]&15)<<2|w[l+2]>>6],y+=c[w[l+2]&63];return T%3===2?y=y.substring(0,y.length-1)+"=":T%3===1&&(y=y.substring(0,y.length-2)+"=="),y},m=function(g){var w=g.length*.75,l=g.length,T,y=0,S,R,M,A;g[g.length-1]==="="&&(w--,g[g.length-2]==="="&&w--);var C=new ArrayBuffer(w),j=new Uint8Array(C);for(T=0;T<l;T+=4)S=u[g.charCodeAt(T)],R=u[g.charCodeAt(T+1)],M=u[g.charCodeAt(T+2)],A=u[g.charCodeAt(T+3)],j[y++]=S<<2|R>>4,j[y++]=(R&15)<<4|M>>2,j[y++]=(M&3)<<6|A&63;return C};h.decode=m,h.encode=v,Object.defineProperty(h,"__esModule",{value:!0})})}}),Ye=i({"src/lib/is_plain_object.js"(U,$){$.exports=function(c){return window&&window.process&&window.process.versions?Object.prototype.toString.call(c)==="[object Object]":Object.prototype.toString.call(c)==="[object Object]"&&Object.getPrototypeOf(c).hasOwnProperty("hasOwnProperty")}}}),qe=i({"src/lib/array.js"(U){var $=Ve().decode,h=Ye(),c=Array.isArray,u=ArrayBuffer,p=DataView;function v(S){return u.isView(S)&&!(S instanceof p)}U.isTypedArray=v;function m(S){return c(S)||v(S)}U.isArrayOrTypedArray=m;function g(S){return!m(S[0])}U.isArray1D=g,U.ensureArray=function(S,R){return c(S)||(S=[]),S.length=R,S};var w={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};w.uint8c=w.u1c,w.uint8=w.u1,w.int8=w.i1,w.uint16=w.u2,w.int16=w.i2,w.uint32=w.u4,w.int32=w.i4,w.float32=w.f4,w.float64=w.f8;function l(S){return S.constructor===ArrayBuffer}U.isArrayBuffer=l,U.decodeTypedArraySpec=function(S){var R=[],M=T(S),A=M.dtype,C=w[A];if(!C)throw new Error('Error in dtype: "'+A+'"');var j=C.BYTES_PER_ELEMENT,b=M.bdata;l(b)||(b=$(b));var k=M.shape===void 0?[b.byteLength/j]:(""+M.shape).split(",");k.reverse();var E=k.length,F,P,J=+k[0],H=j*J,Y=0;if(E===1)R=new C(b);else if(E===2)for(F=+k[1],P=0;P<F;P++)R[P]=new C(b,Y,J),Y+=H;else if(E===3){F=+k[1];for(var Z=+k[2],z=0;z<Z;z++)for(R[z]=[],P=0;P<F;P++)R[z][P]=new C(b,Y,J),Y+=H}else throw new Error("ndim: "+E+'is not supported with the shape:"'+M.shape+'"');return R.bdata=M.bdata,R.dtype=M.dtype,R.shape=k.reverse().join(","),S._inputArray=R,R},U.isTypedArraySpec=function(S){return h(S)&&S.hasOwnProperty("dtype")&&typeof S.dtype=="string"&&S.hasOwnProperty("bdata")&&(typeof S.bdata=="string"||l(S.bdata))&&(S.shape===void 0||S.hasOwnProperty("shape")&&(typeof S.shape=="string"||typeof S.shape=="number"))};function T(S){return{bdata:S.bdata,dtype:S.dtype,shape:S.shape}}U.concat=function(){var S=[],R=!0,M=0,A,C,j,b,k,E,F,P;for(j=0;j<arguments.length;j++)b=arguments[j],E=b.length,E&&(C?S.push(b):(C=b,k=E),c(b)?A=!1:(R=!1,M?A!==b.constructor&&(A=!1):A=b.constructor),M+=E);if(!M)return[];if(!S.length)return C;if(R)return C.concat.apply(C,S);if(A){for(F=new A(M),F.set(C),j=0;j<S.length;j++)b=S[j],F.set(b,k),k+=b.length;return F}for(F=new Array(M),P=0;P<C.length;P++)F[P]=C[P];for(j=0;j<S.length;j++){for(b=S[j],P=0;P<b.length;P++)F[k+P]=b[P];k+=P}return F},U.maxRowLength=function(S){return y(S,Math.max,0)},U.minRowLength=function(S){return y(S,Math.min,1/0)};function y(S,R,M){if(m(S))if(m(S[0])){for(var A=M,C=0;C<S.length;C++)A=R(A,S[C].length);return A}else return S.length;return 0}}}),ze=i({"src/lib/nested_property.js"(U,$){var h=xe(),c=qe().isArrayOrTypedArray;$.exports=function(S,R){if(h(R))R=String(R);else if(typeof R!="string"||R.substr(R.length-4)==="[-1]")throw"bad property string";var M=R.split("."),A,C,j,b;for(b=0;b<M.length;b++)if(String(M[b]).slice(0,2)==="__")throw"bad property string";for(b=0;b<M.length;){if(A=String(M[b]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),A){if(A[1])M[b]=A[1];else if(b===0)M.splice(0,1);else throw"bad property string";for(C=A[2].substr(1,A[2].length-2).split("]["),j=0;j<C.length;j++)b++,M.splice(b,0,Number(C[j]))}b++}return typeof S!="object"?T(S,R,M):{set:m(S,M,R),get:u(S,M),astr:R,parts:M,obj:S}};function u(y,S){return function(R){var M=y,A,C,j,b,k;for(b=0;b<S.length-1;b++){if(A=S[b],A===-1){for(C=!0,j=[],k=0;k<M.length;k++)j[k]=u(M[k],S.slice(b+1))(R),j[k]!==j[0]&&(C=!1);return C?j[0]:j}if(typeof A=="number"&&!c(M)||(M=M[A],typeof M!="object"||M===null))return}if(!(typeof M!="object"||M===null)&&(j=M[S[b]],!(!R&&j===null)))return j}}var p=/(^|\.)args\[/;function v(y,S){return y===void 0||y===null&&!S.match(p)}function m(y,S,R){return function(M){var A=y,C="",j=v(M,R),b,k;for(k=0;k<S.length-1;k++){if(b=S[k],typeof b=="number"&&!c(A))throw"array index but container is not an array";if(b===-1){if(j=!w(A,S.slice(k+1),M,R),j)break;return}if(!l(A,b,S[k+1],j))break;if(A=A[b],typeof A!="object"||A===null)throw"container is not an object";C=g(C,b)}if(j){if(k===S.length-1&&(delete A[S[k]],Array.isArray(A)&&+S[k]===A.length-1))for(;A.length&&A[A.length-1]===void 0;)A.pop()}else A[S[k]]=M}}function g(y,S){var R=S;return h(S)?R="["+S+"]":y&&(R="."+S),y+R}function w(y,S,R,M){var A=c(R),C=!0,j=R,b=M.replace("-1",0),k=A?!1:v(R,b),E=S[0],F;for(F=0;F<y.length;F++)b=M.replace("-1",F),A&&(j=R[F%R.length],k=v(j,b)),k&&(C=!1),l(y,F,E,k)&&m(y[F],S,M.replace("-1",F))(j);return C}function l(y,S,R,M){if(y[S]===void 0){if(M)return!1;typeof R=="number"?y[S]=[]:y[S]={}}return!0}function T(y,S,R){return{set:function(){throw"bad container"},get:function(){},astr:S,parts:R,obj:y}}}}),Oe=i({"src/lib/keyed_container.js"(U,$){var h=ze(),c=/^\w*$/,u=0,p=1,v=2,m=3,g=4;$.exports=function(l,T,y,S){y=y||"name",S=S||"value";var R,M,A,C={};T&&T.length?(A=h(l,T),M=A.get()):M=l,T=T||"";var j={};if(M)for(R=0;R<M.length;R++)j[M[R][y]]=R;var b=c.test(S),k={set:function(E,F){var P=F===null?g:u;if(!M){if(!A||P===g)return;M=[],A.set(M)}var J=j[E];if(J===void 0){if(P===g)return;P=P|m,J=M.length,j[E]=J}else F!==(b?M[J][S]:h(M[J],S).get())&&(P=P|v);var H=M[J]=M[J]||{};return H[y]=E,b?H[S]=F:h(H,S).set(F),F!==null&&(P=P&~g),C[J]=C[J]|P,k},get:function(E){if(M){var F=j[E];if(F!==void 0)return b?M[F][S]:h(M[F],S).get()}},rename:function(E,F){var P=j[E];return P===void 0||(C[P]=C[P]|p,j[F]=P,delete j[E],M[P][y]=F),k},remove:function(E){var F=j[E];if(F===void 0)return k;var P=M[F];if(Object.keys(P).length>2)return C[F]=C[F]|v,k.set(E,null);if(b){for(R=F;R<M.length;R++)C[R]=C[R]|m;for(R=F;R<M.length;R++)j[M[R][y]]--;M.splice(F,1),delete j[E]}else h(P,S).set(null),C[F]=C[F]|v|g;return k},constructUpdate:function(){for(var E,F,P={},J=Object.keys(C),H=0;H<J.length;H++)F=J[H],E=T+"["+F+"]",M[F]?(C[F]&p&&(P[E+"."+y]=M[F][y]),C[F]&v&&(b?P[E+"."+S]=C[F]&g?null:M[F][S]:P[E+"."+S]=C[F]&g?null:h(M[F],S).get())):P[E]=null;return P}};return k}}}),We=i({"src/lib/relative_attr.js"(U,$){var h=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,c=/^[^\.\[\]]+$/;$.exports=function(u,p){for(;p;){var v=u.match(h);if(v)u=v[1];else if(u.match(c))u="";else throw new Error("bad relativeAttr call:"+[u,p]);if(p.charAt(0)==="^")p=p.slice(1);else break}return u&&p.charAt(0)!=="["?u+"."+p:u+p}}}),ot=i({"src/lib/to_log_range.js"(U,$){var h=xe();$.exports=function(u,p){if(u>0)return Math.log(u)/Math.LN10;var v=Math.log(Math.min(p[0],p[1]))/Math.LN10;return h(v)||(v=Math.log(Math.max(p[0],p[1]))/Math.LN10-6),v}}}),st=i({"src/lib/relink_private.js"(U,$){var h=qe().isArrayOrTypedArray,c=Ye();$.exports=function u(p,v){for(var m in v){var g=v[m],w=p[m];if(w!==g)if(m.charAt(0)==="_"||typeof g=="function"){if(m in p)continue;p[m]=g}else if(h(g)&&h(w)&&c(g[0])){if(m==="customdata"||m==="ids")continue;for(var l=Math.min(g.length,w.length),T=0;T<l;T++)w[T]!==g[T]&&c(g[T])&&c(w[T])&&u(w[T],g[T])}else c(g)&&c(w)&&(u(w,g),Object.keys(w).length||delete p[m])}}}}),Rt=i({"src/lib/mod.js"(U,$){function h(u,p){var v=u%p;return v<0?v+p:v}function c(u,p){return Math.abs(u)>p/2?u-Math.round(u/p)*p:u}$.exports={mod:h,modHalf:c}}}),wt=i({"node_modules/tinycolor2/tinycolor.js"(U,$){(function(h){var c=/^\s+/,u=/\s+$/,p=0,v=h.round,m=h.min,g=h.max,w=h.random;function l(D,B){if(D=D||"",B=B||{},D instanceof l)return D;if(!(this instanceof l))return new l(D,B);var oe=T(D);this._originalInput=D,this._r=oe.r,this._g=oe.g,this._b=oe.b,this._a=oe.a,this._roundA=v(100*this._a)/100,this._format=B.format||oe.format,this._gradientType=B.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=oe.ok,this._tc_id=p++}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var D=this.toRgb();return(D.r*299+D.g*587+D.b*114)/1e3},getLuminance:function(){var D=this.toRgb(),B,oe,ie,ge,_e,Se;return B=D.r/255,oe=D.g/255,ie=D.b/255,B<=.03928?ge=B/12.92:ge=h.pow((B+.055)/1.055,2.4),oe<=.03928?_e=oe/12.92:_e=h.pow((oe+.055)/1.055,2.4),ie<=.03928?Se=ie/12.92:Se=h.pow((ie+.055)/1.055,2.4),.2126*ge+.7152*_e+.0722*Se},setAlpha:function(D){return this._a=ce(D),this._roundA=v(100*this._a)/100,this},toHsv:function(){var D=M(this._r,this._g,this._b);return{h:D.h*360,s:D.s,v:D.v,a:this._a}},toHsvString:function(){var D=M(this._r,this._g,this._b),B=v(D.h*360),oe=v(D.s*100),ie=v(D.v*100);return this._a==1?"hsv("+B+", "+oe+"%, "+ie+"%)":"hsva("+B+", "+oe+"%, "+ie+"%, "+this._roundA+")"},toHsl:function(){var D=S(this._r,this._g,this._b);return{h:D.h*360,s:D.s,l:D.l,a:this._a}},toHslString:function(){var D=S(this._r,this._g,this._b),B=v(D.h*360),oe=v(D.s*100),ie=v(D.l*100);return this._a==1?"hsl("+B+", "+oe+"%, "+ie+"%)":"hsla("+B+", "+oe+"%, "+ie+"%, "+this._roundA+")"},toHex:function(D){return C(this._r,this._g,this._b,D)},toHexString:function(D){return"#"+this.toHex(D)},toHex8:function(D){return j(this._r,this._g,this._b,this._a,D)},toHex8String:function(D){return"#"+this.toHex8(D)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(de(this._r,255)*100)+"%",g:v(de(this._g,255)*100)+"%",b:v(de(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+v(de(this._r,255)*100)+"%, "+v(de(this._g,255)*100)+"%, "+v(de(this._b,255)*100)+"%)":"rgba("+v(de(this._r,255)*100)+"%, "+v(de(this._g,255)*100)+"%, "+v(de(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:le[C(this._r,this._g,this._b,!0)]||!1},toFilter:function(D){var B="#"+b(this._r,this._g,this._b,this._a),oe=B,ie=this._gradientType?"GradientType = 1, ":"";if(D){var ge=l(D);oe="#"+b(ge._r,ge._g,ge._b,ge._a)}return"progid:DXImageTransform.Microsoft.gradient("+ie+"startColorstr="+B+",endColorstr="+oe+")"},toString:function(D){var B=!!D;D=D||this._format;var oe=!1,ie=this._a<1&&this._a>=0,ge=!B&&ie&&(D==="hex"||D==="hex6"||D==="hex3"||D==="hex4"||D==="hex8"||D==="name");return ge?D==="name"&&this._a===0?this.toName():this.toRgbString():(D==="rgb"&&(oe=this.toRgbString()),D==="prgb"&&(oe=this.toPercentageRgbString()),(D==="hex"||D==="hex6")&&(oe=this.toHexString()),D==="hex3"&&(oe=this.toHexString(!0)),D==="hex4"&&(oe=this.toHex8String(!0)),D==="hex8"&&(oe=this.toHex8String()),D==="name"&&(oe=this.toName()),D==="hsl"&&(oe=this.toHslString()),D==="hsv"&&(oe=this.toHsvString()),oe||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(D,B){var oe=D.apply(null,[this].concat([].slice.call(B)));return this._r=oe._r,this._g=oe._g,this._b=oe._b,this.setAlpha(oe._a),this},lighten:function(){return this._applyModification(P,arguments)},brighten:function(){return this._applyModification(J,arguments)},darken:function(){return this._applyModification(H,arguments)},desaturate:function(){return this._applyModification(k,arguments)},saturate:function(){return this._applyModification(E,arguments)},greyscale:function(){return this._applyModification(F,arguments)},spin:function(){return this._applyModification(Y,arguments)},_applyCombination:function(D,B){return D.apply(null,[this].concat([].slice.call(B)))},analogous:function(){return this._applyCombination(Q,arguments)},complement:function(){return this._applyCombination(Z,arguments)},monochromatic:function(){return this._applyCombination(ee,arguments)},splitcomplement:function(){return this._applyCombination(X,arguments)},triad:function(){return this._applyCombination(z,arguments)},tetrad:function(){return this._applyCombination(q,arguments)}},l.fromRatio=function(D,B){if(typeof D=="object"){var oe={};for(var ie in D)D.hasOwnProperty(ie)&&(ie==="a"?oe[ie]=D[ie]:oe[ie]=He(D[ie]));D=oe}return l(D,B)};function T(D){var B={r:0,g:0,b:0},oe=1,ie=null,ge=null,_e=null,Se=!1,De=!1;return typeof D=="string"&&(D=V(D)),typeof D=="object"&&(K(D.r)&&K(D.g)&&K(D.b)?(B=y(D.r,D.g,D.b),Se=!0,De=String(D.r).substr(-1)==="%"?"prgb":"rgb"):K(D.h)&&K(D.s)&&K(D.v)?(ie=He(D.s),ge=He(D.v),B=A(D.h,ie,ge),Se=!0,De="hsv"):K(D.h)&&K(D.s)&&K(D.l)&&(ie=He(D.s),_e=He(D.l),B=R(D.h,ie,_e),Se=!0,De="hsl"),D.hasOwnProperty("a")&&(oe=D.a)),oe=ce(oe),{ok:Se,format:D.format||De,r:m(255,g(B.r,0)),g:m(255,g(B.g,0)),b:m(255,g(B.b,0)),a:oe}}function y(D,B,oe){return{r:de(D,255)*255,g:de(B,255)*255,b:de(oe,255)*255}}function S(D,B,oe){D=de(D,255),B=de(B,255),oe=de(oe,255);var ie=g(D,B,oe),ge=m(D,B,oe),_e,Se,De=(ie+ge)/2;if(ie==ge)_e=Se=0;else{var Ge=ie-ge;switch(Se=De>.5?Ge/(2-ie-ge):Ge/(ie+ge),ie){case D:_e=(B-oe)/Ge+(B<oe?6:0);break;case B:_e=(oe-D)/Ge+2;break;case oe:_e=(D-B)/Ge+4;break}_e/=6}return{h:_e,s:Se,l:De}}function R(D,B,oe){var ie,ge,_e;D=de(D,360),B=de(B,100),oe=de(oe,100);function Se(Je,yt,ut){return ut<0&&(ut+=1),ut>1&&(ut-=1),ut<1/6?Je+(yt-Je)*6*ut:ut<1/2?yt:ut<2/3?Je+(yt-Je)*(2/3-ut)*6:Je}if(B===0)ie=ge=_e=oe;else{var De=oe<.5?oe*(1+B):oe+B-oe*B,Ge=2*oe-De;ie=Se(Ge,De,D+1/3),ge=Se(Ge,De,D),_e=Se(Ge,De,D-1/3)}return{r:ie*255,g:ge*255,b:_e*255}}function M(D,B,oe){D=de(D,255),B=de(B,255),oe=de(oe,255);var ie=g(D,B,oe),ge=m(D,B,oe),_e,Se,De=ie,Ge=ie-ge;if(Se=ie===0?0:Ge/ie,ie==ge)_e=0;else{switch(ie){case D:_e=(B-oe)/Ge+(B<oe?6:0);break;case B:_e=(oe-D)/Ge+2;break;case oe:_e=(D-B)/Ge+4;break}_e/=6}return{h:_e,s:Se,v:De}}function A(D,B,oe){D=de(D,360)*6,B=de(B,100),oe=de(oe,100);var ie=h.floor(D),ge=D-ie,_e=oe*(1-B),Se=oe*(1-ge*B),De=oe*(1-(1-ge)*B),Ge=ie%6,Je=[oe,Se,_e,_e,De,oe][Ge],yt=[De,oe,oe,Se,_e,_e][Ge],ut=[_e,_e,De,oe,oe,Se][Ge];return{r:Je*255,g:yt*255,b:ut*255}}function C(D,B,oe,ie){var ge=[Te(v(D).toString(16)),Te(v(B).toString(16)),Te(v(oe).toString(16))];return ie&&ge[0].charAt(0)==ge[0].charAt(1)&&ge[1].charAt(0)==ge[1].charAt(1)&&ge[2].charAt(0)==ge[2].charAt(1)?ge[0].charAt(0)+ge[1].charAt(0)+ge[2].charAt(0):ge.join("")}function j(D,B,oe,ie,ge){var _e=[Te(v(D).toString(16)),Te(v(B).toString(16)),Te(v(oe).toString(16)),Te(te(ie))];return ge&&_e[0].charAt(0)==_e[0].charAt(1)&&_e[1].charAt(0)==_e[1].charAt(1)&&_e[2].charAt(0)==_e[2].charAt(1)&&_e[3].charAt(0)==_e[3].charAt(1)?_e[0].charAt(0)+_e[1].charAt(0)+_e[2].charAt(0)+_e[3].charAt(0):_e.join("")}function b(D,B,oe,ie){var ge=[Te(te(ie)),Te(v(D).toString(16)),Te(v(B).toString(16)),Te(v(oe).toString(16))];return ge.join("")}l.equals=function(D,B){return!D||!B?!1:l(D).toRgbString()==l(B).toRgbString()},l.random=function(){return l.fromRatio({r:w(),g:w(),b:w()})};function k(D,B){B=B===0?0:B||10;var oe=l(D).toHsl();return oe.s-=B/100,oe.s=pe(oe.s),l(oe)}function E(D,B){B=B===0?0:B||10;var oe=l(D).toHsl();return oe.s+=B/100,oe.s=pe(oe.s),l(oe)}function F(D){return l(D).desaturate(100)}function P(D,B){B=B===0?0:B||10;var oe=l(D).toHsl();return oe.l+=B/100,oe.l=pe(oe.l),l(oe)}function J(D,B){B=B===0?0:B||10;var oe=l(D).toRgb();return oe.r=g(0,m(255,oe.r-v(255*-(B/100)))),oe.g=g(0,m(255,oe.g-v(255*-(B/100)))),oe.b=g(0,m(255,oe.b-v(255*-(B/100)))),l(oe)}function H(D,B){B=B===0?0:B||10;var oe=l(D).toHsl();return oe.l-=B/100,oe.l=pe(oe.l),l(oe)}function Y(D,B){var oe=l(D).toHsl(),ie=(oe.h+B)%360;return oe.h=ie<0?360+ie:ie,l(oe)}function Z(D){var B=l(D).toHsl();return B.h=(B.h+180)%360,l(B)}function z(D){var B=l(D).toHsl(),oe=B.h;return[l(D),l({h:(oe+120)%360,s:B.s,l:B.l}),l({h:(oe+240)%360,s:B.s,l:B.l})]}function q(D){var B=l(D).toHsl(),oe=B.h;return[l(D),l({h:(oe+90)%360,s:B.s,l:B.l}),l({h:(oe+180)%360,s:B.s,l:B.l}),l({h:(oe+270)%360,s:B.s,l:B.l})]}function X(D){var B=l(D).toHsl(),oe=B.h;return[l(D),l({h:(oe+72)%360,s:B.s,l:B.l}),l({h:(oe+216)%360,s:B.s,l:B.l})]}function Q(D,B,oe){B=B||6,oe=oe||30;var ie=l(D).toHsl(),ge=360/oe,_e=[l(D)];for(ie.h=(ie.h-(ge*B>>1)+720)%360;--B;)ie.h=(ie.h+ge)%360,_e.push(l(ie));return _e}function ee(D,B){B=B||6;for(var oe=l(D).toHsv(),ie=oe.h,ge=oe.s,_e=oe.v,Se=[],De=1/B;B--;)Se.push(l({h:ie,s:ge,v:_e})),_e=(_e+De)%1;return Se}l.mix=function(D,B,oe){oe=oe===0?0:oe||50;var ie=l(D).toRgb(),ge=l(B).toRgb(),_e=oe/100,Se={r:(ge.r-ie.r)*_e+ie.r,g:(ge.g-ie.g)*_e+ie.g,b:(ge.b-ie.b)*_e+ie.b,a:(ge.a-ie.a)*_e+ie.a};return l(Se)},l.readability=function(D,B){var oe=l(D),ie=l(B);return(h.max(oe.getLuminance(),ie.getLuminance())+.05)/(h.min(oe.getLuminance(),ie.getLuminance())+.05)},l.isReadable=function(D,B,oe){var ie=l.readability(D,B),ge,_e;switch(_e=!1,ge=re(oe),ge.level+ge.size){case"AAsmall":case"AAAlarge":_e=ie>=4.5;break;case"AAlarge":_e=ie>=3;break;case"AAAsmall":_e=ie>=7;break}return _e},l.mostReadable=function(D,B,oe){var ie=null,ge=0,_e,Se,De,Ge;oe=oe||{},Se=oe.includeFallbackColors,De=oe.level,Ge=oe.size;for(var Je=0;Je<B.length;Je++)_e=l.readability(D,B[Je]),_e>ge&&(ge=_e,ie=l(B[Je]));return l.isReadable(D,ie,{level:De,size:Ge})||!Se?ie:(oe.includeFallbackColors=!1,l.mostReadable(D,["#fff","#000"],oe))};var ne=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},le=l.hexNames=W(ne);function W(D){var B={};for(var oe in D)D.hasOwnProperty(oe)&&(B[D[oe]]=oe);return B}function ce(D){return D=parseFloat(D),(isNaN(D)||D<0||D>1)&&(D=1),D}function de(D,B){be(D)&&(D="100%");var oe=Ee(D);return D=m(B,g(0,parseFloat(D))),oe&&(D=parseInt(D*B,10)/100),h.abs(D-B)<1e-6?1:D%B/parseFloat(B)}function pe(D){return m(1,g(0,D))}function he(D){return parseInt(D,16)}function be(D){return typeof D=="string"&&D.indexOf(".")!=-1&&parseFloat(D)===1}function Ee(D){return typeof D=="string"&&D.indexOf("%")!=-1}function Te(D){return D.length==1?"0"+D:""+D}function He(D){return D<=1&&(D=D*100+"%"),D}function te(D){return h.round(parseFloat(D)*255).toString(16)}function ae(D){return he(D)/255}var G=function(){var D="[-\\+]?\\d+%?",B="[-\\+]?\\d*\\.\\d+%?",oe="(?:"+B+")|(?:"+D+")",ie="[\\s|\\(]+("+oe+")[,|\\s]+("+oe+")[,|\\s]+("+oe+")\\s*\\)?",ge="[\\s|\\(]+("+oe+")[,|\\s]+("+oe+")[,|\\s]+("+oe+")[,|\\s]+("+oe+")\\s*\\)?";return{CSS_UNIT:new RegExp(oe),rgb:new RegExp("rgb"+ie),rgba:new RegExp("rgba"+ge),hsl:new RegExp("hsl"+ie),hsla:new RegExp("hsla"+ge),hsv:new RegExp("hsv"+ie),hsva:new RegExp("hsva"+ge),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function K(D){return!!G.CSS_UNIT.exec(D)}function V(D){D=D.replace(c,"").replace(u,"").toLowerCase();var B=!1;if(ne[D])D=ne[D],B=!0;else if(D=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var oe;return(oe=G.rgb.exec(D))?{r:oe[1],g:oe[2],b:oe[3]}:(oe=G.rgba.exec(D))?{r:oe[1],g:oe[2],b:oe[3],a:oe[4]}:(oe=G.hsl.exec(D))?{h:oe[1],s:oe[2],l:oe[3]}:(oe=G.hsla.exec(D))?{h:oe[1],s:oe[2],l:oe[3],a:oe[4]}:(oe=G.hsv.exec(D))?{h:oe[1],s:oe[2],v:oe[3]}:(oe=G.hsva.exec(D))?{h:oe[1],s:oe[2],v:oe[3],a:oe[4]}:(oe=G.hex8.exec(D))?{r:he(oe[1]),g:he(oe[2]),b:he(oe[3]),a:ae(oe[4]),format:B?"name":"hex8"}:(oe=G.hex6.exec(D))?{r:he(oe[1]),g:he(oe[2]),b:he(oe[3]),format:B?"name":"hex"}:(oe=G.hex4.exec(D))?{r:he(oe[1]+""+oe[1]),g:he(oe[2]+""+oe[2]),b:he(oe[3]+""+oe[3]),a:ae(oe[4]+""+oe[4]),format:B?"name":"hex8"}:(oe=G.hex3.exec(D))?{r:he(oe[1]+""+oe[1]),g:he(oe[2]+""+oe[2]),b:he(oe[3]+""+oe[3]),format:B?"name":"hex"}:!1}function re(D){var B,oe;return D=D||{level:"AA",size:"small"},B=(D.level||"AA").toUpperCase(),oe=(D.size||"small").toLowerCase(),B!=="AA"&&B!=="AAA"&&(B="AA"),oe!=="small"&&oe!=="large"&&(oe="small"),{level:B,size:oe}}typeof $<"u"&&$.exports?$.exports=l:window.tinycolor=l})(Math)}}),It=i({"src/lib/extend.js"(U){var $=Ye(),h=Array.isArray;function c(p,v){var m,g;for(m=0;m<p.length;m++){if(g=p[m],g!==null&&typeof g=="object")return!1;g!==void 0&&(v[m]=g)}return!0}U.extendFlat=function(){return u(arguments,!1,!1,!1)},U.extendDeep=function(){return u(arguments,!0,!1,!1)},U.extendDeepAll=function(){return u(arguments,!0,!0,!1)},U.extendDeepNoArrays=function(){return u(arguments,!0,!1,!0)};function u(p,v,m,g){var w=p[0],l=p.length,T,y,S,R,M,A,C;if(l===2&&h(w)&&h(p[1])&&w.length===0){if(C=c(p[1],w),C)return w;w.splice(0,w.length)}for(var j=1;j<l;j++){T=p[j];for(y in T)S=w[y],R=T[y],g&&h(R)?w[y]=R:v&&R&&($(R)||(M=h(R)))?(M?(M=!1,A=S&&h(S)?S:[]):A=S&&$(S)?S:{},w[y]=u([A,R],v,m,g)):(typeof R<"u"||m)&&(w[y]=R)}return w}}}),er=i({"src/plots/font_attributes.js"(U,$){$.exports=function(h){var c=h.variantValues,u=h.editType,p=h.colorEditType;p===void 0&&(p=u);var v={editType:u,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};h.noNumericWeightValues&&(v.valType="enumerated",v.values=v.extras,v.extras=void 0,v.min=void 0,v.max=void 0);var m={family:{valType:"string",noBlank:!0,strict:!0,editType:u},size:{valType:"number",min:1,editType:u},color:{valType:"color",editType:p},weight:v,style:{editType:u,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:h.noFontVariant?void 0:{editType:u,valType:"enumerated",values:c||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:h.noFontTextcase?void 0:{editType:u,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:h.noFontLineposition?void 0:{editType:u,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:h.noFontShadow?void 0:{editType:u,valType:"string",dflt:h.autoShadowDflt?"auto":"none"},editType:u};return h.autoSize&&(m.size.dflt="auto"),h.autoColor&&(m.color.dflt="auto"),h.arrayOk&&(m.family.arrayOk=!0,m.weight.arrayOk=!0,m.style.arrayOk=!0,h.noFontVariant||(m.variant.arrayOk=!0),h.noFontTextcase||(m.textcase.arrayOk=!0),h.noFontLineposition||(m.lineposition.arrayOk=!0),h.noFontShadow||(m.shadow.arrayOk=!0),m.size.arrayOk=!0,m.color.arrayOk=!0),m}}}),cr=i({"src/components/fx/constants.js"(U,$){$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}}}),Tr=i({"src/components/fx/layout_attributes.js"(U,$){var h=cr(),c=er(),u=c({editType:"none"});u.family.dflt=h.HOVERFONT,u.size.dflt=h.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:u,grouptitlefont:c({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}}}),xr=i({"src/components/fx/attributes.js"(U,$){var h=er(),c=Tr().hoverlabel,u=It().extendFlat;$.exports={hoverlabel:{bgcolor:u({},c.bgcolor,{arrayOk:!0}),bordercolor:u({},c.bordercolor,{arrayOk:!0}),font:h({arrayOk:!0,editType:"none"}),align:u({},c.align,{arrayOk:!0}),namelength:u({},c.namelength,{arrayOk:!0}),editType:"none"}}}}),lt=i({"src/plots/attributes.js"(U,$){var h=er(),c=xr();$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:h({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:c.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}}}),gt=i({"src/components/colorscale/scales.js"(U,$){var h=wt(),c={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},u=c.RdBu;function p(g,w){if(w||(w=u),!g)return w;function l(){try{g=c[g]||JSON.parse(g)}catch{g=w}}return typeof g=="string"&&(l(),typeof g=="string"&&l()),v(g)?g:w}function v(g){var w=0;if(!Array.isArray(g)||g.length<2||!g[0]||!g[g.length-1]||+g[0][0]!=0||+g[g.length-1][0]!=1)return!1;for(var l=0;l<g.length;l++){var T=g[l];if(T.length!==2||+T[0]<w||!h(T[1]).isValid())return!1;w=+T[0]}return!0}function m(g){return c[g]!==void 0?!0:v(g)}$.exports={scales:c,defaultScale:u,get:p,isValid:m}}}),Ft=i({"src/components/color/attributes.js"(U){U.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],U.defaultLine="#444",U.lightLine="#eee",U.background="#fff",U.borderLine="#BEC8D9",U.lightFraction=100*10/11}}),pt=i({"src/components/color/index.js"(U,$){var h=wt(),c=xe(),u=qe().isTypedArray,p=$.exports={},v=Ft();p.defaults=v.defaults;var m=p.defaultLine=v.defaultLine;p.lightLine=v.lightLine;var g=p.background=v.background;p.tinyRGB=function(l){var T=l.toRgb();return"rgb("+Math.round(T.r)+", "+Math.round(T.g)+", "+Math.round(T.b)+")"},p.rgb=function(l){return p.tinyRGB(h(l))},p.opacity=function(l){return l?h(l).getAlpha():0},p.addOpacity=function(l,T){var y=h(l).toRgb();return"rgba("+Math.round(y.r)+", "+Math.round(y.g)+", "+Math.round(y.b)+", "+T+")"},p.combine=function(l,T){var y=h(l).toRgb();if(y.a===1)return h(l).toRgbString();var S=h(T||g).toRgb(),R=S.a===1?S:{r:255*(1-S.a)+S.r*S.a,g:255*(1-S.a)+S.g*S.a,b:255*(1-S.a)+S.b*S.a},M={r:R.r*(1-y.a)+y.r*y.a,g:R.g*(1-y.a)+y.g*y.a,b:R.b*(1-y.a)+y.b*y.a};return h(M).toRgbString()},p.interpolate=function(l,T,y){var S=h(l).toRgb(),R=h(T).toRgb(),M={r:y*S.r+(1-y)*R.r,g:y*S.g+(1-y)*R.g,b:y*S.b+(1-y)*R.b};return h(M).toRgbString()},p.contrast=function(l,T,y){var S=h(l);S.getAlpha()!==1&&(S=h(p.combine(l,g)));var R=S.isDark()?T?S.lighten(T):g:y?S.darken(y):m;return R.toString()},p.stroke=function(l,T){var y=h(T);l.style({stroke:p.tinyRGB(y),"stroke-opacity":y.getAlpha()})},p.fill=function(l,T){var y=h(T);l.style({fill:p.tinyRGB(y),"fill-opacity":y.getAlpha()})},p.clean=function(l){if(!(!l||typeof l!="object")){var T=Object.keys(l),y,S,R,M;for(y=0;y<T.length;y++)if(R=T[y],M=l[R],R.substr(R.length-5)==="color")if(Array.isArray(M))for(S=0;S<M.length;S++)M[S]=w(M[S]);else l[R]=w(M);else if(R.substr(R.length-10)==="colorscale"&&Array.isArray(M))for(S=0;S<M.length;S++)Array.isArray(M[S])&&(M[S][1]=w(M[S][1]));else if(Array.isArray(M)){var A=M[0];if(!Array.isArray(A)&&A&&typeof A=="object")for(S=0;S<M.length;S++)p.clean(M[S])}else M&&typeof M=="object"&&!u(M)&&p.clean(M)}};function w(l){if(c(l)||typeof l!="string")return l;var T=l.trim();if(T.substr(0,3)!=="rgb")return l;var y=T.match(/^rgba?\s*\(([^()]*)\)$/);if(!y)return l;var S=y[1].trim().split(/\s*[\s,]\s*/),R=T.charAt(3)==="a"&&S.length===4;if(!R&&S.length!==3)return l;for(var M=0;M<S.length;M++){if(!S[M].length||(S[M]=Number(S[M]),!(S[M]>=0)))return l;if(M===3)S[M]>1&&(S[M]=1);else if(S[M]>=1)return l}var A=Math.round(S[0]*255)+", "+Math.round(S[1]*255)+", "+Math.round(S[2]*255);return R?"rgba("+A+", "+S[3]+")":"rgb("+A+")"}}}),Zt=i({"src/constants/interactions.js"(U,$){$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}}}),Jt=i({"src/lib/regex.js"(U){U.counter=function($,h,c,u){var p=(h||"")+(c?"":"$"),v=u===!1?"":"^";return $==="xy"?new RegExp(v+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+p):new RegExp(v+$+"([2-9]|[1-9][0-9]+)?"+p)}}}),lr=i({"src/lib/coerce.js"(U){var $=xe(),h=wt(),c=It().extendFlat,u=lt(),p=gt(),v=pt(),m=Zt().DESELECTDIM,g=ze(),w=Jt().counter,l=Rt().modHalf,T=qe().isArrayOrTypedArray,y=qe().isTypedArraySpec,S=qe().decodeTypedArraySpec;U.valObjectMeta={data_array:{coerceFunction:function(M,A,C){A.set(T(M)?M:y(M)?S(M):C)}},enumerated:{coerceFunction:function(M,A,C,j){j.coerceNumber&&(M=+M),j.values.indexOf(M)===-1?A.set(C):A.set(M)},validateFunction:function(M,A){A.coerceNumber&&(M=+M);for(var C=A.values,j=0;j<C.length;j++){var b=String(C[j]);if(b.charAt(0)==="/"&&b.charAt(b.length-1)==="/"){var k=new RegExp(b.substr(1,b.length-2));if(k.test(M))return!0}else if(M===C[j])return!0}return!1}},boolean:{coerceFunction:function(M,A,C){M===!0||M===!1?A.set(M):A.set(C)}},number:{coerceFunction:function(M,A,C,j){y(M)&&(M=S(M)),!$(M)||j.min!==void 0&&M<j.min||j.max!==void 0&&M>j.max?A.set(C):A.set(+M)}},integer:{coerceFunction:function(M,A,C,j){if((j.extras||[]).indexOf(M)!==-1){A.set(M);return}y(M)&&(M=S(M)),M%1||!$(M)||j.min!==void 0&&M<j.min||j.max!==void 0&&M>j.max?A.set(C):A.set(+M)}},string:{coerceFunction:function(M,A,C,j){if(typeof M!="string"){var b=typeof M=="number";j.strict===!0||!b?A.set(C):A.set(String(M))}else j.noBlank&&!M?A.set(C):A.set(M)}},color:{coerceFunction:function(M,A,C){y(M)&&(M=S(M)),h(M).isValid()?A.set(M):A.set(C)}},colorlist:{coerceFunction:function(M,A,C){function j(b){return h(b).isValid()}!Array.isArray(M)||!M.length?A.set(C):M.every(j)?A.set(M):A.set(C)}},colorscale:{coerceFunction:function(M,A,C){A.set(p.get(M,C))}},angle:{coerceFunction:function(M,A,C){y(M)&&(M=S(M)),M==="auto"?A.set("auto"):$(M)?A.set(l(+M,360)):A.set(C)}},subplotid:{coerceFunction:function(M,A,C,j){var b=j.regex||w(C);if(typeof M=="string"&&b.test(M)){A.set(M);return}A.set(C)},validateFunction:function(M,A){var C=A.dflt;return M===C?!0:typeof M!="string"?!1:!!w(C).test(M)}},flaglist:{coerceFunction:function(M,A,C,j){if((j.extras||[]).indexOf(M)!==-1){A.set(M);return}if(typeof M!="string"){A.set(C);return}for(var b=M.split("+"),k=0;k<b.length;){var E=b[k];j.flags.indexOf(E)===-1||b.indexOf(E)<k?b.splice(k,1):k++}b.length?A.set(b.join("+")):A.set(C)}},any:{coerceFunction:function(M,A,C){M===void 0?A.set(C):A.set(y(M)?S(M):M)}},info_array:{coerceFunction:function(M,A,C,j){function b(ne,le,W){var ce,de={set:function(pe){ce=pe}};return W===void 0&&(W=le.dflt),U.valObjectMeta[le.valType].coerceFunction(ne,de,W,le),ce}if(y(M)&&(M=S(M)),!T(M)){A.set(C);return}var k=j.dimensions===2||j.dimensions==="1-2"&&Array.isArray(M)&&T(M[0]),E=j.items,F=[],P=Array.isArray(E),J=P&&k&&T(E[0]),H=k&&P&&!J,Y=P&&!H?E.length:M.length,Z,z,q,X,Q,ee;if(C=Array.isArray(C)?C:[],k)for(Z=0;Z<Y;Z++)for(F[Z]=[],q=T(M[Z])?M[Z]:[],H?Q=E.length:P?Q=E[Z].length:Q=q.length,z=0;z<Q;z++)H?X=E[z]:P?X=E[Z][z]:X=E,ee=b(q[z],X,(C[Z]||[])[z]),ee!==void 0&&(F[Z][z]=ee);else for(Z=0;Z<Y;Z++)ee=b(M[Z],P?E[Z]:E,C[Z]),ee!==void 0&&(F[Z]=ee);A.set(F)},validateFunction:function(M,A){if(!T(M))return!1;var C=A.items,j=Array.isArray(C),b=A.dimensions===2;if(!A.freeLength&&M.length!==C.length)return!1;for(var k=0;k<M.length;k++)if(b){if(!T(M[k])||!A.freeLength&&M[k].length!==C[k].length)return!1;for(var E=0;E<M[k].length;E++)if(!R(M[k][E],j?C[k][E]:C))return!1}else if(!R(M[k],j?C[k]:C))return!1;return!0}}},U.coerce=function(M,A,C,j,b){var k=g(C,j).get(),E=g(M,j),F=g(A,j),P=E.get(),J=A._template;if(P===void 0&&J&&(P=g(J,j).get(),J=0),b===void 0&&(b=k.dflt),k.arrayOk){if(T(P))return F.set(P),P;if(y(P))return P=S(P),F.set(P),P}var H=U.valObjectMeta[k.valType].coerceFunction;H(P,F,b,k);var Y=F.get();return J&&Y===b&&!R(P,k)&&(P=g(J,j).get(),H(P,F,b,k),Y=F.get()),Y},U.coerce2=function(M,A,C,j,b){var k=g(M,j),E=U.coerce(M,A,C,j,b),F=k.get();return F!=null?E:!1},U.coerceFont=function(M,A,C,j){j||(j={}),C=c({},C),C=c(C,j.overrideDflt||{});var b={family:M(A+".family",C.family),size:M(A+".size",C.size),color:M(A+".color",C.color),weight:M(A+".weight",C.weight),style:M(A+".style",C.style)};if(j.noFontVariant||(b.variant=M(A+".variant",C.variant)),j.noFontLineposition||(b.lineposition=M(A+".lineposition",C.lineposition)),j.noFontTextcase||(b.textcase=M(A+".textcase",C.textcase)),!j.noFontShadow){var k=C.shadow;k==="none"&&j.autoShadowDflt&&(k="auto"),b.shadow=M(A+".shadow",k)}return b},U.coercePattern=function(M,A,C,j){var b=M(A+".shape");if(b){M(A+".solidity"),M(A+".size");var k=M(A+".fillmode"),E=k==="overlay";if(!j){var F=M(A+".bgcolor",E?C:void 0);M(A+".fgcolor",E?v.contrast(F):C)}M(A+".fgopacity",E?.5:1)}},U.coerceHoverinfo=function(M,A,C){var j=A._module.attributes,b=j.hoverinfo?j:u,k=b.hoverinfo,E;if(C._dataLength===1){var F=k.dflt==="all"?k.flags.slice():k.dflt.split("+");F.splice(F.indexOf("name"),1),E=F.join("+")}return U.coerce(M,A,b,"hoverinfo",E)},U.coerceSelectionMarkerOpacity=function(M,A){if(M.marker){var C=M.marker.opacity;if(C!==void 0){var j,b;!T(C)&&!M.selected&&!M.unselected&&(j=C,b=m*C),A("selected.marker.opacity",j),A("unselected.marker.opacity",b)}}};function R(M,A){var C=U.valObjectMeta[A.valType];if(A.arrayOk&&T(M))return!0;if(C.validateFunction)return C.validateFunction(M,A);var j={},b=j,k={set:function(E){b=E}};return C.coerceFunction(M,k,j,A),b!==j}U.validate=R}}),wr=i({"src/plot_api/plot_config.js"(U,$){var h={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},c={};function u(p,v){for(var m in p){var g=p[m];g.valType?v[m]=g.dflt:(v[m]||(v[m]={}),u(g,v[m]))}}u(h,c),$.exports={configAttributes:h,dfltConfig:c}}}),Sr=i({"src/lib/notifier.js"(U,$){var h=d(),c=xe(),u=[];$.exports=function(p,v){if(u.indexOf(p)!==-1)return;u.push(p);var m=1e3;c(v)?m=v:v==="long"&&(m=3e3);var g=h.select("body").selectAll(".plotly-notifier").data([0]);g.enter().append("div").classed("plotly-notifier",!0);var w=g.selectAll(".notifier-note").data(u);function l(T){T.duration(700).style("opacity",0).each("end",function(y){var S=u.indexOf(y);S!==-1&&u.splice(S,1),h.select(this).remove()})}w.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(T){var y=h.select(this);y.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){y.transition().call(l)});for(var S=y.append("p"),R=T.split(/<br\s*\/?>/g),M=0;M<R.length;M++)M&&S.append("br"),S.append("span").text(R[M]);v==="stick"?y.transition().duration(350).style("opacity",1):y.transition().duration(700).style("opacity",1).transition().delay(m).call(l)})}}}),vr=i({"src/lib/loggers.js"(U,$){var h=wr().dfltConfig,c=Sr(),u=$.exports={};u.log=function(){var p;if(h.logging>1){var v=["LOG:"];for(p=0;p<arguments.length;p++)v.push(arguments[p]);console.trace.apply(console,v)}if(h.notifyOnLogging>1){var m=[];for(p=0;p<arguments.length;p++)m.push(arguments[p]);c(m.join("<br>"),"long")}},u.warn=function(){var p;if(h.logging>0){var v=["WARN:"];for(p=0;p<arguments.length;p++)v.push(arguments[p]);console.trace.apply(console,v)}if(h.notifyOnLogging>0){var m=[];for(p=0;p<arguments.length;p++)m.push(arguments[p]);c(m.join("<br>"),"stick")}},u.error=function(){var p;if(h.logging>0){var v=["ERROR:"];for(p=0;p<arguments.length;p++)v.push(arguments[p]);console.error.apply(console,v)}if(h.notifyOnLogging>0){var m=[];for(p=0;p<arguments.length;p++)m.push(arguments[p]);c(m.join("<br>"),"stick")}}}}),Bt=i({"src/lib/noop.js"(U,$){$.exports=function(){}}}),yr=i({"src/lib/push_unique.js"(U,$){$.exports=function(c,u){if(u instanceof RegExp){for(var p=u.toString(),v=0;v<c.length;v++)if(c[v]instanceof RegExp&&c[v].toString()===p)return c;c.push(u)}else(u||u===0)&&c.indexOf(u)===-1&&c.push(u);return c}}}),dr=i({"node_modules/gl-mat4/create.js"(U,$){$.exports=h;function h(){var c=new Float32Array(16);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),Pr=i({"node_modules/gl-mat4/clone.js"(U,$){$.exports=h;function h(c){var u=new Float32Array(16);return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u}}}),Hr=i({"node_modules/gl-mat4/copy.js"(U,$){$.exports=h;function h(c,u){return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15],c}}}),Wr=i({"node_modules/gl-mat4/identity.js"(U,$){$.exports=h;function h(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),Pn=i({"node_modules/gl-mat4/transpose.js"(U,$){$.exports=h;function h(c,u){if(c===u){var p=u[1],v=u[2],m=u[3],g=u[6],w=u[7],l=u[11];c[1]=u[4],c[2]=u[8],c[3]=u[12],c[4]=p,c[6]=u[9],c[7]=u[13],c[8]=v,c[9]=g,c[11]=u[14],c[12]=m,c[13]=w,c[14]=l}else c[0]=u[0],c[1]=u[4],c[2]=u[8],c[3]=u[12],c[4]=u[1],c[5]=u[5],c[6]=u[9],c[7]=u[13],c[8]=u[2],c[9]=u[6],c[10]=u[10],c[11]=u[14],c[12]=u[3],c[13]=u[7],c[14]=u[11],c[15]=u[15];return c}}}),Rn=i({"node_modules/gl-mat4/invert.js"(U,$){$.exports=h;function h(c,u){var p=u[0],v=u[1],m=u[2],g=u[3],w=u[4],l=u[5],T=u[6],y=u[7],S=u[8],R=u[9],M=u[10],A=u[11],C=u[12],j=u[13],b=u[14],k=u[15],E=p*l-v*w,F=p*T-m*w,P=p*y-g*w,J=v*T-m*l,H=v*y-g*l,Y=m*y-g*T,Z=S*j-R*C,z=S*b-M*C,q=S*k-A*C,X=R*b-M*j,Q=R*k-A*j,ee=M*k-A*b,ne=E*ee-F*Q+P*X+J*q-H*z+Y*Z;return ne?(ne=1/ne,c[0]=(l*ee-T*Q+y*X)*ne,c[1]=(m*Q-v*ee-g*X)*ne,c[2]=(j*Y-b*H+k*J)*ne,c[3]=(M*H-R*Y-A*J)*ne,c[4]=(T*q-w*ee-y*z)*ne,c[5]=(p*ee-m*q+g*z)*ne,c[6]=(b*P-C*Y-k*F)*ne,c[7]=(S*Y-M*P+A*F)*ne,c[8]=(w*Q-l*q+y*Z)*ne,c[9]=(v*q-p*Q-g*Z)*ne,c[10]=(C*H-j*P+k*E)*ne,c[11]=(R*P-S*H-A*E)*ne,c[12]=(l*z-w*X-T*Z)*ne,c[13]=(p*X-v*z+m*Z)*ne,c[14]=(j*F-C*J-b*E)*ne,c[15]=(S*J-R*F+M*E)*ne,c):null}}}),Fn=i({"node_modules/gl-mat4/adjoint.js"(U,$){$.exports=h;function h(c,u){var p=u[0],v=u[1],m=u[2],g=u[3],w=u[4],l=u[5],T=u[6],y=u[7],S=u[8],R=u[9],M=u[10],A=u[11],C=u[12],j=u[13],b=u[14],k=u[15];return c[0]=l*(M*k-A*b)-R*(T*k-y*b)+j*(T*A-y*M),c[1]=-(v*(M*k-A*b)-R*(m*k-g*b)+j*(m*A-g*M)),c[2]=v*(T*k-y*b)-l*(m*k-g*b)+j*(m*y-g*T),c[3]=-(v*(T*A-y*M)-l*(m*A-g*M)+R*(m*y-g*T)),c[4]=-(w*(M*k-A*b)-S*(T*k-y*b)+C*(T*A-y*M)),c[5]=p*(M*k-A*b)-S*(m*k-g*b)+C*(m*A-g*M),c[6]=-(p*(T*k-y*b)-w*(m*k-g*b)+C*(m*y-g*T)),c[7]=p*(T*A-y*M)-w*(m*A-g*M)+S*(m*y-g*T),c[8]=w*(R*k-A*j)-S*(l*k-y*j)+C*(l*A-y*R),c[9]=-(p*(R*k-A*j)-S*(v*k-g*j)+C*(v*A-g*R)),c[10]=p*(l*k-y*j)-w*(v*k-g*j)+C*(v*y-g*l),c[11]=-(p*(l*A-y*R)-w*(v*A-g*R)+S*(v*y-g*l)),c[12]=-(w*(R*b-M*j)-S*(l*b-T*j)+C*(l*M-T*R)),c[13]=p*(R*b-M*j)-S*(v*b-m*j)+C*(v*M-m*R),c[14]=-(p*(l*b-T*j)-w*(v*b-m*j)+C*(v*T-m*l)),c[15]=p*(l*M-T*R)-w*(v*M-m*R)+S*(v*T-m*l),c}}}),In=i({"node_modules/gl-mat4/determinant.js"(U,$){$.exports=h;function h(c){var u=c[0],p=c[1],v=c[2],m=c[3],g=c[4],w=c[5],l=c[6],T=c[7],y=c[8],S=c[9],R=c[10],M=c[11],A=c[12],C=c[13],j=c[14],b=c[15],k=u*w-p*g,E=u*l-v*g,F=u*T-m*g,P=p*l-v*w,J=p*T-m*w,H=v*T-m*l,Y=y*C-S*A,Z=y*j-R*A,z=y*b-M*A,q=S*j-R*C,X=S*b-M*C,Q=R*b-M*j;return k*Q-E*X+F*q+P*z-J*Z+H*Y}}}),sa=i({"node_modules/gl-mat4/multiply.js"(U,$){$.exports=h;function h(c,u,p){var v=u[0],m=u[1],g=u[2],w=u[3],l=u[4],T=u[5],y=u[6],S=u[7],R=u[8],M=u[9],A=u[10],C=u[11],j=u[12],b=u[13],k=u[14],E=u[15],F=p[0],P=p[1],J=p[2],H=p[3];return c[0]=F*v+P*l+J*R+H*j,c[1]=F*m+P*T+J*M+H*b,c[2]=F*g+P*y+J*A+H*k,c[3]=F*w+P*S+J*C+H*E,F=p[4],P=p[5],J=p[6],H=p[7],c[4]=F*v+P*l+J*R+H*j,c[5]=F*m+P*T+J*M+H*b,c[6]=F*g+P*y+J*A+H*k,c[7]=F*w+P*S+J*C+H*E,F=p[8],P=p[9],J=p[10],H=p[11],c[8]=F*v+P*l+J*R+H*j,c[9]=F*m+P*T+J*M+H*b,c[10]=F*g+P*y+J*A+H*k,c[11]=F*w+P*S+J*C+H*E,F=p[12],P=p[13],J=p[14],H=p[15],c[12]=F*v+P*l+J*R+H*j,c[13]=F*m+P*T+J*M+H*b,c[14]=F*g+P*y+J*A+H*k,c[15]=F*w+P*S+J*C+H*E,c}}}),$a=i({"node_modules/gl-mat4/translate.js"(U,$){$.exports=h;function h(c,u,p){var v=p[0],m=p[1],g=p[2],w,l,T,y,S,R,M,A,C,j,b,k;return u===c?(c[12]=u[0]*v+u[4]*m+u[8]*g+u[12],c[13]=u[1]*v+u[5]*m+u[9]*g+u[13],c[14]=u[2]*v+u[6]*m+u[10]*g+u[14],c[15]=u[3]*v+u[7]*m+u[11]*g+u[15]):(w=u[0],l=u[1],T=u[2],y=u[3],S=u[4],R=u[5],M=u[6],A=u[7],C=u[8],j=u[9],b=u[10],k=u[11],c[0]=w,c[1]=l,c[2]=T,c[3]=y,c[4]=S,c[5]=R,c[6]=M,c[7]=A,c[8]=C,c[9]=j,c[10]=b,c[11]=k,c[12]=w*v+S*m+C*g+u[12],c[13]=l*v+R*m+j*g+u[13],c[14]=T*v+M*m+b*g+u[14],c[15]=y*v+A*m+k*g+u[15]),c}}}),Oi=i({"node_modules/gl-mat4/scale.js"(U,$){$.exports=h;function h(c,u,p){var v=p[0],m=p[1],g=p[2];return c[0]=u[0]*v,c[1]=u[1]*v,c[2]=u[2]*v,c[3]=u[3]*v,c[4]=u[4]*m,c[5]=u[5]*m,c[6]=u[6]*m,c[7]=u[7]*m,c[8]=u[8]*g,c[9]=u[9]*g,c[10]=u[10]*g,c[11]=u[11]*g,c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15],c}}}),Ya=i({"node_modules/gl-mat4/rotate.js"(U,$){$.exports=h;function h(c,u,p,v){var m=v[0],g=v[1],w=v[2],l=Math.sqrt(m*m+g*g+w*w),T,y,S,R,M,A,C,j,b,k,E,F,P,J,H,Y,Z,z,q,X,Q,ee,ne,le;return Math.abs(l)<1e-6?null:(l=1/l,m*=l,g*=l,w*=l,T=Math.sin(p),y=Math.cos(p),S=1-y,R=u[0],M=u[1],A=u[2],C=u[3],j=u[4],b=u[5],k=u[6],E=u[7],F=u[8],P=u[9],J=u[10],H=u[11],Y=m*m*S+y,Z=g*m*S+w*T,z=w*m*S-g*T,q=m*g*S-w*T,X=g*g*S+y,Q=w*g*S+m*T,ee=m*w*S+g*T,ne=g*w*S-m*T,le=w*w*S+y,c[0]=R*Y+j*Z+F*z,c[1]=M*Y+b*Z+P*z,c[2]=A*Y+k*Z+J*z,c[3]=C*Y+E*Z+H*z,c[4]=R*q+j*X+F*Q,c[5]=M*q+b*X+P*Q,c[6]=A*q+k*X+J*Q,c[7]=C*q+E*X+H*Q,c[8]=R*ee+j*ne+F*le,c[9]=M*ee+b*ne+P*le,c[10]=A*ee+k*ne+J*le,c[11]=C*ee+E*ne+H*le,u!==c&&(c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]),c)}}}),Ri=i({"node_modules/gl-mat4/rotateX.js"(U,$){$.exports=h;function h(c,u,p){var v=Math.sin(p),m=Math.cos(p),g=u[4],w=u[5],l=u[6],T=u[7],y=u[8],S=u[9],R=u[10],M=u[11];return u!==c&&(c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]),c[4]=g*m+y*v,c[5]=w*m+S*v,c[6]=l*m+R*v,c[7]=T*m+M*v,c[8]=y*m-g*v,c[9]=S*m-w*v,c[10]=R*m-l*v,c[11]=M*m-T*v,c}}}),ar=i({"node_modules/gl-mat4/rotateY.js"(U,$){$.exports=h;function h(c,u,p){var v=Math.sin(p),m=Math.cos(p),g=u[0],w=u[1],l=u[2],T=u[3],y=u[8],S=u[9],R=u[10],M=u[11];return u!==c&&(c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]),c[0]=g*m-y*v,c[1]=w*m-S*v,c[2]=l*m-R*v,c[3]=T*m-M*v,c[8]=g*v+y*m,c[9]=w*v+S*m,c[10]=l*v+R*m,c[11]=T*v+M*m,c}}}),Nr=i({"node_modules/gl-mat4/rotateZ.js"(U,$){$.exports=h;function h(c,u,p){var v=Math.sin(p),m=Math.cos(p),g=u[0],w=u[1],l=u[2],T=u[3],y=u[4],S=u[5],R=u[6],M=u[7];return u!==c&&(c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]),c[0]=g*m+y*v,c[1]=w*m+S*v,c[2]=l*m+R*v,c[3]=T*m+M*v,c[4]=y*m-g*v,c[5]=S*m-w*v,c[6]=R*m-l*v,c[7]=M*m-T*v,c}}}),Xr=i({"node_modules/gl-mat4/fromRotation.js"(U,$){$.exports=h;function h(c,u,p){var v,m,g,w=p[0],l=p[1],T=p[2],y=Math.sqrt(w*w+l*l+T*T);return Math.abs(y)<1e-6?null:(y=1/y,w*=y,l*=y,T*=y,v=Math.sin(u),m=Math.cos(u),g=1-m,c[0]=w*w*g+m,c[1]=l*w*g+T*v,c[2]=T*w*g-l*v,c[3]=0,c[4]=w*l*g-T*v,c[5]=l*l*g+m,c[6]=T*l*g+w*v,c[7]=0,c[8]=w*T*g+l*v,c[9]=l*T*g-w*v,c[10]=T*T*g+m,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}}}),Cr=i({"node_modules/gl-mat4/fromRotationTranslation.js"(U,$){$.exports=h;function h(c,u,p){var v=u[0],m=u[1],g=u[2],w=u[3],l=v+v,T=m+m,y=g+g,S=v*l,R=v*T,M=v*y,A=m*T,C=m*y,j=g*y,b=w*l,k=w*T,E=w*y;return c[0]=1-(A+j),c[1]=R+E,c[2]=M-k,c[3]=0,c[4]=R-E,c[5]=1-(S+j),c[6]=C+b,c[7]=0,c[8]=M+k,c[9]=C-b,c[10]=1-(S+A),c[11]=0,c[12]=p[0],c[13]=p[1],c[14]=p[2],c[15]=1,c}}}),pn=i({"node_modules/gl-mat4/fromScaling.js"(U,$){$.exports=h;function h(c,u){return c[0]=u[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=u[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=u[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),On=i({"node_modules/gl-mat4/fromTranslation.js"(U,$){$.exports=h;function h(c,u){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=u[0],c[13]=u[1],c[14]=u[2],c[15]=1,c}}}),Hn=i({"node_modules/gl-mat4/fromXRotation.js"(U,$){$.exports=h;function h(c,u){var p=Math.sin(u),v=Math.cos(u);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=v,c[6]=p,c[7]=0,c[8]=0,c[9]=-p,c[10]=v,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),kn=i({"node_modules/gl-mat4/fromYRotation.js"(U,$){$.exports=h;function h(c,u){var p=Math.sin(u),v=Math.cos(u);return c[0]=v,c[1]=0,c[2]=-p,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=p,c[9]=0,c[10]=v,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),Gn=i({"node_modules/gl-mat4/fromZRotation.js"(U,$){$.exports=h;function h(c,u){var p=Math.sin(u),v=Math.cos(u);return c[0]=v,c[1]=p,c[2]=0,c[3]=0,c[4]=-p,c[5]=v,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),ba=i({"node_modules/gl-mat4/fromQuat.js"(U,$){$.exports=h;function h(c,u){var p=u[0],v=u[1],m=u[2],g=u[3],w=p+p,l=v+v,T=m+m,y=p*w,S=v*w,R=v*l,M=m*w,A=m*l,C=m*T,j=g*w,b=g*l,k=g*T;return c[0]=1-R-C,c[1]=S+k,c[2]=M-b,c[3]=0,c[4]=S-k,c[5]=1-y-C,c[6]=A+j,c[7]=0,c[8]=M+b,c[9]=A-j,c[10]=1-y-R,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),Pi=i({"node_modules/gl-mat4/frustum.js"(U,$){$.exports=h;function h(c,u,p,v,m,g,w){var l=1/(p-u),T=1/(m-v),y=1/(g-w);return c[0]=g*2*l,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=g*2*T,c[6]=0,c[7]=0,c[8]=(p+u)*l,c[9]=(m+v)*T,c[10]=(w+g)*y,c[11]=-1,c[12]=0,c[13]=0,c[14]=w*g*2*y,c[15]=0,c}}}),Ai=i({"node_modules/gl-mat4/perspective.js"(U,$){$.exports=h;function h(c,u,p,v,m){var g=1/Math.tan(u/2),w=1/(v-m);return c[0]=g/p,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=g,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=(m+v)*w,c[11]=-1,c[12]=0,c[13]=0,c[14]=2*m*v*w,c[15]=0,c}}}),_i=i({"node_modules/gl-mat4/perspectiveFromFieldOfView.js"(U,$){$.exports=h;function h(c,u,p,v){var m=Math.tan(u.upDegrees*Math.PI/180),g=Math.tan(u.downDegrees*Math.PI/180),w=Math.tan(u.leftDegrees*Math.PI/180),l=Math.tan(u.rightDegrees*Math.PI/180),T=2/(w+l),y=2/(m+g);return c[0]=T,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=y,c[6]=0,c[7]=0,c[8]=-((w-l)*T*.5),c[9]=(m-g)*y*.5,c[10]=v/(p-v),c[11]=-1,c[12]=0,c[13]=0,c[14]=v*p/(p-v),c[15]=0,c}}}),Bi=i({"node_modules/gl-mat4/ortho.js"(U,$){$.exports=h;function h(c,u,p,v,m,g,w){var l=1/(u-p),T=1/(v-m),y=1/(g-w);return c[0]=-2*l,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*T,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*y,c[11]=0,c[12]=(u+p)*l,c[13]=(m+v)*T,c[14]=(w+g)*y,c[15]=1,c}}}),Nn=i({"node_modules/gl-mat4/lookAt.js"(U,$){var h=Wr();$.exports=c;function c(u,p,v,m){var g,w,l,T,y,S,R,M,A,C,j=p[0],b=p[1],k=p[2],E=m[0],F=m[1],P=m[2],J=v[0],H=v[1],Y=v[2];return Math.abs(j-J)<1e-6&&Math.abs(b-H)<1e-6&&Math.abs(k-Y)<1e-6?h(u):(R=j-J,M=b-H,A=k-Y,C=1/Math.sqrt(R*R+M*M+A*A),R*=C,M*=C,A*=C,g=F*A-P*M,w=P*R-E*A,l=E*M-F*R,C=Math.sqrt(g*g+w*w+l*l),C?(C=1/C,g*=C,w*=C,l*=C):(g=0,w=0,l=0),T=M*l-A*w,y=A*g-R*l,S=R*w-M*g,C=Math.sqrt(T*T+y*y+S*S),C?(C=1/C,T*=C,y*=C,S*=C):(T=0,y=0,S=0),u[0]=g,u[1]=T,u[2]=R,u[3]=0,u[4]=w,u[5]=y,u[6]=M,u[7]=0,u[8]=l,u[9]=S,u[10]=A,u[11]=0,u[12]=-(g*j+w*b+l*k),u[13]=-(T*j+y*b+S*k),u[14]=-(R*j+M*b+A*k),u[15]=1,u)}}}),Hi=i({"node_modules/gl-mat4/str.js"(U,$){$.exports=h;function h(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}}}),ri=i({"node_modules/gl-mat4/index.js"(U,$){$.exports={create:dr(),clone:Pr(),copy:Hr(),identity:Wr(),transpose:Pn(),invert:Rn(),adjoint:Fn(),determinant:In(),multiply:sa(),translate:$a(),scale:Oi(),rotate:Ya(),rotateX:Ri(),rotateY:ar(),rotateZ:Nr(),fromRotation:Xr(),fromRotationTranslation:Cr(),fromScaling:pn(),fromTranslation:On(),fromXRotation:Hn(),fromYRotation:kn(),fromZRotation:Gn(),fromQuat:ba(),frustum:Pi(),perspective:Ai(),perspectiveFromFieldOfView:_i(),ortho:Bi(),lookAt:Nn(),str:Hi()}}}),ti=i({"src/lib/matrix.js"(U){var $=ri();U.init2dArray=function(h,c){for(var u=new Array(h),p=0;p<h;p++)u[p]=new Array(c);return u},U.transposeRagged=function(h){var c=0,u=h.length,p,v;for(p=0;p<u;p++)c=Math.max(c,h[p].length);var m=new Array(c);for(p=0;p<c;p++)for(m[p]=new Array(u),v=0;v<u;v++)m[p][v]=h[v][p];return m},U.dot=function(h,c){if(!(h.length&&c.length)||h.length!==c.length)return null;var u=h.length,p,v;if(h[0].length)for(p=new Array(u),v=0;v<u;v++)p[v]=U.dot(h[v],c);else if(c[0].length){var m=U.transposeRagged(c);for(p=new Array(m.length),v=0;v<m.length;v++)p[v]=U.dot(h,m[v])}else for(p=0,v=0;v<u;v++)p+=h[v]*c[v];return p},U.translationMatrix=function(h,c){return[[1,0,h],[0,1,c],[0,0,1]]},U.rotationMatrix=function(h){var c=h*Math.PI/180;return[[Math.cos(c),-Math.sin(c),0],[Math.sin(c),Math.cos(c),0],[0,0,1]]},U.rotationXYMatrix=function(h,c,u){return U.dot(U.dot(U.translationMatrix(c,u),U.rotationMatrix(h)),U.translationMatrix(-c,-u))},U.apply3DTransform=function(h){return function(){var c=arguments,u=arguments.length===1?c[0]:[c[0],c[1],c[2]||0];return U.dot(h,[u[0],u[1],u[2],1]).slice(0,3)}},U.apply2DTransform=function(h){return function(){var c=arguments;c.length===3&&(c=c[0]);var u=arguments.length===1?c[0]:[c[0],c[1]];return U.dot(h,[u[0],u[1],1]).slice(0,2)}},U.apply2DTransform2=function(h){var c=U.apply2DTransform(h);return function(u){return c(u.slice(0,2)).concat(c(u.slice(2,4)))}},U.convertCssMatrix=function(h){if(h){var c=h.length;if(c===16)return h;if(c===6)return[h[0],h[1],0,0,h[2],h[3],0,0,0,0,1,0,h[4],h[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},U.inverseTransformMatrix=function(h){var c=[];return $.invert(c,h),[[c[0],c[1],c[2],c[3]],[c[4],c[5],c[6],c[7]],[c[8],c[9],c[10],c[11]],[c[12],c[13],c[14],c[15]]]}}}),Jn=i({"src/lib/dom.js"(U,$){var h=d(),c=vr(),u=ti(),p=ri();function v(j){var b;if(typeof j=="string"){if(b=document.getElementById(j),b===null)throw new Error("No DOM element with id '"+j+"' exists on the page.");return b}else if(j==null)throw new Error("DOM element provided is null or undefined");return j}function m(j){var b=h.select(j);return b.node()instanceof HTMLElement&&b.size()&&b.classed("js-plotly-plot")}function g(j){var b=j&&j.parentNode;b&&b.removeChild(j)}function w(j,b){l("global",j,b)}function l(j,b,k){var E="plotly.js-style-"+j,F=document.getElementById(E);if(!(F&&F.matches(".no-inline-styles"))){F||(F=document.createElement("style"),F.setAttribute("id",E),F.appendChild(document.createTextNode("")),document.head.appendChild(F));var P=F.sheet;P?P.insertRule?P.insertRule(b+"{"+k+"}",0):P.addRule?P.addRule(b,k,0):c.warn("addStyleRule failed"):c.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function T(j){var b="plotly.js-style-"+j,k=document.getElementById(b);k&&g(k)}function y(j,b,k,E,F,P){var J=E.split(":"),H=F.split(":"),Y="data-btn-style-event-added";P||(P=document),P.querySelectorAll(j).forEach(function(Z){Z.getAttribute(Y)||(Z.addEventListener("mouseenter",function(){var z=this.querySelector(k);z&&(z.style[J[0]]=J[1])}),Z.addEventListener("mouseleave",function(){var z=this.querySelector(k);z&&(b&&this.matches(b)?z.style[J[0]]=J[1]:z.style[H[0]]=H[1])}),Z.setAttribute(Y,!0))})}function S(j){var b=M(j),k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return b.forEach(function(E){var F=R(E);if(F){var P=u.convertCssMatrix(F);k=p.multiply(k,k,P)}}),k}function R(j){var b=window.getComputedStyle(j,null),k=b.getPropertyValue("-webkit-transform")||b.getPropertyValue("-moz-transform")||b.getPropertyValue("-ms-transform")||b.getPropertyValue("-o-transform")||b.getPropertyValue("transform");return k==="none"?null:k.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(E){return+E})}function M(j){for(var b=[];A(j);)b.push(j),j=j.parentNode,typeof ShadowRoot=="function"&&j instanceof ShadowRoot&&(j=j.host);return b}function A(j){return j&&(j instanceof Element||j instanceof HTMLElement)}function C(j,b){return j&&b&&j.top===b.top&&j.left===b.left&&j.right===b.right&&j.bottom===b.bottom}$.exports={getGraphDiv:v,isPlotDiv:m,removeElement:g,addStyleRule:w,addRelatedStyleRule:l,deleteRelatedStyleRule:T,setStyleOnHover:y,getFullTransformMatrix:S,getElementTransformMatrix:R,getElementAndAncestors:M,equalDomRects:C}}}),Ca=i({"src/plots/animation_attributes.js"(U,$){$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}}}),Ni=i({"src/plot_api/edit_types.js"(U,$){var h=It().extendFlat,c=Ye(),u={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},p={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},v=u.flags.slice().concat(["fullReplot"]),m=p.flags.slice().concat("layoutReplot");$.exports={traces:u,layout:p,traceFlags:function(){return g(v)},layoutFlags:function(){return g(m)},update:function(T,y){var S=y.editType;if(S&&S!=="none")for(var R=S.split("+"),M=0;M<R.length;M++)T[R[M]]=!0},overrideAll:w};function g(T){for(var y={},S=0;S<T.length;S++)y[T[S]]=!1;return y}function w(T,y,S){var R=h({},T);for(var M in R){var A=R[M];c(A)&&(R[M]=l(A,y,S,M))}return S==="from-root"&&(R.editType=y),R}function l(T,y,S,R){if(T.valType){var M=h({},T);if(M.editType=y,Array.isArray(T.items)){M.items=new Array(T.items.length);for(var A=0;A<T.items.length;A++)M.items[A]=l(T.items[A],y)}return M}else return w(T,y,R.charAt(0)==="_"?"nested":"from-root")}}}),si=i({"src/components/drawing/attributes.js"(U){U.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},U.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}}}),ui=i({"src/constants/docs.js"(U,$){$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}}}),ea=i({"src/plots/template_attributes.js"(U){var $=ui();$.FORMAT_LINK,$.DATE_FORMAT_LINK;function h(c){var u=c.description?" "+c.description:"",p=c.keys||[];if(p.length>0){for(var v=[],m=0;m<p.length;m++)v[m]="`"+p[m]+"`";u=u+"Finally, the template string has access to ",p.length===1?u=u+"variable "+v[0]:u=u+"variables "+v.slice(0,-1).join(", ")+" and "+v.slice(-1)+"."}return u}U.hovertemplateAttrs=function(c,u){c=c||{},u=u||{},h(u);var p={valType:"string",dflt:"",editType:c.editType||"none"};return c.arrayOk!==!1&&(p.arrayOk=!0),p},U.texttemplateAttrs=function(c,u){c=c||{},u=u||{},h(u);var p={valType:"string",dflt:"",editType:c.editType||"calc"};return c.arrayOk!==!1&&(p.arrayOk=!0),p},U.shapeTexttemplateAttrs=function(c,u){c=c||{},u=u||{},c.newshape,h(u);var p={valType:"string",dflt:"",editType:c.editType||"arraydraw"};return p}}}),wa=i({"src/components/shapes/label_texttemplate.js"(U,$){function h(k,E){return E?E.d2l(k):k}function c(k,E){return E?E.l2d(k):k}function u(k){return k.x0}function p(k){return k.x1}function v(k){return k.y0}function m(k){return k.y1}function g(k){return k.x0shift||0}function w(k){return k.x1shift||0}function l(k){return k.y0shift||0}function T(k){return k.y1shift||0}function y(k,E){return h(k.x1,E)+w(k)-h(k.x0,E)-g(k)}function S(k,E,F){return h(k.y1,F)+T(k)-h(k.y0,F)-l(k)}function R(k,E){return Math.abs(y(k,E))}function M(k,E,F){return Math.abs(S(k,E,F))}function A(k,E,F){return k.type!=="line"?void 0:Math.sqrt(Math.pow(y(k,E),2)+Math.pow(S(k,E,F),2))}function C(k,E){return c((h(k.x1,E)+w(k)+h(k.x0,E)+g(k))/2,E)}function j(k,E,F){return c((h(k.y1,F)+T(k)+h(k.y0,F)+l(k))/2,F)}function b(k,E,F){return k.type!=="line"?void 0:S(k,E,F)/y(k,E)}$.exports={x0:u,x1:p,y0:v,y1:m,slope:b,dx:y,dy:S,width:R,height:M,length:A,xcenter:C,ycenter:j}}}),Yi=i({"src/components/shapes/draw_newshape/attributes.js"(U,$){var h=Ni().overrideAll,c=lt(),u=er(),p=si().dash,v=It().extendFlat,m=ea().shapeTexttemplateAttrs,g=wa();$.exports=h({newshape:{visible:v({},c.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:v({},c.legend,{}),legendgroup:v({},c.legendgroup,{}),legendgrouptitle:{text:v({},c.legendgrouptitle.text,{}),font:u({})},legendrank:v({},c.legendrank,{}),legendwidth:v({},c.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:v({},p,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:v({},c.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:m({newshape:!0},{keys:Object.keys(g)}),font:u({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")}}),As=i({"src/components/selections/draw_newselection/attributes.js"(U,$){var h=si().dash,c=It().extendFlat;$.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:c({},h,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}}}),oi=i({"src/plots/pad_attributes.js"(U,$){$.exports=function(h){var c=h.editType;return{t:{valType:"number",dflt:0,editType:c},r:{valType:"number",dflt:0,editType:c},b:{valType:"number",dflt:0,editType:c},l:{valType:"number",dflt:0,editType:c},editType:c}}}}),zi=i({"src/plots/layout_attributes.js"(U,$){var h=er(),c=Ca(),u=Ft(),p=Yi(),v=As(),m=oi(),g=It().extendFlat,w=h({editType:"calc"});w.family.dflt='"Open Sans", verdana, arial, sans-serif',w.size.dflt=12,w.color.dflt=u.defaultLine,$.exports={font:w,title:{text:{valType:"string",editType:"layoutstyle"},font:h({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:h({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:g(m({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:u.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:u.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:u.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:p.newshape,activeshape:p.activeshape,newselection:v.newselection,activeselection:v.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:g({},c.transition,{editType:"none"})}}}),Cs=n({"temp_stylePlugin:node_modules/maplibre-gl/dist/maplibre-gl.css"(){}}),Os=n({"stylePlugin:/Users/ekl/code/plotly.js/node_modules/maplibre-gl/dist/maplibre-gl.css"(){Cs()}}),mn=i({"src/registry.js"(U){var $=vr(),h=Bt(),c=yr(),u=Ye(),p=Jn().addStyleRule,v=It(),m=lt(),g=zi(),w=v.extendFlat,l=v.extendDeepAll;U.modules={},U.allCategories={},U.allTypes=[],U.subplotsRegistry={},U.componentsRegistry={},U.layoutArrayContainers=[],U.layoutArrayRegexes=[],U.traceLayoutAttributes={},U.localeRegistry={},U.apiMethodRegistry={},U.collectableSubplotTypes=null,U.register=function(E){if(U.collectableSubplotTypes=null,E)E&&!Array.isArray(E)&&(E=[E]);else throw new Error("No argument passed to Plotly.register.");for(var F=0;F<E.length;F++){var P=E[F];if(!P)throw new Error("Invalid module was attempted to be registered!");switch(P.moduleType){case"trace":T(P);break;case"transform":R(P);break;case"component":S(P);break;case"locale":M(P);break;case"apiMethod":var J=P.name;U.apiMethodRegistry[J]=P.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},U.getModule=function(k){var E=U.modules[b(k)];return E?E._module:!1},U.traceIs=function(k,E){if(k=b(k),k==="various")return!1;var F=U.modules[k];return F||(k&&$.log("Unrecognized trace type "+k+"."),F=U.modules[m.type.dflt]),!!F.categories[E]},U.getComponentMethod=function(k,E){var F=U.componentsRegistry[k];return F&&F[E]||h},U.call=function(){var k=arguments[0],E=[].slice.call(arguments,1);return U.apiMethodRegistry[k].apply(null,E)};function T(k){var E=k.name,F=k.categories,P=k.meta;if(U.modules[E]){$.log("Type "+E+" already registered");return}U.subplotsRegistry[k.basePlotModule.name]||y(k.basePlotModule);for(var J={},H=0;H<F.length;H++)J[F[H]]=!0,U.allCategories[F[H]]=!0;U.modules[E]={_module:k,categories:J},P&&Object.keys(P).length&&(U.modules[E].meta=P),U.allTypes.push(E);for(var Y in U.componentsRegistry)C(Y,E);k.layoutAttributes&&w(U.traceLayoutAttributes,k.layoutAttributes);var Z=k.basePlotModule,z=Z.name;if(z==="mapbox"){var q=Z.constants.styleRules;for(var X in q)p(".js-plotly-plot .plotly .mapboxgl-"+X,q[X])}z==="map"&&Os(),(z==="geo"||z==="mapbox"||z==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function y(k){var E=k.name;if(U.subplotsRegistry[E]){$.log("Plot type "+E+" already registered.");return}A(k),U.subplotsRegistry[E]=k;for(var F in U.componentsRegistry)j(F,k.name)}function S(k){if(typeof k.name!="string")throw new Error("Component module *name* must be a string.");var E=k.name;U.componentsRegistry[E]=k,k.layoutAttributes&&(k.layoutAttributes._isLinkedToArray&&c(U.layoutArrayContainers,E),A(k));for(var F in U.modules)C(E,F);for(var P in U.subplotsRegistry)j(E,P);k.schema&&k.schema.layout&&l(g,k.schema.layout)}function R(k){if(typeof k.name!="string")throw new Error("Transform module *name* must be a string.");var E="Transform module "+k.name,F=typeof k.transform=="function",P=typeof k.calcTransform=="function";if(!F&&!P)throw new Error(E+" is missing a *transform* or *calcTransform* method.");F&&P&&$.log([E+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),u(k.attributes)||$.log(E+" registered without an *attributes* object."),typeof k.supplyDefaults!="function"&&$.log(E+" registered without a *supplyDefaults* method.")}function M(k){var E=k.name,F=E.split("-")[0],P=k.dictionary,J=k.format,H=P&&Object.keys(P).length,Y=J&&Object.keys(J).length,Z=U.localeRegistry,z=Z[E];if(z||(Z[E]=z={}),F!==E){var q=Z[F];q||(Z[F]=q={}),H&&q.dictionary===z.dictionary&&(q.dictionary=P),Y&&q.format===z.format&&(q.format=J)}H&&(z.dictionary=P),Y&&(z.format=J)}function A(k){if(k.layoutAttributes){var E=k.layoutAttributes._arrayAttrRegexps;if(E)for(var F=0;F<E.length;F++)c(U.layoutArrayRegexes,E[F])}}function C(k,E){var F=U.componentsRegistry[k].schema;if(!(!F||!F.traces)){var P=F.traces[E];P&&l(U.modules[E]._module.attributes,P)}}function j(k,E){var F=U.componentsRegistry[k].schema;if(!(!F||!F.subplots)){var P=U.subplotsRegistry[E],J=P.layoutAttributes,H=P.attr==="subplot"?P.name:P.attr;Array.isArray(H)&&(H=H[0]);var Y=F.subplots[H];J&&Y&&l(J,Y)}}function b(k){return typeof k=="object"&&(k=k.type),k}}}),Bs=i({"src/lib/dates.js"(U){var $=N().timeFormat,h=xe(),c=vr(),u=Rt().mod,p=Ce(),v=p.BADNUM,m=p.ONEDAY,g=p.ONEHOUR,w=p.ONEMIN,l=p.ONESEC,T=p.EPOCHJD,y=mn(),S=N().utcFormat,R=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,M=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,A=new Date().getFullYear()-70;function C(ne){return ne&&y.componentsRegistry.calendars&&typeof ne=="string"&&ne!=="gregorian"}U.dateTick0=function(ne,le){var W=j(ne,!!le);if(le<2)return W;var ce=U.dateTime2ms(W,ne);return ce+=m*(le-1),U.ms2DateTime(ce,0,ne)};function j(ne,le){return C(ne)?le?y.getComponentMethod("calendars","CANONICAL_SUNDAY")[ne]:y.getComponentMethod("calendars","CANONICAL_TICK")[ne]:le?"2000-01-02":"2000-01-01"}U.dfltRange=function(ne){return C(ne)?y.getComponentMethod("calendars","DFLTRANGE")[ne]:["2000-01-01","2001-01-01"]},U.isJSDate=function(ne){return typeof ne=="object"&&ne!==null&&typeof ne.getTime=="function"};var b,k;U.dateTime2ms=function(ne,le){if(U.isJSDate(ne)){var W=ne.getTimezoneOffset()*w,ce=(ne.getUTCMinutes()-ne.getMinutes())*w+(ne.getUTCSeconds()-ne.getSeconds())*l+(ne.getUTCMilliseconds()-ne.getMilliseconds());if(ce){var de=3*w;W=W-de/2+u(ce-W+de/2,de)}return ne=Number(ne)-W,ne>=b&&ne<=k?ne:v}if(typeof ne!="string"&&typeof ne!="number")return v;ne=String(ne);var pe=C(le),he=ne.charAt(0);pe&&(he==="G"||he==="g")&&(ne=ne.substr(1),le="");var be=pe&&le.substr(0,7)==="chinese",Ee=ne.match(be?M:R);if(!Ee)return v;var Te=Ee[1],He=Ee[3]||"1",te=Number(Ee[5]||1),ae=Number(Ee[7]||0),G=Number(Ee[9]||0),K=Number(Ee[11]||0);if(pe){if(Te.length===2)return v;Te=Number(Te);var V;try{var re=y.getComponentMethod("calendars","getCal")(le);if(be){var D=He.charAt(He.length-1)==="i";He=parseInt(He,10),V=re.newDate(Te,re.toMonthIndex(Te,He,D),te)}else V=re.newDate(Te,Number(He),te)}catch{return v}return V?(V.toJD()-T)*m+ae*g+G*w+K*l:v}Te.length===2?Te=(Number(Te)+2e3-A)%100+A:Te=Number(Te),He-=1;var B=new Date(Date.UTC(2e3,He,te,ae,G));return B.setUTCFullYear(Te),B.getUTCMonth()!==He||B.getUTCDate()!==te?v:B.getTime()+K*l},b=U.MIN_MS=U.dateTime2ms("-9999"),k=U.MAX_MS=U.dateTime2ms("9999-12-31 23:59:59.9999"),U.isDateTime=function(ne,le){return U.dateTime2ms(ne,le)!==v};function E(ne,le){return String(ne+Math.pow(10,le)).substr(1)}var F=90*m,P=3*g,J=5*w;U.ms2DateTime=function(ne,le,W){if(typeof ne!="number"||!(ne>=b&&ne<=k))return v;le||(le=0);var ce=Math.floor(u(ne+.05,1)*10),de=Math.round(ne-ce/10),pe,he,be,Ee,Te,He;if(C(W)){var te=Math.floor(de/m)+T,ae=Math.floor(u(ne,m));try{pe=y.getComponentMethod("calendars","getCal")(W).fromJD(te).formatDate("yyyy-mm-dd")}catch{pe=S("G%Y-%m-%d")(new Date(de))}if(pe.charAt(0)==="-")for(;pe.length<11;)pe="-0"+pe.substr(1);else for(;pe.length<10;)pe="0"+pe;he=le<F?Math.floor(ae/g):0,be=le<F?Math.floor(ae%g/w):0,Ee=le<P?Math.floor(ae%w/l):0,Te=le<J?ae%l*10+ce:0}else He=new Date(de),pe=S("%Y-%m-%d")(He),he=le<F?He.getUTCHours():0,be=le<F?He.getUTCMinutes():0,Ee=le<P?He.getUTCSeconds():0,Te=le<J?He.getUTCMilliseconds()*10+ce:0;return H(pe,he,be,Ee,Te)},U.ms2DateTimeLocal=function(ne){if(!(ne>=b+m&&ne<=k-m))return v;var le=Math.floor(u(ne+.05,1)*10),W=new Date(Math.round(ne-le/10)),ce=$("%Y-%m-%d")(W),de=W.getHours(),pe=W.getMinutes(),he=W.getSeconds(),be=W.getUTCMilliseconds()*10+le;return H(ce,de,pe,he,be)};function H(ne,le,W,ce,de){if((le||W||ce||de)&&(ne+=" "+E(le,2)+":"+E(W,2),(ce||de)&&(ne+=":"+E(ce,2),de))){for(var pe=4;de%10===0;)pe-=1,de/=10;ne+="."+E(de,pe)}return ne}U.cleanDate=function(ne,le,W){if(ne===v)return le;if(U.isJSDate(ne)||typeof ne=="number"&&isFinite(ne)){if(C(W))return c.error("JS Dates and milliseconds are incompatible with world calendars",ne),le;if(ne=U.ms2DateTimeLocal(+ne),!ne&&le!==void 0)return le}else if(!U.isDateTime(ne,W))return c.error("unrecognized date",ne),le;return ne};var Y=/%\d?f/g,Z=/%h/g,z={1:"1",2:"1",3:"2",4:"2"};function q(ne,le,W,ce){ne=ne.replace(Y,function(pe){var he=Math.min(+pe.charAt(1)||6,6),be=(le/1e3%1+2).toFixed(he).substr(2).replace(/0+$/,"")||"0";return be});var de=new Date(Math.floor(le+.05));if(ne=ne.replace(Z,function(){return z[W("%q")(de)]}),C(ce))try{ne=y.getComponentMethod("calendars","worldCalFmt")(ne,le,ce)}catch{return"Invalid"}return W(ne)(de)}var X=[59,59.9,59.99,59.999,59.9999];function Q(ne,le){var W=u(ne+.05,m),ce=E(Math.floor(W/g),2)+":"+E(u(Math.floor(W/w),60),2);if(le!=="M"){h(le)||(le=0);var de=Math.min(u(ne/l,60),X[le]),pe=(100+de).toFixed(le).substr(1);le>0&&(pe=pe.replace(/0+$/,"").replace(/[\.]$/,"")),ce+=":"+pe}return ce}U.formatDate=function(ne,le,W,ce,de,pe){if(de=C(de)&&de,!le)if(W==="y")le=pe.year;else if(W==="m")le=pe.month;else if(W==="d")le=pe.dayMonth+`
`+pe.year;else return Q(ne,W)+`
`+q(pe.dayMonthYear,ne,ce,de);return q(le,ne,ce,de)};var ee=3*m;U.incrementMonth=function(ne,le,W){W=C(W)&&W;var ce=u(ne,m);if(ne=Math.round(ne-ce),W)try{var de=Math.round(ne/m)+T,pe=y.getComponentMethod("calendars","getCal")(W),he=pe.fromJD(de);return le%12?pe.add(he,le,"m"):pe.add(he,le/12,"y"),(he.toJD()-T)*m+ce}catch{c.error("invalid ms "+ne+" in calendar "+W)}var be=new Date(ne+ee);return be.setUTCMonth(be.getUTCMonth()+le)+ce-ee},U.findExactDates=function(ne,le){for(var W=0,ce=0,de=0,pe=0,he,be,Ee=C(le)&&y.getComponentMethod("calendars","getCal")(le),Te=0;Te<ne.length;Te++){if(be=ne[Te],!h(be)){pe++;continue}if(!(be%m))if(Ee)try{he=Ee.fromJD(be/m+T),he.day()===1?he.month()===1?W++:ce++:de++}catch{}else he=new Date(be),he.getUTCDate()===1?he.getUTCMonth()===0?W++:ce++:de++}ce+=W,de+=ce;var He=ne.length-pe;return{exactYears:W/He,exactMonths:ce/He,exactDays:de/He}}}}),pr=i({"src/lib/identity.js"(U,$){$.exports=function(c){return c}}}),zr=i({"src/lib/search.js"(U){var $=xe(),h=vr(),c=pr(),u=Ce().BADNUM,p=1e-9;U.findBin=function(l,T,y){if($(T.start))return y?Math.ceil((l-T.start)/T.size-p)-1:Math.floor((l-T.start)/T.size+p);var S=0,R=T.length,M=0,A=R>1?(T[R-1]-T[0])/(R-1):1,C,j;for(A>=0?j=y?v:m:j=y?w:g,l+=A*p*(y?-1:1)*(A>=0?1:-1);S<R&&M++<100;)C=Math.floor((S+R)/2),j(T[C],l)?S=C+1:R=C;return M>90&&h.log("Long binary search..."),S-1};function v(l,T){return l<T}function m(l,T){return l<=T}function g(l,T){return l>T}function w(l,T){return l>=T}U.sorterAsc=function(l,T){return l-T},U.sorterDes=function(l,T){return T-l},U.distinctVals=function(l){var T=l.slice();T.sort(U.sorterAsc);var y;for(y=T.length-1;y>-1&&T[y]===u;y--);for(var S=T[y]-T[0]||1,R=S/(y||1)/1e4,M=[],A,C=0;C<=y;C++){var j=T[C],b=j-A;A===void 0?(M.push(j),A=j):b>R&&(S=Math.min(S,b),M.push(j),A=j)}return{vals:M,minDiff:S}},U.roundUp=function(l,T,y){for(var S=0,R=T.length-1,M,A=0,C=y?0:1,j=y?1:0,b=y?Math.ceil:Math.floor;S<R&&A++<100;)M=b((S+R)/2),T[M]<=l?S=M+C:R=M-j;return T[S]},U.sort=function(l,T){for(var y=0,S=0,R=1;R<l.length;R++){var M=T(l[R],l[R-1]);if(M<0?y=1:M>0&&(S=1),y&&S)return l.sort(T)}return S?l:l.reverse()},U.findIndexOfMin=function(l,T){T=T||c;for(var y=1/0,S,R=0;R<l.length;R++){var M=T(l[R]);M<y&&(y=M,S=R)}return S}}}),sn=i({"src/lib/sort_object_keys.js"(U,$){$.exports=function(c){return Object.keys(c).sort()}}}),Yr=i({"src/lib/stats.js"(U){var $=xe(),h=qe().isArrayOrTypedArray;U.aggNums=function(c,u,p,v){var m,g;if((!v||v>p.length)&&(v=p.length),$(u)||(u=!1),h(p[0])){for(g=new Array(v),m=0;m<v;m++)g[m]=U.aggNums(c,u,p[m]);p=g}for(m=0;m<v;m++)$(u)?$(p[m])&&(u=c(+u,+p[m])):u=p[m];return u},U.len=function(c){return U.aggNums(function(u){return u+1},0,c)},U.mean=function(c,u){return u||(u=U.len(c)),U.aggNums(function(p,v){return p+v},0,c)/u},U.geometricMean=function(c,u){return u||(u=U.len(c)),Math.pow(U.aggNums(function(p,v){return p*v},1,c),1/u)},U.midRange=function(c){if(!(c===void 0||c.length===0))return(U.aggNums(Math.max,null,c)+U.aggNums(Math.min,null,c))/2},U.variance=function(c,u,p){return u||(u=U.len(c)),$(p)||(p=U.mean(c,u)),U.aggNums(function(v,m){return v+Math.pow(m-p,2)},0,c)/u},U.stdev=function(c,u,p){return Math.sqrt(U.variance(c,u,p))},U.median=function(c){var u=c.slice().sort();return U.interp(u,.5)},U.interp=function(c,u){if(!$(u))throw"n should be a finite number";if(u=u*c.length-.5,u<0)return c[0];if(u>c.length-1)return c[c.length-1];var p=u%1;return p*c[Math.ceil(u)]+(1-p)*c[Math.floor(u)]}}}),cn=i({"src/lib/angles.js"(U,$){var h=Rt(),c=h.mod,u=h.modHalf,p=Math.PI,v=2*p;function m(j){return j/180*p}function g(j){return j/p*180}function w(j){return Math.abs(j[1]-j[0])>v-1e-14}function l(j,b){return u(b-j,v)}function T(j,b){return Math.abs(l(j,b))}function y(j,b){if(w(b))return!0;var k,E;b[0]<b[1]?(k=b[0],E=b[1]):(k=b[1],E=b[0]),k=c(k,v),E=c(E,v),k>E&&(E+=v);var F=c(j,v),P=F+v;return F>=k&&F<=E||P>=k&&P<=E}function S(j,b,k,E){if(!y(b,E))return!1;var F,P;return k[0]<k[1]?(F=k[0],P=k[1]):(F=k[1],P=k[0]),j>=F&&j<=P}function R(j,b,k,E,F,P,J){F=F||0,P=P||0;var H=w([k,E]),Y,Z,z,q,X;H?(Y=0,Z=p,z=v):k<E?(Y=k,z=E):(Y=E,z=k),j<b?(q=j,X=b):(q=b,X=j);function Q(W,ce){return[W*Math.cos(ce)+F,P-W*Math.sin(ce)]}var ee=Math.abs(z-Y)<=p?0:1;function ne(W,ce,de){return"A"+[W,W]+" "+[0,ee,de]+" "+Q(W,ce)}var le;return H?q===null?le="M"+Q(X,Y)+ne(X,Z,0)+ne(X,z,0)+"Z":le="M"+Q(q,Y)+ne(q,Z,0)+ne(q,z,0)+"ZM"+Q(X,Y)+ne(X,Z,1)+ne(X,z,1)+"Z":q===null?(le="M"+Q(X,Y)+ne(X,z,0),J&&(le+="L0,0Z")):le="M"+Q(q,Y)+"L"+Q(X,Y)+ne(X,z,0)+"L"+Q(q,z)+ne(q,Y,1)+"Z",le}function M(j,b,k,E,F){return R(null,j,b,k,E,F,0)}function A(j,b,k,E,F){return R(null,j,b,k,E,F,1)}function C(j,b,k,E,F,P){return R(j,b,k,E,F,P,1)}$.exports={deg2rad:m,rad2deg:g,angleDelta:l,angleDist:T,isFullCircle:w,isAngleInsideSector:y,isPtInsideSector:S,pathArc:M,pathSector:A,pathAnnulus:C}}}),Mn=i({"src/lib/anchor_utils.js"(U){U.isLeftAnchor=function(h){return h.xanchor==="left"||h.xanchor==="auto"&&h.x<=1/3},U.isCenterAnchor=function(h){return h.xanchor==="center"||h.xanchor==="auto"&&h.x>1/3&&h.x<2/3},U.isRightAnchor=function(h){return h.xanchor==="right"||h.xanchor==="auto"&&h.x>=2/3},U.isTopAnchor=function(h){return h.yanchor==="top"||h.yanchor==="auto"&&h.y>=2/3},U.isMiddleAnchor=function(h){return h.yanchor==="middle"||h.yanchor==="auto"&&h.y>1/3&&h.y<2/3},U.isBottomAnchor=function(h){return h.yanchor==="bottom"||h.yanchor==="auto"&&h.y<=1/3}}}),un=i({"src/lib/geometry2d.js"(U){var $=Rt().mod;U.segmentsIntersect=h;function h(m,g,w,l,T,y,S,R){var M=w-m,A=T-m,C=S-T,j=l-g,b=y-g,k=R-y,E=M*k-C*j;if(E===0)return null;var F=(A*k-C*b)/E,P=(A*j-M*b)/E;return P<0||P>1||F<0||F>1?null:{x:m+M*F,y:g+j*F}}U.segmentDistance=function(g,w,l,T,y,S,R,M){if(h(g,w,l,T,y,S,R,M))return 0;var A=l-g,C=T-w,j=R-y,b=M-S,k=A*A+C*C,E=j*j+b*b,F=Math.min(c(A,C,k,y-g,S-w),c(A,C,k,R-g,M-w),c(j,b,E,g-y,w-S),c(j,b,E,l-y,T-S));return Math.sqrt(F)};function c(m,g,w,l,T){var y=l*m+T*g;if(y<0)return l*l+T*T;if(y>w){var S=l-m,R=T-g;return S*S+R*R}else{var M=l*g-T*m;return M*M/w}}var u,p,v;U.getTextLocation=function(g,w,l,T){if((g!==p||T!==v)&&(u={},p=g,v=T),u[l])return u[l];var y=g.getPointAtLength($(l-T/2,w)),S=g.getPointAtLength($(l+T/2,w)),R=Math.atan((S.y-y.y)/(S.x-y.x)),M=g.getPointAtLength($(l,w)),A=(M.x*4+y.x+S.x)/6,C=(M.y*4+y.y+S.y)/6,j={x:A,y:C,theta:R};return u[l]=j,j},U.clearLocationCache=function(){p=null},U.getVisibleSegment=function(g,w,l){var T=w.left,y=w.right,S=w.top,R=w.bottom,M=0,A=g.getTotalLength(),C=A,j,b;function k(F){var P=g.getPointAtLength(F);F===0?j=P:F===A&&(b=P);var J=P.x<T?T-P.x:P.x>y?P.x-y:0,H=P.y<S?S-P.y:P.y>R?P.y-R:0;return Math.sqrt(J*J+H*H)}for(var E=k(M);E;){if(M+=E+l,M>C)return;E=k(M)}for(E=k(C);E;){if(C-=E+l,M>C)return;E=k(C)}return{min:M,max:C,len:C-M,total:A,isClosed:M===0&&C===A&&Math.abs(j.x-b.x)<.1&&Math.abs(j.y-b.y)<.1}},U.findPointOnPath=function(g,w,l,T){T=T||{};for(var y=T.pathLength||g.getTotalLength(),S=T.tolerance||.001,R=T.iterationLimit||30,M=g.getPointAtLength(0)[l]>g.getPointAtLength(y)[l]?-1:1,A=0,C=0,j=y,b,k,E;A<R;){if(b=(C+j)/2,k=g.getPointAtLength(b),E=k[l]-w,Math.abs(E)<S)return k;M*E>0?j=b:C=b,A++}return k}}}),rn=i({"src/lib/throttle.js"(U){var $={};U.throttle=function(u,p,v){var m=$[u],g=Date.now();if(!m){for(var w in $)$[w].ts<g-6e4&&delete $[w];m=$[u]={ts:0,timer:null}}h(m);function l(){v(),m.ts=Date.now(),m.onDone&&(m.onDone(),m.onDone=null)}if(g>m.ts+p){l();return}m.timer=setTimeout(function(){l(),m.timer=null},p)},U.done=function(c){var u=$[c];return!u||!u.timer?Promise.resolve():new Promise(function(p){var v=u.onDone;u.onDone=function(){v&&v(),p(),u.onDone=null}})},U.clear=function(c){if(c)h($[c]),delete $[c];else for(var u in $)U.clear(u)};function h(c){c&&c.timer!==null&&(clearTimeout(c.timer),c.timer=null)}}}),en=i({"src/lib/clear_responsive.js"(U,$){$.exports=function(c){c._responsiveChartHandler&&(window.removeEventListener("resize",c._responsiveChartHandler),delete c._responsiveChartHandler)}}}),Wn=i({"node_modules/is-mobile/index.js"(U,$){$.exports=p,$.exports.isMobile=p,$.exports.default=p;var h=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,c=/CrOS/,u=/android|ipad|playbook|silk/i;function p(v){v||(v={});let m=v.ua;if(!m&&typeof navigator<"u"&&(m=navigator.userAgent),m&&m.headers&&typeof m.headers["user-agent"]=="string"&&(m=m.headers["user-agent"]),typeof m!="string")return!1;let g=h.test(m)&&!c.test(m)||!!v.tablet&&u.test(m);return!g&&v.tablet&&v.featureDetect&&navigator&&navigator.maxTouchPoints>1&&m.indexOf("Macintosh")!==-1&&m.indexOf("Safari")!==-1&&(g=!0),g}}}),Kn=i({"src/lib/preserve_drawing_buffer.js"(U,$){var h=xe(),c=Wn();$.exports=function(v){var m;if(v&&v.hasOwnProperty("userAgent")?m=v.userAgent:m=u(),typeof m!="string")return!0;var g=c({ua:{headers:{"user-agent":m}},tablet:!0,featureDetect:!1});if(!g)for(var w=m.split(" "),l=1;l<w.length;l++){var T=w[l];if(T.indexOf("Safari")!==-1)for(var y=l-1;y>-1;y--){var S=w[y];if(S.substr(0,8)==="Version/"){var R=S.substr(8).split(".")[0];if(h(R)&&(R=+R),R>=13)return!0}}}return g};function u(){var p;return typeof navigator<"u"&&(p=navigator.userAgent),p&&p.headers&&typeof p.headers["user-agent"]=="string"&&(p=p.headers["user-agent"]),p}}}),ki=i({"src/lib/make_trace_groups.js"(U,$){var h=d();$.exports=function(u,p,v){var m=u.selectAll("g."+v.replace(/\s/g,".")).data(p,function(w){return w[0].trace.uid});m.exit().remove(),m.enter().append("g").attr("class",v),m.order();var g=u.classed("rangeplot")?"nodeRangePlot3":"node3";return m.each(function(w){w[0][g]=h.select(this)}),m}}}),Ci=i({"src/lib/localize.js"(U,$){var h=mn();$.exports=function(u,p){for(var v=u._context.locale,m=0;m<2;m++){for(var g=u._context.locales,w=0;w<2;w++){var l=(g[v]||{}).dictionary;if(l){var T=l[p];if(T)return T}g=h.localeRegistry}var y=v.split("-")[0];if(y===v)break;v=y}return p}}}),Wi=i({"src/lib/filter_unique.js"(U,$){$.exports=function(c){for(var u={},p=[],v=0,m=0;m<c.length;m++){var g=c[m];u[g]!==1&&(u[g]=1,p[v++]=g)}return p}}}),oa=i({"src/lib/filter_visible.js"(U,$){$.exports=function(v){for(var m=u(v)?c:h,g=[],w=0;w<v.length;w++){var l=v[w];m(l)&&g.push(l)}return g};function h(p){return p.visible===!0}function c(p){var v=p[0].trace;return v.visible===!0&&v._length!==0}function u(p){return Array.isArray(p)&&Array.isArray(p[0])&&p[0][0]&&p[0][0].trace}}}),Gi=i({"src/lib/increment.js"(U,$){$.exports=function(c,u){if(!u)return c;var p=1/Math.abs(u),v=p>1?(p*c+p*u)/p:c+u,m=String(v).length;if(m>16){var g=String(u).length,w=String(c).length;if(m>=w+g){var l=parseFloat(v).toPrecision(12);l.indexOf("e+")===-1&&(v=+l)}}return v}}}),Ks=i({"src/lib/clean_number.js"(U,$){var h=xe(),c=Ce().BADNUM,u=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(v){return typeof v=="string"&&(v=v.replace(u,"")),h(v)?Number(v):c}}}),kr=i({"src/lib/index.js"(U,$){var h=d(),c=N().utcFormat,u=I().format,p=xe(),v=Ce(),m=v.FP_SAFE,g=-m,w=v.BADNUM,l=$.exports={};l.adjustFormat=function(re){return!re||/^\d[.]\df/.test(re)||/[.]\d%/.test(re)?re:re==="0.f"?"~f":/^\d%/.test(re)?"~%":/^\ds/.test(re)?"~s":!/^[~,.0$]/.test(re)&&/[&fps]/.test(re)?"~"+re:re};var T={};l.warnBadFormat=function(V){var re=String(V);T[re]||(T[re]=1,l.warn('encountered bad format: "'+re+'"'))},l.noFormat=function(V){return String(V)},l.numberFormat=function(V){var re;try{re=u(l.adjustFormat(V))}catch{return l.warnBadFormat(V),l.noFormat}return re},l.nestedProperty=ze(),l.keyedContainer=Oe(),l.relativeAttr=We(),l.isPlainObject=Ye(),l.toLogRange=ot(),l.relinkPrivateKeys=st();var y=qe();l.isArrayBuffer=y.isArrayBuffer,l.isTypedArray=y.isTypedArray,l.isArrayOrTypedArray=y.isArrayOrTypedArray,l.isArray1D=y.isArray1D,l.ensureArray=y.ensureArray,l.concat=y.concat,l.maxRowLength=y.maxRowLength,l.minRowLength=y.minRowLength;var S=Rt();l.mod=S.mod,l.modHalf=S.modHalf;var R=lr();l.valObjectMeta=R.valObjectMeta,l.coerce=R.coerce,l.coerce2=R.coerce2,l.coerceFont=R.coerceFont,l.coercePattern=R.coercePattern,l.coerceHoverinfo=R.coerceHoverinfo,l.coerceSelectionMarkerOpacity=R.coerceSelectionMarkerOpacity,l.validate=R.validate;var M=Bs();l.dateTime2ms=M.dateTime2ms,l.isDateTime=M.isDateTime,l.ms2DateTime=M.ms2DateTime,l.ms2DateTimeLocal=M.ms2DateTimeLocal,l.cleanDate=M.cleanDate,l.isJSDate=M.isJSDate,l.formatDate=M.formatDate,l.incrementMonth=M.incrementMonth,l.dateTick0=M.dateTick0,l.dfltRange=M.dfltRange,l.findExactDates=M.findExactDates,l.MIN_MS=M.MIN_MS,l.MAX_MS=M.MAX_MS;var A=zr();l.findBin=A.findBin,l.sorterAsc=A.sorterAsc,l.sorterDes=A.sorterDes,l.distinctVals=A.distinctVals,l.roundUp=A.roundUp,l.sort=A.sort,l.findIndexOfMin=A.findIndexOfMin,l.sortObjectKeys=sn();var C=Yr();l.aggNums=C.aggNums,l.len=C.len,l.mean=C.mean,l.geometricMean=C.geometricMean,l.median=C.median,l.midRange=C.midRange,l.variance=C.variance,l.stdev=C.stdev,l.interp=C.interp;var j=ti();l.init2dArray=j.init2dArray,l.transposeRagged=j.transposeRagged,l.dot=j.dot,l.translationMatrix=j.translationMatrix,l.rotationMatrix=j.rotationMatrix,l.rotationXYMatrix=j.rotationXYMatrix,l.apply3DTransform=j.apply3DTransform,l.apply2DTransform=j.apply2DTransform,l.apply2DTransform2=j.apply2DTransform2,l.convertCssMatrix=j.convertCssMatrix,l.inverseTransformMatrix=j.inverseTransformMatrix;var b=cn();l.deg2rad=b.deg2rad,l.rad2deg=b.rad2deg,l.angleDelta=b.angleDelta,l.angleDist=b.angleDist,l.isFullCircle=b.isFullCircle,l.isAngleInsideSector=b.isAngleInsideSector,l.isPtInsideSector=b.isPtInsideSector,l.pathArc=b.pathArc,l.pathSector=b.pathSector,l.pathAnnulus=b.pathAnnulus;var k=Mn();l.isLeftAnchor=k.isLeftAnchor,l.isCenterAnchor=k.isCenterAnchor,l.isRightAnchor=k.isRightAnchor,l.isTopAnchor=k.isTopAnchor,l.isMiddleAnchor=k.isMiddleAnchor,l.isBottomAnchor=k.isBottomAnchor;var E=un();l.segmentsIntersect=E.segmentsIntersect,l.segmentDistance=E.segmentDistance,l.getTextLocation=E.getTextLocation,l.clearLocationCache=E.clearLocationCache,l.getVisibleSegment=E.getVisibleSegment,l.findPointOnPath=E.findPointOnPath;var F=It();l.extendFlat=F.extendFlat,l.extendDeep=F.extendDeep,l.extendDeepAll=F.extendDeepAll,l.extendDeepNoArrays=F.extendDeepNoArrays;var P=vr();l.log=P.log,l.warn=P.warn,l.error=P.error;var J=Jt();l.counterRegex=J.counter;var H=rn();l.throttle=H.throttle,l.throttleDone=H.done,l.clearThrottle=H.clear;var Y=Jn();l.getGraphDiv=Y.getGraphDiv,l.isPlotDiv=Y.isPlotDiv,l.removeElement=Y.removeElement,l.addStyleRule=Y.addStyleRule,l.addRelatedStyleRule=Y.addRelatedStyleRule,l.deleteRelatedStyleRule=Y.deleteRelatedStyleRule,l.setStyleOnHover=Y.setStyleOnHover,l.getFullTransformMatrix=Y.getFullTransformMatrix,l.getElementTransformMatrix=Y.getElementTransformMatrix,l.getElementAndAncestors=Y.getElementAndAncestors,l.equalDomRects=Y.equalDomRects,l.clearResponsive=en(),l.preserveDrawingBuffer=Kn(),l.makeTraceGroups=ki(),l._=Ci(),l.notifier=Sr(),l.filterUnique=Wi(),l.filterVisible=oa(),l.pushUnique=yr(),l.increment=Gi(),l.cleanNumber=Ks(),l.ensureNumber=function(re){return p(re)?(re=Number(re),re>m||re<g?w:re):w},l.isIndex=function(V,re){return re!==void 0&&V>=re?!1:p(V)&&V>=0&&V%1===0},l.noop=Bt(),l.identity=pr(),l.repeat=function(V,re){for(var D=new Array(re),B=0;B<re;B++)D[B]=V;return D},l.swapAttrs=function(V,re,D,B){D||(D="x"),B||(B="y");for(var oe=0;oe<re.length;oe++){var ie=re[oe],ge=l.nestedProperty(V,ie.replace("?",D)),_e=l.nestedProperty(V,ie.replace("?",B)),Se=ge.get();ge.set(_e.get()),_e.set(Se)}},l.raiseToTop=function(re){re.parentNode.appendChild(re)},l.cancelTransition=function(V){return V.transition().duration(0)},l.constrain=function(V,re,D){return re>D?Math.max(D,Math.min(re,V)):Math.max(re,Math.min(D,V))},l.bBoxIntersect=function(V,re,D){return D=D||0,V.left<=re.right+D&&re.left<=V.right+D&&V.top<=re.bottom+D&&re.top<=V.bottom+D},l.simpleMap=function(V,re,D,B,oe){for(var ie=V.length,ge=new Array(ie),_e=0;_e<ie;_e++)ge[_e]=re(V[_e],D,B,oe);return ge},l.randstr=function V(re,D,B,oe){if(B||(B=16),D===void 0&&(D=24),D<=0)return"0";var ie=Math.log(Math.pow(2,D))/Math.log(B),ge="",_e,Se,De;for(_e=2;ie===1/0;_e*=2)ie=Math.log(Math.pow(2,D/_e))/Math.log(B)*_e;var Ge=ie-Math.floor(ie);for(_e=0;_e<Math.floor(ie);_e++)De=Math.floor(Math.random()*B).toString(B),ge=De+ge;Ge&&(Se=Math.pow(B,Ge),De=Math.floor(Math.random()*Se).toString(B),ge=De+ge);var Je=parseInt(ge,B);return re&&re[ge]||Je!==1/0&&Je>=Math.pow(2,D)?oe>10?(l.warn("randstr failed uniqueness"),ge):V(re,D,B,(oe||0)+1):ge},l.OptionControl=function(V,re){V||(V={}),re||(re="opt");var D={};return D.optionList=[],D._newoption=function(B){B[re]=V,D[B.name]=B,D.optionList.push(B)},D["_"+re]=V,D},l.smooth=function(V,re){if(re=Math.round(re)||0,re<2)return V;var D=V.length,B=2*D,oe=2*re-1,ie=new Array(oe),ge=new Array(D),_e,Se,De,Ge;for(_e=0;_e<oe;_e++)ie[_e]=(1-Math.cos(Math.PI*(_e+1)/re))/(2*re);for(_e=0;_e<D;_e++){for(Ge=0,Se=0;Se<oe;Se++)De=_e+Se+1-re,De<-D?De-=B*Math.round(De/B):De>=B&&(De-=B*Math.floor(De/B)),De<0?De=-1-De:De>=D&&(De=B-1-De),Ge+=V[De]*ie[Se];ge[_e]=Ge}return ge},l.syncOrAsync=function(V,re,D){var B,oe;function ie(){return l.syncOrAsync(V,re,D)}for(;V.length;)if(oe=V.splice(0,1)[0],B=oe(re),B&&B.then)return B.then(ie);return D&&D(re)},l.stripTrailingSlash=function(V){return V.substr(-1)==="/"?V.substr(0,V.length-1):V},l.noneOrAll=function(V,re,D){if(V){var B=!1,oe=!0,ie,ge;for(ie=0;ie<D.length;ie++)ge=V[D[ie]],ge!=null?B=!0:oe=!1;if(B&&!oe)for(ie=0;ie<D.length;ie++)V[D[ie]]=re[D[ie]]}},l.mergeArray=function(V,re,D,B){var oe=typeof B=="function";if(l.isArrayOrTypedArray(V))for(var ie=Math.min(V.length,re.length),ge=0;ge<ie;ge++){var _e=V[ge];re[ge][D]=oe?B(_e):_e}},l.mergeArrayCastPositive=function(V,re,D){return l.mergeArray(V,re,D,function(B){var oe=+B;return isFinite(oe)&&oe>0?oe:0})},l.fillArray=function(V,re,D,B){if(B=B||l.identity,l.isArrayOrTypedArray(V))for(var oe=0;oe<re.length;oe++)re[oe][D]=B(V[oe])},l.castOption=function(V,re,D,B){B=B||l.identity;var oe=l.nestedProperty(V,D).get();return l.isArrayOrTypedArray(oe)?Array.isArray(re)&&l.isArrayOrTypedArray(oe[re[0]])?B(oe[re[0]][re[1]]):B(oe[re]):oe},l.extractOption=function(V,re,D,B){if(D in V)return V[D];var oe=l.nestedProperty(re,B).get();if(!Array.isArray(oe))return oe};function Z(V){var re={};for(var D in V)for(var B=V[D],oe=0;oe<B.length;oe++)re[B[oe]]=+D;return re}l.tagSelected=function(V,re,D){var B=re.selectedpoints,oe=re._indexToPoints,ie;oe&&(ie=Z(oe));function ge(Je){return Je!==void 0&&Je<V.length}for(var _e=0;_e<B.length;_e++){var Se=B[_e];if(l.isIndex(Se)||l.isArrayOrTypedArray(Se)&&l.isIndex(Se[0])&&l.isIndex(Se[1])){var De=ie?ie[Se]:Se,Ge=D?D[De]:De;ge(Ge)&&(V[Ge].selected=1)}}},l.selIndices2selPoints=function(V){var re=V.selectedpoints,D=V._indexToPoints;if(D){for(var B=Z(D),oe=[],ie=0;ie<re.length;ie++){var ge=re[ie];if(l.isIndex(ge)){var _e=B[ge];l.isIndex(_e)&&oe.push(_e)}}return oe}else return re},l.getTargetArray=function(V,re){var D=re.target;if(typeof D=="string"&&D){var B=l.nestedProperty(V,D).get();return l.isArrayOrTypedArray(B)?B:!1}else if(l.isArrayOrTypedArray(D))return D;return!1};function z(V,re,D){var B={};typeof re!="object"&&(re={});var oe=D==="pieLike"?-1:3,ie=Object.keys(V),ge,_e,Se;for(ge=0;ge<ie.length;ge++)_e=ie[ge],Se=V[_e],!(_e.charAt(0)==="_"||typeof Se=="function")&&(_e==="module"?B[_e]=Se:Array.isArray(Se)?_e==="colorscale"||oe===-1?B[_e]=Se.slice():B[_e]=Se.slice(0,oe):l.isTypedArray(Se)?oe===-1?B[_e]=Se.subarray():B[_e]=Se.subarray(0,oe):Se&&typeof Se=="object"?B[_e]=z(V[_e],re[_e],D):B[_e]=Se);for(ie=Object.keys(re),ge=0;ge<ie.length;ge++)_e=ie[ge],Se=re[_e],(typeof Se!="object"||!(_e in B)||typeof B[_e]!="object")&&(B[_e]=Se);return B}l.minExtend=z,l.titleCase=function(V){return V.charAt(0).toUpperCase()+V.substr(1)},l.containsAny=function(V,re){for(var D=0;D<re.length;D++)if(V.indexOf(re[D])!==-1)return!0;return!1};var q=/Version\/[\d\.]+.*Safari/;l.isSafari=function(){return q.test(window.navigator.userAgent)};var X=/iPad|iPhone|iPod/;l.isIOS=function(){return X.test(window.navigator.userAgent)};var Q=/Firefox\/(\d+)\.\d+/;l.getFirefoxVersion=function(){var V=Q.exec(window.navigator.userAgent);if(V&&V.length===2){var re=parseInt(V[1]);if(!isNaN(re))return re}return null},l.isD3Selection=function(V){return V instanceof h.selection},l.ensureSingle=function(V,re,D,B){var oe=V.select(re+(D?"."+D:""));if(oe.size())return oe;var ie=V.append(re);return D&&ie.classed(D,!0),B&&ie.call(B),ie},l.ensureSingleById=function(V,re,D,B){var oe=V.select(re+"#"+D);if(oe.size())return oe;var ie=V.append(re).attr("id",D);return B&&ie.call(B),ie},l.objectFromPath=function(V,re){for(var D=V.split("."),B,oe=B={},ie=0;ie<D.length;ie++){var ge=D[ie],_e=null,Se=D[ie].match(/(.*)\[([0-9]+)\]/);Se?(ge=Se[1],_e=Se[2],B=B[ge]=[],ie===D.length-1?B[_e]=re:B[_e]={},B=B[_e]):(ie===D.length-1?B[ge]=re:B[ge]={},B=B[ge])}return oe};var ee=/^([^\[\.]+)\.(.+)?/,ne=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function le(V){return V.slice(0,2)==="__"}l.expandObjectPaths=function(V){var re,D,B,oe,ie,ge,_e;if(typeof V=="object"&&!Array.isArray(V)){for(D in V)if(V.hasOwnProperty(D))if(re=D.match(ee)){if(oe=V[D],B=re[1],le(B))continue;delete V[D],V[B]=l.extendDeepNoArrays(V[B]||{},l.objectFromPath(D,l.expandObjectPaths(oe))[B])}else if(re=D.match(ne)){if(oe=V[D],B=re[1],le(B))continue;if(ie=parseInt(re[2]),delete V[D],V[B]=V[B]||[],re[3]===".")_e=re[4],ge=V[B][ie]=V[B][ie]||{},l.extendDeepNoArrays(ge,l.objectFromPath(_e,l.expandObjectPaths(oe)));else{if(le(B))continue;V[B][ie]=l.expandObjectPaths(oe)}}else{if(le(D))continue;V[D]=l.expandObjectPaths(V[D])}}return V},l.numSeparate=function(V,re,D){if(D||(D=!1),typeof re!="string"||re.length===0)throw new Error("Separator string required for formatting!");typeof V=="number"&&(V=String(V));var B=/(\d+)(\d{3})/,oe=re.charAt(0),ie=re.charAt(1),ge=V.split("."),_e=ge[0],Se=ge.length>1?oe+ge[1]:"";if(ie&&(ge.length>1||_e.length>4||D))for(;B.test(_e);)_e=_e.replace(B,"$1"+ie+"$2");return _e+Se},l.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var W=/^\w*$/;l.templateString=function(V,re){var D={};return V.replace(l.TEMPLATE_STRING_REGEX,function(B,oe){var ie;return W.test(oe)?ie=re[oe]:(D[oe]=D[oe]||l.nestedProperty(re,oe).get,ie=D[oe](!0)),ie!==void 0?ie:""})};var ce={max:10,count:0,name:"hovertemplate"};l.hovertemplateString=function(){return Te.apply(ce,arguments)};var de={max:10,count:0,name:"texttemplate"};l.texttemplateString=function(){return Te.apply(de,arguments)};var pe=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function he(V){var re=V.match(pe);return re?{key:re[1],op:re[2],number:Number(re[3])}:{key:V,op:null,number:null}}var be={max:10,count:0,name:"texttemplate",parseMultDiv:!0};l.texttemplateStringForShapes=function(){return Te.apply(be,arguments)};var Ee=/^[:|\|]/;function Te(V,re,D){var B=this,oe=arguments;return re||(re={}),V.replace(l.TEMPLATE_STRING_REGEX,function(ie,ge,_e){var Se=ge==="xother"||ge==="yother",De=ge==="_xother"||ge==="_yother",Ge=ge==="_xother_"||ge==="_yother_",Je=ge==="xother_"||ge==="yother_",yt=Se||De||Je||Ge,ut=ge;(De||Ge)&&(ut=ut.substring(1)),(Je||Ge)&&(ut=ut.substring(0,ut.length-1));var vt=null,Ae=null;if(B.parseMultDiv){var Fe=he(ut);ut=Fe.key,vt=Fe.op,Ae=Fe.number}var ke;if(yt){if(ke=re[ut],ke===void 0)return""}else{var Be,et;for(et=3;et<oe.length;et++)if(Be=oe[et],!!Be){if(Be.hasOwnProperty(ut)){ke=Be[ut];break}if(W.test(ut)||(ke=l.nestedProperty(Be,ut).get(!0)),ke!==void 0)break}}if(ke!==void 0&&(vt==="*"&&(ke*=Ae),vt==="/"&&(ke/=Ae)),ke===void 0&&B)return B.count<B.max&&(l.warn("Variable '"+ut+"' in "+B.name+" could not be found!"),ke=ie),B.count===B.max&&l.warn("Too many "+B.name+" warnings - additional warnings will be suppressed"),B.count++,ie;if(_e){var ht;if(_e[0]===":"&&(ht=D?D.numberFormat:l.numberFormat,ke!==""&&(ke=ht(_e.replace(Ee,""))(ke))),_e[0]==="|"){ht=D?D.timeFormat:c;var jt=l.dateTime2ms(ke);ke=l.formatDate(jt,_e.replace(Ee,""),!1,ht)}}else{var At=ut+"Label";re.hasOwnProperty(At)&&(ke=re[At])}return yt&&(ke="("+ke+")",(De||Ge)&&(ke=" "+ke),(Je||Ge)&&(ke=ke+" ")),ke})}var He=48,te=57;l.subplotSort=function(V,re){for(var D=Math.min(V.length,re.length)+1,B=0,oe=0,ie=0;ie<D;ie++){var ge=V.charCodeAt(ie)||0,_e=re.charCodeAt(ie)||0,Se=ge>=He&&ge<=te,De=_e>=He&&_e<=te;if(Se&&(B=10*B+ge-He),De&&(oe=10*oe+_e-He),!Se||!De){if(B!==oe)return B-oe;if(ge!==_e)return ge-_e}}return oe-B};var ae=2e9;l.seedPseudoRandom=function(){ae=2e9},l.pseudoRandom=function(){var V=ae;return ae=(69069*ae+1)%4294967296,Math.abs(ae-V)<429496729?l.pseudoRandom():ae/4294967296},l.fillText=function(V,re,D){var B=Array.isArray(D)?function(ge){D.push(ge)}:function(ge){D.text=ge},oe=l.extractOption(V,re,"htx","hovertext");if(l.isValidTextValue(oe))return B(oe);var ie=l.extractOption(V,re,"tx","text");if(l.isValidTextValue(ie))return B(ie)},l.isValidTextValue=function(V){return V||V===0},l.formatPercent=function(V,re){re=re||0;for(var D=(Math.round(100*V*Math.pow(10,re))*Math.pow(.1,re)).toFixed(re)+"%",B=0;B<re;B++)D.indexOf(".")!==-1&&(D=D.replace("0%","%"),D=D.replace(".%","%"));return D},l.isHidden=function(V){var re=window.getComputedStyle(V).display;return!re||re==="none"},l.strTranslate=function(V,re){return V||re?"translate("+V+","+re+")":""},l.strRotate=function(V){return V?"rotate("+V+")":""},l.strScale=function(V){return V!==1?"scale("+V+")":""},l.getTextTransform=function(V){var re=V.noCenter,D=V.textX,B=V.textY,oe=V.targetX,ie=V.targetY,ge=V.anchorX||0,_e=V.anchorY||0,Se=V.rotate,De=V.scale;return De?De>1&&(De=1):De=0,l.strTranslate(oe-De*(D+ge),ie-De*(B+_e))+l.strScale(De)+(Se?"rotate("+Se+(re?"":" "+D+" "+B)+")":"")},l.setTransormAndDisplay=function(V,re){V.attr("transform",l.getTextTransform(re)),V.style("display",re.scale?null:"none")},l.ensureUniformFontSize=function(V,re){var D=l.extendFlat({},re);return D.size=Math.max(re.size,V._fullLayout.uniformtext.minsize||0),D},l.join2=function(V,re,D){var B=V.length;return B>1?V.slice(0,-1).join(re)+D+V[B-1]:V.join(re)},l.bigFont=function(V){return Math.round(1.2*V)};var G=l.getFirefoxVersion(),K=G!==null&&G<86;l.getPositionFromD3Event=function(){return K?[h.event.layerX,h.event.layerY]:[h.event.offsetX,h.event.offsetY]}}}),Hs=i({"build/plotcss.js"(){var U=kr(),$={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(c in $)h=c.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),U.addStyleRule(h,$[c]);var h,c}}),eo=i({"node_modules/is-browser/client.js"(U,$){$.exports=!0}}),uo=i({"node_modules/has-hover/index.js"(U,$){var h=eo(),c;typeof window.matchMedia=="function"?c=!window.matchMedia("(hover: none)").matches:c=h,$.exports=c}}),js=i({"node_modules/events/events.js"(U,$){var h=typeof Reflect=="object"?Reflect:null,c=h&&typeof h.apply=="function"?h.apply:function(P,J,H){return Function.prototype.apply.call(P,J,H)},u;h&&typeof h.ownKeys=="function"?u=h.ownKeys:Object.getOwnPropertySymbols?u=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:u=function(P){return Object.getOwnPropertyNames(P)};function p(F){console&&console.warn&&console.warn(F)}var v=Number.isNaN||function(P){return P!==P};function m(){m.init.call(this)}$.exports=m,$.exports.once=b,m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var g=10;function w(F){if(typeof F!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof F)}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(F){if(typeof F!="number"||F<0||v(F))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+F+".");g=F}}),m.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||v(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function l(F){return F._maxListeners===void 0?m.defaultMaxListeners:F._maxListeners}m.prototype.getMaxListeners=function(){return l(this)},m.prototype.emit=function(P){for(var J=[],H=1;H<arguments.length;H++)J.push(arguments[H]);var Y=P==="error",Z=this._events;if(Z!==void 0)Y=Y&&Z.error===void 0;else if(!Y)return!1;if(Y){var z;if(J.length>0&&(z=J[0]),z instanceof Error)throw z;var q=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw q.context=z,q}var X=Z[P];if(X===void 0)return!1;if(typeof X=="function")c(X,this,J);else for(var Q=X.length,ee=A(X,Q),H=0;H<Q;++H)c(ee[H],this,J);return!0};function T(F,P,J,H){var Y,Z,z;if(w(J),Z=F._events,Z===void 0?(Z=F._events=Object.create(null),F._eventsCount=0):(Z.newListener!==void 0&&(F.emit("newListener",P,J.listener?J.listener:J),Z=F._events),z=Z[P]),z===void 0)z=Z[P]=J,++F._eventsCount;else if(typeof z=="function"?z=Z[P]=H?[J,z]:[z,J]:H?z.unshift(J):z.push(J),Y=l(F),Y>0&&z.length>Y&&!z.warned){z.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=F,q.type=P,q.count=z.length,p(q)}return F}m.prototype.addListener=function(P,J){return T(this,P,J,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(P,J){return T(this,P,J,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(F,P,J){var H={fired:!1,wrapFn:void 0,target:F,type:P,listener:J},Y=y.bind(H);return Y.listener=J,H.wrapFn=Y,Y}m.prototype.once=function(P,J){return w(J),this.on(P,S(this,P,J)),this},m.prototype.prependOnceListener=function(P,J){return w(J),this.prependListener(P,S(this,P,J)),this},m.prototype.removeListener=function(P,J){var H,Y,Z,z,q;if(w(J),Y=this._events,Y===void 0)return this;if(H=Y[P],H===void 0)return this;if(H===J||H.listener===J)--this._eventsCount===0?this._events=Object.create(null):(delete Y[P],Y.removeListener&&this.emit("removeListener",P,H.listener||J));else if(typeof H!="function"){for(Z=-1,z=H.length-1;z>=0;z--)if(H[z]===J||H[z].listener===J){q=H[z].listener,Z=z;break}if(Z<0)return this;Z===0?H.shift():C(H,Z),H.length===1&&(Y[P]=H[0]),Y.removeListener!==void 0&&this.emit("removeListener",P,q||J)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(P){var J,H,Y;if(H=this._events,H===void 0)return this;if(H.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):H[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete H[P]),this;if(arguments.length===0){var Z=Object.keys(H),z;for(Y=0;Y<Z.length;++Y)z=Z[Y],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(J=H[P],typeof J=="function")this.removeListener(P,J);else if(J!==void 0)for(Y=J.length-1;Y>=0;Y--)this.removeListener(P,J[Y]);return this};function R(F,P,J){var H=F._events;if(H===void 0)return[];var Y=H[P];return Y===void 0?[]:typeof Y=="function"?J?[Y.listener||Y]:[Y]:J?j(Y):A(Y,Y.length)}m.prototype.listeners=function(P){return R(this,P,!0)},m.prototype.rawListeners=function(P){return R(this,P,!1)},m.listenerCount=function(F,P){return typeof F.listenerCount=="function"?F.listenerCount(P):M.call(F,P)},m.prototype.listenerCount=M;function M(F){var P=this._events;if(P!==void 0){var J=P[F];if(typeof J=="function")return 1;if(J!==void 0)return J.length}return 0}m.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function A(F,P){for(var J=new Array(P),H=0;H<P;++H)J[H]=F[H];return J}function C(F,P){for(;P+1<F.length;P++)F[P]=F[P+1];F.pop()}function j(F){for(var P=new Array(F.length),J=0;J<P.length;++J)P[J]=F[J].listener||F[J];return P}function b(F,P){return new Promise(function(J,H){function Y(z){F.removeListener(P,Z),H(z)}function Z(){typeof F.removeListener=="function"&&F.removeListener("error",Y),J([].slice.call(arguments))}E(F,P,Z,{once:!0}),P!=="error"&&k(F,Y,{once:!0})})}function k(F,P,J){typeof F.on=="function"&&E(F,"error",P,J)}function E(F,P,J,H){if(typeof F.on=="function")H.once?F.once(P,J):F.on(P,J);else if(typeof F.addEventListener=="function")F.addEventListener(P,function Y(Z){H.once&&F.removeEventListener(P,Y),J(Z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof F)}}}),Co=i({"src/lib/events.js"(U,$){var h=js().EventEmitter,c={init:function(u){if(u._ev instanceof h)return u;var p=new h,v=new h;return u._ev=p,u._internalEv=v,u.on=p.on.bind(p),u.once=p.once.bind(p),u.removeListener=p.removeListener.bind(p),u.removeAllListeners=p.removeAllListeners.bind(p),u._internalOn=v.on.bind(v),u._internalOnce=v.once.bind(v),u._removeInternalListener=v.removeListener.bind(v),u._removeAllInternalListeners=v.removeAllListeners.bind(v),u.emit=function(m,g){p.emit(m,g),v.emit(m,g)},u},triggerHandler:function(u,p,v){var m,g=u._ev;if(!g)return;var w=g._events[p];if(!w)return;function l(y){if(y.listener){if(g.removeListener(p,y.listener),!y.fired)return y.fired=!0,y.listener.apply(g,[v])}else return y.apply(g,[v])}w=Array.isArray(w)?w:[w];var T;for(T=0;T<w.length-1;T++)l(w[T]);return m=l(w[T]),m},purge:function(u){return delete u._ev,delete u.on,delete u.once,delete u.removeListener,delete u.removeAllListeners,delete u.emit,delete u._ev,delete u._internalEv,delete u._internalOn,delete u._internalOnce,delete u._removeInternalListener,delete u._removeAllInternalListeners,u}};$.exports=c}}),us=i({"src/lib/queue.js"(U,$){var h=kr(),c=wr().dfltConfig;function u(v,m){for(var g=[],w,l=0;l<m.length;l++)w=m[l],w===v?g[l]=w:typeof w=="object"?g[l]=Array.isArray(w)?h.extendDeep([],w):h.extendDeepAll({},w):g[l]=w;return g}var p={};p.add=function(v,m,g,w,l){var T,y;if(v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},y=v.undoQueue.index,v.autoplay){v.undoQueue.inSequence||(v.autoplay=!1);return}!v.undoQueue.sequence||v.undoQueue.beginSequence?(T={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},v.undoQueue.queue.splice(y,v.undoQueue.queue.length-y,T),v.undoQueue.index+=1):T=v.undoQueue.queue[y-1],v.undoQueue.beginSequence=!1,T&&(T.undo.calls.unshift(m),T.undo.args.unshift(g),T.redo.calls.push(w),T.redo.args.push(l)),v.undoQueue.queue.length>c.queueLength&&(v.undoQueue.queue.shift(),v.undoQueue.index--)},p.startSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!0,v.undoQueue.beginSequence=!0},p.stopSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!1,v.undoQueue.beginSequence=!1},p.undo=function(m){var g,w;if(!(m.undoQueue===void 0||isNaN(m.undoQueue.index)||m.undoQueue.index<=0)){for(m.undoQueue.index--,g=m.undoQueue.queue[m.undoQueue.index],m.undoQueue.inSequence=!0,w=0;w<g.undo.calls.length;w++)p.plotDo(m,g.undo.calls[w],g.undo.args[w]);m.undoQueue.inSequence=!1,m.autoplay=!1}},p.redo=function(m){var g,w;if(!(m.undoQueue===void 0||isNaN(m.undoQueue.index)||m.undoQueue.index>=m.undoQueue.queue.length)){for(g=m.undoQueue.queue[m.undoQueue.index],m.undoQueue.inSequence=!0,w=0;w<g.redo.calls.length;w++)p.plotDo(m,g.redo.calls[w],g.redo.args[w]);m.undoQueue.inSequence=!1,m.autoplay=!1,m.undoQueue.index++}},p.plotDo=function(v,m,g){v.autoplay=!0,g=u(v,g),m.apply(null,g)},$.exports=p}}),Fi=i({"src/plots/frame_attributes.js"(U,$){$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}}}),Di=i({"src/plot_api/plot_schema.js"(U){var $=mn(),h=kr(),c=lt(),u=zi(),p=Fi(),v=Ca(),m=wr().configAttributes,g=Ni(),w=h.extendDeepAll,l=h.isPlainObject,T=h.isArrayOrTypedArray,y=h.nestedProperty,S=h.valObjectMeta,R="_isSubplotObj",M="_isLinkedToArray",A="_arrayAttrRegexps",C="_deprecated",j=[R,M,A,C];U.IS_SUBPLOT_OBJ=R,U.IS_LINKED_TO_ARRAY=M,U.DEPRECATED=C,U.UNDERSCORE_ATTRS=j,U.get=function(){var Q={};return $.allTypes.forEach(function(ee){Q[ee]=F(ee)}),{defs:{valObjects:S,metaKeys:j.concat(["description","role","editType","impliedEdits"]),editType:{traces:g.traces,layout:g.layout},impliedEdits:{}},traces:Q,layout:P(),frames:J(),animation:H(v),config:H(m)}},U.crawl=function(Q,ee,ne,le){var W=ne||0;le=le||"",Object.keys(Q).forEach(function(ce){var de=Q[ce];if(j.indexOf(ce)===-1){var pe=(le?le+".":"")+ce;ee(de,ce,Q,W,pe),!U.isValObject(de)&&l(de)&&ce!=="impliedEdits"&&U.crawl(de,ee,W+1,pe)}})},U.isValObject=function(Q){return Q&&Q.valType!==void 0},U.findArrayAttributes=function(Q){var ee=[],ne=[],le=[],W,ce;function de(he,be,Ee,Te){ne=ne.slice(0,Te).concat([be]),le=le.slice(0,Te).concat([he&&he._isLinkedToArray]);var He=he&&(he.valType==="data_array"||he.arrayOk===!0)&&!(ne[Te-1]==="colorbar"&&(be==="ticktext"||be==="tickvals"));He&&pe(W,0,"")}function pe(he,be,Ee){var Te=he[ne[be]],He=Ee+ne[be];if(be===ne.length-1)T(Te)&&ee.push(ce+He);else if(le[be]){if(Array.isArray(Te))for(var te=0;te<Te.length;te++)l(Te[te])&&pe(Te[te],be+1,He+"["+te+"].")}else l(Te)&&pe(Te,be+1,He+".")}return W=Q,ce="",U.crawl(c,de),Q._module&&Q._module.attributes&&U.crawl(Q._module.attributes,de),ee},U.getTraceValObject=function(Q,ee){var ne=ee[0],le=1,W,ce,de=Q._module;if(de||(de=($.modules[Q.type||c.type.dflt]||{})._module),!de)return!1;if(W=de.attributes,ce=W&&W[ne],!ce){var pe=de.basePlotModule;pe&&pe.attributes&&(ce=pe.attributes[ne])}return ce||(ce=c[ne]),k(ce,ee,le)},U.getLayoutValObject=function(Q,ee){var ne=b(Q,ee[0]);return k(ne,ee,1)};function b(Q,ee){var ne,le,W,ce,de=Q._basePlotModules;if(de){var pe;for(ne=0;ne<de.length;ne++){if(W=de[ne],W.attrRegex&&W.attrRegex.test(ee)){if(W.layoutAttrOverrides)return W.layoutAttrOverrides;!pe&&W.layoutAttributes&&(pe=W.layoutAttributes)}var he=W.baseLayoutAttrOverrides;if(he&&ee in he)return he[ee]}if(pe)return pe}var be=Q._modules;if(be){for(ne=0;ne<be.length;ne++)if(ce=be[ne].layoutAttributes,ce&&ee in ce)return ce[ee]}for(le in $.componentsRegistry){if(W=$.componentsRegistry[le],W.name==="colorscale"&&ee.indexOf("coloraxis")===0)return W.layoutAttributes[ee];if(!W.schema&&ee===W.name)return W.layoutAttributes}return ee in u?u[ee]:!1}function k(Q,ee,ne){if(!Q)return!1;if(Q._isLinkedToArray){if(E(ee[ne]))ne++;else if(ne<ee.length)return!1}for(;ne<ee.length;ne++){var le=Q[ee[ne]];if(l(le))Q=le;else break;if(ne===ee.length-1)break;if(Q._isLinkedToArray){if(ne++,!E(ee[ne]))return!1}else if(Q.valType==="info_array"){ne++;var W=ee[ne];if(!E(W))return!1;var ce=Q.items;if(Array.isArray(ce)){if(W>=ce.length)return!1;if(Q.dimensions===2){if(ne++,ee.length===ne)return Q;var de=ee[ne];if(!E(de))return!1;Q=ce[W][de]}else Q=ce[W]}else Q=ce}}return Q}function E(Q){return Q===Math.round(Q)&&Q>=0}function F(Q){var ee,ne;ee=$.modules[Q]._module,ne=ee.basePlotModule;var le={};le.type=null;var W=w({},c),ce=w({},ee.attributes);U.crawl(ce,function(he,be,Ee,Te,He){y(W,He).set(void 0),he===void 0&&y(ce,He).set(void 0)}),w(le,W),$.traceIs(Q,"noOpacity")&&delete le.opacity,$.traceIs(Q,"showLegend")||(delete le.showlegend,delete le.legendgroup),$.traceIs(Q,"noHover")&&(delete le.hoverinfo,delete le.hoverlabel),ee.selectPoints||delete le.selectedpoints,w(le,ce),ne.attributes&&w(le,ne.attributes),le.type=Q;var de={meta:ee.meta||{},categories:ee.categories||{},animatable:!!ee.animatable,type:Q,attributes:H(le)};if(ee.layoutAttributes){var pe={};w(pe,ee.layoutAttributes),de.layoutAttributes=H(pe)}return ee.animatable||U.crawl(de,function(he){U.isValObject(he)&&"anim"in he&&delete he.anim}),de}function P(){var Q={},ee,ne;w(Q,u);for(ee in $.subplotsRegistry)if(ne=$.subplotsRegistry[ee],!!ne.layoutAttributes)if(Array.isArray(ne.attr))for(var le=0;le<ne.attr.length;le++)q(Q,ne,ne.attr[le]);else{var W=ne.attr==="subplot"?ne.name:ne.attr;q(Q,ne,W)}for(ee in $.componentsRegistry){ne=$.componentsRegistry[ee];var ce=ne.schema;if(ce&&(ce.subplots||ce.layout)){var de=ce.subplots;if(de&&de.xaxis&&!de.yaxis)for(var pe in de.xaxis)delete Q.yaxis[pe];delete Q.xaxis.shift,delete Q.xaxis.autoshift}else ne.name==="colorscale"?w(Q,ne.layoutAttributes):ne.layoutAttributes&&X(Q,ne.layoutAttributes,ne.name)}return{layoutAttributes:H(Q)}}function J(){var Q={frames:w({},p)};return H(Q),Q.frames}function H(Q){return Y(Q),Z(Q),z(Q),Q}function Y(Q){function ee(le){return{valType:"string",editType:"none"}}function ne(le,W,ce){U.isValObject(le)?(le.arrayOk===!0||le.valType==="data_array")&&(ce[W+"src"]=ee()):l(le)&&(le.role="object")}U.crawl(Q,ne)}function Z(Q){function ee(ne,le,W){if(ne){var ce=ne[M];ce&&(delete ne[M],W[le]={items:{}},W[le].items[ce]=ne,W[le].role="object")}}U.crawl(Q,ee)}function z(Q){function ee(ne){for(var le in ne)if(l(ne[le]))ee(ne[le]);else if(Array.isArray(ne[le]))for(var W=0;W<ne[le].length;W++)ee(ne[le][W]);else ne[le]instanceof RegExp&&(ne[le]=ne[le].toString())}ee(Q)}function q(Q,ee,ne){var le=y(Q,ne),W=w({},ee.layoutAttributes);W[R]=!0,le.set(W)}function X(Q,ee,ne){var le=y(Q,ne);le.set(w(le.get()||{},ee))}}}),Si=i({"src/plot_api/plot_template.js"(U){var $=kr(),h=lt(),c="templateitemname",u={name:{valType:"string",editType:"none"}};u[c]={valType:"string",editType:"calc"},U.templatedArray=function(m,g){return g._isLinkedToArray=m,g.name=u.name,g[c]=u[c],g},U.traceTemplater=function(m){var g={},w,l;for(w in m)l=m[w],Array.isArray(l)&&l.length&&(g[w]=0);function T(y){w=$.coerce(y,{},h,"type");var S={type:w,_template:null};if(w in g){l=m[w];var R=g[w]%l.length;g[w]++,S._template=l[R]}return S}return{newTrace:T}},U.newContainer=function(m,g,w){var l=m._template,T=l&&(l[g]||w&&l[w]);$.isPlainObject(T)||(T=null);var y=m[g]={_template:T};return y},U.arrayTemplater=function(m,g,w){var l=m._template,T=l&&l[v(g)],y=l&&l[g];(!Array.isArray(y)||!y.length)&&(y=[]);var S={};function R(A){var C={name:A.name,_input:A},j=C[c]=A[c];if(!p(j))return C._template=T,C;for(var b=0;b<y.length;b++){var k=y[b];if(k.name===j)return S[j]=1,C._template=k,C}return C[w]=A[w]||!1,C._template=!1,C}function M(){for(var A=[],C=0;C<y.length;C++){var j=y[C],b=j.name;if(p(b)&&!S[b]){var k={_template:j,name:b,_input:{_templateitemname:b}};k[c]=j[c],A.push(k),S[b]=1}}return A}return{newItem:R,defaultItems:M}};function p(m){return m&&typeof m=="string"}function v(m){var g=m.length-1;return m.charAt(g)!=="s"&&$.warn("bad argument to arrayDefaultKey: "+m),m.substr(0,m.length-1)+"defaults"}U.arrayDefaultKey=v,U.arrayEditor=function(m,g,w){var l=($.nestedProperty(m,g).get()||[]).length,T=w._index,y=T>=l&&(w._input||{})._templateitemname;y&&(T=l);var S=g+"["+T+"]",R;function M(){R={},y&&(R[S]={},R[S][c]=y)}M();function A(k,E){R[k]=E}function C(k,E){y?$.nestedProperty(R[S],k).set(E):R[S+"."+k]=E}function j(){var k=R;return M(),k}function b(k,E){k&&C(k,E);var F=j();for(var P in F)$.nestedProperty(m,P).set(F[P])}return{modifyBase:A,modifyItem:C,getUpdateObj:j,applyUpdate:b}}}}),ha=i({"src/plots/cartesian/constants.js"(U,$){var h=Jt().counter;$.exports={idRegex:{x:h("x","( domain)?"),y:h("y","( domain)?")},attrRegex:h("[xy]axis"),xAxisMatch:h("xaxis"),yAxisMatch:h("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}}}),pa=i({"src/plots/cartesian/axis_ids.js"(U){var $=mn(),h=ha();U.id2name=function(p){if(!(typeof p!="string"||!p.match(h.AX_ID_PATTERN))){var v=p.split(" ")[0].substr(1);return v==="1"&&(v=""),p.charAt(0)+"axis"+v}},U.name2id=function(p){if(p.match(h.AX_NAME_PATTERN)){var v=p.substr(5);return v==="1"&&(v=""),p.charAt(0)+v}},U.cleanId=function(p,v,m){var g=/( domain)$/.test(p);if(!(typeof p!="string"||!p.match(h.AX_ID_PATTERN))&&!(v&&p.charAt(0)!==v)&&!(g&&!m)){var w=p.split(" ")[0].substr(1).replace(/^0+/,"");return w==="1"&&(w=""),p.charAt(0)+w+(g&&m?" domain":"")}},U.list=function(u,p,v){var m=u._fullLayout;if(!m)return[];var g=U.listIds(u,p),w=new Array(g.length),l;for(l=0;l<g.length;l++){var T=g[l];w[l]=m[T.charAt(0)+"axis"+T.substr(1)]}if(!v){var y=m._subplots.gl3d||[];for(l=0;l<y.length;l++){var S=m[y[l]];p?w.push(S[p+"axis"]):w.push(S.xaxis,S.yaxis,S.zaxis)}}return w},U.listIds=function(u,p){var v=u._fullLayout;if(!v)return[];var m=v._subplots;return p?m[p+"axis"]:m.xaxis.concat(m.yaxis)},U.getFromId=function(u,p,v){var m=u._fullLayout;return p=p===void 0||typeof p!="string"?p:p.replace(" domain",""),v==="x"?p=p.replace(/y[0-9]*/,""):v==="y"&&(p=p.replace(/x[0-9]*/,"")),m[U.id2name(p)]},U.getFromTrace=function(u,p,v){var m=u._fullLayout,g=null;if($.traceIs(p,"gl3d")){var w=p.scene;w.substr(0,5)==="scene"&&(g=m[w][v+"axis"])}else g=U.getFromId(u,p[v+"axis"]||v);return g},U.idSort=function(u,p){var v=u.charAt(0),m=p.charAt(0);return v!==m?v>m?1:-1:+(u.substr(1)||1)-+(p.substr(1)||1)},U.ref2id=function(u){return/^[xyz]/.test(u)?u.split(" ")[0]:!1};function c(u,p){if(p&&p.length){for(var v=0;v<p.length;v++)if(p[v][u])return!0}return!1}U.isLinked=function(u,p){return c(p,u._axisMatchGroups)||c(p,u._axisConstraintGroups)}}}),Ws=i({"src/components/shapes/handle_outline.js"(U,$){function h(u){var p=u._fullLayout._zoomlayer;p&&p.selectAll(".outline-controllers").remove()}function c(u){var p=u._fullLayout._zoomlayer;p&&p.selectAll(".select-outline").remove(),u._fullLayout._outlining=!1}$.exports={clearOutlineControllers:h,clearOutline:c}}}),Dl=i({"src/traces/scatter/layout_attributes.js"(U,$){$.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}}}),bc=i({"src/plots/get_data.js"(U){var $=mn();ha().SUBPLOT_PATTERN,U.getSubplotCalcData=function(h,c,u){var p=$.subplotsRegistry[c];if(!p)return[];for(var v=p.attr,m=[],g=0;g<h.length;g++){var w=h[g],l=w[0].trace;l[v]===u&&m.push(w)}return m},U.getModuleCalcData=function(h,c,u){var p=[],v=[],m;if(typeof c=="string"?m=$.getModule(c).plot:typeof c=="function"?m=c:m=c.plot,!m)return[p,h];for(var g=u,w=0;w<h.length;w++){var l=h[w],T=l[0].trace,y=T.zorder!==void 0;T.visible!==!0||T._length===0||(T._module&&T._module.plot===m&&(!y||T.zorder===g)?p.push(l):v.push(l))}return[p,v]},U.getSubplotData=function(c,u,p){if(!$.subplotsRegistry[u])return[];for(var v=$.subplotsRegistry[u].attr,m=[],g,w=0;w<c.length;w++)g=c[w],g[v]===p&&m.push(g);return m}}}),ou=i({"src/plots/command.js"(U){var $=mn(),h=kr();U.manageCommandObserver=function(g,w,l,T){var y={},S=!0;w&&w._commandObserver&&(y=w._commandObserver),y.cache||(y.cache={}),y.lookupTable={};var R=U.hasSimpleAPICommandBindings(g,l,y.lookupTable);if(w&&w._commandObserver){if(R)return y;if(w._commandObserver.remove)return w._commandObserver.remove(),w._commandObserver=null,y}if(R){c(g,R,y.cache),y.check=function(){if(S){var j=c(g,R,y.cache);return j.changed&&T&&y.lookupTable[j.value]!==void 0&&(y.disable(),Promise.resolve(T({value:j.value,type:R.type,prop:R.prop,traces:R.traces,index:y.lookupTable[j.value]})).then(y.enable,y.enable)),j.changed}};for(var M=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],A=0;A<M.length;A++)g._internalOn(M[A],y.check);y.remove=function(){for(var C=0;C<M.length;C++)g._removeInternalListener(M[C],y.check)}}else h.log("Unable to automatically bind plot updates to API command"),y.lookupTable={},y.remove=function(){};return y.disable=function(){S=!1},y.enable=function(){S=!0},w&&(w._commandObserver=y),y},U.hasSimpleAPICommandBindings=function(g,w,l){var T,y=w.length,S;for(T=0;T<y;T++){var R,M=w[T],A=M.method,C=M.args;if(Array.isArray(C)||(C=[]),!A)return!1;var j=U.computeAPICommandBindings(g,A,C);if(j.length!==1)return!1;if(!S)S=j[0],Array.isArray(S.traces)&&S.traces.sort();else{if(R=j[0],R.type!==S.type||R.prop!==S.prop)return!1;if(Array.isArray(S.traces))if(Array.isArray(R.traces)){R.traces.sort();for(var b=0;b<S.traces.length;b++)if(S.traces[b]!==R.traces[b])return!1}else return!1;else if(R.prop!==S.prop)return!1}R=j[0];var k=R.value;if(Array.isArray(k))if(k.length===1)k=k[0];else return!1;l&&(l[k]=T)}return S};function c(g,w,l){var T,y,S,R=!1;if(w.type==="data")T=g._fullData[w.traces!==null?w.traces[0]:0];else if(w.type==="layout")T=g._fullLayout;else return!1;return y=h.nestedProperty(T,w.prop).get(),S=l[w.type]=l[w.type]||{},S.hasOwnProperty(w.prop)&&S[w.prop]!==y&&(R=!0),S[w.prop]=y,{changed:R,value:y}}U.executeAPICommand=function(g,w,l){if(w==="skip")return Promise.resolve();var T=$.apiMethodRegistry[w],y=[g];Array.isArray(l)||(l=[]);for(var S=0;S<l.length;S++)y.push(l[S]);return T.apply(null,y).catch(function(R){return h.warn("API call to Plotly."+w+" rejected.",R),Promise.reject(R)})},U.computeAPICommandBindings=function(g,w,l){var T;switch(Array.isArray(l)||(l=[]),w){case"restyle":T=v(g,l);break;case"relayout":T=p(g,l);break;case"update":T=v(g,[l[0],l[2]]).concat(p(g,[l[1]]));break;case"animate":T=u(g,l);break;default:T=[]}return T};function u(g,w){return Array.isArray(w[0])&&w[0].length===1&&["string","number"].indexOf(typeof w[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:w[0][0].toString()}]:[]}function p(g,w){var l=[],T=w[0],y={};if(typeof T=="string")y[T]=w[1];else if(h.isPlainObject(T))y=T;else return l;return m(y,function(S,R,M){l.push({type:"layout",prop:S,value:M})},"",0),l}function v(g,w){var l,T,y,S,R=[];if(T=w[0],y=w[1],l=w[2],S={},typeof T=="string")S[T]=y;else if(h.isPlainObject(T))S=T,l===void 0&&(l=y);else return R;return l===void 0&&(l=null),m(S,function(M,A,C){var j,b;if(Array.isArray(C)){b=C.slice();var k=Math.min(b.length,g.data.length);l&&(k=Math.min(k,l.length)),j=[];for(var E=0;E<k;E++)j[E]=l?l[E]:E}else b=C,j=l?l.slice():null;if(j===null)Array.isArray(b)&&(b=b[0]);else if(Array.isArray(j)){if(!Array.isArray(b)){var F=b;b=[];for(var P=0;P<j.length;P++)b[P]=F}b.length=Math.min(j.length,b.length)}R.push({type:"data",prop:M,traces:j,value:b})},"",0),R}function m(g,w,l,T){Object.keys(g).forEach(function(y){var S=g[y];if(y[0]!=="_"){var R=l+(T>0?".":"")+y;h.isPlainObject(S)?m(S,w,R,T+1):w(R,y,S)}})}}}),Xi=i({"src/plots/plots.js"(U,$){var h=d(),c=N().timeFormatLocale,u=I().formatLocale,p=xe(),v=Ve(),m=mn(),g=Di(),w=Si(),l=kr(),T=pt(),y=Ce().BADNUM,S=pa(),R=Ws().clearOutline,M=Dl(),A=Ca(),C=Fi(),j=bc().getModuleCalcData,b=l.relinkPrivateKeys,k=l._,E=$.exports={};l.extendFlat(E,m),E.attributes=lt(),E.attributes.type.values=E.allTypes,E.fontAttrs=er(),E.layoutAttributes=zi();var F=ou();E.executeAPICommand=F.executeAPICommand,E.computeAPICommandBindings=F.computeAPICommandBindings,E.manageCommandObserver=F.manageCommandObserver,E.hasSimpleAPICommandBindings=F.hasSimpleAPICommandBindings,E.redrawText=function(te){return te=l.getGraphDiv(te),new Promise(function(ae){setTimeout(function(){te._fullLayout&&(m.getComponentMethod("annotations","draw")(te),m.getComponentMethod("legend","draw")(te),m.getComponentMethod("colorbar","draw")(te),ae(E.previousPromises(te)))},300)})},E.resize=function(te){te=l.getGraphDiv(te);var ae,G=new Promise(function(K,V){(!te||l.isHidden(te))&&V(new Error("Resize must be passed a displayed plot div element.")),te._redrawTimer&&clearTimeout(te._redrawTimer),te._resolveResize&&(ae=te._resolveResize),te._resolveResize=K,te._redrawTimer=setTimeout(function(){if(!te.layout||te.layout.width&&te.layout.height||l.isHidden(te)){K(te);return}delete te.layout.width,delete te.layout.height;var re=te.changed;te.autoplay=!0,m.call("relayout",te,{autosize:!0}).then(function(){te.changed=re,te._resolveResize===K&&(delete te._resolveResize,K(te))})},100)});return ae&&ae(G),G},E.previousPromises=function(te){if((te._promises||[]).length)return Promise.all(te._promises).then(function(){te._promises=[]})},E.addLinks=function(te){if(!(!te._context.showLink&&!te._context.showSources)){var ae=te._fullLayout,G=l.ensureSingle(ae._paper,"text","js-plot-link-container",function(oe){oe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:T.defaultLine,"pointer-events":"all"}).each(function(){var ie=h.select(this);ie.append("tspan").classed("js-link-to-tool",!0),ie.append("tspan").classed("js-link-spacer",!0),ie.append("tspan").classed("js-sourcelinks",!0)})}),K=G.node(),V={y:ae._paper.attr("height")-9};document.body.contains(K)&&K.getComputedTextLength()>=ae.width-20?(V["text-anchor"]="start",V.x=5):(V["text-anchor"]="end",V.x=ae._paper.attr("width")-7),G.attr(V);var re=G.select(".js-link-to-tool"),D=G.select(".js-link-spacer"),B=G.select(".js-sourcelinks");te._context.showSources&&te._context.showSources(te),te._context.showLink&&P(te,re),D.text(re.text()&&B.text()?" - ":"")}};function P(te,ae){ae.text("");var G=ae.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(te._context.linkText+" »");if(te._context.sendData)G.on("click",function(){E.sendDataToCloud(te)});else{var K=window.location.pathname.split("/"),V=window.location.search;G.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+K[2].split(".")[0]+"/"+K[1]+V})}}E.sendDataToCloud=function(te){var ae=(window.PLOTLYENV||{}).BASE_URL||te._context.plotlyServerURL;if(ae){te.emit("plotly_beforeexport");var G=h.select(te).append("div").attr("id","hiddenform").style("display","none"),K=G.append("form").attr({action:ae+"/external",method:"post",target:"_blank"}),V=K.append("input").attr({type:"text",name:"data"});return V.node().value=E.graphJson(te,!1,"keepdata"),K.node().submit(),G.remove(),te.emit("plotly_afterexport"),!1}};var J=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],H=["year","month","dayMonth","dayMonthYear"];E.supplyDefaults=function(te,ae){var G=ae&&ae.skipUpdateCalc,K=te._fullLayout||{};if(K._skipDefaults){delete K._skipDefaults;return}var V=te._fullLayout={},re=te.layout||{},D=te._fullData||[],B=te._fullData=[],oe=te.data||[],ie=te.calcdata||[],ge=te._context||{},_e;te._transitionData||E.createTransitionData(te),V._dfltTitle={plot:k(te,"Click to enter Plot title"),subtitle:k(te,"Click to enter Plot subtitle"),x:k(te,"Click to enter X axis title"),y:k(te,"Click to enter Y axis title"),colorbar:k(te,"Click to enter Colorscale title"),annotation:k(te,"new text")},V._traceWord=k(te,"trace");var Se=z(te,J);if(V._mapboxAccessToken=ge.mapboxAccessToken,K._initialAutoSizeIsDone){var De=K.width,Ge=K.height;E.supplyLayoutGlobalDefaults(re,V,Se),re.width||(V.width=De),re.height||(V.height=Ge),E.sanitizeMargins(V)}else{E.supplyLayoutGlobalDefaults(re,V,Se);var Je=!re.width||!re.height,yt=V.autosize,ut=ge.autosizable,vt=Je&&(yt||ut);vt?E.plotAutoSize(te,re,V):Je&&E.sanitizeMargins(V),!yt&&Je&&(re.width=V.width,re.height=V.height)}V._d3locale=q(Se,V.separators),V._extraFormat=z(te,H),V._initialAutoSizeIsDone=!0,V._dataLength=oe.length,V._modules=[],V._visibleModules=[],V._basePlotModules=[];var Ae=V._subplots=Z(),Fe=V._splomAxes={x:{},y:{}},ke=V._splomSubplots={};V._splomGridDflt={},V._scatterStackOpts={},V._firstScatter={},V._alignmentOpts={},V._colorAxes={},V._requestRangeslider={},V._traceUids=Y(D,oe),E.supplyDataDefaults(oe,B,re,V);var Be=Object.keys(Fe.x),et=Object.keys(Fe.y);if(Be.length>1&&et.length>1){for(m.getComponentMethod("grid","sizeDefaults")(re,V),_e=0;_e<Be.length;_e++)l.pushUnique(Ae.xaxis,Be[_e]);for(_e=0;_e<et.length;_e++)l.pushUnique(Ae.yaxis,et[_e]);for(var ht in ke)l.pushUnique(Ae.cartesian,ht)}if(V._has=E._hasPlotType.bind(V),D.length===B.length)for(_e=0;_e<B.length;_e++)b(B[_e],D[_e]);E.supplyLayoutModuleDefaults(re,V,B,te._transitionData);var jt=V._visibleModules,At=[];for(_e=0;_e<jt.length;_e++){var Pt=jt[_e].crossTraceDefaults;Pt&&l.pushUnique(At,Pt)}for(_e=0;_e<At.length;_e++)At[_e](B,V);V._hasOnlyLargeSploms=V._basePlotModules.length===1&&V._basePlotModules[0].name==="splom"&&Be.length>15&&et.length>15&&V.shapes.length===0&&V.images.length===0,E.linkSubplots(B,V,D,K),E.cleanPlot(B,V,D,K);var zt=!!(K._has&&K._has("cartesian")),Nt=!!(V._has&&V._has("cartesian")),Kt=zt,_t=Nt;Kt&&!_t?K._bgLayer.remove():_t&&!Kt&&(V._shouldCreateBgLayer=!0),K._zoomlayer&&!te._dragging&&R({_fullLayout:K}),X(B,V),b(V,K),m.getComponentMethod("colorscale","crossTraceDefaults")(B,V),V._preGUI||(V._preGUI={}),V._tracePreGUI||(V._tracePreGUI={});var Qt=V._tracePreGUI,fr={},Vt;for(Vt in Qt)fr[Vt]="old";for(_e=0;_e<B.length;_e++)Vt=B[_e]._fullInput.uid,fr[Vt]||(Qt[Vt]={}),fr[Vt]="new";for(Vt in fr)fr[Vt]==="old"&&delete Qt[Vt];ne(V),m.getComponentMethod("rangeslider","makeData")(V),!G&&ie.length===B.length&&E.supplyDefaultsUpdateCalc(ie,B)},E.supplyDefaultsUpdateCalc=function(te,ae){for(var G=0;G<ae.length;G++){var K=ae[G],V=(te[G]||[])[0];if(V&&V.trace){var re=V.trace;if(re._hasCalcTransform){var D=re._arrayAttrs,B,oe,ie;for(B=0;B<D.length;B++)oe=D[B],ie=l.nestedProperty(re,oe).get().slice(),l.nestedProperty(K,oe).set(ie)}V.trace=K}}};function Y(te,ae){var G=ae.length,K=[],V,re;for(V=0;V<te.length;V++){var D=te[V]._fullInput;D!==re&&K.push(D),re=D}var B=K.length,oe=new Array(G),ie={};function ge(De,Ge){oe[Ge]=De,ie[De]=1}function _e(De,Ge){if(De&&typeof De=="string"&&!ie[De])return ge(De,Ge),!0}for(V=0;V<G;V++){var Se=ae[V].uid;typeof Se=="number"&&(Se=String(Se)),!_e(Se,V)&&(V<B&&_e(K[V].uid,V)||ge(l.randstr(ie),V))}return oe}function Z(){var te=m.collectableSubplotTypes,ae={},G,K;if(!te){te=[];var V=m.subplotsRegistry;for(var re in V){var D=V[re],B=D.attr;if(B&&(te.push(re),Array.isArray(B)))for(K=0;K<B.length;K++)l.pushUnique(te,B[K])}}for(G=0;G<te.length;G++)ae[te[G]]=[];return ae}function z(te,ae){var G=te._context.locale;G||(G="en-US");var K=!1,V={};function re(_e){for(var Se=!0,De=0;De<ae.length;De++){var Ge=ae[De];V[Ge]||(_e[Ge]?V[Ge]=_e[Ge]:Se=!1)}Se&&(K=!0)}for(var D=0;D<2;D++){for(var B=te._context.locales,oe=0;oe<2;oe++){var ie=(B[G]||{}).format;if(ie&&(re(ie),K))break;B=m.localeRegistry}var ge=G.split("-")[0];if(K||ge===G)break;G=ge}return K||re(m.localeRegistry.en.format),V}function q(te,ae){return te.decimal=ae.charAt(0),te.thousands=ae.charAt(1),{numberFormat:function(G){try{G=u(te).format(l.adjustFormat(G))}catch{return l.warnBadFormat(G),l.noFormat}return G},timeFormat:c(te).utcFormat}}function X(te,ae){var G,K=[];ae.meta&&(G=ae._meta={meta:ae.meta,layout:{meta:ae.meta}});for(var V=0;V<te.length;V++){var re=te[V];re.meta?K[re.index]=re._meta={meta:re.meta}:ae.meta&&(re._meta={meta:ae.meta}),ae.meta&&(re._meta.layout={meta:ae.meta})}K.length&&(G||(G=ae._meta={}),G.data=K)}E.createTransitionData=function(te){te._transitionData||(te._transitionData={}),te._transitionData._frames||(te._transitionData._frames=[]),te._transitionData._frameHash||(te._transitionData._frameHash={}),te._transitionData._counter||(te._transitionData._counter=0),te._transitionData._interruptCallbacks||(te._transitionData._interruptCallbacks=[])},E._hasPlotType=function(te){var ae,G=this._basePlotModules||[];for(ae=0;ae<G.length;ae++)if(G[ae].name===te)return!0;var K=this._modules||[];for(ae=0;ae<K.length;ae++){var V=K[ae].name;if(V===te)return!0;var re=m.modules[V];if(re&&re.categories[te])return!0}return!1},E.cleanPlot=function(te,ae,G,K){var V,re,D=K._basePlotModules||[];for(V=0;V<D.length;V++){var B=D[V];B.clean&&B.clean(te,ae,G,K)}var oe=K._has&&K._has("gl"),ie=ae._has&&ae._has("gl");oe&&!ie&&K._glcontainer!==void 0&&(K._glcontainer.selectAll(".gl-canvas").remove(),K._glcontainer.selectAll(".no-webgl").remove(),K._glcanvas=null);var ge=!!K._infolayer;e:for(V=0;V<G.length;V++){var _e=G[V],Se=_e.uid;for(re=0;re<te.length;re++){var De=te[re];if(Se===De.uid)continue e}ge&&K._infolayer.select(".cb"+Se).remove()}},E.linkSubplots=function(te,ae,G,K){var V,re,D=K._plots||{},B=ae._plots={},oe=ae._subplots,ie={_fullData:te,_fullLayout:ae},ge=oe.cartesian||[];for(V=0;V<ge.length;V++){var _e=ge[V],Se=D[_e],De=S.getFromId(ie,_e,"x"),Ge=S.getFromId(ie,_e,"y"),Je;for(Se?Je=B[_e]=Se:(Je=B[_e]={},Je.id=_e),De._counterAxes.push(Ge._id),Ge._counterAxes.push(De._id),De._subplotsWith.push(_e),Ge._subplotsWith.push(_e),Je.xaxis=De,Je.yaxis=Ge,Je._hasClipOnAxisFalse=!1,re=0;re<te.length;re++){var yt=te[re];if(yt.xaxis===Je.xaxis._id&&yt.yaxis===Je.yaxis._id&&yt.cliponaxis===!1){Je._hasClipOnAxisFalse=!0;break}}}var ut=S.list(ie,null,!0),vt;for(V=0;V<ut.length;V++){vt=ut[V];var Ae=null;vt.overlaying&&(Ae=S.getFromId(ie,vt.overlaying),Ae&&Ae.overlaying&&(vt.overlaying=!1,Ae=null)),vt._mainAxis=Ae||vt,Ae&&(vt.domain=Ae.domain.slice()),vt._anchorAxis=vt.anchor==="free"?null:S.getFromId(ie,vt.anchor)}for(V=0;V<ut.length;V++)if(vt=ut[V],vt._counterAxes.sort(S.idSort),vt._subplotsWith.sort(l.subplotSort),vt._mainSubplot=Q(vt,ae),vt._counterAxes.length&&(vt.spikemode&&vt.spikemode.indexOf("across")!==-1||vt.automargin&&vt.mirror&&vt.anchor!=="free"||m.getComponentMethod("rangeslider","isVisible")(vt))){var Fe=1,ke=0;for(re=0;re<vt._counterAxes.length;re++){var Be=S.getFromId(ie,vt._counterAxes[re]);Fe=Math.min(Fe,Be.domain[0]),ke=Math.max(ke,Be.domain[1])}Fe<ke&&(vt._counterDomainMin=Fe,vt._counterDomainMax=ke)}};function Q(te,ae){var G={_fullLayout:ae},K=te._id.charAt(0)==="x",V=te._mainAxis._anchorAxis,re="",D="",B="";if(V&&(B=V._mainAxis._id,re=K?te._id+B:B+te._id),!re||!ae._plots[re]){re="";for(var oe=te._counterAxes,ie=0;ie<oe.length;ie++){var ge=oe[ie],_e=K?te._id+ge:ge+te._id;D||(D=_e);var Se=S.getFromId(G,ge);if(B&&Se.overlaying===B){re=_e;break}}}return re||D}E.clearExpandedTraceDefaultColors=function(te){var ae,G,K;function V(D,B,oe,ie){G[ie]=B,G.length=ie+1,D.valType==="color"&&D.dflt===void 0&&ae.push(G.join("."))}for(G=[],ae=te._module._colorAttrs,ae||(te._module._colorAttrs=ae=[],g.crawl(te._module.attributes,V)),K=0;K<ae.length;K++){var re=l.nestedProperty(te,"_input."+ae[K]);re.get()||l.nestedProperty(te,ae[K]).set(null)}},E.supplyDataDefaults=function(te,ae,G,K){var V=K._modules,re=K._visibleModules,D=K._basePlotModules,B=0,oe,ie,ge;K._transformModules=[];function _e(ut){ae.push(ut);var vt=ut._module;vt&&(l.pushUnique(V,vt),ut.visible===!0&&l.pushUnique(re,vt),l.pushUnique(D,ut._module.basePlotModule),ut._input.visible!==!1&&B++)}var Se={},De=[],Ge=(G.template||{}).data||{},Je=w.traceTemplater(Ge);for(oe=0;oe<te.length;oe++)ge=te[oe],ie=Je.newTrace(ge),ie.uid=K._traceUids[oe],E.supplyTraceDefaults(ge,ie,B,K,oe),ie.index=oe,ie._input=ge,ie._fullInput=ie,_e(ie),m.traceIs(ie,"carpetAxis")&&(Se[ie.carpet]=ie),m.traceIs(ie,"carpetDependent")&&De.push(oe);for(oe=0;oe<De.length;oe++)if(ie=ae[De[oe]],!!ie.visible){var yt=Se[ie.carpet];if(ie._carpet=yt,!yt||!yt.visible){ie.visible=!1;continue}ie.xaxis=yt.xaxis,ie.yaxis=yt.yaxis}},E.supplyAnimationDefaults=function(te){te=te||{};var ae,G={};function K(V,re){return l.coerce(te||{},G,A,V,re)}if(K("mode"),K("direction"),K("fromcurrent"),Array.isArray(te.frame))for(G.frame=[],ae=0;ae<te.frame.length;ae++)G.frame[ae]=E.supplyAnimationFrameDefaults(te.frame[ae]||{});else G.frame=E.supplyAnimationFrameDefaults(te.frame||{});if(Array.isArray(te.transition))for(G.transition=[],ae=0;ae<te.transition.length;ae++)G.transition[ae]=E.supplyAnimationTransitionDefaults(te.transition[ae]||{});else G.transition=E.supplyAnimationTransitionDefaults(te.transition||{});return G},E.supplyAnimationFrameDefaults=function(te){var ae={};function G(K,V){return l.coerce(te||{},ae,A.frame,K,V)}return G("duration"),G("redraw"),ae},E.supplyAnimationTransitionDefaults=function(te){var ae={};function G(K,V){return l.coerce(te||{},ae,A.transition,K,V)}return G("duration"),G("easing"),ae},E.supplyFrameDefaults=function(te){var ae={};function G(K,V){return l.coerce(te,ae,C,K,V)}return G("group"),G("name"),G("traces"),G("baseframe"),G("data"),G("layout"),ae},E.supplyTraceDefaults=function(te,ae,G,K,V){var re=K.colorway||T.defaults,D=re[G%re.length],B;function oe(Ae,Fe){return l.coerce(te,ae,E.attributes,Ae,Fe)}var ie=oe("visible");oe("type"),oe("name",K._traceWord+" "+V),oe("uirevision",K.uirevision);var ge=E.getModule(ae);if(ae._module=ge,ge){var _e=ge.basePlotModule,Se=_e.attr,De=_e.attributes;if(Se&&De){var Ge=K._subplots,Je="";if(Array.isArray(Se))for(B=0;B<Se.length;B++){var yt=Se[B],ut=l.coerce(te,ae,De,yt);Ge[yt]&&l.pushUnique(Ge[yt],ut),Je+=ut}else Je=l.coerce(te,ae,De,Se);Ge[_e.name]&&l.pushUnique(Ge[_e.name],Je)}}if(ie&&(oe("customdata"),oe("ids"),oe("meta"),m.traceIs(ae,"showLegend")?(l.coerce(te,ae,ge.attributes.showlegend?ge.attributes:E.attributes,"showlegend"),oe("legend"),oe("legendwidth"),oe("legendgroup"),oe("legendgrouptitle.text"),oe("legendrank"),ae._dfltShowLegend=!0):ae._dfltShowLegend=!1,ge&&ge.supplyDefaults(te,ae,D,K),m.traceIs(ae,"noOpacity")||oe("opacity"),m.traceIs(ae,"notLegendIsolatable")&&(ae.visible=!!ae.visible),m.traceIs(ae,"noHover")||(ae.hovertemplate||l.coerceHoverinfo(te,ae,K),ae.type!=="parcats"&&m.getComponentMethod("fx","supplyDefaults")(te,ae,D,K)),ge&&ge.selectPoints)){var vt=oe("selectedpoints");l.isTypedArray(vt)&&(ae.selectedpoints=Array.from(vt))}return ae},E.supplyLayoutGlobalDefaults=function(te,ae,G){function K(_e,Se){return l.coerce(te,ae,E.layoutAttributes,_e,Se)}var V=te.template;l.isPlainObject(V)&&(ae.template=V,ae._template=V.layout,ae._dataTemplate=V.data),K("autotypenumbers");var re=l.coerceFont(K,"font"),D=re.size;l.coerceFont(K,"title.font",re,{overrideDflt:{size:Math.round(D*1.4)}}),K("title.text",ae._dfltTitle.plot),K("title.xref");var B=K("title.yref");K("title.pad.t"),K("title.pad.r"),K("title.pad.b"),K("title.pad.l");var oe=K("title.automargin");K("title.x"),K("title.xanchor"),K("title.y"),K("title.yanchor"),K("title.subtitle.text",ae._dfltTitle.subtitle),l.coerceFont(K,"title.subtitle.font",re,{overrideDflt:{size:Math.round(ae.title.font.size*.7)}}),oe&&(B==="paper"&&(ae.title.y!==0&&(ae.title.y=1),ae.title.yanchor==="auto"&&(ae.title.yanchor=ae.title.y===0?"top":"bottom")),B==="container"&&(ae.title.y==="auto"&&(ae.title.y=1),ae.title.yanchor==="auto"&&(ae.title.yanchor=ae.title.y<.5?"bottom":"top")));var ie=K("uniformtext.mode");ie&&K("uniformtext.minsize"),K("autosize",!(te.width&&te.height)),K("width"),K("height"),K("minreducedwidth"),K("minreducedheight"),K("margin.l"),K("margin.r"),K("margin.t"),K("margin.b"),K("margin.pad"),K("margin.autoexpand"),te.width&&te.height&&E.sanitizeMargins(ae),m.getComponentMethod("grid","sizeDefaults")(te,ae),K("paper_bgcolor"),K("separators",G.decimal+G.thousands),K("hidesources"),K("colorway"),K("datarevision");var ge=K("uirevision");K("editrevision",ge),K("selectionrevision",ge),m.getComponentMethod("modebar","supplyLayoutDefaults")(te,ae),m.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(te,ae,K),m.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(te,ae,K),K("meta"),l.isPlainObject(te.transition)&&(K("transition.duration"),K("transition.easing"),K("transition.ordering")),m.getComponentMethod("calendars","handleDefaults")(te,ae,"calendar"),m.getComponentMethod("fx","supplyLayoutGlobalDefaults")(te,ae,K),l.coerce(te,ae,M,"scattermode")};function ee(te){return typeof te=="string"&&te.substr(te.length-2)==="px"&&parseFloat(te)}E.plotAutoSize=function(ae,G,K){var V=ae._context||{},re=V.frameMargins,D,B,oe=l.isPlotDiv(ae);if(oe&&ae.emit("plotly_autosize"),V.fillFrame)D=window.innerWidth,B=window.innerHeight,document.body.style.overflow="hidden";else{var ie=oe?window.getComputedStyle(ae):{};if(D=ee(ie.width)||ee(ie.maxWidth)||K.width,B=ee(ie.height)||ee(ie.maxHeight)||K.height,p(re)&&re>0){var ge=1-2*re;D=Math.round(ge*D),B=Math.round(ge*B)}}var _e=E.layoutAttributes.width.min,Se=E.layoutAttributes.height.min;D<_e&&(D=_e),B<Se&&(B=Se);var De=!G.width&&Math.abs(K.width-D)>1,Ge=!G.height&&Math.abs(K.height-B)>1;(Ge||De)&&(De&&(K.width=D),Ge&&(K.height=B)),ae._initialAutoSize||(ae._initialAutoSize={width:D,height:B}),E.sanitizeMargins(K)},E.supplyLayoutModuleDefaults=function(te,ae,G,K){var V=m.componentsRegistry,re=ae._basePlotModules,D,B,oe,ie=m.subplotsRegistry.cartesian;for(D in V)oe=V[D],oe.includeBasePlot&&oe.includeBasePlot(te,ae);re.length||re.push(ie),ae._has("cartesian")&&(m.getComponentMethod("grid","contentDefaults")(te,ae),ie.finalizeSubplots(te,ae));for(var ge in ae._subplots)ae._subplots[ge].sort(l.subplotSort);for(B=0;B<re.length;B++)oe=re[B],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(te,ae,G);var _e=ae._modules;for(B=0;B<_e.length;B++)oe=_e[B],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(te,ae,G);var Se=ae._transformModules;for(B=0;B<Se.length;B++)oe=Se[B],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(te,ae,G,K);for(D in V)oe=V[D],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(te,ae,G)},E.purge=function(te){var ae=te._fullLayout||{};ae._glcontainer!==void 0&&(ae._glcontainer.selectAll(".gl-canvas").remove(),ae._glcontainer.remove(),ae._glcanvas=null),ae._modeBar&&ae._modeBar.destroy(),te._transitionData&&(te._transitionData._interruptCallbacks&&(te._transitionData._interruptCallbacks.length=0),te._transitionData._animationRaf&&window.cancelAnimationFrame(te._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(te),delete te.data,delete te.layout,delete te._fullData,delete te._fullLayout,delete te.calcdata,delete te.empty,delete te.fid,delete te.undoqueue,delete te.undonum,delete te.autoplay,delete te.changed,delete te._promises,delete te._redrawTimer,delete te._hmlumcount,delete te._hmpixcount,delete te._transitionData,delete te._transitioning,delete te._initialAutoSize,delete te._transitioningWithDuration,delete te._dragging,delete te._dragged,delete te._dragdata,delete te._hoverdata,delete te._snapshotInProgress,delete te._editing,delete te._mouseDownTime,delete te._legendMouseDownTime,te.removeAllListeners&&te.removeAllListeners()},E.style=function(te){var ae=te._fullLayout._visibleModules,G=[],K;for(K=0;K<ae.length;K++){var V=ae[K];V.style&&l.pushUnique(G,V.style)}for(K=0;K<G.length;K++)G[K](te)},E.sanitizeMargins=function(te){if(!(!te||!te.margin)){var ae=te.width,G=te.height,K=te.margin,V=ae-(K.l+K.r),re=G-(K.t+K.b),D;V<0&&(D=(ae-1)/(K.l+K.r),K.l=Math.floor(D*K.l),K.r=Math.floor(D*K.r)),re<0&&(D=(G-1)/(K.t+K.b),K.t=Math.floor(D*K.t),K.b=Math.floor(D*K.b))}},E.clearAutoMarginIds=function(te){te._fullLayout._pushmarginIds={}},E.allowAutoMargin=function(te,ae){te._fullLayout._pushmarginIds[ae]=1};function ne(te){var ae=te.margin;if(!te._size){var G=te._size={l:Math.round(ae.l),r:Math.round(ae.r),t:Math.round(ae.t),b:Math.round(ae.b),p:Math.round(ae.pad)};G.w=Math.round(te.width)-G.l-G.r,G.h=Math.round(te.height)-G.t-G.b}te._pushmargin||(te._pushmargin={}),te._pushmarginIds||(te._pushmarginIds={}),te._reservedMargin||(te._reservedMargin={})}var le=2,W=2;E.autoMargin=function(te,ae,G){var K=te._fullLayout,V=K.width,re=K.height,D=K.margin,B=K.minreducedwidth,oe=K.minreducedheight,ie=l.constrain(V-D.l-D.r,le,B),ge=l.constrain(re-D.t-D.b,W,oe),_e=Math.max(0,V-ie),Se=Math.max(0,re-ge),De=K._pushmargin,Ge=K._pushmarginIds;if(D.autoexpand!==!1){if(!G)delete De[ae],delete Ge[ae];else{var Je=G.pad;if(Je===void 0&&(Je=Math.min(12,D.l,D.r,D.t,D.b)),_e){var yt=(G.l+G.r)/_e;yt>1&&(G.l/=yt,G.r/=yt)}if(Se){var ut=(G.t+G.b)/Se;ut>1&&(G.t/=ut,G.b/=ut)}var vt=G.xl!==void 0?G.xl:G.x,Ae=G.xr!==void 0?G.xr:G.x,Fe=G.yt!==void 0?G.yt:G.y,ke=G.yb!==void 0?G.yb:G.y;De[ae]={l:{val:vt,size:G.l+Je},r:{val:Ae,size:G.r+Je},b:{val:ke,size:G.b+Je},t:{val:Fe,size:G.t+Je}},Ge[ae]=1}if(!K._replotting)return E.doAutoMargin(te)}};function ce(te){if("_redrawFromAutoMarginCount"in te._fullLayout)return!1;var ae=S.list(te,"",!0);for(var G in ae)if(ae[G].autoshift||ae[G].shift)return!0;return!1}E.doAutoMargin=function(te){var ae=te._fullLayout,G=ae.width,K=ae.height;ae._size||(ae._size={}),ne(ae);var V=ae._size,re=ae.margin,D={t:0,b:0,l:0,r:0},B=l.extendFlat({},V),oe=re.l,ie=re.r,ge=re.t,_e=re.b,Se=ae._pushmargin,De=ae._pushmarginIds,Ge=ae.minreducedwidth,Je=ae.minreducedheight;if(re.autoexpand!==!1){for(var yt in Se)De[yt]||delete Se[yt];var ut=te._fullLayout._reservedMargin;for(var vt in ut)for(var Ae in ut[vt]){var Fe=ut[vt][Ae];D[Ae]=Math.max(D[Ae],Fe)}Se.base={l:{val:0,size:oe},r:{val:1,size:ie},t:{val:1,size:ge},b:{val:0,size:_e}};for(var ke in D){var Be=0;for(var et in Se)et!=="base"&&p(Se[et][ke].size)&&(Be=Se[et][ke].size>Be?Se[et][ke].size:Be);var ht=Math.max(0,re[ke]-Be);D[ke]=Math.max(0,D[ke]-ht)}for(var jt in Se){var At=Se[jt].l||{},Pt=Se[jt].b||{},zt=At.val,Nt=At.size,Kt=Pt.val,_t=Pt.size,Qt=G-D.r-D.l,fr=K-D.t-D.b;for(var Vt in Se){if(p(Nt)&&Se[Vt].r){var rr=Se[Vt].r.val,Ne=Se[Vt].r.size;if(rr>zt){var $e=(Nt*rr+(Ne-Qt)*zt)/(rr-zt),Ue=(Ne*(1-zt)+(Nt-Qt)*(1-rr))/(rr-zt);$e+Ue>oe+ie&&(oe=$e,ie=Ue)}}if(p(_t)&&Se[Vt].t){var fe=Se[Vt].t.val,je=Se[Vt].t.size;if(fe>Kt){var Pe=(_t*fe+(je-fr)*Kt)/(fe-Kt),Re=(je*(1-Kt)+(_t-fr)*(1-fe))/(fe-Kt);Pe+Re>_e+ge&&(_e=Pe,ge=Re)}}}}}var tt=l.constrain(G-re.l-re.r,le,Ge),nt=l.constrain(K-re.t-re.b,W,Je),dt=Math.max(0,G-tt),St=Math.max(0,K-nt);if(dt){var Dt=(oe+ie)/dt;Dt>1&&(oe/=Dt,ie/=Dt)}if(St){var at=(_e+ge)/St;at>1&&(_e/=at,ge/=at)}if(V.l=Math.round(oe)+D.l,V.r=Math.round(ie)+D.r,V.t=Math.round(ge)+D.t,V.b=Math.round(_e)+D.b,V.p=Math.round(re.pad),V.w=Math.round(G)-V.l-V.r,V.h=Math.round(K)-V.t-V.b,!ae._replotting&&(E.didMarginChange(B,V)||ce(te))){"_redrawFromAutoMarginCount"in ae?ae._redrawFromAutoMarginCount++:ae._redrawFromAutoMarginCount=1;var Ct=3*(1+Object.keys(De).length);if(ae._redrawFromAutoMarginCount<Ct)return m.call("_doPlot",te);ae._size=B,l.warn("Too many auto-margin redraws.")}de(te)};function de(te){var ae=S.list(te,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(G){for(var K=0;K<ae.length;K++){var V=ae[K][G];V&&V()}})}var pe=["l","r","t","b","p","w","h"];E.didMarginChange=function(te,ae){for(var G=0;G<pe.length;G++){var K=pe[G],V=te[K],re=ae[K];if(!p(V)||Math.abs(re-V)>1)return!0}return!1},E.graphJson=function(te,ae,G,K,V,re){(V&&ae&&!te._fullData||V&&!ae&&!te._fullLayout)&&E.supplyDefaults(te);var D=V?te._fullData:te.data,B=V?te._fullLayout:te.layout,oe=(te._transitionData||{})._frames;function ie(Se,De){if(typeof Se=="function")return De?"_function_":null;if(l.isPlainObject(Se)){var Ge={},Je;return Object.keys(Se).sort().forEach(function(Ae){if(["_","["].indexOf(Ae.charAt(0))===-1){if(typeof Se[Ae]=="function"){De&&(Ge[Ae]="_function");return}if(G==="keepdata"){if(Ae.substr(Ae.length-3)==="src")return}else if(G==="keepstream"){if(Je=Se[Ae+"src"],typeof Je=="string"&&Je.indexOf(":")>0&&!l.isPlainObject(Se.stream))return}else if(G!=="keepall"&&(Je=Se[Ae+"src"],typeof Je=="string"&&Je.indexOf(":")>0))return;Ge[Ae]=ie(Se[Ae],De)}}),Ge}var yt=Array.isArray(Se),ut=l.isTypedArray(Se);if((yt||ut)&&Se.dtype&&Se.shape){var vt=Se.bdata;return ie({dtype:Se.dtype,shape:Se.shape,bdata:l.isArrayBuffer(vt)?v.encode(vt):vt},De)}return yt?Se.map(function(Ae){return ie(Ae,De)}):ut?l.simpleMap(Se,l.identity):l.isJSDate(Se)?l.ms2DateTimeLocal(+Se):Se}var ge={data:(D||[]).map(function(Se){var De=ie(Se);return ae&&delete De.fit,De})};if(!ae&&(ge.layout=ie(B),V)){var _e=B._size;ge.layout.computed={margin:{b:_e.b,l:_e.l,r:_e.r,t:_e.t}}}return oe&&(ge.frames=ie(oe)),re&&(ge.config=ie(te._context,!0)),K==="object"?ge:JSON.stringify(ge)},E.modifyFrames=function(te,ae){var G,K,V,re=te._transitionData._frames,D=te._transitionData._frameHash;for(G=0;G<ae.length;G++)switch(K=ae[G],K.type){case"replace":V=K.value;var B=(re[K.index]||{}).name,oe=V.name;re[K.index]=D[oe]=V,oe!==B&&(delete D[B],D[oe]=V);break;case"insert":V=K.value,D[V.name]=V,re.splice(K.index,0,V);break;case"delete":V=re[K.index],delete D[V.name],re.splice(K.index,1);break}return Promise.resolve()},E.computeFrame=function(te,ae){var G=te._transitionData._frameHash,K,V,re,D;if(!ae)throw new Error("computeFrame must be given a string frame name");var B=G[ae.toString()];if(!B)return!1;for(var oe=[B],ie=[B.name];B.baseframe&&(B=G[B.baseframe.toString()])&&ie.indexOf(B.name)===-1;)oe.push(B),ie.push(B.name);for(var ge={};B=oe.pop();)if(B.layout&&(ge.layout=E.extendLayout(ge.layout,B.layout)),B.data){if(ge.data||(ge.data=[]),V=B.traces,!V)for(V=[],K=0;K<B.data.length;K++)V[K]=K;for(ge.traces||(ge.traces=[]),K=0;K<B.data.length;K++)re=V[K],re!=null&&(D=ge.traces.indexOf(re),D===-1&&(D=ge.data.length,ge.traces[D]=re),ge.data[D]=E.extendTrace(ge.data[D],B.data[K]))}return ge},E.recomputeFrameHash=function(te){for(var ae=te._transitionData._frameHash={},G=te._transitionData._frames,K=0;K<G.length;K++){var V=G[K];V&&V.name&&(ae[V.name]=V)}},E.extendObjectWithContainers=function(te,ae,G){var K,V,re,D,B,oe,ie,ge,_e=l.extendDeepNoArrays({},ae||{}),Se=l.expandObjectPaths(_e),De={};if(G&&G.length)for(re=0;re<G.length;re++)K=l.nestedProperty(Se,G[re]),V=K.get(),V===void 0?l.nestedProperty(De,G[re]).set(null):(K.set(null),l.nestedProperty(De,G[re]).set(V));if(te=l.extendDeepNoArrays(te||{},Se),G&&G.length){for(re=0;re<G.length;re++)if(B=l.nestedProperty(De,G[re]),ie=B.get(),!!ie){for(oe=l.nestedProperty(te,G[re]),ge=oe.get(),Array.isArray(ge)||(ge=[],oe.set(ge)),D=0;D<ie.length;D++){var Ge=ie[D];Ge===null?ge[D]=null:ge[D]=E.extendObjectWithContainers(ge[D],Ge)}oe.set(ge)}}return te},E.dataArrayContainers=["transforms","dimensions"],E.layoutArrayContainers=m.layoutArrayContainers,E.extendTrace=function(te,ae){return E.extendObjectWithContainers(te,ae,E.dataArrayContainers)},E.extendLayout=function(te,ae){return E.extendObjectWithContainers(te,ae,E.layoutArrayContainers)},E.transition=function(te,ae,G,K,V,re){var D={redraw:V.redraw},B={},oe=[];return D.prepareFn=function(){for(var ie=Array.isArray(ae)?ae.length:0,ge=K.slice(0,ie),_e=0;_e<ge.length;_e++){var Se=ge[_e],De=te._fullData[Se],Ge=De._module;if(Ge){if(Ge.animatable){var Je=Ge.basePlotModule.name;B[Je]||(B[Je]=[]),B[Je].push(Se)}te.data[ge[_e]]=E.extendTrace(te.data[ge[_e]],ae[_e])}}var yt=l.expandObjectPaths(l.extendDeepNoArrays({},G)),ut=/^[xy]axis[0-9]*$/;for(var vt in yt)ut.test(vt)&&delete yt[vt].range;E.extendLayout(te.layout,yt),delete te.calcdata,E.supplyDefaults(te),E.doCalcdata(te);var Ae=l.expandObjectPaths(G);if(Ae){var Fe=te._fullLayout._plots;for(var ke in Fe){var Be=Fe[ke],et=Be.xaxis,ht=Be.yaxis,jt=et.range.slice(),At=ht.range.slice(),Pt=null,zt=null,Nt=null,Kt=null;Array.isArray(Ae[et._name+".range"])?Pt=Ae[et._name+".range"].slice():Array.isArray((Ae[et._name]||{}).range)&&(Pt=Ae[et._name].range.slice()),Array.isArray(Ae[ht._name+".range"])?zt=Ae[ht._name+".range"].slice():Array.isArray((Ae[ht._name]||{}).range)&&(zt=Ae[ht._name].range.slice()),jt&&Pt&&(et.r2l(jt[0])!==et.r2l(Pt[0])||et.r2l(jt[1])!==et.r2l(Pt[1]))&&(Nt={xr0:jt,xr1:Pt}),At&&zt&&(ht.r2l(At[0])!==ht.r2l(zt[0])||ht.r2l(At[1])!==ht.r2l(zt[1]))&&(Kt={yr0:At,yr1:zt}),(Nt||Kt)&&oe.push(l.extendFlat({plotinfo:Be},Nt,Kt))}}return Promise.resolve()},D.runFn=function(ie){var ge,_e=te._fullLayout._basePlotModules,Se=oe.length,De;if(G)for(De=0;De<_e.length;De++)_e[De].transitionAxes&&_e[De].transitionAxes(te,oe,re,ie);Se?(ge=l.extendFlat({},re),ge.duration=0,delete B.cartesian):ge=re;for(var Ge in B){var Je=B[Ge],yt=te._fullData[Je[0]]._module;yt.basePlotModule.plot(te,Je,ge,ie)}},he(te,re,D)},E.transitionFromReact=function(te,ae,G,K){var V=te._fullLayout,re=V.transition,D={},B=[];return D.prepareFn=function(){var oe=V._plots;D.redraw=!1,ae.anim==="some"&&(D.redraw=!0),G.anim==="some"&&(D.redraw=!0);for(var ie in oe){var ge=oe[ie],_e=ge.xaxis,Se=ge.yaxis,De=K[_e._name].range.slice(),Ge=K[Se._name].range.slice(),Je=_e.range.slice(),yt=Se.range.slice();_e.setScale(),Se.setScale();var ut=null,vt=null;(_e.r2l(De[0])!==_e.r2l(Je[0])||_e.r2l(De[1])!==_e.r2l(Je[1]))&&(ut={xr0:De,xr1:Je}),(Se.r2l(Ge[0])!==Se.r2l(yt[0])||Se.r2l(Ge[1])!==Se.r2l(yt[1]))&&(vt={yr0:Ge,yr1:yt}),(ut||vt)&&B.push(l.extendFlat({plotinfo:ge},ut,vt))}return Promise.resolve()},D.runFn=function(oe){for(var ie=te._fullData,ge=te._fullLayout,_e=ge._basePlotModules,Se,De,Ge,Je=[],yt=0;yt<ie.length;yt++)Je.push(yt);function ut(){if(te._fullLayout)for(var Ae=0;Ae<_e.length;Ae++)_e[Ae].transitionAxes&&_e[Ae].transitionAxes(te,B,Se,oe)}function vt(){if(te._fullLayout)for(var Ae=0;Ae<_e.length;Ae++)_e[Ae].plot(te,Ge,De,oe)}B.length&&ae.anim?re.ordering==="traces first"?(Se=l.extendFlat({},re,{duration:0}),Ge=Je,De=re,setTimeout(ut,re.duration),vt()):(Se=re,Ge=null,De=l.extendFlat({},re,{duration:0}),setTimeout(vt,Se.duration),ut()):B.length?(Se=re,ut()):ae.anim&&(Ge=Je,De=re,vt())},he(te,re,D)};function he(te,ae,G){var K=!1;function V(_e){var Se=Promise.resolve();if(!_e)return Se;for(;_e.length;)Se=Se.then(_e.shift());return Se}function re(_e){if(_e)for(;_e.length;)_e.shift()}function D(){return te.emit("plotly_transitioning",[]),new Promise(function(_e){te._transitioning=!0,ae.duration>0&&(te._transitioningWithDuration=!0),te._transitionData._interruptCallbacks.push(function(){K=!0}),G.redraw&&te._transitionData._interruptCallbacks.push(function(){return m.call("redraw",te)}),te._transitionData._interruptCallbacks.push(function(){te.emit("plotly_transitioninterrupted",[])});var Se=0,De=0;function Ge(){return Se++,function(){De++,!K&&De===Se&&B(_e)}}G.runFn(Ge),setTimeout(Ge())})}function B(_e){if(te._transitionData)return re(te._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(G.redraw)return m.call("redraw",te)}).then(function(){te._transitioning=!1,te._transitioningWithDuration=!1,te.emit("plotly_transitioned",[])}).then(_e)}function oe(){if(te._transitionData)return te._transitioning=!1,V(te._transitionData._interruptCallbacks)}var ie=[E.previousPromises,oe,G.prepareFn,E.rehover,E.reselect,D],ge=l.syncOrAsync(ie,te);return(!ge||!ge.then)&&(ge=Promise.resolve()),ge.then(function(){return te})}E.doCalcdata=function(te,ae){var G=S.list(te),K=te._fullData,V=te._fullLayout,re,D,B,oe,ie=new Array(K.length),ge=(te.calcdata||[]).slice();for(te.calcdata=ie,V._numBoxes=0,V._numViolins=0,V._violinScaleGroupStats={},te._hmpixcount=0,te._hmlumcount=0,V._piecolormap={},V._sunburstcolormap={},V._treemapcolormap={},V._iciclecolormap={},V._funnelareacolormap={},B=0;B<K.length;B++)if(Array.isArray(ae)&&ae.indexOf(B)===-1){ie[B]=ge[B];continue}for(B=0;B<K.length;B++)re=K[B],re._arrayAttrs=g.findArrayAttributes(re),re._extremes={};var _e=V._subplots.polar||[];for(B=0;B<_e.length;B++)G.push(V[_e[B]].radialaxis,V[_e[B]].angularaxis);for(var Se in V._colorAxes){var De=V[Se];De.cauto!==!1&&(delete De.cmin,delete De.cmax)}var Ge=!1;function Je(vt){if(re=K[vt],D=re._module,re.visible===!0&&re.transforms){if(D&&D.calc){var Ae=D.calc(te,re);Ae[0]&&Ae[0].t&&Ae[0].t._scene&&delete Ae[0].t._scene.dirty}for(oe=0;oe<re.transforms.length;oe++){var Fe=re.transforms[oe];D=transformsRegistry[Fe.type],D&&D.calcTransform&&(re._hasCalcTransform=!0,Ge=!0,D.calcTransform(te,re,Fe))}}}function yt(vt,Ae){if(re=K[vt],D=re._module,!!D.isContainer===Ae){var Fe=[];if(re.visible===!0&&re._length!==0){delete re._indexToPoints;var ke=re.transforms||[];for(oe=ke.length-1;oe>=0;oe--)if(ke[oe].enabled){re._indexToPoints=ke[oe]._indexToPoints;break}D&&D.calc&&(Fe=D.calc(te,re))}(!Array.isArray(Fe)||!Fe[0])&&(Fe=[{x:y,y}]),Fe[0].t||(Fe[0].t={}),Fe[0].trace=re,ie[vt]=Fe}}for(Te(G,K,V),B=0;B<K.length;B++)yt(B,!0);for(B=0;B<K.length;B++)Je(B);for(Ge&&Te(G,K,V),B=0;B<K.length;B++)yt(B,!0);for(B=0;B<K.length;B++)yt(B,!1);He(te);var ut=Ee(G,te);if(ut.length){for(V._numBoxes=0,V._numViolins=0,B=0;B<ut.length;B++)yt(ut[B],!0);for(B=0;B<ut.length;B++)yt(ut[B],!1);He(te)}m.getComponentMethod("fx","calc")(te),m.getComponentMethod("errorbars","calc")(te)};var be=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function Ee(te,ae){var G=[],K,V,re,D,B;function oe(Vt,rr,Ne){var $e=rr._id.charAt(0);if(Vt==="histogram2dcontour"){var Ue=rr._counterAxes[0],fe=S.getFromId(ae,Ue),je=$e==="x"||Ue==="x"&&fe.type==="category",Pe=$e==="y"||Ue==="y"&&fe.type==="category";return function(Re,tt){return Re===0||tt===0||je&&Re===Ne[tt].length-1||Pe&&tt===Ne.length-1?-1:($e==="y"?tt:Re)-1}}else return function(Re,tt){return $e==="y"?tt:Re}}var ie={min:function(Vt){return l.aggNums(Math.min,null,Vt)},max:function(Vt){return l.aggNums(Math.max,null,Vt)},sum:function(Vt){return l.aggNums(function(rr,Ne){return rr+Ne},null,Vt)},total:function(Vt){return l.aggNums(function(rr,Ne){return rr+Ne},null,Vt)},mean:function(Vt){return l.mean(Vt)},"geometric mean":function(Vt){return l.geometricMean(Vt)},median:function(Vt){return l.median(Vt)}};function ge(Vt,rr){return Vt[1]-rr[1]}function _e(Vt,rr){return rr[1]-Vt[1]}for(K=0;K<te.length;K++){var Se=te[K];if(Se.type==="category"){var De=Se.categoryorder.match(be);if(De){var Ge=De[1],Je=De[2],yt=Se._id.charAt(0),ut=yt==="x",vt=[];for(V=0;V<Se._categories.length;V++)vt.push([Se._categories[V],[]]);for(V=0;V<Se._traceIndices.length;V++){var Ae=Se._traceIndices[V],Fe=ae._fullData[Ae];if(Fe.visible===!0){var ke=Fe.type;m.traceIs(Fe,"histogram")&&(delete Fe._xautoBinFinished,delete Fe._yautoBinFinished);var Be=ke==="splom",et=ke==="scattergl",ht=ae.calcdata[Ae];for(re=0;re<ht.length;re++){var jt=ht[re],At,Pt;if(Be){var zt=Fe._axesDim[Se._id];if(!ut){var Nt=Fe._diag[zt][0];Nt&&(Se=ae._fullLayout[S.id2name(Nt)])}var Kt=jt.trace.dimensions[zt].values;for(D=0;D<Kt.length;D++)for(At=Se._categoriesMap[Kt[D]],B=0;B<jt.trace.dimensions.length;B++)if(B!==zt){var _t=jt.trace.dimensions[B];vt[At][1].push(_t.values[D])}}else if(et){for(D=0;D<jt.t.x.length;D++)ut?(At=jt.t.x[D],Pt=jt.t.y[D]):(At=jt.t.y[D],Pt=jt.t.x[D]),vt[At][1].push(Pt);jt.t&&jt.t._scene&&delete jt.t._scene.dirty}else if(jt.hasOwnProperty("z")){Pt=jt.z;var Qt=oe(Fe.type,Se,Pt);for(D=0;D<Pt.length;D++)for(B=0;B<Pt[D].length;B++)At=Qt(B,D),At+1&&vt[At][1].push(Pt[D][B])}else for(At=jt.p,At===void 0&&(At=jt[yt]),Pt=jt.s,Pt===void 0&&(Pt=jt.v),Pt===void 0&&(Pt=ut?jt.y:jt.x),Array.isArray(Pt)||(Pt===void 0?Pt=[]:Pt=[Pt]),D=0;D<Pt.length;D++)vt[At][1].push(Pt[D])}}}Se._categoriesValue=vt;var fr=[];for(V=0;V<vt.length;V++)fr.push([vt[V][0],ie[Ge](vt[V][1])]);fr.sort(Je==="descending"?_e:ge),Se._categoriesAggregatedValue=fr,Se._initialCategories=fr.map(function(Vt){return Vt[0]}),G=G.concat(Se.sortByInitialCategories())}}}return G}function Te(te,ae,G){var K={};function V(oe){oe.clearCalc(),oe.type==="multicategory"&&oe.setupMultiCategory(ae),K[oe._id]=1}l.simpleMap(te,V);for(var re=G._axisMatchGroups||[],D=0;D<re.length;D++)for(var B in re[D])K[B]||V(G[S.id2name(B)])}function He(te){var ae=te._fullLayout,G=ae._visibleModules,K={},V,re,D;for(re=0;re<G.length;re++){var B=G[re],oe=B.crossTraceCalc;if(oe){var ie=B.basePlotModule.name;K[ie]?l.pushUnique(K[ie],oe):K[ie]=[oe]}}for(D in K){var ge=K[D],_e=ae._subplots[D];if(Array.isArray(_e))for(V=0;V<_e.length;V++){var Se=_e[V],De=D==="cartesian"?ae._plots[Se]:ae[Se];for(re=0;re<ge.length;re++)ge[re](te,De,Se)}else for(re=0;re<ge.length;re++)ge[re](te)}}E.rehover=function(te){te._fullLayout._rehover&&te._fullLayout._rehover()},E.redrag=function(te){te._fullLayout._redrag&&te._fullLayout._redrag()},E.reselect=function(te){var ae=te._fullLayout,G=(te.layout||{}).selections,K=ae._previousSelections;ae._previousSelections=G;var V=ae._reselect||JSON.stringify(G)!==JSON.stringify(K);m.getComponentMethod("selections","reselect")(te,V)},E.generalUpdatePerTraceModule=function(te,ae,G,K){var V=ae.traceHash,re={},D;for(D=0;D<G.length;D++){var B=G[D],oe=B[0].trace;oe.visible&&(re[oe.type]=re[oe.type]||[],re[oe.type].push(B))}for(var ie in V)if(!re[ie]){var ge=V[ie][0],_e=ge[0].trace;_e.visible=!1,re[ie]=[ge]}for(var Se in re){var De=re[Se],Ge=De[0][0].trace._module;Ge.plot(te,ae,l.filterVisible(De),K)}ae.traceHash=re},E.plotBasePlot=function(te,ae,G,K,V){var re=m.getModule(te),D=j(ae.calcdata,re)[0];re.plot(ae,D,K,V)},E.cleanBasePlot=function(te,ae,G,K,V){var re=V._has&&V._has(te),D=G._has&&G._has(te);re&&!D&&V["_"+te+"layer"].selectAll("g.trace").remove()}}}),qs=i({"src/constants/xmlns_namespaces.js"(U){U.xmlns="http://www.w3.org/2000/xmlns/",U.svg="http://www.w3.org/2000/svg",U.xlink="http://www.w3.org/1999/xlink",U.svgAttrs={xmlns:U.svg,"xmlns:xlink":U.xlink}}}),La=i({"src/constants/alignment.js"(U,$){$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}}}),Ra=i({"src/lib/svg_text_utils.js"(U){var $=d(),h=kr(),c=h.strTranslate,u=qs(),p=La().LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;U.convertToTspans=function(W,ce,de){var pe=W.text(),he=!W.attr("data-notex")&&ce&&ce._context.typesetMath&&typeof MathJax<"u"&&pe.match(v),be=$.select(W.node().parentNode);if(be.empty())return;var Ee=W.attr("class")?W.attr("class").split(" ")[0]:"text";Ee+="-math",be.selectAll("svg."+Ee).remove(),be.selectAll("g."+Ee+"-group").remove(),W.style("display",null).attr({"data-unformatted":pe,"data-math":"N"});function Te(){be.empty()||(Ee=W.attr("class")+"-math",be.select("svg."+Ee).remove()),W.text("").style("white-space","pre");var He=Q(W.node(),pe);He&&W.style("pointer-events","all"),U.positionText(W),de&&de.call(W)}return he?(ce&&ce._promises||[]).push(new Promise(function(He){W.style("display","none");var te=parseInt(W.node().style.fontSize,10),ae={fontSize:te};T(he[2],ae,function(G,K,V){be.selectAll("svg."+Ee).remove(),be.selectAll("g."+Ee+"-group").remove();var re=G&&G.select("svg");if(!re||!re.node()){Te(),He();return}var D=be.append("g").classed(Ee+"-group",!0).attr({"pointer-events":"none","data-unformatted":pe,"data-math":"Y"});D.node().appendChild(re.node()),K&&K.node()&&re.node().insertBefore(K.node().cloneNode(!0),re.node().firstChild);var B=V.width,oe=V.height;re.attr({class:Ee,height:oe,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ie=W.node().style.fill||"black",ge=re.select("g");ge.attr({fill:ie,stroke:ie});var _e=ge.node().getBoundingClientRect(),Se=_e.width,De=_e.height;(Se>B||De>oe)&&(re.style("overflow","hidden"),_e=re.node().getBoundingClientRect(),Se=_e.width,De=_e.height);var Ge=+W.attr("x"),Je=+W.attr("y"),yt=te||W.node().getBoundingClientRect().height,ut=-yt/4;if(Ee[0]==="y")D.attr({transform:"rotate("+[-90,Ge,Je]+")"+c(-Se/2,ut-De/2)});else if(Ee[0]==="l")Je=ut-De/2;else if(Ee[0]==="a"&&Ee.indexOf("atitle")!==0)Ge=0,Je=ut;else{var vt=W.attr("text-anchor");Ge=Ge-Se*(vt==="middle"?.5:vt==="end"?1:0),Je=Je+ut-De/2}re.attr({x:Ge,y:Je}),de&&de.call(W,D),He(D)})})):Te(),W};var m=/(<|&lt;|&#60;)/g,g=/(>|&gt;|&#62;)/g;function w(W){return W.replace(m,"\\lt ").replace(g,"\\gt ")}var l=[["$","$"],["\\(","\\)"]];function T(W,ce,de){var pe=parseInt((MathJax.version||"").split(".")[0]);if(pe!==2&&pe!==3){h.warn("No MathJax version:",MathJax.version);return}var he,be,Ee,Te,He=function(){return be=h.extendDeepAll({},MathJax.Hub.config),Ee=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:l},displayAlign:"left"})},te=function(){be=h.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=l},ae=function(){if(he=MathJax.Hub.config.menuSettings.renderer,he!=="SVG")return MathJax.Hub.setRenderer("SVG")},G=function(){he=MathJax.config.startup.output,he!=="svg"&&(MathJax.config.startup.output="svg")},K=function(){var ie="math-output-"+h.randstr({},64);Te=$.select("body").append("div").attr({id:ie}).style({visibility:"hidden",position:"absolute","font-size":ce.fontSize+"px"}).text(w(W));var ge=Te.node();return pe===2?MathJax.Hub.Typeset(ge):MathJax.typeset([ge])},V=function(){var ie=Te.select(pe===2?".MathJax_SVG":".MathJax"),ge=!ie.empty()&&Te.select("svg").node();if(!ge)h.log("There was an error in the tex syntax.",W),de();else{var _e=ge.getBoundingClientRect(),Se;pe===2?Se=$.select("body").select("#MathJax_SVG_glyphs"):Se=ie.select("defs"),de(ie,Se,_e)}Te.remove()},re=function(){if(he!=="SVG")return MathJax.Hub.setRenderer(he)},D=function(){he!=="svg"&&(MathJax.config.startup.output=he)},B=function(){return Ee!==void 0&&(MathJax.Hub.processSectionDelay=Ee),MathJax.Hub.Config(be)},oe=function(){MathJax.config=be};pe===2?MathJax.Hub.Queue(He,ae,K,V,re,B):pe===3&&(te(),G(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){K(),V(),D(),oe()}))}var y={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},S={sub:"0.3em",sup:"-0.6em"},R={sub:"-0.21em",sup:"0.42em"},M="​",A=["http:","https:","mailto:","",void 0,":"],C=U.NEWLINES=/(\r\n?|\n)/g,j=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,k=/<br(\s+.*)?>/i;U.BR_TAG_ALL=/<br(\s+.*)?>/gi;var E=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,F=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,P=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,J=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function H(W,ce){if(!W)return null;var de=W.match(ce),pe=de&&(de[3]||de[4]);return pe&&q(pe)}var Y=/(^|;)\s*color:/;U.plainText=function(W,ce){ce=ce||{};for(var de=ce.len!==void 0&&ce.len!==-1?ce.len:1/0,pe=ce.allowedTags!==void 0?ce.allowedTags:["br"],he="...",be=he.length,Ee=W.split(j),Te=[],He="",te=0,ae=0;ae<Ee.length;ae++){var G=Ee[ae],K=G.match(b),V=K&&K[2].toLowerCase();if(V)pe.indexOf(V)!==-1&&(Te.push(G),He=V);else{var re=G.length;if(te+re<de)Te.push(G),te+=re;else if(te<de){var D=de-te;He&&(He!=="br"||D<=be||re<=be)&&Te.pop(),de>be?Te.push(G.substr(0,D-be)+he):Te.push(G.substr(0,D));break}He=""}}return Te.join("")};var Z={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},z=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function q(W){return W.replace(z,function(ce,de){var pe;return de.charAt(0)==="#"?pe=X(de.charAt(1)==="x"?parseInt(de.substr(2),16):parseInt(de.substr(1),10)):pe=Z[de],pe||ce})}U.convertEntities=q;function X(W){if(!(W>1114111)){var ce=String.fromCodePoint;if(ce)return ce(W);var de=String.fromCharCode;return W<=65535?de(W):de((W>>10)+55232,W%1024+56320)}}function Q(W,ce){ce=ce.replace(C," ");var de=!1,pe=[],he,be=-1;function Ee(){be++;var De=document.createElementNS(u.svg,"tspan");$.select(De).attr({class:"line",dy:be*p+"em"}),W.appendChild(De),he=De;var Ge=pe;if(pe=[{node:De}],Ge.length>1)for(var Je=1;Je<Ge.length;Je++)Te(Ge[Je])}function Te(De){var Ge=De.type,Je={},yt;if(Ge==="a"){yt="a";var ut=De.target,vt=De.href,Ae=De.popup;vt&&(Je={"xlink:xlink:show":ut==="_blank"||ut.charAt(0)!=="_"?"new":"replace",target:ut,"xlink:xlink:href":vt},Ae&&(Je.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ae+'");return false;'))}else yt="tspan";De.style&&(Je.style=De.style);var Fe=document.createElementNS(u.svg,yt);if(Ge==="sup"||Ge==="sub"){He(he,M),he.appendChild(Fe);var ke=document.createElementNS(u.svg,"tspan");He(ke,M),$.select(ke).attr("dy",R[Ge]),Je.dy=S[Ge],he.appendChild(Fe),he.appendChild(ke)}else he.appendChild(Fe);$.select(Fe).attr(Je),he=De.node=Fe,pe.push(De)}function He(De,Ge){De.appendChild(document.createTextNode(Ge))}function te(De){if(pe.length===1){h.log("Ignoring unexpected end tag </"+De+">.",ce);return}var Ge=pe.pop();De!==Ge.type&&h.log("Start tag <"+Ge.type+"> doesnt match end tag <"+De+">. Pretending it did match.",ce),he=pe[pe.length-1].node}var ae=k.test(ce);ae?Ee():(he=W,pe=[{node:W}]);for(var G=ce.split(j),K=0;K<G.length;K++){var V=G[K],re=V.match(b),D=re&&re[2].toLowerCase(),B=y[D];if(D==="br")Ee();else if(B===void 0)He(he,q(V));else if(re[1])te(D);else{var oe=re[4],ie={type:D},ge=H(oe,E);if(ge?(ge=ge.replace(Y,"$1 fill:"),B&&(ge+=";"+B)):B&&(ge=B),ge&&(ie.style=ge),D==="a"){de=!0;var _e=H(oe,F);if(_e){var Se=ee(_e);Se&&(ie.href=Se,ie.target=H(oe,P)||"_blank",ie.popup=H(oe,J))}}Te(ie)}}return de}function ee(W){var ce=encodeURI(decodeURI(W)),de=document.createElement("a"),pe=document.createElement("a");de.href=W,pe.href=ce;var he=de.protocol,be=pe.protocol;return A.indexOf(he)!==-1&&A.indexOf(be)!==-1?ce:""}U.sanitizeHTML=function(ce){ce=ce.replace(C," ");for(var de=document.createElement("p"),pe=de,he=[],be=ce.split(j),Ee=0;Ee<be.length;Ee++){var Te=be[Ee],He=Te.match(b),te=He&&He[2].toLowerCase();if(te in y)if(He[1])he.length&&(pe=he.pop());else{var ae=He[4],G=H(ae,E),K=G?{style:G}:{};if(te==="a"){var V=H(ae,F);if(V){var re=ee(V);if(re){K.href=re;var D=H(ae,P);D&&(K.target=D)}}}var B=document.createElement(te);pe.appendChild(B),$.select(B).attr(K),pe=B,he.push(B)}else pe.appendChild(document.createTextNode(q(Te)))}var oe="innerHTML";return de[oe]},U.lineCount=function(ce){return ce.selectAll("tspan.line").size()||1},U.positionText=function(ce,de,pe){return ce.each(function(){var he=$.select(this);function be(He,te){return te===void 0?(te=he.attr(He),te===null&&(he.attr(He,0),te=0)):he.attr(He,te),te}var Ee=be("x",de),Te=be("y",pe);this.nodeName==="text"&&he.selectAll("tspan.line").attr({x:Ee,y:Te})})};function ne(W,ce,de){var pe=de.horizontalAlign,he=de.verticalAlign||"top",be=W.node().getBoundingClientRect(),Ee=ce.node().getBoundingClientRect(),Te,He,te;return he==="bottom"?He=function(){return be.bottom-Te.height}:he==="middle"?He=function(){return be.top+(be.height-Te.height)/2}:He=function(){return be.top},pe==="right"?te=function(){return be.right-Te.width}:pe==="center"?te=function(){return be.left+(be.width-Te.width)/2}:te=function(){return be.left},function(){Te=this.node().getBoundingClientRect();var ae=te()-Ee.left,G=He()-Ee.top,K=de.gd||{};if(de.gd){K._fullLayout._calcInverseTransform(K);var V=h.apply3DTransform(K._fullLayout._invTransform)(ae,G);ae=V[0],G=V[1]}return this.style({top:G+"px",left:ae+"px","z-index":1e3}),this}}var le="1px ";U.makeTextShadow=function(W){var ce=le,de=le,pe=le;return ce+de+pe+W+", -"+ce+"-"+de+pe+W+", "+ce+"-"+de+pe+W+", -"+ce+de+pe+W},U.makeEditable=function(W,ce){var de=ce.gd,pe=ce.delegate,he=$.dispatch("edit","input","cancel"),be=pe||W;if(W.style({"pointer-events":pe?"none":"all"}),W.size()!==1)throw new Error("boo");function Ee(){He(),W.style({opacity:0});var te=be.attr("class"),ae;te?ae="."+te.split(" ")[0]+"-math-group":ae="[class*=-math-group]",ae&&$.select(W.node().parentNode).select(ae).style({opacity:0})}function Te(te){var ae=te.node(),G=document.createRange();G.selectNodeContents(ae);var K=window.getSelection();K.removeAllRanges(),K.addRange(G),ae.focus()}function He(){var te=$.select(de),ae=te.select(".svg-container"),G=ae.append("div"),K=W.node().style,V=parseFloat(K.fontSize||12),re=ce.text;re===void 0&&(re=W.attr("data-unformatted")),G.classed("plugin-editable editable",!0).style({position:"absolute","font-family":K.fontFamily||"Arial","font-size":V,color:ce.fill||K.fill||"black",opacity:1,"background-color":ce.background||"transparent",outline:"#ffffff33 1px solid",margin:[-V/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(re).call(ne(W,ae,ce)).on("blur",function(){de._editing=!1,W.text(this.textContent).style({opacity:1});var D=$.select(this).attr("class"),B;D?B="."+D.split(" ")[0]+"-math-group":B="[class*=-math-group]",B&&$.select(W.node().parentNode).select(B).style({opacity:0});var oe=this.textContent;$.select(this).transition().duration(0).remove(),$.select(document).on("mouseup",null),he.edit.call(W,oe)}).on("focus",function(){var D=this;de._editing=!0,$.select(document).on("mouseup",function(){if($.event.target===D)return!1;document.activeElement===G.node()&&G.node().blur()})}).on("keyup",function(){$.event.which===27?(de._editing=!1,W.style({opacity:1}),$.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),he.cancel.call(W,this.textContent)):(he.input.call(W,this.textContent),$.select(this).call(ne(W,ae,ce)))}).on("keydown",function(){$.event.which===13&&this.blur()}).call(Te)}return ce.immediate?Ee():be.on("click",Ee),$.rebind(W,he,"on")}}}),ds=i({"src/components/colorscale/helpers.js"(U,$){var h=d(),c=wt(),u=xe(),p=kr(),v=pt(),m=gt().isValid;function g(C,j,b){var k=j?p.nestedProperty(C,j).get()||{}:C,E=k[b||"color"];E&&E._inputArray&&(E=E._inputArray);var F=!1;if(p.isArrayOrTypedArray(E)){for(var P=0;P<E.length;P++)if(u(E[P])){F=!0;break}}return p.isPlainObject(k)&&(F||k.showscale===!0||u(k.cmin)&&u(k.cmax)||m(k.colorscale)||p.isPlainObject(k.colorbar))}var w=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function T(C){var j=C._colorAx,b=j||C,k={},E,F,P;for(F=0;F<w.length;F++)P=w[F],k[P]=b[P];if(j)for(E="c",F=0;F<l.length;F++)P=l[F],k[P]=b["c"+P];else{var J;for(F=0;F<l.length;F++){if(P=l[F],J="c"+P,J in b){k[P]=b[J];continue}J="z"+P,J in b&&(k[P]=b[J])}E=J.charAt(0)}return k._sync=function(H,Y){var Z=l.indexOf(H)!==-1?E+H:H;b[Z]=b["_"+Z]=Y},k}function y(C){for(var j=T(C),b=j.min,k=j.max,E=j.reversescale?S(j.colorscale):j.colorscale,F=E.length,P=new Array(F),J=new Array(F),H=0;H<F;H++){var Y=E[H];P[H]=b+Y[0]*(k-b),J[H]=Y[1]}return{domain:P,range:J}}function S(C){for(var j=C.length,b=new Array(j),k=j-1,E=0;k>=0;k--,E++){var F=C[k];b[E]=[1-F[0],F[1]]}return b}function R(C,j){j=j||{};for(var b=C.domain,k=C.range,E=k.length,F=new Array(E),P=0;P<E;P++){var J=c(k[P]).toRgb();F[P]=[J.r,J.g,J.b,J.a]}var H=h.scale.linear().domain(b).range(F).clamp(!0),Y=j.noNumericCheck,Z=j.returnArray,z;return Y&&Z?z=H:Y?z=function(q){return A(H(q))}:Z?z=function(q){return u(q)?H(q):c(q).isValid()?q:v.defaultLine}:z=function(q){return u(q)?A(H(q)):c(q).isValid()?q:v.defaultLine},z.domain=H.domain,z.range=function(){return k},z}function M(C,j){return R(y(C),j)}function A(C){var j={r:C[0],g:C[1],b:C[2],a:C[3]};return c(j).toRgbString()}$.exports={hasColorscale:g,extractOpts:T,extractScale:y,flipScale:S,makeColorScaleFunc:R,makeColorScaleFuncFromTrace:M}}}),Pl=i({"src/plots/cartesian/axis_format_attributes.js"(U,$){var h=ui(),c=h.FORMAT_LINK,u=h.DATE_FORMAT_LINK;function p(g,w){return{valType:"string",dflt:"",editType:"none",description:(w?v:m)("hover text",g)+["By default the values are formatted using "+(w?"generic number format":"`"+g+"axis.hoverformat`")+"."].join(" ")}}function v(g,w){return["Sets the "+g+" formatting rule"+(w?"for `"+w+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+c+"."].join(" ")}function m(g,w){return v(g,w)+[" And for dates see: "+u+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:p,descriptionOnlyNumbers:v,descriptionWithDates:m}}}),es=i({"src/plots/cartesian/layout_attributes.js"(U,$){var h=er(),c=Ft(),u=si().dash,p=It().extendFlat,v=Si().templatedArray,m=Pl().descriptionWithDates,g=Ce().ONEDAY,w=ha(),l=w.HOUR_PATTERN,T=w.WEEKDAY_PATTERN,y={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},S=p({},y,{values:y.values.slice().concat(["sync"])});function R(Y){return{valType:"integer",min:0,dflt:Y?5:0,editType:"ticks"}}var M={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},A={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},C={valType:"data_array",editType:"ticks"},j={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function b(Y){var Z={valType:"number",min:0,editType:"ticks"};return Y||(Z.dflt=5),Z}function k(Y){var Z={valType:"number",min:0,editType:"ticks"};return Y||(Z.dflt=1),Z}var E={valType:"color",dflt:c.defaultLine,editType:"ticks"},F={valType:"color",dflt:c.lightLine,editType:"ticks"};function P(Y){var Z={valType:"number",min:0,editType:"ticks"};return Y||(Z.dflt=1),Z}var J=p({},u,{editType:"ticks"}),H={valType:"boolean",editType:"ticks"};$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:c.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:h({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[w.idRegex.x.toString(),w.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[w.idRegex.x.toString(),w.idRegex.y.toString()],editType:"calc"},rangebreaks:v("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[T,l,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:g},editType:"calc"}),tickmode:S,nticks:R(),tick0:M,dtick:A,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:C,ticktext:{valType:"data_array",editType:"ticks"},ticks:j,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:b(),tickwidth:k(),tickcolor:E,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:p({},u,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:h({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:m("tick label")},tickformatstops:v("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:m("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:H,gridcolor:F,gridwidth:P(),griddash:J,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",w.idRegex.x.toString(),w.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",w.idRegex.x.toString(),w.idRegex.y.toString()],editType:"plot"},minor:{tickmode:y,nticks:R("minor"),tick0:M,dtick:A,tickvals:C,ticks:j,ticklen:b("minor"),tickwidth:k("minor"),tickcolor:E,gridcolor:F,gridwidth:P("minor"),griddash:J,showgrid:H,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}}}),nl=i({"src/components/colorbar/attributes.js"(U,$){var h=es(),c=er(),u=It().extendFlat,p=Ni().overrideAll;$.exports=p({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:h.linecolor,outlinewidth:h.linewidth,bordercolor:h.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:h.minor.tickmode,nticks:h.nticks,tick0:h.tick0,dtick:h.dtick,tickvals:h.tickvals,ticktext:h.ticktext,ticks:u({},h.ticks,{dflt:""}),ticklabeloverflow:u({},h.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:h.ticklen,tickwidth:h.tickwidth,tickcolor:h.tickcolor,ticklabelstep:h.ticklabelstep,showticklabels:h.showticklabels,labelalias:h.labelalias,tickfont:c({}),tickangle:h.tickangle,tickformat:h.tickformat,tickformatstops:h.tickformatstops,tickprefix:h.tickprefix,showtickprefix:h.showtickprefix,ticksuffix:h.ticksuffix,showticksuffix:h.showticksuffix,separatethousands:h.separatethousands,exponentformat:h.exponentformat,minexponent:h.minexponent,showexponent:h.showexponent,title:{text:{valType:"string"},font:c({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")}}),ct=i({"src/components/colorscale/attributes.js"(U,$){var h=nl(),c=Jt().counter,u=sn(),p=gt().scales;u(p),$.exports=function(m,g){m=m||"",g=g||{};var w=g.cLetter||"c";"onlyIfNumerical"in g&&g.onlyIfNumerical;var l="noScale"in g?g.noScale:m==="marker.line",T="showScaleDflt"in g?g.showScaleDflt:w==="z",y=typeof g.colorscaleDflt=="string"?p[g.colorscaleDflt]:null,S=g.editTypeOverride||"",R;"colorAttr"in g?(R=g.colorAttr,g.colorAttr):R={z:"z",c:"color"}[w];var M=w+"auto",A=w+"min",C=w+"max",j=w+"mid",b={};b[A]=b[C]=void 0;var k={};k[M]=!1;var E={};return R==="color"&&(E.color={valType:"color",arrayOk:!0,editType:S||"style"},g.anim&&(E.color.anim=!0)),E[M]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:b},E[A]={valType:"number",dflt:null,editType:S||"plot",impliedEdits:k},E[C]={valType:"number",dflt:null,editType:S||"plot",impliedEdits:k},E[j]={valType:"number",dflt:null,editType:"calc",impliedEdits:b},E.colorscale={valType:"colorscale",editType:"calc",dflt:y,impliedEdits:{autocolorscale:!1}},E.autocolorscale={valType:"boolean",dflt:g.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},E.reversescale={valType:"boolean",dflt:!1,editType:"plot"},l||(E.showscale={valType:"boolean",dflt:T,editType:"calc"},E.colorbar=h),g.noColorAxis||(E.coloraxis={valType:"subplotid",regex:c("coloraxis"),dflt:null,editType:"calc"}),E}}}),ur=i({"src/components/colorscale/layout_attributes.js"(U,$){var h=It().extendFlat,c=ct(),u=gt().scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:u.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:u.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:u.RdBu,editType:"calc"}},coloraxis:h({_isSubplotObj:!0,editType:"calc"},c("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}}}),nn=i({"src/components/colorbar/has_colorbar.js"(U,$){var h=kr();$.exports=function(u){return h.isPlainObject(u.colorbar)}}}),dn=i({"src/plots/cartesian/clean_ticks.js"(U){var $=xe(),h=kr(),c=Ce(),u=c.ONEDAY,p=c.ONEWEEK;U.dtick=function(v,m){var g=m==="log",w=m==="date",l=m==="category",T=w?u:1;if(!v)return T;if($(v))return v=Number(v),v<=0?T:l?Math.max(1,Math.round(v)):w?Math.max(.1,v):v;if(typeof v!="string"||!(w||g))return T;var y=v.charAt(0),S=v.substr(1);return S=$(S)?Number(S):0,S<=0||!(w&&y==="M"&&S===Math.round(S)||g&&y==="L"||g&&y==="D"&&(S===1||S===2))?T:v},U.tick0=function(v,m,g,w){if(m==="date")return h.cleanDate(v,h.dateTick0(g,w%p===0?1:0));if(!(w==="D1"||w==="D2"))return $(v)?Number(v):0}}}),Fr=i({"src/plots/cartesian/tick_value_defaults.js"(U,$){var h=dn(),c=kr().isArrayOrTypedArray,u=qe().isTypedArraySpec,p=qe().decodeTypedArraySpec;$.exports=function(m,g,w,l,T){T||(T={});var y=T.isMinor,S=y?m.minor||{}:m,R=y?g.minor:g,M=y?"minor.":"";function A(J){var H=S[J];return u(H)&&(H=p(H)),H!==void 0?H:(R._template||{})[J]}var C=A("tick0"),j=A("dtick"),b=A("tickvals"),k=c(b)?"array":j?"linear":"auto",E=w(M+"tickmode",k);if(E==="auto"||E==="sync")w(M+"nticks");else if(E==="linear"){var F=R.dtick=h.dtick(j,l);R.tick0=h.tick0(C,l,g.calendar,F)}else if(l!=="multicategory"){var P=w(M+"tickvals");P===void 0?R.tickmode="auto":y||w("ticktext")}}}}),ln=i({"src/plots/cartesian/tick_mark_defaults.js"(U,$){var h=kr(),c=es();$.exports=function(p,v,m,g){var w=g.isMinor,l=w?p.minor||{}:p,T=w?v.minor:v,y=w?c.minor:c,S=w?"minor.":"",R=h.coerce2(l,T,y,"ticklen",w?(v.ticklen||5)*.6:void 0),M=h.coerce2(l,T,y,"tickwidth",w?v.tickwidth||1:void 0),A=h.coerce2(l,T,y,"tickcolor",(w?v.tickcolor:void 0)||T.color),C=m(S+"ticks",!w&&g.outerTicks||R||M||A?"outside":"");C||(delete T.ticklen,delete T.tickwidth,delete T.tickcolor)}}}),$n=i({"src/plots/cartesian/show_dflt.js"(U,$){$.exports=function(c){var u=["showexponent","showtickprefix","showticksuffix"],p=u.filter(function(m){return c[m]!==void 0}),v=function(m){return c[m]===c[p[0]]};if(p.every(v)||p.length===1)return c[p[0]]}}}),Tn=i({"src/plots/array_container_defaults.js"(U,$){var h=kr(),c=Si();$.exports=function(p,v,m){var g=m.name,w=m.inclusionAttr||"visible",l=v[g],T=h.isArrayOrTypedArray(p[g])?p[g]:[],y=v[g]=[],S=c.arrayTemplater(v,g,w),R,M;for(R=0;R<T.length;R++){var A=T[R];h.isPlainObject(A)?M=S.newItem(A):(M=S.newItem({}),M[w]=!1),M._index=R,M[w]!==!1&&m.handleItemDefaults(A,M,v,m),y.push(M)}var C=S.defaultItems();for(R=0;R<C.length;R++)M=C[R],M._index=y.length,m.handleItemDefaults({},M,v,m,{}),y.push(M);if(h.isArrayOrTypedArray(l)){var j=Math.min(l.length,y.length);for(R=0;R<j;R++)h.relinkPrivateKeys(y[R],l[R])}return y}}}),Ii=i({"src/plots/cartesian/tick_label_defaults.js"(U,$){var h=kr(),c=pt().contrast,u=es(),p=$n(),v=Tn();$.exports=function(w,l,T,y,S){S||(S={});var R=T("labelalias");h.isPlainObject(R)||delete l.labelalias;var M=p(w),A=T("showticklabels");if(A){S.noTicklabelshift||T("ticklabelshift"),S.noTicklabelstandoff||T("ticklabelstandoff");var C=S.font||{},j=l.color,b=l.ticklabelposition||"",k=b.indexOf("inside")!==-1?c(S.bgColor):j&&j!==u.color.dflt?j:C.color;if(h.coerceFont(T,"tickfont",C,{overrideDflt:{color:k}}),!S.noTicklabelstep&&y!=="multicategory"&&y!=="log"&&T("ticklabelstep"),!S.noAng){var E=T("tickangle");!S.noAutotickangles&&E==="auto"&&T("autotickangles")}if(y!=="category"){var F=T("tickformat");v(w,l,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:m}),l.tickformatstops.length||delete l.tickformatstops,!S.noExp&&!F&&y!=="date"&&(T("showexponent",M),T("exponentformat"),T("minexponent"),T("separatethousands"))}}};function m(g,w){function l(y,S){return h.coerce(g,w,u.tickformatstops,y,S)}var T=l("enabled");T&&(l("dtickrange"),l("value"))}}}),ma=i({"src/plots/cartesian/prefix_suffix_defaults.js"(U,$){var h=$n();$.exports=function(u,p,v,m,g){g||(g={});var w=g.tickSuffixDflt,l=h(u),T=v("tickprefix");T&&v("showtickprefix",l);var y=v("ticksuffix",w);y&&v("showticksuffix",l)}}}),Da=i({"src/components/colorbar/defaults.js"(U,$){var h=kr(),c=Si(),u=Fr(),p=ln(),v=Ii(),m=ma(),g=nl();$.exports=function(l,T,y){var S=c.newContainer(T,"colorbar"),R=l.colorbar||{};function M(ce,de){return h.coerce(R,S,g,ce,de)}var A=y.margin||{t:0,b:0,l:0,r:0},C=y.width-A.l-A.r,j=y.height-A.t-A.b,b=M("orientation"),k=b==="v",E=M("thicknessmode");M("thickness",E==="fraction"?30/(k?C:j):30);var F=M("lenmode");M("len",F==="fraction"?1:k?j:C);var P=M("yref"),J=M("xref"),H=P==="paper",Y=J==="paper",Z,z,q,X="left";k?(q="middle",X=Y?"left":"right",Z=Y?1.02:1,z=.5):(q=H?"bottom":"top",X="center",Z=.5,z=H?1.02:1),h.coerce(R,S,{x:{valType:"number",min:Y?-2:0,max:Y?3:1,dflt:Z}},"x"),h.coerce(R,S,{y:{valType:"number",min:H?-2:0,max:H?3:1,dflt:z}},"y"),M("xanchor",X),M("xpad"),M("yanchor",q),M("ypad"),h.noneOrAll(R,S,["x","y"]),M("outlinecolor"),M("outlinewidth"),M("bordercolor"),M("borderwidth"),M("bgcolor");var Q=h.coerce(R,S,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:k?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");M("ticklabeloverflow",Q.indexOf("inside")!==-1?"hide past domain":"hide past div"),u(R,S,M,"linear");var ee=y.font,ne={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:ee};Q.indexOf("inside")!==-1&&(ne.bgColor="black"),m(R,S,M,"linear",ne),v(R,S,M,"linear",ne),p(R,S,M,"linear",ne),M("title.text",y._dfltTitle.colorbar);var le=S.showticklabels?S.tickfont:ee,W=h.extendFlat({},ee,{family:le.family,size:h.bigFont(le.size)});h.coerceFont(M,"title.font",W),M("title.side",k?"top":"right")}}}),Ga=i({"src/components/colorscale/defaults.js"(U,$){var h=xe(),c=kr(),u=nn(),p=Da(),v=gt().isValid,m=mn().traceIs;function g(w,l){var T=l.slice(0,l.length-1);return l?c.nestedProperty(w,T).get()||{}:w}$.exports=function w(l,T,y,S,R){var M=R.prefix,A=R.cLetter,C="_module"in T,j=g(l,M),b=g(T,M),k=g(T._template||{},M)||{},E=function(){return delete l.coloraxis,delete T.coloraxis,w(l,T,y,S,R)};if(C){var F=y._colorAxes||{},P=S(M+"coloraxis");if(P){var J=m(T,"contour")&&c.nestedProperty(T,"contours.coloring").get()||"heatmap",H=F[P];H?(H[2].push(E),H[0]!==J&&(H[0]=!1,c.warn(["Ignoring coloraxis:",P,"setting","as it is linked to incompatible colorscales."].join(" ")))):F[P]=[J,T,[E]];return}}var Y=j[A+"min"],Z=j[A+"max"],z=h(Y)&&h(Z)&&Y<Z,q=S(M+A+"auto",!z);q?S(M+A+"mid"):(S(M+A+"min"),S(M+A+"max"));var X=j.colorscale,Q=k.colorscale,ee;if(X!==void 0&&(ee=!v(X)),Q!==void 0&&(ee=!v(Q)),S(M+"autocolorscale",ee),S(M+"colorscale"),S(M+"reversescale"),M!=="marker.line."){var ne;M&&C&&(ne=u(j));var le=S(M+"showscale",ne);le&&(M&&k&&(b._template=k),p(j,b,y))}}}}),Nl=i({"src/components/colorscale/layout_defaults.js"(U,$){var h=kr(),c=Si(),u=ur(),p=Ga();$.exports=function(m,g){function w(C,j){return h.coerce(m,g,u,C,j)}w("colorscale.sequential"),w("colorscale.sequentialminus"),w("colorscale.diverging");var l=g._colorAxes,T,y;function S(C,j){return h.coerce(T,y,u.coloraxis,C,j)}for(var R in l){var M=l[R];if(M[0])T=m[R]||{},y=c.newContainer(g,R,"coloraxis"),y._name=R,p(T,y,g,S,{prefix:"",cLetter:"c"});else{for(var A=0;A<M[2].length;A++)M[2][A]();delete g._colorAxes[R]}}}}}),Wo=i({"src/components/colorscale/cross_trace_defaults.js"(U,$){var h=kr(),c=ds().hasColorscale,u=ds().extractOpts;$.exports=function(v,m){function g(M,A){var C=M["_"+A];C!==void 0&&(M[A]=C)}function w(M,A){var C=A.container?h.nestedProperty(M,A.container).get():M;if(C)if(C.coloraxis)C._colorAx=m[C.coloraxis];else{var j=u(C),b=j.auto;(b||j.min===void 0)&&g(C,A.min),(b||j.max===void 0)&&g(C,A.max),j.autocolorscale&&g(C,"colorscale")}}for(var l=0;l<v.length;l++){var T=v[l],y=T._module.colorbar;if(y)if(Array.isArray(y))for(var S=0;S<y.length;S++)w(T,y[S]);else w(T,y);c(T,"marker.line")&&w(T,{container:"marker.line",min:"cmin",max:"cmax"})}for(var R in m._colorAxes)w(m[R],{min:"cmin",max:"cmax"})}}}),wc=i({"src/components/colorscale/calc.js"(U,$){var h=xe(),c=kr(),u=ds().extractOpts;$.exports=function(v,m,g){var w=v._fullLayout,l=g.vals,T=g.containerStr,y=T?c.nestedProperty(m,T).get():m,S=u(y),R=S.auto!==!1,M=S.min,A=S.max,C=S.mid,j=function(){return c.aggNums(Math.min,null,l)},b=function(){return c.aggNums(Math.max,null,l)};if(M===void 0?M=j():R&&(y._colorAx&&h(M)?M=Math.min(M,j()):M=j()),A===void 0?A=b():R&&(y._colorAx&&h(A)?A=Math.max(A,b()):A=b()),R&&C!==void 0&&(A-C>C-M?M=C-(A-C):A-C<C-M&&(A=C+(C-M))),M===A&&(M-=.5,A+=.5),S._sync("min",M),S._sync("max",A),S.autocolorscale){var k;M*A<0?k=w.colorscale.diverging:M>=0?k=w.colorscale.sequential:k=w.colorscale.sequentialminus,S._sync("colorscale",k)}}}}),il=i({"src/components/colorscale/index.js"(U,$){var h=gt(),c=ds();$.exports={moduleType:"component",name:"colorscale",attributes:ct(),layoutAttributes:ur(),supplyLayoutDefaults:Nl(),handleDefaults:Ga(),crossTraceDefaults:Wo(),calc:wc(),scales:h.scales,defaultScale:h.defaultScale,getScale:h.get,isValidScale:h.isValid,hasColorscale:c.hasColorscale,extractOpts:c.extractOpts,extractScale:c.extractScale,flipScale:c.flipScale,makeColorScaleFunc:c.makeColorScaleFunc,makeColorScaleFuncFromTrace:c.makeColorScaleFuncFromTrace}}}),Ia=i({"src/traces/scatter/subtypes.js"(U,$){var h=kr(),c=qe().isTypedArraySpec;$.exports={hasLines:function(u){return u.visible&&u.mode&&u.mode.indexOf("lines")!==-1},hasMarkers:function(u){return u.visible&&(u.mode&&u.mode.indexOf("markers")!==-1||u.type==="splom")},hasText:function(u){return u.visible&&u.mode&&u.mode.indexOf("text")!==-1},isBubble:function(u){var p=u.marker;return h.isPlainObject(p)&&(h.isArrayOrTypedArray(p.size)||c(p.size))}}}}),zl=i({"src/traces/scatter/make_bubble_size_func.js"(U,$){var h=xe();$.exports=function(u,p){p||(p=2);var v=u.marker,m=v.sizeref||1,g=v.sizemin||0,w=v.sizemode==="area"?function(l){return Math.sqrt(l/m)}:function(l){return l/m};return function(l){var T=w(l/p);return h(T)&&T>0?Math.max(T,g):0}}}}),ts=i({"src/components/fx/helpers.js"(U){var $=kr();U.getSubplot=function(m){return m.subplot||m.xaxis+m.yaxis||m.geo},U.isTraceInSubplots=function(m,g){if(m.type==="splom"){for(var w=m.xaxes||[],l=m.yaxes||[],T=0;T<w.length;T++)for(var y=0;y<l.length;y++)if(g.indexOf(w[T]+l[y])!==-1)return!0;return!1}return g.indexOf(U.getSubplot(m))!==-1},U.flat=function(m,g){for(var w=new Array(m.length),l=0;l<m.length;l++)w[l]=g;return w},U.p2c=function(m,g){for(var w=new Array(m.length),l=0;l<m.length;l++)w[l]=m[l].p2c(g);return w},U.getDistanceFunction=function(m,g,w,l){return m==="closest"?l||U.quadrature(g,w):m.charAt(0)==="x"?g:w},U.getClosest=function(m,g,w){if(w.index!==!1)w.index>=0&&w.index<m.length?w.distance=0:w.index=!1;else for(var l=1/0,T=m.length,y=0;y<T;y++)l=g(m[y]),l<=w.distance&&(w.index=y,w.distance=l);return w},U.inbox=function(m,g,w){return m*g<0||m===0?w:1/0},U.quadrature=function(m,g){return function(w){var l=m(w),T=g(w);return Math.sqrt(l*l+T*T)}},U.makeEventData=function(m,g,w){var l="index"in m?m.index:m.pointNumber,T={data:g._input,fullData:g,curveNumber:g.index,pointNumber:l};if(g._indexToPoints){var y=g._indexToPoints[l];y.length===1?T.pointIndex=y[0]:T.pointIndices=y}else T.pointIndex=l;return g._module.eventData?T=g._module.eventData(T,m,g,w,l):("xVal"in m?T.x=m.xVal:"x"in m&&(T.x=m.x),"yVal"in m?T.y=m.yVal:"y"in m&&(T.y=m.y),m.xa&&(T.xaxis=m.xa),m.ya&&(T.yaxis=m.ya),m.zLabelVal!==void 0&&(T.z=m.zLabelVal)),U.appendArrayPointValue(T,g,l),T},U.appendArrayPointValue=function(m,g,w){var l=g._arrayAttrs;if(l)for(var T=0;T<l.length;T++){var y=l[T],S=c(y);if(m[S]===void 0){var R=$.nestedProperty(g,y).get(),M=u(R,w);M!==void 0&&(m[S]=M)}}},U.appendArrayMultiPointValues=function(m,g,w){var l=g._arrayAttrs;if(l)for(var T=0;T<l.length;T++){var y=l[T],S=c(y);if(m[S]===void 0){for(var R=$.nestedProperty(g,y).get(),M=new Array(w.length),A=0;A<w.length;A++)M[A]=u(R,w[A]);m[S]=M}}};var h={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function c(m){return h[m]||m}function u(m,g){if(Array.isArray(g)){if(Array.isArray(m)&&Array.isArray(m[g[0]]))return m[g[0]][g[1]]}else return m[g]}var p={x:!0,y:!0},v={"x unified":!0,"y unified":!0};U.isUnifiedHover=function(m){return typeof m!="string"?!1:!!v[m]},U.isXYhover=function(m){return typeof m!="string"?!1:!!p[m]}}}),al=i({"node_modules/parse-svg-path/index.js"(U,$){$.exports=u;var h={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function u(m){var g=[];return m.replace(c,function(w,l,T){var y=l.toLowerCase();for(T=v(T),y=="m"&&T.length>2&&(g.push([l].concat(T.splice(0,2))),y="l",l=l=="m"?"l":"L");;){if(T.length==h[y])return T.unshift(l),g.push(T);if(T.length<h[y])throw new Error("malformed path data");g.push([l].concat(T.splice(0,h[y])))}}),g}var p=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function v(m){var g=m.match(p);return g?g.map(Number):[]}}}),sl=i({"src/components/drawing/symbol_defs.js"(U,$){var h=al(),c=function(A,C){return C?Math.round(A*(C=Math.pow(10,C)))/C:Math.round(A)},u="M0,0Z",p=Math.sqrt(2),v=Math.sqrt(3),m=Math.PI,g=Math.cos,w=Math.sin;$.exports={circle:{n:0,f:function(A,C,j){if(l(C))return u;var b=c(A,2),k="M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z";return j?M(C,j,k):k}},square:{n:1,f:function(A,C,j){if(l(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z")}},diamond:{n:2,f:function(A,C,j){if(l(C))return u;var b=c(A*1.3,2);return M(C,j,"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z")}},cross:{n:3,f:function(A,C,j){if(l(C))return u;var b=c(A*.4,2),k=c(A*1.2,2);return M(C,j,"M"+k+","+b+"H"+b+"V"+k+"H-"+b+"V"+b+"H-"+k+"V-"+b+"H-"+b+"V-"+k+"H"+b+"V-"+b+"H"+k+"Z")}},x:{n:4,f:function(A,C,j){if(l(C))return u;var b=c(A*.8/p,2),k="l"+b+","+b,E="l"+b+",-"+b,F="l-"+b+",-"+b,P="l-"+b+","+b;return M(C,j,"M0,"+b+k+E+F+E+F+P+F+P+k+P+k+"Z")}},"triangle-up":{n:5,f:function(A,C,j){if(l(C))return u;var b=c(A*2/v,2),k=c(A/2,2),E=c(A,2);return M(C,j,"M-"+b+","+k+"H"+b+"L0,-"+E+"Z")}},"triangle-down":{n:6,f:function(A,C,j){if(l(C))return u;var b=c(A*2/v,2),k=c(A/2,2),E=c(A,2);return M(C,j,"M-"+b+",-"+k+"H"+b+"L0,"+E+"Z")}},"triangle-left":{n:7,f:function(A,C,j){if(l(C))return u;var b=c(A*2/v,2),k=c(A/2,2),E=c(A,2);return M(C,j,"M"+k+",-"+b+"V"+b+"L-"+E+",0Z")}},"triangle-right":{n:8,f:function(A,C,j){if(l(C))return u;var b=c(A*2/v,2),k=c(A/2,2),E=c(A,2);return M(C,j,"M-"+k+",-"+b+"V"+b+"L"+E+",0Z")}},"triangle-ne":{n:9,f:function(A,C,j){if(l(C))return u;var b=c(A*.6,2),k=c(A*1.2,2);return M(C,j,"M-"+k+",-"+b+"H"+b+"V"+k+"Z")}},"triangle-se":{n:10,f:function(A,C,j){if(l(C))return u;var b=c(A*.6,2),k=c(A*1.2,2);return M(C,j,"M"+b+",-"+k+"V"+b+"H-"+k+"Z")}},"triangle-sw":{n:11,f:function(A,C,j){if(l(C))return u;var b=c(A*.6,2),k=c(A*1.2,2);return M(C,j,"M"+k+","+b+"H-"+b+"V-"+k+"Z")}},"triangle-nw":{n:12,f:function(A,C,j){if(l(C))return u;var b=c(A*.6,2),k=c(A*1.2,2);return M(C,j,"M-"+b+","+k+"V-"+b+"H"+k+"Z")}},pentagon:{n:13,f:function(A,C,j){if(l(C))return u;var b=c(A*.951,2),k=c(A*.588,2),E=c(-A,2),F=c(A*-.309,2),P=c(A*.809,2);return M(C,j,"M"+b+","+F+"L"+k+","+P+"H-"+k+"L-"+b+","+F+"L0,"+E+"Z")}},hexagon:{n:14,f:function(A,C,j){if(l(C))return u;var b=c(A,2),k=c(A/2,2),E=c(A*v/2,2);return M(C,j,"M"+E+",-"+k+"V"+k+"L0,"+b+"L-"+E+","+k+"V-"+k+"L0,-"+b+"Z")}},hexagon2:{n:15,f:function(A,C,j){if(l(C))return u;var b=c(A,2),k=c(A/2,2),E=c(A*v/2,2);return M(C,j,"M-"+k+","+E+"H"+k+"L"+b+",0L"+k+",-"+E+"H-"+k+"L-"+b+",0Z")}},octagon:{n:16,f:function(A,C,j){if(l(C))return u;var b=c(A*.924,2),k=c(A*.383,2);return M(C,j,"M-"+k+",-"+b+"H"+k+"L"+b+",-"+k+"V"+k+"L"+k+","+b+"H-"+k+"L-"+b+","+k+"V-"+k+"Z")}},star:{n:17,f:function(A,C,j){if(l(C))return u;var b=A*1.4,k=c(b*.225,2),E=c(b*.951,2),F=c(b*.363,2),P=c(b*.588,2),J=c(-b,2),H=c(b*-.309,2),Y=c(b*.118,2),Z=c(b*.809,2),z=c(b*.382,2);return M(C,j,"M"+k+","+H+"H"+E+"L"+F+","+Y+"L"+P+","+Z+"L0,"+z+"L-"+P+","+Z+"L-"+F+","+Y+"L-"+E+","+H+"H-"+k+"L0,"+J+"Z")}},hexagram:{n:18,f:function(A,C,j){if(l(C))return u;var b=c(A*.66,2),k=c(A*.38,2),E=c(A*.76,2);return M(C,j,"M-"+E+",0l-"+k+",-"+b+"h"+E+"l"+k+",-"+b+"l"+k+","+b+"h"+E+"l-"+k+","+b+"l"+k+","+b+"h-"+E+"l-"+k+","+b+"l-"+k+",-"+b+"h-"+E+"Z")}},"star-triangle-up":{n:19,f:function(A,C,j){if(l(C))return u;var b=c(A*v*.8,2),k=c(A*.8,2),E=c(A*1.6,2),F=c(A*4,2),P="A "+F+","+F+" 0 0 1 ";return M(C,j,"M-"+b+","+k+P+b+","+k+P+"0,-"+E+P+"-"+b+","+k+"Z")}},"star-triangle-down":{n:20,f:function(A,C,j){if(l(C))return u;var b=c(A*v*.8,2),k=c(A*.8,2),E=c(A*1.6,2),F=c(A*4,2),P="A "+F+","+F+" 0 0 1 ";return M(C,j,"M"+b+",-"+k+P+"-"+b+",-"+k+P+"0,"+E+P+b+",-"+k+"Z")}},"star-square":{n:21,f:function(A,C,j){if(l(C))return u;var b=c(A*1.1,2),k=c(A*2,2),E="A "+k+","+k+" 0 0 1 ";return M(C,j,"M-"+b+",-"+b+E+"-"+b+","+b+E+b+","+b+E+b+",-"+b+E+"-"+b+",-"+b+"Z")}},"star-diamond":{n:22,f:function(A,C,j){if(l(C))return u;var b=c(A*1.4,2),k=c(A*1.9,2),E="A "+k+","+k+" 0 0 1 ";return M(C,j,"M-"+b+",0"+E+"0,"+b+E+b+",0"+E+"0,-"+b+E+"-"+b+",0Z")}},"diamond-tall":{n:23,f:function(A,C,j){if(l(C))return u;var b=c(A*.7,2),k=c(A*1.4,2);return M(C,j,"M0,"+k+"L"+b+",0L0,-"+k+"L-"+b+",0Z")}},"diamond-wide":{n:24,f:function(A,C,j){if(l(C))return u;var b=c(A*1.4,2),k=c(A*.7,2);return M(C,j,"M0,"+k+"L"+b+",0L0,-"+k+"L-"+b+",0Z")}},hourglass:{n:25,f:function(A,C,j){if(l(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z")},noDot:!0},bowtie:{n:26,f:function(A,C,j){if(l(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z")},noDot:!0},"circle-cross":{n:27,f:function(A,C,j){if(l(C))return u;var b=c(A,2);return M(C,j,"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(A,C,j){if(l(C))return u;var b=c(A,2),k=c(A/p,2);return M(C,j,"M"+k+","+k+"L-"+k+",-"+k+"M"+k+",-"+k+"L-"+k+","+k+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(A,C,j){if(l(C))return u;var b=c(A,2);return M(C,j,"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(A,C,j){if(l(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(A,C,j){if(l(C))return u;var b=c(A*1.3,2);return M(C,j,"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(A,C,j){if(l(C))return u;var b=c(A*1.3,2),k=c(A*.65,2);return M(C,j,"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+k+",-"+k+"L"+k+","+k+"M-"+k+","+k+"L"+k+",-"+k)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(A,C,j){if(l(C))return u;var b=c(A*1.4,2);return M(C,j,"M0,"+b+"V-"+b+"M"+b+",0H-"+b)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(A,C,j){if(l(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(A,C,j){if(l(C))return u;var b=c(A*1.2,2),k=c(A*.85,2);return M(C,j,"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+k+","+k+"L-"+k+",-"+k+"M"+k+",-"+k+"L-"+k+","+k)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(A,C,j){if(l(C))return u;var b=c(A/2,2),k=c(A,2);return M(C,j,"M"+b+","+k+"V-"+k+"M"+(b-k)+",-"+k+"V"+k+"M"+k+","+b+"H-"+k+"M-"+k+","+(b-k)+"H"+k)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(A,C,j){if(l(C))return u;var b=c(A*1.2,2),k=c(A*1.6,2),E=c(A*.8,2);return M(C,j,"M-"+b+","+E+"L0,0M"+b+","+E+"L0,0M0,-"+k+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(A,C,j){if(l(C))return u;var b=c(A*1.2,2),k=c(A*1.6,2),E=c(A*.8,2);return M(C,j,"M-"+b+",-"+E+"L0,0M"+b+",-"+E+"L0,0M0,"+k+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(A,C,j){if(l(C))return u;var b=c(A*1.2,2),k=c(A*1.6,2),E=c(A*.8,2);return M(C,j,"M"+E+","+b+"L0,0M"+E+",-"+b+"L0,0M-"+k+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(A,C,j){if(l(C))return u;var b=c(A*1.2,2),k=c(A*1.6,2),E=c(A*.8,2);return M(C,j,"M-"+E+","+b+"L0,0M-"+E+",-"+b+"L0,0M"+k+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(A,C,j){if(l(C))return u;var b=c(A*1.4,2);return M(C,j,"M"+b+",0H-"+b)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(A,C,j){if(l(C))return u;var b=c(A*1.4,2);return M(C,j,"M0,"+b+"V-"+b)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(A,C,j){if(l(C))return u;var b=c(A,2);return M(C,j,"M"+b+",-"+b+"L-"+b+","+b)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(A,C,j){if(l(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"L-"+b+",-"+b)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(A,C,j){if(l(C))return u;var b=c(A,2),k=c(A*2,2);return M(C,j,"M0,0L-"+b+","+k+"H"+b+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(A,C,j){if(l(C))return u;var b=c(A,2),k=c(A*2,2);return M(C,j,"M0,0L-"+b+",-"+k+"H"+b+"Z")},noDot:!0},"arrow-left":{n:47,f:function(A,C,j){if(l(C))return u;var b=c(A*2,2),k=c(A,2);return M(C,j,"M0,0L"+b+",-"+k+"V"+k+"Z")},noDot:!0},"arrow-right":{n:48,f:function(A,C,j){if(l(C))return u;var b=c(A*2,2),k=c(A,2);return M(C,j,"M0,0L-"+b+",-"+k+"V"+k+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(A,C,j){if(l(C))return u;var b=c(A,2),k=c(A*2,2);return M(C,j,"M-"+b+",0H"+b+"M0,0L-"+b+","+k+"H"+b+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(A,C,j){if(l(C))return u;var b=c(A,2),k=c(A*2,2);return M(C,j,"M-"+b+",0H"+b+"M0,0L-"+b+",-"+k+"H"+b+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(A,C,j){if(l(C))return u;var b=c(A*2,2),k=c(A,2);return M(C,j,"M0,-"+k+"V"+k+"M0,0L"+b+",-"+k+"V"+k+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(A,C,j){if(l(C))return u;var b=c(A*2,2),k=c(A,2);return M(C,j,"M0,-"+k+"V"+k+"M0,0L-"+b+",-"+k+"V"+k+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(A,C,j){if(l(C))return u;var b=m/2.5,k=2*A*g(b),E=2*A*w(b);return M(C,j,"M0,0L"+-k+","+E+"L"+k+","+E+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(A,C,j){if(l(C))return u;var b=m/4,k=2*A*g(b),E=2*A*w(b);return M(C,j,"M0,0L"+-k+","+E+"A "+2*A+","+2*A+" 0 0 1 "+k+","+E+"Z")},backoff:.4,noDot:!0}};function l(A){return A===null}var T,y,S,R;function M(A,C,j){if((!A||A%360===0)&&!C)return j;if(S===A&&R===C&&T===j)return y;S=A,R=C,T=j;function b(ee,ne){var le=g(ee),W=w(ee),ce=ne[0],de=ne[1]+(C||0);return[ce*le-de*W,ce*W+de*le]}for(var k=A/180*m,E=0,F=0,P=h(j),J="",H=0;H<P.length;H++){var Y=P[H],Z=Y[0],z=E,q=F;if(Z==="M"||Z==="L")E=+Y[1],F=+Y[2];else if(Z==="m"||Z==="l")E+=+Y[1],F+=+Y[2];else if(Z==="H")E=+Y[1];else if(Z==="h")E+=+Y[1];else if(Z==="V")F=+Y[1];else if(Z==="v")F+=+Y[1];else if(Z==="A"){E=+Y[1],F=+Y[2];var X=b(k,[+Y[6],+Y[7]]);Y[6]=X[0],Y[7]=X[1],Y[3]=+Y[3]+A}(Z==="H"||Z==="V")&&(Z="L"),(Z==="h"||Z==="v")&&(Z="l"),(Z==="m"||Z==="l")&&(E-=z,F-=q);var Q=b(k,[E,F]);(Z==="H"||Z==="V")&&(Z="L"),(Z==="M"||Z==="L"||Z==="m"||Z==="l")&&(Y[1]=Q[0],Y[2]=Q[1]),Y[0]=Z,J+=Y[0]+Y.slice(1).join(",")}return y=J,J}}}),di=i({"src/components/drawing/index.js"(U,$){var h=d(),c=kr(),u=c.numberFormat,p=xe(),v=wt(),m=mn(),g=pt(),w=il(),l=c.strTranslate,T=Ra(),y=qs(),S=La(),R=S.LINE_SPACING,M=Zt().DESELECTDIM,A=Ia(),C=zl(),j=ts().appendArrayPointValue,b=$.exports={};b.font=function(Ae,Fe){var ke=Fe.variant,Be=Fe.style,et=Fe.weight,ht=Fe.color,jt=Fe.size,At=Fe.family,Pt=Fe.shadow,zt=Fe.lineposition,Nt=Fe.textcase;At&&Ae.style("font-family",At),jt+1&&Ae.style("font-size",jt+"px"),ht&&Ae.call(g.fill,ht),et&&Ae.style("font-weight",et),Be&&Ae.style("font-style",Be),ke&&Ae.style("font-variant",ke),Nt&&Ae.style("text-transform",k(F(Nt))),Pt&&Ae.style("text-shadow",Pt==="auto"?T.makeTextShadow(g.contrast(ht)):k(Pt)),zt&&Ae.style("text-decoration-line",k(P(zt)))};function k(Ae){return Ae==="none"?void 0:Ae}var E={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function F(Ae){return E[Ae]}function P(Ae){return Ae.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}b.setPosition=function(Ae,Fe,ke){Ae.attr("x",Fe).attr("y",ke)},b.setSize=function(Ae,Fe,ke){Ae.attr("width",Fe).attr("height",ke)},b.setRect=function(Ae,Fe,ke,Be,et){Ae.call(b.setPosition,Fe,ke).call(b.setSize,Be,et)},b.translatePoint=function(Ae,Fe,ke,Be){var et=ke.c2p(Ae.x),ht=Be.c2p(Ae.y);if(p(et)&&p(ht)&&Fe.node())Fe.node().nodeName==="text"?Fe.attr("x",et).attr("y",ht):Fe.attr("transform",l(et,ht));else return!1;return!0},b.translatePoints=function(Ae,Fe,ke){Ae.each(function(Be){var et=h.select(this);b.translatePoint(Be,et,Fe,ke)})},b.hideOutsideRangePoint=function(Ae,Fe,ke,Be,et,ht){Fe.attr("display",ke.isPtWithinRange(Ae,et)&&Be.isPtWithinRange(Ae,ht)?null:"none")},b.hideOutsideRangePoints=function(Ae,Fe){if(Fe._hasClipOnAxisFalse){var ke=Fe.xaxis,Be=Fe.yaxis;Ae.each(function(et){var ht=et[0].trace,jt=ht.xcalendar,At=ht.ycalendar,Pt=m.traceIs(ht,"bar-like")?".bartext":".point,.textpoint";Ae.selectAll(Pt).each(function(zt){b.hideOutsideRangePoint(zt,h.select(this),ke,Be,jt,At)})})}},b.crispRound=function(Ae,Fe,ke){return!Fe||!p(Fe)?ke||0:Ae._context.staticPlot?Fe:Fe<1?1:Math.round(Fe)},b.singleLineStyle=function(Ae,Fe,ke,Be,et){Fe.style("fill","none");var ht=(((Ae||[])[0]||{}).trace||{}).line||{},jt=ke||ht.width||0,At=et||ht.dash||"";g.stroke(Fe,Be||ht.color),b.dashLine(Fe,At,jt)},b.lineGroupStyle=function(Ae,Fe,ke,Be){Ae.style("fill","none").each(function(et){var ht=(((et||[])[0]||{}).trace||{}).line||{},jt=Fe||ht.width||0,At=Be||ht.dash||"";h.select(this).call(g.stroke,ke||ht.color).call(b.dashLine,At,jt)})},b.dashLine=function(Ae,Fe,ke){ke=+ke||0,Fe=b.dashStyle(Fe,ke),Ae.style({"stroke-dasharray":Fe,"stroke-width":ke+"px"})},b.dashStyle=function(Ae,Fe){Fe=+Fe||1;var ke=Math.max(Fe,3);return Ae==="solid"?Ae="":Ae==="dot"?Ae=ke+"px,"+ke+"px":Ae==="dash"?Ae=3*ke+"px,"+3*ke+"px":Ae==="longdash"?Ae=5*ke+"px,"+5*ke+"px":Ae==="dashdot"?Ae=3*ke+"px,"+ke+"px,"+ke+"px,"+ke+"px":Ae==="longdashdot"&&(Ae=5*ke+"px,"+2*ke+"px,"+ke+"px,"+2*ke+"px"),Ae};function J(Ae,Fe,ke,Be){var et=Fe.fillpattern,ht=Fe.fillgradient,jt=et&&b.getPatternAttr(et.shape,0,"");if(jt){var At=b.getPatternAttr(et.bgcolor,0,null),Pt=b.getPatternAttr(et.fgcolor,0,null),zt=et.fgopacity,Nt=b.getPatternAttr(et.size,0,8),Kt=b.getPatternAttr(et.solidity,0,.3),_t=Fe.uid;b.pattern(Ae,"point",ke,_t,jt,Nt,Kt,void 0,et.fillmode,At,Pt,zt)}else if(ht&&ht.type!=="none"){var Qt=ht.type,fr="scatterfill-"+Fe.uid;if(Be&&(fr="legendfill-"+Fe.uid),!Be&&(ht.start!==void 0||ht.stop!==void 0)){var Vt,rr;Qt==="horizontal"?(Vt={x:ht.start,y:0},rr={x:ht.stop,y:0}):Qt==="vertical"&&(Vt={x:0,y:ht.start},rr={x:0,y:ht.stop}),Vt.x=Fe._xA.c2p(Vt.x===void 0?Fe._extremes.x.min[0].val:Vt.x,!0),Vt.y=Fe._yA.c2p(Vt.y===void 0?Fe._extremes.y.min[0].val:Vt.y,!0),rr.x=Fe._xA.c2p(rr.x===void 0?Fe._extremes.x.max[0].val:rr.x,!0),rr.y=Fe._yA.c2p(rr.y===void 0?Fe._extremes.y.max[0].val:rr.y,!0),Ae.call(Q,ke,fr,"linear",ht.colorscale,"fill",Vt,rr,!0,!1)}else Qt==="horizontal"&&(Qt=Qt+"reversed"),Ae.call(b.gradient,ke,fr,Qt,ht.colorscale,"fill")}else Fe.fillcolor&&Ae.call(g.fill,Fe.fillcolor)}b.singleFillStyle=function(Ae,Fe){var ke=h.select(Ae.node()),Be=ke.data(),et=((Be[0]||[])[0]||{}).trace||{};J(Ae,et,Fe,!1)},b.fillGroupStyle=function(Ae,Fe,ke){Ae.style("stroke-width",0).each(function(Be){var et=h.select(this);Be[0].trace&&J(et,Be[0].trace,Fe,ke)})};var H=sl();b.symbolNames=[],b.symbolFuncs=[],b.symbolBackOffs=[],b.symbolNeedLines={},b.symbolNoDot={},b.symbolNoFill={},b.symbolList=[],Object.keys(H).forEach(function(Ae){var Fe=H[Ae],ke=Fe.n;b.symbolList.push(ke,String(ke),Ae,ke+100,String(ke+100),Ae+"-open"),b.symbolNames[ke]=Ae,b.symbolFuncs[ke]=Fe.f,b.symbolBackOffs[ke]=Fe.backoff||0,Fe.needLine&&(b.symbolNeedLines[ke]=!0),Fe.noDot?b.symbolNoDot[ke]=!0:b.symbolList.push(ke+200,String(ke+200),Ae+"-dot",ke+300,String(ke+300),Ae+"-open-dot"),Fe.noFill&&(b.symbolNoFill[ke]=!0)});var Y=b.symbolNames.length,Z="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";b.symbolNumber=function(Ae){if(p(Ae))Ae=+Ae;else if(typeof Ae=="string"){var Fe=0;Ae.indexOf("-open")>0&&(Fe=100,Ae=Ae.replace("-open","")),Ae.indexOf("-dot")>0&&(Fe+=200,Ae=Ae.replace("-dot","")),Ae=b.symbolNames.indexOf(Ae),Ae>=0&&(Ae+=Fe)}return Ae%100>=Y||Ae>=400?0:Math.floor(Math.max(Ae,0))};function z(Ae,Fe,ke,Be){var et=Ae%100;return b.symbolFuncs[et](Fe,ke,Be)+(Ae>=200?Z:"")}var q=u("~f"),X={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};b.gradient=function(Ae,Fe,ke,Be,et,ht){var jt=X[Be];return Q(Ae,Fe,ke,jt.type,et,ht,jt.start,jt.stop,!1,jt.reversed)};function Q(Ae,Fe,ke,Be,et,ht,jt,At,Pt,zt){var Nt=et.length,Kt;Be==="linear"?Kt={node:"linearGradient",attrs:{x1:jt.x,y1:jt.y,x2:At.x,y2:At.y,gradientUnits:Pt?"userSpaceOnUse":"objectBoundingBox"},reversed:zt}:Be==="radial"&&(Kt={node:"radialGradient",reversed:zt});for(var _t=new Array(Nt),Qt=0;Qt<Nt;Qt++)Kt.reversed?_t[Nt-1-Qt]=[q((1-et[Qt][0])*100),et[Qt][1]]:_t[Qt]=[q(et[Qt][0]*100),et[Qt][1]];var fr=Fe._fullLayout,Vt="g"+fr._uid+"-"+ke,rr=fr._defs.select(".gradients").selectAll("#"+Vt).data([Be+_t.join(";")],c.identity);rr.exit().remove(),rr.enter().append(Kt.node).each(function(){var Ne=h.select(this);Kt.attrs&&Ne.attr(Kt.attrs),Ne.attr("id",Vt);var $e=Ne.selectAll("stop").data(_t);$e.exit().remove(),$e.enter().append("stop"),$e.each(function(Ue){var fe=v(Ue[1]);h.select(this).attr({offset:Ue[0]+"%","stop-color":g.tinyRGB(fe),"stop-opacity":fe.getAlpha()})})}),Ae.style(ht,V(Vt,Fe)).style(ht+"-opacity",null),Ae.classed("gradient_filled",!0)}b.pattern=function(Ae,Fe,ke,Be,et,ht,jt,At,Pt,zt,Nt,Kt){var _t=Fe==="legend";At&&(Pt==="overlay"?(zt=At,Nt=g.contrast(zt)):(zt=void 0,Nt=At));var Qt=ke._fullLayout,fr="p"+Qt._uid+"-"+Be,Vt,rr,Ne=function(at,Ct,Ht,Ut,Ar){return Ut+(Ar-Ut)*(at-Ct)/(Ht-Ct)},$e,Ue,fe,je,Pe={},Re=v(Nt),tt=g.tinyRGB(Re),nt=Re.getAlpha(),dt=Kt*nt;switch(et){case"/":Vt=ht*Math.sqrt(2),rr=ht*Math.sqrt(2),$e="M-"+Vt/4+","+rr/4+"l"+Vt/2+",-"+rr/2+"M0,"+rr+"L"+Vt+",0M"+Vt/4*3+","+rr/4*5+"l"+Vt/2+",-"+rr/2,Ue=jt*ht,je="path",Pe={d:$e,opacity:dt,stroke:tt,"stroke-width":Ue+"px"};break;case"\\":Vt=ht*Math.sqrt(2),rr=ht*Math.sqrt(2),$e="M"+Vt/4*3+",-"+rr/4+"l"+Vt/2+","+rr/2+"M0,0L"+Vt+","+rr+"M-"+Vt/4+","+rr/4*3+"l"+Vt/2+","+rr/2,Ue=jt*ht,je="path",Pe={d:$e,opacity:dt,stroke:tt,"stroke-width":Ue+"px"};break;case"x":Vt=ht*Math.sqrt(2),rr=ht*Math.sqrt(2),$e="M-"+Vt/4+","+rr/4+"l"+Vt/2+",-"+rr/2+"M0,"+rr+"L"+Vt+",0M"+Vt/4*3+","+rr/4*5+"l"+Vt/2+",-"+rr/2+"M"+Vt/4*3+",-"+rr/4+"l"+Vt/2+","+rr/2+"M0,0L"+Vt+","+rr+"M-"+Vt/4+","+rr/4*3+"l"+Vt/2+","+rr/2,Ue=ht-ht*Math.sqrt(1-jt),je="path",Pe={d:$e,opacity:dt,stroke:tt,"stroke-width":Ue+"px"};break;case"|":Vt=ht,rr=ht,je="path",$e="M"+Vt/2+",0L"+Vt/2+","+rr,Ue=jt*ht,je="path",Pe={d:$e,opacity:dt,stroke:tt,"stroke-width":Ue+"px"};break;case"-":Vt=ht,rr=ht,je="path",$e="M0,"+rr/2+"L"+Vt+","+rr/2,Ue=jt*ht,je="path",Pe={d:$e,opacity:dt,stroke:tt,"stroke-width":Ue+"px"};break;case"+":Vt=ht,rr=ht,je="path",$e="M"+Vt/2+",0L"+Vt/2+","+rr+"M0,"+rr/2+"L"+Vt+","+rr/2,Ue=ht-ht*Math.sqrt(1-jt),je="path",Pe={d:$e,opacity:dt,stroke:tt,"stroke-width":Ue+"px"};break;case".":Vt=ht,rr=ht,jt<Math.PI/4?fe=Math.sqrt(jt*ht*ht/Math.PI):fe=Ne(jt,Math.PI/4,1,ht/2,ht/Math.sqrt(2)),je="circle",Pe={cx:Vt/2,cy:rr/2,r:fe,opacity:dt,fill:tt};break}var St=[et||"noSh",zt||"noBg",Nt||"noFg",ht,jt].join(";"),Dt=Qt._defs.select(".patterns").selectAll("#"+fr).data([St],c.identity);Dt.exit().remove(),Dt.enter().append("pattern").each(function(){var at=h.select(this);if(at.attr({id:fr,width:Vt+"px",height:rr+"px",patternUnits:"userSpaceOnUse",patternTransform:_t?"scale(0.8)":""}),zt){var Ct=v(zt),Ht=g.tinyRGB(Ct),Ut=Ct.getAlpha(),Ar=at.selectAll("rect").data([0]);Ar.exit().remove(),Ar.enter().append("rect").attr({width:Vt+"px",height:rr+"px",fill:Ht,"fill-opacity":Ut})}var Rr=at.selectAll(je).data([0]);Rr.exit().remove(),Rr.enter().append(je).attr(Pe)}),Ae.style("fill",V(fr,ke)).style("fill-opacity",null),Ae.classed("pattern_filled",!0)},b.initGradients=function(Ae){var Fe=Ae._fullLayout,ke=c.ensureSingle(Fe._defs,"g","gradients");ke.selectAll("linearGradient,radialGradient").remove(),h.select(Ae).selectAll(".gradient_filled").classed("gradient_filled",!1)},b.initPatterns=function(Ae){var Fe=Ae._fullLayout,ke=c.ensureSingle(Fe._defs,"g","patterns");ke.selectAll("pattern").remove(),h.select(Ae).selectAll(".pattern_filled").classed("pattern_filled",!1)},b.getPatternAttr=function(Ae,Fe,ke){return Ae&&c.isArrayOrTypedArray(Ae)?Fe<Ae.length?Ae[Fe]:ke:Ae},b.pointStyle=function(Ae,Fe,ke,Be){if(Ae.size()){var et=b.makePointStyleFns(Fe);Ae.each(function(ht){b.singlePointStyle(ht,h.select(this),Fe,et,ke,Be)})}},b.singlePointStyle=function(Ae,Fe,ke,Be,et,ht){var jt=ke.marker,At=jt.line;if(ht&&ht.i>=0&&Ae.i===void 0&&(Ae.i=ht.i),Fe.style("opacity",Be.selectedOpacityFn?Be.selectedOpacityFn(Ae):Ae.mo===void 0?jt.opacity:Ae.mo),Be.ms2mrc){var Pt;Ae.ms==="various"||jt.size==="various"?Pt=3:Pt=Be.ms2mrc(Ae.ms),Ae.mrc=Pt,Be.selectedSizeFn&&(Pt=Ae.mrc=Be.selectedSizeFn(Ae));var zt=b.symbolNumber(Ae.mx||jt.symbol)||0;Ae.om=zt%200>=100;var Nt=vt(Ae,ke),Kt=B(Ae,ke);Fe.attr("d",z(zt,Pt,Nt,Kt))}var _t=!1,Qt,fr,Vt;if(Ae.so)Vt=At.outlierwidth,fr=At.outliercolor,Qt=jt.outliercolor;else{var rr=(At||{}).width;Vt=(Ae.mlw+1||rr+1||(Ae.trace?(Ae.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Ae?fr=Ae.mlcc=Be.lineScale(Ae.mlc):c.isArrayOrTypedArray(At.color)?fr=g.defaultLine:fr=At.color,c.isArrayOrTypedArray(jt.color)&&(Qt=g.defaultLine,_t=!0),"mc"in Ae?Qt=Ae.mcc=Be.markerScale(Ae.mc):Qt=jt.color||jt.colors||"rgba(0,0,0,0)",Be.selectedColorFn&&(Qt=Be.selectedColorFn(Ae))}if(Ae.om)Fe.call(g.stroke,Qt).style({"stroke-width":(Vt||1)+"px",fill:"none"});else{Fe.style("stroke-width",(Ae.isBlank?0:Vt)+"px");var Ne=jt.gradient,$e=Ae.mgt;$e?_t=!0:$e=Ne&&Ne.type,c.isArrayOrTypedArray($e)&&($e=$e[0],X[$e]||($e=0));var Ue=jt.pattern,fe=Ue&&b.getPatternAttr(Ue.shape,Ae.i,"");if($e&&$e!=="none"){var je=Ae.mgc;je?_t=!0:je=Ne.color;var Pe=ke.uid;_t&&(Pe+="-"+Ae.i),b.gradient(Fe,et,Pe,$e,[[0,je],[1,Qt]],"fill")}else if(fe){var Re=!1,tt=Ue.fgcolor;!tt&&ht&&ht.color&&(tt=ht.color,Re=!0);var nt=b.getPatternAttr(tt,Ae.i,ht&&ht.color||null),dt=b.getPatternAttr(Ue.bgcolor,Ae.i,null),St=Ue.fgopacity,Dt=b.getPatternAttr(Ue.size,Ae.i,8),at=b.getPatternAttr(Ue.solidity,Ae.i,.3);Re=Re||Ae.mcc||c.isArrayOrTypedArray(Ue.shape)||c.isArrayOrTypedArray(Ue.bgcolor)||c.isArrayOrTypedArray(Ue.fgcolor)||c.isArrayOrTypedArray(Ue.size)||c.isArrayOrTypedArray(Ue.solidity);var Ct=ke.uid;Re&&(Ct+="-"+Ae.i),b.pattern(Fe,"point",et,Ct,fe,Dt,at,Ae.mcc,Ue.fillmode,dt,nt,St)}else c.isArrayOrTypedArray(Qt)?g.fill(Fe,Qt[Ae.i]):g.fill(Fe,Qt);Vt&&g.stroke(Fe,fr)}},b.makePointStyleFns=function(Ae){var Fe={},ke=Ae.marker;return Fe.markerScale=b.tryColorscale(ke,""),Fe.lineScale=b.tryColorscale(ke,"line"),m.traceIs(Ae,"symbols")&&(Fe.ms2mrc=A.isBubble(Ae)?C(Ae):function(){return(ke.size||6)/2}),Ae.selectedpoints&&c.extendFlat(Fe,b.makeSelectedPointStyleFns(Ae)),Fe},b.makeSelectedPointStyleFns=function(Ae){var Fe={},ke=Ae.selected||{},Be=Ae.unselected||{},et=Ae.marker||{},ht=ke.marker||{},jt=Be.marker||{},At=et.opacity,Pt=ht.opacity,zt=jt.opacity,Nt=Pt!==void 0,Kt=zt!==void 0;(c.isArrayOrTypedArray(At)||Nt||Kt)&&(Fe.selectedOpacityFn=function(fe){var je=fe.mo===void 0?et.opacity:fe.mo;return fe.selected?Nt?Pt:je:Kt?zt:M*je});var _t=et.color,Qt=ht.color,fr=jt.color;(Qt||fr)&&(Fe.selectedColorFn=function(fe){var je=fe.mcc||_t;return fe.selected?Qt||je:fr||je});var Vt=et.size,rr=ht.size,Ne=jt.size,$e=rr!==void 0,Ue=Ne!==void 0;return m.traceIs(Ae,"symbols")&&($e||Ue)&&(Fe.selectedSizeFn=function(fe){var je=fe.mrc||Vt/2;return fe.selected?$e?rr/2:je:Ue?Ne/2:je}),Fe},b.makeSelectedTextStyleFns=function(Ae){var Fe={},ke=Ae.selected||{},Be=Ae.unselected||{},et=Ae.textfont||{},ht=ke.textfont||{},jt=Be.textfont||{},At=et.color,Pt=ht.color,zt=jt.color;return Fe.selectedTextColorFn=function(Nt){var Kt=Nt.tc||At;return Nt.selected?Pt||Kt:zt||(Pt?Kt:g.addOpacity(Kt,M))},Fe},b.selectedPointStyle=function(Ae,Fe){if(!(!Ae.size()||!Fe.selectedpoints)){var ke=b.makeSelectedPointStyleFns(Fe),Be=Fe.marker||{},et=[];ke.selectedOpacityFn&&et.push(function(ht,jt){ht.style("opacity",ke.selectedOpacityFn(jt))}),ke.selectedColorFn&&et.push(function(ht,jt){g.fill(ht,ke.selectedColorFn(jt))}),ke.selectedSizeFn&&et.push(function(ht,jt){var At=jt.mx||Be.symbol||0,Pt=ke.selectedSizeFn(jt);ht.attr("d",z(b.symbolNumber(At),Pt,vt(jt,Fe),B(jt,Fe))),jt.mrc2=Pt}),et.length&&Ae.each(function(ht){for(var jt=h.select(this),At=0;At<et.length;At++)et[At](jt,ht)})}},b.tryColorscale=function(Ae,Fe){var ke=Fe?c.nestedProperty(Ae,Fe).get():Ae;if(ke){var Be=ke.color;if((ke.colorscale||ke._colorAx)&&c.isArrayOrTypedArray(Be))return w.makeColorScaleFuncFromTrace(ke)}return c.identity};var ee={start:1,end:-1,middle:0,bottom:1,top:-1};function ne(Ae,Fe,ke,Be,et){var ht=h.select(Ae.node().parentNode),jt=Fe.indexOf("top")!==-1?"top":Fe.indexOf("bottom")!==-1?"bottom":"middle",At=Fe.indexOf("left")!==-1?"end":Fe.indexOf("right")!==-1?"start":"middle",Pt=Be?Be/.8+1:0,zt=(T.lineCount(Ae)-1)*R+1,Nt=ee[At]*Pt,Kt=ke*.75+ee[jt]*Pt+(ee[jt]-1)*zt*ke/2;Ae.attr("text-anchor",At),et||ht.attr("transform",l(Nt,Kt))}function le(Ae,Fe){var ke=Ae.ts||Fe.textfont.size;return p(ke)&&ke>0?ke:0}b.textPointStyle=function(Ae,Fe,ke){if(Ae.size()){var Be;if(Fe.selectedpoints){var et=b.makeSelectedTextStyleFns(Fe);Be=et.selectedTextColorFn}var ht=Fe.texttemplate,jt=ke._fullLayout;Ae.each(function(At){var Pt=h.select(this),zt=ht?c.extractOption(At,Fe,"txt","texttemplate"):c.extractOption(At,Fe,"tx","text");if(!zt&&zt!==0){Pt.remove();return}if(ht){var Nt=Fe._module.formatLabels,Kt=Nt?Nt(At,Fe,jt):{},_t={};j(_t,Fe,At.i);var Qt=Fe._meta||{};zt=c.texttemplateString(zt,Kt,jt._d3locale,_t,At,Qt)}var fr=At.tp||Fe.textposition,Vt=le(At,Fe),rr=Be?Be(At):At.tc||Fe.textfont.color;Pt.call(b.font,{family:At.tf||Fe.textfont.family,weight:At.tw||Fe.textfont.weight,style:At.ty||Fe.textfont.style,variant:At.tv||Fe.textfont.variant,textcase:At.tC||Fe.textfont.textcase,lineposition:At.tE||Fe.textfont.lineposition,shadow:At.tS||Fe.textfont.shadow,size:Vt,color:rr}).text(zt).call(T.convertToTspans,ke).call(ne,fr,Vt,At.mrc)})}},b.selectedTextStyle=function(Ae,Fe){if(!(!Ae.size()||!Fe.selectedpoints)){var ke=b.makeSelectedTextStyleFns(Fe);Ae.each(function(Be){var et=h.select(this),ht=ke.selectedTextColorFn(Be),jt=Be.tp||Fe.textposition,At=le(Be,Fe);g.fill(et,ht);var Pt=m.traceIs(Fe,"bar-like");ne(et,jt,At,Be.mrc2||Be.mrc,Pt)})}};var W=.5;b.smoothopen=function(Ae,Fe){if(Ae.length<3)return"M"+Ae.join("L");var ke="M"+Ae[0],Be=[],et;for(et=1;et<Ae.length-1;et++)Be.push(Ee(Ae[et-1],Ae[et],Ae[et+1],Fe));for(ke+="Q"+Be[0][0]+" "+Ae[1],et=2;et<Ae.length-1;et++)ke+="C"+Be[et-2][1]+" "+Be[et-1][0]+" "+Ae[et];return ke+="Q"+Be[Ae.length-3][1]+" "+Ae[Ae.length-1],ke},b.smoothclosed=function(Ae,Fe){if(Ae.length<3)return"M"+Ae.join("L")+"Z";var ke="M"+Ae[0],Be=Ae.length-1,et=[Ee(Ae[Be],Ae[0],Ae[1],Fe)],ht;for(ht=1;ht<Be;ht++)et.push(Ee(Ae[ht-1],Ae[ht],Ae[ht+1],Fe));for(et.push(Ee(Ae[Be-1],Ae[Be],Ae[0],Fe)),ht=1;ht<=Be;ht++)ke+="C"+et[ht-1][1]+" "+et[ht][0]+" "+Ae[ht];return ke+="C"+et[Be][1]+" "+et[0][0]+" "+Ae[0]+"Z",ke};var ce,de;function pe(Ae,Fe,ke){return ke&&(Ae=te(Ae)),Fe?be(Ae[1]):he(Ae[0])}function he(Ae){var Fe=h.round(Ae,2);return ce=Fe,Fe}function be(Ae){var Fe=h.round(Ae,2);return de=Fe,Fe}function Ee(Ae,Fe,ke,Be){var et=Ae[0]-Fe[0],ht=Ae[1]-Fe[1],jt=ke[0]-Fe[0],At=ke[1]-Fe[1],Pt=Math.pow(et*et+ht*ht,W/2),zt=Math.pow(jt*jt+At*At,W/2),Nt=(zt*zt*et-Pt*Pt*jt)*Be,Kt=(zt*zt*ht-Pt*Pt*At)*Be,_t=3*zt*(Pt+zt),Qt=3*Pt*(Pt+zt);return[[he(Fe[0]+(_t&&Nt/_t)),be(Fe[1]+(_t&&Kt/_t))],[he(Fe[0]-(Qt&&Nt/Qt)),be(Fe[1]-(Qt&&Kt/Qt))]]}var Te={hv:function(Ae,Fe,ke){return"H"+he(Fe[0])+"V"+pe(Fe,1,ke)},vh:function(Ae,Fe,ke){return"V"+be(Fe[1])+"H"+pe(Fe,0,ke)},hvh:function(Ae,Fe,ke){return"H"+he((Ae[0]+Fe[0])/2)+"V"+be(Fe[1])+"H"+pe(Fe,0,ke)},vhv:function(Ae,Fe,ke){return"V"+be((Ae[1]+Fe[1])/2)+"H"+he(Fe[0])+"V"+pe(Fe,1,ke)}},He=function(Ae,Fe,ke){return"L"+pe(Fe,0,ke)+","+pe(Fe,1,ke)};b.steps=function(Ae){var Fe=Te[Ae]||He;return function(ke){for(var Be="M"+he(ke[0][0])+","+be(ke[0][1]),et=ke.length,ht=1;ht<et;ht++)Be+=Fe(ke[ht-1],ke[ht],ht===et-1);return Be}};function te(Ae,Fe){var ke=Ae.backoff,Be=Ae.trace,et=Ae.d,ht=Ae.i;if(ke&&Be&&Be.marker&&Be.marker.angle%360===0&&Be.line&&Be.line.shape!=="spline"){var jt=c.isArrayOrTypedArray(ke),At=Ae,Pt=Fe?Fe[0]:ce||0,zt=Fe?Fe[1]:de||0,Nt=At[0],Kt=At[1],_t=Nt-Pt,Qt=Kt-zt,fr=Math.atan2(Qt,_t),Vt=jt?ke[ht]:ke;if(Vt==="auto"){var rr=At.i;Be.type==="scatter"&&rr--;var Ne=At.marker,$e=Ne.symbol;c.isArrayOrTypedArray($e)&&($e=$e[rr]);var Ue=Ne.size;c.isArrayOrTypedArray(Ue)&&(Ue=Ue[rr]),Vt=Ne?b.symbolBackOffs[b.symbolNumber($e)]*Ue:0,Vt+=b.getMarkerStandoff(et[rr],Be)||0}var fe=Nt-Vt*Math.cos(fr),je=Kt-Vt*Math.sin(fr);(fe<=Nt&&fe>=Pt||fe>=Nt&&fe<=Pt)&&(je<=Kt&&je>=zt||je>=Kt&&je<=zt)&&(Ae=[fe,je])}return Ae}b.applyBackoff=te,b.makeTester=function(){var Ae=c.ensureSingleById(h.select("body"),"svg","js-plotly-tester",function(ke){ke.attr(y.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Fe=c.ensureSingle(Ae,"path","js-reference-point",function(ke){ke.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});b.tester=Ae,b.testref=Fe},b.savedBBoxes={};var ae=0,G=1e4;b.bBox=function(Ae,Fe,ke){ke||(ke=K(Ae));var Be;if(ke){if(Be=b.savedBBoxes[ke],Be)return c.extendFlat({},Be)}else if(Ae.childNodes.length===1){var et=Ae.childNodes[0];if(ke=K(et),ke){var ht=+et.getAttribute("x")||0,jt=+et.getAttribute("y")||0,At=et.getAttribute("transform");if(!At){var Pt=b.bBox(et,!1,ke);return ht&&(Pt.left+=ht,Pt.right+=ht),jt&&(Pt.top+=jt,Pt.bottom+=jt),Pt}if(ke+="~"+ht+"~"+jt+"~"+At,Be=b.savedBBoxes[ke],Be)return c.extendFlat({},Be)}}var zt,Nt;Fe?zt=Ae:(Nt=b.tester.node(),zt=Ae.cloneNode(!0),Nt.appendChild(zt)),h.select(zt).attr("transform",null).call(T.positionText,0,0);var Kt=zt.getBoundingClientRect(),_t=b.testref.node().getBoundingClientRect();Fe||Nt.removeChild(zt);var Qt={height:Kt.height,width:Kt.width,left:Kt.left-_t.left,top:Kt.top-_t.top,right:Kt.right-_t.left,bottom:Kt.bottom-_t.top};return ae>=G&&(b.savedBBoxes={},ae=0),ke&&(b.savedBBoxes[ke]=Qt),ae++,c.extendFlat({},Qt)};function K(Ae){var Fe=Ae.getAttribute("data-unformatted");if(Fe!==null)return Fe+Ae.getAttribute("data-math")+Ae.getAttribute("text-anchor")+Ae.getAttribute("style")}b.setClipUrl=function(Ae,Fe,ke){Ae.attr("clip-path",V(Fe,ke))};function V(Ae,Fe){if(!Ae)return null;var ke=Fe._context,Be=ke._exportedPlot?"":ke._baseUrl||"";return Be?"url('"+Be+"#"+Ae+"')":"url(#"+Ae+")"}b.getTranslate=function(Ae){var Fe=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,ke=Ae.attr?"attr":"getAttribute",Be=Ae[ke]("transform")||"",et=Be.replace(Fe,function(ht,jt,At){return[jt,At].join(" ")}).split(" ");return{x:+et[0]||0,y:+et[1]||0}},b.setTranslate=function(Ae,Fe,ke){var Be=/(\btranslate\(.*?\);?)/,et=Ae.attr?"attr":"getAttribute",ht=Ae.attr?"attr":"setAttribute",jt=Ae[et]("transform")||"";return Fe=Fe||0,ke=ke||0,jt=jt.replace(Be,"").trim(),jt+=l(Fe,ke),jt=jt.trim(),Ae[ht]("transform",jt),jt},b.getScale=function(Ae){var Fe=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,ke=Ae.attr?"attr":"getAttribute",Be=Ae[ke]("transform")||"",et=Be.replace(Fe,function(ht,jt,At){return[jt,At].join(" ")}).split(" ");return{x:+et[0]||1,y:+et[1]||1}},b.setScale=function(Ae,Fe,ke){var Be=/(\bscale\(.*?\);?)/,et=Ae.attr?"attr":"getAttribute",ht=Ae.attr?"attr":"setAttribute",jt=Ae[et]("transform")||"";return Fe=Fe||1,ke=ke||1,jt=jt.replace(Be,"").trim(),jt+="scale("+Fe+","+ke+")",jt=jt.trim(),Ae[ht]("transform",jt),jt};var re=/\s*sc.*/;b.setPointGroupScale=function(Ae,Fe,ke){if(Fe=Fe||1,ke=ke||1,!!Ae){var Be=Fe===1&&ke===1?"":"scale("+Fe+","+ke+")";Ae.each(function(){var et=(this.getAttribute("transform")||"").replace(re,"");et+=Be,et=et.trim(),this.setAttribute("transform",et)})}};var D=/translate\([^)]*\)\s*$/;b.setTextPointsScale=function(Ae,Fe,ke){Ae&&Ae.each(function(){var Be,et=h.select(this),ht=et.select("text");if(ht.node()){var jt=parseFloat(ht.attr("x")||0),At=parseFloat(ht.attr("y")||0),Pt=(et.attr("transform")||"").match(D);Fe===1&&ke===1?Be=[]:Be=[l(jt,At),"scale("+Fe+","+ke+")",l(-jt,-At)],Pt&&Be.push(Pt),et.attr("transform",Be.join(""))}})};function B(Ae,Fe){var ke;return Ae&&(ke=Ae.mf),ke===void 0&&(ke=Fe.marker&&Fe.marker.standoff||0),!Fe._geo&&!Fe._xA?-ke:ke}b.getMarkerStandoff=B;var oe=Math.atan2,ie=Math.cos,ge=Math.sin;function _e(Ae,Fe){var ke=Fe[0],Be=Fe[1];return[ke*ie(Ae)-Be*ge(Ae),ke*ge(Ae)+Be*ie(Ae)]}var Se,De,Ge,Je,yt,ut;function vt(Ae,Fe){var ke=Ae.ma;ke===void 0&&(ke=Fe.marker.angle,(!ke||c.isArrayOrTypedArray(ke))&&(ke=0));var Be,et,ht=Fe.marker.angleref;if(ht==="previous"||ht==="north"){if(Fe._geo){var jt=Fe._geo.project(Ae.lonlat);Be=jt[0],et=jt[1]}else{var At=Fe._xA,Pt=Fe._yA;if(At&&Pt)Be=At.c2p(Ae.x),et=Pt.c2p(Ae.y);else return 90}if(Fe._geo){var zt=Ae.lonlat[0],Nt=Ae.lonlat[1],Kt=Fe._geo.project([zt,Nt+1e-5]),_t=Fe._geo.project([zt+1e-5,Nt]),Qt=oe(_t[1]-et,_t[0]-Be),fr=oe(Kt[1]-et,Kt[0]-Be),Vt;if(ht==="north")Vt=ke/180*Math.PI;else if(ht==="previous"){var rr=zt/180*Math.PI,Ne=Nt/180*Math.PI,$e=Se/180*Math.PI,Ue=De/180*Math.PI,fe=$e-rr,je=ie(Ue)*ge(fe),Pe=ge(Ue)*ie(Ne)-ie(Ue)*ge(Ne)*ie(fe);Vt=-oe(je,Pe)-Math.PI,Se=zt,De=Nt}var Re=_e(Qt,[ie(Vt),0]),tt=_e(fr,[ge(Vt),0]);ke=oe(Re[1]+tt[1],Re[0]+tt[0])/Math.PI*180,ht==="previous"&&!(ut===Fe.uid&&Ae.i===yt+1)&&(ke=null)}if(ht==="previous"&&!Fe._geo)if(ut===Fe.uid&&Ae.i===yt+1&&p(Be)&&p(et)){var nt=Be-Ge,dt=et-Je,St=Fe.line&&Fe.line.shape||"",Dt=St.slice(St.length-1);Dt==="h"&&(dt=0),Dt==="v"&&(nt=0),ke+=oe(dt,nt)/Math.PI*180+90}else ke=null}return Ge=Be,Je=et,yt=Ae.i,ut=Fe.uid,ke}b.getMarkerAngle=vt}}),ol=i({"src/components/titles/index.js"(U,$){var h=d(),c=xe(),u=Xi(),p=mn(),v=kr(),m=v.strTranslate,g=di(),w=pt(),l=Ra(),T=Zt(),y=La().OPPOSITE_SIDE,S=/ [XY][0-9]* /,R=1.6,M=1.6;function A(C,j,b){var k=C._fullLayout,E=b.propContainer,F=b.propName,P=b.placeholder,J=b.traceIndex,H=b.avoid||{},Y=b.attributes,Z=b.transform,z=b.containerGroup,q=1,X=E.title,Q=(X&&X.text?X.text:"").trim(),ee=!1,ne=X&&X.font?X.font:{},le=ne.family,W=ne.size,ce=ne.color,de=ne.weight,pe=ne.style,he=ne.variant,be=ne.textcase,Ee=ne.lineposition,Te=ne.shadow,He=b.subtitlePropName,te=!!He,ae=b.subtitlePlaceholder,G=(E.title||{}).subtitle||{text:"",font:{}},K=G.text.trim(),V=!1,re=1,D=G.font,B=D.family,oe=D.size,ie=D.color,ge=D.weight,_e=D.style,Se=D.variant,De=D.textcase,Ge=D.lineposition,Je=D.shadow,yt;F==="title.text"?yt="titleText":F.indexOf("axis")!==-1?yt="axisTitleText":F.indexOf("colorbar"!==-1)&&(yt="colorbarTitleText");var ut=C._context.edits[yt];function vt(_t,Qt){return _t===void 0||Qt===void 0?!1:_t.replace(S," % ")===Qt.replace(S," % ")}Q===""?q=0:vt(Q,P)&&(ut||(Q=""),q=.2,ee=!0),te&&(K===""?re=0:vt(K,ae)&&(ut||(K=""),re=.2,V=!0)),b._meta?Q=v.templateString(Q,b._meta):k._meta&&(Q=v.templateString(Q,k._meta));var Ae=Q||K||ut,Fe;z||(z=v.ensureSingle(k._infolayer,"g","g-"+j),Fe=k._hColorbarMoveTitle);var ke=z.selectAll("text."+j).data(Ae?[0]:[]);ke.enter().append("text"),ke.text(Q).attr("class",j),ke.exit().remove();var Be=null,et=j+"-subtitle",ht=K||ut;if(te&&ht&&(Be=z.selectAll("text."+et).data(ht?[0]:[]),Be.enter().append("text"),Be.text(K).attr("class",et),Be.exit().remove()),!Ae)return z;function jt(_t,Qt){v.syncOrAsync([At,Pt],{title:_t,subtitle:Qt})}function At(_t){var Qt=_t.title,fr=_t.subtitle,Vt;!Z&&Fe&&(Z={}),Z?(Vt="",Z.rotate&&(Vt+="rotate("+[Z.rotate,Y.x,Y.y]+")"),(Z.offset||Fe)&&(Vt+=m(0,(Z.offset||0)-(Fe||0)))):Vt=null,Qt.attr("transform",Vt);function rr(Pe){if(Pe){var Re=h.select(Pe.node().parentNode).select("."+et);if(!Re.empty()){var tt=Pe.node().getBBox();if(tt.height){var nt=tt.y+tt.height+R*oe;Re.attr("y",nt)}}}}if(Qt.style("opacity",q*w.opacity(ce)).call(g.font,{color:w.rgb(ce),size:h.round(W,2),family:le,weight:de,style:pe,variant:he,textcase:be,shadow:Te,lineposition:Ee}).attr(Y).call(l.convertToTspans,C,rr),fr){var Ne=z.select("."+j+"-math-group"),$e=Qt.node().getBBox(),Ue=Ne.node()?Ne.node().getBBox():void 0,fe=Ue?Ue.y+Ue.height+R*oe:$e.y+$e.height+M*oe,je=v.extendFlat({},Y,{y:fe});fr.attr("transform",Vt),fr.style("opacity",re*w.opacity(ie)).call(g.font,{color:w.rgb(ie),size:h.round(oe,2),family:B,weight:ge,style:_e,variant:Se,textcase:De,shadow:Je,lineposition:Ge}).attr(je).call(l.convertToTspans,C)}return u.previousPromises(C)}function Pt(_t){var Qt=_t.title,fr=h.select(Qt.node().parentNode);if(H&&H.selection&&H.side&&Q){fr.attr("transform",null);var Vt=y[H.side],rr=H.side==="left"||H.side==="top"?-1:1,Ne=c(H.pad)?H.pad:2,$e=g.bBox(fr.node()),Ue={t:0,b:0,l:0,r:0},fe=C._fullLayout._reservedMargin;for(var je in fe)for(var Pe in fe[je]){var Re=fe[je][Pe];Ue[Pe]=Math.max(Ue[Pe],Re)}var tt={left:Ue.l,top:Ue.t,right:k.width-Ue.r,bottom:k.height-Ue.b},nt=H.maxShift||rr*(tt[H.side]-$e[H.side]),dt=0;if(nt<0)dt=nt;else{var St=H.offsetLeft||0,Dt=H.offsetTop||0;$e.left-=St,$e.right-=St,$e.top-=Dt,$e.bottom-=Dt,H.selection.each(function(){var Ct=g.bBox(this);v.bBoxIntersect($e,Ct,Ne)&&(dt=Math.max(dt,rr*(Ct[H.side]-$e[Vt])+Ne))}),dt=Math.min(nt,dt),E._titleScoot=Math.abs(dt)}if(dt>0||nt<0){var at={left:[-dt,0],right:[dt,0],top:[0,-dt],bottom:[0,dt]}[H.side];fr.attr("transform",m(at[0],at[1]))}}}ke.call(jt,Be);function zt(_t,Qt){_t.text(Qt).on("mouseover.opacity",function(){h.select(this).transition().duration(T.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){h.select(this).transition().duration(T.HIDE_PLACEHOLDER).style("opacity",0)})}if(ut&&(Q?ke.on(".opacity",null):(zt(ke,P),ee=!0),ke.call(l.makeEditable,{gd:C}).on("edit",function(_t){J!==void 0?p.call("_guiRestyle",C,F,_t,J):p.call("_guiRelayout",C,F,_t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(jt)}).on("input",function(_t){this.text(_t||" ").call(l.positionText,Y.x,Y.y)}),te)){if(te&&!Q){var Nt=ke.node().getBBox(),Kt=Nt.y+Nt.height+M*oe;Be.attr("y",Kt)}K?Be.on(".opacity",null):(zt(Be,ae),V=!0),Be.call(l.makeEditable,{gd:C}).on("edit",function(_t){p.call("_guiRelayout",C,"title.subtitle.text",_t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(jt)}).on("input",function(_t){this.text(_t||" ").call(l.positionText,Be.attr("x"),Be.attr("y"))})}return ke.classed("js-placeholder",ee),Be&&Be.classed("js-placeholder",V),z}$.exports={draw:A,SUBTITLE_PADDING_EM:M,SUBTITLE_PADDING_MATHJAX_EM:R}}}),_c=i({"src/plots/cartesian/set_convert.js"(U,$){var h=d(),c=N().utcFormat,u=kr(),p=u.numberFormat,v=xe(),m=u.cleanNumber,g=u.ms2DateTime,w=u.dateTime2ms,l=u.ensureNumber,T=u.isArrayOrTypedArray,y=Ce(),S=y.FP_SAFE,R=y.BADNUM,M=y.LOG_CLIP,A=y.ONEWEEK,C=y.ONEDAY,j=y.ONEHOUR,b=y.ONEMIN,k=y.ONESEC,E=pa(),F=ha(),P=F.HOUR_PATTERN,J=F.WEEKDAY_PATTERN;function H(Z){return Math.pow(10,Z)}function Y(Z){return Z!=null}$.exports=function(z,q){q=q||{};var X=z._id||"x",Q=X.charAt(0);function ee(K,V){if(K>0)return Math.log(K)/Math.LN10;if(K<=0&&V&&z.range&&z.range.length===2){var re=z.range[0],D=z.range[1];return .5*(re+D-2*M*Math.abs(re-D))}else return R}function ne(K,V,re,D){if((D||{}).msUTC&&v(K))return+K;var B=w(K,re||z.calendar);if(B===R)if(v(K)){K=+K;var oe=Math.floor(u.mod(K+.05,1)*10),ie=Math.round(K-oe/10);B=w(new Date(ie))+oe/10}else return R;return B}function le(K,V,re){return g(K,V,re||z.calendar)}function W(K){return z._categories[Math.round(K)]}function ce(K){if(Y(K)){if(z._categoriesMap===void 0&&(z._categoriesMap={}),z._categoriesMap[K]!==void 0)return z._categoriesMap[K];z._categories.push(typeof K=="number"?String(K):K);var V=z._categories.length-1;return z._categoriesMap[K]=V,V}return R}function de(K,V){for(var re=new Array(V),D=0;D<V;D++){var B=(K[0]||[])[D],oe=(K[1]||[])[D];re[D]=pe([B,oe])}return re}function pe(K){if(z._categoriesMap)return z._categoriesMap[K]}function he(K){var V=pe(K);if(V!==void 0)return V;if(v(K))return+K}function be(K){return v(K)?+K:pe(K)}function Ee(K,V,re){return h.round(re+V*K,2)}function Te(K,V,re){return(K-re)/V}var He=function(V){return v(V)?Ee(V,z._m,z._b):R},te=function(K){return Te(K,z._m,z._b)};if(z.rangebreaks){var ae=Q==="y";He=function(K){if(!v(K))return R;var V=z._rangebreaks.length;if(!V)return Ee(K,z._m,z._b);var re=ae;z.range[0]>z.range[1]&&(re=!re);for(var D=re?-1:1,B=D*K,oe=0,ie=0;ie<V;ie++){var ge=D*z._rangebreaks[ie].min,_e=D*z._rangebreaks[ie].max;if(B<ge)break;if(B>_e)oe=ie+1;else{oe=B<(ge+_e)/2?ie:ie+1;break}}var Se=z._B[oe]||0;return isFinite(Se)?Ee(K,z._m2,Se):0},te=function(K){var V=z._rangebreaks.length;if(!V)return Te(K,z._m,z._b);for(var re=0,D=0;D<V&&!(K<z._rangebreaks[D].pmin);D++)K>z._rangebreaks[D].pmax&&(re=D+1);return Te(K,z._m2,z._B[re])}}z.c2l=z.type==="log"?ee:l,z.l2c=z.type==="log"?H:l,z.l2p=He,z.p2l=te,z.c2p=z.type==="log"?function(K,V){return He(ee(K,V))}:He,z.p2c=z.type==="log"?function(K){return H(te(K))}:te,["linear","-"].indexOf(z.type)!==-1?(z.d2r=z.r2d=z.d2c=z.r2c=z.d2l=z.r2l=m,z.c2d=z.c2r=z.l2d=z.l2r=l,z.d2p=z.r2p=function(K){return z.l2p(m(K))},z.p2d=z.p2r=te,z.cleanPos=l):z.type==="log"?(z.d2r=z.d2l=function(K,V){return ee(m(K),V)},z.r2d=z.r2c=function(K){return H(m(K))},z.d2c=z.r2l=m,z.c2d=z.l2r=l,z.c2r=ee,z.l2d=H,z.d2p=function(K,V){return z.l2p(z.d2r(K,V))},z.p2d=function(K){return H(te(K))},z.r2p=function(K){return z.l2p(m(K))},z.p2r=te,z.cleanPos=l):z.type==="date"?(z.d2r=z.r2d=u.identity,z.d2c=z.r2c=z.d2l=z.r2l=ne,z.c2d=z.c2r=z.l2d=z.l2r=le,z.d2p=z.r2p=function(K,V,re){return z.l2p(ne(K,0,re))},z.p2d=z.p2r=function(K,V,re){return le(te(K),V,re)},z.cleanPos=function(K){return u.cleanDate(K,R,z.calendar)}):z.type==="category"?(z.d2c=z.d2l=ce,z.r2d=z.c2d=z.l2d=W,z.d2r=z.d2l_noadd=he,z.r2c=function(K){var V=be(K);return V!==void 0?V:z.fraction2r(.5)},z.l2r=z.c2r=l,z.r2l=be,z.d2p=function(K){return z.l2p(z.r2c(K))},z.p2d=function(K){return W(te(K))},z.r2p=z.d2p,z.p2r=te,z.cleanPos=function(K){return typeof K=="string"&&K!==""?K:l(K)}):z.type==="multicategory"&&(z.r2d=z.c2d=z.l2d=W,z.d2r=z.d2l_noadd=he,z.r2c=function(K){var V=he(K);return V!==void 0?V:z.fraction2r(.5)},z.r2c_just_indices=pe,z.l2r=z.c2r=l,z.r2l=he,z.d2p=function(K){return z.l2p(z.r2c(K))},z.p2d=function(K){return W(te(K))},z.r2p=z.d2p,z.p2r=te,z.cleanPos=function(K){return Array.isArray(K)||typeof K=="string"&&K!==""?K:l(K)},z.setupMultiCategory=function(K){var V=z._traceIndices,re,D,B=z._matchGroup;if(B&&z._categories.length===0){for(var oe in B)if(oe!==X){var ie=q[E.id2name(oe)];V=V.concat(ie._traceIndices)}}var ge=[[0,{}],[0,{}]],_e=[];for(re=0;re<V.length;re++){var Se=K[V[re]];if(Q in Se){var De=Se[Q],Ge=Se._length||u.minRowLength(De);if(T(De[0])&&T(De[1]))for(D=0;D<Ge;D++){var Je=De[0][D],yt=De[1][D];Y(Je)&&Y(yt)&&(_e.push([Je,yt]),Je in ge[0][1]||(ge[0][1][Je]=ge[0][0]++),yt in ge[1][1]||(ge[1][1][yt]=ge[1][0]++))}}}for(_e.sort(function(ut,vt){var Ae=ge[0][1],Fe=Ae[ut[0]]-Ae[vt[0]];if(Fe)return Fe;var ke=ge[1][1];return ke[ut[1]]-ke[vt[1]]}),re=0;re<_e.length;re++)ce(_e[re])}),z.fraction2r=function(K){var V=z.r2l(z.range[0]),re=z.r2l(z.range[1]);return z.l2r(V+K*(re-V))},z.r2fraction=function(K){var V=z.r2l(z.range[0]),re=z.r2l(z.range[1]);return(z.r2l(K)-V)/(re-V)},z.limitRange=function(K){var V=z.minallowed,re=z.maxallowed;if(!(V===void 0&&re===void 0)){K||(K="range");var D=u.nestedProperty(z,K).get(),B=u.simpleMap(D,z.r2l),oe=B[1]<B[0];oe&&B.reverse();var ie=u.simpleMap([V,re],z.r2l);if(V!==void 0&&B[0]<ie[0]&&(D[oe?1:0]=V),re!==void 0&&B[1]>ie[1]&&(D[oe?0:1]=re),D[0]===D[1]){var ge=z.l2r(V),_e=z.l2r(re);if(V!==void 0){var Se=ge+1;re!==void 0&&(Se=Math.min(Se,_e)),D[oe?1:0]=Se}if(re!==void 0){var De=_e+1;V!==void 0&&(De=Math.max(De,ge)),D[oe?0:1]=De}}}},z.cleanRange=function(K,V){z._cleanRange(K,V),z.limitRange(K)},z._cleanRange=function(K,V){V||(V={}),K||(K="range");var re=u.nestedProperty(z,K).get(),D,B;if(z.type==="date"?B=u.dfltRange(z.calendar):Q==="y"?B=F.DFLTRANGEY:z._name==="realaxis"?B=[0,1]:B=V.dfltRange||F.DFLTRANGEX,B=B.slice(),(z.rangemode==="tozero"||z.rangemode==="nonnegative")&&(B[0]=0),!re||re.length!==2){u.nestedProperty(z,K).set(B);return}var oe=re[0]===null,ie=re[1]===null;for(z.type==="date"&&!z.autorange&&(re[0]=u.cleanDate(re[0],R,z.calendar),re[1]=u.cleanDate(re[1],R,z.calendar)),D=0;D<2;D++)if(z.type==="date"){if(!u.isDateTime(re[D],z.calendar)){z[K]=B;break}if(z.r2l(re[0])===z.r2l(re[1])){var ge=u.constrain(z.r2l(re[0]),u.MIN_MS+1e3,u.MAX_MS-1e3);re[0]=z.l2r(ge-1e3),re[1]=z.l2r(ge+1e3);break}}else{if(!v(re[D]))if(!(oe||ie)&&v(re[1-D]))re[D]=re[1-D]*(D?10:.1);else{z[K]=B;break}if(re[D]<-S?re[D]=-S:re[D]>S&&(re[D]=S),re[0]===re[1]){var _e=Math.max(1,Math.abs(re[0]*1e-6));re[0]-=_e,re[1]+=_e}}},z.setScale=function(K){var V=q._size;if(z.overlaying){var re=E.getFromId({_fullLayout:q},z.overlaying);z.domain=re.domain}var D=K&&z._r?"_r":"range",B=z.calendar;z.cleanRange(D);var oe=z.r2l(z[D][0],B),ie=z.r2l(z[D][1],B),ge=Q==="y";if(ge?(z._offset=V.t+(1-z.domain[1])*V.h,z._length=V.h*(z.domain[1]-z.domain[0]),z._m=z._length/(oe-ie),z._b=-z._m*ie):(z._offset=V.l+z.domain[0]*V.w,z._length=V.w*(z.domain[1]-z.domain[0]),z._m=z._length/(ie-oe),z._b=-z._m*oe),z._rangebreaks=[],z._lBreaks=0,z._m2=0,z._B=[],z.rangebreaks){var _e,Se;if(z._rangebreaks=z.locateBreaks(Math.min(oe,ie),Math.max(oe,ie)),z._rangebreaks.length){for(_e=0;_e<z._rangebreaks.length;_e++)Se=z._rangebreaks[_e],z._lBreaks+=Math.abs(Se.max-Se.min);var De=ge;oe>ie&&(De=!De),De&&z._rangebreaks.reverse();var Ge=De?-1:1;for(z._m2=Ge*z._length/(Math.abs(ie-oe)-z._lBreaks),z._B.push(-z._m2*(ge?ie:oe)),_e=0;_e<z._rangebreaks.length;_e++)Se=z._rangebreaks[_e],z._B.push(z._B[z._B.length-1]-Ge*z._m2*(Se.max-Se.min));for(_e=0;_e<z._rangebreaks.length;_e++)Se=z._rangebreaks[_e],Se.pmin=He(Se.min),Se.pmax=He(Se.max)}}if(!isFinite(z._m)||!isFinite(z._b)||z._length<0)throw q._replotting=!1,new Error("Something went wrong with axis scaling")},z.maskBreaks=function(K){var V=z.rangebreaks||[],re,D,B,oe,ie;V._cachedPatterns||(V._cachedPatterns=V.map(function(Ae){return Ae.enabled&&Ae.bounds?u.simpleMap(Ae.bounds,Ae.pattern?m:z.d2c):null})),V._cachedValues||(V._cachedValues=V.map(function(Ae){return Ae.enabled&&Ae.values?u.simpleMap(Ae.values,z.d2c).sort(u.sorterAsc):null}));for(var ge=0;ge<V.length;ge++){var _e=V[ge];if(_e.enabled){if(_e.bounds){var Se=_e.pattern;switch(re=V._cachedPatterns[ge],D=re[0],B=re[1],Se){case J:ie=new Date(K),oe=ie.getUTCDay(),D>B&&(B+=7,oe<D&&(oe+=7));break;case P:ie=new Date(K);var De=ie.getUTCHours(),Ge=ie.getUTCMinutes(),Je=ie.getUTCSeconds(),yt=ie.getUTCMilliseconds();oe=De+(Ge/60+Je/3600+yt/36e5),D>B&&(B+=24,oe<D&&(oe+=24));break;case"":oe=K;break}if(oe>=D&&oe<B)return R}else for(var ut=V._cachedValues[ge],vt=0;vt<ut.length;vt++)if(D=ut[vt],B=D+_e.dvalue,K>=D&&K<B)return R}}return K},z.locateBreaks=function(K,V){var re,D,B,oe,ie=[];if(!z.rangebreaks)return ie;var ge=z.rangebreaks.slice().sort(function(ke,Be){return ke.pattern===J&&Be.pattern===P?-1:Be.pattern===J&&ke.pattern===P?1:0}),_e=function(ke,Be){if(ke=u.constrain(ke,K,V),Be=u.constrain(Be,K,V),ke!==Be){for(var et=!0,ht=0;ht<ie.length;ht++){var jt=ie[ht];ke<jt.max&&Be>=jt.min&&(ke<jt.min&&(jt.min=ke),Be>jt.max&&(jt.max=Be),et=!1)}et&&ie.push({min:ke,max:Be})}};for(re=0;re<ge.length;re++){var Se=ge[re];if(Se.enabled)if(Se.bounds){var De=K,Ge=V;Se.pattern&&(De=Math.floor(De)),D=u.simpleMap(Se.bounds,Se.pattern?m:z.r2l),B=D[0],oe=D[1];var Je=new Date(De),yt,ut;switch(Se.pattern){case J:ut=A,yt=((oe<B?7:0)+(oe-B))*C,De+=B*C-(Je.getUTCDay()*C+Je.getUTCHours()*j+Je.getUTCMinutes()*b+Je.getUTCSeconds()*k+Je.getUTCMilliseconds());break;case P:ut=C,yt=((oe<B?24:0)+(oe-B))*j,De+=B*j-(Je.getUTCHours()*j+Je.getUTCMinutes()*b+Je.getUTCSeconds()*k+Je.getUTCMilliseconds());break;default:De=Math.min(D[0],D[1]),Ge=Math.max(D[0],D[1]),ut=Ge-De,yt=ut}for(var vt=De;vt<Ge;vt+=ut)_e(vt,vt+yt)}else for(var Ae=u.simpleMap(Se.values,z.d2c),Fe=0;Fe<Ae.length;Fe++)B=Ae[Fe],oe=B+Se.dvalue,_e(B,oe)}return ie.sort(function(ke,Be){return ke.min-Be.min}),ie},z.makeCalcdata=function(K,V,re){var D,B,oe,ie,ge=z.type,_e=ge==="date"&&K[V+"calendar"];if(V in K){if(D=K[V],ie=K._length||u.minRowLength(D),u.isTypedArray(D)&&(ge==="linear"||ge==="log")){if(ie===D.length)return D;if(D.subarray)return D.subarray(0,ie)}if(ge==="multicategory")return de(D,ie);for(B=new Array(ie),oe=0;oe<ie;oe++)B[oe]=z.d2c(D[oe],0,_e,re)}else{var Se=V+"0"in K?z.d2c(K[V+"0"],0,_e):0,De=K["d"+V]?Number(K["d"+V]):1;for(D=K[{x:"y",y:"x"}[V]],ie=K._length||D.length,B=new Array(ie),oe=0;oe<ie;oe++)B[oe]=Se+oe*De}if(z.rangebreaks)for(oe=0;oe<ie;oe++)B[oe]=z.maskBreaks(B[oe]);return B},z.isValidRange=function(K,V){return Array.isArray(K)&&K.length===2&&(V&&K[0]===null||v(z.r2l(K[0])))&&(V&&K[1]===null||v(z.r2l(K[1])))},z.getAutorangeDflt=function(K,V){var re=!z.isValidRange(K,"nullOk");return re&&V&&V.reverseDflt?re="reversed":K&&(K[0]===null&&K[1]===null?re=!0:K[0]===null&&K[1]!==null?re="min":K[0]!==null&&K[1]===null&&(re="max")),re},z.isReversed=function(){var K=z.autorange;return K==="reversed"||K==="min reversed"||K==="max reversed"},z.isPtWithinRange=function(K,V){var re=z.c2l(K[Q],null,V),D=z.r2l(z.range[0]),B=z.r2l(z.range[1]);return D<B?D<=re&&re<=B:B<=re&&re<=D},z._emptyCategories=function(){z._categories=[],z._categoriesMap={}},z.clearCalc=function(){var K=z._matchGroup;if(K){var V=null,re=null;for(var D in K){var B=q[E.id2name(D)];if(B._categories){V=B._categories,re=B._categoriesMap;break}}V&&re?(z._categories=V,z._categoriesMap=re):z._emptyCategories()}else z._emptyCategories();if(z._initialCategories)for(var oe=0;oe<z._initialCategories.length;oe++)ce(z._initialCategories[oe])},z.sortByInitialCategories=function(){var K=[];if(z._emptyCategories(),z._initialCategories)for(var V=0;V<z._initialCategories.length;V++)ce(z._initialCategories[V]);K=K.concat(z._traceIndices);var re=z._matchGroup;for(var D in re)if(X!==D){var B=q[E.id2name(D)];B._categories=z._categories,B._categoriesMap=z._categoriesMap,K=K.concat(B._traceIndices)}return K};var G=q._d3locale;z.type==="date"&&(z._dateFormat=G?G.timeFormat:c,z._extraFormat=q._extraFormat),z._separators=q.separators,z._numFormat=G?G.numberFormat:p,delete z._minDtick,delete z._forceTick0}}}),kc=i({"src/plots/cartesian/axis_autotype.js"(U,$){var h=xe(),c=kr(),u=Ce().BADNUM,p=c.isArrayOrTypedArray,v=c.isDateTime,m=c.cleanNumber,g=Math.round;$.exports=function(A,C,j){var b=A,k=j.noMultiCategory;if(p(b)&&!b.length)return"-";if(!k&&R(b))return"multicategory";if(k&&Array.isArray(b[0])){for(var E=[],F=0;F<b.length;F++)if(p(b[F]))for(var P=0;P<b[F].length;P++)E.push(b[F][P]);b=E}if(T(b,C))return"date";var J=j.autotypenumbers!=="strict";return S(b,J)?"category":l(b,J)?"linear":"-"};function w(M,A){return A?h(M):typeof M=="number"}function l(M,A){for(var C=M.length,j=0;j<C;j++)if(w(M[j],A))return!0;return!1}function T(M,A){for(var C=M.length,j=y(C),b=0,k=0,E={},F=0;F<C;F+=j){var P=g(F),J=M[P],H=String(J);E[H]||(E[H]=1,v(J,A)&&b++,h(J)&&k++)}return b>k*2}function y(M){return Math.max(1,(M-1)/1e3)}function S(M,A){for(var C=M.length,j=y(C),b=0,k=0,E={},F=0;F<C;F+=j){var P=g(F),J=M[P],H=String(J);if(!E[H]){E[H]=1;var Y=typeof J;Y==="boolean"?k++:(A?m(J)!==u:Y==="number")?b++:Y==="string"&&k++}}return k>b*2}function R(M){return p(M[0])&&p(M[1])}}}),jo=i({"src/plots/cartesian/autorange.js"(U,$){var h=d(),c=xe(),u=kr(),p=Ce().FP_SAFE,v=mn(),m=di(),g=pa(),w=g.getFromId,l=g.isLinked;$.exports={applyAutorangeOptions:z,getAutoRange:T,makePadFn:S,doAutoRange:C,findExtremes:j,concatExtremes:A};function T(q,X){var Q,ee,ne=[],le=q._fullLayout,W=S(le,X,0),ce=S(le,X,1),de=A(q,X),pe=de.min,he=de.max;if(pe.length===0||he.length===0)return u.simpleMap(X.range,X.r2l);var be=pe[0].val,Ee=he[0].val;for(Q=1;Q<pe.length&&be===Ee;Q++)be=Math.min(be,pe[Q].val);for(Q=1;Q<he.length&&be===Ee;Q++)Ee=Math.max(Ee,he[Q].val);var Te=X.autorange,He=Te==="reversed"||Te==="min reversed"||Te==="max reversed";if(!He&&X.range){var te=u.simpleMap(X.range,X.r2l);He=te[1]<te[0]}X.autorange==="reversed"&&(X.autorange=!0);var ae=X.rangemode,G=ae==="tozero",K=ae==="nonnegative",V=X._length,re=V/10,D=0,B,oe,ie,ge,_e,Se;for(Q=0;Q<pe.length;Q++)for(B=pe[Q],ee=0;ee<he.length;ee++)oe=he[ee],Se=oe.val-B.val-y(X,B.val,oe.val),Se>0&&(_e=V-W(B)-ce(oe),_e>re?Se/_e>D&&(ie=B,ge=oe,D=Se/_e):Se/V>D&&(ie={val:B.val,nopad:1},ge={val:oe.val,nopad:1},D=Se/V));function De(vt,Ae){return Math.max(vt,ce(Ae))}if(be===Ee){var Ge=be-1,Je=be+1;if(G)if(be===0)ne=[0,1];else{var yt=(be>0?he:pe).reduce(De,0),ut=be/(1-Math.min(.5,yt/V));ne=be>0?[0,ut]:[ut,0]}else K?ne=[Math.max(0,Ge),Math.max(1,Je)]:ne=[Ge,Je]}else G?(ie.val>=0&&(ie={val:0,nopad:1}),ge.val<=0&&(ge={val:0,nopad:1})):K&&(ie.val-D*W(ie)<0&&(ie={val:0,nopad:1}),ge.val<=0&&(ge={val:1,nopad:1})),D=(ge.val-ie.val-y(X,B.val,oe.val))/(V-W(ie)-ce(ge)),ne=[ie.val-D*W(ie),ge.val+D*ce(ge)];return ne=z(ne,X),X.limitRange&&X.limitRange(),He&&ne.reverse(),u.simpleMap(ne,X.l2r||Number)}function y(q,X,Q){var ee=0;if(q.rangebreaks)for(var ne=q.locateBreaks(X,Q),le=0;le<ne.length;le++){var W=ne[le];ee+=W.max-W.min}return ee}function S(q,X,Q){var ee=.05*X._length,ne=X._anchorAxis||{};if((X.ticklabelposition||"").indexOf("inside")!==-1||(ne.ticklabelposition||"").indexOf("inside")!==-1){var le=X.isReversed();if(!le){var W=u.simpleMap(X.range,X.r2l);le=W[1]<W[0]}le&&(Q=!Q)}var ce=0;return l(q,X._id)||(ce=M(q,X,Q)),ee=Math.max(ce,ee),X.constrain==="domain"&&X._inputDomain&&(ee*=(X._inputDomain[1]-X._inputDomain[0])/(X.domain[1]-X.domain[0])),function(pe){return pe.nopad?0:pe.pad+(pe.extrapad?ee:ce)}}var R=3;function M(q,X,Q){var ee=0,ne=X._id.charAt(0)==="x";for(var le in q._plots){var W=q._plots[le];if(!(X._id!==W.xaxis._id&&X._id!==W.yaxis._id)){var ce=(ne?W.yaxis:W.xaxis)||{};if((ce.ticklabelposition||"").indexOf("inside")!==-1&&(!Q&&(ce.side==="left"||ce.side==="bottom")||Q&&(ce.side==="top"||ce.side==="right"))){if(ce._vals){var de=u.deg2rad(ce._tickAngles[ce._id+"tick"]||0),pe=Math.abs(Math.cos(de)),he=Math.abs(Math.sin(de));if(!ce._vals[0].bb){var be=ce._id+"tick",Ee=ce._selections[be];Ee.each(function(K){var V=h.select(this),re=V.select(".text-math-group");re.empty()&&(K.bb=m.bBox(V.node()))})}for(var Te=0;Te<ce._vals.length;Te++){var He=ce._vals[Te],te=He.bb;if(te){var ae=2*R+te.width,G=2*R+te.height;ee=Math.max(ee,ne?Math.max(ae*pe,G*he):Math.max(G*pe,ae*he))}}}ce.ticks==="inside"&&ce.ticklabelposition==="inside"&&(ee+=ce.ticklen||0)}}}return ee}function A(q,X,Q){var ee=X._id,ne=q._fullData,le=q._fullLayout,W=[],ce=[],de,pe,he;function be(ae,G){for(de=0;de<G.length;de++){var K=ae[G[de]],V=(K._extremes||{})[ee];if(K.visible===!0&&V){for(pe=0;pe<V.min.length;pe++)he=V.min[pe],b(W,he.val,he.pad,{extrapad:he.extrapad});for(pe=0;pe<V.max.length;pe++)he=V.max[pe],k(ce,he.val,he.pad,{extrapad:he.extrapad})}}}if(be(ne,X._traceIndices),be(le.annotations||[],X._annIndices||[]),be(le.shapes||[],X._shapeIndices||[]),X._matchGroup&&!Q){for(var Ee in X._matchGroup)if(Ee!==X._id){var Te=w(q,Ee),He=A(q,Te,!0),te=X._length/Te._length;for(pe=0;pe<He.min.length;pe++)he=He.min[pe],b(W,he.val,he.pad*te,{extrapad:he.extrapad});for(pe=0;pe<He.max.length;pe++)he=He.max[pe],k(ce,he.val,he.pad*te,{extrapad:he.extrapad})}}return{min:W,max:ce}}function C(q,X,Q){if(X.setScale(),X.autorange){X.range=Q?Q.slice():T(q,X),X._r=X.range.slice(),X._rl=u.simpleMap(X._r,X.r2l);var ee=X._input,ne={};ne[X._attr+".range"]=X.range,ne[X._attr+".autorange"]=X.autorange,v.call("_storeDirectGUIEdit",q.layout,q._fullLayout._preGUI,ne),ee.range=X.range.slice(),ee.autorange=X.autorange}var le=X._anchorAxis;if(le&&le.rangeslider){var W=le.rangeslider[X._name];W&&W.rangemode==="auto"&&(W.range=T(q,X)),le._input.rangeslider[X._name]=u.extendFlat({},W)}}function j(q,X,Q){Q||(Q={}),q._m||q.setScale();var ee=[],ne=[],le=X.length,W=Q.padded||!1,ce=Q.tozero&&(q.type==="linear"||q.type==="-"),de=q.type==="log",pe=!1,he=Q.vpadLinearized||!1,be,Ee,Te,He,te,ae,G,K,V;function re(De){if(Array.isArray(De))return pe=!0,function(Je){return Math.max(Number(De[Je]||0),0)};var Ge=Math.max(Number(De||0),0);return function(){return Ge}}var D=re((q._m>0?Q.ppadplus:Q.ppadminus)||Q.ppad||0),B=re((q._m>0?Q.ppadminus:Q.ppadplus)||Q.ppad||0),oe=re(Q.vpadplus||Q.vpad),ie=re(Q.vpadminus||Q.vpad);if(!pe){if(K=1/0,V=-1/0,de)for(be=0;be<le;be++)Ee=X[be],Ee<K&&Ee>0&&(K=Ee),Ee>V&&Ee<p&&(V=Ee);else for(be=0;be<le;be++)Ee=X[be],Ee<K&&Ee>-p&&(K=Ee),Ee>V&&Ee<p&&(V=Ee);X=[K,V],le=2}var ge={tozero:ce,extrapad:W};function _e(De){Te=X[De],c(Te)&&(ae=D(De),G=B(De),he?(He=q.c2l(Te)-ie(De),te=q.c2l(Te)+oe(De)):(K=Te-ie(De),V=Te+oe(De),de&&K<V/10&&(K=V/10),He=q.c2l(K),te=q.c2l(V)),ce&&(He=Math.min(0,He),te=Math.max(0,te)),F(He)&&b(ee,He,G,ge),F(te)&&k(ne,te,ae,ge))}var Se=Math.min(6,le);for(be=0;be<Se;be++)_e(be);for(be=le-1;be>=Se;be--)_e(be);return{min:ee,max:ne,opts:Q}}function b(q,X,Q,ee){E(q,X,Q,ee,P)}function k(q,X,Q,ee){E(q,X,Q,ee,J)}function E(q,X,Q,ee,ne){for(var le=ee.tozero,W=ee.extrapad,ce=!0,de=0;de<q.length&&ce;de++){var pe=q[de];if(ne(pe.val,X)&&pe.pad>=Q&&(pe.extrapad||!W)){ce=!1;break}else ne(X,pe.val)&&pe.pad<=Q&&(W||!pe.extrapad)&&(q.splice(de,1),de--)}if(ce){var he=le&&X===0;q.push({val:X,pad:he?0:Q,extrapad:he?!1:W})}}function F(q){return c(q)&&Math.abs(q)<p}function P(q,X){return q<=X}function J(q,X){return q>=X}function H(q,X){var Q=X.autorangeoptions;return Q&&Q.minallowed!==void 0&&Z(X,Q.minallowed,Q.maxallowed)?Q.minallowed:Q&&Q.clipmin!==void 0&&Z(X,Q.clipmin,Q.clipmax)?Math.max(q,X.d2l(Q.clipmin)):q}function Y(q,X){var Q=X.autorangeoptions;return Q&&Q.maxallowed!==void 0&&Z(X,Q.minallowed,Q.maxallowed)?Q.maxallowed:Q&&Q.clipmax!==void 0&&Z(X,Q.clipmin,Q.clipmax)?Math.min(q,X.d2l(Q.clipmax)):q}function Z(q,X,Q){return X!==void 0&&Q!==void 0?(X=q.d2l(X),Q=q.d2l(Q),X<Q):!0}function z(q,X){if(!X||!X.autorangeoptions)return q;var Q=q[0],ee=q[1],ne=X.autorangeoptions.include;if(ne!==void 0){var le=X.d2l(Q),W=X.d2l(ee);u.isArrayOrTypedArray(ne)||(ne=[ne]);for(var ce=0;ce<ne.length;ce++){var de=X.d2l(ne[ce]);le>=de&&(le=de,Q=de),W<=de&&(W=de,ee=de)}}return Q=H(Q,X),ee=Y(ee,X),[Q,ee]}}}),ji=i({"src/plots/cartesian/axes.js"(U,$){var h=d(),c=xe(),u=Xi(),p=mn(),v=kr(),m=v.strTranslate,g=Ra(),w=ol(),l=pt(),T=di(),y=es(),S=dn(),R=Ce(),M=R.ONEMAXYEAR,A=R.ONEAVGYEAR,C=R.ONEMINYEAR,j=R.ONEMAXQUARTER,b=R.ONEAVGQUARTER,k=R.ONEMINQUARTER,E=R.ONEMAXMONTH,F=R.ONEAVGMONTH,P=R.ONEMINMONTH,J=R.ONEWEEK,H=R.ONEDAY,Y=H/2,Z=R.ONEHOUR,z=R.ONEMIN,q=R.ONESEC,X=R.ONEMILLI,Q=R.ONEMICROSEC,ee=R.MINUS_SIGN,ne=R.BADNUM,le={K:"zeroline"},W={K:"gridline",L:"path"},ce={K:"minor-gridline",L:"path"},de={K:"tick",L:"path"},pe={K:"tick",L:"text"},he={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},be=La(),Ee=be.MID_SHIFT,Te=be.CAP_SHIFT,He=be.LINE_SPACING,te=be.OPPOSITE_SIDE,ae=3,G=$.exports={};G.setConvert=_c();var K=kc(),V=pa(),re=V.idSort,D=V.isLinked;G.id2name=V.id2name,G.name2id=V.name2id,G.cleanId=V.cleanId,G.list=V.list,G.listIds=V.listIds,G.getFromId=V.getFromId,G.getFromTrace=V.getFromTrace;var B=jo();G.getAutoRange=B.getAutoRange,G.findExtremes=B.findExtremes;var oe=1e-4;function ie(we){var me=(we[1]-we[0])*oe;return[we[0]-me,we[1]+me]}G.coerceRef=function(we,me,mt,ft,Xe,Ke){var it=ft.charAt(ft.length-1),Tt=mt._fullLayout._subplots[it+"axis"],rt=ft+"ref",xt={};return Xe||(Xe=Tt[0]||(typeof Ke=="string"?Ke:Ke[0])),Ke||(Ke=Xe),Tt=Tt.concat(Tt.map(function(Mt){return Mt+" domain"})),xt[rt]={valType:"enumerated",values:Tt.concat(Ke?typeof Ke=="string"?[Ke]:Ke:[]),dflt:Xe},v.coerce(we,me,xt,rt)},G.getRefType=function(we){return we===void 0?we:we==="paper"?"paper":we==="pixel"?"pixel":/( domain)$/.test(we)?"domain":"range"},G.coercePosition=function(we,me,mt,ft,Xe,Ke){var it,Tt,rt=G.getRefType(ft);if(rt!=="range")it=v.ensureNumber,Tt=mt(Xe,Ke);else{var xt=G.getFromId(me,ft);Ke=xt.fraction2r(Ke),Tt=mt(Xe,Ke),it=xt.cleanPos}we[Xe]=it(Tt)},G.cleanPosition=function(we,me,mt){var ft=mt==="paper"||mt==="pixel"?v.ensureNumber:G.getFromId(me,mt).cleanPos;return ft(we)},G.redrawComponents=function(we,me){me=me||G.listIds(we);var mt=we._fullLayout;function ft(Xe,Ke,it,Tt){for(var rt=p.getComponentMethod(Xe,Ke),xt={},Mt=0;Mt<me.length;Mt++)for(var Lt=mt[G.id2name(me[Mt])],Xt=Lt[it],sr=0;sr<Xt.length;sr++){var or=Xt[sr];if(!xt[or]&&(rt(we,or),xt[or]=1,Tt))return}}ft("annotations","drawOne","_annIndices"),ft("shapes","drawOne","_shapeIndices"),ft("images","draw","_imgIndices",!0),ft("selections","drawOne","_selectionIndices")};var ge=G.getDataConversions=function(we,me,mt,ft){var Xe,Ke=mt==="x"||mt==="y"||mt==="z"?mt:ft;if(v.isArrayOrTypedArray(Ke)){if(Xe={type:K(ft,void 0,{autotypenumbers:we._fullLayout.autotypenumbers}),_categories:[]},G.setConvert(Xe),Xe.type==="category")for(var it=0;it<ft.length;it++)Xe.d2c(ft[it])}else Xe=G.getFromTrace(we,me,Ke);return Xe?{d2c:Xe.d2c,c2d:Xe.c2d}:Ke==="ids"?{d2c:Se,c2d:Se}:{d2c:_e,c2d:_e}};function _e(we){return+we}function Se(we){return String(we)}G.getDataToCoordFunc=function(we,me,mt,ft){return ge(we,me,mt,ft).d2c},G.counterLetter=function(we){var me=we.charAt(0);if(me==="x")return"y";if(me==="y")return"x"},G.minDtick=function(we,me,mt,ft){["log","category","multicategory"].indexOf(we.type)!==-1||!ft?we._minDtick=0:we._minDtick===void 0?(we._minDtick=me,we._forceTick0=mt):we._minDtick&&((we._minDtick/me+1e-6)%1<2e-6&&((mt-we._forceTick0)/me%1+1.000001)%1<2e-6?(we._minDtick=me,we._forceTick0=mt):((me/we._minDtick+1e-6)%1>2e-6||((mt-we._forceTick0)/we._minDtick%1+1.000001)%1>2e-6)&&(we._minDtick=0))},G.saveRangeInitial=function(we,me){for(var mt=G.list(we,"",!0),ft=!1,Xe=0;Xe<mt.length;Xe++){var Ke=mt[Xe],it=Ke._rangeInitial0===void 0&&Ke._rangeInitial1===void 0,Tt=it||Ke.range[0]!==Ke._rangeInitial0||Ke.range[1]!==Ke._rangeInitial1,rt=Ke.autorange;(it&&rt!==!0||me&&Tt)&&(Ke._rangeInitial0=rt==="min"||rt==="max reversed"?void 0:Ke.range[0],Ke._rangeInitial1=rt==="max"||rt==="min reversed"?void 0:Ke.range[1],Ke._autorangeInitial=rt,ft=!0)}return ft},G.saveShowSpikeInitial=function(we,me){for(var mt=G.list(we,"",!0),ft=!1,Xe="on",Ke=0;Ke<mt.length;Ke++){var it=mt[Ke],Tt=it._showSpikeInitial===void 0,rt=Tt||it.showspikes!==it._showspikes;(Tt||me&&rt)&&(it._showSpikeInitial=it.showspikes,ft=!0),Xe==="on"&&!it.showspikes&&(Xe="off")}return we._fullLayout._cartesianSpikesEnabled=Xe,ft},G.autoBin=function(we,me,mt,ft,Xe,Ke){var it=v.aggNums(Math.min,null,we),Tt=v.aggNums(Math.max,null,we);if(me.type==="category"||me.type==="multicategory")return{start:it-.5,end:Tt+.5,size:Math.max(1,Math.round(Ke)||1),_dataSpan:Tt-it};Xe||(Xe=me.calendar);var rt;if(me.type==="log"?rt={type:"linear",range:[it,Tt]}:rt={type:me.type,range:v.simpleMap([it,Tt],me.c2r,0,Xe),calendar:Xe},G.setConvert(rt),Ke=Ke&&S.dtick(Ke,rt.type),Ke)rt.dtick=Ke,rt.tick0=S.tick0(void 0,rt.type,Xe);else{var xt;if(mt)xt=(Tt-it)/mt;else{var Mt=v.distinctVals(we),Lt=Math.pow(10,Math.floor(Math.log(Mt.minDiff)/Math.LN10)),Xt=Lt*v.roundUp(Mt.minDiff/Lt,[.9,1.9,4.9,9.9],!0);xt=Math.max(Xt,2*v.stdev(we)/Math.pow(we.length,ft?.25:.4)),c(xt)||(xt=1)}G.autoTicks(rt,xt)}var sr=rt.dtick,or=G.tickIncrement(G.tickFirst(rt),sr,"reverse",Xe),Dr,_r;if(typeof sr=="number")or=De(or,we,rt,it,Tt),_r=1+Math.floor((Tt-or)/sr),Dr=or+_r*sr;else for(rt.dtick.charAt(0)==="M"&&(or=Ge(or,we,sr,it,Xe)),Dr=or,_r=0;Dr<=Tt;)Dr=G.tickIncrement(Dr,sr,!1,Xe),_r++;return{start:me.c2r(or,0,Xe),end:me.c2r(Dr,0,Xe),size:sr,_dataSpan:Tt-it}};function De(we,me,mt,ft,Xe){var Ke=0,it=0,Tt=0,rt=0;function xt(sr){return(1+(sr-we)*100/mt.dtick)%100<2}for(var Mt=0;Mt<me.length;Mt++)me[Mt]%1===0?Tt++:c(me[Mt])||rt++,xt(me[Mt])&&Ke++,xt(me[Mt]+mt.dtick/2)&&it++;var Lt=me.length-rt;if(Tt===Lt&&mt.type!=="date")mt.dtick<1?we=ft-.5*mt.dtick:(we-=.5,we+mt.dtick<ft&&(we+=mt.dtick));else if(it<Lt*.1&&(Ke>Lt*.3||xt(ft)||xt(Xe))){var Xt=mt.dtick/2;we+=we+Xt<ft?Xt:-Xt}return we}function Ge(we,me,mt,ft,Xe){var Ke=v.findExactDates(me,Xe),it=.8;if(Ke.exactDays>it){var Tt=Number(mt.substr(1));Ke.exactYears>it&&Tt%12===0?we=G.tickIncrement(we,"M6","reverse")+H*1.5:Ke.exactMonths>it?we=G.tickIncrement(we,"M1","reverse")+H*15.5:we-=Y;var rt=G.tickIncrement(we,mt);if(rt<=ft)return rt}return we}G.prepMinorTicks=function(we,me,mt){if(!me.minor.dtick){delete we.dtick;var ft=me.dtick&&c(me._tmin),Xe;if(ft){var Ke=G.tickIncrement(me._tmin,me.dtick,!0);Xe=[me._tmin,Ke*.99+me._tmin*.01]}else{var it=v.simpleMap(me.range,me.r2l);Xe=[it[0],.8*it[0]+.2*it[1]]}if(we.range=v.simpleMap(Xe,me.l2r),we._isMinor=!0,G.prepTicks(we,mt),ft){var Tt=c(me.dtick),rt=c(we.dtick),xt=Tt?me.dtick:+me.dtick.substring(1),Mt=rt?we.dtick:+we.dtick.substring(1);Tt&&rt?Je(xt,Mt)?xt===2*J&&Mt===2*H&&(we.dtick=J):xt===2*J&&Mt===3*H?we.dtick=J:xt===J&&!(me._input.minor||{}).nticks?we.dtick=H:yt(xt/Mt,2.5)?we.dtick=xt/2:we.dtick=xt:String(me.dtick).charAt(0)==="M"?rt?we.dtick="M1":Je(xt,Mt)?xt>=12&&Mt===2&&(we.dtick="M3"):we.dtick=me.dtick:String(we.dtick).charAt(0)==="L"?String(me.dtick).charAt(0)==="L"?Je(xt,Mt)||(we.dtick=yt(xt/Mt,2.5)?me.dtick/2:me.dtick):we.dtick="D1":we.dtick==="D2"&&+me.dtick>1&&(we.dtick=1)}we.range=me.range}me.minor._tick0Init===void 0&&(we.tick0=me.tick0)};function Je(we,me){return Math.abs((we/me+.5)%1-.5)<.001}function yt(we,me){return Math.abs(we/me-1)<.001}G.prepTicks=function(we,me){var mt=v.simpleMap(we.range,we.r2l,void 0,void 0,me);if(we.tickmode==="auto"||!we.dtick){var ft=we.nticks,Xe;ft||(we.type==="category"||we.type==="multicategory"?(Xe=we.tickfont?v.bigFont(we.tickfont.size||12):15,ft=we._length/Xe):(Xe=we._id.charAt(0)==="y"?40:80,ft=v.constrain(we._length/Xe,4,9)+1),we._name==="radialaxis"&&(ft*=2)),we.minor&&we.minor.tickmode!=="array"||we.tickmode==="array"&&(ft*=100),we._roughDTick=Math.abs(mt[1]-mt[0])/ft,G.autoTicks(we,we._roughDTick),we._minDtick>0&&we.dtick<we._minDtick*2&&(we.dtick=we._minDtick,we.tick0=we.l2r(we._forceTick0))}we.ticklabelmode==="period"&&vt(we),we.tick0||(we.tick0=we.type==="date"?"2000-01-01":0),we.type==="date"&&we.dtick<.1&&(we.dtick=.1),_t(we)};function ut(we){return+we.substring(1)}function vt(we){var me;function mt(){return!(c(we.dtick)||we.dtick.charAt(0)!=="M")}var ft=mt(),Xe=G.getTickFormat(we);if(Xe){var Ke=we._dtickInit!==we.dtick;/%[fLQsSMX]/.test(Xe)||(/%[HI]/.test(Xe)?(me=Z,Ke&&!ft&&we.dtick<Z&&(we.dtick=Z)):/%p/.test(Xe)?(me=Y,Ke&&!ft&&we.dtick<Y&&(we.dtick=Y)):/%[Aadejuwx]/.test(Xe)?(me=H,Ke&&!ft&&we.dtick<H&&(we.dtick=H)):/%[UVW]/.test(Xe)?(me=J,Ke&&!ft&&we.dtick<J&&(we.dtick=J)):/%[Bbm]/.test(Xe)?(me=F,Ke&&(ft?ut(we.dtick)<1:we.dtick<P)&&(we.dtick="M1")):/%[q]/.test(Xe)?(me=b,Ke&&(ft?ut(we.dtick)<3:we.dtick<k)&&(we.dtick="M3")):/%[Yy]/.test(Xe)&&(me=A,Ke&&(ft?ut(we.dtick)<12:we.dtick<C)&&(we.dtick="M12")))}ft=mt(),ft&&we.tick0===we._dowTick0&&(we.tick0=we._rawTick0),we._definedDelta=me}function Ae(we,me,mt){for(var ft=0;ft<we.length;ft++){var Xe=we[ft].value,Ke=ft,it=ft+1;ft<we.length-1?(Ke=ft,it=ft+1):ft>0?(Ke=ft-1,it=ft):(Ke=ft,it=ft);var Tt=we[Ke].value,rt=we[it].value,xt=Math.abs(rt-Tt),Mt=mt||xt,Lt=0;Mt>=C?xt>=C&&xt<=M?Lt=xt:Lt=A:mt===b&&Mt>=k?xt>=k&&xt<=j?Lt=xt:Lt=b:Mt>=P?xt>=P&&xt<=E?Lt=xt:Lt=F:mt===J&&Mt>=J?Lt=J:Mt>=H?Lt=H:mt===Y&&Mt>=Y?Lt=Y:mt===Z&&Mt>=Z&&(Lt=Z);var Xt;Lt>=xt&&(Lt=xt,Xt=!0);var sr=Xe+Lt;if(me.rangebreaks&&Lt>0){for(var or=84,Dr=0,_r=0;_r<or;_r++){var Zr=(_r+.5)/or;me.maskBreaks(Xe*(1-Zr)+Zr*sr)!==ne&&Dr++}Lt*=Dr/or,Lt||(we[ft].drop=!0),Xt&&xt>J&&(Lt=xt)}(Lt>0||ft===0)&&(we[ft].periodX=Xe+Lt/2)}}G.calcTicks=function(me,mt){for(var ft=me.type,Xe=me.calendar,Ke=me.ticklabelstep,it=me.ticklabelmode==="period",Tt=me.range[0]>me.range[1],rt=!me.ticklabelindex||v.isArrayOrTypedArray(me.ticklabelindex)?me.ticklabelindex:[me.ticklabelindex],xt=v.simpleMap(me.range,me.r2l,void 0,void 0,mt),Mt=xt[1]<xt[0],Lt=Math.min(xt[0],xt[1]),Xt=Math.max(xt[0],xt[1]),sr=Math.max(1e3,me._length||0),or=[],Dr=[],_r=[],Zr=[],Er=[],Gr=me.minor&&(me.minor.ticks||me.minor.showgrid),Qr=1;Qr>=(Gr?0:1);Qr--){var En=!Qr;Qr?(me._dtickInit=me.dtick,me._tick0Init=me.tick0):(me.minor._dtickInit=me.minor.dtick,me.minor._tick0Init=me.minor.tick0);var Sn=Qr?me:v.extendFlat({},me,me.minor);if(En?G.prepMinorTicks(Sn,me,mt):G.prepTicks(Sn,mt),Sn.tickmode==="array"){Qr?(_r=[],or=Be(me,!En)):(Zr=[],Dr=Be(me,!En));continue}if(Sn.tickmode==="sync"){_r=[],or=ke(me);continue}var gi=ie(xt),ei=gi[0],ai=gi[1],ta=c(Sn.dtick),ka=ft==="log"&&!(ta||Sn.dtick.charAt(0)==="L"),ci=G.tickFirst(Sn,mt);if(Qr){if(me._tmin=ci,ci<ei!==Mt)break;(ft==="category"||ft==="multicategory")&&(ai=Mt?Math.max(-.5,ai):Math.min(me._categories.length-.5,ai))}var _n=null,Zn=ci,fi;if(Qr){var ra;ta?ra=me.dtick:ft==="date"?typeof me.dtick=="string"&&me.dtick.charAt(0)==="M"&&(ra=F*me.dtick.substring(1)):ra=me._roughDTick,fi=Math.round((me.r2l(Zn)-me.r2l(me.tick0))/ra)-1}var Ji=Sn.dtick;for(Sn.rangebreaks&&Sn._tick0Init!==Sn.tick0&&(Zn=qr(Zn,me),Mt||(Zn=G.tickIncrement(Zn,Ji,!Mt,Xe))),Qr&&it&&(Zn=G.tickIncrement(Zn,Ji,!Mt,Xe),fi--);Mt?Zn>=ai:Zn<=ai;Zn=G.tickIncrement(Zn,Ji,Mt,Xe)){if(Qr&&fi++,Sn.rangebreaks&&!Mt){if(Zn<ei)continue;if(Sn.maskBreaks(Zn)===ne&&qr(Zn,Sn)>=Xt)break}if(_r.length>sr||Zn===_n)break;_n=Zn;var Ln={value:Zn};Qr?(ka&&Zn!==(Zn|0)&&(Ln.simpleLabel=!0),Ke>1&&fi%Ke&&(Ln.skipLabel=!0),_r.push(Ln)):(Ln.minor=!0,Zr.push(Ln))}}if(!Zr||Zr.length<2)rt=!1;else{var qn=(Zr[1].value-Zr[0].value)*(Tt?-1:1);jn(qn,me.tickformat)||(rt=!1)}if(!rt)Er=_r;else{var zn=_r.concat(Zr);it&&_r.length&&(zn=zn.slice(1)),zn=zn.sort(function(Qi,Ki){return Qi.value-Ki.value}).filter(function(Qi,Ki,ni){return Ki===0||Qi.value!==ni[Ki-1].value});var xi=zn.map(function(Qi,Ki){return Qi.minor===void 0&&!Qi.skipLabel?Ki:null}).filter(function(Qi){return Qi!==null});xi.forEach(function(Qi){rt.map(function(Ki){var ni=Qi+Ki;ni>=0&&ni<zn.length&&v.pushUnique(Er,zn[ni])})})}if(Gr){var Mi=me.minor.ticks==="inside"&&me.ticks==="outside"||me.minor.ticks==="outside"&&me.ticks==="inside";if(!Mi){for(var qi=_r.map(function(Qi){return Qi.value}),Vi=[],bi=0;bi<Zr.length;bi++){var Oa=Zr[bi],na=Oa.value;if(qi.indexOf(na)===-1){for(var la=!1,Ba=0;!la&&Ba<_r.length;Ba++)1e7+_r[Ba].value===1e7+na&&(la=!0);la||Vi.push(Oa)}}Zr=Vi}}it&&Ae(Er,me,me._definedDelta);var li;if(me.rangebreaks){var rs=me._id.charAt(0)==="y",ns=1;me.tickmode==="auto"&&(ns=me.tickfont?me.tickfont.size:12);var ps=NaN;for(li=_r.length-1;li>-1;li--){if(_r[li].drop){_r.splice(li,1);continue}_r[li].value=qr(_r[li].value,me);var ms=me.c2p(_r[li].value);(rs?ps>ms-ns:ps<ms+ns)?_r.splice(Mt?li+1:li,1):ps=ms}}An(me)&&Math.abs(xt[1]-xt[0])===360&&_r.pop(),me._tmax=(_r[_r.length-1]||{}).value,me._prevDateHead="",me._inCalcTicks=!0;var is,Zi=function(Qi){Qi.text="",me._prevDateHead=is};_r=_r.concat(Zr);function vs(Qi,Ki){var ni=G.tickText(Qi,Ki.value,!1,Ki.simpleLabel),wi=Ki.periodX;return wi!==void 0&&(ni.periodX=wi,(wi>Xt||wi<Lt)&&(wi>Xt&&(ni.periodX=Xt),wi<Lt&&(ni.periodX=Lt),Zi(ni))),ni}var Ls;for(li=0;li<_r.length;li++){var va=_r[li].minor,Rs=_r[li].value;va?(rt&&Er.indexOf(_r[li])!==-1?Ls=vs(me,_r[li]):Ls={x:Rs},Ls.minor=!0,Dr.push(Ls)):(is=me._prevDateHead,Ls=vs(me,_r[li]),(_r[li].skipLabel||rt&&Er.indexOf(_r[li])===-1)&&Zi(Ls),or.push(Ls))}return or=or.concat(Dr),me._inCalcTicks=!1,it&&or.length&&(or[0].noTick=!0),or};function Fe(we,me){return we.rangebreaks&&(me=me.filter(function(mt){return we.maskBreaks(mt.x)!==ne})),me}function ke(we){var me=we._mainAxis,mt=[];if(me._vals){for(var ft=0;ft<me._vals.length;ft++)if(!me._vals[ft].noTick){var Xe=me.l2p(me._vals[ft].x),Ke=we.p2l(Xe),it=G.tickText(we,Ke);me._vals[ft].minor&&(it.minor=!0,it.text=""),mt.push(it)}}return mt=Fe(we,mt),mt}function Be(we,me){var mt=v.simpleMap(we.range,we.r2l),ft=ie(mt),Xe=Math.min(ft[0],ft[1]),Ke=Math.max(ft[0],ft[1]),it=we.type==="category"?we.d2l_noadd:we.d2l;we.type==="log"&&String(we.dtick).charAt(0)!=="L"&&(we.dtick="L"+Math.pow(10,Math.floor(Math.min(we.range[0],we.range[1]))-1));for(var Tt=[],rt=0;rt<=1;rt++)if(!(me!==void 0&&(me&&rt||me===!1&&!rt))&&!(rt&&!we.minor)){var xt=rt?we.minor.tickvals:we.tickvals,Mt=rt?[]:we.ticktext;if(xt){v.isArrayOrTypedArray(Mt)||(Mt=[]);for(var Lt=0;Lt<xt.length;Lt++){var Xt=it(xt[Lt]);if(Xt>Xe&&Xt<Ke){var sr=G.tickText(we,Xt,!1,String(Mt[Lt]));rt&&(sr.minor=!0,sr.text=""),Tt.push(sr)}}}}return Tt=Fe(we,Tt),Tt}var et=[2,5,10],ht=[1,2,3,6,12],jt=[1,2,5,10,15,30],At=[1,2,3,7,14],Pt=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],zt=[-.301,0,.301,.699,1],Nt=[15,30,45,90,180];function Kt(we,me,mt){return me*v.roundUp(we/me,mt)}G.autoTicks=function(we,me,mt){var ft;function Xe(Lt){return Math.pow(Lt,Math.floor(Math.log(me)/Math.LN10))}if(we.type==="date"){we.tick0=v.dateTick0(we.calendar,0);var Ke=2*me;if(Ke>A)me/=A,ft=Xe(10),we.dtick="M"+12*Kt(me,ft,et);else if(Ke>F)me/=F,we.dtick="M"+Kt(me,1,ht);else if(Ke>H){if(we.dtick=Kt(me,H,we._hasDayOfWeekBreaks?[1,2,7,14]:At),!mt){var it=G.getTickFormat(we),Tt=we.ticklabelmode==="period";Tt&&(we._rawTick0=we.tick0),/%[uVW]/.test(it)?we.tick0=v.dateTick0(we.calendar,2):we.tick0=v.dateTick0(we.calendar,1),Tt&&(we._dowTick0=we.tick0)}}else Ke>Z?we.dtick=Kt(me,Z,ht):Ke>z?we.dtick=Kt(me,z,jt):Ke>q?we.dtick=Kt(me,q,jt):(ft=Xe(10),we.dtick=Kt(me,ft,et))}else if(we.type==="log"){we.tick0=0;var rt=v.simpleMap(we.range,we.r2l);if(we._isMinor&&(me*=1.5),me>.7)we.dtick=Math.ceil(me);else if(Math.abs(rt[1]-rt[0])<1){var xt=1.5*Math.abs((rt[1]-rt[0])/me);me=Math.abs(Math.pow(10,rt[1])-Math.pow(10,rt[0]))/xt,ft=Xe(10),we.dtick="L"+Kt(me,ft,et)}else we.dtick=me>.3?"D2":"D1"}else we.type==="category"||we.type==="multicategory"?(we.tick0=0,we.dtick=Math.ceil(Math.max(me,1))):An(we)?(we.tick0=0,ft=1,we.dtick=Kt(me,ft,Nt)):(we.tick0=0,ft=Xe(10),we.dtick=Kt(me,ft,et));if(we.dtick===0&&(we.dtick=1),!c(we.dtick)&&typeof we.dtick!="string"){var Mt=we.dtick;throw we.dtick=1,"ax.dtick error: "+String(Mt)}};function _t(we){var me=we.dtick;if(we._tickexponent=0,!c(me)&&typeof me!="string"&&(me=1),(we.type==="category"||we.type==="multicategory")&&(we._tickround=null),we.type==="date"){var mt=we.r2l(we.tick0),ft=we.l2r(mt).replace(/(^-|i)/g,""),Xe=ft.length;if(String(me).charAt(0)==="M")Xe>10||ft.substr(5)!=="01-01"?we._tickround="d":we._tickround=+me.substr(1)%12===0?"y":"m";else if(me>=H&&Xe<=10||me>=H*15)we._tickround="d";else if(me>=z&&Xe<=16||me>=Z)we._tickround="M";else if(me>=q&&Xe<=19||me>=z)we._tickround="S";else{var Ke=we.l2r(mt+me).replace(/^-/,"").length;we._tickround=Math.max(Xe,Ke)-20,we._tickround<0&&(we._tickround=4)}}else if(c(me)||me.charAt(0)==="L"){var it=we.range.map(we.r2d||Number);c(me)||(me=Number(me.substr(1))),we._tickround=2-Math.floor(Math.log(me)/Math.LN10+.01);var Tt=Math.max(Math.abs(it[0]),Math.abs(it[1])),rt=Math.floor(Math.log(Tt)/Math.LN10+.01),xt=we.minexponent===void 0?3:we.minexponent;Math.abs(rt)>xt&&(Pe(we.exponentformat)&&!Re(rt)?we._tickexponent=3*Math.round((rt-1)/3):we._tickexponent=rt)}else we._tickround=null}G.tickIncrement=function(we,me,mt,ft){var Xe=mt?-1:1;if(c(me))return v.increment(we,Xe*me);var Ke=me.charAt(0),it=Xe*Number(me.substr(1));if(Ke==="M")return v.incrementMonth(we,it,ft);if(Ke==="L")return Math.log(Math.pow(10,we)+it)/Math.LN10;if(Ke==="D"){var Tt=me==="D2"?zt:Pt,rt=we+Xe*.01,xt=v.roundUp(v.mod(rt,1),Tt,mt);return Math.floor(rt)+Math.log(h.round(Math.pow(10,xt),1))/Math.LN10}throw"unrecognized dtick "+String(me)},G.tickFirst=function(we,me){var mt=we.r2l||Number,ft=v.simpleMap(we.range,mt,void 0,void 0,me),Xe=ft[1]<ft[0],Ke=Xe?Math.floor:Math.ceil,it=ie(ft)[0],Tt=we.dtick,rt=mt(we.tick0);if(c(Tt)){var xt=Ke((it-rt)/Tt)*Tt+rt;return(we.type==="category"||we.type==="multicategory")&&(xt=v.constrain(xt,0,we._categories.length-1)),xt}var Mt=Tt.charAt(0),Lt=Number(Tt.substr(1));if(Mt==="M"){for(var Xt=0,sr=rt,or,Dr,_r;Xt<10;){if(or=G.tickIncrement(sr,Tt,Xe,we.calendar),(or-it)*(sr-it)<=0)return Xe?Math.min(sr,or):Math.max(sr,or);Dr=(it-(sr+or)/2)/(or-sr),_r=Mt+(Math.abs(Math.round(Dr))||1)*Lt,sr=G.tickIncrement(sr,_r,Dr<0?!Xe:Xe,we.calendar),Xt++}return v.error("tickFirst did not converge",we),sr}else{if(Mt==="L")return Math.log(Ke((Math.pow(10,it)-rt)/Lt)*Lt+rt)/Math.LN10;if(Mt==="D"){var Zr=Tt==="D2"?zt:Pt,Er=v.roundUp(v.mod(it,1),Zr,Xe);return Math.floor(it)+Math.log(h.round(Math.pow(10,Er),1))/Math.LN10}else throw"unrecognized dtick "+String(Tt)}},G.tickText=function(we,me,mt,ft){var Xe=Qt(we,me),Ke=we.tickmode==="array",it=mt||Ke,Tt=we.type,rt=Tt==="category"?we.d2l_noadd:we.d2l,xt,Mt=function(_r){var Zr=we.l2p(_r);return Zr>=0&&Zr<=we._length?_r:null};if(Ke&&v.isArrayOrTypedArray(we.ticktext)){var Lt=v.simpleMap(we.range,we.r2l),Xt=(Math.abs(Lt[1]-Lt[0])-(we._lBreaks||0))/1e4;for(xt=0;xt<we.ticktext.length&&!(Math.abs(me-rt(we.tickvals[xt]))<Xt);xt++);if(xt<we.ticktext.length)return Xe.text=String(we.ticktext[xt]),Xe.xbnd=[Mt(Xe.x-.5),Mt(Xe.x+we.dtick-.5)],Xe}function sr(_r){if(_r===void 0)return!0;if(mt)return _r==="none";var Zr={first:we._tmin,last:we._tmax}[_r];return _r!=="all"&&me!==Zr}var or=mt?"never":we.exponentformat!=="none"&&sr(we.showexponent)?"hide":"";if(Tt==="date"?fr(we,Xe,mt,it):Tt==="log"?Vt(we,Xe,mt,it,or):Tt==="category"?rr(we,Xe):Tt==="multicategory"?Ne(we,Xe,mt):An(we)?Ue(we,Xe,mt,it,or):$e(we,Xe,mt,it,or),ft||(we.tickprefix&&!sr(we.showtickprefix)&&(Xe.text=we.tickprefix+Xe.text),we.ticksuffix&&!sr(we.showticksuffix)&&(Xe.text+=we.ticksuffix)),we.labelalias&&we.labelalias.hasOwnProperty(Xe.text)){var Dr=we.labelalias[Xe.text];typeof Dr=="string"&&(Xe.text=Dr)}return(we.tickson==="boundaries"||we.showdividers)&&(Xe.xbnd=[Mt(Xe.x-.5),Mt(Xe.x+we.dtick-.5)]),Xe},G.hoverLabelText=function(we,me,mt){mt&&(we=v.extendFlat({},we,{hoverformat:mt}));var ft=v.isArrayOrTypedArray(me)?me[0]:me,Xe=v.isArrayOrTypedArray(me)?me[1]:void 0;if(Xe!==void 0&&Xe!==ft)return G.hoverLabelText(we,ft,mt)+" - "+G.hoverLabelText(we,Xe,mt);var Ke=we.type==="log"&&ft<=0,it=G.tickText(we,we.c2l(Ke?-ft:ft),"hover").text;return Ke?ft===0?"0":ee+it:it};function Qt(we,me,mt){var ft=we.tickfont||{};return{x:me,dx:0,dy:0,text:mt||"",fontSize:ft.size,font:ft.family,fontWeight:ft.weight,fontStyle:ft.style,fontVariant:ft.variant,fontTextcase:ft.textcase,fontLineposition:ft.lineposition,fontShadow:ft.shadow,fontColor:ft.color}}function fr(we,me,mt,ft){var Xe=we._tickround,Ke=mt&&we.hoverformat||G.getTickFormat(we);ft=!Ke&&ft,ft&&(c(Xe)?Xe=4:Xe={y:"m",m:"d",d:"M",M:"S",S:4}[Xe]);var it=v.formatDate(me.x,Ke,Xe,we._dateFormat,we.calendar,we._extraFormat),Tt,rt=it.indexOf(`
`);if(rt!==-1&&(Tt=it.substr(rt+1),it=it.substr(0,rt)),ft&&(Tt!==void 0&&(it==="00:00:00"||it==="00:00")?(it=Tt,Tt=""):it.length===8&&(it=it.replace(/:00$/,""))),Tt)if(mt)Xe==="d"?it+=", "+Tt:it=Tt+(it?", "+it:"");else if(!we._inCalcTicks||we._prevDateHead!==Tt)we._prevDateHead=Tt,it+="<br>"+Tt;else{var xt=yn(we),Mt=we._trueSide||we.side;(!xt&&Mt==="top"||xt&&Mt==="bottom")&&(it+="<br> ")}me.text=it}function Vt(we,me,mt,ft,Xe){var Ke=we.dtick,it=me.x,Tt=we.tickformat,rt=typeof Ke=="string"&&Ke.charAt(0);if(Xe==="never"&&(Xe=""),ft&&rt!=="L"&&(Ke="L3",rt="L"),Tt||rt==="L")me.text=tt(Math.pow(10,it),we,Xe,ft);else if(c(Ke)||rt==="D"&&v.mod(it+.01,1)<.1){var xt=Math.round(it),Mt=Math.abs(xt),Lt=we.exponentformat;Lt==="power"||Pe(Lt)&&Re(xt)?(xt===0?me.text=1:xt===1?me.text="10":me.text="10<sup>"+(xt>1?"":ee)+Mt+"</sup>",me.fontSize*=1.25):(Lt==="e"||Lt==="E")&&Mt>2?me.text="1"+Lt+(xt>0?"+":ee)+Mt:(me.text=tt(Math.pow(10,it),we,"","fakehover"),Ke==="D1"&&we._id.charAt(0)==="y"&&(me.dy-=me.fontSize/6))}else if(rt==="D")me.text=String(Math.round(Math.pow(10,v.mod(it,1)))),me.fontSize*=.75;else throw"unrecognized dtick "+String(Ke);if(we.dtick==="D1"){var Xt=String(me.text).charAt(0);(Xt==="0"||Xt==="1")&&(we._id.charAt(0)==="y"?me.dx-=me.fontSize/4:(me.dy+=me.fontSize/2,me.dx+=(we.range[1]>we.range[0]?1:-1)*me.fontSize*(it<0?.5:.25)))}}function rr(we,me){var mt=we._categories[Math.round(me.x)];mt===void 0&&(mt=""),me.text=String(mt)}function Ne(we,me,mt){var ft=Math.round(me.x),Xe=we._categories[ft]||[],Ke=Xe[1]===void 0?"":String(Xe[1]),it=Xe[0]===void 0?"":String(Xe[0]);mt?me.text=it+" - "+Ke:(me.text=Ke,me.text2=it)}function $e(we,me,mt,ft,Xe){Xe==="never"?Xe="":we.showexponent==="all"&&Math.abs(me.x/we.dtick)<1e-6&&(Xe="hide"),me.text=tt(me.x,we,Xe,ft)}function Ue(we,me,mt,ft,Xe){if(we.thetaunit==="radians"&&!mt){var Ke=me.x/180;if(Ke===0)me.text="0";else{var it=fe(Ke);if(it[1]>=100)me.text=tt(v.deg2rad(me.x),we,Xe,ft);else{var Tt=me.x<0;it[1]===1?it[0]===1?me.text="π":me.text=it[0]+"π":me.text=["<sup>",it[0],"</sup>","⁄","<sub>",it[1],"</sub>","π"].join(""),Tt&&(me.text=ee+me.text)}}}else me.text=tt(me.x,we,Xe,ft)}function fe(we){function me(Tt,rt){return Math.abs(Tt-rt)<=1e-6}function mt(Tt,rt){return me(rt,0)?Tt:mt(rt,Tt%rt)}function ft(Tt){for(var rt=1;!me(Math.round(Tt*rt)/rt,Tt);)rt*=10;return rt}var Xe=ft(we),Ke=we*Xe,it=Math.abs(mt(Ke,Xe));return[Math.round(Ke/it),Math.round(Xe/it)]}var je=["f","p","n","μ","m","","k","M","G","T"];function Pe(we){return we==="SI"||we==="B"}function Re(we){return we>14||we<-15}function tt(we,me,mt,ft){var Xe=we<0,Ke=me._tickround,it=mt||me.exponentformat||"B",Tt=me._tickexponent,rt=G.getTickFormat(me),xt=me.separatethousands;if(ft){var Mt={exponentformat:it,minexponent:me.minexponent,dtick:me.showexponent==="none"?me.dtick:c(we)&&Math.abs(we)||1,range:me.showexponent==="none"?me.range.map(me.r2d):[0,we||1]};_t(Mt),Ke=(Number(Mt._tickround)||0)+4,Tt=Mt._tickexponent,me.hoverformat&&(rt=me.hoverformat)}if(rt)return me._numFormat(rt)(we).replace(/-/g,ee);var Lt=Math.pow(10,-Ke)/2;if(it==="none"&&(Tt=0),we=Math.abs(we),we<Lt)we="0",Xe=!1;else{if(we+=Lt,Tt&&(we*=Math.pow(10,-Tt),Ke+=Tt),Ke===0)we=String(Math.floor(we));else if(Ke<0){we=String(Math.round(we)),we=we.substr(0,we.length+Ke);for(var Xt=Ke;Xt<0;Xt++)we+="0"}else{we=String(we);var sr=we.indexOf(".")+1;sr&&(we=we.substr(0,sr+Ke).replace(/\.?0+$/,""))}we=v.numSeparate(we,me._separators,xt)}if(Tt&&it!=="hide"){Pe(it)&&Re(Tt)&&(it="power");var or;Tt<0?or=ee+-Tt:it!=="power"?or="+"+Tt:or=String(Tt),it==="e"||it==="E"?we+=it+or:it==="power"?we+="×10<sup>"+or+"</sup>":it==="B"&&Tt===9?we+="B":Pe(it)&&(we+=je[Tt/3+5])}return Xe?ee+we:we}G.getTickFormat=function(we){var me;function mt(rt){return typeof rt!="string"?rt:Number(rt.replace("M",""))*F}function ft(rt,xt){var Mt=["L","D"];if(typeof rt==typeof xt){if(typeof rt=="number")return rt-xt;var Lt=Mt.indexOf(rt.charAt(0)),Xt=Mt.indexOf(xt.charAt(0));return Lt===Xt?Number(rt.replace(/(L|D)/g,""))-Number(xt.replace(/(L|D)/g,"")):Lt-Xt}else return typeof rt=="number"?1:-1}function Xe(rt,xt,Mt){var Lt=Mt||function(or){return or},Xt=xt[0],sr=xt[1];return(!Xt&&typeof Xt!="number"||Lt(Xt)<=Lt(rt))&&(!sr&&typeof sr!="number"||Lt(sr)>=Lt(rt))}function Ke(rt,xt){var Mt=xt[0]===null,Lt=xt[1]===null,Xt=ft(rt,xt[0])>=0,sr=ft(rt,xt[1])<=0;return(Mt||Xt)&&(Lt||sr)}var it,Tt;if(we.tickformatstops&&we.tickformatstops.length>0)switch(we.type){case"date":case"linear":{for(me=0;me<we.tickformatstops.length;me++)if(Tt=we.tickformatstops[me],Tt.enabled&&Xe(we.dtick,Tt.dtickrange,mt)){it=Tt;break}break}case"log":{for(me=0;me<we.tickformatstops.length;me++)if(Tt=we.tickformatstops[me],Tt.enabled&&Ke(we.dtick,Tt.dtickrange)){it=Tt;break}break}}return it?it.value:we.tickformat},G.getSubplots=function(we,me){var mt=we._fullLayout._subplots,ft=mt.cartesian.concat(mt.gl2d||[]),Xe=me?G.findSubplotsWithAxis(ft,me):ft;return Xe.sort(function(Ke,it){var Tt=Ke.substr(1).split("y"),rt=it.substr(1).split("y");return Tt[0]===rt[0]?+Tt[1]-+rt[1]:+Tt[0]-+rt[0]}),Xe},G.findSubplotsWithAxis=function(we,me){for(var mt=new RegExp(me._id.charAt(0)==="x"?"^"+me._id+"y":me._id+"$"),ft=[],Xe=0;Xe<we.length;Xe++){var Ke=we[Xe];mt.test(Ke)&&ft.push(Ke)}return ft},G.makeClipPaths=function(we){var me=we._fullLayout;if(!me._hasOnlyLargeSploms){var mt={_offset:0,_length:me.width,_id:""},ft={_offset:0,_length:me.height,_id:""},Xe=G.list(we,"x",!0),Ke=G.list(we,"y",!0),it=[],Tt,rt;for(Tt=0;Tt<Xe.length;Tt++)for(it.push({x:Xe[Tt],y:ft}),rt=0;rt<Ke.length;rt++)Tt===0&&it.push({x:mt,y:Ke[rt]}),it.push({x:Xe[Tt],y:Ke[rt]});var xt=me._clips.selectAll(".axesclip").data(it,function(Mt){return Mt.x._id+Mt.y._id});xt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Mt){return"clip"+me._uid+Mt.x._id+Mt.y._id}).append("rect"),xt.exit().remove(),xt.each(function(Mt){h.select(this).select("rect").attr({x:Mt.x._offset||0,y:Mt.y._offset||0,width:Mt.x._length||1,height:Mt.y._length||1})})}},G.draw=function(we,me,mt){var ft=we._fullLayout;me==="redraw"&&ft._paper.selectAll("g.subplot").each(function(rt){var xt=rt[0],Mt=ft._plots[xt];if(Mt){var Lt=Mt.xaxis,Xt=Mt.yaxis;Mt.xaxislayer.selectAll("."+Lt._id+"tick").remove(),Mt.yaxislayer.selectAll("."+Xt._id+"tick").remove(),Mt.xaxislayer.selectAll("."+Lt._id+"tick2").remove(),Mt.yaxislayer.selectAll("."+Xt._id+"tick2").remove(),Mt.xaxislayer.selectAll("."+Lt._id+"divider").remove(),Mt.yaxislayer.selectAll("."+Xt._id+"divider").remove(),Mt.minorGridlayer&&Mt.minorGridlayer.selectAll("path").remove(),Mt.gridlayer&&Mt.gridlayer.selectAll("path").remove(),Mt.zerolinelayer&&Mt.zerolinelayer.selectAll("path").remove(),ft._infolayer.select(".g-"+Lt._id+"title").remove(),ft._infolayer.select(".g-"+Xt._id+"title").remove()}});var Xe=!me||me==="redraw"?G.listIds(we):me,Ke=G.list(we),it=Ke.filter(function(rt){return rt.autoshift}).map(function(rt){return rt.overlaying});Xe.map(function(rt){var xt=G.getFromId(we,rt);if(xt.tickmode==="sync"&&xt.overlaying){var Mt=Xe.findIndex(function(Lt){return Lt===xt.overlaying});Mt>=0&&Xe.unshift(Xe.splice(Mt,1).shift())}});var Tt={false:{left:0,right:0}};return v.syncOrAsync(Xe.map(function(rt){return function(){if(rt){var xt=G.getFromId(we,rt);mt||(mt={}),mt.axShifts=Tt,mt.overlayingShiftedAx=it;var Mt=G.drawOne(we,xt,mt);return xt._shiftPusher&&Xn(xt,xt._fullDepth||0,Tt,!0),xt._r=xt.range.slice(),xt._rl=v.simpleMap(xt._r,xt.r2l),Mt}}}))},G.drawOne=function(we,me,mt){mt=mt||{};var ft=mt.axShifts||{},Xe=mt.overlayingShiftedAx||[],Ke,it,Tt;me.setScale();var rt=we._fullLayout,xt=me._id,Mt=xt.charAt(0),Lt=G.counterLetter(xt),Xt=rt._plots[me._mainSubplot];if(!Xt)return;if(me._shiftPusher=me.autoshift||Xe.indexOf(me._id)!==-1||Xe.indexOf(me.overlaying)!==-1,me._shiftPusher&me.anchor==="free"){var sr=me.linewidth/2||0;me.ticks==="inside"&&(sr+=me.ticklen),Xn(me,sr,ft,!0),Xn(me,me.shift||0,ft,!1)}(mt.skipTitle!==!0||me._shift===void 0)&&(me._shift=mr(me,ft));var or=Xt[Mt+"axislayer"],Dr=me._mainLinePosition,_r=Dr+=me._shift,Zr=me._mainMirrorPosition,Er=me._vals=G.calcTicks(me),Gr=[me.mirror,_r,Zr].join("_");for(Ke=0;Ke<Er.length;Ke++)Er[Ke].axInfo=Gr;me._selections={},me._tickAngles&&(me._prevTickAngles=me._tickAngles),me._tickAngles={},me._depth=null;var Qr={};function En(va){var Rs=xt+(va||"tick");return Qr[Rs]||(Qr[Rs]=at(me,Rs,_r)),Qr[Rs]}if(me.visible){var Sn=G.makeTransTickFn(me),gi=G.makeTransTickLabelFn(me),ei,ai,ta=me.ticks==="inside",ka=me.ticks==="outside";if(me.tickson==="boundaries"){var ci=dt(me,Er);ai=G.clipEnds(me,ci),ei=ta?ai:ci}else ai=G.clipEnds(me,Er),ei=ta&&me.ticklabelmode!=="period"?ai:Er;var _n=me._gridVals=ai,Zn=Dt(me,Er);if(!rt._hasOnlyLargeSploms){var fi=me._subplotsWith,ra={};for(Ke=0;Ke<fi.length;Ke++){it=fi[Ke],Tt=rt._plots[it];var Ji=Tt[Lt+"axis"],Ln=Ji._mainAxis._id;if(!ra[Ln]){ra[Ln]=1;var qn=Mt==="x"?"M0,"+Ji._offset+"v"+Ji._length:"M"+Ji._offset+",0h"+Ji._length;G.drawGrid(we,me,{vals:_n,counterAxis:Ji,layer:Tt.gridlayer.select("."+xt),minorLayer:Tt.minorGridlayer.select("."+xt),path:qn,transFn:Sn}),G.drawZeroLine(we,me,{counterAxis:Ji,layer:Tt.zerolinelayer,path:qn,transFn:Sn})}}}var zn,xi=G.getTickSigns(me),Mi=G.getTickSigns(me,"minor");if(me.ticks||me.minor&&me.minor.ticks){var qi=G.makeTickPath(me,_r,xi[2]),Vi=G.makeTickPath(me,_r,Mi[2],{minor:!0}),bi,Oa,na,la;if(me._anchorAxis&&me.mirror&&me.mirror!==!0?(bi=G.makeTickPath(me,Zr,xi[3]),Oa=G.makeTickPath(me,Zr,Mi[3],{minor:!0}),na=qi+bi,la=Vi+Oa):(bi="",Oa="",na=qi,la=Vi),me.showdividers&&ka&&me.tickson==="boundaries"){var Ba={};for(Ke=0;Ke<Zn.length;Ke++)Ba[Zn[Ke].x]=1;zn=function(va){return Ba[va.x]?bi:na}}else zn=function(va){return va.minor?la:na}}if(G.drawTicks(we,me,{vals:ei,layer:or,path:zn,transFn:Sn}),me.mirror==="allticks"){var li=Object.keys(me._linepositions||{});for(Ke=0;Ke<li.length;Ke++){it=li[Ke],Tt=rt._plots[it];var rs=me._linepositions[it]||[],ns=rs[0],ps=rs[1],ms=rs[2],is=G.makeTickPath(me,ns,ms?xi[0]:Mi[0],{minor:ms})+G.makeTickPath(me,ps,ms?xi[1]:Mi[1],{minor:ms});G.drawTicks(we,me,{vals:ei,layer:Tt[Mt+"axislayer"],path:is,transFn:Sn})}}var Zi=[];if(Zi.push(function(){return G.drawLabels(we,me,{vals:Er,layer:or,plotinfo:Tt,transFn:gi,labelFns:G.makeLabelFns(me,_r)})}),me.type==="multicategory"){var vs={x:2,y:10}[Mt];Zi.push(function(){var va={x:"height",y:"width"}[Mt],Rs=En()[va]+vs+(me._tickAngles[xt+"tick"]?me.tickfont.size*He:0);return G.drawLabels(we,me,{vals:St(me,Er),layer:or,cls:xt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Sn,labelFns:G.makeLabelFns(me,_r+Rs*xi[4])})}),Zi.push(function(){return me._depth=xi[4]*(En("tick2")[me.side]-_r),Ar(we,me,{vals:Zn,layer:or,path:G.makeTickPath(me,_r,xi[4],{len:me._depth}),transFn:Sn})})}else me.title.hasOwnProperty("standoff")&&Zi.push(function(){me._depth=xi[4]*(En()[me.side]-_r)});var Ls=p.getComponentMethod("rangeslider","isVisible")(me);return!mt.skipTitle&&!(Ls&&me.side==="bottom")&&Zi.push(function(){return $r(we,me)}),Zi.push(function(){var va=me.side.charAt(0),Rs=te[me.side].charAt(0),Qi=G.getPxPosition(we,me),Ki=ka?me.ticklen:0,ni,wi,Ds,Uo;(me.automargin||Ls||me._shiftPusher)&&(me.type==="multicategory"?ni=En("tick2"):(ni=En(),Mt==="x"&&va==="b"&&(me._depth=Math.max(ni.width>0?ni.bottom-Qi:0,Ki))));var Ac=0,fl=0;if(me._shiftPusher&&(Ac=Math.max(Ki,ni.height>0?va==="l"?Qi-ni.left:ni.right-Qi:0),me.title.text!==rt._dfltTitle[Mt]&&(fl=(me._titleStandoff||0)+(me._titleScoot||0),va==="l"&&(fl+=Rr(me))),me._fullDepth=Math.max(Ac,fl)),me.automargin){wi={x:0,y:0,r:0,l:0,t:0,b:0};var Eo=[0,1],md=typeof me._shift=="number"?me._shift:0;if(Mt==="x"){if(va==="b"?wi[va]=me._depth:(wi[va]=me._depth=Math.max(ni.width>0?Qi-ni.top:0,Ki),Eo.reverse()),ni.width>0){var bu=ni.right-(me._offset+me._length);bu>0&&(wi.xr=1,wi.r=bu);var th=me._offset-ni.left;th>0&&(wi.xl=0,wi.l=th)}}else if(va==="l"?(me._depth=Math.max(ni.height>0?Qi-ni.left:0,Ki),wi[va]=me._depth-md):(me._depth=Math.max(ni.height>0?ni.right-Qi:0,Ki),wi[va]=me._depth+md,Eo.reverse()),ni.height>0){var Cc=ni.bottom-(me._offset+me._length);Cc>0&&(wi.yb=0,wi.b=Cc);var rh=me._offset-ni.top;rh>0&&(wi.yt=1,wi.t=rh)}wi[Lt]=me.anchor==="free"?me.position:me._anchorAxis.domain[Eo[0]],me.title.text!==rt._dfltTitle[Mt]&&(wi[va]+=Rr(me)+(me.title.standoff||0)),me.mirror&&me.anchor!=="free"&&(Ds={x:0,y:0,r:0,l:0,t:0,b:0},Ds[Rs]=me.linewidth,me.mirror&&me.mirror!==!0&&(Ds[Rs]+=Ki),me.mirror===!0||me.mirror==="ticks"?Ds[Lt]=me._anchorAxis.domain[Eo[1]]:(me.mirror==="all"||me.mirror==="allticks")&&(Ds[Lt]=[me._counterDomainMin,me._counterDomainMax][Eo[1]]))}Ls&&(Uo=p.getComponentMethod("rangeslider","autoMarginOpts")(we,me)),typeof me.automargin=="string"&&(nt(wi,me.automargin),nt(Ds,me.automargin)),u.autoMargin(we,Vr(me),wi),u.autoMargin(we,Br(me),Ds),u.autoMargin(we,Ur(me),Uo)}),v.syncOrAsync(Zi)}};function nt(we,me){if(we){var mt=Object.keys(he).reduce(function(ft,Xe){return me.indexOf(Xe)!==-1&&he[Xe].forEach(function(Ke){ft[Ke]=1}),ft},{});Object.keys(we).forEach(function(ft){mt[ft]||(ft.length===1?we[ft]=0:delete we[ft])})}}function dt(we,me){var mt=[],ft,Xe=function(Ke,it){var Tt=Ke.xbnd[it];Tt!==null&&mt.push(v.extendFlat({},Ke,{x:Tt}))};if(me.length){for(ft=0;ft<me.length;ft++)Xe(me[ft],0);Xe(me[ft-1],1)}return mt}function St(we,me){for(var mt=[],ft={},Xe=0;Xe<me.length;Xe++){var Ke=me[Xe];ft[Ke.text2]?ft[Ke.text2].push(Ke.x):ft[Ke.text2]=[Ke.x]}for(var it in ft)mt.push(Qt(we,v.interp(ft[it],.5),it));return mt}function Dt(we,me){var mt=[],ft,Xe,Ke=me.length&&me[me.length-1].x<me[0].x,it=function(rt,xt){var Mt=rt.xbnd[xt];Mt!==null&&mt.push(v.extendFlat({},rt,{x:Mt}))};if(we.showdividers&&me.length){for(ft=0;ft<me.length;ft++){var Tt=me[ft];Tt.text2!==Xe&&it(Tt,Ke?1:0),Xe=Tt.text2}it(me[ft-1],Ke?0:1)}return mt}function at(we,me,mt){var ft,Xe,Ke,it;if(we._selections[me].size())ft=1/0,Xe=-1/0,Ke=1/0,it=-1/0,we._selections[me].each(function(){var rt=br(this),xt=T.bBox(rt.node().parentNode);ft=Math.min(ft,xt.top),Xe=Math.max(Xe,xt.bottom),Ke=Math.min(Ke,xt.left),it=Math.max(it,xt.right)});else{var Tt=G.makeLabelFns(we,mt);ft=Xe=Tt.yFn({dx:0,dy:0,fontSize:0}),Ke=it=Tt.xFn({dx:0,dy:0,fontSize:0})}return{top:ft,bottom:Xe,left:Ke,right:it,height:Xe-ft,width:it-Ke}}G.getTickSigns=function(we,me){var mt=we._id.charAt(0),ft={x:"top",y:"right"}[mt],Xe=we.side===ft?1:-1,Ke=[-1,1,Xe,-Xe],it=me?(we.minor||{}).ticks:we.ticks;return it!=="inside"==(mt==="x")&&(Ke=Ke.map(function(Tt){return-Tt})),we.side&&Ke.push({l:-1,t:-1,r:1,b:1}[we.side.charAt(0)]),Ke},G.makeTransTickFn=function(we){return we._id.charAt(0)==="x"?function(me){return m(we._offset+we.l2p(me.x),0)}:function(me){return m(0,we._offset+we.l2p(me.x))}},G.makeTransTickLabelFn=function(we){var me=Ht(we),mt=we.ticklabelshift||0,ft=we.ticklabelstandoff||0,Xe=me[0],Ke=me[1],it=we.range[0]>we.range[1],Tt=we.ticklabelposition&&we.ticklabelposition.indexOf("inside")!==-1,rt=!Tt;if(mt){var xt=it?-1:1;mt=mt*xt}if(ft){var Mt=we.side,Lt=Tt&&(Mt==="top"||Mt==="left")||rt&&(Mt==="bottom"||Mt==="right")?1:-1;ft=ft*Lt}return we._id.charAt(0)==="x"?function(Xt){return m(Xe+we._offset+we.l2p(Ct(Xt))+mt,Ke+ft)}:function(Xt){return m(Ke+ft,Xe+we._offset+we.l2p(Ct(Xt))+mt)}};function Ct(we){return we.periodX!==void 0?we.periodX:we.x}function Ht(we){var me=we.ticklabelposition||"",mt=function(sr){return me.indexOf(sr)!==-1},ft=mt("top"),Xe=mt("left"),Ke=mt("right"),it=mt("bottom"),Tt=mt("inside"),rt=it||Xe||ft||Ke;if(!rt&&!Tt)return[0,0];var xt=we.side,Mt=rt?(we.tickwidth||0)/2:0,Lt=ae,Xt=we.tickfont?we.tickfont.size:12;return(it||ft)&&(Mt+=Xt*Te,Lt+=(we.linewidth||0)/2),(Xe||Ke)&&(Mt+=(we.linewidth||0)/2,Lt+=ae),Tt&&xt==="top"&&(Lt-=Xt*(1-Te)),(Xe||ft)&&(Mt=-Mt),(xt==="bottom"||xt==="right")&&(Lt=-Lt),[rt?Mt:0,Tt?Lt:0]}G.makeTickPath=function(we,me,mt,ft){ft||(ft={});var Xe=ft.minor;if(Xe&&!we.minor)return"";var Ke=ft.len!==void 0?ft.len:Xe?we.minor.ticklen:we.ticklen,it=we._id.charAt(0),Tt=(we.linewidth||1)/2;return it==="x"?"M0,"+(me+Tt*mt)+"v"+Ke*mt:"M"+(me+Tt*mt)+",0h"+Ke*mt},G.makeLabelFns=function(we,me,mt){var ft=we.ticklabelposition||"",Xe=function(ci){return ft.indexOf(ci)!==-1},Ke=Xe("top"),it=Xe("left"),Tt=Xe("right"),rt=Xe("bottom"),xt=rt||it||Ke||Tt,Mt=Xe("inside"),Lt=ft==="inside"&&we.ticks==="inside"||!Mt&&we.ticks==="outside"&&we.tickson!=="boundaries",Xt=0,sr=0,or=Lt?we.ticklen:0;if(Mt?or*=-1:xt&&(or=0),Lt&&(Xt+=or,mt)){var Dr=v.deg2rad(mt);Xt=or*Math.cos(Dr)+1,sr=or*Math.sin(Dr)}we.showticklabels&&(Lt||we.showline)&&(Xt+=.2*we.tickfont.size),Xt+=(we.linewidth||1)/2*(Mt?-1:1);var _r={labelStandoff:Xt,labelShift:sr},Zr,Er,Gr,Qr,En=0,Sn=we.side,gi=we._id.charAt(0),ei=we.tickangle,ai;if(gi==="x")ai=!Mt&&Sn==="bottom"||Mt&&Sn==="top",Qr=ai?1:-1,Mt&&(Qr*=-1),Zr=sr*Qr,Er=me+Xt*Qr,Gr=ai?1:-.2,Math.abs(ei)===90&&(Mt?Gr+=Ee:ei===-90&&Sn==="bottom"?Gr=Te:ei===90&&Sn==="top"?Gr=Ee:Gr=.5,En=Ee/2*(ei/90)),_r.xFn=function(ci){return ci.dx+Zr+En*ci.fontSize},_r.yFn=function(ci){return ci.dy+Er+ci.fontSize*Gr},_r.anchorFn=function(ci,_n){if(xt){if(it)return"end";if(Tt)return"start"}return!c(_n)||_n===0||_n===180?"middle":_n*Qr<0!==Mt?"end":"start"},_r.heightFn=function(ci,_n,Zn){return _n<-60||_n>60?-.5*Zn:we.side==="top"!==Mt?-Zn:0};else if(gi==="y"){if(ai=!Mt&&Sn==="left"||Mt&&Sn==="right",Qr=ai?1:-1,Mt&&(Qr*=-1),Zr=Xt,Er=sr*Qr,Gr=0,!Mt&&Math.abs(ei)===90&&(ei===-90&&Sn==="left"||ei===90&&Sn==="right"?Gr=Te:Gr=.5),Mt){var ta=c(ei)?+ei:0;if(ta!==0){var ka=v.deg2rad(ta);En=Math.abs(Math.sin(ka))*Te*Qr,Gr=0}}_r.xFn=function(ci){return ci.dx+me-(Zr+ci.fontSize*Gr)*Qr+En*ci.fontSize},_r.yFn=function(ci){return ci.dy+Er+ci.fontSize*Ee},_r.anchorFn=function(ci,_n){return c(_n)&&Math.abs(_n)===90?"middle":ai?"end":"start"},_r.heightFn=function(ci,_n,Zn){return we.side==="right"&&(_n*=-1),_n<-30?-Zn:_n<30?-.5*Zn:0}}return _r};function Ut(we){return[we.text,we.x,we.axInfo,we.font,we.fontSize,we.fontColor].join("_")}G.drawTicks=function(we,me,mt){mt=mt||{};var ft=me._id+"tick",Xe=[].concat(me.minor&&me.minor.ticks?mt.vals.filter(function(it){return it.minor&&!it.noTick}):[]).concat(me.ticks?mt.vals.filter(function(it){return!it.minor&&!it.noTick}):[]),Ke=mt.layer.selectAll("path."+ft).data(Xe,Ut);Ke.exit().remove(),Ke.enter().append("path").classed(ft,1).classed("ticks",1).classed("crisp",mt.crisp!==!1).each(function(it){return l.stroke(h.select(this),it.minor?me.minor.tickcolor:me.tickcolor)}).style("stroke-width",function(it){return T.crispRound(we,it.minor?me.minor.tickwidth:me.tickwidth,1)+"px"}).attr("d",mt.path).style("display",null),xn(me,[de]),Ke.attr("transform",mt.transFn)},G.drawGrid=function(we,me,mt){if(mt=mt||{},me.tickmode!=="sync"){var ft=me._id+"grid",Xe=me.minor&&me.minor.showgrid,Ke=Xe?mt.vals.filter(function(Zr){return Zr.minor}):[],it=me.showgrid?mt.vals.filter(function(Zr){return!Zr.minor}):[],Tt=mt.counterAxis;if(Tt&&G.shouldShowZeroLine(we,me,Tt))for(var rt=me.tickmode==="array",xt=0;xt<it.length;xt++){var Mt=it[xt].x;if(rt?!Mt:Math.abs(Mt)<me.dtick/100)if(it=it.slice(0,xt).concat(it.slice(xt+1)),rt)xt--;else break}me._gw=T.crispRound(we,me.gridwidth,1);for(var Lt=Xe?T.crispRound(we,me.minor.gridwidth,1):0,Xt=mt.layer,sr=mt.minorLayer,or=1;or>=0;or--){var Dr=or?Xt:sr;if(Dr){var _r=Dr.selectAll("path."+ft).data(or?it:Ke,Ut);_r.exit().remove(),_r.enter().append("path").classed(ft,1).classed("crisp",mt.crisp!==!1),_r.attr("transform",mt.transFn).attr("d",mt.path).each(function(Zr){return l.stroke(h.select(this),Zr.minor?me.minor.gridcolor:me.gridcolor||"#ddd")}).style("stroke-dasharray",function(Zr){return T.dashStyle(Zr.minor?me.minor.griddash:me.griddash,Zr.minor?me.minor.gridwidth:me.gridwidth)}).style("stroke-width",function(Zr){return(Zr.minor?Lt:me._gw)+"px"}).style("display",null),typeof mt.path=="function"&&_r.attr("d",mt.path)}}xn(me,[W,ce])}},G.drawZeroLine=function(we,me,mt){mt=mt||mt;var ft=me._id+"zl",Xe=G.shouldShowZeroLine(we,me,mt.counterAxis),Ke=mt.layer.selectAll("path."+ft).data(Xe?[{x:0,id:me._id}]:[]);Ke.exit().remove(),Ke.enter().append("path").classed(ft,1).classed("zl",1).classed("crisp",mt.crisp!==!1).each(function(){mt.layer.selectAll("path").sort(function(it,Tt){return re(it.id,Tt.id)})}),Ke.attr("transform",mt.transFn).attr("d",mt.path).call(l.stroke,me.zerolinecolor||l.defaultLine).style("stroke-width",T.crispRound(we,me.zerolinewidth,me._gw||1)+"px").style("display",null),xn(me,[le])},G.drawLabels=function(we,me,mt){mt=mt||{};var ft=we._fullLayout,Xe=me._id,Ke=mt.cls||Xe+"tick",it=mt.vals.filter(function(Ln){return Ln.text}),Tt=mt.labelFns,rt=mt.secondary?0:me.tickangle,xt=(me._prevTickAngles||{})[Ke],Mt=mt.layer.selectAll("g."+Ke).data(me.showticklabels?it:[],Ut),Lt=[];Mt.enter().append("g").classed(Ke,1).append("text").attr("text-anchor","middle").each(function(Ln){var qn=h.select(this),zn=we._promises.length;qn.call(g.positionText,Tt.xFn(Ln),Tt.yFn(Ln)).call(T.font,{family:Ln.font,size:Ln.fontSize,color:Ln.fontColor,weight:Ln.fontWeight,style:Ln.fontStyle,variant:Ln.fontVariant,textcase:Ln.fontTextcase,lineposition:Ln.fontLineposition,shadow:Ln.fontShadow}).text(Ln.text).call(g.convertToTspans,we),we._promises[zn]?Lt.push(we._promises.pop().then(function(){Xt(qn,rt)})):Xt(qn,rt)}),xn(me,[pe]),Mt.exit().remove(),mt.repositionOnUpdate&&Mt.each(function(Ln){h.select(this).select("text").call(g.positionText,Tt.xFn(Ln),Tt.yFn(Ln))});function Xt(Ln,qn){Ln.each(function(zn){var xi=h.select(this),Mi=xi.select(".text-math-group"),qi=Tt.anchorFn(zn,qn),Vi=mt.transFn.call(xi.node(),zn)+(c(qn)&&+qn!=0?" rotate("+qn+","+Tt.xFn(zn)+","+(Tt.yFn(zn)-zn.fontSize/2)+")":""),bi=g.lineCount(xi),Oa=He*zn.fontSize,na=Tt.heightFn(zn,c(qn)?+qn:0,(bi-1)*Oa);if(na&&(Vi+=m(0,na)),Mi.empty()){var la=xi.select("text");la.attr({transform:Vi,"text-anchor":qi}),la.style("opacity",1),me._adjustTickLabelsOverflow&&me._adjustTickLabelsOverflow()}else{var Ba=T.bBox(Mi.node()).width,li=Ba*{end:-.5,start:.5}[qi];Mi.attr("transform",Vi+m(li,0))}})}me._adjustTickLabelsOverflow=function(){var Ln=me.ticklabeloverflow;if(!(!Ln||Ln==="allow")){var qn=Ln.indexOf("hide")!==-1,zn=me._id.charAt(0)==="x",xi=0,Mi=zn?we._fullLayout.width:we._fullLayout.height;if(Ln.indexOf("domain")!==-1){var qi=v.simpleMap(me.range,me.r2l);xi=me.l2p(qi[0])+me._offset,Mi=me.l2p(qi[1])+me._offset}var Vi=Math.min(xi,Mi),bi=Math.max(xi,Mi),Oa=me.side,na=1/0,la=-1/0;Mt.each(function(ns){var ps=h.select(this),ms=ps.select(".text-math-group");if(ms.empty()){var is=T.bBox(ps.node()),Zi=0;zn?(is.right>bi||is.left<Vi)&&(Zi=1):(is.bottom>bi||is.top+(me.tickangle?0:ns.fontSize/4)<Vi)&&(Zi=1);var vs=ps.select("text");Zi?qn&&vs.style("opacity",0):(vs.style("opacity",1),Oa==="bottom"||Oa==="right"?na=Math.min(na,zn?is.top:is.left):na=-1/0,Oa==="top"||Oa==="left"?la=Math.max(la,zn?is.bottom:is.right):la=1/0)}});for(var Ba in ft._plots){var li=ft._plots[Ba];if(!(me._id!==li.xaxis._id&&me._id!==li.yaxis._id)){var rs=zn?li.yaxis:li.xaxis;rs&&(rs["_visibleLabelMin_"+me._id]=na,rs["_visibleLabelMax_"+me._id]=la)}}}},me._hideCounterAxisInsideTickLabels=function(Ln){var qn=me._id.charAt(0)==="x",zn=[];for(var xi in ft._plots){var Mi=ft._plots[xi];me._id!==Mi.xaxis._id&&me._id!==Mi.yaxis._id||zn.push(qn?Mi.yaxis:Mi.xaxis)}zn.forEach(function(qi,Vi){qi&&yn(qi)&&(Ln||[le,ce,W,de,pe]).forEach(function(bi){var Oa=bi.K==="tick"&&bi.L==="text"&&me.ticklabelmode==="period",na=ft._plots[me._mainSubplot],la;bi.K===le.K?la=na.zerolinelayer.selectAll("."+me._id+"zl"):bi.K===ce.K?la=na.minorGridlayer.selectAll("."+me._id):bi.K===W.K?la=na.gridlayer.selectAll("."+me._id):la=na[me._id.charAt(0)+"axislayer"],la.each(function(){var Ba=h.select(this);bi.L&&(Ba=Ba.selectAll(bi.L)),Ba.each(function(li){var rs=me.l2p(Oa?Ct(li):li.x)+me._offset,ns=h.select(this);rs<me["_visibleLabelMax_"+qi._id]&&rs>me["_visibleLabelMin_"+qi._id]?ns.style("display","none"):bi.K==="tick"&&!Vi&&ns.style("display",null)})})})})},Xt(Mt,xt+1?xt:rt);function sr(){return Lt.length&&Promise.all(Lt)}var or=null;function Dr(){if(Xt(Mt,rt),it.length&&me.autotickangles&&(me.type!=="log"||String(me.dtick).charAt(0)!=="D")){or=me.autotickangles[0];var Ln=0,qn=[],zn,xi=1;Mt.each(function(ni){Ln=Math.max(Ln,ni.fontSize);var wi=me.l2p(ni.x),Ds=br(this),Uo=T.bBox(Ds.node());xi=Math.max(xi,g.lineCount(Ds)),qn.push({top:0,bottom:10,height:10,left:wi-Uo.width/2,right:wi+Uo.width/2+2,width:Uo.width+2})});var Mi=(me.tickson==="boundaries"||me.showdividers)&&!mt.secondary,qi=it.length,Vi=Math.abs((it[qi-1].x-it[0].x)*me._m)/(qi-1),bi=Mi?Vi/2:Vi,Oa=Mi?me.ticklen:Ln*1.25*xi,na=Math.sqrt(Math.pow(bi,2)+Math.pow(Oa,2)),la=bi/na,Ba=me.autotickangles.map(function(ni){return ni*Math.PI/180}),li=Ba.find(function(ni){return Math.abs(Math.cos(ni))<=la});li===void 0&&(li=Ba.reduce(function(ni,wi){return Math.abs(Math.cos(ni))<Math.abs(Math.cos(wi))?ni:wi},Ba[0]));var rs=li*(180/Math.PI);if(Mi){var ns=2;for(me.ticks&&(ns+=me.tickwidth/2),zn=0;zn<qn.length;zn++){var ps=it[zn].xbnd,ms=qn[zn];if(ps[0]!==null&&ms.left-me.l2p(ps[0])<ns||ps[1]!==null&&me.l2p(ps[1])-ms.right<ns){or=rs;break}}}else{var is=me.ticklabelposition||"",Zi=function(ni){return is.indexOf(ni)!==-1},vs=Zi("top"),Ls=Zi("left"),va=Zi("right"),Rs=Zi("bottom"),Qi=Rs||Ls||vs||va,Ki=Qi?(me.tickwidth||0)+2*ae:0;for(zn=0;zn<qn.length-1;zn++)if(v.bBoxIntersect(qn[zn],qn[zn+1],Ki)){or=rs;break}}or&&Xt(Mt,or)}}me._selections&&(me._selections[Ke]=Mt);var _r=[sr];me.automargin&&ft._redrawFromAutoMarginCount&&xt===90?(or=xt,_r.push(function(){Xt(Mt,xt)})):_r.push(Dr),me._tickAngles&&_r.push(function(){me._tickAngles[Ke]=or===null?c(rt)?rt:0:or});var Zr=function(){var Ln=0,qn=0;return Mt.each(function(zn,xi){var Mi=br(this),qi=Mi.select(".text-math-group");if(qi.empty()){var Vi;me._vals[xi]&&(Vi=me._vals[xi].bb||T.bBox(Mi.node()),me._vals[xi].bb=Vi),Ln=Math.max(Ln,Vi.width),qn=Math.max(qn,Vi.height)}}),{labelsMaxW:Ln,labelsMaxH:qn}},Er=me._anchorAxis;if(Er&&(Er.autorange||Er.insiderange)&&yn(me)&&!D(ft,me._id)&&(ft._insideTickLabelsUpdaterange||(ft._insideTickLabelsUpdaterange={}),Er.autorange&&(ft._insideTickLabelsUpdaterange[Er._name+".autorange"]=Er.autorange,_r.push(Zr)),Er.insiderange)){var Gr=Zr(),Qr=me._id.charAt(0)==="y"?Gr.labelsMaxW:Gr.labelsMaxH;Qr+=2*ae,me.ticklabelposition==="inside"&&(Qr+=me.ticklen||0);var En=me.side==="right"||me.side==="top"?1:-1,Sn=En===1?1:0,gi=En===1?0:1,ei=[];ei[gi]=Er.range[gi];var ai=Er.range,ta=Er.r2p(ai[Sn]),ka=Er.r2p(ai[gi]),ci=ft._insideTickLabelsUpdaterange[Er._name+".range"];if(ci){var _n=Er.r2p(ci[Sn]),Zn=Er.r2p(ci[gi]),fi=En*(me._id.charAt(0)==="y"?1:-1);fi*ta<fi*_n&&(ta=_n,ei[Sn]=ai[Sn]=ci[Sn]),fi*ka>fi*Zn&&(ka=Zn,ei[gi]=ai[gi]=ci[gi])}var ra=Math.abs(ka-ta);ra-Qr>0?(ra-=Qr,Qr*=1+Qr/ra):Qr=0,me._id.charAt(0)!=="y"&&(Qr=-Qr),ei[Sn]=Er.p2r(Er.r2p(ai[Sn])+En*Qr),Er.autorange==="min"||Er.autorange==="max reversed"?(ei[0]=null,Er._rangeInitial0=void 0,Er._rangeInitial1=void 0):(Er.autorange==="max"||Er.autorange==="min reversed")&&(ei[1]=null,Er._rangeInitial0=void 0,Er._rangeInitial1=void 0),ft._insideTickLabelsUpdaterange[Er._name+".range"]=ei}var Ji=v.syncOrAsync(_r);return Ji&&Ji.then&&we._promises.push(Ji),Ji};function Ar(we,me,mt){var ft=me._id+"divider",Xe=mt.vals,Ke=mt.layer.selectAll("path."+ft).data(Xe,Ut);Ke.exit().remove(),Ke.enter().insert("path",":first-child").classed(ft,1).classed("crisp",1).call(l.stroke,me.dividercolor).style("stroke-width",T.crispRound(we,me.dividerwidth,1)+"px"),Ke.attr("transform",mt.transFn).attr("d",mt.path)}G.getPxPosition=function(we,me){var mt=we._fullLayout._size,ft=me._id.charAt(0),Xe=me.side,Ke;if(me.anchor!=="free"?Ke=me._anchorAxis:ft==="x"?Ke={_offset:mt.t+(1-(me.position||0))*mt.h,_length:0}:ft==="y"&&(Ke={_offset:mt.l+(me.position||0)*mt.w+me._shift,_length:0}),Xe==="top"||Xe==="left")return Ke._offset;if(Xe==="bottom"||Xe==="right")return Ke._offset+Ke._length};function Rr(we){var me=we.title.font.size,mt=(we.title.text.match(g.BR_TAG_ALL)||[]).length;return we.title.hasOwnProperty("standoff")?me*(Te+mt*He):mt?me*(mt+1)*He:me}function $r(we,me){var mt=we._fullLayout,ft=me._id,Xe=ft.charAt(0),Ke=me.title.font.size,it,Tt=(me.title.text.match(g.BR_TAG_ALL)||[]).length;if(me.title.hasOwnProperty("standoff"))me.side==="bottom"||me.side==="right"?it=me._depth+me.title.standoff+Ke*Te:(me.side==="top"||me.side==="left")&&(it=me._depth+me.title.standoff+Ke*(Ee+Tt*He));else{var rt=yn(me);if(me.type==="multicategory")it=me._depth;else{var xt=1.5*Ke;rt&&(xt=.5*Ke,me.ticks==="outside"&&(xt+=me.ticklen)),it=10+xt+(me.linewidth?me.linewidth-1:0)}rt||(Xe==="x"?it+=me.side==="top"?Ke*(me.showticklabels?1:0):Ke*(me.showticklabels?1.5:.5):it+=me.side==="right"?Ke*(me.showticklabels?1:.5):Ke*(me.showticklabels?.5:0))}var Mt=G.getPxPosition(we,me),Lt,Xt,sr;Xe==="x"?(Xt=me._offset+me._length/2,sr=me.side==="top"?Mt-it:Mt+it):(sr=me._offset+me._length/2,Xt=me.side==="right"?Mt+it:Mt-it,Lt={rotate:"-90",offset:0});var or;if(me.type!=="multicategory"){var Dr=me._selections[me._id+"tick"];if(or={selection:Dr,side:me.side},Dr&&Dr.node()&&Dr.node().parentNode){var _r=T.getTranslate(Dr.node().parentNode);or.offsetLeft=_r.x,or.offsetTop=_r.y}me.title.hasOwnProperty("standoff")&&(or.pad=0)}return me._titleStandoff=it,w.draw(we,ft+"title",{propContainer:me,propName:me._name+".title.text",placeholder:mt._dfltTitle[Xe],avoid:or,transform:Lt,attributes:{x:Xt,y:sr,"text-anchor":"middle"}})}G.shouldShowZeroLine=function(we,me,mt){var ft=v.simpleMap(me.range,me.r2l);return ft[0]*ft[1]<=0&&me.zeroline&&(me.type==="linear"||me.type==="-")&&!(me.rangebreaks&&me.maskBreaks(0)===ne)&&(Mr(me,0)||!Ir(we,me,mt,ft)||gr(we,me))},G.clipEnds=function(we,me){return me.filter(function(mt){return Mr(we,mt.x)})};function Mr(we,me){var mt=we.l2p(me);return mt>1&&mt<we._length-1}function Ir(we,me,mt,ft){var Xe=mt._mainAxis;if(!Xe)return;var Ke=we._fullLayout,it=me._id.charAt(0),Tt=G.counterLetter(me._id),rt=me._offset+(Math.abs(ft[0])<Math.abs(ft[1])==(it==="x")?0:me._length);function xt(or){if(!or.showline||!or.linewidth)return!1;var Dr=Math.max((or.linewidth+me.zerolinewidth)/2,1);function _r(Gr){return typeof Gr=="number"&&Math.abs(Gr-rt)<Dr}if(_r(or._mainLinePosition)||_r(or._mainMirrorPosition))return!0;var Zr=or._linepositions||{};for(var Er in Zr)if(_r(Zr[Er][0])||_r(Zr[Er][1]))return!0}var Mt=Ke._plots[mt._mainSubplot];if(!(Mt.mainplotinfo||Mt).overlays.length)return xt(mt);for(var Lt=G.list(we,Tt),Xt=0;Xt<Lt.length;Xt++){var sr=Lt[Xt];if(sr._mainAxis===Xe&&xt(sr))return!0}}function gr(we,me){for(var mt=we._fullData,ft=me._mainSubplot,Xe=me._id.charAt(0),Ke=0;Ke<mt.length;Ke++){var it=mt[Ke];if(it.visible===!0&&it.xaxis+it.yaxis===ft&&(p.traceIs(it,"bar-like")&&it.orientation==={x:"h",y:"v"}[Xe]||it.fill&&it.fill.charAt(it.fill.length-1)===Xe))return!0}return!1}function br(we){var me=h.select(we),mt=me.select(".text-math-group");return mt.empty()?me.select("text"):mt}G.allowAutoMargin=function(we){for(var me=G.list(we,"",!0),mt=0;mt<me.length;mt++){var ft=me[mt];ft.automargin&&(u.allowAutoMargin(we,Vr(ft)),ft.mirror&&u.allowAutoMargin(we,Br(ft))),p.getComponentMethod("rangeslider","isVisible")(ft)&&u.allowAutoMargin(we,Ur(ft))}};function Vr(we){return we._id+".automargin"}function Br(we){return Vr(we)+".mirror"}function Ur(we){return we._id+".rangeslider"}G.swap=function(we,me){for(var mt=Lr(we,me),ft=0;ft<mt.length;ft++)Or(we,mt[ft].x,mt[ft].y)};function Lr(we,me){var mt=[],ft,Xe;for(ft=0;ft<me.length;ft++){var Ke=[],it=we._fullData[me[ft]].xaxis,Tt=we._fullData[me[ft]].yaxis;if(!(!it||!Tt)){for(Xe=0;Xe<mt.length;Xe++)(mt[Xe].x.indexOf(it)!==-1||mt[Xe].y.indexOf(Tt)!==-1)&&Ke.push(Xe);if(!Ke.length){mt.push({x:[it],y:[Tt]});continue}var rt=mt[Ke[0]],xt;if(Ke.length>1)for(Xe=1;Xe<Ke.length;Xe++)xt=mt[Ke[Xe]],hr(rt.x,xt.x),hr(rt.y,xt.y);hr(rt.x,[it]),hr(rt.y,[Tt])}}return mt}function hr(we,me){for(var mt=0;mt<me.length;mt++)we.indexOf(me[mt])===-1&&we.push(me[mt])}function Or(we,me,mt){var ft=[],Xe=[],Ke=we.layout,it,Tt;for(it=0;it<me.length;it++)ft.push(G.getFromId(we,me[it]));for(it=0;it<mt.length;it++)Xe.push(G.getFromId(we,mt[it]));var rt=Object.keys(y),xt=["anchor","domain","overlaying","position","side","tickangle","editType"],Mt=["linear","log"];for(it=0;it<rt.length;it++){var Lt=rt[it],Xt=ft[0][Lt],sr=Xe[0][Lt],or=!0,Dr=!1,_r=!1;if(!(Lt.charAt(0)==="_"||typeof Xt=="function"||xt.indexOf(Lt)!==-1)){for(Tt=1;Tt<ft.length&&or;Tt++){var Zr=ft[Tt][Lt];Lt==="type"&&Mt.indexOf(Xt)!==-1&&Mt.indexOf(Zr)!==-1&&Xt!==Zr?Dr=!0:Zr!==Xt&&(or=!1)}for(Tt=1;Tt<Xe.length&&or;Tt++){var Er=Xe[Tt][Lt];Lt==="type"&&Mt.indexOf(sr)!==-1&&Mt.indexOf(Er)!==-1&&sr!==Er?_r=!0:Xe[Tt][Lt]!==sr&&(or=!1)}or&&(Dr&&(Ke[ft[0]._name].type="linear"),_r&&(Ke[Xe[0]._name].type="linear"),fn(Ke,Lt,ft,Xe,we._fullLayout._dfltTitle))}}for(it=0;it<we._fullLayout.annotations.length;it++){var Gr=we._fullLayout.annotations[it];me.indexOf(Gr.xref)!==-1&&mt.indexOf(Gr.yref)!==-1&&v.swapAttrs(Ke.annotations[it],["?"])}}function fn(we,me,mt,ft,Xe){var Ke=v.nestedProperty,it=Ke(we[mt[0]._name],me).get(),Tt=Ke(we[ft[0]._name],me).get(),rt;for(me==="title"&&(it&&it.text===Xe.x&&(it.text=Xe.y),Tt&&Tt.text===Xe.y&&(Tt.text=Xe.x)),rt=0;rt<mt.length;rt++)Ke(we,mt[rt]._name+"."+me).set(Tt);for(rt=0;rt<ft.length;rt++)Ke(we,ft[rt]._name+"."+me).set(it)}function An(we){return we._id==="angularaxis"}function qr(we,me){for(var mt=me._rangebreaks.length,ft=0;ft<mt;ft++){var Xe=me._rangebreaks[ft];if(we>=Xe.min&&we<Xe.max)return Xe.max}return we}function yn(we){return(we.ticklabelposition||"").indexOf("inside")!==-1}function xn(we,me){yn(we._anchorAxis||{})&&we._hideCounterAxisInsideTickLabels&&we._hideCounterAxisInsideTickLabels(me)}function Xn(we,me,mt,ft){var Xe=we.anchor!=="free"&&(we.overlaying===void 0||we.overlaying===!1)?we._id:we.overlaying,Ke;ft?Ke=we.side==="right"?me:-me:Ke=me,Xe in mt||(mt[Xe]={}),we.side in mt[Xe]||(mt[Xe][we.side]=0),mt[Xe][we.side]+=Ke}function mr(we,me){return we.autoshift?me[we.overlaying][we.side]:we.shift||0}function jn(we,me){return/%f/.test(me)?we>=Q:/%L/.test(me)?we>=X:/%[SX]/.test(me)?we>=q:/%M/.test(me)?we>=z:/%[HI]/.test(me)?we>=Z:/%p/.test(me)?we>=Y:/%[Aadejuwx]/.test(me)?we>=H:/%[UVW]/.test(me)?we>=J:/%[Bbm]/.test(me)?we>=P:/%[q]/.test(me)?we>=k:/%[Yy]/.test(me)?we>=C:!0}}}),fo=i({"src/plots/cartesian/autorange_options_defaults.js"(U,$){$.exports=function(c,u,p){var v,m;if(p){var g=u==="reversed"||u==="min reversed"||u==="max reversed";v=p[g?1:0],m=p[g?0:1]}var w=c("autorangeoptions.minallowed",m===null?v:void 0),l=c("autorangeoptions.maxallowed",v===null?m:void 0);w===void 0&&c("autorangeoptions.clipmin"),l===void 0&&c("autorangeoptions.clipmax"),c("autorangeoptions.include")}}}),ll=i({"src/plots/cartesian/range_defaults.js"(U,$){var h=fo();$.exports=function(u,p,v,m){var g=p._template||{},w=p.type||g.type||"-";v("minallowed"),v("maxallowed");var l=v("range");if(!l){var T;!m.noInsiderange&&w!=="log"&&(T=v("insiderange"),T&&(T[0]===null||T[1]===null)&&(p.insiderange=!1,T=void 0),T&&(l=v("range",T)))}var y=p.getAutorangeDflt(l,m),S=v("autorange",y),R;l&&(l[0]===null&&l[1]===null||(l[0]===null||l[1]===null)&&(S==="reversed"||S===!0)||l[0]!==null&&(S==="min"||S==="max reversed")||l[1]!==null&&(S==="max"||S==="min reversed"))&&(l=void 0,delete p.range,p.autorange=!0,R=!0),R||(y=p.getAutorangeDflt(l,m),S=v("autorange",y)),S&&(h(v,S,l),(w==="linear"||w==="-")&&v("rangemode")),p.cleanRange()}}}),cl=i({"node_modules/mouse-event-offset/index.js"(U,$){var h={left:0,top:0};$.exports=c;function c(p,v,m){v=v||p.currentTarget||p.srcElement,Array.isArray(m)||(m=[0,0]);var g=p.clientX||0,w=p.clientY||0,l=u(v);return m[0]=g-l.left,m[1]=w-l.top,m}function u(p){return p===window||p===document||p===document.body?h:p.getBoundingClientRect()}}}),lu=i({"node_modules/has-passive-events/index.js"(U,$){var h=eo();function c(){var u=!1;try{var p=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,p),window.removeEventListener("test",null,p)}catch{u=!1}return u}$.exports=h&&c()}}),Fl=i({"src/components/dragelement/align.js"(U,$){$.exports=function(c,u,p,v,m){var g=(c-p)/(v-p),w=g+u/(v-p),l=(g+w)/2;return m==="left"||m==="bottom"?g:m==="center"||m==="middle"?l:m==="right"||m==="top"?w:g<2/3-l?g:w>4/3-l?w:l}}}),Il=i({"src/components/dragelement/cursor.js"(U,$){var h=kr(),c=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(p,v,m,g){return m==="left"?p=0:m==="center"?p=1:m==="right"?p=2:p=h.constrain(Math.floor(p*3),0,2),g==="bottom"?v=0:g==="middle"?v=1:g==="top"?v=2:v=h.constrain(Math.floor(v*3),0,2),c[v][p]}}}),to=i({"src/components/dragelement/unhover.js"(U,$){var h=Co(),c=rn(),u=Jn().getGraphDiv,p=cr(),v=$.exports={};v.wrapped=function(m,g,w){m=u(m),m._fullLayout&&c.clear(m._fullLayout._uid+p.HOVERID),v.raw(m,g,w)},v.raw=function(g,w){var l=g._fullLayout,T=g._hoverdata;w||(w={}),!(w.target&&!g._dragged&&h.triggerHandler(g,"plotly_beforehover",w)===!1)&&(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),g._hoverdata=void 0,w.target&&T&&g.emit("plotly_unhover",{event:w,points:T}))}}}),Wa=i({"src/components/dragelement/index.js"(U,$){var h=cl(),c=uo(),u=lu(),p=kr().removeElement,v=ha(),m=$.exports={};m.align=Fl(),m.getCursor=Il();var g=to();m.unhover=g.wrapped,m.unhoverRaw=g.raw,m.init=function(y){var S=y.gd,R=1,M=S._context.doubleClickDelay,A=y.element,C,j,b,k,E,F,P,J;S._mouseDownTime||(S._mouseDownTime=0),A.style.pointerEvents="all",A.onmousedown=Z,u?(A._ontouchstart&&A.removeEventListener("touchstart",A._ontouchstart),A._ontouchstart=Z,A.addEventListener("touchstart",Z,{passive:!1})):A.ontouchstart=Z;function H(X,Q,ee){return Math.abs(X)<ee&&(X=0),Math.abs(Q)<ee&&(Q=0),[X,Q]}var Y=y.clampFn||H;function Z(X){S._dragged=!1,S._dragging=!0;var Q=l(X);C=Q[0],j=Q[1],P=X.target,F=X,J=X.buttons===2||X.ctrlKey,typeof X.clientX>"u"&&typeof X.clientY>"u"&&(X.clientX=C,X.clientY=j),b=new Date().getTime(),b-S._mouseDownTime<M?R+=1:(R=1,S._mouseDownTime=b),y.prepFn&&y.prepFn(X,C,j),c&&!J?(E=w(),E.style.cursor=window.getComputedStyle(A).cursor):c||(E=document,k=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(A).cursor),document.addEventListener("mouseup",q),document.addEventListener("touchend",q),y.dragmode!==!1&&(X.preventDefault(),document.addEventListener("mousemove",z),document.addEventListener("touchmove",z,{passive:!1}))}function z(X){X.preventDefault();var Q=l(X),ee=y.minDrag||v.MINDRAG,ne=Y(Q[0]-C,Q[1]-j,ee),le=ne[0],W=ne[1];(le||W)&&(S._dragged=!0,m.unhover(S,X)),S._dragged&&y.moveFn&&!J&&(S._dragdata={element:A,dx:le,dy:W},y.moveFn(le,W))}function q(X){if(delete S._dragdata,y.dragmode!==!1&&(X.preventDefault(),document.removeEventListener("mousemove",z),document.removeEventListener("touchmove",z)),document.removeEventListener("mouseup",q),document.removeEventListener("touchend",q),c?p(E):k&&(E.documentElement.style.cursor=k,k=null),!S._dragging){S._dragged=!1;return}if(S._dragging=!1,new Date().getTime()-S._mouseDownTime>M&&(R=Math.max(R-1,1)),S._dragged)y.doneFn&&y.doneFn();else{var Q;F.target===P?Q=F:(Q={target:P,srcElement:P,toElement:P},Object.keys(F).concat(Object.keys(F.__proto__)).forEach(ee=>{var ne=F[ee];!Q[ee]&&typeof ne!="function"&&(Q[ee]=ne)})),y.clickFn&&y.clickFn(R,Q),J||P.dispatchEvent(new MouseEvent("click",X))}S._dragging=!1,S._dragged=!1}};function w(){var T=document.createElement("div");T.className="dragcover";var y=T.style;return y.position="fixed",y.left=0,y.right=0,y.top=0,y.bottom=0,y.zIndex=999999999,y.background="none",document.body.appendChild(T),T}m.coverSlip=w;function l(T){return h(T.changedTouches?T.changedTouches[0]:T,document.body)}}}),ho=i({"src/lib/setcursor.js"(U,$){$.exports=function(c,u){(c.attr("class")||"").split(" ").forEach(function(p){p.indexOf("cursor-")===0&&c.classed(p,!1)}),u&&c.classed("cursor-"+u,!0)}}}),Bn=i({"src/lib/override_cursor.js"(U,$){var h=ho(),c="data-savedcursor",u="!!";$.exports=function(v,m){var g=v.attr(c);if(m){if(!g){for(var w=(v.attr("class")||"").split(" "),l=0;l<w.length;l++){var T=w[l];T.indexOf("cursor-")===0&&v.attr(c,T.substr(7)).classed(T,!1)}v.attr(c)||v.attr(c,u)}h(v,m)}else g&&(v.attr(c,null),g===u?h(v):h(v,g))}}}),Sc=i({"src/components/legend/attributes.js"(U,$){var h=er(),c=Ft();$.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:h({editType:"legend"}),grouptitlefont:h({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:h({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}}}),cu=i({"src/components/legend/helpers.js"(U){U.isGrouped=function(h){return(h.traceorder||"").indexOf("grouped")!==-1},U.isVertical=function(h){return h.orientation!=="h"},U.isReversed=function(h){return(h.traceorder||"").indexOf("reversed")!==-1}}}),ad=i({"src/components/legend/defaults.js"(U,$){var h=mn(),c=kr(),u=Si(),p=lt(),v=Sc(),m=zi(),g=cu();function w(l,T,y,S){var R=T[l]||{},M=u.newContainer(y,l);function A(He,te){return c.coerce(R,M,v,He,te)}var C=c.coerceFont(A,"font",y.font);A("bgcolor",y.paper_bgcolor),A("bordercolor");var j=A("visible");if(j){for(var b,k=function(He,te){var ae=b._input,G=b;return c.coerce(ae,G,p,He,te)},E=y.font||{},F=c.coerceFont(A,"grouptitlefont",E,{overrideDflt:{size:Math.round(E.size*1.1)}}),P=0,J=!1,H="normal",Y=(y.shapes||[]).filter(function(He){return He.showlegend}),Z=S.concat(Y).filter(function(He){return l===(He.legend||"legend")}),z=0;z<Z.length;z++)if(b=Z[z],!!b.visible){var q=b._isShape;(b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&b._module.attributes.showlegend.dflt===!1))&&(P++,b.showlegend&&(J=!0,(!q&&h.traceIs(b,"pie-like")||b._input.showlegend===!0)&&P++),c.coerceFont(k,"legendgrouptitle.font",F)),(!q&&h.traceIs(b,"bar")&&y.barmode==="stack"||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(H=g.isGrouped({traceorder:H})?"grouped+reversed":"reversed"),b.legendgroup!==void 0&&b.legendgroup!==""&&(H=g.isReversed({traceorder:H})?"reversed+grouped":"grouped")}var X=c.coerce(T,y,m,"showlegend",J&&P>(l==="legend"?1:0));if(X===!1&&(y[l]=void 0),!(X===!1&&!R.uirevision)&&(A("uirevision",y.uirevision),X!==!1)){A("borderwidth");var Q=A("orientation"),ee=A("yref"),ne=A("xref"),le=Q==="h",W=ee==="paper",ce=ne==="paper",de,pe,he,be="left";le?(de=0,h.getComponentMethod("rangeslider","isVisible")(T.xaxis)?W?(pe=1.1,he="bottom"):(pe=1,he="top"):W?(pe=-.1,he="top"):(pe=0,he="bottom")):(pe=1,he="auto",ce?de=1.02:(de=1,be="right")),c.coerce(R,M,{x:{valType:"number",editType:"legend",min:ce?-2:0,max:ce?3:1,dflt:de}},"x"),c.coerce(R,M,{y:{valType:"number",editType:"legend",min:W?-2:0,max:W?3:1,dflt:pe}},"y"),A("traceorder",H),g.isGrouped(y[l])&&A("tracegroupgap"),A("entrywidth"),A("entrywidthmode"),A("indentation"),A("itemsizing"),A("itemwidth"),A("itemclick"),A("itemdoubleclick"),A("groupclick"),A("xanchor",be),A("yanchor",he),A("valign"),c.noneOrAll(R,M,["x","y"]);var Ee=A("title.text");if(Ee){A("title.side",le?"left":"top");var Te=c.extendFlat({},C,{size:c.bigFont(C.size)});c.coerceFont(A,"title.font",Te)}}}}$.exports=function(T,y,S){var R,M=S.slice(),A=y.shapes;if(A)for(R=0;R<A.length;R++){var C=A[R];if(C.showlegend){var j={_input:C._input,visible:C.visible,showlegend:C.showlegend,legend:C.legend};M.push(j)}}var b=["legend"];for(R=0;R<M.length;R++)c.pushUnique(b,M[R].legend);for(y._legends=[],R=0;R<b.length;R++){var k=b[R];w(k,T,y,M),y[k]&&y[k].visible&&(y[k]._id=k),y._legends.push(k)}}}}),Bf=i({"src/components/legend/handle_click.js"(U,$){var h=mn(),c=kr(),u=c.pushUnique,p=!0;$.exports=function(m,g,w){var l=g._fullLayout;if(g._dragged||g._editing)return;var T=l.legend.itemclick,y=l.legend.itemdoubleclick,S=l.legend.groupclick;w===1&&T==="toggle"&&y==="toggleothers"&&p&&g.data&&g._context.showTips&&c.notifier(c._(g,"Double-click on legend to isolate one trace"),"long"),p=!1;var R;if(w===1?R=T:w===2&&(R=y),!R)return;var M=S==="togglegroup",A=l.hiddenlabels?l.hiddenlabels.slice():[],C=m.data()[0][0];if(C.groupTitle&&C.noClick)return;var j=g._fullData,b=(l.shapes||[]).filter(function(Ae){return Ae.showlegend}),k=j.concat(b),E=C.trace;E._isShape&&(E=E._fullInput);var F=E.legendgroup,P,J,H,Y,Z,z,q={},X=[],Q=[],ee=[];function ne(Ae,Fe){var ke=X.indexOf(Ae),Be=q.visible;return Be||(Be=q.visible=[]),X.indexOf(Ae)===-1&&(X.push(Ae),ke=X.length-1),Be[ke]=Fe,ke}var le=(l.shapes||[]).map(function(Ae){return Ae._input}),W=!1;function ce(Ae,Fe){le[Ae].visible=Fe,W=!0}function de(Ae,Fe){if(!(C.groupTitle&&!M)){var ke=Ae._fullInput||Ae,Be=ke._isShape,et=ke.index;et===void 0&&(et=ke._index);var ht=ke.visible===!1?!1:Fe;Be?ce(et,ht):ne(et,ht)}}var pe=E.legend,he=E._fullInput,be=he&&he._isShape;if(!be&&h.traceIs(E,"pie-like")){var Ee=C.label,Te=A.indexOf(Ee);if(R==="toggle")Te===-1?A.push(Ee):A.splice(Te,1);else if(R==="toggleothers"){var He=Te!==-1,te=[];for(P=0;P<g.calcdata.length;P++){var ae=g.calcdata[P];for(J=0;J<ae.length;J++){var G=ae[J],K=G.label;pe===ae[0].trace.legend&&Ee!==K&&(A.indexOf(K)===-1&&(He=!0),u(A,K),te.push(K))}}if(!He)for(var V=0;V<te.length;V++){var re=A.indexOf(te[V]);re!==-1&&A.splice(re,1)}}h.call("_guiRelayout",g,"hiddenlabels",A)}else{var D=F&&F.length,B=[],oe;if(D)for(P=0;P<k.length;P++)oe=k[P],oe.visible&&oe.legendgroup===F&&B.push(P);if(R==="toggle"){var ie;switch(E.visible){case!0:ie="legendonly";break;case!1:ie=!1;break;case"legendonly":ie=!0;break}if(D)if(M)for(P=0;P<k.length;P++){var ge=k[P];ge.visible!==!1&&ge.legendgroup===F&&de(ge,ie)}else de(E,ie);else de(E,ie)}else if(R==="toggleothers"){var _e,Se,De,Ge,Je,yt=!0;for(P=0;P<k.length;P++)if(Je=k[P],_e=Je===E,De=Je.showlegend!==!0,!(_e||De)&&(Se=D&&Je.legendgroup===F,!Se&&Je.legend===pe&&Je.visible===!0&&!h.traceIs(Je,"notLegendIsolatable"))){yt=!1;break}for(P=0;P<k.length;P++)if(Je=k[P],!(Je.visible===!1||Je.legend!==pe)&&!h.traceIs(Je,"notLegendIsolatable"))switch(E.visible){case"legendonly":de(Je,!0);break;case!0:Ge=yt?!0:"legendonly",_e=Je===E,De=Je.showlegend!==!0&&!Je.legendgroup,Se=_e||D&&Je.legendgroup===F,de(Je,Se||De?!0:Ge);break}}for(P=0;P<Q.length;P++)if(H=Q[P],!!H){var ut=H.constructUpdate(),vt=Object.keys(ut);for(J=0;J<vt.length;J++)Y=vt[J],z=q[Y]=q[Y]||[],z[ee[P]]=ut[Y]}for(Z=Object.keys(q),P=0;P<Z.length;P++)for(Y=Z[P],J=0;J<X.length;J++)q[Y].hasOwnProperty(J)||(q[Y][J]=void 0);W?h.call("_guiUpdate",g,q,{shapes:le},X):h.call("_guiRestyle",g,q,X)}}}}),sd=i({"src/components/legend/constants.js"(U,$){$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}}}),Hf=i({"src/components/legend/get_legend_data.js"(U,$){var h=mn(),c=cu();$.exports=function(p,v,m){var g=v._inHover,w=c.isGrouped(v),l=c.isReversed(v),T={},y=[],S=!1,R={},M=0,A=0,C,j;function b(de,pe,he){if(v.visible!==!1&&!(m&&de!==v._id))if(pe===""||!c.isGrouped(v)){var be="~~i"+M;y.push(be),T[be]=[he],M++}else y.indexOf(pe)===-1?(y.push(pe),S=!0,T[pe]=[he]):T[pe].push(he)}for(C=0;C<p.length;C++){var k=p[C],E=k[0],F=E.trace,P=F.legend,J=F.legendgroup;if(!(!g&&(!F.visible||!F.showlegend)))if(h.traceIs(F,"pie-like"))for(R[J]||(R[J]={}),j=0;j<k.length;j++){var H=k[j].label;R[J][H]||(b(P,J,{label:H,color:k[j].color,i:k[j].i,trace:F,pts:k[j].pts}),R[J][H]=!0,A=Math.max(A,(H||"").length))}else b(P,J,E),A=Math.max(A,(F.name||"").length)}if(!y.length)return[];var Y=!S||!w,Z=[];for(C=0;C<y.length;C++){var z=T[y[C]];Y?Z.push(z[0]):Z.push(z)}for(Y&&(Z=[Z]),C=0;C<Z.length;C++){var q=1/0;for(j=0;j<Z[C].length;j++){var X=Z[C][j].trace.legendrank;q>X&&(q=X)}Z[C][0]._groupMinRank=q,Z[C][0]._preGroupSort=C}var Q=function(de,pe){return de[0]._groupMinRank-pe[0]._groupMinRank||de[0]._preGroupSort-pe[0]._preGroupSort},ee=function(de,pe){return de.trace.legendrank-pe.trace.legendrank||de._preSort-pe._preSort};for(Z.forEach(function(de,pe){de[0]._preGroupSort=pe}),Z.sort(Q),C=0;C<Z.length;C++){Z[C].forEach(function(de,pe){de._preSort=pe}),Z[C].sort(ee);var ne=Z[C][0].trace,le=null;for(j=0;j<Z[C].length;j++){var W=Z[C][j].trace.legendgrouptitle;if(W&&W.text){le=W,g&&(W.font=v._groupTitleFont);break}}if(l&&Z[C].reverse(),le){var ce=!1;for(j=0;j<Z[C].length;j++)if(h.traceIs(Z[C][j].trace,"pie-like")){ce=!0;break}Z[C].unshift({i:-1,groupTitle:le,noClick:ce,trace:{showlegend:ne.showlegend,legendgroup:ne.legendgroup,visible:v.groupclick==="toggleitem"?!0:ne.visible}})}for(j=0;j<Z[C].length;j++)Z[C][j]=[Z[C][j]]}return v._lgroupsLength=Z.length,v._maxNameLength=A,Z}}}),uu=i({"src/traces/pie/helpers.js"(U){var $=kr();function h(c){return c.indexOf("e")!==-1?c.replace(/[.]?0+e/,"e"):c.indexOf(".")!==-1?c.replace(/[.]?0+$/,""):c}U.formatPiePercent=function(u,p){var v=h((u*100).toPrecision(3));return $.numSeparate(v,p)+"%"},U.formatPieValue=function(u,p){var v=h(u.toPrecision(10));return $.numSeparate(v,p)},U.getFirstFilled=function(u,p){if($.isArrayOrTypedArray(u))for(var v=0;v<p.length;v++){var m=u[p[v]];if(m||m===0||m==="")return m}},U.castOption=function(u,p){if($.isArrayOrTypedArray(u))return U.getFirstFilled(u,p);if(u)return u},U.getRotationAngle=function(c){return(c==="auto"?0:c)*Math.PI/180}}}),Wf=i({"src/traces/pie/fill_one.js"(U,$){var h=di(),c=pt();$.exports=function(p,v,m,g){var w=m.marker.pattern;w&&w.shape?h.pointStyle(p,m,g,v):c.fill(p,v.color)}}}),du=i({"src/traces/pie/style_one.js"(U,$){var h=pt(),c=uu().castOption,u=Wf();$.exports=function(v,m,g,w){var l=g.marker.line,T=c(l.color,m.pts)||h.defaultLine,y=c(l.width,m.pts)||0;v.call(u,m,g,w).style("stroke-width",y).call(h.stroke,T)}}}),od=i({"src/components/legend/style.js"(U,$){var h=d(),c=mn(),u=kr(),p=u.strTranslate,v=di(),m=pt(),g=ds().extractOpts,w=Ia(),l=du(),T=uu().castOption,y=sd(),S=12,R=5,M=2,A=10,C=5;$.exports=function(F,P,J){var H=P._fullLayout;J||(J=H.legend);var Y=J.itemsizing==="constant",Z=J.itemwidth,z=(Z+y.itemGap*2)/2,q=p(z,0),X=function(te,ae,G,K){var V;if(te+1)V=te;else if(ae&&ae.width>0)V=ae.width;else return 0;return Y?K:Math.min(V,G)};F.each(function(te){var ae=h.select(this),G=u.ensureSingle(ae,"g","layers");G.style("opacity",te[0].trace.opacity);var K=J.indentation,V=J.valign,re=te[0].lineHeight,D=te[0].height;if(V==="middle"&&K===0||!re||!D)G.attr("transform",null);else{var B={top:1,bottom:-1}[V],oe=B*(.5*(re-D+3))||0,ie=J.indentation;G.attr("transform",p(ie,oe))}var ge=G.selectAll("g.legendfill").data([te]);ge.enter().append("g").classed("legendfill",!0);var _e=G.selectAll("g.legendlines").data([te]);_e.enter().append("g").classed("legendlines",!0);var Se=G.selectAll("g.legendsymbols").data([te]);Se.enter().append("g").classed("legendsymbols",!0),Se.selectAll("g.legendpoints").data([te]).enter().append("g").classed("legendpoints",!0)}).each(He).each(ne).each(W).each(le).each(de).each(Ee).each(be).each(Q).each(ee).each(pe).each(he);function Q(te){var ae=b(te),G=ae.showFill,K=ae.showLine,V=ae.showGradientLine,re=ae.showGradientFill,D=ae.anyFill,B=ae.anyLine,oe=te[0],ie=oe.trace,ge,_e,Se=g(ie),De=Se.colorscale,Ge=Se.reversescale,Je=function(Be){if(Be.size())if(G)v.fillGroupStyle(Be,P,!0);else{var et="legendfill-"+ie.uid;v.gradient(Be,P,et,j(Ge),De,"fill")}},yt=function(Be){if(Be.size()){var et="legendline-"+ie.uid;v.lineGroupStyle(Be),v.gradient(Be,P,et,j(Ge),De,"stroke")}},ut=w.hasMarkers(ie)||!D?"M5,0":B?"M5,-2":"M5,-3",vt=h.select(this),Ae=vt.select(".legendfill").selectAll("path").data(G||re?[te]:[]);if(Ae.enter().append("path").classed("js-fill",!0),Ae.exit().remove(),Ae.attr("d",ut+"h"+Z+"v6h-"+Z+"z").call(Je),K||V){var Fe=X(void 0,ie.line,A,R);_e=u.minExtend(ie,{line:{width:Fe}}),ge=[u.minExtend(oe,{trace:_e})]}var ke=vt.select(".legendlines").selectAll("path").data(K||V?[ge]:[]);ke.enter().append("path").classed("js-line",!0),ke.exit().remove(),ke.attr("d",ut+(V?"l"+Z+",0.0001":"h"+Z)).call(K?v.lineGroupStyle:yt)}function ee(te){var ae=b(te),G=ae.anyFill,K=ae.anyLine,V=ae.showLine,re=ae.showMarker,D=te[0],B=D.trace,oe=!re&&!K&&!G&&w.hasText(B),ie,ge;function _e(Ae,Fe,ke,Be){var et=u.nestedProperty(B,Ae).get(),ht=u.isArrayOrTypedArray(et)&&Fe?Fe(et):et;if(Y&&ht&&Be!==void 0&&(ht=Be),ke){if(ht<ke[0])return ke[0];if(ht>ke[1])return ke[1]}return ht}function Se(Ae){return D._distinct&&D.index&&Ae[D.index]?Ae[D.index]:Ae[0]}if(re||oe||V){var De={},Ge={};if(re){De.mc=_e("marker.color",Se),De.mx=_e("marker.symbol",Se),De.mo=_e("marker.opacity",u.mean,[.2,1]),De.mlc=_e("marker.line.color",Se),De.mlw=_e("marker.line.width",u.mean,[0,5],M),Ge.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Je=_e("marker.size",u.mean,[2,16],S);De.ms=Je,Ge.marker.size=Je}V&&(Ge.line={width:_e("line.width",Se,[0,10],R)}),oe&&(De.tx="Aa",De.tp=_e("textposition",Se),De.ts=10,De.tc=_e("textfont.color",Se),De.tf=_e("textfont.family",Se),De.tw=_e("textfont.weight",Se),De.ty=_e("textfont.style",Se),De.tv=_e("textfont.variant",Se),De.tC=_e("textfont.textcase",Se),De.tE=_e("textfont.lineposition",Se),De.tS=_e("textfont.shadow",Se)),ie=[u.minExtend(D,De)],ge=u.minExtend(B,Ge),ge.selectedpoints=null,ge.texttemplate=null}var yt=h.select(this).select("g.legendpoints"),ut=yt.selectAll("path.scatterpts").data(re?ie:[]);ut.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",q),ut.exit().remove(),ut.call(v.pointStyle,ge,P),re&&(ie[0].mrc=3);var vt=yt.selectAll("g.pointtext").data(oe?ie:[]);vt.enter().append("g").classed("pointtext",!0).append("text").attr("transform",q),vt.exit().remove(),vt.selectAll("text").call(v.textPointStyle,ge,P)}function ne(te){var ae=te[0].trace,G=ae.type==="waterfall";if(te[0]._distinct&&G){var K=te[0].trace[te[0].dir].marker;return te[0].mc=K.color,te[0].mlw=K.line.width,te[0].mlc=K.line.color,ce(te,this,"waterfall")}var V=[];ae.visible&&G&&(V=te[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var re=h.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(V);re.enter().append("path").classed("legendwaterfall",!0).attr("transform",q).style("stroke-miterlimit",1),re.exit().remove(),re.each(function(D){var B=h.select(this),oe=ae[D[0]].marker,ie=X(void 0,oe.line,C,M);B.attr("d",D[1]).style("stroke-width",ie+"px").call(m.fill,oe.color),ie&&B.call(m.stroke,oe.line.color)})}function le(te){ce(te,this)}function W(te){ce(te,this,"funnel")}function ce(te,ae,G){var K=te[0].trace,V=K.marker||{},re=V.line||{},D=V.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",B=G?K.visible&&K.type===G:c.traceIs(K,"bar"),oe=h.select(ae).select("g.legendpoints").selectAll("path.legend"+G).data(B?[te]:[]);oe.enter().append("path").classed("legend"+G,!0).attr("d",D).attr("transform",q),oe.exit().remove(),oe.each(function(ie){var ge=h.select(this),_e=ie[0],Se=X(_e.mlw,V.line,C,M);ge.style("stroke-width",Se+"px");var De=_e.mcc;if(!J._inHover&&"mc"in _e){var Ge=g(V),Je=Ge.mid;Je===void 0&&(Je=(Ge.max+Ge.min)/2),De=v.tryColorscale(V,"")(Je)}var yt=De||_e.mc||V.color,ut=V.pattern,vt=ut&&v.getPatternAttr(ut.shape,0,"");if(vt){var Ae=v.getPatternAttr(ut.bgcolor,0,null),Fe=v.getPatternAttr(ut.fgcolor,0,null),ke=ut.fgopacity,Be=k(ut.size,8,10),et=k(ut.solidity,.5,1),ht="legend-"+K.uid;ge.call(v.pattern,"legend",P,ht,vt,Be,et,De,ut.fillmode,Ae,Fe,ke)}else ge.call(m.fill,yt);Se&&m.stroke(ge,_e.mlc||re.color)})}function de(te){var ae=te[0].trace,G=h.select(this).select("g.legendpoints").selectAll("path.legendbox").data(ae.visible&&c.traceIs(ae,"box-violin")?[te]:[]);G.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",q),G.exit().remove(),G.each(function(){var K=h.select(this);if((ae.boxpoints==="all"||ae.points==="all")&&m.opacity(ae.fillcolor)===0&&m.opacity((ae.line||{}).color)===0){var V=u.minExtend(ae,{marker:{size:Y?S:u.constrain(ae.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});G.call(v.pointStyle,V,P)}else{var re=X(void 0,ae.line,C,M);K.style("stroke-width",re+"px").call(m.fill,ae.fillcolor),re&&m.stroke(K,ae.line.color)}})}function pe(te){var ae=te[0].trace,G=h.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(ae.visible&&ae.type==="candlestick"?[te,te]:[]);G.enter().append("path").classed("legendcandle",!0).attr("d",function(K,V){return V?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",q).style("stroke-miterlimit",1),G.exit().remove(),G.each(function(K,V){var re=h.select(this),D=ae[V?"increasing":"decreasing"],B=X(void 0,D.line,C,M);re.style("stroke-width",B+"px").call(m.fill,D.fillcolor),B&&m.stroke(re,D.line.color)})}function he(te){var ae=te[0].trace,G=h.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(ae.visible&&ae.type==="ohlc"?[te,te]:[]);G.enter().append("path").classed("legendohlc",!0).attr("d",function(K,V){return V?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",q).style("stroke-miterlimit",1),G.exit().remove(),G.each(function(K,V){var re=h.select(this),D=ae[V?"increasing":"decreasing"],B=X(void 0,D.line,C,M);re.style("fill","none").call(v.dashLine,D.line.dash,B),B&&m.stroke(re,D.line.color)})}function be(te){Te(te,this,"pie")}function Ee(te){Te(te,this,"funnelarea")}function Te(te,ae,G){var K=te[0],V=K.trace,re=G?V.visible&&V.type===G:c.traceIs(V,G),D=h.select(ae).select("g.legendpoints").selectAll("path.legend"+G).data(re?[te]:[]);if(D.enter().append("path").classed("legend"+G,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",q),D.exit().remove(),D.size()){var B=V.marker||{},oe=X(T(B.line.width,K.pts),B.line,C,M),ie="pieLike",ge=u.minExtend(V,{marker:{line:{width:oe}}},ie),_e=u.minExtend(K,{trace:ge},ie);l(D,_e,ge,P)}}function He(te){var ae=te[0].trace,G,K=[];if(ae.visible)switch(ae.type){case"histogram2d":case"heatmap":K=[["M-15,-2V4H15V-2Z"]],G=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":K=[["M-6,-6V6H6V-6Z"]],G=!0;break;case"densitymapbox":case"densitymap":K=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],G="radial";break;case"cone":K=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],G=!1;break;case"streamtube":K=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],G=!1;break;case"surface":K=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],G=!0;break;case"mesh3d":K=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],G=!1;break;case"volume":K=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],G=!0;break;case"isosurface":K=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],G=!1;break}var V=h.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(K);V.enter().append("path").classed("legend3dandfriends",!0).attr("transform",q).style("stroke-miterlimit",1),V.exit().remove(),V.each(function(re,D){var B=h.select(this),oe=g(ae),ie=oe.colorscale,ge=oe.reversescale,_e=function(Je){if(Je.size()){var yt="legendfill-"+ae.uid;v.gradient(Je,P,yt,j(ge,G==="radial"),ie,"fill")}},Se;if(ie){if(!G){var Ge=ie.length;Se=D===0?ie[ge?Ge-1:0][1]:D===1?ie[ge?0:Ge-1][1]:ie[Math.floor((Ge-1)/2)][1]}}else{var De=ae.vertexcolor||ae.facecolor||ae.color;Se=u.isArrayOrTypedArray(De)?De[D]||De[0]:De}B.attr("d",re[0]),Se?B.call(m.fill,Se):B.call(_e)})}};function j(E,F){var P=F?"radial":"horizontal";return P+(E?"":"reversed")}function b(E){var F=E[0].trace,P=F.contours,J=w.hasLines(F),H=w.hasMarkers(F),Y=F.visible&&F.fill&&F.fill!=="none",Z=!1,z=!1;if(P){var q=P.coloring;q==="lines"?Z=!0:J=q==="none"||q==="heatmap"||P.showlines,P.type==="constraint"?Y=P._operation!=="=":(q==="fill"||q==="heatmap")&&(z=!0)}return{showMarker:H,showLine:J,showFill:Y,showGradientLine:Z,showGradientFill:z,anyLine:J||Z,anyFill:Y||z}}function k(E,F,P){return E&&u.isArrayOrTypedArray(E)?F:E>P?P:E}}}),ld=i({"src/components/legend/draw.js"(U,$){var h=d(),c=kr(),u=Xi(),p=mn(),v=Co(),m=Wa(),g=di(),w=pt(),l=Ra(),T=Bf(),y=sd(),S=La(),R=S.LINE_SPACING,M=S.FROM_TL,A=S.FROM_BR,C=Hf(),j=od(),b=cu(),k=1,E=/^legend[0-9]*$/;$.exports=function(pe,he){if(he)P(pe,he);else{var be=pe._fullLayout,Ee=be._legends,Te=be._infolayer.selectAll('[class^="legend"]');Te.each(function(){var G=h.select(this),K=G.attr("class"),V=K.split(" ")[0];V.match(E)&&Ee.indexOf(V)===-1&&G.remove()});for(var He=0;He<Ee.length;He++){var te=Ee[He],ae=pe._fullLayout[te];P(pe,ae)}}};function F(de,pe,he){if(!(pe.title.side!=="top center"&&pe.title.side!=="top right")){var be=pe.title.font,Ee=be.size*R,Te=0,He=de.node(),te=g.bBox(He).width;pe.title.side==="top center"?Te=.5*(pe._width-2*he-2*y.titlePad-te):pe.title.side==="top right"&&(Te=pe._width-2*he-2*y.titlePad-te),l.positionText(de,he+y.titlePad+Te,he+Ee)}}function P(de,pe){var he=pe||{},be=de._fullLayout,Ee=ce(he),Te,He,te=he._inHover;if(te?(He=he.layer,Te="hover"):(He=be._infolayer,Te=Ee),!!He){Te+=be._uid,de._legendMouseDownTime||(de._legendMouseDownTime=0);var ae;if(te){if(!he.entries)return;ae=C(he.entries,he)}else{for(var G=(de.calcdata||[]).slice(),K=be.shapes,V=0;V<K.length;V++){var re=K[V];if(re.showlegend){var D={_isShape:!0,_fullInput:re,index:re._index,name:re.name||re.label.text||"shape "+re._index,legend:re.legend,legendgroup:re.legendgroup,legendgrouptitle:re.legendgrouptitle,legendrank:re.legendrank,legendwidth:re.legendwidth,showlegend:re.showlegend,visible:re.visible,opacity:re.opacity,mode:re.type==="line"?"lines":"markers",line:re.line,marker:{line:re.line,color:re.fillcolor,size:12,symbol:re.type==="rect"?"square":re.type==="circle"?"circle":"hexagon2"}};G.push([{trace:D}])}}ae=be.showlegend&&C(G,he,be._legends.length>1)}var B=be.hiddenlabels||[];if(!te&&(!be.showlegend||!ae.length))return He.selectAll("."+Ee).remove(),be._topdefs.select("#"+Te).remove(),u.autoMargin(de,Ee);var oe=c.ensureSingle(He,"g",Ee,function(ut){te||ut.attr("pointer-events","all")}),ie=c.ensureSingleById(be._topdefs,"clipPath",Te,function(ut){ut.append("rect")}),ge=c.ensureSingle(oe,"rect","bg",function(ut){ut.attr("shape-rendering","crispEdges")});ge.call(w.stroke,he.bordercolor).call(w.fill,he.bgcolor).style("stroke-width",he.borderwidth+"px");var _e=c.ensureSingle(oe,"g","scrollbox"),Se=he.title;he._titleWidth=0,he._titleHeight=0;var De;Se.text?(De=c.ensureSingle(_e,"text",Ee+"titletext"),De.attr("text-anchor","start").call(g.font,Se.font).text(Se.text),q(De,_e,de,he,k)):_e.selectAll("."+Ee+"titletext").remove();var Ge=c.ensureSingle(oe,"rect","scrollbar",function(ut){ut.attr(y.scrollBarEnterAttrs).call(w.fill,y.scrollBarColor)}),Je=_e.selectAll("g.groups").data(ae);Je.enter().append("g").attr("class","groups"),Je.exit().remove();var yt=Je.selectAll("g.traces").data(c.identity);yt.enter().append("g").attr("class","traces"),yt.exit().remove(),yt.style("opacity",function(ut){var vt=ut[0].trace;return p.traceIs(vt,"pie-like")?B.indexOf(ut[0].label)!==-1?.5:1:vt.visible==="legendonly"?.5:1}).each(function(){h.select(this).call(Y,de,he)}).call(j,de,he).each(function(){te||h.select(this).call(z,de,Ee)}),c.syncOrAsync([u.previousPromises,function(){return ee(de,Je,yt,he)},function(){var ut=be._size,vt=he.borderwidth,Ae=he.xref==="paper",Fe=he.yref==="paper";if(Se.text&&F(De,he,vt),!te){var ke,Be;Ae?ke=ut.l+ut.w*he.x-M[le(he)]*he._width:ke=be.width*he.x-M[le(he)]*he._width,Fe?Be=ut.t+ut.h*(1-he.y)-M[W(he)]*he._effHeight:Be=be.height*(1-he.y)-M[W(he)]*he._effHeight;var et=ne(de,Ee,ke,Be);if(et)return;if(be.margin.autoexpand){var ht=ke,jt=Be;ke=Ae?c.constrain(ke,0,be.width-he._width):ht,Be=Fe?c.constrain(Be,0,be.height-he._effHeight):jt,ke!==ht&&c.log("Constrain "+Ee+".x to make legend fit inside graph"),Be!==jt&&c.log("Constrain "+Ee+".y to make legend fit inside graph")}g.setTranslate(oe,ke,Be)}if(Ge.on(".drag",null),oe.on("wheel",null),te||he._height<=he._maxHeight||de._context.staticPlot){var At=he._effHeight;te&&(At=he._height),ge.attr({width:he._width-vt,height:At-vt,x:vt/2,y:vt/2}),g.setTranslate(_e,0,0),ie.select("rect").attr({width:he._width-2*vt,height:At-2*vt,x:vt,y:vt}),g.setClipUrl(_e,Te,de),g.setRect(Ge,0,0,0,0),delete he._scrollY}else{var Pt=Math.max(y.scrollBarMinHeight,he._effHeight*he._effHeight/he._height),zt=he._effHeight-Pt-2*y.scrollBarMargin,Nt=he._height-he._effHeight,Kt=zt/Nt,_t=Math.min(he._scrollY||0,Nt);ge.attr({width:he._width-2*vt+y.scrollBarWidth+y.scrollBarMargin,height:he._effHeight-vt,x:vt/2,y:vt/2}),ie.select("rect").attr({width:he._width-2*vt+y.scrollBarWidth+y.scrollBarMargin,height:he._effHeight-2*vt,x:vt,y:vt+_t}),g.setClipUrl(_e,Te,de),fe(_t,Pt,Kt),oe.on("wheel",function(){_t=c.constrain(he._scrollY+h.event.deltaY/zt*Nt,0,Nt),fe(_t,Pt,Kt),_t!==0&&_t!==Nt&&h.event.preventDefault()});var Qt,fr,Vt,rr=function(nt,dt,St){var Dt=(St-dt)/Kt+nt;return c.constrain(Dt,0,Nt)},Ne=function(nt,dt,St){var Dt=(dt-St)/Kt+nt;return c.constrain(Dt,0,Nt)},$e=h.behavior.drag().on("dragstart",function(){var nt=h.event.sourceEvent;nt.type==="touchstart"?Qt=nt.changedTouches[0].clientY:Qt=nt.clientY,Vt=_t}).on("drag",function(){var nt=h.event.sourceEvent;nt.buttons===2||nt.ctrlKey||(nt.type==="touchmove"?fr=nt.changedTouches[0].clientY:fr=nt.clientY,_t=rr(Vt,Qt,fr),fe(_t,Pt,Kt))});Ge.call($e);var Ue=h.behavior.drag().on("dragstart",function(){var nt=h.event.sourceEvent;nt.type==="touchstart"&&(Qt=nt.changedTouches[0].clientY,Vt=_t)}).on("drag",function(){var nt=h.event.sourceEvent;nt.type==="touchmove"&&(fr=nt.changedTouches[0].clientY,_t=Ne(Vt,Qt,fr),fe(_t,Pt,Kt))});_e.call(Ue)}function fe(nt,dt,St){he._scrollY=de._fullLayout[Ee]._scrollY=nt,g.setTranslate(_e,0,-nt),g.setRect(Ge,he._width,y.scrollBarMargin+nt*St,y.scrollBarWidth,dt),ie.select("rect").attr("y",vt+nt)}if(de._context.edits.legendPosition){var je,Pe,Re,tt;oe.classed("cursor-move",!0),m.init({element:oe.node(),gd:de,prepFn:function(nt){if(nt.target!==Ge.node()){var dt=g.getTranslate(oe);Re=dt.x,tt=dt.y}},moveFn:function(nt,dt){if(Re!==void 0&&tt!==void 0){var St=Re+nt,Dt=tt+dt;g.setTranslate(oe,St,Dt),je=m.align(St,he._width,ut.l,ut.l+ut.w,he.xanchor),Pe=m.align(Dt+he._height,-he._height,ut.t+ut.h,ut.t,he.yanchor)}},doneFn:function(){if(je!==void 0&&Pe!==void 0){var nt={};nt[Ee+".x"]=je,nt[Ee+".y"]=Pe,p.call("_guiRelayout",de,nt)}},clickFn:function(nt,dt){var St=He.selectAll("g.traces").filter(function(){var Dt=this.getBoundingClientRect();return dt.clientX>=Dt.left&&dt.clientX<=Dt.right&&dt.clientY>=Dt.top&&dt.clientY<=Dt.bottom});St.size()>0&&H(de,oe,St,nt,dt)}})}}],de)}}function J(de,pe,he){var be=de[0],Ee=be.width,Te=pe.entrywidthmode,He=be.trace.legendwidth||pe.entrywidth;return Te==="fraction"?pe._maxWidth*He:he+(He||Ee)}function H(de,pe,he,be,Ee){var Te=he.data()[0][0].trace,He={event:Ee,node:he.node(),curveNumber:Te.index,expandedIndex:Te.index,data:de.data,layout:de.layout,frames:de._transitionData._frames,config:de._context,fullData:de._fullData,fullLayout:de._fullLayout};Te._group&&(He.group=Te._group),p.traceIs(Te,"pie-like")&&(He.label=he.datum()[0].label);var te=v.triggerHandler(de,"plotly_legendclick",He);if(be===1){if(te===!1)return;pe._clickTimeout=setTimeout(function(){de._fullLayout&&T(he,de,be)},de._context.doubleClickDelay)}else if(be===2){pe._clickTimeout&&clearTimeout(pe._clickTimeout),de._legendMouseDownTime=0;var ae=v.triggerHandler(de,"plotly_legenddoubleclick",He);ae!==!1&&te!==!1&&T(he,de,be)}}function Y(de,pe,he){var be=ce(he),Ee=de.data()[0][0],Te=Ee.trace,He=p.traceIs(Te,"pie-like"),te=!he._inHover&&pe._context.edits.legendText&&!He,ae=he._maxNameLength,G,K;Ee.groupTitle?(G=Ee.groupTitle.text,K=Ee.groupTitle.font):(K=he.font,he.entries?G=Ee.text:(G=He?Ee.label:Te.name,Te._meta&&(G=c.templateString(G,Te._meta))));var V=c.ensureSingle(de,"text",be+"text");V.attr("text-anchor","start").call(g.font,K).text(te?Z(G,ae):G);var re=he.indentation+he.itemwidth+y.itemGap*2;l.positionText(V,re,0),te?V.call(l.makeEditable,{gd:pe,text:G}).call(q,de,pe,he).on("edit",function(D){this.text(Z(D,ae)).call(q,de,pe,he);var B=Ee.trace._fullInput||{},oe={};return oe.name=D,B._isShape?p.call("_guiRelayout",pe,"shapes["+Te.index+"].name",oe.name):p.call("_guiRestyle",pe,oe,Te.index)}):q(V,de,pe,he)}function Z(de,pe){var he=Math.max(4,pe);if(de&&de.trim().length>=he/2)return de;de=de||"";for(var be=he-de.length;be>0;be--)de+=" ";return de}function z(de,pe,he){var be=pe._context.doubleClickDelay,Ee,Te=1,He=c.ensureSingle(de,"rect",he+"toggle",function(te){pe._context.staticPlot||te.style("cursor","pointer").attr("pointer-events","all"),te.call(w.fill,"rgba(0,0,0,0)")});pe._context.staticPlot||(He.on("mousedown",function(){Ee=new Date().getTime(),Ee-pe._legendMouseDownTime<be?Te+=1:(Te=1,pe._legendMouseDownTime=Ee)}),He.on("mouseup",function(){if(!(pe._dragged||pe._editing)){var te=pe._fullLayout[he];new Date().getTime()-pe._legendMouseDownTime>be&&(Te=Math.max(Te-1,1)),H(pe,te,de,Te,h.event)}}))}function q(de,pe,he,be,Ee){be._inHover&&de.attr("data-notex",!0),l.convertToTspans(de,he,function(){X(pe,he,be,Ee)})}function X(de,pe,he,be){var Ee=de.data()[0][0];if(!he._inHover&&Ee&&!Ee.trace.showlegend){de.remove();return}var Te=de.select("g[class*=math-group]"),He=Te.node(),te=ce(he);he||(he=pe._fullLayout[te]);var ae=he.borderwidth,G;be===k?G=he.title.font:Ee.groupTitle?G=Ee.groupTitle.font:G=he.font;var K=G.size*R,V,re;if(He){var D=g.bBox(He);V=D.height,re=D.width,be===k?g.setTranslate(Te,ae,ae+V*.75):g.setTranslate(Te,0,V*.25)}else{var B="."+te+(be===k?"title":"")+"text",oe=de.select(B),ie=l.lineCount(oe),ge=oe.node();if(V=K*ie,re=ge?g.bBox(ge).width:0,be===k)he.title.side==="left"&&(re+=y.itemGap*2),l.positionText(oe,ae+y.titlePad,ae+K);else{var _e=y.itemGap*2+he.indentation+he.itemwidth;Ee.groupTitle&&(_e=y.itemGap,re-=he.indentation+he.itemwidth),l.positionText(oe,_e,-K*((ie-1)/2-.3))}}be===k?(he._titleWidth=re,he._titleHeight=V):(Ee.lineHeight=K,Ee.height=Math.max(V,16)+3,Ee.width=re)}function Q(de){var pe=0,he=0,be=de.title.side;return be&&(be.indexOf("left")!==-1&&(pe=de._titleWidth),be.indexOf("top")!==-1&&(he=de._titleHeight)),[pe,he]}function ee(de,pe,he,be){var Ee=de._fullLayout,Te=ce(be);be||(be=Ee[Te]);var He=Ee._size,te=b.isVertical(be),ae=b.isGrouped(be),G=be.entrywidthmode==="fraction",K=be.borderwidth,V=2*K,re=y.itemGap,D=be.indentation+be.itemwidth+re*2,B=2*(K+re),oe=W(be),ie=be.y<0||be.y===0&&oe==="top",ge=be.y>1||be.y===1&&oe==="bottom",_e=be.tracegroupgap,Se={};be._maxHeight=Math.max(ie||ge?Ee.height/2:He.h,30);var De=0;be._width=0,be._height=0;var Ge=Q(be);if(te)he.each(function(Vt){var rr=Vt[0].height;g.setTranslate(this,K+Ge[0],K+Ge[1]+be._height+rr/2+re),be._height+=rr,be._width=Math.max(be._width,Vt[0].width)}),De=D+be._width,be._width+=re+D+V,be._height+=B,ae&&(pe.each(function(Vt,rr){g.setTranslate(this,0,rr*be.tracegroupgap)}),be._height+=(be._lgroupsLength-1)*be.tracegroupgap);else{var Je=le(be),yt=be.x<0||be.x===0&&Je==="right",ut=be.x>1||be.x===1&&Je==="left",vt=ge||ie,Ae=Ee.width/2;be._maxWidth=Math.max(yt?vt&&Je==="left"?He.l+He.w:Ae:ut?vt&&Je==="right"?He.r+He.w:Ae:He.w,2*D);var Fe=0,ke=0;he.each(function(Vt){var rr=J(Vt,be,D);Fe=Math.max(Fe,rr),ke+=rr}),De=null;var Be=0;if(ae){var et=0,ht=0,jt=0;pe.each(function(){var Vt=0,rr=0;h.select(this).selectAll("g.traces").each(function($e){var Ue=J($e,be,D),fe=$e[0].height;g.setTranslate(this,Ge[0],Ge[1]+K+re+fe/2+rr),rr+=fe,Vt=Math.max(Vt,Ue),Se[$e[0].trace.legendgroup]=Vt});var Ne=Vt+re;ht>0&&Ne+K+ht>be._maxWidth?(Be=Math.max(Be,ht),ht=0,jt+=et+_e,et=rr):et=Math.max(et,rr),g.setTranslate(this,ht,jt),ht+=Ne}),be._width=Math.max(Be,ht)+K,be._height=jt+et+B}else{var At=he.size(),Pt=ke+V+(At-1)*re<be._maxWidth,zt=0,Nt=0,Kt=0,_t=0;he.each(function(Vt){var rr=Vt[0].height,Ne=J(Vt,be,D),$e=Pt?Ne:Fe;G||($e+=re),$e+K+Nt-re>=be._maxWidth&&(Be=Math.max(Be,_t),Nt=0,Kt+=zt,be._height+=zt,zt=0),g.setTranslate(this,Ge[0]+K+Nt,Ge[1]+K+Kt+rr/2+re),_t=Nt+Ne+re,Nt+=$e,zt=Math.max(zt,rr)}),Pt?(be._width=Nt+V,be._height=zt+B):(be._width=Math.max(Be,_t)+V,be._height+=zt+B)}}be._width=Math.ceil(Math.max(be._width+Ge[0],be._titleWidth+2*(K+y.titlePad))),be._height=Math.ceil(Math.max(be._height+Ge[1],be._titleHeight+2*(K+y.itemGap))),be._effHeight=Math.min(be._height,be._maxHeight);var Qt=de._context.edits,fr=Qt.legendText||Qt.legendPosition;he.each(function(Vt){var rr=h.select(this).select("."+Te+"toggle"),Ne=Vt[0].height,$e=Vt[0].trace.legendgroup,Ue=J(Vt,be,D);ae&&$e!==""&&(Ue=Se[$e]);var fe=fr?D:De||Ue;!te&&!G&&(fe+=re/2),g.setRect(rr,0,-Ne/2,fe,Ne)})}function ne(de,pe,he,be){var Ee=de._fullLayout,Te=Ee[pe],He=le(Te),te=W(Te),ae=Te.xref==="paper",G=Te.yref==="paper";de._fullLayout._reservedMargin[pe]={};var K=Te.y<.5?"b":"t",V=Te.x<.5?"l":"r",re={r:Ee.width-he,l:he+Te._width,b:Ee.height-be,t:be+Te._effHeight};if(ae&&G)return u.autoMargin(de,pe,{x:Te.x,y:Te.y,l:Te._width*M[He],r:Te._width*A[He],b:Te._effHeight*A[te],t:Te._effHeight*M[te]});ae?de._fullLayout._reservedMargin[pe][K]=re[K]:G||Te.orientation==="v"?de._fullLayout._reservedMargin[pe][V]=re[V]:de._fullLayout._reservedMargin[pe][K]=re[K]}function le(de){return c.isRightAnchor(de)?"right":c.isCenterAnchor(de)?"center":"left"}function W(de){return c.isBottomAnchor(de)?"bottom":c.isMiddleAnchor(de)?"middle":"top"}function ce(de){return de._id||"legend"}}}),cd=i({"src/components/fx/hover.js"(U){var $=d(),h=xe(),c=wt(),u=kr(),p=u.pushUnique,v=u.strTranslate,m=u.strRotate,g=Co(),w=Ra(),l=Bn(),T=di(),y=pt(),S=Wa(),R=ji(),M=ha().zindexSeparator,A=mn(),C=ts(),j=cr(),b=ad(),k=ld(),E=j.YANGLE,F=Math.PI*E/180,P=1/Math.sin(F),J=Math.cos(F),H=Math.sin(F),Y=j.HOVERARROWSIZE,Z=j.HOVERTEXTPAD,z={box:!0,ohlc:!0,violin:!0,candlestick:!0},q={scatter:!0,scattergl:!0,splom:!0};function X(D,B){return D.distance-B.distance}U.hover=function(B,oe,ie,ge){B=u.getGraphDiv(B);var _e=oe.target;u.throttle(B._fullLayout._uid+j.HOVERID,j.HOVERMINTIME,function(){Q(B,oe,ie,ge,_e)})},U.loneHover=function(B,oe){var ie=!0;Array.isArray(B)||(ie=!1,B=[B]);var ge=oe.gd,_e=K(ge),Se=V(ge),De=B.map(function(Be){var et=Be._x0||Be.x0||Be.x||0,ht=Be._x1||Be.x1||Be.x||0,jt=Be._y0||Be.y0||Be.y||0,At=Be._y1||Be.y1||Be.y||0,Pt=Be.eventData;if(Pt){var zt=Math.min(et,ht),Nt=Math.max(et,ht),Kt=Math.min(jt,At),_t=Math.max(jt,At),Qt=Be.trace;if(A.traceIs(Qt,"gl3d")){var fr=ge._fullLayout[Qt.scene]._scene.container,Vt=fr.offsetLeft,rr=fr.offsetTop;zt+=Vt,Nt+=Vt,Kt+=rr,_t+=rr}Pt.bbox={x0:zt+Se,x1:Nt+Se,y0:Kt+_e,y1:_t+_e},oe.inOut_bbox&&oe.inOut_bbox.push(Pt.bbox)}else Pt=!1;return{color:Be.color||y.defaultLine,x0:Be.x0||Be.x||0,x1:Be.x1||Be.x||0,y0:Be.y0||Be.y||0,y1:Be.y1||Be.y||0,xLabel:Be.xLabel,yLabel:Be.yLabel,zLabel:Be.zLabel,text:Be.text,name:Be.name,idealAlign:Be.idealAlign,borderColor:Be.borderColor,fontFamily:Be.fontFamily,fontSize:Be.fontSize,fontColor:Be.fontColor,fontWeight:Be.fontWeight,fontStyle:Be.fontStyle,fontVariant:Be.fontVariant,nameLength:Be.nameLength,textAlign:Be.textAlign,trace:Be.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Be.hovertemplate||!1,hovertemplateLabels:Be.hovertemplateLabels||!1,eventData:Pt}}),Ge=!1,Je=le(De,{gd:ge,hovermode:"closest",rotateLabels:Ge,bgColor:oe.bgColor||y.background,container:$.select(oe.container),outerContainer:oe.outerContainer||oe.container}),yt=Je.hoverLabels,ut=5,vt=0,Ae=0;yt.sort(function(Be,et){return Be.y0-et.y0}).each(function(Be,et){var ht=Be.y0-Be.by/2;ht-ut<vt?Be.offset=vt-ht+ut:Be.offset=0,vt=ht+Be.by+Be.offset,et===oe.anchorIndex&&(Ae=Be.offset)}).each(function(Be){Be.offset-=Ae});var Fe=ge._fullLayout._invScaleX,ke=ge._fullLayout._invScaleY;return he(yt,Ge,Fe,ke),ie?yt:yt.node()};function Q(D,B,oe,ie,ge){oe||(oe="xy"),typeof oe=="string"&&(oe=oe.split(M)[0]);var _e=Array.isArray(oe)?oe:[oe],Se,De=D._fullLayout,Ge=De.hoversubplots,Je=De._plots||[],yt=Je[oe],ut=De._has("cartesian"),vt=B.hovermode||De.hovermode,Ae=(vt||"").charAt(0)==="x",Fe=(vt||"").charAt(0)==="y",ke,Be;if(ut&&(Ae||Fe)&&Ge==="axis"){for(var et=_e.length,ht=0;ht<et;ht++)if(Se=_e[ht],Je[Se]){ke=R.getFromId(D,Se,"x"),Be=R.getFromId(D,Se,"y");var jt=(Ae?ke:Be)._subplotsWith;if(jt&&jt.length)for(var At=0;At<jt.length;At++)p(_e,jt[At])}}if(yt&&Ge!=="single"){var Pt=yt.overlays.map(function(_n){return _n.id});_e=_e.concat(Pt)}for(var zt=_e.length,Nt=new Array(zt),Kt=new Array(zt),_t=!1,Qt=0;Qt<zt;Qt++)if(Se=_e[Qt],Je[Se])_t=!0,Nt[Qt]=Je[Se].xaxis,Kt[Qt]=Je[Se].yaxis;else if(De[Se]&&De[Se]._subplot){var fr=De[Se]._subplot;Nt[Qt]=fr.xaxis,Kt[Qt]=fr.yaxis}else{u.warn("Unrecognized subplot: "+Se);return}if(vt&&!_t&&(vt="closest"),["x","y","closest","x unified","y unified"].indexOf(vt)===-1||!D.calcdata||D.querySelector(".zoombox")||D._dragging)return S.unhoverRaw(D,B);var Vt=De.hoverdistance;Vt===-1&&(Vt=1/0);var rr=De.spikedistance;rr===-1&&(rr=1/0);var Ne=[],$e=[],Ue,fe,je,Pe,Re,tt,nt,dt,St,Dt,at,Ct,Ht,Ut={hLinePoint:null,vLinePoint:null},Ar=!1;if(Array.isArray(B))for(vt="array",je=0;je<B.length;je++)Re=D.calcdata[B[je].curveNumber||0],Re&&(tt=Re[0].trace,Re[0].trace.hoverinfo!=="skip"&&($e.push(Re),tt.orientation==="h"&&(Ar=!0)));else{var Rr=D.calcdata.slice();for(Rr.sort(function(_n,Zn){var fi=_n[0].trace.zorder||0,ra=Zn[0].trace.zorder||0;return fi-ra}),Pe=0;Pe<Rr.length;Pe++)Re=Rr[Pe],tt=Re[0].trace,tt.hoverinfo!=="skip"&&C.isTraceInSubplots(tt,_e)&&($e.push(Re),tt.orientation==="h"&&(Ar=!0));var $r=!ge,Mr,Ir;if($r)"xpx"in B?Mr=B.xpx:Mr=Nt[0]._length/2,"ypx"in B?Ir=B.ypx:Ir=Kt[0]._length/2;else{if(g.triggerHandler(D,"plotly_beforehover",B)===!1)return;var gr=ge.getBoundingClientRect();Mr=B.clientX-gr.left,Ir=B.clientY-gr.top,De._calcInverseTransform(D);var br=u.apply3DTransform(De._invTransform)(Mr,Ir);if(Mr=br[0],Ir=br[1],Mr<0||Mr>Nt[0]._length||Ir<0||Ir>Kt[0]._length)return S.unhoverRaw(D,B)}if(B.pointerX=Mr+Nt[0]._offset,B.pointerY=Ir+Kt[0]._offset,"xval"in B?Ue=C.flat(_e,B.xval):Ue=C.p2c(Nt,Mr),"yval"in B?fe=C.flat(_e,B.yval):fe=C.p2c(Kt,Ir),!h(Ue[0])||!h(fe[0]))return u.warn("Fx.hover failed",B,D),S.unhoverRaw(D,B)}var Vr=1/0;function Br(_n,Zn){for(Pe=0;Pe<$e.length;Pe++)if(Re=$e[Pe],!(!Re||!Re[0]||!Re[0].trace)&&(tt=Re[0].trace,!(tt.visible!==!0||tt._length===0)&&["carpet","contourcarpet"].indexOf(tt._module.name)===-1)){if(St=vt,C.isUnifiedHover(St)&&(St=St.charAt(0)),tt.type==="splom"?(dt=0,nt=_e[dt]):(nt=C.getSubplot(tt),dt=_e.indexOf(nt)),Ct={cd:Re,trace:tt,xa:Nt[dt],ya:Kt[dt],maxHoverDistance:Vt,maxSpikeDistance:rr,index:!1,distance:Math.min(Vr,Vt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:y.defaultLine,name:tt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},De[nt]&&(Ct.subplot=De[nt]._subplot),De._splomScenes&&De._splomScenes[tt.uid]&&(Ct.scene=De._splomScenes[tt.uid]),St==="array"){var fi=B[Pe];"pointNumber"in fi?(Ct.index=fi.pointNumber,St="closest"):(St="","xval"in fi&&(Dt=fi.xval,St="x"),"yval"in fi&&(at=fi.yval,St=St?"closest":"y"))}else _n!==void 0&&Zn!==void 0?(Dt=_n,at=Zn):(Dt=Ue[dt],at=fe[dt]);if(Ht=Ne.length,Vt!==0)if(tt._module&&tt._module.hoverPoints){var ra=tt._module.hoverPoints(Ct,Dt,at,St,{finiteRange:!0,hoverLayer:De._hoverlayer,hoversubplots:Ge,gd:D});if(ra)for(var Ji,Ln=0;Ln<ra.length;Ln++)Ji=ra[Ln],h(Ji.x0)&&h(Ji.y0)&&Ne.push(be(Ji,vt))}else u.log("Unrecognized trace type in hover:",tt);if(vt==="closest"&&Ne.length>Ht&&(Ne.splice(0,Ht),Vr=Ne[0].distance),ut&&rr!==0&&Ne.length===0){Ct.distance=rr,Ct.index=!1;var qn=tt._module.hoverPoints(Ct,Dt,at,"closest",{hoverLayer:De._hoverlayer});if(qn&&(qn=qn.filter(function(bi){return bi.spikeDistance<=rr})),qn&&qn.length){var zn,xi=qn.filter(function(bi){return bi.xa.showspikes&&bi.xa.spikesnap!=="hovered data"});if(xi.length){var Mi=xi[0];h(Mi.x0)&&h(Mi.y0)&&(zn=Lr(Mi),(!Ut.vLinePoint||Ut.vLinePoint.spikeDistance>zn.spikeDistance)&&(Ut.vLinePoint=zn))}var qi=qn.filter(function(bi){return bi.ya.showspikes&&bi.ya.spikesnap!=="hovered data"});if(qi.length){var Vi=qi[0];h(Vi.x0)&&h(Vi.y0)&&(zn=Lr(Vi),(!Ut.hLinePoint||Ut.hLinePoint.spikeDistance>zn.spikeDistance)&&(Ut.hLinePoint=zn))}}}}}Br();function Ur(_n,Zn,fi){for(var ra=null,Ji=1/0,Ln,qn=0;qn<_n.length;qn++)ke&&ke._id!==_n[qn].xa._id||Be&&Be._id!==_n[qn].ya._id||(Ln=_n[qn].spikeDistance,fi&&qn===0&&(Ln=-1/0),Ln<=Ji&&Ln<=Zn&&(ra=_n[qn],Ji=Ln));return ra}function Lr(_n){return _n?{xa:_n.xa,ya:_n.ya,x:_n.xSpike!==void 0?_n.xSpike:(_n.x0+_n.x1)/2,y:_n.ySpike!==void 0?_n.ySpike:(_n.y0+_n.y1)/2,distance:_n.distance,spikeDistance:_n.spikeDistance,curveNumber:_n.trace.index,color:_n.color,pointNumber:_n.index}:null}var hr={fullLayout:De,container:De._hoverlayer,event:B};D._spikepoints;var Or={vLinePoint:Ut.vLinePoint,hLinePoint:Ut.hLinePoint};D._spikepoints=Or;var fn=function(){var _n=Ne.filter(function(fi){return ke&&ke._id===fi.xa._id&&Be&&Be._id===fi.ya._id}),Zn=Ne.filter(function(fi){return!(ke&&ke._id===fi.xa._id&&Be&&Be._id===fi.ya._id)});_n.sort(X),Zn.sort(X),Ne=_n.concat(Zn),Ne=ae(Ne,vt)};fn();var An=vt.charAt(0),qr=(An==="x"||An==="y")&&Ne[0]&&q[Ne[0].trace.type];if(ut&&rr!==0&&Ne.length!==0){var yn=Ne.filter(function(_n){return _n.ya.showspikes}),xn=Ur(yn,rr,qr);Ut.hLinePoint=Lr(xn);var Xn=Ne.filter(function(_n){return _n.xa.showspikes}),mr=Ur(Xn,rr,qr);Ut.vLinePoint=Lr(mr)}if(Ne.length===0){var jn=S.unhoverRaw(D,B);return ut&&(Ut.hLinePoint!==null||Ut.vLinePoint!==null)&&He()&&Ee(D,Ut,hr),jn}if(ut&&He()&&Ee(D,Ut,hr),C.isXYhover(St)&&Ne[0].length!==0&&Ne[0].trace.type!=="splom"){var we=Ne[0];z[we.trace.type]?Ne=Ne.filter(function(_n){return _n.trace.index===we.trace.index}):Ne=[we];var me=Ne.length,mt=G("x",we,De),ft=G("y",we,De);Br(mt,ft);var Xe=[],Ke={},it=0,Tt=function(_n){var Zn=z[_n.trace.type]?ee(_n):_n.trace.index;if(!Ke[Zn])it++,Ke[Zn]=it,Xe.push(_n);else{var fi=Ke[Zn]-1,ra=Xe[fi];fi>0&&Math.abs(_n.distance)<Math.abs(ra.distance)&&(Xe[fi]=_n)}},rt;for(rt=0;rt<me;rt++)Tt(Ne[rt]);for(rt=Ne.length-1;rt>me-1;rt--)Tt(Ne[rt]);Ne=Xe,fn()}var xt=D._hoverdata,Mt=[],Lt=K(D),Xt=V(D);for(je=0;je<Ne.length;je++){var sr=Ne[je],or=C.makeEventData(sr,sr.trace,sr.cd);if(sr.hovertemplate!==!1){var Dr=!1;sr.cd[sr.index]&&sr.cd[sr.index].ht&&(Dr=sr.cd[sr.index].ht),sr.hovertemplate=Dr||sr.trace.hovertemplate||!1}if(sr.xa&&sr.ya){var _r=sr.x0+sr.xa._offset,Zr=sr.x1+sr.xa._offset,Er=sr.y0+sr.ya._offset,Gr=sr.y1+sr.ya._offset,Qr=Math.min(_r,Zr),En=Math.max(_r,Zr),Sn=Math.min(Er,Gr),gi=Math.max(Er,Gr);or.bbox={x0:Qr+Xt,x1:En+Xt,y0:Sn+Lt,y1:gi+Lt}}sr.eventData=[or],Mt.push(or)}D._hoverdata=Mt;var ei=vt==="y"&&($e.length>1||Ne.length>1)||vt==="closest"&&Ar&&Ne.length>1,ai=y.combine(De.plot_bgcolor||y.background,De.paper_bgcolor),ta=le(Ne,{gd:D,hovermode:vt,rotateLabels:ei,bgColor:ai,container:De._hoverlayer,outerContainer:De._paper.node(),commonLabelOpts:De.hoverlabel,hoverdistance:De.hoverdistance}),ka=ta.hoverLabels;if(C.isUnifiedHover(vt)||(ce(ka,ei,De,ta.commonLabelBoundingBox),he(ka,ei,De._invScaleX,De._invScaleY)),ge&&ge.tagName){var ci=A.getComponentMethod("annotations","hasClickToShow")(D,Mt);l($.select(ge),ci?"pointer":"")}!ge||ie||!Te(D,B,xt)||(xt&&D.emit("plotly_unhover",{event:B,points:xt}),D.emit("plotly_hover",{event:B,points:D._hoverdata,xaxes:Nt,yaxes:Kt,xvals:Ue,yvals:fe}))}function ee(D){return[D.trace.index,D.index,D.x0,D.y0,D.name,D.attr,D.xa?D.xa._id:"",D.ya?D.ya._id:""].join(",")}var ne=/<extra>([\s\S]*)<\/extra>/;function le(D,B){var oe=B.gd,ie=oe._fullLayout,ge=B.hovermode,_e=B.rotateLabels,Se=B.bgColor,De=B.container,Ge=B.outerContainer,Je=B.commonLabelOpts||{};if(D.length===0)return[[]];var yt=B.fontFamily||j.HOVERFONT,ut=B.fontSize||j.HOVERFONTSIZE,vt=B.fontWeight||ie.font.weight,Ae=B.fontStyle||ie.font.style,Fe=B.fontVariant||ie.font.variant,ke=B.fontTextcase||ie.font.textcase,Be=B.fontLineposition||ie.font.lineposition,et=B.fontShadow||ie.font.shadow,ht=D[0],jt=ht.xa,At=ht.ya,Pt=ge.charAt(0),zt=Pt+"Label",Nt=ht[zt];if(Nt===void 0&&jt.type==="multicategory")for(var Kt=0;Kt<D.length&&(Nt=D[Kt][zt],Nt===void 0);Kt++);var _t=re(oe,Ge),Qt=_t.top,fr=_t.width,Vt=_t.height,rr=Nt!==void 0&&ht.distance<=B.hoverdistance&&(ge==="x"||ge==="y");if(rr){var Ne=!0,$e,Ue;for($e=0;$e<D.length;$e++)if(Ne&&D[$e].zLabel===void 0&&(Ne=!1),Ue=D[$e].hoverinfo||D[$e].trace.hoverinfo,Ue){var fe=Array.isArray(Ue)?Ue:Ue.split("+");if(fe.indexOf("all")===-1&&fe.indexOf(ge)===-1){rr=!1;break}}Ne&&(rr=!1)}var je=De.selectAll("g.axistext").data(rr?[0]:[]);je.enter().append("g").classed("axistext",!0),je.exit().remove();var Pe={minX:0,maxX:0,minY:0,maxY:0};if(je.each(function(){var mr=$.select(this),jn=u.ensureSingle(mr,"path","",function(En){En.style({"stroke-width":"1px"})}),we=u.ensureSingle(mr,"text","",function(En){En.attr("data-notex",1)}),me=Je.bgcolor||y.defaultLine,mt=Je.bordercolor||y.contrast(me),ft=y.contrast(me),Xe=Je.font,Ke={weight:Xe.weight||vt,style:Xe.style||Ae,variant:Xe.variant||Fe,textcase:Xe.textcase||ke,lineposition:Xe.lineposition||Be,shadow:Xe.shadow||et,family:Xe.family||yt,size:Xe.size||ut,color:Xe.color||ft};jn.style({fill:me,stroke:mt}),we.text(Nt).call(T.font,Ke).call(w.positionText,0,0).call(w.convertToTspans,oe),mr.attr("transform","");var it=re(oe,we.node()),Tt,rt;if(ge==="x"){var xt=jt.side==="top"?"-":"";we.attr("text-anchor","middle").call(w.positionText,0,jt.side==="top"?Qt-it.bottom-Y-Z:Qt-it.top+Y+Z),Tt=jt._offset+(ht.x0+ht.x1)/2,rt=At._offset+(jt.side==="top"?0:At._length);var Mt=it.width/2+Z,Lt=Tt;Tt<Mt?Lt=Mt:Tt>ie.width-Mt&&(Lt=ie.width-Mt),jn.attr("d","M"+(Tt-Lt)+",0L"+(Tt-Lt+Y)+","+xt+Y+"H"+Mt+"v"+xt+(Z*2+it.height)+"H"+-Mt+"V"+xt+Y+"H"+(Tt-Lt-Y)+"Z"),Tt=Lt,Pe.minX=Tt-Mt,Pe.maxX=Tt+Mt,jt.side==="top"?(Pe.minY=rt-(Z*2+it.height),Pe.maxY=rt-Z):(Pe.minY=rt+Z,Pe.maxY=rt+(Z*2+it.height))}else{var Xt,sr,or;At.side==="right"?(Xt="start",sr=1,or="",Tt=jt._offset+jt._length):(Xt="end",sr=-1,or="-",Tt=jt._offset),rt=At._offset+(ht.y0+ht.y1)/2,we.attr("text-anchor",Xt),jn.attr("d","M0,0L"+or+Y+","+Y+"V"+(Z+it.height/2)+"h"+or+(Z*2+it.width)+"V-"+(Z+it.height/2)+"H"+or+Y+"V-"+Y+"Z"),Pe.minY=rt-(Z+it.height/2),Pe.maxY=rt+(Z+it.height/2),At.side==="right"?(Pe.minX=Tt+Y,Pe.maxX=Tt+Y+(Z*2+it.width)):(Pe.minX=Tt-Y-(Z*2+it.width),Pe.maxX=Tt-Y);var Dr=it.height/2,_r=Qt-it.top-Dr,Zr="clip"+ie._uid+"commonlabel"+At._id,Er;if(Tt<it.width+2*Z+Y){Er="M-"+(Y+Z)+"-"+Dr+"h-"+(it.width-Z)+"V"+Dr+"h"+(it.width-Z)+"Z";var Gr=it.width-Tt+Z;w.positionText(we,Gr,_r),Xt==="end"&&we.selectAll("tspan").each(function(){var En=$.select(this),Sn=T.tester.append("text").text(En.text()).call(T.font,Ke),gi=re(oe,Sn.node());Math.round(gi.width)<Math.round(it.width)&&En.attr("x",Gr-gi.width),Sn.remove()})}else w.positionText(we,sr*(Z+Y),_r),Er=null;var Qr=ie._topclips.selectAll("#"+Zr).data(Er?[0]:[]);Qr.enter().append("clipPath").attr("id",Zr).append("path"),Qr.exit().remove(),Qr.select("path").attr("d",Er),T.setClipUrl(we,Er?Zr:null,oe)}mr.attr("transform",v(Tt,rt))}),C.isUnifiedHover(ge)){De.selectAll("g.hovertext").remove();var Re=D.filter(function(mr){return mr.hoverinfo!=="none"});if(Re.length===0)return[];var tt=ie.hoverlabel,nt=tt.font,dt={showlegend:!0,legend:{title:{text:Nt,font:nt},font:nt,bgcolor:tt.bgcolor,bordercolor:tt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ie.legend?ie.legend.traceorder:void 0,orientation:"v"}},St={font:nt};b(dt,St,oe._fullData);var Dt=St.legend;Dt.entries=[];for(var at=0;at<Re.length;at++){var Ct=Re[at];if(Ct.hoverinfo!=="none"){var Ht=W(Ct,!0,ge,ie,Nt),Ut=Ht[0],Ar=Ht[1];Ct.name=Ar,Ar!==""?Ct.text=Ar+" : "+Ut:Ct.text=Ut;var Rr=Ct.cd[Ct.index];Rr&&(Rr.mc&&(Ct.mc=Rr.mc),Rr.mcc&&(Ct.mc=Rr.mcc),Rr.mlc&&(Ct.mlc=Rr.mlc),Rr.mlcc&&(Ct.mlc=Rr.mlcc),Rr.mlw&&(Ct.mlw=Rr.mlw),Rr.mrc&&(Ct.mrc=Rr.mrc),Rr.dir&&(Ct.dir=Rr.dir)),Ct._distinct=!0,Dt.entries.push([Ct])}}Dt.entries.sort(function(mr,jn){return mr[0].trace.index-jn[0].trace.index}),Dt.layer=De,Dt._inHover=!0,Dt._groupTitleFont=tt.grouptitlefont,k(oe,Dt);var $r=De.select("g.legend"),Mr=re(oe,$r.node()),Ir=Mr.width+2*Z,gr=Mr.height+2*Z,br=Re[0],Vr=(br.x0+br.x1)/2,Br=(br.y0+br.y1)/2,Ur=!(A.traceIs(br.trace,"bar-like")||A.traceIs(br.trace,"box-violin")),Lr,hr;Pt==="y"?Ur?(hr=Br-Z,Lr=Br+Z):(hr=Math.min.apply(null,Re.map(function(mr){return Math.min(mr.y0,mr.y1)})),Lr=Math.max.apply(null,Re.map(function(mr){return Math.max(mr.y0,mr.y1)}))):hr=Lr=u.mean(Re.map(function(mr){return(mr.y0+mr.y1)/2}))-gr/2;var Or,fn;Pt==="x"?Ur?(Or=Vr+Z,fn=Vr-Z):(Or=Math.max.apply(null,Re.map(function(mr){return Math.max(mr.x0,mr.x1)})),fn=Math.min.apply(null,Re.map(function(mr){return Math.min(mr.x0,mr.x1)}))):Or=fn=u.mean(Re.map(function(mr){return(mr.x0+mr.x1)/2}))-Ir/2;var An=jt._offset,qr=At._offset;Lr+=qr,Or+=An,fn+=An-Ir,hr+=qr-gr;var yn,xn;return Or+Ir<fr&&Or>=0?yn=Or:fn+Ir<fr&&fn>=0?yn=fn:An+Ir<fr?yn=An:Or-Vr<Vr-fn+Ir?yn=fr-Ir:yn=0,yn+=Z,Lr+gr<Vt&&Lr>=0?xn=Lr:hr+gr<Vt&&hr>=0?xn=hr:qr+gr<Vt?xn=qr:Lr-Br<Br-hr+gr?xn=Vt-gr:xn=0,xn+=Z,$r.attr("transform",v(yn-1,xn-1)),$r}var Xn=De.selectAll("g.hovertext").data(D,function(mr){return ee(mr)});return Xn.enter().append("g").classed("hovertext",!0).each(function(){var mr=$.select(this);mr.append("rect").call(y.fill,y.addOpacity(Se,.8)),mr.append("text").classed("name",!0),mr.append("path").style("stroke-width","1px"),mr.append("text").classed("nums",!0).call(T.font,{weight:vt,style:Ae,variant:Fe,textcase:ke,lineposition:Be,shadow:et,family:yt,size:ut})}),Xn.exit().remove(),Xn.each(function(mr){var jn=$.select(this).attr("transform",""),we=mr.color;Array.isArray(we)&&(we=we[mr.eventData[0].pointNumber]);var me=mr.bgcolor||we,mt=y.combine(y.opacity(me)?me:y.defaultLine,Se),ft=y.combine(y.opacity(we)?we:y.defaultLine,Se),Xe=mr.borderColor||y.contrast(mt),Ke=W(mr,rr,ge,ie,Nt,jn),it=Ke[0],Tt=Ke[1],rt=jn.select("text.nums").call(T.font,{family:mr.fontFamily||yt,size:mr.fontSize||ut,color:mr.fontColor||Xe,weight:mr.fontWeight||vt,style:mr.fontStyle||Ae,variant:mr.fontVariant||Fe,textcase:mr.fontTextcase||ke,lineposition:mr.fontLineposition||Be,shadow:mr.fontShadow||et}).text(it).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,oe),xt=jn.select("text.name"),Mt=0,Lt=0;if(Tt&&Tt!==it){xt.call(T.font,{family:mr.fontFamily||yt,size:mr.fontSize||ut,color:ft,weight:mr.fontWeight||vt,style:mr.fontStyle||Ae,variant:mr.fontVariant||Fe,textcase:mr.fontTextcase||ke,lineposition:mr.fontLineposition||Be,shadow:mr.fontShadow||et}).text(Tt).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,oe);var Xt=re(oe,xt.node());Mt=Xt.width+2*Z,Lt=Xt.height+2*Z}else xt.remove(),jn.select("rect").remove();jn.select("path").style({fill:mt,stroke:Xe});var sr=mr.xa._offset+(mr.x0+mr.x1)/2,or=mr.ya._offset+(mr.y0+mr.y1)/2,Dr=Math.abs(mr.x1-mr.x0),_r=Math.abs(mr.y1-mr.y0),Zr=re(oe,rt.node()),Er=Zr.width/ie._invScaleX,Gr=Zr.height/ie._invScaleY;mr.ty0=(Qt-Zr.top)/ie._invScaleY,mr.bx=Er+2*Z,mr.by=Math.max(Gr+2*Z,Lt),mr.anchor="start",mr.txwidth=Er,mr.tx2width=Mt,mr.offset=0;var Qr=(Er+Y+Z+Mt)*ie._invScaleX,En,Sn;if(_e)mr.pos=sr,En=or+_r/2+Qr<=Vt,Sn=or-_r/2-Qr>=0,(mr.idealAlign==="top"||!En)&&Sn?(or-=_r/2,mr.anchor="end"):En?(or+=_r/2,mr.anchor="start"):mr.anchor="middle",mr.crossPos=or;else{if(mr.pos=or,En=sr+Dr/2+Qr<=fr,Sn=sr-Dr/2-Qr>=0,(mr.idealAlign==="left"||!En)&&Sn)sr-=Dr/2,mr.anchor="end";else if(En)sr+=Dr/2,mr.anchor="start";else{mr.anchor="middle";var gi=Qr/2,ei=sr+gi-fr,ai=sr-gi;ei>0&&(sr-=ei),ai<0&&(sr+=-ai)}mr.crossPos=sr}rt.attr("text-anchor",mr.anchor),Mt&&xt.attr("text-anchor",mr.anchor),jn.attr("transform",v(sr,or)+(_e?m(E):""))}),{hoverLabels:Xn,commonLabelBoundingBox:Pe}}function W(D,B,oe,ie,ge,_e){var Se="",De="";D.nameOverride!==void 0&&(D.name=D.nameOverride),D.name&&(D.trace._meta&&(D.name=u.templateString(D.name,D.trace._meta)),Se=te(D.name,D.nameLength));var Ge=oe.charAt(0),Je=Ge==="x"?"y":"x";D.zLabel!==void 0?(D.xLabel!==void 0&&(De+="x: "+D.xLabel+"<br>"),D.yLabel!==void 0&&(De+="y: "+D.yLabel+"<br>"),D.trace.type!=="choropleth"&&D.trace.type!=="choroplethmapbox"&&D.trace.type!=="choroplethmap"&&(De+=(De?"z: ":"")+D.zLabel)):B&&D[Ge+"Label"]===ge?De=D[Je+"Label"]||"":D.xLabel===void 0?D.yLabel!==void 0&&D.trace.type!=="scattercarpet"&&(De=D.yLabel):D.yLabel===void 0?De=D.xLabel:De="("+D.xLabel+", "+D.yLabel+")",(D.text||D.text===0)&&!Array.isArray(D.text)&&(De+=(De?"<br>":"")+D.text),D.extraText!==void 0&&(De+=(De?"<br>":"")+D.extraText),_e&&De===""&&!D.hovertemplate&&(Se===""&&_e.remove(),De=Se);var yt=D.hovertemplate||!1;if(yt){var ut=D.hovertemplateLabels||D;D[Ge+"Label"]!==ge&&(ut[Ge+"other"]=ut[Ge+"Val"],ut[Ge+"otherLabel"]=ut[Ge+"Label"]),De=u.hovertemplateString(yt,ut,ie._d3locale,D.eventData[0]||{},D.trace._meta),De=De.replace(ne,function(vt,Ae){return Se=te(Ae,D.nameLength),""})}return[De,Se]}function ce(D,B,oe,ie){var ge=B?"xa":"ya",_e=B?"ya":"xa",Se=0,De=1,Ge=D.size(),Je=new Array(Ge),yt=0,ut=ie.minX,vt=ie.maxX,Ae=ie.minY,Fe=ie.maxY,ke=function(Ue){return Ue*oe._invScaleX},Be=function(Ue){return Ue*oe._invScaleY};D.each(function(Ue){var fe=Ue[ge],je=Ue[_e],Pe=fe._id.charAt(0)==="x",Re=fe.range;yt===0&&Re&&Re[0]>Re[1]!==Pe&&(De=-1);var tt=0,nt=Pe?oe.width:oe.height;if(oe.hovermode==="x"||oe.hovermode==="y"){var dt=de(Ue,B),St=Ue.anchor,Dt=St==="end"?-1:1,at,Ct;if(St==="middle")at=Ue.crossPos+(Pe?Be(dt.y-Ue.by/2):ke(Ue.bx/2+Ue.tx2width/2)),Ct=at+(Pe?Be(Ue.by):ke(Ue.bx));else if(Pe)at=Ue.crossPos+Be(Y+dt.y)-Be(Ue.by/2-Y),Ct=at+Be(Ue.by);else{var Ht=ke(Dt*Y+dt.x),Ut=Ht+ke(Dt*Ue.bx);at=Ue.crossPos+Math.min(Ht,Ut),Ct=Ue.crossPos+Math.max(Ht,Ut)}Pe?Ae!==void 0&&Fe!==void 0&&Math.min(Ct,Fe)-Math.max(at,Ae)>1&&(je.side==="left"?(tt=je._mainLinePosition,nt=oe.width):nt=je._mainLinePosition):ut!==void 0&&vt!==void 0&&Math.min(Ct,vt)-Math.max(at,ut)>1&&(je.side==="top"?(tt=je._mainLinePosition,nt=oe.height):nt=je._mainLinePosition)}Je[yt++]=[{datum:Ue,traceIndex:Ue.trace.index,dp:0,pos:Ue.pos,posref:Ue.posref,size:Ue.by*(Pe?P:1)/2,pmin:tt,pmax:nt}]}),Je.sort(function(Ue,fe){return Ue[0].posref-fe[0].posref||De*(fe[0].traceIndex-Ue[0].traceIndex)});var et,ht,jt,At,Pt,zt,Nt;function Kt(Ue){var fe=Ue[0],je=Ue[Ue.length-1];if(ht=fe.pmin-fe.pos-fe.dp+fe.size,jt=je.pos+je.dp+je.size-fe.pmax,ht>.01){for(Pt=Ue.length-1;Pt>=0;Pt--)Ue[Pt].dp+=ht;et=!1}if(!(jt<.01)){if(ht<-.01){for(Pt=Ue.length-1;Pt>=0;Pt--)Ue[Pt].dp-=jt;et=!1}if(et){var Pe=0;for(At=0;At<Ue.length;At++)zt=Ue[At],zt.pos+zt.dp+zt.size>fe.pmax&&Pe++;for(At=Ue.length-1;At>=0&&!(Pe<=0);At--)zt=Ue[At],zt.pos>fe.pmax-1&&(zt.del=!0,Pe--);for(At=0;At<Ue.length&&!(Pe<=0);At++)if(zt=Ue[At],zt.pos<fe.pmin+1)for(zt.del=!0,Pe--,jt=zt.size*2,Pt=Ue.length-1;Pt>=0;Pt--)Ue[Pt].dp-=jt;for(At=Ue.length-1;At>=0&&!(Pe<=0);At--)zt=Ue[At],zt.pos+zt.dp+zt.size>fe.pmax&&(zt.del=!0,Pe--)}}}for(;!et&&Se<=Ge;){for(Se++,et=!0,At=0;At<Je.length-1;){var _t=Je[At],Qt=Je[At+1],fr=_t[_t.length-1],Vt=Qt[0];if(ht=fr.pos+fr.dp+fr.size-Vt.pos-Vt.dp+Vt.size,ht>.01){for(Pt=Qt.length-1;Pt>=0;Pt--)Qt[Pt].dp+=ht;for(_t.push.apply(_t,Qt),Je.splice(At+1,1),Nt=0,Pt=_t.length-1;Pt>=0;Pt--)Nt+=_t[Pt].dp;for(jt=Nt/_t.length,Pt=_t.length-1;Pt>=0;Pt--)_t[Pt].dp-=jt;et=!1}else At++}Je.forEach(Kt)}for(At=Je.length-1;At>=0;At--){var rr=Je[At];for(Pt=rr.length-1;Pt>=0;Pt--){var Ne=rr[Pt],$e=Ne.datum;$e.offset=Ne.dp,$e.del=Ne.del}}}function de(D,B){var oe=0,ie=D.offset;return B&&(ie*=-H,oe=D.offset*J),{x:oe,y:ie}}function pe(D){var B={start:1,end:-1,middle:0}[D.anchor],oe=B*(Y+Z),ie=oe+B*(D.txwidth+Z),ge=D.anchor==="middle";return ge&&(oe-=D.tx2width/2,ie+=D.txwidth/2+Z),{alignShift:B,textShiftX:oe,text2ShiftX:ie}}function he(D,B,oe,ie){var ge=function(Se){return Se*oe},_e=function(Se){return Se*ie};D.each(function(Se){var De=$.select(this);if(Se.del)return De.remove();var Ge=De.select("text.nums"),Je=Se.anchor,yt=Je==="end"?-1:1,ut=pe(Se),vt=de(Se,B),Ae=vt.x,Fe=vt.y,ke=Je==="middle";De.select("path").attr("d",ke?"M-"+ge(Se.bx/2+Se.tx2width/2)+","+_e(Fe-Se.by/2)+"h"+ge(Se.bx)+"v"+_e(Se.by)+"h-"+ge(Se.bx)+"Z":"M0,0L"+ge(yt*Y+Ae)+","+_e(Y+Fe)+"v"+_e(Se.by/2-Y)+"h"+ge(yt*Se.bx)+"v-"+_e(Se.by)+"H"+ge(yt*Y+Ae)+"V"+_e(Fe-Y)+"Z");var Be=Ae+ut.textShiftX,et=Fe+Se.ty0-Se.by/2+Z,ht=Se.textAlign||"auto";ht!=="auto"&&(ht==="left"&&Je!=="start"?(Ge.attr("text-anchor","start"),Be=ke?-Se.bx/2-Se.tx2width/2+Z:-Se.bx-Z):ht==="right"&&Je!=="end"&&(Ge.attr("text-anchor","end"),Be=ke?Se.bx/2-Se.tx2width/2-Z:Se.bx+Z)),Ge.call(w.positionText,ge(Be),_e(et)),Se.tx2width&&(De.select("text.name").call(w.positionText,ge(ut.text2ShiftX+ut.alignShift*Z+Ae),_e(Fe+Se.ty0-Se.by/2+Z)),De.select("rect").call(T.setRect,ge(ut.text2ShiftX+(ut.alignShift-1)*Se.tx2width/2+Ae),_e(Fe-Se.by/2-1),ge(Se.tx2width),_e(Se.by+2)))})}function be(D,B){var oe=D.index,ie=D.trace||{},ge=D.cd[0],_e=D.cd[oe]||{};function Se(vt){return vt||h(vt)&&vt===0}var De=Array.isArray(oe)?function(vt,Ae){var Fe=u.castOption(ge,oe,vt);return Se(Fe)?Fe:u.extractOption({},ie,"",Ae)}:function(vt,Ae){return u.extractOption(_e,ie,vt,Ae)};function Ge(vt,Ae,Fe){var ke=De(Ae,Fe);Se(ke)&&(D[vt]=ke)}if(Ge("hoverinfo","hi","hoverinfo"),Ge("bgcolor","hbg","hoverlabel.bgcolor"),Ge("borderColor","hbc","hoverlabel.bordercolor"),Ge("fontFamily","htf","hoverlabel.font.family"),Ge("fontSize","hts","hoverlabel.font.size"),Ge("fontColor","htc","hoverlabel.font.color"),Ge("fontWeight","htw","hoverlabel.font.weight"),Ge("fontStyle","hty","hoverlabel.font.style"),Ge("fontVariant","htv","hoverlabel.font.variant"),Ge("nameLength","hnl","hoverlabel.namelength"),Ge("textAlign","hta","hoverlabel.align"),D.posref=B==="y"||B==="closest"&&ie.orientation==="h"?D.xa._offset+(D.x0+D.x1)/2:D.ya._offset+(D.y0+D.y1)/2,D.x0=u.constrain(D.x0,0,D.xa._length),D.x1=u.constrain(D.x1,0,D.xa._length),D.y0=u.constrain(D.y0,0,D.ya._length),D.y1=u.constrain(D.y1,0,D.ya._length),D.xLabelVal!==void 0&&(D.xLabel="xLabel"in D?D.xLabel:R.hoverLabelText(D.xa,D.xLabelVal,ie.xhoverformat),D.xVal=D.xa.c2d(D.xLabelVal)),D.yLabelVal!==void 0&&(D.yLabel="yLabel"in D?D.yLabel:R.hoverLabelText(D.ya,D.yLabelVal,ie.yhoverformat),D.yVal=D.ya.c2d(D.yLabelVal)),D.zLabelVal!==void 0&&D.zLabel===void 0&&(D.zLabel=String(D.zLabelVal)),!isNaN(D.xerr)&&!(D.xa.type==="log"&&D.xerr<=0)){var Je=R.tickText(D.xa,D.xa.c2l(D.xerr),"hover").text;D.xerrneg!==void 0?D.xLabel+=" +"+Je+" / -"+R.tickText(D.xa,D.xa.c2l(D.xerrneg),"hover").text:D.xLabel+=" ± "+Je,B==="x"&&(D.distance+=1)}if(!isNaN(D.yerr)&&!(D.ya.type==="log"&&D.yerr<=0)){var yt=R.tickText(D.ya,D.ya.c2l(D.yerr),"hover").text;D.yerrneg!==void 0?D.yLabel+=" +"+yt+" / -"+R.tickText(D.ya,D.ya.c2l(D.yerrneg),"hover").text:D.yLabel+=" ± "+yt,B==="y"&&(D.distance+=1)}var ut=D.hoverinfo||D.trace.hoverinfo;return ut&&ut!=="all"&&(ut=Array.isArray(ut)?ut:ut.split("+"),ut.indexOf("x")===-1&&(D.xLabel=void 0),ut.indexOf("y")===-1&&(D.yLabel=void 0),ut.indexOf("z")===-1&&(D.zLabel=void 0),ut.indexOf("text")===-1&&(D.text=void 0),ut.indexOf("name")===-1&&(D.name=void 0)),D}function Ee(D,B,oe){var ie=oe.container,ge=oe.fullLayout,_e=ge._size,Se=oe.event,De=!!B.hLinePoint,Ge=!!B.vLinePoint,Je,yt;if(ie.selectAll(".spikeline").remove(),!!(Ge||De)){var ut=y.combine(ge.plot_bgcolor,ge.paper_bgcolor);if(De){var vt=B.hLinePoint,Ae,Fe;Je=vt&&vt.xa,yt=vt&&vt.ya;var ke=yt.spikesnap;ke==="cursor"?(Ae=Se.pointerX,Fe=Se.pointerY):(Ae=Je._offset+vt.x,Fe=yt._offset+vt.y);var Be=c.readability(vt.color,ut)<1.5?y.contrast(ut):vt.color,et=yt.spikemode,ht=yt.spikethickness,jt=yt.spikecolor||Be,At=R.getPxPosition(D,yt),Pt,zt;if(et.indexOf("toaxis")!==-1||et.indexOf("across")!==-1){if(et.indexOf("toaxis")!==-1&&(Pt=At,zt=Ae),et.indexOf("across")!==-1){var Nt=yt._counterDomainMin,Kt=yt._counterDomainMax;yt.anchor==="free"&&(Nt=Math.min(Nt,yt.position),Kt=Math.max(Kt,yt.position)),Pt=_e.l+Nt*_e.w,zt=_e.l+Kt*_e.w}ie.insert("line",":first-child").attr({x1:Pt,x2:zt,y1:Fe,y2:Fe,"stroke-width":ht,stroke:jt,"stroke-dasharray":T.dashStyle(yt.spikedash,ht)}).classed("spikeline",!0).classed("crisp",!0),ie.insert("line",":first-child").attr({x1:Pt,x2:zt,y1:Fe,y2:Fe,"stroke-width":ht+2,stroke:ut}).classed("spikeline",!0).classed("crisp",!0)}et.indexOf("marker")!==-1&&ie.insert("circle",":first-child").attr({cx:At+(yt.side!=="right"?ht:-ht),cy:Fe,r:ht,fill:jt}).classed("spikeline",!0)}if(Ge){var _t=B.vLinePoint,Qt,fr;Je=_t&&_t.xa,yt=_t&&_t.ya;var Vt=Je.spikesnap;Vt==="cursor"?(Qt=Se.pointerX,fr=Se.pointerY):(Qt=Je._offset+_t.x,fr=yt._offset+_t.y);var rr=c.readability(_t.color,ut)<1.5?y.contrast(ut):_t.color,Ne=Je.spikemode,$e=Je.spikethickness,Ue=Je.spikecolor||rr,fe=R.getPxPosition(D,Je),je,Pe;if(Ne.indexOf("toaxis")!==-1||Ne.indexOf("across")!==-1){if(Ne.indexOf("toaxis")!==-1&&(je=fe,Pe=fr),Ne.indexOf("across")!==-1){var Re=Je._counterDomainMin,tt=Je._counterDomainMax;Je.anchor==="free"&&(Re=Math.min(Re,Je.position),tt=Math.max(tt,Je.position)),je=_e.t+(1-tt)*_e.h,Pe=_e.t+(1-Re)*_e.h}ie.insert("line",":first-child").attr({x1:Qt,x2:Qt,y1:je,y2:Pe,"stroke-width":$e,stroke:Ue,"stroke-dasharray":T.dashStyle(Je.spikedash,$e)}).classed("spikeline",!0).classed("crisp",!0),ie.insert("line",":first-child").attr({x1:Qt,x2:Qt,y1:je,y2:Pe,"stroke-width":$e+2,stroke:ut}).classed("spikeline",!0).classed("crisp",!0)}Ne.indexOf("marker")!==-1&&ie.insert("circle",":first-child").attr({cx:Qt,cy:fe-(Je.side!=="top"?$e:-$e),r:$e,fill:Ue}).classed("spikeline",!0)}}}function Te(D,B,oe){if(!oe||oe.length!==D._hoverdata.length)return!0;for(var ie=oe.length-1;ie>=0;ie--){var ge=oe[ie],_e=D._hoverdata[ie];if(ge.curveNumber!==_e.curveNumber||String(ge.pointNumber)!==String(_e.pointNumber)||String(ge.pointNumbers)!==String(_e.pointNumbers))return!0}return!1}function He(D,B){return!0}function te(D,B){return w.plainText(D||"",{len:B,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function ae(D,B){for(var oe=B.charAt(0),ie=[],ge=[],_e=[],Se=0;Se<D.length;Se++){var De=D[Se];A.traceIs(De.trace,"bar-like")||A.traceIs(De.trace,"box-violin")?_e.push(De):De.trace[oe+"period"]?ge.push(De):ie.push(De)}return ie.concat(ge).concat(_e)}function G(D,B,oe){var ie=B[D+"a"],ge=B[D+"Val"],_e=B.cd[0];if(ie.type==="category"||ie.type==="multicategory")ge=ie._categoriesMap[ge];else if(ie.type==="date"){var Se=B.trace[D+"periodalignment"];if(Se){var De=B.cd[B.index],Ge=De[D+"Start"];Ge===void 0&&(Ge=De[D]);var Je=De[D+"End"];Je===void 0&&(Je=De[D]);var yt=Je-Ge;Se==="end"?ge+=yt:Se==="middle"&&(ge+=yt/2)}ge=ie.d2c(ge)}return _e&&_e.t&&_e.t.posLetter===ie._id&&(oe.boxmode==="group"||oe.violinmode==="group")&&(ge+=_e.t.dPos),ge}function K(D){return D.offsetTop+D.clientTop}function V(D){return D.offsetLeft+D.clientLeft}function re(D,B){var oe=D._fullLayout,ie=B.getBoundingClientRect(),ge=ie.left,_e=ie.top,Se=ge+ie.width,De=_e+ie.height,Ge=u.apply3DTransform(oe._invTransform)(ge,_e),Je=u.apply3DTransform(oe._invTransform)(Se,De),yt=Ge[0],ut=Ge[1],vt=Je[0],Ae=Je[1];return{x:yt,y:ut,width:vt-yt,height:Ae-ut,top:Math.min(ut,Ae),left:Math.min(yt,vt),right:Math.max(yt,vt),bottom:Math.max(ut,Ae)}}}}),fu=i({"src/components/fx/hoverlabel_defaults.js"(U,$){var h=kr(),c=pt(),u=ts().isUnifiedHover;$.exports=function(v,m,g,w){w=w||{};var l=m.legend;function T(y){w.font[y]||(w.font[y]=l?m.legend.font[y]:m.font[y])}m&&u(m.hovermode)&&(w.font||(w.font={}),T("size"),T("family"),T("color"),T("weight"),T("style"),T("variant"),l?(w.bgcolor||(w.bgcolor=c.combine(m.legend.bgcolor,m.paper_bgcolor)),w.bordercolor||(w.bordercolor=m.legend.bordercolor)):w.bgcolor||(w.bgcolor=m.paper_bgcolor)),g("hoverlabel.bgcolor",w.bgcolor),g("hoverlabel.bordercolor",w.bordercolor),g("hoverlabel.namelength",w.namelength),h.coerceFont(g,"hoverlabel.font",w.font),g("hoverlabel.align",w.align)}}}),qf=i({"src/components/fx/layout_global_defaults.js"(U,$){var h=kr(),c=fu(),u=Tr();$.exports=function(v,m){function g(w,l){return h.coerce(v,m,u,w,l)}c(v,m,g)}}}),Vf=i({"src/components/fx/defaults.js"(U,$){var h=kr(),c=xr(),u=fu();$.exports=function(v,m,g,w){function l(y,S){return h.coerce(v,m,c,y,S)}var T=h.extendFlat({},w.hoverlabel);m.hovertemplate&&(T.namelength=-1),u(v,m,l,T)}}}),ud=i({"src/components/fx/hovermode_defaults.js"(U,$){var h=kr(),c=Tr();$.exports=function(p,v){function m(g,w){return v[g]!==void 0?v[g]:h.coerce(p,v,c,g,w)}return m("clickmode"),m("hoversubplots"),m("hovermode")}}}),Uf=i({"src/components/fx/layout_defaults.js"(U,$){var h=kr(),c=Tr(),u=ud(),p=fu();$.exports=function(m,g){function w(A,C){return h.coerce(m,g,c,A,C)}var l=u(m,g);l&&(w("hoverdistance"),w("spikedistance"));var T=w("dragmode");T==="select"&&w("selectdirection");var y=g._has("mapbox"),S=g._has("map"),R=g._has("geo"),M=g._basePlotModules.length;g.dragmode==="zoom"&&((y||S||R)&&M===1||(y||S)&&R&&M===2)&&(g.dragmode="pan"),p(m,g,w),h.coerceFont(w,"hoverlabel.grouptitlefont",g.hoverlabel.font)}}}),$f=i({"src/components/fx/calc.js"(U,$){var h=kr(),c=mn();$.exports=function(v){var m=v.calcdata,g=v._fullLayout;function w(R){return function(M){return h.coerceHoverinfo({hoverinfo:M},{_module:R._module},g)}}for(var l=0;l<m.length;l++){var T=m[l],y=T[0].trace;if(!c.traceIs(y,"pie-like")){var S=c.traceIs(y,"2dMap")?u:h.fillArray;S(y.hoverinfo,T,"hi",w(y)),y.hovertemplate&&S(y.hovertemplate,T,"ht"),y.hoverlabel&&(S(y.hoverlabel.bgcolor,T,"hbg"),S(y.hoverlabel.bordercolor,T,"hbc"),S(y.hoverlabel.font.size,T,"hts"),S(y.hoverlabel.font.color,T,"htc"),S(y.hoverlabel.font.family,T,"htf"),S(y.hoverlabel.font.weight,T,"htw"),S(y.hoverlabel.font.style,T,"hty"),S(y.hoverlabel.font.variant,T,"htv"),S(y.hoverlabel.namelength,T,"hnl"),S(y.hoverlabel.align,T,"hta"))}}};function u(p,v,m,g){g=g||h.identity,Array.isArray(p)&&(v[0][m]=g(p))}}}),Yf=i({"src/components/fx/click.js"(U,$){var h=mn(),c=cd().hover;$.exports=function(p,v,m){var g=h.getComponentMethod("annotations","onClick")(p,p._hoverdata);m!==void 0&&c(p,v,m,!0);function w(){p.emit("plotly_click",{points:p._hoverdata,event:v})}p._hoverdata&&v&&v.target&&(g&&g.then?g.then(w):w(),v.stopImmediatePropagation&&v.stopImmediatePropagation())}}}),po=i({"src/components/fx/index.js"(U,$){var h=d(),c=kr(),u=Wa(),p=ts(),v=Tr(),m=cd();$.exports={moduleType:"component",name:"fx",constants:cr(),schema:{layout:v},attributes:xr(),layoutAttributes:v,supplyLayoutGlobalDefaults:qf(),supplyDefaults:Vf(),supplyLayoutDefaults:Uf(),calc:$f(),getDistanceFunction:p.getDistanceFunction,getClosest:p.getClosest,inbox:p.inbox,quadrature:p.quadrature,appendArrayPointValue:p.appendArrayPointValue,castHoverOption:w,castHoverinfo:l,hover:m.hover,unhover:u.unhover,loneHover:m.loneHover,loneUnhover:g,click:Yf()};function g(T){var y=c.isD3Selection(T)?T:h.select(T);y.selectAll("g.hovertext").remove(),y.selectAll(".spikeline").remove()}function w(T,y,S){return c.castOption(T,y,"hoverlabel."+S)}function l(T,y,S){function R(M){return c.coerceHoverinfo({hoverinfo:M},{_module:T._module},y)}return c.castOption(T,S,"hoverinfo",R)}}}),Ol=i({"src/components/dragelement/helpers.js"(U){U.selectMode=function($){return $==="lasso"||$==="select"},U.drawMode=function($){return $==="drawclosedpath"||$==="drawopenpath"||$==="drawline"||$==="drawrect"||$==="drawcircle"},U.openMode=function($){return $==="drawline"||$==="drawopenpath"},U.rectMode=function($){return $==="select"||$==="drawline"||$==="drawrect"||$==="drawcircle"},U.freeMode=function($){return $==="lasso"||$==="drawclosedpath"||$==="drawopenpath"},U.selectingOrDrawing=function($){return U.freeMode($)||U.rectMode($)}}}),hu=i({"src/lib/clear_gl_canvases.js"(U,$){$.exports=function(c){var u=c._fullLayout;u._glcanvas&&u._glcanvas.size()&&u._glcanvas.each(function(p){p.regl&&p.regl.clear({color:!0,depth:!0})})}}}),pu=i({"src/fonts/ploticon.js"(U,$){$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}}}),mu=i({"src/components/shapes/draw_newshape/constants.js"(U,$){var h=32;$.exports={CIRCLE_SIDES:h,i000:0,i090:h/4,i180:h/2,i270:h/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}}}),vu=i({"src/components/selections/helpers.js"(U,$){var h=kr().strTranslate;function c(m,g){switch(m.type){case"log":return m.p2d(g);case"date":return m.p2r(g,0,m.calendar);default:return m.p2r(g)}}function u(m,g){switch(m.type){case"log":return m.d2p(g);case"date":return m.r2p(g,0,m.calendar);default:return m.r2p(g)}}function p(m){var g=m._id.charAt(0)==="y"?1:0;return function(w){return c(m,w[g])}}function v(m){return h(m.xaxis._offset,m.yaxis._offset)}$.exports={p2r:c,r2p:u,axValue:p,getTransform:v}}}),qo=i({"src/components/shapes/draw_newshape/helpers.js"(U){var $=al(),h=mu(),c=h.CIRCLE_SIDES,u=h.SQRT2,p=vu(),v=p.p2r,m=p.r2p,g=[0,3,4,5,6,1,2],w=[0,3,4,1,2];U.writePaths=function(y){var S=y.length;if(!S)return"M0,0Z";for(var R="",M=0;M<S;M++)for(var A=y[M].length,C=0;C<A;C++){var j=y[M][C][0];if(j==="Z")R+="Z";else for(var b=y[M][C].length,k=0;k<b;k++){var E=k;j==="Q"||j==="S"?E=w[k]:j==="C"&&(E=g[k]),R+=y[M][C][E],k>0&&k<b-1&&(R+=",")}}return R},U.readPaths=function(y,S,R,M){var A=$(y),C=[],j=-1,b=function(){j++,C[j]=[]},k,E=0,F=0,P,J,H=function(){P=E,J=F};H();for(var Y=0;Y<A.length;Y++){var Z=[],z,q,X,Q,ee=A[Y][0],ne=ee;switch(ee){case"M":b(),E=+A[Y][1],F=+A[Y][2],Z.push([ne,E,F]),H();break;case"Q":case"S":z=+A[Y][1],X=+A[Y][2],E=+A[Y][3],F=+A[Y][4],Z.push([ne,E,F,z,X]);break;case"C":z=+A[Y][1],X=+A[Y][2],q=+A[Y][3],Q=+A[Y][4],E=+A[Y][5],F=+A[Y][6],Z.push([ne,E,F,z,X,q,Q]);break;case"T":case"L":E=+A[Y][1],F=+A[Y][2],Z.push([ne,E,F]);break;case"H":ne="L",E=+A[Y][1],Z.push([ne,E,F]);break;case"V":ne="L",F=+A[Y][1],Z.push([ne,E,F]);break;case"A":ne="L";var le=+A[Y][1],W=+A[Y][2];+A[Y][4]||(le=-le,W=-W);var ce=E-le,de=F;for(k=1;k<=c/2;k++){var pe=2*Math.PI*k/c;Z.push([ne,ce+le*Math.cos(pe),de+W*Math.sin(pe)])}break;case"Z":(E!==P||F!==J)&&(E=P,F=J,Z.push([ne,E,F]));break}for(var he=(R||{}).domain,be=S._fullLayout._size,Ee=R&&R.xsizemode==="pixel",Te=R&&R.ysizemode==="pixel",He=M===!1,te=0;te<Z.length;te++){for(k=0;k+2<7;k+=2){var ae=Z[te][k+1],G=Z[te][k+2];ae===void 0||G===void 0||(E=ae,F=G,R&&(R.xaxis&&R.xaxis.p2r?(He&&(ae-=R.xaxis._offset),Ee?ae=m(R.xaxis,R.xanchor)+ae:ae=v(R.xaxis,ae)):(He&&(ae-=be.l),he?ae=he.x[0]+ae/be.w:ae=ae/be.w),R.yaxis&&R.yaxis.p2r?(He&&(G-=R.yaxis._offset),Te?G=m(R.yaxis,R.yanchor)-G:G=v(R.yaxis,G)):(He&&(G-=be.t),he?G=he.y[1]-G/be.h:G=1-G/be.h)),Z[te][k+1]=ae,Z[te][k+2]=G)}C[j].push(Z[te].slice())}}return C};function l(y,S){return Math.abs(y-S)<=1e-6}function T(y,S){var R=S[1]-y[1],M=S[2]-y[2];return Math.sqrt(R*R+M*M)}U.pointsOnRectangle=function(y){var S=y.length;if(S!==5)return!1;for(var R=1;R<3;R++){var M=y[0][R]-y[1][R],A=y[3][R]-y[2][R];if(!l(M,A))return!1;var C=y[0][R]-y[3][R],j=y[1][R]-y[2][R];if(!l(C,j))return!1}return!l(y[0][1],y[1][1])&&!l(y[0][1],y[3][1])?!1:!!(T(y[0],y[1])*T(y[0],y[3]))},U.pointsOnEllipse=function(y){var S=y.length;if(S!==c+1)return!1;S=c;for(var R=0;R<S;R++){var M=(S*2-R)%S,A=(S/2+M)%S,C=(S/2+R)%S;if(!l(T(y[R],y[C]),T(y[M],y[A])))return!1}return!0},U.handleEllipse=function(y,S,R){if(!y)return[S,R];var M=U.ellipseOver({x0:S[0],y0:S[1],x1:R[0],y1:R[1]}),A=(M.x1+M.x0)/2,C=(M.y1+M.y0)/2,j=(M.x1-M.x0)/2,b=(M.y1-M.y0)/2;j||(j=b=b/u),b||(b=j=j/u);for(var k=[],E=0;E<c;E++){var F=E*2*Math.PI/c;k.push([A+j*Math.cos(F),C+b*Math.sin(F)])}return k},U.ellipseOver=function(y){var S=y.x0,R=y.y0,M=y.x1,A=y.y1,C=M-S,j=A-R;S-=C,R-=j;var b=(S+M)/2,k=(R+A)/2,E=u;return C*=E,j*=E,{x0:b-C,y0:k-j,x1:b+C,y1:k+j}},U.fixDatesForPaths=function(y,S,R){var M=S.type==="date",A=R.type==="date";if(!M&&!A)return y;for(var C=0;C<y.length;C++)for(var j=0;j<y[C].length;j++)for(var b=0;b+2<y[C][j].length;b+=2)M&&(y[C][j][b+1]=y[C][j][b+1].replace(" ","_")),A&&(y[C][j][b+2]=y[C][j][b+2].replace(" ","_"));return y}}}),gu=i({"src/components/shapes/draw_newshape/newshapes.js"(U,$){var h=Ol(),c=h.drawMode,u=h.openMode,p=mu(),v=p.i000,m=p.i090,g=p.i180,w=p.i270,l=p.cos45,T=p.sin45,y=vu(),S=y.p2r,R=y.r2p,M=Ws(),A=M.clearOutline,C=qo(),j=C.readPaths,b=C.writePaths,k=C.ellipseOver,E=C.fixDatesForPaths;function F(J,H){if(J.length){var Y=J[0][0];if(Y){var Z=H.gd,z=H.isActiveShape,q=H.dragmode,X=(Z.layout||{}).shapes||[];if(!c(q)&&z!==void 0){var Q=Z._fullLayout._activeShapeIndex;if(Q<X.length)switch(Z._fullLayout.shapes[Q].type){case"rect":q="drawrect";break;case"circle":q="drawcircle";break;case"line":q="drawline";break;case"path":var ee=X[Q].path||"";ee[ee.length-1]==="Z"?q="drawclosedpath":q="drawopenpath";break}}var ne=P(J,H,q);A(Z);for(var le=H.editHelpers,W=(le||{}).modifyItem,ce=[],de=0;de<X.length;de++){var pe=Z._fullLayout.shapes[de];if(ce[de]=pe._input,z!==void 0&&de===Z._fullLayout._activeShapeIndex){var he=ne;switch(pe.type){case"line":case"rect":case"circle":W("x0",he.x0-(pe.x0shift||0)),W("x1",he.x1-(pe.x1shift||0)),W("y0",he.y0-(pe.y0shift||0)),W("y1",he.y1-(pe.y1shift||0));break;case"path":W("path",he.path);break}}}return z===void 0?(ce.push(ne),ce):le?le.getUpdateObj():{}}}}function P(J,H,Y){var Z=J[0][0],z=H.gd,q=Z.getAttribute("d"),X=z._fullLayout.newshape,Q=H.plotinfo,ee=H.isActiveShape,ne=Q.xaxis,le=Q.yaxis,W=!!Q.domain||!Q.xaxis,ce=!!Q.domain||!Q.yaxis,de=u(Y),pe=j(q,z,Q,ee),he={editable:!0,visible:X.visible,name:X.name,showlegend:X.showlegend,legend:X.legend,legendwidth:X.legendwidth,legendgroup:X.legendgroup,legendgrouptitle:{text:X.legendgrouptitle.text,font:X.legendgrouptitle.font},legendrank:X.legendrank,label:X.label,xref:W?"paper":ne._id,yref:ce?"paper":le._id,layer:X.layer,opacity:X.opacity,line:{color:X.line.color,width:X.line.width,dash:X.line.dash}};de||(he.fillcolor=X.fillcolor,he.fillrule=X.fillrule);var be;if(pe.length===1&&(be=pe[0]),be&&be.length===5&&Y==="drawrect")he.type="rect",he.x0=be[0][1],he.y0=be[0][2],he.x1=be[2][1],he.y1=be[2][2];else if(be&&Y==="drawline")he.type="line",he.x0=be[0][1],he.y0=be[0][2],he.x1=be[1][1],he.y1=be[1][2];else if(be&&Y==="drawcircle"){he.type="circle";var Ee=be[v][1],Te=be[m][1],He=be[g][1],te=be[w][1],ae=be[v][2],G=be[m][2],K=be[g][2],V=be[w][2],re=Q.xaxis&&(Q.xaxis.type==="date"||Q.xaxis.type==="log"),D=Q.yaxis&&(Q.yaxis.type==="date"||Q.yaxis.type==="log");re&&(Ee=R(Q.xaxis,Ee),Te=R(Q.xaxis,Te),He=R(Q.xaxis,He),te=R(Q.xaxis,te)),D&&(ae=R(Q.yaxis,ae),G=R(Q.yaxis,G),K=R(Q.yaxis,K),V=R(Q.yaxis,V));var B=(Te+te)/2,oe=(ae+K)/2,ie=(te-Te+He-Ee)/2,ge=(V-G+K-ae)/2,_e=k({x0:B,y0:oe,x1:B+ie*l,y1:oe+ge*T});re&&(_e.x0=S(Q.xaxis,_e.x0),_e.x1=S(Q.xaxis,_e.x1)),D&&(_e.y0=S(Q.yaxis,_e.y0),_e.y1=S(Q.yaxis,_e.y1)),he.x0=_e.x0,he.y0=_e.y0,he.x1=_e.x1,he.y1=_e.y1}else he.type="path",ne&&le&&E(pe,ne,le),he.path=b(pe),be=null;return he}$.exports={newShapes:F,createShapeObj:P}}}),dd=i({"src/components/selections/draw_newselection/newselections.js"(U,$){var h=Ol(),c=h.selectMode,u=Ws(),p=u.clearOutline,v=qo(),m=v.readPaths,g=v.writePaths,w=v.fixDatesForPaths;$.exports=function(T,y){if(T.length){var S=T[0][0];if(S){var R=S.getAttribute("d"),M=y.gd,A=M._fullLayout.newselection,C=y.plotinfo,j=C.xaxis,b=C.yaxis,k=y.isActiveSelection,E=y.dragmode,F=(M.layout||{}).selections||[];if(!c(E)&&k!==void 0){var P=M._fullLayout._activeSelectionIndex;if(P<F.length)switch(M._fullLayout.selections[P].type){case"rect":E="select";break;case"path":E="lasso";break}}var J=m(R,M,C,k),H={xref:j._id,yref:b._id,opacity:A.opacity,line:{color:A.line.color,width:A.line.width,dash:A.line.dash}},Y;J.length===1&&(Y=J[0]),Y&&Y.length===5&&E==="select"?(H.type="rect",H.x0=Y[0][1],H.y0=Y[0][2],H.x1=Y[2][1],H.y1=Y[2][2]):(H.type="path",j&&b&&w(J,j,b),H.path=g(J),Y=null),p(M);for(var Z=y.editHelpers,z=(Z||{}).modifyItem,q=[],X=0;X<F.length;X++){var Q=M._fullLayout.selections[X];if(!Q){q[X]=Q;continue}if(q[X]=Q._input,k!==void 0&&X===M._fullLayout._activeSelectionIndex){var ee=H;switch(Q.type){case"rect":z("x0",ee.x0),z("x1",ee.x1),z("y0",ee.y0),z("y1",ee.y1);break;case"path":z("path",ee.path);break}}}return k===void 0?(q.push(H),q):Z?Z.getUpdateObj():{}}}}}}),Mc=i({"src/components/shapes/constants.js"(U,$){$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}}}),qt=i({"src/components/shapes/helpers.js"(U){var $=Mc(),h=kr(),c=ji();U.rangeToShapePosition=function(v){return v.type==="log"?v.r2d:function(m){return m}},U.shapePositionToRange=function(v){return v.type==="log"?v.d2r:function(m){return m}},U.decodeDate=function(v){return function(m){return m.replace&&(m=m.replace("_"," ")),v(m)}},U.encodeDate=function(v){return function(m){return v(m).replace(" ","_")}},U.extractPathCoords=function(v,m,g){var w=[],l=v.match($.segmentRE);return l.forEach(function(T){var y=m[T.charAt(0)].drawn;if(y!==void 0){var S=T.substr(1).match($.paramRE);if(!(!S||S.length<y)){var R=S[y],M=g?R:h.cleanNumber(R);w.push(M)}}}),w},U.getDataToPixel=function(v,m,g,w,l){var T=v._fullLayout._size,y;if(m)if(l==="domain")y=function(R){return m._length*(w?1-R:R)+m._offset};else{var S=U.shapePositionToRange(m);y=function(R){var M=p(m,g);return m._offset+m.r2p(S(R,!0))+M},m.type==="date"&&(y=U.decodeDate(y))}else w?y=function(R){return T.t+T.h*(1-R)}:y=function(R){return T.l+T.w*R};return y},U.getPixelToData=function(v,m,g,w){var l=v._fullLayout._size,T;if(m)if(w==="domain")T=function(S){var R=(S-m._offset)/m._length;return g?1-R:R};else{var y=U.rangeToShapePosition(m);T=function(S){return y(m.p2r(S-m._offset))}}else g?T=function(S){return 1-(S-l.t)/l.h}:T=function(S){return(S-l.l)/l.w};return T},U.roundPositionForSharpStrokeRendering=function(v,m){var g=Math.round(m%2)===1,w=Math.round(v);return g?w+.5:w},U.makeShapesOptionsAndPlotinfo=function(v,m){var g=v._fullLayout.shapes[m]||{},w=v._fullLayout._plots[g.xref+g.yref],l=!!w;return l?w._hadPlotinfo=!0:(w={},g.xref&&g.xref!=="paper"&&(w.xaxis=v._fullLayout[g.xref+"axis"]),g.yref&&g.yref!=="paper"&&(w.yaxis=v._fullLayout[g.yref+"axis"])),w.xsizemode=g.xsizemode,w.ysizemode=g.ysizemode,w.xanchor=g.xanchor,w.yanchor=g.yanchor,{options:g,plotinfo:w}},U.makeSelectionsOptionsAndPlotinfo=function(v,m){var g=v._fullLayout.selections[m]||{},w=v._fullLayout._plots[g.xref+g.yref],l=!!w;return l?w._hadPlotinfo=!0:(w={},g.xref&&(w.xaxis=v._fullLayout[g.xref+"axis"]),g.yref&&(w.yaxis=v._fullLayout[g.yref+"axis"])),{options:g,plotinfo:w}},U.getPathString=function(v,m){var g=m.type,w=c.getRefType(m.xref),l=c.getRefType(m.yref),T=c.getFromId(v,m.xref),y=c.getFromId(v,m.yref),S=v._fullLayout._size,R,M,A,C,j=p(T,m.x0shift),b=p(T,m.x1shift),k=p(y,m.y0shift),E=p(y,m.y1shift),F,P,J,H;if(T?w==="domain"?M=function(W){return T._offset+T._length*W}:(R=U.shapePositionToRange(T),M=function(W){return T._offset+T.r2p(R(W,!0))}):M=function(W){return S.l+S.w*W},y?l==="domain"?C=function(W){return y._offset+y._length*(1-W)}:(A=U.shapePositionToRange(y),C=function(W){return y._offset+y.r2p(A(W,!0))}):C=function(W){return S.t+S.h*(1-W)},g==="path")return T&&T.type==="date"&&(M=U.decodeDate(M)),y&&y.type==="date"&&(C=U.decodeDate(C)),u(m,M,C);if(m.xsizemode==="pixel"){var Y=M(m.xanchor);F=Y+m.x0+j,P=Y+m.x1+b}else F=M(m.x0)+j,P=M(m.x1)+b;if(m.ysizemode==="pixel"){var Z=C(m.yanchor);J=Z-m.y0+k,H=Z-m.y1+E}else J=C(m.y0)+k,H=C(m.y1)+E;if(g==="line")return"M"+F+","+J+"L"+P+","+H;if(g==="rect")return"M"+F+","+J+"H"+P+"V"+H+"H"+F+"Z";var z=(F+P)/2,q=(J+H)/2,X=Math.abs(z-F),Q=Math.abs(q-J),ee="A"+X+","+Q,ne=z+X+","+q,le=z+","+(q-Q);return"M"+ne+ee+" 0 1,1 "+le+ee+" 0 0,1 "+ne+"Z"};function u(v,m,g){var w=v.path,l=v.xsizemode,T=v.ysizemode,y=v.xanchor,S=v.yanchor;return w.replace($.segmentRE,function(R){var M=0,A=R.charAt(0),C=$.paramIsX[A],j=$.paramIsY[A],b=$.numParams[A],k=R.substr(1).replace($.paramRE,function(E){return C[M]?l==="pixel"?E=m(y)+Number(E):E=m(E):j[M]&&(T==="pixel"?E=g(S)-Number(E):E=g(E)),M++,M>b&&(E="X"),E});return M>b&&(k=k.replace(/[\s,]*X.*/,""),h.log("Ignoring extra params in segment "+R)),A+k})}function p(v,m){m=m||0;var g=0;return m&&v&&(v.type==="category"||v.type==="multicategory")&&(g=(v.r2p(1)-v.r2p(0))*m),g}}}),wn=i({"src/components/shapes/display_labels.js"(U,$){var h=kr(),c=ji(),u=Ra(),p=di(),v=qo().readPaths,m=qt(),g=m.getPathString,w=wa(),l=La().FROM_TL;$.exports=function(R,M,A,C){if(C.selectAll(".shape-label").remove(),!!(A.label.text||A.label.texttemplate)){var j;if(A.label.texttemplate){var b={};if(A.type!=="path"){var k=c.getFromId(R,A.xref),E=c.getFromId(R,A.yref);for(var F in w){var P=w[F](A,k,E);P!==void 0&&(b[F]=P)}}j=h.texttemplateStringForShapes(A.label.texttemplate,{},R._fullLayout._d3locale,b)}else j=A.label.text;var J={"data-index":M},H=A.label.font,Y={"data-notex":1},Z=C.append("g").attr(J).classed("shape-label",!0),z=Z.append("text").attr(Y).classed("shape-label-text",!0).text(j),q,X,Q,ee;if(A.path){var ne=g(R,A),le=v(ne,R);q=1/0,Q=1/0,X=-1/0,ee=-1/0;for(var W=0;W<le.length;W++)for(var ce=0;ce<le[W].length;ce++)for(var de=le[W][ce],pe=1;pe<de.length;pe+=2){var he=de[pe],be=de[pe+1];q=Math.min(q,he),X=Math.max(X,he),Q=Math.min(Q,be),ee=Math.max(ee,be)}}else{var Ee=c.getFromId(R,A.xref),Te=A.x0shift,He=A.x1shift,te=c.getRefType(A.xref),ae=c.getFromId(R,A.yref),G=A.y0shift,K=A.y1shift,V=c.getRefType(A.yref),re=function(De,Ge){var Je=m.getDataToPixel(R,Ee,Ge,!1,te);return Je(De)},D=function(De,Ge){var Je=m.getDataToPixel(R,ae,Ge,!0,V);return Je(De)};q=re(A.x0,Te),X=re(A.x1,He),Q=D(A.y0,G),ee=D(A.y1,K)}var B=A.label.textangle;B==="auto"&&(A.type==="line"?B=T(q,Q,X,ee):B=0),z.call(function(De){return De.call(p.font,H).attr({}),u.convertToTspans(De,R),De});var oe=p.bBox(z.node()),ie=y(q,Q,X,ee,A,B,oe),ge=ie.textx,_e=ie.texty,Se=ie.xanchor;z.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Se],y:_e,x:ge,transform:"rotate("+B+","+ge+","+_e+")"}).call(u.positionText,ge,_e)}};function T(S,R,M,A){var C,j;return j=Math.abs(M-S),M>=S?C=R-A:C=A-R,-180/Math.PI*Math.atan2(C,j)}function y(S,R,M,A,C,j,b){var k=C.label.textposition,E=C.label.textangle,F=C.label.padding,P=C.type,J=Math.PI/180*j,H=Math.sin(J),Y=Math.cos(J),Z=C.label.xanchor,z=C.label.yanchor,q,X,Q,ee;if(P==="line"){k==="start"?(q=S,X=R):k==="end"?(q=M,X=A):(q=(S+M)/2,X=(R+A)/2),Z==="auto"&&(k==="start"?E==="auto"?M>S?Z="left":M<S?Z="right":Z="center":M>S?Z="right":M<S?Z="left":Z="center":k==="end"?E==="auto"?M>S?Z="right":M<S?Z="left":Z="center":M>S?Z="left":M<S?Z="right":Z="center":Z="center");var ne={left:1,center:0,right:-1},le={bottom:-1,middle:0,top:1};if(E==="auto"){var W=le[z];Q=-F*H*W,ee=F*Y*W}else{var ce=ne[Z],de=le[z];Q=F*ce,ee=F*de}q=q+Q,X=X+ee}else Q=F+3,k.indexOf("right")!==-1?(q=Math.max(S,M)-Q,Z==="auto"&&(Z="right")):k.indexOf("left")!==-1?(q=Math.min(S,M)+Q,Z==="auto"&&(Z="left")):(q=(S+M)/2,Z==="auto"&&(Z="center")),k.indexOf("top")!==-1?X=Math.min(R,A):k.indexOf("bottom")!==-1?X=Math.max(R,A):X=(R+A)/2,ee=F,z==="bottom"?X=X-ee:z==="top"&&(X=X+ee);var pe=l[z],he=C.label.font.size,be=b.height,Ee=(be*pe-he)*H,Te=-(be*pe-he)*Y;return{textx:q+Ee,texty:X+Te,xanchor:Z}}}}),Yn=i({"src/components/shapes/display_outlines.js"(U,$){var h=kr(),c=h.strTranslate,u=Wa(),p=Ol(),v=p.drawMode,m=p.selectMode,g=mn(),w=pt(),l=mu(),T=l.i000,y=l.i090,S=l.i180,R=l.i270,M=Ws(),A=M.clearOutlineControllers,C=qo(),j=C.pointsOnRectangle,b=C.pointsOnEllipse,k=C.writePaths,E=gu().newShapes,F=gu().createShapeObj,P=dd(),J=wn();$.exports=function z(q,X,Q,ee){ee||(ee=0);var ne=Q.gd;function le(){z(q,X,Q,ee++),(b(q[0])||Q.hasText)&&W({redrawing:!0})}function W(ut){var vt={};Q.isActiveShape!==void 0&&(Q.isActiveShape=!1,vt=E(X,Q)),Q.isActiveSelection!==void 0&&(Q.isActiveSelection=!1,vt=P(X,Q),ne._fullLayout._reselect=!0),Object.keys(vt).length&&g.call((ut||{}).redrawing?"relayout":"_guiRelayout",ne,vt)}var ce=ne._fullLayout,de=ce._zoomlayer,pe=Q.dragmode,he=v(pe),be=m(pe);(he||be)&&(ne._fullLayout._outlining=!0),A(ne),X.attr("d",k(q));var Ee,Te,He,te,ae;if(!ee&&(Q.isActiveShape||Q.isActiveSelection)){ae=H([],q);var G=de.append("g").attr("class","outline-controllers");ge(G),yt()}if(he&&Q.hasText){var K=de.select(".label-temp"),V=F(X,Q,Q.dragmode);J(ne,"label-temp",V,K)}function re(ut){He=+ut.srcElement.getAttribute("data-i"),te=+ut.srcElement.getAttribute("data-j"),Ee[He][te].moveFn=D}function D(ut,vt){if(q.length){var Ae=ae[He][te][1],Fe=ae[He][te][2],ke=q[He],Be=ke.length;if(j(ke)){var et=ut,ht=vt;if(Q.isActiveSelection){var jt=Y(ke,te);jt[1]===ke[te][1]?ht=0:et=0}for(var At=0;At<Be;At++)if(At!==te){var Pt=ke[At];Pt[1]===ke[te][1]&&(Pt[1]=Ae+et),Pt[2]===ke[te][2]&&(Pt[2]=Fe+ht)}if(ke[te][1]=Ae+et,ke[te][2]=Fe+ht,!j(ke))for(var zt=0;zt<Be;zt++)for(var Nt=0;Nt<ke[zt].length;Nt++)ke[zt][Nt]=ae[He][zt][Nt]}else ke[te][1]=Ae+ut,ke[te][2]=Fe+vt;le()}}function B(){W()}function oe(){if(q.length&&q[He]&&q[He].length){for(var ut=[],vt=0;vt<q[He].length;vt++)vt!==te&&ut.push(q[He][vt]);ut.length>1&&!(ut.length===2&&ut[1][0]==="Z")&&(te===0&&(ut[0][0]="M"),q[He]=ut,le(),W())}}function ie(ut,vt){if(ut===2){He=+vt.srcElement.getAttribute("data-i"),te=+vt.srcElement.getAttribute("data-j");var Ae=q[He];!j(Ae)&&!b(Ae)&&oe()}}function ge(ut){Ee=[];for(var vt=0;vt<q.length;vt++){var Ae=q[vt],Fe=j(Ae),ke=!Fe&&b(Ae);Ee[vt]=[];for(var Be=Ae.length,et=0;et<Be;et++)if(Ae[et][0]!=="Z"&&!(ke&&et!==T&&et!==y&&et!==S&&et!==R)){var ht=Fe&&Q.isActiveSelection,jt;ht&&(jt=Y(Ae,et));var At=Ae[et][1],Pt=Ae[et][2],zt=ut.append(ht?"rect":"circle").attr("data-i",vt).attr("data-j",et).style({fill:w.background,stroke:w.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ht){var Nt=jt[1]-At,Kt=jt[2]-Pt,_t=Kt?5:Math.max(Math.min(25,Math.abs(Nt)-5),5),Qt=Nt?5:Math.max(Math.min(25,Math.abs(Kt)-5),5);zt.classed(Kt?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",_t).attr("height",Qt).attr("x",At-_t/2).attr("y",Pt-Qt/2).attr("transform",c(Nt/2,Kt/2))}else zt.classed("cursor-grab",!0).attr("r",5).attr("cx",At).attr("cy",Pt);Ee[vt][et]={element:zt.node(),gd:ne,prepFn:re,doneFn:B,clickFn:ie},u.init(Ee[vt][et])}}}function _e(ut,vt){if(q.length)for(var Ae=0;Ae<q.length;Ae++)for(var Fe=0;Fe<q[Ae].length;Fe++)for(var ke=0;ke+2<q[Ae][Fe].length;ke+=2)q[Ae][Fe][ke+1]=ae[Ae][Fe][ke+1]+ut,q[Ae][Fe][ke+2]=ae[Ae][Fe][ke+2]+vt}function Se(ut,vt){_e(ut,vt),le()}function De(ut){He=+ut.srcElement.getAttribute("data-i"),He||(He=0),Te[He].moveFn=Se}function Ge(){W()}function Je(ut){ut===2&&Z(ne)}function yt(){if(Te=[],!!q.length){var ut=0;Te[ut]={element:X[0][0],gd:ne,prepFn:De,doneFn:Ge,clickFn:Je},u.init(Te[ut])}}};function H(z,q){for(var X=0;X<q.length;X++){var Q=q[X];z[X]=[];for(var ee=0;ee<Q.length;ee++){z[X][ee]=[];for(var ne=0;ne<Q[ee].length;ne++)z[X][ee][ne]=Q[ee][ne]}}return z}function Y(z,q){var X=z[q][1],Q=z[q][2],ee=z.length,ne,le,W;return ne=(q+1)%ee,le=z[ne][1],W=z[ne][2],le===X&&W===Q&&(ne=(q+2)%ee,le=z[ne][1],W=z[ne][2]),[ne,le,W]}function Z(z){if(m(z._fullLayout.dragmode)){A(z);var q=z._fullLayout._activeSelectionIndex,X=(z.layout||{}).selections||[];if(q<X.length){for(var Q=[],ee=0;ee<X.length;ee++)ee!==q&&Q.push(X[ee]);delete z._fullLayout._activeSelectionIndex;var ne=z._fullLayout.selections[q];z._fullLayout._deselect={xref:ne.xref,yref:ne.yref},g.call("_guiRelayout",z,{selections:Q})}}}}}),_a=i({"src/components/shapes/draw.js"(U,$){var h=d(),c=mn(),u=kr(),p=ji(),v=qo().readPaths,m=Yn(),g=wn(),w=Ws().clearOutlineControllers,l=pt(),T=di(),y=Si().arrayEditor,S=Wa(),R=ho(),M=Mc(),A=qt(),C=A.getPathString;$.exports={draw:j,drawOne:E,eraseActiveShape:Z,drawLabel:g};function j(z){var q=z._fullLayout;q._shapeUpperLayer.selectAll("path").remove(),q._shapeLowerLayer.selectAll("path").remove(),q._shapeUpperLayer.selectAll("text").remove(),q._shapeLowerLayer.selectAll("text").remove();for(var X in q._plots){var Q=q._plots[X].shapelayer;Q&&(Q.selectAll("path").remove(),Q.selectAll("text").remove())}for(var ee=0;ee<q.shapes.length;ee++)q.shapes[ee].visible===!0&&E(z,ee)}function b(z){return!!z._fullLayout._outlining}function k(z){return!z._context.edits.shapePosition}function E(z,q){z._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+q+'"]').remove();var X=A.makeShapesOptionsAndPlotinfo(z,q),Q=X.options,ee=X.plotinfo;if(!Q._input||Q.visible!==!0)return;if(Q.layer==="above")le(z._fullLayout._shapeUpperLayer);else if(Q.xref==="paper"||Q.yref==="paper")le(z._fullLayout._shapeLowerLayer);else if(Q.layer==="between")le(ee.shapelayerBetween);else if(ee._hadPlotinfo){var ne=ee.mainplotinfo||ee;le(ne.shapelayer)}else le(z._fullLayout._shapeLowerLayer);function le(W){var ce=C(z,Q),de={"data-index":q,"fill-rule":Q.fillrule,d:ce},pe=Q.opacity,he=Q.fillcolor,be=Q.line.width?Q.line.color:"rgba(0,0,0,0)",Ee=Q.line.width,Te=Q.line.dash;!Ee&&Q.editable===!0&&(Ee=5,Te="solid");var He=ce[ce.length-1]!=="Z",te=k(z)&&Q.editable&&z._fullLayout._activeShapeIndex===q;te&&(he=He?"rgba(0,0,0,0)":z._fullLayout.activeshape.fillcolor,pe=z._fullLayout.activeshape.opacity);var ae=W.append("g").classed("shape-group",!0).attr({"data-index":q}),G=ae.append("path").attr(de).style("opacity",pe).call(l.stroke,be).call(l.fill,he).call(T.dashLine,Te,Ee);F(ae,z,Q),g(z,q,Q,ae);var K;if((te||z._context.edits.shapePosition)&&(K=y(z.layout,"shapes",Q)),te){G.style({cursor:"move"});var V={element:G.node(),plotinfo:ee,gd:z,editHelpers:K,hasText:Q.label.text||Q.label.texttemplate,isActiveShape:!0},re=v(ce,z);m(re,G,V)}else z._context.edits.shapePosition?P(z,G,Q,q,W,K):Q.editable===!0&&G.style("pointer-events",He||l.opacity(he)*pe<=.5?"stroke":"all");G.node().addEventListener("click",function(){return H(z,G)})}}function F(z,q,X){var Q=(X.xref+X.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");T.setClipUrl(z,Q?"clip"+q._fullLayout._uid+Q:null,q)}function P(z,q,X,Q,ee,ne){var le=10,W=10,ce=X.xsizemode==="pixel",de=X.ysizemode==="pixel",pe=X.type==="line",he=X.type==="path",be=ne.modifyItem,Ee,Te,He,te,ae,G,K,V,re,D,B,oe,ie,ge,_e,Se=h.select(q.node().parentNode),De=p.getFromId(z,X.xref),Ge=p.getRefType(X.xref),Je=p.getFromId(z,X.yref),yt=p.getRefType(X.yref),ut=X.x0shift,vt=X.x1shift,Ae=X.y0shift,Fe=X.y1shift,ke=function(fe,je){var Pe=A.getDataToPixel(z,De,je,!1,Ge);return Pe(fe)},Be=function(fe,je){var Pe=A.getDataToPixel(z,Je,je,!0,yt);return Pe(fe)},et=A.getPixelToData(z,De,!1,Ge),ht=A.getPixelToData(z,Je,!0,yt),jt=zt(),At={element:jt.node(),gd:z,prepFn:_t,doneFn:Qt,clickFn:fr},Pt;S.init(At),jt.node().onmousemove=Kt;function zt(){return pe?Nt():q}function Nt(){var fe=10,je=Math.max(X.line.width,fe),Pe=ee.append("g").attr("data-index",Q).attr("drag-helper",!0);Pe.append("path").attr("d",q.attr("d")).style({cursor:"move","stroke-width":je,"stroke-opacity":"0"});var Re={"fill-opacity":"0"},tt=Math.max(je/2,fe);return Pe.append("circle").attr({"data-line-point":"start-point",cx:ce?ke(X.xanchor)+X.x0:ke(X.x0,ut),cy:de?Be(X.yanchor)-X.y0:Be(X.y0,Ae),r:tt}).style(Re).classed("cursor-grab",!0),Pe.append("circle").attr({"data-line-point":"end-point",cx:ce?ke(X.xanchor)+X.x1:ke(X.x1,vt),cy:de?Be(X.yanchor)-X.y1:Be(X.y1,Fe),r:tt}).style(Re).classed("cursor-grab",!0),Pe}function Kt(fe){if(b(z)){Pt=null;return}if(pe)fe.target.tagName==="path"?Pt="move":Pt=fe.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var je=At.element.getBoundingClientRect(),Pe=je.right-je.left,Re=je.bottom-je.top,tt=fe.clientX-je.left,nt=fe.clientY-je.top,dt=!he&&Pe>le&&Re>W&&!fe.shiftKey?S.getCursor(tt/Pe,1-nt/Re):"move";R(q,dt),Pt=dt.split("-")[0]}}function _t(fe){b(z)||(ce&&(ae=ke(X.xanchor)),de&&(G=Be(X.yanchor)),X.type==="path"?_e=X.path:(Ee=ce?X.x0:ke(X.x0),Te=de?X.y0:Be(X.y0),He=ce?X.x1:ke(X.x1),te=de?X.y1:Be(X.y1)),Ee<He?(re=Ee,ie="x0",D=He,ge="x1"):(re=He,ie="x1",D=Ee,ge="x0"),!de&&Te<te||de&&Te>te?(K=Te,B="y0",V=te,oe="y1"):(K=te,B="y1",V=Te,oe="y0"),Kt(fe),Ne(ee,X),Ue(q,X,z),At.moveFn=Pt==="move"?Vt:rr,At.altKey=fe.altKey)}function Qt(){b(z)||(R(q),$e(ee),F(q,z,X),c.call("_guiRelayout",z,ne.getUpdateObj()))}function fr(){b(z)||$e(ee)}function Vt(fe,je){if(X.type==="path"){var Pe=function(nt){return nt},Re=Pe,tt=Pe;ce?be("xanchor",X.xanchor=et(ae+fe)):(Re=function(dt){return et(ke(dt)+fe)},De&&De.type==="date"&&(Re=A.encodeDate(Re))),de?be("yanchor",X.yanchor=ht(G+je)):(tt=function(dt){return ht(Be(dt)+je)},Je&&Je.type==="date"&&(tt=A.encodeDate(tt))),be("path",X.path=J(_e,Re,tt))}else ce?be("xanchor",X.xanchor=et(ae+fe)):(be("x0",X.x0=et(Ee+fe)),be("x1",X.x1=et(He+fe))),de?be("yanchor",X.yanchor=ht(G+je)):(be("y0",X.y0=ht(Te+je)),be("y1",X.y1=ht(te+je)));q.attr("d",C(z,X)),Ne(ee,X),g(z,Q,X,Se)}function rr(fe,je){if(he){var Pe=function(gr){return gr},Re=Pe,tt=Pe;ce?be("xanchor",X.xanchor=et(ae+fe)):(Re=function(br){return et(ke(br)+fe)},De&&De.type==="date"&&(Re=A.encodeDate(Re))),de?be("yanchor",X.yanchor=ht(G+je)):(tt=function(br){return ht(Be(br)+je)},Je&&Je.type==="date"&&(tt=A.encodeDate(tt))),be("path",X.path=J(_e,Re,tt))}else if(pe){if(Pt==="resize-over-start-point"){var nt=Ee+fe,dt=de?Te-je:Te+je;be("x0",X.x0=ce?nt:et(nt)),be("y0",X.y0=de?dt:ht(dt))}else if(Pt==="resize-over-end-point"){var St=He+fe,Dt=de?te-je:te+je;be("x1",X.x1=ce?St:et(St)),be("y1",X.y1=de?Dt:ht(Dt))}}else{var at=function(gr){return Pt.indexOf(gr)!==-1},Ct=at("n"),Ht=at("s"),Ut=at("w"),Ar=at("e"),Rr=Ct?K+je:K,$r=Ht?V+je:V,Mr=Ut?re+fe:re,Ir=Ar?D+fe:D;de&&(Ct&&(Rr=K-je),Ht&&($r=V-je)),(!de&&$r-Rr>W||de&&Rr-$r>W)&&(be(B,X[B]=de?Rr:ht(Rr)),be(oe,X[oe]=de?$r:ht($r))),Ir-Mr>le&&(be(ie,X[ie]=ce?Mr:et(Mr)),be(ge,X[ge]=ce?Ir:et(Ir)))}q.attr("d",C(z,X)),Ne(ee,X),g(z,Q,X,Se)}function Ne(fe,je){(ce||de)&&Pe();function Pe(){var Re=je.type!=="path",tt=fe.selectAll(".visual-cue").data([0]),nt=1;tt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":nt}).classed("visual-cue",!0);var dt=ke(ce?je.xanchor:u.midRange(Re?[je.x0,je.x1]:A.extractPathCoords(je.path,M.paramIsX))),St=Be(de?je.yanchor:u.midRange(Re?[je.y0,je.y1]:A.extractPathCoords(je.path,M.paramIsY)));if(dt=A.roundPositionForSharpStrokeRendering(dt,nt),St=A.roundPositionForSharpStrokeRendering(St,nt),ce&&de){var Dt="M"+(dt-1-nt)+","+(St-1-nt)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";tt.attr("d",Dt)}else if(ce){var at="M"+(dt-1-nt)+","+(St-9-nt)+"v18 h2 v-18 Z";tt.attr("d",at)}else{var Ct="M"+(dt-9-nt)+","+(St-1-nt)+"h18 v2 h-18 Z";tt.attr("d",Ct)}}}function $e(fe){fe.selectAll(".visual-cue").remove()}function Ue(fe,je,Pe){var Re=je.xref,tt=je.yref,nt=p.getFromId(Pe,Re),dt=p.getFromId(Pe,tt),St="";Re!=="paper"&&!nt.autorange&&(St+=Re),tt!=="paper"&&!dt.autorange&&(St+=tt),T.setClipUrl(fe,St?"clip"+Pe._fullLayout._uid+St:null,Pe)}}function J(z,q,X){return z.replace(M.segmentRE,function(Q){var ee=0,ne=Q.charAt(0),le=M.paramIsX[ne],W=M.paramIsY[ne],ce=M.numParams[ne],de=Q.substr(1).replace(M.paramRE,function(pe){return ee>=ce||(le[ee]?pe=q(pe):W[ee]&&(pe=X(pe)),ee++),pe});return ne+de})}function H(z,q){if(k(z)){var X=q.node(),Q=+X.getAttribute("data-index");if(Q>=0){if(Q===z._fullLayout._activeShapeIndex){Y(z);return}z._fullLayout._activeShapeIndex=Q,z._fullLayout._deactivateShape=Y,j(z)}}}function Y(z){if(k(z)){var q=z._fullLayout._activeShapeIndex;q>=0&&(w(z),delete z._fullLayout._activeShapeIndex,j(z))}}function Z(z){if(k(z)){w(z);var q=z._fullLayout._activeShapeIndex,X=(z.layout||{}).shapes||[];if(q<X.length){for(var Q=[],ee=0;ee<X.length;ee++)ee!==q&&Q.push(X[ee]);return delete z._fullLayout._activeShapeIndex,c.call("_guiRelayout",z,{shapes:Q})}}}}}),Es=i({"src/components/modebar/buttons.js"(U,$){var h=mn(),c=Xi(),u=pa(),p=pu(),v=_a().eraseActiveShape,m=kr(),g=m._,w=$.exports={};w.toImage={name:"toImage",title:function(P){var J=P._context.toImageButtonOptions||{},H=J.format||"png";return H==="png"?g(P,"Download plot as a png"):g(P,"Download plot")},icon:p.camera,click:function(P){var J=P._context.toImageButtonOptions,H={format:J.format||"png"};m.notifier(g(P,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(Y){Y in J&&(H[Y]=J[Y])}),h.call("downloadImage",P,H).then(function(Y){m.notifier(g(P,"Snapshot succeeded")+" - "+Y,"long")}).catch(function(){m.notifier(g(P,"Sorry, there was a problem downloading your snapshot!"),"long")})}},w.sendDataToCloud={name:"sendDataToCloud",title:function(P){return g(P,"Edit in Chart Studio")},icon:p.disk,click:function(P){c.sendDataToCloud(P)}},w.editInChartStudio={name:"editInChartStudio",title:function(P){return g(P,"Edit in Chart Studio")},icon:p.pencil,click:function(P){c.sendDataToCloud(P)}},w.zoom2d={name:"zoom2d",_cat:"zoom",title:function(P){return g(P,"Zoom")},attr:"dragmode",val:"zoom",icon:p.zoombox,click:l},w.pan2d={name:"pan2d",_cat:"pan",title:function(P){return g(P,"Pan")},attr:"dragmode",val:"pan",icon:p.pan,click:l},w.select2d={name:"select2d",_cat:"select",title:function(P){return g(P,"Box Select")},attr:"dragmode",val:"select",icon:p.selectbox,click:l},w.lasso2d={name:"lasso2d",_cat:"lasso",title:function(P){return g(P,"Lasso Select")},attr:"dragmode",val:"lasso",icon:p.lasso,click:l},w.drawclosedpath={name:"drawclosedpath",title:function(P){return g(P,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:p.drawclosedpath,click:l},w.drawopenpath={name:"drawopenpath",title:function(P){return g(P,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:p.drawopenpath,click:l},w.drawline={name:"drawline",title:function(P){return g(P,"Draw line")},attr:"dragmode",val:"drawline",icon:p.drawline,click:l},w.drawrect={name:"drawrect",title:function(P){return g(P,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:p.drawrect,click:l},w.drawcircle={name:"drawcircle",title:function(P){return g(P,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:p.drawcircle,click:l},w.eraseshape={name:"eraseshape",title:function(P){return g(P,"Erase active shape")},icon:p.eraseshape,click:v},w.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(P){return g(P,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:l},w.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(P){return g(P,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:l},w.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(P){return g(P,"Autoscale")},attr:"zoom",val:"auto",icon:p.autoscale,click:l},w.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(P){return g(P,"Reset axes")},attr:"zoom",val:"reset",icon:p.home,click:l},w.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(P){return g(P,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:p.tooltip_basic,gravity:"ne",click:l},w.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(P){return g(P,"Compare data on hover")},attr:"hovermode",val:function(P){return P._fullLayout._isHoriz?"y":"x"},icon:p.tooltip_compare,gravity:"ne",click:l};function l(P,J){var H=J.currentTarget,Y=H.getAttribute("data-attr"),Z=H.getAttribute("data-val")||!0,z=P._fullLayout,q={},X=u.list(P,null,!0),Q=z._cartesianSpikesEnabled,ee,ne;if(Y==="zoom"){var le=Z==="in"?.5:2,W=(1+le)/2,ce=(1-le)/2,de;for(ne=0;ne<X.length;ne++)if(ee=X[ne],!ee.fixedrange)if(de=ee._name,Z==="auto")q[de+".autorange"]=!0;else if(Z==="reset")ee._rangeInitial0===void 0&&ee._rangeInitial1===void 0?q[de+".autorange"]=!0:ee._rangeInitial0===void 0?(q[de+".autorange"]=ee._autorangeInitial,q[de+".range"]=[null,ee._rangeInitial1]):ee._rangeInitial1===void 0?(q[de+".range"]=[ee._rangeInitial0,null],q[de+".autorange"]=ee._autorangeInitial):q[de+".range"]=[ee._rangeInitial0,ee._rangeInitial1],ee._showSpikeInitial!==void 0&&(q[de+".showspikes"]=ee._showSpikeInitial,Q==="on"&&!ee._showSpikeInitial&&(Q="off"));else{var pe=[ee.r2l(ee.range[0]),ee.r2l(ee.range[1])],he=[W*pe[0]+ce*pe[1],W*pe[1]+ce*pe[0]];q[de+".range[0]"]=ee.l2r(he[0]),q[de+".range[1]"]=ee.l2r(he[1])}}else Y==="hovermode"&&(Z==="x"||Z==="y")&&(Z=z._isHoriz?"y":"x",H.setAttribute("data-val",Z)),q[Y]=Z;z._cartesianSpikesEnabled=Q,h.call("_guiRelayout",P,q)}w.zoom3d={name:"zoom3d",_cat:"zoom",title:function(P){return g(P,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:p.zoombox,click:T},w.pan3d={name:"pan3d",_cat:"pan",title:function(P){return g(P,"Pan")},attr:"scene.dragmode",val:"pan",icon:p.pan,click:T},w.orbitRotation={name:"orbitRotation",title:function(P){return g(P,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:p["3d_rotate"],click:T},w.tableRotation={name:"tableRotation",title:function(P){return g(P,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:p["z-axis"],click:T};function T(P,J){for(var H=J.currentTarget,Y=H.getAttribute("data-attr"),Z=H.getAttribute("data-val")||!0,z=P._fullLayout._subplots.gl3d||[],q={},X=Y.split("."),Q=0;Q<z.length;Q++)q[z[Q]+"."+X[1]]=Z;var ee=Z==="pan"?Z:"zoom";q.dragmode=ee,h.call("_guiRelayout",P,q)}w.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(P){return g(P,"Reset camera to default")},attr:"resetDefault",icon:p.home,click:y},w.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(P){return g(P,"Reset camera to last save")},attr:"resetLastSave",icon:p.movie,click:y};function y(P,J){for(var H=J.currentTarget,Y=H.getAttribute("data-attr"),Z=Y==="resetLastSave",z=Y==="resetDefault",q=P._fullLayout,X=q._subplots.gl3d||[],Q={},ee=0;ee<X.length;ee++){var ne=X[ee],le=ne+".camera",W=ne+".aspectratio",ce=ne+".aspectmode",de=q[ne]._scene,pe;Z?(Q[le+".up"]=de.viewInitial.up,Q[le+".eye"]=de.viewInitial.eye,Q[le+".center"]=de.viewInitial.center,pe=!0):z&&(Q[le+".up"]=null,Q[le+".eye"]=null,Q[le+".center"]=null,pe=!0),pe&&(Q[W+".x"]=de.viewInitial.aspectratio.x,Q[W+".y"]=de.viewInitial.aspectratio.y,Q[W+".z"]=de.viewInitial.aspectratio.z,Q[ce]=de.viewInitial.aspectmode)}h.call("_guiRelayout",P,Q)}w.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(P){return g(P,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:R};function S(P,J){var H=J.currentTarget,Y=H._previousVal,Z=P._fullLayout,z=Z._subplots.gl3d||[],q=["xaxis","yaxis","zaxis"],X={},Q={};if(Y)Q=Y,H._previousVal=null;else{for(var ee=0;ee<z.length;ee++){var ne=z[ee],le=Z[ne],W=ne+".hovermode";X[W]=le.hovermode,Q[W]=!1;for(var ce=0;ce<3;ce++){var de=q[ce],pe=ne+"."+de+".showspikes";Q[pe]=!1,X[pe]=le[de].showspikes}}H._previousVal=X}return Q}function R(P,J){var H=S(P,J);h.call("_guiRelayout",P,H)}w.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(P){return g(P,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:M},w.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(P){return g(P,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:M},w.resetGeo={name:"resetGeo",_cat:"reset",title:function(P){return g(P,"Reset")},attr:"reset",val:null,icon:p.autoscale,click:M},w.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(P){return g(P,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:C};function M(P,J){for(var H=J.currentTarget,Y=H.getAttribute("data-attr"),Z=H.getAttribute("data-val")||!0,z=P._fullLayout,q=z._subplots.geo||[],X=0;X<q.length;X++){var Q=q[X],ee=z[Q];if(Y==="zoom"){var ne=ee.projection.scale,le=Z==="in"?2*ne:.5*ne;h.call("_guiRelayout",P,Q+".projection.scale",le)}}Y==="reset"&&F(P,"geo")}w.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(P){return g(P,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:p.tooltip_basic,gravity:"ne",click:C};function A(P){var J=P._fullLayout;return J.hovermode?!1:J._has("cartesian")?J._isHoriz?"y":"x":"closest"}function C(P){var J=A(P);h.call("_guiRelayout",P,"hovermode",J)}w.resetViewSankey={name:"resetSankeyGroup",title:function(P){return g(P,"Reset view")},icon:p.home,click:function(P){for(var J={"node.groups":[],"node.x":[],"node.y":[]},H=0;H<P._fullData.length;H++){var Y=P._fullData[H]._viewInitial;J["node.groups"].push(Y.node.groups.slice()),J["node.x"].push(Y.node.x.slice()),J["node.y"].push(Y.node.y.slice())}h.call("restyle",P,J)}},w.toggleHover={name:"toggleHover",title:function(P){return g(P,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:function(P,J){var H=S(P,J);H.hovermode=A(P),h.call("_guiRelayout",P,H)}},w.resetViews={name:"resetViews",title:function(P){return g(P,"Reset views")},icon:p.home,click:function(P,J){var H=J.currentTarget;H.setAttribute("data-attr","zoom"),H.setAttribute("data-val","reset"),l(P,J),H.setAttribute("data-attr","resetLastSave"),y(P,J),F(P,"geo"),F(P,"mapbox"),F(P,"map")}},w.toggleSpikelines={name:"toggleSpikelines",title:function(P){return g(P,"Toggle Spike Lines")},icon:p.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(P){var J=P._fullLayout,H=J._cartesianSpikesEnabled;J._cartesianSpikesEnabled=H==="on"?"off":"on",h.call("_guiRelayout",P,j(P))}};function j(P){for(var J=P._fullLayout,H=J._cartesianSpikesEnabled==="on",Y=u.list(P,null,!0),Z={},z=0;z<Y.length;z++){var q=Y[z];Z[q._name+".showspikes"]=H?!0:q._showSpikeInitial}return Z}w.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(P){return g(P,"Reset view")},attr:"reset",icon:p.home,click:function(P){F(P,"mapbox")}},w.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(P){return g(P,"Reset view")},attr:"reset",icon:p.home,click:function(P){F(P,"map")}},w.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(P){return g(P,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:b},w.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(P){return g(P,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:k},w.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(P){return g(P,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:b},w.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(P){return g(P,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:k};function b(P,J){E(P,J,"mapbox")}function k(P,J){E(P,J,"map")}function E(P,J,H){for(var Y=J.currentTarget,Z=Y.getAttribute("data-val"),z=P._fullLayout,q=z._subplots[H]||[],X=1.05,Q={},ee=0;ee<q.length;ee++){var ne=q[ee],le=z[ne].zoom,W=Z==="in"?X*le:le/X;Q[ne+".zoom"]=W}h.call("_guiRelayout",P,Q)}function F(P,J){for(var H=P._fullLayout,Y=H._subplots[J]||[],Z={},z=0;z<Y.length;z++)for(var q=Y[z],X=H[q]._subplot,Q=X.viewInitial,ee=Object.keys(Q),ne=0;ne<ee.length;ne++){var le=ee[ne];Z[q+"."+le]=Q[le]}h.call("_guiRelayout",P,Z)}}}),ro=i({"src/components/modebar/constants.js"(U,$){var h=Es(),c=Object.keys(h),u=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],p=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(u),v=[],m=function(g){if(p.indexOf(g._cat||g.name)===-1){var w=g.name,l=(g._cat||g.name).toLowerCase();v.indexOf(w)===-1&&v.push(w),v.indexOf(l)===-1&&v.push(l)}};c.forEach(function(g){m(h[g])}),v.sort(),$.exports={DRAW_MODES:u,backButtons:p,foreButtons:v}}}),mo=i({"src/components/modebar/attributes.js"(U,$){ro(),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}}}),ul=i({"src/components/modebar/defaults.js"(U,$){var h=kr(),c=pt(),u=Si(),p=mo();$.exports=function(m,g){var w=m.modebar||{},l=u.newContainer(g,"modebar");function T(S,R){return h.coerce(w,l,p,S,R)}T("orientation"),T("bgcolor",c.addOpacity(g.paper_bgcolor,.5));var y=c.contrast(c.rgb(g.modebar.bgcolor));T("color",c.addOpacity(y,.3)),T("activecolor",c.addOpacity(y,.7)),T("uirevision",g.uirevision),T("add"),T("remove")}}}),dl=i({"src/components/modebar/modebar.js"(U,$){var h=d(),c=xe(),u=kr(),p=pu(),v=a().version,m=new DOMParser;function g(y){this.container=y.container,this.element=document.createElement("div"),this.update(y.graphInfo,y.buttons),this.container.appendChild(this.element)}var w=g.prototype;w.update=function(y,S){this.graphInfo=y;var R=this.graphInfo._context,M=this.graphInfo._fullLayout,A="modebar-"+M._uid;this.element.setAttribute("id",A),this._uid=A,this.element.className="modebar",R.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),M.modebar.orientation==="v"&&(this.element.className+=" vertical",S=S.reverse());var C=M.modebar,j="#"+A+" .modebar-group";document.querySelectorAll(j).forEach(function(P){P.style.backgroundColor=C.bgcolor});var b=!this.hasButtons(S),k=this.hasLogo!==R.displaylogo,E=this.locale!==R.locale;if(this.locale=R.locale,(b||k||E)&&(this.removeAllButtons(),this.updateButtons(S),R.watermark||R.displaylogo)){var F=this.getLogo();R.watermark&&(F.className=F.className+" watermark"),M.modebar.orientation==="v"?this.element.insertBefore(F,this.element.childNodes[0]):this.element.appendChild(F),this.hasLogo=!0}this.updateActiveButton(),u.setStyleOnHover("#"+A+" .modebar-btn",".active",".icon path","fill: "+C.activecolor,"fill: "+C.color,this.element)},w.updateButtons=function(y){var S=this;this.buttons=y,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(R){var M=S.createGroup();R.forEach(function(A){var C=A.name;if(!C)throw new Error("must provide button 'name' in button config");if(S.buttonsNames.indexOf(C)!==-1)throw new Error("button name '"+C+"' is taken");S.buttonsNames.push(C);var j=S.createButton(A);S.buttonElements.push(j),M.appendChild(j)}),S.element.appendChild(M)})},w.createGroup=function(){var y=document.createElement("div");y.className="modebar-group";var S=this.graphInfo._fullLayout.modebar;return y.style.backgroundColor=S.bgcolor,y},w.createButton=function(y){var S=this,R=document.createElement("a");R.setAttribute("rel","tooltip"),R.className="modebar-btn";var M=y.title;M===void 0?M=y.name:typeof M=="function"&&(M=M(this.graphInfo)),(M||M===0)&&R.setAttribute("data-title",M),y.attr!==void 0&&R.setAttribute("data-attr",y.attr);var A=y.val;A!==void 0&&(typeof A=="function"&&(A=A(this.graphInfo)),R.setAttribute("data-val",A));var C=y.click;if(typeof C!="function")throw new Error("must provide button 'click' function in button config");R.addEventListener("click",function(b){y.click(S.graphInfo,b),S.updateActiveButton(b.currentTarget)}),R.setAttribute("data-toggle",y.toggle||!1),y.toggle&&h.select(R).classed("active",!0);var j=y.icon;return typeof j=="function"?R.appendChild(j()):R.appendChild(this.createIcon(j||p.question)),R.setAttribute("data-gravity",y.gravity||"n"),R},w.createIcon=function(y){var S=c(y.height)?Number(y.height):y.ascent-y.descent,R="http://www.w3.org/2000/svg",M;if(y.path){M=document.createElementNS(R,"svg"),M.setAttribute("viewBox",[0,0,y.width,S].join(" ")),M.setAttribute("class","icon");var A=document.createElementNS(R,"path");A.setAttribute("d",y.path),y.transform?A.setAttribute("transform",y.transform):y.ascent!==void 0&&A.setAttribute("transform","matrix(1 0 0 -1 0 "+y.ascent+")"),M.appendChild(A)}if(y.svg){var C=m.parseFromString(y.svg,"application/xml");M=C.childNodes[0]}return M.setAttribute("height","1em"),M.setAttribute("width","1em"),M},w.updateActiveButton=function(y){var S=this.graphInfo._fullLayout,R=y!==void 0?y.getAttribute("data-attr"):null;this.buttonElements.forEach(function(M){var A=M.getAttribute("data-val")||!0,C=M.getAttribute("data-attr"),j=M.getAttribute("data-toggle")==="true",b=h.select(M),k=function(P,J){var H=S.modebar,Y=P.querySelector(".icon path");Y&&(J||P.matches(":hover")?Y.style.fill=H.activecolor:Y.style.fill=H.color)};if(j){if(C===R){var E=!b.classed("active");b.classed("active",E),k(M,E)}}else{var F=C===null?C:u.nestedProperty(S,C).get();b.classed("active",F===A),k(M,F===A)}})},w.hasButtons=function(y){var S=this.buttons;if(!S||y.length!==S.length)return!1;for(var R=0;R<y.length;++R){if(y[R].length!==S[R].length)return!1;for(var M=0;M<y[R].length;M++)if(y[R][M].name!==S[R][M].name)return!1}return!0};function l(y){return y+" (v"+v+")"}w.getLogo=function(){var y=this.createGroup(),S=document.createElement("a");return S.href="https://plotly.com/",S.target="_blank",S.setAttribute("data-title",l(u._(this.graphInfo,"Produced with Plotly.js"))),S.className="modebar-btn plotlyjsicon modebar-btn--logo",S.appendChild(this.createIcon(p.newplotlylogo)),y.appendChild(S),y},w.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},w.destroy=function(){u.removeElement(this.container.querySelector(".modebar"))};function T(y,S){var R=y._fullLayout,M=new g({graphInfo:y,container:R._modebardiv.node(),buttons:S});return R._privateplot&&h.select(M.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),M}$.exports=T}}),Tc=i({"src/components/modebar/manage.js"(U,$){var h=pa(),c=Ia(),u=mn(),p=ts().isUnifiedHover,v=dl(),m=Es(),g=ro().DRAW_MODES,w=kr().extendDeep;$.exports=function(C){var j=C._fullLayout,b=C._context,k=j._modeBar;if(!b.displayModeBar&&!b.watermark){k&&(k.destroy(),delete j._modeBar);return}if(!Array.isArray(b.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(b.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var E=b.modeBarButtons,F;Array.isArray(E)&&E.length?F=M(E):!b.displayModeBar&&b.watermark?F=[]:F=l(C),k?k.update(C,F):j._modeBar=v(C,F)};function l(A){var C=A._fullLayout,j=A._fullData,b=A._context;function k(D,B){if(typeof B=="string"){if(B.toLowerCase()===D.toLowerCase())return!0}else{var oe=B.name,ie=B._cat||B.name;if(oe===D||ie===D.toLowerCase())return!0}return!1}var E=C.modebar.add;typeof E=="string"&&(E=[E]);var F=C.modebar.remove;typeof F=="string"&&(F=[F]);var P=b.modeBarButtonsToAdd.concat(E.filter(function(D){for(var B=0;B<b.modeBarButtonsToRemove.length;B++)if(k(D,b.modeBarButtonsToRemove[B]))return!1;return!0})),J=b.modeBarButtonsToRemove.concat(F.filter(function(D){for(var B=0;B<b.modeBarButtonsToAdd.length;B++)if(k(D,b.modeBarButtonsToAdd[B]))return!1;return!0})),H=C._has("cartesian"),Y=C._has("gl3d"),Z=C._has("geo"),z=C._has("pie"),q=C._has("funnelarea"),X=C._has("ternary"),Q=C._has("mapbox"),ee=C._has("map"),ne=C._has("polar"),le=C._has("smith"),W=C._has("sankey"),ce=T(C),de=p(C.hovermode),pe=[];function he(D){if(D.length){for(var B=[],oe=0;oe<D.length;oe++){for(var ie=D[oe],ge=m[ie],_e=ge.name.toLowerCase(),Se=(ge._cat||ge.name).toLowerCase(),De=!1,Ge=0;Ge<J.length;Ge++){var Je=J[Ge].toLowerCase();if(Je===_e||Je===Se){De=!0;break}}De||B.push(m[ie])}pe.push(B)}}var be=["toImage"];b.showEditInChartStudio?be.push("editInChartStudio"):b.showSendToCloud&&be.push("sendDataToCloud"),he(be);var Ee=[],Te=[],He=[],te=[];(H||z||q||X)+Z+Y+Q+ee+ne+le>1?(Te=["toggleHover"],He=["resetViews"]):Z?(Ee=["zoomInGeo","zoomOutGeo"],Te=["hoverClosestGeo"],He=["resetGeo"]):Y?(Te=["hoverClosest3d"],He=["resetCameraDefault3d","resetCameraLastSave3d"]):Q?(Ee=["zoomInMapbox","zoomOutMapbox"],Te=["toggleHover"],He=["resetViewMapbox"]):ee?(Ee=["zoomInMap","zoomOutMap"],Te=["toggleHover"],He=["resetViewMap"]):z?Te=["hoverClosestPie"]:W?(Te=["hoverClosestCartesian","hoverCompareCartesian"],He=["resetViewSankey"]):Te=["toggleHover"],H&&Te.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(S(j)||de)&&(Te=[]),H&&!ce&&(Ee=["zoomIn2d","zoomOut2d","autoScale2d"],He[0]!=="resetViews"&&(He=["resetScale2d"])),Y?te=["zoom3d","pan3d","orbitRotation","tableRotation"]:H&&!ce||X?te=["zoom2d","pan2d"]:Q||ee||Z?te=["pan2d"]:ne&&(te=["zoom2d"]),y(j)&&te.push("select2d","lasso2d");var ae=[],G=function(D){ae.indexOf(D)===-1&&Te.indexOf(D)!==-1&&ae.push(D)};if(Array.isArray(P)){for(var K=[],V=0;V<P.length;V++){var re=P[V];typeof re=="string"?(re=re.toLowerCase(),g.indexOf(re)!==-1?(C._has("mapbox")||C._has("map")||C._has("cartesian"))&&te.push(re):re==="togglespikelines"?G("toggleSpikelines"):re==="togglehover"?G("toggleHover"):re==="hovercompare"?G("hoverCompareCartesian"):re==="hoverclosest"?(G("hoverClosestCartesian"),G("hoverClosestGeo"),G("hoverClosest3d"),G("hoverClosestPie")):re==="v1hovermode"&&(G("hoverClosestCartesian"),G("hoverCompareCartesian"),G("hoverClosestGeo"),G("hoverClosest3d"),G("hoverClosestPie"))):K.push(re)}P=K}return he(te),he(Ee.concat(He)),he(ae),R(pe,P)}function T(A){for(var C=h.list({_fullLayout:A},null,!0),j=0;j<C.length;j++)if(!C[j].fixedrange)return!1;return!0}function y(A){for(var C=!1,j=0;j<A.length&&!C;j++){var b=A[j];!b._module||!b._module.selectPoints||(u.traceIs(b,"scatter-like")?(c.hasMarkers(b)||c.hasText(b))&&(C=!0):u.traceIs(b,"box-violin")?(b.boxpoints==="all"||b.points==="all")&&(C=!0):C=!0)}return C}function S(A){for(var C=0;C<A.length;C++)if(!u.traceIs(A[C],"noHover"))return!1;return!0}function R(A,C){if(C.length)if(Array.isArray(C[0]))for(var j=0;j<C.length;j++)A.push(C[j]);else A.push(C);return A}function M(A){for(var C=w([],A),j=0;j<C.length;j++)for(var b=C[j],k=0;k<b.length;k++){var E=b[k];if(typeof E=="string")if(m[E]!==void 0)C[j][k]=m[E];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return C}}}),Bl=i({"src/components/modebar/index.js"(U,$){$.exports={moduleType:"component",name:"modebar",layoutAttributes:mo(),supplyLayoutDefaults:ul(),manage:Tc()}}}),Hl=i({"src/plots/cartesian/scale_zoom.js"(U,$){var h=La().FROM_BL;$.exports=function(u,p,v){v===void 0&&(v=h[u.constraintoward||"center"]);var m=[u.r2l(u.range[0]),u.r2l(u.range[1])],g=m[0]+(m[1]-m[0])*v;u.range=u._input.range=[u.l2r(g+(m[0]-g)*p),u.l2r(g+(m[1]-g)*p)],u.setScale()}}}),Vo=i({"src/plots/cartesian/constraints.js"(U){var $=kr(),h=jo(),c=pa().id2name,u=es(),p=Hl(),v=_c(),m=Ce().ALMOST_EQUAL,g=La().FROM_BL;U.handleDefaults=function(A,C,j){var b=j.axIds,k=j.axHasImage,E=C._axisConstraintGroups=[],F=C._axisMatchGroups=[],P,J,H,Y,Z,z,q,X;for(P=0;P<b.length;P++)Y=c(b[P]),Z=A[Y],z=C[Y],w(Z,z,{axIds:b,layoutOut:C,hasImage:k[Y]});function Q(be,Ee){for(P=0;P<be.length;P++){J=be[P];for(H in J)C[c(H)][Ee]=J}}for(Q(F,"_matchGroup"),P=0;P<E.length;P++){J=E[P];for(H in J)if(z=C[c(H)],z.fixedrange){for(var ee in J){var ne=c(ee);(A[ne]||{}).fixedrange===!1&&$.warn("fixedrange was specified as false for axis "+ne+" but was overridden because another axis in its constraint group has fixedrange true"),C[ne].fixedrange=!0}break}}for(P=0;P<E.length;){J=E[P];for(H in J){z=C[c(H)],z._matchGroup&&Object.keys(z._matchGroup).length===Object.keys(J).length&&(E.splice(P,1),P--);break}P++}Q(E,"_constraintGroup");var le=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],W=!1,ce=!1;function de(){X=z[q],q==="rangebreaks"&&(ce=z._hasDayOfWeekBreaks)}for(P=0;P<F.length;P++){J=F[P];for(var pe=0;pe<le.length;pe++){q=le[pe],X=null;var he;for(H in J)if(Y=c(H),Z=A[Y],z=C[Y],q in z){if(!z.matches&&(he=z,q in Z)){de();break}X===null&&q in Z&&de()}if(q==="range"&&X&&Z.range&&Z.range.length===2&&Z.range[0]!==null&&Z.range[1]!==null&&(W=!0),q==="autorange"&&X===null&&W&&(X=!1),X===null&&q in he&&(X=he[q]),X!==null)for(H in J)z=C[c(H)],z[q]=q==="range"?X.slice():X,q==="rangebreaks"&&(z._hasDayOfWeekBreaks=ce,v(z,C))}}};function w(A,C,j){var b=j.axIds,k=j.layoutOut,E=j.hasImage,F=k._axisConstraintGroups,P=k._axisMatchGroups,J=C._id,H=J.charAt(0),Y=((k._splomAxes||{})[H]||{})[J]||{},Z=C._id,z=Z.charAt(0)==="x";C._matchGroup=null,C._constraintGroup=null;function q(te,ae){return $.coerce(A,C,u,te,ae)}q("constrain",E?"domain":"range"),$.coerce(A,C,{constraintoward:{valType:"enumerated",values:z?["left","center","right"]:["bottom","middle","top"],dflt:z?"center":"middle"}},"constraintoward");var X=C.type,Q,ee,ne=[];for(Q=0;Q<b.length;Q++)if(ee=b[Q],ee!==Z){var le=k[c(ee)];le.type===X&&ne.push(ee)}var W=T(F,Z);if(W){var ce=[];for(Q=0;Q<ne.length;Q++)ee=ne[Q],W[ee]||ce.push(ee);ne=ce}var de=ne.length,pe,he;de&&(A.matches||Y.matches)&&(pe=$.coerce(A,C,{matches:{valType:"enumerated",values:ne,dflt:ne.indexOf(Y.matches)!==-1?Y.matches:void 0}},"matches"));var be=E&&!z?C.anchor:void 0;if(de&&!pe&&(A.scaleanchor||be)&&(he=$.coerce(A,C,{scaleanchor:{valType:"enumerated",values:ne.concat([!1])}},"scaleanchor",be)),pe){C._matchGroup=y(P,Z,pe,1);var Ee=k[c(pe)],Te=l(k,C)/l(k,Ee);z!==(pe.charAt(0)==="x")&&(Te=(z?"x":"y")+Te),y(F,Z,pe,Te)}else A.matches&&b.indexOf(A.matches)!==-1&&$.warn("ignored "+C._name+'.matches: "'+A.matches+'" to avoid an infinite loop');if(he){var He=q("scaleratio");He||(He=C.scaleratio=1),y(F,Z,he,He)}else A.scaleanchor&&b.indexOf(A.scaleanchor)!==-1&&$.warn("ignored "+C._name+'.scaleanchor: "'+A.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function l(A,C){var j=C.domain;return j||(j=A[c(C.overlaying)].domain),j[1]-j[0]}function T(A,C){for(var j=0;j<A.length;j++)if(A[j][C])return A[j];return null}function y(A,C,j,b){var k,E,F,P,J,H=T(A,C);H===null?(H={},H[C]=1,J=A.length,A.push(H)):J=A.indexOf(H);var Y=Object.keys(H);for(k=0;k<A.length;k++)if(F=A[k],k!==J&&F[j]){var Z=F[j];for(E=0;E<Y.length;E++)P=Y[E],F[P]=S(Z,S(b,H[P]));A.splice(J,1);return}if(b!==1)for(E=0;E<Y.length;E++){var z=Y[E];H[z]=S(b,H[z])}H[j]=1}function S(A,C){var j="",b="",k,E;typeof A=="string"&&(j=A.match(/^[xy]*/)[0],k=j.length,A=+A.substr(k)),typeof C=="string"&&(b=C.match(/^[xy]*/)[0],E=b.length,C=+C.substr(E));var F=A*C;return!k&&!E?F:!k||!E||j.charAt(0)===b.charAt(0)?j+b+A*C:k===E?F:(k>E?j.substr(E):b.substr(k))+F}function R(A,C){for(var j=C._size,b=j.h/j.w,k={},E=Object.keys(A),F=0;F<E.length;F++){var P=E[F],J=A[P];if(typeof J=="string"){var H=J.match(/^[xy]*/)[0],Y=H.length;J=+J.substr(Y);for(var Z=H.charAt(0)==="y"?b:1/b,z=0;z<Y;z++)J*=Z}k[P]=J}return k}U.enforce=function(C){var j=C._fullLayout,b=j._axisConstraintGroups||[],k,E,F,P,J,H,Y,Z;for(k=0;k<b.length;k++){F=R(b[k],j);var z=Object.keys(F),q=1/0,X=0,Q=1/0,ee={},ne={},le=!1;for(E=0;E<z.length;E++)P=z[E],ne[P]=J=j[c(P)],J._inputDomain?J.domain=J._inputDomain.slice():J._inputDomain=J.domain.slice(),J._inputRange||(J._inputRange=J.range.slice()),J.setScale(),ee[P]=H=Math.abs(J._m)/F[P],q=Math.min(q,H),(J.constrain==="domain"||!J._constraintShrinkable)&&(Q=Math.min(Q,H)),delete J._constraintShrinkable,X=Math.max(X,H),J.constrain==="domain"&&(le=!0);if(!(q>m*X&&!le)){for(E=0;E<z.length;E++)if(P=z[E],H=ee[P],J=ne[P],Y=J.constrain,H!==Q||Y==="domain")if(Z=H/Q,Y==="range")p(J,Z);else{var W=J._inputDomain,ce=(J.domain[1]-J.domain[0])/(W[1]-W[0]),de=(J.r2l(J.range[1])-J.r2l(J.range[0]))/(J.r2l(J._inputRange[1])-J.r2l(J._inputRange[0]));if(Z/=ce,Z*de<1){J.domain=J._input.domain=W.slice(),p(J,Z);continue}if(de<1&&(J.range=J._input.range=J._inputRange.slice(),Z*=de),J.autorange){var pe=J.r2l(J.range[0]),he=J.r2l(J.range[1]),be=(pe+he)/2,Ee=be,Te=be,He=Math.abs(he-be),te=be-He*Z*1.0001,ae=be+He*Z*1.0001,G=h.makePadFn(j,J,0),K=h.makePadFn(j,J,1);M(J,Z);var V=Math.abs(J._m),re=h.concatExtremes(C,J),D=re.min,B=re.max,oe,ie;for(ie=0;ie<D.length;ie++)oe=D[ie].val-G(D[ie])/V,oe>te&&oe<Ee&&(Ee=oe);for(ie=0;ie<B.length;ie++)oe=B[ie].val+K(B[ie])/V,oe<ae&&oe>Te&&(Te=oe);var ge=(Te-Ee)/(2*He);Z/=ge,Ee=J.l2r(Ee),Te=J.l2r(Te),J.range=J._input.range=pe<he?[Ee,Te]:[Te,Ee]}M(J,Z)}}}},U.getAxisGroup=function(C,j){for(var b=C._axisMatchGroups,k=0;k<b.length;k++){var E=b[k];if(E[j])return"g"+k}return j},U.clean=function(C,j){if(j._inputDomain){for(var b=!1,k=j._id,E=C._fullLayout._axisConstraintGroups,F=0;F<E.length;F++)if(E[F][k]){b=!0;break}(!b||j.constrain!=="domain")&&(j._input.domain=j.domain=j._inputDomain,delete j._inputDomain)}};function M(A,C){var j=A._inputDomain,b=g[A.constraintoward],k=j[0]+(j[1]-j[0])*b;A.domain=A._input.domain=[k+(j[0]-k)/C,k+(j[1]-k)/C],A.setScale()}}}),fd=i({"src/plot_api/subroutines.js"(U){var $=d(),h=mn(),c=Xi(),u=kr(),p=Ra(),v=hu(),m=pt(),g=di(),w=ol(),l=Bl(),T=ji(),y=La(),S=Vo(),R=S.enforce,M=S.clean,A=jo().doAutoRange,C="start",j="middle",b="end",k=ha().zindexSeparator;U.layoutStyles=function(W){return u.syncOrAsync([c.doAutoMargin,F],W)};function E(W,ce,de){for(var pe=0;pe<de.length;pe++){var he=de[pe][0],be=de[pe][1];if(!(he[0]>=W[1]||he[1]<=W[0])&&be[0]<ce[1]&&be[1]>ce[0])return!0}return!1}function F(W){var ce=W._fullLayout,de=ce._size,pe=de.p,he=T.list(W,"",!0),be,Ee,Te,He,te,ae;if(ce._paperdiv.style({width:W._context.responsive&&ce.autosize&&!W._context._hasZeroWidth&&!W.layout.width?"100%":ce.width+"px",height:W._context.responsive&&ce.autosize&&!W._context._hasZeroHeight&&!W.layout.height?"100%":ce.height+"px"}).selectAll(".main-svg").call(g.setSize,ce.width,ce.height),W._context.setBackground(W,ce.paper_bgcolor),U.drawMainTitle(W),l.manage(W),!ce._has("cartesian"))return c.previousPromises(W);function G(Ue,fe,je){var Pe=Ue._lw/2;if(Ue._id.charAt(0)==="x"){if(fe){if(je==="top")return fe._offset-pe-Pe}else return de.t+de.h*(1-(Ue.position||0))+Pe%1;return fe._offset+fe._length+pe+Pe}if(fe){if(je==="right")return fe._offset+fe._length+pe+Pe}else return de.l+de.w*(Ue.position||0)+Pe%1;return fe._offset-pe-Pe}for(be=0;be<he.length;be++){He=he[be];var K=He._anchorAxis;He._linepositions={},He._lw=g.crispRound(W,He.linewidth,1),He._mainLinePosition=G(He,K,He.side),He._mainMirrorPosition=He.mirror&&K?G(He,K,y.OPPOSITE_SIDE[He.side]):null}var V=[],re=[],D=[],B=m.opacity(ce.paper_bgcolor)===1&&m.opacity(ce.plot_bgcolor)===1&&ce.paper_bgcolor===ce.plot_bgcolor;for(Ee in ce._plots)if(Te=ce._plots[Ee],Te.mainplot)Te.bg&&Te.bg.remove(),Te.bg=void 0;else{var oe=Te.xaxis.domain,ie=Te.yaxis.domain,ge=Te.plotgroup;if(E(oe,ie,D)&&Ee.indexOf(k)===-1){var _e=ge.node(),Se=Te.bg=u.ensureSingle(ge,"rect","bg");_e.insertBefore(Se.node(),_e.childNodes[0]),re.push(Ee)}else ge.select("rect.bg").remove(),D.push([oe,ie]),B||(V.push(Ee),re.push(Ee))}var De=ce._bgLayer.selectAll(".bg").data(V);for(De.enter().append("rect").classed("bg",!0),De.exit().remove(),De.each(function(Ue){ce._plots[Ue].bg=$.select(this)}),be=0;be<re.length;be++)Te=ce._plots[re[be]],te=Te.xaxis,ae=Te.yaxis,Te.bg&&te._offset!==void 0&&ae._offset!==void 0&&Te.bg.call(g.setRect,te._offset-pe,ae._offset-pe,te._length+2*pe,ae._length+2*pe).call(m.fill,ce.plot_bgcolor).style("stroke-width",0);if(!ce._hasOnlyLargeSploms)for(Ee in ce._plots){Te=ce._plots[Ee],te=Te.xaxis,ae=Te.yaxis;var Ge=Te.clipId="clip"+ce._uid+Ee+"plot",Je=u.ensureSingleById(ce._clips,"clipPath",Ge,function(Ue){Ue.classed("plotclip",!0).append("rect")});Te.clipRect=Je.select("rect").attr({width:te._length,height:ae._length}),g.setTranslate(Te.plot,te._offset,ae._offset);var yt,ut;Te._hasClipOnAxisFalse?(yt=null,ut=Ge):(yt=Ge,ut=null),g.setClipUrl(Te.plot,yt,W),Te.layerClipId=ut}var vt,Ae,Fe,ke,Be,et,ht,jt,At,Pt,zt,Nt,Kt;function _t(Ue){return"M"+vt+","+Ue+"H"+Ae}function Qt(Ue){return"M"+te._offset+","+Ue+"h"+te._length}function fr(Ue){return"M"+Ue+","+jt+"V"+ht}function Vt(Ue){return ae._shift!==void 0&&(Ue+=ae._shift),"M"+Ue+","+ae._offset+"v"+ae._length}function rr(Ue,fe,je){if(!Ue.showline||Ee!==Ue._mainSubplot)return"";if(!Ue._anchorAxis)return je(Ue._mainLinePosition);var Pe=fe(Ue._mainLinePosition);return Ue.mirror&&(Pe+=fe(Ue._mainMirrorPosition)),Pe}for(Ee in ce._plots){Te=ce._plots[Ee],te=Te.xaxis,ae=Te.yaxis;var Ne="M0,0";P(te,Ee)&&(Be=H(te,"left",ae,he),vt=te._offset-(Be?pe+Be:0),et=H(te,"right",ae,he),Ae=te._offset+te._length+(et?pe+et:0),Fe=G(te,ae,"bottom"),ke=G(te,ae,"top"),Kt=!te._anchorAxis||Ee!==te._mainSubplot,Kt&&(te.mirror==="allticks"||te.mirror==="all")&&(te._linepositions[Ee]=[Fe,ke]),Ne=rr(te,_t,Qt),Kt&&te.showline&&(te.mirror==="all"||te.mirror==="allticks")&&(Ne+=_t(Fe)+_t(ke)),Te.xlines.style("stroke-width",te._lw+"px").call(m.stroke,te.showline?te.linecolor:"rgba(0,0,0,0)")),Te.xlines.attr("d",Ne);var $e="M0,0";P(ae,Ee)&&(zt=H(ae,"bottom",te,he),ht=ae._offset+ae._length+(zt?pe:0),Nt=H(ae,"top",te,he),jt=ae._offset-(Nt?pe:0),At=G(ae,te,"left"),Pt=G(ae,te,"right"),Kt=!ae._anchorAxis||Ee!==ae._mainSubplot,Kt&&(ae.mirror==="allticks"||ae.mirror==="all")&&(ae._linepositions[Ee]=[At,Pt]),$e=rr(ae,fr,Vt),Kt&&ae.showline&&(ae.mirror==="all"||ae.mirror==="allticks")&&($e+=fr(At)+fr(Pt)),Te.ylines.style("stroke-width",ae._lw+"px").call(m.stroke,ae.showline?ae.linecolor:"rgba(0,0,0,0)")),Te.ylines.attr("d",$e)}return T.makeClipPaths(W),c.previousPromises(W)}function P(W,ce){return(W.ticks||W.showline)&&(ce===W._mainSubplot||W.mirror==="all"||W.mirror==="allticks")}function J(W,ce,de){if(!de.showline||!de._lw)return!1;if(de.mirror==="all"||de.mirror==="allticks")return!0;var pe=de._anchorAxis;if(!pe)return!1;var he=y.FROM_BL[ce];return de.side===ce?pe.domain[he]===W.domain[he]:de.mirror&&pe.domain[1-he]===W.domain[1-he]}function H(W,ce,de,pe){if(J(W,ce,de))return de._lw;for(var he=0;he<pe.length;he++){var be=pe[he];if(be._mainAxis===de._mainAxis&&J(W,ce,be))return be._lw}return 0}U.drawMainTitle=function(W){var ce=W._fullLayout.title,de=W._fullLayout,pe=ne(de),he=le(de),be=Q(de,he),Ee=X(de,pe);if(w.draw(W,"gtitle",{propContainer:de,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:de._dfltTitle.plot,subtitlePlaceholder:de._dfltTitle.subtitle,attributes:{x:Ee,y:be,"text-anchor":pe,dy:he}}),ce.text&&ce.automargin){var Te=$.selectAll(".gtitle"),He=g.bBox($.selectAll(".g-gtitle").node()).height,te=z(W,ce,He);if(te>0){q(W,be,te,He),Te.attr({x:Ee,y:be,"text-anchor":pe,dy:ee(ce.yanchor)}).call(p.positionText,Ee,be);var ae=(ce.text.match(p.BR_TAG_ALL)||[]).length;if(ae){var G=y.LINE_SPACING*ae+y.MID_SHIFT;ce.y===0&&(G=-G),Te.selectAll(".line").each(function(){var B=+this.getAttribute("dy").slice(0,-2)-G+"em";this.setAttribute("dy",B)})}var K=$.selectAll(".gtitle-subtitle");if(K.node()){var V=Te.node().getBBox(),re=V.y+V.height,D=re+w.SUBTITLE_PADDING_EM*ce.subtitle.font.size;K.attr({x:Ee,y:D,"text-anchor":pe,dy:ee(ce.yanchor)}).call(p.positionText,Ee,D)}}}};function Y(W,ce,de,pe,he){var be=ce.yref==="paper"?W._fullLayout._size.h:W._fullLayout.height,Ee=u.isTopAnchor(ce)?pe:pe-he,Te=de==="b"?be-Ee:Ee;return u.isTopAnchor(ce)&&de==="t"||u.isBottomAnchor(ce)&&de==="b"?!1:Te<he}function Z(W,ce,de,pe,he){var be=0;return de==="middle"&&(be+=he/2),W==="t"?(de==="top"&&(be+=he),be+=pe-ce*pe):(de==="bottom"&&(be+=he),be+=ce*pe),be}function z(W,ce,de){var pe=ce.y,he=ce.yanchor,be=pe>.5?"t":"b",Ee=W._fullLayout.margin[be],Te=0;return ce.yref==="paper"?Te=de+ce.pad.t+ce.pad.b:ce.yref==="container"&&(Te=Z(be,pe,he,W._fullLayout.height,de)+ce.pad.t+ce.pad.b),Te>Ee?Te:0}function q(W,ce,de,pe){var he="title.automargin",be=W._fullLayout.title,Ee=be.y>.5?"t":"b",Te={x:be.x,y:be.y,t:0,b:0},He={};be.yref==="paper"&&Y(W,be,Ee,ce,pe)?Te[Ee]=de:be.yref==="container"&&(He[Ee]=de,W._fullLayout._reservedMargin[he]=He),c.allowAutoMargin(W,he),c.autoMargin(W,he,Te)}function X(W,ce){var de=W.title,pe=W._size,he=0;switch(ce===C?he=de.pad.l:ce===b&&(he=-de.pad.r),de.xref){case"paper":return pe.l+pe.w*de.x+he;case"container":default:return W.width*de.x+he}}function Q(W,ce){var de=W.title,pe=W._size,he=0;if(ce==="0em"||!ce?he=-de.pad.b:ce===y.CAP_SHIFT+"em"&&(he=de.pad.t),de.y==="auto")return pe.t/2;switch(de.yref){case"paper":return pe.t+pe.h-pe.h*de.y+he;case"container":default:return W.height-W.height*de.y+he}}function ee(W){return W==="top"?y.CAP_SHIFT+.3+"em":W==="bottom"?"-0.3em":y.MID_SHIFT+"em"}function ne(W){var ce=W.title,de=j;return u.isRightAnchor(ce)?de=b:u.isLeftAnchor(ce)&&(de=C),de}function le(W){var ce=W.title,de="0em";return u.isTopAnchor(ce)?de=y.CAP_SHIFT+"em":u.isMiddleAnchor(ce)&&(de=y.MID_SHIFT+"em"),de}U.doTraceStyle=function(W){var ce=W.calcdata,de=[],pe;for(pe=0;pe<ce.length;pe++){var he=ce[pe],be=he[0]||{},Ee=be.trace||{},Te=Ee._module||{},He=Te.arraysToCalcdata;He&&He(he,Ee);var te=Te.editStyle;te&&de.push({fn:te,cd0:be})}if(de.length){for(pe=0;pe<de.length;pe++){var ae=de[pe];ae.fn(W,ae.cd0)}v(W),U.redrawReglTraces(W)}return c.style(W),h.getComponentMethod("legend","draw")(W),c.previousPromises(W)},U.doColorBars=function(W){return h.getComponentMethod("colorbar","draw")(W),c.previousPromises(W)},U.layoutReplot=function(W){var ce=W.layout;return W.layout=void 0,h.call("_doPlot",W,"",ce)},U.doLegend=function(W){return h.getComponentMethod("legend","draw")(W),c.previousPromises(W)},U.doTicksRelayout=function(W){return T.draw(W,"redraw"),W._fullLayout._hasOnlyLargeSploms&&(h.subplotsRegistry.splom.updateGrid(W),v(W),U.redrawReglTraces(W)),U.drawMainTitle(W),c.previousPromises(W)},U.doModeBar=function(W){var ce=W._fullLayout;l.manage(W);for(var de=0;de<ce._basePlotModules.length;de++){var pe=ce._basePlotModules[de].updateFx;pe&&pe(W)}return c.previousPromises(W)},U.doCamera=function(W){for(var ce=W._fullLayout,de=ce._subplots.gl3d,pe=0;pe<de.length;pe++){var he=ce[de[pe]],be=he._scene;be.setViewport(he)}},U.drawData=function(W){var ce=W._fullLayout;v(W);for(var de=ce._basePlotModules,pe=0;pe<de.length;pe++)de[pe].plot(W);return U.redrawReglTraces(W),c.style(W),h.getComponentMethod("selections","draw")(W),h.getComponentMethod("shapes","draw")(W),h.getComponentMethod("annotations","draw")(W),h.getComponentMethod("images","draw")(W),ce._replotting=!1,c.previousPromises(W)},U.redrawReglTraces=function(W){var ce=W._fullLayout;if(ce._has("regl")){var de=W._fullData,pe=[],he=[],be,Ee;for(ce._hasOnlyLargeSploms&&ce._splomGrid.draw(),be=0;be<de.length;be++){var Te=de[be];Te.visible===!0&&Te._length!==0&&(Te.type==="splom"?ce._splomScenes[Te.uid].draw():Te.type==="scattergl"?u.pushUnique(pe,Te.xaxis+Te.yaxis):Te.type==="scatterpolargl"&&u.pushUnique(he,Te.subplot))}for(be=0;be<pe.length;be++)Ee=ce._plots[pe[be]],Ee._scene&&Ee._scene.draw();for(be=0;be<he.length;be++)Ee=ce[he[be]]._subplot,Ee._scene&&Ee._scene.draw()}},U.doAutoRangeAndConstraints=function(W){for(var ce=T.list(W,"",!0),de,pe={},he=0;he<ce.length;he++)if(de=ce[he],!pe[de._id]){pe[de._id]=1,M(W,de),A(W,de);var be=de._matchGroup;if(be)for(var Ee in be){var Te=T.getFromId(W,Ee);A(W,Te,de.range),pe[Ee]=1}}R(W)},U.finalDraw=function(W){h.getComponentMethod("rangeslider","draw")(W),h.getComponentMethod("rangeselector","draw")(W)},U.drawMarginPushers=function(W){h.getComponentMethod("legend","draw")(W),h.getComponentMethod("rangeselector","draw")(W),h.getComponentMethod("sliders","draw")(W),h.getComponentMethod("updatemenus","draw")(W),h.getComponentMethod("colorbar","draw")(W)}}}),Gf=i({"src/components/selections/draw.js"(U,$){var h=qo().readPaths,c=Yn(),u=Ws().clearOutlineControllers,p=pt(),v=di(),m=Si().arrayEditor,g=qt(),w=g.getPathString;$.exports={draw:l,drawOne:y,activateLastSelection:M};function l(C){var j=C._fullLayout;u(C),j._selectionLayer.selectAll("path").remove();for(var b in j._plots){var k=j._plots[b].selectionLayer;k&&k.selectAll("path").remove()}for(var E=0;E<j.selections.length;E++)y(C,E)}function T(C){return C._context.editSelection}function y(C,j){C._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+j+'"]').remove();var b=g.makeSelectionsOptionsAndPlotinfo(C,j),k=b.options,E=b.plotinfo;if(!k._input)return;F(C._fullLayout._selectionLayer);function F(P){var J=w(C,k),H={"data-index":j,"fill-rule":"evenodd",d:J},Y=k.opacity,Z="rgba(0,0,0,0)",z=k.line.color||p.contrast(C._fullLayout.plot_bgcolor),q=k.line.width,X=k.line.dash;q||(q=5,X="solid");var Q=T(C)&&C._fullLayout._activeSelectionIndex===j;Q&&(Z=C._fullLayout.activeselection.fillcolor,Y=C._fullLayout.activeselection.opacity);for(var ee=[],ne=1;ne>=0;ne--){var le=P.append("path").attr(H).style("opacity",ne?.1:Y).call(p.stroke,z).call(p.fill,Z).call(v.dashLine,ne?"solid":X,ne?4+q:q);if(S(le,C,k),Q){var W=m(C.layout,"selections",k);le.style({cursor:"move"});var ce={element:le.node(),plotinfo:E,gd:C,editHelpers:W,isActiveSelection:!0},de=h(J,C);c(de,le,ce)}else le.style("pointer-events",ne?"all":"none");ee[ne]=le}var pe=ee[0],he=ee[1];he.node().addEventListener("click",function(){return R(C,pe)})}}function S(C,j,b){var k=b.xref+b.yref;v.setClipUrl(C,"clip"+j._fullLayout._uid+k,j)}function R(C,j){if(T(C)){var b=j.node(),k=+b.getAttribute("data-index");if(k>=0){if(k===C._fullLayout._activeSelectionIndex){A(C);return}C._fullLayout._activeSelectionIndex=k,C._fullLayout._deactivateSelection=A,l(C)}}}function M(C){if(T(C)){var j=C._fullLayout.selections.length-1;C._fullLayout._activeSelectionIndex=j,C._fullLayout._deactivateSelection=A,l(C)}}function A(C){if(T(C)){var j=C._fullLayout._activeSelectionIndex;j>=0&&(u(C),delete C._fullLayout._activeSelectionIndex,l(C))}}}}),_m=i({"node_modules/polybooljs/lib/build-log.js"(U,$){function h(){var c,u=0,p=!1;function v(m,g){return c.list.push({type:m,data:g?JSON.parse(JSON.stringify(g)):void 0}),c}return c={list:[],segmentId:function(){return u++},checkIntersection:function(m,g){return v("check",{seg1:m,seg2:g})},segmentChop:function(m,g){return v("div_seg",{seg:m,pt:g}),v("chop",{seg:m,pt:g})},statusRemove:function(m){return v("pop_seg",{seg:m})},segmentUpdate:function(m){return v("seg_update",{seg:m})},segmentNew:function(m,g){return v("new_seg",{seg:m,primary:g})},segmentRemove:function(m){return v("rem_seg",{seg:m})},tempStatus:function(m,g,w){return v("temp_status",{seg:m,above:g,below:w})},rewind:function(m){return v("rewind",{seg:m})},status:function(m,g,w){return v("status",{seg:m,above:g,below:w})},vert:function(m){return m===p?c:(p=m,v("vert",{x:m}))},log:function(m){return typeof m!="string"&&(m=JSON.stringify(m,!1,"  ")),v("log",{txt:m})},reset:function(){return v("reset")},selected:function(m){return v("selected",{segs:m})},chainStart:function(m){return v("chain_start",{seg:m})},chainRemoveHead:function(m,g){return v("chain_rem_head",{index:m,pt:g})},chainRemoveTail:function(m,g){return v("chain_rem_tail",{index:m,pt:g})},chainNew:function(m,g){return v("chain_new",{pt1:m,pt2:g})},chainMatch:function(m){return v("chain_match",{index:m})},chainClose:function(m){return v("chain_close",{index:m})},chainAddHead:function(m,g){return v("chain_add_head",{index:m,pt:g})},chainAddTail:function(m,g){return v("chain_add_tail",{index:m,pt:g})},chainConnect:function(m,g){return v("chain_con",{index1:m,index2:g})},chainReverse:function(m){return v("chain_rev",{index:m})},chainJoin:function(m,g){return v("chain_join",{index1:m,index2:g})},done:function(){return v("done")}},c}$.exports=h}}),km=i({"node_modules/polybooljs/lib/epsilon.js"(U,$){function h(c){typeof c!="number"&&(c=1e-10);var u={epsilon:function(p){return typeof p=="number"&&(c=p),c},pointAboveOrOnLine:function(p,v,m){var g=v[0],w=v[1],l=m[0],T=m[1],y=p[0],S=p[1];return(l-g)*(S-w)-(T-w)*(y-g)>=-c},pointBetween:function(p,v,m){var g=p[1]-v[1],w=m[0]-v[0],l=p[0]-v[0],T=m[1]-v[1],y=l*w+g*T;if(y<c)return!1;var S=w*w+T*T;return!(y-S>-c)},pointsSameX:function(p,v){return Math.abs(p[0]-v[0])<c},pointsSameY:function(p,v){return Math.abs(p[1]-v[1])<c},pointsSame:function(p,v){return u.pointsSameX(p,v)&&u.pointsSameY(p,v)},pointsCompare:function(p,v){return u.pointsSameX(p,v)?u.pointsSameY(p,v)?0:p[1]<v[1]?-1:1:p[0]<v[0]?-1:1},pointsCollinear:function(p,v,m){var g=p[0]-v[0],w=p[1]-v[1],l=v[0]-m[0],T=v[1]-m[1];return Math.abs(g*T-l*w)<c},linesIntersect:function(p,v,m,g){var w=v[0]-p[0],l=v[1]-p[1],T=g[0]-m[0],y=g[1]-m[1],S=w*y-l*T;if(Math.abs(S)<c)return!1;var R=p[0]-m[0],M=p[1]-m[1],A=(T*M-y*R)/S,C=(w*M-l*R)/S,j={alongA:0,alongB:0,pt:[p[0]+A*w,p[1]+A*l]};return A<=-c?j.alongA=-2:A<c?j.alongA=-1:A-1<=-c?j.alongA=0:A-1<c?j.alongA=1:j.alongA=2,C<=-c?j.alongB=-2:C<c?j.alongB=-1:C-1<=-c?j.alongB=0:C-1<c?j.alongB=1:j.alongB=2,j},pointInsideRegion:function(p,v){for(var m=p[0],g=p[1],w=v[v.length-1][0],l=v[v.length-1][1],T=!1,y=0;y<v.length;y++){var S=v[y][0],R=v[y][1];R-g>c!=l-g>c&&(w-S)*(g-R)/(l-R)+S-m>c&&(T=!T),w=S,l=R}return T}};return u}$.exports=h}}),C5=i({"node_modules/polybooljs/lib/linked-list.js"(U,$){var h={create:function(){var c={root:{root:!0,next:null},exists:function(u){return!(u===null||u===c.root)},isEmpty:function(){return c.root.next===null},getHead:function(){return c.root.next},insertBefore:function(u,p){for(var v=c.root,m=c.root.next;m!==null;){if(p(m)){u.prev=m.prev,u.next=m,m.prev.next=u,m.prev=u;return}v=m,m=m.next}v.next=u,u.prev=v,u.next=null},findTransition:function(u){for(var p=c.root,v=c.root.next;v!==null&&!u(v);)p=v,v=v.next;return{before:p===c.root?null:p,after:v,insert:function(m){return m.prev=p,m.next=v,p.next=m,v!==null&&(v.prev=m),m}}}};return c},node:function(c){return c.prev=null,c.next=null,c.remove=function(){c.prev.next=c.next,c.next&&(c.next.prev=c.prev),c.prev=null,c.next=null},c}};$.exports=h}}),j5=i({"node_modules/polybooljs/lib/intersecter.js"(U,$){var h=C5();function c(u,p,v){function m(j,b){return{id:v?v.segmentId():-1,start:j,end:b,myFill:{above:null,below:null},otherFill:null}}function g(j,b,k){return{id:v?v.segmentId():-1,start:j,end:b,myFill:{above:k.myFill.above,below:k.myFill.below},otherFill:null}}var w=h.create();function l(j,b,k,E,F,P){var J=p.pointsCompare(b,F);return J!==0?J:p.pointsSame(k,P)?0:j!==E?j?1:-1:p.pointAboveOrOnLine(k,E?F:P,E?P:F)?1:-1}function T(j,b){w.insertBefore(j,function(k){var E=l(j.isStart,j.pt,b,k.isStart,k.pt,k.other.pt);return E<0})}function y(j,b){var k=h.node({isStart:!0,pt:j.start,seg:j,primary:b,other:null,status:null});return T(k,j.end),k}function S(j,b,k){var E=h.node({isStart:!1,pt:b.end,seg:b,primary:k,other:j,status:null});j.other=E,T(E,j.pt)}function R(j,b){var k=y(j,b);return S(k,j,b),k}function M(j,b){v&&v.segmentChop(j.seg,b),j.other.remove(),j.seg.end=b,j.other.pt=b,T(j.other,j.pt)}function A(j,b){var k=g(b,j.seg.end,j.seg);return M(j,b),R(k,j.primary)}function C(j,b){var k=h.create();function E(le,W){var ce=le.seg.start,de=le.seg.end,pe=W.seg.start,he=W.seg.end;return p.pointsCollinear(ce,pe,he)?p.pointsCollinear(de,pe,he)||p.pointAboveOrOnLine(de,pe,he)?1:-1:p.pointAboveOrOnLine(ce,pe,he)?1:-1}function F(le){return k.findTransition(function(W){var ce=E(le,W.ev);return ce>0})}function P(le,W){var ce=le.seg,de=W.seg,pe=ce.start,he=ce.end,be=de.start,Ee=de.end;v&&v.checkIntersection(ce,de);var Te=p.linesIntersect(pe,he,be,Ee);if(Te===!1){if(!p.pointsCollinear(pe,he,be)||p.pointsSame(pe,Ee)||p.pointsSame(he,be))return!1;var He=p.pointsSame(pe,be),te=p.pointsSame(he,Ee);if(He&&te)return W;var ae=!He&&p.pointBetween(pe,be,Ee),G=!te&&p.pointBetween(he,be,Ee);if(He)return G?A(W,he):A(le,Ee),W;ae&&(te||(G?A(W,he):A(le,Ee)),A(W,pe))}else Te.alongA===0&&(Te.alongB===-1?A(le,be):Te.alongB===0?A(le,Te.pt):Te.alongB===1&&A(le,Ee)),Te.alongB===0&&(Te.alongA===-1?A(W,pe):Te.alongA===0?A(W,Te.pt):Te.alongA===1&&A(W,he));return!1}for(var J=[];!w.isEmpty();){var H=w.getHead();if(v&&v.vert(H.pt[0]),H.isStart){let le=function(){if(Z){var W=P(H,Z);if(W)return W}return z?P(H,z):!1};v&&v.segmentNew(H.seg,H.primary);var Y=F(H),Z=Y.before?Y.before.ev:null,z=Y.after?Y.after.ev:null;v&&v.tempStatus(H.seg,Z?Z.seg:!1,z?z.seg:!1);var q=le();if(q){if(u){var X;H.seg.myFill.below===null?X=!0:X=H.seg.myFill.above!==H.seg.myFill.below,X&&(q.seg.myFill.above=!q.seg.myFill.above)}else q.seg.otherFill=H.seg.myFill;v&&v.segmentUpdate(q.seg),H.other.remove(),H.remove()}if(w.getHead()!==H){v&&v.rewind(H.seg);continue}if(u){var X;H.seg.myFill.below===null?X=!0:X=H.seg.myFill.above!==H.seg.myFill.below,z?H.seg.myFill.below=z.seg.myFill.above:H.seg.myFill.below=j,X?H.seg.myFill.above=!H.seg.myFill.below:H.seg.myFill.above=H.seg.myFill.below}else if(H.seg.otherFill===null){var Q;z?H.primary===z.primary?Q=z.seg.otherFill.above:Q=z.seg.myFill.above:Q=H.primary?b:j,H.seg.otherFill={above:Q,below:Q}}v&&v.status(H.seg,Z?Z.seg:!1,z?z.seg:!1),H.other.status=Y.insert(h.node({ev:H}))}else{var ee=H.status;if(ee===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(k.exists(ee.prev)&&k.exists(ee.next)&&P(ee.prev.ev,ee.next.ev),v&&v.statusRemove(ee.ev.seg),ee.remove(),!H.primary){var ne=H.seg.myFill;H.seg.myFill=H.seg.otherFill,H.seg.otherFill=ne}J.push(H.seg)}w.getHead().remove()}return v&&v.done(),J}return u?{addRegion:function(j){for(var b,k=j[j.length-1],E=0;E<j.length;E++){b=k,k=j[E];var F=p.pointsCompare(b,k);F!==0&&R(m(F<0?b:k,F<0?k:b),!0)}},calculate:function(j){return C(j,!1)}}:{calculate:function(j,b,k,E){return j.forEach(function(F){R(g(F.start,F.end,F),!0)}),k.forEach(function(F){R(g(F.start,F.end,F),!1)}),C(b,E)}}}$.exports=c}}),E5=i({"node_modules/polybooljs/lib/segment-chainer.js"(U,$){function h(c,u,p){var v=[],m=[];return c.forEach(function(g){var w=g.start,l=g.end;if(u.pointsSame(w,l)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}p&&p.chainStart(g);var T={index:0,matches_head:!1,matches_pt1:!1},y={index:0,matches_head:!1,matches_pt1:!1},S=T;function R(Q,ee,ne){return S.index=Q,S.matches_head=ee,S.matches_pt1=ne,S===T?(S=y,!1):(S=null,!0)}for(var M=0;M<v.length;M++){var A=v[M],C=A[0];A[1];var j=A[A.length-1];if(A[A.length-2],u.pointsSame(C,w)){if(R(M,!0,!0))break}else if(u.pointsSame(C,l)){if(R(M,!0,!1))break}else if(u.pointsSame(j,w)){if(R(M,!1,!0))break}else if(u.pointsSame(j,l)&&R(M,!1,!1))break}if(S===T){v.push([w,l]),p&&p.chainNew(w,l);return}if(S===y){p&&p.chainMatch(T.index);var b=T.index,k=T.matches_pt1?l:w,E=T.matches_head,A=v[b],F=E?A[0]:A[A.length-1],P=E?A[1]:A[A.length-2],J=E?A[A.length-1]:A[0],H=E?A[A.length-2]:A[1];if(u.pointsCollinear(P,F,k)&&(E?(p&&p.chainRemoveHead(T.index,k),A.shift()):(p&&p.chainRemoveTail(T.index,k),A.pop()),F=P),u.pointsSame(J,k)){v.splice(b,1),u.pointsCollinear(H,J,F)&&(E?(p&&p.chainRemoveTail(T.index,F),A.pop()):(p&&p.chainRemoveHead(T.index,F),A.shift())),p&&p.chainClose(T.index),m.push(A);return}E?(p&&p.chainAddHead(T.index,k),A.unshift(k)):(p&&p.chainAddTail(T.index,k),A.push(k));return}function Y(Q){p&&p.chainReverse(Q),v[Q].reverse()}function Z(Q,ee){var ne=v[Q],le=v[ee],W=ne[ne.length-1],ce=ne[ne.length-2],de=le[0],pe=le[1];u.pointsCollinear(ce,W,de)&&(p&&p.chainRemoveTail(Q,W),ne.pop(),W=ce),u.pointsCollinear(W,de,pe)&&(p&&p.chainRemoveHead(ee,de),le.shift()),p&&p.chainJoin(Q,ee),v[Q]=ne.concat(le),v.splice(ee,1)}var z=T.index,q=y.index;p&&p.chainConnect(z,q);var X=v[z].length<v[q].length;T.matches_head?y.matches_head?X?(Y(z),Z(z,q)):(Y(q),Z(q,z)):Z(q,z):y.matches_head?Z(z,q):X?(Y(z),Z(q,z)):(Y(q),Z(z,q))}),m}$.exports=h}}),L5=i({"node_modules/polybooljs/lib/segment-selector.js"(U,$){function h(u,p,v){var m=[];return u.forEach(function(g){var w=(g.myFill.above?8:0)+(g.myFill.below?4:0)+(g.otherFill&&g.otherFill.above?2:0)+(g.otherFill&&g.otherFill.below?1:0);p[w]!==0&&m.push({id:v?v.segmentId():-1,start:g.start,end:g.end,myFill:{above:p[w]===1,below:p[w]===2},otherFill:null})}),v&&v.selected(m),m}var c={union:function(u,p){return h(u,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],p)},intersect:function(u,p){return h(u,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],p)},difference:function(u,p){return h(u,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],p)},differenceRev:function(u,p){return h(u,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],p)},xor:function(u,p){return h(u,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],p)}};$.exports=c}}),R5=i({"node_modules/polybooljs/lib/geojson.js"(U,$){var h={toPolygon:function(c,u){function p(g){if(g.length<=0)return c.segments({inverted:!1,regions:[]});function w(y){var S=y.slice(0,y.length-1);return c.segments({inverted:!1,regions:[S]})}for(var l=w(g[0]),T=1;T<g.length;T++)l=c.selectDifference(c.combine(l,w(g[T])));return l}if(u.type==="Polygon")return c.polygon(p(u.coordinates));if(u.type==="MultiPolygon"){for(var v=c.segments({inverted:!1,regions:[]}),m=0;m<u.coordinates.length;m++)v=c.selectUnion(c.combine(v,p(u.coordinates[m])));return c.polygon(v)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(c,u,p){p=c.polygon(c.segments(p));function v(A,C){return u.pointInsideRegion([(A[0][0]+A[1][0])*.5,(A[0][1]+A[1][1])*.5],C)}function m(A){return{region:A,children:[]}}var g=m(null);function w(A,C){for(var j=0;j<A.children.length;j++){var b=A.children[j];if(v(C,b.region)){w(b,C);return}}for(var k=m(C),j=0;j<A.children.length;j++){var b=A.children[j];v(b.region,C)&&(k.children.push(b),A.children.splice(j,1),j--)}A.children.push(k)}for(var l=0;l<p.regions.length;l++){var T=p.regions[l];T.length<3||w(g,T)}function y(A,C){for(var j=0,b=A[A.length-1][0],k=A[A.length-1][1],E=[],F=0;F<A.length;F++){var P=A[F][0],J=A[F][1];E.push([P,J]),j+=J*b-P*k,b=P,k=J}var H=j<0;return H!==C&&E.reverse(),E.push([E[0][0],E[0][1]]),E}var S=[];function R(A){var C=[y(A.region,!1)];S.push(C);for(var j=0;j<A.children.length;j++)C.push(M(A.children[j]))}function M(A){for(var C=0;C<A.children.length;C++)R(A.children[C]);return y(A.region,!0)}for(var l=0;l<g.children.length;l++)R(g.children[l]);return S.length<=0?{type:"Polygon",coordinates:[]}:S.length==1?{type:"Polygon",coordinates:S[0]}:{type:"MultiPolygon",coordinates:S}}};$.exports=h}}),D5=i({"node_modules/polybooljs/index.js"(U,$){var h=_m(),c=km(),u=j5(),p=E5(),v=L5(),m=R5(),g=!1,w=c(),l;l={buildLog:function(y){return y===!0?g=h():y===!1&&(g=!1),g===!1?!1:g.list},epsilon:function(y){return w.epsilon(y)},segments:function(y){var S=u(!0,w,g);return y.regions.forEach(S.addRegion),{segments:S.calculate(y.inverted),inverted:y.inverted}},combine:function(y,S){var R=u(!1,w,g);return{combined:R.calculate(y.segments,y.inverted,S.segments,S.inverted),inverted1:y.inverted,inverted2:S.inverted}},selectUnion:function(y){return{segments:v.union(y.combined,g),inverted:y.inverted1||y.inverted2}},selectIntersect:function(y){return{segments:v.intersect(y.combined,g),inverted:y.inverted1&&y.inverted2}},selectDifference:function(y){return{segments:v.difference(y.combined,g),inverted:y.inverted1&&!y.inverted2}},selectDifferenceRev:function(y){return{segments:v.differenceRev(y.combined,g),inverted:!y.inverted1&&y.inverted2}},selectXor:function(y){return{segments:v.xor(y.combined,g),inverted:y.inverted1!==y.inverted2}},polygon:function(y){return{regions:p(y.segments,w,g),inverted:y.inverted}},polygonFromGeoJSON:function(y){return m.toPolygon(l,y)},polygonToGeoJSON:function(y){return m.fromPolygon(l,w,y)},union:function(y,S){return T(y,S,l.selectUnion)},intersect:function(y,S){return T(y,S,l.selectIntersect)},difference:function(y,S){return T(y,S,l.selectDifference)},differenceRev:function(y,S){return T(y,S,l.selectDifferenceRev)},xor:function(y,S){return T(y,S,l.selectXor)}};function T(y,S,R){var M=l.segments(y),A=l.segments(S),C=l.combine(M,A),j=R(C);return l.polygon(j)}typeof window=="object"&&(window.PolyBool=l),$.exports=l}}),P5=i({"node_modules/point-in-polygon/nested.js"(U,$){$.exports=function(c,u,p,v){var m=c[0],g=c[1],w=!1;p===void 0&&(p=0),v===void 0&&(v=u.length);for(var l=v-p,T=0,y=l-1;T<l;y=T++){var S=u[T+p][0],R=u[T+p][1],M=u[y+p][0],A=u[y+p][1],C=R>g!=A>g&&m<(M-S)*(g-R)/(A-R)+S;C&&(w=!w)}return w}}}),_y=i({"src/lib/polygon.js"(U,$){var h=ti().dot,c=Ce().BADNUM,u=$.exports={};u.tester=function(v){var m=v.slice(),g=m[0][0],w=g,l=m[0][1],T=l,y;for((m[m.length-1][0]!==m[0][0]||m[m.length-1][1]!==m[0][1])&&m.push(m[0]),y=1;y<m.length;y++)g=Math.min(g,m[y][0]),w=Math.max(w,m[y][0]),l=Math.min(l,m[y][1]),T=Math.max(T,m[y][1]);var S=!1,R;m.length===5&&(m[0][0]===m[1][0]?m[2][0]===m[3][0]&&m[0][1]===m[3][1]&&m[1][1]===m[2][1]&&(S=!0,R=function(b){return b[0]===m[0][0]}):m[0][1]===m[1][1]&&m[2][1]===m[3][1]&&m[0][0]===m[3][0]&&m[1][0]===m[2][0]&&(S=!0,R=function(b){return b[1]===m[0][1]}));function M(b,k){var E=b[0],F=b[1];return!(E===c||E<g||E>w||F===c||F<l||F>T||k&&R(b))}function A(b,k){var E=b[0],F=b[1];if(E===c||E<g||E>w||F===c||F<l||F>T)return!1;var P=m.length,J=m[0][0],H=m[0][1],Y=0,Z,z,q,X,Q;for(Z=1;Z<P;Z++)if(z=J,q=H,J=m[Z][0],H=m[Z][1],X=Math.min(z,J),!(E<X||E>Math.max(z,J)||F>Math.max(q,H)))if(F<Math.min(q,H))E!==X&&Y++;else{if(J===z?Q=F:Q=q+(E-z)*(H-q)/(J-z),F===Q)return!(Z===1&&k);F<=Q&&E!==X&&Y++}return Y%2===1}var C=!0,j=m[0];for(y=1;y<m.length;y++)if(j[0]!==m[y][0]||j[1]!==m[y][1]){C=!1;break}return{xmin:g,xmax:w,ymin:l,ymax:T,pts:m,contains:S?M:A,isRect:S,degenerate:C}},u.isSegmentBent=function(v,m,g,w){var l=v[m],T=[v[g][0]-l[0],v[g][1]-l[1]],y=h(T,T),S=Math.sqrt(y),R=[-T[1]/S,T[0]/S],M,A,C;for(M=m+1;M<g;M++)if(A=[v[M][0]-l[0],v[M][1]-l[1]],C=h(A,T),C<0||C>y||Math.abs(h(A,R))>w)return!0;return!1},u.filter=function(v,m){var g=[v[0]],w=0,l=0;function T(S){v.push(S);var R=g.length,M=w;g.splice(l+1);for(var A=M+1;A<v.length;A++)(A===v.length-1||u.isSegmentBent(v,M,A+1,m))&&(g.push(v[A]),g.length<R-2&&(w=A,l=g.length-1),M=A)}if(v.length>1){var y=v.pop();T(y)}return{addPt:T,raw:v,filtered:g}}}}),N5=i({"src/components/selections/constants.js"(U,$){$.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}}}),z5=i({"src/components/selections/select.js"(U,$){var h=D5(),c=P5(),u=mn(),p=di().dashStyle,v=pt(),m=po(),g=ts().makeEventData,w=Ol(),l=w.freeMode,T=w.rectMode,y=w.drawMode,S=w.openMode,R=w.selectMode,M=qt(),A=Mc(),C=Yn(),j=Ws().clearOutline,b=qo(),k=b.handleEllipse,E=b.readPaths,F=gu().newShapes,P=dd(),J=Gf().activateLastSelection,H=kr(),Y=H.sorterAsc,Z=_y(),z=rn(),q=pa().getFromId,X=hu(),Q=fd().redrawReglTraces,ee=N5(),ne=ee.MINSELECT,le=Z.filter,W=Z.tester,ce=vu(),de=ce.p2r,pe=ce.axValue,he=ce.getTransform;function be(Ne){return Ne.subplot!==void 0}function Ee(Ne,$e,Ue,fe,je){var Pe=!be(fe),Re=l(je),tt=T(je),nt=S(je),dt=y(je),St=R(je),Dt=je==="drawline",at=je==="drawcircle",Ct=Dt||at,Ht=fe.gd,Ut=Ht._fullLayout,Ar=St&&Ut.newselection.mode==="immediate"&&Pe,Rr=Ut._zoomlayer,$r=fe.element.getBoundingClientRect(),Mr=fe.plotinfo,Ir=he(Mr),gr=$e-$r.left,br=Ue-$r.top;Ut._calcInverseTransform(Ht);var Vr=H.apply3DTransform(Ut._invTransform)(gr,br);gr=Vr[0],br=Vr[1];var Br=Ut._invScaleX,Ur=Ut._invScaleY,Lr=gr,hr=br,Or="M"+gr+","+br,fn=fe.xaxes[0],An=fe.yaxes[0],qr=fn._length,yn=An._length,xn=Ne.altKey&&!(y(je)&&nt),Xn,mr,jn,we,me,mt,ft;K(Ne,Ht,fe),Re&&(Xn=le([[gr,br]],ee.BENDPX));var Xe=Rr.selectAll("path.select-outline-"+Mr.id).data([1]),Ke=dt?Ut.newshape:Ut.newselection;dt&&(fe.hasText=Ke.label.text||Ke.label.texttemplate);var it=dt&&!nt?Ke.fillcolor:"rgba(0,0,0,0)",Tt=Ke.line.color||(Pe?v.contrast(Ht._fullLayout.plot_bgcolor):"#7f7f7f");Xe.enter().append("path").attr("class","select-outline select-outline-"+Mr.id).style({opacity:dt?Ke.opacity/2:1,"stroke-dasharray":p(Ke.line.dash,Ke.line.width),"stroke-width":Ke.line.width+"px","shape-rendering":"crispEdges"}).call(v.stroke,Tt).call(v.fill,it).attr("fill-rule","evenodd").classed("cursor-move",!!dt).attr("transform",Ir).attr("d",Or+"Z");var rt=Rr.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",Ir).attr("d","M0,0Z");if(dt&&fe.hasText){var xt=Rr.select(".label-temp");xt.empty()&&(xt=Rr.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Mt=Ut._uid+ee.SELECTID,Lt=[],Xt=oe(Ht,fe.xaxes,fe.yaxes,fe.subplot);Ar&&!Ne.shiftKey&&(fe._clearSubplotSelections=function(){if(Pe){var or=fn._id,Dr=An._id;ht(Ht,or,Dr,Xt);for(var _r=(Ht.layout||{}).selections||[],Zr=[],Er=!1,Gr=0;Gr<_r.length;Gr++){var Qr=Ut.selections[Gr];!Qr||Qr.xref!==or||Qr.yref!==Dr?Zr.push(_r[Gr]):Er=!0}Er&&(Ht._fullLayout._noEmitSelectedAtStart=!0,u.call("_guiRelayout",Ht,{selections:Zr}))}});var sr=Qt(fe);fe.moveFn=function(or,Dr){fe._clearSubplotSelections&&(fe._clearSubplotSelections(),fe._clearSubplotSelections=void 0),Lr=Math.max(0,Math.min(qr,Br*or+gr)),hr=Math.max(0,Math.min(yn,Ur*Dr+br));var _r=Math.abs(Lr-gr),Zr=Math.abs(hr-br);if(tt){var Er,Gr,Qr;if(St){var En=Ut.selectdirection;switch(En==="any"?Zr<Math.min(_r*.6,ne)?Er="h":_r<Math.min(Zr*.6,ne)?Er="v":Er="d":Er=En,Er){case"h":Gr=at?yn/2:0,Qr=yn;break;case"v":Gr=at?qr/2:0,Qr=qr;break}}if(dt)switch(Ut.newshape.drawdirection){case"vertical":Er="h",Gr=at?yn/2:0,Qr=yn;break;case"horizontal":Er="v",Gr=at?qr/2:0,Qr=qr;break;case"ortho":_r<Zr?(Er="h",Gr=br,Qr=hr):(Er="v",Gr=gr,Qr=Lr);break;default:Er="d"}Er==="h"?(we=Ct?k(at,[Lr,Gr],[Lr,Qr]):[[gr,Gr],[gr,Qr],[Lr,Qr],[Lr,Gr]],we.xmin=Ct?Lr:Math.min(gr,Lr),we.xmax=Ct?Lr:Math.max(gr,Lr),we.ymin=Math.min(Gr,Qr),we.ymax=Math.max(Gr,Qr),rt.attr("d","M"+we.xmin+","+(br-ne)+"h-4v"+2*ne+"h4ZM"+(we.xmax-1)+","+(br-ne)+"h4v"+2*ne+"h-4Z")):Er==="v"?(we=Ct?k(at,[Gr,hr],[Qr,hr]):[[Gr,br],[Gr,hr],[Qr,hr],[Qr,br]],we.xmin=Math.min(Gr,Qr),we.xmax=Math.max(Gr,Qr),we.ymin=Ct?hr:Math.min(br,hr),we.ymax=Ct?hr:Math.max(br,hr),rt.attr("d","M"+(gr-ne)+","+we.ymin+"v-4h"+2*ne+"v4ZM"+(gr-ne)+","+(we.ymax-1)+"v4h"+2*ne+"v-4Z")):Er==="d"&&(we=Ct?k(at,[gr,br],[Lr,hr]):[[gr,br],[gr,hr],[Lr,hr],[Lr,br]],we.xmin=Math.min(gr,Lr),we.xmax=Math.max(gr,Lr),we.ymin=Math.min(br,hr),we.ymax=Math.max(br,hr),rt.attr("d","M0,0Z"))}else Re&&(Xn.addPt([Lr,hr]),we=Xn.filtered);if(fe.selectionDefs&&fe.selectionDefs.length?(jn=ut(fe.mergedPolygons,we,xn),we.subtract=xn,mr=G(fe.selectionDefs.concat([we]))):(jn=[we],mr=W(we)),C(Ae(jn,nt),Xe,fe),St){var Sn=ke(Ht,!1),gi=Sn.eventData?Sn.eventData.points.slice():[];Sn=ke(Ht,!1,mr,Xt,fe),mr=Sn.selectionTesters,ft=Sn.eventData;var ei;Xn?ei=Xn.filtered:ei=Nt(jn),z.throttle(Mt,ee.SELECTDELAY,function(){Lt=Fe(mr,Xt);for(var ai=Lt.slice(),ta=0;ta<gi.length;ta++){for(var ka=gi[ta],ci=!1,_n=0;_n<ai.length;_n++)if(ai[_n].curveNumber===ka.curveNumber&&ai[_n].pointNumber===ka.pointNumber){ci=!0;break}ci||ai.push(ka)}ai.length&&(ft||(ft={}),ft.points=ai),sr(ft,ei),fr(Ht,ft)})}},fe.clickFn=function(or,Dr){if(rt.remove(),Ht._fullLayout._activeShapeIndex>=0){Ht._fullLayout._deactivateShape(Ht);return}if(!dt){var _r=Ut.clickmode;z.done(Mt).then(function(){if(z.clear(Mt),or===2){for(Xe.remove(),me=0;me<Xt.length;me++)mt=Xt[me],mt._module.selectPoints(mt,!1);if(Je(Ht,Xt),D(fe),rr(Ht),Xt.length){var Zr=Xt[0].xaxis,Er=Xt[0].yaxis;if(Zr&&Er){for(var Gr=[],Qr=Ht._fullLayout.selections,En=0;En<Qr.length;En++){var Sn=Qr[En];Sn&&(Sn.xref!==Zr._id||Sn.yref!==Er._id)&&Gr.push(Sn)}Gr.length<Qr.length&&(Ht._fullLayout._noEmitSelectedAtStart=!0,u.call("_guiRelayout",Ht,{selections:Gr}))}}}else _r.indexOf("select")>-1&&Te(Dr,Ht,fe.xaxes,fe.yaxes,fe.subplot,fe,Xe),_r==="event"&&Vt(Ht,void 0);m.click(Ht,Dr,Mr.id)}).catch(H.error)}},fe.doneFn=function(){rt.remove(),z.done(Mt).then(function(){z.clear(Mt),!Ar&&we&&fe.selectionDefs&&(we.subtract=xn,fe.selectionDefs.push(we),fe.mergedPolygons.length=0,[].push.apply(fe.mergedPolygons,jn)),(Ar||dt)&&D(fe,Ar),fe.doneFnCompleted&&fe.doneFnCompleted(Lt),St&&Vt(Ht,ft)}).catch(H.error)}}function Te(Ne,$e,Ue,fe,je,Pe,Re){var tt=$e._hoverdata,nt=$e._fullLayout,dt=nt.clickmode,St=dt.indexOf("event")>-1,Dt=[],at,Ct,Ht,Ut,Ar,Rr,$r,Mr,Ir,gr;if(ge(tt)){K(Ne,$e,Pe),at=oe($e,Ue,fe,je);var br=_e(tt,at),Vr=br.pointNumbers.length>0;if(Vr?De(at,br):Ge(at)&&($r=Se(br))){for(Re&&Re.remove(),gr=0;gr<at.length;gr++)Ct=at[gr],Ct._module.selectPoints(Ct,!1);Je($e,at),D(Pe),St&&rr($e)}else{Mr=Ne.shiftKey&&($r!==void 0?$r:Se(br)),Ht=He(br.pointNumber,br.searchInfo,Mr);var Br=Pe.selectionDefs.concat([Ht]);for(Ut=G(Br),gr=0;gr<at.length;gr++)if(Ar=at[gr]._module.selectPoints(at[gr],Ut),Rr=vt(Ar,at[gr]),Dt.length)for(var Ur=0;Ur<Rr.length;Ur++)Dt.push(Rr[Ur]);else Dt=Rr;if(Ir={points:Dt},Je($e,at,Ir),Ht&&Pe&&Pe.selectionDefs.push(Ht),Re){var Lr=Pe.mergedPolygons,hr=S(Pe.dragmode);C(Ae(Lr,hr),Re,Pe)}St&&Vt($e,Ir)}}}function He(Ne,$e,Ue){return{pointNumber:Ne,searchInfo:$e,subtract:!!Ue}}function te(Ne){return"pointNumber"in Ne&&"searchInfo"in Ne}function ae(Ne){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function($e,Ue,fe,je){var Pe=Ne.searchInfo.cd[0].trace.index,Re=je.cd[0].trace.index;return Re===Pe&&fe===Ne.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ne.subtract}}function G(Ne){if(!Ne.length)return;for(var $e=[],Ue=te(Ne[0])?0:Ne[0][0][0],fe=Ue,je=te(Ne[0])?0:Ne[0][0][1],Pe=je,Re=0;Re<Ne.length;Re++)if(te(Ne[Re]))$e.push(ae(Ne[Re]));else{var tt=W(Ne[Re]);tt.subtract=!!Ne[Re].subtract,$e.push(tt),Ue=Math.min(Ue,tt.xmin),fe=Math.max(fe,tt.xmax),je=Math.min(je,tt.ymin),Pe=Math.max(Pe,tt.ymax)}function nt(dt,St,Dt,at){for(var Ct=!1,Ht=0;Ht<$e.length;Ht++)$e[Ht].contains(dt,St,Dt,at)&&(Ct=!$e[Ht].subtract);return Ct}return{xmin:Ue,xmax:fe,ymin:je,ymax:Pe,pts:[],contains:nt,isRect:!1,degenerate:!1}}function K(Ne,$e,Ue){var fe=$e._fullLayout,je=Ue.plotinfo,Pe=Ue.dragmode,Re=fe._lastSelectedSubplot&&fe._lastSelectedSubplot===je.id,tt=(Ne.shiftKey||Ne.altKey)&&!(y(Pe)&&S(Pe));Re&&tt&&je.selection&&je.selection.selectionDefs&&!Ue.selectionDefs?(Ue.selectionDefs=je.selection.selectionDefs,Ue.mergedPolygons=je.selection.mergedPolygons):(!tt||!je.selection)&&D(Ue),Re||(j($e),fe._lastSelectedSubplot=je.id)}function V(Ne){return Ne._fullLayout._activeShapeIndex>=0}function re(Ne){return Ne._fullLayout._activeSelectionIndex>=0}function D(Ne,$e){var Ue=Ne.dragmode,fe=Ne.plotinfo,je=Ne.gd;V(je)&&je._fullLayout._deactivateShape(je),re(je)&&je._fullLayout._deactivateSelection(je);var Pe=je._fullLayout,Re=Pe._zoomlayer,tt=y(Ue),nt=R(Ue);if(tt||nt){var dt=Re.selectAll(".select-outline-"+fe.id);if(dt&&je._fullLayout._outlining){var St;tt&&(St=F(dt,Ne)),St&&u.call("_guiRelayout",je,{shapes:St});var Dt;nt&&!be(Ne)&&(Dt=P(dt,Ne)),Dt&&(je._fullLayout._noEmitSelectedAtStart=!0,u.call("_guiRelayout",je,{selections:Dt}).then(function(){$e&&J(je)})),je._fullLayout._outlining=!1}}fe.selection={},fe.selection.selectionDefs=Ne.selectionDefs=[],fe.selection.mergedPolygons=Ne.mergedPolygons=[]}function B(Ne){return Ne._id}function oe(Ne,$e,Ue,fe){if(!Ne.calcdata)return[];var je=[],Pe=$e.map(B),Re=Ue.map(B),tt,nt,dt;for(dt=0;dt<Ne.calcdata.length;dt++)if(tt=Ne.calcdata[dt],nt=tt[0].trace,!(nt.visible!==!0||!nt._module||!nt._module.selectPoints))if(be({subplot:fe})&&(nt.subplot===fe||nt.geo===fe))je.push(ie(nt._module,tt,$e[0],Ue[0]));else if(nt.type==="splom"){if(nt._xaxes[Pe[0]]&&nt._yaxes[Re[0]]){var St=ie(nt._module,tt,$e[0],Ue[0]);St.scene=Ne._fullLayout._splomScenes[nt.uid],je.push(St)}}else if(nt.type==="sankey"){var Dt=ie(nt._module,tt,$e[0],Ue[0]);je.push(Dt)}else{if(Pe.indexOf(nt.xaxis)===-1&&(!nt._xA||!nt._xA.overlaying)||Re.indexOf(nt.yaxis)===-1&&(!nt._yA||!nt._yA.overlaying))continue;je.push(ie(nt._module,tt,q(Ne,nt.xaxis),q(Ne,nt.yaxis)))}return je}function ie(Ne,$e,Ue,fe){return{_module:Ne,cd:$e,xaxis:Ue,yaxis:fe}}function ge(Ne){return Ne&&Array.isArray(Ne)&&Ne[0].hoverOnBox!==!0}function _e(Ne,$e){var Ue=Ne[0],fe=-1,je=[],Pe,Re;for(Re=0;Re<$e.length;Re++)if(Pe=$e[Re],Ue.fullData.index===Pe.cd[0].trace.index){if(Ue.hoverOnBox===!0)break;Ue.pointNumber!==void 0?fe=Ue.pointNumber:Ue.binNumber!==void 0&&(fe=Ue.binNumber,je=Ue.pointNumbers);break}return{pointNumber:fe,pointNumbers:je,searchInfo:Pe}}function Se(Ne){var $e=Ne.searchInfo.cd[0].trace,Ue=Ne.pointNumber,fe=Ne.pointNumbers,je=fe.length>0,Pe=je?fe[0]:Ue;return $e.selectedpoints?$e.selectedpoints.indexOf(Pe)>-1:!1}function De(Ne,$e){var Ue=[],fe,je,Pe,Re;for(Re=0;Re<Ne.length;Re++)fe=Ne[Re],fe.cd[0].trace.selectedpoints&&fe.cd[0].trace.selectedpoints.length>0&&Ue.push(fe);if(Ue.length===1&&(Pe=Ue[0]===$e.searchInfo,Pe&&(je=$e.searchInfo.cd[0].trace,je.selectedpoints.length===$e.pointNumbers.length))){for(Re=0;Re<$e.pointNumbers.length;Re++)if(je.selectedpoints.indexOf($e.pointNumbers[Re])<0)return!1;return!0}return!1}function Ge(Ne){var $e=0,Ue,fe,je;for(je=0;je<Ne.length;je++)if(Ue=Ne[je],fe=Ue.cd[0].trace,fe.selectedpoints&&(fe.selectedpoints.length>1||($e+=fe.selectedpoints.length,$e>1)))return!1;return $e===1}function Je(Ne,$e,Ue){var fe;for(fe=0;fe<$e.length;fe++){var je=$e[fe].cd[0].trace._fullInput,Pe=Ne._fullLayout._tracePreGUI[je.uid]||{};Pe.selectedpoints===void 0&&(Pe.selectedpoints=je._input.selectedpoints||null)}var Re;if(Ue){var tt=Ue.points||[];for(fe=0;fe<$e.length;fe++)Re=$e[fe].cd[0].trace,Re._input.selectedpoints=Re._fullInput.selectedpoints=[],Re._fullInput!==Re&&(Re.selectedpoints=[]);for(var nt=0;nt<tt.length;nt++){var dt=tt[nt],St=dt.data,Dt=dt.fullData,at=dt.pointIndex,Ct=dt.pointIndices;Ct?([].push.apply(St.selectedpoints,Ct),Re._fullInput!==Re&&[].push.apply(Dt.selectedpoints,Ct)):(St.selectedpoints.push(at),Re._fullInput!==Re&&Dt.selectedpoints.push(at))}}else for(fe=0;fe<$e.length;fe++)Re=$e[fe].cd[0].trace,delete Re.selectedpoints,delete Re._input.selectedpoints,Re._fullInput!==Re&&delete Re._fullInput.selectedpoints;yt(Ne,$e)}function yt(Ne,$e){for(var Ue=!1,fe=0;fe<$e.length;fe++){var je=$e[fe],Pe=je.cd;u.traceIs(Pe[0].trace,"regl")&&(Ue=!0);var Re=je._module,tt=Re.styleOnSelect||Re.style;tt&&(tt(Ne,Pe,Pe[0].node3),Pe[0].nodeRangePlot3&&tt(Ne,Pe,Pe[0].nodeRangePlot3))}Ue&&(X(Ne),Q(Ne))}function ut(Ne,$e,Ue){for(var fe=Ue?h.difference:h.union,je=fe({regions:Ne},{regions:[$e]}),Pe=je.regions.reverse(),Re=0;Re<Pe.length;Re++){var tt=Pe[Re];tt.subtract=Pt(tt,Pe.slice(0,Re))}return Pe}function vt(Ne,$e){if(Array.isArray(Ne))for(var Ue=$e.cd,fe=$e.cd[0].trace,je=0;je<Ne.length;je++)Ne[je]=g(Ne[je],fe,Ue);return Ne}function Ae(Ne,$e){for(var Ue=[],fe=0;fe<Ne.length;fe++){Ue[fe]=[];for(var je=0;je<Ne[fe].length;je++){Ue[fe][je]=[],Ue[fe][je][0]=je?"L":"M";for(var Pe=0;Pe<Ne[fe][je].length;Pe++)Ue[fe][je].push(Ne[fe][je][Pe])}$e||Ue[fe].push(["Z",Ue[fe][0][1],Ue[fe][0][2]])}return Ue}function Fe(Ne,$e){for(var Ue=[],fe,je,Pe=0;Pe<$e.length;Pe++){var Re=$e[Pe];je=Re._module.selectPoints(Re,Ne),fe=vt(je,Re),Ue=Ue.concat(fe)}return Ue}function ke(Ne,$e,Ue,fe,je){var Pe=!!fe,Re,tt,nt;je&&(Re=je.plotinfo,tt=je.xaxes[0]._id,nt=je.yaxes[0]._id);var dt=[],St=[],Dt=At(Ne),at=Ne._fullLayout;if(Re){var Ct=at._zoomlayer,Ht=at.dragmode,Ut=y(Ht),Ar=R(Ht);if(Ut||Ar){var Rr=q(Ne,tt,"x"),$r=q(Ne,nt,"y");if(Rr&&$r){var Mr=Ct.selectAll(".select-outline-"+Re.id);if(Mr&&Ne._fullLayout._outlining&&Mr.length){for(var Ir=Mr[0][0],gr=Ir.getAttribute("d"),br=E(gr,Ne,Re),Vr=[],Br=0;Br<br.length;Br++){for(var Ur=br[Br],Lr=[],hr=0;hr<Ur.length;hr++)Lr.push([zt(Rr,Ur[hr][1]),zt($r,Ur[hr][2])]);Lr.xref=tt,Lr.yref=nt,Lr.subtract=Pt(Lr,Vr),Vr.push(Lr)}Dt=Dt.concat(Vr)}}}}var Or=tt&&nt?[tt+nt]:at._subplots.cartesian;Be(Ne);for(var fn={},An=0;An<Or.length;An++){var qr=Or[An],yn=qr.indexOf("y"),xn=qr.slice(0,yn),Xn=qr.slice(yn),mr=tt&&nt?Ue:void 0;if(mr=jt(Dt,xn,Xn,mr),mr){var jn=fe;if(!Pe){var we=q(Ne,xn,"x"),me=q(Ne,Xn,"y");jn=oe(Ne,[we],[me],qr);for(var mt=0;mt<jn.length;mt++){var ft=jn[mt],Xe=ft.cd[0],Ke=Xe.trace;if(ft._module.name==="scattergl"&&!Xe.t.xpx){var it=Ke.x,Tt=Ke.y,rt=Ke._length;Xe.t.xpx=[],Xe.t.ypx=[];for(var xt=0;xt<rt;xt++)Xe.t.xpx[xt]=we.c2p(it[xt]),Xe.t.ypx[xt]=me.c2p(Tt[xt])}ft._module.name==="splom"&&(fn[Ke.uid]||(fn[Ke.uid]=!0))}}var Mt=Fe(mr,jn);dt=dt.concat(Mt),St=St.concat(jn)}}var Lt={points:dt};Je(Ne,St,Lt);var Xt=at.clickmode,sr=Xt.indexOf("event")>-1&&$e;if(!Re&&$e){var or=At(Ne,!0);if(or.length){var Dr=or[0].xref,_r=or[0].yref;if(Dr&&_r){var Zr=Nt(or),Er=_t([q(Ne,Dr,"x"),q(Ne,_r,"y")]);Er(Lt,Zr)}}Ne._fullLayout._noEmitSelectedAtStart?Ne._fullLayout._noEmitSelectedAtStart=!1:sr&&Vt(Ne,Lt),at._reselect=!1}if(!Re&&at._deselect){var Gr=at._deselect;tt=Gr.xref,nt=Gr.yref,et(tt,nt,St)||ht(Ne,tt,nt,fe),sr&&(Lt.points.length?Vt(Ne,Lt):rr(Ne)),at._deselect=!1}return{eventData:Lt,selectionTesters:Ue}}function Be(Ne){var $e=Ne.calcdata;if($e)for(var Ue=0;Ue<$e.length;Ue++){var fe=$e[Ue][0],je=fe.trace,Pe=Ne._fullLayout._splomScenes;if(Pe){var Re=Pe[je.uid];Re&&(Re.selectBatch=[])}}}function et(Ne,$e,Ue){for(var fe=0;fe<Ue.length;fe++){var je=Ue[fe];if(je.xaxis&&je.xaxis._id===Ne&&je.yaxis&&je.yaxis._id===$e)return!0}return!1}function ht(Ne,$e,Ue,fe){fe=oe(Ne,[q(Ne,$e,"x")],[q(Ne,Ue,"y")],$e+Ue);for(var je=0;je<fe.length;je++){var Pe=fe[je];Pe._module.selectPoints(Pe,!1)}Je(Ne,fe)}function jt(Ne,$e,Ue,fe){for(var je,Pe=0;Pe<Ne.length;Pe++){var Re=Ne[Pe];if(!($e!==Re.xref||Ue!==Re.yref))if(je){var tt=!!Re.subtract;je=ut(je,Re,tt),fe=G(je)}else je=[Re],fe=W(Re)}return fe}function At(Ne,$e){for(var Ue=[],fe=Ne._fullLayout,je=fe.selections,Pe=je.length,Re=0;Re<Pe;Re++)if(!($e&&Re!==fe._activeSelectionIndex)){var tt=je[Re];if(tt){var nt=tt.xref,dt=tt.yref,St=q(Ne,nt,"x"),Dt=q(Ne,dt,"y"),at,Ct,Ht,Ut,Ar;if(tt.type==="rect"){Ar=[];var Rr=zt(St,tt.x0),$r=zt(St,tt.x1),Mr=zt(Dt,tt.y0),Ir=zt(Dt,tt.y1);Ar=[[Rr,Mr],[Rr,Ir],[$r,Ir],[$r,Mr]],at=Math.min(Rr,$r),Ct=Math.max(Rr,$r),Ht=Math.min(Mr,Ir),Ut=Math.max(Mr,Ir),Ar.xmin=at,Ar.xmax=Ct,Ar.ymin=Ht,Ar.ymax=Ut,Ar.xref=nt,Ar.yref=dt,Ar.subtract=!1,Ar.isRect=!0,Ue.push(Ar)}else if(tt.type==="path")for(var gr=tt.path.split("Z"),br=[],Vr=0;Vr<gr.length;Vr++){var Br=gr[Vr];if(Br){Br+="Z";var Ur=M.extractPathCoords(Br,A.paramIsX,"raw"),Lr=M.extractPathCoords(Br,A.paramIsY,"raw");at=1/0,Ct=-1/0,Ht=1/0,Ut=-1/0,Ar=[];for(var hr=0;hr<Ur.length;hr++){var Or=zt(St,Ur[hr]),fn=zt(Dt,Lr[hr]);Ar.push([Or,fn]),at=Math.min(Or,at),Ct=Math.max(Or,Ct),Ht=Math.min(fn,Ht),Ut=Math.max(fn,Ut)}Ar.xmin=at,Ar.xmax=Ct,Ar.ymin=Ht,Ar.ymax=Ut,Ar.xref=nt,Ar.yref=dt,Ar.subtract=Pt(Ar,br),br.push(Ar),Ue.push(Ar)}}}}return Ue}function Pt(Ne,$e){for(var Ue=!1,fe=0;fe<$e.length;fe++)for(var je=$e[fe],Pe=0;Pe<Ne.length;Pe++)if(c(Ne[Pe],je)){Ue=!Ue;break}return Ue}function zt(Ne,$e){return Ne.type==="date"&&($e=$e.replace("_"," ")),Ne.type==="log"?Ne.c2p($e):Ne.r2p($e,null,Ne.calendar)}function Nt(Ne){for(var $e=Ne.length,Ue=[],fe=0;fe<$e;fe++){var je=Ne[fe];Ue=Ue.concat(je),Ue=Ue.concat([je[0]])}return Kt(Ue)}function Kt(Ne){return Ne.isRect=Ne.length===5&&Ne[0][0]===Ne[4][0]&&Ne[0][1]===Ne[4][1]&&Ne[0][0]===Ne[1][0]&&Ne[2][0]===Ne[3][0]&&Ne[0][1]===Ne[3][1]&&Ne[1][1]===Ne[2][1]||Ne[0][1]===Ne[1][1]&&Ne[2][1]===Ne[3][1]&&Ne[0][0]===Ne[3][0]&&Ne[1][0]===Ne[2][0],Ne.isRect&&(Ne.xmin=Math.min(Ne[0][0],Ne[2][0]),Ne.xmax=Math.max(Ne[0][0],Ne[2][0]),Ne.ymin=Math.min(Ne[0][1],Ne[2][1]),Ne.ymax=Math.max(Ne[0][1],Ne[2][1])),Ne}function _t(Ne){return function($e,Ue){for(var fe,je,Pe=0;Pe<Ne.length;Pe++){var Re=Ne[Pe],tt=Re._id,nt=tt.charAt(0);if(Ue.isRect){fe||(fe={});var dt=Ue[nt+"min"],St=Ue[nt+"max"];dt!==void 0&&St!==void 0&&(fe[tt]=[de(Re,dt),de(Re,St)].sort(Y))}else je||(je={}),je[tt]=Ue.map(pe(Re))}fe&&($e.range=fe),je&&($e.lassoPoints=je)}}function Qt(Ne){var $e=Ne.plotinfo;return $e.fillRangeItems||_t(Ne.xaxes.concat(Ne.yaxes))}function fr(Ne,$e){Ne.emit("plotly_selecting",$e)}function Vt(Ne,$e){$e&&($e.selections=(Ne.layout||{}).selections||[]),Ne.emit("plotly_selected",$e)}function rr(Ne){Ne.emit("plotly_deselect",null)}$.exports={reselect:ke,prepSelect:Ee,clearOutline:j,clearSelectionsCache:D,selectOnClick:Te}}}),ky=i({"src/components/annotations/arrow_paths.js"(U,$){$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]}}),Xf=i({"src/constants/axis_placeable_objects.js"(U,$){$.exports={axisRefDescription:function(h,c,u){return["If set to a",h,"axis id (e.g. *"+h+"* or","*"+h+"2*), the `"+h+"` position refers to a",h,"coordinate. If set to *paper*, the `"+h+"`","position refers to the distance from the",c,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",c,"("+u+"). If set to a",h,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",c,"of the domain of that axis: e.g.,","*"+h+"2 domain* refers to the domain of the second",h," axis and a",h,"position of 0.5 refers to the","point between the",c,"and the",u,"of the domain of the","second",h,"axis."].join(" ")}}}}),hd=i({"src/components/annotations/attributes.js"(U,$){var h=ky(),c=er(),u=ha(),p=Si().templatedArray;Xf(),$.exports=p("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:h.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:h.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",u.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",u.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:c({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})}}),Sm=i({"src/traces/scatter/constants.js"(U,$){$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}}}),F5=i({"src/traces/scatter/fillcolor_attribute.js"(U,$){$.exports=function(c){return{valType:"color",editType:"style",anim:!0}}}}),yu=i({"src/traces/scatter/attributes.js"(U,$){var h=Pl().axisHoverFormat,c=ea().texttemplateAttrs,u=ea().hovertemplateAttrs,p=ct(),v=er(),m=si().dash,g=si().pattern,w=di(),l=Sm(),T=It().extendFlat,y=F5();function S(A){return{valType:"any",dflt:0,editType:"calc"}}function R(A){return{valType:"any",editType:"calc"}}function M(A){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:S(),yperiod:S(),xperiod0:R(),yperiod0:R(),xperiodalignment:M(),yperiodalignment:M(),xhoverformat:h("x"),yhoverformat:h("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:c({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:u({},{keys:l.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:T({},m,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:y(!0),fillgradient:T({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:g,marker:T({symbol:{valType:"enumerated",values:w.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:T({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},p("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},p("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:v({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}}}),Sy=i({"src/components/selections/attributes.js"(U,$){var h=hd(),c=yu().line,u=si().dash,p=It().extendFlat,v=Ni().overrideAll,m=Si().templatedArray;Xf(),$.exports=v(m("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:p({},h.xref,{}),yref:p({},h.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:c.color,width:p({},c.width,{min:1,dflt:1}),dash:p({},u,{dflt:"dot"})}}),"arraydraw","from-root")}}),I5=i({"src/components/selections/defaults.js"(U,$){var h=kr(),c=ji(),u=Tn(),p=Sy(),v=qt();$.exports=function(w,l){u(w,l,{name:"selections",handleItemDefaults:m});for(var T=l.selections,y=0;y<T.length;y++){var S=T[y];S&&S.path===void 0&&(S.x0===void 0||S.x1===void 0||S.y0===void 0||S.y1===void 0)&&(l.selections[y]=null)}};function m(g,w,l){function T(X,Q){return h.coerce(g,w,p,X,Q)}var y=T("path"),S=y?"path":"rect",R=T("type",S),M=R!=="path";M&&delete w.path,T("opacity"),T("line.color"),T("line.width"),T("line.dash");for(var A=["x","y"],C=0;C<2;C++){var j=A[C],b={_fullLayout:l},k,E,F,P=c.coerceRef(g,w,b,j);if(k=c.getFromId(b,P),k._selectionIndices.push(w._index),F=v.rangeToShapePosition(k),E=v.shapePositionToRange(k),M){var J=j+"0",H=j+"1",Y=g[J],Z=g[H];g[J]=E(g[J],!0),g[H]=E(g[H],!0),c.coercePosition(w,b,T,P,J),c.coercePosition(w,b,T,P,H);var z=w[J],q=w[H];z!==void 0&&q!==void 0&&(w[J]=F(z),w[H]=F(q),g[J]=Y,g[H]=Z)}}M&&h.noneOrAll(g,w,["x0","x1","y0","y1"])}}}),O5=i({"src/components/selections/draw_newselection/defaults.js"(U,$){$.exports=function(c,u,p){p("newselection.mode");var v=p("newselection.line.width");v&&(p("newselection.line.color"),p("newselection.line.dash")),p("activeselection.fillcolor"),p("activeselection.opacity")}}}),Zf=i({"src/plots/cartesian/include_components.js"(U,$){var h=mn(),c=kr(),u=pa();$.exports=function(v){return function(g,w){var l=g[v];if(Array.isArray(l))for(var T=h.subplotsRegistry.cartesian,y=T.idRegex,S=w._subplots,R=S.xaxis,M=S.yaxis,A=S.cartesian,C=w._has("cartesian"),j=0;j<l.length;j++){var b=l[j];if(c.isPlainObject(b)){var k=u.cleanId(b.xref,"x",!1),E=u.cleanId(b.yref,"y",!1),F=y.x.test(k),P=y.y.test(E);if(F||P){C||c.pushUnique(w._basePlotModules,T);var J=!1;F&&R.indexOf(k)===-1&&(R.push(k),J=!0),P&&M.indexOf(E)===-1&&(M.push(E),J=!0),J&&F&&P&&A.push(k+E)}}}}}}}),pd=i({"src/components/selections/index.js"(U,$){var h=Gf(),c=z5();$.exports={moduleType:"component",name:"selections",layoutAttributes:Sy(),supplyLayoutDefaults:I5(),supplyDrawNewSelectionDefaults:O5(),includeBasePlot:Zf()("selections"),draw:h.draw,drawOne:h.drawOne,reselect:c.reselect,prepSelect:c.prepSelect,clearOutline:c.clearOutline,clearSelectionsCache:c.clearSelectionsCache,selectOnClick:c.selectOnClick}}}),B5=i({"src/plots/cartesian/dragbox.js"(U,$){var h=d(),c=kr(),u=c.numberFormat,p=wt(),v=lu(),m=mn(),g=c.strTranslate,w=Ra(),l=pt(),T=di(),y=po(),S=ji(),R=ho(),M=Wa(),A=Ol(),C=A.selectingOrDrawing,j=A.freeMode,b=La().FROM_TL,k=hu(),E=fd().redrawReglTraces,F=Xi(),P=pa().getFromId,J=pd().prepSelect,H=pd().clearOutline,Y=pd().selectOnClick,Z=Hl(),z=ha(),q=z.MINDRAG,X=z.MINZOOM,Q=!0;function ee(ie,ge,_e,Se,De,Ge,Je,yt){var ut=ie._fullLayout._zoomlayer,vt=Je+yt==="nsew",Ae=(Je+yt).length===1,Fe,ke,Be,et,ht,jt,At,Pt,zt,Nt,Kt,_t,Qt,fr,Vt,rr,Ne,$e,Ue,fe,je,Pe,Re;_e+=ge.yaxis._shift;function tt(){if(Fe=ge.xaxis,ke=ge.yaxis,zt=Fe._length,Nt=ke._length,At=Fe._offset,Pt=ke._offset,Be={},Be[Fe._id]=Fe,et={},et[ke._id]=ke,Je&&yt)for(var Xe=ge.overlays,Ke=0;Ke<Xe.length;Ke++){var it=Xe[Ke].xaxis;Be[it._id]=it;var Tt=Xe[Ke].yaxis;et[Tt._id]=Tt}ht=oe(Be),jt=oe(et),Qt=W(ht,yt),fr=W(jt,Je),Vt=!fr&&!Qt,_t=D(ie,ie._fullLayout._axisMatchGroups,Be,et),Kt=D(ie,ie._fullLayout._axisConstraintGroups,Be,et,_t);var rt=Kt.isSubplotConstrained||_t.isSubplotConstrained;rr=yt||rt,Ne=Je||rt;var xt=ie._fullLayout;$e=xt._has("scattergl"),Ue=xt._has("splom"),fe=xt._has("svg")}tt();var nt=be(fr+Qt,ie._fullLayout.dragmode,vt),dt=le(ge,Je+yt+"drag",nt,_e,Se,De,Ge);if(Vt&&!vt)return dt.onmousedown=null,dt.style.pointerEvents="none",dt;var St={element:dt,gd:ie,plotinfo:ge};St.prepFn=function(Xe,Ke,it){var Tt=St.dragmode,rt=ie._fullLayout.dragmode;rt!==Tt&&(St.dragmode=rt),tt(),Pe=ie._fullLayout._invScaleX,Re=ie._fullLayout._invScaleY,Vt||(vt?Xe.shiftKey?rt==="pan"?rt="zoom":C(rt)||(rt="pan"):Xe.ctrlKey&&(rt="pan"):rt="pan"),j(rt)?St.minDrag=1:St.minDrag=void 0,C(rt)?(St.xaxes=ht,St.yaxes=jt,J(Xe,Ke,it,St,rt)):(St.clickFn=at,C(Tt)&&Dt(),Vt||(rt==="zoom"?(St.moveFn=Br,St.doneFn=Lr,St.minDrag=1,Vr(Xe,Ke,it)):rt==="pan"&&(St.moveFn=yn,St.doneFn=jn))),ie._fullLayout._redrag=function(){var xt=ie._dragdata;if(xt&&xt.element===dt){var Mt=ie._fullLayout.dragmode;C(Mt)||(tt(),we([0,0,zt,Nt]),St.moveFn(xt.dx,xt.dy))}}};function Dt(){St.plotinfo.selection=!1,H(ie)}function at(Xe,Ke){var it=St.gd;if(it._fullLayout._activeShapeIndex>=0){it._fullLayout._deactivateShape(it);return}var Tt=it._fullLayout.clickmode;if(ae(it),Xe===2&&!Ae&&mr(),vt)Tt.indexOf("select")>-1&&Y(Ke,it,ht,jt,ge.id,St),Tt.indexOf("event")>-1&&y.click(it,Ke,ge.id);else if(Xe===1&&Ae){var rt=Je?ke:Fe,xt=Je==="s"||yt==="w"?0:1,Mt=rt._name+".range["+xt+"]",Lt=ce(rt,xt),Xt="left",sr="middle";if(rt.fixedrange)return;Je?(sr=Je==="n"?"top":"bottom",rt.side==="right"&&(Xt="right")):yt==="e"&&(Xt="right"),it._context.showAxisRangeEntryBoxes&&h.select(dt).call(w.makeEditable,{gd:it,immediate:!0,background:it._fullLayout.paper_bgcolor,text:String(Lt),fill:rt.tickfont?rt.tickfont.color:"#444",horizontalAlign:Xt,verticalAlign:sr}).on("edit",function(or){var Dr=rt.d2r(or);Dr!==void 0&&m.call("_guiRelayout",it,Mt,Dr)})}}M.init(St);var Ct,Ht,Ut,Ar,Rr,$r,Mr,Ir,gr,br;function Vr(Xe,Ke,it){var Tt=dt.getBoundingClientRect();Ct=Ke-Tt.left,Ht=it-Tt.top,ie._fullLayout._calcInverseTransform(ie);var rt=c.apply3DTransform(ie._fullLayout._invTransform)(Ct,Ht);Ct=rt[0],Ht=rt[1],Ut={l:Ct,r:Ct,w:0,t:Ht,b:Ht,h:0},Ar=ie._hmpixcount?ie._hmlumcount/ie._hmpixcount:p(ie._fullLayout.plot_bgcolor).getLuminance(),Rr="M0,0H"+zt+"V"+Nt+"H0V0",$r=!1,Mr="xy",br=!1,Ir=Ee(ut,Ar,At,Pt,Rr),gr=Te(ut,At,Pt)}function Br(Xe,Ke){if(ie._transitioningWithDuration)return!1;var it=Math.max(0,Math.min(zt,Pe*Xe+Ct)),Tt=Math.max(0,Math.min(Nt,Re*Ke+Ht)),rt=Math.abs(it-Ct),xt=Math.abs(Tt-Ht);Ut.l=Math.min(Ct,it),Ut.r=Math.max(Ct,it),Ut.t=Math.min(Ht,Tt),Ut.b=Math.max(Ht,Tt);function Mt(){Mr="",Ut.r=Ut.l,Ut.t=Ut.b,gr.attr("d","M0,0Z")}if(Kt.isSubplotConstrained)rt>X||xt>X?(Mr="xy",rt/zt>xt/Nt?(xt=rt*Nt/zt,Ht>Tt?Ut.t=Ht-xt:Ut.b=Ht+xt):(rt=xt*zt/Nt,Ct>it?Ut.l=Ct-rt:Ut.r=Ct+rt),gr.attr("d",re(Ut))):Mt();else if(_t.isSubplotConstrained)if(rt>X||xt>X){Mr="xy";var Lt=Math.min(Ut.l/zt,(Nt-Ut.b)/Nt),Xt=Math.max(Ut.r/zt,(Nt-Ut.t)/Nt);Ut.l=Lt*zt,Ut.r=Xt*zt,Ut.b=(1-Lt)*Nt,Ut.t=(1-Xt)*Nt,gr.attr("d",re(Ut))}else Mt();else!fr||xt<Math.min(Math.max(rt*.6,q),X)?rt<q||!Qt?Mt():(Ut.t=0,Ut.b=Nt,Mr="x",gr.attr("d",K(Ut,Ht))):!Qt||rt<Math.min(xt*.6,X)?(Ut.l=0,Ut.r=zt,Mr="y",gr.attr("d",V(Ut,Ct))):(Mr="xy",gr.attr("d",re(Ut)));Ut.w=Ut.r-Ut.l,Ut.h=Ut.b-Ut.t,Mr&&(br=!0),ie._dragged=br,He(Ir,gr,Ut,Rr,$r,Ar),Ur(),ie.emit("plotly_relayouting",je),$r=!0}function Ur(){je={},(Mr==="xy"||Mr==="x")&&(de(ht,Ut.l/zt,Ut.r/zt,je,Kt.xaxes),xn("x",je)),(Mr==="xy"||Mr==="y")&&(de(jt,(Nt-Ut.b)/Nt,(Nt-Ut.t)/Nt,je,Kt.yaxes),xn("y",je))}function Lr(){Ur(),ae(ie),jn(),G(ie)}var hr=[0,0,zt,Nt],Or=null,fn=z.REDRAWDELAY,An=ge.mainplot?ie._fullLayout._plots[ge.mainplot]:ge;function qr(Xe){if(!ie._context._scrollZoom.cartesian&&!ie._fullLayout._enablescrollzoom)return;if(Dt(),ie._transitioningWithDuration){Xe.preventDefault(),Xe.stopPropagation();return}tt(),clearTimeout(Or);var Ke=-Xe.deltaY;if(isFinite(Ke)||(Ke=Xe.wheelDelta/10),!isFinite(Ke)){c.log("Did not find wheel motion attributes: ",Xe);return}var it=Math.exp(-Math.min(Math.max(Ke,-20),20)/200),Tt=An.draglayer.select(".nsewdrag").node().getBoundingClientRect(),rt=(Xe.clientX-Tt.left)/Tt.width,xt=(Tt.bottom-Xe.clientY)/Tt.height,Mt;function Lt(Xt,sr,or){if(Xt.fixedrange)return;var Dr=c.simpleMap(Xt.range,Xt.r2l),_r=Dr[0]+(Dr[1]-Dr[0])*sr;function Zr(Er){return Xt.l2r(_r+(Er-_r)*or)}Xt.range=Dr.map(Zr)}if(rr){for(yt||(rt=.5),Mt=0;Mt<ht.length;Mt++)Lt(ht[Mt],rt,it);xn("x"),hr[2]*=it,hr[0]+=hr[2]*rt*(1/it-1)}if(Ne){for(Je||(xt=.5),Mt=0;Mt<jt.length;Mt++)Lt(jt[Mt],xt,it);xn("y"),hr[3]*=it,hr[1]+=hr[3]*(1-xt)*(1/it-1)}we(hr),Xn(),ie.emit("plotly_relayouting",je),Or=setTimeout(function(){ie._fullLayout&&(hr=[0,0,zt,Nt],jn())},fn),Xe.preventDefault()}Je.length*yt.length!==1&&B(dt,qr);function yn(Xe,Ke){if(Xe=Xe*Pe,Ke=Ke*Re,ie._transitioningWithDuration)return;if(ie._fullLayout._replotting=!0,Qt==="ew"||fr==="ns"){var it=Qt?-Xe:0,Tt=fr?-Ke:0;if(_t.isSubplotConstrained){if(Qt&&fr){var rt=(Xe/zt-Ke/Nt)/2;Xe=rt*zt,Ke=-rt*Nt,it=-Xe,Tt=-Ke}fr?it=-Tt*zt/Nt:Tt=-it*Nt/zt}Qt&&(pe(ht,Xe),xn("x")),fr&&(pe(jt,Ke),xn("y")),we([it,Tt,zt,Nt]),Xn(),ie.emit("plotly_relayouting",je);return}function xt(Zr,Er,Gr){for(var Qr=1-Er,En,Sn,gi=0;gi<Zr.length;gi++){var ei=Zr[gi];if(!ei.fixedrange){En=ei,Sn=ei._rl[Qr]+(ei._rl[Er]-ei._rl[Qr])/he(Gr/ei._length);var ai=ei.l2r(Sn);ai!==!1&&ai!==void 0&&(ei.range[Er]=ai)}}return En._length*(En._rl[Er]-Sn)/(En._rl[Er]-En._rl[Qr])}var Mt=Qt==="w"==(fr==="n")?1:-1;if(Qt&&fr&&(Kt.isSubplotConstrained||_t.isSubplotConstrained)){var Lt=(Xe/zt+Mt*Ke/Nt)/2;Xe=Lt*zt,Ke=Mt*Lt*Nt}var Xt,sr;if(Qt==="w"?Xe=xt(ht,0,Xe):Qt==="e"?Xe=xt(ht,1,-Xe):Qt||(Xe=0),fr==="n"?Ke=xt(jt,1,Ke):fr==="s"?Ke=xt(jt,0,-Ke):fr||(Ke=0),Xt=Qt==="w"?Xe:0,sr=fr==="n"?Ke:0,Kt.isSubplotConstrained&&!_t.isSubplotConstrained||_t.isSubplotConstrained&&Qt&&fr&&Mt>0){var or;if(_t.isSubplotConstrained||!Qt&&fr.length===1){for(or=0;or<ht.length;or++)ht[or].range=ht[or]._r.slice(),Z(ht[or],1-Ke/Nt);Xe=Ke*zt/Nt,Xt=Xe/2}if(_t.isSubplotConstrained||!fr&&Qt.length===1){for(or=0;or<jt.length;or++)jt[or].range=jt[or]._r.slice(),Z(jt[or],1-Xe/zt);Ke=Xe*Nt/zt,sr=Ke/2}}(!_t.isSubplotConstrained||!fr)&&xn("x"),(!_t.isSubplotConstrained||!Qt)&&xn("y");var Dr=zt-Xe,_r=Nt-Ke;_t.isSubplotConstrained&&!(Qt&&fr)&&(Qt?(sr=Xt?0:Xe*Nt/zt,_r=Dr*Nt/zt):(Xt=sr?0:Ke*zt/Nt,Dr=_r*zt/Nt)),we([Xt,sr,Dr,_r]),Xn(),ie.emit("plotly_relayouting",je)}function xn(Xe,Ke){for(var it=_t.isSubplotConstrained?{x:jt,y:ht}[Xe]:_t[Xe+"axes"],Tt=_t.isSubplotConstrained?{x:ht,y:jt}[Xe]:[],rt=0;rt<it.length;rt++){var xt=it[rt],Mt=xt._id,Lt=_t.xLinks[Mt]||_t.yLinks[Mt],Xt=Tt[0]||Be[Lt]||et[Lt];Xt&&(Ke?(Ke[xt._name+".range[0]"]=Ke[Xt._name+".range[0]"],Ke[xt._name+".range[1]"]=Ke[Xt._name+".range[1]"]):xt.range=Xt.range.slice())}}function Xn(){var Xe=[],Ke;function it(Mt){for(Ke=0;Ke<Mt.length;Ke++)Mt[Ke].fixedrange||Xe.push(Mt[Ke]._id)}function Tt(Mt,Lt){for(Ke=0;Ke<Mt.length;Ke++){var Xt=Mt[Ke],sr=Xt[Lt];!Xt.fixedrange&&sr.tickmode==="sync"&&Xe.push(sr._id)}}for(rr&&(it(ht),it(Kt.xaxes),it(_t.xaxes),Tt(ge.overlays,"xaxis")),Ne&&(it(jt),it(Kt.yaxes),it(_t.yaxes),Tt(ge.overlays,"yaxis")),je={},Ke=0;Ke<Xe.length;Ke++){var rt=Xe[Ke],xt=P(ie,rt);S.drawOne(ie,xt,{skipTitle:!0}),je[xt._name+".range[0]"]=xt.range[0],je[xt._name+".range[1]"]=xt.range[1]}S.redrawComponents(ie,Xe)}function mr(){if(!ie._transitioningWithDuration){var Xe=ie._context.doubleClick,Ke=[];Qt&&(Ke=Ke.concat(ht)),fr&&(Ke=Ke.concat(jt)),_t.xaxes&&(Ke=Ke.concat(_t.xaxes)),_t.yaxes&&(Ke=Ke.concat(_t.yaxes));var it={},Tt,rt;if(Xe==="reset+autosize")for(Xe="autosize",rt=0;rt<Ke.length;rt++){Tt=Ke[rt];var xt=Tt._rangeInitial0,Mt=Tt._rangeInitial1,Lt=xt!==void 0||Mt!==void 0;if(Lt&&(xt!==void 0&&xt!==Tt.range[0]||Mt!==void 0&&Mt!==Tt.range[1])||!Lt&&Tt.autorange!==!0){Xe="reset";break}}if(Xe==="autosize")for(rt=0;rt<Ke.length;rt++)Tt=Ke[rt],Tt.fixedrange||(it[Tt._name+".autorange"]=!0);else if(Xe==="reset"){for((Qt||Kt.isSubplotConstrained)&&(Ke=Ke.concat(Kt.xaxes)),fr&&!Kt.isSubplotConstrained&&(Ke=Ke.concat(Kt.yaxes)),Kt.isSubplotConstrained&&(Qt?fr||(Ke=Ke.concat(jt)):Ke=Ke.concat(ht)),rt=0;rt<Ke.length;rt++)if(Tt=Ke[rt],!Tt.fixedrange){var Xt=Tt._name,sr=Tt._autorangeInitial;Tt._rangeInitial0===void 0&&Tt._rangeInitial1===void 0?it[Xt+".autorange"]=!0:Tt._rangeInitial0===void 0?(it[Xt+".autorange"]=sr,it[Xt+".range"]=[null,Tt._rangeInitial1]):Tt._rangeInitial1===void 0?(it[Xt+".range"]=[Tt._rangeInitial0,null],it[Xt+".autorange"]=sr):it[Xt+".range"]=[Tt._rangeInitial0,Tt._rangeInitial1]}}ie.emit("plotly_doubleclick",null),m.call("_guiRelayout",ie,it)}}function jn(){we([0,0,zt,Nt]),c.syncOrAsync([F.previousPromises,function(){ie._fullLayout._replotting=!1,m.call("_guiRelayout",ie,je)}],ie)}function we(Xe){var Ke=ie._fullLayout,it=Ke._plots,Tt=Ke._subplots.cartesian,rt,xt,Mt,Lt;if(Ue&&m.subplotsRegistry.splom.drag(ie),$e){for(rt=0;rt<Tt.length;rt++)if(xt=it[Tt[rt]],Mt=xt.xaxis,Lt=xt.yaxis,xt._scene){Mt.limitRange&&Mt.limitRange(),Lt.limitRange&&Lt.limitRange();var Xt=c.simpleMap(Mt.range,Mt.r2l),sr=c.simpleMap(Lt.range,Lt.r2l);xt._scene.update({range:[Xt[0],sr[0],Xt[1],sr[1]]})}}if((Ue||$e)&&(k(ie),E(ie)),fe){var or=Xe[2]/Fe._length,Dr=Xe[3]/ke._length;for(rt=0;rt<Tt.length;rt++){xt=it[Tt[rt]],Mt=xt.xaxis,Lt=xt.yaxis;var _r=(rr||_t.isSubplotConstrained)&&!Mt.fixedrange&&Be[Mt._id],Zr=(Ne||_t.isSubplotConstrained)&&!Lt.fixedrange&&et[Lt._id],Er,Gr,Qr,En;if(_r?(Er=or,Qr=yt||_t.isSubplotConstrained?Xe[0]:ft(Mt,Er)):_t.xaHash[Mt._id]?(Er=or,Qr=Xe[0]*Mt._length/Fe._length):_t.yaHash[Mt._id]?(Er=Dr,Qr=fr==="ns"?-Xe[1]*Mt._length/ke._length:ft(Mt,Er,{n:"top",s:"bottom"}[fr])):(Er=me(Mt,or,Dr),Qr=mt(Mt,Er)),Er>1&&(Mt.maxallowed!==void 0&&rr===(Mt.range[0]<Mt.range[1]?"e":"w")||Mt.minallowed!==void 0&&rr===(Mt.range[0]<Mt.range[1]?"w":"e"))&&(Er=1,Qr=0),Zr?(Gr=Dr,En=Je||_t.isSubplotConstrained?Xe[1]:ft(Lt,Gr)):_t.yaHash[Lt._id]?(Gr=Dr,En=Xe[1]*Lt._length/ke._length):_t.xaHash[Lt._id]?(Gr=or,En=Qt==="ew"?-Xe[0]*Lt._length/Fe._length:ft(Lt,Gr,{e:"right",w:"left"}[Qt])):(Gr=me(Lt,or,Dr),En=mt(Lt,Gr)),Gr>1&&(Lt.maxallowed!==void 0&&Ne===(Lt.range[0]<Lt.range[1]?"n":"s")||Lt.minallowed!==void 0&&Ne===(Lt.range[0]<Lt.range[1]?"s":"n"))&&(Gr=1,En=0),!(!Er&&!Gr)){Er||(Er=1),Gr||(Gr=1);var Sn=Mt._offset-Qr/Er,gi=Lt._offset-En/Gr;xt.clipRect.call(T.setTranslate,Qr,En).call(T.setScale,Er,Gr),xt.plot.call(T.setTranslate,Sn,gi).call(T.setScale,1/Er,1/Gr),(Er!==xt.xScaleFactor||Gr!==xt.yScaleFactor)&&(T.setPointGroupScale(xt.zoomScalePts,Er,Gr),T.setTextPointsScale(xt.zoomScaleTxt,Er,Gr)),T.hideOutsideRangePoints(xt.clipOnAxisFalseTraces,xt),xt.xScaleFactor=Er,xt.yScaleFactor=Gr}}}}function me(Xe,Ke,it){return Xe.fixedrange?0:rr&&Kt.xaHash[Xe._id]?Ke:Ne&&(Kt.isSubplotConstrained?Kt.xaHash:Kt.yaHash)[Xe._id]?it:0}function mt(Xe,Ke){return Ke?(Xe.range=Xe._r.slice(),Z(Xe,Ke),ft(Xe,Ke)):0}function ft(Xe,Ke,it){return Xe._length*(1-Ke)*b[it||Xe.constraintoward||"middle"]}return dt}function ne(ie,ge,_e,Se){var De=c.ensureSingle(ie.draglayer,ge,_e,function(Ge){Ge.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ie.id)});return De.call(R,Se),De.node()}function le(ie,ge,_e,Se,De,Ge,Je){var yt=ne(ie,"rect",ge,_e);return h.select(yt).call(T.setRect,Se,De,Ge,Je),yt}function W(ie,ge){for(var _e=0;_e<ie.length;_e++)if(!ie[_e].fixedrange)return ge;return""}function ce(ie,ge){var _e=ie.range[ge],Se=Math.abs(_e-ie.range[1-ge]),De;return ie.type==="date"?_e:ie.type==="log"?(De=Math.ceil(Math.max(0,-Math.log(Se)/Math.LN10))+3,u("."+De+"g")(Math.pow(10,_e))):(De=Math.floor(Math.log(Math.abs(_e))/Math.LN10)-Math.floor(Math.log(Se)/Math.LN10)+4,u("."+String(De)+"g")(_e))}function de(ie,ge,_e,Se,De){for(var Ge=0;Ge<ie.length;Ge++){var Je=ie[Ge];if(!Je.fixedrange)if(Je.rangebreaks){var yt=Je._id.charAt(0)==="y",ut=yt?1-ge:ge,vt=yt?1-_e:_e;Se[Je._name+".range[0]"]=Je.l2r(Je.p2l(ut*Je._length)),Se[Je._name+".range[1]"]=Je.l2r(Je.p2l(vt*Je._length))}else{var Ae=Je._rl[0],Fe=Je._rl[1]-Ae;Se[Je._name+".range[0]"]=Je.l2r(Ae+Fe*ge),Se[Je._name+".range[1]"]=Je.l2r(Ae+Fe*_e)}}if(De&&De.length){var ke=(ge+(1-_e))/2;de(De,ke,1-ke,Se,[])}}function pe(ie,ge){for(var _e=0;_e<ie.length;_e++){var Se=ie[_e];if(!Se.fixedrange){if(Se.rangebreaks){var De=0,Ge=Se._length,Je=Se.p2l(De+ge)-Se.p2l(De),yt=Se.p2l(Ge+ge)-Se.p2l(Ge),ut=(Je+yt)/2;Se.range=[Se.l2r(Se._rl[0]-ut),Se.l2r(Se._rl[1]-ut)]}else Se.range=[Se.l2r(Se._rl[0]-ge/Se._m),Se.l2r(Se._rl[1]-ge/Se._m)];Se.limitRange&&Se.limitRange()}}}function he(ie){return 1-(ie>=0?Math.min(ie,.9):1/(1/Math.max(ie,-.3)+3.222))}function be(ie,ge,_e){return ie?ie==="nsew"?_e?"":ge==="pan"?"move":"crosshair":ie.toLowerCase()+"-resize":"pointer"}function Ee(ie,ge,_e,Se,De){return ie.append("path").attr("class","zoombox").style({fill:ge>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",g(_e,Se)).attr("d",De+"Z")}function Te(ie,ge,_e){return ie.append("path").attr("class","zoombox-corners").style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,opacity:0}).attr("transform",g(ge,_e)).attr("d","M0,0Z")}function He(ie,ge,_e,Se,De,Ge){ie.attr("d",Se+"M"+_e.l+","+_e.t+"v"+_e.h+"h"+_e.w+"v-"+_e.h+"h-"+_e.w+"Z"),te(ie,ge,De,Ge)}function te(ie,ge,_e,Se){_e||(ie.transition().style("fill",Se>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ge.transition().style("opacity",1).duration(200))}function ae(ie){h.select(ie).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function G(ie){Q&&ie.data&&ie._context.showTips&&(c.notifier(c._(ie,"Double-click to zoom back out"),"long"),Q=!1)}function K(ie,ge){return"M"+(ie.l-.5)+","+(ge-X-.5)+"h-3v"+(2*X+1)+"h3ZM"+(ie.r+.5)+","+(ge-X-.5)+"h3v"+(2*X+1)+"h-3Z"}function V(ie,ge){return"M"+(ge-X-.5)+","+(ie.t-.5)+"v-3h"+(2*X+1)+"v3ZM"+(ge-X-.5)+","+(ie.b+.5)+"v3h"+(2*X+1)+"v-3Z"}function re(ie){var ge=Math.floor(Math.min(ie.b-ie.t,ie.r-ie.l,X)/2);return"M"+(ie.l-3.5)+","+(ie.t-.5+ge)+"h3v"+-ge+"h"+ge+"v-3h-"+(ge+3)+"ZM"+(ie.r+3.5)+","+(ie.t-.5+ge)+"h-3v"+-ge+"h"+-ge+"v-3h"+(ge+3)+"ZM"+(ie.r+3.5)+","+(ie.b+.5-ge)+"h-3v"+ge+"h"+-ge+"v3h"+(ge+3)+"ZM"+(ie.l-3.5)+","+(ie.b+.5-ge)+"h3v"+ge+"h"+ge+"v3h-"+(ge+3)+"Z"}function D(ie,ge,_e,Se,De){for(var Ge=!1,Je={},yt={},ut,vt,Ae,Fe,ke=(De||{}).xaHash,Be=(De||{}).yaHash,et=0;et<ge.length;et++){var ht=ge[et];for(ut in _e)if(ht[ut]){for(Ae in ht)!(De&&(ke[Ae]||Be[Ae]))&&!(Ae.charAt(0)==="x"?_e:Se)[Ae]&&(Je[Ae]=ut);for(vt in Se)!(De&&(ke[vt]||Be[vt]))&&ht[vt]&&(Ge=!0)}for(vt in Se)if(ht[vt])for(Fe in ht)!(De&&(ke[Fe]||Be[Fe]))&&!(Fe.charAt(0)==="x"?_e:Se)[Fe]&&(yt[Fe]=vt)}Ge&&(c.extendFlat(Je,yt),yt={});var jt={},At=[];for(Ae in Je){var Pt=P(ie,Ae);At.push(Pt),jt[Pt._id]=Pt}var zt={},Nt=[];for(Fe in yt){var Kt=P(ie,Fe);Nt.push(Kt),zt[Kt._id]=Kt}return{xaHash:jt,yaHash:zt,xaxes:At,yaxes:Nt,xLinks:Je,yLinks:yt,isSubplotConstrained:Ge}}function B(ie,ge){if(!v)ie.onwheel!==void 0?ie.onwheel=ge:ie.onmousewheel!==void 0?ie.onmousewheel=ge:ie.isAddedWheelEvent||(ie.isAddedWheelEvent=!0,ie.addEventListener("wheel",ge,{passive:!1}));else{var _e=ie.onwheel!==void 0?"wheel":"mousewheel";ie._onwheel&&ie.removeEventListener(_e,ie._onwheel),ie._onwheel=ge,ie.addEventListener(_e,ge,{passive:!1})}}function oe(ie){var ge=[];for(var _e in ie)ge.push(ie[_e]);return ge}$.exports={makeDragBox:ee,makeDragger:ne,makeRectDragger:le,makeZoombox:Ee,makeCorners:Te,updateZoombox:He,xyCorners:re,transitionZoombox:te,removeZoombox:ae,showDoubleClickNotifier:G,attachWheelEventHandler:B}}}),My=i({"src/plots/cartesian/graph_interact.js"(U){var $=d(),h=po(),c=Wa(),u=ho(),p=B5().makeDragBox,v=ha().DRAGGERSIZE;U.initInteractions=function(g){var w=g._fullLayout;if(g._context.staticPlot){$.select(g).selectAll(".drag").remove();return}if(!(!w._has("cartesian")&&!w._has("splom"))){var l=Object.keys(w._plots||{}).sort(function(y,S){if((w._plots[y].mainplot&&!0)===(w._plots[S].mainplot&&!0)){var R=y.split("y"),M=S.split("y");return R[0]===M[0]?Number(R[1]||1)-Number(M[1]||1):Number(R[0]||1)-Number(M[0]||1)}return w._plots[y].mainplot?1:-1});l.forEach(function(y){var S=w._plots[y],R=S.xaxis,M=S.yaxis;if(!S.mainplot){var A=p(g,S,R._offset,M._offset,R._length,M._length,"ns","ew");A.onmousemove=function(b){g._fullLayout._rehover=function(){g._fullLayout._hoversubplot===y&&g._fullLayout._plots[y]&&h.hover(g,b,y)},h.hover(g,b,y),g._fullLayout._lasthover=A,g._fullLayout._hoversubplot=y},A.onmouseout=function(b){g._dragging||(g._fullLayout._hoversubplot=null,c.unhover(g,b))},g._context.showAxisDragHandles&&(p(g,S,R._offset-v,M._offset-v,v,v,"n","w"),p(g,S,R._offset+R._length,M._offset-v,v,v,"n","e"),p(g,S,R._offset-v,M._offset+M._length,v,v,"s","w"),p(g,S,R._offset+R._length,M._offset+M._length,v,v,"s","e"))}if(g._context.showAxisDragHandles){if(y===R._mainSubplot){var C=R._mainLinePosition;R.side==="top"&&(C-=v),p(g,S,R._offset+R._length*.1,C,R._length*.8,v,"","ew"),p(g,S,R._offset,C,R._length*.1,v,"","w"),p(g,S,R._offset+R._length*.9,C,R._length*.1,v,"","e")}if(y===M._mainSubplot){var j=M._mainLinePosition;M.side!=="right"&&(j-=v),p(g,S,j,M._offset+M._length*.1,v,M._length*.8,"ns",""),p(g,S,j,M._offset+M._length*.9,v,M._length*.1,"s",""),p(g,S,j,M._offset,v,M._length*.1,"n","")}}});var T=w._hoverlayer.node();T.onmousemove=function(y){y.target=g._fullLayout._lasthover,h.hover(g,y,w._hoversubplot)},T.onclick=function(y){y.target=g._fullLayout._lasthover,h.click(g,y)},T.onmousedown=function(y){g._fullLayout._lasthover.onmousedown(y)},U.updateFx(g)}},U.updateFx=function(m){var g=m._fullLayout,w=g.dragmode==="pan"?"move":"crosshair";u(g._draggers,w)}}}),H5=i({"src/plot_api/container_array_match.js"(U,$){var h=mn();$.exports=function(u){for(var p=h.layoutArrayContainers,v=h.layoutArrayRegexes,m=u.split("[")[0],g,w,l=0;l<v.length;l++)if(w=u.match(v[l]),w&&w.index===0){g=w[0];break}if(g||(g=p[p.indexOf(m)]),!g)return!1;var T=u.substr(g.length);return T?(w=T.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),w?{array:g,index:Number(w[1]),property:w[3]||""}:!1):{array:g,index:"",property:""}}}}),W5=i({"src/plot_api/manage_arrays.js"(U){var $=Ye(),h=Bt(),c=vr(),u=zr().sorterAsc,p=mn();U.containerArrayMatch=H5();var v=U.isAddVal=function(w){return w==="add"||$(w)},m=U.isRemoveVal=function(w){return w===null||w==="remove"};U.applyContainerArrayChanges=function(w,l,T,y,S){var R=l.astr,M=p.getComponentMethod(R,"supplyLayoutDefaults"),A=p.getComponentMethod(R,"draw"),C=p.getComponentMethod(R,"drawOne"),j=y.replot||y.recalc||M===h||A===h,b=w.layout,k=w._fullLayout;if(T[""]){Object.keys(T).length>1&&c.warn("Full array edits are incompatible with other edits",R);var E=T[""][""];if(m(E))l.set(null);else if(Array.isArray(E))l.set(E);else return c.warn("Unrecognized full array edit value",R,E),!0;return j?!1:(M(b,k),A(w),!0)}var F=Object.keys(T).map(Number).sort(u),P=l.get(),J=P||[],H=S(k,R).get(),Y=[],Z=-1,z=J.length,q,X,Q,ee,ne,le,W,ce;for(q=0;q<F.length;q++){if(Q=F[q],ee=T[Q],ne=Object.keys(ee),le=ee[""],W=v(le),Q<0||Q>J.length-(W?0:1)){c.warn("index out of range",R,Q);continue}if(le!==void 0)ne.length>1&&c.warn("Insertion & removal are incompatible with edits to the same index.",R,Q),m(le)?Y.push(Q):W?(le==="add"&&(le={}),J.splice(Q,0,le),H&&H.splice(Q,0,{})):c.warn("Unrecognized full object edit value",R,Q,le),Z===-1&&(Z=Q);else for(X=0;X<ne.length;X++)ce=R+"["+Q+"].",S(J[Q],ne[X],ce).set(ee[ne[X]])}for(q=Y.length-1;q>=0;q--)J.splice(Y[q],1),H&&H.splice(Y[q],1);if(J.length?P||l.set(J):l.set(null),j)return!1;if(M(b,k),C!==h){var de;if(Z===-1)de=F;else{for(z=Math.max(J.length,z),de=[],q=0;q<F.length&&(Q=F[q],!(Q>=Z));q++)de.push(Q);for(q=Z;q<z;q++)de.push(q)}for(q=0;q<de.length;q++)C(w,de[q])}else A(w);return!0}}}),q5=i({"src/plot_api/helpers.js"(U){var $=xe();ba();var h=mn(),c=kr(),u=Xi(),p=pa(),v=pt(),m=p.cleanId,g=p.getFromTrace,w=h.traceIs;U.clearPromiseQueue=function(j){Array.isArray(j._promises)&&j._promises.length>0&&c.log("Clearing previous rejected promises from queue."),j._promises=[]},U.cleanLayout=function(j){var b;j||(j={}),j.xaxis1&&(j.xaxis||(j.xaxis=j.xaxis1),delete j.xaxis1),j.yaxis1&&(j.yaxis||(j.yaxis=j.yaxis1),delete j.yaxis1),j.scene1&&(j.scene||(j.scene=j.scene1),delete j.scene1);var k=(u.subplotsRegistry.cartesian||{}).attrRegex;(u.subplotsRegistry.polar||{}).attrRegex,(u.subplotsRegistry.ternary||{}).attrRegex,(u.subplotsRegistry.gl3d||{}).attrRegex;var E=Object.keys(j);for(b=0;b<E.length;b++){var F=E[b];if(k&&k.test(F)){var P=j[F];P.anchor&&P.anchor!=="free"&&(P.anchor=m(P.anchor)),P.overlaying&&(P.overlaying=m(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),P.insiderange&&delete P.range,delete P.islog,delete P.isdate,delete P.categories,R(P,"domain")&&delete P.domain}}var J=Array.isArray(j.annotations)?j.annotations.length:0;for(b=0;b<J;b++){var H=j.annotations[b];c.isPlainObject(H)&&(l(H,"xref"),l(H,"yref"))}var Y=Array.isArray(j.shapes)?j.shapes.length:0;for(b=0;b<Y;b++){var Z=j.shapes[b];c.isPlainObject(Z)&&(l(Z,"xref"),l(Z,"yref"))}var z=Array.isArray(j.images)?j.images.length:0;for(b=0;b<z;b++){var q=j.images[b];c.isPlainObject(q)&&(l(q,"xref"),l(q,"yref"))}var X=j.legend;return X&&(X.x>3?(X.x=1.02,X.xanchor="left"):X.x<-2&&(X.x=-.02,X.xanchor="right"),X.y>3?(X.y=1.02,X.yanchor="bottom"):X.y<-2&&(X.y=-.02,X.yanchor="top")),j.dragmode==="rotate"&&(j.dragmode="orbit"),v.clean(j),j.template&&j.template.layout&&U.cleanLayout(j.template.layout),j};function l(j,b){var k=j[b],E=b.charAt(0);k&&k!=="paper"&&(j[b]=m(k,E,!0))}U.cleanData=function(j){for(var b=0;b<j.length;b++){var k=j[b],E;if(k.type==="histogramy"&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.type==="histogramy"&&U.swapXYData(k),(k.type==="histogramx"||k.type==="histogramy")&&(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=m(k.xaxis,"x")),k.yaxis&&(k.yaxis=m(k.yaxis,"y")),w(k,"gl3d")&&k.scene&&(k.scene=u.subplotsRegistry.gl3d.cleanId(k.scene)),!w(k,"pie-like")&&!w(k,"bar-like"))if(Array.isArray(k.textposition))for(E=0;E<k.textposition.length;E++)k.textposition[E]=S(k.textposition[E]);else k.textposition&&(k.textposition=S(k.textposition));var F=h.getModule(k);if(F&&F.colorbar){var P=F.colorbar.container,J=P?k[P]:k;J&&J.colorscale&&(J.colorscale==="YIGnBu"&&(J.colorscale="YlGnBu"),J.colorscale==="YIOrRd"&&(J.colorscale="YlOrRd"))}if(k.type==="surface"&&c.isPlainObject(k.contours)){var H=["x","y","z"];for(E=0;E<H.length;E++){var Y=k.contours[H[E]];c.isPlainObject(Y)&&(Y.highlightColor&&(Y.highlightcolor=Y.highlightColor,delete Y.highlightColor),Y.highlightWidth&&(Y.highlightwidth=Y.highlightWidth,delete Y.highlightWidth))}}if(k.type==="candlestick"||k.type==="ohlc"){var Z=(k.increasing||{}).showlegend!==!1,z=(k.decreasing||{}).showlegend!==!1,q=T(k.increasing),X=T(k.decreasing);if(q!==!1&&X!==!1){var Q=y(q,X,Z,z);Q&&(k.name=Q)}else(q||X)&&!k.name&&(k.name=q||X)}R(k,"line")&&delete k.line,"marker"in k&&(R(k.marker,"line")&&delete k.marker.line,R(k,"marker")&&delete k.marker),v.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins)}};function T(j){if(!c.isPlainObject(j))return!1;var b=j.name;return delete j.name,delete j.showlegend,(typeof b=="string"||typeof b=="number")&&String(b)}function y(j,b,k,E){if(k&&!E)return j;if(E&&!k||!j.trim())return b;if(!b.trim())return j;var F=Math.min(j.length,b.length),P;for(P=0;P<F&&j.charAt(P)===b.charAt(P);P++);var J=j.substr(0,P);return J.trim()}function S(j){var b="middle",k="center";return typeof j=="string"&&(j.indexOf("top")!==-1?b="top":j.indexOf("bottom")!==-1&&(b="bottom"),j.indexOf("left")!==-1?k="left":j.indexOf("right")!==-1&&(k="right")),b+" "+k}function R(j,b){return b in j&&typeof j[b]=="object"&&Object.keys(j[b]).length===0}U.swapXYData=function(j){var b;if(c.swapAttrs(j,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(j.z)&&Array.isArray(j.z[0])&&(j.transpose?delete j.transpose:j.transpose=!0),j.error_x&&j.error_y){var k=j.error_y,E="copy_ystyle"in k?k.copy_ystyle:!(k.color||k.thickness||k.width);c.swapAttrs(j,["error_?.copy_ystyle"]),E&&c.swapAttrs(j,["error_?.color","error_?.thickness","error_?.width"])}if(typeof j.hoverinfo=="string"){var F=j.hoverinfo.split("+");for(b=0;b<F.length;b++)F[b]==="x"?F[b]="y":F[b]==="y"&&(F[b]="x");j.hoverinfo=F.join("+")}},U.coerceTraceIndices=function(j,b){if($(b))return[b];if(!Array.isArray(b)||!b.length)return j.data.map(function(F,P){return P});if(Array.isArray(b)){for(var k=[],E=0;E<b.length;E++)c.isIndex(b[E],j.data.length)?k.push(b[E]):c.warn("trace index (",b[E],") is not a number or is out of bounds");return k}return b},U.manageArrayContainers=function(j,b,k){var E=j.obj,F=j.parts,P=F.length,J=F[P-1],H=$(J);if(H&&b===null){var Y=F.slice(0,P-1).join("."),Z=c.nestedProperty(E,Y).get();Z.splice(J,1)}else H&&j.get()===void 0&&j.get()===void 0&&(k[j.astr]=null),j.set(b)};var M=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function A(j){var b=j.search(M);if(b>0)return j.substr(0,b)}U.hasParent=function(j,b){for(var k=A(b);k;){if(k in j)return!0;k=A(k)}return!1};var C=["x","y","z"];U.clearAxisTypes=function(j,b,k){for(var E=0;E<b.length;E++)for(var F=j._fullData[E],P=0;P<3;P++){var J=g(j,F,C[P]);if(J&&J.type!=="log"){var H=J._name,Y=J._id.substr(1);if(Y.substr(0,5)==="scene"){if(k[Y]!==void 0)continue;H=Y+"."+H}var Z=H+".type";k[H]===void 0&&k[Z]===void 0&&c.nestedProperty(j.layout,Z).set(null)}}}}}),Ty=i({"src/plot_api/plot_api.js"(U){var $=d(),h=xe(),c=uo(),u=kr(),p=u.nestedProperty,v=Co(),m=us(),g=mn(),w=Di(),l=Xi(),T=ji(),y=ll(),S=es(),R=di(),M=pt(),A=My().initInteractions,C=qs(),j=pd().clearOutline,b=wr().dfltConfig,k=W5(),E=q5(),F=fd(),P=Ni(),J=ha().AX_NAME_PATTERN,H=0,Y=5;function Z(fe,je,Pe,Re){var tt;if(fe=u.getGraphDiv(fe),v.init(fe),u.isPlainObject(je)){var nt=je;je=nt.data,Pe=nt.layout,Re=nt.config,tt=nt.frames}var dt=v.triggerHandler(fe,"plotly_beforeplot",[je,Pe,Re]);if(dt===!1)return Promise.reject();!je&&!Pe&&!u.isPlotDiv(fe)&&u.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",fe);function St(){if(tt)return U.addFrames(fe,tt)}ee(fe,Re),Pe||(Pe={}),$.select(fe).classed("js-plotly-plot",!0),R.makeTester(),Array.isArray(fe._promises)||(fe._promises=[]);var Dt=(fe.data||[]).length===0&&Array.isArray(je);Array.isArray(je)&&(E.cleanData(je),Dt?fe.data=je:fe.data.push.apply(fe.data,je),fe.empty=!1),(!fe.layout||Dt)&&(fe.layout=E.cleanLayout(Pe)),l.supplyDefaults(fe);var at=fe._fullLayout,Ct=at._has("cartesian");at._replotting=!0,(Dt||at._shouldCreateBgLayer)&&(Ue(fe),at._shouldCreateBgLayer&&delete at._shouldCreateBgLayer),R.initGradients(fe),R.initPatterns(fe),Dt&&T.saveShowSpikeInitial(fe);var Ht=!fe.calcdata||fe.calcdata.length!==(fe._fullData||[]).length;Ht&&l.doCalcdata(fe);for(var Ut=0;Ut<fe.calcdata.length;Ut++)fe.calcdata[Ut][0].trace=fe._fullData[Ut];fe._context.responsive?fe._responsiveChartHandler||(fe._responsiveChartHandler=function(){u.isHidden(fe)||l.resize(fe)},window.addEventListener("resize",fe._responsiveChartHandler)):u.clearResponsive(fe);var Ar=u.extendFlat({},at._size),Rr=0;function $r(){for(var Lr=at._basePlotModules,hr=0;hr<Lr.length;hr++)Lr[hr].drawFramework&&Lr[hr].drawFramework(fe);!at._glcanvas&&at._has("gl")&&(at._glcanvas=at._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(qr){return qr.key}),at._glcanvas.enter().append("canvas").attr("class",function(qr){return"gl-canvas gl-canvas-"+qr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Or=fe._context.plotGlPixelRatio;if(at._glcanvas){at._glcanvas.attr("width",at.width*Or).attr("height",at.height*Or).style("width",at.width+"px").style("height",at.height+"px");var fn=at._glcanvas.data()[0].regl;if(fn&&(Math.floor(at.width*Or)!==fn._gl.drawingBufferWidth||Math.floor(at.height*Or)!==fn._gl.drawingBufferHeight)){var An="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Rr)u.error(An);else return u.log(An+" Clearing graph and plotting again."),l.cleanPlot([],{},fe._fullData,at),l.supplyDefaults(fe),at=fe._fullLayout,l.doCalcdata(fe),Rr++,$r()}}return at.modebar.orientation==="h"?at._modebardiv.style("height",null).style("width","100%"):at._modebardiv.style("width",null).style("height",at.height+"px"),l.previousPromises(fe)}function Mr(){if(l.clearAutoMarginIds(fe),F.drawMarginPushers(fe),T.allowAutoMargin(fe),fe._fullLayout.title.text&&fe._fullLayout.title.automargin&&l.allowAutoMargin(fe,"title.automargin"),at._has("pie"))for(var Lr=fe._fullData,hr=0;hr<Lr.length;hr++){var Or=Lr[hr];Or.type==="pie"&&Or.automargin&&l.allowAutoMargin(fe,"pie."+Or.uid+".automargin")}return l.doAutoMargin(fe),l.previousPromises(fe)}function Ir(){if(l.didMarginChange(Ar,at._size))return u.syncOrAsync([Mr,F.layoutStyles],fe)}function gr(){if(!Ht){br();return}return u.syncOrAsync([g.getComponentMethod("shapes","calcAutorange"),g.getComponentMethod("annotations","calcAutorange"),br],fe)}function br(){fe._transitioning||(F.doAutoRangeAndConstraints(fe),Dt&&T.saveRangeInitial(fe),g.getComponentMethod("rangeslider","calcAutorange")(fe))}function Vr(){return T.draw(fe,Dt?"":"redraw")}var Br=[l.previousPromises,St,$r,Mr,Ir];Ct&&Br.push(gr),Br.push(F.layoutStyles),Ct&&Br.push(Vr,function(hr){var Or=hr._fullLayout._insideTickLabelsUpdaterange;if(Or)return hr._fullLayout._insideTickLabelsUpdaterange=void 0,ge(hr,Or).then(function(){T.saveRangeInitial(hr,!0)})}),Br.push(F.drawData,F.finalDraw,A,l.addLinks,l.rehover,l.redrag,l.reselect,l.doAutoMargin,l.previousPromises);var Ur=u.syncOrAsync(Br,fe);return(!Ur||!Ur.then)&&(Ur=Promise.resolve()),Ur.then(function(){return z(fe),fe})}function z(fe){var je=fe._fullLayout;je._redrawFromAutoMarginCount?je._redrawFromAutoMarginCount--:fe.emit("plotly_afterplot")}function q(fe){return u.extendFlat(b,fe)}function X(fe,je){try{fe._fullLayout._paper.style("background",je)}catch(Pe){u.error(Pe)}}function Q(fe,je){var Pe=M.combine(je,"white");X(fe,Pe)}function ee(fe,je){if(!fe._context){fe._context=u.extendDeep({},b);var Pe=$.select("base");fe._context._baseUrl=Pe.size()&&Pe.attr("href")?window.location.href.split("#")[0]:""}var Re=fe._context,tt,nt,dt;if(je){for(nt=Object.keys(je),tt=0;tt<nt.length;tt++)dt=nt[tt],!(dt==="editable"||dt==="edits")&&dt in Re&&(dt==="setBackground"&&je[dt]==="opaque"?Re[dt]=Q:Re[dt]=je[dt]);var St=je.editable;if(St!==void 0)for(Re.editable=St,nt=Object.keys(Re.edits),tt=0;tt<nt.length;tt++)Re.edits[nt[tt]]=St;if(je.edits)for(nt=Object.keys(je.edits),tt=0;tt<nt.length;tt++)dt=nt[tt],dt in Re.edits&&(Re.edits[dt]=je.edits[dt]);Re._exportedPlot=je._exportedPlot}Re.staticPlot&&(Re.editable=!1,Re.edits={},Re.autosizable=!1,Re.scrollZoom=!1,Re.doubleClick=!1,Re.showTips=!1,Re.showLink=!1,Re.displayModeBar=!1),Re.displayModeBar==="hover"&&!c&&(Re.displayModeBar=!0),(Re.setBackground==="transparent"||typeof Re.setBackground!="function")&&(Re.setBackground=X),Re._hasZeroHeight=Re._hasZeroHeight||fe.clientHeight===0,Re._hasZeroWidth=Re._hasZeroWidth||fe.clientWidth===0;var Dt=Re.scrollZoom,at=Re._scrollZoom={};if(Dt===!0)at.cartesian=1,at.gl3d=1,at.geo=1,at.mapbox=1,at.map=1;else if(typeof Dt=="string"){var Ct=Dt.split("+");for(tt=0;tt<Ct.length;tt++)at[Ct[tt]]=1}else Dt!==!1&&(at.gl3d=1,at.geo=1,at.mapbox=1,at.map=1)}function ne(fe){if(fe=u.getGraphDiv(fe),!u.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe);return E.cleanData(fe.data),E.cleanLayout(fe.layout),fe.calcdata=void 0,U._doPlot(fe).then(function(){return fe.emit("plotly_redraw"),fe})}function le(fe,je,Pe,Re){return fe=u.getGraphDiv(fe),l.cleanPlot([],{},fe._fullData||[],fe._fullLayout||{}),l.purge(fe),U._doPlot(fe,je,Pe,Re)}function W(fe,je){var Pe=je+1,Re=[],tt,nt;for(tt=0;tt<fe.length;tt++)nt=fe[tt],nt<0?Re.push(Pe+nt):Re.push(nt);return Re}function ce(fe,je,Pe){var Re,tt;for(Re=0;Re<je.length;Re++){if(tt=je[Re],tt!==parseInt(tt,10))throw new Error("all values in "+Pe+" must be integers");if(tt>=fe.data.length||tt<-fe.data.length)throw new Error(Pe+" must be valid indices for gd.data.");if(je.indexOf(tt,Re+1)>-1||tt>=0&&je.indexOf(-fe.data.length+tt)>-1||tt<0&&je.indexOf(fe.data.length+tt)>-1)throw new Error("each index in "+Pe+" must be unique.")}}function de(fe,je,Pe){if(!Array.isArray(fe.data))throw new Error("gd.data must be an array.");if(typeof je>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(je)||(je=[je]),ce(fe,je,"currentIndices"),typeof Pe<"u"&&!Array.isArray(Pe)&&(Pe=[Pe]),typeof Pe<"u"&&ce(fe,Pe,"newIndices"),typeof Pe<"u"&&je.length!==Pe.length)throw new Error("current and new indices must be of equal length.")}function pe(fe,je,Pe){var Re,tt;if(!Array.isArray(fe.data))throw new Error("gd.data must be an array.");if(typeof je>"u")throw new Error("traces must be defined.");for(Array.isArray(je)||(je=[je]),Re=0;Re<je.length;Re++)if(tt=je[Re],typeof tt!="object"||Array.isArray(tt)||tt===null)throw new Error("all values in traces array must be non-array objects");if(typeof Pe<"u"&&!Array.isArray(Pe)&&(Pe=[Pe]),typeof Pe<"u"&&Pe.length!==je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function he(fe,je,Pe,Re){var tt=u.isPlainObject(Re);if(!Array.isArray(fe.data))throw new Error("gd.data must be an array");if(!u.isPlainObject(je))throw new Error("update must be a key:value object");if(typeof Pe>"u")throw new Error("indices must be an integer or array of integers");ce(fe,Pe,"indices");for(var nt in je){if(!Array.isArray(je[nt])||je[nt].length!==Pe.length)throw new Error("attribute "+nt+" must be an array of length equal to indices array length");if(tt&&(!(nt in Re)||!Array.isArray(Re[nt])||Re[nt].length!==je[nt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function be(fe,je,Pe,Re){var tt=u.isPlainObject(Re),nt=[],dt,St,Dt,at,Ct;Array.isArray(Pe)||(Pe=[Pe]),Pe=W(Pe,fe.data.length-1);for(var Ht in je)for(var Ut=0;Ut<Pe.length;Ut++){if(dt=fe.data[Pe[Ut]],Dt=p(dt,Ht),St=Dt.get(),at=je[Ht][Ut],!u.isArrayOrTypedArray(at))throw new Error("attribute: "+Ht+" index: "+Ut+" must be an array");if(!u.isArrayOrTypedArray(St))throw new Error("cannot extend missing or non-array attribute: "+Ht);if(St.constructor!==at.constructor)throw new Error("cannot extend array with an array of a different type: "+Ht);Ct=tt?Re[Ht][Ut]:Re,h(Ct)||(Ct=-1),nt.push({prop:Dt,target:St,insert:at,maxp:Math.floor(Ct)})}return nt}function Ee(fe,je,Pe,Re,tt){he(fe,je,Pe,Re);for(var nt=be(fe,je,Pe,Re),dt={},St={},Dt=0;Dt<nt.length;Dt++){var at=nt[Dt].prop,Ct=nt[Dt].maxp,Ht=tt(nt[Dt].target,nt[Dt].insert,Ct);at.set(Ht[0]),Array.isArray(dt[at.astr])||(dt[at.astr]=[]),dt[at.astr].push(Ht[1]),Array.isArray(St[at.astr])||(St[at.astr]=[]),St[at.astr].push(nt[Dt].target.length)}return{update:dt,maxPoints:St}}function Te(fe,je){var Pe=new fe.constructor(fe.length+je.length);return Pe.set(fe),Pe.set(je,fe.length),Pe}function He(fe,je,Pe,Re){fe=u.getGraphDiv(fe);function tt(Dt,at,Ct){var Ht,Ut;if(u.isTypedArray(Dt))if(Ct<0){var Ar=new Dt.constructor(0),Rr=Te(Dt,at);Ct<0?(Ht=Rr,Ut=Ar):(Ht=Ar,Ut=Rr)}else if(Ht=new Dt.constructor(Ct),Ut=new Dt.constructor(Dt.length+at.length-Ct),Ct===at.length)Ht.set(at),Ut.set(Dt);else if(Ct<at.length){var $r=at.length-Ct;Ht.set(at.subarray($r)),Ut.set(Dt),Ut.set(at.subarray(0,$r),Dt.length)}else{var Mr=Ct-at.length,Ir=Dt.length-Mr;Ht.set(Dt.subarray(Ir)),Ht.set(at,Mr),Ut.set(Dt.subarray(0,Ir))}else Ht=Dt.concat(at),Ut=Ct>=0&&Ct<Ht.length?Ht.splice(0,Ht.length-Ct):[];return[Ht,Ut]}var nt=Ee(fe,je,Pe,Re,tt),dt=U.redraw(fe),St=[fe,nt.update,Pe,nt.maxPoints];return m.add(fe,U.prependTraces,St,He,arguments),dt}function te(fe,je,Pe,Re){fe=u.getGraphDiv(fe);function tt(Dt,at,Ct){var Ht,Ut;if(u.isTypedArray(Dt))if(Ct<=0){var Ar=new Dt.constructor(0),Rr=Te(at,Dt);Ct<0?(Ht=Rr,Ut=Ar):(Ht=Ar,Ut=Rr)}else if(Ht=new Dt.constructor(Ct),Ut=new Dt.constructor(Dt.length+at.length-Ct),Ct===at.length)Ht.set(at),Ut.set(Dt);else if(Ct<at.length){var $r=at.length-Ct;Ht.set(at.subarray(0,$r)),Ut.set(at.subarray($r)),Ut.set(Dt,$r)}else{var Mr=Ct-at.length;Ht.set(at),Ht.set(Dt.subarray(0,Mr),at.length),Ut.set(Dt.subarray(Mr))}else Ht=at.concat(Dt),Ut=Ct>=0&&Ct<Ht.length?Ht.splice(Ct,Ht.length):[];return[Ht,Ut]}var nt=Ee(fe,je,Pe,Re,tt),dt=U.redraw(fe),St=[fe,nt.update,Pe,nt.maxPoints];return m.add(fe,U.extendTraces,St,te,arguments),dt}function ae(fe,je,Pe){fe=u.getGraphDiv(fe);var Re=[],tt=U.deleteTraces,nt=ae,dt=[fe,Re],St=[fe,je],Dt,at;for(pe(fe,je,Pe),Array.isArray(je)||(je=[je]),je=je.map(function(Ct){return u.extendFlat({},Ct)}),E.cleanData(je),Dt=0;Dt<je.length;Dt++)fe.data.push(je[Dt]);for(Dt=0;Dt<je.length;Dt++)Re.push(-je.length+Dt);if(typeof Pe>"u")return at=U.redraw(fe),m.add(fe,tt,dt,nt,St),at;Array.isArray(Pe)||(Pe=[Pe]);try{de(fe,Re,Pe)}catch(Ct){throw fe.data.splice(fe.data.length-je.length,je.length),Ct}return m.startSequence(fe),m.add(fe,tt,dt,nt,St),at=U.moveTraces(fe,Re,Pe),m.stopSequence(fe),at}function G(fe,je){fe=u.getGraphDiv(fe);var Pe=[],Re=U.addTraces,tt=G,nt=[fe,Pe,je],dt=[fe,je],St,Dt;if(typeof je>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(je)||(je=[je]),ce(fe,je,"indices"),je=W(je,fe.data.length-1),je.sort(u.sorterDes),St=0;St<je.length;St+=1)Dt=fe.data.splice(je[St],1)[0],Pe.push(Dt);var at=U.redraw(fe);return m.add(fe,Re,nt,tt,dt),at}function K(fe,je,Pe){fe=u.getGraphDiv(fe);var Re=[],tt=[],nt=K,dt=K,St=[fe,Pe,je],Dt=[fe,je,Pe],at;if(de(fe,je,Pe),je=Array.isArray(je)?je:[je],typeof Pe>"u")for(Pe=[],at=0;at<je.length;at++)Pe.push(-je.length+at);for(Pe=Array.isArray(Pe)?Pe:[Pe],je=W(je,fe.data.length-1),Pe=W(Pe,fe.data.length-1),at=0;at<fe.data.length;at++)je.indexOf(at)===-1&&Re.push(fe.data[at]);for(at=0;at<je.length;at++)tt.push({newIndex:Pe[at],trace:fe.data[je[at]]});for(tt.sort(function(Ht,Ut){return Ht.newIndex-Ut.newIndex}),at=0;at<tt.length;at+=1)Re.splice(tt[at].newIndex,0,tt[at].trace);fe.data=Re;var Ct=U.redraw(fe);return m.add(fe,nt,St,dt,Dt),Ct}function V(fe,je,Pe,Re){fe=u.getGraphDiv(fe),E.clearPromiseQueue(fe);var tt={};if(typeof je=="string")tt[je]=Pe;else if(u.isPlainObject(je))tt=u.extendFlat({},je),Re===void 0&&(Re=Pe);else return u.warn("Restyle fail.",je,Pe,Re),Promise.reject();Object.keys(tt).length&&(fe.changed=!0);var nt=E.coerceTraceIndices(fe,Re),dt=ie(fe,tt,nt),St=dt.flags;St.calc&&(fe.calcdata=void 0),St.clearAxisTypes&&E.clearAxisTypes(fe,nt,{});var Dt=[];St.fullReplot?Dt.push(U._doPlot):(Dt.push(l.previousPromises),l.supplyDefaults(fe),St.markerSize&&(l.doCalcdata(fe),Se(Dt)),St.style&&Dt.push(F.doTraceStyle),St.colorbars&&Dt.push(F.doColorBars),Dt.push(z)),Dt.push(l.rehover,l.redrag,l.reselect),m.add(fe,V,[fe,dt.undoit,dt.traces],V,[fe,dt.redoit,dt.traces]);var at=u.syncOrAsync(Dt,fe);return(!at||!at.then)&&(at=Promise.resolve()),at.then(function(){return fe.emit("plotly_restyle",dt.eventData),fe})}function re(fe){return fe===void 0?null:fe}function D(fe,je){return je?function(Pe,Re,tt){var nt=p(Pe,Re),dt=nt.set;return nt.set=function(St){var Dt=(tt||"")+Re;B(Dt,nt.get(),St,fe),dt(St)},nt}:p}function B(fe,je,Pe,Re){if(Array.isArray(je)||Array.isArray(Pe))for(var tt=Array.isArray(je)?je:[],nt=Array.isArray(Pe)?Pe:[],dt=Math.max(tt.length,nt.length),St=0;St<dt;St++)B(fe+"["+St+"]",tt[St],nt[St],Re);else if(u.isPlainObject(je)||u.isPlainObject(Pe)){var Dt=u.isPlainObject(je)?je:{},at=u.isPlainObject(Pe)?Pe:{},Ct=u.extendFlat({},Dt,at);for(var Ht in Ct)B(fe+"."+Ht,Dt[Ht],at[Ht],Re)}else Re[fe]===void 0&&(Re[fe]=re(je))}function oe(fe,je,Pe){for(var Re in Pe){var tt=p(fe,Re);B(Re,tt.get(),Pe[Re],je)}}function ie(fe,je,Pe){var Re=fe._fullLayout,tt=fe._fullData,nt=fe.data,dt=Re._guiEditing,St=D(Re._preGUI,dt),Dt=u.extendDeepAll({},je),at,Ct=P.traceFlags(),Ht={},Ut={},Ar;function Rr(){return Pe.map(function(){})}function $r(or){var Dr=T.id2name(or);Ar.indexOf(Dr)===-1&&Ar.push(Dr)}function Mr(or){return"LAYOUT"+or+".autorange"}function Ir(or){return"LAYOUT"+or+".range"}function gr(or){for(var Dr=or;Dr<tt.length;Dr++)if(tt[Dr]._input===nt[or])return tt[Dr]}function br(or,Dr,_r){if(Array.isArray(or)){or.forEach(function(Qr){br(Qr,Dr,_r)});return}if(!(or in je||E.hasParent(je,or))){var Zr;if(or.substr(0,6)==="LAYOUT")Zr=St(fe.layout,or.replace("LAYOUT",""));else{var Er=Pe[_r],Gr=Re._tracePreGUI[gr(Er)._fullInput.uid];Zr=D(Gr,dt)(nt[Er],or)}or in Ut||(Ut[or]=Rr()),Ut[or][_r]===void 0&&(Ut[or][_r]=re(Zr.get())),Dr!==void 0&&Zr.set(Dr)}}function Vr(or){return function(Dr){return tt[Dr][or]}}function Br(or){return function(Dr,_r){return Dr===!1?tt[Pe[_r]][or]:null}}for(var Ur in je){if(E.hasParent(je,Ur))throw new Error("cannot set "+Ur+" and a parent attribute simultaneously");var Lr=je[Ur],hr,Or,fn,An,qr,yn;if((Ur==="autobinx"||Ur==="autobiny")&&(Ur=Ur.charAt(Ur.length-1)+"bins",Array.isArray(Lr)?Lr=Lr.map(Br(Ur)):Lr===!1?Lr=Pe.map(Vr(Ur)):Lr=null),Ht[Ur]=Lr,Ur.substr(0,6)==="LAYOUT"){fn=St(fe.layout,Ur.replace("LAYOUT","")),Ut[Ur]=[re(fn.get())],fn.set(Array.isArray(Lr)?Lr[0]:Lr),Ct.calc=!0;continue}for(Ut[Ur]=Rr(),at=0;at<Pe.length;at++){hr=nt[Pe[at]],Or=gr(Pe[at]);var xn=Re._tracePreGUI[Or._fullInput.uid];if(fn=D(xn,dt)(hr,Ur),An=fn.get(),qr=Array.isArray(Lr)?Lr[at%Lr.length]:Lr,qr!==void 0){var Xn=fn.parts[fn.parts.length-1],mr=Ur.substr(0,Ur.length-Xn.length-1),jn=mr?mr+".":"",we=mr?p(Or,mr).get():Or;if(yn=w.getTraceValObject(Or,fn.parts),yn&&yn.impliedEdits&&qr!==null)for(var me in yn.impliedEdits)br(u.relativeAttr(Ur,me),yn.impliedEdits[me],at);else if((Xn==="thicknessmode"||Xn==="lenmode")&&An!==qr&&(qr==="fraction"||qr==="pixels")&&we){var mt=Re._size,ft=we.orient,Xe=ft==="top"||ft==="bottom";if(Xn==="thicknessmode"){var Ke=Xe?mt.h:mt.w;br(jn+"thickness",we.thickness*(qr==="fraction"?1/Ke:Ke),at)}else{var it=Xe?mt.w:mt.h;br(jn+"len",we.len*(qr==="fraction"?1/it:it),at)}}else if(Ur==="type"&&(qr==="pie"!=(An==="pie")||qr==="funnelarea"!=(An==="funnelarea"))){var Tt="x",rt="y";(qr==="bar"||An==="bar")&&hr.orientation==="h"&&(Tt="y",rt="x"),u.swapAttrs(hr,["?","?src"],"labels",Tt),u.swapAttrs(hr,["d?","?0"],"label",Tt),u.swapAttrs(hr,["?","?src"],"values",rt),An==="pie"||An==="funnelarea"?(p(hr,"marker.color").set(p(hr,"marker.colors").get()),Re._pielayer.selectAll("g.trace").remove()):g.traceIs(hr,"cartesian")&&p(hr,"marker.colors").set(p(hr,"marker.color").get())}Ut[Ur][at]=re(An);var xt=["swapxy","swapxyaxes","orientation","orientationaxes"];if(xt.indexOf(Ur)!==-1){if(Ur==="orientation"){fn.set(qr);var Mt=hr.x&&!hr.y?"h":"v";if((fn.get()||Mt)===Or.orientation)continue}else Ur==="orientationaxes"&&(hr.orientation={v:"h",h:"v"}[Or.orientation]);E.swapXYData(hr),Ct.calc=Ct.clearAxisTypes=!0}else l.dataArrayContainers.indexOf(fn.parts[0])!==-1?(E.manageArrayContainers(fn,qr,Ut),Ct.calc=!0):(yn?yn.arrayOk&&!g.traceIs(Or,"regl")&&(u.isArrayOrTypedArray(qr)||u.isArrayOrTypedArray(An))?Ct.calc=!0:P.update(Ct,yn):Ct.calc=!0,fn.set(qr))}}if(["swapxyaxes","orientationaxes"].indexOf(Ur)!==-1&&T.swap(fe,Pe),Ur==="orientationaxes"){var Lt=p(fe.layout,"hovermode"),Xt=Lt.get();Xt==="x"?Lt.set("y"):Xt==="y"?Lt.set("x"):Xt==="x unified"?Lt.set("y unified"):Xt==="y unified"&&Lt.set("x unified")}if(["orientation","type"].indexOf(Ur)!==-1){for(Ar=[],at=0;at<Pe.length;at++){var sr=nt[Pe[at]];g.traceIs(sr,"cartesian")&&($r(sr.xaxis||"x"),$r(sr.yaxis||"y"))}br(Ar.map(Mr),!0,0),br(Ar.map(Ir),[0,1],0)}}return(Ct.calc||Ct.plot)&&(Ct.fullReplot=!0),{flags:Ct,undoit:Ut,redoit:Ht,traces:Pe,eventData:u.extendDeepNoArrays([],[Dt,Pe])}}function ge(fe,je,Pe){fe=u.getGraphDiv(fe),E.clearPromiseQueue(fe);var Re={};if(typeof je=="string")Re[je]=Pe;else if(u.isPlainObject(je))Re=u.extendFlat({},je);else return u.warn("Relayout fail.",je,Pe),Promise.reject();Object.keys(Re).length&&(fe.changed=!0);var tt=yt(fe,Re),nt=tt.flags;nt.calc&&(fe.calcdata=void 0);var dt=[l.previousPromises];nt.layoutReplot?dt.push(F.layoutReplot):Object.keys(Re).length&&(_e(fe,nt,tt)||l.supplyDefaults(fe),nt.legend&&dt.push(F.doLegend),nt.layoutstyle&&dt.push(F.layoutStyles),nt.axrange&&Se(dt,tt.rangesAltered),nt.ticks&&dt.push(F.doTicksRelayout),nt.modebar&&dt.push(F.doModeBar),nt.camera&&dt.push(F.doCamera),nt.colorbars&&dt.push(F.doColorBars),dt.push(z)),dt.push(l.rehover,l.redrag,l.reselect),m.add(fe,ge,[fe,tt.undoit],ge,[fe,tt.redoit]);var St=u.syncOrAsync(dt,fe);return(!St||!St.then)&&(St=Promise.resolve(fe)),St.then(function(){return fe.emit("plotly_relayout",tt.eventData),fe})}function _e(fe,je,Pe){var Re=fe._fullLayout;if(!je.axrange)return!1;for(var tt in je)if(tt!=="axrange"&&je[tt])return!1;var nt,dt,St=function(Ar,Rr){return u.coerce(nt,dt,S,Ar,Rr)},Dt={};for(var at in Pe.rangesAltered){var Ct=T.id2name(at);if(nt=fe.layout[Ct],dt=Re[Ct],y(nt,dt,St,Dt),dt._matchGroup){for(var Ht in dt._matchGroup)if(Ht!==at){var Ut=Re[T.id2name(Ht)];Ut.autorange=dt.autorange,Ut.range=dt.range.slice(),Ut._input.range=dt.range.slice()}}}return!0}function Se(fe,je){var Pe=je?function(Re){var tt=[],nt=!0;for(var dt in je){var St=T.getFromId(Re,dt);if(tt.push(dt),(St.ticklabelposition||"").indexOf("inside")!==-1&&St._anchorAxis&&tt.push(St._anchorAxis._id),St._matchGroup)for(var Dt in St._matchGroup)je[Dt]||tt.push(Dt)}return T.draw(Re,tt,{skipTitle:nt})}:function(Re){return T.draw(Re,"redraw")};fe.push(j,F.doAutoRangeAndConstraints,Pe,F.drawData,F.finalDraw)}var De=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ge=/^[xyz]axis[0-9]*\.autorange$/,Je=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function yt(fe,je){var Pe=fe.layout,Re=fe._fullLayout,tt=Re._guiEditing,nt=D(Re._preGUI,tt),dt=Object.keys(je),St=T.list(fe),Dt=u.extendDeepAll({},je),at={},Ct,Ht,Ut;for(dt=Object.keys(je),Ht=0;Ht<dt.length;Ht++)if(dt[Ht].indexOf("allaxes")===0){for(Ut=0;Ut<St.length;Ut++){var Ar=St[Ut]._id.substr(1),Rr=Ar.indexOf("scene")!==-1?Ar+".":"",$r=dt[Ht].replace("allaxes",Rr+St[Ut]._name);je[$r]||(je[$r]=je[dt[Ht]])}delete je[dt[Ht]]}var Mr=P.layoutFlags(),Ir={},gr={};function br(Gr,Qr){if(Array.isArray(Gr)){Gr.forEach(function(Sn){br(Sn,Qr)});return}if(!(Gr in je||E.hasParent(je,Gr))){var En=nt(Pe,Gr);Gr in gr||(gr[Gr]=re(En.get())),Qr!==void 0&&En.set(Qr)}}var Vr={},Br;function Ur(Gr){var Qr=T.name2id(Gr.split(".")[0]);return Vr[Qr]=1,Qr}for(var Lr in je){if(E.hasParent(je,Lr))throw new Error("cannot set "+Lr+" and a parent attribute simultaneously");for(var hr=nt(Pe,Lr),Or=je[Lr],fn=hr.parts.length,An=fn-1;An>0&&typeof hr.parts[An]!="string";)An--;var qr=hr.parts[An],yn=hr.parts[An-1]+"."+qr,xn=hr.parts.slice(0,An).join("."),Xn=p(fe.layout,xn).get(),mr=p(Re,xn).get(),jn=hr.get();if(Or!==void 0){Ir[Lr]=Or,gr[Lr]=qr==="reverse"?Or:re(jn);var we=w.getLayoutValObject(Re,hr.parts);if(we&&we.impliedEdits&&Or!==null)for(var me in we.impliedEdits)br(u.relativeAttr(Lr,me),we.impliedEdits[me]);if(["width","height"].indexOf(Lr)!==-1)if(Or){br("autosize",null);var mt=Lr==="height"?"width":"height";br(mt,Re[mt])}else Re[Lr]=fe._initialAutoSize[Lr];else if(Lr==="autosize")br("width",Or?null:Re.width),br("height",Or?null:Re.height);else if(yn.match(De))Ur(yn),p(Re,xn+"._inputRange").set(null);else if(yn.match(Ge)){Ur(yn),p(Re,xn+"._inputRange").set(null);var ft=p(Re,xn).get();ft._inputDomain&&(ft._input.domain=ft._inputDomain.slice())}else yn.match(Je)&&p(Re,xn+"._inputDomain").set(null);if(qr==="type"){Br=Xn;var Xe=mr.type==="linear"&&Or==="log",Ke=mr.type==="log"&&Or==="linear";if(Xe||Ke){if(!Br||!Br.range)br(xn+".autorange",!0);else if(mr.autorange)Xe&&(Br.range=Br.range[1]>Br.range[0]?[1,2]:[2,1]);else{var it=Br.range[0],Tt=Br.range[1];Xe?(it<=0&&Tt<=0&&br(xn+".autorange",!0),it<=0?it=Tt/1e6:Tt<=0&&(Tt=it/1e6),br(xn+".range[0]",Math.log(it)/Math.LN10),br(xn+".range[1]",Math.log(Tt)/Math.LN10)):(br(xn+".range[0]",Math.pow(10,it)),br(xn+".range[1]",Math.pow(10,Tt)))}Array.isArray(Re._subplots.polar)&&Re._subplots.polar.length&&Re[hr.parts[0]]&&hr.parts[1]==="radialaxis"&&delete Re[hr.parts[0]]._subplot.viewInitial["radialaxis.range"],g.getComponentMethod("annotations","convertCoords")(fe,mr,Or,br),g.getComponentMethod("images","convertCoords")(fe,mr,Or,br)}else br(xn+".autorange",!0),br(xn+".range",null);p(Re,xn+"._inputRange").set(null)}else if(qr.match(J)){var rt=p(Re,Lr).get(),xt=(Or||{}).type;(!xt||xt==="-")&&(xt="linear"),g.getComponentMethod("annotations","convertCoords")(fe,rt,xt,br),g.getComponentMethod("images","convertCoords")(fe,rt,xt,br)}var Mt=k.containerArrayMatch(Lr);if(Mt){Ct=Mt.array,Ht=Mt.index;var Lt=Mt.property,Xt=we||{editType:"calc"};Ht!==""&&Lt===""&&(k.isAddVal(Or)?gr[Lr]=null:k.isRemoveVal(Or)?gr[Lr]=(p(Pe,Ct).get()||[])[Ht]:u.warn("unrecognized full object value",je)),P.update(Mr,Xt),at[Ct]||(at[Ct]={});var sr=at[Ct][Ht];sr||(sr=at[Ct][Ht]={}),sr[Lt]=Or,delete je[Lr]}else qr==="reverse"?(Xn.range?Xn.range.reverse():(br(xn+".autorange",!0),Xn.range=[1,0]),mr.autorange?Mr.calc=!0:Mr.plot=!0):(Lr==="dragmode"&&(Or===!1&&jn!==!1||Or!==!1&&jn===!1)||Re._has("scatter-like")&&Re._has("regl")&&Lr==="dragmode"&&(Or==="lasso"||Or==="select")&&!(jn==="lasso"||jn==="select")?Mr.plot=!0:we?P.update(Mr,we):Mr.calc=!0,hr.set(Or))}}for(Ct in at){var or=k.applyContainerArrayChanges(fe,nt(Pe,Ct),at[Ct],Mr,nt);or||(Mr.plot=!0)}for(var Dr in Vr){Br=T.getFromId(fe,Dr);var _r=Br&&Br._constraintGroup;if(_r){Mr.calc=!0;for(var Zr in _r)Vr[Zr]||(T.getFromId(fe,Zr)._constraintShrinkable=!0)}}(ut(fe)||je.height||je.width)&&(Mr.plot=!0);var Er=Re.shapes;for(Ht=0;Ht<Er.length;Ht++)if(Er[Ht].showlegend){Mr.calc=!0;break}return(Mr.plot||Mr.calc)&&(Mr.layoutReplot=!0),{flags:Mr,rangesAltered:Vr,undoit:gr,redoit:Ir,eventData:Dt}}function ut(fe){var je=fe._fullLayout,Pe=je.width,Re=je.height;return fe.layout.autosize&&l.plotAutoSize(fe,fe.layout,je),je.width!==Pe||je.height!==Re}function vt(fe,je,Pe,Re){fe=u.getGraphDiv(fe),E.clearPromiseQueue(fe),u.isPlainObject(je)||(je={}),u.isPlainObject(Pe)||(Pe={}),Object.keys(je).length&&(fe.changed=!0),Object.keys(Pe).length&&(fe.changed=!0);var tt=E.coerceTraceIndices(fe,Re),nt=ie(fe,u.extendFlat({},je),tt),dt=nt.flags,St=yt(fe,u.extendFlat({},Pe)),Dt=St.flags;(dt.calc||Dt.calc)&&(fe.calcdata=void 0),dt.clearAxisTypes&&E.clearAxisTypes(fe,tt,Pe);var at=[];Dt.layoutReplot?at.push(F.layoutReplot):dt.fullReplot?at.push(U._doPlot):(at.push(l.previousPromises),_e(fe,Dt,St)||l.supplyDefaults(fe),dt.style&&at.push(F.doTraceStyle),(dt.colorbars||Dt.colorbars)&&at.push(F.doColorBars),Dt.legend&&at.push(F.doLegend),Dt.layoutstyle&&at.push(F.layoutStyles),Dt.axrange&&Se(at,St.rangesAltered),Dt.ticks&&at.push(F.doTicksRelayout),Dt.modebar&&at.push(F.doModeBar),Dt.camera&&at.push(F.doCamera),at.push(z)),at.push(l.rehover,l.redrag,l.reselect),m.add(fe,vt,[fe,nt.undoit,St.undoit,nt.traces],vt,[fe,nt.redoit,St.redoit,nt.traces]);var Ct=u.syncOrAsync(at,fe);return(!Ct||!Ct.then)&&(Ct=Promise.resolve(fe)),Ct.then(function(){return fe.emit("plotly_update",{data:nt.eventData,layout:St.eventData}),fe})}function Ae(fe){return function(Pe){Pe._fullLayout._guiEditing=!0;var Re=fe.apply(null,arguments);return Pe._fullLayout._guiEditing=!1,Re}}var Fe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ke=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Be(fe,je){for(var Pe=0;Pe<je.length;Pe++){var Re=je[Pe],tt=fe.match(Re.pattern);if(tt){var nt=tt[1]||"";return{head:nt,tail:fe.substr(nt.length+1),attr:Re.attr}}}}function et(fe,je){var Pe=p(je,fe).get();if(Pe!==void 0)return Pe;var Re=fe.split(".");for(Re.pop();Re.length>1;)if(Re.pop(),Pe=p(je,Re.join(".")+".uirevision").get(),Pe!==void 0)return Pe;return je.uirevision}function ht(fe,je){for(var Pe=0;Pe<je.length;Pe++)if(je[Pe]._fullInput.uid===fe)return Pe;return-1}function jt(fe,je,Pe){for(var Re=0;Re<je.length;Re++)if(je[Re].uid===fe)return Re;return!je[Pe]||je[Pe].uid?-1:Pe}function At(fe,je){var Pe=u.isPlainObject(fe),Re=Array.isArray(fe);return Pe||Re?(Pe&&u.isPlainObject(je)||Re&&Array.isArray(je))&&JSON.stringify(fe)===JSON.stringify(je):fe===je}function Pt(fe,je,Pe,Re){var tt=Re._preGUI,nt,dt,St,Dt,at,Ct,Ht,Ut,Ar,Rr,$r=[],Mr={},Ir={};for(nt in tt){if(at=Be(nt,Fe),at){if(Ar=at.head,Rr=at.tail,dt=at.attr||Ar+".uirevision",St=p(Re,dt).get(),Dt=St&&et(dt,je),Dt&&Dt===St){if(Ct=tt[nt],Ct===null&&(Ct=void 0),Ht=p(je,nt),Ut=Ht.get(),At(Ut,Ct)){Ut===void 0&&Rr==="autorange"&&$r.push(Ar),Ht.set(re(p(Re,nt).get()));continue}else if(Rr==="autorange"||Rr.substr(0,6)==="range["){var gr=tt[Ar+".range[0]"],br=tt[Ar+".range[1]"],Vr=tt[Ar+".autorange"];if(Vr||Vr===null&&gr===null&&br===null){if(!(Ar in Mr)){var Br=p(je,Ar).get();Mr[Ar]=Br&&(Br.autorange||Br.autorange!==!1&&(!Br.range||Br.range.length!==2))}if(Mr[Ar]){Ht.set(re(p(Re,nt).get()));continue}}}}}else u.warn("unrecognized GUI edit: "+nt);delete tt[nt],at&&at.tail.substr(0,6)==="range["&&(Ir[at.head]=1)}for(var Ur=0;Ur<$r.length;Ur++){var Lr=$r[Ur];if(Ir[Lr]){var hr=p(je,Lr).get();hr&&delete hr.autorange}}var Or=Re._tracePreGUI;for(var fn in Or){var An=Or[fn],qr=null,yn;for(nt in An){if(!qr){var xn=ht(fn,Pe);if(xn<0){delete Or[fn];break}var Xn=Pe[xn];yn=Xn._fullInput;var mr=jt(fn,fe,yn.index);if(mr<0){delete Or[fn];break}qr=fe[mr]}if(at=Be(nt,ke),at){if(at.attr?(St=p(Re,at.attr).get(),Dt=St&&et(at.attr,je)):(St=yn.uirevision,Dt=qr.uirevision,Dt===void 0&&(Dt=je.uirevision)),Dt&&Dt===St&&(Ct=An[nt],Ct===null&&(Ct=void 0),Ht=p(qr,nt),Ut=Ht.get(),At(Ut,Ct))){Ht.set(re(p(yn,nt).get()));continue}}else u.warn("unrecognized GUI edit: "+nt+" in trace uid "+fn);delete An[nt]}}}function zt(fe,je,Pe,Re){var tt,nt;function dt(){return U.addFrames(fe,tt)}fe=u.getGraphDiv(fe),E.clearPromiseQueue(fe);var St=fe._fullData,Dt=fe._fullLayout;if(!u.isPlotDiv(fe)||!St||!Dt)nt=U.newPlot(fe,je,Pe,Re);else{if(u.isPlainObject(je)){var at=je;je=at.data,Pe=at.layout,Re=at.config,tt=at.frames}var Ct=!1;if(Re){var Ht=u.extendDeep({},fe._context);fe._context=void 0,ee(fe,Re),Ct=Qt(Ht,fe._context)}fe.data=je||[],E.cleanData(fe.data),fe.layout=Pe||{},E.cleanLayout(fe.layout),Pt(fe.data,fe.layout,St,Dt),l.supplyDefaults(fe,{skipUpdateCalc:!0});var Ut=fe._fullData,Ar=fe._fullLayout,Rr=Ar.datarevision===void 0,$r=Ar.transition,Mr=Kt(fe,Dt,Ar,Rr,$r),Ir=Mr.newDataRevision,gr=Nt(fe,St,Ut,Rr,$r,Ir);if(ut(fe)&&(Mr.layoutReplot=!0),gr.calc||Mr.calc){fe.calcdata=void 0;for(var br=Object.getOwnPropertyNames(Ar),Vr=0;Vr<br.length;Vr++){var Br=br[Vr],Ur=Br.substring(0,5);if(Ur==="xaxis"||Ur==="yaxis"){var Lr=Ar[Br]._emptyCategories;Lr&&Lr()}}}else l.supplyDefaultsUpdateCalc(fe.calcdata,Ut);var hr=[];if(tt&&(fe._transitionData={},l.createTransitionData(fe),hr.push(dt)),Ar.transition&&!Ct&&(gr.anim||Mr.anim))Mr.ticks&&hr.push(F.doTicksRelayout),l.doCalcdata(fe),F.doAutoRangeAndConstraints(fe),hr.push(function(){return l.transitionFromReact(fe,gr,Mr,Dt)});else if(gr.fullReplot||Mr.layoutReplot||Ct)fe._fullLayout._skipDefaults=!0,hr.push(U._doPlot);else{for(var Or in Mr.arrays){var fn=Mr.arrays[Or];if(fn.length){var An=g.getComponentMethod(Or,"drawOne");if(An!==u.noop)for(var qr=0;qr<fn.length;qr++)An(fe,fn[qr]);else{var yn=g.getComponentMethod(Or,"draw");if(yn===u.noop)throw new Error("cannot draw components: "+Or);yn(fe)}}}hr.push(l.previousPromises),gr.style&&hr.push(F.doTraceStyle),(gr.colorbars||Mr.colorbars)&&hr.push(F.doColorBars),Mr.legend&&hr.push(F.doLegend),Mr.layoutstyle&&hr.push(F.layoutStyles),Mr.axrange&&Se(hr),Mr.ticks&&hr.push(F.doTicksRelayout),Mr.modebar&&hr.push(F.doModeBar),Mr.camera&&hr.push(F.doCamera),hr.push(z)}hr.push(l.rehover,l.redrag,l.reselect),nt=u.syncOrAsync(hr,fe),(!nt||!nt.then)&&(nt=Promise.resolve(fe))}return nt.then(function(){return fe.emit("plotly_react",{data:je,layout:Pe}),fe})}function Nt(fe,je,Pe,Re,tt,nt){var dt=je.length===Pe.length;if(!tt&&!dt)return{fullReplot:!0,calc:!0};var St=P.traceFlags();St.arrays={},St.nChanges=0,St.nChangesAnim=0;var Dt,at;function Ct(Ar){var Rr=w.getTraceValObject(at,Ar);return!at._module.animatable&&Rr.anim&&(Rr.anim=!1),Rr}var Ht={getValObject:Ct,flags:St,immutable:Re,transition:tt,newDataRevision:nt,gd:fe},Ut={};for(Dt=0;Dt<je.length;Dt++)if(Pe[Dt]){if(at=Pe[Dt]._fullInput,Ut[at.uid])continue;Ut[at.uid]=1,_t(je[Dt]._fullInput,at,[],Ht)}return(St.calc||St.plot)&&(St.fullReplot=!0),tt&&St.nChanges&&St.nChangesAnim&&(St.anim=St.nChanges===St.nChangesAnim&&dt?"all":"some"),St}function Kt(fe,je,Pe,Re,tt){var nt=P.layoutFlags();nt.arrays={},nt.rangesAltered={},nt.nChanges=0,nt.nChangesAnim=0;function dt(Ut){return w.getLayoutValObject(Pe,Ut)}for(var St in Pe)if(!(!St.startsWith("xaxis")&&!St.startsWith("yaxis"))&&je[St]){var Dt=Pe[St].domain,at=je[St].domain,Ct=je[St]._inputDomain;je[St]._inputDomain&&(Dt[0]===Ct[0]&&Dt[1]===Ct[1]?Pe[St].domain=je[St].domain:(Dt[0]!==at[0]||Dt[1]!==at[1])&&(Pe[St]._inputDomain=null))}var Ht={getValObject:dt,flags:nt,immutable:Re,transition:tt,gd:fe};return _t(je,Pe,[],Ht),(nt.plot||nt.calc)&&(nt.layoutReplot=!0),tt&&nt.nChanges&&nt.nChangesAnim&&(nt.anim=nt.nChanges===nt.nChangesAnim?"all":"some"),nt}function _t(fe,je,Pe,Re){var tt,nt,dt,St=Re.getValObject,Dt=Re.flags,at=Re.immutable,Ct=Re.inArray,Ht=Re.arrayIndex;function Ut(){var xn=tt.editType;if(Ct&&xn.indexOf("arraydraw")!==-1){u.pushUnique(Dt.arrays[Ct],Ht);return}P.update(Dt,tt),xn!=="none"&&Dt.nChanges++,Re.transition&&tt.anim&&Dt.nChangesAnim++,(De.test(dt)||Ge.test(dt))&&(Dt.rangesAltered[Pe[0]]=1),nt==="datarevision"&&(Dt.newDataRevision=1)}function Ar(xn){return xn.valType==="data_array"||xn.arrayOk}for(nt in fe){if(Dt.calc&&!Re.transition)return;var Rr=fe[nt],$r=je[nt],Mr=Pe.concat(nt);if(dt=Mr.join("."),!(nt.charAt(0)==="_"||typeof Rr=="function"||Rr===$r)){if((nt==="tick0"||nt==="dtick")&&Pe[0]!=="geo"){var Ir=je.tickmode;if(Ir==="auto"||Ir==="array"||!Ir)continue}if(!(nt==="range"&&je.autorange)&&!((nt==="zmin"||nt==="zmax")&&je.type==="contourcarpet")&&(tt=St(Mr),!!tt&&!(tt._compareAsJSON&&JSON.stringify(Rr)===JSON.stringify($r)))){var gr=tt.valType,br,Vr=Ar(tt),Br=Array.isArray(Rr),Ur=Array.isArray($r);if(Br&&Ur){var Lr="_input_"+nt,hr=fe[Lr],Or=je[Lr];if(Array.isArray(hr)&&hr===Or)continue}if($r===void 0)Vr&&Br?Dt.calc=!0:Ut();else if(tt._isLinkedToArray){var fn=[],An=!1;Ct||(Dt.arrays[nt]=fn);var qr=Math.min(Rr.length,$r.length),yn=Math.max(Rr.length,$r.length);if(qr!==yn)if(tt.editType==="arraydraw")An=!0;else{Ut();continue}for(br=0;br<qr;br++)_t(Rr[br],$r[br],Mr.concat(br),u.extendFlat({inArray:nt,arrayIndex:br},Re));if(An)for(br=qr;br<yn;br++)fn.push(br)}else!gr&&u.isPlainObject(Rr)?_t(Rr,$r,Mr,Re):Vr?Br&&Ur?(at&&(Dt.calc=!0),(at||Re.newDataRevision)&&Ut()):Br!==Ur?Dt.calc=!0:Ut():Br&&Ur?(Rr.length!==$r.length||String(Rr)!==String($r))&&Ut():Ut()}}}for(nt in je)if(!(nt in fe||nt.charAt(0)==="_"||typeof je[nt]=="function"))if(tt=St(Pe.concat(nt)),Ar(tt)&&Array.isArray(je[nt])){Dt.calc=!0;return}else Ut()}function Qt(fe,je){var Pe;for(Pe in fe)if(Pe.charAt(0)!=="_"){var Re=fe[Pe],tt=je[Pe];if(Re!==tt)if(u.isPlainObject(Re)&&u.isPlainObject(tt)){if(Qt(Re,tt))return!0}else if(Array.isArray(Re)&&Array.isArray(tt)){if(Re.length!==tt.length)return!0;for(var nt=0;nt<Re.length;nt++)if(Re[nt]!==tt[nt])if(u.isPlainObject(Re[nt])&&u.isPlainObject(tt[nt])){if(Qt(Re[nt],tt[nt]))return!0}else return!0}else return!0}}function fr(fe,je,Pe){if(fe=u.getGraphDiv(fe),!u.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Re=fe._transitionData;Re._frameQueue||(Re._frameQueue=[]),Pe=l.supplyAnimationDefaults(Pe);var tt=Pe.transition,nt=Pe.frame;Re._frameWaitingCnt===void 0&&(Re._frameWaitingCnt=0);function dt(at){return Array.isArray(tt)?at>=tt.length?tt[0]:tt[at]:tt}function St(at){return Array.isArray(nt)?at>=nt.length?nt[0]:nt[at]:nt}function Dt(at,Ct){var Ht=0;return function(){if(at&&++Ht===Ct)return at()}}return new Promise(function(at,Ct){function Ht(){if(Re._frameQueue.length!==0){for(;Re._frameQueue.length;){var qr=Re._frameQueue.pop();qr.onInterrupt&&qr.onInterrupt()}fe.emit("plotly_animationinterrupted",[])}}function Ut(qr){if(qr.length!==0){for(var yn=0;yn<qr.length;yn++){var xn;qr[yn].type==="byname"?xn=l.computeFrame(fe,qr[yn].name):xn=qr[yn].data;var Xn=St(yn),mr=dt(yn);mr.duration=Math.min(mr.duration,Xn.duration);var jn={frame:xn,name:qr[yn].name,frameOpts:Xn,transitionOpts:mr};yn===qr.length-1&&(jn.onComplete=Dt(at,2),jn.onInterrupt=Ct),Re._frameQueue.push(jn)}Pe.mode==="immediate"&&(Re._lastFrameAt=-1/0),Re._animationRaf||$r()}}function Ar(){fe.emit("plotly_animated"),window.cancelAnimationFrame(Re._animationRaf),Re._animationRaf=null}function Rr(){Re._currentFrame&&Re._currentFrame.onComplete&&Re._currentFrame.onComplete();var qr=Re._currentFrame=Re._frameQueue.shift();if(qr){var yn=qr.name?qr.name.toString():null;fe._fullLayout._currentFrame=yn,Re._lastFrameAt=Date.now(),Re._timeToNext=qr.frameOpts.duration,l.transition(fe,qr.frame.data,qr.frame.layout,E.coerceTraceIndices(fe,qr.frame.traces),qr.frameOpts,qr.transitionOpts).then(function(){qr.onComplete&&qr.onComplete()}),fe.emit("plotly_animatingframe",{name:yn,frame:qr.frame,animation:{frame:qr.frameOpts,transition:qr.transitionOpts}})}else Ar()}function $r(){fe.emit("plotly_animating"),Re._lastFrameAt=-1/0,Re._timeToNext=0,Re._runningTransitions=0,Re._currentFrame=null;var qr=function(){Re._animationRaf=window.requestAnimationFrame(qr),Date.now()-Re._lastFrameAt>Re._timeToNext&&Rr()};qr()}var Mr=0;function Ir(qr){return Array.isArray(tt)?Mr>=tt.length?qr.transitionOpts=tt[Mr]:qr.transitionOpts=tt[0]:qr.transitionOpts=tt,Mr++,qr}var gr,br,Vr=[],Br=je==null,Ur=Array.isArray(je),Lr=!Br&&!Ur&&u.isPlainObject(je);if(Lr)Vr.push({type:"object",data:Ir(u.extendFlat({},je))});else if(Br||["string","number"].indexOf(typeof je)!==-1)for(gr=0;gr<Re._frames.length;gr++)br=Re._frames[gr],br&&(Br||String(br.group)===String(je))&&Vr.push({type:"byname",name:String(br.name),data:Ir({name:br.name})});else if(Ur)for(gr=0;gr<je.length;gr++){var hr=je[gr];["number","string"].indexOf(typeof hr)!==-1?(hr=String(hr),Vr.push({type:"byname",name:hr,data:Ir({name:hr})})):u.isPlainObject(hr)&&Vr.push({type:"object",data:Ir(u.extendFlat({},hr))})}for(gr=0;gr<Vr.length;gr++)if(br=Vr[gr],br.type==="byname"&&!Re._frameHash[br.data.name]){u.warn('animate failure: frame not found: "'+br.data.name+'"'),Ct();return}["next","immediate"].indexOf(Pe.mode)!==-1&&Ht(),Pe.direction==="reverse"&&Vr.reverse();var Or=fe._fullLayout._currentFrame;if(Or&&Pe.fromcurrent){var fn=-1;for(gr=0;gr<Vr.length;gr++)if(br=Vr[gr],br.type==="byname"&&br.name===Or){fn=gr;break}if(fn>0&&fn<Vr.length-1){var An=[];for(gr=0;gr<Vr.length;gr++)br=Vr[gr],(Vr[gr].type!=="byname"||gr>fn)&&An.push(br);Vr=An}}Vr.length>0?Ut(Vr):(fe.emit("plotly_animated"),at())})}function Vt(fe,je,Pe){if(fe=u.getGraphDiv(fe),je==null)return Promise.resolve();if(!u.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Re,tt,nt,dt,St=fe._transitionData._frames,Dt=fe._transitionData._frameHash;if(!Array.isArray(je))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+je);var at=St.length+je.length*2,Ct=[],Ht={};for(Re=je.length-1;Re>=0;Re--)if(u.isPlainObject(je[Re])){var Ut=je[Re].name,Ar=(Dt[Ut]||Ht[Ut]||{}).name,Rr=je[Re].name,$r=Dt[Ar]||Ht[Ar];Ar&&Rr&&typeof Rr=="number"&&$r&&H<Y&&(H++,u.warn('addFrames: overwriting frame "'+(Dt[Ar]||Ht[Ar]).name+'" with a frame whose name of type "number" also equates to "'+Ar+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),H===Y&&u.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ht[Ut]={name:Ut},Ct.push({frame:l.supplyFrameDefaults(je[Re]),index:Pe&&Pe[Re]!==void 0&&Pe[Re]!==null?Pe[Re]:at+Re})}Ct.sort(function(Lr,hr){return Lr.index>hr.index?-1:Lr.index<hr.index?1:0});var Mr=[],Ir=[],gr=St.length;for(Re=Ct.length-1;Re>=0;Re--){if(tt=Ct[Re].frame,typeof tt.name=="number"&&u.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!tt.name)for(;Dt[tt.name="frame "+fe._transitionData._counter++];);if(Dt[tt.name]){for(nt=0;nt<St.length&&(St[nt]||{}).name!==tt.name;nt++);Mr.push({type:"replace",index:nt,value:tt}),Ir.unshift({type:"replace",index:nt,value:St[nt]})}else dt=Math.max(0,Math.min(Ct[Re].index,gr)),Mr.push({type:"insert",index:dt,value:tt}),Ir.unshift({type:"delete",index:dt}),gr++}var br=l.modifyFrames,Vr=l.modifyFrames,Br=[fe,Ir],Ur=[fe,Mr];return m&&m.add(fe,br,Br,Vr,Ur),l.modifyFrames(fe,Mr)}function rr(fe,je){if(fe=u.getGraphDiv(fe),!u.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe);var Pe,Re,tt=fe._transitionData._frames,nt=[],dt=[];if(!je)for(je=[],Pe=0;Pe<tt.length;Pe++)je.push(Pe);for(je=je.slice(),je.sort(),Pe=je.length-1;Pe>=0;Pe--)Re=je[Pe],nt.push({type:"delete",index:Re}),dt.unshift({type:"insert",index:Re,value:tt[Re]});var St=l.modifyFrames,Dt=l.modifyFrames,at=[fe,dt],Ct=[fe,nt];return m&&m.add(fe,St,at,Dt,Ct),l.modifyFrames(fe,nt)}function Ne(fe){fe=u.getGraphDiv(fe);var je=fe._fullLayout||{},Pe=fe._fullData||[];return l.cleanPlot([],{},Pe,je),l.purge(fe),v.purge(fe),je._container&&je._container.remove(),delete fe._context,fe}function $e(fe){var je=fe._fullLayout,Pe=fe.getBoundingClientRect();if(!u.equalDomRects(Pe,je._lastBBox)){var Re=je._invTransform=u.inverseTransformMatrix(u.getFullTransformMatrix(fe));je._invScaleX=Math.sqrt(Re[0][0]*Re[0][0]+Re[0][1]*Re[0][1]+Re[0][2]*Re[0][2]),je._invScaleY=Math.sqrt(Re[1][0]*Re[1][0]+Re[1][1]*Re[1][1]+Re[1][2]*Re[1][2]),je._lastBBox=Pe}}function Ue(fe){var je=$.select(fe),Pe=fe._fullLayout;if(Pe._calcInverseTransform=$e,Pe._calcInverseTransform(fe),Pe._container=je.selectAll(".plot-container").data([0]),Pe._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),Pe._paperdiv=Pe._container.selectAll(".svg-container").data([0]),Pe._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Pe._glcontainer=Pe._paperdiv.selectAll(".gl-container").data([{}]),Pe._glcontainer.enter().append("div").classed("gl-container",!0),Pe._paperdiv.selectAll(".main-svg").remove(),Pe._paperdiv.select(".modebar-container").remove(),Pe._paper=Pe._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Pe._toppaper=Pe._paperdiv.append("svg").classed("main-svg",!0),Pe._modebardiv=Pe._paperdiv.append("div"),delete Pe._modeBar,Pe._hoverpaper=Pe._paperdiv.append("svg").classed("main-svg",!0),!Pe._uid){var Re={};$.selectAll("defs").each(function(){this.id&&(Re[this.id.split("-")[1]]=1)}),Pe._uid=u.randstr(Re)}Pe._paperdiv.selectAll(".main-svg").attr(C.svgAttrs),Pe._defs=Pe._paper.append("defs").attr("id","defs-"+Pe._uid),Pe._clips=Pe._defs.append("g").classed("clips",!0),Pe._topdefs=Pe._toppaper.append("defs").attr("id","topdefs-"+Pe._uid),Pe._topclips=Pe._topdefs.append("g").classed("clips",!0),Pe._bgLayer=Pe._paper.append("g").classed("bglayer",!0),Pe._draggers=Pe._paper.append("g").classed("draglayer",!0);var tt=Pe._paper.append("g").classed("layer-below",!0);Pe._imageLowerLayer=tt.append("g").classed("imagelayer",!0),Pe._shapeLowerLayer=tt.append("g").classed("shapelayer",!0),Pe._cartesianlayer=Pe._paper.append("g").classed("cartesianlayer",!0),Pe._polarlayer=Pe._paper.append("g").classed("polarlayer",!0),Pe._smithlayer=Pe._paper.append("g").classed("smithlayer",!0),Pe._ternarylayer=Pe._paper.append("g").classed("ternarylayer",!0),Pe._geolayer=Pe._paper.append("g").classed("geolayer",!0),Pe._funnelarealayer=Pe._paper.append("g").classed("funnelarealayer",!0),Pe._pielayer=Pe._paper.append("g").classed("pielayer",!0),Pe._iciclelayer=Pe._paper.append("g").classed("iciclelayer",!0),Pe._treemaplayer=Pe._paper.append("g").classed("treemaplayer",!0),Pe._sunburstlayer=Pe._paper.append("g").classed("sunburstlayer",!0),Pe._indicatorlayer=Pe._toppaper.append("g").classed("indicatorlayer",!0),Pe._glimages=Pe._paper.append("g").classed("glimages",!0);var nt=Pe._toppaper.append("g").classed("layer-above",!0);Pe._imageUpperLayer=nt.append("g").classed("imagelayer",!0),Pe._shapeUpperLayer=nt.append("g").classed("shapelayer",!0),Pe._selectionLayer=Pe._toppaper.append("g").classed("selectionlayer",!0),Pe._infolayer=Pe._toppaper.append("g").classed("infolayer",!0),Pe._menulayer=Pe._toppaper.append("g").classed("menulayer",!0),Pe._zoomlayer=Pe._toppaper.append("g").classed("zoomlayer",!0),Pe._hoverlayer=Pe._hoverpaper.append("g").classed("hoverlayer",!0),Pe._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),fe.emit("plotly_framework")}U.animate=fr,U.addFrames=Vt,U.deleteFrames=rr,U.addTraces=ae,U.deleteTraces=G,U.extendTraces=He,U.moveTraces=K,U.prependTraces=te,U.newPlot=le,U._doPlot=Z,U.purge=Ne,U.react=zt,U.redraw=ne,U.relayout=ge,U.restyle=V,U.setPlotConfig=q,U.update=vt,U._guiRelayout=Ae(ge),U._guiRestyle=Ae(V),U._guiUpdate=Ae(vt),U._storeDirectGUIEdit=oe}}),xu=i({"src/snapshot/helpers.js"(U){var $=mn();U.getDelay=function(u){return u._has&&(u._has("gl3d")||u._has("mapbox")||u._has("map"))?500:0},U.getRedrawFunc=function(u){return function(){$.getComponentMethod("colorbar","draw")(u)}},U.encodeSVG=function(u){return"data:image/svg+xml,"+encodeURIComponent(u)},U.encodeJSON=function(u){return"data:application/json,"+encodeURIComponent(u)};var h=window.URL||window.webkitURL;U.createObjectURL=function(u){return h.createObjectURL(u)},U.revokeObjectURL=function(u){return h.revokeObjectURL(u)},U.createBlob=function(u,p){if(p==="svg")return new window.Blob([u],{type:"image/svg+xml;charset=utf-8"});if(p==="full-json")return new window.Blob([u],{type:"application/json;charset=utf-8"});var v=c(window.atob(u));return new window.Blob([v],{type:"image/"+p})},U.octetStream=function(u){document.location.href="data:application/octet-stream"+u};function c(u){for(var p=u.length,v=new ArrayBuffer(p),m=new Uint8Array(v),g=0;g<p;g++)m[g]=u.charCodeAt(g);return v}U.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/}}),Mm=i({"src/snapshot/tosvg.js"(U,$){var h=d();kr();var c=di(),u=pt();qs();var p=/"/g,v="TOBESTRIPPED",m=new RegExp('("'+v+")|("+v+'")',"g");function g(l){var T=h.select("body").append("div").style({display:"none"}).html(""),y=l.replace(/(&[^;]*;)/gi,function(S){return S==="&lt;"?"&#60;":S==="&rt;"?"&#62;":S.indexOf("<")!==-1||S.indexOf(">")!==-1?"":T.html(S).text()});return T.remove(),y}function w(l){return l.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}$.exports=function(T,y,S){var R=T._fullLayout,M=R._paper,A=R._toppaper,C=R.width,j=R.height,b;M.insert("rect",":first-child").call(c.setRect,0,0,C,j).call(u.fill,R.paper_bgcolor);var k=R._basePlotModules||[];for(b=0;b<k.length;b++){var E=k[b];E.toSVG&&E.toSVG(T)}if(A){var F=A.node().childNodes,P=Array.prototype.slice.call(F);for(b=0;b<P.length;b++){var J=P[b];J.childNodes.length&&M.node().appendChild(J)}}R._draggers&&R._draggers.remove(),M.node().style.background="",M.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var Y=h.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){Y.remove();return}else Y.style({visibility:null,display:null});var Z=this.style.fontFamily;Z&&Z.indexOf('"')!==-1&&Y.style("font-family",Z.replace(p,v));var z=this.style.fontWeight;z&&(z==="normal"||z==="400")&&Y.style("font-weight",void 0);var q=this.style.fontStyle;q&&q==="normal"&&Y.style("font-style",void 0);var X=this.style.fontVariant;X&&X==="normal"&&Y.style("font-variant",void 0)}),M.selectAll(".gradient_filled,.pattern_filled").each(function(){var Y=h.select(this),Z=this.style.fill;Z&&Z.indexOf("url(")!==-1&&Y.style("fill",Z.replace(p,v));var z=this.style.stroke;z&&z.indexOf("url(")!==-1&&Y.style("stroke",z.replace(p,v))}),(y==="pdf"||y==="eps")&&M.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),y==="svg"&&S&&(M.attr("width",S*C),M.attr("height",S*j),M.attr("viewBox","0 0 "+C+" "+j));var H=new window.XMLSerializer().serializeToString(M.node());return H=g(H),H=w(H),H=H.replace(m,"'"),H}}}),Tm=i({"src/snapshot/svgtoimg.js"(U,$){var h=kr(),c=js().EventEmitter,u=xu();function p(v){var m=v.emitter||new c,g=new Promise(function(w,l){var T=window.Image,y=v.svg,S=v.format||"png",R=v.canvas,M=v.scale||1,A=v.width||300,C=v.height||150,j=M*A,b=M*C,k=R.getContext("2d",{willReadFrequently:!0}),E=new T,F,P;S==="svg"||h.isSafari()?P=u.encodeSVG(y):(F=u.createBlob(y,"svg"),P=u.createObjectURL(F)),R.width=j,R.height=b,E.onload=function(){var J;switch(F=null,u.revokeObjectURL(P),S!=="svg"&&k.drawImage(E,0,0,j,b),S){case"jpeg":J=R.toDataURL("image/jpeg");break;case"png":J=R.toDataURL("image/png");break;case"webp":J=R.toDataURL("image/webp");break;case"svg":J=P;break;default:var H="Image format is not jpeg, png, svg or webp.";if(l(new Error(H)),!v.promise)return m.emit("error",H)}w(J),v.promise||m.emit("success",J)},E.onerror=function(J){if(F=null,u.revokeObjectURL(P),l(J),!v.promise)return m.emit("error",J)},E.src=P});return v.promise?g:m}$.exports=p}}),Ay=i({"src/plot_api/to_image.js"(U,$){var h=xe(),c=Ty(),u=Xi(),p=kr(),v=xu(),m=Mm(),g=Tm(),w=a().version,l={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function T(y,S){S=S||{};var R,M,A,C;p.isPlainObject(y)?(R=y.data||[],M=y.layout||{},A=y.config||{},C={}):(y=p.getGraphDiv(y),R=p.extendDeep([],y.data),M=p.extendDeep({},y.layout),A=y._context,C=y._fullLayout||{});function j(le){return!(le in S)||p.validate(S[le],l[le])}if(!j("width")&&S.width!==null||!j("height")&&S.height!==null)throw new Error("Height and width should be pixel values.");if(!j("format"))throw new Error("Export format is not "+p.join2(l.format.values,", "," or ")+".");var b={};function k(le,W){return p.coerce(S,b,l,le,W)}var E=k("format"),F=k("width"),P=k("height"),J=k("scale"),H=k("setBackground"),Y=k("imageDataOnly"),Z=document.createElement("div");Z.style.position="absolute",Z.style.left="-5000px",document.body.appendChild(Z);var z=p.extendFlat({},M);F?z.width=F:S.width===null&&h(C.width)&&(z.width=C.width),P?z.height=P:S.height===null&&h(C.height)&&(z.height=C.height);var q=p.extendFlat({},A,{_exportedPlot:!0,staticPlot:!0,setBackground:H}),X=v.getRedrawFunc(Z);function Q(){return new Promise(function(le){setTimeout(le,v.getDelay(Z._fullLayout))})}function ee(){return new Promise(function(le,W){var ce=m(Z,E,J),de=Z._fullLayout.width,pe=Z._fullLayout.height;function he(){c.purge(Z),document.body.removeChild(Z)}if(E==="full-json"){var be=u.graphJson(Z,!1,"keepdata","object",!0,!0);return be.version=w,be=JSON.stringify(be),he(),le(Y?be:v.encodeJSON(be))}if(he(),E==="svg")return le(Y?ce:v.encodeSVG(ce));var Ee=document.createElement("canvas");Ee.id=p.randstr(),g({format:E,width:de,height:pe,scale:J,canvas:Ee,svg:ce,promise:!0}).then(le).catch(W)})}function ne(le){return Y?le.replace(v.IMAGE_URL_PREFIX,""):le}return new Promise(function(le,W){c.newPlot(Z,R,z,q).then(X).then(Q).then(ee).then(function(ce){le(ne(ce))}).catch(function(ce){W(ce)})})}$.exports=T}}),V5=i({"src/plot_api/validate.js"(U,$){var h=kr(),c=Xi(),u=Di(),p=wr().dfltConfig,v=h.isPlainObject,m=Array.isArray,g=h.isArrayOrTypedArray;$.exports=function(k,E){k===void 0&&(k=[]),E===void 0&&(E={});var F=u.get(),P=[],J={_context:h.extendFlat({},p)},H,Y;m(k)?(J.data=h.extendDeep([],k),H=k):(J.data=[],H=[],P.push(S("array","data"))),v(E)?(J.layout=h.extendDeep({},E),Y=E):(J.layout={},Y={},arguments.length>1&&P.push(S("object","layout"))),c.supplyDefaults(J);for(var Z=J._fullData,z=H.length,q=0;q<z;q++){var X=H[q],Q=["data",q];if(!v(X)){P.push(S("object",Q));continue}var ee=Z[q],ne=ee.type,le=F.traces[ne].attributes;le.type={valType:"enumerated",values:[ne]},ee.visible===!1&&X.visible!==!1&&P.push(S("invisible",Q)),w(X,ee,le,P,Q)}var W=J._fullLayout,ce=l(F,Z);return w(Y,W,ce,P,"layout"),P.length===0?void 0:P};function w(b,k,E,F,P,J){J=J||[];for(var H=Object.keys(b),Y=0;Y<H.length;Y++){var Z=H[Y],z=J.slice();z.push(Z);var q=b[Z],X=k[Z],Q=M(E,Z),ee=(Q||{}).valType,ne=ee==="info_array",le=ee==="colorscale",W=(Q||{}).items;if(!R(E,Z))F.push(S("schema",P,z));else if(v(q)&&v(X)&&ee!=="any")w(q,X,Q,F,P,z);else if(ne&&m(q)){q.length>X.length&&F.push(S("unused",P,z.concat(X.length)));var ce=X.length,de=Array.isArray(W);de&&(ce=Math.min(ce,W.length));var pe,he,be,Ee,Te;if(Q.dimensions===2)for(he=0;he<ce;he++)if(m(q[he])){q[he].length>X[he].length&&F.push(S("unused",P,z.concat(he,X[he].length)));var He=X[he].length;for(pe=0;pe<(de?Math.min(He,W[he].length):He);pe++)be=de?W[he][pe]:W,Ee=q[he][pe],Te=X[he][pe],h.validate(Ee,be)?Te!==Ee&&Te!==+Ee&&F.push(S("dynamic",P,z.concat(he,pe),Ee,Te)):F.push(S("value",P,z.concat(he,pe),Ee))}else F.push(S("array",P,z.concat(he),q[he]));else for(he=0;he<ce;he++)be=de?W[he]:W,Ee=q[he],Te=X[he],h.validate(Ee,be)?Te!==Ee&&Te!==+Ee&&F.push(S("dynamic",P,z.concat(he),Ee,Te)):F.push(S("value",P,z.concat(he),Ee))}else if(Q.items&&!ne&&m(q)){var te=W[Object.keys(W)[0]],ae=[],G,K;for(G=0;G<X.length;G++){var V=X[G]._index||G;if(K=z.slice(),K.push(V),v(q[V])&&v(X[G])){ae.push(V);var re=q[V],D=X[G];v(re)&&re.visible!==!1&&D.visible===!1?F.push(S("invisible",P,K)):w(re,D,te,F,P,K)}}for(G=0;G<q.length;G++)K=z.slice(),K.push(G),v(q[G])?ae.indexOf(G)===-1&&F.push(S("unused",P,K)):F.push(S("object",P,K,q[G]))}else!v(q)&&v(X)?F.push(S("object",P,z,q)):!g(q)&&g(X)&&!ne&&!le?F.push(S("array",P,z,q)):Z in k?h.validate(q,Q)?Q.valType==="enumerated"&&(Q.coerceNumber&&q!==+X||q!==X)&&F.push(S("dynamic",P,z,q,X)):F.push(S("value",P,z,q)):F.push(S("unused",P,z,q))}return F}function l(b,k){for(var E=b.layout.layoutAttributes,F=0;F<k.length;F++){var P=k[F],J=b.traces[P.type],H=J.layoutAttributes;H&&(P.subplot?h.extendFlat(E[J.attributes.subplot.dflt],H):h.extendFlat(E,H))}return E}var T={object:function(b,k){var E;return b==="layout"&&k===""?E="The layout argument":b[0]==="data"&&k===""?E="Trace "+b[1]+" in the data argument":E=y(b)+"key "+k,E+" must be linked to an object container"},array:function(b,k){var E;return b==="data"?E="The data argument":E=y(b)+"key "+k,E+" must be linked to an array container"},schema:function(b,k){return y(b)+"key "+k+" is not part of the schema"},unused:function(b,k,E){var F=v(E)?"container":"key";return y(b)+F+" "+k+" did not get coerced"},dynamic:function(b,k,E,F){return[y(b)+"key",k,"(set to '"+E+"')","got reset to","'"+F+"'","during defaults."].join(" ")},invisible:function(b,k){return(k?y(b)+"item "+k:"Trace "+b[1])+" got defaulted to be not visible"},value:function(b,k,E){return[y(b)+"key "+k,"is set to an invalid value ("+E+")"].join(" ")}};function y(b){return m(b)?"In data trace "+b[1]+", ":"In "+b+", "}function S(b,k,E,F,P){E=E||"";var J,H;m(k)?(J=k[0],H=k[1]):(J=k,H=null);var Y=j(E),Z=T[b](k,Y,F,P);return h.log(Z),{code:b,container:J,trace:H,path:E,astr:Y,msg:Z}}function R(b,k){var E=C(k),F=E.keyMinusId,P=E.id;return F in b&&b[F]._isSubplotObj&&P?!0:k in b}function M(b,k){if(k in b)return b[k];var E=C(k);return b[E.keyMinusId]}var A=h.counterRegex("([a-z]+)");function C(b){var k=b.match(A);return{keyMinusId:k&&k[1],id:k&&k[2]}}function j(b){if(!m(b))return String(b);for(var k="",E=0;E<b.length;E++){var F=b[E];typeof F=="number"?k=k.substr(0,k.length-1)+"["+F+"]":k+=F,E<b.length-1&&(k+=".")}return k}}}),U5=i({"src/snapshot/filesaver.js"(U,$){var h=kr(),c=xu();function u(p,v,m){var g=document.createElement("a"),w="download"in g,l=new Promise(function(T,y){var S,R;if(w)return S=c.createBlob(p,m),R=c.createObjectURL(S),g.href=R,g.download=v,document.body.appendChild(g),g.click(),document.body.removeChild(g),c.revokeObjectURL(R),S=null,T(v);if(h.isSafari()){var M=m==="svg"?",":";base64,";return c.octetStream(M+encodeURIComponent(p)),T(v)}y(new Error("download error"))});return l}$.exports=u}}),Cy=i({"src/snapshot/download.js"(U,$){var h=kr(),c=Ay(),u=U5();xu();function p(v,m){var g;return h.isPlainObject(v)||(g=h.getGraphDiv(v)),m=m||{},m.format=m.format||"png",m.width=m.width||null,m.height=m.height||null,m.imageDataOnly=!0,new Promise(function(w,l){g&&g._snapshotInProgress&&l(new Error("Snapshotting already in progress.")),g&&(g._snapshotInProgress=!0);var T=c(v,m),y=m.filename||v.fn||"newplot";y+="."+m.format.replace("-","."),T.then(function(S){return g&&(g._snapshotInProgress=!1),u(S,y,m.format)}).then(function(S){w(S)}).catch(function(S){g&&(g._snapshotInProgress=!1),l(S)})})}$.exports=p}}),$5=i({"src/plot_api/template_api.js"(U){var $=kr(),h=$.isPlainObject,c=Di(),u=Xi(),p=lt(),v=Si(),m=wr().dfltConfig;U.makeTemplate=function(A){A=$.isPlainObject(A)?A:$.getGraphDiv(A),A=$.extendDeep({_context:m},{data:A.data,layout:A.layout}),u.supplyDefaults(A);var C=A.data||[],j=A.layout||{};j._basePlotModules=A._fullLayout._basePlotModules,j._modules=A._fullLayout._modules;var b={data:{},layout:{}};C.forEach(function(q){var X={};l(q,X,y.bind(null,q));var Q=$.coerce(q,{},p,"type"),ee=b.data[Q];ee||(ee=b.data[Q]=[]),ee.push(X)}),l(j,b.layout,T.bind(null,j)),delete b.layout.template;var k=j.template;if(h(k)){var E=k.layout,F,P,J,H,Y,Z;h(E)&&g(E,b.layout);var z=k.data;if(h(z)){for(P in b.data)if(J=z[P],Array.isArray(J)){for(Y=b.data[P],Z=Y.length,H=J.length,F=0;F<Z;F++)g(J[F%H],Y[F]);for(F=Z;F<H;F++)Y.push($.extendDeep({},J[F]))}for(P in z)P in b.data||(b.data[P]=$.extendDeep([],z[P]))}}return b};function g(A,C){A=$.extendDeep({},A);var j=Object.keys(A).sort(),b,k;function E(Y,Z,z){if(h(Z)&&h(Y))g(Y,Z);else if(Array.isArray(Z)&&Array.isArray(Y)){var q=v.arrayTemplater({_template:A},z);for(k=0;k<Z.length;k++){var X=Z[k],Q=q.newItem(X)._template;Q&&g(Q,X)}var ee=q.defaultItems();for(k=0;k<ee.length;k++)Z.push(ee[k]._template);for(k=0;k<Z.length;k++)delete Z[k].templateitemname}}for(b=0;b<j.length;b++){var F=j[b],P=A[F];if(F in C?E(P,C[F],F):C[F]=P,w(F)===F)for(var J in C){var H=w(J);J!==H&&H===F&&!(J in A)&&E(P,C[J],F)}}}function w(A){return A.replace(/[0-9]+$/,"")}function l(A,C,j,b,k){var E=k&&j(k);for(var F in A){var P=A[F],J=S(A,F,b),H=S(A,F,k),Y=j(H);if(!Y){var Z=w(F);Z!==F&&(H=S(A,Z,k),Y=j(H))}if(!(E&&E===Y)&&!(!Y||Y._noTemplating||Y.valType==="data_array"||Y.arrayOk&&Array.isArray(P)))if(!Y.valType&&h(P))l(P,C,j,J,H);else if(Y._isLinkedToArray&&Array.isArray(P))for(var z=!1,q=0,X={},Q=0;Q<P.length;Q++){var ee=P[Q];if(h(ee)){var ne=ee.name;if(ne)X[ne]||(l(ee,C,j,S(P,q,J),S(P,q,H)),q++,X[ne]=1);else if(!z){var le=v.arrayDefaultKey(F),W=S(A,le,b),ce=S(P,q,J);l(ee,C,j,ce,S(P,q,H));var de=$.nestedProperty(C,ce),pe=$.nestedProperty(C,W);pe.set(de.get()),de.set(null),z=!0}}}else{var he=$.nestedProperty(C,J);he.set(P)}}}function T(A,C){return c.getLayoutValObject(A,$.nestedProperty({},C).parts)}function y(A,C){return c.getTraceValObject(A,$.nestedProperty({},C).parts)}function S(A,C,j){var b;return j?Array.isArray(A)?b=j+"["+C+"]":b=j+"."+C:b=C,b}U.validateTemplate=function(A,C){var j=$.extendDeep({},{_context:m,data:A.data,layout:A.layout}),b=j.layout||{};h(C)||(C=b.template||{});var k=C.layout,E=C.data,F=[];j.layout=b,j.layout.template=C,u.supplyDefaults(j);var P=j._fullLayout,J=j._fullData,H={};function Y(W,ce){for(var de in W)if(de.charAt(0)!=="_"&&h(W[de])){var pe=w(de),he=[],be;for(be=0;be<ce.length;be++)he.push(S(W,de,ce[be])),pe!==de&&he.push(S(W,pe,ce[be]));for(be=0;be<he.length;be++)H[he[be]]=1;Y(W[de],he)}}function Z(W,ce){for(var de in W)if(de.indexOf("defaults")===-1&&h(W[de])){var pe=S(W,de,ce);H[pe]?Z(W[de],pe):F.push({code:"unused",path:pe})}}if(h(k)?(Y(P,["layout"]),Z(k,"layout")):F.push({code:"layout"}),!h(E))F.push({code:"data"});else{for(var z={},q,X=0;X<J.length;X++){var Q=J[X];q=Q.type,z[q]=(z[q]||0)+1,Q._fullInput._template||F.push({code:"missing",index:Q.index,traceType:q})}for(q in E){var ee=E[q].length,ne=z[q]||0;ee>ne?F.push({code:"unused",traceType:q,templateCount:ee,dataCount:ne}):ne>ee&&F.push({code:"reused",traceType:q,templateCount:ee,dataCount:ne})}}function le(W,ce){for(var de in W)if(de.charAt(0)!=="_"){var pe=W[de],he=S(W,de,ce);h(pe)?(Array.isArray(W)&&pe._template===!1&&pe.templateitemname&&F.push({code:"missing",path:he,templateitemname:pe.templateitemname}),le(pe,he)):Array.isArray(pe)&&R(pe)&&le(pe,he)}}if(le({data:J,layout:P},""),F.length)return F.map(M)};function R(A){for(var C=0;C<A.length;C++)if(h(A[C]))return!0}function M(A){var C;switch(A.code){case"data":C="The template has no key data.";break;case"layout":C="The template has no key layout.";break;case"missing":A.path?C="There are no templates for item "+A.path+" with name "+A.templateitemname:C="There are no templates for trace "+A.index+", of type "+A.traceType+".";break;case"unused":A.path?C="The template item at "+A.path+" was not used in constructing the plot.":A.dataCount?C="Some of the templates of type "+A.traceType+" were not used. The template has "+A.templateCount+" traces, the data only has "+A.dataCount+" of this type.":C="The template has "+A.templateCount+" traces of type "+A.traceType+" but there are none in the data.";break;case"reused":C="Some of the templates of type "+A.traceType+" were used more than once. The template has "+A.templateCount+" traces, the data has "+A.dataCount+" of this type.";break}return A.msg=C,A}}}),Y5=i({"src/plot_api/index.js"(U){var $=Ty();U._doPlot=$._doPlot,U.newPlot=$.newPlot,U.restyle=$.restyle,U.relayout=$.relayout,U.redraw=$.redraw,U.update=$.update,U._guiRestyle=$._guiRestyle,U._guiRelayout=$._guiRelayout,U._guiUpdate=$._guiUpdate,U._storeDirectGUIEdit=$._storeDirectGUIEdit,U.react=$.react,U.extendTraces=$.extendTraces,U.prependTraces=$.prependTraces,U.addTraces=$.addTraces,U.deleteTraces=$.deleteTraces,U.moveTraces=$.moveTraces,U.purge=$.purge,U.addFrames=$.addFrames,U.deleteFrames=$.deleteFrames,U.animate=$.animate,U.setPlotConfig=$.setPlotConfig;var h=Jn().getGraphDiv,c=_a().eraseActiveShape;U.deleteActiveShape=function(p){return c(h(p))},U.toImage=Ay(),U.validate=V5(),U.downloadImage=Cy();var u=$5();U.makeTemplate=u.makeTemplate,U.validateTemplate=u.validateTemplate}}),jy=i({"src/traces/scatter/xy_defaults.js"(U,$){var h=kr(),c=mn();$.exports=function(p,v,m,g){var w=g("x"),l=g("y"),T,y=c.getComponentMethod("calendars","handleTraceDefaults");if(y(p,v,["x","y"],m),w){var S=h.minRowLength(w);l?T=Math.min(S,h.minRowLength(l)):(T=S,g("y0"),g("dy"))}else{if(!l)return 0;T=h.minRowLength(l),g("x0"),g("dx")}return v._length=T,T}}}),Ey=i({"src/traces/scatter/period_defaults.js"(U,$){var h=kr().dateTick0,c=Ce(),u=c.ONEWEEK;function p(v,m){return v%u===0?h(m,1):h(m,0)}$.exports=function(m,g,w,l,T){if(T||(T={x:!0,y:!0}),T.x){var y=l("xperiod");y&&(l("xperiod0",p(y,g.xcalendar)),l("xperiodalignment"))}if(T.y){var S=l("yperiod");S&&(l("yperiod0",p(S,g.ycalendar)),l("yperiodalignment"))}}}}),G5=i({"src/traces/scatter/stack_defaults.js"(U,$){var h=["orientation","groupnorm","stackgaps"];$.exports=function(u,p,v,m){var g=v._scatterStackOpts,w=m("stackgroup");if(w){var l=p.xaxis+p.yaxis,T=g[l];T||(T=g[l]={});var y=T[w],S=!1;y?y.traces.push(p):(y=T[w]={traceIndices:[],traces:[p]},S=!0);for(var R={orientation:p.x&&!p.y?"h":"v"},M=0;M<h.length;M++){var A=h[M],C=A+"Found";if(!y[C]){var j=u[A]!==void 0,b=A==="orientation";if((j||S)&&(y[A]=m(A,R[A]),b&&(y.fillDflt=y[A]==="h"?"tonextx":"tonexty"),j&&(y[C]=!0,!S&&(delete y.traces[0][A],b))))for(var k=0;k<y.traces.length-1;k++){var E=y.traces[k];E._input.fill!==E.fill&&(E.fill=y.fillDflt)}}}return y}}}}),X5=i({"src/traces/scatter/marker_defaults.js"(U,$){var h=pt(),c=ds().hasColorscale,u=Ga(),p=Ia();$.exports=function(m,g,w,l,T,y){var S=p.isBubble(m),R=(m.line||{}).color,M;if(y=y||{},R&&(w=R),T("marker.symbol"),T("marker.opacity",S?.7:1),T("marker.size"),y.noAngle||(T("marker.angle"),y.noAngleRef||T("marker.angleref"),y.noStandOff||T("marker.standoff")),T("marker.color",w),c(m,"marker")&&u(m,g,l,T,{prefix:"marker.",cLetter:"c"}),y.noSelect||(T("selected.marker.color"),T("unselected.marker.color"),T("selected.marker.size"),T("unselected.marker.size")),y.noLine||(R&&!Array.isArray(R)&&g.marker.color!==R?M=R:S?M=h.background:M=h.defaultLine,T("marker.line.color",M),c(m,"marker.line")&&u(m,g,l,T,{prefix:"marker.line.",cLetter:"c"}),T("marker.line.width",S?1:0)),S&&(T("marker.sizeref"),T("marker.sizemin"),T("marker.sizemode")),y.gradient){var A=T("marker.gradient.type");A!=="none"&&T("marker.gradient.color")}}}}),Z5=i({"src/traces/scatter/line_defaults.js"(U,$){var h=kr().isArrayOrTypedArray,c=ds().hasColorscale,u=Ga();$.exports=function(v,m,g,w,l,T){T||(T={});var y=(v.marker||{}).color;if(y&&y._inputArray&&(y=y._inputArray),l("line.color",g),c(v,"line"))u(v,m,w,l,{prefix:"line.",cLetter:"c"});else{var S=(h(y)?!1:y)||g;l("line.color",S)}l("line.width"),T.noDash||l("line.dash"),T.backoff&&l("line.backoff")}}}),Q5=i({"src/traces/scatter/line_shape_defaults.js"(U,$){$.exports=function(c,u,p){var v=p("line.shape");v==="spline"&&p("line.smoothing")}}}),J5=i({"src/traces/scatter/text_defaults.js"(U,$){var h=kr();$.exports=function(c,u,p,v,m){m=m||{},v("textposition"),h.coerceFont(v,"textfont",m.font||p.font,m),m.noSelect||(v("selected.textfont.color"),v("unselected.textfont.color"))}}}),K5=i({"src/traces/scatter/fillcolor_defaults.js"(U,$){var h=pt(),c=kr().isArrayOrTypedArray;function u(p){for(var v=h.interpolate(p[0][1],p[1][1],.5),m=2;m<p.length;m++){var g=h.interpolate(p[m-1][1],p[m][1],.5);v=h.interpolate(v,g,p[m-1][0]/p[m][0])}return v}$.exports=function(v,m,g,w,l){l||(l={});var T=!1;if(m.marker){var y=m.marker.color,S=(m.marker.line||{}).color;y&&!c(y)?T=y:S&&!c(S)&&(T=S)}var R;if(l.moduleHasFillgradient){var M=w("fillgradient.type");if(M!=="none"){w("fillgradient.start"),w("fillgradient.stop");var A=w("fillgradient.colorscale");A&&(R=u(A))}}w("fillcolor",h.addOpacity((m.line||{}).color||T||R||g,.5))}}}),ek=i({"src/traces/scatter/defaults.js"(U,$){var h=kr(),c=mn(),u=yu(),p=Sm(),v=Ia(),m=jy(),g=Ey(),w=G5(),l=X5(),T=Z5(),y=Q5(),S=J5(),R=K5(),M=kr().coercePattern;$.exports=function(C,j,b,k){function E(q,X){return h.coerce(C,j,u,q,X)}var F=m(C,j,k,E);if(F||(j.visible=!1),!!j.visible){g(C,j,k,E),E("xhoverformat"),E("yhoverformat"),E("zorder");var P=w(C,j,k,E);k.scattermode==="group"&&j.orientation===void 0&&E("orientation","v");var J=!P&&F<p.PTS_LINESONLY?"lines+markers":"lines";E("text"),E("hovertext"),E("mode",J),v.hasMarkers(j)&&l(C,j,b,k,E,{gradient:!0}),v.hasLines(j)&&(T(C,j,b,k,E,{backoff:!0}),y(C,j,E),E("connectgaps"),E("line.simplify")),v.hasText(j)&&(E("texttemplate"),S(C,j,k,E));var H=[];(v.hasMarkers(j)||v.hasText(j))&&(E("cliponaxis"),E("marker.maxdisplayed"),H.push("points")),E("fill",P?P.fillDflt:"none"),j.fill!=="none"&&(R(C,j,b,E,{moduleHasFillgradient:!0}),v.hasLines(j)||y(C,j,E),M(E,"fillpattern",j.fillcolor,!1));var Y=(j.line||{}).color,Z=(j.marker||{}).color;(j.fill==="tonext"||j.fill==="toself")&&H.push("fills"),E("hoveron",H.join("+")||"points"),j.hoveron!=="fills"&&E("hovertemplate");var z=c.getComponentMethod("errorbars","supplyDefaults");z(C,j,Y||Z||b,{axis:"y"}),z(C,j,Y||Z||b,{axis:"x",inherit:"y"}),h.coerceSelectionMarkerOpacity(j,E)}}}}),Ly=i({"src/traces/scatter/grouping_defaults.js"(U,$){var h=Vo().getAxisGroup;$.exports=function(u,p,v,m,g){var w=p.orientation,l=p[{v:"x",h:"y"}[w]+"axis"],T=h(v,l)+w,y=v._alignmentOpts||{},S=m("alignmentgroup"),R=y[T];R||(R=y[T]={});var M=R[S];M?M.traces.push(p):M=R[S]={traces:[p],alignmentIndex:Object.keys(R).length,offsetGroups:{}};var A=m("offsetgroup")||"",C=M.offsetGroups,j=C[A];p._offsetIndex=0,(g!=="group"||A)&&(j||(j=C[A]={offsetIndex:Object.keys(C).length}),p._offsetIndex=j.offsetIndex)}}}),tk=i({"src/traces/scatter/cross_trace_defaults.js"(U,$){var h=kr(),c=Ly(),u=yu();$.exports=function(v,m){var g,w,l,T=m.scattermode;function y(C){return h.coerce(w._input,w,u,C)}if(m.scattermode==="group")for(l=0;l<v.length;l++)w=v[l],w.type==="scatter"&&(g=w._input,c(g,w,m,y,T));for(l=0;l<v.length;l++){var S=v[l];if(S.type==="scatter"){var R=S.fill;if(!(R==="none"||R==="toself")&&(S.opacity=void 0,R==="tonexty"||R==="tonextx"))for(var M=l-1;M>=0;M--){var A=v[M];if(A.type==="scatter"&&A.xaxis===S.xaxis&&A.yaxis===S.yaxis){A.opacity=void 0;break}}}}}}}),rk=i({"src/traces/scatter/layout_defaults.js"(U,$){var h=kr(),c=Dl();$.exports=function(u,p){function v(g,w){return h.coerce(u,p,c,g,w)}var m=p.barmode==="group";p.scattermode==="group"&&v("scattergap",m?p.bargap:.2)}}}),Ry=i({"src/plots/cartesian/align_period.js"(U,$){var h=xe(),c=kr(),u=c.dateTime2ms,p=c.incrementMonth,v=Ce(),m=v.ONEAVGMONTH;$.exports=function(w,l,T,y){if(l.type!=="date")return{vals:y};var S=w[T+"periodalignment"];if(!S)return{vals:y};var R=w[T+"period"],M;if(h(R)){if(R=+R,R<=0)return{vals:y}}else if(typeof R=="string"&&R.charAt(0)==="M"){var A=+R.substring(1);if(A>0&&Math.round(A)===A)M=A;else return{vals:y}}for(var C=l.calendar,j=S==="start",b=S==="end",k=w[T+"period0"],E=u(k,C)||0,F=[],P=[],J=[],H=y.length,Y=0;Y<H;Y++){var Z=y[Y],z,q,X;if(M){for(z=Math.round((Z-E)/(M*m)),X=p(E,M*z,C);X>Z;)X=p(X,-M,C);for(;X<=Z;)X=p(X,M,C);q=p(X,-M,C)}else{for(z=Math.round((Z-E)/R),X=E+z*R;X>Z;)X-=R;for(;X<=Z;)X+=R;q=X-R}F[Y]=j?q:b?X:(q+X)/2,P[Y]=q,J[Y]=X}return{vals:F,starts:P,ends:J}}}}),nk=i({"src/traces/scatter/colorscale_calc.js"(U,$){var h=ds().hasColorscale,c=wc(),u=Ia();$.exports=function(v,m){u.hasLines(m)&&h(m,"line")&&c(v,m,{vals:m.line.color,containerStr:"line",cLetter:"c"}),u.hasMarkers(m)&&(h(m,"marker")&&c(v,m,{vals:m.marker.color,containerStr:"marker",cLetter:"c"}),h(m,"marker.line")&&c(v,m,{vals:m.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}}}),Dy=i({"src/traces/scatter/arrays_to_calcdata.js"(U,$){var h=kr();$.exports=function(u,p){for(var v=0;v<u.length;v++)u[v].i=v;h.mergeArray(p.text,u,"tx"),h.mergeArray(p.texttemplate,u,"txt"),h.mergeArray(p.hovertext,u,"htx"),h.mergeArray(p.customdata,u,"data"),h.mergeArray(p.textposition,u,"tp"),p.textfont&&(h.mergeArrayCastPositive(p.textfont.size,u,"ts"),h.mergeArray(p.textfont.color,u,"tc"),h.mergeArray(p.textfont.family,u,"tf"),h.mergeArray(p.textfont.weight,u,"tw"),h.mergeArray(p.textfont.style,u,"ty"),h.mergeArray(p.textfont.variant,u,"tv"),h.mergeArray(p.textfont.textcase,u,"tC"),h.mergeArray(p.textfont.lineposition,u,"tE"),h.mergeArray(p.textfont.shadow,u,"tS"));var m=p.marker;if(m){h.mergeArrayCastPositive(m.size,u,"ms"),h.mergeArrayCastPositive(m.opacity,u,"mo"),h.mergeArray(m.symbol,u,"mx"),h.mergeArray(m.angle,u,"ma"),h.mergeArray(m.standoff,u,"mf"),h.mergeArray(m.color,u,"mc");var g=m.line;m.line&&(h.mergeArray(g.color,u,"mlc"),h.mergeArrayCastPositive(g.width,u,"mlw"));var w=m.gradient;w&&w.type!=="none"&&(h.mergeArray(w.type,u,"mgt"),h.mergeArray(w.color,u,"mgc"))}}}}),Py=i({"src/traces/scatter/calc_selection.js"(U,$){var h=kr();$.exports=function(u,p){h.isArrayOrTypedArray(p.selectedpoints)&&h.tagSelected(u,p)}}}),Ny=i({"src/traces/scatter/calc.js"(U,$){var h=xe(),c=kr(),u=ji(),p=Ry(),v=Ce().BADNUM,m=Ia(),g=nk(),w=Dy(),l=Py();function T(C,j){var b=C._fullLayout,k=j._xA=u.getFromId(C,j.xaxis||"x","x"),E=j._yA=u.getFromId(C,j.yaxis||"y","y"),F=k.makeCalcdata(j,"x"),P=E.makeCalcdata(j,"y"),J=p(j,k,"x",F),H=p(j,E,"y",P),Y=J.vals,Z=H.vals,z=j._length,q=new Array(z),X=j.ids,Q=A(j,b,k,E),ee=!1,ne,le,W,ce,de,pe;R(b,j);var he="x",be="y",Ee;if(Q)c.pushUnique(Q.traceIndices,j.index),ne=Q.orientation==="v",ne?(be="s",Ee="x"):(he="s",Ee="y"),de=Q.stackgaps==="interpolate";else{var Te=S(j,z);y(C,j,k,E,Y,Z,Te)}var He=!!j.xperiodalignment,te=!!j.yperiodalignment;for(le=0;le<z;le++){var ae=q[le]={},G=h(Y[le]),K=h(Z[le]);G&&K?(ae[he]=Y[le],ae[be]=Z[le],He&&(ae.orig_x=F[le],ae.xEnd=J.ends[le],ae.xStart=J.starts[le]),te&&(ae.orig_y=P[le],ae.yEnd=H.ends[le],ae.yStart=H.starts[le])):Q&&(ne?G:K)?(ae[Ee]=ne?Y[le]:Z[le],ae.gap=!0,de?(ae.s=v,ee=!0):ae.s=0):ae[he]=ae[be]=v,X&&(ae.id=String(X[le]))}if(w(q,j),g(C,j),l(q,j),Q){for(le=0;le<q.length;)q[le][Ee]===v?q.splice(le,1):le++;if(c.sort(q,function(B,oe){return B[Ee]-oe[Ee]||B.i-oe.i}),ee){for(le=0;le<q.length-1&&q[le].gap;)le++;for(pe=q[le].s,pe||(pe=q[le].s=0),W=0;W<le;W++)q[W].s=pe;for(ce=q.length-1;ce>le&&q[ce].gap;)ce--;for(pe=q[ce].s,W=q.length-1;W>ce;W--)q[W].s=pe;for(;le<ce;)if(le++,q[le].gap){for(W=le+1;q[W].gap;)W++;for(var V=q[le-1][Ee],re=q[le-1].s,D=(q[W].s-re)/(q[W][Ee]-V);le<W;)q[le].s=re+(q[le][Ee]-V)*D,le++}}}return q}function y(C,j,b,k,E,F,P){var J=j._length,H=C._fullLayout,Y=b._id,Z=k._id,z=H._firstScatter[M(j)]===j.uid,q=(A(j,H,b,k)||{}).orientation,X=j.fill;b._minDtick=0,k._minDtick=0;var Q={padded:!0},ee={padded:!0};P&&(Q.ppad=ee.ppad=P);var ne=J<2||E[0]!==E[J-1]||F[0]!==F[J-1];ne&&(X==="tozerox"||X==="tonextx"&&(z||q==="h"))?Q.tozero=!0:!(j.error_y||{}).visible&&(X==="tonexty"||X==="tozeroy"||!m.hasMarkers(j)&&!m.hasText(j))&&(Q.padded=!1,Q.ppad=0),ne&&(X==="tozeroy"||X==="tonexty"&&(z||q==="v"))?ee.tozero=!0:(X==="tonextx"||X==="tozerox")&&(ee.padded=!1),Y&&(j._extremes[Y]=u.findExtremes(b,E,Q)),Z&&(j._extremes[Z]=u.findExtremes(k,F,ee))}function S(C,j){if(m.hasMarkers(C)){var b=C.marker,k=1.6*(C.marker.sizeref||1),E;if(C.marker.sizemode==="area"?E=function(Y){return Math.max(Math.sqrt((Y||0)/k),3)}:E=function(Y){return Math.max((Y||0)/k,3)},c.isArrayOrTypedArray(b.size)){var F={type:"linear"};u.setConvert(F);for(var P=F.makeCalcdata(C.marker,"size"),J=new Array(j),H=0;H<j;H++)J[H]=E(P[H]);return J}else return E(b.size)}}function R(C,j){var b=M(j),k=C._firstScatter;k[b]||(k[b]=j.uid)}function M(C){var j=C.stackgroup;return C.xaxis+C.yaxis+C.type+(j?"-"+j:"")}function A(C,j,b,k){var E=C.stackgroup;if(E){var F=j._scatterStackOpts[b._id+k._id][E],P=F.orientation==="v"?k:b;if(P.type==="linear"||P.type==="log")return F}}$.exports={calc:T,calcMarkerSize:S,calcAxisExpansion:y,setFirstScatter:R,getStackOpts:A}}}),ik=i({"src/traces/bar/sieve.js"(U,$){$.exports=c;var h=kr().distinctVals;function c(u,p){this.traces=u,this.sepNegVal=p.sepNegVal,this.overlapNoMerge=p.overlapNoMerge;for(var v=1/0,m=p.posAxis._id.charAt(0),g=[],w=0;w<u.length;w++){for(var l=u[w],T=0;T<l.length;T++){var y=l[T],S=y.p;S===void 0&&(S=y[m]),S!==void 0&&g.push(S)}l[0]&&l[0].width1&&(v=Math.min(l[0].width1,v))}this.positions=g;var R=h(g);this.distinctPositions=R.vals,R.vals.length===1&&v!==1/0?this.minDiff=v:this.minDiff=Math.min(R.minDiff,v);var M=(p.posAxis||{}).type;(M==="category"||M==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}c.prototype.put=function(p,v,m){var g=this.getLabel(p,v,m),w=this.bins[g]||0;return this.bins[g]=w+m,w},c.prototype.get=function(p,v,m){var g=this.getLabel(p,v,m);return this.bins[g]||0},c.prototype.getLabel=function(p,v,m){var g=m<0&&this.sepNegVal?"v":"^",w=this.overlapNoMerge?p:Math.round(p/this.binWidth);return g+w+"g"+v}}}),zy=i({"src/traces/bar/cross_trace_calc.js"(U,$){var h=xe(),c=kr().isArrayOrTypedArray,u=Ce().BADNUM,p=mn(),v=ji(),m=Vo().getAxisGroup,g=ik();function w(q,X){for(var Q=X.xaxis,ee=X.yaxis,ne=q._fullLayout,le=q._fullData,W=q.calcdata,ce=[],de=[],pe=0;pe<le.length;pe++){var he=le[pe];if(he.visible===!0&&p.traceIs(he,"bar")&&he.xaxis===Q._id&&he.yaxis===ee._id&&(he.orientation==="h"?ce.push(W[pe]):de.push(W[pe]),he._computePh))for(var be=q.calcdata[pe],Ee=0;Ee<be.length;Ee++)typeof be[Ee].ph0=="function"&&(be[Ee].ph0=be[Ee].ph0()),typeof be[Ee].ph1=="function"&&(be[Ee].ph1=be[Ee].ph1())}var Te={xCat:Q.type==="category"||Q.type==="multicategory",yCat:ee.type==="category"||ee.type==="multicategory",mode:ne.barmode,norm:ne.barnorm,gap:ne.bargap,groupgap:ne.bargroupgap};l(q,Q,ee,de,Te),l(q,ee,Q,ce,Te)}function l(q,X,Q,ee,ne){if(ee.length){var le,W,ce,de,pe;switch(S(Q,ee),ne.mode){case"overlay":R(q,X,Q,ee,ne);break;case"group":for(le=[],W=[],ce=0;ce<ee.length;ce++)de=ee[ce],pe=de[0].trace,pe.offset===void 0?W.push(de):le.push(de);W.length&&M(q,X,Q,W,ne),le.length&&R(q,X,Q,le,ne);break;case"stack":case"relative":for(le=[],W=[],ce=0;ce<ee.length;ce++)de=ee[ce],pe=de[0].trace,pe.base===void 0?W.push(de):le.push(de);y(W),W.length&&A(q,X,Q,W,ne),le.length&&R(q,X,Q,le,ne);break}T(ee),Z(ee,X)}}function T(q){var X,Q,ee,ne,le,W,ce;for(X=0;X<q.length;X++)Q=q[X],ee=Q[0].trace,ne=Q[0].t,ne.cornerradiusvalue===void 0&&(le=ee.marker?ee.marker.cornerradius:void 0,le!==void 0&&(W=h(le)?+le:+le.slice(0,-1),ce=h(le)?"px":"%",ne.cornerradiusvalue=W,ne.cornerradiusform=ce))}function y(q){if(!(q.length<2)){var X,Q,ee,ne,le,W,ce;for(X=0;X<q.length&&(Q=q[X],ee=Q[0].trace,le=ee.marker?ee.marker.cornerradius:void 0,le===void 0);X++);if(le!==void 0)for(W=h(le)?+le:+le.slice(0,-1),ce=h(le)?"px":"%",X=0;X<q.length;X++)Q=q[X],ne=Q[0].t,ne.cornerradiusvalue=W,ne.cornerradiusform=ce}}function S(q,X){var Q,ee;for(Q=0;Q<X.length;Q++){var ne=X[Q],le=ne[0].trace,W=le.type==="funnel"?le._base:le.base,ce,de=le.orientation==="h"?le.xcalendar:le.ycalendar,pe=q.type==="category"||q.type==="multicategory"?function(){return null}:q.d2c;if(c(W)){for(ee=0;ee<Math.min(W.length,ne.length);ee++)ce=pe(W[ee],0,de),h(ce)?(ne[ee].b=+ce,ne[ee].hasB=1):ne[ee].b=0;for(;ee<ne.length;ee++)ne[ee].b=0}else{ce=pe(W,0,de);var he=h(ce);for(ce=he?ce:0,ee=0;ee<ne.length;ee++)ne[ee].b=ce,he&&(ne[ee].hasB=1)}}}function R(q,X,Q,ee,ne){for(var le=0;le<ee.length;le++){var W=ee[le],ce=new g([W],{posAxis:X,sepNegVal:!1,overlapNoMerge:!ne.norm});C(q,X,ce,ne),ne.norm?(P(ce),H(Q,ce,ne)):E(Q,ce)}}function M(q,X,Q,ee,ne){var le=new g(ee,{posAxis:X,sepNegVal:!1,overlapNoMerge:!ne.norm});C(q,X,le,ne),J(le,X),ne.norm?(P(le),H(Q,le,ne)):E(Q,le)}function A(q,X,Q,ee,ne){var le=new g(ee,{posAxis:X,sepNegVal:ne.mode==="relative",overlapNoMerge:!(ne.norm||ne.mode==="stack"||ne.mode==="relative")});C(q,X,le,ne),F(Q,le,ne);for(var W=0;W<ee.length;W++)for(var ce=ee[W],de=ce[0].t.offsetindex,pe=0;pe<ce.length;pe++){var he=ce[pe];if(he.s!==u){var be=he.b+he.s===le.get(he.p,de,he.s);be&&(he._outmost=!0)}}ne.norm&&H(Q,le,ne)}function C(q,X,Q,ee){var ne=q._fullLayout,le=Q.positions,W=Q.distinctPositions,ce=Q.minDiff,de=Q.traces,pe=de.length,he=le.length!==W.length,be=ce*(1-ee.gap),Ee,Te,He,te;if(X._id==="angularaxis")Ee=be,Te=Ee*(1-(ee.groupgap||0)),He=-Te/2;else{var ae=m(ne,X._id)+de[0][0].trace.orientation;te=ne._alignmentOpts[ae]||{}}for(var G=0;G<pe;G++){var K=de[G],V=K[0].trace;if(X._id!=="angularaxis"){var re=te[V.alignmentgroup]||{},D=Object.keys(re.offsetGroups||{}).length;D?Ee=be/D:Ee=he?be/pe:be,Te=Ee*(1-(ee.groupgap||0)),D?He=((2*V._offsetIndex+1-D)*Ee-Te)/2:He=he?((2*G+1-pe)*Ee-Te)/2:-Te/2}var B=K[0].t;B.barwidth=Te,B.offsetindex=V._offsetIndex||0,B.poffset=He,B.bargroupwidth=be,B.bardelta=ce}Q.binWidth=de[0][0].t.barwidth/100,j(Q),b(X,Q),X._id==="angularaxis"?k(X,Q):k(X,Q,he)}function j(q){var X=q.traces,Q,ee;for(Q=0;Q<X.length;Q++){var ne=X[Q],le=ne[0],W=le.trace,ce=le.t,de=W._offset||W.offset,pe=ce.poffset,he;if(c(de)){for(he=Array.prototype.slice.call(de,0,ne.length),ee=0;ee<he.length;ee++)h(he[ee])||(he[ee]=pe);for(ee=he.length;ee<ne.length;ee++)he.push(pe);ce.poffset=he}else de!==void 0&&(ce.poffset=de);var be=W._width||W.width,Ee=ce.barwidth;if(c(be)){var Te=Array.prototype.slice.call(be,0,ne.length);for(ee=0;ee<Te.length;ee++)h(Te[ee])||(Te[ee]=Ee);for(ee=Te.length;ee<ne.length;ee++)Te.push(Ee);if(ce.barwidth=Te,de===void 0){for(he=[],ee=0;ee<ne.length;ee++)he.push(pe+(Ee-Te[ee])/2);ce.poffset=he}}else be!==void 0&&(ce.barwidth=be,de===void 0&&(ce.poffset=pe+(Ee-be)/2))}}function b(q,X){for(var Q=X.traces,ee=z(q),ne=0;ne<Q.length;ne++)for(var le=Q[ne],W=le[0].t,ce=W.poffset,de=c(ce),pe=W.barwidth,he=c(pe),be=0;be<le.length;be++){var Ee=le[be],Te=Ee.w=he?pe[be]:pe;Ee.p===void 0&&(Ee.p=Ee[ee],Ee["orig_"+ee]=Ee[ee]);var He=(de?ce[be]:ce)+Te/2;Ee[ee]=Ee.p+He}}function k(q,X,Q){var ee=X.traces,ne=X.minDiff,le=ne/2;v.minDtick(q,X.minDiff,X.distinctPositions[0],Q);for(var W=0;W<ee.length;W++){var ce=ee[W],de=ce[0],pe=de.trace,he=[],be,Ee,Te,He;for(He=0;He<ce.length;He++)be=ce[He],Ee=be.p-le,Te=be.p+le,he.push(Ee,Te);if(pe.width||pe.offset){var te=de.t,ae=te.poffset,G=te.barwidth,K=c(ae),V=c(G);for(He=0;He<ce.length;He++){be=ce[He];var re=K?ae[He]:ae,D=V?G[He]:G;Ee=be.p+re,Te=Ee+D,he.push(Ee,Te)}}pe._extremes[q._id]=v.findExtremes(q,he,{padded:!1})}}function E(q,X){for(var Q=X.traces,ee=z(q),ne=0;ne<Q.length;ne++){for(var le=Q[ne],W=le[0].trace,ce=W.type==="scatter",de=W.orientation==="v",pe=[],he=!1,be=0;be<le.length;be++){var Ee=le[be],Te=ce?0:Ee.b,He=ce?de?Ee.y:Ee.x:Te+Ee.s;Ee[ee]=He,pe.push(He),Ee.hasB&&pe.push(Te),(!Ee.hasB||!Ee.b)&&(he=!0)}W._extremes[q._id]=v.findExtremes(q,pe,{tozero:he,padded:!0})}}function F(q,X,Q){var ee=z(q),ne=X.traces,le,W,ce,de,pe,he,be;for(de=0;de<ne.length;de++)if(le=ne[de],W=le[0].trace,W.type==="funnel")for(be=le[0].t.offsetindex,pe=0;pe<le.length;pe++)he=le[pe],he.s!==u&&X.put(he.p,be,-.5*he.s);for(de=0;de<ne.length;de++){le=ne[de],W=le[0].trace,ce=W.type==="funnel",be=W.type==="barpolar"?0:le[0].t.offsetindex;var Ee=[];for(pe=0;pe<le.length;pe++)if(he=le[pe],he.s!==u){var Te;ce?Te=he.s:Te=he.s+he.b;var He=X.put(he.p,be,Te),te=He+Te;he.b=He,he[ee]=te,Q.norm||(Ee.push(te),he.hasB&&Ee.push(He))}Q.norm||(W._extremes[q._id]=v.findExtremes(q,Ee,{tozero:!0,padded:!0}))}}function P(q){for(var X=q.traces,Q=0;Q<X.length;Q++)for(var ee=X[Q],ne=ee[0].t.offsetindex,le=0;le<ee.length;le++){var W=ee[le];W.s!==u&&q.put(W.p,ne,W.b+W.s)}}function J(q,X){for(var Q=q.traces,ee=0;ee<Q.length;ee++){var ne=Q[ee],le=ne[0].trace,W=ne[0].t.offsetindex;if(le.base===void 0)for(var ce=new g([ne],{posAxis:X,sepNegVal:!0,overlapNoMerge:!0}),de=0;de<ne.length;de++){var pe=ne[de];if(pe.p!==u){var he=ce.put(pe.p,W,pe.b+pe.s);he&&(pe.b=he)}}}}function H(q,X,Q){var ee=X.traces,ne=z(q),le=Q.norm==="fraction"?1:100,W=le/1e9,ce=q.l2c(q.c2l(0)),de=Q.mode==="stack"?le:ce;function pe(B){return h(q.c2l(B))&&(B<ce-W||B>de+W||!h(ce))}for(var he=0;he<ee.length;he++){for(var be=ee[he],Ee=be[0].t.offsetindex,Te=be[0].trace,He=[],te=!1,ae=!1,G=0;G<be.length;G++){var K=be[G];if(K.s!==u){var V=Math.abs(le/X.get(K.p,Ee,K.s));K.b*=V,K.s*=V;var re=K.b,D=re+K.s;K[ne]=D,He.push(D),ae=ae||pe(D),K.hasB&&(He.push(re),ae=ae||pe(re)),(!K.hasB||!K.b)&&(te=!0)}}Te._extremes[q._id]=v.findExtremes(q,He,{tozero:te,padded:ae})}}function Y(q,X,Q,ee){for(var ne=z(ee),le=0;le<q.length;le++)for(var W=q[le],ce=0;ce<W.length;ce++){var de=W[ce],pe=de[ne];de._sMin=X[pe],de._sMax=Q[pe]}}function Z(q,X){var Q=z(X),ee={},ne,le,W,ce=1/0,de=-1/0;for(ne=0;ne<q.length;ne++)for(W=q[ne],le=0;le<W.length;le++){var pe=W[le].p;h(pe)&&(ce=Math.min(ce,pe),de=Math.max(de,pe))}var he=1e4/(de-ce),be=ee.round=function(ie){return String(Math.round(he*(ie-ce)))},Ee={},Te={},He=q.some(function(ie){var ge=ie[0].trace;return"marker"in ge&&ge.marker.cornerradius});for(ne=0;ne<q.length;ne++){W=q[ne],W[0].t.extents=ee;var te=W[0].t.poffset,ae=c(te);for(le=0;le<W.length;le++){var G=W[le],K=G[Q]-G.w/2;if(h(K)){var V=G[Q]+G.w/2,re=be(G.p);ee[re]?ee[re]=[Math.min(K,ee[re][0]),Math.max(V,ee[re][1])]:ee[re]=[K,V]}if(G.p0=G.p+(ae?te[le]:te),G.p1=G.p0+G.w,G.s0=G.b,G.s1=G.s0+G.s,He){var D=Math.min(G.s0,G.s1)||0,B=Math.max(G.s0,G.s1)||0,oe=G[Q];Ee[oe]=oe in Ee?Math.min(Ee[oe],D):D,Te[oe]=oe in Te?Math.max(Te[oe],B):B}}}He&&Y(q,Ee,Te,X)}function z(q){return q._id.charAt(0)}$.exports={crossTraceCalc:w,setGroupPositions:l}}}),ak=i({"src/traces/scatter/cross_trace_calc.js"(U,$){var h=Ny(),c=zy().setGroupPositions;function u(m,g){for(var w=g.xaxis,l=g.yaxis,T=m._fullLayout,y=m._fullData,S=m.calcdata,R=[],M=[],A=0;A<y.length;A++){var C=y[A];C.visible===!0&&C.type==="scatter"&&C.xaxis===w._id&&C.yaxis===l._id&&(C.orientation==="h"?R.push(S[A]):C.orientation==="v"&&M.push(S[A]))}var j={mode:T.scattermode,gap:T.scattergap};c(m,w,l,M,j),c(m,l,w,R,j)}$.exports=function(g,w){g._fullLayout.scattermode==="group"&&u(g,w);var l=w.xaxis,T=w.yaxis,y=l._id+T._id,S=g._fullLayout._scatterStackOpts[y];if(S){var R=g.calcdata,M,A,C,j,b,k,E,F,P,J,H,Y,Z,z,q;for(var X in S){J=S[X];var Q=J.traceIndices;if(Q.length){for(H=J.stackgaps==="interpolate",Y=J.groupnorm,J.orientation==="v"?(Z="x",z="y"):(Z="y",z="x"),q=new Array(Q.length),M=0;M<q.length;M++)q[M]=!1;k=R[Q[0]];var ee=new Array(k.length);for(M=0;M<k.length;M++)ee[M]=k[M][Z];for(M=1;M<Q.length;M++){for(b=R[Q[M]],A=C=0;A<b.length;A++){for(E=b[A][Z];E>ee[C]&&C<ee.length;C++)p(b,A,ee[C],M,q,H,Z),A++;if(E!==ee[C]){for(j=0;j<M;j++)p(R[Q[j]],C,E,j,q,H,Z);ee.splice(C,0,E)}C++}for(;C<ee.length;C++)p(b,A,ee[C],M,q,H,Z),A++}var ne=ee.length;for(A=0;A<k.length;A++){for(F=k[A][z]=k[A].s,M=1;M<Q.length;M++)b=R[Q[M]],b[0].trace._rawLength=b[0].trace._length,b[0].trace._length=ne,F+=b[A].s,b[A][z]=F;if(Y)for(P=(Y==="fraction"?F:F/100)||1,M=0;M<Q.length;M++){var le=R[Q[M]][A];le[z]/=P,le.sNorm=le.s/P}}for(M=0;M<Q.length;M++){b=R[Q[M]];var W=b[0].trace,ce=h.calcMarkerSize(W,W._rawLength),de=Array.isArray(ce);if(ce&&q[M]||de){var pe=ce;for(ce=new Array(ne),A=0;A<ne;A++)ce[A]=b[A].gap?0:de?pe[b[A].i]:pe}var he=new Array(ne),be=new Array(ne);for(A=0;A<ne;A++)he[A]=b[A].x,be[A]=b[A].y;h.calcAxisExpansion(g,W,l,T,he,be,ce),b[0].t.orientation=J.orientation}}}}};function p(m,g,w,l,T,y,S){T[l]=!0;var R={i:null,gap:!0,s:0};if(R[S]=w,m.splice(g,0,R),g&&w===m[g-1][S]){var M=m[g-1];R.s=M.s,R.i=M.i,R.gap=M.gap}else y&&(R.s=v(m,g,w,S));g||(m[0].t=m[1].t,m[0].trace=m[1].trace,delete m[1].t,delete m[1].trace)}function v(m,g,w,l){var T=m[g-1],y=m[g+1];return y?T?T.s+(y.s-T.s)*(w-T[l])/(y[l]-T[l]):y.s:T.s}}}),sk=i({"src/traces/scatter/line_points.js"(U,$){var h=di(),c=Ce(),u=c.BADNUM,p=c.LOG_CLIP,v=p+.5,m=p-.5,g=kr(),w=g.segmentsIntersect,l=g.constrain,T=Sm();$.exports=function(S,R){var M=R.trace||{},A=R.xaxis,C=R.yaxis,j=A.type==="log",b=C.type==="log",k=A._length,E=C._length,F=R.backoff,P=M.marker,J=R.connectGaps,H=R.baseTolerance,Y=R.shape,Z=Y==="linear",z=M.fill&&M.fill!=="none",q=[],X=T.minTolerance,Q=S.length,ee=new Array(Q),ne=0,le,W,ce,de,pe,he,be,Ee,Te,He,te,ae,G,K,V,re;function D(dt){var St=S[dt];if(!St)return!1;var Dt=R.linearized?A.l2p(St.x):A.c2p(St.x),at=R.linearized?C.l2p(St.y):C.c2p(St.y);if(Dt===u){if(j&&(Dt=A.c2p(St.x,!0)),Dt===u)return!1;b&&at===u&&(Dt*=Math.abs(A._m*E*(A._m>0?v:m)/(C._m*k*(C._m>0?v:m)))),Dt*=1e3}if(at===u){if(b&&(at=C.c2p(St.y,!0)),at===u)return!1;at*=1e3}return[Dt,at]}function B(dt,St,Dt,at){var Ct=Dt-dt,Ht=at-St,Ut=.5-dt,Ar=.5-St,Rr=Ct*Ct+Ht*Ht,$r=Ct*Ut+Ht*Ar;if($r>0&&$r<Rr){var Mr=Ut*Ht-Ar*Ct;if(Mr*Mr<Rr)return!0}}var oe,ie;function ge(dt,St){var Dt=dt[0]/k,at=dt[1]/E,Ct=Math.max(0,-Dt,Dt-1,-at,at-1);return Ct&&oe!==void 0&&B(Dt,at,oe,ie)&&(Ct=0),Ct&&St&&B(Dt,at,St[0]/k,St[1]/E)&&(Ct=0),(1+T.toleranceGrowth*Ct)*H}function _e(dt,St){var Dt=dt[0]-St[0],at=dt[1]-St[1];return Math.sqrt(Dt*Dt+at*at)}var Se=T.maxScreensAway,De=-k*Se,Ge=k*(1+Se),Je=-E*Se,yt=E*(1+Se),ut=[[De,Je,Ge,Je],[Ge,Je,Ge,yt],[Ge,yt,De,yt],[De,yt,De,Je]],vt,Ae,Fe,ke,Be,et;function ht(dt,St){for(var Dt=[],at=0,Ct=0;Ct<4;Ct++){var Ht=ut[Ct],Ut=w(dt[0],dt[1],St[0],St[1],Ht[0],Ht[1],Ht[2],Ht[3]);Ut&&(!at||Math.abs(Ut.x-Dt[0][0])>1||Math.abs(Ut.y-Dt[0][1])>1)&&(Ut=[Ut.x,Ut.y],at&&_e(Ut,dt)<_e(Dt[0],dt)?Dt.unshift(Ut):Dt.push(Ut),at++)}return Dt}function jt(dt){if(dt[0]<De||dt[0]>Ge||dt[1]<Je||dt[1]>yt)return[l(dt[0],De,Ge),l(dt[1],Je,yt)]}function At(dt,St){if(dt[0]===St[0]&&(dt[0]===De||dt[0]===Ge)||dt[1]===St[1]&&(dt[1]===Je||dt[1]===yt))return!0}function Pt(dt,St){var Dt=[],at=jt(dt),Ct=jt(St);return at&&Ct&&At(at,Ct)||(at&&Dt.push(at),Ct&&Dt.push(Ct)),Dt}function zt(dt,St,Dt){return function(at,Ct){var Ht=jt(at),Ut=jt(Ct),Ar=[];if(Ht&&Ut&&At(Ht,Ut))return Ar;Ht&&Ar.push(Ht),Ut&&Ar.push(Ut);var Rr=2*g.constrain((at[dt]+Ct[dt])/2,St,Dt)-((Ht||at)[dt]+(Ut||Ct)[dt]);if(Rr){var $r;Ht&&Ut?$r=Rr>0==Ht[dt]>Ut[dt]?Ht:Ut:$r=Ht||Ut,$r[dt]+=Rr}return Ar}}var Nt;Y==="linear"||Y==="spline"?Nt=ht:Y==="hv"||Y==="vh"?Nt=Pt:Y==="hvh"?Nt=zt(0,De,Ge):Y==="vhv"&&(Nt=zt(1,Je,yt));function Kt(dt,St){var Dt=St[0]-dt[0],at=(St[1]-dt[1])/Dt,Ct=(dt[1]*St[0]-St[1]*dt[0])/Dt;return Ct>0?[at>0?De:Ge,yt]:[at>0?Ge:De,Je]}function _t(dt){var St=dt[0],Dt=dt[1],at=St===ee[ne-1][0],Ct=Dt===ee[ne-1][1];if(!(at&&Ct))if(ne>1){var Ht=St===ee[ne-2][0],Ut=Dt===ee[ne-2][1];at&&(St===De||St===Ge)&&Ht?Ut?ne--:ee[ne-1]=dt:Ct&&(Dt===Je||Dt===yt)&&Ut?Ht?ne--:ee[ne-1]=dt:ee[ne++]=dt}else ee[ne++]=dt}function Qt(dt){ee[ne-1][0]!==dt[0]&&ee[ne-1][1]!==dt[1]&&_t([Fe,ke]),_t(dt),Be=null,Fe=ke=0}var fr=g.isArrayOrTypedArray(P);function Vt(dt){if(dt&&F&&(dt.i=le,dt.d=S,dt.trace=M,dt.marker=fr?P[dt.i]:P,dt.backoff=F),oe=dt[0]/k,ie=dt[1]/E,vt=dt[0]<De?De:dt[0]>Ge?Ge:0,Ae=dt[1]<Je?Je:dt[1]>yt?yt:0,vt||Ae){if(!ne)ee[ne++]=[vt||dt[0],Ae||dt[1]];else if(Be){var St=Nt(Be,dt);St.length>1&&(Qt(St[0]),ee[ne++]=St[1])}else et=Nt(ee[ne-1],dt)[0],ee[ne++]=et;var Dt=ee[ne-1];vt&&Ae&&(Dt[0]!==vt||Dt[1]!==Ae)?(Be&&(Fe!==vt&&ke!==Ae?_t(Fe&&ke?Kt(Be,dt):[Fe||vt,ke||Ae]):Fe&&ke&&_t([Fe,ke])),_t([vt,Ae])):Fe-vt&&ke-Ae&&_t([vt||Fe,Ae||ke]),Be=dt,Fe=vt,ke=Ae}else Be&&Qt(Nt(Be,dt)[0]),ee[ne++]=dt}for(le=0;le<Q;le++)if(W=D(le),!!W){for(ne=0,Be=null,Vt(W),le++;le<Q;le++){if(de=D(le),!de){if(J)continue;break}if(!Z||!R.simplify){Vt(de);continue}var rr=D(le+1);if(He=_e(de,W),!(!(z&&(ne===0||ne===Q-1))&&He<ge(de,rr)*X)){for(Ee=[(de[0]-W[0])/He,(de[1]-W[1])/He],pe=W,te=He,ae=K=V=0,be=!1,ce=de,le++;le<S.length;le++){if(he=rr,rr=D(le+1),!he){if(J)continue;break}if(Te=[he[0]-W[0],he[1]-W[1]],re=Te[0]*Ee[1]-Te[1]*Ee[0],K=Math.min(K,re),V=Math.max(V,re),V-K>ge(he,rr))break;ce=he,G=Te[0]*Ee[0]+Te[1]*Ee[1],G>te?(te=G,de=he,be=!1):G<ae&&(ae=G,pe=he,be=!0)}if(be?(Vt(de),ce!==pe&&Vt(pe)):(pe!==W&&Vt(pe),ce!==de&&Vt(de)),Vt(ce),le>=S.length||!he)break;Vt(he),W=he}}Be&&_t([Fe||Be[0],ke||Be[1]]),q.push(ee.slice(0,ne))}var Ne=Y.slice(Y.length-1);if(F&&Ne!=="h"&&Ne!=="v"){for(var $e=!1,Ue=-1,fe=[],je=0;je<q.length;je++)for(var Pe=0;Pe<q[je].length-1;Pe++){var Re=q[je][Pe],tt=q[je][Pe+1],nt=h.applyBackoff(tt,Re);(nt[0]!==tt[0]||nt[1]!==tt[1])&&($e=!0),fe[Ue+1]||(Ue++,fe[Ue]=[Re,[nt[0],nt[1]]])}return $e?fe:q}return q}}}),ok=i({"src/traces/scatter/link_traces.js"(U,$){var h={tonextx:1,tonexty:1,tonext:1};$.exports=function(u,p,v){var m,g,w,l,T,y={},S=!1,R=-1,M=0,A=-1;for(g=0;g<v.length;g++)m=v[g][0].trace,w=m.stackgroup||"",w?w in y?T=y[w]:(T=y[w]=M,M++):m.fill in h&&A>=0?T=A:(T=A=M,M++),T<R&&(S=!0),m._groupIndex=R=T;var C=v.slice();S&&C.sort(function(b,k){var E=b[0].trace,F=k[0].trace;return E._groupIndex-F._groupIndex||E.index-F.index});var j={};for(g=0;g<C.length;g++)m=C[g][0].trace,w=m.stackgroup||"",m.visible===!0?(m._nexttrace=null,m.fill in h&&(l=j[w],m._prevtrace=l||null,l&&(l._nexttrace=m)),m._ownfill=m.fill&&(m.fill.substr(0,6)==="tozero"||m.fill==="toself"||m.fill.substr(0,2)==="to"&&!m._prevtrace),j[w]=m):m._prevtrace=m._nexttrace=m._ownfill=null;return C}}}),lk=i({"src/traces/scatter/plot.js"(U,$){var h=d(),c=mn(),u=kr(),p=u.ensureSingle,v=u.identity,m=di(),g=Ia(),w=sk(),l=ok(),T=_y().tester;$.exports=function(A,C,j,b,k,E){var F,P,J=!k,H=!!k&&k.duration>0,Y=l(A,C,j);if(F=b.selectAll("g.trace").data(Y,function(z){return z[0].trace.uid}),F.enter().append("g").attr("class",function(z){return"trace scatter trace"+z[0].trace.uid}).style("stroke-miterlimit",2),F.order(),y(A,F,C),H){E&&(P=E());var Z=h.transition().duration(k.duration).ease(k.easing).each("end",function(){P&&P()}).each("interrupt",function(){P&&P()});Z.each(function(){b.selectAll("g.trace").each(function(z,q){S(A,q,C,z,Y,this,k)})})}else F.each(function(z,q){S(A,q,C,z,Y,this,k)});J&&F.exit().remove(),b.selectAll("path:not([d])").remove()};function y(M,A,C){A.each(function(j){var b=p(h.select(this),"g","fills");m.setClipUrl(b,C.layerClipId,M);var k=j[0].trace,E=[];k._ownfill&&E.push("_ownFill"),k._nexttrace&&E.push("_nextFill");var F=b.selectAll("g").data(E,v);F.enter().append("g"),F.exit().each(function(P){k[P]=null}).remove(),F.order().each(function(P){k[P]=p(h.select(this),"path","js-fill")})})}function S(M,A,C,j,b,k,E){var F=M._context.staticPlot,P;R(M,A,C,j,b);var J=!!E&&E.duration>0;function H(_t){return J?_t.transition():_t}var Y=C.xaxis,Z=C.yaxis,z=j[0].trace,q=z.line,X=h.select(k),Q=p(X,"g","errorbars"),ee=p(X,"g","lines"),ne=p(X,"g","points"),le=p(X,"g","text");if(c.getComponentMethod("errorbars","plot")(M,Q,C,E),z.visible!==!0)return;H(X).style("opacity",z.opacity);var W,ce,de=z.fill.charAt(z.fill.length-1);de!=="x"&&de!=="y"&&(de="");var pe,he;de==="y"?(pe=1,he=Z.c2p(0,!0)):de==="x"&&(pe=0,he=Y.c2p(0,!0)),j[0][C.isRangePlot?"nodeRangePlot3":"node3"]=X;var be="",Ee=[],Te=z._prevtrace,He=null,te=null;Te&&(be=Te._prevRevpath||"",ce=Te._nextFill,Ee=Te._ownPolygons,He=Te._fillsegments,te=Te._fillElement);var ae,G,K="",V="",re,D,B,oe,ie,ge,_e=[];z._polygons=[];var Se=[],De=[],Ge=u.noop;if(W=z._ownFill,g.hasLines(z)||z.fill!=="none"){ce&&ce.datum(j),["hv","vh","hvh","vhv"].indexOf(q.shape)!==-1?(re=m.steps(q.shape),D=m.steps(q.shape.split("").reverse().join(""))):q.shape==="spline"?re=D=function(_t){var Qt=_t[_t.length-1];return _t.length>1&&_t[0][0]===Qt[0]&&_t[0][1]===Qt[1]?m.smoothclosed(_t.slice(1),q.smoothing):m.smoothopen(_t,q.smoothing)}:re=D=function(_t){return"M"+_t.join("L")},B=function(_t){return D(_t.reverse())},De=w(j,{xaxis:Y,yaxis:Z,trace:z,connectGaps:z.connectgaps,baseTolerance:Math.max(q.width||1,3)/4,shape:q.shape,backoff:q.backoff,simplify:q.simplify,fill:z.fill}),Se=new Array(De.length);var Je=0;for(P=0;P<De.length;P++){var yt,ut=De[P];!yt||!de?(yt=ut.slice(),Se[Je]=yt,Je++):yt.push.apply(yt,ut)}z._fillElement=null,z._fillExclusionElement=te,z._fillsegments=Se.slice(0,Je),Se=z._fillsegments,De.length&&(oe=De[0][0].slice(),ie=De[De.length-1],ge=ie[ie.length-1].slice()),Ge=function(_t){return function(Qt){if(ae=re(Qt),G=B(Qt),K?de?(K+="L"+ae.substr(1),V=G+("L"+V.substr(1))):(K+="Z"+ae,V=G+"Z"+V):(K=ae,V=G),g.hasLines(z)){var fr=h.select(this);if(fr.datum(j),_t)H(fr.style("opacity",0).attr("d",ae).call(m.lineGroupStyle)).style("opacity",1);else{var Vt=H(fr);Vt.attr("d",ae),m.singleLineStyle(j,Vt)}}}}}var vt=ee.selectAll(".js-line").data(De);H(vt.exit()).style("opacity",0).remove(),vt.each(Ge(!1)),vt.enter().append("path").classed("js-line",!0).style("vector-effect",F?"none":"non-scaling-stroke").call(m.lineGroupStyle).each(Ge(!0)),m.setClipUrl(vt,C.layerClipId,M);function Ae(_t){H(_t).attr("d","M0,0Z")}var Fe=function(){var _t=new Array(Se.length);for(P=0;P<Se.length;P++)_t[P]=T(Se[P]);return _t},ke=function(_t){var Qt,fr;if(!_t||_t.length===0)for(Qt=new Array(Se.length),fr=0;fr<Se.length;fr++){var Vt=Se[fr][0].slice(),rr=Se[fr][Se[fr].length-1].slice();Vt[pe]=rr[pe]=he;var Ne=[rr,Vt],$e=Ne.concat(Se[fr]);Qt[fr]=T($e)}else{for(Qt=new Array(_t.length-1+Se.length),fr=0;fr<_t.length-1;fr++)Qt[fr]=T(_t[fr]);var Ue=_t[_t.length-1].slice();for(Ue.reverse(),fr=0;fr<Se.length;fr++)Qt[_t.length-1+fr]=T(Se[fr].concat(Ue))}return Qt};De.length?(W?(W.datum(j),oe&&ge&&(de?(oe[pe]=ge[pe]=he,H(W).attr("d","M"+ge+"L"+oe+"L"+K.substr(1)).call(m.singleFillStyle,M),_e=ke(null)):(H(W).attr("d",K+"Z").call(m.singleFillStyle,M),_e=Fe())),z._polygons=_e,z._fillElement=W):ce&&(z.fill.substr(0,6)==="tonext"&&K&&be?(z.fill==="tonext"?(H(ce).attr("d",K+"Z"+be+"Z").call(m.singleFillStyle,M),_e=Fe(),z._polygons=_e.concat(Ee)):(H(ce).attr("d",K+"L"+be.substr(1)+"Z").call(m.singleFillStyle,M),_e=ke(He),z._polygons=_e),z._fillElement=ce):Ae(ce)),z._prevRevpath=V):(W?Ae(W):ce&&Ae(ce),z._prevRevpath=null),z._ownPolygons=_e;function Be(_t){return _t.filter(function(Qt){return!Qt.gap&&Qt.vis})}function et(_t){return _t.filter(function(Qt){return Qt.vis})}function ht(_t){return _t.filter(function(Qt){return!Qt.gap})}function jt(_t){return _t.id}function At(_t){if(_t.ids)return jt}function Pt(){return!1}function zt(_t,Qt,fr){var Vt,rr,Ne,$e=fr[0].trace,Ue=g.hasMarkers($e),fe=g.hasText($e),je=At($e),Pe=Pt,Re=Pt;if(Ue||fe){var tt=v,nt=$e.stackgroup,dt=nt&&M._fullLayout._scatterStackOpts[Y._id+Z._id][nt].stackgaps==="infer zero";$e.marker.maxdisplayed||$e._needsCull?tt=dt?et:Be:nt&&!dt&&(tt=ht),Ue&&(Pe=tt),fe&&(Re=tt)}rr=_t.selectAll("path.point"),Vt=rr.data(Pe,je);var St=Vt.enter().append("path").classed("point",!0);J&&St.call(m.pointStyle,$e,M).call(m.translatePoints,Y,Z).style("opacity",0).transition().style("opacity",1),Vt.order();var Dt;Ue&&(Dt=m.makePointStyleFns($e)),Vt.each(function(at){var Ct=h.select(this),Ht=H(Ct);Ne=m.translatePoint(at,Ht,Y,Z),Ne?(m.singlePointStyle(at,Ht,$e,Dt,M),C.layerClipId&&m.hideOutsideRangePoint(at,Ht,Y,Z,$e.xcalendar,$e.ycalendar),$e.customdata&&Ct.classed("plotly-customdata",at.data!==null&&at.data!==void 0)):Ht.remove()}),J?Vt.exit().transition().style("opacity",0).remove():Vt.exit().remove(),rr=Qt.selectAll("g"),Vt=rr.data(Re,je),Vt.enter().append("g").classed("textpoint",!0).append("text"),Vt.order(),Vt.each(function(at){var Ct=h.select(this),Ht=H(Ct.select("text"));Ne=m.translatePoint(at,Ht,Y,Z),Ne?C.layerClipId&&m.hideOutsideRangePoint(at,Ct,Y,Z,$e.xcalendar,$e.ycalendar):Ct.remove()}),Vt.selectAll("text").call(m.textPointStyle,$e,M).each(function(at){var Ct=Y.c2p(at.x),Ht=Z.c2p(at.y);h.select(this).selectAll("tspan.line").each(function(){H(h.select(this)).attr({x:Ct,y:Ht})})}),Vt.exit().remove()}ne.datum(j),le.datum(j),zt(ne,le,j);var Nt=z.cliponaxis===!1,Kt=Nt?null:C.layerClipId;m.setClipUrl(ne,Kt,M),m.setClipUrl(le,Kt,M)}function R(M,A,C,j,b){var k=C.xaxis,E=C.yaxis,F=h.extent(u.simpleMap(k.range,k.r2c)),P=h.extent(u.simpleMap(E.range,E.r2c)),J=j[0].trace;if(g.hasMarkers(J)){var H=J.marker.maxdisplayed;if(H!==0){var Y=j.filter(function(X){return X.x>=F[0]&&X.x<=F[1]&&X.y>=P[0]&&X.y<=P[1]}),Z=Math.ceil(Y.length/H),z=0;b.forEach(function(X,Q){var ee=X[0].trace;g.hasMarkers(ee)&&ee.marker.maxdisplayed>0&&Q<A&&z++});var q=Math.round(z*Z/3+Math.floor(z/3)*Z/7.1);j.forEach(function(X){delete X.vis}),Y.forEach(function(X,Q){Math.round((Q+q)%Z)===0&&(X.vis=!0)})}}}}}),Fy=i({"src/traces/scatter/marker_colorbar.js"(U,$){$.exports={container:"marker",min:"cmin",max:"cmax"}}}),ck=i({"src/traces/scatter/format_labels.js"(U,$){var h=ji();$.exports=function(u,p,v){var m={},g={_fullLayout:v},w=h.getFromTrace(g,p,"x"),l=h.getFromTrace(g,p,"y"),T=u.orig_x;T===void 0&&(T=u.x);var y=u.orig_y;return y===void 0&&(y=u.y),m.xLabel=h.tickText(w,w.c2l(T),!0).text,m.yLabel=h.tickText(l,l.c2l(y),!0).text,m}}}),Iy=i({"src/traces/scatter/style.js"(U,$){var h=d(),c=di(),u=mn();function p(w){var l=h.select(w).selectAll("g.trace.scatter");l.style("opacity",function(T){return T[0].trace.opacity}),l.selectAll("g.points").each(function(T){var y=h.select(this),S=T.trace||T[0].trace;v(y,S,w)}),l.selectAll("g.text").each(function(T){var y=h.select(this),S=T.trace||T[0].trace;m(y,S,w)}),l.selectAll("g.trace path.js-line").call(c.lineGroupStyle),l.selectAll("g.trace path.js-fill").call(c.fillGroupStyle,w,!1),u.getComponentMethod("errorbars","style")(l)}function v(w,l,T){c.pointStyle(w.selectAll("path.point"),l,T)}function m(w,l,T){c.textPointStyle(w.selectAll("text"),l,T)}function g(w,l,T){var y=l[0].trace;y.selectedpoints?(c.selectedPointStyle(T.selectAll("path.point"),y),c.selectedTextStyle(T.selectAll("text"),y)):(v(T,y,w),m(T,y,w))}$.exports={style:p,stylePoints:v,styleText:m,styleOnSelect:g}}}),uk=i({"src/traces/scatter/get_trace_color.js"(U,$){var h=pt(),c=Ia();$.exports=function(p,v){var m,g;if(p.mode==="lines")return m=p.line.color,m&&h.opacity(m)?m:p.fillcolor;if(p.mode==="none")return p.fill?p.fillcolor:"";var w=v.mcc||(p.marker||{}).color,l=v.mlcc||((p.marker||{}).line||{}).color;return g=w&&h.opacity(w)?w:l&&h.opacity(l)&&(v.mlw||((p.marker||{}).line||{}).width)?l:"",g?h.opacity(g)<.3?h.addOpacity(g,.3):g:(m=(p.line||{}).color,m&&h.opacity(m)&&c.hasLines(p)&&p.line.width?m:p.fillcolor)}}}),dk=i({"src/traces/scatter/hover.js"(U,$){var h=kr(),c=po(),u=mn(),p=uk(),v=pt(),m=h.fillText;$.exports=function(w,l,T,y){var S=w.cd,R=S[0].trace,M=w.xa,A=w.ya,C=M.c2p(l),j=A.c2p(T),b=[C,j],k=R.hoveron||"",E=R.mode.indexOf("markers")!==-1?3:.5,F=!!R.xperiodalignment,P=!!R.yperiodalignment;if(k.indexOf("points")!==-1){var J=function(Ee){if(F){var Te=M.c2p(Ee.xStart),He=M.c2p(Ee.xEnd);return C>=Math.min(Te,He)&&C<=Math.max(Te,He)?0:1/0}var te=Math.max(3,Ee.mrc||0),ae=1-1/te,G=Math.abs(M.c2p(Ee.x)-C);return G<te?ae*G/te:G-te+ae},H=function(Ee){if(P){var Te=A.c2p(Ee.yStart),He=A.c2p(Ee.yEnd);return j>=Math.min(Te,He)&&j<=Math.max(Te,He)?0:1/0}var te=Math.max(3,Ee.mrc||0),ae=1-1/te,G=Math.abs(A.c2p(Ee.y)-j);return G<te?ae*G/te:G-te+ae},Y=function(Ee){var Te=Math.max(E,Ee.mrc||0),He=M.c2p(Ee.x)-C,te=A.c2p(Ee.y)-j;return Math.max(Math.sqrt(He*He+te*te)-Te,1-E/Te)},Z=c.getDistanceFunction(y,J,H,Y);if(c.getClosest(S,Z,w),w.index!==!1){var z=S[w.index],q=M.c2p(z.x,!0),X=A.c2p(z.y,!0),Q=z.mrc||1;w.index=z.i;var ee=S[0].t.orientation,ne=ee&&(z.sNorm||z.s),le=ee==="h"?ne:z.orig_x!==void 0?z.orig_x:z.x,W=ee==="v"?ne:z.orig_y!==void 0?z.orig_y:z.y;return h.extendFlat(w,{color:p(R,z),x0:q-Q,x1:q+Q,xLabelVal:le,y0:X-Q,y1:X+Q,yLabelVal:W,spikeDistance:Y(z),hovertemplate:R.hovertemplate}),m(z,R,w),u.getComponentMethod("errorbars","hoverInfo")(z,R,w),[w]}}function ce(Ee){if(!Ee)return!1;var Te=Ee.node();try{var He=new DOMPoint(b[0],b[1]);return Te.isPointInFill(He)}catch{var te=Te.ownerSVGElement.createSVGPoint();return te.x=b[0],te.y=b[1],Te.isPointInFill(te)}}function de(Ee){var Te,He=[],te=1/0,ae=-1/0,G=1/0,K=-1/0,V;for(Te=0;Te<Ee.length;Te++){var re=Ee[Te];re.contains(b)&&(He.push(re),G=Math.min(G,re.ymin),K=Math.max(K,re.ymax))}if(He.length===0)return null;G=Math.max(G,0),K=Math.min(K,A._length),V=(G+K)/2;var D,B,oe,ie,ge,_e,Se;for(Te=0;Te<He.length;Te++)for(B=He[Te].pts,D=1;D<B.length;D++)_e=B[D-1][1],Se=B[D][1],_e>V!=Se>=V&&(ie=B[D-1][0],ge=B[D][0],Se-_e&&(oe=ie+(ge-ie)*(V-_e)/(Se-_e),te=Math.min(te,oe),ae=Math.max(ae,oe)));return te=Math.max(te,0),ae=Math.min(ae,M._length),{x0:te,x1:ae,y0:V,y1:V}}if(k.indexOf("fills")!==-1&&R._fillElement){var pe=ce(R._fillElement)&&!ce(R._fillExclusionElement);if(pe){var he=de(R._polygons);he===null&&(he={x0:b[0],x1:b[0],y0:b[1],y1:b[1]});var be=v.defaultLine;return v.opacity(R.fillcolor)?be=R.fillcolor:v.opacity((R.line||{}).color)&&(be=R.line.color),h.extendFlat(w,{distance:w.maxHoverDistance,x0:he.x0,x1:he.x1,y0:he.y0,y1:he.y1,color:be,hovertemplate:!1}),delete w.index,R.text&&!h.isArrayOrTypedArray(R.text)?w.text=String(R.text):w.text=R.name,[w]}}}}}),fk=i({"src/traces/scatter/select.js"(U,$){var h=Ia();$.exports=function(u,p){var v=u.cd,m=u.xaxis,g=u.yaxis,w=[],l=v[0].trace,T,y,S,R,M=!h.hasMarkers(l)&&!h.hasText(l);if(M)return[];if(p===!1)for(T=0;T<v.length;T++)v[T].selected=0;else for(T=0;T<v.length;T++)y=v[T],S=m.c2p(y.x),R=g.c2p(y.y),y.i!==null&&p.contains([S,R],!1,T,u)?(w.push({pointNumber:y.i,x:m.c2d(y.x),y:g.c2d(y.y)}),y.selected=1):y.selected=0;return w}}}),hk=i({"src/plots/cartesian/attributes.js"(U,$){$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}}}),pk=i({"src/plots/cartesian/type_defaults.js"(U,$){var h=mn().traceIs,c=kc();$.exports=function(w,l,T,y){T("autotypenumbers",y.autotypenumbersDflt);var S=T("type",(y.splomStash||{}).type);S==="-"&&(u(l,y.data),l.type==="-"?l.type="linear":w.type=l.type)};function u(g,w){if(g.type==="-"){var l=g._id,T=l.charAt(0),y;l.indexOf("scene")!==-1&&(l=T);var S=p(w,l,T);if(S){if(S.type==="histogram"&&T==={v:"y",h:"x"}[S.orientation||"v"]){g.type="linear";return}var R=T+"calendar",M=S[R],A={noMultiCategory:!h(S,"cartesian")||h(S,"noMultiCategory")};if(S.type==="box"&&S._hasPreCompStats&&T==={h:"x",v:"y"}[S.orientation||"v"]&&(A.noMultiCategory=!0),A.autotypenumbers=g.autotypenumbers,m(S,T)){var C=v(S),j=[];for(y=0;y<w.length;y++){var b=w[y];!h(b,"box-violin")||(b[T+"axis"]||T)!==l||(b[C]!==void 0?j.push(b[C][0]):b.name!==void 0?j.push(b.name):j.push("text"),b[R]!==M&&(M=void 0))}g.type=c(j,M,A)}else if(S.type==="splom"){var k=S.dimensions,E=k[S._axesDim[l]];E.visible&&(g.type=c(E.values,M,A))}else g.type=c(S[T]||[S[T+"0"]],M,A)}}}function p(g,w,l){for(var T=0;T<g.length;T++){var y=g[T];if(y.type==="splom"&&y._length>0&&(y["_"+l+"axes"]||{})[w])return y;if((y[l+"axis"]||l)===w){if(m(y,l))return y;if((y[l]||[]).length||y[l+"0"])return y}}}function v(g){return{v:"x",h:"y"}[g.orientation||"v"]}function m(g,w){var l=v(g),T=h(g,"box-violin"),y=h(g._fullInput||{},"candlestick");return T&&!y&&w===l&&g[l]===void 0&&g[l+"0"]===void 0}}}),mk=i({"src/plots/cartesian/category_order_defaults.js"(U,$){var h=qe().isTypedArraySpec;function c(u,p){var v=p.dataAttr||u._id.charAt(0),m={},g,w,l;if(p.axData)g=p.axData;else for(g=[],w=0;w<p.data.length;w++){var T=p.data[w];T[v+"axis"]===u._id&&g.push(T)}for(w=0;w<g.length;w++){var y=g[w][v];for(l=0;l<y.length;l++){var S=y[l];S!=null&&(m[S]=1)}}return Object.keys(m)}$.exports=function(p,v,m,g){if(v.type==="category"){var w=p.categoryarray,l=Array.isArray(w)&&w.length>0||h(w),T;l&&(T="array");var y=m("categoryorder",T),S;y==="array"&&(S=m("categoryarray")),!l&&y==="array"&&(y=v.categoryorder="trace"),y==="trace"?v._initialCategories=[]:y==="array"?v._initialCategories=S.slice():(S=c(v,g).sort(),y==="category ascending"?v._initialCategories=S:y==="category descending"&&(v._initialCategories=S.reverse()))}}}}),vk=i({"src/plots/cartesian/line_grid_defaults.js"(U,$){var h=wt().mix,c=Ft(),u=kr();$.exports=function(v,m,g,w){w=w||{};var l=w.dfltColor;function T(z,q){return u.coerce2(v,m,w.attributes,z,q)}var y=T("linecolor",l),S=T("linewidth"),R=g("showline",w.showLine||!!y||!!S);R||(delete m.linecolor,delete m.linewidth);var M=h(l,w.bgColor,w.blend||c.lightFraction).toRgbString(),A=T("gridcolor",M),C=T("gridwidth"),j=T("griddash"),b=g("showgrid",w.showGrid||!!A||!!C||!!j);if(b||(delete m.gridcolor,delete m.gridwidth,delete m.griddash),w.hasMinor){var k=h(m.gridcolor,w.bgColor,67).toRgbString(),E=T("minor.gridcolor",k),F=T("minor.gridwidth",m.gridwidth||1),P=T("minor.griddash",m.griddash||"solid"),J=g("minor.showgrid",!!E||!!F||!!P);J||(delete m.minor.gridcolor,delete m.minor.gridwidth,delete m.minor.griddash)}if(!w.noZeroLine){var H=T("zerolinecolor",l),Y=T("zerolinewidth"),Z=g("zeroline",w.showGrid||!!H||!!Y);Z||(delete m.zerolinecolor,delete m.zerolinewidth)}}}}),Oy=i({"src/plots/cartesian/axis_defaults.js"(U,$){var h=xe(),c=mn(),u=kr(),p=Si(),v=Tn(),m=es(),g=Fr(),w=ln(),l=Ii(),T=ma(),y=mk(),S=vk(),R=ll(),M=_c(),A=ha().WEEKDAY_PATTERN,C=ha().HOUR_PATTERN;$.exports=function(F,P,J,H,Y){var Z=H.letter,z=H.font||{},q=H.splomStash||{},X=J("visible",!H.visibleDflt),Q=P._template||{},ee=P.type||Q.type||"-",ne;if(ee==="date"){var le=c.getComponentMethod("calendars","handleDefaults");le(F,P,"calendar",H.calendar),H.noTicklabelmode||(ne=J("ticklabelmode"))}!H.noTicklabelindex&&(ee==="date"||ee==="linear")&&J("ticklabelindex");var W="";(!H.noTicklabelposition||ee==="multicategory")&&(W=u.coerce(F,P,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:ne==="period"?["outside","inside"]:Z==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),H.noTicklabeloverflow||J("ticklabeloverflow",W.indexOf("inside")!==-1?"hide past domain":ee==="category"||ee==="multicategory"?"allow":"hide past div"),M(P,Y),R(F,P,J,H),y(F,P,J,H),ee!=="category"&&!H.noHover&&J("hoverformat");var ce=J("color"),de=ce!==m.color.dflt?ce:z.color,pe=q.label||Y._dfltTitle[Z];if(T(F,P,J,ee,H),!X)return P;J("title.text",pe),u.coerceFont(J,"title.font",z,{overrideDflt:{size:u.bigFont(z.size),color:de}}),g(F,P,J,ee);var he=H.hasMinor;if(he&&(p.newContainer(P,"minor"),g(F,P,J,ee,{isMinor:!0})),l(F,P,J,ee,H),w(F,P,J,H),he){var be=H.isMinor;H.isMinor=!0,w(F,P,J,H),H.isMinor=be}S(F,P,J,{dfltColor:ce,bgColor:H.bgColor,showGrid:H.showGrid,hasMinor:he,attributes:m}),he&&!P.minor.ticks&&!P.minor.showgrid&&delete P.minor,(P.showline||P.ticks)&&J("mirror");var Ee=ee==="multicategory";if(!H.noTickson&&(ee==="category"||Ee)&&(P.ticks||P.showgrid)){var Te;Ee&&(Te="boundaries");var He=J("tickson",Te);He==="boundaries"&&delete P.ticklabelposition}if(Ee){var te=J("showdividers");te&&(J("dividercolor"),J("dividerwidth"))}if(ee==="date")if(v(F,P,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:j}),!P.rangebreaks.length)delete P.rangebreaks;else{for(var ae=0;ae<P.rangebreaks.length;ae++)if(P.rangebreaks[ae].pattern===A){P._hasDayOfWeekBreaks=!0;break}if(M(P,Y),Y._has("scattergl")||Y._has("splom"))for(var G=0;G<H.data.length;G++){var K=H.data[G];(K.type==="scattergl"||K.type==="splom")&&(K.visible=!1,u.warn(K.type+" traces do not work on axes with rangebreaks. Setting trace "+K.index+" to `visible: false`."))}}return P};function j(E,F,P){function J(ne,le){return u.coerce(E,F,m.rangebreaks,ne,le)}var H=J("enabled");if(H){var Y=J("bounds");if(Y&&Y.length>=2){var Z="",z,q;if(Y.length===2){for(z=0;z<2;z++)if(q=k(Y[z]),q){Z=A;break}}var X=J("pattern",Z);if(X===A)for(z=0;z<2;z++)q=k(Y[z]),q&&(F.bounds[z]=Y[z]=q-1);if(X)for(z=0;z<2;z++)switch(q=Y[z],X){case A:if(!h(q)){F.enabled=!1;return}if(q=+q,q!==Math.floor(q)||q<0||q>=7){F.enabled=!1;return}F.bounds[z]=Y[z]=q;break;case C:if(!h(q)){F.enabled=!1;return}if(q=+q,q<0||q>24){F.enabled=!1;return}F.bounds[z]=Y[z]=q;break}if(P.autorange===!1){var Q=P.range;if(Q[0]<Q[1]){if(Y[0]<Q[0]&&Y[1]>Q[1]){F.enabled=!1;return}}else if(Y[0]>Q[0]&&Y[1]<Q[1]){F.enabled=!1;return}}}else{var ee=J("values");if(ee&&ee.length)J("dvalue");else{F.enabled=!1;return}}}}var b={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function k(E){if(typeof E=="string")return b[E.substr(0,3).toLowerCase()]}}}),By=i({"src/plots/cartesian/position_defaults.js"(U,$){var h=xe(),c=kr();$.exports=function(p,v,m,g){var w=g.counterAxes||[],l=g.overlayableAxes||[],T=g.letter,y=g.grid,S=g.overlayingDomain,R,M,A,C,j,b;y&&(M=y._domains[T][y._axisMap[v._id]],R=y._anchors[v._id],M&&(A=y[T+"side"].split(" ")[0],C=y.domain[T][A==="right"||A==="top"?1:0])),M=M||[0,1],R=R||(h(p.position)?"free":w[0]||"free"),A=A||(T==="x"?"bottom":"left"),C=C||0,j=0,b=!1;var k=c.coerce(p,v,{anchor:{valType:"enumerated",values:["free"].concat(w),dflt:R}},"anchor"),E=c.coerce(p,v,{side:{valType:"enumerated",values:T==="x"?["bottom","top"]:["left","right"],dflt:A}},"side");if(k==="free"){if(T==="y"){var F=m("autoshift");F&&(C=E==="left"?S[0]:S[1],b=v.automargin?v.automargin:!0,j=E==="left"?-3:3),m("shift",j)}m("position",C)}m("automargin",b);var P=!1;if(l.length&&(P=c.coerce(p,v,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying")),!P){var J=m("domain",M);J[0]>J[1]-1/4096&&(v.domain=M),c.noneOrAll(p.domain,v.domain,M),v.tickmode==="sync"&&(v.tickmode="auto")}return m("layer"),v}}}),gk=i({"src/plots/cartesian/layout_defaults.js"(U,$){var h=kr(),c=pt(),u=ts().isUnifiedHover,p=ud(),v=Si(),m=zi(),g=es(),w=pk(),l=Oy(),T=Vo(),y=By(),S=pa(),R=S.id2name,M=S.name2id,A=ha().AX_ID_PATTERN,C=mn(),j=C.traceIs,b=C.getComponentMethod;function k(E,F,P){Array.isArray(E[F])?E[F].push(P):E[F]=[P]}$.exports=function(F,P,J){var H=P.autotypenumbers,Y={},Z={},z={},q={},X={},Q={},ee={},ne={},le={},W={},ce,de;for(ce=0;ce<J.length;ce++){var pe=J[ce];if(j(pe,"cartesian")){var he;if(pe.xaxis)he=R(pe.xaxis),k(Y,he,pe);else if(pe.xaxes)for(de=0;de<pe.xaxes.length;de++)k(Y,R(pe.xaxes[de]),pe);var be;if(pe.yaxis)be=R(pe.yaxis),k(Y,be,pe);else if(pe.yaxes)for(de=0;de<pe.yaxes.length;de++)k(Y,R(pe.yaxes[de]),pe);if(pe.type==="funnel"?pe.orientation==="h"?(he&&(Z[he]=!0),be&&(ee[be]=!0)):be&&(z[be]=!0):pe.type==="image"?(be&&(ne[be]=!0),he&&(ne[he]=!0)):(be&&(X[be]=!0,Q[be]=!0),(!j(pe,"carpet")||pe.type==="carpet"&&!pe._cheater)&&he&&(q[he]=!0)),pe.type==="carpet"&&pe._cheater&&he&&(Z[he]=!0),j(pe,"2dMap")&&(le[he]=!0,le[be]=!0),j(pe,"oriented")){var Ee=pe.orientation==="h"?be:he;W[Ee]=!0}}}var Te=P._subplots,He=Te.xaxis,te=Te.yaxis,ae=h.simpleMap(He,R),G=h.simpleMap(te,R),K=ae.concat(G),V=c.background;He.length&&te.length&&(V=h.coerce(F,P,m,"plot_bgcolor"));var re=c.combine(V,P.paper_bgcolor),D,B,oe,ie,ge;function _e(){var Pe=Y[D]||[];ge._traceIndices=Pe.map(function(Re){return Re.index}),ge._annIndices=[],ge._shapeIndices=[],ge._selectionIndices=[],ge._imgIndices=[],ge._subplotsWith=[],ge._counterAxes=[],ge._name=ge._attr=D,ge._id=B}function Se(Pe,Re){return h.coerce(ie,ge,g,Pe,Re)}function De(Pe,Re){return h.coerce2(ie,ge,g,Pe,Re)}function Ge(Pe){return Pe==="x"?te:He}function Je(Pe,Re){for(var tt=Pe==="x"?ae:G,nt=[],dt=0;dt<tt.length;dt++){var St=tt[dt];St!==Re&&!(F[St]||{}).overlaying&&nt.push(M(St))}return nt}var yt={x:Ge("x"),y:Ge("y")},ut=yt.x.concat(yt.y),vt={},Ae=[];function Fe(){var Pe=ie.matches;A.test(Pe)&&ut.indexOf(Pe)===-1&&(vt[Pe]=ie.type,Ae=Object.keys(vt))}var ke=p(F,P),Be=u(ke);for(ce=0;ce<K.length;ce++){D=K[ce],B=M(D),oe=D.charAt(0),h.isPlainObject(F[D])||(F[D]={}),ie=F[D],ge=v.newContainer(P,D,oe+"axis"),_e();var et=oe==="x"&&!q[D]&&Z[D]||oe==="y"&&!X[D]&&z[D],ht=oe==="y"&&(!Q[D]&&ee[D]||ne[D]),jt={hasMinor:!0,letter:oe,font:P.font,outerTicks:le[D],showGrid:!W[D],data:Y[D]||[],bgColor:re,calendar:P.calendar,automargin:!0,visibleDflt:et,reverseDflt:ht,autotypenumbersDflt:H,splomStash:((P._splomAxes||{})[oe]||{})[B],noAutotickangles:oe==="y"};Se("uirevision",P.uirevision),w(ie,ge,Se,jt),l(ie,ge,Se,jt,P);var At=Be&&oe===ke.charAt(0),Pt=De("spikecolor",Be?ge.color:void 0),zt=De("spikethickness",Be?1.5:void 0),Nt=De("spikedash",Be?"dot":void 0),Kt=De("spikemode",Be?"across":void 0),_t=De("spikesnap"),Qt=Se("showspikes",!!At||!!Pt||!!zt||!!Nt||!!Kt||!!_t);Qt||(delete ge.spikecolor,delete ge.spikethickness,delete ge.spikedash,delete ge.spikemode,delete ge.spikesnap);var fr=R(ie.overlaying),Vt=[0,1];if(P[fr]!==void 0){var rr=R(P[fr].anchor);P[rr]!==void 0&&(Vt=P[rr].domain)}y(ie,ge,Se,{letter:oe,counterAxes:yt[oe],overlayableAxes:Je(oe,D),grid:P.grid,overlayingDomain:Vt}),Se("title.standoff"),Fe(),ge._input=ie}for(ce=0;ce<Ae.length;){B=Ae[ce++],D=R(B),oe=D.charAt(0),h.isPlainObject(F[D])||(F[D]={}),ie=F[D],ge=v.newContainer(P,D,oe+"axis"),_e();var Ne={letter:oe,font:P.font,outerTicks:le[D],showGrid:!W[D],data:[],bgColor:re,calendar:P.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:H,splomStash:((P._splomAxes||{})[oe]||{})[B]};Se("uirevision",P.uirevision),ge.type=vt[B]||"linear",l(ie,ge,Se,Ne,P),y(ie,ge,Se,{letter:oe,counterAxes:yt[oe],overlayableAxes:Je(oe,D),grid:P.grid}),Se("fixedrange"),Fe(),ge._input=ie}var $e=b("rangeslider","handleDefaults"),Ue=b("rangeselector","handleDefaults");for(ce=0;ce<ae.length;ce++)D=ae[ce],ie=F[D],ge=P[D],$e(F,P,D),ge.type==="date"&&Ue(ie,ge,P,G,ge.calendar),Se("fixedrange");for(ce=0;ce<G.length;ce++){D=G[ce],ie=F[D],ge=P[D];var fe=P[R(ge.anchor)],je=b("rangeslider","isVisible")(fe);Se("fixedrange",je)}T.handleDefaults(F,P,{axIds:ut.concat(Ae).sort(S.idSort),axHasImage:ne})}}}),yk=i({"src/plots/cartesian/transition_axes.js"(U,$){var h=d(),c=mn(),u=kr(),p=di(),v=ji();$.exports=function(g,w,l,T){var y=g._fullLayout;if(w.length===0){v.redrawComponents(g);return}function S(P){var J=P.xaxis,H=P.yaxis;y._defs.select("#"+P.clipId+"> rect").call(p.setTranslate,0,0).call(p.setScale,1,1),P.plot.call(p.setTranslate,J._offset,H._offset).call(p.setScale,1,1);var Y=P.plot.selectAll(".scatterlayer .trace");Y.selectAll(".point").call(p.setPointGroupScale,1,1),Y.selectAll(".textpoint").call(p.setTextPointsScale,1,1),Y.call(p.hideOutsideRangePoints,P)}function R(P,J){var H=P.plotinfo,Y=H.xaxis,Z=H.yaxis,z=Y._length,q=Z._length,X=!!P.xr1,Q=!!P.yr1,ee=[];if(X){var ne=u.simpleMap(P.xr0,Y.r2l),le=u.simpleMap(P.xr1,Y.r2l),W=ne[1]-ne[0],ce=le[1]-le[0];ee[0]=(ne[0]*(1-J)+J*le[0]-ne[0])/(ne[1]-ne[0])*z,ee[2]=z*(1-J+J*ce/W),Y.range[0]=Y.l2r(ne[0]*(1-J)+J*le[0]),Y.range[1]=Y.l2r(ne[1]*(1-J)+J*le[1])}else ee[0]=0,ee[2]=z;if(Q){var de=u.simpleMap(P.yr0,Z.r2l),pe=u.simpleMap(P.yr1,Z.r2l),he=de[1]-de[0],be=pe[1]-pe[0];ee[1]=(de[1]*(1-J)+J*pe[1]-de[1])/(de[0]-de[1])*q,ee[3]=q*(1-J+J*be/he),Z.range[0]=Y.l2r(de[0]*(1-J)+J*pe[0]),Z.range[1]=Z.l2r(de[1]*(1-J)+J*pe[1])}else ee[1]=0,ee[3]=q;v.drawOne(g,Y,{skipTitle:!0}),v.drawOne(g,Z,{skipTitle:!0}),v.redrawComponents(g,[Y._id,Z._id]);var Ee=X?z/ee[2]:1,Te=Q?q/ee[3]:1,He=X?ee[0]:0,te=Q?ee[1]:0,ae=X?ee[0]/ee[2]*z:0,G=Q?ee[1]/ee[3]*q:0,K=Y._offset-ae,V=Z._offset-G;H.clipRect.call(p.setTranslate,He,te).call(p.setScale,1/Ee,1/Te),H.plot.call(p.setTranslate,K,V).call(p.setScale,Ee,Te),p.setPointGroupScale(H.zoomScalePts,1/Ee,1/Te),p.setTextPointsScale(H.zoomScaleTxt,1/Ee,1/Te)}var M;T&&(M=T());function A(){for(var P={},J=0;J<w.length;J++){var H=w[J],Y=H.plotinfo.xaxis,Z=H.plotinfo.yaxis;H.xr1&&(P[Y._name+".range"]=H.xr1.slice()),H.yr1&&(P[Z._name+".range"]=H.yr1.slice())}return M&&M(),c.call("relayout",g,P).then(function(){for(var z=0;z<w.length;z++)S(w[z].plotinfo)})}function C(){for(var P={},J=0;J<w.length;J++){var H=w[J],Y=H.plotinfo.xaxis,Z=H.plotinfo.yaxis;H.xr0&&(P[Y._name+".range"]=H.xr0.slice()),H.yr0&&(P[Z._name+".range"]=H.yr0.slice())}return c.call("relayout",g,P).then(function(){for(var z=0;z<w.length;z++)S(w[z].plotinfo)})}var j,b,k,E=h.ease(l.easing);g._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(k),k=null,C()});function F(){b=Date.now();for(var P=Math.min(1,(b-j)/l.duration),J=E(P),H=0;H<w.length;H++)R(w[H],J);b-j>l.duration?(A(),k=window.cancelAnimationFrame(F)):k=window.requestAnimationFrame(F)}return j=Date.now(),k=window.requestAnimationFrame(F),Promise.resolve()}}}),Am=i({"src/plots/cartesian/index.js"(U){var $=d(),h=mn(),c=kr(),u=Xi(),p=di(),v=bc().getModuleCalcData,m=pa(),g=ha(),w=qs(),l=c.ensureSingle;function T(j,b,k){return c.ensureSingle(j,b,k,function(E){E.datum(k)})}var y=g.zindexSeparator;U.name="cartesian",U.attr=["xaxis","yaxis"],U.idRoot=["x","y"],U.idRegex=g.idRegex,U.attrRegex=g.attrRegex,U.attributes=hk(),U.layoutAttributes=es(),U.supplyLayoutDefaults=gk(),U.transitionAxes=yk(),U.finalizeSubplots=function(j,b){var k=b._subplots,E=k.xaxis,F=k.yaxis,P=k.cartesian,J=P,H={},Y={},Z,z,q;for(Z=0;Z<J.length;Z++){var X=J[Z].split("y");H[X[0]]=1,Y["y"+X[1]]=1}for(Z=0;Z<E.length;Z++)z=E[Z],H[z]||(q=(j[m.id2name(z)]||{}).anchor,g.idRegex.y.test(q)||(q="y"),P.push(z+q),J.push(z+q),Y[q]||(Y[q]=1,c.pushUnique(F,q)));for(Z=0;Z<F.length;Z++)q=F[Z],Y[q]||(z=(j[m.id2name(q)]||{}).anchor,g.idRegex.x.test(z)||(z="x"),P.push(z+q),J.push(z+q),H[z]||(H[z]=1,c.pushUnique(E,z)));if(!J.length){z="",q="";for(var Q in j)if(g.attrRegex.test(Q)){var ee=Q.charAt(0);ee==="x"?(!z||+Q.substr(5)<+z.substr(5))&&(z=Q):(!q||+Q.substr(5)<+q.substr(5))&&(q=Q)}z=z?m.name2id(z):"x",q=q?m.name2id(q):"y",E.push(z),F.push(q),P.push(z+q)}},U.plot=function(j,b,k,E){var F=j._fullLayout,P=F._subplots.cartesian,J=j.calcdata,H;if(!Array.isArray(b))for(b=[],H=0;H<J.length;H++)b.push(H);for(var Y=F._zindices,Z=0;Z<Y.length;Z++){var z=Y[Z];for(H=0;H<P.length;H++){var q=P[H],X=F._plots[q];if(Z>0){var Q=X.id;if(Q.indexOf(y)!==-1)continue;Q+=y+(Z+1),X=c.extendFlat({},X,{id:Q,plot:F._cartesianlayer.selectAll(".subplot").select("."+Q)})}for(var ee=[],ne,le=0;le<J.length;le++){var W=J[le],ce=W[0].trace;z===(ce.zorder||0)&&ce.xaxis+ce.yaxis===q&&((b.indexOf(ce.index)!==-1||ce.carpet)&&(ne&&ne[0].trace.xaxis+ne[0].trace.yaxis===q&&["tonextx","tonexty","tonext"].indexOf(ce.fill)!==-1&&ee.indexOf(ne)===-1&&ee.push(ne),ee.push(W)),ne=W)}S(j,X,ee,k,E)}}};function S(j,b,k,E,F){for(var P=g.traceLayerClasses,J=j._fullLayout,H=J._zindices,Y=J._modules,Z,z,q,X=[],Q=[],ee=0;ee<H.length;ee++)for(var ne=H[ee],le=0;le<Y.length;le++){Z=Y[le];var W=Z.name,ce=h.modules[W].categories;if(ce.svg){var de=Z.layerName||W+"layer",pe=de+(ee?Number(ee)+1:""),he=Z.plot;z=v(k,he,ne),q=z[0],k=z[1],q.length&&X.push({i:P.indexOf(de),zindex:ee,className:pe,plotMethod:he,cdModule:q}),ce.zoomScale&&Q.push("."+pe)}}X.sort(function(Te,He){return(Te.zindex||0)-(He.zindex||0)||Te.i-He.i});var be=b.plot.selectAll("g.mlayer").data(X,function(Te){return Te.className});if(be.enter().append("g").attr("class",function(Te){return Te.className}).classed("mlayer",!0).classed("rangeplot",b.isRangePlot),be.exit().remove(),be.order(),be.each(function(Te){var He=$.select(this),te=Te.className;Te.plotMethod(j,b,Te.cdModule,He,E,F),g.clipOnAxisFalseQuery.indexOf("."+te)===-1&&p.setClipUrl(He,b.layerClipId,j)}),J._has("scattergl")&&(Z=h.getModule("scattergl"),q=v(k,Z)[0],Z.plot(j,b,q)),!j._context.staticPlot&&(b._hasClipOnAxisFalse&&(b.clipOnAxisFalseTraces=b.plot.selectAll(g.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),Q.length)){var Ee=b.plot.selectAll(Q.join(",")).selectAll(".trace");b.zoomScalePts=Ee.selectAll("path.point"),b.zoomScaleTxt=Ee.selectAll(".textpoint")}}U.clean=function(j,b,k,E){var F=E._plots||{},P=b._plots||{},J=E._subplots||{},H,Y,Z;if(E._hasOnlyLargeSploms&&!b._hasOnlyLargeSploms)for(Z in F)H=F[Z],H.plotgroup&&H.plotgroup.remove();var z=E._has&&E._has("gl"),q=b._has&&b._has("gl");if(z&&!q)for(Z in F)H=F[Z],H._scene&&H._scene.destroy();if(J.xaxis&&J.yaxis){var X=m.listIds({_fullLayout:E});for(Y=0;Y<X.length;Y++){var Q=X[Y];b[m.id2name(Q)]||E._infolayer.selectAll(".g-"+Q+"title").remove()}}var ee=E._has&&E._has("cartesian"),ne=b._has&&b._has("cartesian");if(ee&&!ne)A(E._cartesianlayer.selectAll(".subplot"),E),E._defs.selectAll(".axesclip").remove(),delete E._axisConstraintGroups,delete E._axisMatchGroups;else if(J.cartesian)for(Y=0;Y<J.cartesian.length;Y++){var le=J.cartesian[Y];if(le.indexOf(y)===-1&&!P[le]){var W="."+le+",."+le+"-x,."+le+"-y";E._cartesianlayer.selectAll(W).remove(),C(le,E)}}},U.drawFramework=function(j){var b=j._fullLayout,k=j.calcdata,E,F={};for(E=0;E<k.length;E++){var P=k[E][0],J=P.trace,H=J.zorder||0;F[H]||(F[H]=[]),F[H].push(P)}var Y=Object.keys(F).map(Number).sort(c.sorterAsc);Y.length||(Y=[0]),b._zindices=Y;var Z=R(j),z=Z.length,q=[];for(E=0;E<z;E++)q[E]=Z[E].slice();for(var X=1;X<Y.length;X++){var Q=[];for(E=0;E<z;E++)Q[E]=Z[E].slice(),Q[E][0]+=y+(X+1);q=q.concat(Q)}var ee=b._cartesianlayer.selectAll(".subplot").data(q,String);ee.enter().append("g").attr("class",function(ne){return"subplot "+ne[0]}),ee.order(),ee.exit().call(A,b),ee.each(function(ne){var le=ne[0],W=le.indexOf(y),ce=W!==-1,de=ce?le.slice(0,W):le,pe=b._plots[le];pe||(pe=c.extendFlat({},b._plots[de]),pe&&(pe.id=le,b._plots[le]=pe,b._subplots.cartesian.push(le))),pe&&(pe.plotgroup=$.select(this),M(j,pe),ce||(pe.draglayer=l(b._draggers,"g",le)))})},U.rangePlot=function(j,b,k){M(j,b),S(j,b,k),u.style(j)};function R(j){var b=j._fullLayout,k=b._zindices.length,E=b._subplots.cartesian,F=E.length,P,J,H,Y,Z,z,q=[],X=[];for(P=0;P<F;P++){H=E[P],Y=b._plots[H],Z=Y.xaxis,z=Y.yaxis;var Q=Z._mainAxis,ee=z._mainAxis,ne=Q._id+ee._id,le=b._plots[ne];Y.overlays=[],ne!==H&&le?(Y.mainplot=ne,Y.mainplotinfo=le,X.push(H)):(Y.mainplot=void 0,Y.mainplotinfo=void 0,q.push(H))}for(P=0;P<X.length;P++)H=X[P],Y=b._plots[H],Y.mainplotinfo.overlays.push(Y);var W=q.concat(X),ce=[];for(P=0;P<F;P++){H=W[P],Y=b._plots[H],Z=Y.xaxis,z=Y.yaxis;for(var de=[],pe=1;pe<=k;pe++){var he="";for(pe>1&&(he+=y+pe),de.push(H+he),J=0;J<Y.overlays.length;J++)de.push(Y.overlays[J].id+he)}de=de.concat([Z.layer,z.layer,Z.overlaying||"",z.overlaying||""]),ce.push(de)}return ce}function M(j,b){var k=j._fullLayout,E=b.plotgroup,F=b.id,P=F.indexOf(y),J=P!==-1,H=g.layerValue2layerClass[b.xaxis.layer],Y=g.layerValue2layerClass[b.yaxis.layer],Z=k._hasOnlyLargeSploms,z=k._zindices.length>1,q=b.mainplotinfo;if(!b.mainplot||z)if(Z)b.xlines=l(E,"path","xlines-above"),b.ylines=l(E,"path","ylines-above"),b.xaxislayer=l(E,"g","xaxislayer-above"),b.yaxislayer=l(E,"g","yaxislayer-above");else{if(!J){var X=l(E,"g","layer-subplot");b.shapelayer=l(X,"g","shapelayer"),b.imagelayer=l(X,"g","imagelayer"),q&&z?(b.minorGridlayer=q.minorGridlayer,b.gridlayer=q.gridlayer,b.zerolinelayer=q.zerolinelayer):(b.minorGridlayer=l(E,"g","minor-gridlayer"),b.gridlayer=l(E,"g","gridlayer"),b.zerolinelayer=l(E,"g","zerolinelayer"));var Q=l(E,"g","layer-between");b.shapelayerBetween=l(Q,"g","shapelayer"),b.imagelayerBetween=l(Q,"g","imagelayer"),l(E,"path","xlines-below"),l(E,"path","ylines-below"),b.overlinesBelow=l(E,"g","overlines-below"),l(E,"g","xaxislayer-below"),l(E,"g","yaxislayer-below"),b.overaxesBelow=l(E,"g","overaxes-below")}b.overplot=l(E,"g","overplot"),b.plot=l(b.overplot,"g",F),J||(b.xlines=l(E,"path","xlines-above"),b.ylines=l(E,"path","ylines-above"),b.overlinesAbove=l(E,"g","overlines-above"),l(E,"g","xaxislayer-above"),l(E,"g","yaxislayer-above"),b.overaxesAbove=l(E,"g","overaxes-above"),b.xlines=E.select(".xlines-"+H),b.ylines=E.select(".ylines-"+Y),b.xaxislayer=E.select(".xaxislayer-"+H),b.yaxislayer=E.select(".yaxislayer-"+Y))}else{var ee=q.plotgroup,ne=F+"-x",le=F+"-y";b.minorGridlayer=q.minorGridlayer,b.gridlayer=q.gridlayer,b.zerolinelayer=q.zerolinelayer,l(q.overlinesBelow,"path",ne),l(q.overlinesBelow,"path",le),l(q.overaxesBelow,"g",ne),l(q.overaxesBelow,"g",le),b.plot=l(q.overplot,"g",F),l(q.overlinesAbove,"path",ne),l(q.overlinesAbove,"path",le),l(q.overaxesAbove,"g",ne),l(q.overaxesAbove,"g",le),b.xlines=ee.select(".overlines-"+H).select("."+ne),b.ylines=ee.select(".overlines-"+Y).select("."+le),b.xaxislayer=ee.select(".overaxes-"+H).select("."+ne),b.yaxislayer=ee.select(".overaxes-"+Y).select("."+le)}J||(Z||(T(b.minorGridlayer,"g",b.xaxis._id),T(b.minorGridlayer,"g",b.yaxis._id),b.minorGridlayer.selectAll("g").map(function(W){return W[0]}).sort(m.idSort),T(b.gridlayer,"g",b.xaxis._id),T(b.gridlayer,"g",b.yaxis._id),b.gridlayer.selectAll("g").map(function(W){return W[0]}).sort(m.idSort)),b.xlines.style("fill","none").classed("crisp",!0),b.ylines.style("fill","none").classed("crisp",!0))}function A(j,b){if(j){var k={};j.each(function(Y){var Z=Y[0],z=$.select(this);z.remove(),C(Z,b),k[Z]=!0});for(var E in b._plots)for(var F=b._plots[E],P=F.overlays||[],J=0;J<P.length;J++){var H=P[J];k[H.id]&&H.plot.selectAll(".trace").remove()}}}function C(j,b){b._draggers.selectAll("g."+j).remove(),b._defs.select("#clip"+b._uid+j+"plot").remove()}U.toSVG=function(j){var b=j._fullLayout._glimages,k=$.select(j).selectAll(".svg-container"),E=k.filter(function(P,J){return J===k.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function F(){var P=this,J=P.toDataURL("image/png"),H=b.append("svg:image");H.attr({xmlns:w.svg,"xlink:href":J,preserveAspectRatio:"none",x:0,y:0,width:P.style.width,height:P.style.height})}E.each(F)},U.updateFx=My().updateFx}}),xk=i({"src/traces/scatter/index.js"(U,$){var h=Ia();$.exports={hasLines:h.hasLines,hasMarkers:h.hasMarkers,hasText:h.hasText,isBubble:h.isBubble,attributes:yu(),layoutAttributes:Dl(),supplyDefaults:ek(),crossTraceDefaults:tk(),supplyLayoutDefaults:rk(),calc:Ny().calc,crossTraceCalc:ak(),arraysToCalcdata:Dy(),plot:lk(),colorbar:Fy(),formatLabels:ck(),style:Iy().style,styleOnSelect:Iy().styleOnSelect,hoverPoints:dk(),selectPoints:fk(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:Am(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}}}),bk=i({"src/components/annotations/draw_arrow_head.js"(U,$){var h=d(),c=pt(),u=ky(),p=kr(),v=p.strScale,m=p.strRotate,g=p.strTranslate;$.exports=function(l,T,y){var S=l.node(),R=u[y.arrowhead||0],M=u[y.startarrowhead||0],A=(y.arrowwidth||1)*(y.arrowsize||1),C=(y.arrowwidth||1)*(y.startarrowsize||1),j=T.indexOf("start")>=0,b=T.indexOf("end")>=0,k=R.backoff*A+y.standoff,E=M.backoff*C+y.startstandoff,F,P,J,H;if(S.nodeName==="line"){F={x:+l.attr("x1"),y:+l.attr("y1")},P={x:+l.attr("x2"),y:+l.attr("y2")};var Y=F.x-P.x,Z=F.y-P.y;if(J=Math.atan2(Z,Y),H=J+Math.PI,k&&E&&k+E>Math.sqrt(Y*Y+Z*Z)){he();return}if(k){if(k*k>Y*Y+Z*Z){he();return}var z=k*Math.cos(J),q=k*Math.sin(J);P.x+=z,P.y+=q,l.attr({x2:P.x,y2:P.y})}if(E){if(E*E>Y*Y+Z*Z){he();return}var X=E*Math.cos(J),Q=E*Math.sin(J);F.x-=X,F.y-=Q,l.attr({x1:F.x,y1:F.y})}}else if(S.nodeName==="path"){var ee=S.getTotalLength(),ne="";if(ee<k+E){he();return}var le=S.getPointAtLength(0),W=S.getPointAtLength(.1);J=Math.atan2(le.y-W.y,le.x-W.x),F=S.getPointAtLength(Math.min(E,ee)),ne="0px,"+E+"px,";var ce=S.getPointAtLength(ee),de=S.getPointAtLength(ee-.1);H=Math.atan2(ce.y-de.y,ce.x-de.x),P=S.getPointAtLength(Math.max(0,ee-k));var pe=ne?E+k:k;ne+=ee-pe+"px,"+ee+"px",l.style("stroke-dasharray",ne)}function he(){l.style("stroke-dasharray","0px,100px")}function be(Ee,Te,He,te){Ee.path&&(Ee.noRotate&&(He=0),h.select(S.parentNode).append("path").attr({class:l.attr("class"),d:Ee.path,transform:g(Te.x,Te.y)+m(He*180/Math.PI)+v(te)}).style({fill:c.rgb(y.arrowcolor),"stroke-width":0}))}j&&be(M,F,J,C),b&&be(R,P,H,A)}}}),Cm=i({"src/components/annotations/draw.js"(U,$){var h=d(),c=mn(),u=Xi(),p=kr(),v=p.strTranslate,m=ji(),g=pt(),w=di(),l=po(),T=Ra(),y=ho(),S=Wa(),R=Si().arrayEditor,M=bk();$.exports={draw:A,drawOne:C,drawRaw:b};function A(k){var E=k._fullLayout;E._infolayer.selectAll(".annotation").remove();for(var F=0;F<E.annotations.length;F++)E.annotations[F].visible&&C(k,F);return u.previousPromises(k)}function C(k,E){var F=k._fullLayout,P=F.annotations[E]||{},J=m.getFromId(k,P.xref),H=m.getFromId(k,P.yref);J&&J.setScale(),H&&H.setScale(),b(k,P,E,!1,J,H)}function j(k,E,F,P,J){var H=J[F],Y=J[F+"ref"],Z=F.indexOf("y")!==-1,z=m.getRefType(Y)==="domain",q=Z?P.h:P.w;return k?z?H+(Z?-E:E)/k._length:k.p2r(k.r2p(H)+E):H+(Z?-E:E)/q}function b(k,E,F,P,J,H){var Y=k._fullLayout,Z=k._fullLayout._size,z=k._context.edits,q,X;P?(q="annotation-"+P,X=P+".annotations"):(q="annotation",X="annotations");var Q=R(k.layout,X,E),ee=Q.modifyBase,ne=Q.modifyItem,le=Q.getUpdateObj;Y._infolayer.selectAll("."+q+'[data-index="'+F+'"]').remove();var W="clip"+Y._uid+"_ann"+F;if(!E._input||E.visible===!1){h.selectAll("#"+W).remove();return}var ce={x:{},y:{}},de=+E.textangle||0,pe=Y._infolayer.append("g").classed(q,!0).attr("data-index",String(F)).style("opacity",E.opacity),he=pe.append("g").classed("annotation-text-g",!0),be=z[E.showarrow?"annotationTail":"annotationPosition"],Ee=E.captureevents||z.annotationText||be;function Te(_e){var Se={index:F,annotation:E._input,fullAnnotation:E,event:_e};return P&&(Se.subplotId=P),Se}var He=he.append("g").style("pointer-events",Ee?"all":null).call(y,"pointer").on("click",function(){k._dragging=!1,k.emit("plotly_clickannotation",Te(h.event))});E.hovertext&&He.on("mouseover",function(){var _e=E.hoverlabel,Se=_e.font,De=this.getBoundingClientRect(),Ge=k.getBoundingClientRect();l.loneHover({x0:De.left-Ge.left,x1:De.right-Ge.left,y:(De.top+De.bottom)/2-Ge.top,text:E.hovertext,color:_e.bgcolor,borderColor:_e.bordercolor,fontFamily:Se.family,fontSize:Se.size,fontColor:Se.color,fontWeight:Se.weight,fontStyle:Se.style,fontVariant:Se.variant,fontShadow:Se.fontShadow,fontLineposition:Se.fontLineposition,fontTextcase:Se.fontTextcase},{container:Y._hoverlayer.node(),outerContainer:Y._paper.node(),gd:k})}).on("mouseout",function(){l.loneUnhover(Y._hoverlayer.node())});var te=E.borderwidth,ae=E.borderpad,G=te+ae,K=He.append("rect").attr("class","bg").style("stroke-width",te+"px").call(g.stroke,E.bordercolor).call(g.fill,E.bgcolor),V=E.width||E.height,re=Y._topclips.selectAll("#"+W).data(V?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",W).append("rect"),re.exit().remove();var D=E.font,B=Y._meta?p.templateString(E.text,Y._meta):E.text,oe=He.append("text").classed("annotation-text",!0).text(B);function ie(_e){return _e.call(w.font,D).attr({"text-anchor":{left:"start",right:"end"}[E.align]||"middle"}),T.convertToTspans(_e,k,ge),_e}function ge(){var _e=oe.selectAll("a");if(_e.size()===1&&_e.text()===oe.text()){var Se=He.insert("a",":first-child").attr({"xlink:xlink:href":_e.attr("xlink:href"),"xlink:xlink:show":_e.attr("xlink:show")}).style({cursor:"pointer"});Se.node().appendChild(K.node())}var De=He.select(".annotation-text-math-group"),Ge=!De.empty(),Je=w.bBox((Ge?De:oe).node()),yt=Je.width,ut=Je.height,vt=E.width||yt,Ae=E.height||ut,Fe=Math.round(vt+2*G),ke=Math.round(Ae+2*G);function Be(Ir,gr){return gr==="auto"&&(Ir<1/3?gr="left":Ir>2/3?gr="right":gr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[gr]}for(var et=!1,ht=["x","y"],jt=0;jt<ht.length;jt++){var At=ht[jt],Pt=E[At+"ref"]||At,zt=E["a"+At+"ref"],Nt={x:J,y:H}[At],Kt=(de+(At==="x"?0:-90))*Math.PI/180,_t=Fe*Math.cos(Kt),Qt=ke*Math.sin(Kt),fr=Math.abs(_t)+Math.abs(Qt),Vt=E[At+"anchor"],rr=E[At+"shift"]*(At==="x"?1:-1),Ne=ce[At],$e,Ue,fe,je,Pe,Re=m.getRefType(Pt);if(Nt&&Re!=="domain"){var tt=Nt.r2fraction(E[At]);(tt<0||tt>1)&&(zt===Pt?(tt=Nt.r2fraction(E["a"+At]),(tt<0||tt>1)&&(et=!0)):et=!0),$e=Nt._offset+Nt.r2p(E[At]),je=.5}else{var nt=Re==="domain";At==="x"?(fe=E[At],$e=nt?Nt._offset+Nt._length*fe:$e=Z.l+Z.w*fe):(fe=1-E[At],$e=nt?Nt._offset+Nt._length*fe:$e=Z.t+Z.h*fe),je=E.showarrow?.5:fe}if(E.showarrow){Ne.head=$e;var dt=E["a"+At];if(Pe=_t*Be(.5,E.xanchor)-Qt*Be(.5,E.yanchor),zt===Pt){var St=m.getRefType(zt);St==="domain"?(At==="y"&&(dt=1-dt),Ne.tail=Nt._offset+Nt._length*dt):St==="paper"?At==="y"?(dt=1-dt,Ne.tail=Z.t+Z.h*dt):Ne.tail=Z.l+Z.w*dt:Ne.tail=Nt._offset+Nt.r2p(dt),Ue=Pe}else Ne.tail=$e+dt,Ue=Pe+dt;Ne.text=Ne.tail+Pe;var Dt=Y[At==="x"?"width":"height"];if(Pt==="paper"&&(Ne.head=p.constrain(Ne.head,1,Dt-1)),zt==="pixel"){var at=-Math.max(Ne.tail-3,Ne.text),Ct=Math.min(Ne.tail+3,Ne.text)-Dt;at>0?(Ne.tail+=at,Ne.text+=at):Ct>0&&(Ne.tail-=Ct,Ne.text-=Ct)}Ne.tail+=rr,Ne.head+=rr}else Pe=fr*Be(je,Vt),Ue=Pe,Ne.text=$e+Pe;Ne.text+=rr,Pe+=rr,Ue+=rr,E["_"+At+"padplus"]=fr/2+Ue,E["_"+At+"padminus"]=fr/2-Ue,E["_"+At+"size"]=fr,E["_"+At+"shift"]=Pe}if(et){He.remove();return}var Ht=0,Ut=0;if(E.align!=="left"&&(Ht=(vt-yt)*(E.align==="center"?.5:1)),E.valign!=="top"&&(Ut=(Ae-ut)*(E.valign==="middle"?.5:1)),Ge)De.select("svg").attr({x:G+Ht-1,y:G+Ut}).call(w.setClipUrl,V?W:null,k);else{var Ar=G+Ut-Je.top,Rr=G+Ht-Je.left;oe.call(T.positionText,Rr,Ar).call(w.setClipUrl,V?W:null,k)}re.select("rect").call(w.setRect,G,G,vt,Ae),K.call(w.setRect,te/2,te/2,Fe-te,ke-te),He.call(w.setTranslate,Math.round(ce.x.text-Fe/2),Math.round(ce.y.text-ke/2)),he.attr({transform:"rotate("+de+","+ce.x.text+","+ce.y.text+")"});var $r=function(Ir,gr){pe.selectAll(".annotation-arrow-g").remove();var br=ce.x.head,Vr=ce.y.head,Br=ce.x.tail+Ir,Ur=ce.y.tail+gr,Lr=ce.x.text+Ir,hr=ce.y.text+gr,Or=p.rotationXYMatrix(de,Lr,hr),fn=p.apply2DTransform(Or),An=p.apply2DTransform2(Or),qr=+K.attr("width"),yn=+K.attr("height"),xn=Lr-.5*qr,Xn=xn+qr,mr=hr-.5*yn,jn=mr+yn,we=[[xn,mr,xn,jn],[xn,jn,Xn,jn],[Xn,jn,Xn,mr],[Xn,mr,xn,mr]].map(An);if(!we.reduce(function(Xt,sr){return Xt^!!p.segmentsIntersect(br,Vr,br+1e6,Vr+1e6,sr[0],sr[1],sr[2],sr[3])},!1)){we.forEach(function(Xt){var sr=p.segmentsIntersect(Br,Ur,br,Vr,Xt[0],Xt[1],Xt[2],Xt[3]);sr&&(Br=sr.x,Ur=sr.y)});var me=E.arrowwidth,mt=E.arrowcolor,ft=E.arrowside,Xe=pe.append("g").style({opacity:g.opacity(mt)}).classed("annotation-arrow-g",!0),Ke=Xe.append("path").attr("d","M"+Br+","+Ur+"L"+br+","+Vr).style("stroke-width",me+"px").call(g.stroke,g.rgb(mt));if(M(Ke,ft,E),z.annotationPosition&&Ke.node().parentNode&&!P){var it=br,Tt=Vr;if(E.standoff){var rt=Math.sqrt(Math.pow(br-Br,2)+Math.pow(Vr-Ur,2));it+=E.standoff*(Br-br)/rt,Tt+=E.standoff*(Ur-Vr)/rt}var xt=Xe.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Br-it)+","+(Ur-Tt),transform:v(it,Tt)}).style("stroke-width",me+6+"px").call(g.stroke,"rgba(0,0,0,0)").call(g.fill,"rgba(0,0,0,0)"),Mt,Lt;S.init({element:xt.node(),gd:k,prepFn:function(){var Xt=w.getTranslate(He);Mt=Xt.x,Lt=Xt.y,J&&J.autorange&&ee(J._name+".autorange",!0),H&&H.autorange&&ee(H._name+".autorange",!0)},moveFn:function(Xt,sr){var or=fn(Mt,Lt),Dr=or[0]+Xt,_r=or[1]+sr;He.call(w.setTranslate,Dr,_r),ne("x",j(J,Xt,"x",Z,E)),ne("y",j(H,sr,"y",Z,E)),E.axref===E.xref&&ne("ax",j(J,Xt,"ax",Z,E)),E.ayref===E.yref&&ne("ay",j(H,sr,"ay",Z,E)),Xe.attr("transform",v(Xt,sr)),he.attr({transform:"rotate("+de+","+Dr+","+_r+")"})},doneFn:function(){c.call("_guiRelayout",k,le());var Xt=document.querySelector(".js-notes-box-panel");Xt&&Xt.redraw(Xt.selectedObj)}})}}};if(E.showarrow&&$r(0,0),be){var Mr;S.init({element:He.node(),gd:k,prepFn:function(){Mr=he.attr("transform")},moveFn:function(Ir,gr){var br="pointer";if(E.showarrow)E.axref===E.xref?ne("ax",j(J,Ir,"ax",Z,E)):ne("ax",E.ax+Ir),E.ayref===E.yref?ne("ay",j(H,gr,"ay",Z.w,E)):ne("ay",E.ay+gr),$r(Ir,gr);else{if(P)return;var Vr,Br;if(J)Vr=j(J,Ir,"x",Z,E);else{var Ur=E._xsize/Z.w,Lr=E.x+(E._xshift-E.xshift)/Z.w-Ur/2;Vr=S.align(Lr+Ir/Z.w,Ur,0,1,E.xanchor)}if(H)Br=j(H,gr,"y",Z,E);else{var hr=E._ysize/Z.h,Or=E.y-(E._yshift+E.yshift)/Z.h-hr/2;Br=S.align(Or-gr/Z.h,hr,0,1,E.yanchor)}ne("x",Vr),ne("y",Br),(!J||!H)&&(br=S.getCursor(J?.5:Vr,H?.5:Br,E.xanchor,E.yanchor))}he.attr({transform:v(Ir,gr)+Mr}),y(He,br)},clickFn:function(Ir,gr){E.captureevents&&k.emit("plotly_clickannotation",Te(gr))},doneFn:function(){y(He),c.call("_guiRelayout",k,le());var Ir=document.querySelector(".js-notes-box-panel");Ir&&Ir.redraw(Ir.selectedObj)}})}}z.annotationText?oe.call(T.makeEditable,{delegate:He,gd:k}).call(ie).on("edit",function(_e){E.text=_e,this.call(ie),ne("text",_e),J&&J.autorange&&ee(J._name+".autorange",!0),H&&H.autorange&&ee(H._name+".autorange",!0),c.call("_guiRelayout",k,le())}):oe.call(ie)}}}),wk=i({"src/components/annotations/click.js"(U,$){var h=kr(),c=mn(),u=Si().arrayEditor;$.exports={hasClickToShow:p,onClick:v};function p(w,l){var T=m(w,l);return T.on.length>0||T.explicitOff.length>0}function v(w,l){var T=m(w,l),y=T.on,S=T.off.concat(T.explicitOff),R={},M=w._fullLayout.annotations,A,C;if(y.length||S.length){for(A=0;A<y.length;A++)C=u(w.layout,"annotations",M[y[A]]),C.modifyItem("visible",!0),h.extendFlat(R,C.getUpdateObj());for(A=0;A<S.length;A++)C=u(w.layout,"annotations",M[S[A]]),C.modifyItem("visible",!1),h.extendFlat(R,C.getUpdateObj());return c.call("update",w,{},R)}}function m(w,l){var T=w._fullLayout.annotations,y=[],S=[],R=[],M=(l||[]).length,A,C,j,b,k,E,F,P;for(A=0;A<T.length;A++)if(j=T[A],b=j.clicktoshow,b){for(C=0;C<M;C++)if(k=l[C],E=k.xaxis,F=k.yaxis,E._id===j.xref&&F._id===j.yref&&E.d2r(k.x)===g(j._xclick,E)&&F.d2r(k.y)===g(j._yclick,F)){j.visible?b==="onout"?P=S:P=R:P=y,P.push(A);break}C===M&&j.visible&&b==="onout"&&S.push(A)}return{on:y,off:S,explicitOff:R}}function g(w,l){return l.type==="log"?l.l2r(w):l.d2r(w)}}}),Hy=i({"src/components/annotations/common_defaults.js"(U,$){var h=kr(),c=pt();$.exports=function(p,v,m,g){g("opacity");var w=g("bgcolor"),l=g("bordercolor"),T=c.opacity(l);g("borderpad");var y=g("borderwidth"),S=g("showarrow");g("text",S?" ":m._dfltTitle.annotation),g("textangle"),h.coerceFont(g,"font",m.font),g("width"),g("align");var R=g("height");if(R&&g("valign"),S){var M=g("arrowside"),A,C;M.indexOf("end")!==-1&&(A=g("arrowhead"),C=g("arrowsize")),M.indexOf("start")!==-1&&(g("startarrowhead",A),g("startarrowsize",C)),g("arrowcolor",T?v.bordercolor:c.defaultLine),g("arrowwidth",(T&&y||1)*2),g("standoff"),g("startstandoff")}var j=g("hovertext"),b=m.hoverlabel||{};if(j){var k=g("hoverlabel.bgcolor",b.bgcolor||(c.opacity(w)?c.rgb(w):c.defaultLine)),E=g("hoverlabel.bordercolor",b.bordercolor||c.contrast(k)),F=h.extendFlat({},b.font);F.color||(F.color=E),h.coerceFont(g,"hoverlabel.font",F)}g("captureevents",!!j)}}}),_k=i({"src/components/annotations/defaults.js"(U,$){var h=kr(),c=ji(),u=Tn(),p=Hy(),v=hd();$.exports=function(w,l){u(w,l,{name:"annotations",handleItemDefaults:m})};function m(g,w,l){function T(Z,z){return h.coerce(g,w,v,Z,z)}var y=T("visible"),S=T("clicktoshow");if(y||S){p(g,w,l,T);for(var R=w.showarrow,M=["x","y"],A=[-10,-30],C={_fullLayout:l},j=0;j<2;j++){var b=M[j],k=c.coerceRef(g,w,C,b,"","paper");if(k!=="paper"){var E=c.getFromId(C,k);E._annIndices.push(w._index)}if(c.coercePosition(w,C,T,k,b,.5),R){var F="a"+b,P=c.coerceRef(g,w,C,F,"pixel",["pixel","paper"]);P!=="pixel"&&P!==k&&(P=w[F]="pixel");var J=P==="pixel"?A[j]:.4;c.coercePosition(w,C,T,P,F,J)}T(b+"anchor"),T(b+"shift")}if(h.noneOrAll(g,w,["x","y"]),R&&h.noneOrAll(g,w,["ax","ay"]),S){var H=T("xclick"),Y=T("yclick");w._xclick=H===void 0?w.x:c.cleanPosition(H,C,w.xref),w._yclick=Y===void 0?w.y:c.cleanPosition(Y,C,w.yref)}}}}}),kk=i({"src/components/annotations/calc_autorange.js"(U,$){var h=kr(),c=ji(),u=Cm().draw;$.exports=function(g){var w=g._fullLayout,l=h.filterVisible(w.annotations);if(l.length&&g._fullData.length)return h.syncOrAsync([u,p],g)};function p(m){var g=m._fullLayout;h.filterVisible(g.annotations).forEach(function(w){var l=c.getFromId(m,w.xref),T=c.getFromId(m,w.yref),y=c.getRefType(w.xref),S=c.getRefType(w.yref);w._extremes={},y==="range"&&v(w,l),S==="range"&&v(w,T)})}function v(m,g){var w=g._id,l=w.charAt(0),T=m[l],y=m["a"+l],S=m[l+"ref"],R=m["a"+l+"ref"],M=m["_"+l+"padplus"],A=m["_"+l+"padminus"],C={x:1,y:-1}[l]*m[l+"shift"],j=3*m.arrowsize*m.arrowwidth||0,b=j+C,k=j-C,E=3*m.startarrowsize*m.arrowwidth||0,F=E+C,P=E-C,J;if(R===S){var H=c.findExtremes(g,[g.r2c(T)],{ppadplus:b,ppadminus:k}),Y=c.findExtremes(g,[g.r2c(y)],{ppadplus:Math.max(M,F),ppadminus:Math.max(A,P)});J={min:[H.min[0],Y.min[0]],max:[H.max[0],Y.max[0]]}}else F=y?F+y:F,P=y?P-y:P,J=c.findExtremes(g,[g.r2c(T)],{ppadplus:Math.max(M,b,F),ppadminus:Math.max(A,k,P)});m._extremes[w]=J}}}),Sk=i({"src/components/annotations/convert_coords.js"(U,$){var h=xe(),c=ot();$.exports=function(p,v,m,g){v=v||{};var w=m==="log"&&v.type==="linear",l=m==="linear"&&v.type==="log";if(!(w||l))return;var T=p._fullLayout.annotations,y=v._id.charAt(0),S,R;function M(C){var j=S[C],b=null;w?b=c(j,v.range):b=Math.pow(10,j),h(b)||(b=null),g(R+C,b)}for(var A=0;A<T.length;A++)S=T[A],R="annotations["+A+"].",S[y+"ref"]===v._id&&M(y),S["a"+y+"ref"]===v._id&&M("a"+y)}}}),Mk=i({"src/components/annotations/index.js"(U,$){var h=Cm(),c=wk();$.exports={moduleType:"component",name:"annotations",layoutAttributes:hd(),supplyLayoutDefaults:_k(),includeBasePlot:Zf()("annotations"),calcAutorange:kk(),draw:h.draw,drawOne:h.drawOne,drawRaw:h.drawRaw,hasClickToShow:c.hasClickToShow,onClick:c.onClick,convertCoords:Sk()}}}),jm=i({"src/components/annotations3d/attributes.js"(U,$){var h=hd(),c=Ni().overrideAll,u=Si().templatedArray;$.exports=c(u("annotation",{visible:h.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:h.xanchor,xshift:h.xshift,yanchor:h.yanchor,yshift:h.yshift,text:h.text,textangle:h.textangle,font:h.font,width:h.width,height:h.height,opacity:h.opacity,align:h.align,valign:h.valign,bgcolor:h.bgcolor,bordercolor:h.bordercolor,borderpad:h.borderpad,borderwidth:h.borderwidth,showarrow:h.showarrow,arrowcolor:h.arrowcolor,arrowhead:h.arrowhead,startarrowhead:h.startarrowhead,arrowside:h.arrowside,arrowsize:h.arrowsize,startarrowsize:h.startarrowsize,arrowwidth:h.arrowwidth,standoff:h.standoff,startstandoff:h.startstandoff,hovertext:h.hovertext,hoverlabel:h.hoverlabel,captureevents:h.captureevents}),"calc","from-root")}}),Tk=i({"src/components/annotations3d/defaults.js"(U,$){var h=kr(),c=ji(),u=Tn(),p=Hy(),v=jm();$.exports=function(w,l,T){u(w,l,{name:"annotations",handleItemDefaults:m,fullLayout:T.fullLayout})};function m(g,w,l,T){function y(M,A){return h.coerce(g,w,v,M,A)}function S(M){var A=M+"axis",C={_fullLayout:{}};return C._fullLayout[A]=l[A],c.coercePosition(w,C,y,M,M,.5)}var R=y("visible");R&&(p(g,w,T.fullLayout,y),S("x"),S("y"),S("z"),h.noneOrAll(g,w,["x","y","z"]),w.xref="x",w.yref="y",w.zref="z",y("xanchor"),y("yanchor"),y("xshift"),y("yshift"),w.showarrow&&(w.axref="pixel",w.ayref="pixel",y("ax",-10),y("ay",-30),h.noneOrAll(g,w,["ax","ay"])))}}}),Ak=i({"src/components/annotations3d/convert.js"(U,$){var h=kr(),c=ji();$.exports=function(v){for(var m=v.fullSceneLayout,g=m.annotations,w=0;w<g.length;w++)u(g[w],v);v.fullLayout._infolayer.selectAll(".annotation-"+v.id).remove()};function u(p,v){var m=v.fullSceneLayout,g=m.domain,w=v.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};p._xa={},h.extendFlat(p._xa,l),c.setConvert(p._xa),p._xa._offset=w.l+g.x[0]*w.w,p._xa.l2p=function(){return .5*(1+p._pdata[0]/p._pdata[3])*w.w*(g.x[1]-g.x[0])},p._ya={},h.extendFlat(p._ya,l),c.setConvert(p._ya),p._ya._offset=w.t+(1-g.y[1])*w.h,p._ya.l2p=function(){return .5*(1-p._pdata[1]/p._pdata[3])*w.h*(g.y[1]-g.y[0])}}}}),Ck=i({"src/plots/gl3d/project.js"(U,$){function h(u,p){var v=[0,0,0,0],m,g;for(m=0;m<4;++m)for(g=0;g<4;++g)v[g]+=u[4*m+g]*p[m];return v}function c(u,p){var v=h(u.projection,h(u.view,h(u.model,[p[0],p[1],p[2],1])));return v}$.exports=c}}),jk=i({"src/components/annotations3d/draw.js"(U,$){var h=Cm().drawRaw,c=Ck(),u=["x","y","z"];$.exports=function(v){for(var m=v.fullSceneLayout,g=v.dataScale,w=m.annotations,l=0;l<w.length;l++){for(var T=w[l],y=!1,S=0;S<3;S++){var R=u[S],M=T[R],A=m[R+"axis"],C=A.r2fraction(M);if(C<0||C>1){y=!0;break}}y?v.fullLayout._infolayer.select(".annotation-"+v.id+'[data-index="'+l+'"]').remove():(T._pdata=c(v.glplot.cameraParams,[m.xaxis.r2l(T.x)*g[0],m.yaxis.r2l(T.y)*g[1],m.zaxis.r2l(T.z)*g[2]]),h(v.graphDiv,T,l,v.id,T._xa,T._ya))}}}}),Ek=i({"src/components/annotations3d/index.js"(U,$){var h=mn(),c=kr();$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:jm()}}},layoutAttributes:jm(),handleDefaults:Tk(),includeBasePlot:u,convert:Ak(),draw:jk()};function u(p,v){var m=h.subplotsRegistry.gl3d;if(m)for(var g=m.attrRegex,w=Object.keys(p),l=0;l<w.length;l++){var T=w[l];g.test(T)&&(p[T].annotations||[]).length&&(c.pushUnique(v._basePlotModules,m),c.pushUnique(v._subplots.gl3d,T))}}}}),Wy=i({"src/components/shapes/attributes.js"(U,$){var h=hd(),c=er(),u=yu().line,p=si().dash,v=It().extendFlat,m=Si().templatedArray;Xf();var g=lt(),w=ea().shapeTexttemplateAttrs,l=wa();$.exports=m("shape",{visible:v({},g.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:v({},g.legend,{editType:"calc+arraydraw"}),legendgroup:v({},g.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:v({},g.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:c({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:v({},g.legendrank,{editType:"calc+arraydraw"}),legendwidth:v({},g.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:v({},h.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:v({},h.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:v({},u.color,{editType:"arraydraw"}),width:v({},u.width,{editType:"calc+arraydraw"}),dash:v({},p,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:w({},{keys:Object.keys(l)}),font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})}}),Lk=i({"src/components/shapes/defaults.js"(U,$){var h=kr(),c=ji(),u=Tn(),p=Wy(),v=qt();$.exports=function(l,T){u(l,T,{name:"shapes",handleItemDefaults:g})};function m(w,l){return w?"bottom":l.indexOf("top")!==-1?"top":l.indexOf("bottom")!==-1?"bottom":"middle"}function g(w,l,T){function y(te,ae){return h.coerce(w,l,p,te,ae)}l._isShape=!0;var S=y("visible");if(S){var R=y("showlegend");R&&(y("legend"),y("legendwidth"),y("legendgroup"),y("legendgrouptitle.text"),h.coerceFont(y,"legendgrouptitle.font"),y("legendrank"));var M=y("path"),A=M?"path":"rect",C=y("type",A),j=C!=="path";j&&delete l.path,y("editable"),y("layer"),y("opacity"),y("fillcolor"),y("fillrule");var b=y("line.width");b&&(y("line.color"),y("line.dash"));for(var k=y("xsizemode"),E=y("ysizemode"),F=["x","y"],P=0;P<2;P++){var J=F[P],H=J+"anchor",Y=J==="x"?k:E,Z={_fullLayout:T},z,q,X,Q=c.coerceRef(w,l,Z,J,void 0,"paper"),ee=c.getRefType(Q);if(ee==="range"?(z=c.getFromId(Z,Q),z._shapeIndices.push(l._index),X=v.rangeToShapePosition(z),q=v.shapePositionToRange(z),(z.type==="category"||z.type==="multicategory")&&(y(J+"0shift"),y(J+"1shift"))):q=X=h.identity,j){var ne=.25,le=.75,W=J+"0",ce=J+"1",de=w[W],pe=w[ce];w[W]=q(w[W],!0),w[ce]=q(w[ce],!0),Y==="pixel"?(y(W,0),y(ce,10)):(c.coercePosition(l,Z,y,Q,W,ne),c.coercePosition(l,Z,y,Q,ce,le)),l[W]=X(l[W]),l[ce]=X(l[ce]),w[W]=de,w[ce]=pe}if(Y==="pixel"){var he=w[H];w[H]=q(w[H],!0),c.coercePosition(l,Z,y,Q,H,.25),l[H]=X(l[H]),w[H]=he}}j&&h.noneOrAll(w,l,["x0","x1","y0","y1"]);var be=C==="line",Ee,Te;if(j&&(Ee=y("label.texttemplate")),Ee||(Te=y("label.text")),Te||Ee){y("label.textangle");var He=y("label.textposition",be?"middle":"middle center");y("label.xanchor"),y("label.yanchor",m(be,He)),y("label.padding"),h.coerceFont(y,"label.font",T.font)}}}}}),Rk=i({"src/components/shapes/draw_newshape/defaults.js"(U,$){var h=pt(),c=kr();function u(p,v){return p?"bottom":v.indexOf("top")!==-1?"top":v.indexOf("bottom")!==-1?"bottom":"middle"}$.exports=function(v,m,g){g("newshape.visible"),g("newshape.name"),g("newshape.showlegend"),g("newshape.legend"),g("newshape.legendwidth"),g("newshape.legendgroup"),g("newshape.legendgrouptitle.text"),c.coerceFont(g,"newshape.legendgrouptitle.font"),g("newshape.legendrank"),g("newshape.drawdirection"),g("newshape.layer"),g("newshape.fillcolor"),g("newshape.fillrule"),g("newshape.opacity");var w=g("newshape.line.width");if(w){var l=(v||{}).plot_bgcolor||"#FFF";g("newshape.line.color",h.contrast(l)),g("newshape.line.dash")}var T=v.dragmode==="drawline",y=g("newshape.label.text"),S=g("newshape.label.texttemplate");if(y||S){g("newshape.label.textangle");var R=g("newshape.label.textposition",T?"middle":"middle center");g("newshape.label.xanchor"),g("newshape.label.yanchor",u(T,R)),g("newshape.label.padding"),c.coerceFont(g,"newshape.label.font",m.font)}g("activeshape.fillcolor"),g("activeshape.opacity")}}}),Dk=i({"src/components/shapes/calc_autorange.js"(U,$){var h=kr(),c=ji(),u=Mc(),p=qt();$.exports=function(T){var y=T._fullLayout,S=h.filterVisible(y.shapes);if(!(!S.length||!T._fullData.length))for(var R=0;R<S.length;R++){var M=S[R];M._extremes={};var A,C,j=c.getRefType(M.xref),b=c.getRefType(M.yref);M.xref!=="paper"&&j!=="domain"&&(A=c.getFromId(T,M.xref),C=w(A,M,u.paramIsX),C&&(M._extremes[A._id]=c.findExtremes(A,C,v(M)))),M.yref!=="paper"&&b!=="domain"&&(A=c.getFromId(T,M.yref),C=w(A,M,u.paramIsY),C&&(M._extremes[A._id]=c.findExtremes(A,C,m(M))))}};function v(l){return g(l.line.width,l.xsizemode,l.x0,l.x1,l.path,!1)}function m(l){return g(l.line.width,l.ysizemode,l.y0,l.y1,l.path,!0)}function g(l,T,y,S,R,M){var A=l/2,C=M;if(T==="pixel"){var j=R?p.extractPathCoords(R,M?u.paramIsY:u.paramIsX):[y,S],b=h.aggNums(Math.max,null,j),k=h.aggNums(Math.min,null,j),E=k<0?Math.abs(k)+A:A,F=b>0?b+A:A;return{ppad:A,ppadplus:C?E:F,ppadminus:C?F:E}}else return{ppad:A}}function w(l,T,y){var S=l._id.charAt(0)==="x"?"x":"y",R=l.type==="category"||l.type==="multicategory",M,A,C=0,j=0,b=R?l.r2c:l.d2c,k=T[S+"sizemode"]==="scaled";if(k?(M=T[S+"0"],A=T[S+"1"],R&&(C=T[S+"0shift"],j=T[S+"1shift"])):(M=T[S+"anchor"],A=T[S+"anchor"]),M!==void 0)return[b(M)+C,b(A)+j];if(T.path){var E=1/0,F=-1/0,P=T.path.match(u.segmentRE),J,H,Y,Z,z;for(l.type==="date"&&(b=p.decodeDate(b)),J=0;J<P.length;J++)H=P[J],Y=y[H.charAt(0)].drawn,Y!==void 0&&(Z=P[J].substr(1).match(u.paramRE),!(!Z||Z.length<Y)&&(z=b(Z[Y]),z<E&&(E=z),z>F&&(F=z)));if(F>=E)return[E,F]}}}}),Pk=i({"src/components/shapes/index.js"(U,$){var h=_a();$.exports={moduleType:"component",name:"shapes",layoutAttributes:Wy(),supplyLayoutDefaults:Lk(),supplyDrawNewShapeDefaults:Rk(),includeBasePlot:Zf()("shapes"),calcAutorange:Dk(),draw:h.draw,drawOne:h.drawOne}}}),qy=i({"src/components/images/attributes.js"(U,$){var h=ha(),c=Si().templatedArray;Xf(),$.exports=c("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",h.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",h.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})}}),Nk=i({"src/components/images/defaults.js"(U,$){var h=kr(),c=ji(),u=Tn(),p=qy(),v="images";$.exports=function(w,l){var T={name:v,handleItemDefaults:m};u(w,l,T)};function m(g,w,l){function T(k,E){return h.coerce(g,w,p,k,E)}var y=T("source"),S=T("visible",!!y);if(!S)return w;T("layer"),T("xanchor"),T("yanchor"),T("sizex"),T("sizey"),T("sizing"),T("opacity");for(var R={_fullLayout:l},M=["x","y"],A=0;A<2;A++){var C=M[A],j=c.coerceRef(g,w,R,C,"paper",void 0);if(j!=="paper"){var b=c.getFromId(R,j);b._imgIndices.push(w._index)}c.coercePosition(w,R,T,j,C,0)}return w}}}),zk=i({"src/components/images/draw.js"(U,$){var h=d(),c=di(),u=ji(),p=pa(),v=qs();$.exports=function(g){var w=g._fullLayout,l=[],T={},y=[],S,R;for(R=0;R<w.images.length;R++){var M=w.images[R];if(M.visible)if(M.layer==="below"&&M.xref!=="paper"&&M.yref!=="paper"){S=p.ref2id(M.xref)+p.ref2id(M.yref);var A=w._plots[S];if(!A){y.push(M);continue}A.mainplot&&(S=A.mainplot.id),T[S]||(T[S]=[]),T[S].push(M)}else M.layer==="above"?l.push(M):y.push(M)}var C={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function j(Z){var z=h.select(this);if(this._imgSrc!==Z.source)if(z.attr("xmlns",v.svg),!g._context.staticPlot||Z.source&&Z.source.slice(0,5)==="data:")z.attr("xlink:href",Z.source),this._imgSrc=Z.source;else{var q=new Promise((function(X){var Q=new Image;this.img=Q,Q.setAttribute("crossOrigin","anonymous"),Q.onerror=ee,Q.onload=function(){var ne=document.createElement("canvas");ne.width=this.width,ne.height=this.height;var le=ne.getContext("2d",{willReadFrequently:!0});le.drawImage(this,0,0);var W=ne.toDataURL("image/png");z.attr("xlink:href",W),X()},z.on("error",ee),Q.src=Z.source,this._imgSrc=Z.source;function ee(){z.remove(),X()}}).bind(this));g._promises.push(q)}}function b(Z){var z=h.select(this),q=u.getFromId(g,Z.xref),X=u.getFromId(g,Z.yref),Q=u.getRefType(Z.xref)==="domain",ee=u.getRefType(Z.yref)==="domain",ne=w._size,le,W;q!==void 0?le=typeof Z.xref=="string"&&Q?q._length*Z.sizex:Math.abs(q.l2p(Z.sizex)-q.l2p(0)):le=Z.sizex*ne.w,X!==void 0?W=typeof Z.yref=="string"&&ee?X._length*Z.sizey:Math.abs(X.l2p(Z.sizey)-X.l2p(0)):W=Z.sizey*ne.h;var ce=le*C.x[Z.xanchor].offset,de=W*C.y[Z.yanchor].offset,pe=C.x[Z.xanchor].sizing+C.y[Z.yanchor].sizing,he,be;switch(q!==void 0?he=typeof Z.xref=="string"&&Q?q._length*Z.x+q._offset:q.r2p(Z.x)+q._offset:he=Z.x*ne.w+ne.l,he+=ce,X!==void 0?be=typeof Z.yref=="string"&&ee?X._length*(1-Z.y)+X._offset:X.r2p(Z.y)+X._offset:be=ne.h-Z.y*ne.h+ne.t,be+=de,Z.sizing){case"fill":pe+=" slice";break;case"stretch":pe="none";break}z.attr({x:he,y:be,width:le,height:W,preserveAspectRatio:pe,opacity:Z.opacity});var Ee=q&&u.getRefType(Z.xref)!=="domain"?q._id:"",Te=X&&u.getRefType(Z.yref)!=="domain"?X._id:"",He=Ee+Te;c.setClipUrl(z,He?"clip"+w._uid+He:null,g)}function k(Z){return[Z.xref,Z.x,Z.sizex,Z.yref,Z.y,Z.sizey].join("_")}function E(Z,z){return Z._index-z._index}var F=w._imageLowerLayer.selectAll("image").data(y,k),P=w._imageUpperLayer.selectAll("image").data(l,k);F.enter().append("image"),P.enter().append("image"),F.exit().remove(),P.exit().remove(),F.each(function(Z){j.bind(this)(Z),b.bind(this)(Z)}),P.each(function(Z){j.bind(this)(Z),b.bind(this)(Z)}),F.sort(E),P.sort(E);var J=Object.keys(w._plots);for(R=0;R<J.length;R++){S=J[R];var H=w._plots[S];if(H.imagelayer){var Y=H.imagelayer.selectAll("image").data(T[S]||[],k);Y.enter().append("image"),Y.exit().remove(),Y.each(function(Z){j.bind(this)(Z),b.bind(this)(Z)}),Y.sort(E)}}}}}),Fk=i({"src/components/images/convert_coords.js"(U,$){var h=xe(),c=ot();$.exports=function(p,v,m,g){v=v||{};var w=m==="log"&&v.type==="linear",l=m==="linear"&&v.type==="log";if(w||l){for(var T=p._fullLayout.images,y=v._id.charAt(0),S,R,M=0;M<T.length;M++)if(S=T[M],R="images["+M+"].",S[y+"ref"]===v._id){var A=S[y],C=S["size"+y],j=null,b=null;if(w){j=c(A,v.range);var k=C/Math.pow(10,j)/2;b=2*Math.log(k+Math.sqrt(1+k*k))/Math.LN10}else j=Math.pow(10,A),b=j*(Math.pow(10,C/2)-Math.pow(10,-C/2));h(j)?h(b)||(b=null):(j=null,b=null),g(R+y,j),g(R+"size"+y,b)}}}}}),Ik=i({"src/components/images/index.js"(U,$){$.exports={moduleType:"component",name:"images",layoutAttributes:qy(),supplyLayoutDefaults:Nk(),includeBasePlot:Zf()("images"),draw:zk(),convertCoords:Fk()}}}),Em=i({"src/components/updatemenus/constants.js"(U,$){$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}}}),Vy=i({"src/components/updatemenus/attributes.js"(U,$){var h=er(),c=Ft(),u=It().extendFlat,p=Ni().overrideAll,v=oi(),m=Si().templatedArray,g=m("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=p(m("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:g,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:u(v({editType:"arraydraw"}),{}),font:h({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:c.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")}}),Ok=i({"src/components/updatemenus/defaults.js"(U,$){var h=kr(),c=Tn(),u=Vy(),p=Em(),v=p.name,m=u.buttons;$.exports=function(T,y){var S={name:v,handleItemDefaults:g};c(T,y,S)};function g(l,T,y){function S(A,C){return h.coerce(l,T,u,A,C)}var R=c(l,T,{name:"buttons",handleItemDefaults:w}),M=S("visible",R.length>0);M&&(S("active"),S("direction"),S("type"),S("showactive"),S("x"),S("y"),h.noneOrAll(l,T,["x","y"]),S("xanchor"),S("yanchor"),S("pad.t"),S("pad.r"),S("pad.b"),S("pad.l"),h.coerceFont(S,"font",y.font),S("bgcolor",y.paper_bgcolor),S("bordercolor"),S("borderwidth"))}function w(l,T){function y(R,M){return h.coerce(l,T,m,R,M)}var S=y("visible",l.method==="skip"||Array.isArray(l.args));S&&(y("method"),y("args"),y("args2"),y("label"),y("execute"))}}}),Bk=i({"src/components/updatemenus/scrollbox.js"(U,$){$.exports=v;var h=d(),c=pt(),u=di(),p=kr();function v(m,g,w){this.gd=m,this.container=g,this.id=w,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}v.barWidth=2,v.barLength=20,v.barRadius=2,v.barPad=1,v.barColor="#808BA4",v.prototype.enable=function(g,w,l){var T=this.gd._fullLayout,y=T.width,S=T.height;this.position=g;var R=this.position.l,M=this.position.w,A=this.position.t,C=this.position.h,j=this.position.direction,b=j==="down",k=j==="left",E=j==="right",F=j==="up",P=M,J=C,H,Y,Z,z;!b&&!k&&!E&&!F&&(this.position.direction="down",b=!0);var q=b||F;q?(H=R,Y=H+P,b?(Z=A,z=Math.min(Z+J,S),J=z-Z):(z=A+J,Z=Math.max(z-J,0),J=z-Z)):(Z=A,z=Z+J,k?(Y=R+P,H=Math.max(Y-P,0),P=Y-H):(H=R,Y=Math.min(H+P,y),P=Y-H)),this._box={l:H,t:Z,w:P,h:J};var X=M>P,Q=v.barLength+2*v.barPad,ee=v.barWidth+2*v.barPad,ne=R,le=A+C;le+ee>S&&(le=S-ee);var W=this.container.selectAll("rect.scrollbar-horizontal").data(X?[0]:[]);W.exit().on(".drag",null).remove(),W.enter().append("rect").classed("scrollbar-horizontal",!0).call(c.fill,v.barColor),X?(this.hbar=W.attr({rx:v.barRadius,ry:v.barRadius,x:ne,y:le,width:Q,height:ee}),this._hbarXMin=ne+Q/2,this._hbarTranslateMax=P-Q):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var ce=C>J,de=v.barWidth+2*v.barPad,pe=v.barLength+2*v.barPad,he=R+M,be=A;he+de>y&&(he=y-de);var Ee=this.container.selectAll("rect.scrollbar-vertical").data(ce?[0]:[]);Ee.exit().on(".drag",null).remove(),Ee.enter().append("rect").classed("scrollbar-vertical",!0).call(c.fill,v.barColor),ce?(this.vbar=Ee.attr({rx:v.barRadius,ry:v.barRadius,x:he,y:be,width:de,height:pe}),this._vbarYMin=be+pe/2,this._vbarTranslateMax=J-pe):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Te=this.id,He=H-.5,te=ce?Y+de+.5:Y+.5,ae=Z-.5,G=X?z+ee+.5:z+.5,K=T._topdefs.selectAll("#"+Te).data(X||ce?[0]:[]);if(K.exit().remove(),K.enter().append("clipPath").attr("id",Te).append("rect"),X||ce?(this._clipRect=K.select("rect").attr({x:Math.floor(He),y:Math.floor(ae),width:Math.ceil(te)-Math.floor(He),height:Math.ceil(G)-Math.floor(ae)}),this.container.call(u.setClipUrl,Te,this.gd),this.bg.attr({x:R,y:A,width:M,height:C})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),X||ce){var V=h.behavior.drag().on("dragstart",function(){h.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(V);var re=h.behavior.drag().on("dragstart",function(){h.event.sourceEvent.preventDefault(),h.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));X&&this.hbar.on(".drag",null).call(re),ce&&this.vbar.on(".drag",null).call(re)}this.setTranslate(w,l)},v.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},v.prototype._onBoxDrag=function(){var g=this.translateX,w=this.translateY;this.hbar&&(g-=h.event.dx),this.vbar&&(w-=h.event.dy),this.setTranslate(g,w)},v.prototype._onBoxWheel=function(){var g=this.translateX,w=this.translateY;this.hbar&&(g+=h.event.deltaY),this.vbar&&(w+=h.event.deltaY),this.setTranslate(g,w)},v.prototype._onBarDrag=function(){var g=this.translateX,w=this.translateY;if(this.hbar){var l=g+this._hbarXMin,T=l+this._hbarTranslateMax,y=p.constrain(h.event.x,l,T),S=(y-l)/(T-l),R=this.position.w-this._box.w;g=S*R}if(this.vbar){var M=w+this._vbarYMin,A=M+this._vbarTranslateMax,C=p.constrain(h.event.y,M,A),j=(C-M)/(A-M),b=this.position.h-this._box.h;w=j*b}this.setTranslate(g,w)},v.prototype.setTranslate=function(g,w){var l=this.position.w-this._box.w,T=this.position.h-this._box.h;if(g=p.constrain(g||0,0,l),w=p.constrain(w||0,0,T),this.translateX=g,this.translateY=w,this.container.call(u.setTranslate,this._box.l-this.position.l-g,this._box.t-this.position.t-w),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+g-.5),y:Math.floor(this.position.t+w-.5)}),this.hbar){var y=g/l;this.hbar.call(u.setTranslate,g+y*this._hbarTranslateMax,w)}if(this.vbar){var S=w/T;this.vbar.call(u.setTranslate,g,w+S*this._vbarTranslateMax)}}}}),Hk=i({"src/components/updatemenus/draw.js"(U,$){var h=d(),c=Xi(),u=pt(),p=di(),v=kr(),m=Ra(),g=Si().arrayEditor,w=La().LINE_SPACING,l=Em(),T=Bk();$.exports=function(Q){var ee=Q._fullLayout,ne=v.filterVisible(ee[l.name]);function le(Te){c.autoMargin(Q,Z(Te))}var W=ee._menulayer.selectAll("g."+l.containerClassName).data(ne.length>0?[0]:[]);if(W.enter().append("g").classed(l.containerClassName,!0).style("cursor","pointer"),W.exit().each(function(){h.select(this).selectAll("g."+l.headerGroupClassName).each(le)}).remove(),ne.length!==0){var ce=W.selectAll("g."+l.headerGroupClassName).data(ne,y);ce.enter().append("g").classed(l.headerGroupClassName,!0);for(var de=v.ensureSingle(W,"g",l.dropdownButtonGroupClassName,function(Te){Te.style("pointer-events","all")}),pe=0;pe<ne.length;pe++){var he=ne[pe];Y(Q,he)}var be="updatemenus"+ee._uid,Ee=new T(Q,de,be);ce.enter().size()&&(de.node().parentNode.appendChild(de.node()),de.call(q)),ce.exit().each(function(Te){de.call(q),le(Te)}).remove(),ce.each(function(Te){var He=h.select(this),te=Te.type==="dropdown"?de:null;c.manageCommandObserver(Q,Te,Te.buttons,function(ae){M(Q,Te,Te.buttons[ae.index],He,te,Ee,ae.index,!0)}),Te.type==="dropdown"?(A(Q,He,de,Ee,Te),R(de,Te)&&C(Q,He,de,Ee,Te)):C(Q,He,null,null,Te)})}};function y(X){return X._index}function S(X){return+X.attr(l.menuIndexAttrName)==-1}function R(X,Q){return+X.attr(l.menuIndexAttrName)===Q._index}function M(X,Q,ee,ne,le,W,ce,de){Q.active=ce,g(X.layout,l.name,Q).applyUpdate("active",ce),Q.type==="buttons"?C(X,ne,null,null,Q):Q.type==="dropdown"&&(le.attr(l.menuIndexAttrName,"-1"),A(X,ne,le,W,Q),de||C(X,ne,le,W,Q))}function A(X,Q,ee,ne,le){var W=v.ensureSingle(Q,"g",l.headerClassName,function(Te){Te.style("pointer-events","all")}),ce=le._dims,de=le.active,pe=le.buttons[de]||l.blankHeaderOpts,he={y:le.pad.t,yPad:0,x:le.pad.l,xPad:0,index:0},be={width:ce.headerWidth,height:ce.headerHeight};W.call(k,le,pe,X).call(z,le,he,be);var Ee=v.ensureSingle(Q,"text",l.headerArrowClassName,function(Te){Te.attr("text-anchor","end").call(p.font,le.font).text(l.arrowSymbol[le.direction])});Ee.attr({x:ce.headerWidth-l.arrowOffsetX+le.pad.l,y:ce.headerHeight/2+l.textOffsetY+le.pad.t}),W.on("click",function(){ee.call(q,String(R(ee,le)?-1:le._index)),C(X,Q,ee,ne,le)}),W.on("mouseover",function(){W.call(J)}),W.on("mouseout",function(){W.call(H,le)}),p.setTranslate(Q,ce.lx,ce.ly)}function C(X,Q,ee,ne,le){ee||(ee=Q,ee.attr("pointer-events","all"));var W=!S(ee)||le.type==="buttons"?le.buttons:[],ce=le.type==="dropdown"?l.dropdownButtonClassName:l.buttonClassName,de=ee.selectAll("g."+ce).data(v.filterVisible(W)),pe=de.enter().append("g").classed(ce,!0),he=de.exit();le.type==="dropdown"?(pe.attr("opacity","0").transition().attr("opacity","1"),he.transition().attr("opacity","0").remove()):he.remove();var be=0,Ee=0,Te=le._dims,He=["up","down"].indexOf(le.direction)!==-1;le.type==="dropdown"&&(He?Ee=Te.headerHeight+l.gapButtonHeader:be=Te.headerWidth+l.gapButtonHeader),le.type==="dropdown"&&le.direction==="up"&&(Ee=-l.gapButtonHeader+l.gapButton-Te.openHeight),le.type==="dropdown"&&le.direction==="left"&&(be=-l.gapButtonHeader+l.gapButton-Te.openWidth);var te={x:Te.lx+be+le.pad.l,y:Te.ly+Ee+le.pad.t,yPad:l.gapButton,xPad:l.gapButton,index:0},ae={l:te.x+le.borderwidth,t:te.y+le.borderwidth};de.each(function(G,K){var V=h.select(this);V.call(k,le,G,X).call(z,le,te),V.on("click",function(){h.event.defaultPrevented||(G.execute&&(G.args2&&le.active===K?(M(X,le,G,Q,ee,ne,-1),c.executeAPICommand(X,G.method,G.args2)):(M(X,le,G,Q,ee,ne,K),c.executeAPICommand(X,G.method,G.args))),X.emit("plotly_buttonclicked",{menu:le,button:G,active:le.active}))}),V.on("mouseover",function(){V.call(J)}),V.on("mouseout",function(){V.call(H,le),de.call(P,le)})}),de.call(P,le),He?(ae.w=Math.max(Te.openWidth,Te.headerWidth),ae.h=te.y-ae.t):(ae.w=te.x-ae.l,ae.h=Math.max(Te.openHeight,Te.headerHeight)),ae.direction=le.direction,ne&&(de.size()?j(X,Q,ee,ne,le,ae):b(ne))}function j(X,Q,ee,ne,le,W){var ce=le.direction,de=ce==="up"||ce==="down",pe=le._dims,he=le.active,be,Ee,Te;if(de)for(Ee=0,Te=0;Te<he;Te++)Ee+=pe.heights[Te]+l.gapButton;else for(be=0,Te=0;Te<he;Te++)be+=pe.widths[Te]+l.gapButton;ne.enable(W,be,Ee),ne.hbar&&ne.hbar.attr("opacity","0").transition().attr("opacity","1"),ne.vbar&&ne.vbar.attr("opacity","0").transition().attr("opacity","1")}function b(X){var Q=!!X.hbar,ee=!!X.vbar;Q&&X.hbar.transition().attr("opacity","0").each("end",function(){Q=!1,ee||X.disable()}),ee&&X.vbar.transition().attr("opacity","0").each("end",function(){ee=!1,Q||X.disable()})}function k(X,Q,ee,ne){X.call(E,Q).call(F,Q,ee,ne)}function E(X,Q){var ee=v.ensureSingle(X,"rect",l.itemRectClassName,function(ne){ne.attr({rx:l.rx,ry:l.ry,"shape-rendering":"crispEdges"})});ee.call(u.stroke,Q.bordercolor).call(u.fill,Q.bgcolor).style("stroke-width",Q.borderwidth+"px")}function F(X,Q,ee,ne){var le=v.ensureSingle(X,"text",l.itemTextClassName,function(de){de.attr({"text-anchor":"start","data-notex":1})}),W=ee.label,ce=ne._fullLayout._meta;ce&&(W=v.templateString(W,ce)),le.call(p.font,Q.font).text(W).call(m.convertToTspans,ne)}function P(X,Q){var ee=Q.active;X.each(function(ne,le){var W=h.select(this);le===ee&&Q.showactive&&W.select("rect."+l.itemRectClassName).call(u.fill,l.activeColor)})}function J(X){X.select("rect."+l.itemRectClassName).call(u.fill,l.hoverColor)}function H(X,Q){X.select("rect."+l.itemRectClassName).call(u.fill,Q.bgcolor)}function Y(X,Q){var ee=Q._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},ne=p.tester.selectAll("g."+l.dropdownButtonClassName).data(v.filterVisible(Q.buttons));ne.enter().append("g").classed(l.dropdownButtonClassName,!0);var le=["up","down"].indexOf(Q.direction)!==-1;ne.each(function(be,Ee){var Te=h.select(this);Te.call(k,Q,be,X);var He=Te.select("."+l.itemTextClassName),te=He.node()&&p.bBox(He.node()).width,ae=Math.max(te+l.textPadX,l.minWidth),G=Q.font.size*w,K=m.lineCount(He),V=Math.max(G*K,l.minHeight)+l.textOffsetY;V=Math.ceil(V),ae=Math.ceil(ae),ee.widths[Ee]=ae,ee.heights[Ee]=V,ee.height1=Math.max(ee.height1,V),ee.width1=Math.max(ee.width1,ae),le?(ee.totalWidth=Math.max(ee.totalWidth,ae),ee.openWidth=ee.totalWidth,ee.totalHeight+=V+l.gapButton,ee.openHeight+=V+l.gapButton):(ee.totalWidth+=ae+l.gapButton,ee.openWidth+=ae+l.gapButton,ee.totalHeight=Math.max(ee.totalHeight,V),ee.openHeight=ee.totalHeight)}),le?ee.totalHeight-=l.gapButton:ee.totalWidth-=l.gapButton,ee.headerWidth=ee.width1+l.arrowPadX,ee.headerHeight=ee.height1,Q.type==="dropdown"&&(le?(ee.width1+=l.arrowPadX,ee.totalHeight=ee.height1):ee.totalWidth=ee.width1,ee.totalWidth+=l.arrowPadX),ne.remove();var W=ee.totalWidth+Q.pad.l+Q.pad.r,ce=ee.totalHeight+Q.pad.t+Q.pad.b,de=X._fullLayout._size;ee.lx=de.l+de.w*Q.x,ee.ly=de.t+de.h*(1-Q.y);var pe="left";v.isRightAnchor(Q)&&(ee.lx-=W,pe="right"),v.isCenterAnchor(Q)&&(ee.lx-=W/2,pe="center");var he="top";v.isBottomAnchor(Q)&&(ee.ly-=ce,he="bottom"),v.isMiddleAnchor(Q)&&(ee.ly-=ce/2,he="middle"),ee.totalWidth=Math.ceil(ee.totalWidth),ee.totalHeight=Math.ceil(ee.totalHeight),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly),c.autoMargin(X,Z(Q),{x:Q.x,y:Q.y,l:W*({right:1,center:.5}[pe]||0),r:W*({left:1,center:.5}[pe]||0),b:ce*({top:1,middle:.5}[he]||0),t:ce*({bottom:1,middle:.5}[he]||0)})}function Z(X){return l.autoMarginIdRoot+X._index}function z(X,Q,ee,ne){ne=ne||{};var le=X.select("."+l.itemRectClassName),W=X.select("."+l.itemTextClassName),ce=Q.borderwidth,de=ee.index,pe=Q._dims;p.setTranslate(X,ce+ee.x,ce+ee.y);var he=["up","down"].indexOf(Q.direction)!==-1,be=ne.height||(he?pe.heights[de]:pe.height1);le.attr({x:0,y:0,width:ne.width||(he?pe.width1:pe.widths[de]),height:be});var Ee=Q.font.size*w,Te=m.lineCount(W),He=(Te-1)*Ee/2;m.positionText(W,l.textOffsetX,be/2-He+l.textOffsetY),he?ee.y+=pe.heights[de]+ee.yPad:ee.x+=pe.widths[de]+ee.xPad,ee.index++}function q(X,Q){X.attr(l.menuIndexAttrName,Q||"-1").selectAll("g."+l.dropdownButtonClassName).remove()}}}),Wk=i({"src/components/updatemenus/index.js"(U,$){var h=Em();$.exports={moduleType:"component",name:h.name,layoutAttributes:Vy(),supplyLayoutDefaults:Ok(),draw:Hk()}}}),Qf=i({"src/components/sliders/constants.js"(U,$){$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}}}),Uy=i({"src/components/sliders/attributes.js"(U,$){var h=er(),c=oi(),u=It().extendDeepAll,p=Ni().overrideAll,v=Ca(),m=Si().templatedArray,g=Qf(),w=m("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=p(m("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:w,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:u(c({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:v.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:h({})},font:h({}),activebgcolor:{valType:"color",dflt:g.gripBgActiveColor},bgcolor:{valType:"color",dflt:g.railBgColor},bordercolor:{valType:"color",dflt:g.railBorderColor},borderwidth:{valType:"number",min:0,dflt:g.railBorderWidth},ticklen:{valType:"number",min:0,dflt:g.tickLength},tickcolor:{valType:"color",dflt:g.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:g.minorTickLength}}),"arraydraw","from-root")}}),qk=i({"src/components/sliders/defaults.js"(U,$){var h=kr(),c=Tn(),u=Uy(),p=Qf(),v=p.name,m=u.steps;$.exports=function(T,y){c(T,y,{name:v,handleItemDefaults:g})};function g(l,T,y){function S(E,F){return h.coerce(l,T,u,E,F)}for(var R=c(l,T,{name:"steps",handleItemDefaults:w}),M=0,A=0;A<R.length;A++)R[A].visible&&M++;var C;if(M<2?C=T.visible=!1:C=S("visible"),!!C){T._stepCount=M;var j=T._visibleSteps=h.filterVisible(R),b=S("active");(R[b]||{}).visible||(T.active=j[0]._index),S("x"),S("y"),h.noneOrAll(l,T,["x","y"]),S("xanchor"),S("yanchor"),S("len"),S("lenmode"),S("pad.t"),S("pad.r"),S("pad.b"),S("pad.l"),h.coerceFont(S,"font",y.font);var k=S("currentvalue.visible");k&&(S("currentvalue.xanchor"),S("currentvalue.prefix"),S("currentvalue.suffix"),S("currentvalue.offset"),h.coerceFont(S,"currentvalue.font",T.font)),S("transition.duration"),S("transition.easing"),S("bgcolor"),S("activebgcolor"),S("bordercolor"),S("borderwidth"),S("ticklen"),S("tickwidth"),S("tickcolor"),S("minorticklen")}}function w(l,T){function y(M,A){return h.coerce(l,T,m,M,A)}var S;if(l.method!=="skip"&&!Array.isArray(l.args)?S=T.visible=!1:S=y("visible"),S){y("method"),y("args");var R=y("label","step-"+T._index);y("value",R),y("execute")}}}}),Vk=i({"src/components/sliders/draw.js"(U,$){var h=d(),c=Xi(),u=pt(),p=di(),v=kr(),m=v.strTranslate,g=Ra(),w=Si().arrayEditor,l=Qf(),T=La(),y=T.LINE_SPACING,S=T.FROM_TL,R=T.FROM_BR;$.exports=function(W){var ce=W._context.staticPlot,de=W._fullLayout,pe=A(de,W),he=de._infolayer.selectAll("g."+l.containerClassName).data(pe.length>0?[0]:[]);he.enter().append("g").classed(l.containerClassName,!0).style("cursor",ce?null:"ew-resize");function be(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),c.autoMargin(W,M(te))}if(he.exit().each(function(){h.select(this).selectAll("g."+l.groupClassName).each(be)}).remove(),pe.length!==0){var Ee=he.selectAll("g."+l.groupClassName).data(pe,C);Ee.enter().append("g").classed(l.groupClassName,!0),Ee.exit().each(be).remove();for(var Te=0;Te<pe.length;Te++){var He=pe[Te];j(W,He)}Ee.each(function(te){var ae=h.select(this);z(te),c.manageCommandObserver(W,te,te._visibleSteps,function(G){var K=ae.data()[0];K.active!==G.index&&(K._dragging||H(W,ae,K,G.index,!1,!0))}),b(W,h.select(this),te)})}};function M(le){return l.autoMarginIdRoot+le._index}function A(le,W){for(var ce=le[l.name],de=[],pe=0;pe<ce.length;pe++){var he=ce[pe];he.visible&&(he._gd=W,de.push(he))}return de}function C(le){return le._index}function j(le,W){var ce=p.tester.selectAll("g."+l.labelGroupClass).data(W._visibleSteps);ce.enter().append("g").classed(l.labelGroupClass,!0);var de=0,pe=0;ce.each(function(V){var re=h.select(this),D=F(re,{step:V},W),B=D.node();if(B){var oe=p.bBox(B);pe=Math.max(pe,oe.height),de=Math.max(de,oe.width)}}),ce.remove();var he=W._dims={};he.inputAreaWidth=Math.max(l.railWidth,l.gripHeight);var be=le._fullLayout._size;he.lx=be.l+be.w*W.x,he.ly=be.t+be.h*(1-W.y),W.lenmode==="fraction"?he.outerLength=Math.round(be.w*W.len):he.outerLength=W.len,he.inputAreaStart=0,he.inputAreaLength=Math.round(he.outerLength-W.pad.l-W.pad.r);var Ee=he.inputAreaLength-2*l.stepInset,Te=Ee/(W._stepCount-1),He=de+l.labelPadding;if(he.labelStride=Math.max(1,Math.ceil(He/Te)),he.labelHeight=pe,he.currentValueMaxWidth=0,he.currentValueHeight=0,he.currentValueTotalHeight=0,he.currentValueMaxLines=1,W.currentvalue.visible){var te=p.tester.append("g");ce.each(function(V){var re=k(te,W,V.label),D=re.node()&&p.bBox(re.node())||{width:0,height:0},B=g.lineCount(re);he.currentValueMaxWidth=Math.max(he.currentValueMaxWidth,Math.ceil(D.width)),he.currentValueHeight=Math.max(he.currentValueHeight,Math.ceil(D.height)),he.currentValueMaxLines=Math.max(he.currentValueMaxLines,B)}),he.currentValueTotalHeight=he.currentValueHeight+W.currentvalue.offset,te.remove()}he.height=he.currentValueTotalHeight+l.tickOffset+W.ticklen+l.labelOffset+he.labelHeight+W.pad.t+W.pad.b;var ae="left";v.isRightAnchor(W)&&(he.lx-=he.outerLength,ae="right"),v.isCenterAnchor(W)&&(he.lx-=he.outerLength/2,ae="center");var G="top";v.isBottomAnchor(W)&&(he.ly-=he.height,G="bottom"),v.isMiddleAnchor(W)&&(he.ly-=he.height/2,G="middle"),he.outerLength=Math.ceil(he.outerLength),he.height=Math.ceil(he.height),he.lx=Math.round(he.lx),he.ly=Math.round(he.ly);var K={y:W.y,b:he.height*R[G],t:he.height*S[G]};W.lenmode==="fraction"?(K.l=0,K.xl=W.x-W.len*S[ae],K.r=0,K.xr=W.x+W.len*R[ae]):(K.x=W.x,K.l=he.outerLength*S[ae],K.r=he.outerLength*R[ae]),c.autoMargin(le,M(W),K)}function b(le,W,ce){(ce.steps[ce.active]||{}).visible||(ce.active=ce._visibleSteps[0]._index),W.call(k,ce).call(ne,ce).call(P,ce).call(Z,ce).call(ee,le,ce).call(E,le,ce);var de=ce._dims;p.setTranslate(W,de.lx+ce.pad.l,de.ly+ce.pad.t),W.call(q,ce,!1),W.call(k,ce)}function k(le,W,ce){if(W.currentvalue.visible){var de=W._dims,pe,he;switch(W.currentvalue.xanchor){case"right":pe=de.inputAreaLength-l.currentValueInset-de.currentValueMaxWidth,he="left";break;case"center":pe=de.inputAreaLength*.5,he="middle";break;default:pe=l.currentValueInset,he="left"}var be=v.ensureSingle(le,"text",l.labelClass,function(G){G.attr({"text-anchor":he,"data-notex":1})}),Ee=W.currentvalue.prefix?W.currentvalue.prefix:"";if(typeof ce=="string")Ee+=ce;else{var Te=W.steps[W.active].label,He=W._gd._fullLayout._meta;He&&(Te=v.templateString(Te,He)),Ee+=Te}W.currentvalue.suffix&&(Ee+=W.currentvalue.suffix),be.call(p.font,W.currentvalue.font).text(Ee).call(g.convertToTspans,W._gd);var te=g.lineCount(be),ae=(de.currentValueMaxLines+1-te)*W.currentvalue.font.size*y;return g.positionText(be,pe,ae),be}}function E(le,W,ce){var de=v.ensureSingle(le,"rect",l.gripRectClass,function(pe){pe.call(Y,W,le,ce).style("pointer-events","all")});de.attr({width:l.gripWidth,height:l.gripHeight,rx:l.gripRadius,ry:l.gripRadius}).call(u.stroke,ce.bordercolor).call(u.fill,ce.bgcolor).style("stroke-width",ce.borderwidth+"px")}function F(le,W,ce){var de=v.ensureSingle(le,"text",l.labelClass,function(be){be.attr({"text-anchor":"middle","data-notex":1})}),pe=W.step.label,he=ce._gd._fullLayout._meta;return he&&(pe=v.templateString(pe,he)),de.call(p.font,ce.font).text(pe).call(g.convertToTspans,ce._gd),de}function P(le,W){var ce=v.ensureSingle(le,"g",l.labelsClass),de=W._dims,pe=ce.selectAll("g."+l.labelGroupClass).data(de.labelSteps);pe.enter().append("g").classed(l.labelGroupClass,!0),pe.exit().remove(),pe.each(function(he){var be=h.select(this);be.call(F,he,W),p.setTranslate(be,X(W,he.fraction),l.tickOffset+W.ticklen+W.font.size*y+l.labelOffset+de.currentValueTotalHeight)})}function J(le,W,ce,de,pe){var he=Math.round(de*(ce._stepCount-1)),be=ce._visibleSteps[he]._index;be!==ce.active&&H(le,W,ce,be,!0,pe)}function H(le,W,ce,de,pe,he){var be=ce.active;ce.active=de,w(le.layout,l.name,ce).applyUpdate("active",de);var Ee=ce.steps[ce.active];W.call(q,ce,he),W.call(k,ce),le.emit("plotly_sliderchange",{slider:ce,step:ce.steps[ce.active],interaction:pe,previousActive:be}),Ee&&Ee.method&&pe&&(W._nextMethod?(W._nextMethod.step=Ee,W._nextMethod.doCallback=pe,W._nextMethod.doTransition=he):(W._nextMethod={step:Ee,doCallback:pe,doTransition:he},W._nextMethodRaf=window.requestAnimationFrame(function(){var Te=W._nextMethod.step;Te.method&&(Te.execute&&c.executeAPICommand(le,Te.method,Te.args),W._nextMethod=null,W._nextMethodRaf=null)})))}function Y(le,W,ce){if(W._context.staticPlot)return;var de=ce.node(),pe=h.select(W);function he(){return ce.data()[0]}function be(){var Ee=he();W.emit("plotly_sliderstart",{slider:Ee});var Te=ce.select("."+l.gripRectClass);h.event.stopPropagation(),h.event.preventDefault(),Te.call(u.fill,Ee.activebgcolor);var He=Q(Ee,h.mouse(de)[0]);J(W,ce,Ee,He,!0),Ee._dragging=!0;function te(){var G=he(),K=Q(G,h.mouse(de)[0]);J(W,ce,G,K,!1)}pe.on("mousemove",te),pe.on("touchmove",te);function ae(){var G=he();G._dragging=!1,Te.call(u.fill,G.bgcolor),pe.on("mouseup",null),pe.on("mousemove",null),pe.on("touchend",null),pe.on("touchmove",null),W.emit("plotly_sliderend",{slider:G,step:G.steps[G.active]})}pe.on("mouseup",ae),pe.on("touchend",ae)}le.on("mousedown",be),le.on("touchstart",be)}function Z(le,W){var ce=le.selectAll("rect."+l.tickRectClass).data(W._visibleSteps),de=W._dims;ce.enter().append("rect").classed(l.tickRectClass,!0),ce.exit().remove(),ce.attr({width:W.tickwidth+"px","shape-rendering":"crispEdges"}),ce.each(function(pe,he){var be=he%de.labelStride===0,Ee=h.select(this);Ee.attr({height:be?W.ticklen:W.minorticklen}).call(u.fill,W.tickcolor),p.setTranslate(Ee,X(W,he/(W._stepCount-1))-.5*W.tickwidth,(be?l.tickOffset:l.minorTickOffset)+de.currentValueTotalHeight)})}function z(le){var W=le._dims;W.labelSteps=[];for(var ce=le._stepCount,de=0;de<ce;de+=W.labelStride)W.labelSteps.push({fraction:de/(ce-1),step:le._visibleSteps[de]})}function q(le,W,ce){for(var de=le.select("rect."+l.gripRectClass),pe=0,he=0;he<W._stepCount;he++)if(W._visibleSteps[he]._index===W.active){pe=he;break}var be=X(W,pe/(W._stepCount-1));if(!W._invokingCommand){var Ee=de;ce&&W.transition.duration>0&&(Ee=Ee.transition().duration(W.transition.duration).ease(W.transition.easing)),Ee.attr("transform",m(be-l.gripWidth*.5,W._dims.currentValueTotalHeight))}}function X(le,W){var ce=le._dims;return ce.inputAreaStart+l.stepInset+(ce.inputAreaLength-2*l.stepInset)*Math.min(1,Math.max(0,W))}function Q(le,W){var ce=le._dims;return Math.min(1,Math.max(0,(W-l.stepInset-ce.inputAreaStart)/(ce.inputAreaLength-2*l.stepInset-2*ce.inputAreaStart)))}function ee(le,W,ce){var de=ce._dims,pe=v.ensureSingle(le,"rect",l.railTouchRectClass,function(he){he.call(Y,W,le,ce).style("pointer-events","all")});pe.attr({width:de.inputAreaLength,height:Math.max(de.inputAreaWidth,l.tickOffset+ce.ticklen+de.labelHeight)}).call(u.fill,ce.bgcolor).attr("opacity",0),p.setTranslate(pe,0,de.currentValueTotalHeight)}function ne(le,W){var ce=W._dims,de=ce.inputAreaLength-l.railInset*2,pe=v.ensureSingle(le,"rect",l.railRectClass);pe.attr({width:de,height:l.railWidth,rx:l.railRadius,ry:l.railRadius,"shape-rendering":"crispEdges"}).call(u.stroke,W.bordercolor).call(u.fill,W.bgcolor).style("stroke-width",W.borderwidth+"px"),p.setTranslate(pe,l.railInset,(ce.inputAreaWidth-l.railWidth)*.5+ce.currentValueTotalHeight)}}}),Uk=i({"src/components/sliders/index.js"(U,$){var h=Qf();$.exports={moduleType:"component",name:h.name,layoutAttributes:Uy(),supplyLayoutDefaults:qk(),draw:Vk()}}}),Lm=i({"src/components/rangeslider/attributes.js"(U,$){var h=Ft();$.exports={bgcolor:{valType:"color",dflt:h.background,editType:"plot"},bordercolor:{valType:"color",dflt:h.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}}}),$y=i({"src/components/rangeslider/oppaxis_attributes.js"(U,$){$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}}}),Rm=i({"src/components/rangeslider/constants.js"(U,$){$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}}}),$k=i({"src/components/rangeslider/helpers.js"(U){var $=pa(),h=Ra(),c=Rm(),u=La().LINE_SPACING,p=c.name;function v(m){var g=m&&m[p];return g&&g.visible}U.isVisible=v,U.makeData=function(m){for(var g=$.list({_fullLayout:m},"x",!0),w=m.margin,l=[],T=0;T<g.length;T++){var y=g[T];if(v(y)){l.push(y);var S=y[p];S._id=p+y._id,S._height=(m.height-w.b-w.t)*S.thickness,S._offsetShift=Math.floor(S.borderwidth/2)}}m._rangeSliderData=l},U.autoMarginOpts=function(m,g){var w=m._fullLayout,l=g[p],T=g._id.charAt(0),y=0,S=0;if(g.side==="bottom"&&(y=g._depth,g.title.text!==w._dfltTitle[T])){S=1.5*g.title.font.size+10+l._offsetShift;var R=(g.title.text.match(h.BR_TAG_ALL)||[]).length;S+=R*g.title.font.size*u}return{x:0,y:g._counterDomainMin,l:0,r:0,t:0,b:l._height+y+Math.max(w.margin.b,S),pad:c.extraPad+l._offsetShift*2}}}}),Yk=i({"src/components/rangeslider/defaults.js"(U,$){var h=kr(),c=Si(),u=pa(),p=Lm(),v=$y();$.exports=function(g,w,l){var T=g[l],y=w[l];if(!(T.rangeslider||w._requestRangeslider[y._id]))return;h.isPlainObject(T.rangeslider)||(T.rangeslider={});var S=T.rangeslider,R=c.newContainer(y,"rangeslider");function M(z,q){return h.coerce(S,R,p,z,q)}var A,C;function j(z,q){return h.coerce(A,C,v,z,q)}var b=M("visible");if(b){M("bgcolor",w.plot_bgcolor),M("bordercolor"),M("borderwidth"),M("thickness"),M("autorange",!y.isValidRange(S.range)),M("range");var k=w._subplots;if(k)for(var E=k.cartesian.filter(function(z){return z.substr(0,z.indexOf("y"))===u.name2id(l)}).map(function(z){return z.substr(z.indexOf("y"),z.length)}),F=h.simpleMap(E,u.id2name),P=0;P<F.length;P++){var J=F[P];A=S[J]||{},C=c.newContainer(R,J,"yaxis");var H=w[J],Y;A.range&&H.isValidRange(A.range)&&(Y="fixed");var Z=j("rangemode",Y);Z!=="match"&&j("range",H.range.slice())}R._input=S}}}}),Gk=i({"src/components/rangeslider/calc_autorange.js"(U,$){var h=pa().list,c=jo().getAutoRange,u=Rm();$.exports=function(v){for(var m=h(v,"x",!0),g=0;g<m.length;g++){var w=m[g],l=w[u.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=c(v,w))}}}}),Xk=i({"src/components/rangeslider/draw.js"(U,$){var h=d(),c=mn(),u=Xi(),p=kr(),v=p.strTranslate,m=di(),g=pt(),w=ol(),l=Am(),T=pa(),y=Wa(),S=ho(),R=Rm();$.exports=function(Y){for(var Z=Y._fullLayout,z=Z._rangeSliderData,q=0;q<z.length;q++){var X=z[q][R.name];X._clipId=X._id+"-"+Z._uid}function Q(ne){return ne._name}var ee=Z._infolayer.selectAll("g."+R.containerClassName).data(z,Q);ee.exit().each(function(ne){var le=ne[R.name];Z._topdefs.select("#"+le._clipId).remove()}).remove(),z.length!==0&&(ee.enter().append("g").classed(R.containerClassName,!0).attr("pointer-events","all"),ee.each(function(ne){var le=h.select(this),W=ne[R.name],ce=Z[T.id2name(ne.anchor)],de=W[T.id2name(ne.anchor)];if(W.range){var pe=p.simpleMap(W.range,ne.r2l),he=p.simpleMap(ne.range,ne.r2l),be;he[0]<he[1]?be=[Math.min(pe[0],he[0]),Math.max(pe[1],he[1])]:be=[Math.max(pe[0],he[0]),Math.min(pe[1],he[1])],W.range=W._input.range=p.simpleMap(be,ne.l2r)}ne.cleanRange("rangeslider.range");var Ee=Z._size,Te=ne.domain;W._width=Ee.w*(Te[1]-Te[0]);var He=Math.round(Ee.l+Ee.w*Te[0]),te=Math.round(Ee.t+Ee.h*(1-ne._counterDomainMin)+(ne.side==="bottom"?ne._depth:0)+W._offsetShift+R.extraPad);le.attr("transform",v(He,te)),W._rl=p.simpleMap(W.range,ne.r2l);var ae=W._rl[0],G=W._rl[1],K=G-ae;if(W.p2d=function(De){return De/W._width*K+ae},W.d2p=function(De){return(De-ae)/K*W._width},ne.rangebreaks){var V=ne.locateBreaks(ae,G);if(V.length){var re,D,B=0;for(re=0;re<V.length;re++)D=V[re],B+=D.max-D.min;var oe=W._width/(G-ae-B),ie=[-oe*ae];for(re=0;re<V.length;re++)D=V[re],ie.push(ie[ie.length-1]-oe*(D.max-D.min));for(W.d2p=function(De){for(var Ge=ie[0],Je=0;Je<V.length;Je++){var yt=V[Je];if(De>=yt.max)Ge=ie[Je+1];else if(De<yt.min)break}return Ge+oe*De},re=0;re<V.length;re++)D=V[re],D.pmin=W.d2p(D.min),D.pmax=W.d2p(D.max);W.p2d=function(De){for(var Ge=ie[0],Je=0;Je<V.length;Je++){var yt=V[Je];if(De>=yt.pmax)Ge=ie[Je+1];else if(De<yt.pmin)break}return(De-Ge)/oe}}}if(de.rangemode!=="match"){var ge=ce.r2l(de.range[0]),_e=ce.r2l(de.range[1]),Se=_e-ge;W.d2pOppAxis=function(De){return(De-ge)/Se*W._height}}le.call(b,Y,ne,W).call(k,Y,ne,W).call(E,Y,ne,W).call(P,Y,ne,W,de).call(J,Y,ne,W).call(H,Y,ne,W),A(le,Y,ne,W),j(le,Y,ne,W,ce,de),ne.side==="bottom"&&w.draw(Y,ne._id+"title",{propContainer:ne,propName:ne._name+".title",placeholder:Z._dfltTitle.x,attributes:{x:ne._offset+ne._length/2,y:te+W._height+W._offsetShift+10+1.5*ne.title.font.size,"text-anchor":"middle"}})}))};function M(Y){return typeof Y.clientX=="number"?Y.clientX:Y.touches&&Y.touches.length>0?Y.touches[0].clientX:0}function A(Y,Z,z,q){if(Z._context.staticPlot)return;var X=Y.select("rect."+R.slideBoxClassName).node(),Q=Y.select("rect."+R.grabAreaMinClassName).node(),ee=Y.select("rect."+R.grabAreaMaxClassName).node();function ne(){var le=h.event,W=le.target,ce=M(le),de=ce-Y.node().getBoundingClientRect().left,pe=q.d2p(z._rl[0]),he=q.d2p(z._rl[1]),be=y.coverSlip();this.addEventListener("touchmove",Ee),this.addEventListener("touchend",Te),be.addEventListener("mousemove",Ee),be.addEventListener("mouseup",Te);function Ee(He){var te=M(He),ae=+te-ce,G,K,V;switch(W){case X:if(V="ew-resize",pe+ae>z._length||he+ae<0)return;G=pe+ae,K=he+ae;break;case Q:if(V="col-resize",pe+ae>z._length)return;G=pe+ae,K=he;break;case ee:if(V="col-resize",he+ae<0)return;G=pe,K=he+ae;break;default:V="ew-resize",G=de,K=de+ae;break}if(K<G){var re=K;K=G,G=re}q._pixelMin=G,q._pixelMax=K,S(h.select(be),V),C(Y,Z,z,q)}function Te(){be.removeEventListener("mousemove",Ee),be.removeEventListener("mouseup",Te),this.removeEventListener("touchmove",Ee),this.removeEventListener("touchend",Te),p.removeElement(be)}}Y.on("mousedown",ne),Y.on("touchstart",ne)}function C(Y,Z,z,q){function X(ne){return z.l2r(p.constrain(ne,q._rl[0],q._rl[1]))}var Q=X(q.p2d(q._pixelMin)),ee=X(q.p2d(q._pixelMax));window.requestAnimationFrame(function(){c.call("_guiRelayout",Z,z._name+".range",[Q,ee])})}function j(Y,Z,z,q,X,Q){var ee=R.handleWidth/2;function ne(He){return p.constrain(He,0,q._width)}function le(He){return p.constrain(He,0,q._height)}function W(He){return p.constrain(He,-ee,q._width+ee)}var ce=ne(q.d2p(z._rl[0])),de=ne(q.d2p(z._rl[1]));if(Y.select("rect."+R.slideBoxClassName).attr("x",ce).attr("width",de-ce),Y.select("rect."+R.maskMinClassName).attr("width",ce),Y.select("rect."+R.maskMaxClassName).attr("x",de).attr("width",q._width-de),Q.rangemode!=="match"){var pe=q._height-le(q.d2pOppAxis(X._rl[1])),he=q._height-le(q.d2pOppAxis(X._rl[0]));Y.select("rect."+R.maskMinOppAxisClassName).attr("x",ce).attr("height",pe).attr("width",de-ce),Y.select("rect."+R.maskMaxOppAxisClassName).attr("x",ce).attr("y",he).attr("height",q._height-he).attr("width",de-ce),Y.select("rect."+R.slideBoxClassName).attr("y",pe).attr("height",he-pe)}var be=.5,Ee=Math.round(W(ce-ee))-be,Te=Math.round(W(de-ee))+be;Y.select("g."+R.grabberMinClassName).attr("transform",v(Ee,be)),Y.select("g."+R.grabberMaxClassName).attr("transform",v(Te,be))}function b(Y,Z,z,q){var X=p.ensureSingle(Y,"rect",R.bgClassName,function(le){le.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),Q=q.borderwidth%2===0?q.borderwidth:q.borderwidth-1,ee=-q._offsetShift,ne=m.crispRound(Z,q.borderwidth);X.attr({width:q._width+Q,height:q._height+Q,transform:v(ee,ee),"stroke-width":ne}).call(g.stroke,q.bordercolor).call(g.fill,q.bgcolor)}function k(Y,Z,z,q){var X=Z._fullLayout,Q=p.ensureSingleById(X._topdefs,"clipPath",q._clipId,function(ee){ee.append("rect").attr({x:0,y:0})});Q.select("rect").attr({width:q._width,height:q._height})}function E(Y,Z,z,q){var X=Z.calcdata,Q=Y.selectAll("g."+R.rangePlotClassName).data(z._subplotsWith,p.identity);Q.enter().append("g").attr("class",function(ne){return R.rangePlotClassName+" "+ne}).call(m.setClipUrl,q._clipId,Z),Q.order(),Q.exit().remove();var ee;Q.each(function(ne,le){var W=h.select(this),ce=le===0,de=T.getFromId(Z,ne,"y"),pe=de._name,he=q[pe],be={data:[],layout:{xaxis:{type:z.type,domain:[0,1],range:q.range.slice(),calendar:z.calendar},width:q._width,height:q._height,margin:{t:0,b:0,l:0,r:0}},_context:Z._context};z.rangebreaks&&(be.layout.xaxis.rangebreaks=z.rangebreaks),be.layout[pe]={type:de.type,domain:[0,1],range:he.rangemode!=="match"?he.range.slice():de.range.slice(),calendar:de.calendar},de.rangebreaks&&(be.layout[pe].rangebreaks=de.rangebreaks),u.supplyDefaults(be);var Ee=be._fullLayout.xaxis,Te=be._fullLayout[pe];Ee.clearCalc(),Ee.setScale(),Te.clearCalc(),Te.setScale();var He={id:ne,plotgroup:W,xaxis:Ee,yaxis:Te,isRangePlot:!0};ce?ee=He:(He.mainplot="xy",He.mainplotinfo=ee),l.rangePlot(Z,He,F(X,ne))})}function F(Y,Z){for(var z=[],q=0;q<Y.length;q++){var X=Y[q],Q=X[0].trace;Q.xaxis+Q.yaxis===Z&&z.push(X)}return z}function P(Y,Z,z,q,X){var Q=p.ensureSingle(Y,"rect",R.maskMinClassName,function(W){W.attr({x:0,y:0,"shape-rendering":"crispEdges"})});Q.attr("height",q._height).call(g.fill,R.maskColor);var ee=p.ensureSingle(Y,"rect",R.maskMaxClassName,function(W){W.attr({y:0,"shape-rendering":"crispEdges"})});if(ee.attr("height",q._height).call(g.fill,R.maskColor),X.rangemode!=="match"){var ne=p.ensureSingle(Y,"rect",R.maskMinOppAxisClassName,function(W){W.attr({y:0,"shape-rendering":"crispEdges"})});ne.attr("width",q._width).call(g.fill,R.maskOppAxisColor);var le=p.ensureSingle(Y,"rect",R.maskMaxOppAxisClassName,function(W){W.attr({y:0,"shape-rendering":"crispEdges"})});le.attr("width",q._width).style("border-top",R.maskOppBorder).call(g.fill,R.maskOppAxisColor)}}function J(Y,Z,z,q){if(!Z._context.staticPlot){var X=p.ensureSingle(Y,"rect",R.slideBoxClassName,function(Q){Q.attr({y:0,cursor:R.slideBoxCursor,"shape-rendering":"crispEdges"})});X.attr({height:q._height,fill:R.slideBoxFill})}}function H(Y,Z,z,q){var X=p.ensureSingle(Y,"g",R.grabberMinClassName),Q=p.ensureSingle(Y,"g",R.grabberMaxClassName),ee={x:0,width:R.handleWidth,rx:R.handleRadius,fill:g.background,stroke:g.defaultLine,"stroke-width":R.handleStrokeWidth,"shape-rendering":"crispEdges"},ne={y:Math.round(q._height/4),height:Math.round(q._height/2)},le=p.ensureSingle(X,"rect",R.handleMinClassName,function(he){he.attr(ee)});le.attr(ne);var W=p.ensureSingle(Q,"rect",R.handleMaxClassName,function(he){he.attr(ee)});W.attr(ne);var ce={width:R.grabAreaWidth,x:0,y:0,fill:R.grabAreaFill,cursor:Z._context.staticPlot?void 0:R.grabAreaCursor},de=p.ensureSingle(X,"rect",R.grabAreaMinClassName,function(he){he.attr(ce)});de.attr("height",q._height);var pe=p.ensureSingle(Q,"rect",R.grabAreaMaxClassName,function(he){he.attr(ce)});pe.attr("height",q._height)}}}),Zk=i({"src/components/rangeslider/index.js"(U,$){var h=kr(),c=Lm(),u=$y(),p=$k();$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:h.extendFlat({},c,{yaxis:u})}}},layoutAttributes:Lm(),handleDefaults:Yk(),calcAutorange:Gk(),draw:Xk(),isVisible:p.isVisible,makeData:p.makeData,autoMarginOpts:p.autoMarginOpts}}}),Dm=i({"src/components/rangeselector/attributes.js"(U,$){var h=er(),c=Ft(),u=Si().templatedArray,p=u("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:p,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:h({editType:"plot"}),bgcolor:{valType:"color",dflt:c.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}}}),Yy=i({"src/components/rangeselector/constants.js"(U,$){$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}}}),Qk=i({"src/components/rangeselector/defaults.js"(U,$){var h=kr(),c=pt(),u=Si(),p=Tn(),v=Dm(),m=Yy();$.exports=function(T,y,S,R,M){var A=T.rangeselector||{},C=u.newContainer(y,"rangeselector");function j(P,J){return h.coerce(A,C,v,P,J)}var b=p(A,C,{name:"buttons",handleItemDefaults:g,calendar:M}),k=j("visible",b.length>0);if(k){var E=w(y,S,R);j("x",E[0]),j("y",E[1]),h.noneOrAll(T,y,["x","y"]),j("xanchor"),j("yanchor"),h.coerceFont(j,"font",S.font);var F=j("bgcolor");j("activecolor",c.contrast(F,m.lightAmount,m.darkAmount)),j("bordercolor"),j("borderwidth")}};function g(l,T,y,S){var R=S.calendar;function M(j,b){return h.coerce(l,T,v.buttons,j,b)}var A=M("visible");if(A){var C=M("step");C!=="all"&&(R&&R!=="gregorian"&&(C==="month"||C==="year")?T.stepmode="backward":M("stepmode"),M("count")),M("label")}}function w(l,T,y){for(var S=y.filter(function(C){return T[C].anchor===l._id}),R=0,M=0;M<S.length;M++){var A=T[S[M]].domain;A&&(R=Math.max(A[1],R))}return[l.domain[0],R+m.yPad]}}}),Jk=i({"src/components/rangeselector/get_update_object.js"(U,$){var h=_(),c=kr().titleCase;$.exports=function(v,m){var g=v._name,w={};if(m.step==="all")w[g+".autorange"]=!0;else{var l=u(v,m);w[g+".range[0]"]=l[0],w[g+".range[1]"]=l[1]}return w};function u(p,v){var m=p.range,g=new Date(p.r2l(m[1])),w=v.step,l=h["utc"+c(w)],T=v.count,y;switch(v.stepmode){case"backward":y=p.l2r(+l.offset(g,-T));break;case"todate":var S=l.offset(g,-T);y=p.l2r(+l.ceil(S));break}var R=m[1];return[y,R]}}}),Kk=i({"src/components/rangeselector/draw.js"(U,$){var h=d(),c=mn(),u=Xi(),p=pt(),v=di(),m=kr(),g=m.strTranslate,w=Ra(),l=pa(),T=La(),y=T.LINE_SPACING,S=T.FROM_TL,R=T.FROM_BR,M=Yy(),A=Jk();$.exports=function(Y){var Z=Y._fullLayout,z=Z._infolayer.selectAll(".rangeselector").data(C(Y),j);z.enter().append("g").classed("rangeselector",!0),z.exit().remove(),z.style({cursor:"pointer","pointer-events":"all"}),z.each(function(q){var X=h.select(this),Q=q,ee=Q.rangeselector,ne=X.selectAll("g.button").data(m.filterVisible(ee.buttons));ne.enter().append("g").classed("button",!0),ne.exit().remove(),ne.each(function(le){var W=h.select(this),ce=A(Q,le);le._isActive=b(Q,le,ce),W.call(k,ee,le),W.call(F,ee,le,Y),W.on("click",function(){Y._dragged||c.call("_guiRelayout",Y,ce)}),W.on("mouseover",function(){le._isHovered=!0,W.call(k,ee,le)}),W.on("mouseout",function(){le._isHovered=!1,W.call(k,ee,le)})}),J(Y,ne,ee,Q._name,X)})};function C(H){for(var Y=l.list(H,"x",!0),Z=[],z=0;z<Y.length;z++){var q=Y[z];q.rangeselector&&q.rangeselector.visible&&Z.push(q)}return Z}function j(H){return H._id}function b(H,Y,Z){if(Y.step==="all")return H.autorange===!0;var z=Object.keys(Z);return H.range[0]===Z[z[0]]&&H.range[1]===Z[z[1]]}function k(H,Y,Z){var z=m.ensureSingle(H,"rect","selector-rect",function(q){q.attr("shape-rendering","crispEdges")});z.attr({rx:M.rx,ry:M.ry}),z.call(p.stroke,Y.bordercolor).call(p.fill,E(Y,Z)).style("stroke-width",Y.borderwidth+"px")}function E(H,Y){return Y._isActive||Y._isHovered?H.activecolor:H.bgcolor}function F(H,Y,Z,z){function q(Q){w.convertToTspans(Q,z)}var X=m.ensureSingle(H,"text","selector-text",function(Q){Q.attr("text-anchor","middle")});X.call(v.font,Y.font).text(P(Z,z._fullLayout._meta)).call(q)}function P(H,Y){return H.label?Y?m.templateString(H.label,Y):H.label:H.step==="all"?"all":H.count+H.step.charAt(0)}function J(H,Y,Z,z,q){var X=0,Q=0,ee=Z.borderwidth;Y.each(function(){var pe=h.select(this),he=pe.select(".selector-text"),be=Z.font.size*y,Ee=Math.max(be*w.lineCount(he),16)+3;Q=Math.max(Q,Ee)}),Y.each(function(){var pe=h.select(this),he=pe.select(".selector-rect"),be=pe.select(".selector-text"),Ee=be.node()&&v.bBox(be.node()).width,Te=Z.font.size*y,He=w.lineCount(be),te=Math.max(Ee+10,M.minButtonWidth);pe.attr("transform",g(ee+X,ee)),he.attr({x:0,y:0,width:te,height:Q}),w.positionText(be,te/2,Q/2-(He-1)*Te/2+3),X+=te+5});var ne=H._fullLayout._size,le=ne.l+ne.w*Z.x,W=ne.t+ne.h*(1-Z.y),ce="left";m.isRightAnchor(Z)&&(le-=X,ce="right"),m.isCenterAnchor(Z)&&(le-=X/2,ce="center");var de="top";m.isBottomAnchor(Z)&&(W-=Q,de="bottom"),m.isMiddleAnchor(Z)&&(W-=Q/2,de="middle"),X=Math.ceil(X),Q=Math.ceil(Q),le=Math.round(le),W=Math.round(W),u.autoMargin(H,z+"-range-selector",{x:Z.x,y:Z.y,l:X*S[ce],r:X*R[ce],b:Q*R[de],t:Q*S[de]}),q.attr("transform",g(le,W))}}}),eS=i({"src/components/rangeselector/index.js"(U,$){$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:Dm()}}},layoutAttributes:Dm(),handleDefaults:Qk(),draw:Kk()}}}),Pm=i({"src/plots/domain.js"(U){var $=It().extendFlat;U.attributes=function(h,c){h=h||{},c=c||{};var u={valType:"info_array",editType:h.editType,items:[{valType:"number",min:0,max:1,editType:h.editType},{valType:"number",min:0,max:1,editType:h.editType}],dflt:[0,1]};h.name&&h.name+"",h.trace,c.description&&""+c.description;var p={x:$({},u,{}),y:$({},u,{}),editType:h.editType};return h.noGridCell||(p.row={valType:"integer",min:0,dflt:0,editType:h.editType},p.column={valType:"integer",min:0,dflt:0,editType:h.editType}),p},U.defaults=function(h,c,u,p){var v=p&&p.x||[0,1],m=p&&p.y||[0,1],g=c.grid;if(g){var w=u("domain.column");w!==void 0&&(w<g.columns?v=g._domains.x[w]:delete h.domain.column);var l=u("domain.row");l!==void 0&&(l<g.rows?m=g._domains.y[l]:delete h.domain.row)}var T=u("domain.x",v),y=u("domain.y",m);T[0]<T[1]||(h.domain.x=v.slice()),y[0]<y[1]||(h.domain.y=m.slice())}}}),tS=i({"src/components/grid/index.js"(U,$){var h=kr(),c=Jt().counter,u=Pm().attributes,p=ha().idRegex,v=Si(),m={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[c("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[p.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[p.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:u({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function g(S,R,M){var A=R[M+"axes"],C=Object.keys((S._splomAxes||{})[M]||{});if(Array.isArray(A))return A;if(C.length)return C}function w(S,R){var M=S.grid||{},A=g(R,M,"x"),C=g(R,M,"y");if(!S.grid&&!A&&!C)return;var j=Array.isArray(M.subplots)&&Array.isArray(M.subplots[0]),b=Array.isArray(A),k=Array.isArray(C),E=b&&A!==M.xaxes&&k&&C!==M.yaxes,F,P;j?(F=M.subplots.length,P=M.subplots[0].length):(k&&(F=C.length),b&&(P=A.length));var J=v.newContainer(R,"grid");function H(W,ce){return h.coerce(M,J,m,W,ce)}var Y=H("rows",F),Z=H("columns",P);if(!(Y*Z>1)){delete R.grid;return}if(!j&&!b&&!k){var z=H("pattern")==="independent";z&&(j=!0)}J._hasSubplotGrid=j;var q=H("roworder"),X=q==="top to bottom",Q=j?.2:.1,ee=j?.3:.1,ne,le;E&&R._splomGridDflt&&(ne=R._splomGridDflt.xside,le=R._splomGridDflt.yside),J._domains={x:l("x",H,Q,ne,Z),y:l("y",H,ee,le,Y,X)}}function l(S,R,M,A,C,j){var b=R(S+"gap",M),k=R("domain."+S);R(S+"side",A);for(var E=new Array(C),F=k[0],P=(k[1]-F)/(C-b),J=P*(1-b),H=0;H<C;H++){var Y=F+P*H;E[j?C-1-H:H]=[Y,Y+J]}return E}function T(S,R){var M=R.grid;if(!(!M||!M._domains)){var A=S.grid||{},C=R._subplots,j=M._hasSubplotGrid,b=M.rows,k=M.columns,E=M.pattern==="independent",F,P,J,H,Y,Z,z,q=M._axisMap={};if(j){var X=A.subplots||[];Z=M.subplots=new Array(b);var Q=1;for(F=0;F<b;F++){var ee=Z[F]=new Array(k),ne=X[F]||[];for(P=0;P<k;P++)if(E?(Y=Q===1?"xy":"x"+Q+"y"+Q,Q++):Y=ne[P],ee[P]="",C.cartesian.indexOf(Y)!==-1){if(z=Y.indexOf("y"),J=Y.slice(0,z),H=Y.slice(z),q[J]!==void 0&&q[J]!==P||q[H]!==void 0&&q[H]!==F)continue;ee[P]=Y,q[J]=P,q[H]=F}}}else{var le=g(R,A,"x"),W=g(R,A,"y");M.xaxes=y(le,C.xaxis,k,q,"x"),M.yaxes=y(W,C.yaxis,b,q,"y")}var ce=M._anchors={},de=M.roworder==="top to bottom";for(var pe in q){var he=pe.charAt(0),be=M[he+"side"],Ee,Te,He;if(be.length<8)ce[pe]="free";else if(he==="x"){if(be.charAt(0)==="t"===de?(Ee=0,Te=1,He=b):(Ee=b-1,Te=-1,He=-1),j){var te=q[pe];for(F=Ee;F!==He;F+=Te)if(Y=Z[F][te],!!Y&&(z=Y.indexOf("y"),Y.slice(0,z)===pe)){ce[pe]=Y.slice(z);break}}else for(F=Ee;F!==He;F+=Te)if(H=M.yaxes[F],C.cartesian.indexOf(pe+H)!==-1){ce[pe]=H;break}}else if(be.charAt(0)==="l"?(Ee=0,Te=1,He=k):(Ee=k-1,Te=-1,He=-1),j){var ae=q[pe];for(F=Ee;F!==He;F+=Te)if(Y=Z[ae][F],!!Y&&(z=Y.indexOf("y"),Y.slice(z)===pe)){ce[pe]=Y.slice(0,z);break}}else for(F=Ee;F!==He;F+=Te)if(J=M.xaxes[F],C.cartesian.indexOf(J+pe)!==-1){ce[pe]=J;break}}}}function y(S,R,M,A,C){var j=new Array(M),b;function k(E,F){R.indexOf(F)!==-1&&A[F]===void 0?(j[E]=F,A[F]=E):j[E]=""}if(Array.isArray(S))for(b=0;b<M;b++)k(b,S[b]);else for(k(0,C),b=1;b<M;b++)k(b,C+(b+1));return j}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:m}},layoutAttributes:m,sizeDefaults:w,contentDefaults:T}}}),Gy=i({"src/components/errorbars/attributes.js"(U,$){$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}}}),rS=i({"src/components/errorbars/defaults.js"(U,$){var h=xe(),c=mn(),u=kr(),p=Si(),v=Gy();$.exports=function(m,g,w,l){var T="error_"+l.axis,y=p.newContainer(g,T),S=m[T]||{};function R(E,F){return u.coerce(S,y,v,E,F)}var M=S.array!==void 0||S.value!==void 0||S.type==="sqrt",A=R("visible",M);if(A!==!1){var C=R("type","array"in S?"data":"percent"),j=!0;C!=="sqrt"&&(j=R("symmetric",!((C==="data"?"arrayminus":"valueminus")in S))),C==="data"?(R("array"),R("traceref"),j||(R("arrayminus"),R("tracerefminus"))):(C==="percent"||C==="constant")&&(R("value"),j||R("valueminus"));var b="copy_"+l.inherit+"style";if(l.inherit){var k=g["error_"+l.inherit];(k||{}).visible&&R(b,!(S.color||h(S.thickness)||h(S.width)))}(!l.inherit||!y[b])&&(R("color",w),R("thickness"),R("width",c.traceIs(g,"gl3d")?0:4))}}}}),Xy=i({"src/components/errorbars/compute_error.js"(U,$){$.exports=function(u){var p=u.type,v=u.symmetric;if(p==="data"){var m=u.array||[];if(v)return function(y,S){var R=+m[S];return[R,R]};var g=u.arrayminus||[];return function(y,S){var R=+m[S],M=+g[S];return!isNaN(R)||!isNaN(M)?[M||0,R||0]:[NaN,NaN]}}else{var w=h(p,u.value),l=h(p,u.valueminus);return v||u.valueminus===void 0?function(y){var S=w(y);return[S,S]}:function(y){return[l(y),w(y)]}}};function h(c,u){if(c==="percent")return function(p){return Math.abs(p*u/100)};if(c==="constant")return function(){return Math.abs(u)};if(c==="sqrt")return function(p){return Math.sqrt(Math.abs(p))}}}}),nS=i({"src/components/errorbars/calc.js"(U,$){var h=xe(),c=mn(),u=ji(),p=kr(),v=Xy();$.exports=function(w){for(var l=w.calcdata,T=0;T<l.length;T++){var y=l[T],S=y[0].trace;if(S.visible===!0&&c.traceIs(S,"errorBarsOK")){var R=u.getFromId(w,S.xaxis),M=u.getFromId(w,S.yaxis);m(y,S,R,"x"),m(y,S,M,"y")}}};function m(g,w,l,T){var y=w["error_"+T]||{},S=y.visible&&["linear","log"].indexOf(l.type)!==-1,R=[];if(S){for(var M=v(y),A=0;A<g.length;A++){var C=g[A],j=C.i;if(j===void 0)j=A;else if(j===null)continue;var b=C[T];if(h(l.c2l(b))){var k=M(b,j);if(h(k[0])&&h(k[1])){var E=C[T+"s"]=b-k[0],F=C[T+"h"]=b+k[1];R.push(E,F)}}}var P=l._id,J=w._extremes[P],H=u.findExtremes(l,R,p.extendFlat({tozero:J.opts.tozero},{padded:!0}));J.min=J.min.concat(H.min),J.max=J.max.concat(H.max)}}}}),iS=i({"src/components/errorbars/plot.js"(U,$){var h=d(),c=xe(),u=di(),p=Ia();$.exports=function(g,w,l,T){var y,S=l.xaxis,R=l.yaxis,M=T&&T.duration>0,A=g._context.staticPlot;w.each(function(C){var j=C[0].trace,b=j.error_x||{},k=j.error_y||{},E;j.ids&&(E=function(H){return H.id});var F=p.hasMarkers(j)&&j.marker.maxdisplayed>0;!k.visible&&!b.visible&&(C=[]);var P=h.select(this).selectAll("g.errorbar").data(C,E);if(P.exit().remove(),!!C.length){b.visible||P.selectAll("path.xerror").remove(),k.visible||P.selectAll("path.yerror").remove(),P.style("opacity",1);var J=P.enter().append("g").classed("errorbar",!0);M&&J.style("opacity",0).transition().duration(T.duration).style("opacity",1),u.setClipUrl(P,l.layerClipId,g),P.each(function(H){var Y=h.select(this),Z=v(H,S,R);if(!(F&&!H.vis)){var z,q=Y.select("path.yerror");if(k.visible&&c(Z.x)&&c(Z.yh)&&c(Z.ys)){var X=k.width;z="M"+(Z.x-X)+","+Z.yh+"h"+2*X+"m-"+X+",0V"+Z.ys,Z.noYS||(z+="m-"+X+",0h"+2*X),y=!q.size(),y?q=Y.append("path").style("vector-effect",A?"none":"non-scaling-stroke").classed("yerror",!0):M&&(q=q.transition().duration(T.duration).ease(T.easing)),q.attr("d",z)}else q.remove();var Q=Y.select("path.xerror");if(b.visible&&c(Z.y)&&c(Z.xh)&&c(Z.xs)){var ee=(b.copy_ystyle?k:b).width;z="M"+Z.xh+","+(Z.y-ee)+"v"+2*ee+"m0,-"+ee+"H"+Z.xs,Z.noXS||(z+="m0,-"+ee+"v"+2*ee),y=!Q.size(),y?Q=Y.append("path").style("vector-effect",A?"none":"non-scaling-stroke").classed("xerror",!0):M&&(Q=Q.transition().duration(T.duration).ease(T.easing)),Q.attr("d",z)}else Q.remove()}})}})};function v(m,g,w){var l={x:g.c2p(m.x),y:w.c2p(m.y)};return m.yh!==void 0&&(l.yh=w.c2p(m.yh),l.ys=w.c2p(m.ys),c(l.ys)||(l.noYS=!0,l.ys=w.c2p(m.ys,!0))),m.xh!==void 0&&(l.xh=g.c2p(m.xh),l.xs=g.c2p(m.xs),c(l.xs)||(l.noXS=!0,l.xs=g.c2p(m.xs,!0))),l}}}),aS=i({"src/components/errorbars/style.js"(U,$){var h=d(),c=pt();$.exports=function(p){p.each(function(v){var m=v[0].trace,g=m.error_y||{},w=m.error_x||{},l=h.select(this);l.selectAll("path.yerror").style("stroke-width",g.thickness+"px").call(c.stroke,g.color),w.copy_ystyle&&(w=g),l.selectAll("path.xerror").style("stroke-width",w.thickness+"px").call(c.stroke,w.color)})}}}),sS=i({"src/components/errorbars/index.js"(U,$){var h=kr(),c=Ni().overrideAll,u=Gy(),p={error_x:h.extendFlat({},u),error_y:h.extendFlat({},u)};delete p.error_x.copy_zstyle,delete p.error_y.copy_zstyle,delete p.error_y.copy_ystyle;var v={error_x:h.extendFlat({},u),error_y:h.extendFlat({},u),error_z:h.extendFlat({},u)};delete v.error_x.copy_ystyle,delete v.error_y.copy_ystyle,delete v.error_z.copy_ystyle,delete v.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:p,bar:p,histogram:p,scatter3d:c(v,"calc","nested"),scattergl:c(p,"calc","nested")}},supplyDefaults:rS(),calc:nS(),makeComputeError:Xy(),plot:iS(),style:aS(),hoverInfo:m};function m(g,w,l){(w.error_y||{}).visible&&(l.yerr=g.yh-g.y,w.error_y.symmetric||(l.yerrneg=g.y-g.ys)),(w.error_x||{}).visible&&(l.xerr=g.xh-g.x,w.error_x.symmetric||(l.xerrneg=g.x-g.xs))}}}),oS=i({"src/components/colorbar/constants.js"(U,$){$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}}}),lS=i({"src/components/colorbar/draw.js"(U,$){var h=d(),c=wt(),u=Xi(),p=mn(),v=ji(),m=Wa(),g=kr(),w=g.strTranslate,l=It().extendFlat,T=ho(),y=di(),S=pt(),R=ol(),M=Ra(),A=ds().flipScale,C=Oy(),j=By(),b=es(),k=La(),E=k.LINE_SPACING,F=k.FROM_TL,P=k.FROM_BR,J=oS().cn;function H(Q){var ee=Q._fullLayout,ne=ee._infolayer.selectAll("g."+J.colorbar).data(Y(Q),function(le){return le._id});ne.enter().append("g").attr("class",function(le){return le._id}).classed(J.colorbar,!0),ne.each(function(le){var W=h.select(this);g.ensureSingle(W,"rect",J.cbbg),g.ensureSingle(W,"g",J.cbfills),g.ensureSingle(W,"g",J.cblines),g.ensureSingle(W,"g",J.cbaxis,function(de){de.classed(J.crisp,!0)}),g.ensureSingle(W,"g",J.cbtitleunshift,function(de){de.append("g").classed(J.cbtitle,!0)}),g.ensureSingle(W,"rect",J.cboutline);var ce=Z(W,le,Q);ce&&ce.then&&(Q._promises||[]).push(ce),Q._context.edits.colorbarPosition&&z(W,le,Q)}),ne.exit().each(function(le){u.autoMargin(Q,le._id)}).remove(),ne.order()}function Y(Q){var ee=Q._fullLayout,ne=Q.calcdata,le=[],W,ce,de,pe;function he(D){return l(D,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function be(){typeof pe.calc=="function"?pe.calc(Q,de,W):(W._fillgradient=ce.reversescale?A(ce.colorscale):ce.colorscale,W._zrange=[ce[pe.min],ce[pe.max]])}for(var Ee=0;Ee<ne.length;Ee++){var Te=ne[Ee];if(de=Te[0].trace,!!de._module){var He=de._module.colorbar;if(de.visible===!0&&He)for(var te=Array.isArray(He),ae=te?He:[He],G=0;G<ae.length;G++){pe=ae[G];var K=pe.container;ce=K?de[K]:de,ce&&ce.showscale&&(W=he(ce.colorbar),W._id="cb"+de.uid+(te&&K?"-"+K:""),W._traceIndex=de.index,W._propPrefix=(K?K+".":"")+"colorbar.",W._meta=de._meta,be(),le.push(W))}}}for(var V in ee._colorAxes)if(ce=ee[V],ce.showscale){var re=ee._colorAxes[V];W=he(ce.colorbar),W._id="cb"+V,W._propPrefix=V+".colorbar.",W._meta=ee._meta,pe={min:"cmin",max:"cmax"},re[0]!=="heatmap"&&(de=re[1],pe.calc=de._module.colorbar.calc),be(),le.push(W)}return le}function Z(Q,ee,ne){var le=ee.orientation==="v",W=ee.len,ce=ee.lenmode,de=ee.thickness,pe=ee.thicknessmode,he=ee.outlinewidth,be=ee.borderwidth,Ee=ee.bgcolor,Te=ee.xanchor,He=ee.yanchor,te=ee.xpad,ae=ee.ypad,G=ee.x,K=le?ee.y:1-ee.y,V=ee.yref==="paper",re=ee.xref==="paper",D=ne._fullLayout,B=D._size,oe=ee._fillcolor,ie=ee._line,ge=ee.title,_e=ge.side,Se=ee._zrange||h.extent((typeof oe=="function"?oe:ie.color).domain()),De=typeof ie.color=="function"?ie.color:function(){return ie.color},Ge=typeof oe=="function"?oe:function(){return oe},Je=ee._levels,yt=q(ne,ee,Se),ut=yt.fill,vt=yt.line,Ae=Math.round(de*(pe==="fraction"?le?B.w:B.h:1)),Fe=Ae/(le?B.w:B.h),ke=Math.round(W*(ce==="fraction"?le?B.h:B.w:1)),Be=ke/(le?B.h:B.w),et=re?B.w:ne._fullLayout.width,ht=V?B.h:ne._fullLayout.height,jt=Math.round(le?G*et+te:K*ht+ae),At={center:.5,right:1}[Te]||0,Pt={top:1,middle:.5}[He]||0,zt=le?G-At*Fe:K-Pt*Fe,Nt=le?K-Pt*Be:G-At*Be,Kt=Math.round(le?ht*(1-Nt):et*Nt);ee._lenFrac=Be,ee._thickFrac=Fe,ee._uFrac=zt,ee._vFrac=Nt;var _t=ee._axis=X(ne,ee,Se);_t.position=Fe+(le?G+te/B.w:K+ae/B.h);var Qt=["top","bottom"].indexOf(_e)!==-1;if(le&&Qt&&(_t.title.side=_e,_t.titlex=G+te/B.w,_t.titley=Nt+(ge.side==="top"?Be-ae/B.h:ae/B.h)),!le&&!Qt&&(_t.title.side=_e,_t.titley=K+ae/B.h,_t.titlex=Nt+te/B.w),ie.color&&ee.tickmode==="auto"){_t.tickmode="linear",_t.tick0=Je.start;var fr=Je.size,Vt=g.constrain(ke/50,4,15)+1,rr=(Se[1]-Se[0])/((ee.nticks||Vt)*fr);if(rr>1){var Ne=Math.pow(10,Math.floor(Math.log(rr)/Math.LN10));fr*=Ne*g.roundUp(rr/Ne,[2,5,10]),(Math.abs(Je.start)/Je.size+1e-6)%1<2e-6&&(_t.tick0=0)}_t.dtick=fr}_t.domain=le?[Nt+ae/B.h,Nt+Be-ae/B.h]:[Nt+te/B.w,Nt+Be-te/B.w],_t.setScale(),Q.attr("transform",w(Math.round(B.l),Math.round(B.t)));var $e=Q.select("."+J.cbtitleunshift).attr("transform",w(-Math.round(B.l),-Math.round(B.t))),Ue=_t.ticklabelposition,fe=_t.title.font.size,je=Q.select("."+J.cbaxis),Pe,Re=0,tt=0;function nt(Ct,Ht){var Ut={propContainer:_t,propName:ee._propPrefix+"title",traceIndex:ee._traceIndex,_meta:ee._meta,placeholder:D._dfltTitle.colorbar,containerGroup:Q.select("."+J.cbtitle)},Ar=Ct.charAt(0)==="h"?Ct.substr(1):"h"+Ct;Q.selectAll("."+Ar+",."+Ar+"-math-group").remove(),R.draw(ne,Ct,l(Ut,Ht||{}))}function dt(){if(le&&Qt||!le&&!Qt){var Ct,Ht;_e==="top"&&(Ct=te+B.l+et*G,Ht=ae+B.t+ht*(1-Nt-Be)+3+fe*.75),_e==="bottom"&&(Ct=te+B.l+et*G,Ht=ae+B.t+ht*(1-Nt)-3-fe*.25),_e==="right"&&(Ht=ae+B.t+ht*K+3+fe*.75,Ct=te+B.l+et*Nt),nt(_t._id+"title",{attributes:{x:Ct,y:Ht,"text-anchor":le?"start":"middle"}})}}function St(){if(le&&!Qt||!le&&Qt){var Ct=_t.position||0,Ht=_t._offset+_t._length/2,Ut,Ar;if(_e==="right")Ar=Ht,Ut=B.l+et*Ct+10+fe*(_t.showticklabels?1:.5);else if(Ut=Ht,_e==="bottom"&&(Ar=B.t+ht*Ct+10+(Ue.indexOf("inside")===-1?_t.tickfont.size:0)+(_t.ticks!=="intside"&&ee.ticklen||0)),_e==="top"){var Rr=ge.text.split("<br>").length;Ar=B.t+ht*Ct+10-Ae-E*fe*Rr}nt((le?"h":"v")+_t._id+"title",{avoid:{selection:h.select(ne).selectAll("g."+_t._id+"tick"),side:_e,offsetTop:le?0:B.t,offsetLeft:le?B.l:0,maxShift:le?D.width:D.height},attributes:{x:Ut,y:Ar,"text-anchor":"middle"},transform:{rotate:le?-90:0,offset:0}})}}function Dt(){if(!le&&!Qt||le&&Qt){var Ct=Q.select("."+J.cbtitle),Ht=Ct.select("text"),Ut=[-he/2,he/2],Ar=Ct.select(".h"+_t._id+"title-math-group").node(),Rr=15.6;Ht.node()&&(Rr=parseInt(Ht.node().style.fontSize,10)*E);var $r;if(Ar?($r=y.bBox(Ar),tt=$r.width,Re=$r.height,Re>Rr&&(Ut[1]-=(Re-Rr)/2)):Ht.node()&&!Ht.classed(J.jsPlaceholder)&&($r=y.bBox(Ht.node()),tt=$r.width,Re=$r.height),le){if(Re){if(Re+=5,_e==="top")_t.domain[1]-=Re/B.h,Ut[1]*=-1;else{_t.domain[0]+=Re/B.h;var Mr=M.lineCount(Ht);Ut[1]+=(1-Mr)*Rr}Ct.attr("transform",w(Ut[0],Ut[1])),_t.setScale()}}else tt&&(_e==="right"&&(_t.domain[0]+=(tt+fe/2)/B.w),Ct.attr("transform",w(Ut[0],Ut[1])),_t.setScale())}Q.selectAll("."+J.cbfills+",."+J.cblines).attr("transform",le?w(0,Math.round(B.h*(1-_t.domain[1]))):w(Math.round(B.w*_t.domain[0]),0)),je.attr("transform",le?w(0,Math.round(-B.t)):w(Math.round(-B.l),0));var Ir=Q.select("."+J.cbfills).selectAll("rect."+J.cbfill).attr("style","").data(ut);Ir.enter().append("rect").classed(J.cbfill,!0).attr("style",""),Ir.exit().remove();var gr=Se.map(_t.c2p).map(Math.round).sort(function(Lr,hr){return Lr-hr});Ir.each(function(Lr,hr){var Or=[hr===0?Se[0]:(ut[hr]+ut[hr-1])/2,hr===ut.length-1?Se[1]:(ut[hr]+ut[hr+1])/2].map(_t.c2p).map(Math.round);le&&(Or[1]=g.constrain(Or[1]+(Or[1]>Or[0])?1:-1,gr[0],gr[1]));var fn=h.select(this).attr(le?"x":"y",jt).attr(le?"y":"x",h.min(Or)).attr(le?"width":"height",Math.max(Ae,2)).attr(le?"height":"width",Math.max(h.max(Or)-h.min(Or),2));if(ee._fillgradient)y.gradient(fn,ne,ee._id,le?"vertical":"horizontalreversed",ee._fillgradient,"fill");else{var An=Ge(Lr).replace("e-","");fn.attr("fill",c(An).toHexString())}});var br=Q.select("."+J.cblines).selectAll("path."+J.cbline).data(ie.color&&ie.width?vt:[]);br.enter().append("path").classed(J.cbline,!0),br.exit().remove(),br.each(function(Lr){var hr=jt,Or=Math.round(_t.c2p(Lr))+ie.width/2%1;h.select(this).attr("d","M"+(le?hr+","+Or:Or+","+hr)+(le?"h":"v")+Ae).call(y.lineGroupStyle,ie.width,De(Lr),ie.dash)}),je.selectAll("g."+_t._id+"tick,path").remove();var Vr=jt+Ae+(he||0)/2-(ee.ticks==="outside"?1:0),Br=v.calcTicks(_t),Ur=v.getTickSigns(_t)[2];return v.drawTicks(ne,_t,{vals:_t.ticks==="inside"?v.clipEnds(_t,Br):Br,layer:je,path:v.makeTickPath(_t,Vr,Ur),transFn:v.makeTransTickFn(_t)}),v.drawLabels(ne,_t,{vals:Br,layer:je,transFn:v.makeTransTickLabelFn(_t),labelFns:v.makeLabelFns(_t,Vr)})}function at(){var Ct,Ht=Ae+he/2;Ue.indexOf("inside")===-1&&(Ct=y.bBox(je.node()),Ht+=le?Ct.width:Ct.height),Pe=$e.select("text");var Ut=0,Ar=le&&_e==="top",Rr=!le&&_e==="right",$r=0;if(Pe.node()&&!Pe.classed(J.jsPlaceholder)){var Mr,Ir=$e.select(".h"+_t._id+"title-math-group").node();Ir&&(le&&Qt||!le&&!Qt)?(Ct=y.bBox(Ir),Ut=Ct.width,Mr=Ct.height):(Ct=y.bBox($e.node()),Ut=Ct.right-B.l-(le?jt:Kt),Mr=Ct.bottom-B.t-(le?Kt:jt),!le&&_e==="top"&&(Ht+=Ct.height,$r=Ct.height)),Rr&&(Pe.attr("transform",w(Ut/2+fe/2,0)),Ut*=2),Ht=Math.max(Ht,le?Ut:Mr)}var gr=(le?te:ae)*2+Ht+be+he/2,br=0;!le&&ge.text&&He==="bottom"&&K<=0&&(br=gr/2,gr+=br,$r+=br),D._hColorbarMoveTitle=br,D._hColorbarMoveCBTitle=$r;var Vr=be+he,Br=(le?jt:Kt)-Vr/2-(le?te:0),Ur=(le?Kt:jt)-(le?ke:ae+$r-br);Q.select("."+J.cbbg).attr("x",Br).attr("y",Ur).attr(le?"width":"height",Math.max(gr-br,2)).attr(le?"height":"width",Math.max(ke+Vr,2)).call(S.fill,Ee).call(S.stroke,ee.bordercolor).style("stroke-width",be);var Lr=Rr?Math.max(Ut-10,0):0;Q.selectAll("."+J.cboutline).attr("x",(le?jt:Kt+te)+Lr).attr("y",(le?Kt+ae-ke:jt)+(Ar?Re:0)).attr(le?"width":"height",Math.max(Ae,2)).attr(le?"height":"width",Math.max(ke-(le?2*ae+Re:2*te+Lr),2)).call(S.stroke,ee.outlinecolor).style({fill:"none","stroke-width":he});var hr=le?At*gr:0,Or=le?0:(1-Pt)*gr-$r;if(hr=re?B.l-hr:-hr,Or=V?B.t-Or:-Or,Q.attr("transform",w(hr,Or)),!le&&(be||c(Ee).getAlpha()&&!c.equals(D.paper_bgcolor,Ee))){var fn=je.selectAll("text"),An=fn[0].length,qr=Q.select("."+J.cbbg).node(),yn=y.bBox(qr),xn=y.getTranslate(Q),Xn=2;fn.each(function(Tt,rt){var xt=0,Mt=An-1;if(rt===xt||rt===Mt){var Lt=y.bBox(this),Xt=y.getTranslate(this),sr;if(rt===Mt){var or=Lt.right+Xt.x,Dr=yn.right+xn.x+Kt-be-Xn+G;sr=Dr-or,sr>0&&(sr=0)}else if(rt===xt){var _r=Lt.left+Xt.x,Zr=yn.left+xn.x+Kt+be+Xn;sr=Zr-_r,sr<0&&(sr=0)}sr&&(An<3?this.setAttribute("transform","translate("+sr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var mr={},jn=F[Te],we=P[Te],me=F[He],mt=P[He],ft=gr-Ae;le?(ce==="pixels"?(mr.y=K,mr.t=ke*me,mr.b=ke*mt):(mr.t=mr.b=0,mr.yt=K+W*me,mr.yb=K-W*mt),pe==="pixels"?(mr.x=G,mr.l=gr*jn,mr.r=gr*we):(mr.l=ft*jn,mr.r=ft*we,mr.xl=G-de*jn,mr.xr=G+de*we)):(ce==="pixels"?(mr.x=G,mr.l=ke*jn,mr.r=ke*we):(mr.l=mr.r=0,mr.xl=G+W*jn,mr.xr=G-W*we),pe==="pixels"?(mr.y=1-K,mr.t=gr*me,mr.b=gr*mt):(mr.t=ft*me,mr.b=ft*mt,mr.yt=K-de*me,mr.yb=K+de*mt));var Xe=ee.y<.5?"b":"t",Ke=ee.x<.5?"l":"r";ne._fullLayout._reservedMargin[ee._id]={};var it={r:D.width-Br-hr,l:Br+mr.r,b:D.height-Ur-Or,t:Ur+mr.b};re&&V?u.autoMargin(ne,ee._id,mr):re?ne._fullLayout._reservedMargin[ee._id][Xe]=it[Xe]:V||le?ne._fullLayout._reservedMargin[ee._id][Ke]=it[Ke]:ne._fullLayout._reservedMargin[ee._id][Xe]=it[Xe]}return g.syncOrAsync([u.previousPromises,dt,Dt,St,u.previousPromises,at],ne)}function z(Q,ee,ne){var le=ee.orientation==="v",W=ne._fullLayout,ce=W._size,de,pe,he;m.init({element:Q.node(),gd:ne,prepFn:function(){de=Q.attr("transform"),T(Q)},moveFn:function(be,Ee){Q.attr("transform",de+w(be,Ee)),pe=m.align((le?ee._uFrac:ee._vFrac)+be/ce.w,le?ee._thickFrac:ee._lenFrac,0,1,ee.xanchor),he=m.align((le?ee._vFrac:1-ee._uFrac)-Ee/ce.h,le?ee._lenFrac:ee._thickFrac,0,1,ee.yanchor);var Te=m.getCursor(pe,he,ee.xanchor,ee.yanchor);T(Q,Te)},doneFn:function(){if(T(Q),pe!==void 0&&he!==void 0){var be={};be[ee._propPrefix+"x"]=pe,be[ee._propPrefix+"y"]=he,ee._traceIndex!==void 0?p.call("_guiRestyle",ne,be,ee._traceIndex):p.call("_guiRelayout",ne,be)}}})}function q(Q,ee,ne){var le=ee._levels,W=[],ce=[],de,pe,he=le.end+le.size/100,be=le.size,Ee=1.001*ne[0]-.001*ne[1],Te=1.001*ne[1]-.001*ne[0];for(pe=0;pe<1e5&&(de=le.start+pe*be,!(be>0?de>=he:de<=he));pe++)de>Ee&&de<Te&&W.push(de);if(ee._fillgradient)ce=[0];else if(typeof ee._fillcolor=="function"){var He=ee._filllevels;if(He)for(he=He.end+He.size/100,be=He.size,pe=0;pe<1e5&&(de=He.start+pe*be,!(be>0?de>=he:de<=he));pe++)de>ne[0]&&de<ne[1]&&ce.push(de);else ce=W.map(function(te){return te-le.size/2}),ce.push(ce[ce.length-1]+le.size)}else ee._fillcolor&&typeof ee._fillcolor=="string"&&(ce=[0]);return le.size<0&&(W.reverse(),ce.reverse()),{line:W,fill:ce}}function X(Q,ee,ne){var le=Q._fullLayout,W=ee.orientation==="v",ce={type:"linear",range:ne,tickmode:ee.tickmode,nticks:ee.nticks,tick0:ee.tick0,dtick:ee.dtick,tickvals:ee.tickvals,ticktext:ee.ticktext,ticks:ee.ticks,ticklen:ee.ticklen,tickwidth:ee.tickwidth,tickcolor:ee.tickcolor,showticklabels:ee.showticklabels,labelalias:ee.labelalias,ticklabelposition:ee.ticklabelposition,ticklabeloverflow:ee.ticklabeloverflow,ticklabelstep:ee.ticklabelstep,tickfont:ee.tickfont,tickangle:ee.tickangle,tickformat:ee.tickformat,exponentformat:ee.exponentformat,minexponent:ee.minexponent,separatethousands:ee.separatethousands,showexponent:ee.showexponent,showtickprefix:ee.showtickprefix,tickprefix:ee.tickprefix,showticksuffix:ee.showticksuffix,ticksuffix:ee.ticksuffix,title:ee.title,showline:!0,anchor:"free",side:W?"right":"bottom",position:1},de=W?"y":"x",pe={type:"linear",_id:de+ee._id},he={letter:de,font:le.font,noAutotickangles:de==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:le.calendar};function be(Ee,Te){return g.coerce(ce,pe,b,Ee,Te)}return C(ce,pe,be,he,le),j(ce,pe,be,he),pe}$.exports={draw:H}}}),cS=i({"src/components/colorbar/index.js"(U,$){$.exports={moduleType:"component",name:"colorbar",attributes:nl(),supplyDefaults:Da(),draw:lS().draw,hasColorbar:nn()}}}),uS=i({"src/components/legend/index.js"(U,$){$.exports={moduleType:"component",name:"legend",layoutAttributes:Sc(),supplyLayoutDefaults:ad(),draw:ld(),style:od()}}}),dS=i({"src/locale-en.js"(U,$){$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}}}),fS=i({"src/locale-en-us.js"(U,$){$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}}}),Zy=i({"src/snapshot/cloneplot.js"(U,$){var h=mn(),c=kr(),u=c.extendFlat,p=c.extendDeep;function v(g){var w;switch(g){case"themes__thumb":w={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":w={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:w={}}return w}function m(g){var w=["xaxis","yaxis","zaxis"];return w.indexOf(g.slice(0,5))>-1}$.exports=function(w,l){var T,y=w.data,S=w.layout,R=p([],y),M=p({},S,v(l.tileClass)),A=w._context||{};if(l.width&&(M.width=l.width),l.height&&(M.height=l.height),l.tileClass==="thumbnail"||l.tileClass==="themes__thumb"){M.annotations=[];var C=Object.keys(M);for(T=0;T<C.length;T++)m(C[T])&&(M[C[T]].title={text:""});for(T=0;T<R.length;T++){var j=R[T];j.showscale=!1,j.marker&&(j.marker.showscale=!1),h.traceIs(j,"pie-like")&&(j.textposition="none")}}if(Array.isArray(l.annotations))for(T=0;T<l.annotations.length;T++)M.annotations.push(l.annotations[T]);var b=Object.keys(M).filter(function(J){return J.match(/^scene\d*$/)});if(b.length){var k={};for(l.tileClass==="thumbnail"&&(k={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),T=0;T<b.length;T++){var E=M[b[T]];E.xaxis||(E.xaxis={}),E.yaxis||(E.yaxis={}),E.zaxis||(E.zaxis={}),u(E.xaxis,k),u(E.yaxis,k),u(E.zaxis,k),E._scene=null}}var F=document.createElement("div");l.tileClass&&(F.className=l.tileClass);var P={gd:F,td:F,layout:M,data:R,config:{staticPlot:l.staticPlot===void 0?!0:l.staticPlot,plotGlPixelRatio:l.plotGlPixelRatio===void 0?2:l.plotGlPixelRatio,displaylogo:l.displaylogo||!1,showLink:l.showLink||!1,showTips:l.showTips||!1,mapboxAccessToken:A.mapboxAccessToken}};return l.setBackground!=="transparent"&&(P.config.setBackground=l.setBackground||"opaque"),P.gd.defaultLayout=v(l.tileClass),P}}}),hS=i({"src/snapshot/toimage.js"(U,$){var h=js().EventEmitter,c=mn(),u=kr(),p=xu(),v=Zy(),m=Mm(),g=Tm();function w(l,T){var y=new h,S=v(l,{format:"png"}),R=S.gd;R.style.position="absolute",R.style.left="-5000px",document.body.appendChild(R);function M(){var C=p.getDelay(R._fullLayout);setTimeout(function(){var j=m(R),b=document.createElement("canvas");b.id=u.randstr(),y=g({format:T.format,width:R._fullLayout.width,height:R._fullLayout.height,canvas:b,emitter:y,svg:j}),y.clean=function(){R&&document.body.removeChild(R)}},C)}var A=p.getRedrawFunc(R);return c.call("_doPlot",R,S.data,S.layout,S.config).then(A).then(M).catch(function(C){y.emit("error",C)}),y}$.exports=w}}),pS=i({"src/snapshot/index.js"(U,$){var h=xu(),c={getDelay:h.getDelay,getRedrawFunc:h.getRedrawFunc,clone:Zy(),toSVG:Mm(),svgToImg:Tm(),toImage:hS(),downloadImage:Cy()};$.exports=c}}),mS=i({"src/core.js"(U){U.version=a().version,s(),Hs();var $=mn(),h=U.register=$.register,c=Y5(),u=Object.keys(c);for(v=0;v<u.length;v++)p=u[v],p.charAt(0)!=="_"&&(U[p]=c[p]),h({moduleType:"apiMethod",name:p,fn:c[p]});var p,v;h(xk()),h([Mk(),Ek(),pd(),Pk(),Ik(),Wk(),Uk(),Zk(),eS(),tS(),sS(),il(),cS(),uS(),po(),Bl()]),h([dS(),fS()]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(h(window.PlotlyLocales),delete window.PlotlyLocales),U.Icons=pu();var m=po(),g=Xi();U.Plots={resize:g.resize,graphJson:g.graphJson,sendDataToCloud:g.sendDataToCloud},U.Fx={hover:m.hover,unhover:m.unhover,loneHover:m.loneHover,loneUnhover:m.loneUnhover},U.Snapshot=pS(),U.PlotSchema=Di()}}),vS=i({"lib/core.js"(U,$){$.exports=mS()}}),Nm=i({"src/traces/bar/constants.js"(U,$){$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}}}),Jf=i({"src/traces/bar/attributes.js"(U,$){var h=yu(),c=Pl().axisHoverFormat,u=ea().hovertemplateAttrs,p=ea().texttemplateAttrs,v=ct(),m=er(),g=Nm(),w=si().pattern,l=It().extendFlat,T=m({editType:"calc",arrayOk:!0,colorEditType:"style"}),y=h.marker,S=y.line,R=l({},S.width,{dflt:0}),M=l({width:R,editType:"calc"},v("marker.line")),A=l({line:M,editType:"calc"},v("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:w,cornerradius:{valType:"any",editType:"calc"}});$.exports={x:h.x,x0:h.x0,dx:h.dx,y:h.y,y0:h.y0,dy:h.dy,xperiod:h.xperiod,yperiod:h.yperiod,xperiod0:h.xperiod0,yperiod0:h.yperiod0,xperiodalignment:h.xperiodalignment,yperiodalignment:h.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),text:h.text,texttemplate:p({editType:"plot"},{keys:g.eventDataKeys}),hovertext:h.hovertext,hovertemplate:u({},{keys:g.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:l({},T,{}),insidetextfont:l({},T,{}),outsidetextfont:l({},T,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:l({},h.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:A,offsetgroup:h.offsetgroup,alignmentgroup:h.alignmentgroup,selected:{marker:{opacity:h.selected.marker.opacity,color:h.selected.marker.color,editType:"style"},textfont:h.selected.textfont,editType:"style"},unselected:{marker:{opacity:h.unselected.marker.opacity,color:h.unselected.marker.color,editType:"style"},textfont:h.unselected.textfont,editType:"style"},zorder:h.zorder}}}),Qy=i({"src/traces/bar/layout_attributes.js"(U,$){$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}}}),gS=i({"src/traces/bar/style_defaults.js"(U,$){var h=pt(),c=ds().hasColorscale,u=Ga(),p=kr().coercePattern;$.exports=function(m,g,w,l,T){var y=w("marker.color",l),S=c(m,"marker");S&&u(m,g,T,w,{prefix:"marker.",cLetter:"c"}),w("marker.line.color",h.defaultLine),c(m,"marker.line")&&u(m,g,T,w,{prefix:"marker.line.",cLetter:"c"}),w("marker.line.width"),w("marker.opacity"),p(w,"marker.pattern",y,S),w("selected.marker.color"),w("unselected.marker.color")}}}),Kf=i({"src/traces/bar/defaults.js"(U,$){var h=xe(),c=kr(),u=pt(),p=mn(),v=jy(),m=Ey(),g=gS(),w=Ly(),l=Jf(),T=c.coerceFont;function y(A,C,j,b){function k(H,Y){return c.coerce(A,C,l,H,Y)}var E=v(A,C,b,k);if(!E){C.visible=!1;return}m(A,C,b,k),k("xhoverformat"),k("yhoverformat"),k("zorder"),k("orientation",C.x&&!C.y?"h":"v"),k("base"),k("offset"),k("width"),k("text"),k("hovertext"),k("hovertemplate");var F=k("textposition");M(A,C,b,k,F,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),g(A,C,k,j,b);var P=(C.marker.line||{}).color,J=p.getComponentMethod("errorbars","supplyDefaults");J(A,C,P||u.defaultLine,{axis:"y"}),J(A,C,P||u.defaultLine,{axis:"x",inherit:"y"}),c.coerceSelectionMarkerOpacity(C,k)}function S(A,C){var j,b;function k(P,J){return c.coerce(b._input,b,l,P,J)}for(var E=0;E<A.length;E++)if(b=A[E],b.type==="bar"){j=b._input;var F=k("marker.cornerradius",C.barcornerradius);b.marker&&(b.marker.cornerradius=R(F)),w(j,b,C,k,C.barmode)}}function R(A){if(h(A)){if(A=+A,A>=0)return A}else if(typeof A=="string"&&(A=A.trim(),A.slice(-1)==="%"&&h(A.slice(0,-1))&&(A=+A.slice(0,-1),A>=0)))return A+"%"}function M(A,C,j,b,k,E){E=E||{};var F=E.moduleHasSelected!==!1,P=E.moduleHasUnselected!==!1,J=E.moduleHasConstrain!==!1,H=E.moduleHasCliponaxis!==!1,Y=E.moduleHasTextangle!==!1,Z=E.moduleHasInsideanchor!==!1,z=!!E.hasPathbar,q=Array.isArray(k)||k==="auto",X=q||k==="inside",Q=q||k==="outside";if(X||Q){var ee=T(b,"textfont",j.font),ne=c.extendFlat({},ee),le=A.textfont&&A.textfont.color,W=!le;if(W&&delete ne.color,T(b,"insidetextfont",ne),z){var ce=c.extendFlat({},ee);W&&delete ce.color,T(b,"pathbar.textfont",ce)}Q&&T(b,"outsidetextfont",ee),F&&b("selected.textfont.color"),P&&b("unselected.textfont.color"),J&&b("constraintext"),H&&b("cliponaxis"),Y&&b("textangle"),b("texttemplate")}X&&Z&&b("insidetextanchor")}$.exports={supplyDefaults:y,crossTraceDefaults:S,handleText:M,validateCornerradius:R}}}),yS=i({"src/traces/bar/layout_defaults.js"(U,$){var h=mn(),c=ji(),u=kr(),p=Qy(),v=Kf().validateCornerradius;$.exports=function(m,g,w){function l(F,P){return u.coerce(m,g,p,F,P)}for(var T=!1,y=!1,S=!1,R={},M=l("barmode"),A=M==="group",C=0;C<w.length;C++){var j=w[C];if(h.traceIs(j,"bar")&&j.visible)T=!0;else continue;var b=j.xaxis+j.yaxis;if(A?(R[b]&&(S=!0),R[b]=!0):(b+=j._input.offsetgroup,R.length>0&&!R[b]&&(S=!0),R[b]=!0),j.visible&&j.type==="histogram"){var k=c.getFromId({_fullLayout:g},j[j.orientation==="v"?"xaxis":"yaxis"]);k.type!=="category"&&(y=!0)}}if(!T){delete g.barmode;return}M!=="overlay"&&l("barnorm"),l("bargap",y&&!S?0:.2),l("bargroupgap");var E=l("barcornerradius");g.barcornerradius=v(E)}}}),Jy=i({"src/traces/bar/arrays_to_calcdata.js"(U,$){var h=kr();$.exports=function(u,p){for(var v=0;v<u.length;v++)u[v].i=v;h.mergeArray(p.text,u,"tx"),h.mergeArray(p.hovertext,u,"htx");var m=p.marker;if(m){h.mergeArray(m.opacity,u,"mo",!0),h.mergeArray(m.color,u,"mc");var g=m.line;g&&(h.mergeArray(g.color,u,"mlc"),h.mergeArrayCastPositive(g.width,u,"mlw"))}}}}),xS=i({"src/traces/bar/calc.js"(U,$){var h=ji(),c=Ry(),u=ds().hasColorscale,p=wc(),v=Jy(),m=Py();$.exports=function(w,l){var T=h.getFromId(w,l.xaxis||"x"),y=h.getFromId(w,l.yaxis||"y"),S,R,M,A,C,j,b={msUTC:!!(l.base||l.base===0)};l.orientation==="h"?(S=T.makeCalcdata(l,"x",b),M=y.makeCalcdata(l,"y"),A=c(l,y,"y",M),C=!!l.yperiodalignment,j="y"):(S=y.makeCalcdata(l,"y",b),M=T.makeCalcdata(l,"x"),A=c(l,T,"x",M),C=!!l.xperiodalignment,j="x"),R=A.vals;for(var k=Math.min(R.length,S.length),E=new Array(k),F=0;F<k;F++)E[F]={p:R[F],s:S[F]},C&&(E[F].orig_p=M[F],E[F][j+"End"]=A.ends[F],E[F][j+"Start"]=A.starts[F]),l.ids&&(E[F].id=String(l.ids[F]));return u(l,"marker")&&p(w,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),u(l,"marker.line")&&p(w,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),v(E,l),m(E,l),E}}}),eh=i({"src/traces/bar/uniform_text.js"(U,$){var h=d(),c=kr();function u(g,w,l){var T=g._fullLayout,y=T["_"+l+"Text_minsize"];if(y){var S=T.uniformtext.mode==="hide",R;switch(l){case"funnelarea":case"pie":case"sunburst":R="g.slice";break;case"treemap":case"icicle":R="g.slice, g.pathbar";break;default:R="g.points > g.point"}w.selectAll(R).each(function(M){var A=M.transform;if(A){A.scale=S&&A.hide?0:y/A.fontSize;var C=h.select(this).select("text");c.setTransormAndDisplay(C,A)}})}}function p(g,w,l){if(l.uniformtext.mode){var T=m(g),y=l.uniformtext.minsize,S=w.scale*w.fontSize;w.hide=S<y,l[T]=l[T]||1/0,w.hide||(l[T]=Math.min(l[T],Math.max(S,y)))}}function v(g,w){var l=m(g);w[l]=void 0}function m(g){return"_"+g+"Text_minsize"}$.exports={recordMinTextSize:p,clearMinTextSize:v,resizeText:u}}}),zm=i({"src/traces/bar/helpers.js"(U){var $=xe(),h=wt(),c=kr().isArrayOrTypedArray;U.coerceString=function(u,p,v){if(typeof p=="string"){if(p||!u.noBlank)return p}else if((typeof p=="number"||p===!0)&&!u.strict)return String(p);return v!==void 0?v:u.dflt},U.coerceNumber=function(u,p,v){if($(p)){p=+p;var m=u.min,g=u.max,w=m!==void 0&&p<m||g!==void 0&&p>g;if(!w)return p}return v!==void 0?v:u.dflt},U.coerceColor=function(u,p,v){return h(p).isValid()?p:v!==void 0?v:u.dflt},U.coerceEnumerated=function(u,p,v){return u.coerceNumber&&(p=+p),u.values.indexOf(p)!==-1?p:v!==void 0?v:u.dflt},U.getValue=function(u,p){var v;return c(u)?p<u.length&&(v=u[p]):v=u,v},U.getLineWidth=function(u,p){var v=0<p.mlw?p.mlw:c(u.marker.line.width)?0:u.marker.line.width;return v}}}),Fm=i({"src/traces/bar/style.js"(U,$){var h=d(),c=pt(),u=di(),p=kr(),v=mn(),m=eh().resizeText,g=Jf(),w=g.textfont,l=g.insidetextfont,T=g.outsidetextfont,y=zm();function S(H){var Y=h.select(H).selectAll('g[class^="barlayer"]').selectAll("g.trace");m(H,Y,"bar");var Z=Y.size(),z=H._fullLayout;Y.style("opacity",function(q){return q[0].trace.opacity}).each(function(q){(z.barmode==="stack"&&Z>1||z.bargap===0&&z.bargroupgap===0&&!q[0].trace.marker.line.width)&&h.select(this).attr("shape-rendering","crispEdges")}),Y.selectAll("g.points").each(function(q){var X=h.select(this),Q=q[0].trace;R(X,Q,H)}),v.getComponentMethod("errorbars","style")(Y)}function R(H,Y,Z){u.pointStyle(H.selectAll("path"),Y,Z),M(H,Y,Z)}function M(H,Y,Z){H.selectAll("text").each(function(z){var q=h.select(this),X=p.ensureUniformFontSize(Z,b(q,z,Y,Z));u.font(q,X)})}function A(H,Y,Z){var z=Y[0].trace;z.selectedpoints?C(Z,z,H):(R(Z,z,H),v.getComponentMethod("errorbars","style")(Z))}function C(H,Y,Z){u.selectedPointStyle(H.selectAll("path"),Y),j(H.selectAll("text"),Y,Z)}function j(H,Y,Z){H.each(function(z){var q=h.select(this),X;if(z.selected){X=p.ensureUniformFontSize(Z,b(q,z,Y,Z));var Q=Y.selected.textfont&&Y.selected.textfont.color;Q&&(X.color=Q),u.font(q,X)}else u.selectedTextStyle(q,Y)})}function b(H,Y,Z,z){var q=z._fullLayout.font,X=Z.textfont;if(H.classed("bartext-inside")){var Q=J(Y,Z);X=E(Z,Y.i,q,Q)}else H.classed("bartext-outside")&&(X=F(Z,Y.i,q));return X}function k(H,Y,Z){return P(w,H.textfont,Y,Z)}function E(H,Y,Z,z){var q=k(H,Y,Z),X=H._input.textfont===void 0||H._input.textfont.color===void 0||Array.isArray(H.textfont.color)&&H.textfont.color[Y]===void 0;return X&&(q={color:c.contrast(z),family:q.family,size:q.size,weight:q.weight,style:q.style,variant:q.variant,textcase:q.textcase,lineposition:q.lineposition,shadow:q.shadow}),P(l,H.insidetextfont,Y,q)}function F(H,Y,Z){var z=k(H,Y,Z);return P(T,H.outsidetextfont,Y,z)}function P(H,Y,Z,z){Y=Y||{};var q=y.getValue(Y.family,Z),X=y.getValue(Y.size,Z),Q=y.getValue(Y.color,Z),ee=y.getValue(Y.weight,Z),ne=y.getValue(Y.style,Z),le=y.getValue(Y.variant,Z),W=y.getValue(Y.textcase,Z),ce=y.getValue(Y.lineposition,Z),de=y.getValue(Y.shadow,Z);return{family:y.coerceString(H.family,q,z.family),size:y.coerceNumber(H.size,X,z.size),color:y.coerceColor(H.color,Q,z.color),weight:y.coerceString(H.weight,ee,z.weight),style:y.coerceString(H.style,ne,z.style),variant:y.coerceString(H.variant,le,z.variant),textcase:y.coerceString(H.variant,W,z.textcase),lineposition:y.coerceString(H.variant,ce,z.lineposition),shadow:y.coerceString(H.variant,de,z.shadow)}}function J(H,Y){return Y.type==="waterfall"?Y[H.dir].marker.color:H.mcc||H.mc||Y.marker.color}$.exports={style:S,styleTextPoints:M,styleOnSelect:A,getInsideTextFont:E,getOutsideTextFont:F,getBarColor:J,resizeText:m}}}),bS=i({"src/traces/bar/plot.js"(U,$){var h=d(),c=xe(),u=kr(),p=Ra(),v=pt(),m=di(),g=mn(),w=ji().tickText,l=eh(),T=l.recordMinTextSize,y=l.clearMinTextSize,S=Fm(),R=zm(),M=Nm(),A=Jf(),C=A.text,j=A.textposition,b=ts().appendArrayPointValue,k=M.TEXTPAD;function E(be){return be.id}function F(be){if(be.ids)return E}function P(be){return(be>0)-(be<0)}function J(be,Ee){return be<Ee?1:-1}function H(be,Ee,Te,He){var te=[],ae=[],G=He?Ee:Te,K=He?Te:Ee;return te[0]=G.c2p(be.s0,!0),ae[0]=K.c2p(be.p0,!0),te[1]=G.c2p(be.s1,!0),ae[1]=K.c2p(be.p1,!0),He?[te,ae]:[ae,te]}function Y(be,Ee,Te,He){if(!Ee.uniformtext.mode&&Z(Te)){var te;return He&&(te=He()),be.transition().duration(Te.duration).ease(Te.easing).each("end",function(){te&&te()}).each("interrupt",function(){te&&te()})}else return be}function Z(be){return be&&be.duration>0}function z(be,Ee,Te,He,te,ae){var G=Ee.xaxis,K=Ee.yaxis,V=be._fullLayout,re=be._context.staticPlot;te||(te={mode:V.barmode,norm:V.barmode,gap:V.bargap,groupgap:V.bargroupgap},y("bar",V));var D=u.makeTraceGroups(He,Te,"trace bars").each(function(B){var oe=h.select(this),ie=B[0].trace,ge=B[0].t,_e=ie.type==="waterfall",Se=ie.type==="funnel",De=ie.type==="histogram",Ge=ie.type==="bar",Je=Ge||Se,yt=0;_e&&ie.connector.visible&&ie.connector.mode==="between"&&(yt=ie.connector.line.width/2);var ut=ie.orientation==="h",vt=Z(te),Ae=u.ensureSingle(oe,"g","points"),Fe=F(ie),ke=Ae.selectAll("g.point").data(u.identity,Fe);ke.enter().append("g").classed("point",!0),ke.exit().remove(),ke.each(function(et,ht){var jt=h.select(this),At=H(et,G,K,ut),Pt=At[0][0],zt=At[0][1],Nt=At[1][0],Kt=At[1][1],_t=(ut?zt-Pt:Kt-Nt)===0;_t&&Je&&R.getLineWidth(ie,et)&&(_t=!1),_t||(_t=!c(Pt)||!c(zt)||!c(Nt)||!c(Kt)),et.isBlank=_t,_t&&(ut?zt=Pt:Kt=Nt),yt&&!_t&&(ut?(Pt-=J(Pt,zt)*yt,zt+=J(Pt,zt)*yt):(Nt-=J(Nt,Kt)*yt,Kt+=J(Nt,Kt)*yt));var Qt,fr;if(ie.type==="waterfall"){if(!_t){var Vt=ie[et.dir].marker;Qt=Vt.line.width,fr=Vt.color}}else Qt=R.getLineWidth(ie,et),fr=et.mc||ie.marker.color;function rr(Vr){var Br=h.round(Qt/2%1,2);return te.gap===0&&te.groupgap===0?h.round(Math.round(Vr)-Br,2):Vr}function Ne(Vr,Br,Ur){return Ur&&Vr===Br?Vr:Math.abs(Vr-Br)>=2?rr(Vr):Vr>Br?Math.ceil(Vr):Math.floor(Vr)}var $e=v.opacity(fr),Ue=$e<1||Qt>.01?rr:Ne;be._context.staticPlot||(Pt=Ue(Pt,zt,ut),zt=Ue(zt,Pt,ut),Nt=Ue(Nt,Kt,!ut),Kt=Ue(Kt,Nt,!ut));var fe=ut?G.c2p:K.c2p,je;et.s0>0?je=et._sMax:et.s0<0?je=et._sMin:je=et.s1>0?et._sMax:et._sMin;function Pe(Vr,Br){if(!Vr)return 0;var Ur=Math.abs(ut?Kt-Nt:zt-Pt),Lr=Math.abs(ut?zt-Pt:Kt-Nt),hr=Ue(Math.abs(fe(je,!0)-fe(0,!0))),Or=et.hasB?Math.min(Ur/2,Lr/2):Math.min(Ur/2,hr),fn;if(Br==="%"){var An=Math.min(50,Vr);fn=Ur*(An/100)}else fn=Vr;return Ue(Math.max(Math.min(fn,Or),0))}var Re=Ge||De?Pe(ge.cornerradiusvalue,ge.cornerradiusform):0,tt,nt,dt="M"+Pt+","+Nt+"V"+Kt+"H"+zt+"V"+Nt+"Z",St=0;if(Re&&et.s){var Dt=P(et.s0)===0||P(et.s)===P(et.s0)?et.s1:et.s0;if(St=Ue(et.hasB?0:Math.abs(fe(je,!0)-fe(Dt,!0))),St<Re){var at=J(Pt,zt),Ct=J(Nt,Kt),Ht=at===-Ct?1:0;if(ut)if(et.hasB)tt="M"+(Pt+Re*at)+","+Nt+"A "+Re+","+Re+" 0 0 "+Ht+" "+Pt+","+(Nt+Re*Ct)+"V"+(Kt-Re*Ct)+"A "+Re+","+Re+" 0 0 "+Ht+" "+(Pt+Re*at)+","+Kt+"H"+(zt-Re*at)+"A "+Re+","+Re+" 0 0 "+Ht+" "+zt+","+(Kt-Re*Ct)+"V"+(Nt+Re*Ct)+"A "+Re+","+Re+" 0 0 "+Ht+" "+(zt-Re*at)+","+Nt+"Z";else{nt=Math.abs(zt-Pt)+St;var Ut=nt<Re?Re-Math.sqrt(nt*(2*Re-nt)):0,Ar=St>0?Math.sqrt(St*(2*Re-St)):0,Rr=at>0?Math.max:Math.min;tt="M"+Pt+","+Nt+"V"+(Kt-Ut*Ct)+"H"+Rr(zt-(Re-St)*at,Pt)+"A "+Re+","+Re+" 0 0 "+Ht+" "+zt+","+(Kt-Re*Ct-Ar)+"V"+(Nt+Re*Ct+Ar)+"A "+Re+","+Re+" 0 0 "+Ht+" "+Rr(zt-(Re-St)*at,Pt)+","+(Nt+Ut*Ct)+"Z"}else if(et.hasB)tt="M"+(Pt+Re*at)+","+Nt+"A "+Re+","+Re+" 0 0 "+Ht+" "+Pt+","+(Nt+Re*Ct)+"V"+(Kt-Re*Ct)+"A "+Re+","+Re+" 0 0 "+Ht+" "+(Pt+Re*at)+","+Kt+"H"+(zt-Re*at)+"A "+Re+","+Re+" 0 0 "+Ht+" "+zt+","+(Kt-Re*Ct)+"V"+(Nt+Re*Ct)+"A "+Re+","+Re+" 0 0 "+Ht+" "+(zt-Re*at)+","+Nt+"Z";else{nt=Math.abs(Kt-Nt)+St;var $r=nt<Re?Re-Math.sqrt(nt*(2*Re-nt)):0,Mr=St>0?Math.sqrt(St*(2*Re-St)):0,Ir=Ct>0?Math.max:Math.min;tt="M"+(Pt+$r*at)+","+Nt+"V"+Ir(Kt-(Re-St)*Ct,Nt)+"A "+Re+","+Re+" 0 0 "+Ht+" "+(Pt+Re*at-Mr)+","+Kt+"H"+(zt-Re*at+Mr)+"A "+Re+","+Re+" 0 0 "+Ht+" "+(zt-$r*at)+","+Ir(Kt-(Re-St)*Ct,Nt)+"V"+Nt+"Z"}}else tt=dt}else tt=dt;var gr=Y(u.ensureSingle(jt,"path"),V,te,ae);if(gr.style("vector-effect",re?"none":"non-scaling-stroke").attr("d",isNaN((zt-Pt)*(Kt-Nt))||_t&&be._context.staticPlot?"M0,0Z":tt).call(m.setClipUrl,Ee.layerClipId,be),!V.uniformtext.mode&&vt){var br=m.makePointStyleFns(ie);m.singlePointStyle(et,gr,ie,br,be)}q(be,Ee,jt,B,ht,Pt,zt,Nt,Kt,Re,St,te,ae),Ee.layerClipId&&m.hideOutsideRangePoint(et,jt.select("text"),G,K,ie.xcalendar,ie.ycalendar)});var Be=ie.cliponaxis===!1;m.setClipUrl(oe,Be?null:Ee.layerClipId,be)});g.getComponentMethod("errorbars","plot")(be,D,Ee,te)}function q(be,Ee,Te,He,te,ae,G,K,V,re,D,B,oe){var ie=Ee.xaxis,ge=Ee.yaxis,_e=be._fullLayout,Se;function De(nt,dt,St){var Dt=u.ensureSingle(nt,"text").text(dt).attr({class:"bartext bartext-"+Se,"text-anchor":"middle","data-notex":1}).call(m.font,St).call(p.convertToTspans,be);return Dt}var Ge=He[0].trace,Je=Ge.orientation==="h",yt=ce(_e,He,te,ie,ge);Se=de(Ge,te);var ut=B.mode==="stack"||B.mode==="relative",vt=He[te],Ae=!ut||vt._outmost,Fe=vt.hasB,ke=re&&re-D>k;if(!yt||Se==="none"||(vt.isBlank||ae===G||K===V)&&(Se==="auto"||Se==="inside")){Te.select("text").remove();return}var Be=_e.font,et=S.getBarColor(He[te],Ge),ht=S.getInsideTextFont(Ge,te,Be,et),jt=S.getOutsideTextFont(Ge,te,Be),At=Ge.insidetextanchor||"end",Pt=Te.datum();Je?ie.type==="log"&&Pt.s0<=0&&(ie.range[0]<ie.range[1]?ae=0:ae=ie._length):ge.type==="log"&&Pt.s0<=0&&(ge.range[0]<ge.range[1]?K=ge._length:K=0);var zt=Math.abs(G-ae),Nt=Math.abs(V-K),Kt=zt-2*k,_t=Nt-2*k,Qt,fr,Vt,rr,Ne;if(Se==="outside"&&!Ae&&!vt.hasB&&(Se="inside"),Se==="auto")if(Ae){Se="inside",Ne=u.ensureUniformFontSize(be,ht),Qt=De(Te,yt,Ne),fr=m.bBox(Qt.node()),Vt=fr.width,rr=fr.height;var $e=Vt>0&&rr>0,Ue;ke?Fe?Ue=X(Kt-2*re,_t,Vt,rr,Je)||X(Kt,_t-2*re,Vt,rr,Je):Je?Ue=X(Kt-(re-D),_t,Vt,rr,Je)||X(Kt,_t-2*(re-D),Vt,rr,Je):Ue=X(Kt,_t-(re-D),Vt,rr,Je)||X(Kt-2*(re-D),_t,Vt,rr,Je):Ue=X(Kt,_t,Vt,rr,Je),$e&&Ue?Se="inside":(Se="outside",Qt.remove(),Qt=null)}else Se="inside";if(!Qt){Ne=u.ensureUniformFontSize(be,Se==="outside"?jt:ht),Qt=De(Te,yt,Ne);var fe=Qt.attr("transform");if(Qt.attr("transform",""),fr=m.bBox(Qt.node()),Vt=fr.width,rr=fr.height,Qt.attr("transform",fe),Vt<=0||rr<=0){Qt.remove();return}}var je=Ge.textangle,Pe,Re;Se==="outside"?(Re=Ge.constraintext==="both"||Ge.constraintext==="outside",Pe=W(ae,G,K,V,fr,{isHorizontal:Je,constrained:Re,angle:je})):(Re=Ge.constraintext==="both"||Ge.constraintext==="inside",Pe=ne(ae,G,K,V,fr,{isHorizontal:Je,constrained:Re,angle:je,anchor:At,hasB:Fe,r:re,overhead:D})),Pe.fontSize=Ne.size,T(Ge.type==="histogram"?"bar":Ge.type,Pe,_e),vt.transform=Pe;var tt=Y(Qt,_e,B,oe);u.setTransormAndDisplay(tt,Pe)}function X(be,Ee,Te,He,te){if(be<0||Ee<0)return!1;var ae=Te<=be&&He<=Ee,G=Te<=Ee&&He<=be,K=te?be>=Te*(Ee/He):Ee>=He*(be/Te);return ae||G||K}function Q(be){return be==="auto"?0:be}function ee(be,Ee){var Te=Math.PI/180*Ee,He=Math.abs(Math.sin(Te)),te=Math.abs(Math.cos(Te));return{x:be.width*te+be.height*He,y:be.width*He+be.height*te}}function ne(be,Ee,Te,He,te,ae){var G=!!ae.isHorizontal,K=!!ae.constrained,V=ae.angle||0,re=ae.anchor,D=re==="end",B=re==="start",oe=ae.leftToRight||0,ie=(oe+1)/2,ge=1-ie,_e=ae.hasB,Se=ae.r,De=ae.overhead,Ge=te.width,Je=te.height,yt=Math.abs(Ee-be),ut=Math.abs(He-Te),vt=yt>2*k&&ut>2*k?k:0;yt-=2*vt,ut-=2*vt;var Ae=Q(V);V==="auto"&&!(Ge<=yt&&Je<=ut)&&(Ge>yt||Je>ut)&&(!(Ge>ut||Je>yt)||Ge<Je!=yt<ut)&&(Ae+=90);var Fe=ee(te,Ae),ke,Be;if(Se&&Se-De>k){var et=le(be,Ee,Te,He,Fe,Se,De,G,_e);ke=et.scale,Be=et.pad}else ke=1,K&&(ke=Math.min(1,yt/Fe.x,ut/Fe.y)),Be=0;var ht=te.left*ge+te.right*ie,jt=(te.top+te.bottom)/2,At=(be+k)*ge+(Ee-k)*ie,Pt=(Te+He)/2,zt=0,Nt=0;if(B||D){var Kt=(G?Fe.x:Fe.y)/2;Se&&(D||_e)&&(vt+=Be);var _t=G?J(be,Ee):J(Te,He);G?B?(At=be+_t*vt,zt=-_t*Kt):(At=Ee-_t*vt,zt=_t*Kt):B?(Pt=Te+_t*vt,Nt=-_t*Kt):(Pt=He-_t*vt,Nt=_t*Kt)}return{textX:ht,textY:jt,targetX:At,targetY:Pt,anchorX:zt,anchorY:Nt,scale:ke,rotate:Ae}}function le(be,Ee,Te,He,te,ae,G,K,V){var re=Math.max(0,Math.abs(Ee-be)-2*k),D=Math.max(0,Math.abs(He-Te)-2*k),B=ae-k,oe=G?B-Math.sqrt(B*B-(B-G)*(B-G)):B,ie=V?B*2:K?B-G:2*oe,ge=V?B*2:K?2*oe:B-G,_e,Se,De,Ge,Je;return te.y/te.x>=D/(re-ie)?Ge=D/te.y:te.y/te.x<=(D-ge)/re?Ge=re/te.x:!V&&K?(_e=te.x*te.x+te.y*te.y/4,Se=-2*te.x*(re-B)-te.y*(D/2-B),De=(re-B)*(re-B)+(D/2-B)*(D/2-B)-B*B,Ge=(-Se+Math.sqrt(Se*Se-4*_e*De))/(2*_e)):V?(_e=(te.x*te.x+te.y*te.y)/4,Se=-te.x*(re/2-B)-te.y*(D/2-B),De=(re/2-B)*(re/2-B)+(D/2-B)*(D/2-B)-B*B,Ge=(-Se+Math.sqrt(Se*Se-4*_e*De))/(2*_e)):(_e=te.x*te.x/4+te.y*te.y,Se=-te.x*(re/2-B)-2*te.y*(D-B),De=(re/2-B)*(re/2-B)+(D-B)*(D-B)-B*B,Ge=(-Se+Math.sqrt(Se*Se-4*_e*De))/(2*_e)),Ge=Math.min(1,Ge),K?Je=Math.max(0,B-Math.sqrt(Math.max(0,B*B-(B-(D-te.y*Ge)/2)*(B-(D-te.y*Ge)/2)))-G):Je=Math.max(0,B-Math.sqrt(Math.max(0,B*B-(B-(re-te.x*Ge)/2)*(B-(re-te.x*Ge)/2)))-G),{scale:Ge,pad:Je}}function W(be,Ee,Te,He,te,ae){var G=!!ae.isHorizontal,K=!!ae.constrained,V=ae.angle||0,re=te.width,D=te.height,B=Math.abs(Ee-be),oe=Math.abs(He-Te),ie;G?ie=oe>2*k?k:0:ie=B>2*k?k:0;var ge=1;K&&(ge=G?Math.min(1,oe/D):Math.min(1,B/re));var _e=Q(V),Se=ee(te,_e),De=(G?Se.x:Se.y)/2,Ge=(te.left+te.right)/2,Je=(te.top+te.bottom)/2,yt=(be+Ee)/2,ut=(Te+He)/2,vt=0,Ae=0,Fe=G?J(Ee,be):J(Te,He);return G?(yt=Ee-Fe*ie,vt=Fe*De):(ut=He+Fe*ie,Ae=-Fe*De),{textX:Ge,textY:Je,targetX:yt,targetY:ut,anchorX:vt,anchorY:Ae,scale:ge,rotate:_e}}function ce(be,Ee,Te,He,te){var ae=Ee[0].trace,G=ae.texttemplate,K;return G?K=pe(be,Ee,Te,He,te):ae.textinfo?K=he(Ee,Te,He,te):K=R.getValue(ae.text,Te),R.coerceString(C,K)}function de(be,Ee){var Te=R.getValue(be.textposition,Ee);return R.coerceEnumerated(j,Te)}function pe(be,Ee,Te,He,te){var ae=Ee[0].trace,G=u.castOption(ae,Te,"texttemplate");if(!G)return"";var K=ae.type==="histogram",V=ae.type==="waterfall",re=ae.type==="funnel",D=ae.orientation==="h",B,oe,ie,ge;D?(B="y",oe=te,ie="x",ge=He):(B="x",oe=He,ie="y",ge=te);function _e(vt){return w(oe,oe.c2l(vt),!0).text}function Se(vt){return w(ge,ge.c2l(vt),!0).text}var De=Ee[Te],Ge={};Ge.label=De.p,Ge.labelLabel=Ge[B+"Label"]=_e(De.p);var Je=u.castOption(ae,De.i,"text");(Je===0||Je)&&(Ge.text=Je),Ge.value=De.s,Ge.valueLabel=Ge[ie+"Label"]=Se(De.s);var yt={};b(yt,ae,De.i),(K||yt.x===void 0)&&(yt.x=D?Ge.value:Ge.label),(K||yt.y===void 0)&&(yt.y=D?Ge.label:Ge.value),(K||yt.xLabel===void 0)&&(yt.xLabel=D?Ge.valueLabel:Ge.labelLabel),(K||yt.yLabel===void 0)&&(yt.yLabel=D?Ge.labelLabel:Ge.valueLabel),V&&(Ge.delta=+De.rawS||De.s,Ge.deltaLabel=Se(Ge.delta),Ge.final=De.v,Ge.finalLabel=Se(Ge.final),Ge.initial=Ge.final-Ge.delta,Ge.initialLabel=Se(Ge.initial)),re&&(Ge.value=De.s,Ge.valueLabel=Se(Ge.value),Ge.percentInitial=De.begR,Ge.percentInitialLabel=u.formatPercent(De.begR),Ge.percentPrevious=De.difR,Ge.percentPreviousLabel=u.formatPercent(De.difR),Ge.percentTotal=De.sumR,Ge.percenTotalLabel=u.formatPercent(De.sumR));var ut=u.castOption(ae,De.i,"customdata");return ut&&(Ge.customdata=ut),u.texttemplateString(G,Ge,be._d3locale,yt,Ge,ae._meta||{})}function he(be,Ee,Te,He){var te=be[0].trace,ae=te.orientation==="h",G=te.type==="waterfall",K=te.type==="funnel";function V(ut){var vt=ae?He:Te;return w(vt,ut,!0).text}function re(ut){var vt=ae?Te:He;return w(vt,+ut,!0).text}var D=te.textinfo,B=be[Ee],oe=D.split("+"),ie=[],ge,_e=function(ut){return oe.indexOf(ut)!==-1};if(_e("label")&&ie.push(V(be[Ee].p)),_e("text")&&(ge=u.castOption(te,B.i,"text"),(ge===0||ge)&&ie.push(ge)),G){var Se=+B.rawS||B.s,De=B.v,Ge=De-Se;_e("initial")&&ie.push(re(Ge)),_e("delta")&&ie.push(re(Se)),_e("final")&&ie.push(re(De))}if(K){_e("value")&&ie.push(re(B.s));var Je=0;_e("percent initial")&&Je++,_e("percent previous")&&Je++,_e("percent total")&&Je++;var yt=Je>1;_e("percent initial")&&(ge=u.formatPercent(B.begR),yt&&(ge+=" of initial"),ie.push(ge)),_e("percent previous")&&(ge=u.formatPercent(B.difR),yt&&(ge+=" of previous"),ie.push(ge)),_e("percent total")&&(ge=u.formatPercent(B.sumR),yt&&(ge+=" of total"),ie.push(ge))}return ie.join("<br>")}$.exports={plot:z,toMoveInsideBar:ne}}}),wS=i({"src/traces/bar/hover.js"(U,$){var h=po(),c=mn(),u=pt(),p=kr().fillText,v=zm().getLineWidth,m=ji().hoverLabelText,g=Ce().BADNUM;function w(y,S,R,M,A){var C=l(y,S,R,M,A);if(C){var j=C.cd,b=j[0].trace,k=j[C.index];return C.color=T(b,k),c.getComponentMethod("errorbars","hoverInfo")(k,b,C),[C]}}function l(y,S,R,M,A){var C=y.cd,j=C[0].trace,b=C[0].t,k=M==="closest",E=j.type==="waterfall",F=y.maxHoverDistance,P=y.maxSpikeDistance,J,H,Y,Z,z,q,X;j.orientation==="h"?(J=R,H=S,Y="y",Z="x",z=He,q=be):(J=S,H=R,Y="x",Z="y",q=He,z=be);var Q=j[Y+"period"],ee=k||Q;function ne(ge){return W(ge,-1)}function le(ge){return W(ge,1)}function W(ge,_e){var Se=ge.w;return ge[Y]+_e*Se/2}function ce(ge){return ge[Y+"End"]-ge[Y+"Start"]}var de=k?ne:Q?function(ge){return ge.p-ce(ge)/2}:function(ge){return Math.min(ne(ge),ge.p-b.bardelta/2)},pe=k?le:Q?function(ge){return ge.p+ce(ge)/2}:function(ge){return Math.max(le(ge),ge.p+b.bardelta/2)};function he(ge,_e,Se){return A.finiteRange&&(Se=0),h.inbox(ge-J,_e-J,Se+Math.min(1,Math.abs(_e-ge)/X)-1)}function be(ge){return he(de(ge),pe(ge),F)}function Ee(ge){return he(ne(ge),le(ge),P)}function Te(ge){var _e=ge[Z];if(E){var Se=Math.abs(ge.rawS)||0;H>0?_e+=Se:H<0&&(_e-=Se)}return _e}function He(ge){var _e=H,Se=ge.b,De=Te(ge);return h.inbox(Se-_e,De-_e,F+(De-_e)/(De-Se)-1)}function te(ge){var _e=H,Se=ge.b,De=Te(ge);return h.inbox(Se-_e,De-_e,P+(De-_e)/(De-Se)-1)}var ae=y[Y+"a"],G=y[Z+"a"];X=Math.abs(ae.r2c(ae.range[1])-ae.r2c(ae.range[0]));function K(ge){return(z(ge)+q(ge))/2}var V=h.getDistanceFunction(M,z,q,K);if(h.getClosest(C,V,y),y.index!==!1&&C[y.index].p!==g){ee||(de=function(ge){return Math.min(ne(ge),ge.p-b.bargroupwidth/2)},pe=function(ge){return Math.max(le(ge),ge.p+b.bargroupwidth/2)});var re=y.index,D=C[re],B=j.base?D.b+D.s:D.s;y[Z+"0"]=y[Z+"1"]=G.c2p(D[Z],!0),y[Z+"LabelVal"]=B;var oe=b.extents[b.extents.round(D.p)];y[Y+"0"]=ae.c2p(k?de(D):oe[0],!0),y[Y+"1"]=ae.c2p(k?pe(D):oe[1],!0);var ie=D.orig_p!==void 0;return y[Y+"LabelVal"]=ie?D.orig_p:D.p,y.labelLabel=m(ae,y[Y+"LabelVal"],j[Y+"hoverformat"]),y.valueLabel=m(G,y[Z+"LabelVal"],j[Z+"hoverformat"]),y.baseLabel=m(G,D.b,j[Z+"hoverformat"]),y.spikeDistance=(te(D)+Ee(D))/2,y[Y+"Spike"]=ae.c2p(D.p,!0),p(D,j,y),y.hovertemplate=j.hovertemplate,y}}function T(y,S){var R=S.mcc||y.marker.color,M=S.mlcc||y.marker.line.color,A=v(y,S);if(u.opacity(R))return R;if(u.opacity(M)&&A)return M}$.exports={hoverPoints:w,hoverOnBars:l,getTraceColor:T}}}),_S=i({"src/traces/bar/event_data.js"(U,$){$.exports=function(c,u,p){return c.x="xVal"in u?u.xVal:u.x,c.y="yVal"in u?u.yVal:u.y,u.xa&&(c.xaxis=u.xa),u.ya&&(c.yaxis=u.ya),p.orientation==="h"?(c.label=c.y,c.value=c.x):(c.label=c.x,c.value=c.y),c}}}),kS=i({"src/traces/bar/select.js"(U,$){$.exports=function(u,p){var v=u.cd,m=u.xaxis,g=u.yaxis,w=v[0].trace,l=w.type==="funnel",T=w.orientation==="h",y=[],S;if(p===!1)for(S=0;S<v.length;S++)v[S].selected=0;else for(S=0;S<v.length;S++){var R=v[S],M="ct"in R?R.ct:h(R,m,g,T,l);p.contains(M,!1,S,u)?(y.push({pointNumber:S,x:m.c2d(R.x),y:g.c2d(R.y)}),R.selected=1):R.selected=0}return y};function h(c,u,p,v,m){var g=u.c2p(v?c.s0:c.p0,!0),w=u.c2p(v?c.s1:c.p1,!0),l=p.c2p(v?c.p0:c.s0,!0),T=p.c2p(v?c.p1:c.s1,!0);return m?[(g+w)/2,(l+T)/2]:v?[w,(l+T)/2]:[(g+w)/2,T]}}}),SS=i({"src/traces/bar/index.js"(U,$){$.exports={attributes:Jf(),layoutAttributes:Qy(),supplyDefaults:Kf().supplyDefaults,crossTraceDefaults:Kf().crossTraceDefaults,supplyLayoutDefaults:yS(),calc:xS(),crossTraceCalc:zy().crossTraceCalc,colorbar:Fy(),arraysToCalcdata:Jy(),plot:bS().plot,style:Fm().style,styleOnSelect:Fm().styleOnSelect,hoverPoints:wS().hoverPoints,eventData:_S(),selectPoints:kS(),moduleType:"trace",name:"bar",basePlotModule:Am(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}}}),MS=i({"lib/bar.js"(U,$){$.exports=SS()}}),Ky=i({"src/traces/pie/attributes.js"(U,$){var h=lt(),c=Pm().attributes,u=er(),p=Ft(),v=ea().hovertemplateAttrs,m=ea().texttemplateAttrs,g=It().extendFlat,w=si().pattern,l=u({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:p.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:w,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:g({},h.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:v({},{keys:["label","color","value","percent","text"]}),texttemplate:m({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:g({},l,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:g({},l,{}),outsidetextfont:g({},l,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:g({},l,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:c({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}}}),TS=i({"src/traces/pie/defaults.js"(U,$){var h=xe(),c=kr(),u=Ky(),p=Pm().defaults,v=Kf().handleText,m=kr().coercePattern;function g(T,y){var S=c.isArrayOrTypedArray(T),R=c.isArrayOrTypedArray(y),M=Math.min(S?T.length:1/0,R?y.length:1/0);if(isFinite(M)||(M=0),M&&R){for(var A,C=0;C<M;C++){var j=y[C];if(h(j)&&j>0){A=!0;break}}A||(M=0)}return{hasLabels:S,hasValues:R,len:M}}function w(T,y,S,R,M){var A=R("marker.line.width");A&&R("marker.line.color",M?void 0:S.paper_bgcolor);var C=R("marker.colors");m(R,"marker.pattern",C),T.marker&&!y.marker.pattern.fgcolor&&(y.marker.pattern.fgcolor=T.marker.colors),y.marker.pattern.bgcolor||(y.marker.pattern.bgcolor=S.paper_bgcolor)}function l(T,y,S,R){function M(q,X){return c.coerce(T,y,u,q,X)}var A=M("labels"),C=M("values"),j=g(A,C),b=j.len;if(y._hasLabels=j.hasLabels,y._hasValues=j.hasValues,!y._hasLabels&&y._hasValues&&(M("label0"),M("dlabel")),!b){y.visible=!1;return}y._length=b,w(T,y,R,M,!0),M("scalegroup");var k=M("text"),E=M("texttemplate"),F;if(E||(F=M("textinfo",c.isArrayOrTypedArray(k)?"text+percent":"percent")),M("hovertext"),M("hovertemplate"),E||F&&F!=="none"){var P=M("textposition");v(T,y,R,M,P,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var J=Array.isArray(P)||P==="auto",H=J||P==="outside";H&&M("automargin"),(P==="inside"||P==="auto"||Array.isArray(P))&&M("insidetextorientation")}else F==="none"&&M("textposition","none");p(y,R,M);var Y=M("hole"),Z=M("title.text");if(Z){var z=M("title.position",Y?"middle center":"top center");!Y&&z==="middle center"&&(y.title.position="top center"),c.coerceFont(M,"title.font",R.font)}M("sort"),M("direction"),M("rotation"),M("pull")}$.exports={handleLabelsAndValues:g,handleMarkerDefaults:w,supplyDefaults:l}}}),e1=i({"src/traces/pie/layout_attributes.js"(U,$){$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}}}),AS=i({"src/traces/pie/layout_defaults.js"(U,$){var h=kr(),c=e1();$.exports=function(p,v){function m(g,w){return h.coerce(p,v,c,g,w)}m("hiddenlabels"),m("piecolorway",v.colorway),m("extendpiecolors")}}}),t1=i({"src/traces/pie/calc.js"(U,$){var h=xe(),c=wt(),u=pt(),p={};function v(l,T){var y=[],S=l._fullLayout,R=S.hiddenlabels||[],M=T.labels,A=T.marker.colors||[],C=T.values,j=T._length,b=T._hasValues&&j,k,E;if(T.dlabel)for(M=new Array(j),k=0;k<j;k++)M[k]=String(T.label0+k*T.dlabel);var F={},P=m(S["_"+T.type+"colormap"]),J=0,H=!1;for(k=0;k<j;k++){var Y,Z,z;if(b){if(Y=C[k],!h(Y))continue;Y=+Y}else Y=1;Z=M[k],(Z===void 0||Z==="")&&(Z=k),Z=String(Z);var q=F[Z];q===void 0?(F[Z]=y.length,z=R.indexOf(Z)!==-1,z||(J+=Y),y.push({v:Y,label:Z,color:P(A[k],Z),i:k,pts:[k],hidden:z})):(H=!0,E=y[q],E.v+=Y,E.pts.push(k),E.hidden||(J+=Y),E.color===!1&&A[k]&&(E.color=P(A[k],Z)))}y=y.filter(function(Q){return Q.v>=0});var X=T.type==="funnelarea"?H:T.sort;return X&&y.sort(function(Q,ee){return ee.v-Q.v}),y[0]&&(y[0].vTotal=J),y}function m(l){return function(y,S){return!y||(y=c(y),!y.isValid())?!1:(y=u.addOpacity(y,y.getAlpha()),l[S]||(l[S]=y),y)}}function g(l,T){var y=(T||{}).type;y||(y="pie");var S=l._fullLayout,R=l.calcdata,M=S[y+"colorway"],A=S["_"+y+"colormap"];S["extend"+y+"colors"]&&(M=w(M,p));for(var C=0,j=0;j<R.length;j++){var b=R[j],k=b[0].trace.type;if(k===y)for(var E=0;E<b.length;E++){var F=b[E];F.color===!1&&(A[F.label]?F.color=A[F.label]:(A[F.label]=F.color=M[C%M.length],C++))}}}function w(l,T){var y,S=JSON.stringify(l),R=T[S];if(!R){for(R=l.slice(),y=0;y<l.length;y++)R.push(c(l[y]).lighten(20).toHexString());for(y=0;y<l.length;y++)R.push(c(l[y]).darken(20).toHexString());T[S]=R}return R}$.exports={calc:v,crossTraceCalc:g,makePullColorFn:m,generateExtendedColors:w}}}),CS=i({"src/traces/pie/event_data.js"(U,$){var h=ts().appendArrayMultiPointValues;$.exports=function(u,p){var v={curveNumber:p.index,pointNumbers:u.pts,data:p._input,fullData:p,label:u.label,color:u.color,value:u.v,percent:u.percent,text:u.text,bbox:u.bbox,v:u.v};return u.pts.length===1&&(v.pointNumber=v.i=u.pts[0]),h(v,p,u.pts),p.type==="funnelarea"&&(delete v.v,delete v.i),v}}}),jS=i({"src/traces/pie/plot.js"(U,$){var h=d(),c=Xi(),u=po(),p=pt(),v=di(),m=kr(),g=m.strScale,w=m.strTranslate,l=Ra(),T=eh(),y=T.recordMinTextSize,S=T.clearMinTextSize,R=Nm().TEXTPAD,M=uu(),A=CS(),C=kr().isValidTextValue;function j(ae,G){var K=ae._context.staticPlot,V=ae._fullLayout,re=V._size;S("pie",V),P(G,ae),he(G,re);var D=m.makeTraceGroups(V._pielayer,G,"trace").each(function(B){var oe=h.select(this),ie=B[0],ge=ie.trace;Ee(B),oe.attr("stroke-linejoin","round"),oe.each(function(){var _e=h.select(this).selectAll("g.slice").data(B);_e.enter().append("g").classed("slice",!0),_e.exit().remove();var Se=[[[],[]],[[],[]]],De=!1;_e.each(function(ke,Be){if(ke.hidden){h.select(this).selectAll("path,g").remove();return}ke.pointNumber=ke.i,ke.curveNumber=ge.index,Se[ke.pxmid[1]<0?0:1][ke.pxmid[0]<0?0:1].push(ke);var et=ie.cx,ht=ie.cy,jt=h.select(this),At=jt.selectAll("path.surface").data([ke]);if(At.enter().append("path").classed("surface",!0).style({"pointer-events":K?"none":"all"}),jt.call(k,ae,B),ge.pull){var Pt=+M.castOption(ge.pull,ke.pts)||0;Pt>0&&(et+=Pt*ke.pxmid[0],ht+=Pt*ke.pxmid[1])}ke.cxFinal=et,ke.cyFinal=ht;function zt(rr,Ne,$e,Ue){var fe=Ue*(Ne[0]-rr[0]),je=Ue*(Ne[1]-rr[1]);return"a"+Ue*ie.r+","+Ue*ie.r+" 0 "+ke.largeArc+($e?" 1 ":" 0 ")+fe+","+je}var Nt=ge.hole;if(ke.v===ie.vTotal){var Kt="M"+(et+ke.px0[0])+","+(ht+ke.px0[1])+zt(ke.px0,ke.pxmid,!0,1)+zt(ke.pxmid,ke.px0,!0,1)+"Z";Nt?At.attr("d","M"+(et+Nt*ke.px0[0])+","+(ht+Nt*ke.px0[1])+zt(ke.px0,ke.pxmid,!1,Nt)+zt(ke.pxmid,ke.px0,!1,Nt)+"Z"+Kt):At.attr("d",Kt)}else{var _t=zt(ke.px0,ke.px1,!0,1);if(Nt){var Qt=1-Nt;At.attr("d","M"+(et+Nt*ke.px1[0])+","+(ht+Nt*ke.px1[1])+zt(ke.px1,ke.px0,!1,Nt)+"l"+Qt*ke.px0[0]+","+Qt*ke.px0[1]+_t+"Z")}else At.attr("d","M"+et+","+ht+"l"+ke.px0[0]+","+ke.px0[1]+_t+"Z")}He(ae,ke,ie);var fr=M.castOption(ge.textposition,ke.pts),Vt=jt.selectAll("g.slicetext").data(ke.text&&fr!=="none"?[0]:[]);Vt.enter().append("g").classed("slicetext",!0),Vt.exit().remove(),Vt.each(function(){var rr=m.ensureSingle(h.select(this),"text","",function(tt){tt.attr("data-notex",1)}),Ne=m.ensureUniformFontSize(ae,fr==="outside"?E(ge,ke,V.font):F(ge,ke,V.font));rr.text(ke.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,Ne).call(l.convertToTspans,ae);var $e=v.bBox(rr.node()),Ue;if(fr==="outside")Ue=ee($e,ke);else if(Ue=J($e,ke,ie),fr==="auto"&&Ue.scale<1){var fe=m.ensureUniformFontSize(ae,ge.outsidetextfont);rr.call(v.font,fe),$e=v.bBox(rr.node()),Ue=ee($e,ke)}var je=Ue.textPosAngle,Pe=je===void 0?ke.pxmid:Te(ie.r,je);if(Ue.targetX=et+Pe[0]*Ue.rCenter+(Ue.x||0),Ue.targetY=ht+Pe[1]*Ue.rCenter+(Ue.y||0),te(Ue,$e),Ue.outside){var Re=Ue.targetY;ke.yLabelMin=Re-$e.height/2,ke.yLabelMid=Re,ke.yLabelMax=Re+$e.height/2,ke.labelExtraX=0,ke.labelExtraY=0,De=!0}Ue.fontSize=Ne.size,y(ge.type,Ue,V),B[Be].transform=Ue,m.setTransormAndDisplay(rr,Ue)})});var Ge=h.select(this).selectAll("g.titletext").data(ge.title.text?[0]:[]);if(Ge.enter().append("g").classed("titletext",!0),Ge.exit().remove(),Ge.each(function(){var ke=m.ensureSingle(h.select(this),"text","",function(ht){ht.attr("data-notex",1)}),Be=ge.title.text;ge._meta&&(Be=m.templateString(Be,ge._meta)),ke.text(Be).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,ge.title.font).call(l.convertToTspans,ae);var et;ge.title.position==="middle center"?et=ne(ie):et=le(ie,re),ke.attr("transform",w(et.x,et.y)+g(Math.min(1,et.scale))+w(et.tx,et.ty))}),De&&pe(Se,ge),b(_e,ge),De&&ge.automargin){var Je=v.bBox(oe.node()),yt=ge.domain,ut=re.w*(yt.x[1]-yt.x[0]),vt=re.h*(yt.y[1]-yt.y[0]),Ae=(.5*ut-ie.r)/re.w,Fe=(.5*vt-ie.r)/re.h;c.autoMargin(ae,"pie."+ge.uid+".automargin",{xl:yt.x[0]-Ae,xr:yt.x[1]+Ae,yb:yt.y[0]-Fe,yt:yt.y[1]+Fe,l:Math.max(ie.cx-ie.r-Je.left,0),r:Math.max(Je.right-(ie.cx+ie.r),0),b:Math.max(Je.bottom-(ie.cy+ie.r),0),t:Math.max(ie.cy-ie.r-Je.top,0),pad:5})}})});setTimeout(function(){D.selectAll("tspan").each(function(){var B=h.select(this);B.attr("dy")&&B.attr("dy",B.attr("dy"))})},0)}function b(ae,G){ae.each(function(K){var V=h.select(this);if(!K.labelExtraX&&!K.labelExtraY){V.select("path.textline").remove();return}var re=V.select("g.slicetext text");K.transform.targetX+=K.labelExtraX,K.transform.targetY+=K.labelExtraY,m.setTransormAndDisplay(re,K.transform);var D=K.cxFinal+K.pxmid[0],B=K.cyFinal+K.pxmid[1],oe="M"+D+","+B,ie=(K.yLabelMax-K.yLabelMin)*(K.pxmid[0]<0?-1:1)/4;if(K.labelExtraX){var ge=K.labelExtraX*K.pxmid[1]/K.pxmid[0],_e=K.yLabelMid+K.labelExtraY-(K.cyFinal+K.pxmid[1]);Math.abs(ge)>Math.abs(_e)?oe+="l"+_e*K.pxmid[0]/K.pxmid[1]+","+_e+"H"+(D+K.labelExtraX+ie):oe+="l"+K.labelExtraX+","+ge+"v"+(_e-ge)+"h"+ie}else oe+="V"+(K.yLabelMid+K.labelExtraY)+"h"+ie;m.ensureSingle(V,"path","textline").call(p.stroke,G.outsidetextfont.color).attr({"stroke-width":Math.min(2,G.outsidetextfont.size/8),d:oe,fill:"none"})})}function k(ae,G,K){var V=K[0],re=V.cx,D=V.cy,B=V.trace,oe=B.type==="funnelarea";"_hasHoverLabel"in B||(B._hasHoverLabel=!1),"_hasHoverEvent"in B||(B._hasHoverEvent=!1),ae.on("mouseover",function(ie){var ge=G._fullLayout,_e=G._fullData[B.index];if(!(G._dragging||ge.hovermode===!1)){var Se=_e.hoverinfo;if(Array.isArray(Se)&&(Se=u.castHoverinfo({hoverinfo:[M.castOption(Se,ie.pts)],_module:B._module},ge,0)),Se==="all"&&(Se="label+text+value+percent+name"),_e.hovertemplate||Se!=="none"&&Se!=="skip"&&Se){var De=ie.rInscribed||0,Ge=re+ie.pxmid[0]*(1-De),Je=D+ie.pxmid[1]*(1-De),yt=ge.separators,ut=[];if(Se&&Se.indexOf("label")!==-1&&ut.push(ie.label),ie.text=M.castOption(_e.hovertext||_e.text,ie.pts),Se&&Se.indexOf("text")!==-1){var vt=ie.text;m.isValidTextValue(vt)&&ut.push(vt)}ie.value=ie.v,ie.valueLabel=M.formatPieValue(ie.v,yt),Se&&Se.indexOf("value")!==-1&&ut.push(ie.valueLabel),ie.percent=ie.v/V.vTotal,ie.percentLabel=M.formatPiePercent(ie.percent,yt),Se&&Se.indexOf("percent")!==-1&&ut.push(ie.percentLabel);var Ae=_e.hoverlabel,Fe=Ae.font,ke=[];u.loneHover({trace:B,x0:Ge-De*V.r,x1:Ge+De*V.r,y:Je,_x0:oe?re+ie.TL[0]:Ge-De*V.r,_x1:oe?re+ie.TR[0]:Ge+De*V.r,_y0:oe?D+ie.TL[1]:Je-De*V.r,_y1:oe?D+ie.BL[1]:Je+De*V.r,text:ut.join("<br>"),name:_e.hovertemplate||Se.indexOf("name")!==-1?_e.name:void 0,idealAlign:ie.pxmid[0]<0?"left":"right",color:M.castOption(Ae.bgcolor,ie.pts)||ie.color,borderColor:M.castOption(Ae.bordercolor,ie.pts),fontFamily:M.castOption(Fe.family,ie.pts),fontSize:M.castOption(Fe.size,ie.pts),fontColor:M.castOption(Fe.color,ie.pts),nameLength:M.castOption(Ae.namelength,ie.pts),textAlign:M.castOption(Ae.align,ie.pts),hovertemplate:M.castOption(_e.hovertemplate,ie.pts),hovertemplateLabels:ie,eventData:[A(ie,_e)]},{container:ge._hoverlayer.node(),outerContainer:ge._paper.node(),gd:G,inOut_bbox:ke}),ie.bbox=ke[0],B._hasHoverLabel=!0}B._hasHoverEvent=!0,G.emit("plotly_hover",{points:[A(ie,_e)],event:h.event})}}),ae.on("mouseout",function(ie){var ge=G._fullLayout,_e=G._fullData[B.index],Se=h.select(this).datum();B._hasHoverEvent&&(ie.originalEvent=h.event,G.emit("plotly_unhover",{points:[A(Se,_e)],event:h.event}),B._hasHoverEvent=!1),B._hasHoverLabel&&(u.loneUnhover(ge._hoverlayer.node()),B._hasHoverLabel=!1)}),ae.on("click",function(ie){var ge=G._fullLayout,_e=G._fullData[B.index];G._dragging||ge.hovermode===!1||(G._hoverdata=[A(ie,_e)],u.click(G,h.event))})}function E(ae,G,K){var V=M.castOption(ae.outsidetextfont.color,G.pts)||M.castOption(ae.textfont.color,G.pts)||K.color,re=M.castOption(ae.outsidetextfont.family,G.pts)||M.castOption(ae.textfont.family,G.pts)||K.family,D=M.castOption(ae.outsidetextfont.size,G.pts)||M.castOption(ae.textfont.size,G.pts)||K.size,B=M.castOption(ae.outsidetextfont.weight,G.pts)||M.castOption(ae.textfont.weight,G.pts)||K.weight,oe=M.castOption(ae.outsidetextfont.style,G.pts)||M.castOption(ae.textfont.style,G.pts)||K.style,ie=M.castOption(ae.outsidetextfont.variant,G.pts)||M.castOption(ae.textfont.variant,G.pts)||K.variant,ge=M.castOption(ae.outsidetextfont.textcase,G.pts)||M.castOption(ae.textfont.textcase,G.pts)||K.textcase,_e=M.castOption(ae.outsidetextfont.lineposition,G.pts)||M.castOption(ae.textfont.lineposition,G.pts)||K.lineposition,Se=M.castOption(ae.outsidetextfont.shadow,G.pts)||M.castOption(ae.textfont.shadow,G.pts)||K.shadow;return{color:V,family:re,size:D,weight:B,style:oe,variant:ie,textcase:ge,lineposition:_e,shadow:Se}}function F(ae,G,K){var V=M.castOption(ae.insidetextfont.color,G.pts);!V&&ae._input.textfont&&(V=M.castOption(ae._input.textfont.color,G.pts));var re=M.castOption(ae.insidetextfont.family,G.pts)||M.castOption(ae.textfont.family,G.pts)||K.family,D=M.castOption(ae.insidetextfont.size,G.pts)||M.castOption(ae.textfont.size,G.pts)||K.size,B=M.castOption(ae.insidetextfont.weight,G.pts)||M.castOption(ae.textfont.weight,G.pts)||K.weight,oe=M.castOption(ae.insidetextfont.style,G.pts)||M.castOption(ae.textfont.style,G.pts)||K.style,ie=M.castOption(ae.insidetextfont.variant,G.pts)||M.castOption(ae.textfont.variant,G.pts)||K.variant,ge=M.castOption(ae.insidetextfont.textcase,G.pts)||M.castOption(ae.textfont.textcase,G.pts)||K.textcase,_e=M.castOption(ae.insidetextfont.lineposition,G.pts)||M.castOption(ae.textfont.lineposition,G.pts)||K.lineposition,Se=M.castOption(ae.insidetextfont.shadow,G.pts)||M.castOption(ae.textfont.shadow,G.pts)||K.shadow;return{color:V||p.contrast(G.color),family:re,size:D,weight:B,style:oe,variant:ie,textcase:ge,lineposition:_e,shadow:Se}}function P(ae,G){for(var K,V,re=0;re<ae.length;re++)if(K=ae[re][0],V=K.trace,V.title.text){var D=V.title.text;V._meta&&(D=m.templateString(D,V._meta));var B=v.tester.append("text").attr("data-notex",1).text(D).call(v.font,V.title.font).call(l.convertToTspans,G),oe=v.bBox(B.node(),!0);K.titleBox={width:oe.width,height:oe.height},B.remove()}}function J(ae,G,K){var V=K.r||G.rpx1,re=G.rInscribed,D=G.startangle===G.stopangle;if(D)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var B=G.ring,oe=B===1&&Math.abs(G.startangle-G.stopangle)===Math.PI*2,ie=G.halfangle,ge=G.midangle,_e=K.trace.insidetextorientation,Se=_e==="horizontal",De=_e==="tangential",Ge=_e==="radial",Je=_e==="auto",yt=[],ut;if(!Je){var vt=function(jt,At){if(H(G,jt)){var Pt=Math.abs(jt-G.startangle),zt=Math.abs(jt-G.stopangle),Nt=Pt<zt?Pt:zt;At==="tan"?ut=Z(ae,V,B,Nt,0):ut=Y(ae,V,B,Nt,Math.PI/2),ut.textPosAngle=jt,yt.push(ut)}},Ae;if(Se||De){for(Ae=4;Ae>=-4;Ae-=2)vt(Math.PI*Ae,"tan");for(Ae=4;Ae>=-4;Ae-=2)vt(Math.PI*(Ae+1),"tan")}if(Se||Ge){for(Ae=4;Ae>=-4;Ae-=2)vt(Math.PI*(Ae+1.5),"rad");for(Ae=4;Ae>=-4;Ae-=2)vt(Math.PI*(Ae+.5),"rad")}}if(oe||Je||Se){var Fe=Math.sqrt(ae.width*ae.width+ae.height*ae.height);if(ut={scale:re*V*2/Fe,rCenter:1-re,rotate:0},ut.textPosAngle=(G.startangle+G.stopangle)/2,ut.scale>=1)return ut;yt.push(ut)}(Je||Ge)&&(ut=Y(ae,V,B,ie,ge),ut.textPosAngle=(G.startangle+G.stopangle)/2,yt.push(ut)),(Je||De)&&(ut=Z(ae,V,B,ie,ge),ut.textPosAngle=(G.startangle+G.stopangle)/2,yt.push(ut));for(var ke=0,Be=0,et=0;et<yt.length;et++){var ht=yt[et].scale;if(Be<ht&&(Be=ht,ke=et),!Je&&Be>=1)break}return yt[ke]}function H(ae,G){var K=ae.startangle,V=ae.stopangle;return K>G&&G>V||K<G&&G<V}function Y(ae,G,K,V,re){G=Math.max(0,G-2*R);var D=ae.width/ae.height,B=X(D,V,G,K);return{scale:B*2/ae.height,rCenter:z(D,B/G),rotate:q(re)}}function Z(ae,G,K,V,re){G=Math.max(0,G-2*R);var D=ae.height/ae.width,B=X(D,V,G,K);return{scale:B*2/ae.width,rCenter:z(D,B/G),rotate:q(re+Math.PI/2)}}function z(ae,G){return Math.cos(G)-ae*G}function q(ae){return(180/Math.PI*ae+720)%180-90}function X(ae,G,K,V){var re=ae+1/(2*Math.tan(G));return K*Math.min(1/(Math.sqrt(re*re+.5)+re),V/(Math.sqrt(ae*ae+V/2)+ae))}function Q(ae,G){return ae.v===G.vTotal&&!G.trace.hole?1:Math.min(1/(1+1/Math.sin(ae.halfangle)),ae.ring/2)}function ee(ae,G){var K=G.pxmid[0],V=G.pxmid[1],re=ae.width/2,D=ae.height/2;return K<0&&(re*=-1),V<0&&(D*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(D)*(re>0?1:-1)/2,y:D/(1+K*K/(V*V)),outside:!0}}function ne(ae){var G=Math.sqrt(ae.titleBox.width*ae.titleBox.width+ae.titleBox.height*ae.titleBox.height);return{x:ae.cx,y:ae.cy,scale:ae.trace.hole*ae.r*2/G,tx:0,ty:-ae.titleBox.height/2+ae.trace.title.font.size}}function le(ae,G){var K=1,V=1,re,D=ae.trace,B={x:ae.cx,y:ae.cy},oe={tx:0,ty:0};oe.ty+=D.title.font.size,re=de(D),D.title.position.indexOf("top")!==-1?(B.y-=(1+re)*ae.r,oe.ty-=ae.titleBox.height):D.title.position.indexOf("bottom")!==-1&&(B.y+=(1+re)*ae.r);var ie=W(ae.r,ae.trace.aspectratio),ge=G.w*(D.domain.x[1]-D.domain.x[0])/2;return D.title.position.indexOf("left")!==-1?(ge=ge+ie,B.x-=(1+re)*ie,oe.tx+=ae.titleBox.width/2):D.title.position.indexOf("center")!==-1?ge*=2:D.title.position.indexOf("right")!==-1&&(ge=ge+ie,B.x+=(1+re)*ie,oe.tx-=ae.titleBox.width/2),K=ge/ae.titleBox.width,V=ce(ae,G)/ae.titleBox.height,{x:B.x,y:B.y,scale:Math.min(K,V),tx:oe.tx,ty:oe.ty}}function W(ae,G){return ae/(G===void 0?1:G)}function ce(ae,G){var K=ae.trace,V=G.h*(K.domain.y[1]-K.domain.y[0]);return Math.min(ae.titleBox.height,V/2)}function de(ae){var G=ae.pull;if(!G)return 0;var K;if(m.isArrayOrTypedArray(G))for(G=0,K=0;K<ae.pull.length;K++)ae.pull[K]>G&&(G=ae.pull[K]);return G}function pe(ae,G){var K,V,re,D,B,oe,ie,ge,_e,Se,De,Ge,Je;function yt(Fe,ke){return Fe.pxmid[1]-ke.pxmid[1]}function ut(Fe,ke){return ke.pxmid[1]-Fe.pxmid[1]}function vt(Fe,ke){ke||(ke={});var Be=ke.labelExtraY+(V?ke.yLabelMax:ke.yLabelMin),et=V?Fe.yLabelMin:Fe.yLabelMax,ht=V?Fe.yLabelMax:Fe.yLabelMin,jt=Fe.cyFinal+B(Fe.px0[1],Fe.px1[1]),At=Be-et,Pt,zt,Nt,Kt,_t,Qt;if(At*ie>0&&(Fe.labelExtraY=At),!!m.isArrayOrTypedArray(G.pull))for(zt=0;zt<Se.length;zt++)Nt=Se[zt],!(Nt===Fe||(M.castOption(G.pull,Fe.pts)||0)>=(M.castOption(G.pull,Nt.pts)||0))&&((Fe.pxmid[1]-Nt.pxmid[1])*ie>0?(Kt=Nt.cyFinal+B(Nt.px0[1],Nt.px1[1]),At=Kt-et-Fe.labelExtraY,At*ie>0&&(Fe.labelExtraY+=At)):(ht+Fe.labelExtraY-jt)*ie>0&&(Pt=3*oe*Math.abs(zt-Se.indexOf(Fe)),_t=Nt.cxFinal+D(Nt.px0[0],Nt.px1[0]),Qt=_t+Pt-(Fe.cxFinal+Fe.pxmid[0])-Fe.labelExtraX,Qt*oe>0&&(Fe.labelExtraX+=Qt)))}for(V=0;V<2;V++)for(re=V?yt:ut,B=V?Math.max:Math.min,ie=V?1:-1,K=0;K<2;K++){for(D=K?Math.max:Math.min,oe=K?1:-1,ge=ae[V][K],ge.sort(re),_e=ae[1-V][K],Se=_e.concat(ge),Ge=[],De=0;De<ge.length;De++)ge[De].yLabelMid!==void 0&&Ge.push(ge[De]);for(Je=!1,De=0;V&&De<_e.length;De++)if(_e[De].yLabelMid!==void 0){Je=_e[De];break}for(De=0;De<Ge.length;De++){var Ae=De&&Ge[De-1];Je&&!De&&(Ae=Je),vt(Ge[De],Ae)}}}function he(ae,G){for(var K=[],V=0;V<ae.length;V++){var re=ae[V][0],D=re.trace,B=D.domain,oe=G.w*(B.x[1]-B.x[0]),ie=G.h*(B.y[1]-B.y[0]);D.title.text&&D.title.position!=="middle center"&&(ie-=ce(re,G));var ge=oe/2,_e=ie/2;D.type==="funnelarea"&&!D.scalegroup&&(_e/=D.aspectratio),re.r=Math.min(ge,_e)/(1+de(D)),re.cx=G.l+G.w*(D.domain.x[1]+D.domain.x[0])/2,re.cy=G.t+G.h*(1-D.domain.y[0])-ie/2,D.title.text&&D.title.position.indexOf("bottom")!==-1&&(re.cy-=ce(re,G)),D.scalegroup&&K.indexOf(D.scalegroup)===-1&&K.push(D.scalegroup)}be(ae,K)}function be(ae,G){for(var K,V,re,D=0;D<G.length;D++){var B=1/0,oe=G[D];for(V=0;V<ae.length;V++)if(K=ae[V][0],re=K.trace,re.scalegroup===oe){var ie;if(re.type==="pie")ie=K.r*K.r;else if(re.type==="funnelarea"){var ge,_e;re.aspectratio>1?(ge=K.r,_e=ge/re.aspectratio):(_e=K.r,ge=_e*re.aspectratio),ge*=(1+re.baseratio)/2,ie=ge*_e}B=Math.min(B,ie/K.vTotal)}for(V=0;V<ae.length;V++)if(K=ae[V][0],re=K.trace,re.scalegroup===oe){var Se=B*K.vTotal;re.type==="funnelarea"&&(Se/=(1+re.baseratio)/2,Se/=re.aspectratio),K.r=Math.sqrt(Se)}}}function Ee(ae){var G=ae[0],K=G.r,V=G.trace,re=M.getRotationAngle(V.rotation),D=2*Math.PI/G.vTotal,B="px0",oe="px1",ie,ge,_e;if(V.direction==="counterclockwise"){for(ie=0;ie<ae.length&&ae[ie].hidden;ie++);if(ie===ae.length)return;re+=D*ae[ie].v,D*=-1,B="px1",oe="px0"}for(_e=Te(K,re),ie=0;ie<ae.length;ie++)ge=ae[ie],!ge.hidden&&(ge[B]=_e,ge.startangle=re,re+=D*ge.v/2,ge.pxmid=Te(K,re),ge.midangle=re,re+=D*ge.v/2,_e=Te(K,re),ge.stopangle=re,ge[oe]=_e,ge.largeArc=ge.v>G.vTotal/2?1:0,ge.halfangle=Math.PI*Math.min(ge.v/G.vTotal,.5),ge.ring=1-V.hole,ge.rInscribed=Q(ge,G))}function Te(ae,G){return[ae*Math.sin(G),-ae*Math.cos(G)]}function He(ae,G,K){var V=ae._fullLayout,re=K.trace,D=re.texttemplate,B=re.textinfo;if(!D&&B&&B!=="none"){var oe=B.split("+"),ie=function(ke){return oe.indexOf(ke)!==-1},ge=ie("label"),_e=ie("text"),Se=ie("value"),De=ie("percent"),Ge=V.separators,Je;if(Je=ge?[G.label]:[],_e){var yt=M.getFirstFilled(re.text,G.pts);C(yt)&&Je.push(yt)}Se&&Je.push(M.formatPieValue(G.v,Ge)),De&&Je.push(M.formatPiePercent(G.v/K.vTotal,Ge)),G.text=Je.join("<br>")}function ut(ke){return{label:ke.label,value:ke.v,valueLabel:M.formatPieValue(ke.v,V.separators),percent:ke.v/K.vTotal,percentLabel:M.formatPiePercent(ke.v/K.vTotal,V.separators),color:ke.color,text:ke.text,customdata:m.castOption(re,ke.i,"customdata")}}if(D){var vt=m.castOption(re,G.i,"texttemplate");if(!vt)G.text="";else{var Ae=ut(G),Fe=M.getFirstFilled(re.text,G.pts);(C(Fe)||Fe==="")&&(Ae.text=Fe),G.text=m.texttemplateString(vt,Ae,ae._fullLayout._d3locale,Ae,re._meta||{})}}}function te(ae,G){var K=ae.rotate*Math.PI/180,V=Math.cos(K),re=Math.sin(K),D=(G.left+G.right)/2,B=(G.top+G.bottom)/2;ae.textX=D*V-B*re,ae.textY=D*re+B*V,ae.noCenter=!0}$.exports={plot:j,formatSliceLabel:He,transformInsideText:J,determineInsideTextFont:F,positionTitleOutside:le,prerenderTitles:P,layoutAreas:he,attachFxHandlers:k,computeTransform:te}}}),ES=i({"src/traces/pie/style.js"(U,$){var h=d(),c=du(),u=eh().resizeText;$.exports=function(v){var m=v._fullLayout._pielayer.selectAll(".trace");u(v,m,"pie"),m.each(function(g){var w=g[0],l=w.trace,T=h.select(this);T.style({opacity:l.opacity}),T.selectAll("path.surface").each(function(y){h.select(this).call(c,y,l,v)})})}}}),LS=i({"src/traces/pie/base_plot.js"(U){var $=Xi();U.name="pie",U.plot=function(h,c,u,p){$.plotBasePlot(U.name,h,c,u,p)},U.clean=function(h,c,u,p){$.cleanBasePlot(U.name,h,c,u,p)}}}),RS=i({"src/traces/pie/index.js"(U,$){$.exports={attributes:Ky(),supplyDefaults:TS().supplyDefaults,supplyLayoutDefaults:AS(),layoutAttributes:e1(),calc:t1().calc,crossTraceCalc:t1().crossTraceCalc,plot:jS().plot,style:ES(),styleOne:du(),moduleType:"trace",name:"pie",basePlotModule:LS(),categories:["pie-like","pie","showLegend"],meta:{}}}}),DS=i({"lib/pie.js"(U,$){$.exports=RS()}}),fs=i({"node_modules/object-assign/index.js"(U,$){var h=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;function p(m){if(m==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}function v(){try{if(!Object.assign)return!1;var m=new String("abc");if(m[5]="de",Object.getOwnPropertyNames(m)[0]==="5")return!1;for(var g={},w=0;w<10;w++)g["_"+String.fromCharCode(w)]=w;var l=Object.getOwnPropertyNames(g).map(function(y){return g[y]});if(l.join("")!=="0123456789")return!1;var T={};return"abcdefghijklmnopqrst".split("").forEach(function(y){T[y]=y}),Object.keys(Object.assign({},T)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}$.exports=v()?Object.assign:function(m,g){for(var w,l=p(m),T,y=1;y<arguments.length;y++){w=Object(arguments[y]);for(var S in w)c.call(w,S)&&(l[S]=w[S]);if(h){T=h(w);for(var R=0;R<T.length;R++)u.call(w,T[R])&&(l[T[R]]=w[T[R]])}}return l}}}),hs=i({"node_modules/world-calendars/dist/main.js"(U,$){var h=fs();function c(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}h(c.prototype,{instance:function(w,l){w=(w||"gregorian").toLowerCase(),l=l||"";var T=this._localCals[w+"-"+l];if(!T&&this.calendars[w]&&(T=new this.calendars[w](l),this._localCals[w+"-"+l]=T),!T)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,w);return T},newDate:function(w,l,T,y,S){return y=(w!=null&&w.year?w.calendar():typeof y=="string"?this.instance(y,S):y)||this.instance(),y.newDate(w,l,T)},substituteDigits:function(w){return function(l){return(l+"").replace(/[0-9]/g,function(T){return w[T]})}},substituteChineseDigits:function(w,l){return function(T){for(var y="",S=0;T>0;){var R=T%10;y=(R===0?"":w[R]+l[S])+y,S++,T=Math.floor(T/10)}return y.indexOf(w[1]+l[1])===0&&(y=y.substr(1)),y||w[0]}}});function u(w,l,T,y){if(this._calendar=w,this._year=l,this._month=T,this._day=y,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function p(w,l){return w=""+w,"000000".substring(0,l-w.length)+w}h(u.prototype,{newDate:function(w,l,T){return this._calendar.newDate(w??this,l,T)},year:function(w){return arguments.length===0?this._year:this.set(w,"y")},month:function(w){return arguments.length===0?this._month:this.set(w,"m")},day:function(w){return arguments.length===0?this._day:this.set(w,"d")},date:function(w,l,T){if(!this._calendar.isValid(w,l,T))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=w,this._month=l,this._day=T,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(w,l){return this._calendar.add(this,w,l)},set:function(w,l){return this._calendar.set(this,w,l)},compareTo:function(w){if(this._calendar.name!==w._calendar.name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,w._calendar.local.name);var l=this._year!==w._year?this._year-w._year:this._month!==w._month?this.monthOfYear()-w.monthOfYear():this._day-w._day;return l===0?0:l<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(w){return this._calendar.fromJD(w)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(w){return this._calendar.fromJSDate(w)},toString:function(){return(this.year()<0?"-":"")+p(Math.abs(this.year()),4)+"-"+p(this.month(),2)+"-"+p(this.day(),2)}});function v(){this.shortYearCutoff="+10"}h(v.prototype,{_validateLevel:0,newDate:function(w,l,T){return w==null?this.today():(w.year&&(this._validate(w,l,T,g.local.invalidDate||g.regionalOptions[""].invalidDate),T=w.day(),l=w.month(),w=w.year()),new u(this,w,l,T))},today:function(){return this.fromJSDate(new Date)},epoch:function(w){var l=this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return l.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(w){var l=this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return(l.year()<0?"-":"")+p(Math.abs(l.year()),4)},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),12},monthOfYear:function(w,l){var T=this._validate(w,l,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return(T.month()+this.monthsInYear(T)-this.firstMonth)%this.monthsInYear(T)+this.minMonth},fromMonthOfYear:function(w,l){var T=(l+this.firstMonth-2*this.minMonth)%this.monthsInYear(w)+this.minMonth;return this._validate(w,T,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth),T},daysInYear:function(w){var l=this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return this.leapYear(l)?366:365},dayOfYear:function(w,l,T){var y=this._validate(w,l,T,g.local.invalidDate||g.regionalOptions[""].invalidDate);return y.toJD()-this.newDate(y.year(),this.fromMonthOfYear(y.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(w,l,T){var y=this._validate(w,l,T,g.local.invalidDate||g.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(y))+2)%this.daysInWeek()},extraInfo:function(w,l,T){return this._validate(w,l,T,g.local.invalidDate||g.regionalOptions[""].invalidDate),{}},add:function(w,l,T){return this._validate(w,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate),this._correctAdd(w,this._add(w,l,T),l,T)},_add:function(w,l,T){if(this._validateLevel++,T==="d"||T==="w"){var y=w.toJD()+l*(T==="w"?this.daysInWeek():1),S=w.calendar().fromJD(y);return this._validateLevel--,[S.year(),S.month(),S.day()]}try{var R=w.year()+(T==="y"?l:0),M=w.monthOfYear()+(T==="m"?l:0),S=w.day(),A=function(b){for(;M<b.minMonth;)R--,M+=b.monthsInYear(R);for(var k=b.monthsInYear(R);M>k-1+b.minMonth;)R++,M-=k,k=b.monthsInYear(R)};T==="y"?(w.month()!==this.fromMonthOfYear(R,M)&&(M=this.newDate(R,w.month(),this.minDay).monthOfYear()),M=Math.min(M,this.monthsInYear(R)),S=Math.min(S,this.daysInMonth(R,this.fromMonthOfYear(R,M)))):T==="m"&&(A(this),S=Math.min(S,this.daysInMonth(R,this.fromMonthOfYear(R,M))));var C=[R,this.fromMonthOfYear(R,M),S];return this._validateLevel--,C}catch(j){throw this._validateLevel--,j}},_correctAdd:function(w,l,T,y){if(!this.hasYearZero&&(y==="y"||y==="m")&&(l[0]===0||w.year()>0!=l[0]>0)){var S={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[y],R=T<0?-1:1;l=this._add(w,T*S[0]+R*S[1],S[2])}return w.date(l[0],l[1],l[2])},set:function(w,l,T){this._validate(w,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);var y=T==="y"?l:w.year(),S=T==="m"?l:w.month(),R=T==="d"?l:w.day();return(T==="y"||T==="m")&&(R=Math.min(R,this.daysInMonth(y,S))),w.date(y,S,R)},isValid:function(w,l,T){this._validateLevel++;var y=this.hasYearZero||w!==0;if(y){var S=this.newDate(w,l,this.minDay);y=l>=this.minMonth&&l-this.minMonth<this.monthsInYear(S)&&T>=this.minDay&&T-this.minDay<this.daysInMonth(S)}return this._validateLevel--,y},toJSDate:function(w,l,T){var y=this._validate(w,l,T,g.local.invalidDate||g.regionalOptions[""].invalidDate);return g.instance().fromJD(this.toJD(y)).toJSDate()},fromJSDate:function(w){return this.fromJD(g.instance().fromJSDate(w).toJD())},_validate:function(w,l,T,y){if(w.year){if(this._validateLevel===0&&this.name!==w.calendar().name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,w.calendar().local.name);return w}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(w,l,T))throw y.replace(/\{0\}/,this.local.name);var S=this.newDate(w,l,T);return this._validateLevel--,S}catch(R){throw this._validateLevel--,R}}});function m(w){this.local=this.regionalOptions[w]||this.regionalOptions[""]}m.prototype=new v,h(m.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var l=this._validate(T,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),T=l.year()+(l.year()<0?1:0);return T%4===0&&(T%100!==0||T%400===0)},weekOfYear:function(w,l,T){var y=this.newDate(w,l,T);return y.add(4-(y.dayOfWeek()||7),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(w,l){var T=this._validate(w,l,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return this.daysPerMonth[T.month()-1]+(T.month()===2&&this.leapYear(T.year())?1:0)},weekDay:function(w,l,T){return(this.dayOfWeek(w,l,T)||7)<6},toJD:function(w,l,T){var y=this._validate(w,l,T,g.local.invalidDate||g.regionalOptions[""].invalidDate);w=y.year(),l=y.month(),T=y.day(),w<0&&w++,l<3&&(l+=12,w--);var S=Math.floor(w/100),R=2-S+Math.floor(S/4);return Math.floor(365.25*(w+4716))+Math.floor(30.6001*(l+1))+T+R-1524.5},fromJD:function(w){var l=Math.floor(w+.5),T=Math.floor((l-186721625e-2)/36524.25);T=l+1+T-Math.floor(T/4);var y=T+1524,S=Math.floor((y-122.1)/365.25),R=Math.floor(365.25*S),M=Math.floor((y-R)/30.6001),A=y-R-Math.floor(M*30.6001),C=M-(M>13.5?13:1),j=S-(C>2.5?4716:4715);return j<=0&&j--,this.newDate(j,C,A)},toJSDate:function(w,l,T){var y=this._validate(w,l,T,g.local.invalidDate||g.regionalOptions[""].invalidDate),S=new Date(y.year(),y.month()-1,y.day());return S.setHours(0),S.setMinutes(0),S.setSeconds(0),S.setMilliseconds(0),S.setHours(S.getHours()>12?S.getHours()+2:0),S},fromJSDate:function(w){return this.newDate(w.getFullYear(),w.getMonth()+1,w.getDate())}});var g=$.exports=new c;g.cdate=u,g.baseCalendar=v,g.calendars.gregorian=m}}),PS=i({"node_modules/world-calendars/dist/plus.js"(){var U=fs(),$=hs();U($.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),$.local=$.regionalOptions[""],U($.cdate.prototype,{formatDate:function(h,c){return typeof h!="string"&&(c=h,h=""),this._calendar.formatDate(h||"",this,c)}}),U($.baseCalendar.prototype,{UNIX_EPOCH:$.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:$.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(h,c,u){if(typeof h!="string"&&(u=c,c=h,h=""),!c)return"";if(c.calendar()!==this)throw $.local.invalidFormat||$.regionalOptions[""].invalidFormat;h=h||this.local.dateFormat,u=u||{};var p=u.dayNamesShort||this.local.dayNamesShort,v=u.dayNames||this.local.dayNames,m=u.monthNumbers||this.local.monthNumbers,g=u.monthNamesShort||this.local.monthNamesShort,w=u.monthNames||this.local.monthNames;u.calculateWeek||this.local.calculateWeek;for(var l=function(E,F){for(var P=1;k+P<h.length&&h.charAt(k+P)===E;)P++;return k+=P-1,Math.floor(P/(F||1))>1},T=function(E,F,P,J){var H=""+F;if(l(E,J))for(;H.length<P;)H="0"+H;return H},y=function(E,F,P,J){return l(E)?J[F]:P[F]},S=this,R=function(E){return typeof m=="function"?m.call(S,E,l("m")):C(T("m",E.month(),2))},M=function(E,F){return F?typeof w=="function"?w.call(S,E):w[E.month()-S.minMonth]:typeof g=="function"?g.call(S,E):g[E.month()-S.minMonth]},A=this.local.digits,C=function(E){return u.localNumbers&&A?A(E):E},j="",b=!1,k=0;k<h.length;k++)if(b)h.charAt(k)==="'"&&!l("'")?b=!1:j+=h.charAt(k);else switch(h.charAt(k)){case"d":j+=C(T("d",c.day(),2));break;case"D":j+=y("D",c.dayOfWeek(),p,v);break;case"o":j+=T("o",c.dayOfYear(),3);break;case"w":j+=T("w",c.weekOfYear(),2);break;case"m":j+=R(c);break;case"M":j+=M(c,l("M"));break;case"y":j+=l("y",2)?c.year():(c.year()%100<10?"0":"")+c.year()%100;break;case"Y":l("Y",2),j+=c.formatYear();break;case"J":j+=c.toJD();break;case"@":j+=(c.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":j+=(c.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?j+="'":b=!0;break;default:j+=h.charAt(k)}return j},parseDate:function(h,c,u){if(c==null)throw $.local.invalidArguments||$.regionalOptions[""].invalidArguments;if(c=typeof c=="object"?c.toString():c+"",c==="")return null;h=h||this.local.dateFormat,u=u||{};var p=u.shortYearCutoff||this.shortYearCutoff;p=typeof p!="string"?p:this.today().year()%100+parseInt(p,10);for(var v=u.dayNamesShort||this.local.dayNamesShort,m=u.dayNames||this.local.dayNames,g=u.parseMonth||this.local.parseMonth,w=u.monthNumbers||this.local.monthNumbers,l=u.monthNamesShort||this.local.monthNamesShort,T=u.monthNames||this.local.monthNames,y=-1,S=-1,R=-1,M=-1,A=-1,C=!1,j=!1,b=function(X,Q){for(var ee=1;Z+ee<h.length&&h.charAt(Z+ee)===X;)ee++;return Z+=ee-1,Math.floor(ee/(Q||1))>1},k=function(X,Q){var ee=b(X,Q),ne=[2,3,ee?4:2,ee?4:2,10,11,20]["oyYJ@!".indexOf(X)+1],le=new RegExp("^-?\\d{1,"+ne+"}"),W=c.substring(Y).match(le);if(!W)throw($.local.missingNumberAt||$.regionalOptions[""].missingNumberAt).replace(/\{0\}/,Y);return Y+=W[0].length,parseInt(W[0],10)},E=this,F=function(){if(typeof w=="function"){b("m");var X=w.call(E,c.substring(Y));return Y+=X.length,X}return k("m")},P=function(X,Q,ee,ne){for(var le=b(X,ne)?ee:Q,W=0;W<le.length;W++)if(c.substr(Y,le[W].length).toLowerCase()===le[W].toLowerCase())return Y+=le[W].length,W+E.minMonth;throw($.local.unknownNameAt||$.regionalOptions[""].unknownNameAt).replace(/\{0\}/,Y)},J=function(){if(typeof T=="function"){var X=b("M")?T.call(E,c.substring(Y)):l.call(E,c.substring(Y));return Y+=X.length,X}return P("M",l,T)},H=function(){if(c.charAt(Y)!==h.charAt(Z))throw($.local.unexpectedLiteralAt||$.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,Y);Y++},Y=0,Z=0;Z<h.length;Z++)if(j)h.charAt(Z)==="'"&&!b("'")?j=!1:H();else switch(h.charAt(Z)){case"d":M=k("d");break;case"D":P("D",v,m);break;case"o":A=k("o");break;case"w":k("w");break;case"m":R=F();break;case"M":R=J();break;case"y":var z=Z;C=!b("y",2),Z=z,S=k("y",2);break;case"Y":S=k("Y",2);break;case"J":y=k("J")+.5,c.charAt(Y)==="."&&(Y++,k("J"));break;case"@":y=k("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":y=k("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":Y=c.length;break;case"'":b("'")?H():j=!0;break;default:H()}if(Y<c.length)throw $.local.unexpectedText||$.regionalOptions[""].unexpectedText;if(S===-1?S=this.today().year():S<100&&C&&(S+=p===-1?1900:this.today().year()-this.today().year()%100-(S<=p?0:100)),typeof R=="string"&&(R=g.call(this,S,R)),A>-1){R=1,M=A;for(var q=this.daysInMonth(S,R);M>q;q=this.daysInMonth(S,R))R++,M-=q}return y>-1?this.fromJD(y):this.newDate(S,R,M)},determineDate:function(h,c,u,p,v){u&&typeof u!="object"&&(v=p,p=u,u=null),typeof p!="string"&&(v=p,p="");var m=this,g=function(w){try{return m.parseDate(p,w,v)}catch{}w=w.toLowerCase();for(var l=(w.match(/^c/)&&u?u.newDate():null)||m.today(),T=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,y=T.exec(w);y;)l.add(parseInt(y[1],10),y[2]||"d"),y=T.exec(w);return l};return c=c?c.newDate():null,h=h==null?c:typeof h=="string"?g(h):typeof h=="number"?isNaN(h)||h===1/0||h===-1/0?c:m.today().add(h,"d"):m.newDate(h),h}})}}),NS=i({"node_modules/world-calendars/dist/calendars/chinese.js"(){var U=hs(),$=fs(),h=U.instance();function c(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}c.prototype=new U.baseCalendar,$(c.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(y,S){if(typeof y=="string"){var R=y.match(p);return R?R[0]:""}var M=this._validateYear(y),A=y.month(),C=""+this.toChineseMonth(M,A);return S&&C.length<2&&(C="0"+C),this.isIntercalaryMonth(M,A)&&(C+="i"),C},monthNames:function(y){if(typeof y=="string"){var S=y.match(v);return S?S[0]:""}var R=this._validateYear(y),M=y.month(),A=this.toChineseMonth(R,M),C=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][A-1];return this.isIntercalaryMonth(R,M)&&(C="闰"+C),C},monthNamesShort:function(y){if(typeof y=="string"){var S=y.match(m);return S?S[0]:""}var R=this._validateYear(y),M=y.month(),A=this.toChineseMonth(R,M),C=["一","二","三","四","五","六","七","八","九","十","十一","十二"][A-1];return this.isIntercalaryMonth(R,M)&&(C="闰"+C),C},parseMonth:function(y,S){y=this._validateYear(y);var R=parseInt(S),M;if(isNaN(R))S[0]==="闰"&&(M=!0,S=S.substring(1)),S[S.length-1]==="月"&&(S=S.substring(0,S.length-1)),R=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(S);else{var A=S[S.length-1];M=A==="i"||A==="I"}var C=this.toMonthIndex(y,R,M);return C},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(y,S){if(y.year&&(y=y.year()),typeof y!="number"||y<1888||y>2111)throw S.replace(/\{0\}/,this.local.name);return y},toMonthIndex:function(y,S,R){var M=this.intercalaryMonth(y),A=R&&S!==M;if(A||S<1||S>12)throw U.local.invalidMonth.replace(/\{0\}/,this.local.name);var C;return M?!R&&S<=M?C=S-1:C=S:C=S-1,C},toChineseMonth:function(y,S){y.year&&(y=y.year(),S=y.month());var R=this.intercalaryMonth(y),M=R?12:11;if(S<0||S>M)throw U.local.invalidMonth.replace(/\{0\}/,this.local.name);var A;return R?S<R?A=S+1:A=S:A=S+1,A},intercalaryMonth:function(y){y=this._validateYear(y);var S=g[y-g[0]],R=S>>13;return R},isIntercalaryMonth:function(y,S){y.year&&(y=y.year(),S=y.month());var R=this.intercalaryMonth(y);return!!R&&R===S},leapYear:function(y){return this.intercalaryMonth(y)!==0},weekOfYear:function(y,S,R){var M=this._validateYear(y,U.local.invalidyear),A=w[M-w[0]],C=A>>9&4095,j=A>>5&15,b=A&31,k;k=h.newDate(C,j,b),k.add(4-(k.dayOfWeek()||7),"d");var E=this.toJD(y,S,R)-k.toJD();return 1+Math.floor(E/7)},monthsInYear:function(y){return this.leapYear(y)?13:12},daysInMonth:function(y,S){y.year&&(S=y.month(),y=y.year()),y=this._validateYear(y);var R=g[y-g[0]],M=R>>13,A=M?12:11;if(S>A)throw U.local.invalidMonth.replace(/\{0\}/,this.local.name);var C=R&1<<12-S?30:29;return C},weekDay:function(y,S,R){return(this.dayOfWeek(y,S,R)||7)<6},toJD:function(y,S,R){var M=this._validate(y,C,R,U.local.invalidDate);y=this._validateYear(M.year()),S=M.month(),R=M.day();var A=this.isIntercalaryMonth(y,S),C=this.toChineseMonth(y,S),j=T(y,C,R,A);return h.toJD(j.year,j.month,j.day)},fromJD:function(y){var S=h.fromJD(y),R=l(S.year(),S.month(),S.day()),M=this.toMonthIndex(R.year,R.month,R.isIntercalary);return this.newDate(R.year,M,R.day)},fromString:function(y){var S=y.match(u),R=this._validateYear(+S[1]),M=+S[2],A=!!S[3],C=this.toMonthIndex(R,M,A),j=+S[4];return this.newDate(R,C,j)},add:function(y,S,R){var M=y.year(),A=y.month(),C=this.isIntercalaryMonth(M,A),j=this.toChineseMonth(M,A),b=Object.getPrototypeOf(c.prototype).add.call(this,y,S,R);if(R==="y"){var k=b.year(),E=b.month(),F=this.isIntercalaryMonth(k,j),P=C&&F?this.toMonthIndex(k,j,!0):this.toMonthIndex(k,j,!1);P!==E&&b.month(P)}return b}});var u=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,p=/^\d?\d[iI]?/m,v=/^闰?十?[一二三四五六七八九]?月/m,m=/^闰?十?[一二三四五六七八九]?/m;U.calendars.chinese=c;var g=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],w=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function l(y,S,R,M){var A,C;if(typeof y=="object")A=y,C=S||{};else{var j=typeof y=="number"&&y>=1888&&y<=2111;if(!j)throw new Error("Solar year outside range 1888-2111");var b=typeof S=="number"&&S>=1&&S<=12;if(!b)throw new Error("Solar month outside range 1 - 12");var k=typeof R=="number"&&R>=1&&R<=31;if(!k)throw new Error("Solar day outside range 1 - 31");A={year:y,month:S,day:R},C={}}var E=w[A.year-w[0]],F=A.year<<9|A.month<<5|A.day;C.year=F>=E?A.year:A.year-1,E=w[C.year-w[0]];var P=E>>9&4095,J=E>>5&15,H=E&31,Y,Z=new Date(P,J-1,H),z=new Date(A.year,A.month-1,A.day);Y=Math.round((z-Z)/(24*3600*1e3));var q=g[C.year-g[0]],X;for(X=0;X<13;X++){var Q=q&1<<12-X?30:29;if(Y<Q)break;Y-=Q}var ee=q>>13;return!ee||X<ee?(C.isIntercalary=!1,C.month=1+X):X===ee?(C.isIntercalary=!0,C.month=X):(C.isIntercalary=!1,C.month=X),C.day=1+Y,C}function T(y,S,R,M,A){var C,j;if(typeof y=="object")j=y,C=S||{};else{var b=typeof y=="number"&&y>=1888&&y<=2111;if(!b)throw new Error("Lunar year outside range 1888-2111");var k=typeof S=="number"&&S>=1&&S<=12;if(!k)throw new Error("Lunar month outside range 1 - 12");var E=typeof R=="number"&&R>=1&&R<=30;if(!E)throw new Error("Lunar day outside range 1 - 30");var F;typeof M=="object"?(F=!1,C=M):(F=!!M,C={}),j={year:y,month:S,day:R,isIntercalary:F}}var P;P=j.day-1;var J=g[j.year-g[0]],H=J>>13,Y;H&&(j.month>H||j.isIntercalary)?Y=j.month:Y=j.month-1;for(var Z=0;Z<Y;Z++){var z=J&1<<12-Z?30:29;P+=z}var q=w[j.year-w[0]],X=q>>9&4095,Q=q>>5&15,ee=q&31,ne=new Date(X,Q-1,ee+P);return C.year=ne.getFullYear(),C.month=1+ne.getMonth(),C.day=ne.getDate(),C}}}),zS=i({"node_modules/world-calendars/dist/calendars/coptic.js"(){var U=hs(),$=fs();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var u=this._validate(p,this.minMonth,this.minDay,U.local.invalidYear),p=u.year()+(u.year()<0?1:0);return p%4===3||p%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,U.local.invalidYear||U.regionalOptions[""].invalidYear),13},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(c,u){var p=this._validate(c,u,this.minDay,U.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(c,u,p){return(this.dayOfWeek(c,u,p)||7)<6},toJD:function(c,u,p){var v=this._validate(c,u,p,U.local.invalidDate);return c=v.year(),c<0&&c++,v.day()+(v.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var u=Math.floor(c)+.5-this.jdEpoch,p=Math.floor((u-Math.floor((u+366)/1461))/365)+1;p<=0&&p--,u=Math.floor(c)+.5-this.newDate(p,1,1).toJD();var v=Math.floor(u/30)+1,m=u-(v-1)*30+1;return this.newDate(p,v,m)}}),U.calendars.coptic=h}}),FS=i({"node_modules/world-calendars/dist/calendars/discworld.js"(){var U=hs(),$=fs();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(u){return this._validate(u,this.minMonth,this.minDay,U.local.invalidYear),!1},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,U.local.invalidYear),13},daysInYear:function(u){return this._validate(u,this.minMonth,this.minDay,U.local.invalidYear),400},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(-m.dayOfWeek(),"d"),Math.floor((m.dayOfYear()-1)/8)+1},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,U.local.invalidMonth);return this.daysPerMonth[v.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(u,p,v){var m=this._validate(u,p,v,U.local.invalidDate);return(m.day()+1)%8},weekDay:function(u,p,v){var m=this.dayOfWeek(u,p,v);return m>=2&&m<=6},extraInfo:function(u,p,v){var m=this._validate(u,p,v,U.local.invalidDate);return{century:c[Math.floor((m.year()-1)/100)+1]||""}},toJD:function(u,p,v){var m=this._validate(u,p,v,U.local.invalidDate);return u=m.year()+(m.year()<0?1:0),p=m.month(),v=m.day(),v+(p>1?16:0)+(p>2?(p-2)*32:0)+(u-1)*400+this.jdEpoch-1},fromJD:function(u){u=Math.floor(u+.5)-Math.floor(this.jdEpoch)-1;var p=Math.floor(u/400)+1;u-=(p-1)*400,u+=u>15?16:0;var v=Math.floor(u/32)+1,m=u-(v-1)*32+1;return this.newDate(p<=0?p-1:p,v,m)}});var c={20:"Fruitbat",21:"Anchovy"};U.calendars.discworld=h}}),IS=i({"node_modules/world-calendars/dist/calendars/ethiopian.js"(){var U=hs(),$=fs();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var u=this._validate(p,this.minMonth,this.minDay,U.local.invalidYear),p=u.year()+(u.year()<0?1:0);return p%4===3||p%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,U.local.invalidYear||U.regionalOptions[""].invalidYear),13},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(c,u){var p=this._validate(c,u,this.minDay,U.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(c,u,p){return(this.dayOfWeek(c,u,p)||7)<6},toJD:function(c,u,p){var v=this._validate(c,u,p,U.local.invalidDate);return c=v.year(),c<0&&c++,v.day()+(v.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var u=Math.floor(c)+.5-this.jdEpoch,p=Math.floor((u-Math.floor((u+366)/1461))/365)+1;p<=0&&p--,u=Math.floor(c)+.5-this.newDate(p,1,1).toJD();var v=Math.floor(u/30)+1,m=u-(v-1)*30+1;return this.newDate(p,v,m)}}),U.calendars.ethiopian=h}}),OS=i({"node_modules/world-calendars/dist/calendars/hebrew.js"(){var U=hs(),$=fs();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,U.local.invalidYear);return this._leapYear(p.year())},_leapYear:function(u){return u=u<0?u+1:u,c(u*7+1,19)<7},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,U.local.invalidYear),this._leapYear(u.year?u.year():u)?13:12},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(-m.dayOfWeek(),"d"),Math.floor((m.dayOfYear()-1)/7)+1},daysInYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,U.local.invalidYear);return u=p.year(),this.toJD(u===-1?1:u+1,7,1)-this.toJD(u,7,1)},daysInMonth:function(u,p){return u.year&&(p=u.month(),u=u.year()),this._validate(u,p,this.minDay,U.local.invalidMonth),p===12&&this.leapYear(u)||p===8&&c(this.daysInYear(u),10)===5?30:p===9&&c(this.daysInYear(u),10)===3?29:this.daysPerMonth[p-1]},weekDay:function(u,p,v){return this.dayOfWeek(u,p,v)!==6},extraInfo:function(u,p,v){var m=this._validate(u,p,v,U.local.invalidDate);return{yearType:(this.leapYear(m)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(m)%10-3]}},toJD:function(u,p,v){var m=this._validate(u,p,v,U.local.invalidDate);u=m.year(),p=m.month(),v=m.day();var g=u<=0?u+1:u,w=this.jdEpoch+this._delay1(g)+this._delay2(g)+v+1;if(p<7){for(var l=7;l<=this.monthsInYear(u);l++)w+=this.daysInMonth(u,l);for(var l=1;l<p;l++)w+=this.daysInMonth(u,l)}else for(var l=7;l<p;l++)w+=this.daysInMonth(u,l);return w},_delay1:function(u){var p=Math.floor((235*u-234)/19),v=12084+13753*p,m=p*29+Math.floor(v/25920);return c(3*(m+1),7)<3&&m++,m},_delay2:function(u){var p=this._delay1(u-1),v=this._delay1(u),m=this._delay1(u+1);return m-v===356?2:v-p===382?1:0},fromJD:function(u){u=Math.floor(u)+.5;for(var p=Math.floor((u-this.jdEpoch)*98496/35975351)-1;u>=this.toJD(p===-1?1:p+1,7,1);)p++;for(var v=u<this.toJD(p,1,1)?7:1;u>this.toJD(p,v,this.daysInMonth(p,v));)v++;var m=u-this.toJD(p,v,1)+1;return this.newDate(p,v,m)}});function c(u,p){return u-p*Math.floor(u/p)}U.calendars.hebrew=h}}),BS=i({"node_modules/world-calendars/dist/calendars/islamic.js"(){var U=hs(),$=fs();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(c){var u=this._validate(c,this.minMonth,this.minDay,U.local.invalidYear);return(u.year()*11+14)%30<11},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(c){return this.leapYear(c)?355:354},daysInMonth:function(c,u){var p=this._validate(c,u,this.minDay,U.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===12&&this.leapYear(p.year())?1:0)},weekDay:function(c,u,p){return this.dayOfWeek(c,u,p)!==5},toJD:function(c,u,p){var v=this._validate(c,u,p,U.local.invalidDate);return c=v.year(),u=v.month(),p=v.day(),c=c<=0?c+1:c,p+Math.ceil(29.5*(u-1))+(c-1)*354+Math.floor((3+11*c)/30)+this.jdEpoch-1},fromJD:function(c){c=Math.floor(c)+.5;var u=Math.floor((30*(c-this.jdEpoch)+10646)/10631);u=u<=0?u-1:u;var p=Math.min(12,Math.ceil((c-29-this.toJD(u,1,1))/29.5)+1),v=c-this.toJD(u,p,1)+1;return this.newDate(u,p,v)}}),U.calendars.islamic=h}}),HS=i({"node_modules/world-calendars/dist/calendars/julian.js"(){var U=hs(),$=fs();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var u=this._validate(p,this.minMonth,this.minDay,U.local.invalidYear),p=u.year()<0?u.year()+1:u.year();return p%4===0},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(4-(v.dayOfWeek()||7),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(c,u){var p=this._validate(c,u,this.minDay,U.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===2&&this.leapYear(p.year())?1:0)},weekDay:function(c,u,p){return(this.dayOfWeek(c,u,p)||7)<6},toJD:function(c,u,p){var v=this._validate(c,u,p,U.local.invalidDate);return c=v.year(),u=v.month(),p=v.day(),c<0&&c++,u<=2&&(c--,u+=12),Math.floor(365.25*(c+4716))+Math.floor(30.6001*(u+1))+p-1524.5},fromJD:function(c){var u=Math.floor(c+.5),p=u+1524,v=Math.floor((p-122.1)/365.25),m=Math.floor(365.25*v),g=Math.floor((p-m)/30.6001),w=g-Math.floor(g<14?1:13),l=v-Math.floor(w>2?4716:4715),T=p-m-Math.floor(30.6001*g);return l<=0&&l--,this.newDate(l,w,T)}}),U.calendars.julian=h}}),WS=i({"node_modules/world-calendars/dist/calendars/mayan.js"(){var U=hs(),$=fs();function h(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(p){return this._validate(p,this.minMonth,this.minDay,U.local.invalidYear),!1},formatYear:function(p){var v=this._validate(p,this.minMonth,this.minDay,U.local.invalidYear);p=v.year();var m=Math.floor(p/400);p=p%400,p+=p<0?400:0;var g=Math.floor(p/20);return m+"."+g+"."+p%20},forYear:function(p){if(p=p.split("."),p.length<3)throw"Invalid Mayan year";for(var v=0,m=0;m<p.length;m++){var g=parseInt(p[m],10);if(Math.abs(g)>19||m>0&&g<0)throw"Invalid Mayan year";v=v*20+g}return v},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,U.local.invalidYear),18},weekOfYear:function(p,v,m){return this._validate(p,v,m,U.local.invalidDate),0},daysInYear:function(p){return this._validate(p,this.minMonth,this.minDay,U.local.invalidYear),360},daysInMonth:function(p,v){return this._validate(p,v,this.minDay,U.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(p,v,m){var g=this._validate(p,v,m,U.local.invalidDate);return g.day()},weekDay:function(p,v,m){return this._validate(p,v,m,U.local.invalidDate),!0},extraInfo:function(p,v,m){var g=this._validate(p,v,m,U.local.invalidDate),w=g.toJD(),l=this._toHaab(w),T=this._toTzolkin(w);return{haabMonthName:this.local.haabMonths[l[0]-1],haabMonth:l[0],haabDay:l[1],tzolkinDayName:this.local.tzolkinMonths[T[0]-1],tzolkinDay:T[0],tzolkinTrecena:T[1]}},_toHaab:function(p){p-=this.jdEpoch;var v=c(p+8+17*20,365);return[Math.floor(v/20)+1,c(v,20)]},_toTzolkin:function(p){return p-=this.jdEpoch,[u(p+20,20),u(p+4,13)]},toJD:function(p,v,m){var g=this._validate(p,v,m,U.local.invalidDate);return g.day()+g.month()*20+g.year()*360+this.jdEpoch},fromJD:function(p){p=Math.floor(p)+.5-this.jdEpoch;var v=Math.floor(p/360);p=p%360,p+=p<0?360:0;var m=Math.floor(p/20),g=p%20;return this.newDate(v,m,g)}});function c(p,v){return p-v*Math.floor(p/v)}function u(p,v){return c(p-1,v)+1}U.calendars.mayan=h}}),qS=i({"node_modules/world-calendars/dist/calendars/nanakshahi.js"(){var U=hs(),$=fs();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar;var c=U.instance("gregorian");$(h.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,U.local.invalidYear||U.regionalOptions[""].invalidYear);return c.leapYear(p.year()+(p.year()<1?1:0)+1469)},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(1-(m.dayOfWeek()||7),"d"),Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,U.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(u,p,v){return(this.dayOfWeek(u,p,v)||7)<6},toJD:function(g,p,v){var m=this._validate(g,p,v,U.local.invalidMonth),g=m.year();g<0&&g++;for(var w=m.day(),l=1;l<m.month();l++)w+=this.daysPerMonth[l-1];return w+c.toJD(g+1468,3,13)},fromJD:function(u){u=Math.floor(u+.5);for(var p=Math.floor((u-(this.jdEpoch-1))/366);u>=this.toJD(p+1,1,1);)p++;for(var v=u-Math.floor(this.toJD(p,1,1)+.5)+1,m=1;v>this.daysInMonth(p,m);)v-=this.daysInMonth(p,m),m++;return this.newDate(p,m,v)}}),U.calendars.nanakshahi=h}}),VS=i({"node_modules/world-calendars/dist/calendars/nepali.js"(){var U=hs(),$=fs();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(c){return this.daysInYear(c)!==this.daysPerYear},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(c){var u=this._validate(c,this.minMonth,this.minDay,U.local.invalidYear);if(c=u.year(),typeof this.NEPALI_CALENDAR_DATA[c]>"u")return this.daysPerYear;for(var p=0,v=this.minMonth;v<=12;v++)p+=this.NEPALI_CALENDAR_DATA[c][v];return p},daysInMonth:function(c,u){return c.year&&(u=c.month(),c=c.year()),this._validate(c,u,this.minDay,U.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[c]>"u"?this.daysPerMonth[u-1]:this.NEPALI_CALENDAR_DATA[c][u]},weekDay:function(c,u,p){return this.dayOfWeek(c,u,p)!==6},toJD:function(c,u,p){var v=this._validate(c,u,p,U.local.invalidDate);c=v.year(),u=v.month(),p=v.day();var m=U.instance(),g=0,w=u,l=c;this._createMissingCalendarData(c);var T=c-(w>9||w===9&&p>=this.NEPALI_CALENDAR_DATA[l][0]?56:57);for(u!==9&&(g=p,w--);w!==9;)w<=0&&(w=12,l--),g+=this.NEPALI_CALENDAR_DATA[l][w],w--;return u===9?(g+=p-this.NEPALI_CALENDAR_DATA[l][0],g<0&&(g+=m.daysInYear(T))):g+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0],m.newDate(T,1,1).add(g,"d").toJD()},fromJD:function(c){var u=U.instance(),p=u.fromJD(c),v=p.year(),m=p.dayOfYear(),g=v+56;this._createMissingCalendarData(g);for(var w=9,l=this.NEPALI_CALENDAR_DATA[g][0],T=this.NEPALI_CALENDAR_DATA[g][w]-l+1;m>T;)w++,w>12&&(w=1,g++),T+=this.NEPALI_CALENDAR_DATA[g][w];var y=this.NEPALI_CALENDAR_DATA[g][w]-(T-m);return this.newDate(g,w,y)},_createMissingCalendarData:function(c){var u=this.daysPerMonth.slice(0);u.unshift(17);for(var p=c-1;p<c+2;p++)typeof this.NEPALI_CALENDAR_DATA[p]>"u"&&(this.NEPALI_CALENDAR_DATA[p]=u)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),U.calendars.nepali=h}}),US=i({"node_modules/world-calendars/dist/calendars/persian.js"(){var U=hs(),$=fs();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,U.local.invalidYear);return((p.year()-(p.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(-((m.dayOfWeek()+1)%7),"d"),Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,U.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(u,p,v){return this.dayOfWeek(u,p,v)!==5},toJD:function(u,p,v){var m=this._validate(u,p,v,U.local.invalidDate);u=m.year(),p=m.month(),v=m.day();var g=u-(u>=0?474:473),w=474+c(g,2820);return v+(p<=7?(p-1)*31:(p-1)*30+6)+Math.floor((w*682-110)/2816)+(w-1)*365+Math.floor(g/2820)*1029983+this.jdEpoch-1},fromJD:function(u){u=Math.floor(u)+.5;var p=u-this.toJD(475,1,1),v=Math.floor(p/1029983),m=c(p,1029983),g=2820;if(m!==1029982){var w=Math.floor(m/366),l=c(m,366);g=Math.floor((2134*w+2816*l+2815)/1028522)+w+1}var T=g+2820*v+474;T=T<=0?T-1:T;var y=u-this.toJD(T,1,1)+1,S=y<=186?Math.ceil(y/31):Math.ceil((y-6)/30),R=u-this.toJD(T,S,1)+1;return this.newDate(T,S,R)}});function c(u,p){return u-p*Math.floor(u/p)}U.calendars.persian=h,U.calendars.jalali=h}}),$S=i({"node_modules/world-calendars/dist/calendars/taiwan.js"(){var U=hs(),$=fs(),h=U.instance();function c(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}c.prototype=new U.baseCalendar,$(c.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(v){var p=this._validate(v,this.minMonth,this.minDay,U.local.invalidYear),v=this._t2gYear(p.year());return h.leapYear(v)},weekOfYear:function(g,p,v){var m=this._validate(g,this.minMonth,this.minDay,U.local.invalidYear),g=this._t2gYear(m.year());return h.weekOfYear(g,m.month(),m.day())},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,U.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(u,p,v){return(this.dayOfWeek(u,p,v)||7)<6},toJD:function(g,p,v){var m=this._validate(g,p,v,U.local.invalidDate),g=this._t2gYear(m.year());return h.toJD(g,m.month(),m.day())},fromJD:function(u){var p=h.fromJD(u),v=this._g2tYear(p.year());return this.newDate(v,p.month(),p.day())},_t2gYear:function(u){return u+this.yearsOffset+(u>=-this.yearsOffset&&u<=-1?1:0)},_g2tYear:function(u){return u-this.yearsOffset-(u>=1&&u<=this.yearsOffset?1:0)}}),U.calendars.taiwan=c}}),YS=i({"node_modules/world-calendars/dist/calendars/thai.js"(){var U=hs(),$=fs(),h=U.instance();function c(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}c.prototype=new U.baseCalendar,$(c.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var p=this._validate(v,this.minMonth,this.minDay,U.local.invalidYear),v=this._t2gYear(p.year());return h.leapYear(v)},weekOfYear:function(g,p,v){var m=this._validate(g,this.minMonth,this.minDay,U.local.invalidYear),g=this._t2gYear(m.year());return h.weekOfYear(g,m.month(),m.day())},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,U.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(u,p,v){return(this.dayOfWeek(u,p,v)||7)<6},toJD:function(g,p,v){var m=this._validate(g,p,v,U.local.invalidDate),g=this._t2gYear(m.year());return h.toJD(g,m.month(),m.day())},fromJD:function(u){var p=h.fromJD(u),v=this._g2tYear(p.year());return this.newDate(v,p.month(),p.day())},_t2gYear:function(u){return u-this.yearsOffset-(u>=1&&u<=this.yearsOffset?1:0)},_g2tYear:function(u){return u+this.yearsOffset+(u>=-this.yearsOffset&&u<=-1?1:0)}}),U.calendars.thai=c}}),GS=i({"node_modules/world-calendars/dist/calendars/ummalqura.js"(){var U=hs(),$=fs();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new U.baseCalendar,$(h.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,U.local.invalidYear);return this.daysInYear(p.year())===355},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(-m.dayOfWeek(),"d"),Math.floor((m.dayOfYear()-1)/7)+1},daysInYear:function(u){for(var p=0,v=1;v<=12;v++)p+=this.daysInMonth(u,v);return p},daysInMonth:function(u,p){for(var v=this._validate(u,p,this.minDay,U.local.invalidMonth),m=v.toJD()-24e5+.5,g=0,w=0;w<c.length;w++){if(c[w]>m)return c[g]-c[g-1];g++}return 30},weekDay:function(u,p,v){return this.dayOfWeek(u,p,v)!==5},toJD:function(u,p,v){var m=this._validate(u,p,v,U.local.invalidDate),g=12*(m.year()-1)+m.month()-15292,w=m.day()+c[g-1]-1;return w+24e5-.5},fromJD:function(u){for(var p=u-24e5+.5,v=0,m=0;m<c.length&&!(c[m]>p);m++)v++;var g=v+15292,w=Math.floor((g-1)/12),l=w+1,T=g-12*w,y=p-c[v-1]+1;return this.newDate(l,T,y)},isValid:function(u,p,v){var m=U.baseCalendar.prototype.isValid.apply(this,arguments);return m&&(u=u.year!=null?u.year:u,m=u>=1276&&u<=1500),m},_validate:function(u,p,v,m){var g=U.baseCalendar.prototype._validate.apply(this,arguments);if(g.year<1276||g.year>1500)throw m.replace(/\{0\}/,this.local.name);return g}}),U.calendars.ummalqura=h;var c=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]}}),XS=i({"src/components/calendars/calendars.js"(U,$){$.exports=hs(),PS(),NS(),zS(),FS(),IS(),OS(),BS(),HS(),WS(),qS(),VS(),US(),$S(),YS(),GS()}}),ZS=i({"src/components/calendars/index.js"(U,$){var h=XS(),c=kr(),u=Ce(),p=u.EPOCHJD,v=u.ONEDAY,m={valType:"enumerated",values:c.sortObjectKeys(h.calendars),editType:"calc",dflt:"gregorian"},g=function(J,H,Y,Z){var z={};return z[Y]=m,c.coerce(J,H,z,Y,Z)},w=function(J,H,Y,Z){for(var z=0;z<Y.length;z++)g(J,H,Y[z]+"calendar",Z.calendar)},l={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},T={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},y={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},S="##",R={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:S,w:S,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function M(J,H,Y){for(var Z=Math.floor((H+.05)/v)+p,z=C(Y).fromJD(Z),q=0,X,Q,ee,ne,le;(q=J.indexOf("%",q))!==-1;)X=J.charAt(q+1),X==="0"||X==="-"||X==="_"?(ee=3,Q=J.charAt(q+2),X==="_"&&(X="-")):(Q=X,X="0",ee=2),ne=R[Q],ne?(ne===S?le=S:le=z.formatDate(ne[X]),J=J.substr(0,q)+le+J.substr(q+ee),q+=le.length):q+=ee;return J}var A={};function C(J){var H=A[J];return H||(H=A[J]=h.instance(J),H)}function j(J){return c.extendFlat({},m,{description:J})}function b(J){return"Sets the calendar system to use with `"+J+"` date data."}var k={xcalendar:j(b("x"))},E=c.extendFlat({},k,{ycalendar:j(b("y"))}),F=c.extendFlat({},E,{zcalendar:j(b("z"))}),P=j(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:E,bar:E,box:E,heatmap:E,contour:E,histogram:E,histogram2d:E,histogram2dcontour:E,scatter3d:F,surface:F,mesh3d:F,scattergl:E,ohlc:k,candlestick:k},layout:{calendar:j(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:P},yaxis:{calendar:P},scene:{xaxis:{calendar:P},yaxis:{calendar:P},zaxis:{calendar:P}},polar:{radialaxis:{calendar:P}}}},layoutAttributes:m,handleDefaults:g,handleTraceDefaults:w,CANONICAL_SUNDAY:T,CANONICAL_TICK:l,DFLTRANGE:y,getCal:C,worldCalFmt:M}}}),QS=i({"lib/calendars.js"(U,$){$.exports=ZS()}}),JS=i({"lib/index-basic.js"(U,$){var h=vS();h.register([MS(),DS(),QS()]),$.exports=h}});return JS()})();/*! Bundled license information:

	native-promise-only/lib/npo.src.js:
	  (*! Native Promise Only
	      v0.8.1 (c) Kyle Simpson
	      MIT License: http://getify.mit-license.org
	  *)

	polybooljs/index.js:
	  (*
	   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
	   * @license MIT
	   * @preserve Project Home: https://github.com/voidqk/polybooljs
	   *)

	object-assign/index.js:
	  (*
	  object-assign
	  (c) Sindre Sorhus
	  @license MIT
	  *)
	*/return window.Plotly=e,e})})(m5);var AL=m5.exports;const CL=Zp(AL);os.register(...TL);const jL=t=>{const e=JSON.stringify(t,null,2),r=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download="transcript-analysis.json",i.click()},EL=t=>{const e=[["Metric","Value"],["Total Words",t.wordCount],["Total Sentences",t.sentenceCount],["Reading Time",`${t.readingTime} minutes`],["Sentiment Score",t.sentimentScore],["Complexity Score",t.complexityScore]].map(a=>a.join(",")).join(`
`),r=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download="transcript-analysis.csv",i.click()},Zv=({text:t,speed:e=50,className:r=""})=>{const[n,i]=Wt.useState(""),[a,s]=Wt.useState(0);return Wt.useEffect(()=>{if(a<t.length){const d=setTimeout(()=>{i(_=>_+t[a]),s(_=>_+1)},e);return()=>clearTimeout(d)}},[a,t,e]),o.jsxs("span",{className:`typewriter ${r}`,children:[n,o.jsx("span",{className:"typewriter-cursor",children:"|"})]})},ml=({value:t,duration:e=2e3})=>{const[r,n]=Wt.useState(0);return Wt.useEffect(()=>{let i=null;const a=0,s=parseInt(t)||0,d=_=>{i===null&&(i=_);const N=Math.min((_-i)/e,1);n(Math.floor(N*(s-a)+a)),N<1&&requestAnimationFrame(d)};requestAnimationFrame(d)},[t,e]),o.jsx("span",{className:"animated-counter",children:r})},LL=({transcript:t,isVisible:e,onAnalysisComplete:r})=>{var lr,wr,Sr,vr,Bt,yr,dr,Pr,Hr,Wr,Pn,Rn,Fn,In,sa,$a,Oi,Ya,Ri,ar,Nr,Xr,Cr,pn,On,Hn,kn,Gn,ba,Pi,Ai,_i,Bi,Nn,Hi,ri,ti,Jn,Ca,Ni,si,ui,ea,wa,Yi,As,oi,zi,Cs,Os,mn,Bs,pr,zr,sn,Yr,cn,Mn,un,rn,en,Wn,Kn,ki,Ci,Wi,oa,Gi,Ks,kr,Hs,eo,uo,js,Co,us,Fi,Di,Si,ha,pa,Ws,Dl,bc,ou,Xi,qs,La,Ra,ds,Pl,es,nl,ct,ur,nn,dn,Fr,ln,$n,Tn,Ii,ma,Da,Ga,Nl,Wo,wc,il,Ia,zl,ts,al,sl,di,ol,_c,kc,jo,ji,fo,ll,cl,lu,Fl,Il,to,Wa,ho,Bn,Sc,cu,ad,Bf,sd,Hf,uu,Wf,du,od,ld,cd,fu,qf,Vf,ud,Uf,$f,Yf,po,Ol,hu,pu,mu,vu,qo,gu,dd,Mc;const[n,i]=Wt.useState(null),[a,s]=Wt.useState(null),[d,_]=Wt.useState(!1),[N,I]=Wt.useState("summary"),ye=Wt.useRef(null),xe=Wt.useRef(null),Ce=Wt.useRef(null),Ve=Wt.useRef(null),Ye=Wt.useRef(null),qe=Wt.useRef(null),ze=Wt.useRef(null),Oe=Wt.useRef(null),We=Wt.useRef(null),ot=Wt.useRef(null);Wt.useEffect(()=>{t&&e&&st()},[t,e]);const st=async()=>{_(!0);try{console.log("Starting transcript analysis...",{transcript:t==null?void 0:t.length}),await new Promise(Yn=>setTimeout(Yn,500));const qt=FC(t),wn=g6(qt);console.log("Analysis completed:",{analysisResult:qt,chartDataResult:wn}),i(qt),s(wn),typeof r=="function"&&r({analysis:qt,chartData:wn,transcript:t}),setTimeout(()=>{Rt(wn)},100)}catch(qt){console.error("Analysis error:",qt)}finally{_(!1)}},Rt=qt=>{if(!qt){console.warn("No chart data available");return}console.log("Initializing charts with data:",qt),wt(qt),It(qt),er(qt),cr(qt),xr(qt),lt(qt),gt(qt),Ft(qt),pt(qt),Tr(qt)},wt=qt=>{if(console.log("Initializing sentiment chart with data:",qt==null?void 0:qt.sentimentPieData),ye.current&&(qt!=null&&qt.sentimentPieData)){const wn=ye.current.getContext("2d");ye.current.chartInstance&&ye.current.chartInstance.destroy();try{ye.current.chartInstance=new os(wn,{type:"pie",data:qt.sentimentPieData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sentiment Distribution Analysis",font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,font:{size:12}}},tooltip:{callbacks:{label:function(Yn){const _a=Yn.label||"",Es=Yn.parsed||0;return`${_a}: ${Es.toFixed(1)}%`},afterLabel:function(Yn){const _a=Yn.label;return{Positive:"Optimistic, encouraging, or favorable sentiment",Negative:"Critical, discouraging, or unfavorable sentiment",Neutral:"Balanced, objective, or factual sentiment"}[_a]||""}}}}}}),console.log("Sentiment chart created successfully")}catch(Yn){console.error("Error creating sentiment chart:",Yn)}}else console.warn("Cannot initialize sentiment chart - missing ref or data")},It=qt=>{if(console.log("Initializing keywords chart with data:",qt==null?void 0:qt.keywordsBarData),xe.current&&(qt!=null&&qt.keywordsBarData)){const wn=xe.current.getContext("2d");xe.current.chartInstance&&xe.current.chartInstance.destroy();try{xe.current.chartInstance=new os(wn,{type:"bar",data:qt.keywordsBarData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Most Frequent Keywords",font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},legend:{display:!1},tooltip:{callbacks:{label:function(Yn){const _a=Yn.parsed.y;return`Frequency: ${_a} occurrence${_a>1?"s":""}`},afterLabel:function(Yn){const _a=Yn.dataset.data.reduce((ro,mo)=>ro+mo,0);return`${(Yn.parsed.y/_a*100).toFixed(1)}% of total keyword usage`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0,callback:function(Yn){return Yn+(Yn===1?" time":" times")}},title:{display:!0,text:"Frequency Count"}},x:{title:{display:!0,text:"Keywords"},ticks:{maxRotation:45,minRotation:45}}}}}),console.log("Keywords chart created successfully")}catch(Yn){console.error("Error creating keywords chart:",Yn)}}else console.warn("Cannot initialize keywords chart - missing ref or data")},er=qt=>{if(console.log("Initializing topics chart with data:",qt==null?void 0:qt.topicDistributionData),Ce.current&&(qt!=null&&qt.topicDistributionData)){const wn=Ce.current.getContext("2d");Ce.current.chartInstance&&Ce.current.chartInstance.destroy();try{Ce.current.chartInstance=new os(wn,{type:"doughnut",data:qt.topicDistributionData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Topic Distribution Overview",font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},legend:{position:"right",labels:{usePointStyle:!0,padding:15,font:{size:11}}},tooltip:{callbacks:{label:function(Yn){const _a=Yn.label||"",Es=Yn.parsed||0,ro=Yn.dataset.data.reduce((ul,dl)=>ul+dl,0),mo=ro>0?(Es/ro*100).toFixed(1):0;return`${_a}: ${Es} mentions (${mo}%)`},afterLabel:function(Yn){return{Technology:"Technical terms and digital concepts",Communication:"Discussion and interaction patterns",Analysis:"Analytical and research content",Process:"Procedural and methodical content",Data:"Information and statistical content",Results:"Outcomes and findings"}[Yn.label]||"Content category"}}}},cutout:"60%"}}),console.log("Topics chart created successfully")}catch(Yn){console.error("Error creating topics chart:",Yn)}}else console.warn("Cannot initialize topics chart - missing ref or data")},cr=qt=>{if(console.log("Initializing emotions chart with data:",qt==null?void 0:qt.emotionsRadarData),Ve.current&&(qt!=null&&qt.emotionsRadarData)){const wn=Ve.current.getContext("2d");Ve.current.chartInstance&&Ve.current.chartInstance.destroy();try{Ve.current.chartInstance=new os(wn,{type:"radar",data:qt.emotionsRadarData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Emotional Analysis",font:{size:16,weight:"bold"}}},scales:{r:{beginAtZero:!0,ticks:{display:!1}}}}}),console.log("Emotions chart created successfully")}catch(Yn){console.error("Error creating emotions chart:",Yn)}}else console.warn("Cannot initialize emotions chart - missing ref or data")},Tr=qt=>{var wn,Yn,_a,Es,ro,mo,ul,dl,Tc,Bl,Hl;if(console.log("Initializing Plotly chart with data:",qt),Ye.current&&qt)try{const Vo={x:((wn=qt.keywordsBarData)==null?void 0:wn.labels)||[],y:((_a=(Yn=qt.keywordsBarData)==null?void 0:Yn.datasets[0])==null?void 0:_a.data)||[],type:"bar",name:"Keyword Frequency",marker:{color:"#2196F3",line:{color:"#1976D2",width:1}},hovertemplate:"<b>%{x}</b><br>Frequency: %{y}<extra></extra>"},fd={x:((Es=qt.topicDistributionData)==null?void 0:Es.labels)||[],y:((mo=(ro=qt.topicDistributionData)==null?void 0:ro.datasets[0])==null?void 0:mo.data)||[],type:"scatter",mode:"lines+markers",name:"Topic Distribution",yaxis:"y2",line:{color:"#FF6384",width:3},marker:{color:"#FF6384",size:10},hovertemplate:"<b>%{x}</b><br>Count: %{y}<extra></extra>"},Gf={values:((dl=(ul=qt.sentimentPieData)==null?void 0:ul.datasets[0])==null?void 0:dl.data)||[],labels:((Tc=qt.sentimentPieData)==null?void 0:Tc.labels)||[],type:"pie",name:"Sentiment Distribution",domain:{x:[.7,1],y:[.7,1]},marker:{colors:((Hl=(Bl=qt.sentimentPieData)==null?void 0:Bl.datasets[0])==null?void 0:Hl.backgroundColor)||[]},hovertemplate:"<b>%{label}</b><br>Percentage: %{percent}<extra></extra>"},_m={title:{text:"Comprehensive Content Analysis Dashboard",font:{size:18,weight:"bold"},x:.1},xaxis:{title:"Content Elements",titlefont:{size:14},tickangle:-45},yaxis:{title:"Frequency",titlefont:{size:14}},yaxis2:{title:"Topic Count",titlefont:{size:14},overlaying:"y",side:"right"},plot_bgcolor:"#f8f9fa",paper_bgcolor:"#ffffff",margin:{l:60,r:60,t:80,b:100},legend:{x:.02,y:.98,bgcolor:"rgba(255, 255, 255, 0.8)",bordercolor:"#ddd",borderwidth:1},annotations:[{text:"Sentiment Distribution",x:.85,y:.5,xref:"paper",yref:"paper",showarrow:!1,font:{size:12,weight:"bold"}}]},km={responsive:!0,displayModeBar:!0,modeBarButtonsToRemove:["pan2d","lasso2d","select2d"],toImageButtonOptions:{format:"png",filename:"content-analysis-chart",height:500,width:800,scale:1}};CL.newPlot(Ye.current,[Vo,fd,Gf],_m,km),console.log("Enhanced Plotly chart created successfully")}catch(Vo){console.error("Error creating Plotly chart:",Vo)}else console.warn("Cannot initialize Plotly chart - missing ref or data")},xr=qt=>{if(console.log("Initializing question types chart with data:",qt==null?void 0:qt.questionTypesData),qe.current&&(qt!=null&&qt.questionTypesData)){const wn=qe.current.getContext("2d");qe.current.chartInstance&&qe.current.chartInstance.destroy();try{qe.current.chartInstance=new os(wn,{type:"doughnut",data:qt.questionTypesData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Question Types Distribution",font:{size:16,weight:"bold"}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:15}}},cutout:"50%"}}),console.log("Question types chart created successfully")}catch(Yn){console.error("Error creating question types chart:",Yn)}}else console.warn("Cannot initialize question types chart - missing ref or data")},lt=qt=>{if(console.log("Initializing complexity chart with data:",qt==null?void 0:qt.complexityData),ze.current&&(qt!=null&&qt.complexityData)){const wn=ze.current.getContext("2d");ze.current.chartInstance&&ze.current.chartInstance.destroy();try{ze.current.chartInstance=new os(wn,{type:"bar",data:qt.complexityData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Question Complexity Analysis",font:{size:16,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}}),console.log("Complexity chart created successfully")}catch(Yn){console.error("Error creating complexity chart:",Yn)}}else console.warn("Cannot initialize complexity chart - missing ref or data")},gt=qt=>{if(console.log("Initializing linguistic chart with data:",qt==null?void 0:qt.linguisticData),Oe.current&&(qt!=null&&qt.linguisticData)){const wn=Oe.current.getContext("2d");Oe.current.chartInstance&&Oe.current.chartInstance.destroy();try{Oe.current.chartInstance=new os(wn,{type:"radar",data:qt.linguisticData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Linguistic Features Analysis",font:{size:16,weight:"bold"}},legend:{display:!1}},scales:{r:{beginAtZero:!0,max:100,ticks:{display:!1}}}}}),console.log("Linguistic chart created successfully")}catch(Yn){console.error("Error creating linguistic chart:",Yn)}}else console.warn("Cannot initialize linguistic chart - missing ref or data")},Ft=qt=>{if(console.log("Initializing time reference chart with data:",qt==null?void 0:qt.timeReferenceData),We.current&&(qt!=null&&qt.timeReferenceData)){const wn=We.current.getContext("2d");We.current.chartInstance&&We.current.chartInstance.destroy();try{We.current.chartInstance=new os(wn,{type:"pie",data:qt.timeReferenceData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Time Reference Analysis",font:{size:16,weight:"bold"}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:15}}}}}),console.log("Time reference chart created successfully")}catch(Yn){console.error("Error creating time reference chart:",Yn)}}else console.warn("Cannot initialize time reference chart - missing ref or data")},pt=qt=>{if(console.log("Initializing metrics chart with data:",qt==null?void 0:qt.advancedMetrics),ot.current&&(qt!=null&&qt.advancedMetrics)){const wn=ot.current.getContext("2d");ot.current.chartInstance&&ot.current.chartInstance.destroy();try{const Yn={labels:["Content Diversity","Emotional Range","Question Complexity","Linguistic Richness","Analytical Depth"],datasets:[{label:"Content Quality Metrics",data:[qt.advancedMetrics.contentDiversity,qt.advancedMetrics.emotionalRange,qt.advancedMetrics.questionComplexity,qt.advancedMetrics.linguisticRichness,qt.advancedMetrics.analyticalDepth],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:2}]};ot.current.chartInstance=new os(wn,{type:"bar",data:Yn,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Advanced Content Quality Metrics",font:{size:16,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(_a){return _a+"%"}}}}}}),console.log("Metrics chart created successfully")}catch(Yn){console.error("Error creating metrics chart:",Yn)}}else console.warn("Cannot initialize metrics chart - missing ref or data")},Zt=qt=>({what:"Seeks information about things, definitions, or explanations",how:"Asks about processes, methods, or procedures",why:"Explores reasons, causes, or motivations",when:"Inquires about time, timing, or temporal information",where:"Asks about location, place, or spatial information",who:"Seeks information about people, roles, or identity",which:"Requests choice or selection from options",whose:"Inquires about ownership or possession",yesNo:"Requires simple yes/no or binary answers",choice:"Presents alternatives for decision-making",confirmation:"Seeks validation or agreement",other:"Miscellaneous or unclassified questions"})[qt]||"General inquiry",Jt=qt=>({simple:"Short, direct questions with clear intent",moderate:"Questions with some complexity or subclauses",complex:"Multi-part questions with conditional elements"})[qt]||"Standard complexity";return e?(console.log("TranscriptAnalysis rendering:",{isVisible:e,analysis:!!n,loading:d,activeTab:N}),o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"guide-button",style:{position:"fixed",top:20,right:20,zIndex:2e3,background:"orange",color:"#fff",border:"none",borderRadius:"8px",padding:"14px 28px",fontWeight:"bold",fontSize:"1.2rem",boxShadow:"0 2px 12px rgba(0,0,0,0.18)",cursor:"pointer"},tabIndex:-1,"aria-label":"Guide",children:"Guide"}),n&&o.jsxs("div",{style:{display:"flex",gap:12,margin:"18px 0 0 18px"},children:[o.jsx("button",{onClick:()=>jL(n),style:{background:"#2d8cff",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600,cursor:"pointer",fontSize:"1em",boxShadow:"0 1px 4px rgba(0,0,0,0.08)"},children:"Export as JSON"}),o.jsx("button",{onClick:()=>EL(n),style:{background:"#27ae60",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600,cursor:"pointer",fontSize:"1em",boxShadow:"0 1px 4px rgba(0,0,0,0.08)"},children:"Export as CSV"})]}),o.jsxs("div",{className:"transcript-analysis",children:[o.jsxs("div",{className:"analysis-header",children:[o.jsx("h2",{children:"📊 Transcript Analysis & Insights"}),o.jsxs("div",{className:"analysis-tabs",children:[o.jsx("button",{className:`tab-button ${N==="summary"?"active":""}`,onClick:()=>{console.log("Switching to summary tab"),I("summary")},children:"📝 Summary"}),o.jsx("button",{className:`tab-button ${N==="detailed"?"active":""}`,onClick:()=>{console.log("Switching to detailed tab"),I("detailed")},children:"📋 Detailed Analysis"}),o.jsx("button",{className:`tab-button ${N==="insights"?"active":""}`,onClick:()=>{console.log("Switching to insights tab"),I("insights")},children:"💡 Insights"}),o.jsx("button",{className:`tab-button ${N==="charts"?"active":""}`,onClick:()=>{console.log("Switching to charts tab"),I("charts"),a&&setTimeout(()=>{Rt(a)},100)},children:"📊 Charts"}),o.jsx("button",{className:`tab-button ${N==="linguistic"?"active":""}`,onClick:()=>{console.log("Switching to linguistic tab"),I("linguistic")},children:"🔤 Linguistic"}),o.jsx("button",{className:`tab-button ${N==="content"?"active":""}`,onClick:()=>{console.log("Switching to content tab"),I("content")},children:"📖 Content"}),o.jsx("button",{className:`tab-button ${N==="statistics"?"active":""}`,onClick:()=>{console.log("Switching to statistics tab"),I("statistics")},children:"📈 Statistics"}),o.jsx("button",{className:`tab-button ${N==="transcript"?"active":""}`,onClick:()=>{console.log("Switching to transcript tab"),I("transcript")},children:"📝 Transcript"}),o.jsx("button",{className:`tab-button ${N==="questions"?"active":""}`,onClick:()=>{console.log("Switching to questions tab"),I("questions")},children:"❓ Questions"})]})]}),d&&o.jsxs("div",{className:"analysis-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Analyzing transcript..."})]}),n&&!d&&o.jsxs("div",{className:"analysis-content",children:[o.jsxs("div",{style:{marginBottom:"12px",padding:"14px 18px",background:"#f6f6fa",borderRadius:"7px",color:"#222",fontSize:"1.08em",fontWeight:500,boxShadow:"0 1px 6px rgba(0,0,0,0.06)",lineHeight:1.7},children:[N==="summary"&&o.jsxs(o.Fragment,{children:[o.jsx("b",{children:"Summary Tab:"})," Provides a concise overview of your transcript, including:",o.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[o.jsxs("li",{children:[o.jsx("b",{children:"Summary:"})," Auto-generated brief of the transcript's main content."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Quick Stats:"})," Word count, sentence count, estimated reading time, readability score, and analysis confidence."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Spam Detection:"})," Indicates if the transcript is likely spam, with matched keywords and spam score."]})]})]}),N==="detailed"&&o.jsxs(o.Fragment,{children:[o.jsx("b",{children:"Detailed Analysis Tab:"})," Offers an in-depth breakdown, including:",o.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[o.jsxs("li",{children:[o.jsx("b",{children:"Brief Summary:"})," A short summary of the transcript."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Main Points:"})," Key points and highlights extracted from the content."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Key Findings:"})," Important findings or insights identified."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Conclusions:"})," Summarized conclusions drawn from the transcript."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Questions Raised:"})," List of questions that arise from the content."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Overview Grid:"})," Shows length, tone, primary topic, complexity, reading level, and structure."]})]})]}),N==="insights"&&o.jsxs(o.Fragment,{children:[o.jsx("b",{children:"Insights Tab:"})," Presents actionable insights and sentiment analysis:",o.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[o.jsxs("li",{children:[o.jsx("b",{children:"Insights Grid:"})," Actionable takeaways, warnings, or suggestions, each with severity and icon."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Sentiment Analysis:"})," Overall sentiment label, score, and confidence."]})]})]}),N==="linguistic"&&o.jsxs(o.Fragment,{children:[o.jsx("b",{children:"Linguistic Tab:"})," Explores the language and structure of the transcript:",o.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[o.jsxs("li",{children:[o.jsx("b",{children:"Vocabulary Analysis:"})," Complexity, average word length, unique words, and repetition rate."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Sentence Types:"})," Counts of declarative, interrogative, and exclamatory sentences."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Tense Distribution:"})," Usage of past, present, and future tenses."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Structure Analysis:"})," Coherence score, transition words, organization, and bullet points."]})]})]}),N==="content"&&o.jsxs(o.Fragment,{children:[o.jsx("b",{children:"Content Tab:"})," Analyzes the types and entities in your transcript:",o.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[o.jsxs("li",{children:[o.jsx("b",{children:"Content Types:"})," Factual statements, opinions, and examples."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Named Entities:"})," People, organizations, locations, and dates mentioned."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Question Analysis:"})," Total, direct, and rhetorical questions, with breakdown by type."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Action Items:"})," Tasks or follow-ups identified in the transcript."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Themes:"})," Main themes and their frequency."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Time Analysis:"})," Focus on past, present, future, and dominant tense."]})]})]}),N==="charts"&&o.jsxs(o.Fragment,{children:[o.jsx("b",{children:"Charts Tab:"})," Visualizes transcript data with interactive charts:",o.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[o.jsxs("li",{children:[o.jsx("b",{children:"Sentiment Analysis:"})," Pie chart of positive, negative, and neutral sentiments."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Top Keywords:"})," Bar chart of most frequent words."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Topic Distribution:"})," Doughnut chart of main topics."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Emotional Analysis:"})," Radar chart of emotional intensities."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Question Types & Complexity:"})," Charts for question types and complexity levels."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Linguistic Features:"})," Chart of vocabulary and readability."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Time References:"})," Chart of past, present, and future references."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Content Quality Metrics:"})," Advanced metrics for diversity and depth."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Interactive Dashboard:"})," Multi-dimensional Plotly chart combining keywords, topics, and sentiment."]})]})]}),N==="statistics"&&o.jsxs(o.Fragment,{children:[o.jsx("b",{children:"Statistics Tab:"})," Shows detailed text statistics and accuracy metrics:",o.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[o.jsxs("li",{children:[o.jsx("b",{children:"Text Statistics:"})," Word, sentence, and paragraph counts, reading time."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Readability:"})," Readability score and description."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Top Keywords:"})," Most frequent keywords and their counts."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Confidence Scores:"})," Analysis, sentiment, readability, keywords, and content confidence."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Accuracy Metrics:"})," Data quality, analysis depth, entity recognition, and linguistic coverage."]})]})]}),N==="questions"&&o.jsxs(o.Fragment,{children:[o.jsx("b",{children:"Questions Tab:"})," Deep dive into all questions in the transcript:",o.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[o.jsxs("li",{children:[o.jsx("b",{children:"Questions Overview:"})," Total, direct, and rhetorical questions, with summary stats."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Types Breakdown:"})," Counts and icons for each question type (what, how, why, etc.)."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Purposes:"})," Information, clarification, confirmation, engagement, reflection, challenge."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Complexity Analysis:"})," Distribution of question complexity levels."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Question Insights:"})," Key insights about the questions asked."]}),o.jsxs("li",{children:[o.jsx("b",{children:"All Questions List:"})," Every question found, with context, type, purpose, and analysis."]})]})]}),N==="transcript"&&o.jsxs(o.Fragment,{children:[o.jsx("b",{children:"Transcript Tab:"})," Annotated, word-by-word transcript analysis:",o.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[o.jsxs("li",{children:[o.jsx("b",{children:"Word-by-Word Analysis:"})," Each word is annotated as a keyword, named entity, or regular word."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Word Cloud:"})," Visual representation of the most frequent words."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Annotated Transcript:"})," The full transcript with color-coded highlights."]}),o.jsxs("li",{children:[o.jsx("b",{children:"Legend:"})," Explains the color codes for keywords, entities, and regular words."]})]})]}),!(N==="summary"||N==="detailed"||N==="insights"||N==="linguistic"||N==="content"||N==="charts"||N==="statistics"||N==="questions"||N==="transcript")&&o.jsxs("span",{children:[o.jsx("b",{children:"Analysis Overview:"})," Select a tab above to view detailed explanations and insights for your transcript. Each tab provides a unique perspective, from summaries and statistics to deep dives into questions, content, and linguistic features."]})]}),o.jsx("div",{style:{marginBottom:"20px",padding:"10px",background:"#34495e",borderRadius:"5px"},children:o.jsxs("small",{children:["Debug Info: Active Tab: ",N," | Analysis Keys: ",Object.keys(n||{}).join(", ")]})}),N==="summary"&&o.jsxs("div",{className:"analysis-section",children:[o.jsxs("div",{className:"summary-card",children:[o.jsx("h3",{children:"📋 Summary"}),o.jsx("div",{className:"summary-content",children:o.jsx(Zv,{text:n.summary,speed:30,className:"summary-text"})})]}),o.jsxs("div",{className:"quick-stats",children:[o.jsxs("div",{className:"stat-item",children:[o.jsx("div",{className:"stat-value",children:o.jsx(ml,{value:((lr=a==null?void 0:a.statisticsData)==null?void 0:lr.wordCount)||0})}),o.jsx("div",{className:"stat-label",children:"Words"})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("div",{className:"stat-value",children:o.jsx(ml,{value:((wr=a==null?void 0:a.statisticsData)==null?void 0:wr.sentenceCount)||0})}),o.jsx("div",{className:"stat-label",children:"Sentences"})]}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-value",children:[o.jsx(ml,{value:((Sr=a==null?void 0:a.statisticsData)==null?void 0:Sr.readingTime)||0}),"m"]}),o.jsx("div",{className:"stat-label",children:"Reading Time"})]}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-value",children:[o.jsx(ml,{value:((vr=a==null?void 0:a.statisticsData)==null?void 0:vr.confidenceScore)||0}),"%"]}),o.jsx("div",{className:"stat-label",children:"Analysis Confidence"})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("div",{className:"stat-value",children:o.jsx(ml,{value:Math.round(n.readabilityScore||0)})}),o.jsx("div",{className:"stat-label",children:"Readability Score"})]}),o.jsxs("div",{className:"stat-item",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:100},children:[o.jsxs("div",{className:"stat-value",style:{color:(Bt=n.spamDetection)!=null&&Bt.isSpam?"#e74c3c":"#27ae60",fontWeight:"bold",fontSize:32,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1.1},children:[(yr=n.spamDetection)!=null&&yr.isSpam?o.jsx("span",{style:{fontSize:36},children:"🚨"}):o.jsx("span",{style:{fontSize:36},children:"✅"}),o.jsx("span",{style:{fontWeight:"bold",fontSize:28,marginTop:4},children:(dr=n.spamDetection)!=null&&dr.isSpam?"Spam":"Not"}),!((Pr=n.spamDetection)!=null&&Pr.isSpam)&&o.jsx("span",{style:{fontWeight:"bold",fontSize:28,marginTop:-4},children:"Spam"})]}),o.jsx("div",{className:"stat-label",style:{marginTop:4,fontWeight:600,letterSpacing:1,fontSize:14},children:"SPAM DETECTION"}),typeof((Hr=n.spamDetection)==null?void 0:Hr.spamScore)<"u"&&o.jsxs("div",{style:{fontSize:"0.9em",color:"#aaa",marginTop:2},children:["Score: ",n.spamDetection.spamScore]}),typeof((Wr=n.spamDetection)==null?void 0:Wr.spamPercent)<"u"&&o.jsxs("div",{style:{fontSize:"0.9em",color:n.spamDetection.spamPercent>50?"#e74c3c":"#27ae60",marginTop:2},children:["Spam %: ",n.spamDetection.spamPercent,"%"]}),Array.isArray((Pn=n.spamDetection)==null?void 0:Pn.matchedKeywords)&&n.spamDetection.matchedKeywords.length>0&&o.jsxs("div",{style:{fontSize:"0.9em",color:"#e67e22",marginTop:2,textAlign:"center"},children:["Matched Spam Keywords: ",n.spamDetection.matchedKeywords.map(qt=>`${qt}${n.spamDetection.matchedKeywordCounts&&n.spamDetection.matchedKeywordCounts[qt]?` (${n.spamDetection.matchedKeywordCounts[qt]})`:""}`).join(", ")]}),Array.isArray((Rn=n.spamDetection)==null?void 0:Rn.uniqueSuspicious)&&n.spamDetection.uniqueSuspicious.length>0&&o.jsxs("div",{style:{fontSize:"0.9em",color:"#f39c12",marginTop:2,textAlign:"center"},children:["Unique Suspicious Keywords: ",n.spamDetection.uniqueSuspicious.map(qt=>`${qt.word} (${qt.count})`).join(", ")]})]})]})]}),N==="detailed"&&o.jsx("div",{className:"analysis-section",children:o.jsxs("div",{className:"detailed-summary",children:[o.jsxs("div",{className:"summary-card",children:[o.jsx("h3",{children:"📋 Brief Summary"}),o.jsx("p",{children:((Fn=n.detailedSummary)==null?void 0:Fn.brief)||"No brief summary available"})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("h3",{children:"🎯 Main Points"}),o.jsx("ul",{children:((sa=(In=n.detailedSummary)==null?void 0:In.mainPoints)==null?void 0:sa.length)>0?n.detailedSummary.mainPoints.map((qt,wn)=>o.jsx("li",{children:qt},wn)):o.jsx("li",{children:"No main points identified"})})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("h3",{children:"🔍 Key Findings"}),o.jsx("ul",{children:((Oi=($a=n.detailedSummary)==null?void 0:$a.keyFindings)==null?void 0:Oi.length)>0?n.detailedSummary.keyFindings.map((qt,wn)=>o.jsx("li",{children:qt},wn)):o.jsx("li",{children:"No key findings identified"})})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("h3",{children:"💭 Conclusions"}),o.jsx("ul",{children:((Ri=(Ya=n.detailedSummary)==null?void 0:Ya.conclusions)==null?void 0:Ri.length)>0?n.detailedSummary.conclusions.map((qt,wn)=>o.jsx("li",{children:qt},wn)):o.jsx("li",{children:"No conclusions identified"})})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("h3",{children:"❓ Questions Raised"}),o.jsx("ul",{children:((Nr=(ar=n.detailedSummary)==null?void 0:ar.questions)==null?void 0:Nr.length)>0?n.detailedSummary.questions.map((qt,wn)=>o.jsx("li",{children:qt},wn)):o.jsx("li",{children:"No questions identified"})})]}),o.jsxs("div",{className:"overview-grid",children:[o.jsxs("div",{className:"overview-item",children:[o.jsx("strong",{children:"Length:"})," ",((Cr=(Xr=n.detailedSummary)==null?void 0:Xr.overview)==null?void 0:Cr.length)||"N/A"]}),o.jsxs("div",{className:"overview-item",children:[o.jsx("strong",{children:"Tone:"})," ",((On=(pn=n.detailedSummary)==null?void 0:pn.overview)==null?void 0:On.tone)||"N/A"]}),o.jsxs("div",{className:"overview-item",children:[o.jsx("strong",{children:"Primary Topic:"})," ",((kn=(Hn=n.detailedSummary)==null?void 0:Hn.overview)==null?void 0:kn.primaryTopic)||"N/A"]}),o.jsxs("div",{className:"overview-item",children:[o.jsx("strong",{children:"Complexity:"})," ",((ba=(Gn=n.detailedSummary)==null?void 0:Gn.overview)==null?void 0:ba.complexity)||"N/A"]}),o.jsxs("div",{className:"overview-item",children:[o.jsx("strong",{children:"Reading Level:"})," ",((Ai=(Pi=n.detailedSummary)==null?void 0:Pi.overview)==null?void 0:Ai.readingLevel)||"N/A"]}),o.jsxs("div",{className:"overview-item",children:[o.jsx("strong",{children:"Structure:"})," ",((Bi=(_i=n.detailedSummary)==null?void 0:_i.structure)==null?void 0:Bi.structure)||"N/A"]})]})]})}),N==="insights"&&o.jsxs("div",{className:"analysis-section",children:[o.jsx("div",{className:"insights-grid",children:n.insights&&n.insights.length>0?n.insights.map((qt,wn)=>o.jsxs("div",{className:`insight-card ${qt.severity}`,children:[o.jsxs("div",{className:"insight-header",children:[o.jsx("span",{className:"insight-icon",children:qt.icon}),o.jsx("h4",{children:qt.title})]}),o.jsx("p",{children:qt.description})]},wn)):o.jsxs("div",{className:"insight-card info",children:[o.jsxs("div",{className:"insight-header",children:[o.jsx("span",{className:"insight-icon",children:"💡"}),o.jsx("h4",{children:"No Insights Available"})]}),o.jsx("p",{children:"No specific insights could be generated for this transcript."})]})}),o.jsxs("div",{className:"sentiment-analysis",children:[o.jsx("h3",{children:"🎭 Sentiment Analysis"}),o.jsxs("div",{className:"sentiment-details",children:[o.jsx("div",{className:`sentiment-badge ${((Hi=(Nn=n.sentiment)==null?void 0:Nn.label)==null?void 0:Hi.toLowerCase())||"neutral"}`,children:((ri=n.sentiment)==null?void 0:ri.label)||"Neutral"}),o.jsxs("div",{className:"sentiment-score",children:["Score: ",((((ti=n.sentiment)==null?void 0:ti.score)||0)*100).toFixed(1),"%"]}),o.jsxs("div",{className:"sentiment-confidence",children:["Confidence: ",((((Jn=n.sentiment)==null?void 0:Jn.confidence)||0)*100).toFixed(1),"%"]})]})]})]}),N==="linguistic"&&o.jsx("div",{className:"analysis-section",children:o.jsxs("div",{className:"linguistic-grid",children:[o.jsxs("div",{className:"linguistic-card",children:[o.jsx("h3",{children:"📝 Vocabulary Analysis"}),o.jsxs("div",{className:"linguistic-details",children:[o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Vocabulary Complexity:"}),o.jsx("span",{children:((Ca=n.linguisticAnalysis)==null?void 0:Ca.vocabularyComplexity)||"N/A"})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Average Word Length:"}),o.jsxs("span",{children:[((Ni=n.linguisticAnalysis)==null?void 0:Ni.averageWordLength)||"N/A"," characters"]})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Unique Words:"}),o.jsx("span",{children:((si=n.linguisticAnalysis)==null?void 0:si.uniqueWords)||0})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Repetition Rate:"}),o.jsx("span",{children:((ui=n.linguisticAnalysis)==null?void 0:ui.repetitionRate)||"N/A"})]})]})]}),o.jsxs("div",{className:"linguistic-card",children:[o.jsx("h3",{children:"🔤 Sentence Types"}),o.jsxs("div",{className:"sentence-types",children:[o.jsxs("div",{className:"type-item",children:[o.jsx("span",{children:"Declarative:"}),o.jsx("span",{children:((wa=(ea=n.linguisticAnalysis)==null?void 0:ea.sentenceTypes)==null?void 0:wa.declarative)||0})]}),o.jsxs("div",{className:"type-item",children:[o.jsx("span",{children:"Interrogative:"}),o.jsx("span",{children:((As=(Yi=n.linguisticAnalysis)==null?void 0:Yi.sentenceTypes)==null?void 0:As.interrogative)||0})]}),o.jsxs("div",{className:"type-item",children:[o.jsx("span",{children:"Exclamatory:"}),o.jsx("span",{children:((zi=(oi=n.linguisticAnalysis)==null?void 0:oi.sentenceTypes)==null?void 0:zi.exclamatory)||0})]})]})]}),o.jsxs("div",{className:"linguistic-card",children:[o.jsx("h3",{children:"⏰ Tense Distribution"}),o.jsxs("div",{className:"tense-analysis",children:[o.jsxs("div",{className:"tense-item",children:[o.jsx("span",{children:"Past:"}),o.jsx("span",{children:((Os=(Cs=n.linguisticAnalysis)==null?void 0:Cs.tenseDistribution)==null?void 0:Os.past)||0})]}),o.jsxs("div",{className:"tense-item",children:[o.jsx("span",{children:"Present:"}),o.jsx("span",{children:((Bs=(mn=n.linguisticAnalysis)==null?void 0:mn.tenseDistribution)==null?void 0:Bs.present)||0})]}),o.jsxs("div",{className:"tense-item",children:[o.jsx("span",{children:"Future:"}),o.jsx("span",{children:((zr=(pr=n.linguisticAnalysis)==null?void 0:pr.tenseDistribution)==null?void 0:zr.future)||0})]})]})]}),o.jsxs("div",{className:"linguistic-card",children:[o.jsx("h3",{children:"🏗️ Structure Analysis"}),o.jsxs("div",{className:"structure-details",children:[o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Coherence Score:"}),o.jsxs("span",{children:[((sn=n.structuralAnalysis)==null?void 0:sn.coherenceScore)||0,"/100"]})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Transition Words:"}),o.jsx("span",{children:((Yr=n.structuralAnalysis)==null?void 0:Yr.transitionWords)||0})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Organization:"}),o.jsx("span",{children:((cn=n.structuralAnalysis)==null?void 0:cn.organizationPattern)||"N/A"})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Bullet Points:"}),o.jsx("span",{children:((un=(Mn=n.structuralAnalysis)==null?void 0:Mn.listElements)==null?void 0:un.bulletPoints)||0})]})]})]})]})}),N==="content"&&o.jsx("div",{className:"analysis-section",children:o.jsxs("div",{className:"content-grid",children:[o.jsxs("div",{className:"content-card",children:[o.jsx("h3",{children:"📊 Content Types"}),o.jsxs("div",{className:"content-types",children:[o.jsxs("div",{className:"type-bar",children:[o.jsx("span",{children:"Factual Statements:"}),o.jsx("div",{className:"bar-container",children:o.jsx("div",{className:"bar-fill",style:{width:`${(((en=(rn=n.contentAnalysis)==null?void 0:rn.contentTypes)==null?void 0:en.factual)||0)*10}%`}})}),o.jsx("span",{children:(Kn=(Wn=n.contentAnalysis)==null?void 0:Wn.contentTypes)==null?void 0:Kn.factual})]}),o.jsxs("div",{className:"type-bar",children:[o.jsx("span",{children:"Opinions:"}),o.jsx("div",{className:"bar-container",children:o.jsx("div",{className:"bar-fill",style:{width:`${(((Ci=(ki=n.contentAnalysis)==null?void 0:ki.contentTypes)==null?void 0:Ci.opinions)||0)*10}%`}})}),o.jsx("span",{children:(oa=(Wi=n.contentAnalysis)==null?void 0:Wi.contentTypes)==null?void 0:oa.opinions})]}),o.jsxs("div",{className:"type-bar",children:[o.jsx("span",{children:"Examples:"}),o.jsx("div",{className:"bar-container",children:o.jsx("div",{className:"bar-fill",style:{width:`${(((Ks=(Gi=n.contentAnalysis)==null?void 0:Gi.contentTypes)==null?void 0:Ks.examples)||0)*10}%`}})}),o.jsx("span",{children:(Hs=(kr=n.contentAnalysis)==null?void 0:kr.contentTypes)==null?void 0:Hs.examples})]})]})]}),o.jsxs("div",{className:"content-card",children:[o.jsx("h3",{children:"🎯 Named Entities"}),o.jsxs("div",{className:"entities-grid",children:[o.jsxs("div",{className:"entity-group",children:[o.jsx("h4",{children:"👥 People"}),o.jsx("ul",{children:((uo=(eo=n.namedEntities)==null?void 0:eo.people)==null?void 0:uo.length)>0?n.namedEntities.people.slice(0,3).map((qt,wn)=>o.jsx("li",{children:qt},wn)):o.jsx("li",{children:"No people identified"})})]}),o.jsxs("div",{className:"entity-group",children:[o.jsx("h4",{children:"🏢 Organizations"}),o.jsx("ul",{children:((Co=(js=n.namedEntities)==null?void 0:js.organizations)==null?void 0:Co.length)>0?n.namedEntities.organizations.slice(0,3).map((qt,wn)=>o.jsx("li",{children:qt},wn)):o.jsx("li",{children:"No organizations identified"})})]}),o.jsxs("div",{className:"entity-group",children:[o.jsx("h4",{children:"📍 Locations"}),o.jsx("ul",{children:((Fi=(us=n.namedEntities)==null?void 0:us.locations)==null?void 0:Fi.length)>0?n.namedEntities.locations.slice(0,3).map((qt,wn)=>o.jsx("li",{children:qt},wn)):o.jsx("li",{children:"No locations identified"})})]}),o.jsxs("div",{className:"entity-group",children:[o.jsx("h4",{children:"📅 Dates"}),o.jsx("ul",{children:((Si=(Di=n.namedEntities)==null?void 0:Di.dates)==null?void 0:Si.length)>0?n.namedEntities.dates.slice(0,3).map((qt,wn)=>o.jsx("li",{children:qt},wn)):o.jsx("li",{children:"No dates identified"})})]})]})]}),o.jsxs("div",{className:"content-card",children:[o.jsx("h3",{children:"❓ Question Analysis"}),o.jsxs("div",{className:"question-analysis-header",children:[o.jsxs("div",{className:"question-stats",children:[o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{children:"Total Questions:"}),o.jsx("span",{className:"stat-value",children:((ha=n.questionAnalysis)==null?void 0:ha.totalQuestions)||0})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{children:"Direct Questions:"}),o.jsx("span",{className:"stat-value",children:((pa=n.questionAnalysis)==null?void 0:pa.direct)||0})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{children:"Rhetorical Questions:"}),o.jsx("span",{className:"stat-value",children:((Ws=n.questionAnalysis)==null?void 0:Ws.rhetorical)||0})]})]}),o.jsxs("div",{className:"question-types-grid",children:[o.jsxs("div",{className:"question-type-item",children:[o.jsx("span",{className:"type-label",children:"What:"}),o.jsx("span",{className:"type-count",children:((bc=(Dl=n.questionAnalysis)==null?void 0:Dl.questionTypes)==null?void 0:bc.what)||0})]}),o.jsxs("div",{className:"question-type-item",children:[o.jsx("span",{className:"type-label",children:"How:"}),o.jsx("span",{className:"type-count",children:((Xi=(ou=n.questionAnalysis)==null?void 0:ou.questionTypes)==null?void 0:Xi.how)||0})]}),o.jsxs("div",{className:"question-type-item",children:[o.jsx("span",{className:"type-label",children:"Why:"}),o.jsx("span",{className:"type-count",children:((La=(qs=n.questionAnalysis)==null?void 0:qs.questionTypes)==null?void 0:La.why)||0})]}),o.jsxs("div",{className:"question-type-item",children:[o.jsx("span",{className:"type-label",children:"When:"}),o.jsx("span",{className:"type-count",children:((ds=(Ra=n.questionAnalysis)==null?void 0:Ra.questionTypes)==null?void 0:ds.when)||0})]}),o.jsxs("div",{className:"question-type-item",children:[o.jsx("span",{className:"type-label",children:"Where:"}),o.jsx("span",{className:"type-count",children:((es=(Pl=n.questionAnalysis)==null?void 0:Pl.questionTypes)==null?void 0:es.where)||0})]}),o.jsxs("div",{className:"question-type-item",children:[o.jsx("span",{className:"type-label",children:"Who:"}),o.jsx("span",{className:"type-count",children:((ct=(nl=n.questionAnalysis)==null?void 0:nl.questionTypes)==null?void 0:ct.who)||0})]}),o.jsxs("div",{className:"question-type-item",children:[o.jsx("span",{className:"type-label",children:"Yes/No:"}),o.jsx("span",{className:"type-count",children:((nn=(ur=n.questionAnalysis)==null?void 0:ur.questionTypes)==null?void 0:nn.yesNo)||0})]}),o.jsxs("div",{className:"question-type-item",children:[o.jsx("span",{className:"type-label",children:"Other:"}),o.jsx("span",{className:"type-count",children:((Fr=(dn=n.questionAnalysis)==null?void 0:dn.questionTypes)==null?void 0:Fr.other)||0})]})]})]}),o.jsxs("div",{className:"questions-list",children:[o.jsx("h4",{children:"📝 Questions Found in Text:"}),(($n=(ln=n.questionAnalysis)==null?void 0:ln.questionsWithContext)==null?void 0:$n.length)>0?o.jsx("div",{className:"extracted-questions",children:n.questionAnalysis.questionsWithContext.map((qt,wn)=>o.jsxs("div",{className:`question-item ${qt.isRhetorical?"rhetorical":"direct"}`,children:[o.jsxs("div",{className:"question-header",children:[o.jsxs("span",{className:"question-number",children:["Q",wn+1]}),o.jsx("span",{className:`question-type-badge ${qt.type}`,children:qt.type.toUpperCase()}),o.jsx("span",{className:`question-style-badge ${qt.isRhetorical?"rhetorical":"direct"}`,children:qt.isRhetorical?"Rhetorical":"Direct"})]}),o.jsx("div",{className:"question-text",children:qt.text}),qt.context&&(qt.context.before||qt.context.after)&&o.jsxs("div",{className:"question-context",children:[qt.context.before&&o.jsxs("div",{className:"context-before",children:[o.jsx("strong",{children:"Context before:"})," ",qt.context.before]}),qt.context.after&&o.jsxs("div",{className:"context-after",children:[o.jsx("strong",{children:"Context after:"})," ",qt.context.after]})]})]},wn))}):o.jsxs("div",{className:"no-questions",children:[o.jsx("div",{className:"no-questions-icon",children:"❓"}),o.jsx("p",{children:"No questions found in this transcript."}),o.jsx("p",{className:"suggestion",children:"This suggests a more declarative communication style focused on providing information rather than seeking it."})]})]})]}),o.jsxs("div",{className:"content-card",children:[o.jsx("h3",{children:"✅ Action Items"}),o.jsx("div",{className:"action-items",children:n.actionItems&&n.actionItems.length>0?n.actionItems.slice(0,5).map((qt,wn)=>{var Yn;return o.jsxs("div",{className:`action-item priority-${((Yn=qt.priority)==null?void 0:Yn.toLowerCase())||"low"}`,children:[o.jsx("div",{className:"action-text",children:qt.text}),o.jsxs("div",{className:"action-meta",children:[o.jsx("span",{className:"priority",children:qt.priority||"Low"}),o.jsx("span",{className:"type",children:qt.type||"Task"})]})]},wn)}):o.jsx("div",{className:"action-item priority-low",children:o.jsx("div",{className:"action-text",children:"No action items identified"})})})]}),o.jsxs("div",{className:"content-card",children:[o.jsx("h3",{children:"🎨 Themes"}),o.jsx("div",{className:"themes-list",children:n.themes&&n.themes.length>0?n.themes.map((qt,wn)=>o.jsxs("div",{className:"theme-item",children:[o.jsx("span",{className:"theme-name",children:qt.theme}),o.jsx("span",{className:"theme-count",children:qt.count})]},wn)):o.jsxs("div",{className:"theme-item",children:[o.jsx("span",{className:"theme-name",children:"No themes identified"}),o.jsx("span",{className:"theme-count",children:"0"})]})})]}),o.jsxs("div",{className:"content-card",children:[o.jsx("h3",{children:"⏰ Time Analysis"}),o.jsxs("div",{className:"time-analysis",children:[o.jsxs("div",{className:"time-orientation",children:[o.jsxs("div",{className:"time-item",children:[o.jsx("span",{children:"Past Focus:"}),o.jsx("span",{children:((Ii=(Tn=n.timeAnalysis)==null?void 0:Tn.timeOrientation)==null?void 0:Ii.past)||0})]}),o.jsxs("div",{className:"time-item",children:[o.jsx("span",{children:"Present Focus:"}),o.jsx("span",{children:((Da=(ma=n.timeAnalysis)==null?void 0:ma.timeOrientation)==null?void 0:Da.present)||0})]}),o.jsxs("div",{className:"time-item",children:[o.jsx("span",{children:"Future Focus:"}),o.jsx("span",{children:((Nl=(Ga=n.timeAnalysis)==null?void 0:Ga.timeOrientation)==null?void 0:Nl.future)||0})]})]}),o.jsxs("div",{className:"dominant-tense",children:[o.jsx("strong",{children:"Dominant Tense:"})," ",((Wo=n.timeAnalysis)==null?void 0:Wo.dominantTense)||"N/A"]})]})]})]})}),N==="charts"&&o.jsxs("div",{className:"analysis-section",children:[o.jsxs("div",{className:"charts-intro",children:[o.jsx("h3",{children:"📊 Visual Analytics Dashboard"}),o.jsx("p",{children:"Comprehensive visual analysis of your transcript content with interactive charts and advanced metrics."})]}),o.jsxs("div",{className:"insights-cards",children:[o.jsxs("div",{className:"insight-card",children:[o.jsx("div",{className:"insight-icon",children:"📈"}),o.jsxs("div",{className:"insight-content",children:[o.jsx("h4",{children:"Content Quality Score"}),o.jsxs("div",{className:"insight-value",children:[((wc=a==null?void 0:a.statisticsData)==null?void 0:wc.confidenceScore)||0,"%"]}),o.jsx("p",{children:"Overall analysis confidence"})]})]}),o.jsxs("div",{className:"insight-card",children:[o.jsx("div",{className:"insight-icon",children:"🎯"}),o.jsxs("div",{className:"insight-content",children:[o.jsx("h4",{children:"Dominant Sentiment"}),o.jsx("div",{className:"insight-value",children:((il=n==null?void 0:n.sentiment)==null?void 0:il.label)||"Neutral"}),o.jsxs("p",{children:[((((Ia=n==null?void 0:n.sentiment)==null?void 0:Ia.confidence)||0)*100).toFixed(1),"% confidence"]})]})]}),o.jsxs("div",{className:"insight-card",children:[o.jsx("div",{className:"insight-icon",children:"📚"}),o.jsxs("div",{className:"insight-content",children:[o.jsx("h4",{children:"Reading Level"}),o.jsx("div",{className:"insight-value",children:((ts=(zl=n==null?void 0:n.contentAnalysis)==null?void 0:zl.overview)==null?void 0:ts.readingLevel)||"Medium"}),o.jsxs("p",{children:[((al=a==null?void 0:a.statisticsData)==null?void 0:al.readingTime)||0," min read"]})]})]}),o.jsxs("div",{className:"insight-card",children:[o.jsx("div",{className:"insight-icon",children:"❓"}),o.jsxs("div",{className:"insight-content",children:[o.jsx("h4",{children:"Questions Found"}),o.jsx("div",{className:"insight-value",children:((sl=a==null?void 0:a.statisticsData)==null?void 0:sl.questionCount)||0}),o.jsx("p",{children:"Interactive elements detected"})]})]})]}),o.jsxs("div",{className:"charts-grid",children:[o.jsxs("div",{className:"chart-container",children:[o.jsx("h4",{children:"Sentiment Analysis"}),o.jsx("canvas",{ref:ye}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Distribution of positive, negative, and neutral sentiments in the content"})})]}),o.jsxs("div",{className:"chart-container",children:[o.jsx("h4",{children:"Top Keywords"}),o.jsx("canvas",{ref:xe}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Most frequently used words and their occurrence counts"})})]}),o.jsxs("div",{className:"chart-container",children:[o.jsx("h4",{children:"Topic Distribution"}),o.jsx("canvas",{ref:Ce}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Main topics covered in the content and their relative importance"})})]}),o.jsxs("div",{className:"chart-container",children:[o.jsx("h4",{children:"Emotional Analysis"}),o.jsx("canvas",{ref:Ve}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Emotional spectrum analysis showing different emotional intensities"})})]}),o.jsxs("div",{className:"chart-container",children:[o.jsx("h4",{children:"Question Types"}),o.jsx("canvas",{ref:qe}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Distribution of different question types (What, How, Why, etc.)"})})]}),o.jsxs("div",{className:"chart-container",children:[o.jsx("h4",{children:"Question Complexity"}),o.jsx("canvas",{ref:ze}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Analysis of question complexity levels from simple to complex"})})]}),o.jsxs("div",{className:"chart-container",children:[o.jsx("h4",{children:"Linguistic Features"}),o.jsx("canvas",{ref:Oe}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Analysis of linguistic complexity, vocabulary, and readability"})})]}),o.jsxs("div",{className:"chart-container",children:[o.jsx("h4",{children:"Time References"}),o.jsx("canvas",{ref:We}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Distribution of past, present, and future time references"})})]}),o.jsxs("div",{className:"chart-container chart-wide",children:[o.jsx("h4",{children:"Content Quality Metrics"}),o.jsx("canvas",{ref:ot}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Advanced metrics showing content diversity, emotional range, and analytical depth"})})]})]}),o.jsxs("div",{className:"plotly-chart-container",children:[o.jsx("h4",{children:"📈 Interactive Dashboard"}),o.jsx("div",{ref:Ye}),o.jsx("div",{className:"chart-info",children:o.jsx("p",{children:"Interactive multi-dimensional analysis combining keywords, topics, and sentiment data"})})]})]}),N==="summary"&&(n==null?void 0:n.analysisSections)&&o.jsx("div",{className:"analysis-sections-grid",children:n.analysisSections.map((qt,wn)=>o.jsxs("div",{className:"analysis-section-card white-text",children:[o.jsx("h4",{children:qt.label}),o.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(qt,null,2)})]},wn))}),N==="statistics"&&o.jsx("div",{className:"analysis-section",children:o.jsxs("div",{className:"statistics-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("h4",{children:"📊 Text Statistics"}),o.jsxs("div",{className:"stat-details",children:[o.jsxs("div",{className:"stat-row",children:[o.jsx("span",{children:"Words:"}),o.jsx("span",{children:((di=n.statistics)==null?void 0:di.wordCount)||0})]}),o.jsxs("div",{className:"stat-row",children:[o.jsx("span",{children:"Sentences:"}),o.jsx("span",{children:((ol=n.statistics)==null?void 0:ol.sentenceCount)||0})]}),o.jsxs("div",{className:"stat-row",children:[o.jsx("span",{children:"Paragraphs:"}),o.jsx("span",{children:((_c=n.statistics)==null?void 0:_c.paragraphCount)||0})]}),o.jsxs("div",{className:"stat-row",children:[o.jsx("span",{children:"Reading Time:"}),o.jsxs("span",{children:[((kc=n.statistics)==null?void 0:kc.readingTime)||0," minutes"]})]})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("h4",{children:"📈 Readability"}),o.jsxs("div",{className:"readability-score",children:[o.jsxs("div",{className:"score-circle",children:[o.jsx("span",{className:"score-value",children:Math.round(n.readabilityScore||0)}),o.jsx("span",{className:"score-label",children:"/100"})]}),o.jsx("p",{className:"readability-description",children:(n.readabilityScore||0)>=70?"Easy to read":(n.readabilityScore||0)>=50?"Moderate difficulty":"Difficult to read"})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("h4",{children:"🔑 Top Keywords"}),o.jsx("div",{className:"keywords-list",children:n.keywords&&n.keywords.length>0?n.keywords.slice(0,5).map((qt,wn)=>o.jsxs("div",{className:"keyword-item",children:[o.jsx("span",{className:"keyword-word",children:qt.word}),o.jsxs("span",{className:"keyword-count",children:[qt.count,"x"]})]},wn)):o.jsxs("div",{className:"keyword-item",children:[o.jsx("span",{className:"keyword-word",children:"No keywords found"}),o.jsx("span",{className:"keyword-count",children:"0x"})]})})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("h4",{children:"🎯 Confidence Scores"}),o.jsxs("div",{className:"confidence-scores",children:[o.jsxs("div",{className:"confidence-item",children:[o.jsx("span",{children:"Overall Analysis Confidence:"}),o.jsx("div",{className:"confidence-bar",children:o.jsx("div",{className:"confidence-fill",style:{width:`${((jo=a==null?void 0:a.statisticsData)==null?void 0:jo.confidenceScore)||0}%`}})}),o.jsxs("span",{children:[((ji=a==null?void 0:a.statisticsData)==null?void 0:ji.confidenceScore)||0,"%"]})]}),o.jsxs("div",{className:"confidence-item",children:[o.jsx("span",{children:"Sentiment Confidence:"}),o.jsx("div",{className:"confidence-bar",children:o.jsx("div",{className:"confidence-fill",style:{width:`${(((fo=n.sentiment)==null?void 0:fo.confidence)||0)*100}%`}})}),o.jsxs("span",{children:[((((ll=n.sentiment)==null?void 0:ll.confidence)||0)*100).toFixed(1),"%"]})]}),o.jsxs("div",{className:"confidence-item",children:[o.jsx("span",{children:"Readability Confidence:"}),o.jsx("div",{className:"confidence-bar",children:o.jsx("div",{className:"confidence-fill",style:{width:`${Math.min(100,n.readabilityScore||0)}%`}})}),o.jsxs("span",{children:[Math.round(n.readabilityScore||0),"%"]})]}),o.jsxs("div",{className:"confidence-item",children:[o.jsx("span",{children:"Keywords Confidence:"}),o.jsx("div",{className:"confidence-bar",children:o.jsx("div",{className:"confidence-fill",style:{width:`${Math.min(100,(((cl=n.keywords)==null?void 0:cl.length)||0)*10)}%`}})}),o.jsxs("span",{children:[Math.min(100,(((lu=n.keywords)==null?void 0:lu.length)||0)*10),"%"]})]}),o.jsxs("div",{className:"confidence-item",children:[o.jsx("span",{children:"Content Analysis Confidence:"}),o.jsx("div",{className:"confidence-bar",children:o.jsx("div",{className:"confidence-fill",style:{width:`${Math.min(100,(((Fl=n.statistics)==null?void 0:Fl.wordCount)||0)/10)}%`}})}),o.jsxs("span",{children:[Math.min(100,Math.round((((Il=n.statistics)==null?void 0:Il.wordCount)||0)/10)),"%"]})]})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("h4",{children:"📊 Analysis Accuracy Metrics"}),o.jsxs("div",{className:"accuracy-metrics",children:[o.jsxs("div",{className:"metric-item",children:[o.jsx("span",{children:"Data Quality Score:"}),o.jsx("div",{className:"metric-value high",children:((to=n.statistics)==null?void 0:to.wordCount)>100?"High":((Wa=n.statistics)==null?void 0:Wa.wordCount)>50?"Medium":"Low"})]}),o.jsxs("div",{className:"metric-item",children:[o.jsx("span",{children:"Analysis Depth:"}),o.jsx("div",{className:"metric-value medium",children:((ho=n.keywords)==null?void 0:ho.length)>10?"Deep":((Bn=n.keywords)==null?void 0:Bn.length)>5?"Moderate":"Basic"})]}),o.jsxs("div",{className:"metric-item",children:[o.jsx("span",{children:"Entity Recognition:"}),o.jsx("div",{className:"metric-value high",children:(((cu=(Sc=n.namedEntities)==null?void 0:Sc.people)==null?void 0:cu.length)||0)+(((Bf=(ad=n.namedEntities)==null?void 0:ad.organizations)==null?void 0:Bf.length)||0)+(((Hf=(sd=n.namedEntities)==null?void 0:sd.locations)==null?void 0:Hf.length)||0)>5?"Excellent":(((Wf=(uu=n.namedEntities)==null?void 0:uu.people)==null?void 0:Wf.length)||0)+(((od=(du=n.namedEntities)==null?void 0:du.organizations)==null?void 0:od.length)||0)+(((cd=(ld=n.namedEntities)==null?void 0:ld.locations)==null?void 0:cd.length)||0)>2?"Good":"Basic"})]}),o.jsxs("div",{className:"metric-item",children:[o.jsx("span",{children:"Linguistic Coverage:"}),o.jsx("div",{className:"metric-value medium",children:((fu=n.linguisticAnalysis)==null?void 0:fu.uniqueWords)>50?"Comprehensive":((qf=n.linguisticAnalysis)==null?void 0:qf.uniqueWords)>25?"Adequate":"Limited"})]})]})]})]})}),N==="questions"&&o.jsxs("div",{className:"analysis-section",children:[o.jsxs("div",{className:"questions-overview",children:[o.jsxs("div",{className:"questions-summary",children:[o.jsx("h3",{children:o.jsx(Zv,{text:"❓ Questions Analysis Overview",speed:80,className:"section-title"})}),o.jsxs("div",{className:"questions-summary-stats",children:[o.jsxs("div",{className:"summary-stat",children:[o.jsx("div",{className:"stat-icon",children:"📊"}),o.jsxs("div",{className:"stat-info",children:[o.jsx("div",{className:"stat-number",children:o.jsx(ml,{value:((Vf=n.questionAnalysis)==null?void 0:Vf.totalQuestions)||0})}),o.jsx("div",{className:"stat-label",children:"Total Questions"})]})]}),o.jsxs("div",{className:"summary-stat",children:[o.jsx("div",{className:"stat-icon",children:"🎯"}),o.jsxs("div",{className:"stat-info",children:[o.jsx("div",{className:"stat-number",children:o.jsx(ml,{value:((ud=n.questionAnalysis)==null?void 0:ud.direct)||0})}),o.jsx("div",{className:"stat-label",children:"Direct Questions"})]})]}),o.jsxs("div",{className:"summary-stat",children:[o.jsx("div",{className:"stat-icon",children:"💭"}),o.jsxs("div",{className:"stat-info",children:[o.jsx("div",{className:"stat-number",children:o.jsx(ml,{value:((Uf=n.questionAnalysis)==null?void 0:Uf.rhetorical)||0})}),o.jsx("div",{className:"stat-label",children:"Rhetorical Questions"})]})]})]})]}),o.jsxs("div",{className:"question-types-breakdown",children:[o.jsx("h3",{children:o.jsx(Zv,{text:"📋 Question Types Breakdown",speed:80,className:"section-title"})}),o.jsxs("div",{className:"question-type-stats",children:[o.jsxs("div",{className:"stat-row",children:[o.jsx("span",{children:"Question Density:"}),o.jsxs("span",{className:"stat-value",children:[(($f=n.questionAnalysis)==null?void 0:$f.questionDensity)||0,"%"]})]}),o.jsxs("div",{className:"stat-row",children:[o.jsx("span",{children:"Average Complexity:"}),o.jsx("span",{className:"stat-value",children:((Yf=n.questionAnalysis)==null?void 0:Yf.averageComplexity)||"N/A"})]}),o.jsxs("div",{className:"stat-row",children:[o.jsx("span",{children:"Most Common Type:"}),o.jsx("span",{className:"stat-value",children:((po=n.questionAnalysis)==null?void 0:po.mostCommonType)||"N/A"})]})]}),o.jsx("div",{className:"types-grid",children:Object.entries(((Ol=n.questionAnalysis)==null?void 0:Ol.questionTypes)||{}).map(([qt,wn])=>o.jsxs("div",{className:"type-breakdown-item",children:[o.jsxs("div",{className:`type-icon ${qt}`,children:[qt==="what"&&"❓",qt==="how"&&"🔧",qt==="why"&&"🤔",qt==="when"&&"⏰",qt==="where"&&"📍",qt==="who"&&"👤",qt==="which"&&"🔍",qt==="whose"&&"👑",qt==="yesNo"&&"✅",qt==="choice"&&"🔀",qt==="confirmation"&&"✔️",qt==="other"&&"❔"]}),o.jsxs("div",{className:"type-info",children:[o.jsx("div",{className:"type-count",children:o.jsx(ml,{value:wn})}),o.jsx("div",{className:"type-name",children:qt.charAt(0).toUpperCase()+qt.slice(1)}),o.jsx("div",{className:"type-description",children:Zt(qt)})]})]},qt))}),o.jsxs("div",{className:"question-purposes",children:[o.jsx("h4",{children:"🎯 Question Purposes"}),o.jsx("div",{className:"purposes-grid",children:Object.entries(((hu=n.questionAnalysis)==null?void 0:hu.questionPurposes)||{}).map(([qt,wn])=>o.jsxs("div",{className:"purpose-item",children:[o.jsxs("div",{className:"purpose-icon",children:[qt==="information"&&"📊",qt==="clarification"&&"🔍",qt==="confirmation"&&"✅",qt==="engagement"&&"💬",qt==="reflection"&&"🤔",qt==="challenge"&&"⚡"]}),o.jsxs("div",{className:"purpose-details",children:[o.jsx("div",{className:"purpose-count",children:wn}),o.jsx("div",{className:"purpose-name",children:qt})]})]},qt))})]}),o.jsxs("div",{className:"complexity-analysis",children:[o.jsx("h4",{children:"📈 Complexity Distribution"}),o.jsx("div",{className:"complexity-grid",children:Object.entries(((pu=n.questionAnalysis)==null?void 0:pu.complexityLevels)||{}).map(([qt,wn])=>o.jsxs("div",{className:"complexity-item",children:[o.jsxs("div",{className:`complexity-indicator ${qt}`,children:[o.jsx("div",{className:"complexity-count",children:wn}),o.jsx("div",{className:"complexity-level",children:qt})]}),o.jsx("div",{className:"complexity-description",children:Jt(qt)})]},qt))})]}),((mu=n.questionAnalysis)==null?void 0:mu.questionInsights)&&o.jsxs("div",{className:"question-insights",children:[o.jsx("h4",{children:"💡 Question Analysis Insights"}),o.jsx("div",{className:"insights-list",children:n.questionAnalysis.questionInsights.map((qt,wn)=>o.jsxs("div",{className:"insight-item",children:[o.jsx("div",{className:"insight-icon",children:"🔍"}),o.jsx("div",{className:"insight-text",children:qt})]},wn))})]})]})]}),o.jsxs("div",{className:"all-questions-list",children:[o.jsx("h3",{children:"📝 All Questions Found"}),((qo=(vu=n.questionAnalysis)==null?void 0:vu.questionsWithContext)==null?void 0:qo.length)>0?o.jsx("div",{className:"questions-container",children:n.questionAnalysis.questionsWithContext.map((qt,wn)=>o.jsxs("div",{className:`detailed-question-item ${qt.isRhetorical?"rhetorical":"direct"}`,children:[o.jsxs("div",{className:"question-header-detailed",children:[o.jsxs("div",{className:"question-meta",children:[o.jsxs("span",{className:"question-number",children:["#",wn+1]}),o.jsx("span",{className:`question-type-badge ${qt.type}`,children:qt.type.toUpperCase()}),o.jsx("span",{className:`question-subtype-badge ${qt.subType}`,children:qt.subType}),o.jsx("span",{className:`question-style-badge ${qt.isRhetorical?"rhetorical":"direct"}`,children:qt.isRhetorical?"Rhetorical":"Direct"}),o.jsx("span",{className:`complexity-badge ${qt.complexity}`,children:qt.complexity})]}),o.jsxs("div",{className:"question-position",children:["Position: ",qt.index+1," | Purpose: ",qt.purpose]})]}),o.jsxs("div",{className:"question-content",children:[o.jsx("div",{className:"question-text-large",children:qt.text}),o.jsxs("div",{className:"question-explanation",children:[o.jsx("strong",{children:"Analysis:"})," ",qt.explanation]}),qt.context&&(qt.context.before||qt.context.after)&&o.jsxs("div",{className:"question-context-detailed",children:[o.jsx("h4",{children:"📖 Context"}),qt.context.before&&o.jsxs("div",{className:"context-section",children:[o.jsx("strong",{className:"context-label",children:"Before:"}),o.jsx("span",{className:"context-text",children:qt.context.before})]}),qt.context.after&&o.jsxs("div",{className:"context-section",children:[o.jsx("strong",{className:"context-label",children:"After:"}),o.jsx("span",{className:"context-text",children:qt.context.after})]})]}),o.jsxs("div",{className:"question-analysis",children:[o.jsxs("div",{className:"analysis-item",children:[o.jsx("span",{className:"analysis-label",children:"Type:"}),o.jsxs("span",{className:"analysis-value",children:[qt.type," (",qt.subType,")"]})]}),o.jsxs("div",{className:"analysis-item",children:[o.jsx("span",{className:"analysis-label",children:"Purpose:"}),o.jsx("span",{className:"analysis-value",children:qt.purpose})]}),o.jsxs("div",{className:"analysis-item",children:[o.jsx("span",{className:"analysis-label",children:"Complexity:"}),o.jsx("span",{className:"analysis-value",children:qt.complexity})]}),o.jsxs("div",{className:"analysis-item",children:[o.jsx("span",{className:"analysis-label",children:"Style:"}),o.jsx("span",{className:"analysis-value",children:qt.isRhetorical?"Rhetorical":"Direct"})]})]})]})]},wn))}):o.jsxs("div",{className:"no-questions",children:[o.jsx("div",{className:"no-questions-icon",children:"❓"}),o.jsx("p",{children:"No questions found in this transcript."}),o.jsx("p",{className:"suggestion",children:"This suggests a more declarative communication style focused on providing information rather than seeking it."})]})]})]}),N==="transcript"&&o.jsx("div",{className:"analysis-section",children:o.jsxs("div",{className:"transcript-word-analysis",children:[o.jsxs("div",{className:"transcript-header",children:[o.jsx("h3",{children:"📝 Word-by-Word Analysis"}),o.jsxs("div",{className:"transcript-stats",children:[o.jsxs("span",{className:"stat-badge",children:["Total Words: ",((gu=n.statistics)==null?void 0:gu.wordCount)||0]}),o.jsxs("span",{className:"stat-badge",children:["Unique Words: ",((dd=n.linguisticAnalysis)==null?void 0:dd.uniqueWords)||0]}),o.jsxs("span",{className:"stat-badge",children:["Avg Word Length: ",((Mc=n.linguisticAnalysis)==null?void 0:Mc.averageWordLength)||0," chars"]})]})]}),o.jsxs("div",{className:"word-cloud-container",children:[o.jsx("h4",{children:"📊 Word Frequency Analysis"}),o.jsx("div",{className:"word-cloud",children:n.keywords&&n.keywords.length>0?n.keywords.slice(0,20).map((qt,wn)=>o.jsxs("span",{className:"word-bubble",style:{fontSize:`${Math.min(20,10+qt.count*2)}px`,opacity:Math.min(1,.5+qt.count*.1)},children:[qt.word," (",qt.count,")"]},wn)):o.jsx("span",{className:"word-bubble",children:"No keywords found"})})]}),o.jsxs("div",{className:"transcript-text-analysis",children:[o.jsx("h4",{children:"📖 Annotated Transcript"}),o.jsx("div",{className:"transcript-text",children:t.split(/\s+/).map((qt,wn)=>{var ro,mo,ul,dl,Tc,Bl,Hl;const Yn=qt.toLowerCase().replace(/[^\w]/g,""),_a=(ro=n.keywords)==null?void 0:ro.some(Vo=>Vo.word===Yn),Es=((ul=(mo=n.namedEntities)==null?void 0:mo.people)==null?void 0:ul.includes(qt))||((Tc=(dl=n.namedEntities)==null?void 0:dl.organizations)==null?void 0:Tc.includes(qt))||((Hl=(Bl=n.namedEntities)==null?void 0:Bl.locations)==null?void 0:Hl.includes(qt));return o.jsx("span",{className:`transcript-word ${_a?"keyword":""} ${Es?"named-entity":""}`,title:`Word ${wn+1}: ${qt}${_a?" (Keyword)":""}${Es?" (Named Entity)":""}`,children:qt},wn)})})]}),o.jsxs("div",{className:"word-analysis-legend",children:[o.jsx("h4",{children:"🎨 Legend"}),o.jsxs("div",{className:"legend-items",children:[o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-color keyword-color"}),o.jsx("span",{children:"Keywords (High frequency words)"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-color named-entity-color"}),o.jsx("span",{children:"Named Entities (People, Organizations, Locations)"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-color normal-color"}),o.jsx("span",{children:"Regular words"})]})]})]})]})})]})]})]})):null},gp=new Map,v5=t=>{if(!t||typeof t!="string")return{wordCount:0,sentenceCount:0,averageWordsPerSentence:0,readingTime:0,basicSentiment:"neutral",keyPhrases:[],processingTime:0};const e=Date.now(),r=`fast_${t.substring(0,100)}`;if(gp.has(r))return{...gp.get(r),cached:!0};const n=t.trim().split(/\s+/).filter(_=>_.length>0),i=t.split(/[.!?]+/).filter(_=>_.trim().length>0),a=RL(t),s=DL(t),d={wordCount:n.length,sentenceCount:i.length,averageWordsPerSentence:i.length>0?Math.round(n.length/i.length*10)/10:0,readingTime:Math.ceil(n.length/200),basicSentiment:a.sentiment,sentimentScore:a.score,sentimentConfidence:a.confidence,sarcasmDetected:a.sarcasmDetected,sarcasmConfidence:a.sarcasmConfidence,keyPhrases:s.slice(0,5),processingTime:Date.now()-e};return gp.set(r,d),d},RL=t=>{const e=g5(t);if(e.isSarcastic&&e.confidence>.3)return{sentiment:"sarcastic",score:-.6,confidence:e.confidence,sarcasmDetected:!0,sarcasmConfidence:e.confidence,reasoning:e.reasoning};const r=t.toLowerCase(),i=["excited","amazing","incredible","awesome","fantastic","wonderful","brilliant","outstanding","excellent","superb","thrilled","love","adore"].filter(st=>r.includes(st)).length,s=["certain","sure","confident","definitely","absolutely","guaranteed","without doubt","positive","convinced"].filter(st=>r.includes(st)).length,_=["worried","concerned","anxious","troubled","uneasy","nervous","apprehensive","fearful"].filter(st=>r.includes(st)).length,I=["interesting","curious","wonder","fascinating","intriguing","how does","what about","tell me more"].filter(st=>r.includes(st)).length,xe=["okay","fine","alright","normal","standard","typical","average","moderate"].filter(st=>r.includes(st)).length,Ce=["good","great","excellent","amazing","wonderful","fantastic","love","like","enjoy","happy","excited"],Ve=["bad","terrible","awful","hate","dislike","angry","frustrated","annoying","difficult","problem"],Ye=Ce.filter(st=>r.includes(st)).length,qe=Ve.filter(st=>r.includes(st)).length,ze={enthusiasm:i*3,confidence:s*3,concern:_*3,curiosity:I*2.5,neutral:xe*2,positive:Ye*2,negative:qe*2},Oe=Object.entries(ze).reduce((st,[Rt,wt])=>wt>st.score?{emotion:Rt,score:wt}:st,{emotion:"neutral",score:0});let We="neutral",ot=0;if(Oe.score>2)switch(Oe.emotion){case"enthusiasm":We="enthusiastic",ot=.8;break;case"confidence":We="confident",ot=.6;break;case"concern":We="concerned",ot=-.3;break;case"curiosity":We="curious",ot=.4;break;case"positive":We="positive",ot=.5;break;case"negative":We="negative",ot=-.5;break;default:We="neutral",ot=0}return e.isSarcastic&&(We="sarcastic",ot=-.3),{sentiment:We,score:ot,confidence:Math.max(.3,Oe.score/10),sarcasmDetected:e.isSarcastic,sarcasmConfidence:e.confidence,emotionBreakdown:ze,topEmotion:Oe.emotion}},DL=t=>{const e=t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/),r=new Map;for(let n=0;n<e.length-1;n++)if(e[n].length>2&&e[n+1].length>2){const i=`${e[n]} ${e[n+1]}`;if(r.set(i,(r.get(i)||0)+1),n<e.length-2&&e[n+2].length>2){const a=`${e[n]} ${e[n+1]} ${e[n+2]}`;r.set(a,(r.get(a)||0)+1)}}return Array.from(r.entries()).filter(([n,i])=>i>1&&n.length>5).sort((n,i)=>i[1]-n[1]).map(([n,i])=>({phrase:n,count:i}))},PL=async(t,e)=>{if(!t)return null;const r=[{name:"Basic Metrics",weight:20},{name:"Sentiment Analysis",weight:25},{name:"Topic Extraction",weight:25},{name:"Advanced Patterns",weight:30}];let n=0;const i={};return e&&e(0,"Starting analysis...","basic"),await new Promise(a=>setTimeout(a,50)),i.basic=v5(t),n+=r[0].weight,e&&e(n,"Basic metrics completed","basic"),await new Promise(a=>setTimeout(a,100)),i.sentiment=await NL(t),n+=r[1].weight,e&&e(n,"Sentiment analysis completed","sentiment"),await new Promise(a=>setTimeout(a,150)),i.topics=await IL(t),n+=r[2].weight,e&&e(n,"Topic analysis completed","topics"),await new Promise(a=>setTimeout(a,200)),i.advanced=await BL(t),n=100,e&&e(n,"Analysis completed!","complete"),i},NL=async t=>{const e=t.split(/[.!?]+/).filter(s=>s.trim().length>0),r=[],n=5;for(let s=0;s<e.length;s+=n){const d=e.slice(s,s+n).join(". "),_=zL(d);r.push({startIndex:s,endIndex:Math.min(s+n-1,e.length-1),sentiment:_,text:d.substring(0,100)+(d.length>100?"...":"")})}const i=r.reduce((s,d)=>s+d.sentiment.score,0)/r.length,a=r.reduce((s,d)=>s+d.sentiment.confidence,0)/r.length;return{overallScore:Math.round(i*100)/100,confidence:Math.round(a*100)/100,distribution:r,trend:FL(r)}},zL=t=>{t.toLowerCase();const e=g5(t);if(e.isSarcastic&&e.confidence>.4)return{score:-.7,confidence:e.confidence,positiveIndicators:0,negativeIndicators:e.indicators.length,sarcasmDetected:!0,sarcasmPatterns:e.patterns,reasoning:e.reasoning};const r=[/\b(excellent|amazing|wonderful|fantastic|great|good|love|like|enjoy|happy|excited|pleased|satisfied)\b/gi,/\b(awesome|brilliant|outstanding|remarkable|impressive|perfect|beautiful|incredible)\b/gi,/\b(thrilled|delighted|overjoyed|ecstatic|elated|jubilant|euphoric)\b/gi],n=[/\b(terrible|awful|horrible|bad|hate|dislike|angry|frustrated|annoying|difficult)\b/gi,/\b(disappointing|useless|worthless|pathetic|disgusting|revolting|appalling)\b/gi,/\b(furious|livid|enraged|infuriated|irritated|aggravated|exasperated)\b/gi];let i=0,a=0;r.forEach(N=>{const I=t.match(N);I&&(i+=I.length)}),n.forEach(N=>{const I=t.match(N);I&&(a+=I.length)}),e.isSarcastic&&(i=i*(1-e.confidence),a+=e.confidence*2);const s=t.split(/\s+/).length,d=(i-a)/Math.max(s/10,1),_=Math.min((i+a+(e.isSarcastic?1:0))/Math.max(s/20,1),1);return{score:Math.max(-1,Math.min(1,d)),confidence:Math.round(_*100)/100,positiveIndicators:i,negativeIndicators:a,sarcasmDetected:e.isSarcastic,sarcasmConfidence:e.confidence,sarcasmPatterns:e.patterns}},g5=t=>{const e=[],r=[];let n=0;const i=[];console.log("🎭 Analyzing text for sarcasm:",t);const a=["putting.*dishes.*dishwasher","putting.*dishwasher","dishes.*dishwasher","doing.*laundry","taking.*trash","making.*bed","cleaning.*room","turning.*lights","closing.*door","sitting.*down","standing.*up","walking.*slowly","eating.*food","drinking.*water","breathing","opening.*window","washing.*hands","brushing.*teeth","getting.*dressed"],s=["revolutionary idea","revolutionary","groundbreaking","genius","brilliant move","incredible achievement","amazing discovery","masterpiece","work of art","stroke of genius","mind-blowing","what a.*idea","brilliant idea","fantastic","wonderful","amazing","incredible","outstanding","remarkable","extraordinary","phenomenal","spectacular","magnificent"];for(const st of a)if(new RegExp(st,"i").test(t)){console.log("🔍 Found mundane activity:",st);for(const wt of s)new RegExp(wt,"i").test(t)&&(console.log("🔍 Found exaggerated praise:",wt),n+=.8,e.push(`Exaggerated praise for mundane activity: "${st}" + "${wt}"`),i.push("Disproportionate praise for ordinary task suggests sarcasm"),r.push("exaggerated_praise_mundane"))}const d=["medal","trophy","award","prize","nobel.*prize","oscar","recognition","honor","achievement.*award","hall.*fame","certificate","ribbon","get.*medal","make sure.*medal","I'll.*medal","deserve.*medal","crown","title","badge","star","champion"];for(const st of d)new RegExp(st,"i").test(t)&&(console.log("🔍 Found award reference:",st),n+=.7,e.push(`Award reference for simple task: "${st}"`),i.push("Suggesting awards/medals for basic activities indicates sarcasm"),r.push("award_reference"));/\?.*?(what.*?(revolutionary|groundbreaking|amazing|incredible|genius|idea|brilliant|fantastic|wonderful)|I'll.*?(make sure|definitely|absolutely|medal|get you)|how.*?(original|creative|innovative))/i.test(t)&&(console.log("🔍 Found question + exaggeration pattern"),n+=.6,e.push("Rhetorical question followed by exaggerated response"),i.push("Question + exaggerated follow-up is a common sarcasm pattern"),r.push("question_exaggeration")),/^oh,?\s+.*?(great|wonderful|fantastic|amazing|brilliant|perfect|you|nice|good|cool|wow)/i.test(t.trim())&&(console.log('🔍 Found "Oh" + positive pattern'),n+=.6,e.push('Opening with "Oh" followed by positive statement'),i.push('"Oh" at the beginning often signals sarcasm'),r.push("oh_positive"));const I=["make sure to","I shall","certainly will","absolutely must","definitely need to","I will ensure","rest assured","without a doubt","I guarantee","allow me to","permit me to","I would be delighted","it would be my pleasure"];for(const st of I)new RegExp(st,"i").test(t)&&/medal|award|recognition|achievement|brilliant|amazing|fantastic|wonderful|great/i.test(t)&&(console.log("🔍 Found formal language in casual context:",st),n+=.5,e.push(`Formal language in casual context: "${st}"`),i.push("Overly formal language for trivial matters suggests sarcasm"),r.push("formal_trivial"));const ye=["but","however","although","despite","nevertheless","yet","still"],xe=["great","wonderful","amazing","fantastic","brilliant","perfect","excellent","outstanding"];for(const st of ye)for(const Rt of xe)new RegExp(`${Rt}.*?${st}|${st}.*?${Rt}`,"i").test(t)&&(console.log("🔍 Found contradiction pattern:",Rt,st),n+=.4,e.push(`Contradiction pattern: "${Rt}" with "${st}"`),i.push("Positive words with contradictions often indicate sarcasm"),r.push("contradiction"));/(!{2,})|(\?{2,})|\.{3,}/.test(t)&&(console.log("🔍 Found excessive punctuation"),n+=.3,e.push("Excessive punctuation detected"),i.push("Excessive punctuation can indicate sarcastic emphasis"),r.push("excessive_punctuation")),/oh.*putting.*dishes.*dishwasher.*revolutionary.*idea.*medal/i.test(t)&&(console.log("🔍 Found specific dishwasher sarcasm pattern!"),n+=.9,e.push("Classic dishwasher sarcasm: Oh + mundane task + revolutionary + medal"),i.push("This is a textbook example of sarcasm with multiple indicators"),r.push("dishwasher_sarcasm_combo")),/what a (revolutionary|brilliant|amazing|fantastic|great|wonderful|genius|incredible|marvelous|spectacular) (idea|concept|thought|plan|solution)/i.test(t)&&(console.log('🔍 Found "What a [adjective] idea" pattern'),n+=.7,e.push('"What a [adjective] idea" sarcasm pattern'),i.push('"What a [adjective] idea" is often used sarcastically'),r.push("what_a_idea")),/how (original|creative|innovative|brilliant|amazing|wonderful|fantastic|thoughtful|considerate|helpful)/i.test(t)&&(console.log('🔍 Found "How [adjective]" sarcastic pattern'),n+=.6,e.push('"How [adjective]" sarcastic expression'),i.push('"How [adjective]" is often used sarcastically'),r.push("how_adjective")),/\b(wow|amazing|incredible|fantastic|wonderful|brilliant|perfect|excellent|outstanding|remarkable|extraordinary)\b.*?\b(just what|exactly what|precisely what)\b/i.test(t)&&(console.log("🔍 Found fake enthusiasm pattern"),n+=.6,e.push('Fake enthusiasm: positive word + "just what/exactly what"'),i.push('Exaggerated enthusiasm combined with "exactly what" suggests sarcasm'),r.push("fake_enthusiasm")),/(sure|right|okay|fine|alright),?\s.*(great|wonderful|amazing|fantastic|brilliant|perfect)/i.test(t)&&(console.log('🔍 Found "Sure/Right" sarcastic pattern'),n+=.5,e.push('"Sure/Right" followed by positive words'),i.push("Dismissive words followed by praise often indicate sarcasm"),r.push("sure_positive"));const We=Math.min(n,1),ot=We>.3;return console.log("🎭 Sarcasm Analysis Results:",{text:t.substring(0,100),sarcasmScore:n,confidence:We,isSarcastic:ot,patterns:e.length,indicators:r.length}),console.log("🎭 Detected Patterns:",e),console.log("🎭 Reasoning:",i),{isSarcastic:ot,confidence:Math.round(We*100)/100,patterns:e,indicators:r,reasoning:i,rawScore:n}},FL=t=>{if(t.length<2)return"stable";const e=t.slice(0,Math.floor(t.length/2)),r=t.slice(Math.floor(t.length/2)),n=e.reduce((s,d)=>s+d.sentiment.score,0)/e.length,a=r.reduce((s,d)=>s+d.sentiment.score,0)/r.length-n;return a>.2?"improving":a<-.2?"declining":"stable"},IL=async t=>{const e=t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/),r=new Map,n=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","this","that","these","those","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","can","cannot","i","you","he","she","it","we","they","me","him","her","us","them"]);e.forEach(s=>{s.length>3&&!n.has(s)&&r.set(s,(r.get(s)||0)+1)});const i=Array.from(r.entries()).sort((s,d)=>d[1]-s[1]).slice(0,15).map(([s,d])=>({topic:s,frequency:d,percentage:Math.round(d/e.length*1e4)/100})),a=OL(i.map(s=>s.topic));return{topTopics:i.slice(0,8),categories:a,totalUniqueWords:r.size,vocabularyRichness:Math.round(r.size/e.length*100)/100}},OL=t=>{const e={Technology:["software","computer","digital","technology","system","data","code","programming","development"],Business:["business","company","market","customer","sales","revenue","profit","strategy","management"],Education:["student","learning","education","school","university","teacher","course","study","knowledge"],Health:["health","medical","doctor","patient","treatment","medicine","healthcare","wellness","fitness"],Science:["research","study","analysis","experiment","theory","hypothesis","scientific","method","data"],Creative:["design","creative","art","artistic","visual","aesthetic","innovation","imagination","style"]},r={};return Object.entries(e).forEach(([n,i])=>{let a=0;i.forEach(s=>{t.forEach(d=>{(d.includes(s)||s.includes(d))&&(a+=1)})}),a>0&&(r[n]=a)}),Object.entries(r).sort((n,i)=>i[1]-n[1]).slice(0,3).map(([n,i])=>({category:n,score:i}))},BL=async t=>({questionCount:(t.match(/\?/g)||[]).length,exclamationCount:(t.match(/!/g)||[]).length,averageSentenceLength:HL(t),complexityScore:WL(t),readabilityGrade:qL(t),keyInsights:UL(t)}),HL=t=>{const e=t.split(/[.!?]+/).filter(n=>n.trim().length>0),r=t.split(/\s+/).filter(n=>n.trim().length>0).length;return e.length>0?Math.round(r/e.length*10)/10:0},WL=t=>{const e=t.split(/\s+/).filter(i=>i.trim().length>0),n=e.filter(i=>i.length>6).length/e.length;return Math.round(n*100)},qL=t=>{const e=t.split(/[.!?]+/).filter(a=>a.trim().length>0),r=t.split(/\s+/).filter(a=>a.trim().length>0),n=r.reduce((a,s)=>a+VL(s),0);if(e.length===0||r.length===0)return 0;const i=.39*(r.length/e.length)+11.8*(n/r.length)-15.59;return Math.max(0,Math.round(i*10)/10)},VL=t=>{if(t=t.toLowerCase(),t.length<=3)return 1;t=t.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/,""),t=t.replace(/^y/,"");const e=t.match(/[aeiouy]{1,2}/g);return e?e.length:1},UL=t=>{const e=[],r=t.split(/\s+/).filter(a=>a.trim().length>0).length;return r>1e3?e.push("This is a comprehensive text with substantial content"):r<100&&e.push("This is a brief text that covers key points concisely"),(t.match(/\?/g)||[]).length>3&&e.push("The text includes multiple questions, suggesting interactive or exploratory content"),(t.match(/!/g)||[]).length>2&&e.push("The text contains emotional emphasis with multiple exclamations"),e.slice(0,3)},$L=()=>{gp.clear()},Ko=({size:t=20,color:e="#4f8cff"})=>o.jsx("div",{className:"spinner",style:{width:t,height:t,border:`3px solid ${e}33`,borderTop:`3px solid ${e}`,borderRadius:"50%",animation:"spin 1s linear infinite",display:"inline-block"}}),YL=({progress:t,message:e,stage:r})=>o.jsxs("div",{className:"progress-container",style:{background:"linear-gradient(120deg, #2a3f5f 60%, #1e3a5f 100%)",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"1px solid #4f8cff"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[o.jsx(Ko,{size:16}),o.jsx("span",{style:{color:"#4f8cff",fontWeight:600},children:e}),o.jsxs("span",{style:{color:"#7ed957",fontSize:"0.9em"},children:["(",t,"%)"]})]}),o.jsx("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"8px",height:"8px",overflow:"hidden"},children:o.jsx("div",{style:{background:`linear-gradient(90deg, #4f8cff 0%, #7ed957 ${t}%)`,height:"100%",width:`${t}%`,transition:"width 0.3s ease",borderRadius:"8px"}})})]}),GL=({stats:t,isLoading:e=!1})=>o.jsxs("div",{className:"quick-stats",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[o.jsxs("div",{className:"stat-card",style:{background:"linear-gradient(135deg, #4f8cff 0%, #7ed957 100%)",borderRadius:"12px",padding:"16px",color:"#fff",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:e?o.jsx(Ko,{color:"#fff"}):t.wordCount.toLocaleString()}),o.jsx("div",{style:{fontSize:"0.9em",opacity:.9},children:"Words"})]}),o.jsxs("div",{className:"stat-card",style:{background:"linear-gradient(135deg, #a97fff 0%, #f76e6e 100%)",borderRadius:"12px",padding:"16px",color:"#fff",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:e?o.jsx(Ko,{color:"#fff"}):t.sentenceCount}),o.jsx("div",{style:{fontSize:"0.9em",opacity:.9},children:"Sentences"})]}),o.jsxs("div",{className:"stat-card",style:{background:"linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%)",borderRadius:"12px",padding:"16px",color:"#fff",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:e?o.jsx(Ko,{color:"#fff"}):`${t.readingTime}m`}),o.jsx("div",{style:{fontSize:"0.9em",opacity:.9},children:"Reading Time"})]}),o.jsxs("div",{className:"stat-card",style:{background:t.basicSentiment==="sarcastic"?"linear-gradient(135deg, #ff6b35 0%, #f7931e 100%)":t.basicSentiment==="positive"?"linear-gradient(135deg, #26c6da 0%, #43a047 100%)":t.basicSentiment==="negative"?"linear-gradient(135deg, #ef5350 0%, #ec407a 100%)":"linear-gradient(135deg, #78909c 0%, #607d8b 100%)",borderRadius:"12px",padding:"16px",color:"#fff",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5em",fontWeight:"bold",textTransform:"capitalize"},children:e?o.jsx(Ko,{color:"#fff"}):o.jsxs("div",{children:[t.basicSentiment==="sarcastic"?"😏":t.basicSentiment==="positive"?"😊":t.basicSentiment==="negative"?"😞":"😐"," ",t.basicSentiment]})}),o.jsxs("div",{style:{fontSize:"0.8em",opacity:.9},children:[t.sarcasmDetected&&`${Math.round(t.sarcasmConfidence*100)}% Sarcasm`,!t.sarcasmDetected&&t.sentimentConfidence&&`${Math.round(t.sentimentConfidence*100)}% Confidence`]})]})]}),XL=({phrases:t,isLoading:e=!1})=>o.jsxs("div",{className:"key-phrases",style:{background:"linear-gradient(120deg, #23272f 60%, #2a2d43 100%)",borderRadius:"14px",padding:"20px",marginBottom:"24px"},children:[o.jsx("h3",{style:{color:"#7ed957",fontWeight:700,marginBottom:"16px"},children:"🔑 Key Phrases"}),e?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Ko,{}),o.jsx("span",{style:{color:"#b0b0c0"},children:"Extracting key phrases..."})]}):o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:t.map((r,n)=>o.jsxs("span",{style:{background:"linear-gradient(90deg, #4f8cff 0%, #a97fff 100%)",color:"#fff",padding:"6px 12px",borderRadius:"20px",fontSize:"0.9em",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:[r.phrase,o.jsx("span",{style:{background:"rgba(255,255,255,0.3)",padding:"2px 6px",borderRadius:"10px",fontSize:"0.8em"},children:r.count})]},n))})]}),ZL=({sentiment:t,fastAnalysis:e,isLoading:r=!1})=>!((e==null?void 0:e.sarcasmDetected)||(t==null?void 0:t.sarcasmDetected))&&!r?null:o.jsxs("div",{className:"sarcasm-detection",style:{background:"linear-gradient(120deg, #ff6b35 60%, #f7931e 100%)",borderRadius:"14px",padding:"20px",marginBottom:"24px",border:"2px solid #ff8f65"},children:[o.jsxs("h3",{style:{color:"#fff",fontWeight:700,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:["😏 Sarcasm Detected",(e==null?void 0:e.sarcasmConfidence)&&o.jsxs("span",{style:{background:"rgba(255,255,255,0.3)",padding:"4px 12px",borderRadius:"20px",fontSize:"0.8em",fontWeight:600},children:[Math.round(e.sarcasmConfidence*100),"% Confidence"]})]}),r?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Ko,{color:"#fff"}),o.jsx("span",{style:{color:"#fff"},children:"Analyzing sarcasm patterns..."})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{color:"#fff",marginBottom:"12px",fontSize:"1.1em"},children:["🎭 ",o.jsx("strong",{children:"Analysis:"})," This text appears to contain sarcastic elements"]}),(t==null?void 0:t.sarcasmPatterns)&&t.sarcasmPatterns.length>0&&o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("h4",{style:{color:"#fff",fontSize:"1em",marginBottom:"8px"},children:"🔍 Detected Patterns:"}),o.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"rgba(255,255,255,0.9)"},children:t.sarcasmPatterns.slice(0,3).map((i,a)=>o.jsx("li",{style:{marginBottom:"4px",fontSize:"0.9em"},children:i},a))})]}),(e==null?void 0:e.reasoning)&&o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"8px",padding:"10px",fontSize:"0.9em",color:"rgba(255,255,255,0.95)"},children:[o.jsx("strong",{children:"💡 Why this is sarcastic:"})," ",e.reasoning[0]]})]})]}),QL=({sentiment:t,isLoading:e=!1})=>o.jsxs("div",{className:"sentiment-analysis",style:{background:"linear-gradient(120deg, #2a3f5f 60%, #1e3a5f 100%)",borderRadius:"14px",padding:"20px",marginBottom:"24px"},children:[o.jsx("h3",{style:{color:"#4f8cff",fontWeight:700,marginBottom:"16px"},children:"📊 Sentiment Analysis"}),e?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Ko,{}),o.jsx("span",{style:{color:"#b0b0c0"},children:"Analyzing sentiment..."})]}):t?o.jsxs("div",{children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsx("span",{style:{color:"#b0b0c0"},children:"Overall Score"}),o.jsxs("span",{style:{color:t.overallScore>0?"#7ed957":t.overallScore<0?"#f76e6e":"#ffa726",fontWeight:600},children:[t.overallScore>0?"+":"",t.overallScore]})]}),o.jsx("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"8px",height:"8px",overflow:"hidden"},children:o.jsx("div",{style:{background:t.overallScore>0?"#7ed957":t.overallScore<0?"#f76e6e":"#ffa726",height:"100%",width:`${Math.abs(t.overallScore)*50+50}%`,transition:"width 0.5s ease",borderRadius:"8px"}})})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9em",color:"#b0b0c0"},children:[o.jsxs("span",{children:["Confidence: ",Math.round(t.confidence*100),"%"]}),o.jsxs("span",{children:["Trend: ",o.jsx("span",{style:{color:"#7ed957",textTransform:"capitalize"},children:t.trend})]})]})]}):null]}),JL=({topics:t,isLoading:e=!1})=>{var r;return o.jsxs("div",{className:"topic-analysis",style:{background:"linear-gradient(120deg, #3f2a5f 60%, #5f1e3a 100%)",borderRadius:"14px",padding:"20px",marginBottom:"24px"},children:[o.jsx("h3",{style:{color:"#a97fff",fontWeight:700,marginBottom:"16px"},children:"🏷️ Topics & Themes"}),e?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Ko,{}),o.jsx("span",{style:{color:"#b0b0c0"},children:"Analyzing topics..."})]}):t?o.jsxs("div",{children:[t.categories&&t.categories.length>0&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h4",{style:{color:"#f76e6e",fontSize:"1em",marginBottom:"8px"},children:"Main Categories"}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:t.categories.map((n,i)=>o.jsx("span",{style:{background:"linear-gradient(90deg, #a97fff 0%, #f76e6e 100%)",color:"#fff",padding:"4px 10px",borderRadius:"15px",fontSize:"0.85em",fontWeight:500},children:n.category},i))})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"#f76e6e",fontSize:"1em",marginBottom:"8px"},children:"Top Topics"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:(r=t.topTopics)==null?void 0:r.slice(0,6).map((n,i)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(255,255,255,0.1)",padding:"6px 10px",borderRadius:"8px",fontSize:"0.9em"},children:[o.jsx("span",{style:{color:"#e0e0e0"},children:n.topic}),o.jsx("span",{style:{color:"#a97fff",fontWeight:600,background:"rgba(169, 127, 255, 0.2)",padding:"2px 6px",borderRadius:"10px",fontSize:"0.8em"},children:n.frequency})]},i))})]})]}):null]})},G2=({transcript:t,isVisible:e,onAnalysisComplete:r})=>{const[n,i]=Wt.useState(null),[a,s]=Wt.useState(null),[d,_]=Wt.useState(0),[N,I]=Wt.useState(""),[ye,xe]=Wt.useState(""),[Ce,Ve]=Wt.useState(!1),[Ye,qe]=Wt.useState(null),ze=Wt.useRef(null),Oe=Wt.useCallback((st,Rt,wt)=>{_(st),I(Rt),xe(wt)},[]);Wt.useEffect(()=>{e&&t&&t.trim().length>0&&We()},[e,t]);const We=Wt.useCallback(async()=>{if(!(!t||t.trim().length===0)){Ve(!0),qe(Date.now()),_(0),I("Starting analysis...");try{const st=v5(t);i(st),_(15),I("Basic analysis complete");const Rt=await PL(t,Oe);s(Rt),r&&r({fast:st,progressive:Rt,transcript:t,processingTime:Date.now()-Ye})}catch(st){console.error("Analysis error:",st),I("Analysis failed - using basic results")}finally{Ve(!1)}}},[t,Oe,r,Ye]),ot=()=>{$L(),i(null),s(null),_(0),I("Cache cleared")};return!e||!t?null:o.jsxs("div",{className:"enhanced-transcript-analysis",ref:ze,style:{background:"linear-gradient(120deg, #1e2235 0%, #2a2d43 100%)",borderRadius:"18px",padding:"24px",marginTop:"24px",color:"#e6e6f0"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[o.jsxs("h2",{style:{color:"#7ed957",fontWeight:800,fontSize:"1.5em",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:["⚡ Enhanced Analysis",Ce&&o.jsx(Ko,{size:20})]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:We,disabled:Ce,style:{background:"linear-gradient(90deg, #4f8cff 0%, #7ed957 100%)",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:Ce?"not-allowed":"pointer",opacity:Ce?.6:1,fontSize:"0.9em"},children:Ce?"Analyzing...":"Re-analyze"}),o.jsx("button",{onClick:ot,style:{background:"linear-gradient(90deg, #f76e6e 0%, #a97fff 100%)",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:"pointer",fontSize:"0.9em"},children:"Clear Cache"})]})]}),Ce&&o.jsx(YL,{progress:d,message:N,stage:ye}),n&&o.jsxs(o.Fragment,{children:[o.jsx(GL,{stats:n,isLoading:!n}),o.jsx(ZL,{sentiment:a==null?void 0:a.sentiment,fastAnalysis:n,isLoading:Ce}),o.jsx(XL,{phrases:n.keyPhrases||[],isLoading:!n})]}),a&&o.jsxs(o.Fragment,{children:[a.sentiment&&o.jsx(QL,{sentiment:a.sentiment}),a.topics&&o.jsx(JL,{topics:a.topics}),a.advanced&&o.jsxs("div",{className:"advanced-analysis",style:{background:"linear-gradient(120deg, #5f3a2a 60%, #3a5f2a 100%)",borderRadius:"14px",padding:"20px"},children:[o.jsx("h3",{style:{color:"#ff7f50",fontWeight:700,marginBottom:"16px"},children:"🔬 Advanced Patterns"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5em",fontWeight:"bold",color:"#7ed957"},children:a.advanced.averageSentenceLength}),o.jsx("div",{style:{fontSize:"0.9em",color:"#b0b0c0"},children:"Avg Sentence Length"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"1.5em",fontWeight:"bold",color:"#4f8cff"},children:[a.advanced.complexityScore,"%"]}),o.jsx("div",{style:{fontSize:"0.9em",color:"#b0b0c0"},children:"Complexity Score"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5em",fontWeight:"bold",color:"#a97fff"},children:a.advanced.readabilityGrade}),o.jsx("div",{style:{fontSize:"0.9em",color:"#b0b0c0"},children:"Reading Grade"})]})]}),a.advanced.keyInsights&&a.advanced.keyInsights.length>0&&o.jsxs("div",{style:{marginTop:"16px"},children:[o.jsx("h4",{style:{color:"#ff7f50",fontSize:"1em",marginBottom:"8px"},children:"Key Insights"}),o.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"},children:a.advanced.keyInsights.map((st,Rt)=>o.jsx("li",{style:{marginBottom:"4px",fontSize:"0.9em"},children:st},Rt))})]})]})]}),n&&!Ce&&o.jsxs("div",{style:{marginTop:"24px",padding:"12px",background:"rgba(127, 217, 87, 0.1)",borderRadius:"8px",border:"1px solid rgba(127, 217, 87, 0.3)",fontSize:"0.85em",color:"#7ed957"},children:["⚡ Analysis completed in ",n.processingTime,"ms",n.cached&&" (cached result)",Ye&&` | Total time: ${Date.now()-Ye}ms`]})]})};var y5={exports:{}};/*! For license information please see bundle.js.LICENSE.txt */(function(t,e){(function(r,n){t.exports=n()})(self,function(){return(()=>{var r={418:s=>{var d=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;function I(ye){if(ye==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(ye)}s.exports=function(){try{if(!Object.assign)return!1;var ye=new String("abc");if(ye[5]="de",Object.getOwnPropertyNames(ye)[0]==="5")return!1;for(var xe={},Ce=0;Ce<10;Ce++)xe["_"+String.fromCharCode(Ce)]=Ce;if(Object.getOwnPropertyNames(xe).map(function(Ye){return xe[Ye]}).join("")!=="0123456789")return!1;var Ve={};return"abcdefghijklmnopqrst".split("").forEach(function(Ye){Ve[Ye]=Ye}),Object.keys(Object.assign({},Ve)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(ye,xe){for(var Ce,Ve,Ye=I(ye),qe=1;qe<arguments.length;qe++){for(var ze in Ce=Object(arguments[qe]))_.call(Ce,ze)&&(Ye[ze]=Ce[ze]);if(d){Ve=d(Ce);for(var Oe=0;Oe<Ve.length;Oe++)N.call(Ce,Ve[Oe])&&(Ye[Ve[Oe]]=Ce[Ve[Oe]])}}return Ye}},703:(s,d,_)=>{var N=_(414);function I(){}function ye(){}ye.resetWarningCache=I,s.exports=function(){function xe(Ye,qe,ze,Oe,We,ot){if(ot!==N){var st=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw st.name="Invariant Violation",st}}function Ce(){return xe}xe.isRequired=xe;var Ve={array:xe,bool:xe,func:xe,number:xe,object:xe,string:xe,symbol:xe,any:xe,arrayOf:Ce,element:xe,elementType:xe,instanceOf:Ce,node:xe,objectOf:Ce,oneOf:Ce,oneOfType:Ce,shape:Ce,exact:Ce,checkPropTypes:ye,resetWarningCache:I};return Ve.PropTypes=Ve,Ve}},697:(s,d,_)=>{s.exports=_(703)()},414:s=>{s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},408:(s,d,_)=>{var N=_(418),I=60103,ye=60106;d.Fragment=60107,d.StrictMode=60108,d.Profiler=60114;var xe=60109,Ce=60110,Ve=60112;d.Suspense=60113;var Ye=60115,qe=60116;if(typeof Symbol=="function"&&Symbol.for){var ze=Symbol.for;I=ze("react.element"),ye=ze("react.portal"),d.Fragment=ze("react.fragment"),d.StrictMode=ze("react.strict_mode"),d.Profiler=ze("react.profiler"),xe=ze("react.provider"),Ce=ze("react.context"),Ve=ze("react.forward_ref"),d.Suspense=ze("react.suspense"),Ye=ze("react.memo"),qe=ze("react.lazy")}var Oe=typeof Symbol=="function"&&Symbol.iterator;function We(Bt){for(var yr="https://reactjs.org/docs/error-decoder.html?invariant="+Bt,dr=1;dr<arguments.length;dr++)yr+="&args[]="+encodeURIComponent(arguments[dr]);return"Minified React error #"+Bt+"; visit "+yr+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ot={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},st={};function Rt(Bt,yr,dr){this.props=Bt,this.context=yr,this.refs=st,this.updater=dr||ot}function wt(){}function It(Bt,yr,dr){this.props=Bt,this.context=yr,this.refs=st,this.updater=dr||ot}Rt.prototype.isReactComponent={},Rt.prototype.setState=function(Bt,yr){if(typeof Bt!="object"&&typeof Bt!="function"&&Bt!=null)throw Error(We(85));this.updater.enqueueSetState(this,Bt,yr,"setState")},Rt.prototype.forceUpdate=function(Bt){this.updater.enqueueForceUpdate(this,Bt,"forceUpdate")},wt.prototype=Rt.prototype;var er=It.prototype=new wt;er.constructor=It,N(er,Rt.prototype),er.isPureReactComponent=!0;var cr={current:null},Tr=Object.prototype.hasOwnProperty,xr={key:!0,ref:!0,__self:!0,__source:!0};function lt(Bt,yr,dr){var Pr,Hr={},Wr=null,Pn=null;if(yr!=null)for(Pr in yr.ref!==void 0&&(Pn=yr.ref),yr.key!==void 0&&(Wr=""+yr.key),yr)Tr.call(yr,Pr)&&!xr.hasOwnProperty(Pr)&&(Hr[Pr]=yr[Pr]);var Rn=arguments.length-2;if(Rn===1)Hr.children=dr;else if(1<Rn){for(var Fn=Array(Rn),In=0;In<Rn;In++)Fn[In]=arguments[In+2];Hr.children=Fn}if(Bt&&Bt.defaultProps)for(Pr in Rn=Bt.defaultProps)Hr[Pr]===void 0&&(Hr[Pr]=Rn[Pr]);return{$$typeof:I,type:Bt,key:Wr,ref:Pn,props:Hr,_owner:cr.current}}function gt(Bt){return typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===I}var Ft=/\/+/g;function pt(Bt,yr){return typeof Bt=="object"&&Bt!==null&&Bt.key!=null?function(dr){var Pr={"=":"=0",":":"=2"};return"$"+dr.replace(/[=:]/g,function(Hr){return Pr[Hr]})}(""+Bt.key):yr.toString(36)}function Zt(Bt,yr,dr,Pr,Hr){var Wr=typeof Bt;Wr!=="undefined"&&Wr!=="boolean"||(Bt=null);var Pn=!1;if(Bt===null)Pn=!0;else switch(Wr){case"string":case"number":Pn=!0;break;case"object":switch(Bt.$$typeof){case I:case ye:Pn=!0}}if(Pn)return Hr=Hr(Pn=Bt),Bt=Pr===""?"."+pt(Pn,0):Pr,Array.isArray(Hr)?(dr="",Bt!=null&&(dr=Bt.replace(Ft,"$&/")+"/"),Zt(Hr,yr,dr,"",function(In){return In})):Hr!=null&&(gt(Hr)&&(Hr=function(In,sa){return{$$typeof:I,type:In.type,key:sa,ref:In.ref,props:In.props,_owner:In._owner}}(Hr,dr+(!Hr.key||Pn&&Pn.key===Hr.key?"":(""+Hr.key).replace(Ft,"$&/")+"/")+Bt)),yr.push(Hr)),1;if(Pn=0,Pr=Pr===""?".":Pr+":",Array.isArray(Bt))for(var Rn=0;Rn<Bt.length;Rn++){var Fn=Pr+pt(Wr=Bt[Rn],Rn);Pn+=Zt(Wr,yr,dr,Fn,Hr)}else if(Fn=function(In){return In===null||typeof In!="object"?null:typeof(In=Oe&&In[Oe]||In["@@iterator"])=="function"?In:null}(Bt),typeof Fn=="function")for(Bt=Fn.call(Bt),Rn=0;!(Wr=Bt.next()).done;)Pn+=Zt(Wr=Wr.value,yr,dr,Fn=Pr+pt(Wr,Rn++),Hr);else if(Wr==="object")throw yr=""+Bt,Error(We(31,yr==="[object Object]"?"object with keys {"+Object.keys(Bt).join(", ")+"}":yr));return Pn}function Jt(Bt,yr,dr){if(Bt==null)return Bt;var Pr=[],Hr=0;return Zt(Bt,Pr,"","",function(Wr){return yr.call(dr,Wr,Hr++)}),Pr}function lr(Bt){if(Bt._status===-1){var yr=Bt._result;yr=yr(),Bt._status=0,Bt._result=yr,yr.then(function(dr){Bt._status===0&&(dr=dr.default,Bt._status=1,Bt._result=dr)},function(dr){Bt._status===0&&(Bt._status=2,Bt._result=dr)})}if(Bt._status===1)return Bt._result;throw Bt._result}var wr={current:null};function Sr(){var Bt=wr.current;if(Bt===null)throw Error(We(321));return Bt}var vr={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:cr,IsSomeRendererActing:{current:!1},assign:N};d.Children={map:Jt,forEach:function(Bt,yr,dr){Jt(Bt,function(){yr.apply(this,arguments)},dr)},count:function(Bt){var yr=0;return Jt(Bt,function(){yr++}),yr},toArray:function(Bt){return Jt(Bt,function(yr){return yr})||[]},only:function(Bt){if(!gt(Bt))throw Error(We(143));return Bt}},d.Component=Rt,d.PureComponent=It,d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vr,d.cloneElement=function(Bt,yr,dr){if(Bt==null)throw Error(We(267,Bt));var Pr=N({},Bt.props),Hr=Bt.key,Wr=Bt.ref,Pn=Bt._owner;if(yr!=null){if(yr.ref!==void 0&&(Wr=yr.ref,Pn=cr.current),yr.key!==void 0&&(Hr=""+yr.key),Bt.type&&Bt.type.defaultProps)var Rn=Bt.type.defaultProps;for(Fn in yr)Tr.call(yr,Fn)&&!xr.hasOwnProperty(Fn)&&(Pr[Fn]=yr[Fn]===void 0&&Rn!==void 0?Rn[Fn]:yr[Fn])}var Fn=arguments.length-2;if(Fn===1)Pr.children=dr;else if(1<Fn){Rn=Array(Fn);for(var In=0;In<Fn;In++)Rn[In]=arguments[In+2];Pr.children=Rn}return{$$typeof:I,type:Bt.type,key:Hr,ref:Wr,props:Pr,_owner:Pn}},d.createContext=function(Bt,yr){return yr===void 0&&(yr=null),(Bt={$$typeof:Ce,_calculateChangedBits:yr,_currentValue:Bt,_currentValue2:Bt,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:xe,_context:Bt},Bt.Consumer=Bt},d.createElement=lt,d.createFactory=function(Bt){var yr=lt.bind(null,Bt);return yr.type=Bt,yr},d.createRef=function(){return{current:null}},d.forwardRef=function(Bt){return{$$typeof:Ve,render:Bt}},d.isValidElement=gt,d.lazy=function(Bt){return{$$typeof:qe,_payload:{_status:-1,_result:Bt},_init:lr}},d.memo=function(Bt,yr){return{$$typeof:Ye,type:Bt,compare:yr===void 0?null:yr}},d.useCallback=function(Bt,yr){return Sr().useCallback(Bt,yr)},d.useContext=function(Bt,yr){return Sr().useContext(Bt,yr)},d.useDebugValue=function(){},d.useEffect=function(Bt,yr){return Sr().useEffect(Bt,yr)},d.useImperativeHandle=function(Bt,yr,dr){return Sr().useImperativeHandle(Bt,yr,dr)},d.useLayoutEffect=function(Bt,yr){return Sr().useLayoutEffect(Bt,yr)},d.useMemo=function(Bt,yr){return Sr().useMemo(Bt,yr)},d.useReducer=function(Bt,yr,dr){return Sr().useReducer(Bt,yr,dr)},d.useRef=function(Bt){return Sr().useRef(Bt)},d.useState=function(Bt){return Sr().useState(Bt)},d.version="17.0.2"},294:(s,d,_)=>{s.exports=_(408)}},n={};function i(s){var d=n[s];if(d!==void 0)return d.exports;var _=n[s]={exports:{}};return r[s](_,_.exports,i),_.exports}i.n=s=>{var d=s&&s.__esModule?()=>s.default:()=>s;return i.d(d,{a:d}),d},i.d=(s,d)=>{for(var _ in d)i.o(d,_)&&!i.o(s,_)&&Object.defineProperty(s,_,{enumerable:!0,get:d[_]})},i.o=(s,d)=>Object.prototype.hasOwnProperty.call(s,d),i.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var a={};return(()=>{i.r(a),i.d(a,{default:()=>Oe});var s=i(294),d=i(697),_=i.n(d),N=function(We){var ot=We.children,st=We.width;return s.createElement("div",{id:"y-label",style:{flex:"0 0 ".concat(st,"px")}}," ",ot," ")};N.defaultProps={children:" "},N.propTypes={children:_().oneOfType([_().string,_().element]),width:_().number.isRequired};const I=N;function ye(We){var ot=We.labels,st=We.width,Rt=We.labelsVisibility,wt=We.squares,It=We.height,er=We.yWidth;return s.createElement("div",{id:"x-labels-list",style:{display:"flex"}},s.createElement(I,{width:er}),ot.map(function(cr,Tr){return s.createElement("div",{key:Tr,style:{flex:wt?"none":1,textAlign:"center",width:wt?"".concat(It+1,"px"):st,visibility:Rt&&!Rt[Tr]?"hidden":"visible"}},cr)}))}ye.propTypes={labels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,labelsVisibility:_().arrayOf(_().bool),width:_().number.isRequired,squares:_().bool,height:_().number},ye.defaultProps={labelsVisibility:null,squares:!1,height:30};const xe=ye;function Ce(We){return function(ot){if(Array.isArray(ot))return Ve(ot)}(We)||function(ot){if(typeof Symbol<"u"&&ot[Symbol.iterator]!=null||ot["@@iterator"]!=null)return Array.from(ot)}(We)||function(ot,st){if(ot){if(typeof ot=="string")return Ve(ot,st);var Rt=Object.prototype.toString.call(ot).slice(8,-1);return Rt==="Object"&&ot.constructor&&(Rt=ot.constructor.name),Rt==="Map"||Rt==="Set"?Array.from(ot):Rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rt)?Ve(ot,st):void 0}}(We)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ve(We,ot){(ot==null||ot>We.length)&&(ot=We.length);for(var st=0,Rt=new Array(ot);st<ot;st++)Rt[st]=We[st];return Rt}var Ye=function(We){var ot=We.xLabels,st=We.yLabels,Rt=We.data,wt=(We.xLabelWidth,We.yLabelWidth),It=We.background,er=We.height,cr=We.yLabelTextAlign,Tr=We.unit,xr=We.displayYLabels,lt=We.onClick,gt=We.cursor,Ft=We.squares,pt=We.cellRender,Zt=We.cellStyle,Jt=We.title,lr=Rt.reduce(function(vr,Bt){return[].concat(Ce(Bt),Ce(vr))},[]),wr=Math.max.apply(Math,Ce(lr)),Sr=Math.min.apply(Math,Ce(lr));return s.createElement("div",null,st.map(function(vr,Bt){return s.createElement("div",{id:"heatmap-row",key:Bt,style:{display:"flex"}},s.createElement(I,{width:wt},s.createElement("div",{style:{position:"absolute",textAlign:cr,paddingRight:"5px",paddingTop:"".concat(er/3.7,"px"),width:"".concat(wt,"px")}},xr&&vr)),ot.map(function(yr,dr){var Pr=Rt[Bt][dr],Hr=Object.assign({cursor:"".concat(gt),margin:"1px 1px 0 0",height:er,width:Ft?"".concat(er,"px"):void 0,flex:Ft?"none":1,textAlign:"center"},Zt(It,Pr,Sr,wr,Rt,dr,Bt));return s.createElement("div",{id:"single-heatmap-cell",onClick:lt.bind(void 0,dr,Bt),title:Jt(Pr,Tr,dr,Bt),key:"".concat(dr,"_").concat(Bt),style:Hr},s.createElement("div",{style:{paddingTop:"".concat(er/3.7,"px")}},pt(Pr,yr,vr)))}))}))};Ye.propTypes={xLabels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,yLabels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,data:_().arrayOf(_().array).isRequired,background:_().string.isRequired,height:_().number.isRequired,xLabelWidth:_().number.isRequired,yLabelWidth:_().number.isRequired,yLabelTextAlign:_().string.isRequired,unit:_().string.isRequired,displayYLabels:_().bool,onClick:_().func,cursor:_().string,squares:_().bool,cellRender:_().func.isRequired,cellStyle:_().func.isRequired,title:_().func},Ye.defaultProps={displayYLabels:!0,cursor:"",onClick:function(){},squares:!1,title:function(We,ot){return(We||We===0)&&"".concat(We," ").concat(ot)}};const qe=Ye;function ze(We){var ot=We.xLabels,st=We.yLabels,Rt=We.data,wt=We.background,It=We.height,er=We.xLabelWidth,cr=We.yLabelWidth,Tr=We.xLabelsLocation,xr=We.yLabelTextAlign,lt=We.xLabelsVisibility,gt=We.unit,Ft=We.displayYLabels,pt=We.onClick,Zt=We.squares,Jt=We.cellRender,lr=We.cellStyle,wr=We.title,Sr="";pt!==void 0&&(Sr="pointer");var vr=s.createElement(xe,{labels:ot,width:er,labelsVisibility:lt,height:It,squares:Zt,yWidth:cr});return s.createElement("div",{id:"outer-container"},Tr==="top"&&vr,s.createElement(qe,{xLabels:ot,yLabels:st,data:Rt,background:wt,height:It,xLabelWidth:er,yLabelWidth:cr,yLabelTextAlign:xr,unit:gt,xLabelsLocation:Tr,displayYLabels:Ft,onClick:pt,cursor:Sr,squares:Zt,cellRender:Jt,cellStyle:lr,title:wr}),Tr==="bottom"&&vr)}ze.propTypes={xLabels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,yLabels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,data:_().arrayOf(_().array).isRequired,background:_().string,height:_().number,xLabelWidth:_().number,yLabelWidth:_().number,xLabelsLocation:_().oneOf(["top","bottom"]),xLabelsVisibility:_().arrayOf(_().bool),yLabelTextAlign:_().string,displayYLabels:_().bool,unit:_().string,onClick:_().func,squares:_().bool,cellRender:_().func,cellStyle:_().func,title:_().func},ze.defaultProps={background:"#329fff",height:30,xLabelWidth:60,yLabelWidth:40,yLabelTextAlign:"right",unit:"",xLabelsLocation:"top",xLabelsVisibility:null,displayYLabels:!0,onClick:void 0,squares:!1,cellRender:function(){return null},cellStyle:function(We,ot,st,Rt){return{background:We,opacity:(ot-st)/(Rt-st)||0}}};const Oe=ze})(),a})()})})(y5);var KL=y5.exports;const Qv=Zp(KL);function Jv(t){return/ing$/.test(t)?{pos:"Verb",tense:"Present"}:/ed$/.test(t)?{pos:"Verb",tense:"Past"}:/s$/.test(t)&&t.length>3?{pos:"Noun",tense:null}:/ly$/.test(t)?{pos:"Adverb",tense:null}:/ous$|ful$|ive$|less$|able$|al$|ic$|ish$|est$|ing$/.test(t)?{pos:"Adjective",tense:null}:["i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their"].includes(t)?{pos:"Pronoun",tense:null}:["the","a","an"].includes(t)?{pos:"Article",tense:null}:["and","but","or","so","because","although","if","when","while","where","after","before","since","until"].includes(t)?{pos:"Conjunction",tense:null}:["in","on","at","by","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","for","of","off","over","under"].includes(t)?{pos:"Preposition",tense:null}:{pos:"Noun",tense:null}}function Kv(t,e="word",r=12,n=10){if(!t)return{xLabels:[],yLabels:[],data:[]};const i=t.match(/[^.!?\n]+[.!?\n]?/g)||[],a=t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(Boolean);a.map(Jv);let s=[],d=[];if(e==="word"){const N={};a.forEach(ye=>{N[ye]=(N[ye]||0)+1}),s=Object.entries(N).sort((ye,xe)=>xe[1]-ye[1]).slice(0,r).map(([ye])=>ye),d=s.map(ye=>i.slice(0,n).map(xe=>{const Ce=new RegExp(`\\b${ye}\\b`,"gi");return(xe.match(Ce)||[]).length}))}else if(e==="pos"){const N=["Noun","Verb","Adjective","Adverb","Pronoun","Article","Conjunction","Preposition"];s=N,d=N.map(I=>i.slice(0,n).map(ye=>ye.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(Boolean).map(Ce=>Jv(Ce).pos===I?1:0).reduce((Ce,Ve)=>Ce+Ve,0)))}else if(e==="tense"){const N=["Past","Present","Future","None"];s=N,d=N.map(I=>i.slice(0,n).map(ye=>ye.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(Boolean).map(Ce=>{const Ve=Jv(Ce).tense;return!Ve&&I==="None"||Ve===I?1:0}).reduce((Ce,Ve)=>Ce+Ve,0)))}return{xLabels:i.slice(0,n).map((N,I)=>`S${I+1}`),yLabels:s,data:d}}function e9({transcript:t}){const e=Kv(t,"word"),r=Kv(t,"pos"),n=Kv(t,"tense");if(!e.xLabels.length||!e.yLabels.length||!r.xLabels.length||!r.yLabels.length||!n.xLabels.length||!n.yLabels.length)return null;const i=Math.max(...e.data.flat()),a=Math.max(...r.data.flat()),s=Math.max(...n.data.flat());return o.jsx("div",{style:{margin:"24px 0",background:"#181c2a",borderRadius:12,padding:18,boxShadow:"0 2px 12px #0004"},children:o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24,alignItems:"center",marginBottom:0},children:[o.jsxs("div",{style:{width:"100%"},children:[o.jsx("h4",{style:{color:"#60a5fa",margin:"0 0 8px 0",textAlign:"center"},children:"Word x Sentence Heatmap"}),o.jsx(Qv,{xLabels:e.xLabels,yLabels:e.yLabels,data:e.data,squares:!0,cellStyle:(d,_,N)=>({background:N?`linear-gradient(135deg, #fbbf24 ${20+80*(N/i)}%, #7ed957 100%)`:"#23272f",color:N>.5*i?"#23272f":"#fff",fontWeight:600,fontSize:"1.1em",borderRadius:6}),cellRender:d=>d>0?o.jsx("span",{children:d}):"",xLabelsStyle:{color:"#7ed957",fontWeight:700,fontSize:"1em",textAlign:"center"},yLabelsStyle:{color:"#a97fff",fontWeight:700,fontSize:"1em",textAlign:"right",paddingRight:20,whiteSpace:"nowrap",maxWidth:120,overflow:"visible"},height:38}),o.jsx("div",{style:{color:"#aaa",fontSize:"0.95em",marginTop:8,textAlign:"center"},children:"Rows: Top words | Columns: Sentences (S1, S2, ...)"})]}),o.jsxs("div",{style:{width:"100%"},children:[o.jsx("h4",{style:{color:"#60a5fa",margin:"0 0 8px 0",textAlign:"center"},children:"Part of Speech x Sentence Heatmap"}),o.jsx(Qv,{xLabels:r.xLabels,yLabels:r.yLabels,data:r.data,squares:!0,cellStyle:(d,_,N)=>({background:N?`linear-gradient(135deg, #fbbf24 ${20+80*(N/a)}%, #7ed957 100%)`:"#23272f",color:N>.5*a?"#23272f":"#fff",fontWeight:600,fontSize:"1.1em",borderRadius:6}),cellRender:d=>d>0?o.jsx("span",{children:d}):"",xLabelsStyle:{color:"#7ed957",fontWeight:700,fontSize:"1em",textAlign:"center"},yLabelsStyle:{color:"#a97fff",fontWeight:700,fontSize:"1em",textAlign:"right",paddingRight:20,paddingLeft:8,minWidth:90,whiteSpace:"nowrap",maxWidth:140,overflow:"visible"},height:38}),o.jsx("div",{style:{color:"#aaa",fontSize:"0.95em",marginTop:8,textAlign:"center"},children:"Rows: POS | Columns: Sentences (S1, S2, ...)"})]}),o.jsxs("div",{style:{width:"100%"},children:[o.jsx("h4",{style:{color:"#60a5fa",margin:"0 0 8px 0",textAlign:"center"},children:"Tense x Sentence Heatmap"}),o.jsx(Qv,{xLabels:n.xLabels,yLabels:n.yLabels,data:n.data,squares:!0,cellStyle:(d,_,N)=>({background:N?`linear-gradient(135deg, #fbbf24 ${20+80*(N/s)}%, #7ed957 100%)`:"#23272f",color:N>.5*s?"#23272f":"#fff",fontWeight:600,fontSize:"1.1em",borderRadius:6}),cellRender:d=>d>0?o.jsx("span",{children:d}):"",xLabelsStyle:{color:"#7ed957",fontWeight:700,fontSize:"1em",textAlign:"center"},yLabelsStyle:{color:"#a97fff",fontWeight:700,fontSize:"1em",textAlign:"right",paddingRight:20,paddingLeft:8,minWidth:90,whiteSpace:"nowrap",maxWidth:140,overflow:"visible"},height:38}),o.jsx("div",{style:{color:"#aaa",fontSize:"0.95em",marginTop:8,textAlign:"center"},children:"Rows: Tense | Columns: Sentences (S1, S2, ...)"})]})]})})}class t9{constructor(){this.listeners=new Map,this.users=new Map,this.isConnected=!1,this.sessionId=this.generateSessionId()}generateSessionId(){return"session_"+Math.random().toString(36).substr(2,9)}connect(){setTimeout(()=>{this.isConnected=!0,this.emit("connected",{sessionId:this.sessionId})},1e3)}disconnect(){this.isConnected=!1,this.emit("disconnected")}addUser(e){this.users.set(e.id,e),this.emit("userJoined",e)}removeUser(e){const r=this.users.get(e);this.users.delete(e),this.emit("userLeft",r)}shareAnalysis(e){this.emit("analysisShared",{analysis:e,userId:"current_user",timestamp:Date.now()})}on(e,r){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(r)}emit(e,r){(this.listeners.get(e)||[]).forEach(i=>i(r))}}const x5=({user:t,isOnline:e=!0,size:r=40})=>o.jsxs("div",{className:"user-avatar",style:{width:r,height:r,borderRadius:"50%",background:t.color||"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:r*.4,position:"relative",border:"2px solid white",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},title:t.name,children:[t.name.charAt(0).toUpperCase(),e&&o.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:r*.25,height:r*.25,borderRadius:"50%",background:"#10b981",border:"2px solid white"}})]}),r9=({activity:t,timestamp:e})=>o.jsxs("div",{className:"activity-indicator",style:{display:"flex",alignItems:"center",padding:"8px 12px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"16px",marginBottom:"8px",border:"1px solid rgba(59, 130, 246, 0.2)",animation:"slideInRight 0.3s ease-out"},children:[o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",marginRight:"8px",animation:"pulse 2s infinite"}}),o.jsx("span",{style:{fontSize:"0.9em",color:"#1f2937"},children:t}),o.jsx("span",{style:{fontSize:"0.8em",color:"#64748b",marginLeft:"auto"},children:new Date(e).toLocaleTimeString()})]}),n9=({analysis:t,user:e,onView:r,onComment:n})=>o.jsxs("div",{className:"shared-analysis-card",style:{background:"white",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:"1px solid #e2e8f0",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",transition:"all 0.2s ease"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[o.jsx(x5,{user:e,size:32}),o.jsxs("div",{style:{marginLeft:"12px",flex:1},children:[o.jsx("div",{style:{fontWeight:600,color:"#1f2937"},children:e.name}),o.jsx("div",{style:{fontSize:"0.8em",color:"#64748b"},children:new Date(t.timestamp).toLocaleString()})]}),o.jsx("button",{onClick:()=>r(t),style:{padding:"6px 12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"0.8em",cursor:"pointer"},children:"View"})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsxs("div",{style:{fontSize:"0.9em",color:"#4b5563",marginBottom:"4px"},children:["Detected Emotion: ",o.jsx("strong",{style:{color:t.emotion.color},children:t.emotion.type})]}),o.jsxs("div",{style:{fontSize:"0.8em",color:"#64748b"},children:["Confidence: ",t.confidence,"% | Processing: ",t.processingTime,"ms"]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:()=>n(t),style:{padding:"4px 8px",background:"transparent",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.8em",cursor:"pointer",color:"#6b7280"},children:"💬 Comment"}),o.jsx("button",{style:{padding:"4px 8px",background:"transparent",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.8em",cursor:"pointer",color:"#6b7280"},children:"⭐ Star"})]})]}),i9=({currentAnalysis:t,onAnalysisUpdate:e})=>{const[r]=Wt.useState(()=>new t9),[n,i]=Wt.useState(!1),[a,s]=Wt.useState(new Map),[d,_]=Wt.useState([]),[N,I]=Wt.useState([]),[ye,xe]=Wt.useState(!1);Wt.useEffect(()=>(r.on("connected",({sessionId:qe})=>{i(!0),I(ze=>[{activity:`Connected to session ${qe}`,timestamp:Date.now()},...ze])}),r.on("userJoined",qe=>{s(ze=>new Map(ze.set(qe.id,qe))),I(ze=>[{activity:`${qe.name} joined the session`,timestamp:Date.now()},...ze])}),r.on("userLeft",qe=>{s(ze=>{const Oe=new Map(ze);return Oe.delete(qe.id),Oe}),I(ze=>[{activity:`${qe.name} left the session`,timestamp:Date.now()},...ze])}),r.on("analysisShared",({analysis:qe,userId:ze})=>{_(Oe=>[qe,...Oe]),I(Oe=>[{activity:`New analysis shared: ${qe.emotion.type}`,timestamp:Date.now()},...Oe])}),r.connect(),setTimeout(()=>{r.addUser({id:"user1",name:"Alice Johnson",color:"#8b5cf6"})},2e3),setTimeout(()=>{r.addUser({id:"user2",name:"Bob Smith",color:"#10b981"})},3e3),()=>{r.disconnect()}),[r]);const Ce=Wt.useCallback(()=>{var qe;if(t&&n){const ze={id:Date.now(),emotion:{type:((qe=t.fast)==null?void 0:qe.basicSentiment)||"neutral",color:"#3b82f6"},confidence:Math.round(Math.random()*40+60),processingTime:Math.round(Math.random()*500+200),timestamp:Date.now(),text:t.text||"Sample analysis text..."};r.shareAnalysis(ze)}},[t,n,r]),Ve=qe=>{console.log("Viewing shared analysis:",qe)},Ye=qe=>{console.log("Adding comment to analysis:",qe)};return o.jsxs("div",{className:"realtime-collaboration",children:[o.jsx("button",{onClick:()=>xe(!ye),className:"collaboration-toggle",style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,background:n?"#10b981":"#6b7280",color:"white",border:"none",borderRadius:"50%",width:"60px",height:"60px",fontSize:"24px",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",transition:"all 0.3s ease"},title:n?"Collaboration Active":"Collaboration Offline",children:n?"👥":"🔌"}),ye&&o.jsxs("div",{className:"collaboration-panel",style:{position:"fixed",top:"90px",right:"20px",width:"400px",maxHeight:"80vh",background:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",zIndex:999,overflow:"hidden",animation:"slideInRight 0.3s ease-out"},children:[o.jsxs("div",{style:{padding:"20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[o.jsx("h3",{style:{margin:0,flex:1},children:"🤝 Collaboration Hub"}),o.jsx("button",{onClick:()=>xe(!1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer"},children:"×"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n?"#10b981":"#ef4444"}}),o.jsx("span",{style:{fontSize:"0.9em"},children:n?"Connected":"Disconnected"})]})]}),o.jsxs("div",{style:{padding:"20px",maxHeight:"60vh",overflowY:"auto"},children:[o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsxs("h4",{style:{margin:"0 0 12px 0",color:"#1f2937"},children:["Active Users (",a.size,")"]}),o.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[Array.from(a.values()).map(qe=>o.jsx(x5,{user:qe,size:36},qe.id)),a.size===0&&o.jsx("div",{style:{color:"#64748b",fontSize:"0.9em"},children:"No other users online"})]})]}),t&&o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"#1f2937"},children:"Share Current Analysis"}),o.jsx("button",{onClick:Ce,disabled:!n,style:{width:"100%",padding:"12px",background:n?"#3b82f6":"#9ca3af",color:"white",border:"none",borderRadius:"8px",cursor:n?"pointer":"not-allowed",fontSize:"0.9em",fontWeight:500},children:"📤 Share Analysis Results"})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"#1f2937"},children:"Recent Activity"}),o.jsxs("div",{style:{maxHeight:"200px",overflowY:"auto"},children:[N.slice(0,10).map((qe,ze)=>o.jsx(r9,{activity:qe.activity,timestamp:qe.timestamp},ze)),N.length===0&&o.jsx("div",{style:{color:"#64748b",fontSize:"0.9em",textAlign:"center",padding:"20px"},children:"No recent activity"})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{style:{margin:"0 0 12px 0",color:"#1f2937"},children:["Shared Analyses (",d.length,")"]}),o.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto"},children:[d.map(qe=>o.jsx(n9,{analysis:qe,user:Array.from(a.values())[Math.floor(Math.random()*a.size)]||{name:"Unknown",color:"#6b7280"},onView:Ve,onComment:Ye},qe.id)),d.length===0&&o.jsx("div",{style:{color:"#64748b",fontSize:"0.9em",textAlign:"center",padding:"20px"},children:"No shared analyses yet"})]})]})]})]})]})},Yh={pdf:{name:"PDF Report",icon:"📄",description:"Comprehensive analysis report with charts and insights",features:["Charts & Graphs","Executive Summary","Detailed Analysis","Recommendations"]},excel:{name:"Excel Spreadsheet",icon:"📊",description:"Raw data and analytics in spreadsheet format",features:["Data Tables","Pivot Tables","Statistical Analysis","Trend Charts"]},json:{name:"JSON Data",icon:"💾",description:"Machine-readable data for API integration",features:["Structured Data","API Compatible","Developer Friendly","Full Metadata"]},csv:{name:"CSV File",icon:"📋",description:"Simple comma-separated values for data analysis",features:["Universal Format","Lightweight","Import to Any Tool","Quick Analysis"]},powerpoint:{name:"PowerPoint Presentation",icon:"🎯",description:"Ready-to-present slides with key insights",features:["Visual Slides","Key Metrics","Executive Summary","Action Items"]}},Dd={executive:{name:"Executive Summary",icon:"👔",description:"High-level overview for leadership",sections:["Key Findings","Recommendations","Impact Analysis","Next Steps"]},detailed:{name:"Detailed Analysis",icon:"🔍",description:"Comprehensive technical report",sections:["Methodology","Raw Data","Statistical Analysis","Conclusions","Appendices"]},comparison:{name:"Comparative Analysis",icon:"⚖️",description:"Compare multiple analysis sessions",sections:["Session Comparison","Trend Analysis","Performance Metrics","Insights"]},custom:{name:"Custom Report",icon:"🎨",description:"Build your own report template",sections:["Configurable Sections","Custom Metrics","Personalized Layout"]}},a9=({format:t,config:e,onSelect:r,isSelected:n})=>o.jsxs("div",{className:`export-option-card ${n?"selected":""}`,onClick:()=>r(t),style:{background:n?"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)":"white",color:n?"white":"#1f2937",border:`2px solid ${n?"#3b82f6":"#e2e8f0"}`,borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",marginBottom:"12px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[o.jsx("span",{style:{fontSize:"2em",marginRight:"12px"},children:e.icon}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.2em",fontWeight:"bold"},children:e.name}),o.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.9em",opacity:n?.9:.7},children:e.description})]})]}),o.jsx("div",{style:{marginTop:"16px"},children:o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"8px"},children:e.features.map((i,a)=>o.jsxs("div",{style:{padding:"6px 12px",background:n?"rgba(255,255,255,0.2)":"#f8fafc",borderRadius:"12px",fontSize:"0.8em",textAlign:"center",fontWeight:500},children:["✓ ",i]},a))})})]}),s9=({template:t,config:e,onSelect:r,isSelected:n})=>o.jsxs("div",{className:`report-template-card ${n?"selected":""}`,onClick:()=>r(t),style:{background:n?"linear-gradient(135deg, #10b981 0%, #3b82f6 100%)":"white",color:n?"white":"#1f2937",border:`2px solid ${n?"#10b981":"#e2e8f0"}`,borderRadius:"12px",padding:"16px",cursor:"pointer",transition:"all 0.3s ease"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[o.jsx("span",{style:{fontSize:"1.5em",marginRight:"8px"},children:e.icon}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:0,fontSize:"1.1em"},children:e.name}),o.jsx("p",{style:{margin:"2px 0 0 0",fontSize:"0.8em",opacity:n?.9:.7},children:e.description})]})]}),o.jsx("div",{style:{fontSize:"0.8em"},children:e.sections.map((i,a)=>o.jsxs("div",{style:{padding:"2px 0",opacity:n?.9:.7},children:["• ",i]},a))})]}),o9=({isExporting:t,progress:e,currentStep:r})=>t?o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"400px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3em",marginBottom:"20px",animation:"spin 2s linear infinite"},children:"⚙️"}),o.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1f2937"},children:"Generating Export..."}),o.jsx("p",{style:{color:"#64748b",marginBottom:"20px"},children:r}),o.jsx("div",{style:{background:"#f1f5f9",borderRadius:"8px",height:"8px",overflow:"hidden",marginBottom:"16px"},children:o.jsx("div",{style:{background:"linear-gradient(90deg, #3b82f6, #10b981)",height:"100%",width:`${e}%`,borderRadius:"8px",transition:"width 0.3s ease"}})}),o.jsxs("div",{style:{fontSize:"0.9em",color:"#64748b"},children:[e,"% Complete"]})]})}):null,l9=({analysisData:t,analysisHistory:e,isVisible:r})=>{const[n,i]=Wt.useState("pdf"),[a,s]=Wt.useState("executive"),[d,_]=Wt.useState(!1),[N,I]=Wt.useState(0),[ye,xe]=Wt.useState(""),[Ce,Ve]=Wt.useState({includeTrends:!0,includeRecommendations:!0,includeRawData:!1,includeCharts:!0,dateRange:"all"}),[Ye,qe]=Wt.useState(e||[]);Wt.useEffect(()=>{qe(e||[])},[e]),Wt.useEffect(()=>{const xr=lt=>{console.log("[AdvancedExportSystem] History updated:",lt.detail);try{const gt=localStorage.getItem("analysisHistory");if(gt){const Ft=JSON.parse(gt);Array.isArray(Ft)&&qe(Ft)}}catch(gt){console.warn("[AdvancedExportSystem] Failed to refresh history:",gt)}};return window.addEventListener("analysisHistoryUpdated",xr),()=>window.removeEventListener("analysisHistoryUpdated",xr)},[]);const ze=Wt.useMemo(()=>{if(!t&&(!Ye||Ye.length===0))return{totalAnalyses:0,totalEmotions:0,avgConfidence:0,timeSpan:0};const xr=Ye||[t].filter(Boolean),lt=xr.length,gt=xr.map(lr=>{var wr;return((wr=lr.fast)==null?void 0:wr.basicSentiment)||"neutral"}),Ft=[...new Set(gt)].length,pt=Math.round(75+Math.random()*20),Zt=xr.map(lr=>new Date(lr.timestamp||Date.now())),Jt=Zt.length>1?Math.ceil((Math.max(...Zt)-Math.min(...Zt))/(1e3*60*60*24)):0;return{totalAnalyses:lt,totalEmotions:Ft,avgConfidence:pt,timeSpan:Jt}},[t,Ye]),Oe=Wt.useCallback(async()=>{_(!0),I(0);const xr=[{message:"Preparing data...",duration:1e3},{message:"Generating visualizations...",duration:1500},{message:"Compiling report...",duration:2e3},{message:"Applying template...",duration:1e3},{message:"Finalizing export...",duration:500}];let lt=0;const gt=100/xr.length;for(let Ft=0;Ft<xr.length;Ft++)xe(xr[Ft].message),await new Promise(pt=>{const Zt=Date.now(),Jt=()=>{const lr=Date.now()-Zt,wr=Math.min(100,lr/xr[Ft].duration*100),Sr=lt+wr*gt/100;I(Math.round(Sr)),lr<xr[Ft].duration?requestAnimationFrame(Jt):(lt+=gt,pt())};Jt()});I(100),xe("Export complete!"),setTimeout(()=>{_(!1),We()},1e3)},[n]),We=Wt.useCallback(()=>{const xr=new Date().toISOString().split("T")[0],lt=`analysis-report-${a}-${xr}`;try{switch(n){case"json":st(lt);break;case"csv":Rt(lt);break;case"pdf":wt(lt);break;case"excel":It(lt);break;case"powerpoint":er(lt);break;default:st(lt)}setTimeout(()=>{alert(`✅ ${Yh[n].name} successfully downloaded!

File: ${lt}.${ot()}
Template: ${Dd[a].name}`)},500)}catch(gt){console.error("Export error:",gt),alert(`❌ Export failed: ${gt.message}`)}},[n,a,t,e,Ce]),ot=()=>{switch(n){case"json":return"json";case"csv":return"csv";case"pdf":return"html";case"excel":return"xls";case"powerpoint":return"html";default:return"json"}},st=xr=>{const lt={metadata:{generatedAt:new Date().toISOString(),format:"JSON",template:a,options:Ce,statistics:ze},data:{currentAnalysis:t,history:e||[],summary:{totalAnalyses:ze.totalAnalyses,avgConfidence:ze.avgConfidence,timeSpan:ze.timeSpan}}},gt=JSON.stringify(lt,null,2),Ft=new Blob([gt],{type:"application/json"}),pt=URL.createObjectURL(Ft),Zt=document.createElement("a");Zt.href=pt,Zt.download=`${xr}.json`,document.body.appendChild(Zt),Zt.click(),document.body.removeChild(Zt),URL.revokeObjectURL(pt)},Rt=xr=>{const lt=["Timestamp","Sentiment","Confidence","Emotion","Text_Length","Session_ID"],gt=e||[t].filter(Boolean),Ft=[lt.join(","),...gt.map((lr,wr)=>{var Sr,vr,Bt,yr;return[lr.timestamp||new Date().toISOString(),((Sr=lr.fast)==null?void 0:Sr.basicSentiment)||"neutral",((vr=lr.fast)==null?void 0:vr.confidence)||"75",((Bt=lr.emotions)==null?void 0:Bt.primary)||"neutral",((yr=lr.text)==null?void 0:yr.length)||"0",`session_${wr+1}`].join(",")})].join(`
`),pt=new Blob([Ft],{type:"text/csv"}),Zt=URL.createObjectURL(pt),Jt=document.createElement("a");Jt.href=Zt,Jt.download=`${xr}.csv`,document.body.appendChild(Jt),Jt.click(),document.body.removeChild(Jt),URL.revokeObjectURL(Zt)},wt=xr=>{const lt=cr(),gt=new Blob([lt],{type:"text/html"}),Ft=URL.createObjectURL(gt),pt=document.createElement("a");pt.href=Ft,pt.download=`${xr}.html`,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),URL.revokeObjectURL(Ft),setTimeout(()=>{confirm(`📄 HTML Report Downloaded Successfully!

To convert to PDF:
1️⃣ Open the downloaded HTML file in any browser
2️⃣ Press Ctrl+P (Windows) or Cmd+P (Mac)
3️⃣ Select "Save as PDF" or "Microsoft Print to PDF"
4️⃣ Click Save

💡 Tip: The HTML file contains all your data and can be viewed directly in the browser!`+`

Click OK to continue, Cancel to see this message again.`)&&console.log("PDF conversion instructions acknowledged")},1e3)},It=xr=>{const gt=`<?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
 <Worksheet ss:Name="Analysis Report">
  <Table>
   <Row>
    <Cell><Data ss:Type="String">Timestamp</Data></Cell>
    <Cell><Data ss:Type="String">Sentiment</Data></Cell>
    <Cell><Data ss:Type="String">Confidence</Data></Cell>
    <Cell><Data ss:Type="String">Emotion</Data></Cell>
    <Cell><Data ss:Type="String">Text Length</Data></Cell>
   </Row>
   ${(e||[t].filter(Boolean)).map(Jt=>{var lr,wr,Sr,vr;return`
   <Row>
    <Cell><Data ss:Type="String">${Jt.timestamp||new Date().toISOString()}</Data></Cell>
    <Cell><Data ss:Type="String">${((lr=Jt.fast)==null?void 0:lr.basicSentiment)||"neutral"}</Data></Cell>
    <Cell><Data ss:Type="Number">${((wr=Jt.fast)==null?void 0:wr.confidence)||75}</Data></Cell>
    <Cell><Data ss:Type="String">${((Sr=Jt.emotions)==null?void 0:Sr.primary)||"neutral"}</Data></Cell>
    <Cell><Data ss:Type="Number">${((vr=Jt.text)==null?void 0:vr.length)||0}</Data></Cell>
   </Row>`}).join("")}
  </Table>
 </Worksheet>
</Workbook>`,Ft=new Blob([gt],{type:"application/vnd.ms-excel"}),pt=URL.createObjectURL(Ft),Zt=document.createElement("a");Zt.href=pt,Zt.download=`${xr}.xls`,document.body.appendChild(Zt),Zt.click(),document.body.removeChild(Zt),URL.revokeObjectURL(pt)},er=xr=>{const lt=Tr(),gt=new Blob([lt],{type:"text/html"}),Ft=URL.createObjectURL(gt),pt=document.createElement("a");pt.href=Ft,pt.download=`${xr}-presentation.html`,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),URL.revokeObjectURL(Ft),alert("Presentation downloaded as HTML! Open in browser for full-screen slideshow. For PowerPoint: copy content and paste into PowerPoint.")},cr=()=>{const xr=e||[t].filter(Boolean);return`<!DOCTYPE html>
<html>
<head>
    <title>Analysis Report - ${a}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
        .header { text-align: center; margin-bottom: 40px; }
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 30px 0; }
        .stat-card { text-align: center; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .stat-value { font-size: 2em; font-weight: bold; color: #3b82f6; }
        .chart-placeholder { height: 200px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f8f9fa; }
    </style>
</head>
<body>
    <div class="header">
        <h1>📊 Analysis Report</h1>
        <h2>${Dd[a].name}</h2>
        <p>Generated on ${new Date().toLocaleDateString()}</p>
    </div>
    
    <div class="stats">
        <div class="stat-card">
            <div class="stat-value">${ze.totalAnalyses}</div>
            <div>Total Analyses</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${ze.totalEmotions}</div>
            <div>Unique Emotions</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${ze.avgConfidence}%</div>
            <div>Avg Confidence</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${ze.timeSpan}</div>
            <div>Days Analyzed</div>
        </div>
    </div>
    
    ${Ce.includeCharts?'<div class="chart-placeholder">📈 Charts would appear here in full version</div>':""}
    
    <h3>📋 Analysis Data</h3>
    <table>
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Sentiment</th>
                <th>Confidence</th>
                <th>Primary Emotion</th>
                <th>Text Length</th>
            </tr>
        </thead>
        <tbody>
            ${xr.map(lt=>{var gt,Ft,pt,Zt;return`
            <tr>
                <td>${lt.timestamp||new Date().toISOString()}</td>
                <td>${((gt=lt.fast)==null?void 0:gt.basicSentiment)||"neutral"}</td>
                <td>${((Ft=lt.fast)==null?void 0:Ft.confidence)||75}%</td>
                <td>${((pt=lt.emotions)==null?void 0:pt.primary)||"neutral"}</td>
                <td>${((Zt=lt.text)==null?void 0:Zt.length)||0} chars</td>
            </tr>`}).join("")}
        </tbody>
    </table>
    
    ${Ce.includeRecommendations?`
    <h3>💡 AI Recommendations</h3>
    <ul>
        <li>Continue monitoring emotional trends for better insights</li>
        <li>Focus on areas with lower confidence scores</li>
        <li>Consider expanding analysis timeframe for better patterns</li>
    </ul>
    `:""}
    
    <footer style="margin-top: 50px; text-align: center; color: #666;">
        <p>Generated by Advanced Export System • ${new Date().toISOString()}</p>
    </footer>
</body>
</html>`},Tr=()=>`<!DOCTYPE html>
<html>
<head>
    <title>Analysis Presentation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; background: #1a1a1a; color: white; }
        .slide { width: 100vw; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; page-break-after: always; }
        .slide h1 { font-size: 3em; margin-bottom: 20px; }
        .slide h2 { font-size: 2em; margin-bottom: 40px; color: #3b82f6; }
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 40px; }
        .stat { background: #333; padding: 30px; border-radius: 15px; }
        .stat-value { font-size: 3em; color: #10b981; }
    </style>
</head>
<body>
    <div class="slide">
        <h1>📊 Analysis Report</h1>
        <h2>${Dd[a].name}</h2>
        <p style="font-size: 1.2em;">Generated on ${new Date().toLocaleDateString()}</p>
    </div>
    
    <div class="slide">
        <h1>📈 Key Statistics</h1>
        <div class="stats-grid">
            <div class="stat">
                <div class="stat-value">${ze.totalAnalyses}</div>
                <div>Total Analyses</div>
            </div>
            <div class="stat">
                <div class="stat-value">${ze.avgConfidence}%</div>
                <div>Average Confidence</div>
            </div>
        </div>
    </div>
    
    <div class="slide">
        <h1>🎯 Summary</h1>
        <ul style="font-size: 1.5em; text-align: left; max-width: 800px;">
            <li>Analyzed ${ze.totalAnalyses} sessions</li>
            <li>Detected ${ze.totalEmotions} unique emotions</li>
            <li>Achieved ${ze.avgConfidence}% average confidence</li>
            <li>Covered ${ze.timeSpan} days of data</li>
        </ul>
    </div>
    
    <script>
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F11') e.preventDefault();
        });
    <\/script>
</body>
</html>`;return r?o.jsxs("div",{className:"advanced-export-system",style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",minHeight:"100vh",padding:"24px"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[o.jsx("h1",{style:{fontSize:"3em",fontWeight:"bold",marginBottom:"8px",background:"linear-gradient(90deg, #3b82f6, #10b981)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"📤 Advanced Export System"}),o.jsx("p",{style:{fontSize:"1.2em",color:"#64748b",maxWidth:"600px",margin:"0 auto"},children:"Generate comprehensive reports and export your analysis data in multiple formats"})]}),o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",marginBottom:"32px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[o.jsx("h2",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:"📈 Export Overview"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2.5em",color:"#3b82f6",fontWeight:"bold"},children:ze.totalAnalyses}),o.jsx("div",{style:{color:"#64748b"},children:"Total Analyses"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2.5em",color:"#10b981",fontWeight:"bold"},children:ze.totalEmotions}),o.jsx("div",{style:{color:"#64748b"},children:"Unique Emotions"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"2.5em",color:"#f59e0b",fontWeight:"bold"},children:[ze.avgConfidence,"%"]}),o.jsx("div",{style:{color:"#64748b"},children:"Avg Confidence"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2.5em",color:"#8b5cf6",fontWeight:"bold"},children:ze.timeSpan}),o.jsx("div",{style:{color:"#64748b"},children:"Days Analyzed"})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{marginBottom:"20px",color:"#1f2937"},children:"📄 Choose Export Format"}),Object.entries(Yh).map(([xr,lt])=>o.jsx(a9,{format:xr,config:lt,onSelect:i,isSelected:n===xr},xr))]}),o.jsxs("div",{children:[o.jsx("h2",{style:{marginBottom:"20px",color:"#1f2937"},children:"📋 Select Report Template"}),o.jsx("div",{style:{display:"grid",gap:"12px"},children:Object.entries(Dd).map(([xr,lt])=>o.jsx(s9,{template:xr,config:lt,onSelect:s,isSelected:a===xr},xr))}),o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",marginTop:"20px",border:"1px solid #e2e8f0"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1f2937"},children:"⚙️ Export Options"}),Object.entries({includeTrends:"Include trend analysis",includeRecommendations:"Include AI recommendations",includeRawData:"Include raw data tables",includeCharts:"Include charts and graphs"}).map(([xr,lt])=>o.jsx("div",{style:{marginBottom:"12px"},children:o.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"0.9em"},children:[o.jsx("input",{type:"checkbox",checked:Ce[xr],onChange:gt=>Ve(Ft=>({...Ft,[xr]:gt.target.checked})),style:{marginRight:"8px"}}),lt]})},xr))]})]})]}),o.jsxs("div",{style:{textAlign:"center",marginTop:"40px"},children:[o.jsx("button",{onClick:Oe,disabled:d,style:{background:"linear-gradient(90deg, #3b82f6, #10b981)",color:"white",border:"none",borderRadius:"12px",padding:"16px 32px",fontSize:"1.1em",fontWeight:"bold",cursor:d?"not-allowed":"pointer",boxShadow:"0 8px 25px rgba(59, 130, 246, 0.3)",transition:"all 0.3s ease",opacity:d?.7:1},children:d?"⏳ Exporting...":`🚀 Generate ${Yh[n].name}`}),o.jsxs("p",{style:{marginTop:"12px",color:"#64748b",fontSize:"0.9em"},children:["Report will include ",Dd[a].name.toLowerCase()," ","in ",Yh[n].name.toLowerCase()," format"]})]}),o.jsx(o9,{isExporting:d,progress:N,currentStep:ye})]}):null};var b5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},X2=tc.createContext&&tc.createContext(b5),dc=function(){return dc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},dc.apply(this,arguments)},c9=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function w5(t){return t&&t.map(function(e,r){return tc.createElement(e.tag,dc({key:r},e.attr),w5(e.child))})}function bm(t){return function(e){return tc.createElement(u9,dc({attr:dc({},t.attr)},e),w5(t.child))}}function u9(t){var e=function(r){var n=t.attr,i=t.size,a=t.title,s=c9(t,["attr","size","title"]),d=i||r.size||"1em",_;return r.className&&(_=r.className),t.className&&(_=(_?_+" ":"")+t.className),tc.createElement("svg",dc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,s,{className:_,style:dc(dc({color:t.color||r.color},r.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),a&&tc.createElement("title",null,a),t.children)};return X2!==void 0?tc.createElement(X2.Consumer,null,function(r){return e(r)}):e(b5)}function _5(t){return bm({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z"}}]})(t)}function d9(t){return bm({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(t)}function f9(t){return bm({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"}}]})(t)}function h9(t){return bm({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}}]})(t)}function p9(){const[t,e]=Wt.useState(!1),[r,n]=Wt.useState(""),[i,a]=Wt.useState(""),[s,d]=Wt.useState(null),[_,N]=Wt.useState({durationSec:0,words:0,wpm:0,avgEnergy:0}),[I,ye]=Wt.useState(!1),[xe,Ce]=Wt.useState("en-US"),Ve=[{code:"en-US",label:"English (US)"},{code:"en-GB",label:"English (UK)"},{code:"hi-IN",label:"Hindi (India)"},{code:"es-ES",label:"Spanish (Spain)"}],Ye=Wt.useRef(null),qe=Wt.useRef(""),ze=Wt.useRef(null),Oe=Wt.useRef(!1),We=Wt.useRef(0),ot=5,st=Wt.useRef(null),Rt=Wt.useRef(null),wt=Wt.useRef(null),It=Wt.useRef([]),er=Wt.useRef(null),cr=()=>{if(wt.current&&cancelAnimationFrame(wt.current),wt.current=null,Rt.current&&Rt.current.disconnect(),st.current)try{st.current.close()}catch{}er.current&&(er.current.getTracks().forEach(vr=>vr.stop()),er.current=null),Rt.current=null,st.current=null},Tr=()=>{if(!Rt.current)return;const vr=Rt.current,Bt=new Uint8Array(vr.frequencyBinCount);vr.getByteFrequencyData(Bt);const yr=Bt.reduce((dr,Pr)=>dr+Pr,0)/Bt.length;It.current.push(yr),wt.current=requestAnimationFrame(Tr)},xr=async()=>{try{const vr=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0}});er.current=vr;const Bt=new(window.AudioContext||window.webkitAudioContext);st.current=Bt;const yr=Bt.createAnalyser();yr.fftSize=1024,yr.smoothingTimeConstant=.85,Rt.current=yr,Bt.createMediaStreamSource(vr).connect(yr),It.current=[],Tr()}catch(vr){console.error("Audio init failed",vr)}},lt=Wt.useCallback((vr="en-US")=>{const Bt=window.SpeechRecognition||window.webkitSpeechRecognition;if(!Bt)return null;const yr=new Bt;return yr.continuous=!0,yr.interimResults=!0,yr.lang=vr,yr.onstart=()=>{e(!0),a(""),ze.current=Date.now()},yr.onresult=dr=>{let Pr="",Hr=qe.current;for(let Pn=dr.resultIndex;Pn<dr.results.length;Pn++){const Rn=dr.results[Pn];let Fn=Rn[0].transcript;if(Fn=Fn.replace(/[\s\n]+/g," "),Rn.isFinal){const In=Fn.trim();Hr.trim().endsWith(In)||(Hr+=In+" ")}else Pr+=Fn}qe.current=Hr;const Wr=(Hr+Pr).trim();n(Wr)},yr.onerror=dr=>{console.error("Recognition error",dr);const Pr=(dr==null?void 0:dr.error)||"Speech recognition error";if(a(Pr),Oe.current&&We.current<ot){We.current+=1;try{yr.stop()}catch{}setTimeout(()=>{try{Ye.current&&Ye.current.start()}catch{}},500)}else e(!1)},yr.onend=()=>{if(Oe.current&&We.current<ot){We.current+=1;try{Ye.current&&Ye.current.start()}catch{}return}e(!1),Zt()},yr},[]),gt=async()=>{qe.current="",n(""),d(null),N({durationSec:0,words:0,wpm:0,avgEnergy:0}),ye(!1);const vr=lt(xe);if(!vr){a("Speech recognition not supported in this browser.");return}Ye.current=vr;try{Oe.current=!0,We.current=0,await xr(),vr.start()}catch(Bt){console.error(Bt),a("Failed to start recording")}},Ft=()=>{if(Oe.current=!1,Ye.current)try{Ye.current.stop()}catch{}cr()},pt=()=>{Ft(),qe.current="",It.current=[],n(""),d(null),N({durationSec:0,words:0,wpm:0,avgEnergy:0}),a("")},Zt=()=>{const vr=Date.now(),Bt=ze.current?Math.max(1,Math.round((vr-ze.current)/1e3)):0,yr=r.split(/\s+/).filter(Boolean).length,dr=Bt>0?Math.round(yr/Bt*60):0,Pr=It.current||[],Hr=Pr.length?Math.round(Pr.reduce((Wr,Pn)=>Wr+Pn,0)/Pr.length):0;N({durationSec:Bt,words:yr,wpm:dr,avgEnergy:Hr})},Jt=()=>{const{wpm:vr,avgEnergy:Bt}=_;let yr="neutral";return(vr>150||Bt>120)&&(yr="energetic"),vr<100&&Bt<90&&(yr="calm"),{tone:yr,wpm:vr,avgEnergy:Bt}},lr=()=>{if(!r.trim()){a("Please record or paste some text first.");return}if(I){const yr=r.split(/\s+/).filter(Boolean).length;N({durationSec:0,words:yr,wpm:0,avgEnergy:0})}const vr=Jt(),Bt=v9(r,vr);d(Bt)},wr=async vr=>{try{await navigator.clipboard.writeText(vr)}catch(Bt){console.error("Copy failed",Bt)}},Sr=()=>{if(!s)return;const vr=g9(s,_),Bt=new Blob([vr],{type:"text/markdown;charset=utf-8"}),yr=URL.createObjectURL(Bt),dr=document.createElement("a");dr.href=yr,dr.download="study-pack.md",dr.click(),URL.revokeObjectURL(yr)};return Wt.useEffect(()=>()=>cr(),[]),o.jsxs("div",{className:"student-study-assistant",children:[o.jsx("h2",{className:"section-title",children:"🎓 Student Study Pack (Record Teacher ➜ Transcript ➜ Materials)"}),i&&o.jsx("div",{className:"error-message",style:{marginBottom:12},children:i}),o.jsxs("div",{className:"controls",style:{display:"flex",gap:8,flexWrap:"wrap"},children:[o.jsxs("button",{className:`mic-button ${t?"listening":""}`,onClick:t?Ft:gt,disabled:I,title:I?"Disable Type/Paste mode to use microphone":"",children:[t?o.jsx(h9,{className:"mic-icon"}):o.jsx(f9,{className:"mic-icon"})," ",t?"Stop":"Record"]}),o.jsx("select",{value:xe,onChange:vr=>Ce(vr.target.value),disabled:t,style:{background:"#0f1320",color:"#fff",border:"1px solid #243",borderRadius:6,padding:"8px 10px"},title:"Speech recognition language",children:Ve.map(vr=>o.jsx("option",{value:vr.code,children:vr.label},vr.code))}),o.jsx("button",{className:"control-button",onClick:()=>ye(vr=>!vr),children:I?"🎤 Use Microphone":"✍️ Type/Paste Text"}),o.jsx("button",{className:"control-button",disabled:!r.trim(),onClick:lr,children:"Generate Study Pack"}),o.jsxs("button",{className:"control-button",disabled:!s,onClick:Sr,children:[o.jsx(d9,{style:{marginRight:6}}),"Download All"]}),o.jsx("button",{className:"control-button",onClick:pt,children:"Clear"})]}),o.jsxs("div",{className:"metrics-chips",children:[o.jsxs("span",{children:["⏱️ Duration: ",_.durationSec,"s"]}),o.jsxs("span",{children:["📝 Words: ",_.words]}),o.jsxs("span",{children:["🚀 WPM: ",_.wpm]}),o.jsxs("span",{children:["🎚️ Energy: ",_.avgEnergy]})]}),o.jsxs("div",{className:"transcript-card card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("h3",{style:{margin:0},children:I?"Type or Paste Text":"Transcript"}),o.jsxs("button",{className:"control-button",onClick:()=>wr(r),disabled:!r,children:[o.jsx(_5,{style:{marginRight:6}}),"Copy"]})]}),I?o.jsx("textarea",{style:{width:"100%",marginTop:8,minHeight:160,resize:"vertical"},placeholder:"Paste or type your lecture notes here...",value:r,onChange:vr=>n(vr.target.value)}):o.jsx("p",{style:{whiteSpace:"pre-wrap",marginTop:8},children:r||"Record the teacher to generate a transcript..."})]}),s&&o.jsxs("div",{className:"materials",children:[o.jsx("h3",{className:"section-title",children:"📚 Generated Study Materials"}),o.jsx(m9,{materials:s,onCopy:wr})]})]})}function m9({materials:t,onCopy:e}){const r=Object.entries(t);return o.jsx("div",{className:"material-grid",children:r.map(([n,i])=>o.jsxs("div",{className:"material-card",children:[o.jsxs("div",{className:"material-card__header",children:[o.jsx("h4",{className:"material-title",children:k5(n)}),o.jsx("button",{className:"control-button",onClick:()=>e(S5(n,i)),children:o.jsx(_5,{})})]}),o.jsx("div",{className:"material-content",children:Array.isArray(i)?o.jsx("ul",{children:i.map((a,s)=>o.jsx("li",{children:a},s))}):typeof i=="string"?o.jsx("p",{children:i}):o.jsx("pre",{style:{whiteSpace:"pre-wrap",margin:0},children:JSON.stringify(i,null,2)})})]},n))})}function k5(t){return t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}function v9(t,e){const r=t.trim(),n=r.split(/[.!?]+\s+/).filter(Boolean);r.split(/\s+/).filter(Boolean);const i=M5(r,12),a=e.tone==="energetic"?"Emphasize active recall and challenges.":e.tone==="calm"?"Emphasize clarity and examples with slower pacing.":"Balanced coverage across formats.",s=Z2(r,5),d=Z2(r,12);return{learning_objectives:y9(i),brief_summary:s,detailed_summary:d,bullet_notes:x9(n,12),glossary:b9(i),key_takeaways:w9(n,8),comprehension_questions:_9(n,10),mcqs:k9(i,8),true_false:S9(n,10),flashcards:M9(i,n,12),examples:T9(n,6),misconceptions:A9(i,5),assignments:C9(i,3),practice_problems:j9(i,6),cheat_sheet:E9(i),study_plan_7_days:L9(i,7,a),exam_tips:R9(i),mnemonics:D9(i),further_reading:P9(i,8)}}function S5(t,e){let r=`

## ${k5(t)}
`;return Array.isArray(e)?r+=e.map(n=>`- ${n}`).join(`
`):typeof e=="string"?r+=`
${e}`:r+=`

\`\`\`json
${JSON.stringify(e,null,2)}
\`\`\``,r}function g9(t,e){let r=`# Study Pack

Generated from teacher lecture.

- Duration: ${e.durationSec}s
- Words: ${e.words}
- WPM: ${e.wpm}
- Energy: ${e.avgEnergy}
`;for(const[n,i]of Object.entries(t))r+=S5(n,i);return r}function M5(t,e=10){const r=t.toLowerCase().match(/[\p{L}][\p{L}-]+/gu)||[],n=new Set(["the","and","for","that","with","this","from","into","your","you","are","was","were","has","have","had","not","but","can","could","should","would","about","over","under","between","within","to","in","on","of","a","an","it","is","as","by","or","be"]),i=new Map;return r.forEach(a=>{n.has(a)||i.set(a,(i.get(a)||0)+1)}),[...i.entries()].sort((a,s)=>s[1]-a[1]).slice(0,e).map(([a])=>a)}function Z2(t,e=5){const r=t.split(new RegExp("(?<=[.!?])\\s+")).filter(Boolean);if(r.length<=e)return t;const n=M5(t,20);return r.map(a=>({s:a,score:n.reduce((s,d)=>s+(a.toLowerCase().includes(d)?1:0),0)})).sort((a,s)=>s.score-a.score).slice(0,e).map(a=>a.s).join(" ")}function y9(t,e){return["Define the key terms and concepts.","Explain the main ideas in your own words.","Apply the concepts to real-world examples.","Analyze relationships between ideas and themes.","Evaluate the implications and trade-offs."].concat(t.slice(0,5).map(n=>`Describe the role of "${n}" in the topic.`))}function x9(t,e=10){const r=[];for(let n=0;n<Math.min(e,t.length);n++)r.push(t[n]);for(;r.length<e;)r.push("Additional point based on lecture context.");return r}function b9(t){return t.map(e=>`${wm(e)}: Definition and relevance in this lecture.`)}function w9(t,e=8){const r=[],n=Math.max(1,Math.floor(t.length/e));for(let i=0;i<t.length&&r.length<e;i+=n)r.push(t[i]);for(;r.length<e;)r.push("Reinforce core concept with a concise statement.");return r}function _9(t,e=10){const r=[],n=["What is","How does","Why is","Explain","Describe","Compare","When does","Where can","Which factors","Outline"],i=t.slice(0,e).map(a=>a.split(" ").slice(0,6).join(" "));for(let a=0;a<e;a++)r.push(`${n[a%n.length]} ${i[a%i.length]||"the concept"}?`);return r}function k9(t,e=8){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"the concept";r.push(`Which of the following best describes ${i}? (A) Irrelevant detail (B) Partially related (C) Accurate definition (D) Contradictory statement`)}return r}function S9(t,e=10){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"Core claim from the lecture.";r.push(`True/False: ${i}`)}return r}function M9(t,e,r=12){const n=[];for(let i=0;i<r;i++){const a=t[i%Math.max(1,t.length)]||`Concept ${i+1}`;n.push(`${wm(a)} — Explain this concept in one sentence.`)}return n}function T9(t,e=6){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"a key idea";r.push(`Example: Apply the idea from "${i.slice(0,70)}" to a real-world scenario.`)}return r}function A9(t,e=5){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"topic";r.push(`Misconception: "${wm(i)}" means X. Correction: Actually, it means Y.`)}return r}function C9(t,e=3){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"topic";r.push(`Assignment ${n+1}: Write a short report explaining ${i} with references and examples.`)}return r}function j9(t,e=6){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"topic";r.push(`Problem ${n+1}: Solve a scenario involving ${i}. Show steps and reasoning.`)}return r}function E9(t){return t.slice(0,12).map(e=>`${wm(e)} — key formula/fact/definition.`)}function L9(t,e=7,r=""){const n=[];for(let i=1;i<=e;i++)n.push(`Day ${i}: Review ${t[(i-1)%Math.max(1,t.length)]||"core topic"}, practice 2 problems, and recall 5 flashcards. ${r}`);return n}function R9(t){return["Focus on high-frequency concepts first.","Practice retrieval with flashcards daily.","Teach a concept aloud to check understanding.","Simulate exam conditions for timed practice.","Review mistakes and create correction notes."].concat(t.slice(0,5).map(r=>`Know definitions and applications of ${r}.`))}function D9(t){return t.slice(0,6).map((e,r)=>`Mnemonic ${r+1}: Create a memorable phrase linking ${e} to a known concept.`)}function P9(t,e=8){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"topic";r.push(`Further reading on ${i}: textbook chapter, reputable article, or tutorial video.`)}return r}function wm(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}const N9=()=>{var st,Rt;const[t,e]=Wt.useState(null),[r,n]=Wt.useState(null),[i,a]=Wt.useState(!1),[s,d]=Wt.useState({bertLoaded:!1,ready:!1}),[_,N]=Wt.useState("I am feeling overwhelmed with work deadlines and I really need help managing this stress"),[I,ye]=Wt.useState("business"),[xe,Ce]=Wt.useState({userId:"user_001",timestamp:Date.now(),urgency:!1,conversationHistory:[]}),Ve=[{domain:"healthcare",scenario:"Patient Communication",text:"I have been experiencing severe chest pain for the past hour, and I am really worried",context:{urgency:!0,symptoms:["chest pain"],duration:"acute"},expectedOutcome:"High concern detection, immediate action recommendation"},{domain:"education",scenario:"Student Struggling",text:"I don't understand this calculus problem at all, and I have an exam tomorrow",context:{subject:"mathematics",deadline:"urgent",difficulty:"high"},expectedOutcome:"Confusion detection, learning support recommendations"},{domain:"mentalHealth",scenario:"Mental Health Support",text:"I feel like everything is falling apart and I can't handle anything anymore",context:{riskFactors:["overwhelm"],support:"needed"},expectedOutcome:"Overwhelm detection, support resources recommendation"},{domain:"business",scenario:"Workplace Stress",text:"The project deadline is tomorrow and we are nowhere near completion, this is a disaster",context:{deadline:"critical",stress:"high",teamWork:!0},expectedOutcome:"Urgency and pressure detection, resource allocation advice"},{domain:"customerSupport",scenario:"Escalated Customer",text:"This is completely unacceptable! I want to speak to your manager immediately!",context:{escalation:!0,satisfaction:"low",priority:"high"},expectedOutcome:"Escalation detection, immediate supervisor involvement"},{domain:"social",scenario:"Relationship Conflict",text:"We had a huge argument and now I don't know how to fix our friendship",context:{relationship:"friendship",conflict:!0,resolution:"seeking"},expectedOutcome:"Conflict detection, harmony restoration suggestions"}],Ye=["Multi-Modal Fusion","Real-Time Learning","Context Memory","Domain Adaptation","Temporal Patterns","User Personalization"];Wt.useEffect(()=>{(async()=>{console.log("🚀 Initializing Novel BERT Enhancement System..."),d({bertLoaded:!1,ready:!1});try{const{default:It}=await Mo(async()=>{const{default:Tr}=await import("./novelBERTEnhancementSystem-BO-JNPNa.js");return{default:Tr}},[]);if(!It)throw new Error("NovelBERTEnhancementSystem not exported");console.log("📦 NovelBERT class loaded, creating instance...");const er=new It;console.log("🔧 Initializing BERT models..."),await er.init();const cr=er.getModelStatus();console.log("📊 Actual BERT status:",cr),console.log("✅ Novel BERT initialization complete"),e(er),d({bertLoaded:cr.bertLoaded,ready:cr.ready,fallbackMode:cr.fallbackMode})}catch(It){console.error("❌ Novel BERT initialization failed:",It.message),d({bertLoaded:!1,ready:!1,fallbackMode:!0}),e({analyzeForRealWorldProblems:async(er,cr)=>(console.log("📋 Using component fallback analysis for:",er),{emotions:{concern:.6,neutral:.4,stress:er.toLowerCase().includes("stress")?.8:.2},recommendations:{support:[{action:"Consider seeking professional support",priority:"medium",type:"support"}]},confidence:.5,domain:cr.domain||"general",bertEnhanced:!1,analysisMethod:"Component Fallback"}),updateContextMemory:er=>{console.log("📝 Fallback: Context memory update called")},getModelStatus:()=>({bertLoaded:!1,ready:!1,fallbackMode:!0})})}})()},[]);const qe=async(wt,It={})=>{if(!t){console.error("❌ NovelBERT not available"),n({error:"System not ready. Please wait or refresh."});return}if(wt.trim()){a(!0);try{console.log("🌍 Analyzing real-world problem:",wt),console.log("📋 Context:",It);const er={...xe,...It,domain:I};if(typeof t.analyzeForRealWorldProblems!="function")throw new Error("analyzeForRealWorldProblems method not available");const cr=await t.analyzeForRealWorldProblems(wt,er);console.log("🔍 Raw Novel BERT result:",cr),cr&&cr.emotions?(console.log("✅ Found emotions:",Object.keys(cr.emotions)),console.log("📊 Emotion scores:",cr.emotions)):console.warn("⚠️ No emotions found in result"),n(cr),t&&typeof t.updateContextMemory=="function"?t.updateContextMemory({text:wt,result:cr,timestamp:Date.now(),domain:I}):console.warn("⚠️ updateContextMemory method not available"),console.log("🎯 Final real-world analysis result:",cr)}catch(er){console.error("❌ Real-world analysis failed:",er),n({error:er.message})}finally{a(!1)}}},ze=wt=>{N(wt.text),ye(wt.domain),Ce(It=>({...It,...wt.context})),qe(wt.text,wt.context)},Oe=wt=>typeof wt!="number"||isNaN(wt)||!isFinite(wt)?"0.0%":(Math.max(0,Math.min(1,wt))*100).toFixed(1)+"%",We=wt=>({immediate:"🚨",support:"🤝",engagement:"🎯",connection:"🔗",resolution:"✅",critical:"⚠️"})[wt]||"💡",ot=wt=>({critical:"#dc2626",high:"#ea580c",medium:"#d97706",low:"#65a30d"})[wt]||"#6b7280";return o.jsxs("div",{style:{maxWidth:"1200px",margin:"20px auto",padding:"20px",fontFamily:"Arial, sans-serif",background:"linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%)",borderRadius:"15px",color:"white",minHeight:"100vh"},children:[o.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
          }
          
          @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
          }
          
          .analysis-card {
            animation: slideIn 0.5s ease-out;
          }
          
          .feature-badge {
            transition: all 0.3s ease;
          }
          
          .feature-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
          }
          
          .recommendation-item {
            transition: all 0.3s ease;
          }
          
          .recommendation-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
          }
        `}),o.jsx("h1",{style:{textAlign:"center",marginBottom:"30px",fontSize:"2.5em"},children:"🌟 Novel BERT Real-World Problem Solver"}),o.jsx("p",{style:{textAlign:"center",marginBottom:"40px",fontSize:"1.2em",opacity:.9},children:"Advanced AI system for practical problem solving across domains"}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:s.bertLoaded&&!s.fallbackMode?"#10b981":s.fallbackMode?"#f59e0b":"#ef4444",margin:"0 auto 8px",animation:s.ready?"none":"pulse 2s infinite"}}),o.jsxs("span",{children:["BERT Model: ",s.bertLoaded&&!s.fallbackMode?"✅ Active":s.fallbackMode?"⚠️ Fallback":"❌ Failed"]})]}),o.jsx("div",{style:{textAlign:"center"},children:o.jsxs("span",{children:["🎯 Domains: ",((st=s.domainsSupported)==null?void 0:st.length)||6]})}),o.jsx("div",{style:{textAlign:"center"},children:o.jsxs("span",{children:["⚡ Features: ",((Rt=s.featuresActive)==null?void 0:Rt.length)||4," Active"]})})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px"},children:[o.jsx("h3",{style:{marginBottom:"15px",textAlign:"center"},children:"🚀 Novel Features"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px"},children:Ye.map((wt,It)=>o.jsx("div",{className:"feature-badge",style:{background:"rgba(16, 185, 129, 0.2)",border:"1px solid #10b981",borderRadius:"20px",padding:"8px 16px",textAlign:"center",fontSize:"0.9em"},children:wt},wt))})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px"},children:[o.jsx("h3",{style:{marginBottom:"15px"},children:"🎯 Problem Domain"}),o.jsxs("select",{value:I,onChange:wt=>ye(wt.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"none",fontSize:"16px",background:"white",color:"#1f2937"},children:[o.jsx("option",{value:"healthcare",children:"🏥 Healthcare Communication"}),o.jsx("option",{value:"education",children:"🎓 Educational Support"}),o.jsx("option",{value:"mentalHealth",children:"🧠 Mental Health Support"}),o.jsx("option",{value:"business",children:"💼 Business Communication"}),o.jsx("option",{value:"customerSupport",children:"📞 Customer Support"}),o.jsx("option",{value:"social",children:"👥 Social Interaction"})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px"},children:[o.jsx("h3",{style:{marginBottom:"15px"},children:"💬 Problem Description"}),o.jsx("textarea",{value:_,onChange:wt=>N(wt.target.value),style:{width:"100%",minHeight:"100px",padding:"15px",borderRadius:"8px",border:"none",fontSize:"16px",resize:"vertical",fontFamily:"inherit"},placeholder:"Describe the real-world problem or situation..."}),o.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"15px",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>qe(_),disabled:i||!_.trim(),style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",cursor:"pointer",fontWeight:"bold",opacity:i?.7:1},children:i?"🔄 Analyzing...":"🔍 Analyze Problem"}),o.jsx("button",{onClick:()=>{N(""),n(null)},style:{background:"rgba(107, 114, 128, 0.8)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"🗑️ Clear"})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px"},children:[o.jsx("h3",{style:{marginBottom:"15px"},children:"🌍 Real-World Test Scenarios"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px"},children:Ve.map((wt,It)=>o.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",padding:"15px",cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>ze(wt),onMouseEnter:er=>{er.target.style.background="rgba(255,255,255,0.1)",er.target.style.transform="translateY(-2px)"},onMouseLeave:er=>{er.target.style.background="rgba(255,255,255,0.05)",er.target.style.transform="translateY(0)"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:wt.scenario}),o.jsxs("div",{style:{fontSize:"0.9em",opacity:.8,marginBottom:"8px"},children:[wt.text.substring(0,80),"..."]}),o.jsxs("div",{style:{fontSize:"0.8em",opacity:.7},children:["Expected: ",wt.expectedOutcome]})]},It))})]}),r&&o.jsxs("div",{className:"analysis-card",style:{background:"rgba(255,255,255,0.95)",color:"#1f2937",borderRadius:"15px",padding:"25px",marginTop:"20px"},children:[o.jsx("h2",{style:{marginBottom:"20px",color:"#1e40af"},children:"🎯 Real-World Problem Analysis"}),r.error?o.jsxs("div",{style:{color:"#dc2626",padding:"15px",background:"#fef2f2",borderRadius:"8px"},children:["❌ Error: ",r.error]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"25px"},children:[o.jsxs("div",{style:{background:"#f0f9ff",padding:"15px",borderRadius:"8px"},children:[o.jsx("strong",{children:"Domain:"})," ",r.domain||"Unknown"]}),o.jsxs("div",{style:{background:"#f0fdf4",padding:"15px",borderRadius:"8px"},children:[o.jsx("strong",{children:"Confidence:"})," ",Oe(r.confidence||0)]}),o.jsxs("div",{style:{background:"#fef3c7",padding:"15px",borderRadius:"8px"},children:[o.jsx("strong",{children:"Enhancement:"})," ",r.bertEnhanced?"🤖 BERT":"📋 Fallback"]})]}),r.emotions&&Object.keys(r.emotions).length>0&&o.jsxs("div",{style:{marginBottom:"25px"},children:[o.jsx("h3",{style:{marginBottom:"15px",color:"#1e40af"},children:"🎭 Detected Emotions"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"12px"},children:Object.entries(r.emotions).sort(([,wt],[,It])=>It-wt).slice(0,8).map(([wt,It])=>o.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"12px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsx("span",{style:{fontWeight:"600",textTransform:"capitalize"},children:wt}),o.jsx("span",{style:{fontWeight:"bold",color:"#059669"},children:Oe(It)})]}),o.jsx("div",{style:{width:"100%",height:"6px",background:"#e5e7eb",borderRadius:"3px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${It*100}%`,height:"100%",background:"linear-gradient(90deg, #10b981, #059669)",transition:"width 0.8s ease"}})})]},wt))})]}),r.recommendations&&o.jsxs("div",{style:{marginBottom:"25px"},children:[o.jsx("h3",{style:{marginBottom:"15px",color:"#1e40af"},children:"💡 Recommendations"}),Object.entries(r.recommendations).map(([wt,It])=>It.length>0&&o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("h4",{style:{marginBottom:"10px",color:"#374151",textTransform:"capitalize"},children:wt.replace(/([A-Z])/g," $1").trim()}),o.jsx("div",{style:{display:"grid",gap:"8px"},children:It.map((er,cr)=>{var Tr;return o.jsxs("div",{className:"recommendation-item",style:{background:"#f9fafb",border:`2px solid ${ot(er.priority)}`,borderRadius:"8px",padding:"12px",borderLeft:`4px solid ${ot(er.priority)}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[o.jsx("span",{children:We(er.type)}),o.jsx("span",{style:{background:ot(er.priority),color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"0.8em",fontWeight:"bold"},children:(Tr=er.priority)==null?void 0:Tr.toUpperCase()})]}),o.jsx("div",{style:{fontSize:"0.95em",lineHeight:"1.4"},children:er.action})]},cr)})})]},wt))]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginTop:"20px"},children:[r.multiModalFusion&&o.jsxs("div",{style:{background:"#eff6ff",padding:"12px",borderRadius:"8px"},children:[o.jsx("strong",{children:"🔄 Multi-Modal:"})," ",r.multiModalFusion]}),r.personalizedLearning&&o.jsxs("div",{style:{background:"#f0fdf4",padding:"12px",borderRadius:"8px"},children:[o.jsx("strong",{children:"🧠 Learning:"})," Active"]}),r.emotionalTrajectory&&o.jsxs("div",{style:{background:"#fef3c7",padding:"12px",borderRadius:"8px"},children:[o.jsx("strong",{children:"📈 Trajectory:"})," ",r.emotionalTrajectory.trend]}),r.domainFusion&&o.jsxs("div",{style:{background:"#fdf4ff",padding:"12px",borderRadius:"8px"},children:[o.jsx("strong",{children:"🎯 Domain:"})," Optimized"]})]})]})]}),r&&o.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginTop:"20px",textAlign:"center"},children:[o.jsx("h3",{style:{marginBottom:"15px"},children:"📊 Analysis Summary"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:Object.keys(r.emotions||{}).length}),o.jsx("div",{style:{opacity:.8},children:"Emotions Detected"})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:r.recommendations?Object.values(r.recommendations).flat().length:0}),o.jsx("div",{style:{opacity:.8},children:"Recommendations"})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"2em",fontWeight:"bold"},children:[r.confidence?Math.round(r.confidence*100):0,"%"]}),o.jsx("div",{style:{opacity:.8},children:"Confidence"})]})]})]})]})},z9=({transcript:t})=>{const[e,r]=Wt.useState(null),[n,i]=Wt.useState(!1),[a,s]=Wt.useState("summary");Wt.useEffect(()=>{t&&t.trim().length>20&&d()},[t]);const d=async()=>{!t||t.trim().length<20||(i(!0),setTimeout(()=>{const ze=t.split(" ").filter(It=>It.trim().length>0),Oe=t.split(/[.!?]+/).filter(It=>It.trim().length>5),We=_(t),ot=N(t,Oe),st=Ce(t,ze,We),Rt=Ve(t),wt={summary:{brief:ot.brief,wordCount:ze.length,sentenceCount:Oe.length,readingTime:Math.ceil(ze.length/200),keyTopics:ot.keyTopics,mainTheme:ot.mainTheme},textSentiment:We,keyInsights:st,textEmotions:Rt};r(wt),i(!1)},2e3))},_=ze=>{const Oe=["good","great","excellent","amazing","wonderful","fantastic","love","like","happy","joy","excited","pleased","satisfied","perfect","awesome","brilliant","outstanding","superb","delightful","impressive","successful","positive","beautiful","helpful","effective","efficient","convenient","comfortable","easy","simple","clear","smooth","fast","quick","reliable","trustworthy","professional","friendly","polite","kind","generous","thoughtful","caring","supportive"],We=["bad","terrible","awful","horrible","worst","hate","dislike","angry","sad","disappointed","frustrated","annoyed","upset","worried","concerned","problem","issue","difficulty","trouble","error","mistake","wrong","failed","failure","broken","damaged","poor","weak","slow","expensive","costly","cheap","uncomfortable","difficult","hard","complicated","confusing","unclear","unreliable","unprofessional","rude","impolite","selfish","uncaring"],ot=["health","medical","doctor","treatment","medicine","therapy","healing","recovery","wellness","fitness","exercise","diet","nutrition","symptom","diagnosis","prescription","hospital","clinic","patient","care","surgery","medication","pain","illness","disease","condition","chronic","acute","prevention","vaccine","immunization","checkup","screening"],st=ze.toLowerCase().split(/\W+/);let Rt=0,wt=0,It=!1;st.forEach(Ft=>{Oe.includes(Ft)&&Rt++,We.includes(Ft)&&wt++,ot.includes(Ft)&&(It=!0)});const er=Rt+wt;let cr=0,Tr="Neutral",xr=.5;if(er>0){cr=(Rt-wt)/Math.max(er,st.length/10);const Ft=er/Math.max(st.length/15,1),pt=.75,Zt=Math.min(.23,Ft*.15);xr=Math.min(.98,pt+Zt),er>=3&&(xr=Math.min(.95,xr+.1)),cr>.15?(Tr="Positive",xr=Math.min(.92,xr+.05)):cr<-.15&&(Tr="Negative",xr=Math.min(.92,xr+.05))}else st.length>20&&(xr=.68);It&&(xr=Math.min(.96,xr+.12));const lt=["training","education","learning","development","skills","knowledge","professional","experience","design","concept","study","research","analysis"],gt=st.filter(Ft=>lt.includes(Ft)).length;return gt>=2&&(xr=Math.min(.94,xr+.08)),{overall:Tr,confidence:Math.round(xr*100)/100,score:Math.round(cr*100)/100,context:It?"Healthcare":gt>=2?"Professional/Educational":"General",wordCounts:{positive:Rt,negative:wt,total:st.length,professional:gt}}},N=(ze,Oe)=>{const We=ze.toLowerCase().split(/\W+/).filter(xr=>xr.length>2),st=Oe.map(xr=>{const lt=xr.toLowerCase().split(/\W+/).filter(lr=>lr.length>2);let gt=0;const Ft=["health","medical","treatment","patient","doctor","care","therapy","medicine","wellness","fitness","exercise","nutrition","symptoms","diagnosis","recovery","prevention","training","education","learning","development","skills","knowledge","experience","professional","work","business","management","project","design","technology","innovation","research","analysis","study","evaluation","assessment","improvement","solution","strategy","planning","implementation"];lt.forEach(lr=>{Ft.includes(lr)&&(gt+=2)});const pt=Oe.indexOf(xr);(pt===0||pt===Oe.length-1)&&(gt+=1);const Zt=lt.length;Zt>=8&&Zt<=25&&(gt+=1),/\d+/.test(xr)&&(gt+=.5);const Jt=["develop","create","build","design","implement","analyze","evaluate","assess","improve","enhance","optimize","manage","lead","coordinate","facilitate","provide","deliver","achieve","accomplish","demonstrate","utilize","apply","integrate","collaborate","communicate","present","teach","train","mentor","guide","support","assist","help","serve"];return lt.forEach(lr=>{Jt.includes(lr)&&(gt+=1)}),{sentence:xr,score:gt,wordCount:Zt}}).sort((xr,lt)=>lt.score-xr.score),Rt=Math.min(3,Math.max(1,Math.ceil(Oe.length*.4))),It=st.slice(0,Rt).sort((xr,lt)=>Oe.indexOf(xr.sentence)-Oe.indexOf(lt.sentence)).map(xr=>xr.sentence.trim()).join(". ");let er=It;(er.length<50||Rt===1)&&(er=I(ze,We,Oe)),!er.endsWith(".")&&!er.endsWith("!")&&!er.endsWith("?")&&(er+=".");const cr=ye(We),Tr=xe(ze);return{brief:er,keyTopics:cr,mainTheme:Tr,summaryMethod:er===It?"extractive":"abstractive",originalLength:Oe.length,summaryLength:Rt}},I=(ze,Oe,We)=>{const ot={},st=["the","and","for","are","but","not","you","all","can","had","her","was","one","our","out","day","get","has","him","his","how","man","new","now","old","see","two","way","who","boy","did","its","let","put","say","she","too","use"];Oe.forEach(cr=>{!st.includes(cr)&&cr.length>3&&(ot[cr]=(ot[cr]||0)+1)});const Rt=Object.entries(ot).sort(([,cr],[,Tr])=>Tr-cr).slice(0,8).map(([cr])=>cr);let wt="";ze.toLowerCase().includes("health")||ze.toLowerCase().includes("medical")||ze.toLowerCase().includes("patient")?(wt=`This content discusses healthcare and medical topics, focusing on ${Rt.slice(0,3).join(", ")}. `,(ze.toLowerCase().includes("treatment")||ze.toLowerCase().includes("therapy"))&&(wt+="Treatment and therapeutic approaches are highlighted, "),(ze.toLowerCase().includes("patient")||ze.toLowerCase().includes("care"))&&(wt+="with emphasis on patient care and wellness. ")):ze.toLowerCase().includes("education")||ze.toLowerCase().includes("learning")||ze.toLowerCase().includes("training")?(wt=`This content covers educational and learning topics, particularly ${Rt.slice(0,3).join(", ")}. `,(ze.toLowerCase().includes("student")||ze.toLowerCase().includes("skill"))&&(wt+="Student development and skill acquisition are key themes. ")):ze.toLowerCase().includes("design")||ze.toLowerCase().includes("sketch")||ze.toLowerCase().includes("visual")?(wt=`This content focuses on design and visual representation, covering ${Rt.slice(0,3).join(", ")}. `,(ze.toLowerCase().includes("product")||ze.toLowerCase().includes("concept"))&&(wt+="Product concepts and design methodologies are discussed. ")):ze.toLowerCase().includes("business")||ze.toLowerCase().includes("work")||ze.toLowerCase().includes("professional")?(wt=`This content addresses professional and business topics, including ${Rt.slice(0,3).join(", ")}. `,(ze.toLowerCase().includes("management")||ze.toLowerCase().includes("strategy"))&&(wt+="Management strategies and professional practices are emphasized. ")):wt=`This content explores ${Rt.slice(0,2).join(" and ")}, with discussion of ${Rt.slice(2,5).join(", ")}. `;const It=We.length,er=Oe.length/Math.max(It,1);return er>15?wt+="The content provides detailed and comprehensive coverage of the subject matter.":er>10?wt+="The information is presented in a clear and structured manner.":wt+="The content offers concise insights into the topic.",wt},ye=(ze,Oe)=>{const We=["the","and","for","are","but","not","you","all","can","had","her","was","one","our","out","day","get","has","him","his","how","man","new","now","old","see","two","way","who","boy","did","its","let","put","say","she","too","use","will","with","have","this","that","from","they","been","said","each","which","their","time","would","there","could","other","what","your","when","make","like","into","than","more","very","some","just","only","know","think","also","after","first","well","give"],ot={healthcare:["health","medical","doctor","patient","treatment","therapy","medicine","care","wellness","diagnosis","symptoms","recovery","prevention","nutrition","fitness","exercise","hospital","clinic"],education:["education","learning","student","training","skill","knowledge","course","study","research","academic","university","school","teaching","instruction","development"],technology:["technology","software","system","digital","computer","data","application","platform","network","internet","programming","development","innovation"],business:["business","management","strategy","professional","work","company","organization","project","team","leadership","planning","implementation","analysis"],design:["design","visual","sketch","concept","product","creative","artistic","aesthetic","layout","composition","style","graphics","illustration"]},st={};return ze.forEach(wt=>{if(!We.includes(wt)&&wt.length>3){let It=1;Object.values(ot).forEach(er=>{er.includes(wt)&&(It=2)}),st[wt]=(st[wt]||0)+It}}),Object.entries(st).sort(([,wt],[,It])=>It-wt).slice(0,6).map(([wt])=>wt.charAt(0).toUpperCase()+wt.slice(1)).join(", ")||"General Discussion, Communication, Content Analysis"},xe=(ze,Oe)=>{const We=ze.toLowerCase(),ot={"Healthcare & Medical":["health","medical","doctor","patient","treatment","therapy","medicine","care","wellness","diagnosis","symptoms","recovery","prevention","nutrition","fitness","hospital","clinic","nurse","physician"],"Education & Learning":["education","learning","student","training","skill","knowledge","course","study","research","academic","university","school","teaching","instruction","development","curriculum","pedagogy"],"Design & Creativity":["design","visual","sketch","concept","product","creative","artistic","aesthetic","layout","composition","style","graphics","illustration","drawing","prototype","visualization"],"Technology & Innovation":["technology","software","system","digital","computer","data","application","platform","network","internet","programming","development","innovation","artificial","intelligence"],"Business & Professional":["business","management","strategy","professional","work","company","organization","project","team","leadership","planning","implementation","analysis","corporate","enterprise"],"Communication & Social":["communication","social","relationship","interaction","conversation","discussion","meeting","presentation","collaboration","teamwork","networking","community"],"Personal Development":["personal","development","growth","improvement","motivation","goal","achievement","success","confidence","mindset","habits","lifestyle","self"]};let st=0,Rt="General Discussion";return Object.entries(ot).forEach(([wt,It])=>{let er=0;It.forEach(cr=>{const Tr=new RegExp(`\\b${cr}\\b`,"gi"),xr=(We.match(Tr)||[]).length;er+=xr}),er>st&&(st=er,Rt=wt)}),Rt},Ce=(ze,Oe,We)=>{const ot=[],st=Oe.length/Math.max(ze.split(/[.!?]+/).length-1,1),Rt=st>15?"High":st>10?"Medium":"Simple";return ot.push({title:"Text Complexity Analysis",content:`${Rt} complexity with ${st.toFixed(1)} words per sentence. ${We.context} domain detected.`,confidence:.88,type:"text"}),ot.push({title:"Sentiment Pattern Analysis",content:`${We.overall} sentiment detected with ${We.wordCounts.positive} positive and ${We.wordCounts.negative} negative indicators.`,confidence:We.confidence,type:"text"}),ot},Ve=ze=>{if(!ze||ze.trim().length===0)return[{label:"Neutral",score:.7,source:"text",confidence:"low"},{label:"Trust",score:.2,source:"text",confidence:"low"},{label:"Anticipation",score:.1,source:"text",confidence:"low"}];const Oe=ze.toLowerCase(),We={joy:{directKeywords:["happy","joy","excited","delighted","pleased","cheerful","elated","thrilled","content","satisfied","glad","upbeat","positive","optimistic","wonderful","amazing","fantastic","great","excellent","love","like","enjoy","brilliant","awesome","superb"],contextPhrases:["feeling great","so happy","really excited","absolutely love","makes me happy","feeling good","going well","turned out great","exceeded expectations"],intensifiers:["very","extremely","absolutely","incredibly","really","so","totally","completely"],negators:["not","never","hardly","barely","dont","cant"],weight:1},sadness:{directKeywords:["sad","unhappy","depressed","melancholy","gloomy","sorrowful","grief","mourning","disappointed","dejected","downcast","blue","miserable","heartbroken","despair","hopeless","terrible","awful","bad","horrible","devastating","crushed"],contextPhrases:["feeling down","so sad","really disappointed","makes me cry","brings tears","heart breaks","feeling low","went wrong","didnt work out"],intensifiers:["very","extremely","deeply","incredibly","really","so","totally","completely"],negators:["not","never","hardly","barely","dont","wont"],weight:1},anger:{directKeywords:["angry","furious","rage","mad","irritated","annoyed","frustrated","outraged","livid","irate","hostile","resentful","bitter","indignant","hate","dislike","disgusted","appalled","infuriated","pissed","enraged"],contextPhrases:["makes me angry","so mad","really hate","pissed off","fed up","sick of","had enough","cant stand","drives me crazy"],intensifiers:["very","extremely","absolutely","incredibly","really","so","totally","completely"],negators:["not","never","hardly","barely","dont","wont"],weight:1.2},fear:{directKeywords:["afraid","scared","fearful","terrified","anxious","worried","nervous","concerned","apprehensive","uneasy","troubled","disturbed","alarmed","panic","stress","tension","uncertainty","doubt","frightened","intimidated"],contextPhrases:["feeling anxious","so worried","really scared","makes me nervous","stressed out","panic attack","afraid that","worried about"],intensifiers:["very","extremely","really","incredibly","so","totally","completely"],negators:["not","never","hardly","barely","dont","wont"],weight:1.1},trust:{directKeywords:["trust","confident","reliable","dependable","faithful","loyal","honest","truthful","sincere","genuine","authentic","credible","believable","secure","safe","certain","sure","professional","competent","capable"],contextPhrases:["feel confident","trust in","believe in","have faith","can count on","rely on","sure about","confident that"],intensifiers:["very","extremely","absolutely","completely","totally","fully"],negators:["not","never","hardly","barely","dont","cant"],weight:.9},surprise:{directKeywords:["surprised","amazed","astonished","shocked","stunned","bewildered","confused","puzzled","unexpected","sudden","remarkable","extraordinary","incredible","unbelievable","wow","omg","unreal"],contextPhrases:["cant believe","never expected","what a surprise","blown away","caught off guard","didnt see coming"],intensifiers:["very","extremely","absolutely","incredibly","really","so","totally"],negators:["not","never","hardly","barely"],weight:.8},anticipation:{directKeywords:["excited","eager","enthusiastic","hopeful","optimistic","looking forward","expecting","anticipating","ready","prepared","motivated","determined","ambitious","goal","plan","future","upcoming","next"],contextPhrases:["looking forward to","cant wait","excited about","hoping for","planning to","ready for","eager to"],intensifiers:["very","extremely","really","so","incredibly"],negators:["not","never","hardly","barely","dont"],weight:.9},disgust:{directKeywords:["disgusted","revolted","repulsed","sickened","nauseated","appalled","horrified","offended","distasteful","unpleasant","awful","terrible","gross","yuck","disgusting","revolting"],contextPhrases:["makes me sick","so disgusting","cant stand","absolutely disgusted","totally gross"],intensifiers:["very","extremely","absolutely","incredibly","really","so","totally"],negators:["not","never","hardly","barely"],weight:1}};let ot={};if(Object.entries(We).forEach(([It,er])=>{let cr=0,Tr=[];er.directKeywords.forEach(Ft=>{const pt=new RegExp(`\\b${Ft}\\b`,"gi"),Zt=(Oe.match(pt)||[]).length;Zt>0&&(cr+=Zt*er.weight,Tr.push(`keyword: ${Ft} (${Zt}x)`),Oe.indexOf(Ft)<50&&(cr+=.3))}),er.contextPhrases.forEach(Ft=>{Oe.includes(Ft)&&(cr+=er.weight*2,Tr.push(`phrase: ${Ft}`))});let xr=0;er.intensifiers.forEach(Ft=>{er.directKeywords.forEach(pt=>{[`${Ft} ${pt}`,`${pt} ${Ft}`,`${Ft}ly ${pt}`,`so ${pt}`,`really ${pt}`].forEach(Jt=>{Oe.includes(Jt)&&(xr+=1,Tr.push(`intensified: ${Jt}`))})})}),cr+=xr;let lt=0;er.negators.forEach(Ft=>{er.directKeywords.forEach(pt=>{[`${Ft} ${pt}`,`${Ft} feeling ${pt}`,`${Ft} really ${pt}`,`${Ft} very ${pt}`].forEach(Jt=>{Oe.includes(Jt)&&(lt+=cr*.8,Tr.push(`negated: ${Jt}`))})})}),cr=Math.max(0,cr-lt);const gt=ze.split(/[.!?]+/).filter(Ft=>Ft.trim().length>0);if(gt.length>1){let Ft=0;gt.forEach(pt=>{const Zt=pt.toLowerCase();er.directKeywords.some(Jt=>Zt.includes(Jt))&&Ft++}),Ft>1&&(cr+=(Ft-1)*.7,Tr.push(`multi-sentence consistency (${Ft})`))}ot[It]={score:cr,evidence:Tr,confidence:Math.min(95,Math.max(10,cr*15))}}),Object.values(ot).reduce((It,er)=>It+er.score,0)===0){ze.split(/\s+/).length;const It=ze.includes("?"),er=/will|going to|plan to|expect|hope/.test(Oe);return It?[{label:"Curiosity",score:.5,source:"text",confidence:"medium"},{label:"Neutral",score:.35,source:"text",confidence:"medium"},{label:"Anticipation",score:.15,source:"text",confidence:"low"}]:er?[{label:"Anticipation",score:.45,source:"text",confidence:"medium"},{label:"Neutral",score:.4,source:"text",confidence:"medium"},{label:"Trust",score:.15,source:"text",confidence:"low"}]:[{label:"Neutral",score:.65,source:"text",confidence:"medium"},{label:"Trust",score:.25,source:"text",confidence:"low"},{label:"Anticipation",score:.1,source:"text",confidence:"low"}]}const Rt=Object.entries(ot).map(([It,er])=>({label:It.charAt(0).toUpperCase()+It.slice(1),score:er.score,source:"text",confidence:er.confidence>70?"high":er.confidence>40?"medium":"low",evidence:er.evidence})).filter(It=>It.score>.1).sort((It,er)=>er.score-It.score).slice(0,6),wt=Rt.reduce((It,er)=>It+er.score,0);for(wt>0&&Rt.forEach(It=>{It.score=It.score/wt});Rt.length<3;)Rt.push({label:"Neutral",score:.1/Rt.length,source:"text",confidence:"low"});return Rt},Ye=ze=>ze>=.8?"#10B981":ze>=.6?"#F59E0B":"#EF4444",qe=ze=>{switch(ze.toLowerCase()){case"positive":return"#10B981";case"negative":return"#EF4444";case"neutral":return"#6B7280";default:return"#8B5CF6"}};return o.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"15px",padding:"25px",color:"white",marginBottom:"25px",boxShadow:"0 10px 30px rgba(0,0,0,0.1)"},children:[o.jsx("h1",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:"🧠 BERT Summary & Insights"}),o.jsx("p",{style:{margin:"10px 0 0 0",opacity:.9},children:"Advanced AI-powered analysis combining BERT text analysis with comprehensive insights"}),o.jsxs("div",{style:{marginTop:"15px",fontSize:"0.9rem",opacity:.8},children:["Text Length: ",t?t.length:0," characters"]})]}),t?o.jsxs("div",{children:[o.jsx("div",{style:{display:"flex",gap:"5px",marginBottom:"20px",background:"white",borderRadius:"10px",padding:"5px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:["summary","insights","sentiment"].map(ze=>o.jsxs("button",{onClick:()=>s(ze),style:{flex:1,padding:"12px 20px",border:"none",borderRadius:"8px",background:a===ze?"#667eea":"transparent",color:a===ze?"white":"#6B7280",cursor:"pointer",fontSize:"0.9rem",fontWeight:a===ze?"600":"400",transition:"all 0.2s"},children:[ze==="summary"&&"📊 Summary",ze==="insights"&&"💡 Insights",ze==="sentiment"&&"😊 Sentiment"]},ze))}),n&&o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"40px",textAlign:"center",marginBottom:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"15px"},children:"🧠"}),o.jsx("h3",{style:{color:"#374151",marginBottom:"10px"},children:"Analyzing Content..."}),o.jsx("p",{style:{color:"#6B7280"},children:"BERT is processing your text for comprehensive insights"}),o.jsx("div",{style:{width:"100%",height:"4px",background:"#E5E7EB",borderRadius:"2px",overflow:"hidden",marginTop:"20px"},children:o.jsx("div",{style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #667eea, #764ba2)",animation:"pulse 2s infinite"}})})]}),!n&&e&&o.jsxs("div",{children:[a==="summary"&&o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"25px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0"},children:[o.jsx("h2",{style:{marginBottom:"20px",color:"#374151"},children:"📊 BERT Summary Analysis"}),o.jsxs("div",{style:{background:"#F8FAFC",borderRadius:"10px",padding:"20px",marginBottom:"20px"},children:[o.jsx("h3",{style:{margin:"0 0 15px 0",color:"#374151"},children:"Content Overview"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"15px"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#8B5CF6"},children:e.summary.wordCount}),o.jsx("div",{style:{fontSize:"0.9rem",color:"#6B7280"},children:"Words"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#8B5CF6"},children:e.summary.sentenceCount}),o.jsx("div",{style:{fontSize:"0.9rem",color:"#6B7280"},children:"Sentences"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#8B5CF6"},children:[e.summary.readingTime,"min"]}),o.jsx("div",{style:{fontSize:"0.9rem",color:"#6B7280"},children:"Reading Time"})]})]})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("h3",{style:{marginBottom:"15px",color:"#374151"},children:"AI-Generated Summary"}),o.jsx("div",{style:{background:"#F0FDF4",border:"1px solid #DCFCE7",borderRadius:"8px",padding:"20px"},children:o.jsx("p",{style:{margin:0,lineHeight:"1.6",color:"#374151"},children:e.summary.brief})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{marginBottom:"10px",color:"#374151"},children:"Key Topics"}),o.jsx("div",{style:{background:"#FEF3C7",border:"1px solid #FDE68A",borderRadius:"8px",padding:"15px"},children:o.jsx("p",{style:{margin:0,color:"#92400E"},children:e.summary.keyTopics})})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{marginBottom:"10px",color:"#374151"},children:"Main Theme"}),o.jsx("div",{style:{background:"#EFF6FF",border:"1px solid #DBEAFE",borderRadius:"8px",padding:"15px"},children:o.jsx("p",{style:{margin:0,color:"#1D4ED8"},children:e.summary.mainTheme})})]})]})]}),a==="insights"&&o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"25px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0"},children:[o.jsx("h2",{style:{marginBottom:"20px",color:"#374151"},children:"💡 Key Insights"}),o.jsx("div",{style:{display:"grid",gap:"15px"},children:e.keyInsights.map((ze,Oe)=>o.jsxs("div",{style:{background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"10px",padding:"20px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[o.jsx("h3",{style:{margin:0,color:"#374151"},children:ze.title}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[o.jsxs("span",{style:{fontSize:"0.8rem",color:Ye(ze.confidence),fontWeight:"bold"},children:[Math.round(ze.confidence*100),"%"]}),o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Ye(ze.confidence)}})]})]}),o.jsx("p",{style:{margin:0,color:"#6B7280",lineHeight:"1.5"},children:ze.content}),o.jsxs("div",{style:{marginTop:"10px",fontSize:"0.8rem",color:"#9CA3AF"},children:["Source: ",ze.type]})]},Oe))})]}),a==="sentiment"&&o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"25px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0"},children:[o.jsx("h2",{style:{marginBottom:"20px",color:"#374151"},children:"😊 Text-Based Sentiment Analysis"}),o.jsxs("div",{style:{background:"#F3F4F6",borderRadius:"10px",padding:"20px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[o.jsxs("div",{children:[o.jsxs("h3",{style:{margin:"0 0 5px 0",color:"#374151"},children:["Text Sentiment: ",e.textSentiment.overall]}),o.jsxs("p",{style:{margin:0,color:"#6B7280"},children:["Confidence: ",Math.round(e.textSentiment.confidence*100),"%"]}),o.jsxs("p",{style:{margin:"5px 0 0 0",color:"#6B7280"},children:["Score: ",e.textSentiment.score," (Range: -1 to +1)"]}),o.jsx("p",{style:{margin:"10px 0 0 0",fontSize:"0.9rem",color:"#8B5CF6"},children:"📝 Based on word choice, language patterns, and semantic analysis"})]}),o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:qe(e.textSentiment.overall),display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"1.2rem"},children:e.textSentiment.overall==="Positive"?"😊":e.textSentiment.overall==="Negative"?"😔":"😐"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("h3",{style:{marginBottom:"15px",color:"#374151"},children:"Text-Based Emotion Detection"}),o.jsx("div",{style:{display:"grid",gap:"10px"},children:e.textEmotions.map((ze,Oe)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px",background:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[o.jsxs("span",{style:{color:"#374151",fontWeight:"500"},children:["📝 ",ze.label]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"100px",height:"6px",background:"#E5E7EB",borderRadius:"3px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${ze.score*100}%`,height:"100%",background:"#8B5CF6",borderRadius:"3px"}})}),o.jsxs("span",{style:{color:"#6B7280",fontSize:"0.9rem",minWidth:"40px",textAlign:"right"},children:[Math.round(ze.score*100),"%"]})]})]},Oe))})]})]})]})]}):o.jsxs("div",{style:{textAlign:"center",padding:"60px",background:"white",borderRadius:"15px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)"},children:[o.jsx("div",{style:{fontSize:"4rem",color:"#9CA3AF",marginBottom:"20px"},children:"📝"}),o.jsx("h2",{style:{color:"#6B7280"},children:"No Text Available"}),o.jsx("p",{style:{color:"#9CA3AF"},children:"Please provide some text content to analyze"})]})]})};var T5={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Q2,function(){function r(lt,gt,Ft){for(var pt,Zt=0,Jt=gt.length;Zt<Jt;Zt++)!pt&&Zt in gt||(pt||(pt=Array.prototype.slice.call(gt,0,Zt)),pt[Zt]=gt[Zt]);return lt.concat(pt||Array.prototype.slice.call(gt))}var n=Object.freeze({__proto__:null,blackman:function(lt){for(var gt=new Float32Array(lt),Ft=2*Math.PI/(lt-1),pt=2*Ft,Zt=0;Zt<lt/2;Zt++)gt[Zt]=.42-.5*Math.cos(Zt*Ft)+.08*Math.cos(Zt*pt);for(Zt=Math.ceil(lt/2);Zt>0;Zt--)gt[lt-Zt]=gt[Zt-1];return gt},hamming:function(lt){for(var gt=new Float32Array(lt),Ft=0;Ft<lt;Ft++)gt[Ft]=.54-.46*Math.cos(2*Math.PI*(Ft/lt-1));return gt},hanning:function(lt){for(var gt=new Float32Array(lt),Ft=0;Ft<lt;Ft++)gt[Ft]=.5-.5*Math.cos(2*Math.PI*Ft/(lt-1));return gt},sine:function(lt){for(var gt=Math.PI/(lt-1),Ft=new Float32Array(lt),pt=0;pt<lt;pt++)Ft[pt]=Math.sin(gt*pt);return Ft}}),i={};function a(lt){for(;lt%2==0&&lt>1;)lt/=2;return lt===1}function s(lt,gt){if(gt!=="rect"){if(gt!==""&&gt||(gt="hanning"),i[gt]||(i[gt]={}),!i[gt][lt.length])try{i[gt][lt.length]=n[gt](lt.length)}catch{throw new Error("Invalid windowing function")}lt=function(Ft,pt){for(var Zt=[],Jt=0;Jt<Math.min(Ft.length,pt.length);Jt++)Zt[Jt]=Ft[Jt]*pt[Jt];return Zt}(lt,i[gt][lt.length])}return lt}function d(lt,gt,Ft){for(var pt=new Float32Array(lt),Zt=0;Zt<pt.length;Zt++)pt[Zt]=Zt*gt/Ft,pt[Zt]=13*Math.atan(pt[Zt]/1315.8)+3.5*Math.atan(Math.pow(pt[Zt]/7518,2));return pt}function _(lt){return Float32Array.from(lt)}function N(lt){return 1125*Math.log(1+lt/700)}function I(lt,gt,Ft){for(var pt,Zt=new Float32Array(lt+2),Jt=new Float32Array(lt+2),lr=gt/2,wr=N(0),Sr=(N(lr)-wr)/(lt+1),vr=new Array(lt+2),Bt=0;Bt<Zt.length;Bt++)Zt[Bt]=Bt*Sr,Jt[Bt]=(pt=Zt[Bt],700*(Math.exp(pt/1125)-1)),vr[Bt]=Math.floor((Ft+1)*Jt[Bt]/gt);for(var yr=new Array(lt),dr=0;dr<yr.length;dr++){for(yr[dr]=new Array(Ft/2+1).fill(0),Bt=vr[dr];Bt<vr[dr+1];Bt++)yr[dr][Bt]=(Bt-vr[dr])/(vr[dr+1]-vr[dr]);for(Bt=vr[dr+1];Bt<vr[dr+2];Bt++)yr[dr][Bt]=(vr[dr+2]-Bt)/(vr[dr+2]-vr[dr+1])}return yr}function ye(lt,gt,Ft,pt,Zt,Jt,lr){pt===void 0&&(pt=5),Zt===void 0&&(Zt=2),Jt===void 0&&(Jt=!0),lr===void 0&&(lr=440);var wr=Math.floor(Ft/2)+1,Sr=new Array(Ft).fill(0).map(function(Rn,Fn){return lt*function(In,sa){return Math.log2(16*In/sa)}(gt*Fn/Ft,lr)});Sr[0]=Sr[1]-1.5*lt;var vr,Bt,yr,dr=Sr.slice(1).map(function(Rn,Fn){return Math.max(Rn-Sr[Fn])},1).concat([1]),Pr=Math.round(lt/2),Hr=new Array(lt).fill(0).map(function(Rn,Fn){return Sr.map(function(In){return(10*lt+Pr+In-Fn)%lt-Pr})}),Wr=Hr.map(function(Rn,Fn){return Rn.map(function(In,sa){return Math.exp(-.5*Math.pow(2*Hr[Fn][sa]/dr[sa],2))})});if(Bt=(vr=Wr)[0].map(function(){return 0}),yr=vr.reduce(function(Rn,Fn){return Fn.forEach(function(In,sa){Rn[sa]+=Math.pow(In,2)}),Rn},Bt).map(Math.sqrt),Wr=vr.map(function(Rn,Fn){return Rn.map(function(In,sa){return In/(yr[sa]||1)})}),Zt){var Pn=Sr.map(function(Rn){return Math.exp(-.5*Math.pow((Rn/lt-pt)/Zt,2))});Wr=Wr.map(function(Rn){return Rn.map(function(Fn,In){return Fn*Pn[In]})})}return Jt&&(Wr=r(r([],Wr.slice(3),!0),Wr.slice(0,3))),Wr.map(function(Rn){return Rn.slice(0,wr)})}function xe(lt,gt){for(var Ft=0,pt=0,Zt=0;Zt<gt.length;Zt++)Ft+=Math.pow(Zt,lt)*Math.abs(gt[Zt]),pt+=gt[Zt];return Ft/pt}function Ce(lt){var gt=lt.ampSpectrum,Ft=lt.barkScale,pt=lt.numberOfBarkBands,Zt=pt===void 0?24:pt;if(typeof gt!="object"||typeof Ft!="object")throw new TypeError;var Jt=Zt,lr=new Float32Array(Jt),wr=0,Sr=gt,vr=new Int32Array(Jt+1);vr[0]=0;for(var Bt=Ft[Sr.length-1]/Jt,yr=1,dr=0;dr<Sr.length;dr++)for(;Ft[dr]>Bt;)vr[yr++]=dr,Bt=yr*Ft[Sr.length-1]/Jt;for(vr[Jt]=Sr.length-1,dr=0;dr<Jt;dr++){for(var Pr=0,Hr=vr[dr];Hr<vr[dr+1];Hr++)Pr+=Sr[Hr];lr[dr]=Math.pow(Pr,.23)}for(dr=0;dr<lr.length;dr++)wr+=lr[dr];return{specific:lr,total:wr}}function Ve(lt){var gt=lt.ampSpectrum;if(typeof gt!="object")throw new TypeError;for(var Ft=new Float32Array(gt.length),pt=0;pt<Ft.length;pt++)Ft[pt]=Math.pow(gt[pt],2);return Ft}function Ye(lt){var gt=lt.ampSpectrum,Ft=lt.melFilterBank,pt=lt.bufferSize;if(typeof gt!="object")throw new TypeError("Valid ampSpectrum is required to generate melBands");if(typeof Ft!="object")throw new TypeError("Valid melFilterBank is required to generate melBands");for(var Zt=Ve({ampSpectrum:gt}),Jt=Ft.length,lr=Array(Jt),wr=new Float32Array(Jt),Sr=0;Sr<wr.length;Sr++){lr[Sr]=new Float32Array(pt/2),wr[Sr]=0;for(var vr=0;vr<pt/2;vr++)lr[Sr][vr]=Ft[Sr][vr]*Zt[vr],wr[Sr]+=lr[Sr][vr];wr[Sr]=Math.log(wr[Sr]+1)}return Array.prototype.slice.call(wr)}function qe(lt){return lt&&lt.__esModule&&Object.prototype.hasOwnProperty.call(lt,"default")?lt.default:lt}var ze=null,Oe=qe(function(lt,gt){var Ft=lt.length;return gt=gt||2,ze&&ze[Ft]||function(pt){(ze=ze||{})[pt]=new Array(pt*pt);for(var Zt=Math.PI/pt,Jt=0;Jt<pt;Jt++)for(var lr=0;lr<pt;lr++)ze[pt][lr+Jt*pt]=Math.cos(Zt*(lr+.5)*Jt)}(Ft),lt.map(function(){return 0}).map(function(pt,Zt){return gt*lt.reduce(function(Jt,lr,wr,Sr){return Jt+lr*ze[Ft][wr+Zt*Ft]},0)})}),We=Object.freeze({__proto__:null,amplitudeSpectrum:function(lt){return lt.ampSpectrum},buffer:function(lt){return lt.signal},chroma:function(lt){var gt=lt.ampSpectrum,Ft=lt.chromaFilterBank;if(typeof gt!="object")throw new TypeError("Valid ampSpectrum is required to generate chroma");if(typeof Ft!="object")throw new TypeError("Valid chromaFilterBank is required to generate chroma");var pt=Ft.map(function(Jt,lr){return gt.reduce(function(wr,Sr,vr){return wr+Sr*Jt[vr]},0)}),Zt=Math.max.apply(Math,pt);return Zt?pt.map(function(Jt){return Jt/Zt}):pt},complexSpectrum:function(lt){return lt.complexSpectrum},energy:function(lt){var gt=lt.signal;if(typeof gt!="object")throw new TypeError;for(var Ft=0,pt=0;pt<gt.length;pt++)Ft+=Math.pow(Math.abs(gt[pt]),2);return Ft},loudness:Ce,melBands:Ye,mfcc:function(lt){var gt=lt.ampSpectrum,Ft=lt.melFilterBank,pt=lt.numberOfMFCCCoefficients,Zt=lt.bufferSize,Jt=Math.min(40,Math.max(1,pt||13));if(Ft.length<Jt)throw new Error("Insufficient filter bank for requested number of coefficients");var lr=Ye({ampSpectrum:gt,melFilterBank:Ft,bufferSize:Zt});return Oe(lr).slice(0,Jt)},perceptualSharpness:function(lt){for(var gt=Ce({ampSpectrum:lt.ampSpectrum,barkScale:lt.barkScale}),Ft=gt.specific,pt=0,Zt=0;Zt<Ft.length;Zt++)pt+=Zt<15?(Zt+1)*Ft[Zt+1]:.066*Math.exp(.171*(Zt+1));return pt*=.11/gt.total},perceptualSpread:function(lt){for(var gt=Ce({ampSpectrum:lt.ampSpectrum,barkScale:lt.barkScale}),Ft=0,pt=0;pt<gt.specific.length;pt++)gt.specific[pt]>Ft&&(Ft=gt.specific[pt]);return Math.pow((gt.total-Ft)/gt.total,2)},powerSpectrum:Ve,rms:function(lt){var gt=lt.signal;if(typeof gt!="object")throw new TypeError;for(var Ft=0,pt=0;pt<gt.length;pt++)Ft+=Math.pow(gt[pt],2);return Ft/=gt.length,Ft=Math.sqrt(Ft)},spectralCentroid:function(lt){var gt=lt.ampSpectrum;if(typeof gt!="object")throw new TypeError;return xe(1,gt)},spectralCrest:function(lt){var gt=lt.ampSpectrum;if(typeof gt!="object")throw new TypeError;var Ft=0,pt=-1/0;return gt.forEach(function(Zt){Ft+=Math.pow(Zt,2),pt=Zt>pt?Zt:pt}),Ft/=gt.length,Ft=Math.sqrt(Ft),pt/Ft},spectralFlatness:function(lt){var gt=lt.ampSpectrum;if(typeof gt!="object")throw new TypeError;for(var Ft=0,pt=0,Zt=0;Zt<gt.length;Zt++)Ft+=Math.log(gt[Zt]),pt+=gt[Zt];return Math.exp(Ft/gt.length)*gt.length/pt},spectralFlux:function(lt){var gt=lt.signal,Ft=lt.previousSignal,pt=lt.bufferSize;if(typeof gt!="object"||typeof Ft!="object")throw new TypeError;for(var Zt=0,Jt=-pt/2;Jt<gt.length/2-1;Jt++)x=Math.abs(gt[Jt])-Math.abs(Ft[Jt]),Zt+=(x+Math.abs(x))/2;return Zt},spectralKurtosis:function(lt){var gt=lt.ampSpectrum;if(typeof gt!="object")throw new TypeError;var Ft=gt,pt=xe(1,Ft),Zt=xe(2,Ft),Jt=xe(3,Ft),lr=xe(4,Ft);return(-3*Math.pow(pt,4)+6*pt*Zt-4*pt*Jt+lr)/Math.pow(Math.sqrt(Zt-Math.pow(pt,2)),4)},spectralRolloff:function(lt){var gt=lt.ampSpectrum,Ft=lt.sampleRate;if(typeof gt!="object")throw new TypeError;for(var pt=gt,Zt=Ft/(2*(pt.length-1)),Jt=0,lr=0;lr<pt.length;lr++)Jt+=pt[lr];for(var wr=.99*Jt,Sr=pt.length-1;Jt>wr&&Sr>=0;)Jt-=pt[Sr],--Sr;return(Sr+1)*Zt},spectralSkewness:function(lt){var gt=lt.ampSpectrum;if(typeof gt!="object")throw new TypeError;var Ft=xe(1,gt),pt=xe(2,gt),Zt=xe(3,gt);return(2*Math.pow(Ft,3)-3*Ft*pt+Zt)/Math.pow(Math.sqrt(pt-Math.pow(Ft,2)),3)},spectralSlope:function(lt){var gt=lt.ampSpectrum,Ft=lt.sampleRate,pt=lt.bufferSize;if(typeof gt!="object")throw new TypeError;for(var Zt=0,Jt=0,lr=new Float32Array(gt.length),wr=0,Sr=0,vr=0;vr<gt.length;vr++){Zt+=gt[vr];var Bt=vr*Ft/pt;lr[vr]=Bt,wr+=Bt*Bt,Jt+=Bt,Sr+=Bt*gt[vr]}return(gt.length*Sr-Jt*Zt)/(Zt*(wr-Math.pow(Jt,2)))},spectralSpread:function(lt){var gt=lt.ampSpectrum;if(typeof gt!="object")throw new TypeError;return Math.sqrt(xe(2,gt)-Math.pow(xe(1,gt),2))},zcr:function(lt){var gt=lt.signal;if(typeof gt!="object")throw new TypeError;for(var Ft=0,pt=1;pt<gt.length;pt++)(gt[pt-1]>=0&&gt[pt]<0||gt[pt-1]<0&&gt[pt]>=0)&&Ft++;return Ft}});function ot(lt){if(Array.isArray(lt)){for(var gt=0,Ft=Array(lt.length);gt<lt.length;gt++)Ft[gt]=lt[gt];return Ft}return Array.from(lt)}var st={},Rt={},wt={bitReverseArray:function(lt){if(st[lt]===void 0){for(var gt=(lt-1).toString(2).length,Ft="0".repeat(gt),pt={},Zt=0;Zt<lt;Zt++){var Jt=Zt.toString(2);Jt=Ft.substr(Jt.length)+Jt,Jt=[].concat(ot(Jt)).reverse().join(""),pt[Zt]=parseInt(Jt,2)}st[lt]=pt}return st[lt]},multiply:function(lt,gt){return{real:lt.real*gt.real-lt.imag*gt.imag,imag:lt.real*gt.imag+lt.imag*gt.real}},add:function(lt,gt){return{real:lt.real+gt.real,imag:lt.imag+gt.imag}},subtract:function(lt,gt){return{real:lt.real-gt.real,imag:lt.imag-gt.imag}},euler:function(lt,gt){var Ft=-2*Math.PI*lt/gt;return{real:Math.cos(Ft),imag:Math.sin(Ft)}},conj:function(lt){return lt.imag*=-1,lt},constructComplexArray:function(lt){var gt={};gt.real=lt.real===void 0?lt.slice():lt.real.slice();var Ft=gt.real.length;return Rt[Ft]===void 0&&(Rt[Ft]=Array.apply(null,Array(Ft)).map(Number.prototype.valueOf,0)),gt.imag=Rt[Ft].slice(),gt}},It=function(lt){var gt={};lt.real===void 0||lt.imag===void 0?gt=wt.constructComplexArray(lt):(gt.real=lt.real.slice(),gt.imag=lt.imag.slice());var Ft=gt.real.length,pt=Math.log2(Ft);if(Math.round(pt)!=pt)throw new Error("Input size must be a power of 2.");if(gt.real.length!=gt.imag.length)throw new Error("Real and imaginary components must have the same length.");for(var Zt=wt.bitReverseArray(Ft),Jt={real:[],imag:[]},lr=0;lr<Ft;lr++)Jt.real[Zt[lr]]=gt.real[lr],Jt.imag[Zt[lr]]=gt.imag[lr];for(var wr=0;wr<Ft;wr++)gt.real[wr]=Jt.real[wr],gt.imag[wr]=Jt.imag[wr];for(var Sr=1;Sr<=pt;Sr++)for(var vr=Math.pow(2,Sr),Bt=0;Bt<vr/2;Bt++)for(var yr=wt.euler(Bt,vr),dr=0;dr<Ft/vr;dr++){var Pr=vr*dr+Bt,Hr=vr*dr+Bt+vr/2,Wr={real:gt.real[Pr],imag:gt.imag[Pr]},Pn={real:gt.real[Hr],imag:gt.imag[Hr]},Rn=wt.multiply(yr,Pn),Fn=wt.subtract(Wr,Rn);gt.real[Hr]=Fn.real,gt.imag[Hr]=Fn.imag;var In=wt.add(Rn,Wr);gt.real[Pr]=In.real,gt.imag[Pr]=In.imag}return gt},er=It,cr=function(){function lt(gt,Ft){var pt=this;if(this._m=Ft,!gt.audioContext)throw this._m.errors.noAC;if(gt.bufferSize&&!a(gt.bufferSize))throw this._m._errors.notPow2;if(!gt.source)throw this._m._errors.noSource;this._m.audioContext=gt.audioContext,this._m.bufferSize=gt.bufferSize||this._m.bufferSize||256,this._m.hopSize=gt.hopSize||this._m.hopSize||this._m.bufferSize,this._m.sampleRate=gt.sampleRate||this._m.audioContext.sampleRate||44100,this._m.callback=gt.callback,this._m.windowingFunction=gt.windowingFunction||"hanning",this._m.featureExtractors=We,this._m.EXTRACTION_STARTED=gt.startImmediately||!1,this._m.channel=typeof gt.channel=="number"?gt.channel:0,this._m.inputs=gt.inputs||1,this._m.outputs=gt.outputs||1,this._m.numberOfMFCCCoefficients=gt.numberOfMFCCCoefficients||this._m.numberOfMFCCCoefficients||13,this._m.numberOfBarkBands=gt.numberOfBarkBands||this._m.numberOfBarkBands||24,this._m.spn=this._m.audioContext.createScriptProcessor(this._m.bufferSize,this._m.inputs,this._m.outputs),this._m.spn.connect(this._m.audioContext.destination),this._m._featuresToExtract=gt.featureExtractors||[],this._m.barkScale=d(this._m.bufferSize,this._m.sampleRate,this._m.bufferSize),this._m.melFilterBank=I(Math.max(this._m.melBands,this._m.numberOfMFCCCoefficients),this._m.sampleRate,this._m.bufferSize),this._m.inputData=null,this._m.previousInputData=null,this._m.frame=null,this._m.previousFrame=null,this.setSource(gt.source),this._m.spn.onaudioprocess=function(Zt){var Jt;pt._m.inputData!==null&&(pt._m.previousInputData=pt._m.inputData),pt._m.inputData=Zt.inputBuffer.getChannelData(pt._m.channel),pt._m.previousInputData?((Jt=new Float32Array(pt._m.previousInputData.length+pt._m.inputData.length-pt._m.hopSize)).set(pt._m.previousInputData.slice(pt._m.hopSize)),Jt.set(pt._m.inputData,pt._m.previousInputData.length-pt._m.hopSize)):Jt=pt._m.inputData;var lr=function(wr,Sr,vr){if(wr.length<Sr)throw new Error("Buffer is too short for frame length");if(vr<1)throw new Error("Hop length cannot be less that 1");if(Sr<1)throw new Error("Frame length cannot be less that 1");var Bt=1+Math.floor((wr.length-Sr)/vr);return new Array(Bt).fill(0).map(function(yr,dr){return wr.slice(dr*vr,dr*vr+Sr)})}(Jt,pt._m.bufferSize,pt._m.hopSize);lr.forEach(function(wr){pt._m.frame=wr;var Sr=pt._m.extract(pt._m._featuresToExtract,pt._m.frame,pt._m.previousFrame);typeof pt._m.callback=="function"&&pt._m.EXTRACTION_STARTED&&pt._m.callback(Sr),pt._m.previousFrame=pt._m.frame})}}return lt.prototype.start=function(gt){this._m._featuresToExtract=gt||this._m._featuresToExtract,this._m.EXTRACTION_STARTED=!0},lt.prototype.stop=function(){this._m.EXTRACTION_STARTED=!1},lt.prototype.setSource=function(gt){this._m.source&&this._m.source.disconnect(this._m.spn),this._m.source=gt,this._m.source.connect(this._m.spn)},lt.prototype.setChannel=function(gt){gt<=this._m.inputs?this._m.channel=gt:console.error("Channel ".concat(gt," does not exist. Make sure you've provided a value for 'inputs' that is greater than ").concat(gt," when instantiating the MeydaAnalyzer"))},lt.prototype.get=function(gt){return this._m.inputData?this._m.extract(gt||this._m._featuresToExtract,this._m.inputData,this._m.previousInputData):null},lt}(),Tr={audioContext:null,spn:null,bufferSize:512,sampleRate:44100,melBands:26,chromaBands:12,callback:null,windowingFunction:"hanning",featureExtractors:We,EXTRACTION_STARTED:!1,numberOfMFCCCoefficients:13,numberOfBarkBands:24,_featuresToExtract:[],windowing:s,_errors:{notPow2:new Error("Meyda: Buffer size must be a power of 2, e.g. 64 or 512"),featureUndef:new Error("Meyda: No features defined."),invalidFeatureFmt:new Error("Meyda: Invalid feature format"),invalidInput:new Error("Meyda: Invalid input."),noAC:new Error("Meyda: No AudioContext specified."),noSource:new Error("Meyda: No source node specified.")},createMeydaAnalyzer:function(lt){return new cr(lt,Object.assign({},Tr))},listAvailableFeatureExtractors:function(){return Object.keys(this.featureExtractors)},extract:function(lt,gt,Ft){var pt=this;if(!gt)throw this._errors.invalidInput;if(typeof gt!="object")throw this._errors.invalidInput;if(!lt)throw this._errors.featureUndef;if(!a(gt.length))throw this._errors.notPow2;this.barkScale!==void 0&&this.barkScale.length==this.bufferSize||(this.barkScale=d(this.bufferSize,this.sampleRate,this.bufferSize)),this.melFilterBank!==void 0&&this.barkScale.length==this.bufferSize&&this.melFilterBank.length==this.melBands||(this.melFilterBank=I(Math.max(this.melBands,this.numberOfMFCCCoefficients),this.sampleRate,this.bufferSize)),this.chromaFilterBank!==void 0&&this.chromaFilterBank.length==this.chromaBands||(this.chromaFilterBank=ye(this.chromaBands,this.sampleRate,this.bufferSize)),"buffer"in gt&&gt.buffer===void 0?this.signal=_(gt):this.signal=gt;var Zt=xr(gt,this.windowingFunction,this.bufferSize);if(this.signal=Zt.windowedSignal,this.complexSpectrum=Zt.complexSpectrum,this.ampSpectrum=Zt.ampSpectrum,Ft){var Jt=xr(Ft,this.windowingFunction,this.bufferSize);this.previousSignal=Jt.windowedSignal,this.previousComplexSpectrum=Jt.complexSpectrum,this.previousAmpSpectrum=Jt.ampSpectrum}var lr=function(wr){return pt.featureExtractors[wr]({ampSpectrum:pt.ampSpectrum,chromaFilterBank:pt.chromaFilterBank,complexSpectrum:pt.complexSpectrum,signal:pt.signal,bufferSize:pt.bufferSize,sampleRate:pt.sampleRate,barkScale:pt.barkScale,melFilterBank:pt.melFilterBank,previousSignal:pt.previousSignal,previousAmpSpectrum:pt.previousAmpSpectrum,previousComplexSpectrum:pt.previousComplexSpectrum,numberOfMFCCCoefficients:pt.numberOfMFCCCoefficients,numberOfBarkBands:pt.numberOfBarkBands})};if(typeof lt=="object")return lt.reduce(function(wr,Sr){var vr;return Object.assign({},wr,((vr={})[Sr]=lr(Sr),vr))},{});if(typeof lt=="string")return lr(lt);throw this._errors.invalidFeatureFmt}},xr=function(lt,gt,Ft){var pt={};lt.buffer===void 0?pt.signal=_(lt):pt.signal=lt,pt.windowedSignal=s(pt.signal,gt),pt.complexSpectrum=er(pt.windowedSignal),pt.ampSpectrum=new Float32Array(Ft/2);for(var Zt=0;Zt<Ft/2;Zt++)pt.ampSpectrum[Zt]=Math.sqrt(Math.pow(pt.complexSpectrum.real[Zt],2)+Math.pow(pt.complexSpectrum.imag[Zt],2));return pt};return typeof window<"u"&&(window.Meyda=Tr),Tr})})(T5);var F9=T5.exports;const bo=Zp(F9);function eg(t){const e=t.sampleRate||44100,r=t.getChannelData(0),n=Math.min(2048,r.length),i=Math.max(0,Math.floor((r.length-n)/2)),a=r.subarray(i,i+n),s=new Float32Array(n);for(let ot=0;ot<n;ot++){let st=0;for(let Rt=0;Rt<n-ot;Rt++)st+=a[Rt]*a[Rt+ot];s[ot]=st}const d=80,_=1e3,N=Math.floor(e/_),I=Math.floor(e/d);let ye=-1,xe=-1/0;for(let ot=N;ot<=Math.min(I,n-1);ot++)s[ot]>xe&&(xe=s[ot],ye=ot);if(ye<=0)return 0;const Ce=s[ye-1]||0,Ve=s[ye]||0,Ye=s[ye+1]||0,qe=Ce-2*Ve+Ye;let ze=0;qe!==0&&(ze=.5*(Ce-Ye)/qe);const Oe=ye+ze,We=e/Oe;return!isFinite(We)||We<d||We>_?0:Math.round(We)}async function I9(t,e){const r=await Mo(()=>import("./index-BHGHb4RF.js"),__vite__mapDeps([0,1])),n=r.sequential();return n.add(r.layers.dense({inputShape:[t],units:64,activation:"relu"})),n.add(r.layers.dropout({rate:.3})),n.add(r.layers.dense({units:32,activation:"relu"})),n.add(r.layers.dropout({rate:.2})),n.add(r.layers.dense({units:e,activation:"softmax"})),n.compile({optimizer:r.train.adam(.001),loss:"categoricalCrossentropy",metrics:["accuracy"]}),n}function O9(t,e,r=13){const n=[],i=[];t.forEach(I=>{const ye=I.voiceFeatures||I,xe=[];xe.push(ye.pitch||0),xe.push(ye.volume||0),xe.push(ye.spectralCentroid||0);const Ce=ye.mfccMeans||[];for(let ze=0;ze<r;ze++)xe.push(Ce[ze]||0);n.push(xe);const Ve=I.emotion||ye.emotion||"neutral",Ye=e[Ve]||0,qe=new Array(Object.keys(e).length).fill(0);qe[Ye]=1,i.push(qe)});const a=n[0]?n[0].length:0,s=new Array(a).fill(0),d=new Array(a).fill(0),_=n.length||1;for(let I=0;I<a;I++){let ye=0;for(let xe=0;xe<_;xe++)ye+=n[xe][I]||0;s[I]=ye/_}for(let I=0;I<a;I++){let ye=0;for(let xe=0;xe<_;xe++){const Ce=(n[xe][I]||0)-s[I];ye+=Ce*Ce}d[I]=Math.sqrt(ye/Math.max(1,_)),d[I]===0&&(d[I]=1)}return{xs:n.map(I=>I.map((ye,xe)=>((ye||0)-s[xe])/d[xe])),ys:i,norm:{means:s,stds:d}}}async function B9(t,e,r=30,n=16,i){const a=await Mo(()=>import("./index-BHGHb4RF.js"),__vite__mapDeps([0,1]));let s,d;Array.isArray(e.xs)?s=a.tensor2d(e.xs):s=e.xs,Array.isArray(e.ys)?d=a.tensor2d(e.ys):d=e.ys;const _=await t.fit(s,d,{epochs:r,batchSize:n,shuffle:!0,callbacks:i?{onEpochEnd:i}:void 0});try{s.dispose&&s.dispose(),d.dispose&&d.dispose()}catch{}return _}async function H9(t,e="local-voice-model"){await Mo(()=>import("./index-BHGHb4RF.js"),__vite__mapDeps([0,1])),await t.save(`localstorage://${e}`)}async function A5(t="local-voice-model"){try{return await(await Mo(()=>import("./index-BHGHb4RF.js"),__vite__mapDeps([0,1]))).loadLayersModel(`localstorage://${t}`)}catch{return null}}function W9({bertScores:t={},voiceScores:e={},spectralScores:r={},textScores:n={}}){const i={bert:.45,voice:.25,spectral:.15,text:.15},a=Array.from(new Set([...Object.keys(t),...Object.keys(e),...Object.keys(r),...Object.keys(n)])),s={};a.forEach(I=>{s[I]=i.bert*(t[I]||0)+i.voice*(e[I]||0)+i.spectral*(r[I]||0)+i.text*(n[I]||0)});const d=(e.anger||0)>.7,_=(n.anger||0)>.4,N=(r.spectralCentroid||0)>.6;return d&&!_&&!N&&(s.anger=Math.min(s.anger*.35,.4)),Object.keys(s).forEach(I=>{s[I]=Math.max(0,Math.min(1,s[I]))}),s}class q9{constructor(){this.dbName="VoiceEmotionTraining",this.dbVersion=1,this.db=null,this.initPromise=this.initDatabase()}async initDatabase(){return new Promise((e,r)=>{const n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>r(n.error),n.onsuccess=()=>{this.db=n.result,e(this.db)},n.onupgradeneeded=i=>{const a=i.target.result;if(!a.objectStoreNames.contains("voiceSamples")){const s=a.createObjectStore("voiceSamples",{keyPath:"id"});s.createIndex("emotion","emotion",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1})}a.objectStoreNames.contains("trainingMeta")||a.createObjectStore("trainingMeta",{keyPath:"id"})}})}async saveVoiceSample(e,r,n,i){await this.initPromise;const a={id:`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,emotion:e,timestamp:new Date().toISOString(),audioBlob:r,voiceFeatures:n,transcript:i,verified:!0,accuracy:null,uploadStatus:"pending"};return new Promise((s,d)=>{const I=this.db.transaction(["voiceSamples"],"readwrite").objectStore("voiceSamples").add(a);I.onsuccess=()=>s(a),I.onerror=()=>d(I.error)})}async updateUploadStatus(e,r){return await this.initPromise,new Promise((n,i)=>{const s=this.db.transaction(["voiceSamples"],"readwrite").objectStore("voiceSamples"),d=s.get(e);d.onsuccess=()=>{const _=d.result;if(!_)return n(!1);_.uploadStatus=r;const N=s.put(_);N.onsuccess=()=>n(!0),N.onerror=()=>i(N.error)},d.onerror=()=>i(d.error)})}async getSamplesByUploadStatus(e){return await this.initPromise,(await this.getVoiceSamples()).filter(n=>n.uploadStatus===e)}async getVoiceSamples(e=null){return await this.initPromise,new Promise((r,n)=>{const a=this.db.transaction(["voiceSamples"],"readonly").objectStore("voiceSamples");let s;e?s=a.index("emotion").getAll(e):s=a.getAll(),s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})}async deleteVoiceSample(e){return await this.initPromise,new Promise((r,n)=>{const s=this.db.transaction(["voiceSamples"],"readwrite").objectStore("voiceSamples").delete(e);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async clearAllSamples(e=null){if(await this.initPromise,e){const n=(await this.getVoiceSamples(e)).map(i=>this.deleteVoiceSample(i.id));return Promise.all(n)}else return new Promise((r,n)=>{const s=this.db.transaction(["voiceSamples"],"readwrite").objectStore("voiceSamples").clear();s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}}class V9{constructor(){this.voiceStorage=new q9,this.trainingData=this.loadTrainingData(),this.modelWeights=this.loadModelWeights(),this.userCalibration=this.loadUserCalibration(),this.sessionStats=this.loadSessionStats()}loadTrainingData(){const e=localStorage.getItem("voiceEmotionTrainingData_v2");return e?JSON.parse(e):{happy:[],sad:[],angry:[],excited:[],calm:[],nervous:[],confident:[],surprised:[],neutral:[],frustrated:[],fear:[],joy:[]}}loadModelWeights(){const e=localStorage.getItem("voiceEmotionModelWeights_v2");return e?JSON.parse(e):{pitch:{happy:1.2,sad:1.1,angry:1.3,excited:1.4,calm:1,nervous:.8,confident:1.1,surprised:1.3,neutral:1,frustrated:1.1,fear:1.2,joy:1.3},volume:{happy:1.1,sad:1.2,angry:1.4,excited:1.3,calm:1,nervous:.7,confident:1.2,surprised:1.2,neutral:1,frustrated:1.1,fear:1.1,joy:1.2},spectral:{happy:1.1,sad:1,angry:1.3,excited:1.2,calm:1,nervous:.8,confident:1.1,surprised:1.2,neutral:1,frustrated:1,fear:1.1,joy:1.2},keyword:{happy:1,sad:1,angry:1.2,excited:1.1,calm:1,nervous:.9,confident:1.1,surprised:1,neutral:1,frustrated:1,fear:1.1,joy:1.1}}}loadUserCalibration(){const e=localStorage.getItem("voiceEmotionUserCalibration");return e?JSON.parse(e):{baselinePitch:150,baselineVolume:.3,pitchRange:{min:80,max:400},volumeRange:{min:.1,max:.9},lastCalibrated:null,samplesCount:0}}loadSessionStats(){const e=localStorage.getItem("voiceEmotionSessionStats");return e?JSON.parse(e):{totalSamples:0,sessionsCount:0,accuracyHistory:[],lastSession:null,averageAccuracy:0}}saveTrainingData(){localStorage.setItem("voiceEmotionTrainingData_v2",JSON.stringify(this.trainingData))}saveModelWeights(){localStorage.setItem("voiceEmotionModelWeights_v2",JSON.stringify(this.modelWeights))}saveUserCalibration(){localStorage.setItem("voiceEmotionUserCalibration",JSON.stringify(this.userCalibration))}saveSessionStats(){localStorage.setItem("voiceEmotionSessionStats",JSON.stringify(this.sessionStats))}async addTrainingSample(e,r,n,i=null){const a={id:Date.now().toString(),emotion:e,timestamp:new Date().toISOString(),voiceFeatures:r,transcript:n,verified:!0,sessionId:this.sessionStats.sessionsCount};if(this.trainingData[e].push(a),this.saveTrainingData(),i)try{await this.voiceStorage.saveVoiceSample(e,i,r,n)}catch(s){console.warn("Failed to save voice sample to IndexedDB:",s)}this.updateModelWeights(e,r),this.updateUserCalibration(r),this.updateSessionStats(e),console.log(`✅ Added training sample for ${e}:`,a);try{const s=localStorage.getItem("remoteVoiceTrainingUrl");if(s)try{const d=new FormData;if(d.append("emotion",e),d.append("transcript",n||""),d.append("features",JSON.stringify(r||{})),i){const _=i.type||"";let N=".wav";_.includes("webm")||_.includes("opus")?N=".webm":_.includes("mpeg")||_.includes("mp3")?N=".mp3":_.includes("ogg")?N=".ogg":_.includes("wav")&&(N=".wav"),d.append("audio",i,`${a.id}${N}`)}console.debug("Uploading training sample to",s,{emotion:e,sampleId:a.id,features:r,hasAudio:!!i}),fetch(s,{method:"POST",body:d}).then(async _=>{if(_.ok)console.debug("Remote upload successful",_.status);else{let N="";try{N=await _.text()}catch{}console.warn("Remote upload failed",_.status,_.statusText,N)}}).catch(_=>console.warn("Remote upload error",_))}catch(d){console.warn("Failed building upload form or sending it",d)}}catch(s){console.warn("Failed to send remote training sample",s)}return a}updateUserCalibration(e){const{pitch:r,volume:n}=e;this.userCalibration.samplesCount===0?(this.userCalibration.baselinePitch=r,this.userCalibration.baselineVolume=n):(this.userCalibration.baselinePitch=this.userCalibration.baselinePitch*(1-.1)+r*.1,this.userCalibration.baselineVolume=this.userCalibration.baselineVolume*(1-.1)+n*.1),this.userCalibration.pitchRange.min=Math.min(this.userCalibration.pitchRange.min,r),this.userCalibration.pitchRange.max=Math.max(this.userCalibration.pitchRange.max,r),this.userCalibration.volumeRange.min=Math.min(this.userCalibration.volumeRange.min,n),this.userCalibration.volumeRange.max=Math.max(this.userCalibration.volumeRange.max,n),this.userCalibration.samplesCount++,this.userCalibration.lastCalibrated=new Date().toISOString(),this.saveUserCalibration()}updateSessionStats(e){this.sessionStats.totalSamples++,this.sessionStats.lastSession=new Date().toISOString();const r=this.calculateAccuracy(e);this.sessionStats.accuracyHistory.push({emotion:e,accuracy:r,timestamp:new Date().toISOString()}),this.sessionStats.accuracyHistory.length>100&&(this.sessionStats.accuracyHistory=this.sessionStats.accuracyHistory.slice(-100)),this.sessionStats.averageAccuracy=Math.round(this.sessionStats.accuracyHistory.reduce((n,i)=>n+i.accuracy,0)/this.sessionStats.accuracyHistory.length),this.saveSessionStats()}updateModelWeights(e,r){const{pitch:n,volume:i,spectralCentroid:a}=r;e==="happy"&&n>160&&i>40&&(this.modelWeights.pitch.happy=Math.min(2,this.modelWeights.pitch.happy+.1),this.modelWeights.volume.happy=Math.min(2,this.modelWeights.volume.happy+.1)),e==="sad"&&n<150&&i<40&&(this.modelWeights.pitch.sad=Math.min(2,this.modelWeights.pitch.sad+.1),this.modelWeights.volume.sad=Math.min(2,this.modelWeights.volume.sad+.1)),e!=="nervous"&&(this.modelWeights.pitch.nervous=Math.max(.1,this.modelWeights.pitch.nervous-.05),this.modelWeights.volume.nervous=Math.max(.1,this.modelWeights.volume.nervous-.05)),this.saveModelWeights()}getTrainingStats(){const e={};return Object.keys(this.trainingData).forEach(r=>{e[r]={count:this.trainingData[r].length,lastTrained:this.trainingData[r].length>0?this.trainingData[r][this.trainingData[r].length-1].timestamp:null,accuracy:this.calculateAccuracy(r)}}),e}calculateAccuracy(e){const r=this.trainingData[e];if(r.length===0)return 0;const n=Math.min(95,30+r.length*10),i=(this.modelWeights.pitch[e]+this.modelWeights.volume[e])*10;return Math.round(Math.min(100,n+i))}getModelWeights(){return this.modelWeights}clearTrainingData(e=null){e?this.trainingData[e]=[]:Object.keys(this.trainingData).forEach(r=>{this.trainingData[r]=[]}),this.saveTrainingData()}exportTrainingData(){return{trainingData:this.trainingData,modelWeights:this.modelWeights,exportDate:new Date().toISOString()}}importTrainingData(e){e.trainingData&&(this.trainingData=e.trainingData),e.modelWeights&&(this.modelWeights=e.modelWeights),this.saveTrainingData(),this.saveModelWeights()}}class U9{constructor(){this.audioContext=null,this.microphone=null,this.analyser=null,this.mediaRecorder=null,this.audioChunks=[],this.isAnalyzing=!1,this.isRecording=!1,this.mediaStream=null,this.trainingManager=new V9,this.speechRecognition=null,this.isListening=!1,this.currentAnalysis={pitch:0,volume:0,spectralCentroid:0,emotions:{},dominantEmotion:"neutral",confidence:0,transcript:"",audioBlob:null},this.mlModel=null,this.mlLabelsMap=null,this.mlNorm=null,this.useMlDetection=!1}async initialize(){try{this.mediaStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,sampleRate:44100}}),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.microphone=this.audioContext.createMediaStreamSource(this.mediaStream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.analyser.smoothingTimeConstant=.8,this.microphone.connect(this.analyser);try{bo&&bo.createMeydaAnalyzer&&(this.lastMeydaFeatures=null,this.meydaAnalyzer=bo.createMeydaAnalyzer({audioContext:this.audioContext,source:this.microphone,bufferSize:2048,featureExtractors:["rms","spectralCentroid","mfcc"],callback:e=>{this.lastMeydaFeatures=e}}))}catch(e){console.warn("Meyda initialization failed:",e),this.meydaAnalyzer=null}if(this.mediaRecorder=new MediaRecorder(this.mediaStream,{mimeType:"audio/webm;codecs=opus"}),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.audioChunks.push(e.data)},this.mediaRecorder.onstop=()=>{const e=new Blob(this.audioChunks,{type:"audio/webm;codecs=opus"});this.currentAnalysis.audioBlob=e,this.audioChunks=[]},"webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.speechRecognition=new e,this.speechRecognition.continuous=!0,this.speechRecognition.interimResults=!0,this.speechRecognition.lang="en-US",this.speechRecognition.onresult=r=>{let n="",i="";for(let a=r.resultIndex;a<r.results.length;a++){const s=r.results[a][0].transcript;r.results[a].isFinal?n+=s+" ":i+=s+" "}if(n){const a=this.currentAnalysis.transcript||"";this.currentAnalysis.transcript=(a+" "+n).trim()}i&&(n||(this.currentAnalysis.transcript=this.currentAnalysis.transcript||""||i.trim()))},this.speechRecognition.onerror=r=>{console.warn("Speech recognition error:",r.error),r.error==="no-speech"&&(this.currentAnalysis.transcript="No speech detected")},this.speechRecognition.onend=()=>{this.isListening=!1,this.isAnalyzing&&this.startSpeechRecognition()}}else console.warn("Speech Recognition not supported in this browser");return!0}catch(e){return console.error("Error initializing voice analyzer:",e),!1}}async loadMlModelAndMeta(e="local-voice-model"){try{const r=await A5(e);if(!r)return!1;this.mlModel=r;const n=localStorage.getItem(e+"_meta");if(n){const i=JSON.parse(n);this.mlLabelsMap=i.labelsMap||null,this.mlNorm=i.norm||null}return!0}catch(r){return console.warn("Failed to load ML model into analyzer",r),!1}}predictWithMl(e){try{if(!this.mlModel||!this.mlLabelsMap)return null;const r=(e.mfccMeans||[]).length||13,n=[];n.push(e.pitch||0),n.push(e.volume||0),n.push(e.spectralCentroid||0);const i=e.mfccMeans||[];for(let xe=0;xe<r;xe++)n.push(i[xe]||0);const a=this.mlNorm;let s=n;a&&a.means&&a.stds&&(s=n.map((xe,Ce)=>((xe||0)-(a.means[Ce]||0))/(a.stds[Ce]||1)));const d=tf.tensor2d([s]),N=this.mlModel.predict(d).arraySync()[0],I=Object.keys(this.mlLabelsMap).sort((xe,Ce)=>this.mlLabelsMap[xe]-this.mlLabelsMap[Ce]),ye=N.indexOf(Math.max(...N));return{label:I[ye]||null,probabilities:N}}catch(r){return console.warn("ML prediction failed",r),null}}startAnalysis(){this.isAnalyzing=!0,this.startRecording(),this.startSpeechRecognition();try{this.meydaAnalyzer&&this.meydaAnalyzer.start&&this.meydaAnalyzer.start()}catch{}this.analyzeAudio()}startRecording(){this.mediaRecorder&&this.mediaRecorder.state==="inactive"&&(this.audioChunks=[],this.isRecording=!0,this.mediaRecorder.start(100))}startSpeechRecognition(){if(this.speechRecognition&&!this.isListening)try{this.currentAnalysis.transcript="",this.isListening=!0,this.speechRecognition.start()}catch(e){console.warn("Failed to start speech recognition:",e),this.isListening=!1}}stopRecording(){this.mediaRecorder&&this.mediaRecorder.state==="recording"&&(this.isRecording=!1,this.mediaRecorder.stop())}stopSpeechRecognition(){this.speechRecognition&&this.isListening&&(this.isListening=!1,this.speechRecognition.stop())}stopAnalysis(){this.isAnalyzing=!1,this.stopRecording(),this.stopSpeechRecognition();try{this.meydaAnalyzer&&this.meydaAnalyzer.stop&&this.meydaAnalyzer.stop()}catch{}}setTranscript(e){this.currentAnalysis.transcript=e}analyzeAudio(){var d,_;if(!this.isAnalyzing)return;const e=this.analyser.frequencyBinCount,r=new Uint8Array(e);this.analyser.getByteFrequencyData(r);let n=0,i=0,a=0;try{if(this.lastMeydaFeatures){i=this.lastMeydaFeatures.rms||this.calculateVolume(r),a=this.lastMeydaFeatures.spectralCentroid||this.calculateSpectralCentroid(r);const N=new Float32Array(this.analyser.fftSize);this.analyser.getFloatTimeDomainData&&this.analyser.getFloatTimeDomainData(N),N&&N.length?n=this.calculatePitchFromFrame(N,this.audioContext.sampleRate):n=this.calculatePitch(r)}else n=this.calculatePitch(r),i=this.calculateVolume(r),a=this.calculateSpectralCentroid(r)}catch{n=this.calculatePitch(r),i=this.calculateVolume(r),a=this.calculateSpectralCentroid(r)}let s={};if(this.useMlDetection&&this.mlModel&&this.mlLabelsMap)try{const N=((d=this.lastMeydaFeatures)==null?void 0:d.mfcc)||[],I=this.predictWithMl({pitch:n,volume:i,spectralCentroid:a,mfccMeans:N});if(I&&I.probabilities){const ye=Object.keys(this.mlLabelsMap).sort((xe,Ce)=>this.mlLabelsMap[xe]-this.mlLabelsMap[Ce]);I.probabilities.forEach((xe,Ce)=>{const Ve=ye[Ce]||`label_${Ce}`;s[Ve]={percentage:Math.round(xe*100),confidence:Math.round(xe*100*.9),description:this.getEmotionDescription(Ve,{pitch:n,volume:i,spectralCentroid:a}),trainedAccuracy:this.trainingManager.calculateAccuracy(Ve)}})}else s=this.detectEmotionsWithTraining({pitch:n,volume:i,spectralCentroid:a,transcript})}catch(N){console.warn("ML detection failed, falling back",N),s=this.detectEmotionsWithTraining({pitch:n,volume:i,spectralCentroid:a,transcript})}else s=this.detectEmotionsWithTraining({pitch:n,volume:i,spectralCentroid:a,transcript});this.currentAnalysis={pitch:Math.round(n),volume:Math.round(i*100),spectralCentroid:Math.round(a),mfcc:((_=this.lastMeydaFeatures)==null?void 0:_.mfcc)||[],emotions:s,dominantEmotion:this.getDominantEmotion(s),confidence:this.getOverallConfidence(s),transcript:this.currentAnalysis.transcript,timestamp:Date.now()};try{this.performFusion&&this.performFusion()}catch{}setTimeout(()=>this.analyzeAudio(),200)}calculatePitch(e){let r=0,n=0;for(let a=20;a<300;a++)r+=e[a],n+=a*e[a];const i=r>0?n/r:0;return Math.max(80,Math.min(500,i*2.2+90))}calculatePitchFromFrame(e,r){try{const n=e.length,i=new Float32Array(n);for(let Oe=0;Oe<n;Oe++){let We=0;for(let ot=0;ot<n-Oe;ot++)We+=e[ot]*e[ot+Oe];i[Oe]=We}const a=80,d=Math.floor(r/1e3),_=Math.floor(r/a);let N=-1,I=-1/0;for(let Oe=d;Oe<=Math.min(_,n-1);Oe++)i[Oe]>I&&(I=i[Oe],N=Oe);if(N<=0)return 0;const ye=i[N-1]||0,xe=i[N]||0,Ce=i[N+1]||0,Ve=ye-2*xe+Ce;let Ye=0;Ve!==0&&(Ye=.5*(ye-Ce)/Ve);const qe=N+Ye,ze=r/qe;return isFinite(ze)?Math.max(80,Math.min(1e3,Math.round(ze))):0}catch{return 0}}calculateVolume(e){let r=0;for(let n=0;n<e.length;n++)r+=e[n]*e[n];return Math.sqrt(r/e.length)/255}calculateSpectralCentroid(e){let r=0,n=0;for(let i=0;i<e.length;i++)r+=i*e[i],n+=e[i];return n>0?r/n:0}detectEmotionsWithTraining(e){const{pitch:r,volume:n,spectralCentroid:i,transcript:a,mfcc:s}=e,d=this.trainingManager.getModelWeights(),_={happy:{voice:{pitch:[160,300],volume:[.4,.9],spectral:[800,3e3]},keywords:["good","great","awesome","wonderful","excellent","fantastic","amazing","love","perfect","best"]},sad:{voice:{pitch:[80,160],volume:[.1,.5],spectral:[200,1e3]},keywords:["sad","terrible","awful","bad","disappointed","down","horrible","worst","hate","depressed"]},angry:{voice:{pitch:[180,400],volume:[.6,1],spectral:[1200,4e3]},keywords:["angry","furious","mad","hate","annoying","stupid","rage","pissed","damn","idiot"]},excited:{voice:{pitch:[200,450],volume:[.5,1],spectral:[1e3,3500]},keywords:["excited","amazing","incredible","wow","fantastic","awesome","unbelievable","epic","brilliant"]},calm:{voice:{pitch:[110,180],volume:[.2,.6],spectral:[300,1200]},keywords:["calm","peaceful","relaxed","quiet","serene","tranquil","gentle","soft","steady"]},nervous:{voice:{pitch:[170,300],volume:[.15,.6],spectral:[600,2500]},keywords:["nervous","worried","anxious","scared","uncertain","afraid","concerned","stressed"]},confident:{voice:{pitch:[120,220],volume:[.4,.8],spectral:[500,2e3]},keywords:["confident","sure","certain","definitely","absolutely","positive","strong","determined"]},surprised:{voice:{pitch:[220,500],volume:[.4,.95],spectral:[800,3500]},keywords:["surprised","wow","really","unexpected","shocking","unbelievable","omg","whoa"]},neutral:{voice:{pitch:[120,220],volume:[.25,.7],spectral:[400,1800]},keywords:["hello","yes","no","okay","fine","hi","thanks","well","the","and"]},frustrated:{voice:{pitch:[140,280],volume:[.25,.85],spectral:[500,2200]},keywords:["frustrated","annoying","difficult","problem","issue","trouble","ugh","damn"]}},N={};return Object.entries(_).forEach(([I,ye])=>{let xe=0,Ce=0;const Ve=ye.voice;r>=Ve.pitch[0]&&r<=Ve.pitch[1]&&(xe+=30*d.pitch[I]),n>=Ve.volume[0]&&n<=Ve.volume[1]&&(xe+=25*d.volume[I]),i>=Ve.spectral[0]&&i<=Ve.spectral[1]&&(xe+=20*d.spectral[I]),Ce+=75;const Ye=a.toLowerCase(),qe=ye.keywords.filter(Oe=>Ye.includes(Oe)).length;qe>0&&(xe+=Math.min(25,qe*8)*d.keyword[I]),Ce+=25;let ze=Ce>0?xe/Ce*100:0;try{const Oe=s||[];if(Oe.length>=1){const We=Math.abs(Oe[0]);I==="angry"&&We>100&&(ze=Math.min(100,ze+8)),I==="happy"&&We<30&&(ze=Math.max(ze-6,0))}}catch{}I==="neutral"&&a.length<10&&(ze=Math.max(ze,40)),I==="nervous"&&(n>.6||r<150||qe===0)&&(ze*=d.pitch.nervous*d.volume.nervous),N[I]={percentage:Math.max(0,Math.min(100,Math.round(ze))),confidence:Math.round(ze*.85),description:this.getEmotionDescription(I,e),trainedAccuracy:this.trainingManager.calculateAccuracy(I)}}),N}getEmotionDescription(e,r){return{happy:`Elevated pitch (${r.pitch}Hz), energetic tone - Trained accuracy`,sad:`Lower pitch (${r.pitch}Hz), quieter volume - Trained accuracy`,angry:`Sharp pitch changes (${r.pitch}Hz), intense volume - Trained accuracy`,excited:`Very high pitch (${r.pitch}Hz), rapid speech - Trained accuracy`,calm:`Steady pitch (${r.pitch}Hz), controlled delivery - Trained accuracy`,nervous:`Variable pitch (${r.pitch}Hz), hesitant patterns - Trained accuracy`,confident:"Strong volume, steady pace - Trained accuracy",surprised:`Sudden pitch spikes (${r.pitch}Hz) - Trained accuracy`,neutral:"Balanced speech patterns - Trained accuracy",frustrated:"Irregular patterns, variable intensity - Trained accuracy"}[e]||"Voice pattern analysis"}getDominantEmotion(e){let r=0,n="neutral";return Object.entries(e).forEach(([i,a])=>{a.percentage>r&&(r=a.percentage,n=i)}),n}getOverallConfidence(e){const r=Object.values(e).map(n=>n.confidence);return r.length>0?Math.round(r.reduce((n,i)=>n+i,0)/r.length):0}getCurrentAnalysis(){return this.currentAnalysis}async performFusion(){try{const e=this.currentAnalysis.transcript||"",r={},n={},i={},a=this.detectEmotionsWithTraining({pitch:this.currentAnalysis.pitch,volume:this.currentAnalysis.volume/100,spectralCentroid:this.currentAnalysis.spectralCentroid,transcript:e});Object.keys(a).forEach(_=>r[_]=(a[_].percentage||0)/100),Object.keys(r).forEach(_=>{n[_]=Math.min(1,(this.currentAnalysis.spectralCentroid||0)/4e3)});let s=null;if(e&&e.length>3)try{const _=Date.now();(!this._lastBertCallAt||_-this._lastBertCallAt>1e3)&&(this._lastBertCallAt=_,s=await Yc(e))}catch(_){console.warn("BERT call failed",_)}s&&Array.isArray(s)&&s.forEach(_=>{const N=(_.label||"").toLowerCase(),I=_.score||_.value||0;i[N]=Math.max(i[N]||0,I)});const d=W9({bertScores:i,voiceScores:r,spectralScores:n,textScores:i});this.currentAnalysis.fused=d}catch(e){console.warn("performFusion error",e)}}addTrainingSample(e,r){return this.trainingManager.addTrainingSample(e,{pitch:this.currentAnalysis.pitch,volume:this.currentAnalysis.volume/100,spectralCentroid:this.currentAnalysis.spectralCentroid,mfcc:this.currentAnalysis.mfcc||[]},r,this.currentAnalysis.audioBlob)}getTrainingStats(){return this.trainingManager.getTrainingStats()}async getStoredVoiceSamples(e=null){return await this.trainingManager.voiceStorage.getVoiceSamples(e)}getUserCalibration(){return this.trainingManager.userCalibration}getSessionStats(){return this.trainingManager.sessionStats}async clearStoredSamples(e=null){return await this.trainingManager.voiceStorage.clearAllSamples(e)}exportTrainingData(){return this.trainingManager.exportTrainingData()}importTrainingData(e){return this.trainingManager.importTrainingData(e)}cleanup(){this.stopAnalysis(),this.stopSpeechRecognition(),this.microphone&&this.microphone.disconnect(),this.audioContext&&this.audioContext.close(),this.mediaStream&&this.mediaStream.getTracks().forEach(e=>e.stop())}}const $9=({analyzer:t=null,currentTranscript:e="",isRecording:r=!1})=>{var oi,zi,Cs,Os,mn,Bs;const[n,i]=Wt.useState("happy"),[a,s]=Wt.useState(!1),[d,_]=Wt.useState({}),[N,I]=Wt.useState({}),[ye,xe]=Wt.useState({}),[Ce,Ve]=Wt.useState({}),[Ye,qe]=Wt.useState(""),[ze,Oe]=Wt.useState(null),[We,ot]=Wt.useState(!1),[st,Rt]=Wt.useState(null),[wt,It]=Wt.useState(null),[er,cr]=Wt.useState(null),[Tr,xr]=Wt.useState(""),[lt,gt]=Wt.useState(!1),[Ft,pt]=Wt.useState(localStorage.getItem("remoteVoiceTrainingUrl")||"http://localhost:4000/upload"),[Zt,Jt]=Wt.useState(!!localStorage.getItem("remoteVoiceTrainingUrl")),[lr,wr]=Wt.useState(""),[Sr,vr]=Wt.useState(null),[Bt,yr]=Wt.useState(null),[dr,Pr]=Wt.useState(0),[Hr,Wr]=Wt.useState(0),[Pn,Rn]=Wt.useState(!1),[Fn,In]=Wt.useState(!1),[sa,$a]=Wt.useState(!1),Oi=Wt.useRef(null),Ya=Wt.useRef(null),Ri=[{id:"happy",label:"Happy 😊",color:"#10b981",instruction:'Say something joyful like "I feel amazing today!"'},{id:"sad",label:"Sad 😢",color:"#6b7280",instruction:'Say something like "I feel really down today"'},{id:"angry",label:"Angry 😠",color:"#ef4444",instruction:'Say something with intensity like "This is so annoying!"'},{id:"excited",label:"Excited 🤩",color:"#f59e0b",instruction:'Say something energetic like "This is incredible!"'},{id:"calm",label:"Calm 😌",color:"#06b6d4",instruction:'Say something peaceful like "I feel very relaxed"'},{id:"nervous",label:"Nervous 😰",color:"#8b5cf6",instruction:`Say something hesitant like "I'm not sure about this"`},{id:"confident",label:"Confident 💪",color:"#059669",instruction:'Say something assertive like "I know I can do this!"'},{id:"surprised",label:"Surprised 😮",color:"#dc2626",instruction:`Say something like "Wow, I didn't expect that!"`},{id:"neutral",label:"Neutral 😐",color:"#374151",instruction:'Say something normal like "Hello, how are you?"'},{id:"frustrated",label:"Frustrated 😤",color:"#7c2d12",instruction:'Say something like "This is so difficult!"'}];Wt.useEffect(()=>{if(!t&&!er){const pr=new U9;cr(pr)}},[t,er]);const ar=t||er,Nr=e||Tr,Xr=r||lt,Cr=ar?ar.trainingManager:null;Wt.useEffect(()=>{ar&&(_(ar.getTrainingStats()),xe(ar.getUserCalibration()),Ve(ar.getSessionStats()),pn());try{if(!st&&typeof Worker<"u"){const pr=`
          self.onmessage = async (e) => {
            const msg = e.data;
            try {
              if (msg && msg.type === 'train') {
                // load tf from CDN
                importScripts('https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.12.0/dist/tf.min.js');
                const tf = self.tf;
                const { samples, labelsMap, mfccLen = 13, epochs = 30, batchSize = 16 } = msg.payload || {};
                // build dataset
                const xs = [];
                const ys = [];
                samples.forEach(s => {
                  const f = s.voiceFeatures || s;
                  const row = [];
                  row.push(f.pitch || 0);
                  row.push(f.volume || 0);
                  row.push(f.spectralCentroid || 0);
                  const means = f.mfccMeans || [];
                  for (let i = 0; i < mfccLen; i++) row.push(means[i] || 0);
                  xs.push(row);
                  const label = s.emotion || f.emotion || 'neutral';
                  const labelIndex = labelsMap[label] || 0;
                  const oneHot = new Array(Object.keys(labelsMap).length).fill(0);
                  oneHot[labelIndex] = 1;
                  ys.push(oneHot);
                });
                // normalization
                const cols = xs[0] ? xs[0].length : 0;
                const means = new Array(cols).fill(0);
                const stds = new Array(cols).fill(0);
                const N = xs.length || 1;
                for (let j = 0; j < cols; j++) {
                  let ssum = 0;
                  for (let i = 0; i < N; i++) ssum += xs[i][j] || 0;
                  means[j] = ssum / N;
                }
                for (let j = 0; j < cols; j++) {
                  let ssum = 0;
                  for (let i = 0; i < N; i++) { const d = (xs[i][j] || 0) - means[j]; ssum += d*d; }
                  stds[j] = Math.sqrt(ssum / Math.max(1, N)); if (stds[j] === 0) stds[j] = 1;
                }
                const xsNorm = xs.map(row => row.map((v,j)=>((v||0)-means[j])/stds[j]));

                // build model
                const inputDim = xsNorm[0] ? xsNorm[0].length : 0;
                const numClasses = Object.keys(labelsMap).length;
                const model = tf.sequential();
                model.add(tf.layers.dense({ inputShape: [inputDim], units: 64, activation: 'relu' }));
                model.add(tf.layers.dropout({ rate: 0.3 }));
                model.add(tf.layers.dense({ units: 32, activation: 'relu' }));
                model.add(tf.layers.dropout({ rate: 0.2 }));
                model.add(tf.layers.dense({ units: numClasses, activation: 'softmax' }));
                model.compile({ optimizer: tf.train.adam(0.001), loss: 'categoricalCrossentropy', metrics: ['accuracy'] });

                const xsT = tf.tensor2d(xsNorm);
                const ysT = tf.tensor2d(ys);

                await model.fit(xsT, ysT, { epochs, batchSize, shuffle: true, callbacks: { onEpochEnd: (epoch, logs) => { self.postMessage({ type: 'progress', epoch, logs }); } } });

                // serialize weights
                const weights = model.getWeights();
                const serialized = [];
                for (let i = 0; i < weights.length; i++) {
                  const w = weights[i];
                  const vals = await w.data();
                  serialized.push({ buffer: vals.buffer, shape: w.shape, dtype: w.dtype });
                }
                const transfer = serialized.map(s => s.buffer);
                self.postMessage({ type: 'trained', payload: { inputDim, numClasses, weights: serialized, norm: { means, stds }, labelsMap } }, transfer);
              }
            } catch (err) { self.postMessage({ type: 'error', error: String(err) }); }
          };
        `,zr=new Blob([pr],{type:"application/javascript"}),sn=URL.createObjectURL(zr),Yr=new Worker(sn);Yr.onmessage=cn=>{const Mn=cn.data||{};Mn.type==="progress"?It({epoch:Mn.epoch,logs:Mn.logs}):Mn.type==="trained"?(async()=>{try{const un=Mn.payload,rn=await Mo(()=>import("./index-BHGHb4RF.js"),__vite__mapDeps([0,1])),en=rn.sequential();en.add(rn.layers.dense({inputShape:[un.inputDim],units:64,activation:"relu"})),en.add(rn.layers.dropout({rate:.3})),en.add(rn.layers.dense({units:32,activation:"relu"})),en.add(rn.layers.dropout({rate:.2})),en.add(rn.layers.dense({units:un.numClasses,activation:"softmax"})),en.compile({optimizer:rn.train.adam(.001),loss:"categoricalCrossentropy",metrics:["accuracy"]});const Wn=un.weights.map(Kn=>rn.tensor(new Float32Array(Kn.buffer),Kn.shape));en.setWeights(Wn),await en.save("localstorage://local-voice-model"),localStorage.setItem("local-voice-model_meta",JSON.stringify({labelsMap:un.labelsMap,norm:un.norm})),Oe(en),qe("✅ Model trained (worker) and saved locally"),setTimeout(()=>qe(""),3e3)}catch(un){console.warn("Failed to reconstruct model from worker",un),qe("❌ Failed to reconstruct model from worker")}})():Mn.type==="error"&&qe(`❌ Training error: ${Mn.error}`)},Rt(Yr)}}catch(pr){console.warn("Worker not available",pr)}},[ar]),Wt.useEffect(()=>{const pr=setInterval(()=>{ar&&(_(ar.getTrainingStats()),xe(ar.getUserCalibration()),Ve(ar.getSessionStats()),pn())},3e3);return()=>clearInterval(pr)},[ar]);const pn=async()=>{if(ar)try{const pr={};for(const zr of Ri){const sn=await ar.getStoredVoiceSamples(zr.id);pr[zr.id]={voiceSamples:sn.length,totalSize:sn.reduce((Yr,cn)=>{var Mn;return Yr+(((Mn=cn.audioBlob)==null?void 0:Mn.size)||0)},0),lastSample:sn.length>0?sn[sn.length-1].timestamp:null}}I(pr)}catch(pr){console.warn("Failed to load storage stats:",pr)}},On=async()=>{if(!ar){qe("❌ Voice analyzer not initialized");return}if(!await ar.initialize()){qe("❌ Could not access microphone");return}gt(!0),ar.startAnalysis(),qe("🎤 Recording started - speak now!")},Hn=()=>{ar&&(ar.stopAnalysis(),gt(!1),setTimeout(()=>{const pr=ar.getCurrentAnalysis();if(xr(pr.transcript||"Voice sample recorded"),qe("✅ Recording stopped - ready for training!"),pr.audioBlob){try{Sr&&URL.revokeObjectURL(Sr)}catch{}const zr=URL.createObjectURL(pr.audioBlob);vr(zr)}},400))},kn=async pr=>{const zr=pr.target.files&&pr.target.files[0];if(!zr||!ar){qe("❌ No file selected or analyzer not ready");return}try{if(!await ar.initialize()){qe("❌ Could not initialize audio context for file");return}ar.currentAnalysis.audioBlob=zr;try{Sr&&URL.revokeObjectURL(Sr)}catch{}const Yr=URL.createObjectURL(zr);vr(Yr);const cn=zr.name||"Imported audio";xr(cn),qe(`📥 Loaded audio file: ${cn}`);try{const Mn=await zr.arrayBuffer(),un=await ar.audioContext.decodeAudioData(Mn);let rn=0,en=0,Wn=0;try{const Kn=un.getChannelData(0);if(bo&&bo.extract){const ki=Math.min(2048,Kn.length),Ci=Math.max(0,Math.floor((Kn.length-ki)/2)),Wi=Kn.slice(Ci,Ci+ki),oa=bo.extract(["rms","spectralCentroid","mfcc"],Wi);oa&&(rn=oa.rms||0,en=oa.spectralCentroid||0)}try{Wn=eg(un)||0}catch{Wn=0}if(!rn){let ki=0,Ci=0;const Wi=Math.min(Kn.length,8192),oa=Math.max(1,Math.floor(Kn.length/Wi));let Gi=0,Ks=0;for(let kr=0;kr<Kn.length;kr+=oa){const Hs=Kn[kr],eo=Math.abs(Hs);Gi+=Hs*Hs,Ci+=kr*eo,Ks+=eo}rn=Math.sqrt(Gi/Math.max(1,Math.floor(Kn.length/oa))),en=Ks>0?Ci/Ks:0}ar.currentAnalysis.pitch=Wn,ar.currentAnalysis.volume=Math.round(rn*100),ar.currentAnalysis.spectralCentroid=Math.round(en)}catch(Kn){console.warn("Feature extraction failed, using defaults",Kn)}yr(un),Pr(0),Wr(un.duration||0),setTimeout(()=>Gn(un),50);try{const Kn=ar.detectEmotionsWithTraining({pitch:ar.currentAnalysis.pitch,volume:ar.currentAnalysis.volume/100,spectralCentroid:ar.currentAnalysis.spectralCentroid,transcript:""});ar.currentAnalysis.emotions=Kn,ar.currentAnalysis.dominantEmotion=ar.getDominantEmotion(Kn)}catch(Kn){console.warn("Preview detection failed:",Kn)}}catch(Mn){console.warn("Could not decode imported audio for feature extraction:",Mn)}setTimeout(()=>qe("✅ Audio ready - select emotion and click Train"),500)}catch(sn){console.error("Audio import error:",sn),qe("❌ Failed to import audio file")}finally{pr.target&&(pr.target.value="")}},Gn=pr=>{if(!Ya.current||!pr)return;const zr=Ya.current,sn=zr.getContext("2d"),Yr=zr.width=zr.clientWidth*devicePixelRatio,cn=zr.height=100*devicePixelRatio;sn.clearRect(0,0,Yr,cn),sn.fillStyle="#eef2ff",sn.fillRect(0,0,Yr,cn);const Mn=pr.getChannelData(0),un=Math.ceil(Mn.length/Yr),rn=cn/2;sn.fillStyle="#3b82f6";for(let en=0;en<Yr;en++){let Wn=1,Kn=-1;for(let oa=0;oa<un;oa++){const Gi=Mn[en*un+oa];Gi<Wn&&(Wn=Gi),Gi>Kn&&(Kn=Gi)}const ki=en,Ci=(1+Wn)*rn,Wi=(1+Kn)*rn;sn.fillRect(ki,cn-Wi,1,Wi-Ci)}if(pr.duration){const en=Math.floor(dr/pr.duration*Yr),Wn=Math.floor(Hr/pr.duration*Yr);sn.fillStyle="rgba(239,68,68,0.25)",sn.fillRect(0,0,Math.max(0,en),cn),sn.fillRect(Math.max(0,Wn),0,Math.max(0,Yr-Wn),cn),sn.fillStyle="rgba(59,130,246,0.9)",sn.fillRect(en-2,0,4,cn),sn.fillRect(Wn-2,0,4,cn),sn.fillStyle="#1f2937",sn.beginPath(),sn.arc(en,cn/2,6,0,Math.PI*2),sn.fill(),sn.beginPath(),sn.arc(Wn,cn/2,6,0,Math.PI*2),sn.fill()}};Wt.useEffect(()=>{const pr=Ya.current;if(!pr||!Bt)return;const zr=cn=>{const Mn=pr.getBoundingClientRect(),un=(cn.clientX-Mn.left)*devicePixelRatio,rn=pr.width,en=Bt.duration||1,Wn=Math.floor(dr/en*rn),Kn=Math.floor(Hr/en*rn),ki=Math.abs(un-Wn),Ci=Math.abs(un-Kn),Wi=12*devicePixelRatio;ki<Wi?Rn(!0):Ci<Wi&&In(!0)},sn=cn=>{if(!Pn&&!Fn)return;const Mn=pr.getBoundingClientRect(),un=(cn.clientX-Mn.left)*devicePixelRatio,rn=pr.width,en=Bt.duration||1,Wn=Math.max(0,Math.min(en,un/rn*en));Pn?Pr(Math.min(Wn,Math.max(0,Hr-.05))):Fn&&Wr(Math.max(Wn,Math.min(en,dr+.05)))},Yr=()=>{Rn(!1),In(!1)};return pr.addEventListener("pointerdown",zr),window.addEventListener("pointermove",sn),window.addEventListener("pointerup",Yr),()=>{pr.removeEventListener("pointerdown",zr),window.removeEventListener("pointermove",sn),window.removeEventListener("pointerup",Yr)}},[Ya,Bt,Pn,Fn,dr,Hr]);const ba=()=>{if(Bt)try{const pr=_i(Bt,dr,Hr),zr=URL.createObjectURL(pr),sn=document.createElement("a");sn.href=zr,sn.download=`trimmed-${n}-${new Date().toISOString()}.wav`,sn.click(),URL.revokeObjectURL(zr),qe("📥 Trimmed audio downloaded"),setTimeout(()=>qe(""),2e3)}catch(pr){console.warn("Download trimmed failed",pr),qe("❌ Failed to download trimmed audio")}},Pi=()=>{const pr=Oi.current;if(pr)try{pr.currentTime=Math.max(0,dr),$a(!0),pr.play()}catch(zr){console.warn("Play trimmed failed",zr)}},Ai=()=>{const pr=Oi.current;!pr||!Bt||pr.currentTime>=Math.max(0,Hr)&&(pr.pause(),$a(!1))};Wt.useEffect(()=>{Bt&&Gn(Bt)},[Bt,dr,Hr]);const _i=(pr,zr=0,sn=null)=>{const Yr=pr.sampleRate||44100,cn=Math.floor(zr*Yr),Mn=Math.floor((sn||pr.duration)*Yr),un=Math.max(0,Mn-cn),rn=pr.numberOfChannels,en=new ArrayBuffer(44+un*rn*2),Wn=new DataView(en),Kn=(Ci,Wi,oa)=>{for(let Gi=0;Gi<oa.length;Gi++)Ci.setUint8(Wi+Gi,oa.charCodeAt(Gi))};Kn(Wn,0,"RIFF"),Wn.setUint32(4,36+un*rn*2,!0),Kn(Wn,8,"WAVE"),Kn(Wn,12,"fmt "),Wn.setUint32(16,16,!0),Wn.setUint16(20,1,!0),Wn.setUint16(22,rn,!0),Wn.setUint32(24,Yr,!0),Wn.setUint32(28,Yr*rn*2,!0),Wn.setUint16(32,rn*2,!0),Wn.setUint16(34,16,!0),Kn(Wn,36,"data"),Wn.setUint32(40,un*rn*2,!0);let ki=44;for(let Ci=cn;Ci<Mn;Ci++)for(let Wi=0;Wi<rn;Wi++){const oa=pr.getChannelData(Wi),Gi=Math.max(-1,Math.min(1,oa[Ci]||0));Wn.setInt16(ki,Gi<0?Gi*32768:Gi*32767,!0),ki+=2}return new Blob([Wn],{type:"audio/wav"})},Bi=pr=>{if(!pr)return{means:[],vars:[]};let zr=[];if(Array.isArray(pr[0])?zr=pr:zr=[pr],zr.length===0)return{means:[],vars:[]};const sn=zr[0].length,Yr=new Array(sn).fill(0),cn=new Array(sn).fill(0),Mn=zr.length;for(let un=0;un<Mn;un++)for(let rn=0;rn<sn;rn++)Yr[rn]+=zr[un][rn]||0;for(let un=0;un<sn;un++)Yr[un]/=Mn;for(let un=0;un<Mn;un++)for(let rn=0;rn<sn;rn++){const en=(zr[un][rn]||0)-Yr[rn];cn[rn]+=en*en}for(let un=0;un<sn;un++)cn[un]=cn[un]/Math.max(1,Mn);return{means:Yr,vars:cn}},Nn=pr=>{if(!pr||!pr.length)return{mean:0,median:0,std:0,min:0,max:0,count:0};pr.length;const zr=Array.from(pr).filter(rn=>isFinite(rn));if(!zr.length)return{mean:0,median:0,std:0,min:0,max:0,count:0};zr.sort((rn,en)=>rn-en);const Yr=zr.reduce((rn,en)=>rn+en,0)/zr.length,cn=zr.length%2===1?zr[(zr.length-1)/2]:(zr[zr.length/2-1]+zr[zr.length/2])/2,Mn=zr.reduce((rn,en)=>rn+Math.pow(en-Yr,2),0),un=Math.sqrt(Mn/zr.length);return{mean:Yr,median:cn,std:un,min:zr[0],max:zr[zr.length-1],count:zr.length}},Hi=async(pr,zr=0,sn=null)=>{if(!pr)return null;try{const Yr=pr.sampleRate||44100,cn=2048,Mn=1024,un=Math.max(0,Math.floor(zr*Yr)),rn=Math.min(pr.length,Math.floor((sn||pr.duration)*Yr)),en=pr.getChannelData(0),Wn=[],Kn=[],ki=[],Ci=[],Wi=[],oa=[];for(let js=un;js+64<rn;js+=Mn){const Co=Math.min(js+cn,rn),us=en.slice(js,Co);if(us.length<cn){const Fi=new Float32Array(cn);Fi.set(us,0);try{const Di=bo&&bo.extract?bo.extract(["rms","spectralCentroid","mfcc","spectralRolloff"],Fi):null;Di&&(Di.mfcc&&Wn.push(Di.mfcc),Di.spectralCentroid!=null&&Kn.push(Di.spectralCentroid),Di.spectralRolloff!=null&&ki.push(Di.spectralRolloff),Di.rms!=null&&Ci.push(Di.rms))}catch{}}else try{const Fi=bo&&bo.extract?bo.extract(["rms","spectralCentroid","mfcc","spectralRolloff"],us):null;Fi&&(Fi.mfcc&&Wn.push(Fi.mfcc),Fi.spectralCentroid!=null&&Kn.push(Fi.spectralCentroid),Fi.spectralRolloff!=null&&ki.push(Fi.spectralRolloff),Fi.rms!=null&&Ci.push(Fi.rms))}catch{}try{let Fi=0;for(let Di=1;Di<us.length;Di++)us[Di-1]>=0!=us[Di]>=0&&Fi++;Wi.push(Fi/Math.max(1,us.length))}catch{}try{if(typeof eg=="function"){const Fi=ar&&ar.audioContext?ar.audioContext.createBuffer(1,us.length,Yr):null;if(Fi){Fi.copyToChannel(us,0,0);const Di=eg(Fi)||0;Di&&oa.push(Di)}}}catch{}}const Gi=Bi(Wn),Ks=Nn(oa),kr=Nn(Kn),Hs=Nn(ki),eo=Nn(Ci),uo=Nn(Wi);return{mfccFramesCount:Wn.length,mfccMeans:Gi.means,mfccVars:Gi.vars,pitchStats:Ks,spectralCentroidMean:kr.mean,spectralCentroidStd:kr.std,spectralRolloffMean:Hs.mean,energyMean:eo.mean,energyStd:eo.std,zcrMean:uo.mean,zcrStd:uo.std}}catch(Yr){return console.warn("extractFeaturesFromAudioBuffer failed",Yr),null}},ri=async()=>{var zr;const pr=!!(ar&&ar.currentAnalysis&&ar.currentAnalysis.audioBlob);if(!ar||!Nr.trim()&&!pr){qe("❌ Please record or import an audio sample first!");return}s(!0),qe(`🎯 Training ${n} emotion...`);try{const sn=ar.currentAnalysis||{};let Yr={pitch:sn.pitch||0,volume:(sn.volume||0)/100,spectralCentroid:sn.spectralCentroid||0,mfccMeans:[],mfccVars:[],pitchStats:{},spectralRolloffMean:0,energyMean:0,zcrMean:0};try{if(Bt&&Hr>dr+.05){const en=await Hi(Bt,dr,Hr);en&&(Yr={...Yr,pitch:en.pitchStats&&en.pitchStats.median||Yr.pitch,volume:Math.max(0,Math.min(1,en.energyMean||Yr.volume)),spectralCentroid:en.spectralCentroidMean||Yr.spectralCentroid,mfccMeans:en.mfccMeans||Yr.mfccMeans,mfccVars:en.mfccVars||Yr.mfccVars,pitchStats:en.pitchStats||{},spectralRolloffMean:en.spectralRolloffMean||0,energyMean:en.energyMean||0,zcrMean:en.zcrMean||0})}else if(sn&&sn.mfcc&&sn.mfcc.length){const en=Bi(sn.mfcc||[]);Yr.mfccMeans=en.means,Yr.mfccVars=en.vars}}catch(en){console.warn("Feature extraction during training prep failed",en)}let cn=null;try{Bt&&Hr>dr+.05?cn=_i(Bt,dr,Hr):sn.audioBlob&&(cn=sn.audioBlob)}catch(en){console.warn("Failed to prepare audio blob for training:",en)}const Mn=await ar.addTrainingSample(n,Yr,Nr,cn);if(_(ar.getTrainingStats()),xe(ar.getUserCalibration()),Ve(ar.getSessionStats()),await pn(),Zt)try{wr("Uploading...");const en=new FormData;if(en.append("emotion",n),en.append("transcript",Nr||""),en.append("features",JSON.stringify(Yr||{})),cn){const ki=cn.type||"";let Ci=".wav";ki.includes("webm")||ki.includes("opus")?Ci=".webm":ki.includes("mpeg")||ki.includes("mp3")?Ci=".mp3":ki.includes("ogg")?Ci=".ogg":ki.includes("wav")&&(Ci=".wav"),en.append("audio",cn,`${Mn.id}${Ci}`)}const Wn=Ft||localStorage.getItem("remoteVoiceTrainingUrl")||"http://localhost:4000/upload";console.debug("Uploading single sample to",Wn,{sampleId:Mn.id,emotion:n,hasAudio:!!cn});const Kn=await fetch(Wn,{method:"POST",body:en});if(Kn.ok)wr("Uploaded ✅");else{const ki=await Kn.text().catch(()=>"");console.warn("Upload failed",Kn.status,Kn.statusText,ki),wr("Upload failed")}}catch(en){console.warn("Remote upload error",en),wr("Upload error")}const un=d[n],rn=((zr=N[n])==null?void 0:zr.voiceSamples)||0;qe(`✅ Successfully trained ${n} emotion! 
        Memory: ${(un==null?void 0:un.count)||0} samples, Voice Storage: ${rn} recordings, 
        Accuracy: ${(un==null?void 0:un.accuracy)||0}%`),setTimeout(()=>qe(""),4e3)}catch(sn){qe("❌ Training failed. Please try again."),console.error("Training error:",sn)}s(!1)},ti=()=>{if(!ar)return;const pr=ar.exportTrainingData(),zr=new Blob([JSON.stringify(pr,null,2)],{type:"application/json"}),sn=URL.createObjectURL(zr),Yr=document.createElement("a");Yr.href=sn,Yr.download=`voice-emotion-training-${new Date().toISOString().split("T")[0]}.json`,Yr.click(),URL.revokeObjectURL(sn),qe("📥 Training data exported successfully!"),setTimeout(()=>qe(""),3e3)},Jn=async()=>{const pr=localStorage.getItem("remoteVoiceTrainingUrl");if(!pr){qe("⚠️ remoteVoiceTrainingUrl not set in localStorage"),setTimeout(()=>qe(""),3e3);return}qe("⏳ Uploading samples to server...");try{if(!Cr){qe("❌ Voice manager not available. Initialize the analyzer first."),setTimeout(()=>qe(""),3e3);return}const zr=await Cr.voiceStorage.getVoiceSamples();let sn=0;for(const Yr of zr){try{await Cr.voiceStorage.updateUploadStatus(Yr.id,"uploading");const cn=new FormData;if(cn.append("emotion",Yr.emotion),cn.append("transcript",Yr.transcript||""),cn.append("features",JSON.stringify(Yr.voiceFeatures||{})),Yr.audioBlob){const un=Yr.audioBlob.type||"";let rn=".wav";un.includes("webm")||un.includes("opus")?rn=".webm":un.includes("mpeg")||un.includes("mp3")?rn=".mp3":un.includes("ogg")?rn=".ogg":un.includes("wav")&&(rn=".wav"),cn.append("audio",Yr.audioBlob,`${Yr.id}${rn}`)}console.debug("Bulk uploading sample",Yr.id,pr);const Mn=await fetch(pr,{method:"POST",body:cn});if(Mn.ok)sn++,await Cr.voiceStorage.updateUploadStatus(Yr.id,"uploaded");else{let un="";try{un=await Mn.text()}catch{}console.warn("Bulk upload failed for",Yr.id,Mn.status,Mn.statusText,un),await Cr.voiceStorage.updateUploadStatus(Yr.id,"failed")}}catch(cn){console.warn("upload sample failed",Yr.id,cn);try{await Cr.voiceStorage.updateUploadStatus(Yr.id,"failed")}catch{}}qe(`Uploading... ${sn}/${zr.length}`)}qe(`✅ Uploaded ${sn}/${zr.length} samples`),setTimeout(()=>qe(""),3e3)}catch(zr){console.warn("pushAllToServer error",zr),qe("❌ Failed to push samples"),setTimeout(()=>qe(""),3e3)}},Ca=async()=>{const pr=localStorage.getItem("remoteVoiceTrainingUrl");if(!pr){qe("⚠️ remoteVoiceTrainingUrl not set"),setTimeout(()=>qe(""),2e3);return}qe("⏳ Retrying failed uploads...");try{if(!Cr){qe("❌ Voice manager not available. Initialize the analyzer first."),setTimeout(()=>qe(""),3e3);return}const zr=await Cr.voiceStorage.getSamplesByUploadStatus("failed");let sn=0;for(const Yr of zr)try{await Cr.voiceStorage.updateUploadStatus(Yr.id,"uploading");const cn=new FormData;cn.append("emotion",Yr.emotion),cn.append("transcript",Yr.transcript||""),cn.append("features",JSON.stringify(Yr.voiceFeatures||{})),Yr.audioBlob&&cn.append("audio",Yr.audioBlob,`${Yr.id}.wav`),(await fetch(pr,{method:"POST",body:cn})).ok?(sn++,await Cr.voiceStorage.updateUploadStatus(Yr.id,"uploaded")):await Cr.voiceStorage.updateUploadStatus(Yr.id,"failed")}catch{await Cr.voiceStorage.updateUploadStatus(Yr.id,"failed")}qe(`✅ Retried ${sn}/${zr.length}`),setTimeout(()=>qe(""),2e3)}catch{qe("❌ Retry failed"),setTimeout(()=>qe(""),2e3)}},Ni=async()=>{if(!ar)return;const pr=ar.exportTrainingData().trainingData,zr=Object.values(pr).flat();if(zr.length<10){qe("❌ Need at least 10 samples to train a model");return}ot(!0),qe("🧠 Training model (worker)...");const sn=Array.from(new Set(zr.map(cn=>cn.emotion))),Yr={};if(sn.forEach((cn,Mn)=>Yr[cn]=Mn),st)try{st.postMessage({type:"train",payload:{samples:zr,labelsMap:Yr,mfccLen:13,epochs:40,batchSize:8}})}catch(cn){console.warn("Worker training failed, falling back",cn),qe("❌ Worker training failed, falling back to main thread")}else try{const cn=O9(zr,Yr,13),Mn=await I9(cn.xs.shape[1],sn.length);await B9(Mn,cn,40,8,(un,rn)=>{It({epoch:un,logs:rn})}),await H9(Mn,"local-voice-model");try{localStorage.setItem("local-voice-model_meta",JSON.stringify({labelsMap:Yr,norm:cn.norm}))}catch{}Oe(Mn),qe("✅ Model trained and saved locally")}catch(cn){console.error("Main thread training failed",cn),qe("❌ Main thread training failed")}ot(!1)},si=async()=>{if(!ar)return;await ar.loadMlModelAndMeta("local-voice-model")?(Oe(ar.mlModel),qe("✅ Model loaded into analyzer")):qe("❌ No model found or failed to load"),setTimeout(()=>qe(""),2e3)},ui=pr=>{const zr=pr.target.files[0];if(!zr||!ar)return;const sn=new FileReader;sn.onload=Yr=>{try{const cn=JSON.parse(Yr.target.result);ar.importTrainingData(cn),_(ar.getTrainingStats()),qe("📤 Training data imported successfully!"),setTimeout(()=>qe(""),3e3)}catch(cn){qe("❌ Failed to import training data."),console.error("Import error:",cn)}},sn.readAsText(zr)},ea=async()=>{if(ar&&window.confirm("⚠️ This will permanently delete ALL voice recordings and training data. Continue?"))try{qe("🗑️ Clearing all stored data..."),await ar.clearStoredSamples(),ar.trainingManager.clearTrainingData(),localStorage.removeItem("voiceEmotionUserCalibration"),localStorage.removeItem("voiceEmotionSessionStats"),_(ar.getTrainingStats()),xe(ar.getUserCalibration()),Ve(ar.getSessionStats()),await pn(),qe("✅ All training data and voice recordings cleared!"),setTimeout(()=>qe(""),3e3)}catch(pr){qe("❌ Failed to clear storage."),console.error("Clear storage error:",pr)}},wa=Ri.find(pr=>pr.id===n),Yi=Object.values(d).reduce((pr,zr)=>pr+(zr.count||0),0),As=Object.values(d).reduce((pr,zr)=>pr+(zr.accuracy||0),0)/10;return o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"20px"},children:[o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[o.jsx("h2",{style:{margin:"0 0 20px 0",color:"#1f2937",fontSize:"2rem"},children:"🎯 AI Training Center"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"24px"},children:[o.jsxs("div",{style:{background:"#f0f9ff",padding:"20px",borderRadius:"12px",textAlign:"center",border:"2px solid #0ea5e9"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:"📊"}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#0369a1"},children:Yi}),o.jsx("div",{style:{color:"#6b7280"},children:"Total Samples"})]}),o.jsxs("div",{style:{background:"#f0fdf4",padding:"20px",borderRadius:"12px",textAlign:"center",border:"2px solid #22c55e"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:"🎯"}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#16a34a"},children:[Math.round(As),"%"]}),o.jsx("div",{style:{color:"#6b7280"},children:"Avg Accuracy"})]}),o.jsxs("div",{style:{background:"#fef3c7",padding:"20px",borderRadius:"12px",textAlign:"center",border:"2px solid #f59e0b"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:"🤖"}),o.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#d97706"},children:Yi>50?"Advanced":Yi>20?"Trained":"Learning"}),o.jsx("div",{style:{color:"#6b7280"},children:"AI Status"})]})]}),Ye&&o.jsx("div",{style:{background:Ye.includes("❌")?"#fef2f2":"#f0fdf4",border:Ye.includes("❌")?"2px solid #ef4444":"2px solid #22c55e",color:Ye.includes("❌")?"#dc2626":"#16a34a",padding:"16px",borderRadius:"8px",marginBottom:"20px",textAlign:"center",fontSize:"1.1rem"},children:Ye})]}),o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:"💾 Voice Storage & User Calibration"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"20px"},children:[o.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"#475569"},children:"🎤 Voice Storage"}),o.jsxs("div",{style:{fontSize:"0.9em",color:"#64748b"},children:[o.jsxs("div",{children:["Total Voice Samples: ",o.jsx("strong",{children:Object.values(N).reduce((pr,zr)=>pr+(zr.voiceSamples||0),0)})]}),o.jsxs("div",{children:["Storage Size: ",o.jsxs("strong",{children:[Math.round(Object.values(N).reduce((pr,zr)=>pr+(zr.totalSize||0),0)/1024),"KB"]})]}),o.jsxs("div",{children:["Last Recording: ",o.jsx("strong",{children:((oi=Object.values(N).reduce((pr,zr)=>zr.lastSample&&(!pr||new Date(zr.lastSample)>new Date(pr))?zr.lastSample:pr,null))==null?void 0:oi.split("T")[0])||"Never"})]})]})]}),o.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"#475569"},children:"🎚️ Voice Calibration"}),o.jsxs("div",{style:{fontSize:"0.9em",color:"#64748b"},children:[o.jsxs("div",{children:["Baseline Pitch: ",o.jsxs("strong",{children:[Math.round(ye.baselinePitch||150),"Hz"]})]}),o.jsxs("div",{children:["Pitch Range: ",o.jsxs("strong",{children:[Math.round(((zi=ye.pitchRange)==null?void 0:zi.min)||80),"-",Math.round(((Cs=ye.pitchRange)==null?void 0:Cs.max)||400),"Hz"]})]}),o.jsxs("div",{children:["Training Samples: ",o.jsx("strong",{children:ye.samplesCount||0})]}),o.jsxs("div",{children:["Last Calibrated: ",o.jsx("strong",{children:((Os=ye.lastCalibrated)==null?void 0:Os.split("T")[0])||"Never"})]})]})]}),o.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"#475569"},children:"📈 Session Stats"}),o.jsxs("div",{style:{fontSize:"0.9em",color:"#64748b"},children:[o.jsxs("div",{children:["Total Sessions: ",o.jsx("strong",{children:Ce.sessionsCount||0})]}),o.jsxs("div",{children:["Session Samples: ",o.jsx("strong",{children:Ce.totalSamples||0})]}),o.jsxs("div",{children:["Average Accuracy: ",o.jsxs("strong",{children:[Ce.averageAccuracy||0,"%"]})]}),o.jsxs("div",{children:["Last Session: ",o.jsx("strong",{children:((mn=Ce.lastSession)==null?void 0:mn.split("T")[0])||"Never"})]})]})]})]}),o.jsx("div",{style:{background:"#eff6ff",padding:"16px",borderRadius:"8px",border:"1px solid #3b82f6",textAlign:"center"},children:o.jsxs("div",{style:{color:"#1e40af",fontSize:"0.9em"},children:["💡 ",o.jsx("strong",{children:"Enhanced Storage:"})," Your voice samples are now stored persistently using IndexedDB. Voice calibration data helps improve emotion detection accuracy for your unique voice patterns."]})})]}),o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:"📈 Training Progress by Emotion"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:Ri.map(pr=>{const zr=d[pr.id]||{count:0,accuracy:0},sn=N[pr.id]||{voiceSamples:0},Yr=Math.min(100,zr.count/10*100);return o.jsxs("div",{style:{background:zr.count>0?pr.color:"#f3f4f6",color:zr.count>0?"white":"#6b7280",padding:"16px",borderRadius:"12px",textAlign:"center",transition:"all 0.3s ease"},children:[o.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"8px"},children:pr.label.split(" ")[1]}),o.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"4px"},children:[zr.count," samples"]}),o.jsxs("div",{style:{fontSize:"0.9rem",marginBottom:"4px"},children:[zr.accuracy,"% accuracy"]}),o.jsxs("div",{style:{fontSize:"0.8rem",marginBottom:"8px",opacity:.9},children:["📼 ",sn.voiceSamples," voice recordings"]}),o.jsx("div",{style:{background:"rgba(255,255,255,0.3)",height:"4px",borderRadius:"2px",overflow:"hidden"},children:o.jsx("div",{style:{background:"white",height:"100%",width:`${Yr}%`,transition:"width 0.5s ease"}})})]},pr.id)})})]}),o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:"🎤 Train New Emotion Sample"}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"1.1rem",fontWeight:"600",color:"#1f2937"},children:"Select Emotion to Train:"}),o.jsx("select",{value:n,onChange:pr=>i(pr.target.value),style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #d1d5db",fontSize:"1rem",background:"white"},children:Ri.map(pr=>o.jsx("option",{value:pr.id,children:pr.label},pr.id))})]}),wa&&o.jsxs("div",{style:{background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"12px",padding:"20px",marginBottom:"24px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:wa.label.split(" ")[1]}),o.jsxs("div",{style:{fontSize:"1.1rem",color:"#0369a1",fontWeight:"600",marginBottom:"8px"},children:["Training: ",wa.label.split(" ")[0]]}),o.jsx("div",{style:{fontSize:"1rem",color:"#0369a1"},children:wa.instruction})]}),o.jsxs("div",{style:{background:"#f3f4f6",border:"2px solid #d1d5db",borderRadius:"12px",padding:"20px",marginBottom:"24px",textAlign:"center"},children:[o.jsx("h4",{style:{margin:"0 0 15px 0",color:"#1f2937"},children:"🎤 Voice Recording"}),o.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center",alignItems:"center",marginBottom:"15px"},children:[Xr?o.jsx("button",{onClick:Hn,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #ef4444, #dc2626)",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:"🛑 Stop Recording"}):o.jsx("button",{onClick:On,disabled:!ar,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:ar?"linear-gradient(135deg, #22c55e, #16a34a)":"#9ca3af",border:"none",borderRadius:"8px",cursor:ar?"pointer":"not-allowed",transition:"all 0.2s"},children:"🎤 Start Recording"}),o.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:["🎧 Import audio",o.jsx("input",{type:"file",accept:"audio/*",onChange:kn,style:{display:"inline-block"}})]})]}),o.jsxs("div",{style:{fontSize:"0.9rem",color:"#6b7280"},children:["Status: ",Xr?"🔴 Recording...":Nr?"✅ Ready to train":"⏳ No recording yet"]}),Nr&&o.jsxs("div",{style:{marginTop:"10px",padding:"8px 12px",background:"#e5e7eb",borderRadius:"6px",fontSize:"0.85rem",color:"#374151"},children:['Sample: "',Nr.substring(0,50),Nr.length>50?"...":"",'"']}),Sr&&o.jsxs("div",{style:{marginTop:12},children:[o.jsx("audio",{ref:Oi,controls:!0,src:Sr,style:{width:"100%"},onTimeUpdate:Ai,onEnded:()=>$a(!1)}),o.jsxs("div",{style:{marginTop:10},children:[o.jsx("canvas",{ref:Ya,style:{width:"100%",height:100,background:"#eef2ff",borderRadius:8}}),o.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,alignItems:"center"},children:[o.jsxs("label",{children:["Start: ",o.jsx("input",{type:"number",step:"0.1",value:dr,onChange:pr=>Pr(Math.max(0,Math.min(parseFloat(pr.target.value||0),(Bt==null?void 0:Bt.duration)||0))),style:{width:80}})]}),o.jsxs("label",{children:["End: ",o.jsx("input",{type:"number",step:"0.1",value:Hr,onChange:pr=>Wr(Math.max(0,Math.min(parseFloat(pr.target.value||0),(Bt==null?void 0:Bt.duration)||0))),style:{width:80}})]}),o.jsx("button",{onClick:Pi,style:{padding:"6px 12px"},children:"Play Trimmed"}),o.jsx("button",{onClick:ba,style:{padding:"6px 12px"},children:"Download Trimmed"}),o.jsxs("div",{style:{marginLeft:"auto",fontSize:"0.9rem",color:"#374151"},children:["Preview Emotion: ",o.jsx("strong",{children:((Bs=ar==null?void 0:ar.currentAnalysis)==null?void 0:Bs.dominantEmotion)||"unknown"})]})]})]})]})]}),o.jsxs("div",{style:{background:Xr?"#f0fdf4":"#fef3c7",border:Xr?"2px solid #22c55e":"2px solid #f59e0b",borderRadius:"12px",padding:"20px",marginBottom:"24px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:Xr?"#16a34a":"#d97706",marginBottom:"8px"},children:Xr?"🎤 Recording Active":"⏸️ Recording Stopped"}),o.jsxs("div",{style:{color:Xr?"#16a34a":"#d97706",fontSize:"1rem"},children:['Current transcript: "',Nr||"No speech detected",'"']})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("button",{onClick:ri,disabled:a||!Nr.trim()&&!Sr,style:{padding:"16px 32px",fontSize:"1.2rem",fontWeight:"600",color:"white",background:a?"#9ca3af":"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"25px",cursor:a||!Nr.trim()?"not-allowed":"pointer",boxShadow:"0 6px 20px rgba(16, 185, 129, 0.4)",marginBottom:"16px",marginRight:"16px"},children:a?"🎯 Training...":`🎯 Train ${wa==null?void 0:wa.label.split(" ")[0]} Emotion`}),o.jsx("button",{onClick:Ni,disabled:We,style:{marginLeft:12,padding:"16px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:We?"#9ca3af":"linear-gradient(135deg, #3b82f6, #1d4ed8)",border:"none",borderRadius:"12px",cursor:We?"not-allowed":"pointer"},children:We?"🧠 Training Model...":"🧠 Train ML Model"}),o.jsx("button",{onClick:si,style:{marginLeft:12,padding:"16px 20px",borderRadius:12},children:"Load ML Model"}),o.jsxs("label",{style:{marginLeft:12,fontSize:"0.95rem"},children:[o.jsx("input",{type:"checkbox",checked:(ar==null?void 0:ar.useMlDetection)||!1,onChange:pr=>{ar&&(ar.useMlDetection=pr.target.checked,Oe(ar.mlModel))}})," Use ML Detection"]})]}),o.jsxs("div",{style:{fontSize:"0.9rem",color:"#6b7280",textAlign:"center",lineHeight:"1.5"},children:["1. Start recording in the Detection tab",o.jsx("br",{}),"2. Speak the suggested phrase with the target emotion",o.jsx("br",{}),'3. Come back here and click "Train Emotion"',o.jsx("br",{}),"4. Repeat for better accuracy"]})]}),o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:"💾 Training Data Management"}),o.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx("button",{onClick:ti,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",border:"none",borderRadius:"8px",cursor:"pointer"},children:"📥 Export Training Data"}),o.jsx("button",{onClick:()=>{if(!ar)return;const pr=ar.exportTrainingData(),zr=[],sn=["id","emotion","pitch","pitch_median","pitch_mean","volume","spectralCentroid","spectralRolloff","energy","zcr","mfccMeans","mfccVars","transcript","timestamp"];zr.push(sn.join(",")),Object.values(pr.trainingData).flat().forEach(un=>{const rn=un.voiceFeatures||{},en=[un.id,un.emotion,rn.pitch||"",rn.pitchStats&&rn.pitchStats.median||"",rn.pitchStats&&rn.pitchStats.mean||"",rn.volume||"",rn.spectralCentroid||"",rn.spectralRolloffMean||"",rn.energyMean||"",rn.zcrMean||"",'"'+(rn.mfccMeans?rn.mfccMeans.join(";"):"")+'"','"'+(rn.mfccVars?rn.mfccVars.join(";"):"")+'"','"'+(un.transcript?un.transcript.replace(/"/g,'""'):"")+'"',un.timestamp||""];zr.push(en.join(","))});const Yr=new Blob([zr.join(`
`)],{type:"text/csv"}),cn=URL.createObjectURL(Yr),Mn=document.createElement("a");Mn.href=cn,Mn.download=`voice-features-${new Date().toISOString().split("T")[0]}.csv`,Mn.click(),URL.revokeObjectURL(cn),qe("📥 Features CSV exported"),setTimeout(()=>qe(""),2e3)},style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #14b8a6, #0ea5a2)",border:"none",borderRadius:"8px",cursor:"pointer"},children:"📊 Export Features CSV"}),o.jsx("button",{onClick:Jn,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",borderRadius:"8px",cursor:"pointer"},children:"🔁 Push All to Server"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginLeft:"8px"},children:[o.jsx("input",{type:"text",value:Ft,onChange:pr=>pt(pr.target.value),placeholder:"http://localhost:4000/upload",style:{padding:"10px",borderRadius:"6px",border:"1px solid #ddd",minWidth:"320px"}}),o.jsx("button",{onClick:()=>{localStorage.setItem("remoteVoiceTrainingUrl",Ft),Jt(!!Ft),wr("Saved"),setTimeout(()=>wr(""),2e3)},style:{padding:"10px 14px",borderRadius:"6px",background:"#06b6d4",color:"white",border:"none"},children:"💾 Save"}),o.jsx("button",{onClick:async()=>{try{const pr=await fetch(Ft,{method:"OPTIONS"});wr(pr.ok?"OK":`Err ${pr.status}`)}catch{wr("Failed")}setTimeout(()=>wr(""),2e3)},style:{padding:"10px 14px",borderRadius:"6px",background:"#8b5cf6",color:"white",border:"none"},children:"🔗 Test"}),o.jsx("div",{style:{minWidth:"80px",color:"#374151",fontWeight:600},children:lr})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginLeft:"8px"},children:[o.jsx("button",{onClick:async()=>{const pr=await Cr.voiceStorage.getSamplesByUploadStatus("failed");if(!pr||pr.length===0){qe("No failed uploads"),setTimeout(()=>qe(""),2e3);return}Ca()},style:{padding:"10px 14px",borderRadius:"6px",background:"#f59e0b",color:"white",border:"none"},children:"🔁 Retry Failed"}),o.jsx("div",{style:{color:"#6b7280",fontWeight:600}})]}),o.jsxs("label",{style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"none",borderRadius:"8px",cursor:"pointer"},children:["📤 Import Training Data",o.jsx("input",{type:"file",accept:".json",onChange:ui,style:{display:"none"}})]}),o.jsx("button",{onClick:ea,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #ef4444, #dc2626)",border:"none",borderRadius:"8px",cursor:"pointer"},children:"🗑️ Clear All Storage"})]})]})]})},Y9=()=>{const[t,e]=Wt.useState(!1),[r,n]=Wt.useState(""),[i,a]=Wt.useState(null),[s,d]=Wt.useState(null),[_,N]=Wt.useState([]),[I,ye]=Wt.useState(null),[xe,Ce]=Wt.useState(!1),[Ve,Ye]=Wt.useState(!0),[qe,ze]=Wt.useState({userBaseline:null,calibrated:!1}),[Oe,We]=Wt.useState(!1),[ot,st]=Wt.useState("anger"),[Rt,wt]=Wt.useState([]),[It,er]=Wt.useState(null),[cr,Tr]=Wt.useState(null),[xr,lt]=Wt.useState(null),[gt,Ft]=Wt.useState(!1),pt=Wt.useRef(null),Zt=Wt.useRef(null),Jt=Wt.useRef(null),lr=Wt.useRef(null),wr=Wt.useRef([]),Sr=Wt.useRef([]),vr=Wt.useRef({pitch:null,rmsEnergy:null,zeroCrossingRate:null,speechRate:null}),Bt=Wt.useRef([]),yr={joy:{textPatterns:[/\b(happy|excited|wonderful|amazing|fantastic|great|awesome|love|enjoy|delighted|thrilled|cheerful|joyful|pleased|glad|elated|brilliant|excellent|perfect)\b/gi,/\b(yay|hooray|wow|yes|definitely|absolutely|certainly|incredible|terrific|outstanding|superb|magnificent|marvelous)\b/gi,/\b(celebrate|celebration|party|fun|laughter|smile|laughing|smiling|cheering|upbeat|positive|optimistic)\b/gi],voiceFeatures:{pitchRange:{min:160,max:380,optimal:240},energyLevel:{min:.5,max:1},speechRate:{min:1,max:2},tonalVariation:{min:.6,max:1}},bertWeight:.35,voiceWeight:.65},sadness:{textPatterns:[/\b(sad|depressed|upset|disappointed|hurt|miserable|unhappy|sorrowful|gloomy|dejected|melancholy|blue|down|low)\b/gi,/\b(terrible|awful|horrible|devastating|heartbreaking|tragic|unfortunate|hopeless|despair|lonely|empty|broken)\b/gi,/\b(crying|tears|weeping|sobbing|grieving|mourning|sorrow|regret|loss|grief|anguish|pain|suffering)\b/gi,/\b(failed|failure|lost|losing|gone|dead|died|death|goodbye|farewell|end|over|finished)\b/gi,/\b(nobody cares|no one understands|feel alone|all alone|can't go on|give up|what's the point|worthless|useless)\b/gi,/\b(miss you|missing|longing|wish|if only|should have|could have|regret|mistake|fault|blame)\b/gi],voiceFeatures:{pitchRange:{min:80,max:240,optimal:140},energyLevel:{min:.05,max:.45},speechRate:{min:.4,max:1.1},tonalVariation:{min:.1,max:.5}},bertWeight:.35,voiceWeight:.65},anger:{textPatterns:[/\b(angry|mad|furious|irritated|annoyed|frustrated|outraged|livid|enraged|irate|hostile|pissed|rage|raging|riled|steamed|boiling)\b/gi,/\b(hate|disgusted|appalled|infuriated|incensed|aggravated|fed up|sick of|can't stand|fed up with|had enough|done with)\b/gi,/\b(damn|hell|stupid|ridiculous|unacceptable|outrageous|bullshit|crap|nonsense|idiotic|moronic|insane|crazy|pathetic)\b/gi,/\b(fight|violence|kill|destroy|smash|break|punch|hit|attack|warfare|battle|crush|demolish|annihilate)\b/gi,/\b(what the hell|what the fuck|are you kidding me|you've got to be kidding|this is bullshit|enough is enough)\b/gi,/\b(shut up|get lost|go away|leave me alone|I don't care|whatever|screw this|screw you|forget it)\b/gi,/\b(why me|why now|not again|seriously|come on|give me a break|this sucks|this is terrible)\b/gi,/\b(listen here|how dare you|who do you think|you better|I swear|mark my words|I'll show you)\b/gi,/\b(threatening|warning|demanding|insisting|ordering|commanding|forcing|making me)\b/gi,/\b(hurry up|move it|get on with it|speed up|faster|now|immediately|right now|this instant)\b/gi,/\b(waited long enough|wasting my time|taking forever|slow as hell|what's taking so long)\b/gi,/\b(your fault|you did this|you caused|you're responsible|you screwed up|you messed up|you ruined)\b/gi,/\b(always doing|never listen|don't understand|don't get it|typical|figures|of course)\b/gi,/\b(absolutely furious|completely mad|totally pissed|extremely angry|really mad|so angry|very upset)\b/gi,/\b(can't believe|unbelievable|impossible|ridiculous|outrageous|insane|crazy|nuts)\b/gi],voiceFeatures:{pitchRange:{min:200,max:500,optimal:350},energyLevel:{min:.75,max:1},speechRate:{min:1.2,max:3},tonalVariation:{min:.8,max:1},volumeSpikes:{threshold:.8,frequency:3},harshConsonants:{threshold:.6}},bertWeight:.3,voiceWeight:.7},fear:{textPatterns:[/\b(afraid|scared|terrified|frightened|anxious|worried|nervous|panicked|alarmed|concerned|fearful|petrified|horrified)\b/gi,/\b(dangerous|risky|threatening|unsafe|insecure|vulnerable|terror|horror|nightmare|phobia|creepy|spooky|eerie)\b/gi,/\b(what if|might happen|could go wrong|disaster|catastrophe|emergency|crisis|panic|stress|anxiety|dread|doom)\b/gi,/\b(help me|save me|someone help|call for help|need help|rescue|escape|run away|hide|get away)\b/gi,/\b(can't breathe|heart racing|shaking|trembling|sweating|freezing|paralyzed|stuck|trapped|cornered)\b/gi,/\b(monster|ghost|demon|evil|dark|darkness|shadow|unknown|stranger|stalker|killer|death|dying)\b/gi],voiceFeatures:{pitchRange:{min:180,max:480,optimal:340},energyLevel:{min:.2,max:.9},speechRate:{min:1.1,max:2.8},tonalVariation:{min:.4,max:1}},bertWeight:.25,voiceWeight:.75},surprise:{textPatterns:[/\b(surprised|shocked|amazed|astonished|stunned|bewildered|confused|unexpected|sudden|startled|flabbergasted)\b/gi,/\b(suddenly|all of a sudden|out of nowhere|didn't expect|never thought|can't believe|who would have thought)\b/gi,/\b(wow|oh my|really|seriously|no way|unbelievable|incredible|extraordinary|mind-blowing|jaw-dropping)\b/gi,/\b(what|how|when|where|why|huh|eh|wait|hold on|hang on|stop|pause|excuse me)\b/gi,/\b(never seen|first time|brand new|just discovered|just found out|just learned|just realized|just noticed)\b/gi,/\b(plot twist|curveball|bombshell|revelation|discovery|breakthrough|game changer|turning point)\b/gi],voiceFeatures:{pitchRange:{min:200,max:550,optimal:400},energyLevel:{min:.3,max:1},speechRate:{min:.6,max:2.2},tonalVariation:{min:.5,max:1}},bertWeight:.2,voiceWeight:.8},neutral:{textPatterns:[/\b(okay|fine|normal|regular|standard|typical|usual|ordinary|average|alright)\b/gi,/\b(just|simply|basically|essentially|generally|probably|maybe|perhaps|suppose)\b/gi,/\b(think|believe|consider|assume|imagine|understand|know|see|hear)\b/gi],voiceFeatures:{pitchRange:{min:140,max:280,optimal:200},energyLevel:{min:.2,max:.7},speechRate:{min:.8,max:1.4},tonalVariation:{min:.2,max:.6}},bertWeight:.5,voiceWeight:.5}};Wt.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const Nr=window.webkitSpeechRecognition||window.SpeechRecognition;lr.current=new Nr,lr.current.continuous=!0,lr.current.interimResults=!0,lr.current.lang="en-US",lr.current.onresult=Xr=>{let Cr="";for(let pn=Xr.resultIndex;pn<Xr.results.length;pn++)Cr+=Xr.results[pn][0].transcript;n(Cr)},lr.current.onerror=Xr=>{console.error("Speech recognition error:",Xr.error)}}const ar=localStorage.getItem("voiceEmotionHistory");if(ar)try{N(JSON.parse(ar))}catch(Nr){console.error("Error loading analysis history:",Nr)}return()=>{lr.current&&lr.current.stop(),pt.current&&pt.current.state!=="inactive"&&pt.current.stop()}},[]);const dr=ar=>{const Nr=ar.sampleRate,Xr=ar.getChannelData(0),Cr=2048,pn=512,On=[];for(let _i=0;_i<Xr.length-Cr;_i+=pn){const Bi=Xr.slice(_i,_i+Cr),Nn=Wr(Bi,Nr);Nn>50&&Nn<800&&On.push(Nn)}if(Sr.current=On,On.length===0)return null;const Hn=On.reduce((_i,Bi)=>_i+Bi,0)/On.length,kn=Math.min(...On),Gn=Math.max(...On),ba=(Gn-kn)/Hn;let Pi=Hn,Ai=!1;if(!qe.userBaseline&&!qe.calibrated)ze({userBaseline:Hn,calibrated:!0,autoCalibrated:!0}),localStorage.setItem("pitchCalibration",JSON.stringify({userBaseline:Hn,calibrated:!0,autoCalibrated:!0})),Pi=Hn,Ai=!0;else if(qe.userBaseline&&qe.calibrated){const _i=Hn/qe.userBaseline;Pi=Hn*(1/_i)}return{average:Hn,calibrated:Pi,min:kn,max:Gn,variation:ba,data:On,autoCalibrated:Ai}},Pr=(ar,Nr,Xr=.35)=>{const Cr=vr.current;return Cr[ar]==null||Number.isNaN(Cr[ar])?Cr[ar]=Nr:Cr[ar]=Xr*Nr+(1-Xr)*Cr[ar],Cr[ar]},Hr=(ar,Nr=2500)=>{const Xr=Date.now()-Nr,Cr=ar.filter(kn=>kn.ts>=Xr);if(Cr.length===0)return null;const pn={};Cr.forEach(kn=>{pn[kn.label]||(pn[kn.label]={sum:0,count:0}),pn[kn.label].sum+=kn.confidence||0,pn[kn.label].count+=1});const On=Object.entries(pn).map(([kn,Gn])=>({label:kn,avg:Gn.sum/Gn.count,count:Gn.count}));On.sort((kn,Gn)=>Gn.avg*Gn.count-kn.avg*kn.count);const Hn=On[0];return Hn.count>=2||Hn.avg>.75?{label:Hn.label,confidence:Math.min(.99,Hn.avg)}:null},Wr=(ar,Nr)=>{const Xr=Math.floor(Nr/800),Cr=Math.floor(Nr/50);let pn=0,On=0;for(let Hn=Xr;Hn<=Cr;Hn++){let kn=0;for(let Gn=0;Gn<ar.length-Hn;Gn++)kn+=ar[Gn]*ar[Gn+Hn];kn>pn&&(pn=kn,On=Hn)}return On>0?Nr/On:0},Pn=async(ar,Nr)=>{try{const Cr=(await Mo(()=>Promise.resolve().then(()=>TC),void 0).then(Nn=>Nn.analyzeEmotionWithBERT(ar))).map||{},pn={};Object.keys(yr).forEach(Nn=>{const Hi=Cr[Nn]||0;pn[Nn]={textScore:Hi,voiceScore:0,combinedScore:0}}),Nr&&Object.entries(yr).forEach(([Nn,Hi])=>{let ri=0;const ti=Hi.voiceFeatures,Jn=Nr.pitch&&(Nr.pitch.calibrated||Nr.pitch.average)?Nr.pitch.calibrated||Nr.pitch.average:Nr.pitch||0;if(Jn>=ti.pitchRange.min&&Jn<=ti.pitchRange.max){const Ca=Math.abs(Jn-ti.pitchRange.optimal),Ni=Math.max(ti.pitchRange.optimal-ti.pitchRange.min,ti.pitchRange.max-ti.pitchRange.optimal),si=Math.max(0,1-Ca/Math.max(1,Ni));ri+=si*.6}if(Nr.energy!=null&&ti.energyLevel){const Ca=(ti.energyLevel.min+ti.energyLevel.max)/2,Ni=Math.abs((Nr.energy||0)-Ca),si=Math.max(.01,ti.energyLevel.max-ti.energyLevel.min),ui=Math.max(0,1-Ni/si);ri+=ui*.5}Nr.pitch&&Nr.pitch.variation!=null&&Nr.pitch.variation>=ti.tonalVariation.min&&Nr.pitch.variation<=ti.tonalVariation.max&&(ri+=.25),ri=Math.max(0,Math.min(1,ri)),pn[Nn].voiceScore=ri});const On={};Object.entries(yr).forEach(([Nn,Hi])=>{const ri=pn[Nn].textScore||0,ti=pn[Nn].voiceScore||0,Jn=Hi.bertWeight||.4,Ca=Hi.voiceWeight||.6;On[Nn]=ri*Jn+ti*Ca});const Hn=Object.values(On).reduce((Nn,Hi)=>Nn+(Hi||0),0)||1,kn={};Object.keys(On).forEach(Nn=>kn[Nn]=Math.min(1,(On[Nn]||0)/Hn)),ar&&/\b(yeah right|sure|great job|fantastic|as if|nice going)\b/gi.test(ar)&&Nr&&(Nr.rmsEnergy||Nr.energy)<.25&&["joy","surprise"].forEach(Nn=>kn[Nn]=(kn[Nn]||0)*.5);const Pi=Object.entries(kn).map(([Nn,Hi])=>({label:Nn,score:Hi}));Pi.sort((Nn,Hi)=>Hi.score-Nn.score);const Ai=Pi[0]||{label:"neutral",score:0};let _i=Math.min(.98,Math.max(.4,Ai.score+.15));return Nr&&(_i=Math.min(.99,_i+.06)),ar&&ar.length>50&&(_i=Math.min(.99,_i+.03)),{emotion:Ai.label,confidence:_i,scores:kn,source:Nr?"bert-voice-integrated":"bert-text-only"}}catch(Xr){return console.warn("BERT analysis wrapper failed, falling back to lexical scoring",Xr),{emotion:"neutral",confidence:.6,scores:{neutral:.6},source:"fallback"}}},Rn=async()=>{try{wr.current=[];const ar=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:44100,channelCount:1,echoCancellation:!0,noiseSuppression:!0}});Zt.current=new(window.AudioContext||window.webkitAudioContext);const Nr=Zt.current.createMediaStreamSource(ar);Jt.current=Zt.current.createAnalyser(),Jt.current.fftSize=2048,Nr.connect(Jt.current),pt.current=new MediaRecorder(ar),pt.current.ondataavailable=Xr=>{Xr.data.size>0&&wr.current.push(Xr.data)},pt.current.onstop=async()=>{const Xr=new Blob(wr.current,{type:"audio/wav"});await Oi(Xr),ar.getTracks().forEach(Cr=>Cr.stop())},pt.current.start(100),e(!0),lr.current&&lr.current.start()}catch(ar){console.error("Error starting recording:",ar),alert("Error accessing microphone. Please ensure microphone permissions are granted.")}},Fn=()=>{pt.current&&pt.current.state!=="inactive"&&pt.current.stop(),lr.current&&lr.current.stop(),Zt.current&&Zt.current.close(),e(!1)},In=async ar=>{const Nr=ar&&ar.target&&ar.target.files&&ar.target.files[0];if(Nr){if(console.log("🎵 File upload started:",{name:Nr.name,size:Nr.size,type:Nr.type}),!Nr.type||!Nr.type.startsWith("audio")){alert("Please select a valid audio file (wav, mp3, m4a, etc.)"),ar.target.value="";return}try{Ce(!0),(!Zt.current||Zt.current.state==="closed")&&(Zt.current=new(window.AudioContext||window.webkitAudioContext)),console.log("🔄 Processing audio file with V3 processor...");let Xr=null;try{Xr=await Gg(Nr,Hn=>{console.debug("[V3 Audio Processor]",Hn)}),console.log("✅ V3 Processing result:",Xr)}catch(Hn){console.warn("File transcription failed, proceeding without transcript",Hn),Xr=null}const Cr=await Nr.arrayBuffer(),pn=new Blob([Cr],{type:Nr.type}),On=Xr&&Xr.transcript?Xr.transcript:null;console.log("📝 Extracted transcript:",On),await Oi(pn,On),console.log("🎉 Audio file analysis completed successfully!")}catch(Xr){console.error("❌ Failed to analyze uploaded audio file:",Xr),alert("Failed to analyze audio file: "+(Xr&&Xr.message?Xr.message:String(Xr)))}finally{ar&&ar.target&&(ar.target.value=""),Ce(!1)}}},sa=(ar,Nr)=>{const Xr=ar.getChannelData(0),Cr=ar.sampleRate,pn=ar.duration,On=dr(ar),Hn=Math.floor(Cr*.025),kn=Math.floor(Hn/2),Gn=[];for(let si=0;si<Xr.length-Hn;si+=kn){const ui=Xr.slice(si,si+Hn),ea=Math.sqrt(ui.reduce((wa,Yi)=>wa+Yi*Yi,0)/Hn);Gn.push(ea)}const ba=Math.max(...Gn),Pi=Math.min(...Gn),Ai=ba-Pi,_i=Gn.reduce((si,ui)=>si+Math.pow(ui-(ba+Pi)/2,2),0)/Gn.length,Nn=Xr.reduce((si,ui,ea)=>ea>0&&Math.sign(ui)!==Math.sign(Xr[ea-1])?si+1:si,0)/pn,Hi=ba*.1,ri=[];let ti=!1,Jn=0;Gn.forEach((si,ui)=>{si>Hi&&!ti?(ti=!0,Jn=ui):si<=Hi&&ti&&(ti=!1,ri.push((ui-Jn)*kn/Cr))});const Ca=ri.length>0?ri.reduce((si,ui)=>si+ui,0)/ri.length:0,Ni=Nn*800;return{pitch:On,energy:{rms:Math.sqrt(Xr.reduce((si,ui)=>si+ui*ui,0)/Xr.length),max:ba,min:Pi,dynamicRange:Ai,variance:_i},spectral:{zeroCrossingRate:Nn,formantEstimate:Ni,roughness:Nn>.15?1:0},temporal:{duration:pn,speechSegments:ri.length,avgSegmentLength:Ca,speechRate:Nr?Nr.split(/\s+/).length/pn:0}}},$a=(ar,Nr)=>{const Xr={anger:0,joy:0,sadness:0,fear:0,surprise:0,disgust:0,neutral:.3};if(ar.pitch&&ar.pitch.average){const kn=ar.pitch.average,Gn=ar.pitch.variation||0;kn>200&&Gn>50&&(Xr.joy+=.4,Xr.anger+=.3,Xr.surprise+=.3),kn<150&&(Xr.sadness+=.4,Xr.disgust+=.2),Gn>80&&(Xr.anger+=.3,Xr.joy+=.2,Xr.fear+=.2)}if(ar.energy){const kn=ar.energy.dynamicRange,Gn=(ar.energy.max+ar.energy.min)/2;Gn>.3&&kn>.2&&(Xr.anger+=.5,Xr.joy+=.4),Gn<.15&&(Xr.sadness+=.4,Xr.fear+=.3),ar.energy.variance>.05&&(Xr.anger+=.3,Xr.surprise+=.2)}if(ar.spectral&&(ar.spectral.zeroCrossingRate>.12&&(Xr.anger+=.4,Xr.disgust+=.3),ar.spectral.roughness>.5&&(Xr.anger+=.3,Xr.fear+=.2)),ar.temporal&&(ar.temporal.speechRate>3&&(Xr.joy+=.3,Xr.fear+=.3,Xr.anger+=.2),ar.temporal.speechRate<1.5&&(Xr.sadness+=.4),ar.temporal.avgSegmentLength<.5&&(Xr.anger+=.2,Xr.fear+=.3)),Nr&&Nr.length>0){const kn=Nr.toLowerCase();Object.entries({anger:["angry","mad","furious","hate","damn","hell","stupid","idiot","terrible","awful"],joy:["happy","excited","wonderful","amazing","fantastic","great","awesome","love","brilliant","excellent"],sadness:["sad","depressed","cry","tears","sorry","hurt","pain","lonely","empty","broken"],fear:["scared","afraid","terrified","worried","anxious","nervous","panic","frightened"],surprise:["wow","amazing","unbelievable","shocking","unexpected","sudden","surprising"],disgust:["disgusting","gross","horrible","nasty","revolting","sick","awful","terrible"]}).forEach(([Ai,_i])=>{const Bi=_i.filter(Nn=>kn.includes(Nn)).length;Xr[Ai]+=Bi*.3});const Pi=["very","extremely","really","so","totally","absolutely"].filter(Ai=>kn.includes(Ai)).length;Object.keys(Xr).forEach(Ai=>{Ai!=="neutral"&&Xr[Ai]>.1&&(Xr[Ai]+=Pi*.2)})}const Cr=Object.values(Xr).reduce((kn,Gn)=>kn+Gn,0),pn={};Object.entries(Xr).forEach(([kn,Gn])=>{pn[kn]=Gn/Cr});const On=Object.entries(pn).sort(([,kn],[,Gn])=>Gn-kn)[0],Hn=Math.min(.95,Math.max(.4,On[1]*2));return{emotion:On[0],confidence:Hn,scores:pn,source:"enhanced-audio-analysis"}},Oi=async(ar,Nr=null)=>{if(Ce(!0),Nr)try{n(Nr)}catch{}try{const Xr=await ar.arrayBuffer(),Cr=await Zt.current.decodeAudioData(Xr),pn=sa(Cr,Nr),On=$a(pn,Nr);console.log("🎵 Enhanced audio features:",pn),console.log("🎭 Enhanced emotion analysis:",On);const Hn=dr(Cr),kn=Cr.getChannelData(0),Gn=kn.reduce((oi,zi)=>oi+Math.abs(zi),0)/kn.length,ba=Math.sqrt(kn.reduce((oi,zi)=>oi+zi*zi,0)/kn.length),Pi=1024,Ai=[];for(let oi=0;oi<kn.length-Pi;oi+=Pi){const Cs=kn.slice(oi,oi+Pi).reduce((Os,mn)=>Os+Math.abs(mn),0)/Pi;Cs>Gn*1.5&&Ai.push(Cs)}let _i=0;for(let oi=1;oi<kn.length;oi++)kn[oi-1]>=0!=kn[oi]>=0&&_i++;const Bi=_i/kn.length,Nn=Nr!==null?Nr:r,Hi=Nn?Nn.split(/\s+/).length/Cr.duration:1,ri={pitch:Hn,energy:Gn,rmsEnergy:ba,duration:Cr.duration,volumeSpikes:{count:Ai.length,avgIntensity:Ai.length>0?Ai.reduce((oi,zi)=>oi+zi,0)/Ai.length:0},zeroCrossingRate:Bi,speech:{rate:Hi,wordsPerSecond:Nn?Nn.split(/\s+/).length/Cr.duration:0},enhanced:pn};let ti=null;try{if(gt&&It&&cr){const oi=Hn.average||0,zi=ba||Gn||0,Cs=Bi*2e3,Os=new Array(xr&&xr.stds?Math.max(0,xr.stds.length-3):13).fill(0),mn=[oi,zi,Cs,...Os];let Bs=mn;xr&&xr.means&&xr.stds&&(Bs=mn.map((un,rn)=>((un||0)-(xr.means[rn]||0))/(xr.stds[rn]||1)));const zr=(await Mo(()=>import("./index-BHGHb4RF.js"),__vite__mapDeps([0,1]))).tensor2d([Bs]),sn=It.predict(zr),Yr=sn.arraySync?sn.arraySync()[0]:await sn.data(),cn=Object.keys(cr).sort((un,rn)=>cr[un]-cr[rn]),Mn=Yr.indexOf(Math.max(...Yr));ti={label:cn[Mn]||null,probabilities:Yr,confidence:Math.max(...Yr)}}}catch(oi){console.warn("ML prediction failed in live analyzer",oi),ti=null}let Jn=await Pn(Nn,ri);Nr!==null&&(console.log("🔄 Comparing BERT vs Enhanced Audio Analysis:"),console.log("BERT Analysis:",Jn),console.log("Enhanced Audio Analysis:",On),Jn.confidence<.7||On.confidence>.8||Jn.emotion==="neutral"&&On.emotion!=="neutral"&&On.confidence>.6?(console.log("✅ Using Enhanced Audio Analysis (more confident)"),Jn=On):(console.log("✅ Using BERT Analysis (more confident)"),On.emotion===Jn.emotion&&(Jn.confidence=Math.min(.95,Jn.confidence+.15),Jn.source="bert-audio-aligned")));const Ca=Pr("pitch",ri.pitch&&ri.pitch.average?ri.pitch.average:ri.pitch||0),Ni=Pr("rmsEnergy",ri.rmsEnergy||ri.energy||0),si=Pr("zeroCrossingRate",ri.zeroCrossingRate||0),ui=Pr("speechRate",ri.speech?ri.speech.rate:0);if(ri.smoothed={pitch:Ca,rmsEnergy:Ni,zeroCrossingRate:si,speechRate:ui},r&&/\b(yeah right|sure|great job|fantastic|as if|nice going)\b/gi.test(r)&&ri.smoothed.rmsEnergy<.2&&(Jn&&Jn.scores&&Object.keys(Jn.scores).forEach(oi=>{Jn.scores[oi]=(Jn.scores[oi]||0)*.6}),Jn&&Jn.emotion==="joy"&&(Jn.confidence=Math.min(.5,Jn.confidence||.5))),ti&&ti.label){ti.confidence>.8&&Bt.current.push({label:ti.label,confidence:ti.confidence,ts:Date.now()}),Bt.current=Bt.current.slice(-12);const oi=Hr(Bt.current,3e3);oi&&(Jn={emotion:oi.label,confidence:oi.confidence,scores:{},source:"ml-voice-smoothed"})}const Yi={id:Date.now(),timestamp:new Date().toISOString(),transcript:Nn,voiceFeatures:ri,emotion:Jn,mlPrediction:ti,audioData:ar,bertIntegrated:Ve,calibrated:qe.calibrated};if(ye(Yi),a(Yi),Oe){const oi=Yi.emotion.emotion===ot,zi={target:ot,detected:Yi.emotion.emotion,confidence:Yi.emotion.confidence,correct:oi,timestamp:new Date().toISOString()};wt(Cs=>[zi,...Cs].slice(0,10))}const As=[Yi,..._].slice(0,50);N(As),localStorage.setItem("voiceEmotionHistory",JSON.stringify(As))}catch(Xr){console.error("Error processing audio:",Xr)}Ce(!1)},Ya=()=>{if(I&&I.voiceFeatures.pitch){const ar=I.voiceFeatures.pitch.average;ze({userBaseline:ar,calibrated:!0}),localStorage.setItem("pitchCalibration",JSON.stringify({userBaseline:ar,calibrated:!0}))}};Wt.useEffect(()=>{const ar=localStorage.getItem("pitchCalibration");if(ar)try{ze(JSON.parse(ar))}catch(Nr){console.error("Error loading pitch calibration:",Nr)}},[]);const Ri=ar=>{const Nr={joy:"#22c55e",sadness:"#3b82f6",anger:"#ef4444",fear:"#f59e0b",surprise:"#8b5cf6",neutral:"#6b7280"};return Nr[ar]||Nr.neutral};return o.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"20px",padding:"24px",color:"#fff",maxWidth:"100%",margin:"0 auto"},children:[o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("h2",{style:{fontSize:"2em",fontWeight:"bold",margin:"0 0 8px 0",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"🎤 Enhanced Voice Emotion Analyzer"}),o.jsx("p",{style:{fontSize:"1.1em",opacity:.9,margin:0},children:"Advanced BERT-integrated emotion detection with pitch calibration"})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.2)"},children:[o.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1.2em"},children:"🎯 Pitch Calibration Status"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[o.jsx("div",{style:{background:qe.calibrated?"rgba(34, 197, 94, 0.3)":"rgba(251, 191, 36, 0.3)",padding:"8px 16px",borderRadius:"8px",border:`1px solid ${qe.calibrated?"#22c55e":"#fbbf24"}`},children:qe.calibrated?qe.autoCalibrated?"✅ Auto-Calibrated":"✅ User Calibrated":"⚠️ Will Auto-Calibrate"}),qe.userBaseline&&o.jsxs("div",{style:{fontSize:"0.9em",opacity:.8},children:["Baseline: ",qe.userBaseline.toFixed(1)," Hz",qe.autoCalibrated&&" (Auto)"]}),o.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[o.jsx("button",{onClick:async()=>{const ar=localStorage.getItem("local-voice-model_meta");if(ar)try{const Nr=JSON.parse(ar);Tr(Nr.labelsMap||null),lt(Nr.norm||null)}catch(Nr){console.warn("Failed to parse ML meta",Nr)}try{const Nr=await A5("local-voice-model");Nr?(er(Nr),wt(Xr=>[{target:"model",detected:"loaded",correct:!0,confidence:1,timestamp:new Date().toISOString()},...Xr].slice(0,10)),alert("ML model loaded")):alert("No ML model found in local storage")}catch(Nr){console.warn("Failed to load model",Nr),alert("Failed to load model")}},style:{background:"rgba(59,130,246,0.8)",color:"#fff",border:"none",borderRadius:8,padding:"8px 12px"},children:"🧠 Load ML Model"}),o.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[o.jsx("input",{type:"checkbox",checked:gt,onChange:ar=>Ft(ar.target.checked)})," Use ML Detection"]})]}),I&&o.jsx("button",{onClick:Ya,style:{background:"rgba(34, 197, 94, 0.7)",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:"pointer",fontSize:"0.9em"},children:"📊 Update Baseline"}),qe.calibrated&&o.jsx("button",{onClick:()=>{ze({userBaseline:null,calibrated:!1}),localStorage.removeItem("pitchCalibration")},style:{background:"rgba(239, 68, 68, 0.7)",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:"pointer",fontSize:"0.9em"},children:"🔄 Reset"})]}),o.jsx("div",{style:{marginTop:"12px",fontSize:"0.85em",opacity:.7,fontStyle:"italic"},children:qe.calibrated?"Calibration improves emotion detection accuracy by adapting to your unique voice characteristics.":"Your first recording will automatically set your baseline pitch for improved accuracy."})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0"},children:"🎯 Emotion Training Mode"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px",flexWrap:"wrap"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("input",{type:"checkbox",checked:Oe,onChange:ar=>We(ar.target.checked),style:{marginRight:"8px"}}),o.jsx("span",{children:"Enable Training Mode"})]}),Oe&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{children:"Target Emotion:"}),o.jsxs("select",{value:ot,onChange:ar=>st(ar.target.value),style:{background:"rgba(0,0,0,0.3)",color:"#fff",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"6px",padding:"6px 12px"},children:[o.jsx("option",{value:"anger",children:"😠 Anger"}),o.jsx("option",{value:"sadness",children:"😢 Sadness"}),o.jsx("option",{value:"joy",children:"😊 Joy"}),o.jsx("option",{value:"fear",children:"😨 Fear"}),o.jsx("option",{value:"surprise",children:"😲 Surprise"}),o.jsx("option",{value:"neutral",children:"😐 Neutral"})]})]})]}),Oe&&o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[o.jsxs("h4",{style:{margin:"0 0 8px 0"},children:["🎭 Practice: ",ot.charAt(0).toUpperCase()+ot.slice(1)]}),o.jsxs("p",{style:{margin:"0",fontSize:"0.9em",opacity:.8},children:["Try to express ",o.jsx("strong",{children:ot})," in your voice.",ot==="anger"&&" Speak loudly, use high pitch, and sound frustrated or mad.",ot==="sadness"&&" Speak softly, use low pitch, and sound disappointed or hurt.",ot==="joy"&&" Speak with energy, use varied pitch, and sound happy or excited.",ot==="fear"&&" Speak with shaky voice, high pitch, and sound scared or worried.",ot==="surprise"&&" Use sudden high pitch, bursts of energy, and sound amazed.",ot==="neutral"&&" Speak in your normal, calm, everyday voice."]})]}),Rt.length>0&&Oe&&o.jsxs("div",{children:[o.jsx("h4",{style:{margin:"0 0 12px 0"},children:"📊 Training Results"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"200px",overflowY:"auto"},children:Rt.map((ar,Nr)=>o.jsxs("div",{style:{background:ar.correct?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${ar.correct?"#22c55e":"#ef4444"}`,padding:"8px 12px",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsxs("span",{style:{textTransform:"capitalize"},children:["Target: ",ar.target," → Detected: ",ar.detected]}),o.jsxs("span",{style:{marginLeft:"8px",fontSize:"0.9em",opacity:.8},children:["(",(ar.confidence*100).toFixed(1),"%)"]})]}),o.jsx("div",{style:{fontSize:"1.2em"},children:ar.correct?"✅":"❌"})]},Nr))}),o.jsxs("div",{style:{marginTop:"12px",fontSize:"0.9em",opacity:.8,textAlign:"center"},children:["Accuracy: ",(Rt.filter(ar=>ar.correct).length/Rt.length*100).toFixed(1),"%"]})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0"},children:"🎭 Emotion Training Guide"}),o.jsx("p",{style:{fontSize:"0.9em",opacity:.8,marginBottom:"16px"},children:"For best results, try these voice patterns when testing emotions:"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"12px"},children:[o.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#ef4444"},children:"😠 Anger"}),o.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:["• Speak loudly and with high energy",o.jsx("br",{}),"• Use higher pitch than normal",o.jsx("br",{}),"• Speak fast with sharp emphasis",o.jsx("br",{}),'• Use words like "angry", "frustrated", "mad"',o.jsx("br",{}),"• Add exclamation marks in speech",o.jsx("br",{}),`• Example: "I'm so angry! This is ridiculous!"`]})]}),o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.3)"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#3b82f6"},children:"😢 Sadness"}),o.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:["• Speak softly with low energy",o.jsx("br",{}),"• Use lower pitch than normal",o.jsx("br",{}),"• Speak slowly and monotone",o.jsx("br",{}),'• Use words like "sad", "disappointed", "hurt"',o.jsx("br",{}),"• Sound tired or defeated",o.jsx("br",{}),'• Example: "I feel so sad and disappointed..."']})]}),o.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#22c55e"},children:"😊 Joy"}),o.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:["• Speak with bright, upbeat energy",o.jsx("br",{}),"• Use moderate-high pitch",o.jsx("br",{}),"• Vary your tone (up and down)",o.jsx("br",{}),'• Use words like "happy", "excited", "wonderful"',o.jsx("br",{}),"• Sound enthusiastic and lively",o.jsx("br",{}),`• Example: "I'm so happy and excited about this!"`]})]}),o.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(245, 158, 11, 0.3)"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#f59e0b"},children:"😨 Fear"}),o.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:["• Speak with shaky, unstable voice",o.jsx("br",{}),"• Use high pitch with tremor",o.jsx("br",{}),"• Speak fast or hesitantly",o.jsx("br",{}),'• Use words like "scared", "afraid", "worried"',o.jsx("br",{}),"• Sound nervous or panicked",o.jsx("br",{}),`• Example: "I'm really scared and worried about this!"`]})]}),o.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#8b5cf6"},children:"😲 Surprise"}),o.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:["• Speak with sudden high pitch",o.jsx("br",{}),"• Use burst of energy",o.jsx("br",{}),"• Vary speech rate (pause then rush)",o.jsx("br",{}),'• Use words like "wow", "really?", "unexpected"',o.jsx("br",{}),"• Sound startled or amazed",o.jsx("br",{}),`• Example: "Wow! That's really surprising!"`]})]}),o.jsxs("div",{style:{background:"rgba(107, 114, 128, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(107, 114, 128, 0.3)"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#6b7280"},children:"😐 Neutral"}),o.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:["• Speak in your normal voice",o.jsx("br",{}),"• Use regular pitch and energy",o.jsx("br",{}),"• Maintain steady pace",o.jsx("br",{}),'• Use neutral words like "okay", "fine"',o.jsx("br",{}),"• Sound calm and balanced",o.jsx("br",{}),'• Example: "This is a normal statement."']})]})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[o.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:t?Fn:Rn,disabled:xe,style:{background:t?"#ef4444":"#22c55e",color:"#fff",border:"none",borderRadius:"12px",padding:"16px 32px",fontSize:"1.2em",fontWeight:"bold",cursor:xe?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",transition:"all 0.3s ease",opacity:xe?.7:1},children:[o.jsx("span",{style:{fontSize:"1.4em"},children:t?"⏹️":"🎤"}),t?"Stop Recording":"Start Recording"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(255,255,255,0.1)",padding:"8px 16px",borderRadius:"8px"},children:[o.jsx("input",{type:"checkbox",checked:Ve,onChange:ar=>Ye(ar.target.checked),style:{marginRight:"8px"}}),o.jsx("span",{children:"🧠 BERT Integration"})]}),o.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:8,cursor:"pointer",transition:"all 0.3s ease",opacity:xe?.6:1,pointerEvents:xe?"none":"auto"},children:[o.jsx("input",{type:"file",accept:"audio/*,audio/wav,audio/mp3,audio/m4a,audio/ogg",onChange:In,style:{display:"none"},disabled:xe}),o.jsx("div",{style:{background:xe?"rgba(128,128,128,0.3)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"12px 18px",borderRadius:"12px",border:"2px solid rgba(255,255,255,0.2)",color:"#fff",fontWeight:"600",fontSize:"0.95em",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)",transform:"scale(1)",":hover":{transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.4)"}},children:xe?"⏳ Processing...":"📁 Upload Audio File"})]})]}),t&&o.jsxs("div",{style:{marginTop:"16px",textAlign:"center",fontSize:"1.1em",fontWeight:600,opacity:.9},children:["🔴 Recording...",qe.calibrated?" Speak naturally for best results":" This will auto-calibrate your baseline!"]}),xe&&o.jsx("div",{style:{marginTop:"16px",textAlign:"center",fontSize:"1.1em",fontWeight:600,opacity:.9},children:"⚡ Analyzing voice patterns and emotions..."})]}),r&&o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[o.jsx("h3",{style:{margin:"0 0 12px 0"},children:"📝 Live Transcript"}),o.jsx("div",{style:{background:"rgba(0,0,0,0.2)",padding:"16px",borderRadius:"8px",fontSize:"1.1em",lineHeight:"1.6",minHeight:"60px"},children:r||"Start speaking to see transcript..."})]}),I&&o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0"},children:"🎯 Analysis Results"}),o.jsx("div",{style:{background:Ri(I.emotion.emotion)+"30",border:`2px solid ${Ri(I.emotion.emotion)}`,borderRadius:"12px",padding:"20px",marginBottom:"16px"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{fontSize:"3em",background:Ri(I.emotion.emotion),width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:I.emotion.emotion==="joy"?"😊":I.emotion.emotion==="sadness"?"😢":I.emotion.emotion==="anger"?"😠":I.emotion.emotion==="fear"?"😨":I.emotion.emotion==="surprise"?"😲":"😐"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"2em",fontWeight:"bold",textTransform:"capitalize"},children:I.emotion.emotion}),o.jsxs("div",{style:{fontSize:"1.2em",opacity:.9},children:["Confidence: ",(I.emotion.confidence*100).toFixed(1),"%"]}),o.jsxs("div",{style:{fontSize:"0.9em",opacity:.7},children:["Source: ",I.emotion.source]})]})]})}),I.voiceFeatures&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[I.voiceFeatures.pitch&&o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"🎵 Pitch Analysis"}),o.jsxs("div",{style:{fontSize:"0.9em"},children:["Average: ",I.voiceFeatures.pitch.average.toFixed(1)," Hz",o.jsx("br",{}),qe.calibrated&&o.jsxs(o.Fragment,{children:["Calibrated: ",I.voiceFeatures.pitch.calibrated.toFixed(1)," Hz",I.voiceFeatures.pitch.autoCalibrated&&" (Auto)",o.jsx("br",{})]}),"Range: ",I.voiceFeatures.pitch.min.toFixed(1)," - ",I.voiceFeatures.pitch.max.toFixed(1)," Hz",o.jsx("br",{}),"Variation: ",(I.voiceFeatures.pitch.variation*100).toFixed(1),"%"]})]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"⚡ Energy Analysis"}),o.jsxs("div",{style:{fontSize:"0.9em"},children:["Volume: ",(I.voiceFeatures.energy*100).toFixed(1),"%",o.jsx("br",{}),"RMS Energy: ",(I.voiceFeatures.rmsEnergy*100).toFixed(1),"%",o.jsx("br",{}),o.jsxs("span",{style:{fontSize:"0.8em",opacity:.8},children:[I.voiceFeatures.energy>.85?"Very High (Yelling)":I.voiceFeatures.energy>.75?"High Energy (Shouting)":I.voiceFeatures.energy>.6?"Elevated Energy":I.voiceFeatures.energy>.4?"Moderate Energy":I.voiceFeatures.energy>.25?"Low Energy":"Very Low Energy",I.emotion.emotion==="anger"&&I.voiceFeatures.energy>.75&&" (Anger Indicator)",I.emotion.emotion==="sadness"&&I.voiceFeatures.energy<.4&&" (Sadness Indicator)"]})]})]}),I.voiceFeatures.volumeSpikes&&o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"📊 Volume Spikes"}),o.jsxs("div",{style:{fontSize:"0.9em"},children:["Count: ",I.voiceFeatures.volumeSpikes.count,o.jsx("br",{}),I.voiceFeatures.volumeSpikes.count>0&&o.jsxs(o.Fragment,{children:["Avg Intensity: ",(I.voiceFeatures.volumeSpikes.avgIntensity*100).toFixed(1),"%",o.jsx("br",{})]}),o.jsxs("span",{style:{fontSize:"0.8em",opacity:.8},children:[I.voiceFeatures.volumeSpikes.count>3?"Multiple Outbursts":I.voiceFeatures.volumeSpikes.count>0?"Some Outbursts":"Stable Volume",I.emotion.emotion==="anger"&&I.voiceFeatures.volumeSpikes.count>0&&" (Anger Pattern)"]})]})]}),I.voiceFeatures.speech&&o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"🗣️ Speech Rate"}),o.jsxs("div",{style:{fontSize:"0.9em"},children:["Rate: ",I.voiceFeatures.speech.rate.toFixed(2),"x normal",o.jsx("br",{}),"Words/sec: ",I.voiceFeatures.speech.wordsPerSecond.toFixed(1),o.jsx("br",{}),o.jsxs("span",{style:{fontSize:"0.8em",opacity:.8},children:[I.voiceFeatures.speech.rate>2?"Very Fast (Agitated)":I.voiceFeatures.speech.rate>1.5?"Fast Speech":I.voiceFeatures.speech.rate>1.2?"Slightly Fast":I.voiceFeatures.speech.rate>.8?"Normal Speed":I.voiceFeatures.speech.rate>.6?"Slow Speech":"Very Slow",I.emotion.emotion==="anger"&&I.voiceFeatures.speech.rate>1.5&&" (Anger/Frustration)"]})]})]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"⏱️ Duration"}),o.jsxs("div",{style:{fontSize:"0.9em"},children:[I.voiceFeatures.duration.toFixed(2),"s"]})]}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"🎯 Analysis Quality"}),o.jsxs("div",{style:{fontSize:"0.9em"},children:[I.calibrated?"Enhanced (Calibrated)":"Standard",o.jsx("br",{}),o.jsx("span",{style:{fontSize:"0.8em",opacity:.8},children:I.emotion.source})]})]})]}),I.emotion.scores&&o.jsxs("div",{style:{marginTop:"16px"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0"},children:"📊 Emotion Scores Breakdown"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"8px"},children:Object.entries(I.emotion.scores).map(([ar,Nr])=>o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"8px 12px",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{textTransform:"capitalize"},children:ar}),o.jsx("span",{style:{fontWeight:"bold",color:Ri(ar)},children:Nr.toFixed(2)})]},ar))})]}),I.emotion.emotion==="anger"&&I.voiceFeatures&&o.jsxs("div",{style:{marginTop:"16px",background:"rgba(239, 68, 68, 0.15)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"12px"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#ef4444"},children:"😠 Anger Indicators Detected"}),o.jsxs("div",{style:{fontSize:"0.9em",color:"rgba(255,255,255,0.9)"},children:[I.voiceFeatures.energy>.75&&o.jsxs("div",{children:["• High energy voice (",(I.voiceFeatures.energy*100).toFixed(1),"% - shouting/yelling detected)"]}),I.voiceFeatures.pitch&&(qe.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average)>280&&o.jsxs("div",{children:["• Elevated pitch (stress/anger response) (",(qe.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average).toFixed(1)," Hz)"]}),I.voiceFeatures.pitch&&I.voiceFeatures.pitch.variation>.7&&o.jsxs("div",{children:["• High voice variation (aggressive/harsh speech) (",(I.voiceFeatures.pitch.variation*100).toFixed(1),"%)"]}),I.voiceFeatures.volumeSpikes&&I.voiceFeatures.volumeSpikes.count>0&&o.jsxs("div",{children:["• Volume spikes detected (",I.voiceFeatures.volumeSpikes.count," spikes - outbursts)"]}),I.voiceFeatures.speech&&I.voiceFeatures.speech.rate>1.5&&o.jsxs("div",{children:["• Fast speech rate (anger/frustration) (",I.voiceFeatures.speech.rate.toFixed(1),"x normal speed)"]}),I.voiceFeatures.zeroCrossingRate>.1&&o.jsx("div",{children:"• Harsh consonants detected (aggressive speech pattern)"}),I.transcript&&/!/.test(I.transcript)&&o.jsxs("div",{children:["• Exclamation marks in speech (",(I.transcript.match(/!/g)||[]).length," exclamations)"]}),I.transcript&&/\b[A-Z]{2,}\b/.test(I.transcript)&&o.jsxs("div",{children:["• Shouting detected (caps words: ",(I.transcript.match(/\b[A-Z]{2,}\b/g)||[]).join(", "),")"]}),I.transcript&&/\b(damn|hell|shit|fuck|crap|bullshit)\b/gi.test(I.transcript)&&o.jsx("div",{children:"• Strong language/profanity usage (emotional intensity)"}),I.emotion.scores.anger>1.5&&o.jsxs("div",{children:["• Strong textual anger indicators (score: ",I.emotion.scores.anger.toFixed(2),")"]}),o.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",opacity:.8},children:["Enhanced anger detection with ",I.calibrated?"calibrated":"standard"," voice analysis + BERT integration"]})]})]}),I.emotion.emotion==="sadness"&&I.voiceFeatures&&o.jsxs("div",{style:{marginTop:"16px",background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"12px"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#3b82f6"},children:"😢 Sadness Indicators Detected"}),o.jsxs("div",{style:{fontSize:"0.9em",color:"rgba(255,255,255,0.9)"},children:[I.voiceFeatures.energy<.4&&o.jsxs("div",{children:["• Low energy voice pattern (",(I.voiceFeatures.energy*100).toFixed(1),"%)"]}),I.voiceFeatures.pitch&&(qe.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average)<200&&o.jsxs("div",{children:["• Lower than average pitch (",(qe.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average).toFixed(1)," Hz)"]}),I.voiceFeatures.pitch&&I.voiceFeatures.pitch.variation<.3&&o.jsxs("div",{children:["• Monotone speech pattern (",(I.voiceFeatures.pitch.variation*100).toFixed(1),"% variation)"]}),I.emotion.scores.sadness>1&&o.jsxs("div",{children:["• Strong textual sadness indicators (score: ",I.emotion.scores.sadness.toFixed(2),")"]}),o.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",opacity:.8},children:["Enhanced sadness detection with ",I.calibrated?"calibrated":"standard"," voice analysis"]})]})]}),I.emotion.emotion==="fear"&&I.voiceFeatures&&o.jsxs("div",{style:{marginTop:"16px",background:"rgba(245, 158, 11, 0.15)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",padding:"12px"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#f59e0b"},children:"😨 Fear Indicators Detected"}),o.jsxs("div",{style:{fontSize:"0.9em",color:"rgba(255,255,255,0.9)"},children:[I.voiceFeatures.pitch&&(qe.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average)>300&&o.jsxs("div",{children:["• Elevated pitch (stress response) (",(qe.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average).toFixed(1)," Hz)"]}),I.voiceFeatures.pitch&&I.voiceFeatures.pitch.variation>.6&&o.jsxs("div",{children:["• Voice tremor/instability (",(I.voiceFeatures.pitch.variation*100).toFixed(1),"% variation)"]}),I.voiceFeatures.energy>.2&&I.voiceFeatures.energy<.8&&o.jsxs("div",{children:["• Variable energy levels (anxiety pattern) (",(I.voiceFeatures.energy*100).toFixed(1),"%)"]}),I.voiceFeatures.speech&&I.voiceFeatures.speech.rate>1.5&&o.jsxs("div",{children:["• Rapid speech (nervous response) (",I.voiceFeatures.speech.rate.toFixed(1),"x normal)"]}),I.emotion.scores.fear>1.2&&o.jsxs("div",{children:["• Strong textual fear indicators (score: ",I.emotion.scores.fear.toFixed(2),")"]}),o.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",opacity:.8},children:["Enhanced fear detection with ",I.calibrated?"calibrated":"standard"," voice analysis"]})]})]}),I.emotion.emotion==="surprise"&&I.voiceFeatures&&o.jsxs("div",{style:{marginTop:"16px",background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",padding:"12px"},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"#8b5cf6"},children:"😲 Surprise Indicators Detected"}),o.jsxs("div",{style:{fontSize:"0.9em",color:"rgba(255,255,255,0.9)"},children:[I.voiceFeatures.pitch&&(qe.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average)>350&&o.jsxs("div",{children:["• Very high pitch (exclamation) (",(qe.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average).toFixed(1)," Hz)"]}),I.voiceFeatures.pitch&&I.voiceFeatures.pitch.variation>.7&&o.jsxs("div",{children:["• High pitch variation (surprise inflection) (",(I.voiceFeatures.pitch.variation*100).toFixed(1),"% variation)"]}),I.voiceFeatures.energy>.5&&o.jsxs("div",{children:["• High energy burst (sudden reaction) (",(I.voiceFeatures.energy*100).toFixed(1),"%)"]}),I.voiceFeatures.speech&&(I.voiceFeatures.speech.rate<.8||I.voiceFeatures.speech.rate>1.8)&&o.jsxs("div",{children:["• Speech rate changes (pause/rush pattern) (",I.voiceFeatures.speech.rate.toFixed(1),"x normal)"]}),I.emotion.scores.surprise>1.1&&o.jsxs("div",{children:["• Strong textual surprise indicators (score: ",I.emotion.scores.surprise.toFixed(2),")"]}),o.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",opacity:.8},children:["Enhanced surprise detection with ",I.calibrated?"calibrated":"standard"," voice analysis"]})]})]})]}),_.length>0&&o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",border:"1px solid rgba(255,255,255,0.2)"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0"},children:"📚 Analysis History"}),o.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"12px"},children:_.slice(0,10).map(ar=>o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"16px",borderRadius:"8px",border:`1px solid ${Ri(ar.emotion.emotion)}50`},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{style:{fontSize:"1.5em"},children:ar.emotion.emotion==="joy"?"😊":ar.emotion.emotion==="sadness"?"😢":ar.emotion.emotion==="anger"?"😠":ar.emotion.emotion==="fear"?"😨":ar.emotion.emotion==="surprise"?"😲":"😐"}),o.jsx("span",{style:{fontWeight:"bold",textTransform:"capitalize",color:Ri(ar.emotion.emotion)},children:ar.emotion.emotion}),o.jsxs("span",{style:{fontSize:"0.9em",opacity:.7},children:["(",(ar.emotion.confidence*100).toFixed(1),"%)"]})]}),o.jsx("div",{style:{fontSize:"0.8em",opacity:.6},children:new Date(ar.timestamp).toLocaleString()})]}),o.jsxs("div",{style:{fontSize:"0.9em",opacity:.8,fontStyle:"italic",maxHeight:"60px",overflow:"hidden",textOverflow:"ellipsis"},children:['"',ar.transcript.length>100?ar.transcript.substring(0,100)+"...":ar.transcript,'"']})]},ar.id))}),_.length>10&&o.jsxs("div",{style:{textAlign:"center",marginTop:"12px",fontSize:"0.9em",opacity:.7},children:["... and ",_.length-10," more analyses in history"]})]})]})};Wt.memo(e9);function G9(){var nl;const[t,e]=Wt.useState("upload"),[r,n]=Wt.useState([]),[i,a]=Wt.useState(null),[s,d]=Wt.useState(!1),[_]=Wt.useState(()=>new CC),[N]=Wt.useState(()=>new RC),[I,ye]=Wt.useState(null),[xe,Ce]=Wt.useState(!1),[Ve,Ye]=Wt.useState(""),[qe,ze]=Wt.useState([]),[Oe,We]=Wt.useState(""),[ot,st]=Wt.useState(""),[Rt,wt]=Wt.useState([]),It=Wt.useRef(null);Wt.useRef(null),Wt.useRef([]),Wt.useRef(null),Wt.useRef(null),Wt.useRef(!1),Wt.useRef(!1),Wt.useEffect(()=>{const ct=localStorage.getItem("analysisHistory");if(ct)try{const ur=JSON.parse(ct);if(Array.isArray(ur)){const nn=ur.map(dn=>{const Fr=()=>o.jsxs("header",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"48px 0 32px 0",textAlign:"center",borderRadius:"0 0 48px 48px",boxShadow:"0 8px 32px rgba(102,126,234,0.15)",marginBottom:40},children:[o.jsx("h1",{style:{fontSize:"3.5rem",fontWeight:900,margin:0,textShadow:"2px 2px 8px rgba(0,0,0,0.08)"},children:"🎤 AI Voice & Emotion Analyzer"}),o.jsx("p",{style:{fontSize:"1.3rem",fontWeight:400,opacity:.95,marginTop:18},children:"Advanced neural emotion detection, transcript analysis, and ML training center"})]}),ln=()=>o.jsx("nav",{style:{display:"flex",justifyContent:"center",gap:18,marginBottom:32,background:"white",borderRadius:20,boxShadow:"0 4px 24px rgba(0,0,0,0.07)",padding:"12px 0"},children:[{id:"upload",label:"📁 Upload",color:"#667eea"},{id:"analysis",label:"📊 Analysis",color:"#10b981"},{id:"enhanced",label:"🧠 Enhanced AI",color:"#8b5cf6"},{id:"history",label:"🕒 History",color:"#f59e0b"},{id:"training",label:"🤖 Training",color:"#764ba2"},{id:"diagnostics",label:"🔧 VOSK DIAGNOSTICS HERE!",color:"#ff0000"}].map(Tn=>o.jsx("button",{onClick:()=>e(Tn.id),style:{flex:1,padding:"18px 32px",fontSize:"1.2rem",fontWeight:700,border:"none",borderRadius:16,cursor:"pointer",background:t===Tn.id?`linear-gradient(135deg, ${Tn.color}, ${Tn.color}dd)`:"transparent",color:t===Tn.id?"white":"#64748b",boxShadow:t===Tn.id?`0 8px 24px ${Tn.color}40`:"none",transition:"all 0.3s ease",transform:t===Tn.id?"translateY(-2px)":"translateY(0)"},children:Tn.label},Tn.id))}),$n=({children:Tn})=>o.jsx("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 24px 48px 24px",fontFamily:"Inter, system-ui, sans-serif",background:"linear-gradient(120deg, #f8fafc 60%, #e0e7ff 100%)",minHeight:"100vh",borderRadius:32,boxShadow:"0 8px 48px rgba(102,126,234,0.08)"},children:Tn});return o.jsxs($n,{children:[o.jsx(Fr,{}),o.jsx(ln,{}),o.jsxs("div",{style:{marginTop:24},children:[t==="upload"&&o.jsx("section",{style:{background:"white",borderRadius:24,boxShadow:"0 4px 24px rgba(102,126,234,0.07)",padding:"40px",marginBottom:32},children:o.jsx("h2",{style:{fontSize:"2rem",fontWeight:800,color:"#667eea",marginBottom:18},children:"Upload Audio/Text"})}),t==="analysis"&&o.jsx("section",{style:{background:"white",borderRadius:24,boxShadow:"0 4px 24px rgba(16,185,129,0.07)",padding:"40px",marginBottom:32},children:o.jsx("h2",{style:{fontSize:"2rem",fontWeight:800,color:"#10b981",marginBottom:18},children:"Analysis Results"})}),t==="enhanced"&&o.jsxs("section",{style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",borderRadius:24,boxShadow:"0 4px 24px rgba(139,92,246,0.15)",padding:"40px",marginBottom:32,color:"white"},children:[o.jsx("h2",{style:{fontSize:"2.5rem",fontWeight:800,color:"white",marginBottom:18,textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"🧠 Enhanced AI Emotion Analysis"}),o.jsx("p",{style:{fontSize:"1.3rem",opacity:.9,marginBottom:30,lineHeight:1.6},children:"Advanced multi-modal emotion detection combining BERT NLP, voice analysis, and neural pattern recognition"}),I?o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"20px",padding:"30px",backdropFilter:"blur(10px)",marginBottom:"25px"},children:[o.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"20px",color:"#ffd700",textShadow:"1px 1px 2px rgba(0,0,0,0.3)"},children:"🎯 Multi-Modal Fusion Results"}),I.fusedAnalysis&&o.jsxs("div",{style:{marginBottom:"25px"},children:[o.jsx("h4",{style:{fontSize:"1.3rem",marginBottom:"15px",color:"#a7f3d0"},children:"Neural Network Fusion Analysis"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"15px",marginBottom:"15px"},children:Object.entries(I.fusedAnalysis.emotions||{}).map(([Tn,Ii])=>o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.25), rgba(255,255,255,0.15))",padding:"15px",borderRadius:"12px",textAlign:"center",border:"1px solid rgba(255,255,255,0.2)",transform:Ii>.5?"scale(1.05)":"scale(1)",transition:"transform 0.3s ease"},children:[o.jsx("div",{style:{fontWeight:"bold",textTransform:"capitalize",fontSize:"1.1rem",marginBottom:"8px"},children:Tn}),o.jsxs("div",{style:{fontSize:"1.5rem",color:Ii>.5?"#ffd700":"#fde68a",fontWeight:"bold"},children:[(Ii*100).toFixed(1),"%"]}),o.jsx("div",{style:{width:"100%",height:"6px",background:"rgba(255,255,255,0.3)",borderRadius:"3px",marginTop:"8px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${Ii*100}%`,height:"100%",background:"linear-gradient(90deg, #ffd700, #ffed4e)",borderRadius:"3px",transition:"width 1s ease"}})})]},Tn))}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"15px",borderRadius:"10px",marginTop:"15px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:"Overall Confidence:"}),o.jsxs("span",{style:{fontSize:"1.3rem",fontWeight:"bold",color:"#ffd700"},children:[((I.fusedAnalysis.confidence||0)*100).toFixed(1),"%"]})]}),o.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(255,255,255,0.3)",borderRadius:"4px",marginTop:"8px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${(I.fusedAnalysis.confidence||0)*100}%`,height:"100%",background:"linear-gradient(90deg, #10b981, #34d399)",borderRadius:"4px",transition:"width 1.5s ease"}})})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginTop:"25px"},children:[I.bertAnalysis&&o.jsxs("div",{style:{background:"rgba(16,185,129,0.2)",padding:"20px",borderRadius:"15px",border:"1px solid rgba(16,185,129,0.3)"},children:[o.jsx("h4",{style:{fontSize:"1.2rem",marginBottom:"10px",color:"#6ee7b7"},children:"📝 Enhanced BERT Analysis"}),o.jsxs("div",{style:{fontSize:"1rem",lineHeight:1.5},children:[o.jsxs("div",{children:["Primary: ",o.jsx("strong",{children:I.bertAnalysis.primaryEmotion})]}),o.jsxs("div",{children:["Confidence: ",o.jsxs("strong",{children:[((I.bertAnalysis.confidence||0)*100).toFixed(1),"%"]})]}),o.jsx("div",{style:{fontSize:"0.9rem",opacity:.8,marginTop:"8px"},children:"Strategy: Ensemble analysis with context windows"})]})]}),I.voiceAnalysis&&o.jsxs("div",{style:{background:"rgba(239,68,68,0.2)",padding:"20px",borderRadius:"15px",border:"1px solid rgba(239,68,68,0.3)"},children:[o.jsx("h4",{style:{fontSize:"1.2rem",marginBottom:"10px",color:"#fca5a5"},children:"🔊 Voice Emotion Analysis"}),o.jsxs("div",{style:{fontSize:"1rem",lineHeight:1.5},children:[o.jsxs("div",{children:["Detected: ",o.jsx("strong",{children:I.voiceAnalysis.dominantEmotion})]}),o.jsx("div",{style:{fontSize:"0.9rem",opacity:.8,marginTop:"8px"},children:"Features: Pitch, Energy, Spectral Analysis"}),o.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Real-time acoustic processing"})]})]})]}),o.jsxs("div",{style:{marginTop:"25px",padding:"20px",background:"rgba(255,255,255,0.1)",borderRadius:"15px",borderLeft:"4px solid #ffd700"},children:[o.jsx("h4",{style:{fontSize:"1.2rem",marginBottom:"10px",color:"#ffd700"},children:"🔬 Technical Details"}),o.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:1.5,opacity:.9,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Fusion Weights:"}),o.jsx("br",{}),"BERT: 35%, Voice: 30%",o.jsx("br",{}),"Patterns: 20%, Temporal: 15%"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Analysis Type:"}),o.jsx("br",{}),"Multi-modal Neural Fusion",o.jsx("br",{}),"Real-time Processing"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Source:"}),o.jsx("br",{}),I.source,o.jsx("br",{}),new Date(I.timestamp).toLocaleTimeString()]})]})]})]}):o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"20px",padding:"40px",textAlign:"center",backdropFilter:"blur(10px)"},children:[o.jsx("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"🎤"}),o.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"15px",color:"#ffd700"},children:"Ready for Enhanced Analysis"}),o.jsxs("p",{style:{fontSize:"1.1rem",opacity:.9,marginBottom:"25px",lineHeight:1.6},children:["Upload an audio file or enter text to experience our advanced",o.jsx("br",{}),"multi-modal emotion detection system in action"]}),o.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx("button",{onClick:Di,style:{background:"linear-gradient(45deg, #ff6b6b, #ff8e8e)",color:"white",border:"none",borderRadius:"15px",padding:"15px 30px",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",boxShadow:"0 6px 20px rgba(255,107,107,0.4)",transition:"all 0.3s ease"},onMouseOver:Tn=>{Tn.target.style.transform="translateY(-2px)",Tn.target.style.boxShadow="0 8px 25px rgba(255,107,107,0.5)"},onMouseOut:Tn=>{Tn.target.style.transform="translateY(0)",Tn.target.style.boxShadow="0 6px 20px rgba(255,107,107,0.4)"},children:"📁 Upload Audio/Text"}),o.jsx("button",{onClick:()=>e("upload"),style:{background:"linear-gradient(45deg, #4ade80, #22d3ee)",color:"white",border:"none",borderRadius:"15px",padding:"15px 30px",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",boxShadow:"0 6px 20px rgba(74,222,128,0.4)",transition:"all 0.3s ease"},onMouseOver:Tn=>{Tn.target.style.transform="translateY(-2px)",Tn.target.style.boxShadow="0 8px 25px rgba(74,222,128,0.5)"},onMouseOut:Tn=>{Tn.target.style.transform="translateY(0)",Tn.target.style.boxShadow="0 6px 20px rgba(74,222,128,0.4)"},children:"🎙️ Try Upload Tab"})]})]})]}),t==="history"&&o.jsx("section",{style:{background:"white",borderRadius:24,boxShadow:"0 4px 24px rgba(245,158,11,0.07)",padding:"40px",marginBottom:32},children:o.jsx("h2",{style:{fontSize:"2rem",fontWeight:800,color:"#f59e0b",marginBottom:18},children:"Analysis History"})}),t==="training"&&o.jsx("section",{style:{background:"white",borderRadius:24,boxShadow:"0 4px 24px rgba(118,75,162,0.07)",padding:"40px",marginBottom:32},children:o.jsx("h2",{style:{fontSize:"2rem",fontWeight:800,color:"#764ba2",marginBottom:18},children:"ML Training Center"})})]})]})});n(nn)}}catch(ur){console.warn("Failed to parse analysis history from localStorage:",ur),n([])}d(!0)},[]),Wt.useEffect(()=>{var ct;if(s)try{localStorage.setItem("analysisHistory",JSON.stringify(r)),console.log("[AnalysisHistory] Saved to localStorage:",r.length,"entries"),window.dispatchEvent(new CustomEvent("analysisHistoryUpdated",{detail:{count:r.length,timestamp:Date.now(),latestEntry:r[0]||null}})),console.log("[AnalysisHistory] Current state:",{historyLength:r.length,firstEntry:r[0]?{id:r[0].id,type:r[0].type,date:r[0].date}:null,localStorageSize:((ct=localStorage.getItem("analysisHistory"))==null?void 0:ct.length)||0})}catch(ur){console.warn("[AnalysisHistory] Failed to save to localStorage:",ur)}},[r,s]),Wt.useEffect(()=>((async()=>{try{console.log("🎭 Initializing emotion detection engine..."),en.current=new EmotionDetectionEngine,await en.current.initialize()?console.log("🎭 Emotion detection initialized successfully"):console.warn("⚠️ Emotion detection initialization failed - microphone access may be denied")}catch(ur){console.error("❌ Error initializing emotion detection:",ur),en.current=null}})(),()=>{if(en.current)try{en.current.dispose()}catch(ur){console.error("Error disposing emotion detector:",ur)}}),[]);const er=ct=>{n(ur=>ur.filter((nn,dn)=>dn!==ct)),i&&i.idx===ct&&a(null)},cr=(ct,ur)=>{a({...ct,idx:ur})},Tr=Wt.useCallback(ct=>{if(!ct)return;const ur={id:ct.id||Date.now()+Math.random(),type:ct.type||"Unknown",date:ct.date||new Date().toISOString(),transcript:typeof ct.transcript=="string"?ct.transcript:"",summary:typeof ct.summary=="string"?ct.summary:"",analysis:ct.analysis!==void 0?ct.analysis:null,chartData:ct.chartData!==void 0?ct.chartData:null};console.log("[AnalysisHistory] Adding new entry:",ur.type,ur.id),n(nn=>{const dn=nn.findIndex(Fr=>Fr.id===ur.id);if(dn!==-1){console.log("[AnalysisHistory] Updating existing entry:",ur.id);const Fr=[...nn];return Fr[dn]=ur,Fr}else return console.log("[AnalysisHistory] Adding new entry to history"),[ur,...nn].slice(0,50)})},[]),xr=Wt.useCallback(()=>{window.confirm("Are you sure you want to reset (clear) all analysis history? This cannot be undone.")&&(n([]),a(null),localStorage.removeItem("analysisHistory"),console.log("[AnalysisHistory] History cleared by user"),window.location.reload())},[]),[lt,gt]=Wt.useState("Exposure and training of students in fundamental concepts of sketching based visual representations. Hand sketching of general products (water bottle, mouse, laptop stand, mobile stand, travel bag, etc). Hand sketching of products of your discipline. Bio-inspired study (sketching of leaves, observation of bio-mimic structures etc). The students need to develop product prototypes / models using thermocol, wood and Plaster of Paris etc. Creative design on paper (Origami, Collage) with waste material. Digital design of various products (poster, scientific illustration, mind maps, empathy map etc). Design of any product using CAD software."),[Ft,pt]=Wt.useState(""),[Zt,Jt]=Wt.useState(0),[lr,wr]=Wt.useState(!1),[Sr,vr]=Wt.useState("en-US"),[Bt,yr]=Wt.useState(""),[dr,Pr]=Wt.useState(!1),[Hr,Wr]=Wt.useState(""),[Pn,Rn]=Wt.useState(""),[Fn,In]=Wt.useState(""),[sa,$a]=Wt.useState(!1),[Oi,Ya]=Wt.useState(null),[Ri,ar]=Wt.useState(null),[Nr,Xr]=Wt.useState(null),[Cr,pn]=Wt.useState(!1),[On,Hn]=Wt.useState(!1),[kn,Gn]=Wt.useState(!1),[ba,Pi]=Wt.useState(!1),[Ai,_i]=Wt.useState([]),[Bi,Nn]=Wt.useState(!1),[Hi,ri]=Wt.useState(!1),[ti,Jn]=Wt.useState(null),[Ca,Ni]=Wt.useState(""),[si,ui]=Wt.useState(!1),[ea,wa]=Wt.useState(!1),[Yi,As]=Wt.useState(null),[oi,zi]=Wt.useState(!1),[Cs,Os]=Wt.useState(""),[mn,Bs]=Wt.useState(!1),[pr,zr]=Wt.useState(null),[sn,Yr]=Wt.useState([]),[cn,Mn]=Wt.useState(!1),[un,rn]=Wt.useState(0),en=Wt.useRef(null),Wn=Wt.useRef(null),Kn=Wt.useRef(!1),ki=Wt.useRef(""),Ci=[{code:"en-US",name:"English (US)",flag:"🇺🇸",vosk:!0},{code:"en-GB",name:"English (UK)",flag:"🇬🇧",vosk:!0},{code:"es-ES",name:"Spanish",flag:"🇪🇸",vosk:!1},{code:"fr-FR",name:"French",flag:"🇫🇷",vosk:!1},{code:"de-DE",name:"German",flag:"🇩🇪",vosk:!1},{code:"it-IT",name:"Italian",flag:"🇮🇹",vosk:!1},{code:"pt-BR",name:"Portuguese",flag:"🇧🇷",vosk:!1},{code:"hi-IN",name:"Hindi",flag:"🇮🇳",vosk:!0},{code:"zh-CN",name:"Chinese",flag:"🇨🇳",vosk:!1},{code:"ja-JP",name:"Japanese",flag:"🇯🇵",vosk:!1},{code:"ko-KR",name:"Korean",flag:"🇰🇷",vosk:!1},{code:"ar-SA",name:"Arabic",flag:"🇸🇦",vosk:!1}],Wi={audio:[".mp3",".wav",".m4a",".aac",".ogg",".flac",".wma",".opus"],document:[".txt",".pdf",".docx",".doc",".rtf",".odt"],image:[".jpg",".jpeg",".png",".gif",".bmp",".tiff",".webp",".svg"],text:[".txt",".md",".json",".csv",".xml",".html"],domain:[".research",".legal",".medical",".technical",".business"]},oa=()=>Object.values(Wi).flat().join(","),Gi=Wt.useRef(!1),Ks=Wt.useCallback(()=>{const ct=window.SpeechRecognition||window.webkitSpeechRecognition;if(!ct)return null;const ur=new ct;return ur.continuous=!0,ur.interimResults=!0,ur.lang=Sr,ur.maxAlternatives=1,ur.onresult=nn=>{let dn="",Fr=ki.current;for(let $n=nn.resultIndex;$n<nn.results.length;$n++){const Tn=nn.results[$n][0].transcript;if(nn.results[$n].isFinal){const Ii=Tn.trim();Fr.trim().endsWith(Ii)||(Fr+=Ii+" ")}else dn+=Tn}let ln=(Fr+dn).replace(/\s+/g," ").trim();if(dn.length>0){const $n=dn.length;ln.slice(-2*$n,-$n)===ln.slice(-$n)&&(ln=ln.slice(0,-$n))}ki.current=Fr,gt(ln),Jt(ln.split(/\s+/).filter($n=>$n.trim()).length)},ur.onerror=nn=>{console.error("Speech recognition error:",nn.error),wr(!1),We(`Recognition error: ${nn.error}. Please try again.`)},ur.onend=()=>{if(Gi.current)wr(!1);else try{ur.start(),wr(!0)}catch{}},ur},[Sr]);Wt.useEffect(()=>{const ct=window.SpeechRecognition||window.webkitSpeechRecognition;if(Kn.current=!!ct,Kn.current){const ur=Ks();ur&&(Wn.current=ur)}},[Ks]),Wt.useEffect(()=>{if(lt){const ct=lt.split(/\s+/).filter(ur=>ur.trim()).length;Jt(ct)}else Jt(0)},[lt]);const kr=Wt.useCallback(()=>{if(!Kn.current){We("Speech recognition not supported in this browser.");return}Gi.current=!1;try{We(""),lt.trim()||(ki.current="",gt("")),Wn.current&&(Wn.current.start(),wr(!0))}catch(ct){console.error("Error starting recognition:",ct),We("Failed to start speech recognition. Please try again.")}},[lt]),Hs=Wt.useCallback(()=>{Gi.current=!0;try{Wn.current&&(Wn.current.stop(),wr(!1))}catch(ct){console.error("Error stopping recognition:",ct)}},[]),eo=Wt.useCallback(async()=>{if(!Pn.trim()){We("Please enter some text to process.");return}Ce(!0),We("");try{let ct=Pn;if(ct&&ct.length>50){const dn=ef(ct);if(dn!=="en")try{ri(!0);const{translated:Fr,info:ln}=await Lv(ct,dn);Fr&&(Ni(ct),Jn(ln),ui(!0),ct=Fr)}catch(Fr){console.warn("Translation failed, using original text:",Fr)}finally{ri(!1)}}ct=await ha(ct);const ur=ct.trim().split(/\s+/).length;gt(ct),Jt(ur),Rn(""),e("upload");const nn={id:Date.now()+Math.random(),type:"Text Input",date:new Date().toISOString(),transcript:ct,summary:"",analysis:null,chartData:null};Tr(nn)}catch(ct){console.error("Error processing text:",ct),We("Failed to process text. Please try again.")}finally{Ce(!1)}},[Pn]),uo=Wt.useCallback(async()=>{if(!lt.trim()){We("No transcript available to summarize.");return}Ce(!0),We("");try{const ct=lt.split(/[.!?]+/).map($n=>$n.trim()).filter($n=>$n.length>0),ur=Array.from(new Set(ct)),nn=["important","note","key","summary","conclusion","result","main","critical","essential"],dn=new RegExp(nn.join("|"),"i"),Fr=ur.map($n=>({text:$n,score:(dn.test($n)?2:0)+Math.min($n.length/80,1)}));Fr.sort(($n,Tn)=>Tn.score-$n.score);let ln="";if(Fr.length===0)ln="• No content to summarize.";else if(Fr.length<=2)ln="• "+lt.trim();else{const $n=Math.max(4,Math.min(5,Math.floor(Fr.length*.3)));ln=Fr.slice(0,$n).map(ma=>ma.text).map(ma=>nn.some(Da=>ma.toLowerCase().includes(Da))?`• **${ma}**`:`• ${ma}`).join(`
`)}if(pt(ln),lt.trim()){const $n={id:Date.now()+Math.random(),type:t==="speech"?"Speech":t==="upload"?"File Upload":"Text Input",date:new Date().toISOString(),transcript:lt,summary:ln,analysis:null,chartData:null};n(Tn=>Tn[0]&&Tn[0].transcript===lt&&Tn[0].summary===ln?Tn:[$n,...Tn].slice(0,30))}}catch(ct){console.error("Error generating summary:",ct),We("Failed to generate summary. Please try again.")}finally{Ce(!1)}},[lt,t]),js=Wt.useCallback(async ct=>{const ur=ct.target.files[0];if(!ur)return;Ya({name:ur.name,size:ur.size,type:ur.type,lastModified:ur.lastModified}),Pr(!0),We(""),Wr("Starting file processing...");const nn=setTimeout(()=>{Pr(!1),We("Processing timeout - the operation took too long. Please try a smaller file."),Wr("❌ Processing timeout")},3e5);try{Wr("📄 Processing content...");const dn=await Gg(ur,ln=>{ln&&Wr(ln)});clearTimeout(nn);let Fr="";if(dn&&typeof dn=="object"?Fr=dn.transcript||dn.audioTranscript||dn.content||"":Fr=typeof dn=="string"?dn:"",console.log("🎵 Audio processing result:",dn),console.log("📝 Extracted transcript:",Fr),Fr&&Fr.length>50){const ln=ef(Fr);if(ln!=="en")try{ri(!0),Wr("🌐 Translating content to English...");const{translated:$n,info:Tn}=await Lv(Fr,ln);$n&&(Ni(Fr),Jn(Tn),ui(!0),Fr=$n)}catch($n){console.warn("Translation failed, using original text:",$n)}finally{ri(!1)}}if(Fr=await ha(Fr),yr(Fr),gt(Fr),Jt(Fr.split(/\s+/).filter(ln=>ln.trim()).length),Wr("✅ Content processed successfully!"),Fr&&Fr.trim()){Wr("🧠 Running enhanced emotion analysis...");try{const ln=await LC(Fr);let $n=null;ur.type.startsWith("audio/")&&($n=await N.processRecordedAudio(ur));const Tn=await _.analyzeText(Fr,{bertResults:ln,voiceResults:$n,includeTemporalAnalysis:!0,includePatternRecognition:!0});ye({fusedAnalysis:Tn,bertAnalysis:ln,voiceAnalysis:$n,timestamp:new Date().toISOString(),source:"file_upload"}),Wr("🎯 Enhanced emotion analysis complete!")}catch(ln){console.warn("Enhanced emotion analysis failed:",ln),Wr("⚠️ Basic analysis only - enhanced features unavailable")}}if(Fr.trim()){const ln={id:Date.now()+Math.random(),type:"File Upload",date:new Date().toISOString(),transcript:Fr,summary:"",analysis:I,chartData:null};Tr(ln)}ct.target.value=""}catch(dn){clearTimeout(nn),console.error("🚨 File processing error:",dn),console.error("🔍 Error details:",{message:dn.message,stack:dn.stack,name:dn.name,fileName:ur?ur.name:"unknown",fileType:ur?ur.type:"unknown"}),We(`Error processing file: ${dn.message}`),Wr(`❌ Processing failed: ${dn.message}`)}finally{Pr(!1),setTimeout(()=>Wr(""),5e3)}},[Sr,lt]),Co=Wt.useCallback(ct=>{ct.preventDefault(),$a(!0)},[]),us=Wt.useCallback(ct=>{ct.preventDefault(),$a(!1)},[]),Fi=Wt.useCallback(ct=>{ct.preventDefault(),$a(!1);const ur=ct.dataTransfer.files;if(ur.length>0){const dn={target:{files:[ur[0]],value:""}};js(dn)}},[js]),Di=()=>{var ct;(ct=It.current)==null||ct.click()},Si=Wt.useCallback(async ct=>{if(!ct||!ct.trim())return ct;ri(!0),We("");try{if(!bC(ct))return Jn(null),ui(!1),ct;const ur=ef(ct),nn=await Lv(ct,ur);return nn.translatedText&&nn.translatedText!==ct?(Ni(ct),Jn({originalLanguage:xC(nn.detectedLanguage),confidence:nn.confidence,fallback:nn.fallback||!1,originalText:ct}),ui(!0),nn.translatedText):(Jn(null),ui(!1),ct)}catch(ur){return console.error("Translation error:",ur),We("Translation failed. Using original text for analysis."),Jn(null),ui(!1),ct}finally{ri(!1)}},[]);Wt.useCallback(async ct=>{if(!ct||ct===lt)return;const ur=await Si(ct);gt(ur)},[lt,Si]);const ha=Wt.useCallback(async ct=>{if(!ct||!ct.trim())return ct;wa(!0),We("");try{if(!_C(ct))return As(null),zi(!1),ct;const ur=wC(ct,{includeCapitalization:!0,includePunctuation:!0,includeMedicalTerms:!0,preserveOriginalSpacing:!1});return ur.correctedText&&ur.correctedText!==ct&&ur.totalCorrections>0?(Os(ct),As({totalCorrections:ur.totalCorrections,confidence:ur.confidence,summary:ur.summary,corrections:ur.corrections.slice(0,5),originalText:ct}),zi(!0),ur.correctedText):(As(null),zi(!1),ct)}catch(ur){return console.error("Grammar correction error:",ur),We("Grammar correction failed. Using original text."),As(null),zi(!1),ct}finally{wa(!1)}},[]),pa=Wt.useCallback(()=>{if(!en.current)return console.warn("⚠️ Emotion detector not initialized"),!1;const ct=en.current.startDetection();if(ct){Bs(!0),console.log("🎭 Started emotion detection");const ur=setInterval(()=>{if(en.current&&mn){const nn=en.current.analyzeCurrentEmotion(lt);zr(nn),rn(nn.confidence),nn.confidence>50&&Mn(!0)}},2e3);en.current.analysisIntervalId=ur}return ct},[lt,mn]),Ws=Wt.useCallback(()=>{en.current&&(en.current.stopDetection(),en.current.analysisIntervalId&&(clearInterval(en.current.analysisIntervalId),en.current.analysisIntervalId=null)),Bs(!1),console.log("⏹️ Stopped emotion detection")},[]),Dl=Wt.useCallback(()=>{if(console.log("🎭 Analyze emotion button clicked"),console.log("📝 Current transcript:",(lt==null?void 0:lt.slice(0,100))+"..."),!lt.trim()){console.warn("⚠️ No transcript available"),We("No transcript available to analyze");return}try{if(console.log("🔍 Starting emotion analysis..."),en.current){console.log("✅ Using emotion detector engine");const ct=en.current.analyzeCurrentEmotion(lt);console.log("🎭 Emotion analysis result:",ct),console.log("🔍 Emotion properties:",{detected:ct==null?void 0:ct.detected,confidence:ct==null?void 0:ct.confidence,breakdown:ct==null?void 0:ct.breakdown}),zr(ct),rn((ct==null?void 0:ct.confidence)||0),Mn(!0),Yr(ur=>[{...ct,transcript:lt.slice(0,100),timestamp:Date.now()},...ur].slice(0,10)),console.log("🎭 Manual emotion analysis:",ct)}else{console.log("⚠️ No emotion detector, using fallback");const ct=bc(lt);console.log("🎭 Fallback emotion analysis result:",ct),console.log("🔍 Fallback emotion properties:",{detected:ct==null?void 0:ct.detected,confidence:ct==null?void 0:ct.confidence,breakdown:ct==null?void 0:ct.breakdown}),zr(ct),rn((ct==null?void 0:ct.confidence)||0),Mn(!0),console.log("🎭 Fallback emotion analysis:",ct)}}catch(ct){console.error("❌ Error during emotion analysis:",ct),We(`Emotion analysis failed: ${ct.message}`)}},[lt]),bc=Wt.useCallback(ct=>{const ur=ct.toLowerCase();console.log("🔍 Analyzing text for comprehensive emotions:",ur);const dn=["oh great","oh wonderful","oh fantastic","oh perfect","oh brilliant","what a revolutionary idea","what a brilliant idea","what a fantastic idea","what a wonderful idea","what a great idea","what a genius idea","exactly what i wanted","just what i needed","how original","how creative","how thoughtful","how brilliant","revolutionary idea","groundbreaking","stroke of genius","work of art","masterpiece","incredible achievement","medal","trophy","award","prize","recognition","honor","make sure to get","i'll make sure","absolutely brilliant","just perfect","goes perfectly wrong","how lovely","terrific","marvelous","outstanding","remarkable","extraordinary","sure thing","yeah right","of course","obviously","clearly the best"].filter(Bn=>ur.includes(Bn)).length*30,Fr=[/oh,?\s+you'?re.*\?\s*what a.*idea/i,/putting.*dishes.*dishwasher.*revolutionary/i,/\?\s*what a (brilliant|revolutionary|amazing|fantastic|wonderful|great)/i,/make sure.*medal/i,/how (original|creative|brilliant|thoughtful)/i];let ln=0;Fr.forEach(Bn=>{Bn.test(ct)&&(ln+=40,console.log("🔍 Found complex sarcasm pattern:",Bn))});const $n=dn+ln,Tn={high:["ecstatic","thrilled","overjoyed","elated","euphoric","exhilarated","pumped up","blown away","mind-blowing","absolutely incredible","phenomenal","spectacular"],medium:["excited","amazing","incredible","awesome","fantastic","wonderful","brilliant","outstanding","excellent","superb","great job","well done","impressive"],low:["good","nice","pleased","happy","satisfied","glad","positive","optimistic","hopeful","encouraging"]};let Ii=0;Ii+=Tn.high.filter(Bn=>ur.includes(Bn)).length*40,Ii+=Tn.medium.filter(Bn=>ur.includes(Bn)).length*25,Ii+=Tn.low.filter(Bn=>ur.includes(Bn)).length*15,[/i\s+(love|adore|absolutely)\s+/i,/this\s+is\s+(amazing|incredible|fantastic|wonderful|brilliant)/i,/can't\s+wait/i,/so\s+(excited|happy|pleased)/i,/absolutely\s+(love|amazing|incredible)/i].forEach(Bn=>{Bn.test(ct)&&(Ii+=20)});const Da={high:["absolutely certain","completely sure","no doubt","definitely will","guaranteed","without question","positively","undoubtedly","surely","confident in"],medium:["sure","certain","confident","believe","think so","pretty sure","likely","probably","expect","anticipate"],low:["hope","maybe","possibly","might","could be","perhaps","seems like","appears"]};let Ga=0;Ga+=Da.high.filter(Bn=>ur.includes(Bn)).length*35,Ga+=Da.medium.filter(Bn=>ur.includes(Bn)).length*20,Ga+=Da.low.filter(Bn=>ur.includes(Bn)).length*10;const Nl={high:["deeply worried","very concerned","extremely anxious","really troubled","seriously worried","alarmed","panicked","terrified","devastated"],medium:["worried","concerned","anxious","troubled","uneasy","nervous","apprehensive","fearful","stressed","bothered"],low:["slightly worried","a bit concerned","wondering","questioning","unsure","hesitant","cautious","careful"]};let Wo=0;Wo+=Nl.high.filter(Bn=>ur.includes(Bn)).length*40,Wo+=Nl.medium.filter(Bn=>ur.includes(Bn)).length*25,Wo+=Nl.low.filter(Bn=>ur.includes(Bn)).length*15,[/what\s+if/i,/i'm\s+(worried|concerned|anxious)/i,/hope\s+(nothing|everything\s+is\s+okay)/i,/is\s+everything\s+(okay|alright|fine)/i].forEach(Bn=>{Bn.test(ct)&&(Wo+=20)});const il={high:["absolutely furious","extremely frustrated","really annoyed","completely fed up","totally irritated","beyond annoyed","seriously angry"],medium:["frustrated","annoying","irritating","bothering","annoyed","upset","angry","ridiculous","seriously"],low:["slightly annoyed","a bit frustrated","mildly irritated","somewhat bothered"]};let Ia=0;Ia+=il.high.filter(Bn=>ur.includes(Bn)).length*35,Ia+=il.medium.filter(Bn=>ur.includes(Bn)).length*20,Ia+=il.low.filter(Bn=>ur.includes(Bn)).length*12;const zl={high:["devastated","heartbroken","extremely sad","deeply disappointed","crushed","miserable","depressed"],medium:["sad","disappointed","upset","hurt","unhappy","down","blue","melancholy"],low:["slightly sad","a bit down","somewhat disappointed","not great","feeling low"]};let ts=0;ts+=zl.high.filter(Bn=>ur.includes(Bn)).length*35,ts+=zl.medium.filter(Bn=>ur.includes(Bn)).length*22,ts+=zl.low.filter(Bn=>ur.includes(Bn)).length*12;const al={high:["fascinating","intriguing","really interested","very curious","tell me more","want to know","how does it work"],medium:["interesting","curious","wonder","would like to know","can you explain","what about"],low:["wondering","maybe","perhaps","possibly"]};let sl=0;sl+=al.high.filter(Bn=>ur.includes(Bn)).length*30,sl+=al.medium.filter(Bn=>ur.includes(Bn)).length*20,sl+=al.low.filter(Bn=>ur.includes(Bn)).length*10;const ol=["okay","fine","alright","normal","regular","standard","typical","usual","average","moderate","reasonable","acceptable","adequate","sufficient","as expected","nothing special","routine","ordinary","common"].filter(Bn=>ur.includes(Bn)).length*20,kc=["i suppose it's fine","i guess it's okay","not bad i suppose","if you say so","sure whatever","fine i guess","whatever you say","that's one way to look at it","interesting perspective","i see your point but","perhaps you're right","maybe that works","could be better but"].filter(Bn=>ur.includes(Bn)).length*25,jo={sarcasm:$n,enthusiasm:Ii,confidence:Ga,concern:Wo,frustration:Ia,sadness:ts,curiosity:sl,neutral:ol,diplomaticPoliteness:kc};console.log("🎭 Enhanced emotion scores:",jo);const ji=Object.entries(jo).sort((Bn,Sc)=>Sc[1]-Bn[1]),fo=ji[0],ll=ji[1],cl=ll[1]>fo[1]*.7,Fl={sarcasm:25,enthusiasm:20,confidence:18,concern:20,frustration:18,sadness:20,curiosity:15,neutral:15,diplomaticPoliteness:20}[fo[0]]||15,Il=fo[1]>=Fl?fo[0]:"neutral",to=fo[1]>=Fl?fo[1]:5;let Wa=0;to>50?Wa=20:to>30?Wa=15:to>20&&(Wa=10);const ho=cl?-5:0;return console.log("🏆 Top emotion:",fo,"Second:",ll,"Final:",Il,"Score:",to),console.log("🎯 Mixed emotions detected:",cl,"Confidence bonus:",Wa),{detected:Il,confidence:Math.min(95,to+Wa+ho+10),breakdown:{[Il]:{textScore:to,audioScore:0,contextScore:5}},allScores:jo,secondaryEmotion:cl?ll[0]:null,threshold:Fl,isCloseCall:cl,emotionIntensity:to>40?"high":to>25?"medium":"low",timestamp:Date.now()}},[]),ou=Wt.useCallback((ct,ur)=>{var Fr;const nn={sarcasm:{high:"Strong sarcasm detected - speaker likely means the opposite of what they said",medium:"Possible sarcasm - speaker may be expressing frustration or irony indirectly",low:"Mild sarcastic undertones detected - could be playful or mildly dismissive"},enthusiasm:{high:"High enthusiasm - speaker is genuinely excited and energetic about the topic",medium:"Positive enthusiasm detected - speaker shows genuine interest and approval",low:"Mild enthusiasm - speaker is moderately pleased or interested"},confidence:{high:"Strong confidence - speaker is very certain and assured about their statements",medium:"Good confidence level - speaker believes in what they're saying",low:"Mild confidence - speaker has some certainty but may have minor doubts"},concern:{high:"High concern - speaker is worried or anxious about the situation",medium:"Moderate concern - speaker has some worries or apprehension",low:"Mild concern - speaker has slight hesitation or caution"},frustration:{high:"Clear frustration - speaker is upset, annoyed, or experiencing difficulties",medium:"Moderate irritation - speaker is somewhat bothered or impatient",low:"Slight tension - speaker may be mildly annoyed or experiencing minor issues"},sadness:{high:"Sadness or disappointment - speaker is experiencing negative emotions",medium:"Low mood - speaker seems down or mildly disappointed",low:"Subdued emotional state - speaker may be feeling slightly melancholy"},curiosity:{high:"High curiosity - speaker is very interested and wants to learn more",medium:"Curious interest - speaker is asking questions and seeking information",low:"Mild interest - speaker shows some curiosity about the topic"},neutral:{high:"Neutral emotional state - speaker is balanced and matter-of-fact",medium:"Balanced emotional tone - no strong emotions detected",low:"Minimal emotional expression - speaker is keeping emotions neutral"},diplomaticPoliteness:{high:"Diplomatic politeness - speaker is being courteous while possibly disagreeing",medium:"Polite restraint - speaker may have reservations but is being diplomatic",low:"Mild social politeness - speaker is being courteous and considerate"}},dn=ur>70?"high":ur>45?"medium":"low";return((Fr=nn[ct])==null?void 0:Fr[dn])||`${ct} detected with ${dn} confidence`},[]),Xi=Wt.useCallback(()=>{lr&&Hs(),Ws(),ki.current="",gt(""),pt(""),Jt(0),We(""),Rn(""),In(""),Wr(""),Pr(!1),Ya(null),ar(null),$a(!1),Pi(!1),_i([]),Nn(!1),ri(!1),Jn(null),Ni(""),ui(!1),wa(!1),As(null),zi(!1),Os(""),ui(!1),zr(null),Yr([]),Mn(!1),rn(0),Bs(!1),It.current&&(It.current.value="")},[lr,Hs,Ws]),qs=Wt.useCallback(async()=>{if(!lt.trim()){We("No transcript available for video suggestions.");return}Nn(!0),We("");try{const ur=lt.toLowerCase().split(/\s+/).filter(ln=>ln.length>4),nn={};ur.forEach(ln=>{nn[ln]=(nn[ln]||0)+1});const dn=Object.entries(nn).sort(([,ln],[,$n])=>$n-ln).slice(0,8).map(([ln])=>ln),Fr=[{id:1,title:`Understanding ${dn[0]||"Key Concepts"} - Complete Guide`,channel:"Educational Hub",duration:"15:42",views:"2.3M views",thumbnail:"📚",description:`Comprehensive explanation of ${dn.slice(0,3).join(", ")} and related concepts.`,searchQuery:dn.slice(0,3).join(" "),relevance:95},{id:2,title:`${dn[1]||"Advanced"} Techniques and Best Practices`,channel:"Professional Learning",duration:"22:18",views:"1.8M views",thumbnail:"🎯",description:`Deep dive into advanced techniques for ${dn.slice(1,4).join(", ")}.`,searchQuery:dn.slice(1,4).join(" ")+" tutorial",relevance:88},{id:3,title:`Practical Applications of ${dn[2]||"Core Principles"}`,channel:"Applied Knowledge",duration:"18:35",views:"1.2M views",thumbnail:"🔧",description:"Real-world examples and applications related to your transcript content.",searchQuery:dn.slice(2,5).join(" ")+" examples",relevance:82},{id:4,title:`${dn[0]||"Topic"} vs ${dn[1]||"Alternative"} - Which is Better?`,channel:"Comparison Central",duration:"12:28",views:"956K views",thumbnail:"⚖️",description:"Detailed comparison and analysis of different approaches mentioned in your content.",searchQuery:`${dn[0]} vs ${dn[1]}`,relevance:79},{id:5,title:`Common Mistakes in ${dn[3]||"Implementation"}`,channel:"Learning from Errors",duration:"14:52",views:"743K views",thumbnail:"⚠️",description:`Avoid these pitfalls when working with ${dn.slice(3,6).join(", ")}.`,searchQuery:dn.slice(3,6).join(" ")+" mistakes",relevance:75},{id:6,title:`Latest Trends in ${dn[4]||"Current Field"}`,channel:"Trend Watch",duration:"19:14",views:"634K views",thumbnail:"📈",description:"Stay updated with the latest developments and trends in your area of interest.",searchQuery:dn.slice(4,7).join(" ")+" trends 2025",relevance:72}];_i(Fr),Pi(!0)}catch(ct){console.error("Error generating video suggestions:",ct),We("Failed to generate video suggestions. Please try again.")}finally{Nn(!1)}},[lt]),La=ct=>{const nn=`https://www.youtube.com/results?search_query=${encodeURIComponent(ct)}`;window.open(nn,"_blank")},Ra=Wt.useCallback(async()=>{Hn(!0),We(""),Wr("Running Vosk diagnostics...");try{const ct=await hb(ur=>Wr(ur));Xr(ct),ct.overallStatus==="success"?Wr("✅ Vosk diagnostics completed successfully"):(We(`Vosk diagnostics failed: ${ct.summary}`),Wr("❌ Vosk diagnostics failed"))}catch(ct){console.error("Diagnostics error:",ct),We(`Diagnostics failed: ${ct.message}`),Wr("❌ Diagnostics failed")}finally{Hn(!1),setTimeout(()=>Wr(""),3e3)}},[]),ds=Wt.useCallback(async()=>{Hn(!0),We(""),Wr("Testing Audio Processor V3...");try{await op.initialize();const ct=op.getStatus();console.log("Audio Processor V3 Status:",ct);const ur=16e3,dn=ur*2,Fr=new ArrayBuffer(44+dn*2),ln=new DataView(Fr),$n=(ma,Da)=>{for(let Ga=0;Ga<Da.length;Ga++)ln.setUint8(ma+Ga,Da.charCodeAt(Ga))};$n(0,"RIFF"),ln.setUint32(4,36+dn*2,!0),$n(8,"WAVE"),$n(12,"fmt "),ln.setUint32(16,16,!0),ln.setUint16(20,1,!0),ln.setUint16(22,1,!0),ln.setUint32(24,ur,!0),ln.setUint32(28,ur*2,!0),ln.setUint16(32,2,!0),ln.setUint16(34,16,!0),$n(36,"data"),ln.setUint32(40,dn*2,!0);for(let ma=0;ma<dn;ma++){const Da=Math.sin(2*Math.PI*440*ma/ur)*.3;ln.setInt16(44+ma*2,Da*32767,!0)}const Tn=new File([Fr],"test-audio.wav",{type:"audio/wav"}),Ii=await op.processAudioFile(Tn);Wr(`✅ Audio V3 Test Complete: ${Ii.transcript}`),console.log("🎵 Audio V3 Test Result:",Ii)}catch(ct){console.error("Audio V3 Test Error:",ct),We(`Audio V3 Test failed: ${ct.message}`),Wr("❌ Audio V3 Test failed")}finally{Hn(!1),setTimeout(()=>Wr(""),3e3)}},[]),Pl=Wt.useCallback(async()=>{try{const ct=pC();console.log("Blocked Requests:",ct),ct.length===0?Wr("✅ No blocked requests found"):Wr(`🚫 Found ${ct.length} blocked requests - check console`)}catch(ct){console.error("Error getting blocked requests:",ct),Wr("❌ Error checking blocked requests")}setTimeout(()=>Wr(""),3e3)},[]),es=Wt.useCallback(()=>{if(!lt.trim())return;const ct=new Date().toISOString().replace(/[:.]/g,"-"),ur=Oi?`${Oi.name.split(".")[0]}_results_${ct}.txt`:`speech_results_${ct}.txt`;let nn=`📄 SPEECH PROCESSING RESULTS
`;nn+=`Generated: ${new Date().toLocaleString()}
`,nn+=`Language: ${Sr}
`,Oi&&(nn+=`
📁 FILE INFORMATION:
`,nn+=`• Name: ${Oi.name}
`,nn+=`• Size: ${(Oi.size/(1024*1024)).toFixed(2)} MB
`,nn+=`• Type: ${Oi.type}
`,nn+=`• Last Modified: ${new Date(Oi.lastModified).toLocaleString()}
`),Ri&&(nn+=`
📊 PROCESSING STATISTICS:
`,nn+=`• Mode: ${Ri.mode}
`,nn+=`• Duration: ${Math.round(Ri.duration||0)}s
`,nn+=`• Words: ${Ri.words||0}
`,nn+=`• Confidence: ${Math.round((Ri.confidence||0)*100)}%
`),nn+=`
📝 TRANSCRIPT (${Zt} words):
`,nn+=`${lt}
`,Ft.trim()&&(nn+=`
📋 SUMMARY:
`,nn+=`${Ft}
`);const dn=new Blob([nn],{type:"text/plain"}),Fr=URL.createObjectURL(dn),ln=document.createElement("a");ln.href=Fr,ln.download=ur,ln.click(),URL.revokeObjectURL(Fr)},[lt,Ft,Zt,Sr,Oi,Ri]);return s?o.jsxs("div",{className:"app",style:{background:"linear-gradient(135deg, #1e2235 0%, #2a2d43 100%)",minHeight:"100vh",color:"#e6e6f0"},children:[o.jsx("button",{className:"floating-guide-btn",onClick:()=>window.open("/guide.html","_blank"),style:{position:"fixed",top:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",border:"none",borderRadius:"50%",color:"white",fontSize:"24px",cursor:"pointer",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.4)",zIndex:1e3,transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:ct=>{ct.target.style.transform="scale(1.1)",ct.target.style.boxShadow="0 6px 25px rgba(59, 130, 246, 0.6)"},onMouseLeave:ct=>{ct.target.style.transform="scale(1)",ct.target.style.boxShadow="0 4px 20px rgba(59, 130, 246, 0.4)"},title:"Open Complete Feature Guide",children:"📖"}),o.jsxs("div",{className:"container",style:{maxWidth:1100,margin:"0 auto",padding:"32px 18px 48px 18px",background:"rgba(30,34,53,0.98)",borderRadius:18,boxShadow:"0 6px 32px #0007"},children:[o.jsxs("div",{className:"header",style:{marginBottom:32,textAlign:"center",position:"relative"},children:[o.jsx("h1",{className:"title",style:{fontSize:"2.3em",fontWeight:800,letterSpacing:"1.5px",color:"#7ed957",textShadow:"0 2px 12px #0008"},children:"🧠 NLP Speech Processing & Emotion Analysis Platform"}),o.jsxs("div",{className:"subtitle",style:{fontSize:"1.15em",color:"#a97fff",marginTop:6,fontWeight:500},children:["Powered by ",o.jsx("span",{style:{color:"#4f8cff"},children:"BERT AI Models"})," • ",o.jsx("span",{style:{color:"#7ed957"},children:"Real-time Emotion Detection"})," • ",o.jsx("span",{style:{color:"#f093fb"},children:"Smart Summarization"})]}),o.jsx("button",{onClick:()=>window.open("/guide.html","_blank"),style:{position:"absolute",top:"0",right:"0",background:"linear-gradient(135deg, #4f8cff, #3b82f6)",color:"white",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",boxShadow:"0 3px 15px rgba(79, 140, 255, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ct=>{ct.target.style.background="linear-gradient(135deg, #3b82f6, #1d4ed8)",ct.target.style.transform="translateY(-2px)",ct.target.style.boxShadow="0 5px 20px rgba(79, 140, 255, 0.4)"},onMouseLeave:ct=>{ct.target.style.background="linear-gradient(135deg, #4f8cff, #3b82f6)",ct.target.style.transform="translateY(0)",ct.target.style.boxShadow="0 3px 15px rgba(79, 140, 255, 0.3)"},title:"Complete Feature Guide - All algorithms, features, and solutions explained",children:"📖 Guide"})]}),(Hi||si)&&o.jsx("div",{className:"translation-status",style:{background:"linear-gradient(120deg, #2a3f5f 60%, #1e3a5f 100%)",borderRadius:14,boxShadow:"0 2px 16px #0005",padding:"18px",marginBottom:24,border:"1px solid #4f8cff"},children:Hi?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o.jsx("div",{style:{width:20,height:20,border:"2px solid #4f8cff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{style:{color:"#4f8cff",fontWeight:600},children:"🌐 Translating content to English..."})]}):si&&ti?o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[o.jsx("span",{style:{fontSize:"1.2em"},children:"🌐"}),o.jsx("span",{style:{color:"#7ed957",fontWeight:700},children:"Translation Applied"})]}),o.jsxs("div",{style:{fontSize:"0.95em",color:"#b0b0c0",lineHeight:1.4},children:[o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#4f8cff"},children:"Original Language:"})," ",ti.originalLanguage]}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#4f8cff"},children:"Translation Method:"})," ",ti.fallback?"Dictionary Fallback":"Google Translate API"]}),ti.confidence&&o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#4f8cff"},children:"Confidence:"})," ",Math.round(ti.confidence*100),"%"]})]}),o.jsx("button",{onClick:()=>ui(!1),style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",marginTop:8,cursor:"pointer"},children:"Dismiss"})]}):null}),(ea||oi)&&o.jsx("div",{className:"grammar-status",style:{background:"linear-gradient(120deg, #3f2a5f 60%, #5f1e3a 100%)",borderRadius:14,boxShadow:"0 2px 16px #0005",padding:"18px",marginBottom:24,border:"1px solid #a97fff"},children:ea?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o.jsx("div",{style:{width:20,height:20,border:"2px solid #a97fff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{style:{color:"#a97fff",fontWeight:600},children:"📝 Correcting grammar..."})]}):oi&&Yi?o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[o.jsx("span",{style:{fontSize:"1.2em"},children:"📝"}),o.jsx("span",{style:{color:"#7ed957",fontWeight:700},children:"Grammar Corrections Applied"})]}),o.jsxs("div",{style:{fontSize:"0.95em",color:"#b0b0c0",lineHeight:1.4},children:[o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#a97fff"},children:"Corrections Made:"})," ",Yi.totalCorrections]}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#a97fff"},children:"Confidence:"})," ",Math.round(Yi.confidence*100),"%"]}),Yi.summary.categories&&Object.keys(Yi.summary.categories).length>0&&o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#a97fff"},children:"Types:"})," ",Object.keys(Yi.summary.categories).join(", ")]})]}),Yi.corrections&&Yi.corrections.length>0&&o.jsxs("div",{style:{marginTop:8,fontSize:"0.85em",color:"#9a9ac0"},children:[o.jsx("strong",{children:"Examples:"}),o.jsx("ul",{style:{margin:"4px 0",paddingLeft:16},children:Yi.corrections.slice(0,3).map((ct,ur)=>o.jsxs("li",{style:{marginBottom:2},children:[ct.category,": Fixed ",ct.pattern.replace(/\\/g,"").slice(0,30),"..."]},ur))})]}),o.jsx("button",{onClick:()=>zi(!1),style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",marginTop:8,cursor:"pointer"},children:"Dismiss"})]}):null}),(mn||cn)&&pr&&o.jsx("div",{className:"emotion-status",style:{background:"linear-gradient(120deg, #5f3a2a 60%, #3a5f2a 100%)",borderRadius:14,boxShadow:"0 2px 16px #0005",padding:"18px",marginBottom:24,border:"1px solid #ff7f50"},children:mn&&!pr?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o.jsx("div",{style:{width:20,height:20,border:"2px solid #ff7f50",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{style:{color:"#ff7f50",fontWeight:600},children:"🎭 Analyzing speech emotions..."})]}):pr&&(pr.detected||pr.emotion)?o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[o.jsx("span",{style:{fontSize:"1.2em"},children:"🎭"}),o.jsxs("span",{style:{color:"#7ed957",fontWeight:700},children:["Emotion Detected: ",(pr.detected||pr.emotion||"unknown").charAt(0).toUpperCase()+(pr.detected||pr.emotion||"unknown").slice(1)]})]}),o.jsxs("div",{style:{fontSize:"0.95em",color:"#b0b0c0",lineHeight:1.4},children:[o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#ff7f50"},children:"Confidence:"})," ",Math.round(pr.confidence||0),"%"]}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#ff7f50"},children:"Detection Status:"})," ",mn?"Real-time Active":"Manual Analysis"]}),pr.breakdown&&pr.breakdown[pr.detected||pr.emotion]&&o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#ff7f50"},children:"Evidence:"}),"Text(",pr.breakdown[pr.detected||pr.emotion].textScore||0,"), Audio(",pr.breakdown[pr.detected||pr.emotion].audioScore||0,"), Context(",pr.breakdown[pr.detected||pr.emotion].contextScore||0,")"]})]}),o.jsxs("div",{style:{marginTop:8,fontSize:"0.85em",color:"#9a9ac0"},children:[o.jsx("strong",{children:"Interpretation:"})," ",ou(pr.detected||pr.emotion||"neutral",pr.confidence||0)]}),o.jsxs("div",{style:{marginTop:10,display:"flex",gap:8},children:[o.jsx("button",{onClick:()=>Mn(!1),style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",cursor:"pointer"},children:"Dismiss"}),!mn&&en.current&&o.jsx("button",{onClick:pa,style:{background:"#4f8cff",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",cursor:"pointer"},children:"Start Real-time"})]})]}):o.jsxs("div",{style:{color:"#ff7f50",fontWeight:600},children:[o.jsx("div",{children:"🎭 Emotion Analysis Result:"}),o.jsx("div",{style:{fontSize:"0.9em",color:"#b0b0c0",marginTop:8},children:pr?o.jsxs(o.Fragment,{children:[o.jsx("div",{children:"Status: Analysis completed"}),o.jsxs("div",{children:["Data: ",JSON.stringify(pr)]})]}):o.jsx("div",{children:"No emotion data available"})}),o.jsx("button",{onClick:()=>Mn(!1),style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",cursor:"pointer",marginTop:10},children:"Dismiss"})]})}),o.jsxs("div",{className:"analysis-history-section",style:{background:"linear-gradient(120deg, #23272f 60%, #2a2d43 100%)",borderRadius:14,boxShadow:"0 2px 16px #0005",padding:"22px 18px 18px 18px",marginBottom:32},children:[o.jsx("h3",{style:{color:"#7ed957",fontWeight:700,fontSize:"1.25em",marginBottom:10},children:"🕑 Analysis History"}),o.jsxs("div",{style:{display:"flex",gap:10,marginBottom:10},children:[o.jsxs("button",{style:{background:"#4f8cff",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:600,boxShadow:"0 1px 4px #0003",cursor:"pointer"},onClick:()=>{const ct=localStorage.getItem("analysisHistory"),ur=`Analysis History Debug Info:

LocalStorage: ${ct?JSON.parse(ct).length+" entries":"Empty"}
Current State: ${r.length} entries
History Loaded: ${s}

Latest Entry: ${r[0]?JSON.stringify(r[0],null,2):"None"}`;alert(ur)},children:["Debug History ($",r.length,")"]}),o.jsx("button",{style:{background:"#10b981",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:600,boxShadow:"0 1px 4px #0003",cursor:"pointer"},onClick:()=>{try{const ct=localStorage.getItem("analysisHistory");if(ct){const ur=JSON.parse(ct);Array.isArray(ur)&&(n(ur),alert(`Synced ${ur.length} entries from localStorage`))}else alert("No data in localStorage to sync")}catch(ct){alert("Error syncing from localStorage: "+ct.message)}},children:"Force Sync"}),o.jsx("button",{style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:600,boxShadow:"0 1px 4px #0003",cursor:"pointer"},onClick:xr,children:"Reset History"})]}),r.length===0?o.jsxs("div",{className:"analysis-history-empty",style:{color:"#b0b0c0",fontSize:"1.05em",padding:"12px 0"},children:["No previous analyses found.",o.jsx("br",{}),o.jsxs("span",{style:{color:"#888",fontSize:"0.95em"},children:["If you expected to see history, it may have been reset or corrupted. You can use the ",o.jsx("b",{children:"Reset History"})," button above to clear and reload."]})]}):o.jsx("ul",{className:"analysis-history-list",style:{listStyle:"none",padding:0,margin:0},children:r.map((ct,ur)=>o.jsxs("li",{className:"analysis-history-item",style:{background:"#23273a",borderRadius:8,marginBottom:10,padding:"10px 14px",boxShadow:"0 1px 6px #0002",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{className:"history-info",style:{display:"flex",flexDirection:"column",gap:2},children:[o.jsx("span",{className:"history-type",style:{color:"#7ed957",fontWeight:600},children:ct.type||"Unknown Type"}),o.jsx("span",{className:"history-date",style:{color:"#a97fff",fontSize:"0.98em"},children:ct.date?new Date(ct.date).toLocaleString():""})]}),o.jsxs("div",{className:"history-actions",style:{display:"flex",gap:8},children:[o.jsx("button",{className:"history-view-btn",style:{background:"#4f8cff",color:"#fff",border:"none",borderRadius:5,padding:"4px 14px",fontWeight:600,cursor:"pointer"},onClick:()=>cr(ct,ur),children:"View"}),o.jsx("button",{className:"history-delete-btn",style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:5,padding:"4px 14px",fontWeight:600,cursor:"pointer"},onClick:()=>er(ur),children:"Delete"})]})]},ct.id||ur))}),i&&o.jsxs("div",{className:"summary-section",style:{marginTop:24},children:[o.jsx("h3",{style:{color:"#4f8cff",fontWeight:700,marginBottom:10},children:"🔎 Analysis Details"}),o.jsxs("div",{className:"summary-display",style:{display:"flex",flexDirection:"column",gap:"22px"},children:[o.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #4f8cff"},children:[o.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#4f8cff"},children:"Type"}),o.jsx("div",{children:i.type})]}),o.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #7ed957"},children:[o.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#7ed957"},children:"Date"}),o.jsx("div",{children:i.date?new Date(i.date).toLocaleString():""})]}),o.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #ffb347"},children:[o.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#ffb347"},children:"Transcript / Text"}),o.jsx("pre",{style:{whiteSpace:"pre-wrap",margin:0,background:"none",color:"#e0e0e0",fontSize:"1.01em"},children:i.transcript})]}),i.summary&&o.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #f76e6e"},children:[o.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#f76e6e"},children:"Summary"}),o.jsx("pre",{style:{whiteSpace:"pre-wrap",margin:0,background:"none",color:"#e0e0e0",fontSize:"1.01em"},children:i.summary})]}),i.analysis&&o.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #a97fff",overflowX:"auto",maxHeight:500},children:[o.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#a97fff"},children:"Analysis"}),o.jsx("div",{style:{fontSize:"1em",lineHeight:1.7,whiteSpace:"pre-wrap",color:"#e0e0e0",fontFamily:"inherit"},children:(()=>{const ct=i.analysis;if(!ct||typeof ct!="object")return String(ct);const ur=(Fr,ln)=>o.jsxs("div",{style:{marginBottom:14},children:[o.jsx("div",{style:{color:"#a97fff",fontWeight:"bold",fontSize:"1.04em",marginBottom:2},children:Fr}),o.jsx("div",{style:{marginLeft:10},children:ln})]});let nn=[];ct.overview&&nn.push(ur("Overview",Object.entries(ct.overview).map(([Fr,ln])=>`${Fr}: ${ln}`).join(`
`))),ct.sentiment&&nn.push(ur("Sentiment",Object.entries(ct.sentiment).map(([Fr,ln])=>`${Fr}: ${ln}`).join(`
`))),ct.statistics&&nn.push(ur("Statistics",Object.entries(ct.statistics).map(([Fr,ln])=>`${Fr}: ${ln}`).join(`
`))),Array.isArray(ct.keywords)&&nn.push(ur("Keywords",ct.keywords.map(Fr=>`• ${Fr.word||Fr.topic||Fr.type||""}${Fr.count?` (${Fr.count})`:""}`).join(`
`))),Array.isArray(ct.topicDistribution)&&nn.push(ur("Topic Distribution",ct.topicDistribution.map(Fr=>`• ${Fr.topic}: ${Fr.count}`).join(`
`))),Array.isArray(ct.emotionAnalysis)&&nn.push(ur("Emotion Analysis",ct.emotionAnalysis.map(Fr=>`• ${Fr.emotion}: ${Fr.count}`).join(`
`))),ct.linguisticAnalysis&&nn.push(ur("Linguistic Analysis",Object.entries(ct.linguisticAnalysis).map(([Fr,ln])=>`${Fr}: ${ln}`).join(`
`))),Array.isArray(ct.insights)&&nn.push(ur("Insights",ct.insights.map(Fr=>`• ${Fr.title||Fr.type||""}: ${Fr.description||""}`).join(`
`))),Array.isArray(ct.questions)&&nn.push(ur("Questions",ct.questions.map(Fr=>`• ${Fr}`).join(`
`)));const dn=["overview","sentiment","statistics","keywords","topicDistribution","emotionAnalysis","linguisticAnalysis","insights","questions"];return Object.entries(ct).forEach(([Fr,ln])=>{dn.includes(Fr)||(typeof ln=="string"||typeof ln=="number")&&nn.push(ur(Fr.charAt(0).toUpperCase()+Fr.slice(1),ln))}),nn})()})]}),o.jsx("button",{className:"history-view-btn",style:{marginTop:8,alignSelf:"flex-start"},onClick:()=>a(null),children:"Close"})]})]})]}),o.jsxs("div",{className:"tabs",style:{display:"flex",flexWrap:"wrap",gap:"12px",margin:"32px 0 18px 0",justifyContent:"center",maxWidth:"1200px",marginLeft:"auto",marginRight:"auto"},children:[o.jsx("button",{className:`tab ${t==="speech"?"active":""}`,style:{background:t==="speech"?"linear-gradient(90deg,#7ed957 60%,#4f8cff 100%)":"#23273a",color:t==="speech"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("speech"),children:"🎤 Live Speech"}),o.jsx("button",{className:`tab ${t==="upload"?"active":""}`,style:{background:t==="upload"?"linear-gradient(90deg,#ffb347 60%,#7ed957 100%)":"#23273a",color:t==="upload"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("upload"),children:"📁 File Upload"}),o.jsx("button",{className:`tab ${t==="text"?"active":""}`,style:{background:t==="text"?"linear-gradient(90deg,#a97fff 60%,#f76e6e 100%)":"#23273a",color:t==="text"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("text"),children:"📝 Text Input"}),o.jsx("button",{className:`tab ${t==="emotions"?"active":""}`,style:{background:t==="emotions"?"linear-gradient(90deg,#ff6b6b 60%,#4ecdc4 100%)":"#23273a",color:t==="emotions"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("emotions"),children:"🧠 Emotion V4"}),o.jsx("button",{className:`tab ${t==="students"?"active":""}`,style:{background:t==="students"?"linear-gradient(90deg,#22c55e 60%,#06b6d4 100%)":"#23273a",color:t==="students"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("students"),children:"🎓 Students"}),o.jsx("button",{className:`tab ${t==="export"?"active":""}`,style:{background:t==="export"?"linear-gradient(90deg,#10b981 60%,#3b82f6 100%)":"#23273a",color:t==="export"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("export"),children:"📤 Export & Reports"}),o.jsx("button",{className:`tab ${t==="bertsummary"?"active":""}`,style:{background:t==="bertsummary"?"linear-gradient(90deg,#667eea 60%,#764ba2 100%)":"#23273a",color:t==="bertsummary"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("bertsummary"),children:"🧠 BERT Summary & Insights"}),o.jsx("button",{className:`tab ${t==="novelbert"?"active":""}`,style:{background:t==="novelbert"?"linear-gradient(90deg,#a855f7 60%,#ec4899 100%)":"#23273a",color:t==="novelbert"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("novelbert"),children:"🌟 Novel BERT"}),o.jsx("button",{className:`tab ${t==="training"?"active":""}`,style:{background:t==="training"?"linear-gradient(90deg,#f59e0b 60%,#d97706 100%)":"#23273a",color:t==="training"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("training"),children:"🎯 Training Center"}),o.jsx("button",{className:`tab ${t==="voiceemotion"?"active":""}`,style:{background:t==="voiceemotion"?"linear-gradient(90deg,#e11d48 60%,#be123c 100%)":"#23273a",color:t==="voiceemotion"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("voiceemotion"),children:"🎤 Voice Emotion"}),o.jsx("button",{className:`tab ${t==="diagnostics"?"active":""}`,style:{background:t==="diagnostics"?"linear-gradient(90deg,#ff0000 60%,#cc0000 100%)":"#ff0000",color:"#ffffff",border:"3px solid #ff0000",borderRadius:8,padding:"12px 20px",fontWeight:900,fontSize:"1.1em",boxShadow:"0 4px 16px rgba(255,0,0,0.4)",cursor:"pointer",transition:"all 0.2s",minWidth:"180px",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",animation:"pulse 2s infinite"},onClick:()=>e("diagnostics"),children:"🔧 VOSK DIAGNOSTICS HERE!"})]}),o.jsxs("div",{className:"content",children:[t==="speech"&&o.jsxs("div",{className:"tab-content",children:[o.jsx("h2",{children:"🎤 Live Speech Recognition"}),o.jsxs("div",{className:"language-section",children:[o.jsx("h3",{children:"🌍 Select Language"}),o.jsx("div",{className:"language-grid",children:Ci.map(ct=>o.jsxs("button",{className:`language-option ${Sr===ct.code?"selected":""} ${ct.vosk?"":"limited"}`,onClick:()=>vr(ct.code),disabled:lr,title:ct.vosk?"Fully supported with Vosk":"Limited support - Web Speech API only",children:[o.jsx("span",{className:"language-flag",children:ct.flag}),o.jsx("span",{className:"language-name",children:ct.name}),ct.vosk&&o.jsx("span",{className:"vosk-badge",children:"Vosk"})]},ct.code))})]}),o.jsxs("div",{className:"controls-section",children:[o.jsxs("div",{className:"main-controls",children:[o.jsxs("button",{className:`mic-button ${lr?"listening":""}`,onClick:lr?Hs:kr,disabled:!Kn.current,children:[o.jsx("span",{className:"mic-icon",children:lr?"⏹️":"🎤"}),o.jsx("span",{className:"mic-text",children:lr?"Stop Recording":"Start Recording"})]}),o.jsxs("button",{className:"control-button summarize",onClick:uo,disabled:!lt.trim()||xe,children:[o.jsx("span",{className:"button-icon",children:"📝"}),xe?"Processing...":"Generate Summary"]}),o.jsxs("button",{className:"control-button video-suggest",onClick:qs,disabled:!lt.trim()||Bi,children:[o.jsx("span",{className:"button-icon",children:"📺"}),Bi?"Generating...":"Suggest Videos"]}),o.jsxs("button",{className:"control-button grammar-correct",onClick:async()=>{const ct=await ha(lt);ct!==lt&&gt(ct)},disabled:!lt.trim()||ea,children:[o.jsx("span",{className:"button-icon",children:"✏️"}),ea?"Correcting...":"Fix Grammar"]}),o.jsxs("button",{className:"control-button emotion-detect",onClick:mn?Ws:Dl,disabled:!lt.trim(),title:en.current?"Full audio + text emotion analysis":"Using text-based emotion analysis (microphone access not available)",children:[o.jsx("span",{className:"button-icon",children:"🎭"}),mn?"Stop Emotion Detection":"Analyze Emotion"]}),o.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"10px",flexWrap:"wrap"},children:[o.jsx("button",{style:{background:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{gt("Oh great, this is just fantastic! Another wonderful day where everything goes perfectly wrong. I love how nothing ever works when you need it to.")},children:"Test Sarcasm"}),o.jsx("button",{style:{background:"#51cf66",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{gt("I am absolutely thrilled to announce that our team has achieved a major breakthrough! This is incredible news and I couldn't be more excited!")},children:"Test Enthusiasm"}),o.jsx("button",{style:{background:"#ffa726",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{gt("This is so annoying and frustrated. There are multiple issues and problems. I seriously dont know what to do anymore.")},children:"Test Frustration"}),o.jsx("button",{style:{background:"#42a5f5",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{gt("I am absolutely certain and confident that the positive results show we are making great progress. The treatment is working good.")},children:"Test Confidence"}),o.jsx("button",{style:{background:"#9e9e9e",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{gt("Exposure and training of students in fundamental concepts of sketching based visual representations. Hand sketching of general products and digital design using CAD software.")},children:"Test Neutral"})]})]}),o.jsxs("div",{className:"secondary-controls",children:[o.jsxs("button",{className:"control-button clear",onClick:Xi,disabled:!lt.trim()&&!Ft.trim(),children:[o.jsx("span",{className:"button-icon",children:"🗑️"}),"Clear All"]}),o.jsxs("button",{className:"control-button download",onClick:es,disabled:!lt.trim(),children:[o.jsx("span",{className:"button-icon",children:"📥"}),"Download Results"]}),o.jsxs("button",{className:"control-button process",onClick:Ra,disabled:On,children:[o.jsx("span",{className:"button-icon",children:"🔍"}),On?"Running...":"Test Vosk"]}),o.jsxs("button",{className:"control-button process",onClick:ds,disabled:On,children:[o.jsx("span",{className:"button-icon",children:"🎵"}),"Test Audio V3"]}),o.jsxs("button",{className:"control-button process",onClick:Pl,disabled:On,children:[o.jsx("span",{className:"button-icon",children:"🚫"}),"Blocked Requests"]})]})]}),Nr&&o.jsxs("div",{className:"diagnostics-section",children:[o.jsx("h3",{children:"🔍 Vosk Diagnostics Results"}),o.jsxs("div",{className:`diagnostics-display ${Nr.success?"success":"error"}`,children:[o.jsxs("div",{className:"diagnostics-status",children:[o.jsx("span",{className:"status-icon",children:Nr.success?"✅":"❌"}),o.jsx("span",{className:"status-message",children:Nr.message})]}),Nr.tests&&o.jsxs("div",{className:"diagnostics-details",children:[o.jsx("h4",{children:"Test Results:"}),o.jsx("ul",{children:Object.entries(Nr.tests).map(([ct,ur])=>o.jsxs("li",{children:[o.jsxs("strong",{children:[ct,":"]}),o.jsx("span",{className:ur.success?"success":"error",children:ur.success?"✅ Passed":"❌ Failed"}),o.jsx("div",{className:"test-message",children:ur.message})]},ct))})]})]})]}),lr&&o.jsxs("div",{className:"speech-status",children:[o.jsxs("div",{className:"status-indicator",children:[o.jsx("div",{className:"pulse-ring"}),o.jsx("div",{className:"pulse-dot"})]}),o.jsx("span",{children:"Listening... Speak now"})]}),o.jsxs("div",{className:"transcript-section",children:[o.jsxs("h3",{children:["📝 ",Oi?"Extracted Text":"Transcript"," (",Zt," words)"]}),o.jsxs("div",{className:"transcript-container",children:[o.jsx("textarea",{className:"transcript-display",value:lt,onChange:ct=>gt(ct.target.value),placeholder:lr?"Listening... Your speech will appear here...":"Click 'Start Recording' to begin speech recognition...",rows:"10"}),o.jsxs("div",{className:"transcript-stats",children:[o.jsxs("span",{children:["Words: ",Zt]}),o.jsxs("span",{children:["Characters: ",lt.length]}),o.jsxs("span",{children:["Language: ",(nl=Ci.find(ct=>ct.code===Sr))==null?void 0:nl.name]})]})]})]}),Ft&&o.jsxs("div",{className:"summary-section",children:[o.jsx("h3",{children:"📋 Summary"}),o.jsx("div",{className:"summary-display",children:o.jsx("pre",{children:Ft})})]}),Oe&&o.jsxs("div",{className:"error-display",children:[o.jsx("span",{className:"error-icon",children:"❌"}),o.jsx("span",{className:"error-message",children:Oe})]})]}),t==="upload"&&o.jsxs("div",{className:"tab-content",children:[o.jsx("h2",{children:"📁 Content Upload & Processing"}),o.jsxs("div",{className:"domain-selection-section",children:[o.jsx("h3",{className:"section-title",children:"🎯 Processing Domain"}),o.jsxs("div",{className:"domain-grid",children:[o.jsxs("div",{className:"domain-option",children:[o.jsx("div",{className:"option-icon",children:"📚"}),o.jsxs("div",{className:"option-content",children:[o.jsx("div",{className:"option-title",children:"Research & Academic"}),o.jsx("div",{className:"option-description",children:"Specialized processing for research papers and academic content"})]})]}),o.jsxs("div",{className:"domain-option",children:[o.jsx("div",{className:"option-icon",children:"⚖️"}),o.jsxs("div",{className:"option-content",children:[o.jsx("div",{className:"option-title",children:"Legal Documents"}),o.jsx("div",{className:"option-description",children:"Legal document analysis and processing"})]})]}),o.jsxs("div",{className:"domain-option",children:[o.jsx("div",{className:"option-icon",children:"🏥"}),o.jsxs("div",{className:"option-content",children:[o.jsx("div",{className:"option-title",children:"Medical & Healthcare"}),o.jsx("div",{className:"option-description",children:"Medical document and record processing"})]})]}),o.jsxs("div",{className:"domain-option",children:[o.jsx("div",{className:"option-icon",children:"💼"}),o.jsxs("div",{className:"option-content",children:[o.jsx("div",{className:"option-title",children:"Business & Finance"}),o.jsx("div",{className:"option-description",children:"Business documents and financial reports"})]})]})]})]}),o.jsxs("div",{className:"file-types-section",children:[o.jsx("h3",{children:"📋 Supported Content Types"}),o.jsxs("div",{className:"file-types-grid",children:[o.jsxs("div",{className:"file-type-group",children:[o.jsxs("div",{className:"file-type-header",children:[o.jsx("span",{className:"file-type-icon",children:"🎧"}),o.jsx("span",{className:"file-type-label",children:"Audio Files (Vosk Processing)"})]}),o.jsx("div",{className:"file-type-extensions",children:Wi.audio.map(ct=>o.jsx("span",{className:"file-extension",children:ct},ct))})]}),o.jsxs("div",{className:"file-type-group",children:[o.jsxs("div",{className:"file-type-header",children:[o.jsx("span",{className:"file-type-icon",children:"📄"}),o.jsx("span",{className:"file-type-label",children:"Documents"})]}),o.jsx("div",{className:"file-type-extensions",children:Wi.document.map(ct=>o.jsx("span",{className:"file-extension",children:ct},ct))})]}),o.jsxs("div",{className:"file-type-group",children:[o.jsxs("div",{className:"file-type-header",children:[o.jsx("span",{className:"file-type-icon",children:"🖼️"}),o.jsx("span",{className:"file-type-label",children:"Images"})]}),o.jsx("div",{className:"file-type-extensions",children:Wi.image.map(ct=>o.jsx("span",{className:"file-extension",children:ct},ct))})]}),o.jsxs("div",{className:"file-type-group",children:[o.jsxs("div",{className:"file-type-header",children:[o.jsx("span",{className:"file-type-icon",children:"📝"}),o.jsx("span",{className:"file-type-label",children:"Text Files"})]}),o.jsx("div",{className:"file-type-extensions",children:Wi.text.map(ct=>o.jsx("span",{className:"file-extension",children:ct},ct))})]})]})]}),o.jsxs("div",{className:"upload-section",children:[o.jsx("div",{className:`upload-area ${sa?"drag-over":""} ${dr?"processing":""}`,onClick:Di,onDragOver:Co,onDragLeave:us,onDrop:Fi,children:o.jsxs("div",{className:"upload-content",children:[o.jsx("div",{className:"upload-icon",children:dr?"⚙️":sa?"📥":"📁"}),o.jsx("div",{className:"upload-text",children:dr?"Processing file...":sa?"Drop your file here":"Drop files here or click to upload"}),o.jsx("div",{className:"upload-subtext",children:dr?Hr:"Supports all file types shown above"}),dr&&o.jsxs("div",{className:"processing-indicator",children:[o.jsx("div",{className:"processing-spinner"}),o.jsx("div",{className:"processing-text",children:Hr})]})]})}),o.jsx("input",{ref:It,type:"file",className:"file-input",accept:oa(),onChange:js,disabled:dr,style:{display:"none"}})]}),Oi&&o.jsxs("div",{className:"file-info-section",children:[o.jsx("h3",{children:"📁 File Information"}),o.jsxs("div",{className:"file-info-grid",children:[o.jsxs("div",{className:"file-info-item",children:[o.jsx("span",{className:"file-info-label",children:"Name:"}),o.jsx("span",{className:"file-info-value",children:Oi.name})]}),o.jsxs("div",{className:"file-info-item",children:[o.jsx("span",{className:"file-info-label",children:"Size:"}),o.jsxs("span",{className:"file-info-value",children:[(Oi.size/(1024*1024)).toFixed(2)," MB"]})]}),o.jsxs("div",{className:"file-info-item",children:[o.jsx("span",{className:"file-info-label",children:"Type:"}),o.jsx("span",{className:"file-info-value",children:Oi.type||"Unknown"})]}),o.jsxs("div",{className:"file-info-item",children:[o.jsx("span",{className:"file-info-label",children:"Modified:"}),o.jsx("span",{className:"file-info-value",children:new Date(Oi.lastModified).toLocaleString()})]})]})]}),Ri&&o.jsxs("div",{className:"processing-stats-section",children:[o.jsx("h3",{children:"📊 Processing Statistics"}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-label",children:"Mode:"}),o.jsx("span",{className:"stat-value",children:Ri.mode})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-label",children:"Duration:"}),o.jsxs("span",{className:"stat-value",children:[Math.round(Ri.duration||0),"s"]})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-label",children:"Words:"}),o.jsx("span",{className:"stat-value",children:Ri.words||0})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-label",children:"Confidence:"}),o.jsxs("span",{className:"stat-value",children:[Math.round((Ri.confidence||0)*100),"%"]})]})]})]}),lt&&o.jsxs("div",{className:"results-section",tabIndex:-1,ref:ct=>{ct&&xe&&ct.scrollIntoView({behavior:"smooth",block:"center"})},children:[o.jsxs("h3",{children:["📝 Extracted Text (",Zt," words)"]}),o.jsxs("div",{className:"results-container",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"10px",width:"100%"},children:[o.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"4px",flexWrap:"wrap"},children:[o.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Words: ",Zt]}),o.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Characters: ",lt.length]}),o.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Lines: ",lt.split(`
`).length]})]}),o.jsxs("div",{style:{width:"100%",position:"relative"},children:[o.jsx("textarea",{className:"results-display",value:lt,onChange:ct=>gt(ct.target.value),rows:"12",placeholder:"Extracted text will appear here...",style:{width:"100%",minWidth:"320px",maxWidth:"100%",marginBottom:"0",resize:"vertical"},"aria-label":"Extracted Text",autoFocus:xe}),xe&&o.jsxs("div",{style:{position:"absolute",top:8,right:8,background:"rgba(30,30,40,0.85)",borderRadius:8,padding:"6px 14px",color:"#fff",fontWeight:600,boxShadow:"0 2px 8px #0003",zIndex:2,display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{className:"spinner",style:{width:18,height:18,border:"3px solid #7a89a8",borderTop:"3px solid #fff",borderRadius:"50%",display:"inline-block",animation:"spin 1s linear infinite"}}),"Processing..."]})]}),o.jsxs("div",{className:"controls",style:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"8px",marginTop:"8px",flexWrap:"wrap"},children:[o.jsxs("button",{className:"control-button summarize",onClick:uo,disabled:!lt.trim()||xe,"aria-label":"Generate Summary",children:[o.jsx("span",{className:"button-icon",children:"📝"}),xe?"Processing...":"Generate Summary"]}),o.jsxs("button",{className:"control-button clear",onClick:Xi,disabled:!lt.trim()&&!Ft.trim(),"aria-label":"Clear All",children:[o.jsx("span",{className:"button-icon",children:"🗑️"}),"Clear All"]}),o.jsxs("button",{className:"control-button download",onClick:es,disabled:!lt.trim(),"aria-label":"Download Results",children:[o.jsx("span",{className:"button-icon",children:"📥"}),"Download Results"]}),o.jsxs("button",{className:"control-button video-suggest",onClick:qs,disabled:!lt.trim()||Bi,"aria-label":"Suggest YouTube Videos",children:[o.jsx("span",{className:"button-icon",children:"📺"}),Bi?"Generating...":"Suggest Videos"]})]})]})]}),Ft&&o.jsxs("div",{className:"summary-section",children:[o.jsx("h3",{children:"📋 Summary"}),o.jsx("div",{className:"summary-display",children:o.jsx("pre",{children:Ft})})]}),Oe&&o.jsxs("div",{className:"error-display",children:[o.jsx("span",{className:"error-icon",children:"❌"}),o.jsx("span",{className:"error-message",children:Oe})]})]}),t==="text"&&o.jsxs("div",{className:"tab-content",children:[o.jsx("h2",{children:"📝 Text Input & Processing"}),o.jsxs("div",{className:"text-input-section",children:[o.jsx("h3",{children:"✍️ Enter Text to Process"}),o.jsxs("div",{className:"text-input-container",children:[o.jsx("textarea",{className:"text-input-area",placeholder:"Type or paste your text here for processing and summarization...",value:Pn,onChange:ct=>Rn(ct.target.value),rows:"12"}),o.jsxs("div",{className:"text-input-stats",children:[o.jsxs("span",{children:["Words: ",Pn.trim().split(/\s+/).filter(ct=>ct.length>0).length]}),o.jsxs("span",{children:["Characters: ",Pn.length]}),o.jsxs("span",{children:["Lines: ",Pn.split(`
`).length]})]})]}),o.jsxs("div",{className:"text-controls",children:[o.jsxs("button",{className:"control-button process",onClick:eo,disabled:!Pn.trim()||xe,children:[o.jsx("span",{className:"button-icon",children:"📝"}),xe?"Processing...":"Process Text"]}),o.jsxs("button",{className:"control-button clear",onClick:()=>Rn(""),disabled:!Pn.trim(),children:[o.jsx("span",{className:"button-icon",children:"🗑️"}),"Clear Input"]}),o.jsxs("button",{className:"control-button video-suggest",onClick:qs,disabled:!Pn.trim()||Bi,children:[o.jsx("span",{className:"button-icon",children:"📺"}),Bi?"Generating...":"Suggest Videos"]})]})]}),lt&&o.jsxs("div",{className:"results-section",tabIndex:-1,ref:ct=>{ct&&xe&&ct.scrollIntoView({behavior:"smooth",block:"center"})},children:[o.jsxs("h3",{children:["📝 Processed Text (",Zt," words)"]}),o.jsxs("div",{className:"results-container",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"10px",width:"100%"},children:[o.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"4px",flexWrap:"wrap"},children:[o.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Words: ",Zt]}),o.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Characters: ",lt.length]}),o.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Lines: ",lt.split(`
`).length]})]}),o.jsxs("div",{style:{width:"100%",position:"relative"},children:[o.jsx("textarea",{className:"results-display",value:lt,onChange:ct=>gt(ct.target.value),rows:"10",placeholder:"Processed text will appear here...",style:{width:"100%",minWidth:"320px",maxWidth:"100%",marginBottom:"0",resize:"vertical"},"aria-label":"Processed Text",autoFocus:xe}),xe&&o.jsxs("div",{style:{position:"absolute",top:8,right:8,background:"rgba(30,30,40,0.85)",borderRadius:8,padding:"6px 14px",color:"#fff",fontWeight:600,boxShadow:"0 2px 8px #0003",zIndex:2,display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{className:"spinner",style:{width:18,height:18,border:"3px solid #7a89a8",borderTop:"3px solid #fff",borderRadius:"50%",display:"inline-block",animation:"spin 1s linear infinite"}}),"Processing..."]})]}),o.jsxs("div",{className:"controls",style:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"8px",marginTop:"8px",flexWrap:"wrap"},children:[o.jsxs("button",{className:"control-button summarize",onClick:uo,disabled:!lt.trim()||xe,"aria-label":"Generate Summary",children:[o.jsx("span",{className:"button-icon",children:"📝"}),xe?"Processing...":"Generate Summary"]}),o.jsxs("button",{className:"control-button clear",onClick:Xi,disabled:!lt.trim()&&!Ft.trim(),"aria-label":"Clear All",children:[o.jsx("span",{className:"button-icon",children:"🗑️"}),"Clear All"]}),o.jsxs("button",{className:"control-button download",onClick:es,disabled:!lt.trim(),"aria-label":"Download Results",children:[o.jsx("span",{className:"button-icon",children:"📥"}),"Download Results"]}),o.jsxs("button",{className:"control-button video-suggest",onClick:qs,disabled:!lt.trim()||Bi,"aria-label":"Suggest YouTube Videos",children:[o.jsx("span",{className:"button-icon",children:"📺"}),Bi?"Generating...":"Suggest Videos"]})]})]})]}),Ft&&o.jsxs("div",{className:"summary-section",children:[o.jsx("h3",{children:"📋 Summary"}),o.jsx("div",{className:"summary-display",children:o.jsx("pre",{children:Ft})})]}),Oe&&o.jsxs("div",{className:"error-display",children:[o.jsx("span",{className:"error-icon",children:"❌"}),o.jsx("span",{className:"error-message",children:Oe})]})]}),t==="emotions"&&o.jsx("div",{className:"tab-content",children:o.jsx(zC,{})}),t==="students"&&o.jsx("div",{className:"tab-content",children:o.jsx(p9,{})})]}),ba&&Ai.length>0&&o.jsxs("div",{className:"video-suggestions-section",style:{background:"linear-gradient(120deg, #ff6b6b 0%, #ee5a24 100%)",borderRadius:"18px",padding:"24px 20px",marginTop:"24px",boxShadow:"0 4px 24px rgba(255, 107, 107, 0.15)",border:"2px solid #ff9ff3"},children:[o.jsxs("h3",{style:{color:"#fff",fontWeight:800,fontSize:"1.4em",marginBottom:"18px",letterSpacing:"1px",textShadow:"0 2px 8px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",gap:"12px"},children:["📺 YouTube Video Suggestions",o.jsx("span",{style:{background:"rgba(255,255,255,0.2)",padding:"4px 12px",borderRadius:"20px",fontSize:"0.7em",fontWeight:600},children:"Based on your content"})]}),o.jsx("div",{className:"video-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"16px",marginTop:"20px"},children:Ai.map(ct=>o.jsxs("div",{className:"video-card",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%)",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",cursor:"pointer",transition:"all 0.3s ease",border:"1px solid rgba(255,255,255,0.3)"},onClick:()=>La(ct.searchQuery),onMouseOver:ur=>{ur.currentTarget.style.transform="translateY(-4px)",ur.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.15)"},onMouseOut:ur=>{ur.currentTarget.style.transform="translateY(0)",ur.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.1)"},children:[o.jsxs("div",{className:"video-header",style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[o.jsx("div",{className:"video-thumbnail",style:{fontSize:"2.5em",flexShrink:0,background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",borderRadius:"8px",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(238, 90, 36, 0.3)"},children:ct.thumbnail}),o.jsxs("div",{className:"video-info",style:{flex:1},children:[o.jsx("h4",{style:{color:"#2c3e50",fontWeight:700,fontSize:"1.1em",marginBottom:"6px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:ct.title}),o.jsxs("div",{className:"video-meta",style:{display:"flex",flexDirection:"column",gap:"4px",fontSize:"0.85em",color:"#7f8c8d"},children:[o.jsx("span",{style:{fontWeight:600,color:"#e74c3c"},children:ct.channel}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsxs("span",{children:["⏱️ ",ct.duration]}),o.jsxs("span",{children:["👁️ ",ct.views]}),o.jsxs("span",{style:{background:`linear-gradient(90deg, #27ae60 0%, #2ecc71 ${ct.relevance}%, #95a5a6 ${ct.relevance}%, #bdc3c7 100%)`,borderRadius:"10px",padding:"2px 8px",color:"#fff",fontWeight:600,fontSize:"0.8em"},children:[ct.relevance,"% Match"]})]})]})]})]}),o.jsx("p",{style:{color:"#34495e",fontSize:"0.9em",lineHeight:"1.4",margin:"0",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:ct.description}),o.jsx("div",{className:"video-action",style:{marginTop:"12px",textAlign:"center"},children:o.jsx("button",{style:{background:"linear-gradient(90deg, #e74c3c 0%, #c0392b 100%)",color:"#fff",border:"none",borderRadius:"20px",padding:"8px 16px",fontWeight:600,fontSize:"0.9em",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(231, 76, 60, 0.3)"},onMouseOver:ur=>ur.target.style.transform="scale(1.05)",onMouseOut:ur=>ur.target.style.transform="scale(1)",onClick:ur=>{ur.stopPropagation(),La(ct.searchQuery)},children:"🔍 Search on YouTube"})})]},ct.id))}),o.jsxs("div",{className:"video-suggestions-footer",style:{marginTop:"20px",textAlign:"center",padding:"16px",background:"rgba(255,255,255,0.15)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)"},children:[o.jsx("p",{style:{color:"rgba(255,255,255,0.9)",margin:"0 0 12px 0",fontSize:"0.95em",fontWeight:500},children:"💡 These suggestions are generated based on your transcript content analysis"}),o.jsx("button",{onClick:()=>Pi(!1),style:{background:"rgba(255,255,255,0.25)",color:"#fff",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:ct=>ct.target.style.background="rgba(255,255,255,0.35)",onMouseOut:ct=>ct.target.style.background="rgba(255,255,255,0.25)",children:"Hide Suggestions"})]})]}),t==="export"&&o.jsx(l9,{analysisData:i,analysisHistory:r,isVisible:!0}),t==="bertsummary"&&o.jsx("div",{className:"tab-content",children:o.jsx(z9,{transcript:lt||(i?i.transcript:"")})}),t==="novelbert"&&o.jsx("div",{className:"tab-content",children:o.jsx(N9,{})}),t==="training"&&o.jsx("div",{className:"tab-content",children:o.jsx($9,{})}),t==="voiceemotion"&&o.jsxs("div",{className:"tab-content",children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"20px",padding:"30px",color:"white",boxShadow:"0 8px 32px rgba(0,0,0,0.1)",marginBottom:"20px"},children:[o.jsx("h2",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"10px",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"🎤 Enhanced Voice Emotion Analysis"}),o.jsx("p",{style:{fontSize:"1.2rem",opacity:.9,marginBottom:"20px"},children:"Advanced multi-modal emotion detection with BERT integration, voice analysis, and pattern recognition"}),I&&o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"15px",padding:"20px",marginTop:"20px",backdropFilter:"blur(10px)"},children:[o.jsx("h3",{style:{marginBottom:"15px",fontSize:"1.5rem"},children:"🧠 Latest Enhanced Analysis Results"}),I.fusedAnalysis&&o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("h4",{children:"🎯 Multi-Modal Fusion Analysis:"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",marginTop:"10px"},children:Object.entries(I.fusedAnalysis.emotions||{}).map(([ct,ur])=>o.jsxs("div",{style:{background:"rgba(255,255,255,0.2)",padding:"10px",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontWeight:"bold",textTransform:"capitalize"},children:ct}),o.jsxs("div",{style:{fontSize:"1.2rem",color:"#ffd700"},children:[(ur*100).toFixed(1),"%"]})]},ct))}),o.jsxs("div",{style:{marginTop:"10px",fontSize:"0.9rem",opacity:.8},children:["Confidence: ",((I.fusedAnalysis.confidence||0)*100).toFixed(1),"%"]})]}),I.bertAnalysis&&o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("h4",{children:"📝 Enhanced BERT Analysis:"}),o.jsxs("div",{style:{fontSize:"0.9rem",opacity:.9},children:["Primary Emotion: ",o.jsx("strong",{children:I.bertAnalysis.primaryEmotion}),"(",((I.bertAnalysis.confidence||0)*100).toFixed(1),"%)"]})]}),I.voiceAnalysis&&o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("h4",{children:"🔊 Voice Emotion Analysis:"}),o.jsxs("div",{style:{fontSize:"0.9rem",opacity:.9},children:["Detected: ",o.jsx("strong",{children:I.voiceAnalysis.dominantEmotion}),o.jsx("br",{}),"Features: Pitch, Energy, Spectral Analysis"]})]}),o.jsxs("div",{style:{fontSize:"0.8rem",opacity:.7,marginTop:"15px",borderTop:"1px solid rgba(255,255,255,0.2)",paddingTop:"10px"},children:["Analysis completed: ",new Date(I.timestamp).toLocaleString()]})]}),!I&&o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"15px",padding:"20px",marginTop:"20px",textAlign:"center",backdropFilter:"blur(10px)"},children:[o.jsx("h3",{style:{marginBottom:"10px"},children:"📁 Upload or Record Audio"}),o.jsx("p",{style:{opacity:.8,marginBottom:"15px"},children:"Upload an audio file or record your voice to see enhanced emotion analysis in action"}),o.jsx("button",{onClick:Di,style:{background:"linear-gradient(45deg, #ff6b6b, #ff8e8e)",color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(255,107,107,0.3)",transition:"transform 0.2s"},onMouseOver:ct=>ct.target.style.transform="scale(1.05)",onMouseOut:ct=>ct.target.style.transform="scale(1)",children:"📁 Upload Audio File"}),o.jsx("button",{onClick:async()=>{try{const dn=new ArrayBuffer(64044),Fr=new DataView(dn),ln=(Ii,ma)=>{for(let Da=0;Da<ma.length;Da++)Fr.setUint8(Ii+Da,ma.charCodeAt(Da))};ln(0,"RIFF"),Fr.setUint32(4,36+32e3*2,!0),ln(8,"WAVE"),ln(12,"fmt "),Fr.setUint32(16,16,!0),Fr.setUint16(20,1,!0),Fr.setUint16(22,1,!0),Fr.setUint32(24,16e3,!0),Fr.setUint32(28,16e3*2,!0),Fr.setUint16(32,2,!0),Fr.setUint16(34,16,!0),ln(36,"data"),Fr.setUint32(40,32e3*2,!0);for(let Ii=0;Ii<32e3;Ii++){const ma=Math.sin(2*Math.PI*440*Ii/16e3)*.3;Fr.setInt16(44+Ii*2,ma*32767,!0)}const $n=new File([dn],"test-audio.wav",{type:"audio/wav"});Pr(!0);const Tn=await Gg($n);console.log("🎵 Test audio result:",Tn),Tn&&Tn.transcript&&(gt(Tn.transcript),Wr("✅ Test audio processed successfully!"))}catch(ct){console.error("Test audio error:",ct),We("Test failed: "+ct.message)}finally{Pr(!1)}},style:{background:"linear-gradient(45deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(16,185,129,0.3)",transition:"transform 0.2s",marginLeft:"10px"},onMouseOver:ct=>ct.target.style.transform="scale(1.05)",onMouseOut:ct=>ct.target.style.transform="scale(1)",children:"🧪 Test Generated Audio"})]})]}),o.jsx(Y9,{})]}),t==="diagnostics"&&o.jsx("div",{className:"tab-content",children:o.jsxs("div",{style:{background:"white",borderRadius:"20px",padding:"30px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[o.jsx("h2",{style:{color:"#1f2937",fontSize:"2rem",fontWeight:"700",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},children:"🔧 Vosk Model Diagnostics"}),o.jsx("p",{style:{color:"#6b7280",fontSize:"1.1rem",marginBottom:"25px",lineHeight:"1.6"},children:"Test your Vosk speech recognition models to identify and resolve issues with audio file transcription."}),o.jsx("button",{onClick:async()=>{pn(!0),Wr("🔍 Running Vosk diagnostics...");try{const ct=await hb(ur=>Wr(ur));Xr(ct),ct.overallStatus==="success"?Wr("✅ Vosk diagnostics completed successfully"):(We(`Vosk diagnostics failed: ${ct.summary}`),Wr("❌ Vosk diagnostics failed"))}catch(ct){We(`Diagnostics error: ${ct.message}`),Wr("❌ Diagnostics failed")}finally{pn(!1)}},disabled:Cr,style:{background:Cr?"linear-gradient(135deg, #9ca3af, #6b7280)":"linear-gradient(135deg, #dc2626, #991b1b)",color:"white",border:"none",borderRadius:"12px",padding:"15px 30px",fontSize:"1.1rem",fontWeight:"600",cursor:Cr?"not-allowed":"pointer",boxShadow:Cr?"none":"0 6px 20px rgba(220, 38, 38, 0.3)",transition:"all 0.3s ease"},children:Cr?"🔄 Running Diagnostics...":"🚀 Run Vosk Diagnostics"}),o.jsx("button",{onClick:async()=>{Wr("🔍 Testing real Vosk transcription...");try{const{testVoskAvailability:ct,testModelLoading:ur}=await Mo(async()=>{const{testVoskAvailability:dn,testModelLoading:Fr}=await import("./voskTester-DgOQDVwy.js");return{testVoskAvailability:dn,testModelLoading:Fr}},[]),nn=await ct();if(nn.success){Wr("✅ Vosk library available - Testing model..."),Wr("⏳ Loading model (may take up to 60 seconds)...");const dn=await ur();dn.success?Wr("✅ Real Vosk model loaded successfully! You can now upload audio files for real transcription."):Wr(`❌ Model loading failed: ${dn.error}`)}else Wr(`❌ Vosk library test failed: ${nn.error}`)}catch(ct){Wr(`❌ Real Vosk test failed: ${ct.message}`)}},style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",padding:"15px 30px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 6px 20px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease",marginLeft:"15px"},children:"🎤 Test Real Vosk"}),o.jsx("button",{onClick:async()=>{Wr("🔍 Testing alternative Vosk method...");try{const{alternativeVoskManager:ct}=await Mo(async()=>{const{alternativeVoskManager:ur}=await import("./alternativeVoskManager-DkHjuGlW.js");return{alternativeVoskManager:ur}},[]);await ct.initialize(ur=>{Wr(ur)}),ct.isReady?Wr("✅ Alternative Vosk method works! You can now upload audio files."):Wr("❌ Alternative Vosk method also failed")}catch(ct){Wr(`❌ Alternative Vosk test failed: ${ct.message}`)}},style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"12px",padding:"15px 30px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 6px 20px rgba(139, 92, 246, 0.3)",transition:"all 0.3s ease",marginLeft:"15px"},children:"🔧 Test Alternative"}),o.jsx("button",{onClick:async()=>{Wr("🔍 Testing model files accessibility...");try{const{testModelFiles:ct}=await Mo(async()=>{const{testModelFiles:nn}=await import("./voskTester-DgOQDVwy.js");return{testModelFiles:nn}},[]),ur=await ct();if(ur.success){const nn=Object.entries(ur.results).filter(([Fr,ln])=>ln.accessible).length,dn=Object.keys(ur.results).length;Wr(`✅ Model files test complete: ${nn}/${dn} files accessible. Check console for details.`)}else Wr(`❌ Model files test failed: ${ur.error}`)}catch(ct){Wr(`❌ Model files test failed: ${ct.message}`)}},style:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"white",border:"none",borderRadius:"12px",padding:"15px 30px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 6px 20px rgba(59, 130, 246, 0.3)",transition:"all 0.3s ease",marginLeft:"15px"},children:"📁 Test Model Files"}),Hr&&o.jsx("div",{style:{background:Hr.includes("❌")?"#fef2f2":Hr.includes("✅")?"#f0fdf4":"#fef3c7",border:Hr.includes("❌")?"2px solid #ef4444":Hr.includes("✅")?"2px solid #10b981":"2px solid #f59e0b",color:Hr.includes("❌")?"#dc2626":Hr.includes("✅")?"#059669":"#d97706",padding:"15px",borderRadius:"12px",marginTop:"20px",fontSize:"1rem",fontWeight:"600"},children:Hr}),Nr&&o.jsxs("div",{style:{marginTop:"25px",background:"#f8fafc",borderRadius:"12px",padding:"20px",border:"2px solid #e2e8f0"},children:[o.jsx("h3",{style:{color:"#374151",fontSize:"1.4rem",fontWeight:"600",marginBottom:"15px"},children:"🔍 Vosk Diagnostics Results"}),o.jsxs("div",{style:{background:Nr.overallStatus==="success"?"#f0fdf4":"#fef2f2",border:`2px solid ${Nr.overallStatus==="success"?"#10b981":"#ef4444"}`,borderRadius:"8px",padding:"15px",marginBottom:"15px"},children:[o.jsx("span",{style:{fontSize:"1.5rem",marginRight:"10px"},children:Nr.overallStatus==="success"?"✅":"❌"}),o.jsx("span",{style:{color:Nr.overallStatus==="success"?"#065f46":"#991b1b",fontSize:"1.1rem",fontWeight:"600"},children:Nr.summary})]}),Nr.tests&&o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},children:Nr.tests.map((ct,ur)=>o.jsxs("div",{style:{background:ct.status==="success"?"#f0fdf4":ct.status==="warning"?"#fef3c7":"#fef2f2",border:`1px solid ${ct.status==="success"?"#10b981":ct.status==="warning"?"#f59e0b":"#ef4444"}`,borderRadius:"8px",padding:"12px"},children:[o.jsxs("div",{style:{color:ct.status==="success"?"#065f46":ct.status==="warning"?"#d97706":"#991b1b",fontWeight:"600",marginBottom:"5px"},children:[ct.status==="success"?"✅":ct.status==="warning"?"⚠️":"❌"," ",ct.test]}),o.jsx("div",{style:{color:"#6b7280",fontSize:"0.9rem"},children:ct.message})]},ur))})]})]})})]}),(lt||i)&&o.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"20px",padding:"24px",margin:"24px 0",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.15)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[o.jsx("h2",{style:{color:"#fff",fontSize:"1.8em",fontWeight:"bold",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"📊 Transcript Analysis & Insights"}),o.jsxs("button",{className:"control-button analyze",onClick:()=>Gn(!kn),disabled:!lt.trim()&&!i,style:{background:kn?"#f39c12":"#27ae60",color:"#fff",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",transition:"all 0.3s ease"},children:[o.jsx("span",{style:{marginRight:"8px"},children:kn?"🙈":"📊"}),kn?"Hide Analysis":"Show Analysis"]})]}),kn&&lt&&o.jsxs("div",{className:"analysis-section",children:[o.jsx(G2,{transcript:lt,isVisible:kn,onAnalysisComplete:({fast:ct,progressive:ur,transcript:nn,processingTime:dn})=>{if(!nn)return;const Fr={basic:ct,advanced:ur,transcript:nn,processingTime:dn,timestamp:Date.now(),id:`analysis_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};a(Fr),Tr(Fr)}}),o.jsxs("details",{style:{marginTop:"20px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",padding:"16px"},children:[o.jsx("summary",{style:{color:"#fff",cursor:"pointer",fontWeight:"bold",fontSize:"1.1em"},children:"🔍 Show Original Analysis (for comparison)"}),o.jsx(LL,{transcript:lt,isVisible:!0,onAnalysisComplete:({analysis:ct,chartData:ur,transcript:nn})=>{}})]})]}),kn&&!lt&&i&&o.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"12px",padding:"20px"},children:[o.jsx("p",{style:{color:"#fff",fontSize:"1.1em",textAlign:"center",margin:"0 0 16px 0"},children:"📋 Viewing Previous Analysis"}),o.jsx(G2,{transcript:i.transcript,isVisible:!0,initialAnalysis:i,onAnalysisComplete:()=>{}})]})]}),o.jsx(i9,{currentAnalysis:i,onAnalysisUpdate:ct=>{a(ct),ct&&!r.find(ur=>ur.id===ct.id)&&Tr(ct)}})]}):o.jsx("div",{className:"app",children:o.jsx("div",{className:"container",children:o.jsx("div",{children:"Loading analysis history..."})})})}console.log("main.jsx loading - App Simple version...");tg.createRoot(document.getElementById("root")).render(o.jsx(tc.StrictMode,{children:o.jsx(G9,{})}));export{Mo as _,Z9 as a,TC as b,Q2 as c,Zp as g};
