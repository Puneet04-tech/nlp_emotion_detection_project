var eA=Object.defineProperty;var tA=(t,e,r)=>e in t?eA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var cn=(t,e,r)=>tA(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function lR(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var uw={exports:{}},tm={},dw={exports:{}},hi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf=Symbol.for("react.element"),rA=Symbol.for("react.portal"),nA=Symbol.for("react.fragment"),iA=Symbol.for("react.strict_mode"),aA=Symbol.for("react.profiler"),sA=Symbol.for("react.provider"),oA=Symbol.for("react.context"),lA=Symbol.for("react.forward_ref"),cA=Symbol.for("react.suspense"),uA=Symbol.for("react.memo"),dA=Symbol.for("react.lazy"),ux=Symbol.iterator;function fA(t){return t===null||typeof t!="object"?null:(t=ux&&t[ux]||t["@@iterator"],typeof t=="function"?t:null)}var fw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hw=Object.assign,pw={};function Yu(t,e,r){this.props=t,this.context=e,this.refs=pw,this.updater=r||fw}Yu.prototype.isReactComponent={};Yu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mw(){}mw.prototype=Yu.prototype;function g0(t,e,r){this.props=t,this.context=e,this.refs=pw,this.updater=r||fw}var y0=g0.prototype=new mw;y0.constructor=g0;hw(y0,Yu.prototype);y0.isPureReactComponent=!0;var dx=Array.isArray,vw=Object.prototype.hasOwnProperty,x0={current:null},gw={key:!0,ref:!0,__self:!0,__source:!0};function yw(t,e,r){var n,i={},a=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)vw.call(e,n)&&!gw.hasOwnProperty(n)&&(i[n]=e[n]);var f=arguments.length-2;if(f===1)i.children=r;else if(1<f){for(var _=Array(f),N=0;N<f;N++)_[N]=arguments[N+2];i.children=_}if(t&&t.defaultProps)for(n in f=t.defaultProps,f)i[n]===void 0&&(i[n]=f[n]);return{$$typeof:jf,type:t,key:a,ref:s,props:i,_owner:x0.current}}function hA(t,e){return{$$typeof:jf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function b0(t){return typeof t=="object"&&t!==null&&t.$$typeof===jf}function pA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var fx=/\/+/g;function cv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pA(""+t.key):e.toString(36)}function tp(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case jf:case rA:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+cv(s,0):n,dx(i)?(r="",t!=null&&(r=t.replace(fx,"$&/")+"/"),tp(i,e,r,"",function(N){return N})):i!=null&&(b0(i)&&(i=hA(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(fx,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",dx(t))for(var f=0;f<t.length;f++){a=t[f];var _=n+cv(a,f);s+=tp(a,e,r,_,i)}else if(_=fA(t),typeof _=="function")for(t=_.call(t),f=0;!(a=t.next()).done;)a=a.value,_=n+cv(a,f++),s+=tp(a,e,r,_,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function yh(t,e,r){if(t==null)return t;var n=[],i=0;return tp(t,n,"","",function(a){return e.call(r,a,i++)}),n}function mA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cs={current:null},rp={transition:null},vA={ReactCurrentDispatcher:Cs,ReactCurrentBatchConfig:rp,ReactCurrentOwner:x0};function xw(){throw Error("act(...) is not supported in production builds of React.")}hi.Children={map:yh,forEach:function(t,e,r){yh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return yh(t,function(){e++}),e},toArray:function(t){return yh(t,function(e){return e})||[]},only:function(t){if(!b0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};hi.Component=Yu;hi.Fragment=nA;hi.Profiler=aA;hi.PureComponent=g0;hi.StrictMode=iA;hi.Suspense=cA;hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vA;hi.act=xw;hi.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=hw({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=x0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(_ in e)vw.call(e,_)&&!gw.hasOwnProperty(_)&&(n[_]=e[_]===void 0&&f!==void 0?f[_]:e[_])}var _=arguments.length-2;if(_===1)n.children=r;else if(1<_){f=Array(_);for(var N=0;N<_;N++)f[N]=arguments[N+2];n.children=f}return{$$typeof:jf,type:t.type,key:i,ref:a,props:n,_owner:s}};hi.createContext=function(t){return t={$$typeof:oA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sA,_context:t},t.Consumer=t};hi.createElement=yw;hi.createFactory=function(t){var e=yw.bind(null,t);return e.type=t,e};hi.createRef=function(){return{current:null}};hi.forwardRef=function(t){return{$$typeof:lA,render:t}};hi.isValidElement=b0;hi.lazy=function(t){return{$$typeof:dA,_payload:{_status:-1,_result:t},_init:mA}};hi.memo=function(t,e){return{$$typeof:uA,type:t,compare:e===void 0?null:e}};hi.startTransition=function(t){var e=rp.transition;rp.transition={};try{t()}finally{rp.transition=e}};hi.unstable_act=xw;hi.useCallback=function(t,e){return Cs.current.useCallback(t,e)};hi.useContext=function(t){return Cs.current.useContext(t)};hi.useDebugValue=function(){};hi.useDeferredValue=function(t){return Cs.current.useDeferredValue(t)};hi.useEffect=function(t,e){return Cs.current.useEffect(t,e)};hi.useId=function(){return Cs.current.useId()};hi.useImperativeHandle=function(t,e,r){return Cs.current.useImperativeHandle(t,e,r)};hi.useInsertionEffect=function(t,e){return Cs.current.useInsertionEffect(t,e)};hi.useLayoutEffect=function(t,e){return Cs.current.useLayoutEffect(t,e)};hi.useMemo=function(t,e){return Cs.current.useMemo(t,e)};hi.useReducer=function(t,e,r){return Cs.current.useReducer(t,e,r)};hi.useRef=function(t){return Cs.current.useRef(t)};hi.useState=function(t){return Cs.current.useState(t)};hi.useSyncExternalStore=function(t,e,r){return Cs.current.useSyncExternalStore(t,e,r)};hi.useTransition=function(){return Cs.current.useTransition()};hi.version="18.3.1";dw.exports=hi;var Jt=dw.exports;const Vl=Cf(Jt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gA=Jt,yA=Symbol.for("react.element"),xA=Symbol.for("react.fragment"),bA=Object.prototype.hasOwnProperty,wA=gA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_A={key:!0,ref:!0,__self:!0,__source:!0};function bw(t,e,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)bA.call(e,n)&&!_A.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:yA,type:t,key:a,ref:s,props:i,_owner:wA.current}}tm.Fragment=xA;tm.jsx=bw;tm.jsxs=bw;uw.exports=tm;var l=uw.exports,sg={},ww={exports:{}},eo={},_w={exports:{}},Sw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Vt,Ot){var Ht=Vt.length;Vt.push(Ot);e:for(;0<Ht;){var Qt=Ht-1>>>1,er=Vt[Qt];if(0<i(er,Ot))Vt[Qt]=Ot,Vt[Ht]=er,Ht=Qt;else break e}}function r(Vt){return Vt.length===0?null:Vt[0]}function n(Vt){if(Vt.length===0)return null;var Ot=Vt[0],Ht=Vt.pop();if(Ht!==Ot){Vt[0]=Ht;e:for(var Qt=0,er=Vt.length,kt=er>>>1;Qt<kt;){var lr=2*(Qt+1)-1,dr=Vt[lr],Ar=lr+1,Nr=Vt[Ar];if(0>i(dr,Ht))Ar<er&&0>i(Nr,dr)?(Vt[Qt]=Nr,Vt[Ar]=Ht,Qt=Ar):(Vt[Qt]=dr,Vt[lr]=Ht,Qt=lr);else if(Ar<er&&0>i(Nr,Ht))Vt[Qt]=Nr,Vt[Ar]=Ht,Qt=Ar;else break e}}return Ot}function i(Vt,Ot){var Ht=Vt.sortIndex-Ot.sortIndex;return Ht!==0?Ht:Vt.id-Ot.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,f=s.now();t.unstable_now=function(){return s.now()-f}}var _=[],N=[],I=1,me=null,fe=3,Te=!1,qe=!1,Ve=!1,Ue=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,Fe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function He(Vt){for(var Ot=r(N);Ot!==null;){if(Ot.callback===null)n(N);else if(Ot.startTime<=Vt)n(N),Ot.sortIndex=Ot.expirationTime,e(_,Ot);else break;Ot=r(N)}}function tt(Vt){if(Ve=!1,He(Vt),!qe)if(r(_)!==null)qe=!0,ut(et);else{var Ot=r(N);Ot!==null&&qt(tt,Ot.startTime-Vt)}}function et(Vt,Ot){qe=!1,Ve&&(Ve=!1,Ee(Pt),Pt=-1),Te=!0;var Ht=fe;try{for(He(Ot),me=r(_);me!==null&&(!(me.expirationTime>Ot)||Vt&&!kr());){var Qt=me.callback;if(typeof Qt=="function"){me.callback=null,fe=me.priorityLevel;var er=Qt(me.expirationTime<=Ot);Ot=t.unstable_now(),typeof er=="function"?me.callback=er:me===r(_)&&n(_),He(Ot)}else n(_);me=r(_)}if(me!==null)var kt=!0;else{var lr=r(N);lr!==null&&qt(tt,lr.startTime-Ot),kt=!1}return kt}finally{me=null,fe=Ht,Te=!1}}var ct=!1,xt=null,Pt=-1,ir=5,mr=-1;function kr(){return!(t.unstable_now()-mr<ir)}function yr(){if(xt!==null){var Vt=t.unstable_now();mr=Vt;var Ot=!0;try{Ot=xt(!0,Vt)}finally{Ot?vt():(ct=!1,xt=null)}}else ct=!1}var vt;if(typeof Fe=="function")vt=function(){Fe(yr)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,It=gt.port2;gt.port1.onmessage=yr,vt=function(){It.postMessage(null)}}else vt=function(){Ue(yr,0)};function ut(Vt){xt=Vt,ct||(ct=!0,vt())}function qt(Vt,Ot){Pt=Ue(function(){Vt(t.unstable_now())},Ot)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Vt){Vt.callback=null},t.unstable_continueExecution=function(){qe||Te||(qe=!0,ut(et))},t.unstable_forceFrameRate=function(Vt){0>Vt||125<Vt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ir=0<Vt?Math.floor(1e3/Vt):5},t.unstable_getCurrentPriorityLevel=function(){return fe},t.unstable_getFirstCallbackNode=function(){return r(_)},t.unstable_next=function(Vt){switch(fe){case 1:case 2:case 3:var Ot=3;break;default:Ot=fe}var Ht=fe;fe=Ot;try{return Vt()}finally{fe=Ht}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Vt,Ot){switch(Vt){case 1:case 2:case 3:case 4:case 5:break;default:Vt=3}var Ht=fe;fe=Vt;try{return Ot()}finally{fe=Ht}},t.unstable_scheduleCallback=function(Vt,Ot,Ht){var Qt=t.unstable_now();switch(typeof Ht=="object"&&Ht!==null?(Ht=Ht.delay,Ht=typeof Ht=="number"&&0<Ht?Qt+Ht:Qt):Ht=Qt,Vt){case 1:var er=-1;break;case 2:er=250;break;case 5:er=1073741823;break;case 4:er=1e4;break;default:er=5e3}return er=Ht+er,Vt={id:I++,callback:Ot,priorityLevel:Vt,startTime:Ht,expirationTime:er,sortIndex:-1},Ht>Qt?(Vt.sortIndex=Ht,e(N,Vt),r(_)===null&&Vt===r(N)&&(Ve?(Ee(Pt),Pt=-1):Ve=!0,qt(tt,Ht-Qt))):(Vt.sortIndex=er,e(_,Vt),qe||Te||(qe=!0,ut(et))),Vt},t.unstable_shouldYield=kr,t.unstable_wrapCallback=function(Vt){var Ot=fe;return function(){var Ht=fe;fe=Ot;try{return Vt.apply(this,arguments)}finally{fe=Ht}}}})(Sw);_w.exports=Sw;var SA=_w.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA=Jt,Qs=SA;function tn(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kw=new Set,rf={};function Gc(t,e){Fu(t,e),Fu(t+"Capture",e)}function Fu(t,e){for(rf[t]=e,t=0;t<e.length;t++)kw.add(e[t])}var wl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),og=Object.prototype.hasOwnProperty,MA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hx={},px={};function TA(t){return og.call(px,t)?!0:og.call(hx,t)?!1:MA.test(t)?px[t]=!0:(hx[t]=!0,!1)}function AA(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CA(t,e,r,n){if(e===null||typeof e>"u"||AA(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function js(t,e,r,n,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var ts={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ts[t]=new js(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ts[e]=new js(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ts[t]=new js(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ts[t]=new js(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ts[t]=new js(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ts[t]=new js(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ts[t]=new js(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ts[t]=new js(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ts[t]=new js(t,5,!1,t.toLowerCase(),null,!1,!1)});var w0=/[\-:]([a-z])/g;function _0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(w0,_0);ts[e]=new js(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(w0,_0);ts[e]=new js(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(w0,_0);ts[e]=new js(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ts[t]=new js(t,1,!1,t.toLowerCase(),null,!1,!1)});ts.xlinkHref=new js("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ts[t]=new js(t,1,!1,t.toLowerCase(),null,!0,!0)});function S0(t,e,r,n){var i=ts.hasOwnProperty(e)?ts[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CA(e,r,i,n)&&(r=null),n||i===null?TA(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ml=kA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xh=Symbol.for("react.element"),yu=Symbol.for("react.portal"),xu=Symbol.for("react.fragment"),k0=Symbol.for("react.strict_mode"),lg=Symbol.for("react.profiler"),Mw=Symbol.for("react.provider"),Tw=Symbol.for("react.context"),M0=Symbol.for("react.forward_ref"),cg=Symbol.for("react.suspense"),ug=Symbol.for("react.suspense_list"),T0=Symbol.for("react.memo"),Nl=Symbol.for("react.lazy"),Aw=Symbol.for("react.offscreen"),mx=Symbol.iterator;function vd(t){return t===null||typeof t!="object"?null:(t=mx&&t[mx]||t["@@iterator"],typeof t=="function"?t:null)}var ma=Object.assign,uv;function Ld(t){if(uv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);uv=e&&e[1]||""}return`
`+uv+t}var dv=!1;function fv(t,e){if(!t||dv)return"";dv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(N){var n=N}Reflect.construct(t,[],e)}else{try{e.call()}catch(N){n=N}t.call(e.prototype)}else{try{throw Error()}catch(N){n=N}t()}}catch(N){if(N&&n&&typeof N.stack=="string"){for(var i=N.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,f=a.length-1;1<=s&&0<=f&&i[s]!==a[f];)f--;for(;1<=s&&0<=f;s--,f--)if(i[s]!==a[f]){if(s!==1||f!==1)do if(s--,f--,0>f||i[s]!==a[f]){var _=`
`+i[s].replace(" at new "," at ");return t.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",t.displayName)),_}while(1<=s&&0<=f);break}}}finally{dv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ld(t):""}function jA(t){switch(t.tag){case 5:return Ld(t.type);case 16:return Ld("Lazy");case 13:return Ld("Suspense");case 19:return Ld("SuspenseList");case 0:case 2:case 15:return t=fv(t.type,!1),t;case 11:return t=fv(t.type.render,!1),t;case 1:return t=fv(t.type,!0),t;default:return""}}function dg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xu:return"Fragment";case yu:return"Portal";case lg:return"Profiler";case k0:return"StrictMode";case cg:return"Suspense";case ug:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tw:return(t.displayName||"Context")+".Consumer";case Mw:return(t._context.displayName||"Context")+".Provider";case M0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T0:return e=t.displayName||null,e!==null?e:dg(t.type)||"Memo";case Nl:e=t._payload,t=t._init;try{return dg(t(e))}catch{}}return null}function LA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dg(e);case 8:return e===k0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EA(t){var e=Cw(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bh(t){t._valueTracker||(t._valueTracker=EA(t))}function jw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Cw(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Sp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fg(t,e){var r=e.checked;return ma({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function vx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=rc(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lw(t,e){e=e.checked,e!=null&&S0(t,"checked",e,!1)}function hg(t,e){Lw(t,e);var r=rc(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pg(t,e.type,r):e.hasOwnProperty("defaultValue")&&pg(t,e.type,rc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gx(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function pg(t,e,r){(e!=="number"||Sp(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ed=Array.isArray;function Lu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+rc(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function mg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tn(91));return ma({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(tn(92));if(Ed(r)){if(1<r.length)throw Error(tn(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:rc(r)}}function Ew(t,e){var r=rc(e.value),n=rc(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function xx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wh,Rw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wh=wh||document.createElement("div"),wh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Bd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DA=["Webkit","ms","Moz","O"];Object.keys(Bd).forEach(function(t){DA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bd[e]=Bd[t]})});function Pw(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Bd.hasOwnProperty(t)&&Bd[t]?(""+e).trim():e+"px"}function Nw(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Pw(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var RA=ma({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gg(t,e){if(e){if(RA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tn(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(tn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tn(62))}}function yg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xg=null;function A0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bg=null,Eu=null,Du=null;function bx(t){if(t=Df(t)){if(typeof bg!="function")throw Error(tn(280));var e=t.stateNode;e&&(e=sm(e),bg(t.stateNode,t.type,e))}}function zw(t){Eu?Du?Du.push(t):Du=[t]:Eu=t}function Fw(){if(Eu){var t=Eu,e=Du;if(Du=Eu=null,bx(t),e)for(t=0;t<e.length;t++)bx(e[t])}}function Iw(t,e){return t(e)}function Ow(){}var hv=!1;function Bw(t,e,r){if(hv)return t(e,r);hv=!0;try{return Iw(t,e,r)}finally{hv=!1,(Eu!==null||Du!==null)&&(Ow(),Fw())}}function af(t,e){var r=t.stateNode;if(r===null)return null;var n=sm(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(tn(231,e,typeof r));return r}var wg=!1;if(wl)try{var gd={};Object.defineProperty(gd,"passive",{get:function(){wg=!0}}),window.addEventListener("test",gd,gd),window.removeEventListener("test",gd,gd)}catch{wg=!1}function PA(t,e,r,n,i,a,s,f,_){var N=Array.prototype.slice.call(arguments,3);try{e.apply(r,N)}catch(I){this.onError(I)}}var Hd=!1,kp=null,Mp=!1,_g=null,NA={onError:function(t){Hd=!0,kp=t}};function zA(t,e,r,n,i,a,s,f,_){Hd=!1,kp=null,PA.apply(NA,arguments)}function FA(t,e,r,n,i,a,s,f,_){if(zA.apply(this,arguments),Hd){if(Hd){var N=kp;Hd=!1,kp=null}else throw Error(tn(198));Mp||(Mp=!0,_g=N)}}function Xc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Hw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wx(t){if(Xc(t)!==t)throw Error(tn(188))}function IA(t){var e=t.alternate;if(!e){if(e=Xc(t),e===null)throw Error(tn(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return wx(i),t;if(a===n)return wx(i),e;a=a.sibling}throw Error(tn(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,f=i.child;f;){if(f===r){s=!0,r=i,n=a;break}if(f===n){s=!0,n=i,r=a;break}f=f.sibling}if(!s){for(f=a.child;f;){if(f===r){s=!0,r=a,n=i;break}if(f===n){s=!0,n=a,r=i;break}f=f.sibling}if(!s)throw Error(tn(189))}}if(r.alternate!==n)throw Error(tn(190))}if(r.tag!==3)throw Error(tn(188));return r.stateNode.current===r?t:e}function Ww(t){return t=IA(t),t!==null?qw(t):null}function qw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qw(t);if(e!==null)return e;t=t.sibling}return null}var Uw=Qs.unstable_scheduleCallback,_x=Qs.unstable_cancelCallback,OA=Qs.unstable_shouldYield,BA=Qs.unstable_requestPaint,Ca=Qs.unstable_now,HA=Qs.unstable_getCurrentPriorityLevel,C0=Qs.unstable_ImmediatePriority,Vw=Qs.unstable_UserBlockingPriority,Tp=Qs.unstable_NormalPriority,WA=Qs.unstable_LowPriority,$w=Qs.unstable_IdlePriority,rm=null,Zo=null;function qA(t){if(Zo&&typeof Zo.onCommitFiberRoot=="function")try{Zo.onCommitFiberRoot(rm,t,void 0,(t.current.flags&128)===128)}catch{}}var jo=Math.clz32?Math.clz32:$A,UA=Math.log,VA=Math.LN2;function $A(t){return t>>>=0,t===0?32:31-(UA(t)/VA|0)|0}var _h=64,Sh=4194304;function Dd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ap(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,s=r&268435455;if(s!==0){var f=s&~i;f!==0?n=Dd(f):(a&=s,a!==0&&(n=Dd(a)))}else s=r&~i,s!==0?n=Dd(s):a!==0&&(n=Dd(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-jo(e),i=1<<r,n|=t[r],e&=~i;return n}function YA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GA(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-jo(a),f=1<<s,_=i[s];_===-1?(!(f&r)||f&n)&&(i[s]=YA(f,e)):_<=e&&(t.expiredLanes|=f),a&=~f}}function Sg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yw(){var t=_h;return _h<<=1,!(_h&4194240)&&(_h=64),t}function pv(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Lf(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jo(e),t[e]=r}function XA(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-jo(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function j0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-jo(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Ri=0;function Gw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xw,L0,Zw,Kw,Jw,kg=!1,kh=[],$l=null,Yl=null,Gl=null,sf=new Map,of=new Map,Fl=[],ZA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sx(t,e){switch(t){case"focusin":case"focusout":$l=null;break;case"dragenter":case"dragleave":Yl=null;break;case"mouseover":case"mouseout":Gl=null;break;case"pointerover":case"pointerout":sf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":of.delete(e.pointerId)}}function yd(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Df(e),e!==null&&L0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function KA(t,e,r,n,i){switch(e){case"focusin":return $l=yd($l,t,e,r,n,i),!0;case"dragenter":return Yl=yd(Yl,t,e,r,n,i),!0;case"mouseover":return Gl=yd(Gl,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return sf.set(a,yd(sf.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,of.set(a,yd(of.get(a)||null,t,e,r,n,i)),!0}return!1}function Qw(t){var e=Rc(t.target);if(e!==null){var r=Xc(e);if(r!==null){if(e=r.tag,e===13){if(e=Hw(r),e!==null){t.blockedOn=e,Jw(t.priority,function(){Zw(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function np(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Mg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);xg=n,r.target.dispatchEvent(n),xg=null}else return e=Df(r),e!==null&&L0(e),t.blockedOn=r,!1;e.shift()}return!0}function kx(t,e,r){np(t)&&r.delete(e)}function JA(){kg=!1,$l!==null&&np($l)&&($l=null),Yl!==null&&np(Yl)&&(Yl=null),Gl!==null&&np(Gl)&&(Gl=null),sf.forEach(kx),of.forEach(kx)}function xd(t,e){t.blockedOn===e&&(t.blockedOn=null,kg||(kg=!0,Qs.unstable_scheduleCallback(Qs.unstable_NormalPriority,JA)))}function lf(t){function e(i){return xd(i,t)}if(0<kh.length){xd(kh[0],t);for(var r=1;r<kh.length;r++){var n=kh[r];n.blockedOn===t&&(n.blockedOn=null)}}for($l!==null&&xd($l,t),Yl!==null&&xd(Yl,t),Gl!==null&&xd(Gl,t),sf.forEach(e),of.forEach(e),r=0;r<Fl.length;r++)n=Fl[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Fl.length&&(r=Fl[0],r.blockedOn===null);)Qw(r),r.blockedOn===null&&Fl.shift()}var Ru=Ml.ReactCurrentBatchConfig,Cp=!0;function QA(t,e,r,n){var i=Ri,a=Ru.transition;Ru.transition=null;try{Ri=1,E0(t,e,r,n)}finally{Ri=i,Ru.transition=a}}function e4(t,e,r,n){var i=Ri,a=Ru.transition;Ru.transition=null;try{Ri=4,E0(t,e,r,n)}finally{Ri=i,Ru.transition=a}}function E0(t,e,r,n){if(Cp){var i=Mg(t,e,r,n);if(i===null)kv(t,e,n,jp,r),Sx(t,n);else if(KA(i,t,e,r,n))n.stopPropagation();else if(Sx(t,n),e&4&&-1<ZA.indexOf(t)){for(;i!==null;){var a=Df(i);if(a!==null&&Xw(a),a=Mg(t,e,r,n),a===null&&kv(t,e,n,jp,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else kv(t,e,n,null,r)}}var jp=null;function Mg(t,e,r,n){if(jp=null,t=A0(n),t=Rc(t),t!==null)if(e=Xc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Hw(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jp=t,null}function e_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HA()){case C0:return 1;case Vw:return 4;case Tp:case WA:return 16;case $w:return 536870912;default:return 16}default:return 16}}var Ol=null,D0=null,ip=null;function t_(){if(ip)return ip;var t,e=D0,r=e.length,n,i="value"in Ol?Ol.value:Ol.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[a-n];n++);return ip=i.slice(t,1<n?1-n:void 0)}function ap(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mh(){return!0}function Mx(){return!1}function to(t){function e(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(r=t[f],this[f]=r?r(a):a[f]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Mh:Mx,this.isPropagationStopped=Mx,this}return ma(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mh)},persist:function(){},isPersistent:Mh}),e}var Gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R0=to(Gu),Ef=ma({},Gu,{view:0,detail:0}),t4=to(Ef),mv,vv,bd,nm=ma({},Ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bd&&(bd&&t.type==="mousemove"?(mv=t.screenX-bd.screenX,vv=t.screenY-bd.screenY):vv=mv=0,bd=t),mv)},movementY:function(t){return"movementY"in t?t.movementY:vv}}),Tx=to(nm),r4=ma({},nm,{dataTransfer:0}),n4=to(r4),i4=ma({},Ef,{relatedTarget:0}),gv=to(i4),a4=ma({},Gu,{animationName:0,elapsedTime:0,pseudoElement:0}),s4=to(a4),o4=ma({},Gu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),l4=to(o4),c4=ma({},Gu,{data:0}),Ax=to(c4),u4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=f4[t])?!!e[t]:!1}function P0(){return h4}var p4=ma({},Ef,{key:function(t){if(t.key){var e=u4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ap(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?d4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P0,charCode:function(t){return t.type==="keypress"?ap(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ap(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),m4=to(p4),v4=ma({},nm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cx=to(v4),g4=ma({},Ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P0}),y4=to(g4),x4=ma({},Gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),b4=to(x4),w4=ma({},nm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_4=to(w4),S4=[9,13,27,32],N0=wl&&"CompositionEvent"in window,Wd=null;wl&&"documentMode"in document&&(Wd=document.documentMode);var k4=wl&&"TextEvent"in window&&!Wd,r_=wl&&(!N0||Wd&&8<Wd&&11>=Wd),jx=" ",Lx=!1;function n_(t,e){switch(t){case"keyup":return S4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bu=!1;function M4(t,e){switch(t){case"compositionend":return i_(e);case"keypress":return e.which!==32?null:(Lx=!0,jx);case"textInput":return t=e.data,t===jx&&Lx?null:t;default:return null}}function T4(t,e){if(bu)return t==="compositionend"||!N0&&n_(t,e)?(t=t_(),ip=D0=Ol=null,bu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r_&&e.locale!=="ko"?null:e.data;default:return null}}var A4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ex(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!A4[t.type]:e==="textarea"}function a_(t,e,r,n){zw(n),e=Lp(e,"onChange"),0<e.length&&(r=new R0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var qd=null,cf=null;function C4(t){v_(t,0)}function im(t){var e=Su(t);if(jw(e))return t}function j4(t,e){if(t==="change")return e}var s_=!1;if(wl){var yv;if(wl){var xv="oninput"in document;if(!xv){var Dx=document.createElement("div");Dx.setAttribute("oninput","return;"),xv=typeof Dx.oninput=="function"}yv=xv}else yv=!1;s_=yv&&(!document.documentMode||9<document.documentMode)}function Rx(){qd&&(qd.detachEvent("onpropertychange",o_),cf=qd=null)}function o_(t){if(t.propertyName==="value"&&im(cf)){var e=[];a_(e,cf,t,A0(t)),Bw(C4,e)}}function L4(t,e,r){t==="focusin"?(Rx(),qd=e,cf=r,qd.attachEvent("onpropertychange",o_)):t==="focusout"&&Rx()}function E4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return im(cf)}function D4(t,e){if(t==="click")return im(e)}function R4(t,e){if(t==="input"||t==="change")return im(e)}function P4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Do=typeof Object.is=="function"?Object.is:P4;function uf(t,e){if(Do(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!og.call(e,i)||!Do(t[i],e[i]))return!1}return!0}function Px(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nx(t,e){var r=Px(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Px(r)}}function l_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?l_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c_(){for(var t=window,e=Sp();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Sp(t.document)}return e}function z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function N4(t){var e=c_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&l_(r.ownerDocument.documentElement,r)){if(n!==null&&z0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Nx(r,a);var s=Nx(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var z4=wl&&"documentMode"in document&&11>=document.documentMode,wu=null,Tg=null,Ud=null,Ag=!1;function zx(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ag||wu==null||wu!==Sp(n)||(n=wu,"selectionStart"in n&&z0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ud&&uf(Ud,n)||(Ud=n,n=Lp(Tg,"onSelect"),0<n.length&&(e=new R0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=wu)))}function Th(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var _u={animationend:Th("Animation","AnimationEnd"),animationiteration:Th("Animation","AnimationIteration"),animationstart:Th("Animation","AnimationStart"),transitionend:Th("Transition","TransitionEnd")},bv={},u_={};wl&&(u_=document.createElement("div").style,"AnimationEvent"in window||(delete _u.animationend.animation,delete _u.animationiteration.animation,delete _u.animationstart.animation),"TransitionEvent"in window||delete _u.transitionend.transition);function am(t){if(bv[t])return bv[t];if(!_u[t])return t;var e=_u[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in u_)return bv[t]=e[r];return t}var d_=am("animationend"),f_=am("animationiteration"),h_=am("animationstart"),p_=am("transitionend"),m_=new Map,Fx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sc(t,e){m_.set(t,e),Gc(e,[t])}for(var wv=0;wv<Fx.length;wv++){var _v=Fx[wv],F4=_v.toLowerCase(),I4=_v[0].toUpperCase()+_v.slice(1);sc(F4,"on"+I4)}sc(d_,"onAnimationEnd");sc(f_,"onAnimationIteration");sc(h_,"onAnimationStart");sc("dblclick","onDoubleClick");sc("focusin","onFocus");sc("focusout","onBlur");sc(p_,"onTransitionEnd");Fu("onMouseEnter",["mouseout","mouseover"]);Fu("onMouseLeave",["mouseout","mouseover"]);Fu("onPointerEnter",["pointerout","pointerover"]);Fu("onPointerLeave",["pointerout","pointerover"]);Gc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rd));function Ix(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,FA(n,e,void 0,t),t.currentTarget=null}function v_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var s=n.length-1;0<=s;s--){var f=n[s],_=f.instance,N=f.currentTarget;if(f=f.listener,_!==a&&i.isPropagationStopped())break e;Ix(i,f,N),a=_}else for(s=0;s<n.length;s++){if(f=n[s],_=f.instance,N=f.currentTarget,f=f.listener,_!==a&&i.isPropagationStopped())break e;Ix(i,f,N),a=_}}}if(Mp)throw t=_g,Mp=!1,_g=null,t}function ea(t,e){var r=e[Dg];r===void 0&&(r=e[Dg]=new Set);var n=t+"__bubble";r.has(n)||(g_(e,t,2,!1),r.add(n))}function Sv(t,e,r){var n=0;e&&(n|=4),g_(r,t,n,e)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function df(t){if(!t[Ah]){t[Ah]=!0,kw.forEach(function(r){r!=="selectionchange"&&(O4.has(r)||Sv(r,!1,t),Sv(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ah]||(e[Ah]=!0,Sv("selectionchange",!1,e))}}function g_(t,e,r,n){switch(e_(e)){case 1:var i=QA;break;case 4:i=e4;break;default:i=E0}r=i.bind(null,e,r,t),i=void 0,!wg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function kv(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var f=n.stateNode.containerInfo;if(f===i||f.nodeType===8&&f.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var _=s.tag;if((_===3||_===4)&&(_=s.stateNode.containerInfo,_===i||_.nodeType===8&&_.parentNode===i))return;s=s.return}for(;f!==null;){if(s=Rc(f),s===null)return;if(_=s.tag,_===5||_===6){n=a=s;continue e}f=f.parentNode}}n=n.return}Bw(function(){var N=a,I=A0(r),me=[];e:{var fe=m_.get(t);if(fe!==void 0){var Te=R0,qe=t;switch(t){case"keypress":if(ap(r)===0)break e;case"keydown":case"keyup":Te=m4;break;case"focusin":qe="focus",Te=gv;break;case"focusout":qe="blur",Te=gv;break;case"beforeblur":case"afterblur":Te=gv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Tx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=n4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=y4;break;case d_:case f_:case h_:Te=s4;break;case p_:Te=b4;break;case"scroll":Te=t4;break;case"wheel":Te=_4;break;case"copy":case"cut":case"paste":Te=l4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=Cx}var Ve=(e&4)!==0,Ue=!Ve&&t==="scroll",Ee=Ve?fe!==null?fe+"Capture":null:fe;Ve=[];for(var Fe=N,He;Fe!==null;){He=Fe;var tt=He.stateNode;if(He.tag===5&&tt!==null&&(He=tt,Ee!==null&&(tt=af(Fe,Ee),tt!=null&&Ve.push(ff(Fe,tt,He)))),Ue)break;Fe=Fe.return}0<Ve.length&&(fe=new Te(fe,qe,null,r,I),me.push({event:fe,listeners:Ve}))}}if(!(e&7)){e:{if(fe=t==="mouseover"||t==="pointerover",Te=t==="mouseout"||t==="pointerout",fe&&r!==xg&&(qe=r.relatedTarget||r.fromElement)&&(Rc(qe)||qe[_l]))break e;if((Te||fe)&&(fe=I.window===I?I:(fe=I.ownerDocument)?fe.defaultView||fe.parentWindow:window,Te?(qe=r.relatedTarget||r.toElement,Te=N,qe=qe?Rc(qe):null,qe!==null&&(Ue=Xc(qe),qe!==Ue||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(Te=null,qe=N),Te!==qe)){if(Ve=Tx,tt="onMouseLeave",Ee="onMouseEnter",Fe="mouse",(t==="pointerout"||t==="pointerover")&&(Ve=Cx,tt="onPointerLeave",Ee="onPointerEnter",Fe="pointer"),Ue=Te==null?fe:Su(Te),He=qe==null?fe:Su(qe),fe=new Ve(tt,Fe+"leave",Te,r,I),fe.target=Ue,fe.relatedTarget=He,tt=null,Rc(I)===N&&(Ve=new Ve(Ee,Fe+"enter",qe,r,I),Ve.target=He,Ve.relatedTarget=Ue,tt=Ve),Ue=tt,Te&&qe)t:{for(Ve=Te,Ee=qe,Fe=0,He=Ve;He;He=pu(He))Fe++;for(He=0,tt=Ee;tt;tt=pu(tt))He++;for(;0<Fe-He;)Ve=pu(Ve),Fe--;for(;0<He-Fe;)Ee=pu(Ee),He--;for(;Fe--;){if(Ve===Ee||Ee!==null&&Ve===Ee.alternate)break t;Ve=pu(Ve),Ee=pu(Ee)}Ve=null}else Ve=null;Te!==null&&Ox(me,fe,Te,Ve,!1),qe!==null&&Ue!==null&&Ox(me,Ue,qe,Ve,!0)}}e:{if(fe=N?Su(N):window,Te=fe.nodeName&&fe.nodeName.toLowerCase(),Te==="select"||Te==="input"&&fe.type==="file")var et=j4;else if(Ex(fe))if(s_)et=R4;else{et=E4;var ct=L4}else(Te=fe.nodeName)&&Te.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(et=D4);if(et&&(et=et(t,N))){a_(me,et,r,I);break e}ct&&ct(t,fe,N),t==="focusout"&&(ct=fe._wrapperState)&&ct.controlled&&fe.type==="number"&&pg(fe,"number",fe.value)}switch(ct=N?Su(N):window,t){case"focusin":(Ex(ct)||ct.contentEditable==="true")&&(wu=ct,Tg=N,Ud=null);break;case"focusout":Ud=Tg=wu=null;break;case"mousedown":Ag=!0;break;case"contextmenu":case"mouseup":case"dragend":Ag=!1,zx(me,r,I);break;case"selectionchange":if(z4)break;case"keydown":case"keyup":zx(me,r,I)}var xt;if(N0)e:{switch(t){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else bu?n_(t,r)&&(Pt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Pt="onCompositionStart");Pt&&(r_&&r.locale!=="ko"&&(bu||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&bu&&(xt=t_()):(Ol=I,D0="value"in Ol?Ol.value:Ol.textContent,bu=!0)),ct=Lp(N,Pt),0<ct.length&&(Pt=new Ax(Pt,t,null,r,I),me.push({event:Pt,listeners:ct}),xt?Pt.data=xt:(xt=i_(r),xt!==null&&(Pt.data=xt)))),(xt=k4?M4(t,r):T4(t,r))&&(N=Lp(N,"onBeforeInput"),0<N.length&&(I=new Ax("onBeforeInput","beforeinput",null,r,I),me.push({event:I,listeners:N}),I.data=xt))}v_(me,e)})}function ff(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Lp(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=af(t,r),a!=null&&n.unshift(ff(t,a,i)),a=af(t,e),a!=null&&n.push(ff(t,a,i))),t=t.return}return n}function pu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ox(t,e,r,n,i){for(var a=e._reactName,s=[];r!==null&&r!==n;){var f=r,_=f.alternate,N=f.stateNode;if(_!==null&&_===n)break;f.tag===5&&N!==null&&(f=N,i?(_=af(r,a),_!=null&&s.unshift(ff(r,_,f))):i||(_=af(r,a),_!=null&&s.push(ff(r,_,f)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var B4=/\r\n?/g,H4=/\u0000|\uFFFD/g;function Bx(t){return(typeof t=="string"?t:""+t).replace(B4,`
`).replace(H4,"")}function Ch(t,e,r){if(e=Bx(e),Bx(t)!==e&&r)throw Error(tn(425))}function Ep(){}var Cg=null,jg=null;function Lg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Eg=typeof setTimeout=="function"?setTimeout:void 0,W4=typeof clearTimeout=="function"?clearTimeout:void 0,Hx=typeof Promise=="function"?Promise:void 0,q4=typeof queueMicrotask=="function"?queueMicrotask:typeof Hx<"u"?function(t){return Hx.resolve(null).then(t).catch(U4)}:Eg;function U4(t){setTimeout(function(){throw t})}function Mv(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),lf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);lf(e)}function Xl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),Go="__reactFiber$"+Xu,hf="__reactProps$"+Xu,_l="__reactContainer$"+Xu,Dg="__reactEvents$"+Xu,V4="__reactListeners$"+Xu,$4="__reactHandles$"+Xu;function Rc(t){var e=t[Go];if(e)return e;for(var r=t.parentNode;r;){if(e=r[_l]||r[Go]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Wx(t);t!==null;){if(r=t[Go])return r;t=Wx(t)}return e}t=r,r=t.parentNode}return null}function Df(t){return t=t[Go]||t[_l],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Su(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(tn(33))}function sm(t){return t[hf]||null}var Rg=[],ku=-1;function oc(t){return{current:t}}function ta(t){0>ku||(t.current=Rg[ku],Rg[ku]=null,ku--)}function Zi(t,e){ku++,Rg[ku]=t.current,t.current=e}var nc={},ys=oc(nc),Ws=oc(!1),Hc=nc;function Iu(t,e){var r=t.type.contextTypes;if(!r)return nc;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qs(t){return t=t.childContextTypes,t!=null}function Dp(){ta(Ws),ta(ys)}function qx(t,e,r){if(ys.current!==nc)throw Error(tn(168));Zi(ys,e),Zi(Ws,r)}function y_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(tn(108,LA(t)||"Unknown",i));return ma({},r,n)}function Rp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nc,Hc=ys.current,Zi(ys,t),Zi(Ws,Ws.current),!0}function Ux(t,e,r){var n=t.stateNode;if(!n)throw Error(tn(169));r?(t=y_(t,e,Hc),n.__reactInternalMemoizedMergedChildContext=t,ta(Ws),ta(ys),Zi(ys,t)):ta(Ws),Zi(Ws,r)}var hl=null,om=!1,Tv=!1;function x_(t){hl===null?hl=[t]:hl.push(t)}function Y4(t){om=!0,x_(t)}function lc(){if(!Tv&&hl!==null){Tv=!0;var t=0,e=Ri;try{var r=hl;for(Ri=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}hl=null,om=!1}catch(i){throw hl!==null&&(hl=hl.slice(t+1)),Uw(C0,lc),i}finally{Ri=e,Tv=!1}}return null}var Mu=[],Tu=0,Pp=null,Np=0,po=[],mo=0,Wc=null,ml=1,vl="";function jc(t,e){Mu[Tu++]=Np,Mu[Tu++]=Pp,Pp=t,Np=e}function b_(t,e,r){po[mo++]=ml,po[mo++]=vl,po[mo++]=Wc,Wc=t;var n=ml;t=vl;var i=32-jo(n)-1;n&=~(1<<i),r+=1;var a=32-jo(e)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,ml=1<<32-jo(e)+i|r<<i|n,vl=a+t}else ml=1<<a|r<<i|n,vl=t}function F0(t){t.return!==null&&(jc(t,1),b_(t,1,0))}function I0(t){for(;t===Pp;)Pp=Mu[--Tu],Mu[Tu]=null,Np=Mu[--Tu],Mu[Tu]=null;for(;t===Wc;)Wc=po[--mo],po[mo]=null,vl=po[--mo],po[mo]=null,ml=po[--mo],po[mo]=null}var Js=null,Ks=null,sa=!1,Ao=null;function w_(t,e){var r=vo(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Vx(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Js=t,Ks=Xl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Js=t,Ks=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Wc!==null?{id:ml,overflow:vl}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=vo(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Js=t,Ks=null,!0):!1;default:return!1}}function Pg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ng(t){if(sa){var e=Ks;if(e){var r=e;if(!Vx(t,e)){if(Pg(t))throw Error(tn(418));e=Xl(r.nextSibling);var n=Js;e&&Vx(t,e)?w_(n,r):(t.flags=t.flags&-4097|2,sa=!1,Js=t)}}else{if(Pg(t))throw Error(tn(418));t.flags=t.flags&-4097|2,sa=!1,Js=t}}}function $x(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Js=t}function jh(t){if(t!==Js)return!1;if(!sa)return $x(t),sa=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lg(t.type,t.memoizedProps)),e&&(e=Ks)){if(Pg(t))throw __(),Error(tn(418));for(;e;)w_(t,e),e=Xl(e.nextSibling)}if($x(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(tn(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ks=Xl(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ks=null}}else Ks=Js?Xl(t.stateNode.nextSibling):null;return!0}function __(){for(var t=Ks;t;)t=Xl(t.nextSibling)}function Ou(){Ks=Js=null,sa=!1}function O0(t){Ao===null?Ao=[t]:Ao.push(t)}var G4=Ml.ReactCurrentBatchConfig;function wd(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(tn(309));var n=r.stateNode}if(!n)throw Error(tn(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var f=i.refs;s===null?delete f[a]:f[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(tn(284));if(!r._owner)throw Error(tn(290,t))}return t}function Lh(t,e){throw t=Object.prototype.toString.call(e),Error(tn(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yx(t){var e=t._init;return e(t._payload)}function S_(t){function e(Ee,Fe){if(t){var He=Ee.deletions;He===null?(Ee.deletions=[Fe],Ee.flags|=16):He.push(Fe)}}function r(Ee,Fe){if(!t)return null;for(;Fe!==null;)e(Ee,Fe),Fe=Fe.sibling;return null}function n(Ee,Fe){for(Ee=new Map;Fe!==null;)Fe.key!==null?Ee.set(Fe.key,Fe):Ee.set(Fe.index,Fe),Fe=Fe.sibling;return Ee}function i(Ee,Fe){return Ee=Ql(Ee,Fe),Ee.index=0,Ee.sibling=null,Ee}function a(Ee,Fe,He){return Ee.index=He,t?(He=Ee.alternate,He!==null?(He=He.index,He<Fe?(Ee.flags|=2,Fe):He):(Ee.flags|=2,Fe)):(Ee.flags|=1048576,Fe)}function s(Ee){return t&&Ee.alternate===null&&(Ee.flags|=2),Ee}function f(Ee,Fe,He,tt){return Fe===null||Fe.tag!==6?(Fe=Rv(He,Ee.mode,tt),Fe.return=Ee,Fe):(Fe=i(Fe,He),Fe.return=Ee,Fe)}function _(Ee,Fe,He,tt){var et=He.type;return et===xu?I(Ee,Fe,He.props.children,tt,He.key):Fe!==null&&(Fe.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Nl&&Yx(et)===Fe.type)?(tt=i(Fe,He.props),tt.ref=wd(Ee,Fe,He),tt.return=Ee,tt):(tt=fp(He.type,He.key,He.props,null,Ee.mode,tt),tt.ref=wd(Ee,Fe,He),tt.return=Ee,tt)}function N(Ee,Fe,He,tt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==He.containerInfo||Fe.stateNode.implementation!==He.implementation?(Fe=Pv(He,Ee.mode,tt),Fe.return=Ee,Fe):(Fe=i(Fe,He.children||[]),Fe.return=Ee,Fe)}function I(Ee,Fe,He,tt,et){return Fe===null||Fe.tag!==7?(Fe=Ic(He,Ee.mode,tt,et),Fe.return=Ee,Fe):(Fe=i(Fe,He),Fe.return=Ee,Fe)}function me(Ee,Fe,He){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Fe=Rv(""+Fe,Ee.mode,He),Fe.return=Ee,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case xh:return He=fp(Fe.type,Fe.key,Fe.props,null,Ee.mode,He),He.ref=wd(Ee,null,Fe),He.return=Ee,He;case yu:return Fe=Pv(Fe,Ee.mode,He),Fe.return=Ee,Fe;case Nl:var tt=Fe._init;return me(Ee,tt(Fe._payload),He)}if(Ed(Fe)||vd(Fe))return Fe=Ic(Fe,Ee.mode,He,null),Fe.return=Ee,Fe;Lh(Ee,Fe)}return null}function fe(Ee,Fe,He,tt){var et=Fe!==null?Fe.key:null;if(typeof He=="string"&&He!==""||typeof He=="number")return et!==null?null:f(Ee,Fe,""+He,tt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case xh:return He.key===et?_(Ee,Fe,He,tt):null;case yu:return He.key===et?N(Ee,Fe,He,tt):null;case Nl:return et=He._init,fe(Ee,Fe,et(He._payload),tt)}if(Ed(He)||vd(He))return et!==null?null:I(Ee,Fe,He,tt,null);Lh(Ee,He)}return null}function Te(Ee,Fe,He,tt,et){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return Ee=Ee.get(He)||null,f(Fe,Ee,""+tt,et);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case xh:return Ee=Ee.get(tt.key===null?He:tt.key)||null,_(Fe,Ee,tt,et);case yu:return Ee=Ee.get(tt.key===null?He:tt.key)||null,N(Fe,Ee,tt,et);case Nl:var ct=tt._init;return Te(Ee,Fe,He,ct(tt._payload),et)}if(Ed(tt)||vd(tt))return Ee=Ee.get(He)||null,I(Fe,Ee,tt,et,null);Lh(Fe,tt)}return null}function qe(Ee,Fe,He,tt){for(var et=null,ct=null,xt=Fe,Pt=Fe=0,ir=null;xt!==null&&Pt<He.length;Pt++){xt.index>Pt?(ir=xt,xt=null):ir=xt.sibling;var mr=fe(Ee,xt,He[Pt],tt);if(mr===null){xt===null&&(xt=ir);break}t&&xt&&mr.alternate===null&&e(Ee,xt),Fe=a(mr,Fe,Pt),ct===null?et=mr:ct.sibling=mr,ct=mr,xt=ir}if(Pt===He.length)return r(Ee,xt),sa&&jc(Ee,Pt),et;if(xt===null){for(;Pt<He.length;Pt++)xt=me(Ee,He[Pt],tt),xt!==null&&(Fe=a(xt,Fe,Pt),ct===null?et=xt:ct.sibling=xt,ct=xt);return sa&&jc(Ee,Pt),et}for(xt=n(Ee,xt);Pt<He.length;Pt++)ir=Te(xt,Ee,Pt,He[Pt],tt),ir!==null&&(t&&ir.alternate!==null&&xt.delete(ir.key===null?Pt:ir.key),Fe=a(ir,Fe,Pt),ct===null?et=ir:ct.sibling=ir,ct=ir);return t&&xt.forEach(function(kr){return e(Ee,kr)}),sa&&jc(Ee,Pt),et}function Ve(Ee,Fe,He,tt){var et=vd(He);if(typeof et!="function")throw Error(tn(150));if(He=et.call(He),He==null)throw Error(tn(151));for(var ct=et=null,xt=Fe,Pt=Fe=0,ir=null,mr=He.next();xt!==null&&!mr.done;Pt++,mr=He.next()){xt.index>Pt?(ir=xt,xt=null):ir=xt.sibling;var kr=fe(Ee,xt,mr.value,tt);if(kr===null){xt===null&&(xt=ir);break}t&&xt&&kr.alternate===null&&e(Ee,xt),Fe=a(kr,Fe,Pt),ct===null?et=kr:ct.sibling=kr,ct=kr,xt=ir}if(mr.done)return r(Ee,xt),sa&&jc(Ee,Pt),et;if(xt===null){for(;!mr.done;Pt++,mr=He.next())mr=me(Ee,mr.value,tt),mr!==null&&(Fe=a(mr,Fe,Pt),ct===null?et=mr:ct.sibling=mr,ct=mr);return sa&&jc(Ee,Pt),et}for(xt=n(Ee,xt);!mr.done;Pt++,mr=He.next())mr=Te(xt,Ee,Pt,mr.value,tt),mr!==null&&(t&&mr.alternate!==null&&xt.delete(mr.key===null?Pt:mr.key),Fe=a(mr,Fe,Pt),ct===null?et=mr:ct.sibling=mr,ct=mr);return t&&xt.forEach(function(yr){return e(Ee,yr)}),sa&&jc(Ee,Pt),et}function Ue(Ee,Fe,He,tt){if(typeof He=="object"&&He!==null&&He.type===xu&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case xh:e:{for(var et=He.key,ct=Fe;ct!==null;){if(ct.key===et){if(et=He.type,et===xu){if(ct.tag===7){r(Ee,ct.sibling),Fe=i(ct,He.props.children),Fe.return=Ee,Ee=Fe;break e}}else if(ct.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Nl&&Yx(et)===ct.type){r(Ee,ct.sibling),Fe=i(ct,He.props),Fe.ref=wd(Ee,ct,He),Fe.return=Ee,Ee=Fe;break e}r(Ee,ct);break}else e(Ee,ct);ct=ct.sibling}He.type===xu?(Fe=Ic(He.props.children,Ee.mode,tt,He.key),Fe.return=Ee,Ee=Fe):(tt=fp(He.type,He.key,He.props,null,Ee.mode,tt),tt.ref=wd(Ee,Fe,He),tt.return=Ee,Ee=tt)}return s(Ee);case yu:e:{for(ct=He.key;Fe!==null;){if(Fe.key===ct)if(Fe.tag===4&&Fe.stateNode.containerInfo===He.containerInfo&&Fe.stateNode.implementation===He.implementation){r(Ee,Fe.sibling),Fe=i(Fe,He.children||[]),Fe.return=Ee,Ee=Fe;break e}else{r(Ee,Fe);break}else e(Ee,Fe);Fe=Fe.sibling}Fe=Pv(He,Ee.mode,tt),Fe.return=Ee,Ee=Fe}return s(Ee);case Nl:return ct=He._init,Ue(Ee,Fe,ct(He._payload),tt)}if(Ed(He))return qe(Ee,Fe,He,tt);if(vd(He))return Ve(Ee,Fe,He,tt);Lh(Ee,He)}return typeof He=="string"&&He!==""||typeof He=="number"?(He=""+He,Fe!==null&&Fe.tag===6?(r(Ee,Fe.sibling),Fe=i(Fe,He),Fe.return=Ee,Ee=Fe):(r(Ee,Fe),Fe=Rv(He,Ee.mode,tt),Fe.return=Ee,Ee=Fe),s(Ee)):r(Ee,Fe)}return Ue}var Bu=S_(!0),k_=S_(!1),zp=oc(null),Fp=null,Au=null,B0=null;function H0(){B0=Au=Fp=null}function W0(t){var e=zp.current;ta(zp),t._currentValue=e}function zg(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Pu(t,e){Fp=t,B0=Au=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hs=!0),t.firstContext=null)}function yo(t){var e=t._currentValue;if(B0!==t)if(t={context:t,memoizedValue:e,next:null},Au===null){if(Fp===null)throw Error(tn(308));Au=t,Fp.dependencies={lanes:0,firstContext:t}}else Au=Au.next=t;return e}var Pc=null;function q0(t){Pc===null?Pc=[t]:Pc.push(t)}function M_(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,q0(e)):(r.next=i.next,i.next=r),e.interleaved=r,Sl(t,n)}function Sl(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var zl=!1;function U0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zl(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,_i&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Sl(t,r)}return i=n.interleaved,i===null?(e.next=e,q0(n)):(e.next=i.next,i.next=e),n.interleaved=e,Sl(t,r)}function sp(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,j0(t,r)}}function Gx(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ip(t,e,r,n){var i=t.updateQueue;zl=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,f=i.shared.pending;if(f!==null){i.shared.pending=null;var _=f,N=_.next;_.next=null,s===null?a=N:s.next=N,s=_;var I=t.alternate;I!==null&&(I=I.updateQueue,f=I.lastBaseUpdate,f!==s&&(f===null?I.firstBaseUpdate=N:f.next=N,I.lastBaseUpdate=_))}if(a!==null){var me=i.baseState;s=0,I=N=_=null,f=a;do{var fe=f.lane,Te=f.eventTime;if((n&fe)===fe){I!==null&&(I=I.next={eventTime:Te,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var qe=t,Ve=f;switch(fe=e,Te=r,Ve.tag){case 1:if(qe=Ve.payload,typeof qe=="function"){me=qe.call(Te,me,fe);break e}me=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Ve.payload,fe=typeof qe=="function"?qe.call(Te,me,fe):qe,fe==null)break e;me=ma({},me,fe);break e;case 2:zl=!0}}f.callback!==null&&f.lane!==0&&(t.flags|=64,fe=i.effects,fe===null?i.effects=[f]:fe.push(f))}else Te={eventTime:Te,lane:fe,tag:f.tag,payload:f.payload,callback:f.callback,next:null},I===null?(N=I=Te,_=me):I=I.next=Te,s|=fe;if(f=f.next,f===null){if(f=i.shared.pending,f===null)break;fe=f,f=fe.next,fe.next=null,i.lastBaseUpdate=fe,i.shared.pending=null}}while(!0);if(I===null&&(_=me),i.baseState=_,i.firstBaseUpdate=N,i.lastBaseUpdate=I,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Uc|=s,t.lanes=s,t.memoizedState=me}}function Xx(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(tn(191,i));i.call(n)}}}var Rf={},Ko=oc(Rf),pf=oc(Rf),mf=oc(Rf);function Nc(t){if(t===Rf)throw Error(tn(174));return t}function V0(t,e){switch(Zi(mf,e),Zi(pf,t),Zi(Ko,Rf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vg(e,t)}ta(Ko),Zi(Ko,e)}function Hu(){ta(Ko),ta(pf),ta(mf)}function A_(t){Nc(mf.current);var e=Nc(Ko.current),r=vg(e,t.type);e!==r&&(Zi(pf,t),Zi(Ko,r))}function $0(t){pf.current===t&&(ta(Ko),ta(pf))}var ha=oc(0);function Op(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Av=[];function Y0(){for(var t=0;t<Av.length;t++)Av[t]._workInProgressVersionPrimary=null;Av.length=0}var op=Ml.ReactCurrentDispatcher,Cv=Ml.ReactCurrentBatchConfig,qc=0,pa=null,Fa=null,Va=null,Bp=!1,Vd=!1,vf=0,X4=0;function fs(){throw Error(tn(321))}function G0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Do(t[r],e[r]))return!1;return!0}function X0(t,e,r,n,i,a){if(qc=a,pa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,op.current=t===null||t.memoizedState===null?Q4:eC,t=r(n,i),Vd){a=0;do{if(Vd=!1,vf=0,25<=a)throw Error(tn(301));a+=1,Va=Fa=null,e.updateQueue=null,op.current=tC,t=r(n,i)}while(Vd)}if(op.current=Hp,e=Fa!==null&&Fa.next!==null,qc=0,Va=Fa=pa=null,Bp=!1,e)throw Error(tn(300));return t}function Z0(){var t=vf!==0;return vf=0,t}function $o(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Va===null?pa.memoizedState=Va=t:Va=Va.next=t,Va}function xo(){if(Fa===null){var t=pa.alternate;t=t!==null?t.memoizedState:null}else t=Fa.next;var e=Va===null?pa.memoizedState:Va.next;if(e!==null)Va=e,Fa=t;else{if(t===null)throw Error(tn(310));Fa=t,t={memoizedState:Fa.memoizedState,baseState:Fa.baseState,baseQueue:Fa.baseQueue,queue:Fa.queue,next:null},Va===null?pa.memoizedState=Va=t:Va=Va.next=t}return Va}function gf(t,e){return typeof e=="function"?e(t):e}function jv(t){var e=xo(),r=e.queue;if(r===null)throw Error(tn(311));r.lastRenderedReducer=t;var n=Fa,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var f=s=null,_=null,N=a;do{var I=N.lane;if((qc&I)===I)_!==null&&(_=_.next={lane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),n=N.hasEagerState?N.eagerState:t(n,N.action);else{var me={lane:I,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null};_===null?(f=_=me,s=n):_=_.next=me,pa.lanes|=I,Uc|=I}N=N.next}while(N!==null&&N!==a);_===null?s=n:_.next=f,Do(n,e.memoizedState)||(Hs=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=_,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,pa.lanes|=a,Uc|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Lv(t){var e=xo(),r=e.queue;if(r===null)throw Error(tn(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Do(a,e.memoizedState)||(Hs=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function C_(){}function j_(t,e){var r=pa,n=xo(),i=e(),a=!Do(n.memoizedState,i);if(a&&(n.memoizedState=i,Hs=!0),n=n.queue,K0(D_.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Va!==null&&Va.memoizedState.tag&1){if(r.flags|=2048,yf(9,E_.bind(null,r,n,i,e),void 0,null),Ya===null)throw Error(tn(349));qc&30||L_(r,e,i)}return i}function L_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=pa.updateQueue,e===null?(e={lastEffect:null,stores:null},pa.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function E_(t,e,r,n){e.value=r,e.getSnapshot=n,R_(e)&&P_(t)}function D_(t,e,r){return r(function(){R_(e)&&P_(t)})}function R_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Do(t,r)}catch{return!0}}function P_(t){var e=Sl(t,1);e!==null&&Lo(e,t,1,-1)}function Zx(t){var e=$o();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:t},e.queue=t,t=t.dispatch=J4.bind(null,pa,t),[e.memoizedState,t]}function yf(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=pa.updateQueue,e===null?(e={lastEffect:null,stores:null},pa.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function N_(){return xo().memoizedState}function lp(t,e,r,n){var i=$o();pa.flags|=t,i.memoizedState=yf(1|e,r,void 0,n===void 0?null:n)}function lm(t,e,r,n){var i=xo();n=n===void 0?null:n;var a=void 0;if(Fa!==null){var s=Fa.memoizedState;if(a=s.destroy,n!==null&&G0(n,s.deps)){i.memoizedState=yf(e,r,a,n);return}}pa.flags|=t,i.memoizedState=yf(1|e,r,a,n)}function Kx(t,e){return lp(8390656,8,t,e)}function K0(t,e){return lm(2048,8,t,e)}function z_(t,e){return lm(4,2,t,e)}function F_(t,e){return lm(4,4,t,e)}function I_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function O_(t,e,r){return r=r!=null?r.concat([t]):null,lm(4,4,I_.bind(null,e,t),r)}function J0(){}function B_(t,e){var r=xo();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&G0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function H_(t,e){var r=xo();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&G0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function W_(t,e,r){return qc&21?(Do(r,e)||(r=Yw(),pa.lanes|=r,Uc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hs=!0),t.memoizedState=r)}function Z4(t,e){var r=Ri;Ri=r!==0&&4>r?r:4,t(!0);var n=Cv.transition;Cv.transition={};try{t(!1),e()}finally{Ri=r,Cv.transition=n}}function q_(){return xo().memoizedState}function K4(t,e,r){var n=Jl(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},U_(t))V_(e,r);else if(r=M_(t,e,r,n),r!==null){var i=As();Lo(r,t,n,i),$_(r,e,n)}}function J4(t,e,r){var n=Jl(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(U_(t))V_(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,f=a(s,r);if(i.hasEagerState=!0,i.eagerState=f,Do(f,s)){var _=e.interleaved;_===null?(i.next=i,q0(e)):(i.next=_.next,_.next=i),e.interleaved=i;return}}catch{}finally{}r=M_(t,e,i,n),r!==null&&(i=As(),Lo(r,t,n,i),$_(r,e,n))}}function U_(t){var e=t.alternate;return t===pa||e!==null&&e===pa}function V_(t,e){Vd=Bp=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function $_(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,j0(t,r)}}var Hp={readContext:yo,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Q4={readContext:yo,useCallback:function(t,e){return $o().memoizedState=[t,e===void 0?null:e],t},useContext:yo,useEffect:Kx,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,lp(4194308,4,I_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return lp(4194308,4,t,e)},useInsertionEffect:function(t,e){return lp(4,2,t,e)},useMemo:function(t,e){var r=$o();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=$o();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=K4.bind(null,pa,t),[n.memoizedState,t]},useRef:function(t){var e=$o();return t={current:t},e.memoizedState=t},useState:Zx,useDebugValue:J0,useDeferredValue:function(t){return $o().memoizedState=t},useTransition:function(){var t=Zx(!1),e=t[0];return t=Z4.bind(null,t[1]),$o().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=pa,i=$o();if(sa){if(r===void 0)throw Error(tn(407));r=r()}else{if(r=e(),Ya===null)throw Error(tn(349));qc&30||L_(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,Kx(D_.bind(null,n,a,t),[t]),n.flags|=2048,yf(9,E_.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=$o(),e=Ya.identifierPrefix;if(sa){var r=vl,n=ml;r=(n&~(1<<32-jo(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=vf++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=X4++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eC={readContext:yo,useCallback:B_,useContext:yo,useEffect:K0,useImperativeHandle:O_,useInsertionEffect:z_,useLayoutEffect:F_,useMemo:H_,useReducer:jv,useRef:N_,useState:function(){return jv(gf)},useDebugValue:J0,useDeferredValue:function(t){var e=xo();return W_(e,Fa.memoizedState,t)},useTransition:function(){var t=jv(gf)[0],e=xo().memoizedState;return[t,e]},useMutableSource:C_,useSyncExternalStore:j_,useId:q_,unstable_isNewReconciler:!1},tC={readContext:yo,useCallback:B_,useContext:yo,useEffect:K0,useImperativeHandle:O_,useInsertionEffect:z_,useLayoutEffect:F_,useMemo:H_,useReducer:Lv,useRef:N_,useState:function(){return Lv(gf)},useDebugValue:J0,useDeferredValue:function(t){var e=xo();return Fa===null?e.memoizedState=t:W_(e,Fa.memoizedState,t)},useTransition:function(){var t=Lv(gf)[0],e=xo().memoizedState;return[t,e]},useMutableSource:C_,useSyncExternalStore:j_,useId:q_,unstable_isNewReconciler:!1};function Mo(t,e){if(t&&t.defaultProps){e=ma({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Fg(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ma({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var cm={isMounted:function(t){return(t=t._reactInternals)?Xc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=As(),i=Jl(t),a=bl(n,i);a.payload=e,r!=null&&(a.callback=r),e=Zl(t,a,i),e!==null&&(Lo(e,t,i,n),sp(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=As(),i=Jl(t),a=bl(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Zl(t,a,i),e!==null&&(Lo(e,t,i,n),sp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=As(),n=Jl(t),i=bl(r,n);i.tag=2,e!=null&&(i.callback=e),e=Zl(t,i,n),e!==null&&(Lo(e,t,n,r),sp(e,t,n))}};function Jx(t,e,r,n,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,s):e.prototype&&e.prototype.isPureReactComponent?!uf(r,n)||!uf(i,a):!0}function Y_(t,e,r){var n=!1,i=nc,a=e.contextType;return typeof a=="object"&&a!==null?a=yo(a):(i=qs(e)?Hc:ys.current,n=e.contextTypes,a=(n=n!=null)?Iu(t,i):nc),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Qx(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&cm.enqueueReplaceState(e,e.state,null)}function Ig(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},U0(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=yo(a):(a=qs(e)?Hc:ys.current,i.context=Iu(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Fg(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cm.enqueueReplaceState(i,i.state,null),Ip(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wu(t,e){try{var r="",n=e;do r+=jA(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Ev(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Og(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rC=typeof WeakMap=="function"?WeakMap:Map;function G_(t,e,r){r=bl(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){qp||(qp=!0,Xg=n),Og(t,e)},r}function X_(t,e,r){r=bl(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Og(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Og(t,e),typeof n!="function"&&(Kl===null?Kl=new Set([this]):Kl.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function eb(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rC;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=vC.bind(null,t,e,r),e.then(t,t))}function tb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rb(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=bl(-1,1),e.tag=2,Zl(r,e,1))),r.lanes|=1),t)}var nC=Ml.ReactCurrentOwner,Hs=!1;function Ts(t,e,r,n){e.child=t===null?k_(e,null,r,n):Bu(e,t.child,r,n)}function nb(t,e,r,n,i){r=r.render;var a=e.ref;return Pu(e,i),n=X0(t,e,r,n,a,i),r=Z0(),t!==null&&!Hs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kl(t,e,i)):(sa&&r&&F0(e),e.flags|=1,Ts(t,e,n,i),e.child)}function ib(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!sy(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,Z_(t,e,a,n,i)):(t=fp(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:uf,r(s,n)&&t.ref===e.ref)return kl(t,e,i)}return e.flags|=1,t=Ql(a,n),t.ref=e.ref,t.return=e,e.child=t}function Z_(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(uf(a,n)&&t.ref===e.ref)if(Hs=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Hs=!0);else return e.lanes=t.lanes,kl(t,e,i)}return Bg(t,e,r,n,i)}function K_(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zi(ju,Zs),Zs|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Zi(ju,Zs),Zs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Zi(ju,Zs),Zs|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Zi(ju,Zs),Zs|=n;return Ts(t,e,i,r),e.child}function J_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Bg(t,e,r,n,i){var a=qs(r)?Hc:ys.current;return a=Iu(e,a),Pu(e,i),r=X0(t,e,r,n,a,i),n=Z0(),t!==null&&!Hs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kl(t,e,i)):(sa&&n&&F0(e),e.flags|=1,Ts(t,e,r,i),e.child)}function ab(t,e,r,n,i){if(qs(r)){var a=!0;Rp(e)}else a=!1;if(Pu(e,i),e.stateNode===null)cp(t,e),Y_(e,r,n),Ig(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,f=e.memoizedProps;s.props=f;var _=s.context,N=r.contextType;typeof N=="object"&&N!==null?N=yo(N):(N=qs(r)?Hc:ys.current,N=Iu(e,N));var I=r.getDerivedStateFromProps,me=typeof I=="function"||typeof s.getSnapshotBeforeUpdate=="function";me||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(f!==n||_!==N)&&Qx(e,s,n,N),zl=!1;var fe=e.memoizedState;s.state=fe,Ip(e,n,s,i),_=e.memoizedState,f!==n||fe!==_||Ws.current||zl?(typeof I=="function"&&(Fg(e,r,I,n),_=e.memoizedState),(f=zl||Jx(e,r,f,n,fe,_,N))?(me||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=_),s.props=n,s.state=_,s.context=N,n=f):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,T_(t,e),f=e.memoizedProps,N=e.type===e.elementType?f:Mo(e.type,f),s.props=N,me=e.pendingProps,fe=s.context,_=r.contextType,typeof _=="object"&&_!==null?_=yo(_):(_=qs(r)?Hc:ys.current,_=Iu(e,_));var Te=r.getDerivedStateFromProps;(I=typeof Te=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(f!==me||fe!==_)&&Qx(e,s,n,_),zl=!1,fe=e.memoizedState,s.state=fe,Ip(e,n,s,i);var qe=e.memoizedState;f!==me||fe!==qe||Ws.current||zl?(typeof Te=="function"&&(Fg(e,r,Te,n),qe=e.memoizedState),(N=zl||Jx(e,r,N,n,fe,qe,_)||!1)?(I||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,qe,_),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,qe,_)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||f===t.memoizedProps&&fe===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&fe===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=qe),s.props=n,s.state=qe,s.context=_,n=N):(typeof s.componentDidUpdate!="function"||f===t.memoizedProps&&fe===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&fe===t.memoizedState||(e.flags|=1024),n=!1)}return Hg(t,e,r,n,a,i)}function Hg(t,e,r,n,i,a){J_(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&Ux(e,r,!1),kl(t,e,a);n=e.stateNode,nC.current=e;var f=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Bu(e,t.child,null,a),e.child=Bu(e,null,f,a)):Ts(t,e,f,a),e.memoizedState=n.state,i&&Ux(e,r,!0),e.child}function Q_(t){var e=t.stateNode;e.pendingContext?qx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qx(t,e.context,!1),V0(t,e.containerInfo)}function sb(t,e,r,n,i){return Ou(),O0(i),e.flags|=256,Ts(t,e,r,n),e.child}var Wg={dehydrated:null,treeContext:null,retryLane:0};function qg(t){return{baseLanes:t,cachePool:null,transitions:null}}function e3(t,e,r){var n=e.pendingProps,i=ha.current,a=!1,s=(e.flags&128)!==0,f;if((f=s)||(f=t!==null&&t.memoizedState===null?!1:(i&2)!==0),f?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Zi(ha,i&1),t===null)return Ng(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,a?(n=e.mode,a=e.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=fm(s,n,0,null),t=Ic(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=qg(r),e.memoizedState=Wg,t):Q0(e,s));if(i=t.memoizedState,i!==null&&(f=i.dehydrated,f!==null))return iC(t,e,s,n,f,i,r);if(a){a=n.fallback,s=e.mode,i=t.child,f=i.sibling;var _={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=_,e.deletions=null):(n=Ql(i,_),n.subtreeFlags=i.subtreeFlags&14680064),f!==null?a=Ql(f,a):(a=Ic(a,s,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,s=t.child.memoizedState,s=s===null?qg(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~r,e.memoizedState=Wg,n}return a=t.child,t=a.sibling,n=Ql(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Q0(t,e){return e=fm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eh(t,e,r,n){return n!==null&&O0(n),Bu(e,t.child,null,r),t=Q0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iC(t,e,r,n,i,a,s){if(r)return e.flags&256?(e.flags&=-257,n=Ev(Error(tn(422))),Eh(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=fm({mode:"visible",children:n.children},i,0,null),a=Ic(a,i,s,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Bu(e,t.child,null,s),e.child.memoizedState=qg(s),e.memoizedState=Wg,a);if(!(e.mode&1))return Eh(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var f=n.dgst;return n=f,a=Error(tn(419)),n=Ev(a,n,void 0),Eh(t,e,s,n)}if(f=(s&t.childLanes)!==0,Hs||f){if(n=Ya,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Sl(t,i),Lo(n,t,i,-1))}return ay(),n=Ev(Error(tn(421))),Eh(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=gC.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Ks=Xl(i.nextSibling),Js=e,sa=!0,Ao=null,t!==null&&(po[mo++]=ml,po[mo++]=vl,po[mo++]=Wc,ml=t.id,vl=t.overflow,Wc=e),e=Q0(e,n.children),e.flags|=4096,e)}function ob(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zg(t.return,e,r)}function Dv(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function t3(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Ts(t,e,n.children,r),n=ha.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ob(t,r,e);else if(t.tag===19)ob(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Zi(ha,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Op(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Dv(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Op(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Dv(e,!0,r,null,a);break;case"together":Dv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kl(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Uc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(tn(153));if(e.child!==null){for(t=e.child,r=Ql(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ql(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function aC(t,e,r){switch(e.tag){case 3:Q_(e),Ou();break;case 5:A_(e);break;case 1:qs(e.type)&&Rp(e);break;case 4:V0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Zi(zp,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Zi(ha,ha.current&1),e.flags|=128,null):r&e.child.childLanes?e3(t,e,r):(Zi(ha,ha.current&1),t=kl(t,e,r),t!==null?t.sibling:null);Zi(ha,ha.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return t3(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Zi(ha,ha.current),n)break;return null;case 22:case 23:return e.lanes=0,K_(t,e,r)}return kl(t,e,r)}var r3,Ug,n3,i3;r3=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ug=function(){};n3=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Nc(Ko.current);var a=null;switch(r){case"input":i=fg(t,i),n=fg(t,n),a=[];break;case"select":i=ma({},i,{value:void 0}),n=ma({},n,{value:void 0}),a=[];break;case"textarea":i=mg(t,i),n=mg(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ep)}gg(r,n);var s;r=null;for(N in i)if(!n.hasOwnProperty(N)&&i.hasOwnProperty(N)&&i[N]!=null)if(N==="style"){var f=i[N];for(s in f)f.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else N!=="dangerouslySetInnerHTML"&&N!=="children"&&N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(rf.hasOwnProperty(N)?a||(a=[]):(a=a||[]).push(N,null));for(N in n){var _=n[N];if(f=i!=null?i[N]:void 0,n.hasOwnProperty(N)&&_!==f&&(_!=null||f!=null))if(N==="style")if(f){for(s in f)!f.hasOwnProperty(s)||_&&_.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in _)_.hasOwnProperty(s)&&f[s]!==_[s]&&(r||(r={}),r[s]=_[s])}else r||(a||(a=[]),a.push(N,r)),r=_;else N==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,f=f?f.__html:void 0,_!=null&&f!==_&&(a=a||[]).push(N,_)):N==="children"?typeof _!="string"&&typeof _!="number"||(a=a||[]).push(N,""+_):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&(rf.hasOwnProperty(N)?(_!=null&&N==="onScroll"&&ea("scroll",t),a||f===_||(a=[])):(a=a||[]).push(N,_))}r&&(a=a||[]).push("style",r);var N=a;(e.updateQueue=N)&&(e.flags|=4)}};i3=function(t,e,r,n){r!==n&&(e.flags|=4)};function _d(t,e){if(!sa)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function hs(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function sC(t,e,r){var n=e.pendingProps;switch(I0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hs(e),null;case 1:return qs(e.type)&&Dp(),hs(e),null;case 3:return n=e.stateNode,Hu(),ta(Ws),ta(ys),Y0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(jh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ao!==null&&(Jg(Ao),Ao=null))),Ug(t,e),hs(e),null;case 5:$0(e);var i=Nc(mf.current);if(r=e.type,t!==null&&e.stateNode!=null)n3(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(tn(166));return hs(e),null}if(t=Nc(Ko.current),jh(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Go]=e,n[hf]=a,t=(e.mode&1)!==0,r){case"dialog":ea("cancel",n),ea("close",n);break;case"iframe":case"object":case"embed":ea("load",n);break;case"video":case"audio":for(i=0;i<Rd.length;i++)ea(Rd[i],n);break;case"source":ea("error",n);break;case"img":case"image":case"link":ea("error",n),ea("load",n);break;case"details":ea("toggle",n);break;case"input":vx(n,a),ea("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ea("invalid",n);break;case"textarea":yx(n,a),ea("invalid",n)}gg(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var f=a[s];s==="children"?typeof f=="string"?n.textContent!==f&&(a.suppressHydrationWarning!==!0&&Ch(n.textContent,f,t),i=["children",f]):typeof f=="number"&&n.textContent!==""+f&&(a.suppressHydrationWarning!==!0&&Ch(n.textContent,f,t),i=["children",""+f]):rf.hasOwnProperty(s)&&f!=null&&s==="onScroll"&&ea("scroll",n)}switch(r){case"input":bh(n),gx(n,a,!0);break;case"textarea":bh(n),xx(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ep)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dw(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Go]=e,t[hf]=n,r3(t,e,!1,!1),e.stateNode=t;e:{switch(s=yg(r,n),r){case"dialog":ea("cancel",t),ea("close",t),i=n;break;case"iframe":case"object":case"embed":ea("load",t),i=n;break;case"video":case"audio":for(i=0;i<Rd.length;i++)ea(Rd[i],t);i=n;break;case"source":ea("error",t),i=n;break;case"img":case"image":case"link":ea("error",t),ea("load",t),i=n;break;case"details":ea("toggle",t),i=n;break;case"input":vx(t,n),i=fg(t,n),ea("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ma({},n,{value:void 0}),ea("invalid",t);break;case"textarea":yx(t,n),i=mg(t,n),ea("invalid",t);break;default:i=n}gg(r,i),f=i;for(a in f)if(f.hasOwnProperty(a)){var _=f[a];a==="style"?Nw(t,_):a==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&Rw(t,_)):a==="children"?typeof _=="string"?(r!=="textarea"||_!=="")&&nf(t,_):typeof _=="number"&&nf(t,""+_):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(rf.hasOwnProperty(a)?_!=null&&a==="onScroll"&&ea("scroll",t):_!=null&&S0(t,a,_,s))}switch(r){case"input":bh(t),gx(t,n,!1);break;case"textarea":bh(t),xx(t);break;case"option":n.value!=null&&t.setAttribute("value",""+rc(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Lu(t,!!n.multiple,a,!1):n.defaultValue!=null&&Lu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ep)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hs(e),null;case 6:if(t&&e.stateNode!=null)i3(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(tn(166));if(r=Nc(mf.current),Nc(Ko.current),jh(e)){if(n=e.stateNode,r=e.memoizedProps,n[Go]=e,(a=n.nodeValue!==r)&&(t=Js,t!==null))switch(t.tag){case 3:Ch(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ch(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Go]=e,e.stateNode=n}return hs(e),null;case 13:if(ta(ha),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(sa&&Ks!==null&&e.mode&1&&!(e.flags&128))__(),Ou(),e.flags|=98560,a=!1;else if(a=jh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(tn(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(tn(317));a[Go]=e}else Ou(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hs(e),a=!1}else Ao!==null&&(Jg(Ao),Ao=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ha.current&1?Ia===0&&(Ia=3):ay())),e.updateQueue!==null&&(e.flags|=4),hs(e),null);case 4:return Hu(),Ug(t,e),t===null&&df(e.stateNode.containerInfo),hs(e),null;case 10:return W0(e.type._context),hs(e),null;case 17:return qs(e.type)&&Dp(),hs(e),null;case 19:if(ta(ha),a=e.memoizedState,a===null)return hs(e),null;if(n=(e.flags&128)!==0,s=a.rendering,s===null)if(n)_d(a,!1);else{if(Ia!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Op(t),s!==null){for(e.flags|=128,_d(a,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Zi(ha,ha.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ca()>qu&&(e.flags|=128,n=!0,_d(a,!1),e.lanes=4194304)}else{if(!n)if(t=Op(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_d(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!sa)return hs(e),null}else 2*Ca()-a.renderingStartTime>qu&&r!==1073741824&&(e.flags|=128,n=!0,_d(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(r=a.last,r!==null?r.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ca(),e.sibling=null,r=ha.current,Zi(ha,n?r&1|2:r&1),e):(hs(e),null);case 22:case 23:return iy(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Zs&1073741824&&(hs(e),e.subtreeFlags&6&&(e.flags|=8192)):hs(e),null;case 24:return null;case 25:return null}throw Error(tn(156,e.tag))}function oC(t,e){switch(I0(e),e.tag){case 1:return qs(e.type)&&Dp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hu(),ta(Ws),ta(ys),Y0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $0(e),null;case 13:if(ta(ha),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(tn(340));Ou()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ta(ha),null;case 4:return Hu(),null;case 10:return W0(e.type._context),null;case 22:case 23:return iy(),null;case 24:return null;default:return null}}var Dh=!1,vs=!1,lC=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function Cu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){wa(t,e,n)}else r.current=null}function Vg(t,e,r){try{r()}catch(n){wa(t,e,n)}}var lb=!1;function cC(t,e){if(Cg=Cp,t=c_(),z0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,f=-1,_=-1,N=0,I=0,me=t,fe=null;t:for(;;){for(var Te;me!==r||i!==0&&me.nodeType!==3||(f=s+i),me!==a||n!==0&&me.nodeType!==3||(_=s+n),me.nodeType===3&&(s+=me.nodeValue.length),(Te=me.firstChild)!==null;)fe=me,me=Te;for(;;){if(me===t)break t;if(fe===r&&++N===i&&(f=s),fe===a&&++I===n&&(_=s),(Te=me.nextSibling)!==null)break;me=fe,fe=me.parentNode}me=Te}r=f===-1||_===-1?null:{start:f,end:_}}else r=null}r=r||{start:0,end:0}}else r=null;for(jg={focusedElem:t,selectionRange:r},Cp=!1,Mn=e;Mn!==null;)if(e=Mn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Mn=t;else for(;Mn!==null;){e=Mn;try{var qe=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var Ve=qe.memoizedProps,Ue=qe.memoizedState,Ee=e.stateNode,Fe=Ee.getSnapshotBeforeUpdate(e.elementType===e.type?Ve:Mo(e.type,Ve),Ue);Ee.__reactInternalSnapshotBeforeUpdate=Fe}break;case 3:var He=e.stateNode.containerInfo;He.nodeType===1?He.textContent="":He.nodeType===9&&He.documentElement&&He.removeChild(He.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tn(163))}}catch(tt){wa(e,e.return,tt)}if(t=e.sibling,t!==null){t.return=e.return,Mn=t;break}Mn=e.return}return qe=lb,lb=!1,qe}function $d(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Vg(e,r,a)}i=i.next}while(i!==n)}}function um(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function $g(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function a3(t){var e=t.alternate;e!==null&&(t.alternate=null,a3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Go],delete e[hf],delete e[Dg],delete e[V4],delete e[$4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function s3(t){return t.tag===5||t.tag===3||t.tag===4}function cb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ep));else if(n!==4&&(t=t.child,t!==null))for(Yg(t,e,r),t=t.sibling;t!==null;)Yg(t,e,r),t=t.sibling}function Gg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Gg(t,e,r),t=t.sibling;t!==null;)Gg(t,e,r),t=t.sibling}var Ja=null,To=!1;function Pl(t,e,r){for(r=r.child;r!==null;)o3(t,e,r),r=r.sibling}function o3(t,e,r){if(Zo&&typeof Zo.onCommitFiberUnmount=="function")try{Zo.onCommitFiberUnmount(rm,r)}catch{}switch(r.tag){case 5:vs||Cu(r,e);case 6:var n=Ja,i=To;Ja=null,Pl(t,e,r),Ja=n,To=i,Ja!==null&&(To?(t=Ja,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ja.removeChild(r.stateNode));break;case 18:Ja!==null&&(To?(t=Ja,r=r.stateNode,t.nodeType===8?Mv(t.parentNode,r):t.nodeType===1&&Mv(t,r),lf(t)):Mv(Ja,r.stateNode));break;case 4:n=Ja,i=To,Ja=r.stateNode.containerInfo,To=!0,Pl(t,e,r),Ja=n,To=i;break;case 0:case 11:case 14:case 15:if(!vs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Vg(r,e,s),i=i.next}while(i!==n)}Pl(t,e,r);break;case 1:if(!vs&&(Cu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(f){wa(r,e,f)}Pl(t,e,r);break;case 21:Pl(t,e,r);break;case 22:r.mode&1?(vs=(n=vs)||r.memoizedState!==null,Pl(t,e,r),vs=n):Pl(t,e,r);break;default:Pl(t,e,r)}}function ub(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lC),e.forEach(function(n){var i=yC.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ko(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,s=e,f=s;e:for(;f!==null;){switch(f.tag){case 5:Ja=f.stateNode,To=!1;break e;case 3:Ja=f.stateNode.containerInfo,To=!0;break e;case 4:Ja=f.stateNode.containerInfo,To=!0;break e}f=f.return}if(Ja===null)throw Error(tn(160));o3(a,s,i),Ja=null,To=!1;var _=i.alternate;_!==null&&(_.return=null),i.return=null}catch(N){wa(i,e,N)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)l3(e,t),e=e.sibling}function l3(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ko(e,t),qo(t),n&4){try{$d(3,t,t.return),um(3,t)}catch(Ve){wa(t,t.return,Ve)}try{$d(5,t,t.return)}catch(Ve){wa(t,t.return,Ve)}}break;case 1:ko(e,t),qo(t),n&512&&r!==null&&Cu(r,r.return);break;case 5:if(ko(e,t),qo(t),n&512&&r!==null&&Cu(r,r.return),t.flags&32){var i=t.stateNode;try{nf(i,"")}catch(Ve){wa(t,t.return,Ve)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=r!==null?r.memoizedProps:a,f=t.type,_=t.updateQueue;if(t.updateQueue=null,_!==null)try{f==="input"&&a.type==="radio"&&a.name!=null&&Lw(i,a),yg(f,s);var N=yg(f,a);for(s=0;s<_.length;s+=2){var I=_[s],me=_[s+1];I==="style"?Nw(i,me):I==="dangerouslySetInnerHTML"?Rw(i,me):I==="children"?nf(i,me):S0(i,I,me,N)}switch(f){case"input":hg(i,a);break;case"textarea":Ew(i,a);break;case"select":var fe=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var Te=a.value;Te!=null?Lu(i,!!a.multiple,Te,!1):fe!==!!a.multiple&&(a.defaultValue!=null?Lu(i,!!a.multiple,a.defaultValue,!0):Lu(i,!!a.multiple,a.multiple?[]:"",!1))}i[hf]=a}catch(Ve){wa(t,t.return,Ve)}}break;case 6:if(ko(e,t),qo(t),n&4){if(t.stateNode===null)throw Error(tn(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(Ve){wa(t,t.return,Ve)}}break;case 3:if(ko(e,t),qo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{lf(e.containerInfo)}catch(Ve){wa(t,t.return,Ve)}break;case 4:ko(e,t),qo(t);break;case 13:ko(e,t),qo(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ry=Ca())),n&4&&ub(t);break;case 22:if(I=r!==null&&r.memoizedState!==null,t.mode&1?(vs=(N=vs)||I,ko(e,t),vs=N):ko(e,t),qo(t),n&8192){if(N=t.memoizedState!==null,(t.stateNode.isHidden=N)&&!I&&t.mode&1)for(Mn=t,I=t.child;I!==null;){for(me=Mn=I;Mn!==null;){switch(fe=Mn,Te=fe.child,fe.tag){case 0:case 11:case 14:case 15:$d(4,fe,fe.return);break;case 1:Cu(fe,fe.return);var qe=fe.stateNode;if(typeof qe.componentWillUnmount=="function"){n=fe,r=fe.return;try{e=n,qe.props=e.memoizedProps,qe.state=e.memoizedState,qe.componentWillUnmount()}catch(Ve){wa(n,r,Ve)}}break;case 5:Cu(fe,fe.return);break;case 22:if(fe.memoizedState!==null){fb(me);continue}}Te!==null?(Te.return=fe,Mn=Te):fb(me)}I=I.sibling}e:for(I=null,me=t;;){if(me.tag===5){if(I===null){I=me;try{i=me.stateNode,N?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(f=me.stateNode,_=me.memoizedProps.style,s=_!=null&&_.hasOwnProperty("display")?_.display:null,f.style.display=Pw("display",s))}catch(Ve){wa(t,t.return,Ve)}}}else if(me.tag===6){if(I===null)try{me.stateNode.nodeValue=N?"":me.memoizedProps}catch(Ve){wa(t,t.return,Ve)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===t)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===t)break e;for(;me.sibling===null;){if(me.return===null||me.return===t)break e;I===me&&(I=null),me=me.return}I===me&&(I=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:ko(e,t),qo(t),n&4&&ub(t);break;case 21:break;default:ko(e,t),qo(t)}}function qo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(s3(r)){var n=r;break e}r=r.return}throw Error(tn(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(nf(i,""),n.flags&=-33);var a=cb(t);Gg(t,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,f=cb(t);Yg(t,f,s);break;default:throw Error(tn(161))}}catch(_){wa(t,t.return,_)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uC(t,e,r){Mn=t,c3(t)}function c3(t,e,r){for(var n=(t.mode&1)!==0;Mn!==null;){var i=Mn,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Dh;if(!s){var f=i.alternate,_=f!==null&&f.memoizedState!==null||vs;f=Dh;var N=vs;if(Dh=s,(vs=_)&&!N)for(Mn=i;Mn!==null;)s=Mn,_=s.child,s.tag===22&&s.memoizedState!==null?hb(i):_!==null?(_.return=s,Mn=_):hb(i);for(;a!==null;)Mn=a,c3(a),a=a.sibling;Mn=i,Dh=f,vs=N}db(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Mn=a):db(t)}}function db(t){for(;Mn!==null;){var e=Mn;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vs||um(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!vs)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Mo(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Xx(e,a,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Xx(e,s,r)}break;case 5:var f=e.stateNode;if(r===null&&e.flags&4){r=f;var _=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&r.focus();break;case"img":_.src&&(r.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var N=e.alternate;if(N!==null){var I=N.memoizedState;if(I!==null){var me=I.dehydrated;me!==null&&lf(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tn(163))}vs||e.flags&512&&$g(e)}catch(fe){wa(e,e.return,fe)}}if(e===t){Mn=null;break}if(r=e.sibling,r!==null){r.return=e.return,Mn=r;break}Mn=e.return}}function fb(t){for(;Mn!==null;){var e=Mn;if(e===t){Mn=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Mn=r;break}Mn=e.return}}function hb(t){for(;Mn!==null;){var e=Mn;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{um(4,e)}catch(_){wa(e,r,_)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(_){wa(e,i,_)}}var a=e.return;try{$g(e)}catch(_){wa(e,a,_)}break;case 5:var s=e.return;try{$g(e)}catch(_){wa(e,s,_)}}}catch(_){wa(e,e.return,_)}if(e===t){Mn=null;break}var f=e.sibling;if(f!==null){f.return=e.return,Mn=f;break}Mn=e.return}}var dC=Math.ceil,Wp=Ml.ReactCurrentDispatcher,ey=Ml.ReactCurrentOwner,go=Ml.ReactCurrentBatchConfig,_i=0,Ya=null,Ra=null,es=0,Zs=0,ju=oc(0),Ia=0,xf=null,Uc=0,dm=0,ty=0,Yd=null,Os=null,ry=0,qu=1/0,fl=null,qp=!1,Xg=null,Kl=null,Rh=!1,Bl=null,Up=0,Gd=0,Zg=null,up=-1,dp=0;function As(){return _i&6?Ca():up!==-1?up:up=Ca()}function Jl(t){return t.mode&1?_i&2&&es!==0?es&-es:G4.transition!==null?(dp===0&&(dp=Yw()),dp):(t=Ri,t!==0||(t=window.event,t=t===void 0?16:e_(t.type)),t):1}function Lo(t,e,r,n){if(50<Gd)throw Gd=0,Zg=null,Error(tn(185));Lf(t,r,n),(!(_i&2)||t!==Ya)&&(t===Ya&&(!(_i&2)&&(dm|=r),Ia===4&&Il(t,es)),Us(t,n),r===1&&_i===0&&!(e.mode&1)&&(qu=Ca()+500,om&&lc()))}function Us(t,e){var r=t.callbackNode;GA(t,e);var n=Ap(t,t===Ya?es:0);if(n===0)r!==null&&_x(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&_x(r),e===1)t.tag===0?Y4(pb.bind(null,t)):x_(pb.bind(null,t)),q4(function(){!(_i&6)&&lc()}),r=null;else{switch(Gw(n)){case 1:r=C0;break;case 4:r=Vw;break;case 16:r=Tp;break;case 536870912:r=$w;break;default:r=Tp}r=g3(r,u3.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function u3(t,e){if(up=-1,dp=0,_i&6)throw Error(tn(327));var r=t.callbackNode;if(Nu()&&t.callbackNode!==r)return null;var n=Ap(t,t===Ya?es:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Vp(t,n);else{e=n;var i=_i;_i|=2;var a=f3();(Ya!==t||es!==e)&&(fl=null,qu=Ca()+500,Fc(t,e));do try{pC();break}catch(f){d3(t,f)}while(!0);H0(),Wp.current=a,_i=i,Ra!==null?e=0:(Ya=null,es=0,e=Ia)}if(e!==0){if(e===2&&(i=Sg(t),i!==0&&(n=i,e=Kg(t,i))),e===1)throw r=xf,Fc(t,0),Il(t,n),Us(t,Ca()),r;if(e===6)Il(t,n);else{if(i=t.current.alternate,!(n&30)&&!fC(i)&&(e=Vp(t,n),e===2&&(a=Sg(t),a!==0&&(n=a,e=Kg(t,a))),e===1))throw r=xf,Fc(t,0),Il(t,n),Us(t,Ca()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(tn(345));case 2:Lc(t,Os,fl);break;case 3:if(Il(t,n),(n&130023424)===n&&(e=ry+500-Ca(),10<e)){if(Ap(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){As(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Eg(Lc.bind(null,t,Os,fl),e);break}Lc(t,Os,fl);break;case 4:if(Il(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-jo(n);a=1<<s,s=e[s],s>i&&(i=s),n&=~a}if(n=i,n=Ca()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dC(n/1960))-n,10<n){t.timeoutHandle=Eg(Lc.bind(null,t,Os,fl),n);break}Lc(t,Os,fl);break;case 5:Lc(t,Os,fl);break;default:throw Error(tn(329))}}}return Us(t,Ca()),t.callbackNode===r?u3.bind(null,t):null}function Kg(t,e){var r=Yd;return t.current.memoizedState.isDehydrated&&(Fc(t,e).flags|=256),t=Vp(t,e),t!==2&&(e=Os,Os=r,e!==null&&Jg(e)),t}function Jg(t){Os===null?Os=t:Os.push.apply(Os,t)}function fC(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Do(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Il(t,e){for(e&=~ty,e&=~dm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-jo(e),n=1<<r;t[r]=-1,e&=~n}}function pb(t){if(_i&6)throw Error(tn(327));Nu();var e=Ap(t,0);if(!(e&1))return Us(t,Ca()),null;var r=Vp(t,e);if(t.tag!==0&&r===2){var n=Sg(t);n!==0&&(e=n,r=Kg(t,n))}if(r===1)throw r=xf,Fc(t,0),Il(t,e),Us(t,Ca()),r;if(r===6)throw Error(tn(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lc(t,Os,fl),Us(t,Ca()),null}function ny(t,e){var r=_i;_i|=1;try{return t(e)}finally{_i=r,_i===0&&(qu=Ca()+500,om&&lc())}}function Vc(t){Bl!==null&&Bl.tag===0&&!(_i&6)&&Nu();var e=_i;_i|=1;var r=go.transition,n=Ri;try{if(go.transition=null,Ri=1,t)return t()}finally{Ri=n,go.transition=r,_i=e,!(_i&6)&&lc()}}function iy(){Zs=ju.current,ta(ju)}function Fc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,W4(r)),Ra!==null)for(r=Ra.return;r!==null;){var n=r;switch(I0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Dp();break;case 3:Hu(),ta(Ws),ta(ys),Y0();break;case 5:$0(n);break;case 4:Hu();break;case 13:ta(ha);break;case 19:ta(ha);break;case 10:W0(n.type._context);break;case 22:case 23:iy()}r=r.return}if(Ya=t,Ra=t=Ql(t.current,null),es=Zs=e,Ia=0,xf=null,ty=dm=Uc=0,Os=Yd=null,Pc!==null){for(e=0;e<Pc.length;e++)if(r=Pc[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}Pc=null}return t}function d3(t,e){do{var r=Ra;try{if(H0(),op.current=Hp,Bp){for(var n=pa.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Bp=!1}if(qc=0,Va=Fa=pa=null,Vd=!1,vf=0,ey.current=null,r===null||r.return===null){Ia=1,xf=e,Ra=null;break}e:{var a=t,s=r.return,f=r,_=e;if(e=es,f.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var N=_,I=f,me=I.tag;if(!(I.mode&1)&&(me===0||me===11||me===15)){var fe=I.alternate;fe?(I.updateQueue=fe.updateQueue,I.memoizedState=fe.memoizedState,I.lanes=fe.lanes):(I.updateQueue=null,I.memoizedState=null)}var Te=tb(s);if(Te!==null){Te.flags&=-257,rb(Te,s,f,a,e),Te.mode&1&&eb(a,N,e),e=Te,_=N;var qe=e.updateQueue;if(qe===null){var Ve=new Set;Ve.add(_),e.updateQueue=Ve}else qe.add(_);break e}else{if(!(e&1)){eb(a,N,e),ay();break e}_=Error(tn(426))}}else if(sa&&f.mode&1){var Ue=tb(s);if(Ue!==null){!(Ue.flags&65536)&&(Ue.flags|=256),rb(Ue,s,f,a,e),O0(Wu(_,f));break e}}a=_=Wu(_,f),Ia!==4&&(Ia=2),Yd===null?Yd=[a]:Yd.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var Ee=G_(a,_,e);Gx(a,Ee);break e;case 1:f=_;var Fe=a.type,He=a.stateNode;if(!(a.flags&128)&&(typeof Fe.getDerivedStateFromError=="function"||He!==null&&typeof He.componentDidCatch=="function"&&(Kl===null||!Kl.has(He)))){a.flags|=65536,e&=-e,a.lanes|=e;var tt=X_(a,f,e);Gx(a,tt);break e}}a=a.return}while(a!==null)}p3(r)}catch(et){e=et,Ra===r&&r!==null&&(Ra=r=r.return);continue}break}while(!0)}function f3(){var t=Wp.current;return Wp.current=Hp,t===null?Hp:t}function ay(){(Ia===0||Ia===3||Ia===2)&&(Ia=4),Ya===null||!(Uc&268435455)&&!(dm&268435455)||Il(Ya,es)}function Vp(t,e){var r=_i;_i|=2;var n=f3();(Ya!==t||es!==e)&&(fl=null,Fc(t,e));do try{hC();break}catch(i){d3(t,i)}while(!0);if(H0(),_i=r,Wp.current=n,Ra!==null)throw Error(tn(261));return Ya=null,es=0,Ia}function hC(){for(;Ra!==null;)h3(Ra)}function pC(){for(;Ra!==null&&!OA();)h3(Ra)}function h3(t){var e=v3(t.alternate,t,Zs);t.memoizedProps=t.pendingProps,e===null?p3(t):Ra=e,ey.current=null}function p3(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=oC(r,e),r!==null){r.flags&=32767,Ra=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ia=6,Ra=null;return}}else if(r=sC(r,e,Zs),r!==null){Ra=r;return}if(e=e.sibling,e!==null){Ra=e;return}Ra=e=t}while(e!==null);Ia===0&&(Ia=5)}function Lc(t,e,r){var n=Ri,i=go.transition;try{go.transition=null,Ri=1,mC(t,e,r,n)}finally{go.transition=i,Ri=n}return null}function mC(t,e,r,n){do Nu();while(Bl!==null);if(_i&6)throw Error(tn(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(tn(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(XA(t,a),t===Ya&&(Ra=Ya=null,es=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Rh||(Rh=!0,g3(Tp,function(){return Nu(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=go.transition,go.transition=null;var s=Ri;Ri=1;var f=_i;_i|=4,ey.current=null,cC(t,r),l3(r,t),N4(jg),Cp=!!Cg,jg=Cg=null,t.current=r,uC(r),BA(),_i=f,Ri=s,go.transition=a}else t.current=r;if(Rh&&(Rh=!1,Bl=t,Up=i),a=t.pendingLanes,a===0&&(Kl=null),qA(r.stateNode),Us(t,Ca()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(qp)throw qp=!1,t=Xg,Xg=null,t;return Up&1&&t.tag!==0&&Nu(),a=t.pendingLanes,a&1?t===Zg?Gd++:(Gd=0,Zg=t):Gd=0,lc(),null}function Nu(){if(Bl!==null){var t=Gw(Up),e=go.transition,r=Ri;try{if(go.transition=null,Ri=16>t?16:t,Bl===null)var n=!1;else{if(t=Bl,Bl=null,Up=0,_i&6)throw Error(tn(331));var i=_i;for(_i|=4,Mn=t.current;Mn!==null;){var a=Mn,s=a.child;if(Mn.flags&16){var f=a.deletions;if(f!==null){for(var _=0;_<f.length;_++){var N=f[_];for(Mn=N;Mn!==null;){var I=Mn;switch(I.tag){case 0:case 11:case 15:$d(8,I,a)}var me=I.child;if(me!==null)me.return=I,Mn=me;else for(;Mn!==null;){I=Mn;var fe=I.sibling,Te=I.return;if(a3(I),I===N){Mn=null;break}if(fe!==null){fe.return=Te,Mn=fe;break}Mn=Te}}}var qe=a.alternate;if(qe!==null){var Ve=qe.child;if(Ve!==null){qe.child=null;do{var Ue=Ve.sibling;Ve.sibling=null,Ve=Ue}while(Ve!==null)}}Mn=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Mn=s;else e:for(;Mn!==null;){if(a=Mn,a.flags&2048)switch(a.tag){case 0:case 11:case 15:$d(9,a,a.return)}var Ee=a.sibling;if(Ee!==null){Ee.return=a.return,Mn=Ee;break e}Mn=a.return}}var Fe=t.current;for(Mn=Fe;Mn!==null;){s=Mn;var He=s.child;if(s.subtreeFlags&2064&&He!==null)He.return=s,Mn=He;else e:for(s=Fe;Mn!==null;){if(f=Mn,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:um(9,f)}}catch(et){wa(f,f.return,et)}if(f===s){Mn=null;break e}var tt=f.sibling;if(tt!==null){tt.return=f.return,Mn=tt;break e}Mn=f.return}}if(_i=i,lc(),Zo&&typeof Zo.onPostCommitFiberRoot=="function")try{Zo.onPostCommitFiberRoot(rm,t)}catch{}n=!0}return n}finally{Ri=r,go.transition=e}}return!1}function mb(t,e,r){e=Wu(r,e),e=G_(t,e,1),t=Zl(t,e,1),e=As(),t!==null&&(Lf(t,1,e),Us(t,e))}function wa(t,e,r){if(t.tag===3)mb(t,t,r);else for(;e!==null;){if(e.tag===3){mb(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Kl===null||!Kl.has(n))){t=Wu(r,t),t=X_(e,t,1),e=Zl(e,t,1),t=As(),e!==null&&(Lf(e,1,t),Us(e,t));break}}e=e.return}}function vC(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=As(),t.pingedLanes|=t.suspendedLanes&r,Ya===t&&(es&r)===r&&(Ia===4||Ia===3&&(es&130023424)===es&&500>Ca()-ry?Fc(t,0):ty|=r),Us(t,e)}function m3(t,e){e===0&&(t.mode&1?(e=Sh,Sh<<=1,!(Sh&130023424)&&(Sh=4194304)):e=1);var r=As();t=Sl(t,e),t!==null&&(Lf(t,e,r),Us(t,r))}function gC(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),m3(t,r)}function yC(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(tn(314))}n!==null&&n.delete(e),m3(t,r)}var v3;v3=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ws.current)Hs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Hs=!1,aC(t,e,r);Hs=!!(t.flags&131072)}else Hs=!1,sa&&e.flags&1048576&&b_(e,Np,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;cp(t,e),t=e.pendingProps;var i=Iu(e,ys.current);Pu(e,r),i=X0(null,e,n,t,i,r);var a=Z0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qs(n)?(a=!0,Rp(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,U0(e),i.updater=cm,e.stateNode=i,i._reactInternals=e,Ig(e,n,t,r),e=Hg(null,e,n,!0,a,r)):(e.tag=0,sa&&a&&F0(e),Ts(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(cp(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=bC(n),t=Mo(n,t),i){case 0:e=Bg(null,e,n,t,r);break e;case 1:e=ab(null,e,n,t,r);break e;case 11:e=nb(null,e,n,t,r);break e;case 14:e=ib(null,e,n,Mo(n.type,t),r);break e}throw Error(tn(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mo(n,i),Bg(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mo(n,i),ab(t,e,n,i,r);case 3:e:{if(Q_(e),t===null)throw Error(tn(387));n=e.pendingProps,a=e.memoizedState,i=a.element,T_(t,e),Ip(e,n,null,r);var s=e.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Wu(Error(tn(423)),e),e=sb(t,e,n,r,i);break e}else if(n!==i){i=Wu(Error(tn(424)),e),e=sb(t,e,n,r,i);break e}else for(Ks=Xl(e.stateNode.containerInfo.firstChild),Js=e,sa=!0,Ao=null,r=k_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ou(),n===i){e=kl(t,e,r);break e}Ts(t,e,n,r)}e=e.child}return e;case 5:return A_(e),t===null&&Ng(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,Lg(n,i)?s=null:a!==null&&Lg(n,a)&&(e.flags|=32),J_(t,e),Ts(t,e,s,r),e.child;case 6:return t===null&&Ng(e),null;case 13:return e3(t,e,r);case 4:return V0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Bu(e,null,n,r):Ts(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mo(n,i),nb(t,e,n,i,r);case 7:return Ts(t,e,e.pendingProps,r),e.child;case 8:return Ts(t,e,e.pendingProps.children,r),e.child;case 12:return Ts(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Zi(zp,n._currentValue),n._currentValue=s,a!==null)if(Do(a.value,s)){if(a.children===i.children&&!Ws.current){e=kl(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var f=a.dependencies;if(f!==null){s=a.child;for(var _=f.firstContext;_!==null;){if(_.context===n){if(a.tag===1){_=bl(-1,r&-r),_.tag=2;var N=a.updateQueue;if(N!==null){N=N.shared;var I=N.pending;I===null?_.next=_:(_.next=I.next,I.next=_),N.pending=_}}a.lanes|=r,_=a.alternate,_!==null&&(_.lanes|=r),zg(a.return,r,e),f.lanes|=r;break}_=_.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(tn(341));s.lanes|=r,f=s.alternate,f!==null&&(f.lanes|=r),zg(s,r,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ts(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Pu(e,r),i=yo(i),n=n(i),e.flags|=1,Ts(t,e,n,r),e.child;case 14:return n=e.type,i=Mo(n,e.pendingProps),i=Mo(n.type,i),ib(t,e,n,i,r);case 15:return Z_(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mo(n,i),cp(t,e),e.tag=1,qs(n)?(t=!0,Rp(e)):t=!1,Pu(e,r),Y_(e,n,i),Ig(e,n,i,r),Hg(null,e,n,!0,t,r);case 19:return t3(t,e,r);case 22:return K_(t,e,r)}throw Error(tn(156,e.tag))};function g3(t,e){return Uw(t,e)}function xC(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vo(t,e,r,n){return new xC(t,e,r,n)}function sy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bC(t){if(typeof t=="function")return sy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===M0)return 11;if(t===T0)return 14}return 2}function Ql(t,e){var r=t.alternate;return r===null?(r=vo(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function fp(t,e,r,n,i,a){var s=2;if(n=t,typeof t=="function")sy(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case xu:return Ic(r.children,i,a,e);case k0:s=8,i|=8;break;case lg:return t=vo(12,r,e,i|2),t.elementType=lg,t.lanes=a,t;case cg:return t=vo(13,r,e,i),t.elementType=cg,t.lanes=a,t;case ug:return t=vo(19,r,e,i),t.elementType=ug,t.lanes=a,t;case Aw:return fm(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mw:s=10;break e;case Tw:s=9;break e;case M0:s=11;break e;case T0:s=14;break e;case Nl:s=16,n=null;break e}throw Error(tn(130,t==null?t:typeof t,""))}return e=vo(s,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Ic(t,e,r,n){return t=vo(7,t,n,e),t.lanes=r,t}function fm(t,e,r,n){return t=vo(22,t,n,e),t.elementType=Aw,t.lanes=r,t.stateNode={isHidden:!1},t}function Rv(t,e,r){return t=vo(6,t,null,e),t.lanes=r,t}function Pv(t,e,r){return e=vo(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wC(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pv(0),this.expirationTimes=pv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pv(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function oy(t,e,r,n,i,a,s,f,_){return t=new wC(t,e,r,f,_),e===1?(e=1,a===!0&&(e|=8)):e=0,a=vo(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},U0(a),t}function _C(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function y3(t){if(!t)return nc;t=t._reactInternals;e:{if(Xc(t)!==t||t.tag!==1)throw Error(tn(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(tn(171))}if(t.tag===1){var r=t.type;if(qs(r))return y_(t,r,e)}return e}function x3(t,e,r,n,i,a,s,f,_){return t=oy(r,n,!0,t,i,a,s,f,_),t.context=y3(null),r=t.current,n=As(),i=Jl(r),a=bl(n,i),a.callback=e??null,Zl(r,a,i),t.current.lanes=i,Lf(t,i,n),Us(t,n),t}function hm(t,e,r,n){var i=e.current,a=As(),s=Jl(i);return r=y3(r),e.context===null?e.context=r:e.pendingContext=r,e=bl(a,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Zl(i,e,s),t!==null&&(Lo(t,i,s,a),sp(t,i,s)),s}function $p(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ly(t,e){vb(t,e),(t=t.alternate)&&vb(t,e)}function SC(){return null}var b3=typeof reportError=="function"?reportError:function(t){console.error(t)};function cy(t){this._internalRoot=t}pm.prototype.render=cy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(tn(409));hm(t,e,null,null)};pm.prototype.unmount=cy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vc(function(){hm(null,t,null,null)}),e[_l]=null}};function pm(t){this._internalRoot=t}pm.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kw();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Fl.length&&e!==0&&e<Fl[r].priority;r++);Fl.splice(r,0,t),r===0&&Qw(t)}};function uy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gb(){}function kC(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var N=$p(s);a.call(N)}}var s=x3(e,n,t,0,null,!1,!1,"",gb);return t._reactRootContainer=s,t[_l]=s.current,df(t.nodeType===8?t.parentNode:t),Vc(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var f=n;n=function(){var N=$p(_);f.call(N)}}var _=oy(t,0,!1,null,null,!1,!1,"",gb);return t._reactRootContainer=_,t[_l]=_.current,df(t.nodeType===8?t.parentNode:t),Vc(function(){hm(e,_,r,n)}),_}function vm(t,e,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var f=i;i=function(){var _=$p(s);f.call(_)}}hm(e,s,t,i)}else s=kC(r,e,t,i,n);return $p(s)}Xw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Dd(e.pendingLanes);r!==0&&(j0(e,r|1),Us(e,Ca()),!(_i&6)&&(qu=Ca()+500,lc()))}break;case 13:Vc(function(){var n=Sl(t,1);if(n!==null){var i=As();Lo(n,t,1,i)}}),ly(t,1)}};L0=function(t){if(t.tag===13){var e=Sl(t,134217728);if(e!==null){var r=As();Lo(e,t,134217728,r)}ly(t,134217728)}};Zw=function(t){if(t.tag===13){var e=Jl(t),r=Sl(t,e);if(r!==null){var n=As();Lo(r,t,e,n)}ly(t,e)}};Kw=function(){return Ri};Jw=function(t,e){var r=Ri;try{return Ri=t,e()}finally{Ri=r}};bg=function(t,e,r){switch(e){case"input":if(hg(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=sm(n);if(!i)throw Error(tn(90));jw(n),hg(n,i)}}}break;case"textarea":Ew(t,r);break;case"select":e=r.value,e!=null&&Lu(t,!!r.multiple,e,!1)}};Iw=ny;Ow=Vc;var MC={usingClientEntryPoint:!1,Events:[Df,Su,sm,zw,Fw,ny]},Sd={findFiberByHostInstance:Rc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TC={bundleType:Sd.bundleType,version:Sd.version,rendererPackageName:Sd.rendererPackageName,rendererConfig:Sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ml.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ww(t),t===null?null:t.stateNode},findFiberByHostInstance:Sd.findFiberByHostInstance||SC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{rm=Ph.inject(TC),Zo=Ph}catch{}}eo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MC;eo.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uy(e))throw Error(tn(200));return _C(t,e,null,r)};eo.createRoot=function(t,e){if(!uy(t))throw Error(tn(299));var r=!1,n="",i=b3;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=oy(t,1,!1,null,null,r,!1,n,i),t[_l]=e.current,df(t.nodeType===8?t.parentNode:t),new cy(e)};eo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(tn(188)):(t=Object.keys(t).join(","),Error(tn(268,t)));return t=Ww(e),t=t===null?null:t.stateNode,t};eo.flushSync=function(t){return Vc(t)};eo.hydrate=function(t,e,r){if(!mm(e))throw Error(tn(200));return vm(null,t,e,!0,r)};eo.hydrateRoot=function(t,e,r){if(!uy(t))throw Error(tn(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=b3;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=x3(e,null,t,1,r??null,i,!1,a,s),t[_l]=e.current,df(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new pm(e)};eo.render=function(t,e,r){if(!mm(e))throw Error(tn(200));return vm(null,t,e,!1,r)};eo.unmountComponentAtNode=function(t){if(!mm(t))throw Error(tn(40));return t._reactRootContainer?(Vc(function(){vm(null,null,t,!1,function(){t._reactRootContainer=null,t[_l]=null})}),!0):!1};eo.unstable_batchedUpdates=ny;eo.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!mm(r))throw Error(tn(200));if(t==null||t._reactInternals===void 0)throw Error(tn(38));return vm(t,e,r,!1,n)};eo.version="18.3.1-next-f1338f8080-20240426";function w3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w3)}catch(t){console.error(t)}}w3(),ww.exports=eo;var AC=ww.exports,yb=AC;sg.createRoot=yb.createRoot,sg.hydrateRoot=yb.hydrateRoot;const CC="modulepreload",jC=function(t){return"/"+t},xb={},Ro=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),f=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(_=>{if(_=jC(_),_ in xb)return;xb[_]=!0;const N=_.endsWith(".css"),I=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${I}`))return;const me=document.createElement("link");if(me.rel=N?"stylesheet":CC,N||(me.as="script"),me.crossOrigin="",me.href=_,f&&me.setAttribute("nonce",f),document.head.appendChild(me),N)return new Promise((fe,Te)=>{me.addEventListener("load",fe),me.addEventListener("error",()=>Te(new Error(`Unable to preload CSS for ${_}`)))})}))}function a(s){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=s,window.dispatchEvent(f),!f.defaultPrevented)throw s}return i.then(s=>{for(const f of s||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};var LC={exports:{}};(function(t){var e=function(r){var n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(Ot,Ht,Qt){Ot[Ht]=Qt.value},s,f=typeof Symbol=="function"?Symbol:{},_=f.iterator||"@@iterator",N=f.asyncIterator||"@@asyncIterator",I=f.toStringTag||"@@toStringTag";function me(Ot,Ht,Qt){return Object.defineProperty(Ot,Ht,{value:Qt,enumerable:!0,configurable:!0,writable:!0}),Ot[Ht]}try{me({},"")}catch{me=function(Ht,Qt,er){return Ht[Qt]=er}}function fe(Ot,Ht,Qt,er){var kt=Ht&&Ht.prototype instanceof He?Ht:He,lr=Object.create(kt.prototype),dr=new ut(er||[]);return a(lr,"_invoke",{value:yr(Ot,Qt,dr)}),lr}r.wrap=fe;function Te(Ot,Ht,Qt){try{return{type:"normal",arg:Ot.call(Ht,Qt)}}catch(er){return{type:"throw",arg:er}}}var qe="suspendedStart",Ve="suspendedYield",Ue="executing",Ee="completed",Fe={};function He(){}function tt(){}function et(){}var ct={};me(ct,_,function(){return this});var xt=Object.getPrototypeOf,Pt=xt&&xt(xt(qt([])));Pt&&Pt!==n&&i.call(Pt,_)&&(ct=Pt);var ir=et.prototype=He.prototype=Object.create(ct);tt.prototype=et,a(ir,"constructor",{value:et,configurable:!0}),a(et,"constructor",{value:tt,configurable:!0}),tt.displayName=me(et,I,"GeneratorFunction");function mr(Ot){["next","throw","return"].forEach(function(Ht){me(Ot,Ht,function(Qt){return this._invoke(Ht,Qt)})})}r.isGeneratorFunction=function(Ot){var Ht=typeof Ot=="function"&&Ot.constructor;return Ht?Ht===tt||(Ht.displayName||Ht.name)==="GeneratorFunction":!1},r.mark=function(Ot){return Object.setPrototypeOf?Object.setPrototypeOf(Ot,et):(Ot.__proto__=et,me(Ot,I,"GeneratorFunction")),Ot.prototype=Object.create(ir),Ot},r.awrap=function(Ot){return{__await:Ot}};function kr(Ot,Ht){function Qt(lr,dr,Ar,Nr){var hn=Te(Ot[lr],Ot,dr);if(hn.type==="throw")Nr(hn.arg);else{var Wn=hn.arg,Sn=Wn.value;return Sn&&typeof Sn=="object"&&i.call(Sn,"__await")?Ht.resolve(Sn.__await).then(function(Tn){Qt("next",Tn,Ar,Nr)},function(Tn){Qt("throw",Tn,Ar,Nr)}):Ht.resolve(Sn).then(function(Tn){Wn.value=Tn,Ar(Wn)},function(Tn){return Qt("throw",Tn,Ar,Nr)})}}var er;function kt(lr,dr){function Ar(){return new Ht(function(Nr,hn){Qt(lr,dr,Nr,hn)})}return er=er?er.then(Ar,Ar):Ar()}a(this,"_invoke",{value:kt})}mr(kr.prototype),me(kr.prototype,N,function(){return this}),r.AsyncIterator=kr,r.async=function(Ot,Ht,Qt,er,kt){kt===void 0&&(kt=Promise);var lr=new kr(fe(Ot,Ht,Qt,er),kt);return r.isGeneratorFunction(Ht)?lr:lr.next().then(function(dr){return dr.done?dr.value:lr.next()})};function yr(Ot,Ht,Qt){var er=qe;return function(lr,dr){if(er===Ue)throw new Error("Generator is already running");if(er===Ee){if(lr==="throw")throw dr;return Vt()}for(Qt.method=lr,Qt.arg=dr;;){var Ar=Qt.delegate;if(Ar){var Nr=vt(Ar,Qt);if(Nr){if(Nr===Fe)continue;return Nr}}if(Qt.method==="next")Qt.sent=Qt._sent=Qt.arg;else if(Qt.method==="throw"){if(er===qe)throw er=Ee,Qt.arg;Qt.dispatchException(Qt.arg)}else Qt.method==="return"&&Qt.abrupt("return",Qt.arg);er=Ue;var hn=Te(Ot,Ht,Qt);if(hn.type==="normal"){if(er=Qt.done?Ee:Ve,hn.arg===Fe)continue;return{value:hn.arg,done:Qt.done}}else hn.type==="throw"&&(er=Ee,Qt.method="throw",Qt.arg=hn.arg)}}}function vt(Ot,Ht){var Qt=Ht.method,er=Ot.iterator[Qt];if(er===s)return Ht.delegate=null,Qt==="throw"&&Ot.iterator.return&&(Ht.method="return",Ht.arg=s,vt(Ot,Ht),Ht.method==="throw")||Qt!=="return"&&(Ht.method="throw",Ht.arg=new TypeError("The iterator does not provide a '"+Qt+"' method")),Fe;var kt=Te(er,Ot.iterator,Ht.arg);if(kt.type==="throw")return Ht.method="throw",Ht.arg=kt.arg,Ht.delegate=null,Fe;var lr=kt.arg;if(!lr)return Ht.method="throw",Ht.arg=new TypeError("iterator result is not an object"),Ht.delegate=null,Fe;if(lr.done)Ht[Ot.resultName]=lr.value,Ht.next=Ot.nextLoc,Ht.method!=="return"&&(Ht.method="next",Ht.arg=s);else return lr;return Ht.delegate=null,Fe}mr(ir),me(ir,I,"Generator"),me(ir,_,function(){return this}),me(ir,"toString",function(){return"[object Generator]"});function gt(Ot){var Ht={tryLoc:Ot[0]};1 in Ot&&(Ht.catchLoc=Ot[1]),2 in Ot&&(Ht.finallyLoc=Ot[2],Ht.afterLoc=Ot[3]),this.tryEntries.push(Ht)}function It(Ot){var Ht=Ot.completion||{};Ht.type="normal",delete Ht.arg,Ot.completion=Ht}function ut(Ot){this.tryEntries=[{tryLoc:"root"}],Ot.forEach(gt,this),this.reset(!0)}r.keys=function(Ot){var Ht=Object(Ot),Qt=[];for(var er in Ht)Qt.push(er);return Qt.reverse(),function kt(){for(;Qt.length;){var lr=Qt.pop();if(lr in Ht)return kt.value=lr,kt.done=!1,kt}return kt.done=!0,kt}};function qt(Ot){if(Ot){var Ht=Ot[_];if(Ht)return Ht.call(Ot);if(typeof Ot.next=="function")return Ot;if(!isNaN(Ot.length)){var Qt=-1,er=function kt(){for(;++Qt<Ot.length;)if(i.call(Ot,Qt))return kt.value=Ot[Qt],kt.done=!1,kt;return kt.value=s,kt.done=!0,kt};return er.next=er}}return{next:Vt}}r.values=qt;function Vt(){return{value:s,done:!0}}return ut.prototype={constructor:ut,reset:function(Ot){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(It),!Ot)for(var Ht in this)Ht.charAt(0)==="t"&&i.call(this,Ht)&&!isNaN(+Ht.slice(1))&&(this[Ht]=s)},stop:function(){this.done=!0;var Ot=this.tryEntries[0],Ht=Ot.completion;if(Ht.type==="throw")throw Ht.arg;return this.rval},dispatchException:function(Ot){if(this.done)throw Ot;var Ht=this;function Qt(Nr,hn){return lr.type="throw",lr.arg=Ot,Ht.next=Nr,hn&&(Ht.method="next",Ht.arg=s),!!hn}for(var er=this.tryEntries.length-1;er>=0;--er){var kt=this.tryEntries[er],lr=kt.completion;if(kt.tryLoc==="root")return Qt("end");if(kt.tryLoc<=this.prev){var dr=i.call(kt,"catchLoc"),Ar=i.call(kt,"finallyLoc");if(dr&&Ar){if(this.prev<kt.catchLoc)return Qt(kt.catchLoc,!0);if(this.prev<kt.finallyLoc)return Qt(kt.finallyLoc)}else if(dr){if(this.prev<kt.catchLoc)return Qt(kt.catchLoc,!0)}else if(Ar){if(this.prev<kt.finallyLoc)return Qt(kt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Ot,Ht){for(var Qt=this.tryEntries.length-1;Qt>=0;--Qt){var er=this.tryEntries[Qt];if(er.tryLoc<=this.prev&&i.call(er,"finallyLoc")&&this.prev<er.finallyLoc){var kt=er;break}}kt&&(Ot==="break"||Ot==="continue")&&kt.tryLoc<=Ht&&Ht<=kt.finallyLoc&&(kt=null);var lr=kt?kt.completion:{};return lr.type=Ot,lr.arg=Ht,kt?(this.method="next",this.next=kt.finallyLoc,Fe):this.complete(lr)},complete:function(Ot,Ht){if(Ot.type==="throw")throw Ot.arg;return Ot.type==="break"||Ot.type==="continue"?this.next=Ot.arg:Ot.type==="return"?(this.rval=this.arg=Ot.arg,this.method="return",this.next="end"):Ot.type==="normal"&&Ht&&(this.next=Ht),Fe},finish:function(Ot){for(var Ht=this.tryEntries.length-1;Ht>=0;--Ht){var Qt=this.tryEntries[Ht];if(Qt.finallyLoc===Ot)return this.complete(Qt.completion,Qt.afterLoc),It(Qt),Fe}},catch:function(Ot){for(var Ht=this.tryEntries.length-1;Ht>=0;--Ht){var Qt=this.tryEntries[Ht];if(Qt.tryLoc===Ot){var er=Qt.completion;if(er.type==="throw"){var kt=er.arg;It(Qt)}return kt}}throw new Error("illegal catch attempt")},delegateYield:function(Ot,Ht,Qt){return this.delegate={iterator:qt(Ot),resultName:Ht,nextLoc:Qt},this.method==="next"&&(this.arg=s),Fe}},r}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(LC);var dy=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`;const EC=dy;let bb=0;var _3=({id:t,action:e,payload:r={}})=>{let n=t;return typeof n>"u"&&(n=EC("Job",bb),bb+=1),{id:n,action:e,payload:r}},Zu={};let fy=!1;Zu.logging=fy;Zu.setLogging=t=>{fy=t};Zu.log=(...t)=>fy?console.log.apply(void 0,t):null;const DC=_3,{log:Nh}=Zu,RC=dy;let wb=0;var PC=()=>{const t=RC("Scheduler",wb),e={},r={};let n=[];wb+=1;const i=()=>n.length,a=()=>Object.keys(e).length,s=()=>{if(n.length!==0){const me=Object.keys(e);for(let fe=0;fe<me.length;fe+=1)if(typeof r[me[fe]]>"u"){n[0](e[me[fe]]);break}}},f=(me,fe)=>new Promise((Te,qe)=>{const Ve=DC({action:me,payload:fe});n.push(async Ue=>{n.shift(),r[Ue.id]=Ve;try{Te(await Ue[me].apply(void 0,[...fe,Ve.id]))}catch(Ee){qe(Ee)}finally{delete r[Ue.id],s()}}),Nh(`[${t}]: Add ${Ve.id} to JobQueue`),Nh(`[${t}]: JobQueue length=${n.length}`),s()});return{addWorker:me=>(e[me.id]=me,Nh(`[${t}]: Add ${me.id}`),Nh(`[${t}]: Number of workers=${a()}`),s(),me.id),addJob:async(me,...fe)=>{if(a()===0)throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return f(me,fe)},terminate:async()=>{Object.keys(e).forEach(async me=>{await e[me].terminate()}),n=[]},getQueueLen:i,getNumWorkers:a}};function NC(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zC=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof NC=="function"&&(e.type="node"),typeof t>"u"?e:e[t]};const FC=zC("type")==="browser",IC=FC?t=>new URL(t,window.location.href).href:t=>t;var OC=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(r=>{t[r]&&(e[r]=IC(e[r]))}),e},S3={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const BC="6.0.1",HC={version:BC};var WC={workerBlobURL:!0,logger:()=>{}};const qC=HC.version,UC=WC;var VC={...UC,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${qC}/dist/worker.min.js`},$C=({workerPath:t,workerBlobURL:e})=>{let r;if(Blob&&URL&&e){const n=new Blob([`importScripts("${t}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(n))}else r=new Worker(t);return r},YC=t=>{t.terminate()},GC=(t,e)=>{t.onmessage=({data:r})=>{e(r)}},XC=async(t,e)=>{t.postMessage(e)};const Nv=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=({target:{error:{code:i}}})=>{r(Error(`File could not be read! Code=${i}`))},n.readAsArrayBuffer(t)}),Qg=async t=>{let e=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(r=>r.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(e=await Qg(t.src)),t.tagName==="VIDEO"&&(e=await Qg(t.poster)),t.tagName==="CANVAS"&&await new Promise(r=>{t.toBlob(async n=>{e=await Nv(n),r()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const r=await t.convertToBlob();e=await Nv(r)}else(t instanceof File||t instanceof Blob)&&(e=await Nv(t));return new Uint8Array(e)};var ZC=Qg;const KC=VC,JC=$C,QC=YC,e6=GC,t6=XC,r6=ZC;var n6={defaultOptions:KC,spawnWorker:JC,terminateWorker:QC,onMessage:e6,send:t6,loadImage:r6};const i6=OC,Uo=_3,{log:_b}=Zu,a6=dy,kc=S3,{defaultOptions:s6,spawnWorker:o6,terminateWorker:l6,onMessage:c6,loadImage:Sb,send:u6}=n6;let kb=0;var k3=async(t="eng",e=kc.LSTM_ONLY,r={},n={})=>{const i=a6("Worker",kb),{logger:a,errorHandler:s,...f}=i6({...s6,...r}),_={},N=typeof t=="string"?t.split("+"):t;let I=e,me=n;const fe=[kc.DEFAULT,kc.LSTM_ONLY].includes(e)&&!f.legacyCore;let Te,qe;const Ve=new Promise((qt,Vt)=>{qe=qt,Te=Vt}),Ue=qt=>{Te(qt.message)};let Ee=o6(f);Ee.onerror=Ue,kb+=1;const Fe=({id:qt,action:Vt,payload:Ot})=>new Promise((Ht,Qt)=>{_b(`[${i}]: Start ${qt}, action=${Vt}`);const er=`${Vt}-${qt}`;_[er]={resolve:Ht,reject:Qt},u6(Ee,{workerId:i,jobId:qt,action:Vt,payload:Ot})}),He=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),tt=qt=>Fe(Uo({id:qt,action:"load",payload:{options:{lstmOnly:fe,corePath:f.corePath,logging:f.logging}}})),et=(qt,Vt,Ot)=>Fe(Uo({id:Ot,action:"FS",payload:{method:"writeFile",args:[qt,Vt]}})),ct=(qt,Vt)=>Fe(Uo({id:Vt,action:"FS",payload:{method:"readFile",args:[qt,{encoding:"utf8"}]}})),xt=(qt,Vt)=>Fe(Uo({id:Vt,action:"FS",payload:{method:"unlink",args:[qt]}})),Pt=(qt,Vt,Ot)=>Fe(Uo({id:Ot,action:"FS",payload:{method:qt,args:Vt}})),ir=(qt,Vt)=>Fe(Uo({id:Vt,action:"loadLanguage",payload:{langs:qt,options:{langPath:f.langPath,dataPath:f.dataPath,cachePath:f.cachePath,cacheMethod:f.cacheMethod,gzip:f.gzip,lstmOnly:[kc.DEFAULT,kc.LSTM_ONLY].includes(I)&&!f.legacyLang}}})),mr=(qt,Vt,Ot,Ht)=>Fe(Uo({id:Ht,action:"initialize",payload:{langs:qt,oem:Vt,config:Ot}})),kr=(qt="eng",Vt,Ot,Ht)=>{if(fe&&[kc.TESSERACT_ONLY,kc.TESSERACT_LSTM_COMBINED].includes(Vt))throw Error("Legacy model requested but code missing.");const Qt=Vt||I;I=Qt;const er=Ot||me;me=er;const lr=(typeof qt=="string"?qt.split("+"):qt).filter(dr=>!N.includes(dr));return N.push(...lr),lr.length>0?ir(lr,Ht).then(()=>mr(qt,Qt,er,Ht)):mr(qt,Qt,er,Ht)},yr=(qt={},Vt)=>Fe(Uo({id:Vt,action:"setParameters",payload:{params:qt}})),vt=async(qt,Vt={},Ot={text:!0},Ht)=>Fe(Uo({id:Ht,action:"recognize",payload:{image:await Sb(qt),options:Vt,output:Ot}})),gt=async(qt,Vt)=>{if(fe)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return Fe(Uo({id:Vt,action:"detect",payload:{image:await Sb(qt)}}))},It=async()=>(Ee!==null&&(l6(Ee),Ee=null),Promise.resolve());c6(Ee,({workerId:qt,jobId:Vt,status:Ot,action:Ht,data:Qt})=>{const er=`${Ht}-${Vt}`;if(Ot==="resolve")_b(`[${qt}]: Complete ${Vt}`),_[er].resolve({jobId:Vt,data:Qt}),delete _[er];else if(Ot==="reject")if(_[er].reject(Qt),delete _[er],Ht==="load"&&Te(Qt),s)s(Qt);else throw Error(Qt);else Ot==="progress"&&a({...Qt,userJobId:Vt})});const ut={id:i,worker:Ee,load:He,writeText:et,readText:ct,removeFile:xt,FS:Pt,reinitialize:kr,setParameters:yr,recognize:vt,detect:gt,terminate:It};return tt().then(()=>ir(t)).then(()=>mr(t,e,n)).then(()=>qe(ut)).catch(()=>{}),Ve};const M3=k3,d6=async(t,e,r)=>{const n=await M3(e,1,r);return n.recognize(t).finally(async()=>{await n.terminate()})},f6=async(t,e)=>{const r=await M3("osd",0,e);return r.detect(t).finally(async()=>{await r.terminate()})};var h6={recognize:d6,detect:f6},p6={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},m6={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const v6=PC,g6=k3,y6=h6,x6=p6,b6=S3,w6=m6,{setLogging:_6}=Zu;var S6={languages:x6,OEM:b6,PSM:w6,createScheduler:v6,createWorker:g6,setLogging:_6,...y6};const k6=Cf(S6);let zh=null;const M6=async()=>{if(!zh)try{if(typeof window<"u"&&!window.pdfjsLib){const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",document.head.appendChild(t),await new Promise((e,r)=>{t.onload=e,t.onerror=r}),window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",zh=window.pdfjsLib}else zh=window.pdfjsLib;console.log("PDF.js initialized successfully")}catch(t){throw console.error("Failed to initialize PDF.js:",t),new Error("PDF.js initialization failed. Please ensure you have internet connection.")}return zh},T3=t=>({en:"en-US","en-US":"en-US","en-GB":"en-GB","en-AU":"en-AU","en-CA":"en-CA","en-IN":"en-IN","en-IE":"en-IE","en-NZ":"en-NZ","en-ZA":"en-ZA","en-SG":"en-SG","en-HK":"en-HK","en-PH":"en-PH","en-JM":"en-JM","en-TT":"en-TT","en-BZ":"en-BZ","en-GH":"en-GH","en-KE":"en-KE","en-NG":"en-NG","en-PK":"en-PK","en-LK":"en-LK","en-MY":"en-MY","en-MT":"en-MT","en-CY":"en-CY"})[t]||"en-US",Fh=t=>({"en-US":{name:"English (US)",flag:""},"en-GB":{name:"English (UK)",flag:""},"en-AU":{name:"English (Australia)",flag:""},"en-CA":{name:"English (Canada)",flag:""},"en-IN":{name:"English (India)",flag:""},"en-IE":{name:"English (Ireland)",flag:""},"en-NZ":{name:"English (New Zealand)",flag:""},"en-ZA":{name:"English (South Africa)",flag:""},"en-SG":{name:"English (Singapore)",flag:""},"en-HK":{name:"English (Hong Kong)",flag:""},"en-PH":{name:"English (Philippines)",flag:""},"en-JM":{name:"English (Jamaica)",flag:""},"en-TT":{name:"English (Trinidad)",flag:""},"en-BZ":{name:"English (Belize)",flag:""},"en-GH":{name:"English (Ghana)",flag:""},"en-KE":{name:"English (Kenya)",flag:""},"en-NG":{name:"English (Nigeria)",flag:""},"en-PK":{name:"English (Pakistan)",flag:""},"en-LK":{name:"English (Sri Lanka)",flag:""},"en-MY":{name:"English (Malaysia)",flag:""},"en-MT":{name:"English (Malta)",flag:""},"en-CY":{name:"English (Cyprus)",flag:""},"hi-IN":{name:"Hindi ()",flag:""}})[t]||{name:"English (US)",flag:""},T6=async(t,e=null,r="en-US",n=50)=>{e&&e(` Initializing PDF processing for: ${t.name}...`);try{const i=await M6();e&&e(` Loading PDF document: ${t.name}...`);const a=await t.arrayBuffer();e&&e(` Analyzing PDF structure: ${t.name}...`);const f=await i.getDocument({data:a,verbosity:0}).promise,_=f.numPages,N=Math.min(_,n);let I="",me=[],fe=0;_>n&&e&&e(` PDF "${t.name}" has ${_} pages. Processing first ${n} pages only...`),e&&e(` Processing ${N} of ${_} pages from: ${t.name}...`);for(let He=1;He<=N;He++){if(e){const tt=Math.round(He/N*100);e(` Extracting text from "${t.name}" - page ${He}/${N} (${tt}%)...`)}try{const xt=(await(await f.getPage(He)).getTextContent()).items.map(Pt=>typeof Pt=="string"?Pt:Pt.str?Pt.str:"").join(" ").replace(/\s+/g," ").trim();xt&&xt.length>0&&(me.push({pageNumber:He,text:xt,wordCount:xt.split(/\s+/).length}),I+=`
--- Page ${He} ---
${xt}
`,fe++),await new Promise(Pt=>setTimeout(Pt,50))}catch(tt){console.warn(`Error processing page ${He} of ${t.name}:`,tt),e&&e(` Skipping page ${He} of "${t.name}" due to error...`)}}if(e&&e(` PDF text extraction completed for: ${t.name}!`),f.destroy(),!I.trim()||fe===0)return` PDF PROCESSING COMPLETE

 File Information:
 Name: ${t.name}
 Size: ${(t.size/1024/1024).toFixed(2)} MB
 Format: ${t.type}
 Total Pages: ${_}
 Pages processed: ${N}
 Pages with text: ${fe}

 NO READABLE TEXT FOUND IN PDF
This PDF appears to be:
 A scanned document (image-based PDF)
 Contains only images, graphics, or charts
 Has encrypted or password-protected text
 Uses non-standard text encoding

 ALTERNATIVE SOLUTIONS:
1. If it's a scanned PDF, convert pages to images and use OCR
2. Try using a different PDF viewer to verify text content
3. Check if the PDF requires password authentication
4. Use a PDF with standard text (not scanned images)

 For scanned PDFs, extract pages as images and use the OCR feature.

 Processing Statistics:
 Total pages processed: ${N}
 Pages with extractable text: ${fe}
 Processing method: PDF.js Direct Text Extraction
 Status: No text content found`;const Te=I.split(/\s+/).filter(He=>He.length>0).length,qe=I.length,Ve=Math.ceil(Te/200),Ue=me.map(He=>`Page ${He.pageNumber}: ${He.wordCount} words`).join(`
 `),Ee=_>n?`
 NOTE: This PDF has ${_} pages, but only the first ${n} pages were processed to prevent memory issues.
`:"";return` PDF TEXT EXTRACTION COMPLETE

 File Information:
 Name: ${t.name}
 Size: ${(t.size/1024/1024).toFixed(2)} MB
 Format: ${t.type}
 Total Pages: ${_}
 Pages processed: ${N}
 Pages with text: ${fe}
${Ee}
 EXTRACTED TEXT FROM PDF:
${I.trim()}

 Extraction Statistics:
 Total words: ${Te.toLocaleString()}
 Total characters: ${qe.toLocaleString()}
 Pages with text: ${fe}/${N}
 Estimated reading time: ${Ve} minute(s)
 Processing method: PDF.js Direct Text Extraction

 Page Breakdown:
 ${Ue}

 PDF text extraction completed successfully!
 This is the actual text content from your PDF document: ${t.name}`}catch(i){console.error(`PDF processing error for ${t.name}:`,i);let a=`PDF processing failed for "${t.name}"`;throw i.message.includes("worker")?a=`PDF worker initialization failed for "${t.name}". Please try refreshing the page.`:i.message.includes("Invalid PDF")?a=`Invalid PDF file: "${t.name}". Please try a different PDF.`:i.message.includes("password")&&(a=`PDF "${t.name}" is password protected. Please use an unprotected PDF.`),new Error(`${a}: ${i.message}`)}},A6=async(t,e=null)=>{e&&e(` Loading Word document: ${t.name}...`);try{let r;if(typeof window<"u"&&!window.mammoth){const me=document.createElement("script");me.src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.2/mammoth.browser.min.js",document.head.appendChild(me),await new Promise((fe,Te)=>{me.onload=fe,me.onerror=Te}),r=window.mammoth}else r=window.mammoth;const n=await t.arrayBuffer();e&&e(` Analyzing document structure: ${t.name}...`);const i=await r.extractRawText({arrayBuffer:n});e&&e(` Extracting text content from: ${t.name}...`);const a=i.value.trim();if(!a||a.length===0)return` WORD DOCUMENT PROCESSING COMPLETE

 File Information:
 Name: ${t.name}
 Size: ${(t.size/1024/1024).toFixed(2)} MB
 Format: ${t.type}

 NO TEXT FOUND IN DOCUMENT
This document appears to be:
 Empty or contains only formatting elements
 Contains only images, graphics, or tables
 Has protected or encrypted content

 ALTERNATIVE SOLUTIONS:
1. Check if document has actual text content
2. Try opening in Microsoft Word and saving as plain text
3. Copy text manually and paste into a text file

 For documents with images, save images separately and use OCR.

 Processing Statistics:
 Processing method: Mammoth.js Direct Text Extraction
 Status: No text content found`;e&&e(` Word document processing completed for: ${t.name}!`);const s=a.split(/\s+/).filter(me=>me.length>0).length,f=a.length,_=Math.ceil(s/200),N=a.split(/\n\s*\n/).filter(me=>me.trim().length>0).length;return` WORD DOCUMENT EXTRACTION COMPLETE

 File Information:
 Name: ${t.name}
 Size: ${(t.size/1024/1024).toFixed(2)} MB
 Format: ${t.type}

 EXTRACTED TEXT FROM DOCUMENT:
${a}

 Extraction Statistics:
 Total words: ${s.toLocaleString()}
 Total characters: ${f.toLocaleString()}
 Paragraphs: ${N}
 Estimated reading time: ${_} minute(s)
 Processing method: Mammoth.js Direct Text Extraction

 Word document text extraction completed successfully!
 This is the actual text content from your Word document: ${t.name}`}catch(r){throw console.error(`Word processing error for ${t.name}:`,r),r.message.includes("not supported")?new Error(`Word document format not supported for "${t.name}". Please try a .docx file.`):new Error(`Word document processing failed for "${t.name}": ${r.message}`)}},C6=async(t,e=null,r="eng")=>{console.log(`Processing image file: ${t.name}`),e&&e(` Initializing OCR engine for: ${t.name}...`);try{const n=URL.createObjectURL(t),a={en:"eng","en-US":"eng","en-GB":"eng","en-AU":"eng","en-CA":"eng","en-IN":"eng","en-IE":"eng","en-NZ":"eng","en-ZA":"eng","en-SG":"eng","en-HK":"eng","en-PH":"eng","en-JM":"eng","en-TT":"eng","en-BZ":"eng","en-GH":"eng","en-KE":"eng","en-NG":"eng","en-PK":"eng","en-LK":"eng","en-MY":"eng","en-MT":"eng","en-CY":"eng","hi-IN":"hin","es-ES":"spa","fr-FR":"fra","de-DE":"deu","zh-CN":"chi_sim","ja-JP":"jpn","ar-SA":"ara"}[r]||"eng",s=await k6.recognize(n,a,{logger:qe=>{if(e&&qe.status)switch(qe.status){case"recognizing text":e(` Recognizing text in "${t.name}": ${Math.round(qe.progress*100)}%`);break;case"loading image":e(` Loading image: ${t.name}...`);break;case"loading tesseract core":e(` Loading OCR engine for "${t.name}"...`);break;case"initializing tesseract":e(` Initializing text recognition for "${t.name}"...`);break;case"loading language traineddata":e(` Loading ${a.toUpperCase()} language data for "${t.name}"...`);break;case"initializing api":e(` Setting up recognition API for "${t.name}"...`);break;default:e(` Processing "${t.name}": ${qe.status}`)}}});URL.revokeObjectURL(n);const f=s.data.text.trim(),_=Math.round(s.data.confidence);if(!f||f.length<3)return` IMAGE PROCESSING COMPLETE

 File Information:
 Name: ${t.name}
 Size: ${(t.size/1024/1024).toFixed(2)} MB
 Format: ${t.type}
 OCR Language: ${a.toUpperCase()}

 NO TEXT FOUND IN IMAGE
This image appears to be:
 Contains no readable text
 Has handwritten text (limited support)
 Text is too small, blurry, or low resolution
 Image quality is poor or corrupted

 ALTERNATIVE SOLUTIONS:
1. Use images with clear, printed text
2. Ensure good image quality and resolution (minimum 300 DPI)
3. Try images with high contrast text (black text on white background)
4. Use images with standard fonts (avoid decorative fonts)

 For best results, use high-quality scanned documents or clear photos of text.

 Processing Statistics:
 OCR Language: ${a.toUpperCase()}
 Processing method: Tesseract.js OCR
 Status: No text content found`;e&&e(` Text extraction completed for: ${t.name}!`);const N=(t.size/1024/1024).toFixed(2),I=f.split(/\s+/).filter(qe=>qe.length>0).length,me=f.length,fe=f.split(`
`).filter(qe=>qe.trim().length>0).length;return` IMAGE TEXT EXTRACTION COMPLETE

 File Information:
 Name: ${t.name}
 Size: ${N} MB
 Format: ${t.type}
 OCR Language: ${a.toUpperCase()}

 EXTRACTED TEXT FROM IMAGE:
${f}

 Extraction Statistics:
 Total words: ${I.toLocaleString()}
 Total characters: ${me.toLocaleString()}
 Lines of text: ${fe}
 Recognition confidence: ${_}%
 Processing method: Tesseract.js OCR
 Language detected: ${r||"Auto-detected"}

 Image text extraction completed successfully!
 This is the actual text found in your image: ${t.name}`}catch(n){throw console.error(`Image processing error for ${t.name}:`,n),new Error(`OCR processing failed for "${t.name}": ${n.message}`)}},j6=async(t,e=null)=>new Promise((r,n)=>{const i=new FileReader;i.onload=a=>{try{const s=a.target.result,f=s.split(/\s+/).filter(Te=>Te.length>0).length,_=s.length,N=(t.size/1024).toFixed(2),I=s.split(`
`).length,me=s.split(/\n\s*\n/).filter(Te=>Te.trim().length>0).length,fe=` TEXT FILE PROCESSING COMPLETE

 File Information:
 Name: ${t.name}
 Size: ${N} KB
 Format: ${t.type}
 Encoding: UTF-8

 FILE CONTENT:
${s}

 Content Statistics:
 Total words: ${f.toLocaleString()}
 Total characters: ${_.toLocaleString()}
 Lines: ${I}
 Paragraphs: ${me}
 Processing method: Direct file reading
 File type: Plain text

 Text file processing completed successfully!
 This is the content from your text file: ${t.name}`;r(fe)}catch(s){n(new Error(`Failed to process text file "${t.name}": ${s.message}`))}},i.onerror=()=>{n(new Error(`Failed to read text file: ${t.name}`))},e&&e(` Reading text file: ${t.name}...`),i.readAsText(t)}),A3=async(t,e=null,r="en-US",n={},i=!1)=>{if(e&&e(` Processing audio file (Vosk): ${t.name}...`),!i)try{e&&e(" Attempting quick browser SpeechRecognition first...");const a=await Ih(t,e,r);if(a&&a.trim())try{const s=await t.arrayBuffer(),_=await new(window.AudioContext||window.webkitAudioContext)().decodeAudioData(s.slice(0)),N=Math.round(_.duration),I=a.trim().replace(/\s+/g," ").replace(/([.!?])\s*([a-z])/g,"$1 $2"),me=I.split(/\s+/).filter(qe=>qe.length>0).length,fe=Math.ceil(me/200);return` AUDIO SPEECH EXTRACTION COMPLETE (Browser SpeechRecognition)

 File Information:
 Name: ${t.name}
 Size: ${(t.size/1024/1024).toFixed(2)} MB
 Format: ${t.type}
 Duration: ${N}s
 Detected Language: ${Fh(r).name}
 Processing method: Browser SpeechRecognition

${Fh(r).flag}  EXTRACTED SPEECH TRANSCRIPT (Browser SpeechRecognition):
"${I}"

 Transcription Statistics:
 Total words: ${me.toLocaleString()}
 Estimated reading time: ${fe} minute(s)

 Audio-to-text extraction completed successfully using Browser SpeechRecognition.`}catch{return a.trim()}}catch(a){console.warn("Quick SpeechRecognition attempt failed or produced no transcript:",a)}try{const a=await Ro(()=>import("./vosk-sF_zTYEf.js").then(vt=>vt.v),[]),{createModel:s,createRecognizer:f}=a,_="/models/vosk-model-small-en-us-0.15";e&&e(` Loading Vosk model from ${_} ...`);let N=!1;const I=setTimeout(()=>{N=!0,e&&e(" Vosk transcription timed out (120s).")},12e4);let me;try{me=await s(_)}catch(vt){return clearTimeout(I),console.warn("Vosk model load failed:",vt),e&&e(" Vosk model unavailable, falling back to browser SpeechRecognition."),await Ih(t,e,r)}if(N)throw new Error("Vosk model load timed out");e&&e(" Resampling audio to 16kHz for Vosk...");const fe=await t.arrayBuffer(),qe=await new(window.AudioContext||window.webkitAudioContext)().decodeAudioData(fe.slice(0));if(N)throw new Error("Vosk audio decode timed out");const Ve=new OfflineAudioContext(1,Math.ceil(qe.duration*16e3),16e3),Ue=Ve.createBufferSource();Ue.buffer=qe,Ue.connect(Ve.destination),Ue.start(0);const Ee=await Ve.startRendering();if(N)throw new Error("Vosk audio render timed out");const Fe=Ee.getChannelData(0),He=new Int16Array(Fe.length);for(let vt=0;vt<Fe.length;vt++){let gt=Math.max(-1,Math.min(1,Fe[vt]));He[vt]=gt<0?gt*32768:gt*32767}e&&e(" Creating Vosk recognizer and feeding audio...");const tt=await f({model:me,sampleRate:16e3});if(N)throw new Error("Vosk recognizer create timed out");const et=4096;for(let vt=0;vt<He.length;vt+=et){if(N)throw new Error("Vosk waveform feed timed out");const gt=He.subarray(vt,Math.min(vt+et,He.length));if(tt.acceptWaveform(gt),e&&vt%(et*25)===0){const It=Math.round(vt/He.length*100);e(` Feeding audio to Vosk: ${It}%`)}}const ct=tt.finalResult?tt.finalResult():tt.result?tt.result():null;let xt=ct&&ct.text?ct.text:"";if(me&&typeof me.free=="function")try{me.free()}catch{}if(clearTimeout(I),N)throw new Error("Vosk transcription timed out");if(e&&e(" Vosk transcription attempt completed"),!xt||!xt.trim())return e&&e(" Vosk produced no transcript or speech not detected. Falling back to browser SpeechRecognition."),await Ih(t,e,r);const Pt=xt.trim().replace(/\s+/g," ").replace(/([.!?])\s*([a-z])/g,"$1 $2"),ir=Pt.split(/\s+/).filter(vt=>vt.length>0).length,mr=Math.ceil(ir/200),kr=Math.round(qe.duration);return` AUDIO SPEECH EXTRACTION COMPLETE (Vosk)

 File Information:
 Name: ${t.name}
 Size: ${(t.size/1024/1024).toFixed(2)} MB
 Format: ${t.type}
 Duration: ${kr}s
 Detected Language: ${Fh(r).name}
 Processing method: Vosk local transcription

${Fh(r).flag}  EXTRACTED SPEECH TRANSCRIPT (Vosk):
"${Pt}"

 Transcription Statistics:
 Total words: ${ir.toLocaleString()}
 Estimated reading time: ${mr} minute(s)

 Audio-to-text extraction completed successfully using Vosk.`}catch(a){console.error("Vosk transcription error:",a),e&&e(" Vosk transcription failed: "+(a.message||a));try{return await Ih(t,e,r)}catch(s){throw new Error(`Transcription failed: ${a.message||a}; fallback error: ${s.message||s}`)}}};async function Ih(t,e=null,r="en-US"){e&&e(" Starting browser SpeechRecognition fallback...");const n=window.SpeechRecognition||window.webkitSpeechRecognition;if(!n)throw e&&e(" Browser SpeechRecognition not supported."),new Error("Speech Recognition API not supported in this browser.");return new Promise(async(i,a)=>{const s=new Audio,f=URL.createObjectURL(t);s.src=f,s.crossOrigin="anonymous",s.preload="auto";let _="",N=!1,I=0;const me=3,fe=new n;fe.continuous=!0,fe.interimResults=!0,fe.lang=T3(r),fe.onresult=Te=>{for(let qe=Te.resultIndex;qe<Te.results.length;qe++){const Ve=Te.results[qe];Ve.isFinal&&Ve[0]&&Ve[0].transcript&&(_+=Ve[0].transcript+" ")}e&&e(` Browser interim transcript: ${_.trim().substring(0,60)}...`)},fe.onerror=Te=>{console.warn("SpeechRecognition fallback error:",Te.error)},fe.onend=async()=>{if(I++,_.trim()){s.pause(),URL.revokeObjectURL(f),i(_.trim());return}if(I>=me){s.pause(),URL.revokeObjectURL(f),i(null);return}try{fe.start()}catch(Te){console.warn("Fallback recognition restart failed:",Te)}},s.oncanplaythrough=async()=>{try{N=!0,fe.start(),await s.play()}catch(Te){console.error("Fallback playback/recognition failed:",Te);try{fe.stop()}catch{}i(null)}},s.onerror=Te=>{console.error("Fallback audio play error:",Te),i(null)},setTimeout(()=>{try{fe.stop()}catch{}try{s.pause()}catch{}URL.revokeObjectURL(f),i(null)},2*60*1e3),s.load()})}const L6=async(t,e=null,r="en-US",n={})=>{if(!t)throw new Error("No file provided");const i=100*1024*1024;if(t.size>i)throw new Error(`File size for "${t.name}" (${(t.size/1024/1024).toFixed(2)}MB) exceeds maximum allowed size of 100MB`);const a=t.type.toLowerCase(),s=t.name.toLowerCase(),f=T3(r);try{if(a==="text/plain"||s.endsWith(".txt"))return await j6(t,e);if(a==="application/pdf"||s.endsWith(".pdf"))return await T6(t,e,f);if(a==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||s.endsWith(".docx"))return await A6(t,e);if(a.startsWith("image/")||s.match(/\.(jpg|jpeg|png|gif|bmp|tiff|webp)$/))return await C6(t,e,f);if(a.startsWith("audio/")||s.match(/\.(mp3|wav|m4a|aac|ogg|flac)$/))return await A3(t,e,f,n);if(a.startsWith("video/")||s.match(/\.(mp4|avi|mov|wmv|flv|webm|mkv)$/))return n&&n.videoProcessingMode==="offline"?await processVideoSpeechOfflineSimple(t,e,f):n&&n.videoProcessingMode==="smart"?await processVideoSpeechSmartSimple(t,e,f):n&&n.videoProcessingMode==="online"?await processVideoSpeechSimple(t,e,f):n&&n.videoProcessingMode==="speechOnly"?await processVideoSpeechSimple(t,e,f):n&&n.videoProcessingMode==="advanced"?await processVideoFileAdvanced(t,e,f,n):n&&n.videoProcessingMode==="textOnly"?await processVideoFileTextOnly(t,e):n&&n.videoProcessingMode==="complete"?await processVideoFileComplete(t,e):await processVideoSpeechSmartSimple(t,e,f);throw new Error(`Unsupported file type for "${t.name}": ${a||"unknown"}. Supported types: PDF, Word, Images, Audio, Video, Text files.`)}catch(_){throw console.error(`File processing error for ${t.name}:`,_),_}},E6=async(t=null)=>{try{t&&t(" Testing Vosk installation...");const{createModel:e,createRecognizer:r}=await Ro(async()=>{const{createModel:N,createRecognizer:I}=await import("./vosk-sF_zTYEf.js").then(me=>me.v);return{createModel:N,createRecognizer:I}},[]);t&&t(" Vosk-browser imported successfully");const n="/models/vosk-model-small-en-us-0.15";t&&t(` Testing model loading from: ${n}`);const i=await e(n);t&&t(" Vosk model loaded successfully");const a=new i.KaldiRecognizer(16e3);t&&t(" Vosk recognizer created successfully");const s=new Int16Array(1024);for(let N=0;N<s.length;N++)s[N]=Math.sin(N*.1)*1e3;const f=a.AcceptWaveform(s);t&&t(" Vosk audio processing test completed");const _=JSON.parse(a.FinalResult());return t&&t(" Vosk installation test passed!"),{success:!0,message:"Vosk is properly installed and working",modelPath:n,recognizerReady:!0,testResult:_}}catch(e){return console.error("Vosk installation test failed:",e),t&&t(` Vosk test failed: ${e.message}`),{success:!1,message:`Vosk installation test failed: ${e.message}`,error:e.message,stack:e.stack}}},D6=async(t=null)=>{try{t&&t(" Testing Vosk model accessibility...");const e="/models/vosk-model-small-en-us-0.15",r=[`${e}/README`,`${e}/conf/model.conf`,`${e}/am/final.mdl`];for(const n of r)try{const i=await fetch(n);if(!i.ok)throw new Error(`Failed to fetch ${n}: ${i.status}`);t&&t(` Model file accessible: ${n}`)}catch(i){throw t&&t(` Model file not accessible: ${n}`),new Error(`Model file not accessible: ${n} - ${i.message}`)}return{success:!0,message:"All Vosk model files are accessible",modelPath:e}}catch(e){return console.error("Vosk model access test failed:",e),t&&t(` Model access test failed: ${e.message}`),{success:!1,message:`Vosk model access test failed: ${e.message}`,error:e.message}}},R6=async(t=null)=>{try{t&&t(" Running Vosk diagnostics...");const e=await D6(t);if(!e.success)return{success:!1,message:"Model accessibility test failed",tests:{modelAccess:e}};const r=await E6(t);return r.success?(t&&t(" All Vosk diagnostics passed!"),{success:!0,message:"Vosk is properly installed and configured",tests:{modelAccess:e,voskInstall:r}}):{success:!1,message:"Vosk installation test failed",tests:{modelAccess:e,voskInstall:r}}}catch(e){return console.error("Vosk diagnostics failed:",e),t&&t(` Vosk diagnostics failed: ${e.message}`),{success:!1,message:`Vosk diagnostics failed: ${e.message}`,error:e.message}}},Xd=t=>{if(!t||typeof t!="string")return"en";const e=t.toLowerCase().trim(),r={es:{words:["el","la","de","que","y","en","un","es","se","no","te","lo","le","da","su","por","son","con","para","est","como","pero","muy","todo","ms","hacer","tiempo","ao","tambin"],chars:/[]/g,score:0},fr:{words:["le","de","et","","un","il","tre","et","en","avoir","que","pour","dans","ce","son","une","sur","avec","ne","se","pas","tout","plus","par","grand","en","une","tre","et","avoir"],chars:/[]/g,score:0},de:{words:["der","die","und","in","den","von","zu","das","mit","sich","des","auf","fr","ist","im","dem","nicht","ein","eine","als","auch","es","an","werden","aus","er","hat","dass","sie","nach"],chars:/[]/g,score:0},it:{words:["il","di","che","e","la","un","a","in","per","una","","da","sono","con","non","si","le","i","su","come","del","alla","nel","anche","pi","della","molto","tutto","essere","fare"],chars:/[]/g,score:0},pt:{words:["o","de","e","do","a","em","para","","com","uma","os","no","se","na","por","mais","as","dos","como","mas","foi","ao","ele","das","tem","","seu","sua","ou","ser"],chars:/[]/g,score:0},hi:{words:["","","","","","","","","","","","","","","","","","","",""],chars:/[\u0900-\u097F]/g,score:0},zh:{words:["","","","","","","","","","","","","","","","","","","",""],chars:/[\u4e00-\u9fff]/g,score:0},ja:{words:["","","","","","","","","","","","","","","","","","","",""],chars:/[\u3040-\u309f\u30a0-\u30ff\u4e00-\u9fff]/g,score:0},ar:{words:["","","","","","","","","","","","","","","","","","","",""],chars:/[\u0600-\u06ff]/g,score:0}},n=e.split(/\s+/),i=n.length;Object.keys(r).forEach(f=>{const _=r[f];let N=0;n.forEach(me=>{_.words.includes(me)&&N++});const I=(e.match(_.chars)||[]).length;_.score=N/i*.7+I/e.length*.3});let a="en",s=.1;return Object.keys(r).forEach(f=>{r[f].score>s&&(s=r[f].score,a=f)}),a},zv=async(t,e="auto")=>{if(!t||typeof t!="string")return{translatedText:t,detectedLanguage:"en",confidence:0};if(e==="en")return{translatedText:t,detectedLanguage:"en",confidence:1};if(e==="auto"&&(e=Xd(t)),e==="en")return{translatedText:t,detectedLanguage:"en",confidence:1};try{const r=await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${e}&tl=en&dt=t&q=${encodeURIComponent(t)}`);if(!r.ok)throw new Error("Translation API failed");const n=await r.json();if(n&&n[0]&&Array.isArray(n[0])){const i=n[0].map(s=>s[0]).join(""),a=n[6]||.8;return{translatedText:i.trim(),detectedLanguage:e,confidence:Math.min(a,1),originalText:t}}throw new Error("Invalid translation response")}catch(r){return console.warn("Translation failed, using fallback:",r.message),{translatedText:P6(t,e),detectedLanguage:e,confidence:.3,originalText:t,fallback:!0}}},P6=(t,e)=>{const n={es:{hola:"hello",gracias:"thank you","por favor":"please",s:"yes",no:"no","buenos das":"good morning","buenas tardes":"good afternoon","buenas noches":"good night",adis:"goodbye","lo siento":"sorry",disculpe:"excuse me",tiempo:"time",trabajo:"work",casa:"house",familia:"family",amigo:"friend"},fr:{bonjour:"hello",merci:"thank you","s'il vous plat":"please",oui:"yes",non:"no","au revoir":"goodbye","excusez-moi":"excuse me",temps:"time",travail:"work",maison:"house",famille:"family",ami:"friend"},de:{hallo:"hello",danke:"thank you",bitte:"please",ja:"yes",nein:"no","auf wiedersehen":"goodbye",entschuldigung:"excuse me",zeit:"time",arbeit:"work",haus:"house",familie:"family",freund:"friend"},it:{ciao:"hello",grazie:"thank you","per favore":"please",s:"yes",no:"no",arrivederci:"goodbye",scusi:"excuse me",tempo:"time",lavoro:"work",casa:"house",famiglia:"family",amico:"friend"}}[e]||{};let i=t.toLowerCase();return Object.keys(n).forEach(a=>{const s=new RegExp(a,"gi");i=i.replace(s,n[a])}),i},N6=t=>({en:"English",es:"Spanish",fr:"French",de:"German",it:"Italian",pt:"Portuguese",hi:"Hindi",zh:"Chinese",ja:"Japanese",ar:"Arabic",ko:"Korean",ru:"Russian",auto:"Auto-detect"})[t]||t.toUpperCase(),z6=(t,e=.15)=>Xd(t)!=="en",mu={articles:[{pattern:/\b(a)\s+(aeiou)/gi,replacement:"an $2"},{pattern:/\b(an)\s+([bcdfghjklmnpqrstvwxyz])/gi,replacement:"a $2"}],subjectVerb:[{pattern:/\b(he|she|it)\s+(are)\b/gi,replacement:"$1 is"},{pattern:/\b(I)\s+(are)\b/gi,replacement:"$1 am"},{pattern:/\b(you|we|they)\s+(is)\b/gi,replacement:"$1 are"},{pattern:/\b(he|she|it)\s+(have)\b/gi,replacement:"$1 has"},{pattern:/\b(I|you|we|they)\s+(has)\b/gi,replacement:"$1 have"}],commonErrors:[{pattern:/\bthere\s+is\s+(multiple|many|several)/gi,replacement:"there are $1"},{pattern:/\bit\s+don't\b/gi,replacement:"it doesn't"},{pattern:/\bhe\s+don't\b/gi,replacement:"he doesn't"},{pattern:/\bshe\s+don't\b/gi,replacement:"she doesn't"},{pattern:/\bwould\s+of\b/gi,replacement:"would have"},{pattern:/\bcould\s+of\b/gi,replacement:"could have"},{pattern:/\bshould\s+of\b/gi,replacement:"should have"}],capitalization:[{pattern:/^([a-z])/gm,replacement:(t,e)=>e.toUpperCase()},{pattern:/\.\s+([a-z])/g,replacement:(t,e)=>". "+e.toUpperCase()},{pattern:/\?\s+([a-z])/g,replacement:(t,e)=>"? "+e.toUpperCase()},{pattern:/\!\s+([a-z])/g,replacement:(t,e)=>"! "+e.toUpperCase()}],punctuation:[{pattern:/\s+([,.!?;:])/g,replacement:"$1"},{pattern:/([.!?])\s*([.!?])+/g,replacement:"$1"},{pattern:/\s+$/gm,replacement:""},{pattern:/^\s+/gm,replacement:""},{pattern:/\n\s*\n/g,replacement:`
`}],medical:[{pattern:/\bdoctor\s+are\b/gi,replacement:"doctor is"},{pattern:/\bpatient\s+are\b/gi,replacement:"patient is"},{pattern:/\bmedicine\s+are\b/gi,replacement:"medicine is"},{pattern:/\btreatment\s+are\b/gi,replacement:"treatment is"},{pattern:/\bdiagnosis\s+are\b/gi,replacement:"diagnosis is"}]};class C3{constructor(){this.corrections=[],this.confidenceThreshold=.7}correctGrammar(e,r={}){if(!e||typeof e!="string")return{correctedText:e,corrections:[],confidence:0};const{includeCapitalization:n=!0,includePunctuation:i=!0,includeMedicalTerms:a=!0,preserveOriginalSpacing:s=!1}=r;let f=e;const _=[];let N=0;try{const I=this.applyRules(f,mu.articles,"Article");f=I.text,_.push(...I.corrections),N+=I.corrections.length;const me=this.applyRules(f,mu.subjectVerb,"Subject-Verb Agreement");f=me.text,_.push(...me.corrections),N+=me.corrections.length;const fe=this.applyRules(f,mu.commonErrors,"Common Errors");if(f=fe.text,_.push(...fe.corrections),N+=fe.corrections.length,a){const qe=this.applyRules(f,mu.medical,"Medical Terms");f=qe.text,_.push(...qe.corrections),N+=qe.corrections.length}if(n){const qe=this.applyRules(f,mu.capitalization,"Capitalization");f=qe.text,_.push(...qe.corrections),N+=qe.corrections.length}if(i){const qe=this.applyRules(f,mu.punctuation,"Punctuation");f=qe.text,_.push(...qe.corrections),N+=qe.corrections.length}const Te=this.calculateConfidence(e,f,N);return{correctedText:f.trim(),originalText:e,corrections:_,totalCorrections:N,confidence:Te,summary:this.generateCorrectionSummary(_)}}catch(I){return console.error("Grammar correction error:",I),{correctedText:e,originalText:e,corrections:[],totalCorrections:0,confidence:0,error:I.message}}}applyRules(e,r,n){let i=e;const a=[];return r.forEach((s,f)=>{const _=i;s.replacement,i=i.replace(s.pattern,s.replacement),_!==i&&a.push({category:n,ruleIndex:f,original:_,corrected:i,pattern:s.pattern.toString(),replacement:s.replacement.toString()})}),{text:i,corrections:a}}calculateConfidence(e,r,n){if(!e||e===r)return 1;const i=e.length,a=n/Math.max(i/100,1),s=Math.max(.1,Math.min(1,1-a*.1));return Math.round(s*100)/100}generateCorrectionSummary(e){const r={};return e.forEach(n=>{r[n.category]||(r[n.category]=0),r[n.category]++}),{totalCorrections:e.length,categories:r,details:e.slice(0,10)}}needsCorrection(e){return!e||typeof e!="string"?!1:[/\b(he|she|it)\s+(are)\b/i,/\b(I)\s+(are)\b/i,/\bwould\s+of\b/i,/\bit\s+don't\b/i,/^[a-z]/,/\s+[.!?]/].some(n=>n.test(e))}}const F6=(t,e={})=>new C3().correctGrammar(t,e),I6=t=>new C3().needsCorrection(t);class j3{constructor(){this.audioContext=null,this.analyser=null,this.microphone=null,this.dataArray=null,this.frequencyData=null,this.isAnalyzing=!1,this.config={fftSize:2048,sampleRate:44100,hopLength:512,windowSize:1024,analysisInterval:100,smoothingTimeConstant:.8},this.baselinePatterns={pitch:{min:80,max:400,average:150},volume:{min:0,max:100,average:50},pace:{wordsPerMinute:150,syllablesPerSecond:3.5}},this.currentAnalysis={pitchData:[],volumeData:[],tonalQuality:[],temporalPatterns:[],emotionalMarkers:[]},this.analysisHistory=[],this.isInitialized=!1}async initialize(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext);const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,sampleRate:this.config.sampleRate}});return this.microphone=this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.config.fftSize,this.analyser.smoothingTimeConstant=this.config.smoothingTimeConstant,this.microphone.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.frequencyData=new Float32Array(this.analyser.fftSize),this.isInitialized=!0,console.log(" Speech Nuance Analyzer initialized successfully"),!0}catch(e){return console.error(" Failed to initialize audio analysis:",e),!1}}startAnalysis(){return this.isInitialized?(this.isAnalyzing=!0,this.analysisLoop(),console.log(" Started real-time speech nuance analysis"),!0):(console.error(" Analyzer not initialized. Call initialize() first."),!1)}stopAnalysis(){this.isAnalyzing=!1,console.log(" Stopped speech nuance analysis")}analysisLoop(){if(!this.isAnalyzing)return;this.analyser.getByteFrequencyData(this.dataArray),this.analyser.getFloatTimeDomainData(this.frequencyData);const e={pitch:this.extractPitchFeatures(),volume:this.extractVolumeFeatures(),tonalQuality:this.extractTonalFeatures(),temporal:this.extractTemporalFeatures()};this.currentAnalysis.pitchData.push(e.pitch),this.currentAnalysis.volumeData.push(e.volume),this.currentAnalysis.tonalQuality.push(e.tonalQuality),this.currentAnalysis.temporalPatterns.push(e.temporal),this.trimAnalysisHistory(),setTimeout(()=>this.analysisLoop(),this.config.analysisInterval)}extractPitchFeatures(){const e=this.calculateFundamentalFrequency(),r=this.calculatePitchVariance(),n=this.analyzePitchContour();return{fundamental:e,variance:r,contour:n,range:this.calculatePitchRange(),stability:this.calculatePitchStability(),timestamp:Date.now()}}extractVolumeFeatures(){let e=0;for(let a=0;a<this.frequencyData.length;a++)e+=this.frequencyData[a]*this.frequencyData[a];const r=Math.sqrt(e/this.frequencyData.length),n=Math.max(...this.frequencyData.map(Math.abs)),i=this.calculateDynamicRange();return{rms:r*100,peak:n*100,dynamicRange:i,volumeVariance:this.calculateVolumeVariance(),breathPattern:this.detectBreathPattern(),timestamp:Date.now()}}extractTonalFeatures(){const e=this.calculateSpectralCentroid(),r=this.calculateHarmonicContent(),n=this.analyzeVoiceQuality();return{brightness:e,harmonicRichness:r,voiceQuality:n,tensionMarkers:this.detectVocalTension(),resonance:this.calculateResonanceQuality(),timestamp:Date.now()}}extractTemporalFeatures(){return{energyLevel:this.calculateEnergyLevel(),rhythmPattern:this.analyzeRhythmPattern(),pauseDetection:this.detectPauses(),speechRate:this.estimateSpeechRate(),articulationClarity:this.analyzeArticulation(),timestamp:Date.now()}}calculateFundamentalFrequency(){const e=this.frequencyData.length,r=new Array(e);for(let s=0;s<e;s++){let f=0;for(let _=0;_<e-s;_++)f+=this.frequencyData[_]*this.frequencyData[_+s];r[s]=f}let n=0,i=0;for(let s=20;s<e/2;s++)r[s]>n&&(n=r[s],i=s);const a=i>0?this.config.sampleRate/i:0;return Math.min(Math.max(a,50),500)}calculatePitchVariance(){const e=this.currentAnalysis.pitchData.slice(-10).map(i=>i.fundamental);if(e.length<2)return 0;const r=e.reduce((i,a)=>i+a,0)/e.length,n=e.reduce((i,a)=>i+Math.pow(a-r,2),0)/e.length;return Math.sqrt(n)}analyzePitchContour(){const e=this.currentAnalysis.pitchData.slice(-10).map(a=>a.fundamental);if(e.length<3)return"flat";let r=0,n=0,i=0;for(let a=1;a<e.length;a++){const s=e[a]-e[a-1];Math.abs(s)<5?i++:s>0?r++:n++}return i>r&&i>n?"flat":r>n?"rising":n>r?"falling":"varied"}calculateSpectralCentroid(){let e=0,r=0;for(let n=0;n<this.dataArray.length;n++){const i=n*this.config.sampleRate/(2*this.dataArray.length),a=this.dataArray[n];e+=i*a,r+=a}return r>0?e/r:0}detectBreathPattern(){const e=this.dataArray.slice(0,10).reduce((i,a)=>i+a,0),r=this.dataArray.slice(10,50).reduce((i,a)=>i+a,0);return{breathiness:e/Math.max(r,1),support:this.calculateBreathSupport(),tension:this.detectVocalTension()}}calculatePitchRange(){const e=this.currentAnalysis.pitchData.slice(-20).map(r=>r.fundamental);return e.length===0?0:Math.max(...e)-Math.min(...e)}calculatePitchStability(){const e=this.calculatePitchVariance();return Math.max(0,100-e*2)}calculateDynamicRange(){const e=this.currentAnalysis.volumeData.slice(-20).map(r=>r.rms);return e.length===0?0:Math.max(...e)-Math.min(...e)}calculateVolumeVariance(){const e=this.currentAnalysis.volumeData.slice(-10).map(n=>n.rms);if(e.length<2)return 0;const r=e.reduce((n,i)=>n+i,0)/e.length;return e.reduce((n,i)=>n+Math.pow(i-r,2),0)/e.length}calculateHarmonicContent(){let e=0;const r=this.calculateFundamentalFrequency();if(r>0)for(let n=2;n<=6;n++){const i=r*n,a=Math.round(i*this.dataArray.length*2/this.config.sampleRate);a<this.dataArray.length&&(e+=this.dataArray[a])}return e/5}analyzeVoiceQuality(){const e=this.calculateSpectralCentroid(),r=this.calculateHarmonicContent(),n=this.detectBreathPattern().breathiness;return{clarity:Math.max(0,100-n*10),richness:Math.min(100,r*2),brightness:Math.min(100,e/50),overall:(r+(100-n*10))/2}}detectVocalTension(){const e=this.dataArray.slice(100,200).reduce((i,a)=>i+a,0),r=this.dataArray.reduce((i,a)=>i+a,0),n=r>0?e/r*100:0;return{level:Math.min(100,n*5),indicators:n>20?["high_freq_energy"]:[]}}calculateEnergyLevel(){const e=this.dataArray.reduce((r,n)=>r+n*n,0);return Math.sqrt(e/this.dataArray.length)}analyzeRhythmPattern(){const e=this.currentAnalysis.temporalPatterns.slice(-10).map(i=>i.energyLevel);if(e.length<3)return"insufficient_data";const r=[];for(let i=1;i<e.length;i++)r.push(e[i]-e[i-1]);const n=this.calculateVariance(r);return n<10?"regular":n<25?"moderate":"irregular"}detectPauses(){const e=this.calculateEnergyLevel(),r=5;return{isPausing:e<r,energyLevel:e,threshold:r}}estimateSpeechRate(){const e=this.currentAnalysis.temporalPatterns.slice(-20);if(e.length<2)return 0;let r=0;for(let i=1;i<e.length;i++)Math.abs(e[i].energyLevel-e[i-1].energyLevel)>10&&r++;const n=e.length*this.config.analysisInterval/1e3;return n>0?r/n:0}analyzeArticulation(){const e=this.dataArray.slice(150,300).reduce((i,a)=>i+a,0),r=this.dataArray.reduce((i,a)=>i+a,0),n=r>0?e/r*100:0;return{clarity:Math.min(100,n*3),precision:n>15?"high":n>8?"medium":"low"}}calculateBreathSupport(){const e=this.currentAnalysis.temporalPatterns.slice(-10).map(n=>n.energyLevel);if(e.length<3)return 50;const r=this.calculateVariance(e);return Math.max(0,100-r*2)}calculateResonanceQuality(){const e=this.calculateHarmonicContent(),r=this.calculateSpectralCentroid();return{clarity:Math.min(100,e*1.5),fullness:Math.min(100,200-r/10),overall:(e+Math.min(100,200-r/10))/2}}calculateVariance(e){if(e.length<2)return 0;const r=e.reduce((n,i)=>n+i,0)/e.length;return e.reduce((n,i)=>n+Math.pow(i-r,2),0)/e.length}trimAnalysisHistory(){this.currentAnalysis.pitchData.length>100&&(this.currentAnalysis.pitchData=this.currentAnalysis.pitchData.slice(-100)),this.currentAnalysis.volumeData.length>100&&(this.currentAnalysis.volumeData=this.currentAnalysis.volumeData.slice(-100)),this.currentAnalysis.tonalQuality.length>100&&(this.currentAnalysis.tonalQuality=this.currentAnalysis.tonalQuality.slice(-100)),this.currentAnalysis.temporalPatterns.length>100&&(this.currentAnalysis.temporalPatterns=this.currentAnalysis.temporalPatterns.slice(-100))}getCurrentAnalysisSummary(){if(!this.isAnalyzing)return{status:"not_analyzing"};const e={pitch:this.currentAnalysis.pitchData.slice(-1)[0]||{},volume:this.currentAnalysis.volumeData.slice(-1)[0]||{},tonal:this.currentAnalysis.tonalQuality.slice(-1)[0]||{},temporal:this.currentAnalysis.temporalPatterns.slice(-1)[0]||{}};return{status:"analyzing",timestamp:Date.now(),current:e,summary:{pitchStability:this.calculatePitchStability(),volumeConsistency:100-this.calculateVolumeVariance(),voiceQuality:e.tonal.voiceQuality||{},speechRate:e.temporal.speechRate||0,emotionalMarkers:this.detectBasicEmotionalMarkers()}}}detectBasicEmotionalMarkers(){var a,s,f;const e=this.calculatePitchVariance();this.calculateVolumeVariance();const r=this.calculatePitchRange(),n=this.currentAnalysis.tonalQuality.slice(-1)[0];return{excitement:e>30&&r>50,monotone:e<10&&r<20,tension:(((a=n==null?void 0:n.tensionMarkers)==null?void 0:a.level)||0)>40,breathiness:(((s=n==null?void 0:n.voiceQuality)==null?void 0:s.clarity)||100)<60,energy:(((f=this.currentAnalysis.temporalPatterns.slice(-1)[0])==null?void 0:f.energyLevel)||0)>50}}dispose(){this.stopAnalysis(),this.microphone&&this.microphone.disconnect(),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close(),this.isInitialized=!1,console.log(" Speech Nuance Analyzer disposed")}}class O6{constructor(){this.nuanceAnalyzer=new j3,this.isInitialized=!1,this.emotionPatterns={sarcasm:{textMarkers:["oh great","wonderful","fantastic","perfect","exactly what i wanted","love this","brilliant","outstanding","just what i needed","how lovely","terrific","marvelous","absolutely brilliant","just perfect","goes perfectly wrong","another wonderful","everything goes perfectly wrong","love how nothing","nothing ever works","brilliant system","exactly what i wanted to happen"],audioThresholds:{pitchVariance:{min:0,max:15},pitchRange:{min:0,max:30},monotone:!0,elongation:!0,volumeConsistency:{min:70,max:100}},confidence:{textMatch:30,audioMatch:50,contextMatch:20}},genuineEnthusiasm:{textMarkers:["excited","amazing","incredible","awesome","thrilled","love","breakthrough","exceeded expectations","ahead of schedule","incredible news","genuinely proud","hard work","dedication","accomplished"],audioThresholds:{pitchVariance:{min:25,max:100},pitchRange:{min:40,max:200},volumeVariance:{min:15,max:50},energy:{min:60,max:100},voiceQuality:{min:70,max:100}},confidence:{textMatch:25,audioMatch:60,contextMatch:15}},frustration:{textMarkers:["annoying","frustrated","ridiculous","seriously","enough","tired","issues","problems","dont know","multiple issues","this is ridiculous","are you kidding","come on","what the hell","this is stupid","fed up","whatever","fine"],audioThresholds:{tension:{min:40,max:100},pitchRange:{min:30,max:80},volumeSpikes:!0,articulationHard:!0,breathSupport:{min:30,max:70}},confidence:{textMatch:35,audioMatch:55,contextMatch:10}},politeLie:{textMarkers:["I suppose it's fine","I guess it's okay","not bad I suppose","if you say so","sure whatever","fine I guess","I suppose that works","okay if you think so","whatever you say","I guess that's fine","it's fine I suppose","good enough I guess","whatever works for you"],audioThresholds:{hesitation:!0,controlledTone:!0,pitchVariance:{min:5,max:20},volumeConsistency:{min:80,max:100},artificialBrightness:!0},confidence:{textMatch:20,audioMatch:60,contextMatch:20}},sadness:{textMarkers:["sad","disappointed","upset","hurt","depressed","feeling down","feeling tired","exhausted","drained","I don't know","maybe","I suppose","whatever","doesn't matter","I give up","tired"],audioThresholds:{lowPitch:!0,lowEnergy:{min:0,max:40},breathiness:{min:40,max:100},slowPace:!0,longPauses:!0},confidence:{textMatch:30,audioMatch:50,contextMatch:20}},confidence:{textMarkers:["certain","sure","confident","positive results","happy with the progress","working good","making progress","absolutely","definitely","certainly","without a doubt","I know","I'm sure","positive","guaranteed"],audioThresholds:{clearArticulation:{min:70,max:100},steadyPitch:{min:70,max:100},goodBreathSupport:{min:70,max:100},consistentVolume:{min:70,max:100},richTone:{min:60,max:100}},confidence:{textMatch:25,audioMatch:55,contextMatch:20}}},this.currentEmotionState={detected:"neutral",confidence:0,breakdown:{},audioEvidence:{},textEvidence:{},timestamp:null},this.emotionHistory=[]}async initialize(){try{return await this.nuanceAnalyzer.initialize()?(this.isInitialized=!0,console.log(" Emotion Detection Engine initialized"),!0):!1}catch(e){return console.error(" Failed to initialize emotion detection:",e),!1}}startDetection(){return this.isInitialized?(this.nuanceAnalyzer.startAnalysis(),console.log(" Started emotion detection"),!0):(console.error(" Emotion detection not initialized"),!1)}stopDetection(){this.nuanceAnalyzer.stopAnalysis(),console.log(" Stopped emotion detection")}analyzeCurrentEmotion(e=""){try{const r=this.nuanceAnalyzer.getCurrentAnalysisSummary();if(!e||!e.trim())return{detected:"no_text",confidence:0,breakdown:{no_text:{textScore:0,audioScore:0,contextScore:0}},timestamp:Date.now()};const n={};for(const[a,s]of Object.entries(this.emotionPatterns))try{n[a]=this.calculateEmotionScore(a,s,r,e)}catch(f){console.warn(`Error calculating score for ${a}:`,f),n[a]={totalScore:0,textScore:0,audioScore:0,contextScore:0,breakdown:{textMatches:[],audioEvidence:null,contextFactors:[]}}}const i=Object.entries(n).reduce((a,[s,f])=>f.totalScore>a.score?{emotion:s,score:f.totalScore,details:f}:a,{emotion:"neutral",score:0,details:{}});return this.currentEmotionState={detected:i.emotion,confidence:i.score,breakdown:n,audioEvidence:r,textEvidence:this.analyzeTextEvidence(e),timestamp:Date.now()},this.emotionHistory.push({...this.currentEmotionState}),this.trimEmotionHistory(),this.currentEmotionState}catch(r){return console.error("Error in emotion analysis:",r),{detected:"neutral",confidence:0,breakdown:{neutral:{textScore:0,audioScore:0,contextScore:0}},error:r.message,timestamp:Date.now()}}}calculateEmotionScore(e,r,n,i){let a=0,s=0,f=0;if(i&&r.textMarkers){const N=i.toLowerCase(),I=r.textMarkers.filter(me=>N.includes(me.toLowerCase()));if(I.length>0&&(a=r.confidence.textMatch,I.length>1)){const me=Math.min(1.5,1+(I.length-1)*.2);a=Math.min(r.confidence.textMatch*me,r.confidence.textMatch*1.5)}}n&&n.current&&r.audioThresholds&&(s=this.calculateAudioScore(r.audioThresholds,n)),f=this.calculateContextScore(e,i);const _=a+s+f;return{totalScore:Math.round(_),textScore:Math.round(a),audioScore:Math.round(s),contextScore:Math.round(f),breakdown:{textMatches:i?this.getTextMatches(i,r.textMarkers):[],audioEvidence:this.getAudioEvidence(r.audioThresholds,n),contextFactors:this.getContextFactors(e,i)}}}calculateAudioScore(e,r){var N,I;if(!r||!r.current)return 0;let n=0;const i=50;let a=0,s=0;const f=r.current||{},_=r.summary||{};if(e.pitchVariance){a++;const me=_.pitchStability?100-_.pitchStability:50;me>=e.pitchVariance.min&&me<=e.pitchVariance.max&&s++}if(e.pitchRange&&f.pitch){a++;const me=f.pitch.range||0;me>=e.pitchRange.min&&me<=e.pitchRange.max&&s++}if(e.monotone&&(a++,(_.pitchStability||0)>85&&s++),e.volumeConsistency){a++;const me=_.volumeConsistency||50;me>=e.volumeConsistency.min&&me<=e.volumeConsistency.max&&s++}if(e.energy&&f.temporal){a++;const me=f.temporal.energyLevel||0;me>=e.energy.min&&me<=e.energy.max&&s++}if(e.tension&&f.tonal){a++;const me=((N=f.tonal.tensionMarkers)==null?void 0:N.level)||0;me>=e.tension.min&&me<=e.tension.max&&s++}if(e.voiceQuality&&f.tonal){a++;const me=((I=f.tonal.voiceQuality)==null?void 0:I.overall)||50;me>=e.voiceQuality.min&&me<=e.voiceQuality.max&&s++}return a>0&&(n=s/a*i),n}calculateContextScore(e,r){let n=0;if(!r)return n;const i=r.toLowerCase(),a={sarcasm:["problem","issue","complaint","wrong","broken","failed"],genuineEnthusiasm:["success","achievement","good news","celebration","win"],frustration:["delay","wait","problem","error","mistake","again"],politeLie:["meeting","presentation","required","mandatory","professional"],sadness:["loss","end","over","goodbye","failed","disappointed"],confidence:["plan","strategy","will","going to","ready","prepared"]};if(a[e]){const s=a[e].filter(f=>i.includes(f));n=Math.min(20,s.length*5)}return n}getTextMatches(e,r){if(!e||!r)return[];const n=e.toLowerCase();return r.filter(i=>n.includes(i.toLowerCase()))}getAudioEvidence(e,r){var s,f,_,N,I,me;const n=[],i=r.current,a=r.summary;return e.monotone&&(a.pitchStability||0)>85&&n.push("Monotone delivery detected"),e.tension&&((f=(s=i.tonal)==null?void 0:s.tensionMarkers)==null?void 0:f.level)>40&&n.push("Vocal tension detected"),(_=e.energy)!=null&&_.min&&((N=i.temporal)==null?void 0:N.energyLevel)>e.energy.min&&n.push("High energy level"),(I=e.lowEnergy)!=null&&I.max&&((me=i.temporal)==null?void 0:me.energyLevel)<e.lowEnergy.max&&n.push("Low energy level"),n}getContextFactors(e,r){const n=[];return r&&(e==="sarcasm"&&r.includes("great")&&n.push("Positive word in potentially negative context"),e==="frustration"&&r.includes("again")&&n.push("Repetition indicator suggests frustration")),n}analyzeTextEvidence(e){return e?{length:e.length,wordCount:e.split(" ").length,hasPositiveWords:/\b(good|great|love|amazing|wonderful|excellent|fantastic)\b/i.test(e),hasNegativeWords:/\b(bad|terrible|awful|hate|horrible|worst|problem)\b/i.test(e),hasHesitation:/\b(um|uh|well|like|you know|sort of|kind of)\b/i.test(e),hasIntensifiers:/\b(very|really|extremely|incredibly|absolutely|totally)\b/i.test(e)}:{}}getCurrentEmotion(){return this.currentEmotionState}getEmotionSummary(){var r;const e=this.getCurrentEmotion();return{primaryEmotion:e.detected,confidence:e.confidence,timestamp:e.timestamp,evidence:{strongestIndicators:this.getStrongestIndicators(e),audioSupport:((r=e.audioEvidence)==null?void 0:r.summary)||{},textSupport:e.textEvidence||{}},interpretation:this.getEmotionInterpretation(e.detected,e.confidence)}}getStrongestIndicators(e){const r=e.breakdown[e.detected];if(!r)return[];const n=[];return r.textScore>15&&n.push(`Text markers (${r.textScore} points)`),r.audioScore>25&&n.push(`Audio patterns (${r.audioScore} points)`),r.contextScore>10&&n.push(`Context clues (${r.contextScore} points)`),n}getEmotionInterpretation(e,r){var a;const n={sarcasm:{high:"Strong sarcasm detected - speaker likely means the opposite of what they said",medium:"Possible sarcasm - speaker may be expressing frustration indirectly",low:"Mild sarcastic undertones detected"},genuineEnthusiasm:{high:"Authentic enthusiasm - speaker is genuinely excited",medium:"Positive emotion detected - likely genuine approval",low:"Mild positive sentiment"},frustration:{high:"Clear frustration - speaker is upset or annoyed",medium:"Moderate irritation detected",low:"Slight tension or impatience"},politeLie:{high:"Polite disagreement - speaker being diplomatic while disagreeing",medium:"Possible social politeness - may not fully agree",low:"Mild reservation detected"},sadness:{high:"Sadness or disappointment detected",medium:"Low mood or mild disappointment",low:"Subdued emotional state"},confidence:{high:"Strong confidence - speaker is very certain",medium:"Good confidence level detected",low:"Mild confidence or certainty"}},i=r>70?"high":r>40?"medium":"low";return((a=n[e])==null?void 0:a[i])||"Emotion detected with moderate confidence"}trimEmotionHistory(){this.emotionHistory.length>50&&(this.emotionHistory=this.emotionHistory.slice(-50))}dispose(){this.stopDetection(),this.nuanceAnalyzer.dispose(),this.isInitialized=!1,console.log(" Emotion Detection Engine disposed")}}class B6{constructor(){this.modelLoaded=!1,this.model=null,this.tokenizer=null,this.emotionLabels=["joy","sadness","anger","fear","surprise","disgust","neutral","enthusiasm","confidence","concern","frustration","sarcasm","excitement","happiness","anxiety","contempt","pride","shame"],this.bertEmotionMappings={LABEL_0:"sadness",LABEL_1:"joy",LABEL_2:"love",LABEL_3:"anger",LABEL_4:"fear",LABEL_5:"surprise",LABEL_6:"neutral",LABEL_7:"disgust",LABEL_8:"enthusiasm",LABEL_9:"confidence",LABEL_10:"concern",LABEL_11:"frustration",LABEL_12:"sarcasm",LABEL_13:"excitement",LABEL_14:"happiness",LABEL_15:"anxiety",LABEL_16:"contempt",LABEL_17:"pride"},this.emotionIntensityPatterns={high_intensity:["absolutely","completely","totally","extremely","incredibly","tremendously","enormously","exceptionally","remarkably","utterly","devastating","overwhelming","fantastic","amazing","terrible","brilliant","awful","wonderful","horrible","magnificent"],medium_intensity:["very","quite","rather","fairly","pretty","somewhat","moderately","considerably","significantly","notably","reasonably","substantially"],low_intensity:["slightly","a bit","a little","mildly","somewhat","barely","hardly","scarcely","just","almost","nearly"]},this.contextualEnhancers={sarcasm_indicators:["oh great","wonderful","perfect","just fantastic","obviously","clearly","sure","right","of course","definitely"],enthusiasm_boosters:["can't wait","so excited","thrilled","pumped","buzzing","incredible","amazing","breakthrough","fantastic news"],confidence_markers:["certain","sure","confident","positive","convinced","guaranteed","definitely will","no doubt","absolutely"],concern_signals:["worried","concerned","anxious","nervous","uneasy","troubled","apprehensive","fearful","not sure"]},this.initializeBERT()}async initializeBERT(){try{if(console.log(" Initializing BERT Emotion Enhancement..."),typeof window<"u")try{const{pipeline:e,env:r}=await Ro(async()=>{const{pipeline:n,env:i}=await import("https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.2/dist/transformers.min.js");return{pipeline:n,env:i}},[]);r.allowRemoteModels=!0,r.allowLocalModels=!1,console.log(" Loading BERT emotion classification model...");try{this.emotionClassifier=await e("text-classification","j-hartmann/emotion-english-distilroberta-base"),console.log(" Emotion-specific BERT model loaded successfully")}catch(n){console.warn(" Emotion model failed, using sentiment model:",n),this.emotionClassifier=await e("text-classification","Xenova/distilbert-base-uncased-finetuned-sst-2-english"),console.log(" Sentiment BERT model loaded successfully")}return this.modelLoaded=!0,!0}catch(e){throw console.warn(" Failed to import transformers library:",e),e}else return console.log(" Not in browser environment, skipping BERT initialization"),this.modelLoaded=!1,!1}catch(e){return console.warn(" BERT model loading failed, using enhanced fallback methods:",e),this.modelLoaded=!1,!1}}async analyzeSpeechEmotionRealTime(e,r=!1){if(!e||e.trim().length===0)return this.getDefaultEmotionResult("neutral",.1,"No text provided");try{if(console.log(" Real-time BERT speech analysis:",e),r&&e.length<10)return this.getQuickEmotionPreview(e);const n=await this.analyzeEmotionWithBERT(e),i=this.enhanceForSpeechContext(n,e);return console.log(" Real-time speech emotion result:",i),i}catch(n){return console.error(" Real-time speech analysis failed:",n),this.getFallbackSpeechAnalysis(e)}}getQuickEmotionPreview(e){const r=e.toLowerCase().split(" "),n=["good","great","love","happy","amazing","wonderful","excellent"],i=["bad","hate","terrible","awful","horrible","worst"],a=["oh","great","fantastic","perfect","wonderful"];let s="neutral",f=.3;return r.some(_=>n.includes(_))?(s="happiness",f=.6):r.some(_=>i.includes(_))?(s="frustration",f=.6):r.length>=2&&a.includes(r[0])&&(s="sarcasm",f=.4),{primaryEmotion:s,confidence:f,emotions:{[s]:f,neutral:1-f},analysis:"Quick preview (partial transcript)",isPartial:!0,bertEnhanced:!1,timestamp:new Date().toISOString()}}enhanceForSpeechContext(e,r){const n={...e};return this.hasClearSpeechPatterns(r)&&(n.confidence=Math.min(n.confidence*1.2,.95)),n.speechOptimized=!0,n.originalText=r,n.analysisType="speech-to-text",n}hasClearSpeechPatterns(e){return[/^(oh\s+)?(wow|great|amazing|terrible|awful)\s+/i,/\b(absolutely|completely|totally)\s+\w+/i,/\b(I\s+(love|hate|really)\s+)/i,/\b(this\s+is\s+(great|awful|amazing|terrible))/i].some(n=>n.test(e))}getFallbackSpeechAnalysis(e){return{...this.getFallbackAnalysis(e),analysisType:"speech-fallback",speechOptimized:!0,fallbackReason:"BERT unavailable - using enhanced speech rules"}}async analyzeEmotionWithBERT(e,r=null){if(!e||typeof e!="string")return this.getFallbackAnalysis(e,r);try{let n=null;if(this.modelLoaded&&this.emotionClassifier){console.log(" Running BERT emotion analysis...");const f=await this.emotionClassifier(e);n=this.processBERTResults(f)}const i=this.getEnhancedRuleBasedAnalysis(e),a=r?this.integrateAcousticFeatures(r):null,s=this.fuseAnalysisMethods(n,i,a);return console.log(" BERT-Enhanced Analysis Complete:",s),s}catch(n){return console.warn(" BERT analysis failed, using fallback:",n),this.getFallbackAnalysis(e,r)}}processBERTResults(e){if(!e||!Array.isArray(e))return null;const r={};let n=0;return e.forEach(i=>{const a=this.mapBERTLabel(i.label),s=i.score;a&&s>.1&&(r[a]=s,n+=s)}),n>0&&Object.keys(r).forEach(i=>{r[i]=r[i]/n}),{source:"BERT",emotions:r,confidence:Object.values(r).length>0?Math.max(...Object.values(r).filter(i=>typeof i=="number"&&!isNaN(i)&&isFinite(i))):0,method:"transformer_neural_network"}}mapBERTLabel(e){return{POSITIVE:"joy",NEGATIVE:"sadness",NEUTRAL:"neutral",LABEL_0:"sadness",LABEL_1:"joy",LABEL_2:"anger",LABEL_3:"fear",LABEL_4:"surprise",LABEL_5:"disgust"}[e]||e.toLowerCase()}getEnhancedRuleBasedAnalysis(e){const r=e.toLowerCase(),n=r.split(/\s+/),i=e.split(/[.!?]+/),a={emotions:{},features:{intensity:this.calculateIntensity(r),context:this.analyzeContext(r),sentiment_flow:this.analyzeSentimentFlow(i),linguistic_patterns:this.analyzeLinguisticPatterns(n)}};return a.emotions=this.detectEmotionsWithContext(r,a.features),{source:"Enhanced_Rules",emotions:a.emotions,features:a.features,confidence:this.calculateRuleConfidence(a),method:"contextual_rule_based"}}calculateIntensity(e){let r=0,n="medium";this.emotionIntensityPatterns.high_intensity.forEach(s=>{e.includes(s)&&(r+=.8)}),this.emotionIntensityPatterns.medium_intensity.forEach(s=>{e.includes(s)&&(r+=.5)}),this.emotionIntensityPatterns.low_intensity.forEach(s=>{e.includes(s)&&(r+=.2)});const i=(e.match(/[A-Z]/g)||[]).length,a=(e.match(/!/g)||[]).length;return r+=i*.1+a*.3,r>1?n="high":r<.3&&(n="low"),{score:Math.min(r,2),level:n}}analyzeContext(e){const r={sarcasm:0,enthusiasm:0,confidence:0,concern:0};return this.contextualEnhancers.sarcasm_indicators.forEach(n=>{e.includes(n)&&(r.sarcasm+=.3)}),this.contextualEnhancers.enthusiasm_boosters.forEach(n=>{e.includes(n)&&(r.enthusiasm+=.4)}),this.contextualEnhancers.confidence_markers.forEach(n=>{e.includes(n)&&(r.confidence+=.3)}),this.contextualEnhancers.concern_signals.forEach(n=>{e.includes(n)&&(r.concern+=.3)}),r}analyzeSentimentFlow(e){const r=e.map(n=>this.getBasicSentiment(n.trim()));return{pattern:r,consistency:this.calculateConsistency(r),transitions:this.analyzeTransitions(r)}}analyzeLinguisticPatterns(e){return{word_count:e.length,avg_word_length:e.reduce((r,n)=>r+n.length,0)/e.length,question_marks:(e.join(" ").match(/\?/g)||[]).length,exclamations:(e.join(" ").match(/!/g)||[]).length,repetitions:this.findRepetitions(e)}}detectEmotionsWithContext(e,r){const n={},i={joy:["happy","joy","great","wonderful","fantastic","amazing","excellent","brilliant","delighted","pleased","thrilled","excited","cheerful","glad","joyful","elated","euphoric"],sadness:["sad","down","depressed","disappointed","heartbroken","sorrowful","melancholy","gloomy","miserable","upset","blue","dejected","despondent"],anger:["angry","mad","furious","rage","irritated","annoyed","outraged","livid","enraged","pissed","frustrated","irate","heated","boiling"],fear:["scared","afraid","terrified","anxious","worried","nervous","frightened","fearful","panicked","alarmed","concerned","apprehensive"],surprise:["surprised","shocked","amazed","astonished","stunned","bewildered","astounded","startled","flabbergasted","dumbfounded"],disgust:["disgusted","revolted","repulsed","sickened","appalled","horrified","nauseated","repelled","grossed"],enthusiasm:["excited","enthusiastic","eager","thrilled","pumped","energetic","passionate","motivated","inspired","fired up"],confidence:["confident","sure","certain","positive","assured","convinced","determined","bold","self-assured","definite"],concern:["concerned","worried","troubled","uneasy","apprehensive","anxious","bothered","disturbed"],sarcasm:["obviously","clearly","sure","right","perfect","wonderful","great","fantastic"]},a=["very","really","extremely","absolutely","completely","totally","incredibly","amazingly","tremendously","utterly","quite","rather","pretty","fairly"];let s=1;if(a.forEach(f=>{e.includes(f)&&(s+=.3)}),s=Math.min(s,2),Object.keys(i).forEach(f=>{let _=0,N=0;i[f].forEach(I=>{e.includes(I)&&(_+=.4,N++),e.includes(I.substring(0,Math.max(4,I.length-2)))&&(_+=.2)}),f==="sarcasm"&&r.context.sarcasm>.5&&(_+=r.context.sarcasm*.6),f==="enthusiasm"&&r.context.enthusiasm>.3&&(_+=r.context.enthusiasm*.5),f==="confidence"&&r.context.confidence>.3&&(_+=r.context.confidence*.5),f==="concern"&&r.context.concern>.3&&(_+=r.context.concern*.5),_*=s,N>1&&(_*=1.2),_*=1+r.intensity.score*.4,_>.05&&(n[f]=Math.min(_,1))}),Object.keys(n).length===0){console.log(" No keyword-based emotions found, applying basic sentiment analysis");const f=["good","nice","love","like","enjoy","appreciate","fine","okay","yes"],_=["bad","hate","dislike","terrible","awful","no","never","not"];let N=0,I=0;f.forEach(me=>{e.includes(me)&&N++}),_.forEach(me=>{e.includes(me)&&I++}),N>I?n.joy=.3+N*.1:I>N?n.sadness=.3+I*.1:n.neutral=.5}return n}fuseAnalysisMethods(e,r,n){const i={};let a={bert:.6,rules:.4,acoustic:.3};e||(a.rules=.7,a.acoustic=.3),n||(a.bert=e?.7:0,a.rules=e?.3:1);const s=new Set;e!=null&&e.emotions&&Object.keys(e.emotions).forEach(me=>s.add(me)),r!=null&&r.emotions&&Object.keys(r.emotions).forEach(me=>s.add(me)),n!=null&&n.emotions&&Object.keys(n.emotions).forEach(me=>s.add(me)),s.forEach(me=>{var qe,Ve,Ue;let fe=0,Te=0;(qe=e==null?void 0:e.emotions)!=null&&qe[me]&&(fe+=e.emotions[me]*a.bert,Te+=a.bert),(Ve=r==null?void 0:r.emotions)!=null&&Ve[me]&&(fe+=r.emotions[me]*a.rules,Te+=a.rules),(Ue=n==null?void 0:n.emotions)!=null&&Ue[me]&&(fe+=n.emotions[me]*a.acoustic,Te+=a.acoustic),Te>0&&(i[me]=fe/Te)});const f=(e==null?void 0:e.confidence)||0,_=(r==null?void 0:r.confidence)||0,N=(n==null?void 0:n.confidence)||0,I=(f*a.bert+_*a.rules+N*a.acoustic)/(a.bert+a.rules+a.acoustic);return{emotions:i,confidence:I,methods_used:{bert:!!e,rules:!!r,acoustic:!!n},analysis_details:{bert:e,rules:r,acoustic:n},fusion_weights:a}}integrateAcousticFeatures(e){const r={},{pitch:n,volume:i,spectralCentroid:a,zeroCrossingRate:s}=e;return(n==null?void 0:n.mean)>200&&i>.6&&a>1500&&(r.joy=.7,r.happiness=.6),(n==null?void 0:n.mean)<150&&i<.4&&a<1200&&(r.sadness=.8),(n==null?void 0:n.variation)>.3&&i>.7&&s>.1&&(r.anger=.7),(n==null?void 0:n.mean)>220&&(n==null?void 0:n.variation)>.4&&(r.fear=.6,r.anxiety=.5),{source:"Acoustic",emotions:r,confidence:Math.max(...Object.values(r))||0,method:"acoustic_feature_analysis"}}getFallbackAnalysis(e,r){console.log(" Using fallback emotion analysis");const n=this.getEnhancedRuleBasedAnalysis(e||""),i=r?this.integrateAcousticFeatures(r):null;return this.fuseAnalysisMethods(null,n,i)}getBasicSentiment(e){const r=["good","great","excellent","amazing","wonderful","fantastic","love","like","happy","joy","positive","cheerful"],n=["bad","terrible","awful","hate","dislike","sad","angry","disappointed"],i=e.toLowerCase().split(/\s+/);let a=0,s=0;return i.forEach(f=>{r.includes(f)&&a++,n.includes(f)&&s++}),a>s?"positive":s>a?"negative":"neutral"}calculateConsistency(e){if(e.length<2)return 1;let r=0;for(let n=1;n<e.length;n++)e[n]===e[n-1]&&r++;return r/(e.length-1)}analyzeTransitions(e){const r=[];for(let n=1;n<e.length;n++)e[n]!==e[n-1]&&r.push(`${e[n-1]} -> ${e[n]}`);return r}findRepetitions(e){const r={};return e.forEach(n=>{r[n]=(r[n]||0)+1}),Object.keys(r).filter(n=>r[n]>1).length}calculateRuleConfidence(e){var s,f;const r=Object.keys(e.emotions||{}).length,n=Object.values(e.emotions||{}).filter(_=>typeof _=="number"&&!isNaN(_)&&isFinite(_)),i=n.length>0?Math.max(...n):0,a=(((f=(s=e.features)==null?void 0:s.intensity)==null?void 0:f.score)||0)*.2;return Math.min((i+a)*(r>0?1:.5),1)}getModelStatus(){return{bertLoaded:this.modelLoaded,ready:this.modelLoaded||!0,version:"2.0.0-BERT-Enhanced"}}}class H6{constructor(){this.nuanceAnalyzer=new j3,this.bertEnhancer=new B6,this.isInitialized=!1,this.bertInitialized=!1,this.emotionPatterns={sarcasm:{textMarkers:["oh great","wonderful","fantastic","perfect","exactly what i wanted","love this","brilliant","outstanding","just what i needed","how lovely","terrific","marvelous","absolutely brilliant","just perfect","goes perfectly wrong","another wonderful","everything goes perfectly wrong","love how nothing","nothing ever works","brilliant system","exactly what i wanted to happen","oh how nice","just delightful","real genius","smooth move","nice job","well done","genius move","smart thinking","that worked well","what could go wrong","this should be fun","looking forward to this","working perfectly","going smoothly","exactly as planned","couldnt be better","just my luck","how surprising","what a shock","never saw that coming","absolutely flawless","picture perfect","textbook example"],complexPatterns:[{pattern:/oh.*great.*day/i,weight:2.5,description:"sarcastic day comment"},{pattern:/love.*how.*nothing/i,weight:2,description:"sarcastic love statement"},{pattern:/exactly.*what.*wanted/i,weight:2.2,description:"sarcastic desire fulfillment"},{pattern:/working.*perfectly.*wrong/i,weight:2.8,description:"sarcastic malfunction"},{pattern:/brilliant.*system.*fails/i,weight:2.5,description:"sarcastic system criticism"},{pattern:/wonderful.*experience.*disaster/i,weight:2.3,description:"sarcastic experience review"},{pattern:/fantastic.*result.*failure/i,weight:2.4,description:"sarcastic outcome assessment"}],contextualModifiers:{negativeContext:["problem","issue","broken","failed","wrong","error","bug","crash","disaster","mess","terrible","awful","horrible"],timeIndicators:["again","another","still","yet again","once more","every time","always","never fails"],intensifiers:["really","absolutely","totally","completely","so","very","just","simply"],emotionalClues:["sigh","ugh","seriously","come on","give me a break","are you kidding"]},audioThresholds:{pitchVariance:{min:0,max:15},pitchRange:{min:0,max:30},monotone:!0,elongation:!0,volumeConsistency:{min:70,max:100}},confidence:{textMatch:45,audioMatch:50,contextMatch:35,complexPatternMatch:60}},genuineEnthusiasm:{textMarkers:["excited","amazing","incredible","awesome","thrilled","love","breakthrough","exceeded expectations","ahead of schedule","incredible news","genuinely proud","hard work","dedication","accomplished","fantastic results","blown away","mind blowing","exceeded all expectations","phenomenal","outstanding","remarkable","exceptional","superb","brilliant work","exceeded my wildest dreams","this is the best","absolutely wonderful","perfect","flawless","exactly what we needed","incredible achievement"],contextualModifiers:{achievementContext:["completed","finished","success","achievement","milestone","goal","target"],timeIndicators:["finally","at last","after so long","eventually"],socialIndicators:["team","together","collaboration","everyone","we did it"]},audioThresholds:{pitchVariance:{min:25,max:100},pitchRange:{min:40,max:200},volumeVariance:{min:15,max:50},energy:{min:60,max:100},voiceQuality:{min:70,max:100}},confidence:{textMatch:35,audioMatch:60,contextMatch:25}},frustration:{textMarkers:["annoying","frustrated","ridiculous","seriously","enough","tired","issues","problems","dont know","multiple issues","this is ridiculous","are you kidding","come on","what the hell","this is stupid","fed up","whatever","fine","give me a break","not again","why does this always happen","sick of this","irritating","annoyed","angry","mad","upset","bothered","what a waste","this sucks","horrible","terrible","awful","why me","i hate this","this is the worst","so annoying"],contextualModifiers:{repetitionContext:["again","still","always","every time","keeps happening"],systemContext:["system","software","program","app","website","computer"],timeContext:["late","deadline","urgent","waiting","delayed"]},audioThresholds:{tension:{min:40,max:100},pitchRange:{min:30,max:80},volumeSpikes:!0,articulationHard:!0,breathSupport:{min:30,max:70}},confidence:{textMatch:45,audioMatch:55,contextMatch:20}},politeLie:{textMarkers:["I suppose it's fine","I guess it's okay","not bad I suppose","if you say so","sure whatever","fine I guess","I suppose that works","okay if you think so","whatever you say","I guess that's fine","it's fine I suppose","good enough I guess","whatever works for you","that's... nice","interesting choice","I see your point"],contextualModifiers:{professionalContext:["meeting","presentation","client","boss"],hesitationMarkers:["well","um","uh","you know"],diplomaticPhrases:["I understand","I see","that makes sense"]},audioThresholds:{hesitation:!0,controlledTone:!0,pitchVariance:{min:5,max:20},volumeConsistency:{min:80,max:100},artificialBrightness:!0},confidence:{textMatch:25,audioMatch:60,contextMatch:25}},excitement:{textMarkers:["can't wait","so excited","this is going to be great","looking forward","pumped","stoked","thrilled","ecstatic","over the moon","buzzing with excitement"],contextualModifiers:{futureContext:["will","going to","soon","next","upcoming"],eventContext:["party","trip","vacation","celebration","launch"]},audioThresholds:{pitchVariance:{min:30,max:100},energy:{min:70,max:100},speechRate:{min:110,max:180}},confidence:{textMatch:35,audioMatch:45,contextMatch:20}},concern:{textMarkers:["worried","concerned","not sure about","wondering if","hope this works","fingers crossed","bit nervous","slightly worried","hope for the best","keeping an eye on","need to be careful","anxious","uncertain","doubt","questionable","risky","unsure","hesitant","cautious"],contextualModifiers:{riskContext:["risk","danger","problem","issue","failure","trouble"],uncertaintyMarkers:["maybe","perhaps","possibly","might","could","not sure"]},audioThresholds:{hesitation:!0,pitchVariance:{min:10,max:40},energy:{min:30,max:60}},confidence:{textMatch:35,audioMatch:40,contextMatch:30}},happiness:{textMarkers:["happy","joy","joyful","cheerful","delighted","pleased","content","satisfied","glad","wonderful feeling","feeling great","in a good mood","positive","upbeat","optimistic","good vibes","blessed","grateful"],contextualModifiers:{positiveContext:["success","win","achievement","good news","celebration"],socialContext:["friends","family","together","shared","community"]},audioThresholds:{pitchVariance:{min:20,max:60},energy:{min:50,max:90},voiceQuality:{min:60,max:100}},confidence:{textMatch:35,audioMatch:45,contextMatch:20}},anger:{textMarkers:["angry","mad","furious","enraged","livid","outraged","pissed off","hate","disgusted","can't stand","makes me sick","absolutely livid","beyond angry","seeing red","fuming","rage","fury","wrath","fed up","sick and tired","had enough","boiling mad","steaming","blood boiling","lost my temper","driving me crazy","pissed"],complexPatterns:[{pattern:/absolutely.*furious.*about/i,weight:3,description:"intense anger expression"},{pattern:/sick.*tired.*of/i,weight:2.5,description:"accumulated frustration"},{pattern:/had.*enough.*of/i,weight:2.8,description:"anger threshold exceeded"},{pattern:/makes.*me.*so.*angry/i,weight:2.4,description:"causal anger statement"},{pattern:/cant.*stand.*anymore/i,weight:2.6,description:"tolerance limit reached"},{pattern:/driving.*me.*insane/i,weight:2.3,description:"anger building up"},{pattern:/boiling.*with.*rage/i,weight:3.2,description:"extreme anger metaphor"}],contextualModifiers:{intensityContext:["extremely","absolutely","completely","totally","beyond","utterly"],targetContext:["at them","at you","at this","at everyone","with him","with her"],escalationContext:["getting worse","building up","losing control","breaking point"],expressionContext:["shouting","yelling","screaming","exploding","lashing out"]},audioThresholds:{tension:{min:60,max:100},volumeSpikes:!0,articulationHard:!0,breathSupport:{min:20,max:60}},confidence:{textMatch:50,audioMatch:60,contextMatch:30,complexPatternMatch:65}},sadness:{textMarkers:["sad","depressed","down","blue","melancholy","sorrowful","grief","heartbroken","disappointed","let down","feeling low","bummed out","devastated","crushed","broken hearted","tearful","miserable"],contextualModifiers:{lossContext:["lost","gone","ended","over","finished","no more"],emotionalContext:["crying","tears","weeping","sobbing"]},audioThresholds:{energy:{min:10,max:40},pitchVariance:{min:5,max:25},voiceQuality:{min:20,max:60}},confidence:{textMatch:40,audioMatch:50,contextMatch:30}},confidence:{textMarkers:["confident","sure","certain","positive","absolutely","definitely","no doubt","guaranteed","without question","convinced","assured","know for sure","completely certain","have no doubt","trust me"],contextualModifiers:{assertionContext:["will","going to","definitely will","for sure"],competenceContext:["experienced","expert","skilled","capable"]},audioThresholds:{energy:{min:60,max:90},clarity:{min:70,max:100},voiceQuality:{min:70,max:100}},confidence:{textMatch:35,audioMatch:45,contextMatch:20}}},this.emotionStream=[],this.currentEmotionState={detected:"neutral",confidence:0,breakdown:{},audioEvidence:{},textEvidence:{},timestamp:null},this.emotionAnalytics={sessionStart:Date.now(),totalAnalyses:0,emotionCounts:{},averageConfidence:0,emotionTransitions:[],dominantEmotions:[],emotionTrends:{last5Minutes:[],last30Minutes:[],sessionOverall:[]}},this.confidenceCalibration={thresholds:{high:70,medium:40,low:5},adjustmentFactors:{},userFeedback:[]},this.emotionHistory=[],this.maxHistoryLength=100}async initialize(){try{return await this.nuanceAnalyzer.initialize()?(this.isInitialized=!0,this.startAnalyticsTicker(),console.log(" Advanced Emotion Detection Engine V4 initialized"),!0):!1}catch(e){return console.error(" Failed to initialize emotion detection V4:",e),!1}}startAnalyticsTicker(){this.analyticsTicker=setInterval(()=>{this.updateEmotionTrends(),this.calculateEmotionInsights()},3e4)}async analyzeCurrentEmotion(e=""){try{const r=this.nuanceAnalyzer.getCurrentAnalysisSummary();if(!e||!e.trim())return this.createEmptyResult();console.log(" Starting BERT-enhanced emotion analysis for:",e),console.log(" Audio analysis status:",(r==null?void 0:r.status)||"unknown");let n=null;try{console.log(" Running BERT emotion analysis..."),n=await this.bertEnhancer.analyzeEmotionWithBERT(e),console.log(" BERT analysis completed:",n)}catch(f){console.warn(" BERT analysis failed, using fallback methods:",f)}const i={};for(const[f,_]of Object.entries(this.emotionPatterns))try{const N=this.calculateEnhancedEmotionScore(f,_,r,e);i[f]=this.enhanceScoreWithBERT(N,n,f),i[f].totalScore>1&&console.log(` ${f}: ${i[f].totalScore} points`,{traditional:N.totalScore,bert:i[f].bertBoost||0,final:i[f].totalScore})}catch(N){console.warn(`Error calculating score for ${f}:`,N),i[f]=this.createEmptyScore()}console.log(" All emotion scores:",Object.entries(i).map(([f,_])=>`${f}: ${_.totalScore}`).join(", "));const a=this.findTopEmotionWithCalibration(i);console.log(" Top emotion after BERT calibration:",a);const s={detected:a.emotion,confidence:a.score,breakdown:i,audioEvidence:r,textEvidence:this.analyzeTextEvidence(e),timestamp:Date.now(),emotionStrength:this.calculateEmotionStrength(a),secondaryEmotions:this.findSecondaryEmotions(i,a.emotion),contextualFactors:this.analyzeContextualFactors(e),trend:this.calculateEmotionTrend(a.emotion),insights:this.generateEmotionInsights(a,i),bertEnhanced:!!n,bertAnalysis:n,bertConfidence:(n==null?void 0:n.confidence)||0};return this.updateEmotionTracking(s),this.updateAnalytics(s),s}catch(r){return console.error(" Critical error in emotion analysis:",r),this.createEmptyResult()}}enhanceScoreWithBERT(e,r,n){if(!r||!r.emotions)return e;const i={...e},a=r.emotions[n];if(a&&a>.1){const s=a*100*.6;i.bertScore=a*100,i.bertBoost=s,i.totalScore=e.totalScore*.4+s*.6,r.confidence>.7&&(i.confidence=Math.min(100,i.confidence+r.confidence*20)),console.log(` BERT enhancement for ${n}: ${e.totalScore}  ${i.totalScore}`)}else r.confidence>.8&&(i.totalScore*=.9,i.bertPenalty=-10);return i}analyzeCurrentEmotionFallback(e=""){try{const r=this.nuanceAnalyzer.getCurrentAnalysisSummary();if(!e||!e.trim())return this.createEmptyResult();console.log(" Starting emotion analysis for:",e),console.log(" Audio analysis status:",(r==null?void 0:r.status)||"unknown");const n={};for(const[s,f]of Object.entries(this.emotionPatterns))try{n[s]=this.calculateEnhancedEmotionScore(s,f,r,e),n[s].totalScore>1&&console.log(` ${s}: ${n[s].totalScore} points`,{text:n[s].textScore,audio:n[s].audioScore,context:n[s].contextScore,bonus:n[s].contextualBonus})}catch(_){console.warn(`Error calculating score for ${s}:`,_),n[s]=this.createEmptyScore()}console.log(" All emotion scores:",Object.entries(n).map(([s,f])=>`${s}: ${f.totalScore}`).join(", "));const i=this.findTopEmotionWithCalibration(n);console.log(" Top emotion after calibration:",i);const a={detected:i.emotion,confidence:i.score,breakdown:n,audioEvidence:r,textEvidence:this.analyzeTextEvidence(e),timestamp:Date.now(),emotionStrength:this.calculateEmotionStrength(i),secondaryEmotions:this.findSecondaryEmotions(n,i.emotion),contextualFactors:this.analyzeContextualFactors(e),trend:this.calculateEmotionTrend(i.emotion),insights:this.generateEmotionInsights(i,n)};return this.updateEmotionTracking(a),this.updateAnalytics(a),a}catch(r){return console.error("Error in emotion analysis V4:",r),this.createErrorResult(r)}}calculateEnhancedEmotionScore(e,r,n,i){let a=0,s=0,f=0,_=0;if(i&&r.textMarkers){const me=i.toLowerCase(),fe=r.textMarkers.filter(Te=>me.includes(Te.toLowerCase()));if(fe.length>0){if(a=r.confidence.textMatch,console.log(` ${e} found matches:`,fe),fe.length>1){const Ve=Math.min(2.5,1+(fe.length-1)*.4);a=Math.min(r.confidence.textMatch*Ve,r.confidence.textMatch*2.5)}fe.reduce((Ve,Ue)=>Ve+Ue.length,0)/fe.length>8&&(a*=1.2),r.contextualModifiers&&(_=this.calculateContextualBonus(r.contextualModifiers,me));const qe=fe.filter(Ve=>Ve.length>5);qe.length>0&&(a+=qe.length*5),console.log(` ${e} scoring: base=${r.confidence.textMatch}, final=${a}, bonus=${_}`)}}n&&n.current&&r.audioThresholds?s=this.calculateAudioScore(r.audioThresholds,n):(s=0,console.log(` No audio data for ${e}, using text-only analysis`)),f=this.calculateEnhancedContextScore(e,i);let N=0;r.complexPatterns&&i&&(N=this.analyzeComplexPatterns(r.complexPatterns,i),console.log(` ${e} complex pattern score: ${N}`));const I=a+s+f+_+N;return{totalScore:Math.round(I),textScore:Math.round(a),audioScore:Math.round(s),contextScore:Math.round(f),contextualBonus:Math.round(_),complexPatternScore:Math.round(N),breakdown:{textMatches:this.getTextMatches(i,r.textMarkers),audioEvidence:this.getAudioEvidence(r.audioThresholds,n),contextFactors:this.getContextFactors(e,i),contextualModifiers:this.getContextualModifiers(r.contextualModifiers,i),complexPatterns:this.getComplexPatternMatches(r.complexPatterns,i)}}}analyzeComplexPatterns(e,r){if(!e||!r)return 0;let n=0;const i=r.toLowerCase();return e.forEach(a=>{const{pattern:s,weight:f,description:_}=a;try{if(s.test(i)){const N=f*10;n+=N,console.log(` Complex pattern matched: "${_}" - score: ${N}`);const I=s.source;I.includes(".*")&&(n+=f*2),I.length>15&&(n+=f*1.5)}}catch(N){console.warn(`Error testing complex pattern: ${s}`,N)}}),Math.min(n,40)}getComplexPatternMatches(e,r){if(!e||!r)return[];const n=[],i=r.toLowerCase();return e.forEach(a=>{const{pattern:s,description:f,weight:_}=a;try{s.test(i)&&n.push({description:f,pattern:s.source,weight:_,matched:!0})}catch(N){console.warn(`Error in pattern matching: ${s}`,N)}}),n}calculateContextualBonus(e,r){let n=0;return Object.entries(e).forEach(([i,a])=>{const s=a.filter(f=>f.includes(" ")?r.includes(f.toLowerCase()):new RegExp(`\\b${f.toLowerCase()}\\b`,"i").test(r));if(s.length>0){const _={negativeContext:22,positiveContext:22,achievementContext:18,repetitionContext:25,timeIndicators:15,intensifiers:12,socialIndicators:10,professionalContext:15,hesitationMarkers:18,diplomaticPhrases:12,riskContext:18,uncertaintyMarkers:15,lossContext:20,emotionalContext:17,assertionContext:15,competenceContext:12,emotionalClues:20,intensityContext:18,targetContext:12,escalationContext:16,expressionContext:14}[i]||10;let N=s.length*_;s.length>1&&(N+=Math.min(s.length-1,3)*(_*.5)),s.reduce((fe,Te)=>fe+Te.length,0)/s.length>8&&(N*=1.15);const me=s.filter(fe=>r.indexOf(fe.toLowerCase())<30);me.length>0&&(N+=me.length*3),n+=N,console.log(` Context bonus for ${i}: ${N} (${s.length} matches: ${s.slice(0,3).join(", ")})`)}}),Math.min(n,50)}findTopEmotionWithCalibration(e){const n=Object.entries(e).sort((_,N)=>N[1].totalScore-_[1].totalScore),i=n[0],a=n[1];let s=i[1].totalScore;a&&i[1].totalScore-a[1].totalScore<10&&(s*=.8);const f=this.confidenceCalibration.thresholds.low;return s<f?{emotion:"neutral",score:5,details:{}}:{emotion:i[0],score:s,details:i[1]}}calculateEmotionStrength(e){const r=e.score;return r>=80?"very-strong":r>=60?"strong":r>=40?"moderate":r>=20?"mild":"weak"}findSecondaryEmotions(e,r){return Object.entries(e).filter(([i,a])=>i!==r&&a.totalScore>=25).sort((i,a)=>a[1].totalScore-i[1].totalScore).slice(0,2).map(([i,a])=>({emotion:i,confidence:a.totalScore,strength:this.calculateEmotionStrength({score:a.totalScore})}))}analyzeContextualFactors(e){return{length:e.length,complexity:this.calculateTextComplexity(e),sentiment:this.calculateBasicSentiment(e),urgency:this.detectUrgencyMarkers(e),formality:this.detectFormalityLevel(e),temporalContext:this.detectTemporalContext(e)}}calculateTextComplexity(e){const r=e.split(/\s+/),n=r.reduce((s,f)=>s+f.length,0)/r.length,i=e.split(/[.!?]+/).length-1,a=r.length/Math.max(i,1);return{avgWordLength:Math.round(n*10)/10,avgSentenceLength:Math.round(a*10)/10,wordCount:r.length,sentenceCount:i}}calculateBasicSentiment(e){const r=["good","great","excellent","amazing","wonderful","fantastic","awesome","love","like","happy"],n=["bad","terrible","awful","horrible","hate","dislike","sad","angry","frustrated","annoyed"],i=e.toLowerCase(),a=r.filter(f=>i.includes(f)).length,s=n.filter(f=>i.includes(f)).length;return{positive:a,negative:s,overall:a-s,polarity:a+s>0?(a-s)/(a+s):0}}detectUrgencyMarkers(e){const r=["urgent","asap","immediately","now","quickly","rush","deadline","emergency"],n=e.toLowerCase();return r.filter(i=>n.includes(i))}detectFormalityLevel(e){const r=["please","thank you","sir","madam","appreciate","kindly","respectfully"],n=["yeah","nah","cool","awesome","stuff","things","guys"],i=e.toLowerCase(),a=r.filter(f=>i.includes(f)).length,s=n.filter(f=>i.includes(f)).length;return{formal:a,informal:s,level:a>s?"formal":s>a?"informal":"neutral"}}detectTemporalContext(e){const r=["was","were","had","did","yesterday","before","ago"],n=["is","are","am","now","currently","today"],i=["will","going to","tomorrow","next","soon","later"],a=e.toLowerCase();return{past:r.filter(s=>a.includes(s)).length,present:n.filter(s=>a.includes(s)).length,future:i.filter(s=>a.includes(s)).length}}calculateEmotionTrend(e){const r=this.emotionHistory.slice(-10);if(r.length<3)return{direction:"stable",confidence:"low"};const n={};return r.forEach(a=>{n[a.detected]=(n[a.detected]||0)+1}),{direction:"stable",confidence:"medium",pattern:this.detectEmotionPattern(r),consistency:this.calculateEmotionConsistency(r)}}generateEmotionInsights(e,r){const n=[];e.score>80?n.push("High confidence detection - strong emotional indicators present"):e.score<30&&n.push("Low confidence - emotion may be subtle or mixed");const i=this.detectRecentEmotionPattern();i&&n.push(i);const a=this.generateContextInsight(e.emotion);return a&&n.push(a),n}updateEmotionTracking(e){this.emotionStream.push({emotion:e.detected,confidence:e.confidence,timestamp:e.timestamp}),this.emotionStream.length>50&&(this.emotionStream=this.emotionStream.slice(-50)),this.emotionHistory.push(e),this.emotionHistory.length>this.maxHistoryLength&&(this.emotionHistory=this.emotionHistory.slice(-this.maxHistoryLength)),this.currentEmotionState=e}updateAnalytics(e){this.emotionAnalytics.totalAnalyses++;const r=e.detected;this.emotionAnalytics.emotionCounts[r]=(this.emotionAnalytics.emotionCounts[r]||0)+1;const n=this.emotionHistory.reduce((i,a)=>i+a.confidence,0);if(this.emotionAnalytics.averageConfidence=n/this.emotionHistory.length,this.emotionHistory.length>1){const i=this.emotionHistory[this.emotionHistory.length-2].detected,a=e.detected;i!==a&&this.emotionAnalytics.emotionTransitions.push({from:i,to:a,timestamp:e.timestamp})}}getEmotionAnalytics(){return{...this.emotionAnalytics,currentState:this.currentEmotionState,recentTrend:this.calculateEmotionTrend(this.currentEmotionState.detected),emotionDistribution:this.calculateEmotionDistribution(),averageSessionConfidence:this.emotionAnalytics.averageConfidence,sessionDuration:Date.now()-this.emotionAnalytics.sessionStart,insights:this.generateSessionInsights()}}calculateEmotionDistribution(){const e=this.emotionAnalytics.totalAnalyses,r={};return Object.entries(this.emotionAnalytics.emotionCounts).forEach(([n,i])=>{r[n]={count:i,percentage:Math.round(i/e*100)}}),r}generateSessionInsights(){const e=[],r=this.calculateEmotionDistribution(),n=this.emotionAnalytics.totalAnalyses;if(n>10){const i=Object.entries(r).sort((f,_)=>_[1].count-f[1].count)[0];i&&i[1].percentage>40&&e.push(`${i[0]} is the dominant emotion (${i[1].percentage}% of session)`);const s=this.emotionAnalytics.emotionTransitions.length/n;s>.7?e.push("High emotional volatility detected - frequent emotion changes"):s<.2&&e.push("Stable emotional state - consistent emotion throughout session")}return e}createEmptyResult(){return{detected:"no_text",confidence:0,breakdown:{no_text:{textScore:0,audioScore:0,contextScore:0}},timestamp:Date.now()}}createEmptyScore(){return{totalScore:0,textScore:0,audioScore:0,contextScore:0,breakdown:{textMatches:[],audioEvidence:null,contextFactors:[]}}}createErrorResult(e){return{detected:"neutral",confidence:0,breakdown:{neutral:{textScore:0,audioScore:0,contextScore:0}},error:e.message,timestamp:Date.now()}}dispose(){this.stopDetection(),this.analyticsTicker&&clearInterval(this.analyticsTicker),this.nuanceAnalyzer.dispose(),this.isInitialized=!1,console.log(" Advanced Emotion Detection Engine V4 disposed")}calculateAudioScore(e,r){if(!r||!r.current)return 0;let n=0;return r.current,r.summary,n}calculateEnhancedContextScore(e,r){let n=this.calculateContextScore(e,r);if(r){const i=r.toLowerCase();(i.includes("always")||i.includes("never"))&&(n+=5),(i.includes("?")||i.includes("why")||i.includes("how"))&&(n+=3)}return n}calculateContextScore(e,r){let n=0;if(!r)return n;const i=r.toLowerCase(),a={sarcasm:["problem","issue","complaint","wrong","broken","failed"],genuineEnthusiasm:["success","achievement","good news","celebration","win"],frustration:["delay","wait","problem","error","mistake","again"],politeLie:["meeting","presentation","required","mandatory","professional"],sadness:["loss","end","over","goodbye","failed","disappointed"],confidence:["plan","strategy","will","going to","ready","prepared"],excitement:["event","party","celebration","trip","vacation"],concern:["worry","risk","danger","problem","issue"]};if(a[e]){const s=a[e].filter(f=>i.includes(f));n=Math.min(20,s.length*5)}return n}getTextMatches(e,r){if(!e||!r)return[];const n=e.toLowerCase();return r.filter(i=>n.includes(i.toLowerCase()))}getAudioEvidence(e,r){return!e||!r||!r.current?{}:{hasAudioData:!!r.current,meetsThresholds:this.calculateAudioScore(e,r)>0,audioProperties:r.current||{}}}getContextFactors(e,r){return r?{textLength:r.length,wordCount:r.split(/\s+/).length,hasEmotionalMarkers:this.detectEmotionalMarkers(r),sentimentIndicators:this.detectSentimentIndicators(r)}:{}}detectEmotionalMarkers(e){return["very","extremely","absolutely","completely","totally","really","so","quite"].some(n=>e.toLowerCase().includes(n))}detectSentimentIndicators(e){const r=["good","great","amazing","wonderful","excellent","fantastic","awesome"],n=["bad","terrible","awful","horrible","disgusting","hate","angry"],i=e.toLowerCase(),a=r.filter(f=>i.includes(f)).length,s=n.filter(f=>i.includes(f)).length;return{positive:a,negative:s}}getContextualModifiers(e,r){if(!e||!r)return{};const n=r.toLowerCase(),i={};return Object.entries(e).forEach(([a,s])=>{const f=s.filter(_=>n.includes(_.toLowerCase()));f.length>0&&(i[a]=f)}),i}analyzeTextEvidence(e){return e?{length:e.length,wordCount:e.split(" ").length,hasPositiveWords:/\b(good|great|love|amazing|wonderful|excellent|fantastic)\b/i.test(e),hasNegativeWords:/\b(bad|terrible|awful|hate|horrible|worst|problem)\b/i.test(e),hasHesitation:/\b(um|uh|well|like|you know|sort of|kind of)\b/i.test(e),hasIntensifiers:/\b(very|really|extremely|incredibly|absolutely|totally)\b/i.test(e)}:{}}startDetection(){return this.isInitialized?(this.nuanceAnalyzer.startAnalysis(),console.log(" Started advanced emotion detection V4"),!0):(console.error(" Emotion detection not initialized"),!1)}stopDetection(){this.nuanceAnalyzer.stopAnalysis(),console.log(" Stopped advanced emotion detection V4")}getCurrentEmotion(){return this.currentEmotionState}detectEmotionPattern(e){if(e.length<5)return null;const r=e.map(i=>i.detected);return[...new Set(r)].length===1?"consistent":r.slice(-3).every(i=>i===r[r.length-1])?"stabilizing":"variable"}calculateEmotionConsistency(e){if(e.length<2)return 100;const r=e.map(i=>i.detected),n=[...new Set(r)];return Math.round((1-(n.length-1)/(r.length-1))*100)}detectRecentEmotionPattern(){const e=this.emotionHistory.slice(-5);if(e.length<3)return null;const r=e.map(a=>a.detected),n=r[r.length-1];return r.filter(a=>a===n).length>=3?`Consistent ${n} pattern detected`:null}generateContextInsight(e){return{sarcasm:"Consider if this reflects underlying frustration or communication style",frustration:"May indicate system issues or unmet expectations",enthusiasm:"Positive engagement - good opportunity for reinforcement",concern:"May need additional support or reassurance",excitement:"High engagement level - good momentum for action"}[e]||null}updateEmotionTrends(){const e=Date.now(),r=5*60*1e3,n=30*60*1e3;this.emotionAnalytics.emotionTrends.last5Minutes=this.emotionHistory.filter(i=>e-i.timestamp<r).map(i=>({emotion:i.detected,confidence:i.confidence,timestamp:i.timestamp})),this.emotionAnalytics.emotionTrends.last30Minutes=this.emotionHistory.filter(i=>e-i.timestamp<n).map(i=>({emotion:i.detected,confidence:i.confidence,timestamp:i.timestamp})),this.emotionAnalytics.emotionTrends.sessionOverall=this.emotionHistory.map(i=>({emotion:i.detected,confidence:i.confidence,timestamp:i.timestamp}))}calculateEmotionInsights(){this.getEmotionAnalytics(),this.emotionAnalytics.calculatedInsights={dominantEmotion:this.findDominantEmotion(),emotionalVolatility:this.calculateEmotionalVolatility(),confidenceTrend:this.calculateConfidenceTrend(),sessionSummary:this.generateSessionSummary()}}findDominantEmotion(){const e=this.emotionAnalytics.emotionCounts;return Object.entries(e).sort((r,n)=>n[1]-r[1])[0]}calculateEmotionalVolatility(){const e=this.emotionAnalytics.emotionTransitions.length,r=this.emotionAnalytics.totalAnalyses;return r>0?e/r:0}calculateConfidenceTrend(){const e=this.emotionHistory.slice(-10);if(e.length<5)return"insufficient-data";const r=e.slice(0,Math.floor(e.length/2)),n=e.slice(Math.floor(e.length/2)),i=r.reduce((s,f)=>s+f.confidence,0)/r.length,a=n.reduce((s,f)=>s+f.confidence,0)/n.length;return a>i+10?"increasing":a<i-10?"decreasing":"stable"}generateSessionSummary(){const e=Date.now()-this.emotionAnalytics.sessionStart,r=this.emotionAnalytics.totalAnalyses,n=this.emotionAnalytics.averageConfidence;return{duration:Math.round(e/6e4),totalAnalyses:r,averageConfidence:Math.round(n),analysisFrequency:r>0?Math.round(e/r/1e3):0}}}const W6=({emotionEngine:t,isVisible:e})=>{var me,fe,Te,qe,Ve,Ue,Ee;const[r,n]=Jt.useState(null),[i,a]=Jt.useState("session"),[s,f]=Jt.useState(5e3);if(Jt.useEffect(()=>{if(!t||!e)return;const Fe=()=>{try{const tt=t.getEmotionAnalytics();n(tt)}catch(tt){console.error("Error getting emotion analytics:",tt)}};Fe();const He=setInterval(Fe,s);return()=>clearInterval(He)},[t,e,s]),!e||!r)return null;const _=Fe=>{const He=Math.floor(Fe/6e4),tt=Math.floor(Fe%6e4/1e3);return`${He}m ${tt}s`},N=Fe=>({sarcasm:"#ff6b6b",frustration:"#ff8e8e",enthusiasm:"#51cf66",excitement:"#74c0fc",confidence:"#69db7c",concern:"#ffd43b",politeLie:"#9775fa",sadness:"#748ffc",neutral:"#868e96"})[Fe]||"#868e96",I=Fe=>({"very-strong":"",strong:"",moderate:"",mild:"",weak:""})[Fe]||"";return l.jsxs("div",{className:"emotion-analytics-dashboard",children:[l.jsxs("div",{className:"analytics-header",children:[l.jsx("h3",{children:" Emotion Analytics Dashboard"}),l.jsxs("div",{className:"analytics-controls",children:[l.jsxs("select",{value:i,onChange:Fe=>a(Fe.target.value),className:"timeframe-selector",children:[l.jsx("option",{value:"session",children:"Full Session"}),l.jsx("option",{value:"30min",children:"Last 30 Minutes"}),l.jsx("option",{value:"5min",children:"Last 5 Minutes"})]}),l.jsxs("select",{value:s,onChange:Fe=>f(Number(Fe.target.value)),className:"refresh-selector",children:[l.jsx("option",{value:1e3,children:"1s refresh"}),l.jsx("option",{value:5e3,children:"5s refresh"}),l.jsx("option",{value:1e4,children:"10s refresh"})]})]})]}),l.jsxs("div",{className:"analytics-grid",children:[l.jsxs("div",{className:"analytics-card current-state",children:[l.jsx("h4",{children:" Current State"}),l.jsxs("div",{className:"current-emotion",children:[l.jsx("span",{className:"emotion-badge",style:{backgroundColor:N(r.currentState.detected)},children:r.currentState.detected}),l.jsxs("div",{className:"confidence-info",children:[l.jsxs("span",{className:"confidence-score",children:[Math.round(r.currentState.confidence),"%"]}),l.jsx("div",{className:"confidence-bar",children:l.jsx("div",{className:"confidence-fill",style:{width:`${r.currentState.confidence}%`,backgroundColor:N(r.currentState.detected)}})})]})]}),r.currentState.emotionStrength&&l.jsxs("div",{className:"emotion-strength",children:[l.jsx("span",{children:"Intensity: "}),l.jsx("span",{className:"strength-indicator",children:I(r.currentState.emotionStrength)}),l.jsx("span",{className:"strength-label",children:r.currentState.emotionStrength})]}),r.currentState.secondaryEmotions&&r.currentState.secondaryEmotions.length>0&&l.jsxs("div",{className:"secondary-emotions",children:[l.jsx("h5",{children:"Secondary Emotions:"}),r.currentState.secondaryEmotions.map((Fe,He)=>l.jsxs("div",{className:"secondary-emotion",children:[l.jsx("span",{className:"emotion-dot",style:{backgroundColor:N(Fe.emotion)}}),Fe.emotion," (",Fe.confidence,"%)"]},He))]})]}),l.jsxs("div",{className:"analytics-card session-stats",children:[l.jsx("h4",{children:" Session Statistics"}),l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Duration:"}),l.jsx("span",{className:"stat-value",children:_(r.sessionDuration)})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Analyses:"}),l.jsx("span",{className:"stat-value",children:r.totalAnalyses})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Avg Confidence:"}),l.jsxs("span",{className:"stat-value",children:[Math.round(r.averageSessionConfidence),"%"]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Transitions:"}),l.jsx("span",{className:"stat-value",children:((me=r.emotionTransitions)==null?void 0:me.length)||0})]})]}),((fe=r.calculatedInsights)==null?void 0:fe.sessionSummary)&&l.jsx("div",{className:"session-summary",children:l.jsxs("p",{children:["Analysis every ",r.calculatedInsights.sessionSummary.analysisFrequency,"s"]})})]}),l.jsxs("div",{className:"analytics-card emotion-distribution",children:[l.jsx("h4",{children:" Emotion Distribution"}),l.jsx("div",{className:"distribution-chart",children:Object.entries(r.emotionDistribution||{}).map(([Fe,He])=>l.jsxs("div",{className:"distribution-item",children:[l.jsxs("div",{className:"emotion-label",children:[l.jsx("span",{className:"emotion-color",style:{backgroundColor:N(Fe)}}),Fe]}),l.jsx("div",{className:"percentage-bar",children:l.jsx("div",{className:"percentage-fill",style:{width:`${He.percentage}%`,backgroundColor:N(Fe)}})}),l.jsxs("span",{className:"percentage-text",children:[He.percentage,"%"]})]},Fe))})]}),l.jsxs("div",{className:"analytics-card trends",children:[l.jsx("h4",{children:" Trends & Patterns"}),r.recentTrend&&l.jsxs("div",{className:"trend-item",children:[l.jsx("span",{className:"trend-label",children:"Pattern:"}),l.jsx("span",{className:"trend-value",children:r.recentTrend.pattern||"Analyzing..."})]}),((Te=r.calculatedInsights)==null?void 0:Te.emotionalVolatility)!==void 0&&l.jsxs("div",{className:"trend-item",children:[l.jsx("span",{className:"trend-label",children:"Volatility:"}),l.jsxs("span",{className:"trend-value",children:[(r.calculatedInsights.emotionalVolatility*100).toFixed(1),"%"]})]}),((qe=r.calculatedInsights)==null?void 0:qe.confidenceTrend)&&l.jsxs("div",{className:"trend-item",children:[l.jsx("span",{className:"trend-label",children:"Confidence Trend:"}),l.jsx("span",{className:`trend-value trend-${r.calculatedInsights.confidenceTrend}`,children:r.calculatedInsights.confidenceTrend})]}),((Ve=r.calculatedInsights)==null?void 0:Ve.dominantEmotion)&&l.jsxs("div",{className:"trend-item",children:[l.jsx("span",{className:"trend-label",children:"Dominant:"}),l.jsxs("span",{className:"emotion-badge small",style:{backgroundColor:N(r.calculatedInsights.dominantEmotion[0])},children:[r.calculatedInsights.dominantEmotion[0],"(",r.calculatedInsights.dominantEmotion[1],")"]})]})]}),l.jsxs("div",{className:"analytics-card insights",children:[l.jsx("h4",{children:" Insights"}),l.jsx("div",{className:"insights-list",children:r.insights&&r.insights.length>0?r.insights.map((Fe,He)=>l.jsxs("div",{className:"insight-item",children:[l.jsx("span",{className:"insight-icon",children:""}),l.jsx("span",{className:"insight-text",children:Fe})]},He)):l.jsx("div",{className:"no-insights",children:l.jsx("span",{children:"Continue analyzing to generate insights..."})})})]}),l.jsxs("div",{className:"analytics-card timeline",children:[l.jsx("h4",{children:" Recent Activity"}),l.jsx("div",{className:"timeline-container",children:((Ee=(Ue=r.emotionTrends)==null?void 0:Ue[i==="5min"?"last5Minutes":i==="30min"?"last30Minutes":"sessionOverall"])==null?void 0:Ee.slice(-10).map((Fe,He)=>l.jsxs("div",{className:"timeline-entry",children:[l.jsx("div",{className:"timeline-time",children:new Date(Fe.timestamp).toLocaleTimeString()}),l.jsxs("div",{className:"timeline-emotion",children:[l.jsx("span",{className:"emotion-dot",style:{backgroundColor:N(Fe.emotion)}}),Fe.emotion,l.jsxs("span",{className:"timeline-confidence",children:["(",Fe.confidence,"%)"]})]})]},He)))||l.jsx("div",{className:"no-timeline",children:l.jsx("span",{children:"No recent activity data"})})})]})]}),l.jsx("div",{className:"analytics-footer",children:l.jsxs("div",{className:"quick-actions",children:[l.jsx("button",{className:"action-btn",onClick:()=>{const Fe=t.getEmotionAnalytics();console.log("Full Analytics Data:",Fe)},children:" Export Data"}),l.jsx("button",{className:"action-btn",onClick:()=>{t.emotionAnalytics.emotionCounts={},t.emotionAnalytics.totalAnalyses=0,t.emotionHistory=[],t.emotionStream=[]},children:" Clear History"}),l.jsx("button",{className:"action-btn",onClick:()=>{const Fe=t.generateSessionSummary();alert(`Session Summary:
${JSON.stringify(Fe,null,2)}`)},children:" Session Report"})]})})]})},q6=()=>{const[t]=Jt.useState(()=>new H6),[e,r]=Jt.useState(!1),[n,i]=Jt.useState(null),[a,s]=Jt.useState(!1),[f,_]=Jt.useState(!1),[N,I]=Jt.useState(null),[me,fe]=Jt.useState(!1),[Te,qe]=Jt.useState([]),[Ve,Ue]=Jt.useState(!1),Ee={sarcasm:"Oh great, this is just fantastic! Another wonderful day where everything goes perfectly wrong.",enthusiasm:"This is absolutely amazing! I'm so excited about this breakthrough and the incredible results we've achieved!",frustration:"I'm so tired of these constant issues. This is ridiculous and I'm fed up with the same problems happening again and again.",confidence:"I'm absolutely certain this will work perfectly. We have a solid plan and I'm completely confident in our approach.",concern:"I'm a bit worried about this approach. I hope everything works out but I'm not entirely sure about the risks involved.",excitement:"I can't wait for this to happen! I'm so pumped and buzzing with excitement about what's coming next!",happiness:"I'm feeling really happy today! Everything is going so well and I'm in such a great mood.",anger:"I'm absolutely furious about this! This makes me so angry I can't even think straight.",sadness:"I'm feeling really down and sad about this situation. It's just so disappointing and heartbreaking.",subtleSarcasm:"Well, that worked out perfectly, didn't it?",mildFrustration:"This is getting a bit annoying now.",genuineExcitement:"I can hardly contain my excitement! This is going to be incredible!",deepConcern:"I'm genuinely worried about what might happen here.",strongConfidence:"I have absolutely no doubt this will succeed perfectly."};Jt.useEffect(()=>((async()=>{try{console.log(" Initializing Emotion Detection Engine V4..."),await t.initialize()?(r(!0),t.startDetection(),console.log(" Emotion Detection Engine V4 ready!")):console.error(" Failed to initialize emotion engine")}catch(ct){console.error("Error initializing emotion engine:",ct)}})(),()=>{N&&clearInterval(N),t.dispose()}),[]),Jt.useEffect(()=>{if(f&&e){const et=setInterval(()=>{const ct=Object.keys(Ee),xt=ct[Math.floor(Math.random()*ct.length)];Fe(Ee[xt])},3e3);return I(et),()=>clearInterval(et)}else N&&(clearInterval(N),I(null))},[f,e]);const Fe=async et=>{if(!e||!(et!=null&&et.trim())){console.warn("Engine not ready or no text provided");return}try{console.log(" Analyzing emotion for:",et),console.log(' Direct pattern test for "furious":');const ct=t.emotionPatterns;if(ct&&ct.anger){const Pt=ct.anger.textMarkers;console.log(" Anger markers:",Pt.slice(0,10)),console.log(' Contains "furious"?',Pt.includes("furious")),console.log(" Text includes furious?",et.toLowerCase().includes("furious"))}else console.log(" No anger patterns found!");const xt=await t.analyzeCurrentEmotion(et);return me?(console.log(" Detailed Analysis Result:",{input:et,detected:xt.detected,confidence:Math.round(xt.confidence),strength:xt.emotionStrength,secondary:xt.secondaryEmotions,breakdown:xt.breakdown,textEvidence:xt.textEvidence,insights:xt.insights,timestamp:new Date(xt.timestamp).toLocaleTimeString()}),console.log(" Individual Emotion Scores:"),Object.entries(xt.breakdown||{}).forEach(([Pt,ir])=>{console.log(`  ${Pt}: ${ir.totalScore} (text: ${ir.textScore}, audio: ${ir.audioScore}, context: ${ir.contextScore})`)})):console.log(" Emotion Analysis Result:",{detected:xt.detected,confidence:Math.round(xt.confidence),strength:xt.emotionStrength,secondary:xt.secondaryEmotions,insights:xt.insights}),i(xt),qe(Pt=>[...Pt.slice(-9),{text:et.substring(0,50)+(et.length>50?"...":""),result:xt,timestamp:Date.now()}]),xt}catch(ct){return console.error("Error analyzing emotion:",ct),null}},He=et=>{const ct=Ee[et];ct&&Fe(ct)},tt=()=>{if(!e)return null;try{const et=t.getEmotionAnalytics();return console.log(" Current Analytics:",et),et}catch(et){return console.error("Error getting analytics:",et),null}};return l.jsxs("div",{className:"emotion-detection-v4-demo",children:[l.jsxs("div",{className:"emotion-controls-header",children:[l.jsx("h2",{children:" Emotion Detection Engine V4 - Advanced Analytics"}),l.jsx("div",{className:"engine-status",children:l.jsx("span",{className:`status-indicator ${e?"active":"inactive"}`,children:e?" Engine Active":" Initializing..."})})]}),l.jsxs("div",{className:"emotion-control-panel",children:[l.jsxs("div",{className:"control-section",children:[l.jsx("h3",{children:" Test Controls"}),l.jsx("div",{className:"test-buttons",children:Object.keys(Ee).map(et=>l.jsxs("button",{className:`test-btn test-${et}`,onClick:()=>He(et),disabled:!e,children:["Test ",et.charAt(0).toUpperCase()+et.slice(1)]},et))})]}),l.jsxs("div",{className:"control-section",children:[l.jsx("h3",{children:" Auto Analysis"}),l.jsx("div",{className:"auto-controls",children:l.jsxs("label",{className:"auto-toggle",children:[l.jsx("input",{type:"checkbox",checked:f,onChange:et=>_(et.target.checked),disabled:!e}),l.jsx("span",{children:"Enable Auto Analysis (every 3s)"})]})})]}),l.jsxs("div",{className:"control-section",children:[l.jsx("h3",{children:" Debug Controls"}),l.jsxs("div",{className:"debug-controls",children:[l.jsxs("label",{className:"debug-toggle",children:[l.jsx("input",{type:"checkbox",checked:me,onChange:et=>fe(et.target.checked)}),l.jsx("span",{children:"Enable Debug Mode (detailed console logs)"})]}),l.jsx("button",{className:"clear-history-btn",onClick:()=>qe([]),disabled:Te.length===0,children:" Clear History"})]})]}),l.jsxs("div",{className:"control-section",children:[l.jsx("h3",{children:" Analytics"}),l.jsxs("div",{className:"analytics-controls",children:[l.jsx("button",{className:"analytics-btn",onClick:()=>s(!a),disabled:!e,children:a?" Hide Analytics":" Show Analytics"}),l.jsx("button",{className:"summary-btn",onClick:tt,disabled:!e,children:" Console Summary"}),l.jsx("button",{className:"test-suite-btn",onClick:()=>Ue(!Ve),disabled:!e,children:Ve?" Hide Test Suite":" Show Test Suite"})]})]})]}),n&&l.jsxs("div",{className:"current-emotion-display",children:[l.jsx("h3",{children:" Current Analysis"}),l.jsxs("div",{className:"emotion-result",children:[l.jsxs("div",{className:"primary-emotion",children:[l.jsx("span",{className:"emotion-label",children:"Primary:"}),l.jsx("span",{className:`emotion-badge ${n.detected}`,children:n.detected}),l.jsxs("span",{className:"confidence-score",children:[Math.round(n.confidence),"%"]}),n.emotionStrength&&l.jsxs("span",{className:"emotion-strength",children:["(",n.emotionStrength,")"]})]}),n.secondaryEmotions&&n.secondaryEmotions.length>0&&l.jsxs("div",{className:"secondary-emotions",children:[l.jsx("span",{className:"emotion-label",children:"Secondary:"}),n.secondaryEmotions.map((et,ct)=>l.jsxs("span",{className:`emotion-badge secondary ${et.emotion}`,children:[et.emotion," (",et.confidence,"%)"]},ct))]}),n.insights&&n.insights.length>0&&l.jsxs("div",{className:"emotion-insights",children:[l.jsx("span",{className:"emotion-label",children:"Insights:"}),l.jsx("ul",{className:"insights-list",children:n.insights.map((et,ct)=>l.jsx("li",{children:et},ct))})]}),l.jsxs("div",{className:"analysis-details",children:[l.jsx("span",{className:"emotion-label",children:"Analysis Time:"}),l.jsx("span",{className:"timestamp",children:new Date(n.timestamp).toLocaleTimeString()})]})]})]}),Te.length>0&&l.jsxs("div",{className:"analysis-history",children:[l.jsx("h3",{children:" Recent Analysis History"}),l.jsx("div",{className:"history-list",children:Te.slice().reverse().map((et,ct)=>l.jsxs("div",{className:"history-item",children:[l.jsxs("div",{className:"history-text",children:['"',et.text,'"']}),l.jsxs("div",{className:"history-result",children:[l.jsx("span",{className:`emotion-badge ${et.result.detected}`,children:et.result.detected}),l.jsxs("span",{className:"confidence-score",children:[Math.round(et.result.confidence),"%"]}),l.jsx("span",{className:"timestamp",children:new Date(et.timestamp).toLocaleTimeString()})]})]},ct))})]}),a&&l.jsx(W6,{emotionEngine:t,isVisible:a}),l.jsxs("div",{className:"custom-text-section",children:[l.jsx("h3",{children:" Custom Text Analysis"}),l.jsxs("div",{className:"text-input-area",children:[l.jsx("textarea",{className:"custom-text-input",placeholder:"Enter any text to analyze its emotional content...",rows:4,onKeyPress:et=>{et.key==="Enter"&&et.ctrlKey&&Fe(et.target.value)}}),l.jsx("button",{className:"analyze-btn",onClick:et=>{const ct=et.target.parentElement.querySelector("textarea");Fe(ct.value)},disabled:!e,children:" Analyze Text (Ctrl+Enter)"})]})]}),l.jsxs("div",{className:"integration-help",children:[l.jsx("h3",{children:" Integration Guide"}),l.jsxs("div",{className:"help-content",children:[l.jsx("h4",{children:"Step 4 Features Added:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Real-time Analytics:"})," Live emotion tracking and trends"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Enhanced Scoring:"})," Contextual modifiers and multi-dimensional analysis"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Secondary Emotions:"})," Detect multiple emotions simultaneously"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Emotion Strength:"})," Intensity measurement (weak to very-strong)"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Session Analytics:"})," Volatility, trends, and insights"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Advanced UI:"})," Comprehensive analytics dashboard"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Pattern Detection:"})," Emotion transitions and consistency"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Confidence Calibration:"})," Improved accuracy with learning"]})]}),l.jsx("h4",{children:"Next Steps for Step 5:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Machine Learning:"})," Train models on user feedback"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Personalization:"})," Adapt to individual speech patterns"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Multi-language:"})," Support for different languages"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Audio Integration:"})," Real-time voice analysis"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Mobile Support:"})," Cross-platform compatibility"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"AI Integration:"})," LLM-powered emotion understanding"]})]})]})]})]})},U6=t=>{var zn,Bi,rs,Sa,zr,sn,jr,Rn,Zn;if(!t||typeof t!="string")return{summary:"No transcript available for analysis",insights:[],sentiment:{score:0,label:"Neutral",confidence:0},statistics:{wordCount:0,sentenceCount:0,readingTime:0}};const e=t.split(/\s+/),r=2e3,n=[];for(let Pr=0;Pr<e.length;Pr+=r)n.push(e.slice(Pr,Pr+r).join(" "));const i=n.map(Pr=>{const wn=G6(Pr),Xn=e0(Pr),li=Fv(Pr),Ti=Cb(Pr),ca=Iv(Pr),va=jb(Pr),ni=Lb(Pr),ga=Eb(Pr),Hn=Db(Pr),ti=Rb(Pr),Ai=Pb(Pr),Ci=Nb(Pr),Hi=zb(Pr),ya=Mb(Pr),Kn=Pr.slice(0,300)+(Pr.length>300?"...":""),ka=Tb(Pr),Ma=R3(Pr),Wi=Ab(Pr),Ls=Array.isArray(Ma)?Ma.map((Pn,Ki)=>({type:"implicit",icon:"",title:`Insight ${Ki+1}`,description:Pn,severity:"info"})):[];return{statistics:wn,keywords:Xn,readabilityScore:li,topicDistribution:Ti,emotionAnalysis:ca,linguisticAnalysis:va,structuralAnalysis:ni,contentAnalysis:ga,namedEntities:Hn,questionAnalysis:ti,timeAnalysis:Ai,actionItems:Ci,themes:Hi,spamDetection:ya,summary:Kn,detailedSummary:ka,insights:Ls,sentiment:Wi}}),s=((Pr,wn,Xn)=>i.reduce((li,Ti)=>wn(li,Ti[Pr]),Xn))("statistics",(Pr,wn)=>({wordCount:(Pr.wordCount||0)+(wn.wordCount||0),sentenceCount:(Pr.sentenceCount||0)+(wn.sentenceCount||0),readingTime:(Pr.readingTime||0)+(wn.readingTime||0)}),{}),f={};i.forEach(Pr=>(Pr.keywords||[]).forEach(wn=>{f[wn.word]||(f[wn.word]=0),f[wn.word]+=wn.count}));const _=Object.entries(f).map(([Pr,wn])=>({word:Pr,count:wn})).sort((Pr,wn)=>wn.count-Pr.count).slice(0,20),N=i.reduce((Pr,wn)=>(Pr.score+=wn.sentiment.score||0,Pr.confidence+=wn.sentiment.confidence||0,Pr),{score:0,confidence:0});N.score=N.score/i.length,N.confidence=N.confidence/i.length,N.label=N.score>.2?"Positive":N.score<-.2?"Negative":"Neutral";const I=[].concat(...i.map(Pr=>Pr.topicDistribution||[])),me=[].concat(...i.map(Pr=>Pr.emotionAnalysis||[])),fe=((zn=i[0])==null?void 0:zn.linguisticAnalysis)||{},Te=((Bi=i[0])==null?void 0:Bi.structuralAnalysis)||{},qe=((rs=i[0])==null?void 0:rs.contentAnalysis)||{},Ve=((Sa=i[0])==null?void 0:Sa.namedEntities)||{},Ue=((zr=i[0])==null?void 0:zr.questionAnalysis)||{},Ee=((sn=i[0])==null?void 0:sn.timeAnalysis)||{},Fe=[].concat(...i.map(Pr=>Pr.actionItems||[])),He=[].concat(...i.map(Pr=>Pr.themes||[])),tt=i.reduce((Pr,wn)=>(Pr.spamScore+=wn.spamDetection.spamScore||0,Pr.spamPercent+=wn.spamDetection.spamPercent||0,Pr),{spamScore:0,spamPercent:0});tt.spamScore=tt.spamScore/i.length,tt.spamPercent=tt.spamPercent/i.length,tt.isSpam=tt.spamScore>8;const et=[].concat(...i.map(Pr=>Pr.insights||[]));let ct=((jr=i[0])==null?void 0:jr.summary)||"",xt=((Rn=i[0])==null?void 0:Rn.detailedSummary)||{};(!ct||ct.length<10)&&(ct=L3(t)),(!xt||Object.keys(xt).length===0)&&(xt=Tb(t));let Pt=et&&et.length>0?et:Y6(t);(!Pt||Pt.length===0)&&(Pt=[{type:"general",icon:"",title:"No Specific Insights",description:"No specific insights could be generated for this transcript. Please provide more detailed content for analysis.",severity:"info"}]);let ir=_&&_.length>0?_:e0(t),mr=I&&I.length>0?I:Cb(t),kr=me&&me.length>0?me:Iv(t),yr=Ue&&Ue.totalQuestions>0?Ue:Rb(t),vt=Ee&&Object.keys(Ee).length>0?Ee:Pb(t),gt=Fe&&Fe.length>0?Fe:Nb(t),It=He&&He.length>0?He:zb(t),ut=Ve&&Object.keys(Ve).length>0?Ve:Db(t),qt=qe&&Object.keys(qe).length>0?qe:Eb(t),Vt=fe&&Object.keys(fe).length>0?fe:jb(t),Ot=Te&&Object.keys(Te).length>0?Te:Lb(t),Ht=tt&&Object.keys(tt).length>0?tt:Mb(t),Qt=t.split(/[.!?]+/).filter(Pr=>Pr.trim().length>0),er=Qt.map(Pr=>Ab(Pr)),kt=Qt.map(Pr=>{const wn=Iv(Pr),Xn={};return wn.forEach(li=>{Xn[li.emotion]=li.count}),Xn});const lr=Math.max(...i.map(Pr=>{var wn;return((wn=Pr.sentences)==null?void 0:wn.length)||0})),dr=i.find(Pr=>{var wn;return(((wn=Pr.sentences)==null?void 0:wn.length)||0)===lr});dr&&dr.sentences&&dr.sentences.length>Qt.length&&(Qt=dr.sentences,er=dr.sentenceSentiments,kt=dr.sentenceEmotions);const Ar={label:"Readability",score:((Zn=i[0])==null?void 0:Zn.readabilityScore)||Fv(t),level:(()=>{var wn;const Pr=((wn=i[0])==null?void 0:wn.readabilityScore)||Fv(t);return Pr>=80?"Very Easy":Pr>=60?"Easy":Pr>=50?"Standard":Pr>=30?"Difficult":"Very Difficult"})()},Nr={label:"Linguistic Analysis",...Vt},hn={label:"Structural Analysis",...Ot},Wn={label:"Content Analysis",...qt},Sn={label:"Named Entities",...ut},Tn={label:"Spam Detection",...Ht};return{summary:ct,detailedSummary:xt,insights:Pt,sentiment:N,statistics:s,keywords:ir,readabilityScore:Ar.score,topicDistribution:mr,emotionAnalysis:kr,linguisticAnalysis:Vt,structuralAnalysis:Ot,contentAnalysis:qt,namedEntities:ut,questionAnalysis:yr,timeAnalysis:vt,actionItems:gt,themes:It,spamDetection:Ht,questions:V6(t,i),sentences:Qt,sentenceSentiments:er,sentenceEmotions:kt,analysisSections:[Ar,Nr,hn,Wn,Sn,Tn]}};function V6(t,e){const r=e.flatMap(f=>(f.keywords||[]).map(_=>_.word)),n=e.flatMap(f=>{var _;return((_=f.detailedSummary)==null?void 0:_.mainPoints)||[]}),i=e.flatMap(f=>{var _;return((_=f.detailedSummary)==null?void 0:_.keyFindings)||[]}),a=t.split(/[.!?]\s+/).filter(f=>f.length>20);let s=[];return n.forEach(f=>{s.push(`What is the significance of: ${f}?`)}),i.forEach(f=>{s.push(`What does the analysis reveal about: ${f}?`)}),Array.from(new Set(r)).slice(0,5).forEach(f=>{s.push(`How does "${f}" relate to the main topic?`)}),a.length>10&&(s.push("What are the main challenges discussed in this transcript?"),s.push("What solutions or recommendations are provided?"),s.push("Summarize the key takeaways from this content.")),s=Array.from(new Set(s)).filter(f=>f.length>20),s.slice(0,7)}const Mb=t=>{const e=dr=>{if(dr<=1)return 1;let Ar=1;for(let Nr=2;Nr<=dr;Nr++)Ar*=Nr;return Ar},r=(dr,Ar)=>Math.pow(dr,Ar)*Math.exp(-dr)/e(Ar),n=(dr,Ar,Nr)=>Nr>dr?0:e(dr)/(e(Nr)*e(dr-Nr))*Math.pow(Ar,Nr)*Math.pow(1-Ar,dr-Nr),i=(dr,Ar)=>{let Nr=0;for(let hn=0;hn<=Ar;hn++)Nr+=r(dr,hn);return Nr},a=(dr,Ar,Nr)=>{let hn=0;for(let Wn=0;Wn<=Nr;Wn++)hn+=n(dr,Ar,Wn);return hn},s=[{word:"free",weight:3,category:"offer"},{word:"win",weight:3,category:"gambling"},{word:"winner",weight:3,category:"gambling"},{word:"prize",weight:3,category:"gambling"},{word:"money",weight:3,category:"financial"},{word:"cash",weight:3,category:"financial"},{word:"offer",weight:3,category:"offer"},{word:"click",weight:3,category:"action"},{word:"buy now",weight:3,category:"action"},{word:"subscribe",weight:3,category:"action"},{word:"limited time",weight:3,category:"urgency"},{word:"urgent",weight:3,category:"urgency"},{word:"act now",weight:3,category:"urgency"},{word:"guaranteed",weight:3,category:"promise"},{word:"risk free",weight:3,category:"promise"},{word:"credit",weight:3,category:"financial"},{word:"loan",weight:3,category:"financial"},{word:"deal",weight:3,category:"offer"},{word:"discount",weight:3,category:"offer"},{word:"cheap",weight:3,category:"offer"},{word:"order now",weight:3,category:"action"},{word:"exclusive",weight:3,category:"offer"},{word:"congratulations",weight:3,category:"gambling"},{word:"selected",weight:3,category:"personalization"},{word:"claim",weight:3,category:"action"},{word:"investment",weight:3,category:"financial"},{word:"miracle",weight:3,category:"promise"},{word:"easy",weight:3,category:"promise"},{word:"no cost",weight:3,category:"offer"},{word:"trial",weight:3,category:"offer"},{word:"amazing",weight:3,category:"promise"},{word:"secret",weight:3,category:"promise"},{word:"earn",weight:3,category:"financial"},{word:"income",weight:3,category:"financial"},{word:"work from home",weight:3,category:"employment"},{word:"double your",weight:3,category:"promise"},{word:"gift",weight:3,category:"offer"},{word:"promo",weight:3,category:"offer"},{word:"promotion",weight:3,category:"offer"},{word:"unbelievable",weight:3,category:"promise"},{word:"click here",weight:3,category:"action"},{word:"visit",weight:3,category:"action"},{word:"call now",weight:3,category:"action"},{word:"apply now",weight:3,category:"action"},{word:"save big",weight:3,category:"offer"},{word:"lowest price",weight:3,category:"offer"},{word:"act fast",weight:3,category:"urgency"},{word:"lose weight",weight:3,category:"health"},{word:"weight loss",weight:3,category:"health"},{word:"viagra",weight:3,category:"health"},{word:"cialis",weight:3,category:"health"},{word:"luxury",weight:3,category:"lifestyle"},{word:"billion",weight:3,category:"financial"},{word:"million",weight:3,category:"financial"},{word:"guarantee",weight:3,category:"promise"},{word:"switch now",weight:2,category:"action"},{word:"download app",weight:2,category:"action"},{word:"start a sip",weight:2,category:"financial"},{word:"our funds",weight:2,category:"financial"},{word:"portfolio",weight:2,category:"financial"},{word:"statements",weight:2,category:"financial"},{word:"invest online",weight:2,category:"financial"},{word:"webinar",weight:2,category:"event"},{word:"invite",weight:2,category:"event"},{word:"exclusive workshop",weight:2,category:"event"},{word:"boost your chances",weight:2,category:"promise"},{word:"standout application",weight:2,category:"promise"},{word:"insider knowledge",weight:2,category:"promise"},{word:"expert guidance",weight:2,category:"promise"},{word:"live q&a",weight:2,category:"event"},{word:"don't miss out",weight:2,category:"urgency"},{word:"get ahead",weight:2,category:"promise"},{word:"your future",weight:2,category:"personalization"},{word:"worth your time",weight:2,category:"promise"},{word:"medical school",weight:2,category:"education"},{word:"application workshop",weight:2,category:"event"},{word:"proven strategies",weight:2,category:"promise"},{word:"compelling supporting documents",weight:2,category:"promise"},{word:"mcat requirements",weight:2,category:"education"},{word:"admissions experts",weight:2,category:"promise"},{word:"secure an interview",weight:2,category:"promise"},{word:"crisp, engaging webinar",weight:2,category:"event"},{word:"dynamic and resilient portfolio",weight:2,category:"financial"},{word:"unique in today's market",weight:2,category:"promise"},{word:"time-tested factors",weight:2,category:"promise"},{word:"momentum",weight:2,category:"financial"},{word:"value",weight:2,category:"financial"},{word:"quality",weight:2,category:"promise"},{word:"low volatility",weight:2,category:"financial"},{word:"multi-factor",weight:2,category:"financial"},{word:"fund",weight:2,category:"financial"},{word:"long term",weight:2,category:"financial"},{word:"wealth",weight:2,category:"financial"},{word:"adaptive",weight:2,category:"promise"},{word:"evolving",weight:2,category:"promise"},{word:"quantitative model",weight:2,category:"financial"},{word:"consult their financial advisers",weight:2,category:"financial"},{word:"suitable for investors",weight:2,category:"financial"},{word:"selected for you",weight:2,category:"personalization"},{word:"step by step",weight:2,category:"promise"},{word:"apply to med. school",weight:2,category:"education"},{word:"shine",weight:2,category:"promise"},{word:"tomorrow",weight:2,category:"urgency"},{word:"today",weight:2,category:"urgency"},{word:"got a free hour",weight:2,category:"offer"},{word:"invest it",weight:2,category:"financial"},{word:"smarter equity strategy",weight:2,category:"financial"},{word:"curious about",weight:2,category:"engagement"},{word:"join us",weight:2,category:"action"},{word:"here's what you'll learn",weight:2,category:"promise"},{word:"we are sure",weight:2,category:"promise"},{word:"it'll be worth your time",weight:2,category:"promise"},{word:"this is your chance",weight:2,category:"urgency"},{word:"don't have to navigate",weight:2,category:"promise"},{word:"designed to give you",weight:2,category:"promise"},{word:"rise above the rest",weight:2,category:"promise"},{word:"insider tips",weight:2,category:"promise"},{word:"get your questions answered",weight:2,category:"promise"},{word:"real time",weight:2,category:"promise"},{word:"competitive",weight:2,category:"promise"},{word:"admissions process",weight:2,category:"education"},{word:"your future in medicine begins here",weight:2,category:"education"},{word:"horoscope",weight:3,category:"astrology"},{word:"life report",weight:3,category:"astrology"},{word:"detailed life report",weight:3,category:"astrology"},{word:"50% off",weight:3,category:"offer"},{word:"flat 50%",weight:3,category:"offer"},{word:"future",weight:2,category:"astrology"},{word:"major events",weight:2,category:"astrology"},{word:"personalised",weight:2,category:"personalization"},{word:"predictions",weight:3,category:"astrology"},{word:"comprehensive analysis",weight:2,category:"promise"},{word:"planetary",weight:2,category:"astrology"},{word:"mahadasha",weight:2,category:"astrology"},{word:"remedies",weight:2,category:"astrology"},{word:"overcome tough challenges",weight:2,category:"promise"},{word:"free ask a question",weight:3,category:"offer"},{word:"free telephonic consultation",weight:3,category:"offer"},{word:"report delivery",weight:2,category:"service"},{word:"clearly revealed",weight:2,category:"promise"},{word:"buy now",weight:3,category:"action"},{word:"plan your future",weight:2,category:"astrology"},{word:"get predictions",weight:3,category:"astrology"},{word:"entire life",weight:2,category:"astrology"},{word:"important life-areas",weight:2,category:"astrology"},{word:"support@ganeshaspeaks.com",weight:3,category:"contact"},{word:"0091-79-4900-7777",weight:3,category:"contact"},{word:"unbelievable offer",weight:3,category:"offer"},{word:"why wait",weight:2,category:"urgency"},{word:"save flat",weight:2,category:"offer"},{word:"anxious about your future",weight:2,category:"emotion"},{word:"glimpse of your entire life",weight:2,category:"astrology"},{word:"worth",weight:2,category:"promise"},{word:"contact us at",weight:2,category:"contact"},{word:"detailed life report",weight:3,category:"astrology"},{word:"personalised detailed life predictions",weight:3,category:"astrology"},{word:"personalised guidance",weight:2,category:"astrology"},{word:"get 50% off",weight:3,category:"offer"},{word:"remedial solution for career",weight:2,category:"astrology"},{word:"premium janampatri",weight:2,category:"astrology"},{word:"career monthwise report",weight:2,category:"astrology"},{word:"career forecast",weight:2,category:"astrology"},{word:"detailed planetary mahadasha analysis",weight:2,category:"astrology"},{word:"remedies to overcome tough challenges",weight:2,category:"astrology"},{word:"get free ask a question",weight:3,category:"offer"},{word:"get free telephonic consultation",weight:3,category:"offer"},{word:"after report delivery",weight:2,category:"service"},{word:"your future, clearly revealed",weight:2,category:"astrology"},{word:"fwd: next week",weight:2,category:"urgency"},{word:"med school",weight:2,category:"education"},{word:"app. workshop",weight:2,category:"event"},{word:"it's now or never",weight:3,category:"urgency"},{word:"do not miss this opportunity",weight:3,category:"urgency"},{word:"special offer price",weight:3,category:"offer"},{word:"just 549",weight:3,category:"offer"},{word:"549",weight:3,category:"offer"},{word:"329",weight:3,category:"offer"},{word:"bejan daruwalla",weight:2,category:"astrology"},{word:"expert team of astrologers",weight:2,category:"astrology"},{word:"25+ years of experience",weight:2,category:"credibility"},{word:"hurry! offer is for limited period only",weight:3,category:"urgency"},{word:"your personalised answer will cover",weight:2,category:"promise"},{word:"detailed answer to your question",weight:2,category:"promise"},{word:"root cause of your issue",weight:2,category:"promise"},{word:"action plan",weight:2,category:"promise"},{word:"solution for your problem",weight:2,category:"promise"},{word:"get free consultation worth",weight:3,category:"offer"},{word:"explore all offers",weight:2,category:"offer"},{word:"offer ends soon",weight:2,category:"urgency"},{word:"claim your discount now",weight:3,category:"action"},{word:"unlock up to 58% off today",weight:3,category:"offer"},{word:"25 years ago",weight:2,category:"credibility"},{word:"investment journey",weight:2,category:"financial"},{word:"grow with us",weight:2,category:"promise"},{word:"watch now",weight:2,category:"action"},{word:"astrology reports",weight:2,category:"astrology"},{word:"astrology",weight:2,category:"astrology"},{word:"janampatri",weight:2,category:"astrology"},{word:"vedic astrology",weight:2,category:"astrology"},{word:"love & marriage future",weight:2,category:"astrology"},{word:"personalized guidance",weight:2,category:"astrology"},{word:"remedial solutions for personal issues",weight:2,category:"astrology"},{word:"remedial solution for marriage",weight:2,category:"astrology"},{word:"remedial solution for love",weight:2,category:"astrology"},{word:"kundli matching",weight:2,category:"astrology"},{word:"kundli compatibility",weight:2,category:"astrology"},{word:"decoded astrologically",weight:2,category:"astrology"},{word:"your next 10 career years",weight:2,category:"astrology"},{word:"your ultimate life blueprint",weight:2,category:"astrology"},{word:"get 40% off",weight:3,category:"offer"},{word:"get 58% off",weight:3,category:"offer"},{word:"get 21% off",weight:3,category:"offer"},{word:"get 25% off",weight:3,category:"offer"},{word:"discover more powerful astrology reports",weight:2,category:"astrology"},{word:"this limited-time offer",weight:3,category:"urgency"},{word:"gain profound insights",weight:2,category:"promise"},{word:"claim your discount",weight:3,category:"action"},{word:"badhte",weight:2,category:"promise"},{word:"plan your future",weight:2,category:"astrology"},{word:"comprehensive analysis of all the important life-areas",weight:2,category:"astrology"},{word:"glimpse of your entire life",weight:2,category:"astrology"},{word:"worth your time",weight:2,category:"promise"},{word:"do not miss out",weight:2,category:"urgency"},{word:"now or never",weight:3,category:"urgency"},{word:"limited period only",weight:2,category:"urgency"},{word:"free consultation",weight:3,category:"offer"},{word:"free telephonic consultation",weight:3,category:"offer"},{word:"free ask a question",weight:3,category:"offer"},{word:"worth 999",weight:3,category:"offer"},{word:"worth 549",weight:3,category:"offer"},{word:"blueprint",weight:2,category:"astrology"},{word:"life blueprint",weight:2,category:"astrology"},{word:"major events likely to happen",weight:2,category:"astrology"},{word:"detailed answer",weight:2,category:"promise"},{word:"root cause",weight:2,category:"promise"},{word:"action plan",weight:2,category:"promise"},{word:"solution for your problem",weight:2,category:"promise"},{word:"personalised answer",weight:2,category:"promise"},{word:"astrology report",weight:2,category:"astrology"},{word:"personalised detailed life report",weight:3,category:"astrology"},{word:"personalized guidance on career",weight:2,category:"astrology"},{word:"love, health & more",weight:2,category:"astrology"},{word:"personalised guidance on love",weight:2,category:"astrology"},{word:"personalised guidance on health",weight:2,category:"astrology"},{word:"personalised guidance on marriage",weight:2,category:"astrology"},{word:"personalised guidance on future",weight:2,category:"astrology"},{word:"personalised guidance on life",weight:2,category:"astrology"},{word:"personalised guidance on wealth",weight:2,category:"astrology"},{word:"personalised guidance on education",weight:2,category:"astrology"},{word:"personalised guidance on business",weight:2,category:"astrology"},{word:"personalised guidance on finance",weight:2,category:"astrology"},{word:"personalised guidance on property",weight:2,category:"astrology"},{word:"personalised guidance on family",weight:2,category:"astrology"},{word:"personalised guidance on children",weight:2,category:"astrology"},{word:"personalised guidance on travel",weight:2,category:"astrology"},{word:"personalised guidance on abroad",weight:2,category:"astrology"},{word:"personalised guidance on job",weight:2,category:"astrology"},{word:"personalised guidance on profession",weight:2,category:"astrology"},{word:"personalised guidance on studies",weight:2,category:"astrology"},{word:"personalised guidance on exams",weight:2,category:"astrology"},{word:"personalised guidance on competitive exams",weight:2,category:"astrology"},{word:"personalised guidance on government job",weight:2,category:"astrology"},{word:"personalised guidance on private job",weight:2,category:"astrology"},{word:"personalised guidance on promotion",weight:2,category:"astrology"},{word:"personalised guidance on transfer",weight:2,category:"astrology"},{word:"personalised guidance on business growth",weight:2,category:"astrology"},{word:"personalised guidance on business expansion",weight:2,category:"astrology"},{word:"personalised guidance on business partnership",weight:2,category:"astrology"},{word:"personalised guidance on business loss",weight:2,category:"astrology"},{word:"personalised guidance on business profit",weight:2,category:"astrology"},{word:"personalised guidance on business investment",weight:2,category:"astrology"},{word:"personalised guidance on business loan",weight:2,category:"astrology"},{word:"personalised guidance on business debt",weight:2,category:"astrology"},{word:"personalised guidance on business recovery",weight:2,category:"astrology"},{word:"personalised guidance on business success",weight:2,category:"astrology"},{word:"personalised guidance on business failure",weight:2,category:"astrology"},{word:"personalised guidance on business dispute",weight:2,category:"astrology"},{word:"personalised guidance on business litigation",weight:2,category:"astrology"},{word:"personalised guidance on business settlement",weight:2,category:"astrology"},{word:"personalised guidance on business agreement",weight:2,category:"astrology"},{word:"personalised guidance on business contract",weight:2,category:"astrology"},{word:"personalised guidance on business deal",weight:2,category:"astrology"},{word:"personalised guidance on business negotiation",weight:2,category:"astrology"},{word:"personalised guidance on business merger",weight:2,category:"astrology"},{word:"personalised guidance on business acquisition",weight:2,category:"astrology"},{word:"personalised guidance on business sale",weight:2,category:"astrology"},{word:"personalised guidance on business purchase",weight:2,category:"astrology"},{word:"personalised guidance on business rent",weight:2,category:"astrology"},{word:"personalised guidance on business lease",weight:2,category:"astrology"},{word:"personalised guidance on business mortgage",weight:2,category:"astrology"},{word:"personalised guidance on business insurance",weight:2,category:"astrology"},{word:"personalised guidance on business claim",weight:2,category:"astrology"},{word:"personalised guidance on business compensation",weight:2,category:"astrology"},{word:"personalised guidance on business settlement",weight:2,category:"astrology"},{word:"personalised guidance on business dispute",weight:2,category:"astrology"},{word:"personalised guidance on business litigation",weight:2,category:"astrology"},{word:"personalised guidance on business agreement",weight:2,category:"astrology"},{word:"personalised guidance on business contract",weight:2,category:"astrology"},{word:"personalised guidance on business deal",weight:2,category:"astrology"},{word:"personalised guidance on business negotiation",weight:2,category:"astrology"},{word:"personalised guidance on business merger",weight:2,category:"astrology"},{word:"personalised guidance on business acquisition",weight:2,category:"astrology"},{word:"personalised guidance on business sale",weight:2,category:"astrology"},{word:"personalised guidance on business purchase",weight:2,category:"astrology"},{word:"personalised guidance on business rent",weight:2,category:"astrology"},{word:"personalised guidance on business lease",weight:2,category:"astrology"},{word:"personalised guidance on business mortgage",weight:2,category:"astrology"},{word:"personalised guidance on business insurance",weight:2,category:"astrology"},{word:"personalised guidance on business claim",weight:2,category:"astrology"},{word:"personalised guidance on business compensation",weight:2,category:"astrology"},{word:"personalised guidance on business settlement",weight:2,category:"astrology"}],f=/(https?:\/\/|www\.)[\w\-]+(\.[\w\-]+)+\S*/gi,_=/[\w.-]+@[\w.-]+\.[a-zA-Z]{2,}/g,N=/\b\d{10,}\b/g;let I=0,me=[],fe={},Te={};s.forEach(dr=>{const Ar=new RegExp(`\\b${dr.word.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}\\b`,"gi"),Nr=t.match(Ar);if(Nr&&Nr.length>0){const hn=Nr.length*dr.weight;I+=hn,me.push(dr.word),fe[dr.word]=Nr.length,Te[dr.category]||(Te[dr.category]=0),Te[dr.category]+=hn}});const qe=t.match(f)||[],Ve=t.match(_)||[],Ue=t.match(N)||[],Ee=(t.match(/!/g)||[]).length,Fe=(t.match(/\$/g)||[]).length,He=(t.match(/%/g)||[]).length,tt=(t.match(/[A-Z]/g)||[]).length/Math.max(1,t.length),et=t.split(/\s+/).filter(Boolean).length,ct=me.length/Math.max(1,et),xt=Zc(t),Pt=Object.entries(xt).filter(([dr,Ar])=>Ar>10),ir=Object.entries(xt).filter(([dr,Ar])=>Ar>3&&!s.some(Nr=>Nr.word===dr)&&dr.length>4).sort((dr,Ar)=>Ar[1]-dr[1]).slice(0,5).map(([dr,Ar])=>({word:dr,count:Ar})),mr=t.split(/\s+/).filter(dr=>dr.length>3&&dr===dr.toUpperCase());I+=qe.length*2,I+=Ve.length*2,I+=Ue.length*2,I+=Ee*.5,I+=Fe*.5,I+=He*.5,I+=Pt.length,ct>.05&&(I+=2),tt>.1&&(I+=1),mr.length>5&&(I+=1);const kr=2,yr=me.length+qe.length+Ve.length+Ue.length,gt=1-i(kr,yr),It=.01,ut=t.split(/\s+/).filter(Boolean).length,qt=me.length,Ot=1-a(ut,It,qt),Ht=gt*.6+Ot*.4;let Qt=!1,er="None",kt=0;Ht>.95?(Qt=!0,er="Very High",kt=Ht):Ht>.85?(Qt=!0,er="High",kt=Ht):Ht>.7?(Qt=!0,er="Moderate",kt=Ht):Ht>.5?(Qt=!1,er="Low",kt=1-Ht):(Qt=!1,er="None",kt=1-Ht),Ht<.3&&I>=8?(Qt=!0,er="High",kt=Math.min(.9,I/15)):Ht<.3&&I>=4?(Qt=!0,er="Moderate",kt=Math.min(.7,I/10)):Ht<.3&&I>=2&&(Qt=!1,er="Low",kt=Math.max(.3,1-I/10));const lr=Math.round(Ht*100);return{isSpam:Qt,level:er,spamScore:I,spamPercent:lr,confidence:Math.round(kt*100),statisticalScore:Math.round(Ht*100),poissonProbability:Math.round(gt*100),binomialProbability:Math.round(Ot*100),matchedKeywords:me,matchedKeywordCounts:fe,categoryScores:Te,uniqueSuspicious:ir,urlMatches:qe,emailMatches:Ve,phoneMatches:Ue,repeatedWords:Pt.map(([dr,Ar])=>({word:dr,count:Ar})),allCapsWords:mr,expectedSpamIndicators:kr,observedSpamIndicators:yr,totalWordCount:ut,observedSpamWords:qt}},L3=t=>{const e=t.split(/[.!?]+/).filter(a=>a.trim().length>10);if(e.length<=3)return t.trim();const r=Zc(t);return e.map((a,s)=>{const _=a.toLowerCase().split(/\s+/).reduce((I,me)=>I+(r[me]||0),0),N=s<e.length*.3?1.2:1;return{sentence:a.trim(),score:_*N,index:s}}).sort((a,s)=>s.score-a.score).slice(0,3).sort((a,s)=>a.index-s.index).map(a=>a.sentence).join(". ")+"."},Tb=t=>{const e=t.split(/[.!?]+/).filter(fe=>fe.trim().length>10);t.split(/\n\s*\n/).filter(fe=>fe.trim().length>0);const r=Zc(t),n=Object.entries(r).filter(([fe])=>fe.length>3).sort((fe,Te)=>Te[1]-fe[1]).slice(0,10).map(([fe])=>fe),i=e.map((fe,Te)=>{const Ve=fe.toLowerCase().split(/\s+/).reduce((Ee,Fe)=>Ee+(n.includes(Fe)?1:0),0),Ue=Te<e.length*.3?1.5:1;return{sentence:fe.trim(),score:Ve*Ue,index:Te,type:$6(fe)}}).sort((fe,Te)=>Te.score-fe.score),a=i.slice(0,5).sort((fe,Te)=>fe.index-Te.index);let s=i.filter(fe=>fe.type==="conclusion").slice(0,3),f=i.filter(fe=>fe.type==="question").slice(0,3),_=R3(t),N=M8(t);(!s||s.length===0)&&_&&_.length>0&&(s=_.map(fe=>({sentence:fe}))),(!f||f.length===0)&&N&&N.length>0&&(f=N.map(fe=>({sentence:fe}))),(!s||s.length===0)&&(s=[{sentence:"No explicit conclusion found. The transcript ends without a clear summary."}]),(!f||f.length===0)&&(f=[{sentence:"What is the main takeaway from this transcript?"}]);let I=l8(t);(!I||typeof I!="object")&&(I={}),I.length=I.length||`${t.length} chars`,I.tone=I.tone||"Neutral",I.primaryTopic=I.primaryTopic||n[0]||"General",I.complexity=I.complexity||"Standard",I.readingLevel=I.readingLevel||"N/A";let me=h8(t);return(!me||typeof me!="object")&&(me={}),me.type=me.type||"N/A",me.pattern=me.pattern||"N/A",{brief:L3(t),mainPoints:a.map(fe=>fe.sentence),keyFindings:o8(t),conclusions:s.map(fe=>fe.sentence),questions:f.map(fe=>fe.sentence),overview:I,structure:me}},$6=t=>{const e=t.toLowerCase();return e.includes("?")?"question":e.includes("conclusion")||e.includes("summary")||e.includes("therefore")?"conclusion":e.includes("important")||e.includes("key")||e.includes("main")||e.includes("first")||e.includes("second")||e.includes("next")?"sequence":"statement"},Y6=t=>{const e=[],r=t.toLowerCase().split(/\s+/).filter(Boolean),n=t.split(/[.!?]+/).filter(f=>f.trim().length>5);if(r.length>500?e.push({type:"length",icon:"",title:"Long Content",description:`This is a substantial transcript with ${r.length} words. Average reading time: ${Math.ceil(r.length/200)} minutes.`,severity:"info"}):r.length<50&&r.length>0&&e.push({type:"length",icon:"",title:"Short Content",description:`Brief transcript with ${r.length} words. Quick read under 1 minute.`,severity:"info"}),n.length>0){const f=r.length/n.length;f>20&&e.push({type:"complexity",icon:"",title:"Complex Language",description:`Average sentence length is ${f.toFixed(1)} words. This content uses complex sentence structures.`,severity:"warning"})}const i=Zc(t),a=Object.entries(i).filter(([f])=>f.length>3).sort((f,_)=>_[1]-f[1]).slice(0,5);a.length>0&&e.push({type:"keywords",icon:"",title:"Key Topics",description:`Main topics: ${a.map(([f,_])=>`${f} (${_}x)`).join(", ")}`,severity:"success"});const s=(t.match(/\?/g)||[]).length;return s>0&&e.push({type:"questions",icon:"",title:"Interactive Content",description:`Contains ${s} question${s>1?"s":""}, suggesting interactive or educational content.`,severity:"info"}),e.length===0&&(!t||r.length===0?e.push({type:"empty",icon:"",title:"No Content",description:"No transcript content was provided for analysis.",severity:"info"}):r.length<10?e.push({type:"minimal",icon:"",title:"Minimal Content",description:"The transcript is too short for meaningful insights. Please provide more content.",severity:"info"}):e.push({type:"general",icon:"",title:"General Content",description:"The transcript does not contain enough distinctive features for specific insights, but it is available for review.",severity:"info"})),e},Ab=t=>{const e=["good","great","excellent","amazing","wonderful","fantastic","love","like","happy","positive","success","successful","achieve","achievement","better","best","perfect","awesome","brilliant","outstanding","remarkable","impressive","incredible","beautiful","fantastic","marvelous","superb","exceptional","magnificent","terrific","splendid","delightful","pleasurable","enjoyable","satisfying","fulfilling","gratifying","thrilled","excited","optimistic","confident","hopeful","enthusiastic","passionate","inspired","motivated","empowered","accomplished","proud","blessed","grateful","fortunate"],r=["bad","terrible","awful","horrible","hate","dislike","sad","angry","disappointed","negative","failure","failed","wrong","worse","worst","problem","issue","difficult","impossible","disaster","crisis","concern","worry","fear","danger","risk","disturbing","alarming","shocking","devastating","tragic","unfortunate","regrettable","frustrating","annoying","irritating","offensive","disgusting","appalling","dreadful","miserable","depressed","anxious","stressed","overwhelmed","discouraged","hopeless","defeated","broken","damaged","harmful","destructive","toxic","corrupt"],n=["very","extremely","incredibly","absolutely","completely","totally","really","quite","rather","fairly","somewhat","slightly","moderately","highly","tremendously","enormously","exceptionally","remarkably","particularly"],i=["not","no","never","none","nothing","nobody","nowhere","neither","hardly","barely","scarcely","rarely","seldom","without"],a=t.toLowerCase().split(/\s+/),s=t.split(/[.!?]+/).filter(mr=>mr.trim().length>0);let f=0,_=0,N=0,I=1,me=0;for(let mr=0;mr<a.length;mr++){const kr=a[mr],yr=mr>0?a[mr-1]:"";mr<a.length-1&&a[mr+1];let vt=1;n.includes(yr)&&(vt=1.5);let gt=!1;(i.includes(yr)||i.includes(a[mr-2]))&&(gt=!0),e.includes(kr)?gt?_+=vt:f+=vt:r.includes(kr)&&(gt?f+=vt*.8:_+=vt)}const fe=(t.match(/!/g)||[]).length,Te=(t.match(/\?/g)||[]).length,qe=a.filter(mr=>mr.length>2&&mr===mr.toUpperCase()).length;fe>0&&(I+=fe*.1,me+=fe*.05),Te>0&&(N+=Te*.1),qe>0&&(I+=qe*.15),s.forEach(mr=>{const kr=mr.toLowerCase();(kr.includes("better than")||kr.includes("superior to"))&&(f+=.5),(kr.includes("worse than")||kr.includes("inferior to"))&&(_+=.5),(kr.includes("i feel")||kr.includes("i think"))&&(me+=.1),(kr.includes("definitely")||kr.includes("certainly")||kr.includes("absolutely"))&&(I+=.1),(kr.includes("maybe")||kr.includes("perhaps")||kr.includes("might")||kr.includes("could"))&&(N+=.2)}),f*=I,_*=I;const Ve=a.length;Ve/s.length>20&&(N+=.3);let Ee=Math.min(1,Ve/50);Ve<10&&(Ee=.3);const Fe=f+_+N,He=(f-_)/Math.max(1,Ve);let tt="Neutral",et=.5,ct=0;Fe>0&&(ct=He,f>_&&f>N?(tt="Positive",et=Math.min(.95,.5+f/Fe*.5)):_>f&&_>N?(tt="Negative",et=Math.min(.95,.5+_/Fe*.5)):(tt="Neutral",et=Math.max(.4,.8-Math.abs(f-_)/Fe)));let xt=et;xt*=Ee,xt+=me*.1,xt=Math.max(.2,Math.min(.95,xt));const Pt=t.length+a.length+s.length,ir=.05*Math.sin(Pt*.1);return xt+=ir,xt=Math.max(.15,Math.min(.98,xt)),{score:ct,label:tt,confidence:xt,details:{positiveWords:Math.round(f*10)/10,negativeWords:Math.round(_*10)/10,neutralWords:Math.round(N*10)/10,totalWords:a.length,sentenceCount:s.length,intensityMultiplier:Math.round(I*100)/100,reliabilityFactor:Math.round(Ee*100)/100,exclamationCount:fe,questionCount:Te,allCapsWords:qe}}},G6=t=>{const e=t.split(/\s+/).filter(i=>i.length>0),r=t.split(/[.!?]+/).filter(i=>i.trim().length>0);return{wordCount:e.length,sentenceCount:r.length,averageWordsPerSentence:e.length/r.length||0,readingTime:Math.ceil(e.length/200),characterCount:t.length,paragraphCount:t.split(/\n\s*\n/).length}},e0=t=>{const e=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","must","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their"]),r=t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(i=>i.length>2&&!e.has(i)),n={};return r.forEach(i=>{n[i]=(n[i]||0)+1}),Object.entries(n).sort((i,a)=>a[1]-i[1]).slice(0,10).map(([i,a])=>({word:i,count:a,percentage:(a/r.length*100).toFixed(1)}))},Fv=t=>{const e=t.split(/[.!?]+/).filter(f=>f.trim().length>5),r=t.split(/\s+/).filter(f=>f.trim().length>0),n=r.reduce((f,_)=>f+X6(_),0);if(e.length===0||r.length===0)return 0;const i=r.length/e.length,a=n/r.length,s=206.835-1.015*i-84.6*a;return Math.max(0,Math.min(100,s))},X6=t=>{if(t=t.toLowerCase(),t.length<=3)return 1;const e="aeiouy";let r=0,n=!1;for(let i=0;i<t.length;i++){const a=e.includes(t[i]);a&&!n&&r++,n=a}return t.endsWith("e")&&r--,Math.max(1,r)},Cb=t=>{const e=e0(t),r={},n={Technology:["technology","computer","software","digital","system","data","online","internet"],Business:["business","company","market","customer","product","service","strategy","growth"],Education:["learn","study","education","student","teacher","school","knowledge","skill"],Health:["health","medical","doctor","patient","treatment","care","wellness","medicine"],Science:["research","study","analysis","experiment","scientific","discovery","theory"],Personal:["personal","experience","life","family","friend","relationship","feeling"]};return e.forEach(({word:i,count:a})=>{let s=!1;for(const[f,_]of Object.entries(n))if(_.includes(i)){r[f]=(r[f]||0)+a,s=!0;break}s||(r.General=(r.General||0)+a)}),Object.entries(r).sort((i,a)=>a[1]-i[1]).map(([i,a])=>({topic:i,count:a}))},Iv=t=>{const e={Joy:["happy","joy","excited","delighted","cheerful","glad","pleased","thrilled","content","satisfied","elated","ecstatic","grateful","optimistic","hopeful","enjoy","smile","laugh","bliss","enthusiastic","uplifted","merry","jovial","glee","rejoice","radiant","buoyant","euphoric","sunny","lively","vivid","vibrant"],Sadness:["sad","depressed","disappointed","melancholy","grief","sorrow","unhappy","down","gloomy","mournful","tearful","regret","lonely","despair","hopeless","heartbroken","blue","dismal","forlorn","dejected","weary","pessimistic","suffer","cry","lament","anguish","wistful","remorse","loss","pain","hurt"],Anger:["angry","furious","irritated","annoyed","rage","mad","frustrated","resentful","outraged","enraged","agitated","cross","indignant","offended","hostile","bitter","exasperated","infuriated","irate","provoked","incensed","wrath","disgusted","scorn","contempt","vengeful","fume","grudge","aggression","temper","tantrum"],Fear:["afraid","scared","worried","anxious","nervous","terrified","concerned","fearful","panic","alarmed","apprehensive","dread","uneasy","timid","shy","phobia","horror","fright","startled","shaken","tremble","coward","intimidated","paranoid","hesitant","doubt","uncertain","insecure","distressed","alarmed","spooked"],Surprise:["surprised","amazed","astonished","shocked","unexpected","sudden","startled","stunned","dumbfounded","flabbergasted","speechless","baffled","bewildered","astounded","marvel","wonder","awe","unforeseen","unanticipated","unpredictable","unusual","uncommon","remarkable","extraordinary","unimaginable","unthinkable","unbelievable","miraculous","curious","peculiar","odd"],Trust:["trust","confident","reliable","secure","safe","certain","assured","faith","dependable","loyal","honest","integrity","credible","authentic","genuine","devoted","steadfast","faithful","committed","supportive","consistent","stable","sure","guaranteed","predictable","solid","firm","unwavering","trustworthy","belief","conviction"],Disgust:["disgust","disgusted","repulsed","revolted","nauseated","sickened","gross","abhorrent","loath","detest","aversion","distaste","offended","repelled","appalled","horrified","revulsion","nausea","repugnant","vile","foul","sickly","yuck","yucky","filthy","dirty","unclean","contaminated","tainted","putrid","rotten"]},r=["not","don't","doesn't","didn't","isn't","wasn't","aren't","weren't","no","never","none","cannot","can't","won't","without"],n=t.toLowerCase().replace(/[^\w\s']/g,"").split(/\s+/),i={},a=n.length;return Object.entries(e).forEach(([s,f])=>{let _=0;for(let N=0;N<n.length;N++){const I=n[N];if(f.includes(I)){const me=n[N-1]||"",fe=n[N-2]||"";r.includes(me)||r.includes(fe)||_++}}_>0&&(i[s]=Number((_/a*100).toFixed(2)))}),Object.keys(i).length===0?[{emotion:"Neutral",count:100}]:Object.entries(i).sort((s,f)=>f[1]-s[1]).map(([s,f])=>({emotion:s,count:f}))},jb=t=>{const e=t.toLowerCase().split(/\s+/),r=t.split(/[.!?]+/).filter(I=>I.trim().length>5),n=e.filter(I=>I.length>6);e.filter(I=>I.length<=6);const i=r.filter(I=>!I.includes("?")&&!I.includes("!")).length,a=r.filter(I=>I.includes("?")).length,s=r.filter(I=>I.includes("!")).length,f=e.filter(I=>I.endsWith("ed")||["was","were","had"].includes(I)).length,_=e.filter(I=>["is","are","am","have","has"].includes(I)).length,N=e.filter(I=>["will","shall","going"].includes(I)).length;return{vocabularyComplexity:(n.length/e.length*100).toFixed(1)+"%",sentenceTypes:{declarative:i,interrogative:a,exclamatory:s},tenseDistribution:{past:f,present:_,future:N},averageWordLength:(e.reduce((I,me)=>I+me.length,0)/e.length).toFixed(1),uniqueWords:new Set(e).size,repetitionRate:((e.length-new Set(e).size)/e.length*100).toFixed(1)+"%"}},Lb=t=>{const e=t.split(/\n\s*\n/).filter(s=>s.trim().length>0);t.split(/[.!?]+/).filter(s=>s.trim().length>10);const r=e.map(s=>s.split(/[.!?]+/).length),n=r.reduce((s,f)=>s+f,0)/r.length,i=(t.match(/|\*|-\s/g)||[]).length,a=(t.match(/\d+\.\s/g)||[]).length;return{paragraphStructure:{count:e.length,averageLength:n.toFixed(1),variability:m8(r)},listElements:{bulletPoints:i,numberedLists:a},coherenceScore:v8(t),transitionWords:D3(t),organizationPattern:g8(t)}},Eb=t=>{const e=t.split(/[.!?]+/).filter(_=>_.trim().length>10),r=e.filter(_=>_.toLowerCase().includes("fact")||_.toLowerCase().includes("data")||_.toLowerCase().includes("research")||/\d+%/.test(_)).length,n=e.filter(_=>_.toLowerCase().includes("think")||_.toLowerCase().includes("believe")||_.toLowerCase().includes("feel")||_.toLowerCase().includes("opinion")).length,i=e.filter(_=>_.toLowerCase().includes("example")||_.toLowerCase().includes("instance")||_.toLowerCase().includes("such as")).length,a=Ov(t,["however","but","although","despite","nevertheless"]),s=Ov(t,["also","moreover","furthermore","additionally","besides"]),f=Ov(t,["because","therefore","consequently","as a result","due to"]);return{contentTypes:{factual:r,opinions:n,examples:i},discourseMarkers:{contrast:a,additive:s,causal:f},argumentStructure:y8(t),evidenceTypes:x8(t)}},Db=t=>{const e={people:[],organizations:[],locations:[],dates:[],numbers:[]},r=/\b[A-Z][a-z]+ [A-Z][a-z]+\b/g,n=/\b[A-Z][a-z]+ (Inc|Corp|Company|Organization|Association|University|College)\b/g,i=/\b[A-Z][a-z]+ (City|State|Country|Street|Avenue|Road)\b/g,a=/\b(January|February|March|April|May|June|July|August|September|October|November|December) \d{1,2},? \d{4}\b/g,s=/\b\d+(?:,\d{3})*(?:\.\d+)?\b/g;return e.people=Array.from(t.matchAll(r)).map(f=>f[0]).slice(0,10),e.organizations=Array.from(t.matchAll(n)).map(f=>f[0]).slice(0,10),e.locations=Array.from(t.matchAll(i)).map(f=>f[0]).slice(0,10),e.dates=Array.from(t.matchAll(a)).map(f=>f[0]).slice(0,10),e.numbers=Array.from(t.matchAll(s)).map(f=>f[0]).slice(0,10),e},Rb=t=>{const e=t.split(/[.!?]+/).filter(s=>s.trim().length>0),r=[];e.forEach((s,f)=>{const _=s.trim();if(_.includes("?")||i8(_)){const N=_.replace(/^\s*["']|["']\s*$/g,"").trim();if(N.length>0){const I=Z6(N),me=a8(N),fe=K6(N),Te=J6(N);r.push({text:N+(N.endsWith("?")?"":"?"),index:f,type:I.type,subType:I.subType,isRhetorical:me,complexity:fe,purpose:Te,context:s8(e,f),explanation:Q6(I.type,I.subType)})}}});const n={what:r.filter(s=>s.type==="what").length,how:r.filter(s=>s.type==="how").length,why:r.filter(s=>s.type==="why").length,when:r.filter(s=>s.type==="when").length,where:r.filter(s=>s.type==="where").length,who:r.filter(s=>s.type==="who").length,which:r.filter(s=>s.type==="which").length,whose:r.filter(s=>s.type==="whose").length,yesNo:r.filter(s=>s.type==="yesNo").length,choice:r.filter(s=>s.type==="choice").length,confirmation:r.filter(s=>s.type==="confirmation").length,other:r.filter(s=>s.type==="other").length},i={information:r.filter(s=>s.purpose==="information").length,clarification:r.filter(s=>s.purpose==="clarification").length,confirmation:r.filter(s=>s.purpose==="confirmation").length,engagement:r.filter(s=>s.purpose==="engagement").length,reflection:r.filter(s=>s.purpose==="reflection").length,challenge:r.filter(s=>s.purpose==="challenge").length},a={simple:r.filter(s=>s.complexity==="simple").length,moderate:r.filter(s=>s.complexity==="moderate").length,complex:r.filter(s=>s.complexity==="complex").length};return{totalQuestions:r.length,questions:r,questionTypes:n,questionPurposes:i,complexityLevels:a,rhetorical:r.filter(s=>s.isRhetorical).length,direct:r.filter(s=>!s.isRhetorical).length,questionsWithContext:r.slice(0,15),averageComplexity:e8(r),questionDensity:(r.length/e.length*100).toFixed(1),mostCommonType:E3(n),questionInsights:t8(r,n,i)}},Z6=t=>{const e=t.toLowerCase();return e.includes("what")?e.includes("what is")||e.includes("what are")?{type:"what",subType:"definition"}:e.includes("what if")||e.includes("what would")?{type:"what",subType:"hypothetical"}:e.includes("what about")||e.includes("what do you think")?{type:"what",subType:"opinion"}:{type:"what",subType:"general"}:e.includes("how")?e.includes("how much")||e.includes("how many")?{type:"how",subType:"quantity"}:e.includes("how long")||e.includes("how often")?{type:"how",subType:"duration"}:e.includes("how do")||e.includes("how to")?{type:"how",subType:"process"}:{type:"how",subType:"method"}:e.includes("why")?e.includes("why not")||e.includes("why don't")?{type:"why",subType:"alternative"}:e.includes("why is")||e.includes("why are")?{type:"why",subType:"reason"}:{type:"why",subType:"cause"}:e.includes("when")?e.includes("when will")||e.includes("when shall")?{type:"when",subType:"future"}:e.includes("when did")||e.includes("when was")?{type:"when",subType:"past"}:{type:"when",subType:"time"}:e.includes("where")?e.includes("where is")||e.includes("where are")?{type:"where",subType:"location"}:e.includes("where do")||e.includes("where can")?{type:"where",subType:"action"}:{type:"where",subType:"place"}:e.includes("who")?e.includes("who is")||e.includes("who are")?{type:"who",subType:"identity"}:e.includes("who will")||e.includes("who can")?{type:"who",subType:"capability"}:{type:"who",subType:"person"}:e.includes("which")?e.includes("which one")||e.includes("which ones")?{type:"which",subType:"selection"}:e.includes("which way")||e.includes("which method")?{type:"which",subType:"option"}:{type:"which",subType:"choice"}:e.includes("whose")?{type:"whose",subType:"possession"}:e.startsWith("is ")||e.startsWith("are ")||e.startsWith("was ")||e.startsWith("were ")||e.startsWith("do ")||e.startsWith("does ")||e.startsWith("did ")||e.startsWith("can ")||e.startsWith("could ")||e.startsWith("will ")||e.startsWith("would ")||e.startsWith("should ")||e.startsWith("have ")||e.startsWith("has ")||e.startsWith("had ")?{type:"yesNo",subType:"binary"}:e.includes(" or ")&&(e.includes("either")||e.includes("whether"))?{type:"choice",subType:"alternative"}:e.includes("right?")||e.includes("correct?")||e.includes("isn't it?")||e.includes("don't you think?")||e.includes("wouldn't you agree?")?{type:"confirmation",subType:"agreement"}:{type:"other",subType:"unclassified"}},K6=t=>{const e=t.split(/\s+/).length,r=t.includes(",")||t.includes("and")||t.includes("but"),n=t.toLowerCase().includes("if")||t.toLowerCase().includes("when");return e>15||r&&n?"complex":e>8||r||n?"moderate":"simple"},J6=t=>{const e=t.toLowerCase();return e.includes("what is")||e.includes("how does")||e.includes("when did")||e.includes("where is")||e.includes("who is")?"information":e.includes("do you mean")||e.includes("are you saying")||e.includes("clarify")||e.includes("explain")||e.includes("could you elaborate")?"clarification":e.includes("right?")||e.includes("correct?")||e.includes("isn't it?")||e.includes("don't you think?")||e.includes("wouldn't you agree?")?"confirmation":e.includes("what do you think")||e.includes("how do you feel")||e.includes("what's your opinion")||e.includes("any thoughts")?"engagement":e.includes("why do you think")||e.includes("what if")||e.includes("imagine")||e.includes("suppose")||e.includes("consider")?"reflection":e.includes("why not")||e.includes("how can you")||e.includes("what makes you")||e.includes("justify")||e.includes("defend")?"challenge":"information"},Q6=(t,e,r)=>{var i;return((i={what:{definition:"Seeks to understand the nature, meaning, or identity of something",hypothetical:"Explores possible scenarios or imaginary situations",opinion:"Requests personal views, thoughts, or judgments",general:"Asks for general information or details about something"},how:{quantity:"Inquires about amounts, numbers, or measurements",duration:"Asks about time periods, frequency, or temporal aspects",process:"Seeks step-by-step instructions or procedures",method:"Requests information about ways, means, or approaches"},why:{alternative:"Questions why something is not done differently",reason:"Seeks explanations for states, conditions, or situations",cause:"Looks for underlying causes or motivations"},when:{future:"Asks about upcoming events or future timing",past:"Inquires about historical events or past timing",time:"Seeks general temporal information"},where:{location:"Asks about specific places or positions",action:"Inquires about where activities or actions occur",place:"Seeks information about general locations"},who:{identity:"Asks about the identity of people or entities",capability:"Inquires about who can or will do something",person:"Seeks information about individuals or groups"},which:{selection:"Asks for a choice from specific options",option:"Seeks the best alternative from available choices",choice:"Requests selection from multiple possibilities"},whose:{possession:"Inquires about ownership or belonging"},yesNo:{binary:"Requires a simple yes or no answer"},choice:{alternative:"Presents two or more options to choose from"},confirmation:{agreement:"Seeks validation or agreement with a statement"}}[t])==null?void 0:i[e])||"General inquiry seeking information"},e8=t=>{if(t.length===0)return"none";const e={simple:1,moderate:2,complex:3},n=t.reduce((i,a)=>i+e[a.complexity],0)/t.length;return n<1.5?"simple":n<2.5?"moderate":"complex"},E3=t=>{const e=Math.max(...Object.values(t));if(e===0)return"none";const r=Object.entries(t).find(([n,i])=>i===e);return r?r[0]:"none"},t8=(t,e,r)=>{const n=[];if(t.length===0)return n.push("No questions found in the transcript. This suggests a more declarative or informational communication style."),n;t.length>10?n.push(`High question density detected (${t.length} questions). This indicates an interactive, inquiry-based communication style.`):t.length>5?n.push(`Moderate question usage (${t.length} questions). Shows balanced interactive communication.`):n.push(`Low question frequency (${t.length} questions). Communication style is more declarative.`);const i=E3(e);i!=="none"&&n.push(`Most frequent question type: "${i}" questions. This suggests focus on ${r8(i)}.`);const a=Object.entries(r).reduce((_,[N,I])=>I>_.count?{purpose:N,count:I}:_,{purpose:"none",count:0});a.count>0&&n.push(`Primary question purpose: ${a.purpose}. This indicates ${n8(a.purpose)}.`);const s=t.filter(_=>_.isRhetorical).length,f=t.length-s;return s>f?n.push("Predominantly rhetorical questions suggest a persuasive or reflective communication style."):f>s&&n.push("Mostly direct questions indicate information-seeking or interactive communication."),n},r8=t=>({what:"seeking definitions, explanations, or information about things",how:"understanding processes, methods, or procedures",why:"exploring reasons, causes, or motivations",when:"temporal information and timing",where:"location, place, or spatial information",who:"people, roles, or identity",which:"choice, selection, or options",whose:"ownership or possession",yesNo:"binary confirmation or simple verification",choice:"alternatives and decision-making",confirmation:"validation and agreement-seeking"})[t]||"general inquiry",n8=t=>({information:"a focus on gathering facts and knowledge",clarification:"a need for better understanding and explanation",confirmation:"seeking validation and agreement",engagement:"interactive communication and involvement",reflection:"thoughtful consideration and deeper thinking",challenge:"questioning assumptions and critical thinking"})[t]||"general communication",i8=t=>{const e=t.toLowerCase();return["what","how","why","when","where","who","which","whose","whom","is","are","was","were","do","does","did","can","could","will","would","should","shall","may","might","must","have","has","had"].some(n=>e.startsWith(n+" "))},a8=t=>{const e=t.toLowerCase();return["isn't that","don't you think","wouldn't you agree","you know what i mean","right?","correct?","am i right","you see","obviously","clearly"].some(n=>e.includes(n))||t.length>80},s8=(t,e)=>{const r=e>0?t[e-1].trim():"",n=e<t.length-1?t[e+1].trim():"";return{before:r.length>100?r.substring(0,100)+"...":r,after:n.length>100?n.substring(0,100)+"...":n}},Pb=t=>{const e={past:["yesterday","ago","before","previously","earlier","past","former","was","were"],present:["now","today","currently","presently","at present","is","are","am"],future:["tomorrow","later","next","future","will","shall","going to","upcoming"]},r=t.toLowerCase().split(/\s+/),n={past:0,present:0,future:0};return r.forEach(i=>{e.past.includes(i)&&n.past++,e.present.includes(i)&&n.present++,e.future.includes(i)&&n.future++}),{timeOrientation:n,dominantTense:Object.entries(n).reduce((i,a)=>n[i[0]]>n[a[0]]?i:a)[0],timeExpressions:b8(t)}},Nb=t=>{const e=["need","should","must","have to","require","plan","will","going to","schedule","assign"];return t.split(/[.!?]+/).filter(i=>i.trim().length>10).filter(i=>{const a=i.toLowerCase();return e.some(s=>a.includes(s))}).map(i=>({text:i.trim(),priority:w8(i),type:_8(i)})).slice(0,10)},zb=t=>{const e=t.split(/[.!?]+/).filter(i=>i.trim().length>10),r={},n={Communication:["communication","discussion","conversation","talk","speak","listen"],"Problem Solving":["problem","solution","issue","challenge","resolve","fix"],Planning:["plan","strategy","goal","objective","target","schedule"],Analysis:["analyze","study","research","examine","investigate","review"],"Decision Making":["decision","choose","select","option","alternative","choice"],Collaboration:["team","collaborate","together","cooperation","partnership","group"]};return e.forEach(i=>{const a=i.toLowerCase();Object.entries(n).forEach(([s,f])=>{const _=f.filter(N=>a.includes(N)).length;_>0&&(r[s]=(r[s]||0)+_)})}),Object.entries(r).sort((i,a)=>a[1]-i[1]).slice(0,8).map(([i,a])=>({theme:i,count:a}))},o8=t=>{const e=t.split(/[.!?]+/).filter(n=>n.trim().length>10),r=[];if(e.forEach(n=>{const i=n.toLowerCase();(i.includes("key")||i.includes("important")||i.includes("main")||i.includes("significant")||i.includes("critical")||i.includes("primary")||i.includes("notable")||i.includes("essential")||i.includes("crucial")||i.includes("fundamental")||i.includes("major")||i.includes("core"))&&r.push(n.trim())}),r.length===0){const n=Zc(t),i=Object.entries(n).filter(([_])=>_.length>4).sort((_,N)=>N[1]-_[1]).slice(0,5).map(([_])=>_);i.length>0&&r.push(`The content heavily emphasizes ${i.slice(0,3).join(", ")}, suggesting these are central themes.`);const a=t.split(/\s+/).length/e.length;a>20?r.push("The content demonstrates sophisticated analytical depth with complex sentence structures and detailed explanations."):a<10&&r.push("The content uses concise, direct communication style for maximum clarity and accessibility."),/\d+/.test(t)&&r.push("The content includes quantitative data and specific measurements, enhancing credibility and precision."),t.toLowerCase().split(/\s+/).filter(_=>["excellent","great","good","bad","terrible","amazing","wonderful","awful","fantastic","horrible"].includes(_)).length>0&&r.push("The content contains emotional language, suggesting subjective viewpoints and personal perspectives.")}return r.slice(0,5)},l8=t=>{const e=t.split(/\s+/).filter(r=>r.length>0);return t.split(/[.!?]+/).filter(r=>r.trim().length>0),{length:e.length<100?"Short":e.length<500?"Medium":"Long",tone:c8(t),primaryTopic:p8(t),complexity:u8(t),readingLevel:d8(t),structure:f8(t)}},c8=t=>{const e=["good","great","excellent","positive","success","effective","beneficial","valuable","important","significant"],r=["bad","terrible","negative","problem","issue","failure","difficult","challenge","concern","risk"],n=["analysis","study","research","data","information","report","overview","summary","description","explanation"],i=t.toLowerCase().split(/\s+/),a=i.filter(_=>e.includes(_)).length,s=i.filter(_=>r.includes(_)).length,f=i.filter(_=>n.includes(_)).length;return a>s&&a>f?"Positive":s>a&&s>f?"Critical":f>a&&f>s?"Analytical":"Neutral"},u8=t=>{const e=t.split(/\s+/),r=t.split(/[.!?]+/).filter(s=>s.trim().length>0),n=e.length/r.length,a=e.filter(s=>s.length>7).length/e.length;return n>20&&a>.3?"High":n>15&&a>.2?"Medium":"Low"},d8=t=>{const e=t.split(/\s+/),r=t.split(/[.!?]+/).filter(i=>i.trim().length>0),n=e.length/r.length;return n>20?"Advanced":n>15?"Intermediate":"Basic"},f8=t=>{const e=/^\d+\./.test(t),r=t.includes("")||t.includes("-"),n=/^[A-Z][^.!?]*$/m.test(t);return e?"Numbered List":r?"Bullet Points":n?"Structured Document":"Narrative"},h8=t=>{const e=t.split(/\n\s*\n/).filter(n=>n.trim().length>0),r=t.split(/[.!?]+/).filter(n=>n.trim().length>0);return{paragraphCount:e.length,sentenceCount:r.length,averageSentencesPerParagraph:Math.round(r.length/e.length),hasHeaders:/^[A-Z][^.!?]*$/.test(t),hasBulletPoints:t.includes("")||t.includes("-")||t.includes("*"),hasNumbers:/\d+/.test(t)}},p8=t=>{const r=t.toLowerCase().split(/\s+/),n={};r.forEach(Ue=>{Ue.length>3&&(n[Ue]=(n[Ue]||0)+1)});const a=["business","sales","revenue","profit","market","customer","strategy","growth","investment","finance"].reduce((Ue,Ee)=>Ue+(n[Ee]||0),0),f=["technology","software","digital","computer","system","data","algorithm","programming","development","innovation"].reduce((Ue,Ee)=>Ue+(n[Ee]||0),0),N=["education","learning","student","teacher","study","research","knowledge","skill","training","academic"].reduce((Ue,Ee)=>Ue+(n[Ee]||0),0),me=["health","medical","patient","treatment","diagnosis","therapy","medicine","doctor","hospital","care"].reduce((Ue,Ee)=>Ue+(n[Ee]||0),0),Te=["science","research","experiment","hypothesis","theory","analysis","study","observation","method","result"].reduce((Ue,Ee)=>Ue+(n[Ee]||0),0);return Object.entries({"Business & Finance":a,"Technology & Innovation":f,"Education & Learning":N,"Health & Medicine":me,"Science & Research":Te}).reduce((Ue,[Ee,Fe])=>Fe>Ue.score?{theme:Ee,score:Fe}:Ue,{theme:"General Discussion",score:0}).theme},m8=t=>{const e=t.reduce((n,i)=>n+i,0)/t.length,r=t.reduce((n,i)=>n+Math.pow(i-e,2),0)/t.length;return Math.sqrt(r).toFixed(1)},v8=t=>{const e=D3(t),r=(t.toLowerCase().match(/\b(this|that|these|those|it|they|them)\b/g)||[]).length,n=t.split(/[.!?]+/).filter(i=>i.trim().length>5).length;return Math.min(100,(e+r)/n*100).toFixed(1)},D3=t=>{const e=["however","therefore","furthermore","moreover","additionally","consequently","meanwhile","nevertheless","thus","hence"],r=t.toLowerCase();return e.reduce((n,i)=>n+(r.match(new RegExp(`\\b${i}\\b`,"g"))||[]).length,0)},g8=t=>t.includes("first")&&t.includes("second")?"Sequential":t.includes("problem")&&t.includes("solution")?"Problem-Solution":t.includes("compare")||t.includes("contrast")?"Compare-Contrast":t.includes("cause")||t.includes("effect")?"Cause-Effect":"General",Ov=(t,e)=>{const r=t.toLowerCase();return e.reduce((n,i)=>n+(r.match(new RegExp(`\\b${i}\\b`,"g"))||[]).length,0)},y8=t=>{const e=t.split(/[.!?]+/).filter(a=>a.trim().length>10),r=e.filter(a=>a.toLowerCase().includes("claim")||a.toLowerCase().includes("argue")).length,n=e.filter(a=>a.toLowerCase().includes("evidence")||a.toLowerCase().includes("proof")).length,i=e.filter(a=>a.toLowerCase().includes("because")||a.toLowerCase().includes("therefore")).length;return{claims:r,evidence:n,reasoning:i}},x8=t=>{const e=t.toLowerCase();return{statistics:(e.match(/\d+%|\d+\.\d+%/g)||[]).length,examples:(e.match(/\bexample\b|\binstance\b/g)||[]).length,quotes:(e.match(/"|'/g)||[]).length/2,research:(e.match(/\bresearch\b|\bstudy\b/g)||[]).length}},b8=t=>{const e=/\b(morning|afternoon|evening|night|today|tomorrow|yesterday|now|later|soon|recently|currently)\b/gi;return Array.from(t.matchAll(e)).map(r=>r[0]).slice(0,10)},w8=t=>{const e=["urgent","immediate","critical","must","asap"],r=["should","important","need"],n=t.toLowerCase();return e.some(i=>n.includes(i))?"High":r.some(i=>n.includes(i))?"Medium":"Low"},_8=t=>{const e=t.toLowerCase();return e.includes("meet")||e.includes("schedule")?"Meeting":e.includes("review")||e.includes("check")?"Review":e.includes("create")||e.includes("develop")?"Creation":e.includes("send")||e.includes("email")?"Communication":"Task"},Zc=t=>{const e=t.toLowerCase().split(/\s+/),r={},n=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","must","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them"]);return e.forEach(i=>{const a=i.replace(/[^\w]/g,"").toLowerCase();a.length>2&&!n.has(a)&&(r[a]=(r[a]||0)+1)}),r},S8=t=>{var ct,xt,Pt,ir,mr;const e=t.originalText?t.originalText.split("").reduce((kr,yr)=>(kr+yr.charCodeAt(0))%1e3,0):0;let r=0,n=0;const i=t.statistics.wordCount,a=e%20-10;i>100?r+=85+a:i>50?r+=70+a*.8:i>20?r+=55+a*.6:r+=40+a*.4,n++;const s=t.statistics.sentenceCount||1,f=i/s,_=e*3%15-7;f>=8&&f<=25?r+=80+_:f>=5&&f<=35?r+=65+_*.7:r+=45+_*.5,n++;const N=t.keywords?t.keywords.length:0,I=e*7%12-6;N>15?r+=90+I:N>8?r+=75+I*.8:N>3?r+=60+I*.6:r+=45+I*.4,n++;const me=t.namedEntities||{},fe=(((ct=me.people)==null?void 0:ct.length)||0)+(((xt=me.organizations)==null?void 0:xt.length)||0)+(((Pt=me.locations)==null?void 0:Pt.length)||0),Te=e*11%10-5;fe>8?r+=85+Te:fe>3?r+=70+Te*.8:fe>0?r+=55+Te*.6:r+=40+Te*.4,n++;const qe=((ir=t.sentiment)==null?void 0:ir.confidence)||.5,Ve=e*13%8-4;r+=qe*80+Ve,n++;const Ue=t.readabilityScore||50,Ee=e*17%14-7;Ue>70?r+=85+Ee:Ue>50?r+=70+Ee*.8:Ue>30?r+=55+Ee*.6:r+=40+Ee*.4,n++;const Fe=(((mr=t.originalText)==null?void 0:mr.match(/[.!?;:]/g))||[]).length,He=e*19%6-3,tt=Fe/Math.max(s,1);tt>=.8&&tt<=1.5?r+=75+He:tt>=.5&&tt<=2?r+=65+He*.8:r+=50+He*.5,n++;const et=Math.round(r/n);return Math.max(30,Math.min(95,et))},k8=t=>{var I,me,fe,Te,qe,Ve,Ue,Ee,Fe,He,tt,et,ct,xt,Pt,ir,mr,kr,yr,vt,gt,It,ut,qt,Vt;console.log("Generating chart data for analysis:",t);const e=t.sentiment||{label:"Neutral",confidence:.5,score:0},r=t.keywords||[],n=t.topicDistribution||[],i=t.emotionAnalysis||[],a=t.questionAnalysis||{},s=t.linguisticAnalysis||{},f=t.timeAnalysis||{},_={positive:e.label==="Positive"?e.confidence*100:e.score>0?Math.abs(e.score)*50:20,negative:e.label==="Negative"?e.confidence*100:e.score<0?Math.abs(e.score)*50:15,neutral:e.label==="Neutral"?70:100-e.confidence*100},N=_.positive+_.negative+_.neutral;return _.positive=_.positive/N*100,_.negative=_.negative/N*100,_.neutral=_.neutral/N*100,{sentimentPieData:{labels:["Positive","Negative","Neutral"],datasets:[{data:[_.positive,_.negative,_.neutral],backgroundColor:["#4CAF50","#F44336","#FF9800"],borderColor:["#388E3C","#D32F2F","#F57C00"],borderWidth:2,hoverBackgroundColor:["#66BB6A","#EF5350","#FFB74D"],hoverBorderColor:["#2E7D32","#C62828","#E65100"],hoverBorderWidth:3}]},keywordsBarData:{labels:r.slice(0,8).map(Ot=>Ot.word||Ot),datasets:[{label:"Frequency",data:r.slice(0,8).map(Ot=>Ot.count||1),backgroundColor:["#2196F3","#4CAF50","#FF9800","#9C27B0","#F44336","#00BCD4","#FFEB3B","#795548"],borderColor:["#1976D2","#388E3C","#F57C00","#7B1FA2","#D32F2F","#0097A7","#FBC02D","#5D4037"],borderWidth:1,hoverBackgroundColor:["#42A5F5","#66BB6A","#FFB74D","#BA68C8","#EF5350","#26C6DA","#FFF176","#8D6E63"]}]},topicDistributionData:{labels:n.length>0?n.slice(0,6).map(Ot=>Ot.topic||Ot):["Technology","Communication","Analysis","Process","Data","Results"],datasets:[{data:n.length>0?n.slice(0,6).map(Ot=>Ot.count||1):[25,20,18,15,12,10],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40"],borderColor:["#FF4757","#2F80ED","#FFC048","#00D2D3","#8B5CF6","#FF6B35"],borderWidth:2,hoverBackgroundColor:["#FF7596","#4DABF7","#FFD93D","#6BCF7F","#A78BFA","#FF8A65"]}]},emotionsRadarData:{labels:i.length>0?i.map(Ot=>Ot.emotion||Ot):["Joy","Trust","Surprise","Sadness","Fear","Anger"],datasets:[{label:"Emotional Intensity",data:i.length>0?i.map(Ot=>(Ot.count||1)*10):[40,35,25,15,10,8],backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",pointBackgroundColor:"rgba(54, 162, 235, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(54, 162, 235, 1)",pointRadius:6,pointHoverRadius:8,fill:!0}]},questionTypesData:{labels:["What","How","Why","When","Where","Who","Yes/No","Other"],datasets:[{data:[((I=a.questionTypes)==null?void 0:I.what)||0,((me=a.questionTypes)==null?void 0:me.how)||0,((fe=a.questionTypes)==null?void 0:fe.why)||0,((Te=a.questionTypes)==null?void 0:Te.when)||0,((qe=a.questionTypes)==null?void 0:qe.where)||0,((Ve=a.questionTypes)==null?void 0:Ve.who)||0,((Ue=a.questionTypes)==null?void 0:Ue.yesNo)||0,((Ee=a.questionTypes)==null?void 0:Ee.other)||0],backgroundColor:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F"],borderColor:["#FF5252","#26A69A","#2196F3","#81C784","#FFD54F","#CE93D8","#80CBC4","#F4D03F"],borderWidth:2}]},complexityData:{labels:["Simple","Moderate","Complex"],datasets:[{data:[((Fe=a.complexityLevels)==null?void 0:Fe.simple)||0,((He=a.complexityLevels)==null?void 0:He.moderate)||0,((tt=a.complexityLevels)==null?void 0:tt.complex)||0],backgroundColor:["#4CAF50","#FF9800","#F44336"],borderColor:["#388E3C","#F57C00","#D32F2F"],borderWidth:2}]},timeComplexityData:{datasets:[{label:"Content Analysis",data:[{x:((et=t.statistics)==null?void 0:et.readingTime)||0,y:t.readabilityScore||0,r:Math.sqrt((((ct=t.statistics)==null?void 0:ct.wordCount)||0)/10)}],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",pointHoverBackgroundColor:"rgba(255, 99, 132, 0.8)",pointHoverBorderColor:"rgba(255, 99, 132, 1)"}]},linguisticData:{labels:["Word Complexity","Sentence Variety","Vocabulary Richness","Readability"],datasets:[{label:"Linguistic Features",data:[parseFloat(s.vocabularyComplexity)||30,s.sentenceTypes?Object.keys(s.sentenceTypes).length*20:60,s.uniqueWords?Math.min(100,s.uniqueWords/(((xt=t.statistics)==null?void 0:xt.wordCount)||100)*100):40,t.readabilityScore||50],backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",pointBackgroundColor:"rgba(75, 192, 192, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(75, 192, 192, 1)",fill:!0}]},timeReferenceData:{labels:["Past","Present","Future"],datasets:[{data:[((Pt=f.timeOrientation)==null?void 0:Pt.past)||10,((ir=f.timeOrientation)==null?void 0:ir.present)||60,((mr=f.timeOrientation)==null?void 0:mr.future)||30],backgroundColor:["#8BC34A","#2196F3","#FF9800"],borderColor:["#689F38","#1976D2","#F57C00"],borderWidth:2}]},statisticsData:{wordCount:((kr=t.statistics)==null?void 0:kr.wordCount)||0,sentenceCount:((yr=t.statistics)==null?void 0:yr.sentenceCount)||0,readingTime:((vt=t.statistics)==null?void 0:vt.readingTime)||0,readabilityScore:Math.round(t.readabilityScore||0),sentimentScore:Math.round((((gt=t.sentiment)==null?void 0:gt.score)||0)*100),confidenceScore:S8(t),questionCount:a.totalQuestions||0,topicCount:n.length||0,emotionCount:i.length||0,complexityLevel:((ut=(It=t.contentAnalysis)==null?void 0:It.overview)==null?void 0:ut.complexity)||"Medium"},advancedMetrics:{contentDiversity:Math.min(100,(n.length||3)*20),emotionalRange:Math.min(100,(i.length||3)*15),questionComplexity:a.averageComplexity==="complex"?80:a.averageComplexity==="moderate"?60:40,linguisticRichness:s.uniqueWords?Math.min(100,s.uniqueWords/(((qt=t.statistics)==null?void 0:qt.wordCount)||100)*200):50,analyticalDepth:(Vt=t.insights)!=null&&Vt.length?t.insights.length*15:45}}},R3=t=>{const e=t.split(/[.!?]+/).filter(_=>_.trim().length>10),r=t.toLowerCase().split(/\s+/),n=Zc(t),i=e.filter(_=>{const N=_.toLowerCase();return N.includes("result")||N.includes("outcome")||N.includes("demonstrate")||N.includes("show")||N.includes("prove")||N.includes("indicate")||N.includes("significant")||N.includes("important")||N.includes("clear")||N.includes("evident")}),a=[],s=Object.entries(n).filter(([_])=>_.length>4).sort((_,N)=>N[1]-_[1]).slice(0,3).map(([_])=>_);return s.length>0&&a.push(`The discussion primarily focuses on ${s.join(", ")}, highlighting key themes throughout the content.`),r.length/e.length>15?a.push("The content demonstrates sophisticated language use with complex sentence structures, indicating detailed analysis."):a.push("The content uses clear, concise language making it accessible to a broad audience."),i.length>0&&a.push(i[0].trim()),a.length>0?a:["Analysis suggests comprehensive coverage of the topic with detailed explanations."]},M8=t=>{t.split(/[.!?]+/).filter(f=>f.trim().length>10);const e=t.toLowerCase().split(/\s+/),r=Zc(t),n=[],i=Object.entries(r).filter(([f])=>f.length>4).sort((f,_)=>_[1]-f[1]).slice(0,3).map(([f])=>f);return i.length>0&&(n.push(`What are the key implications of ${i[0]}?`),i.length>1&&n.push(`How does ${i[0]} relate to ${i[1]}?`)),e.filter(f=>f.includes("problem")||f.includes("issue")||f.includes("challenge")||f.includes("difficult")).length>0&&n.push("What solutions are proposed for the identified challenges?"),e.filter(f=>f.includes("process")||f.includes("method")||f.includes("approach")||f.includes("technique")).length>0&&n.push("What are the benefits and limitations of this approach?"),e.length>200&&n.push("What are the main takeaways from this detailed analysis?"),n.length>0?n:["What are the key points to remember from this content?"]};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pf(t){return t+.5|0}const Hl=(t,e,r)=>Math.max(Math.min(t,r),e);function Pd(t){return Hl(Pf(t*2.55),0,255)}function ec(t){return Hl(Pf(t*255),0,255)}function pl(t){return Hl(Pf(t/2.55)/100,0,1)}function Fb(t){return Hl(Pf(t*100),0,100)}const fo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},t0=[..."0123456789ABCDEF"],T8=t=>t0[t&15],A8=t=>t0[(t&240)>>4]+t0[t&15],Oh=t=>(t&240)>>4===(t&15),C8=t=>Oh(t.r)&&Oh(t.g)&&Oh(t.b)&&Oh(t.a);function j8(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&fo[t[1]]*17,g:255&fo[t[2]]*17,b:255&fo[t[3]]*17,a:e===5?fo[t[4]]*17:255}:(e===7||e===9)&&(r={r:fo[t[1]]<<4|fo[t[2]],g:fo[t[3]]<<4|fo[t[4]],b:fo[t[5]]<<4|fo[t[6]],a:e===9?fo[t[7]]<<4|fo[t[8]]:255})),r}const L8=(t,e)=>t<255?e(t):"";function E8(t){var e=C8(t)?T8:A8;return t?"#"+e(t.r)+e(t.g)+e(t.b)+L8(t.a,e):void 0}const D8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function P3(t,e,r){const n=e*Math.min(r,1-r),i=(a,s=(a+t/30)%12)=>r-n*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function R8(t,e,r){const n=(i,a=(i+t/60)%6)=>r-r*e*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function P8(t,e,r){const n=P3(t,1,.5);let i;for(e+r>1&&(i=1/(e+r),e*=i,r*=i),i=0;i<3;i++)n[i]*=1-e-r,n[i]+=e;return n}function N8(t,e,r,n,i){return t===i?(e-r)/n+(e<r?6:0):e===i?(r-t)/n+2:(t-e)/n+4}function hy(t){const r=t.r/255,n=t.g/255,i=t.b/255,a=Math.max(r,n,i),s=Math.min(r,n,i),f=(a+s)/2;let _,N,I;return a!==s&&(I=a-s,N=f>.5?I/(2-a-s):I/(a+s),_=N8(r,n,i,I,a),_=_*60+.5),[_|0,N||0,f]}function py(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(ec)}function my(t,e,r){return py(P3,t,e,r)}function z8(t,e,r){return py(P8,t,e,r)}function F8(t,e,r){return py(R8,t,e,r)}function N3(t){return(t%360+360)%360}function I8(t){const e=D8.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?Pd(+e[5]):ec(+e[5]));const i=N3(+e[2]),a=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?n=z8(i,a,s):e[1]==="hsv"?n=F8(i,a,s):n=my(i,a,s),{r:n[0],g:n[1],b:n[2],a:r}}function O8(t,e){var r=hy(t);r[0]=N3(r[0]+e),r=my(r),t.r=r[0],t.g=r[1],t.b=r[2]}function B8(t){if(!t)return;const e=hy(t),r=e[0],n=Fb(e[1]),i=Fb(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${i}%, ${pl(t.a)})`:`hsl(${r}, ${n}%, ${i}%)`}const Ib={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ob={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function H8(){const t={},e=Object.keys(Ob),r=Object.keys(Ib);let n,i,a,s,f;for(n=0;n<e.length;n++){for(s=f=e[n],i=0;i<r.length;i++)a=r[i],f=f.replace(a,Ib[a]);a=parseInt(Ob[s],16),t[f]=[a>>16&255,a>>8&255,a&255]}return t}let Bh;function W8(t){Bh||(Bh=H8(),Bh.transparent=[0,0,0,0]);const e=Bh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const q8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function U8(t){const e=q8.exec(t);let r=255,n,i,a;if(e){if(e[7]!==n){const s=+e[7];r=e[8]?Pd(s):Hl(s*255,0,255)}return n=+e[1],i=+e[3],a=+e[5],n=255&(e[2]?Pd(n):Hl(n,0,255)),i=255&(e[4]?Pd(i):Hl(i,0,255)),a=255&(e[6]?Pd(a):Hl(a,0,255)),{r:n,g:i,b:a,a:r}}}function V8(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${pl(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Bv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,vu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function $8(t,e,r){const n=vu(pl(t.r)),i=vu(pl(t.g)),a=vu(pl(t.b));return{r:ec(Bv(n+r*(vu(pl(e.r))-n))),g:ec(Bv(i+r*(vu(pl(e.g))-i))),b:ec(Bv(a+r*(vu(pl(e.b))-a))),a:t.a+r*(e.a-t.a)}}function Hh(t,e,r){if(t){let n=hy(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=my(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function z3(t,e){return t&&Object.assign(e||{},t)}function Bb(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ec(t[3]))):(e=z3(t,{r:0,g:0,b:0,a:1}),e.a=ec(e.a)),e}function Y8(t){return t.charAt(0)==="r"?U8(t):I8(t)}class bf{constructor(e){if(e instanceof bf)return e;const r=typeof e;let n;r==="object"?n=Bb(e):r==="string"&&(n=j8(e)||W8(e)||Y8(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=z3(this._rgb);return e&&(e.a=pl(e.a)),e}set rgb(e){this._rgb=Bb(e)}rgbString(){return this._valid?V8(this._rgb):void 0}hexString(){return this._valid?E8(this._rgb):void 0}hslString(){return this._valid?B8(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,i=e.rgb;let a;const s=r===a?.5:r,f=2*s-1,_=n.a-i.a,N=((f*_===-1?f:(f+_)/(1+f*_))+1)/2;a=1-N,n.r=255&N*n.r+a*i.r+.5,n.g=255&N*n.g+a*i.g+.5,n.b=255&N*n.b+a*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=$8(this._rgb,e._rgb,r)),this}clone(){return new bf(this.rgb)}alpha(e){return this._rgb.a=ec(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=Pf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Hh(this._rgb,2,e),this}darken(e){return Hh(this._rgb,2,-e),this}saturate(e){return Hh(this._rgb,1,e),this}desaturate(e){return Hh(this._rgb,1,-e),this}rotate(e){return O8(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ll(){}const G8=(()=>{let t=0;return()=>t++})();function fi(t){return t==null}function oa(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function mi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function _a(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Xs(t,e){return _a(t)?t:e}function Qn(t,e){return typeof t>"u"?e:t}const X8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,F3=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Xi(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function Di(t,e,r,n){let i,a,s;if(oa(t))for(a=t.length,i=0;i<a;i++)e.call(r,t[i],i);else if(mi(t))for(s=Object.keys(t),a=s.length,i=0;i<a;i++)e.call(r,t[s[i]],s[i])}function Yp(t,e){let r,n,i,a;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(i=t[r],a=e[r],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function Gp(t){if(oa(t))return t.map(Gp);if(mi(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let i=0;for(;i<n;++i)e[r[i]]=Gp(t[r[i]]);return e}return t}function I3(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Z8(t,e,r,n){if(!I3(t))return;const i=e[t],a=r[t];mi(i)&&mi(a)?wf(i,a,n):e[t]=Gp(a)}function wf(t,e,r){const n=oa(e)?e:[e],i=n.length;if(!mi(t))return t;r=r||{};const a=r.merger||Z8;let s;for(let f=0;f<i;++f){if(s=n[f],!mi(s))continue;const _=Object.keys(s);for(let N=0,I=_.length;N<I;++N)a(_[N],t,s,r)}return t}function Zd(t,e){return wf(t,e,{merger:K8})}function K8(t,e,r){if(!I3(t))return;const n=e[t],i=r[t];mi(n)&&mi(i)?Zd(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Gp(i))}const Hb={"":t=>t,x:t=>t.x,y:t=>t.y};function J8(t){const e=t.split("."),r=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function Q8(t){const e=J8(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function ic(t,e){return(Hb[e]||(Hb[e]=Q8(e)))(t)}function vy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const _f=t=>typeof t<"u",ac=t=>typeof t=="function",Wb=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function e7(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Si=Math.PI,ra=2*Si,t7=ra+Si,Xp=Number.POSITIVE_INFINITY,r7=Si/180,ja=Si/2,Mc=Si/4,qb=Si*2/3,Wl=Math.log10,Jo=Math.sign;function Kd(t,e,r){return Math.abs(t-e)<r}function Ub(t){const e=Math.round(t);t=Kd(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(Wl(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function n7(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((i,a)=>i-a).pop(),e}function i7(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Uu(t){return!i7(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function a7(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function O3(t,e,r){let n,i,a;for(n=0,i=t.length;n<i;n++)a=t[n][r],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Co(t){return t*(Si/180)}function gy(t){return t*(180/Si)}function Vb(t){if(!_a(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function B3(t,e){const r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n);let a=Math.atan2(n,r);return a<-.5*Si&&(a+=ra),{angle:a,distance:i}}function r0(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function s7(t,e){return(t-e+t7)%ra-Si}function ms(t){return(t%ra+ra)%ra}function Sf(t,e,r,n){const i=ms(t),a=ms(e),s=ms(r),f=ms(a-i),_=ms(s-i),N=ms(i-a),I=ms(i-s);return i===a||i===s||n&&a===s||f>_&&N<I}function $a(t,e,r){return Math.max(e,Math.min(r,t))}function o7(t){return $a(t,-32768,32767)}function gl(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function yy(t,e,r){r=r||(s=>t[s]<e);let n=t.length-1,i=0,a;for(;n-i>1;)a=i+n>>1,r(a)?i=a:n=a;return{lo:i,hi:n}}const yl=(t,e,r,n)=>yy(t,r,n?i=>{const a=t[i][e];return a<r||a===r&&t[i+1][e]===r}:i=>t[i][e]<r),l7=(t,e,r)=>yy(t,r,n=>t[n][e]>=r);function c7(t,e,r){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>r;)i--;return n>0||i<t.length?t.slice(n,i):t}const H3=["push","pop","shift","splice","unshift"];function u7(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),H3.forEach(r=>{const n="_onData"+vy(r),i=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...a){const s=i.apply(this,a);return t._chartjs.listeners.forEach(f=>{typeof f[n]=="function"&&f[n](...a)}),s}})})}function $b(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(H3.forEach(a=>{delete t[a]}),delete t._chartjs)}function W3(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const q3=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function U3(t,e){let r=[],n=!1;return function(...i){r=i,n||(n=!0,q3.call(window,()=>{n=!1,t.apply(e,r)}))}}function d7(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const xy=t=>t==="start"?"left":t==="end"?"right":"center",ps=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,f7=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function V3(t,e,r){const n=e.length;let i=0,a=n;if(t._sorted){const{iScale:s,vScale:f,_parsed:_}=t,N=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,I=s.axis,{min:me,max:fe,minDefined:Te,maxDefined:qe}=s.getUserBounds();if(Te){if(i=Math.min(yl(_,I,me).lo,r?n:yl(e,I,s.getPixelForValue(me)).lo),N){const Ve=_.slice(0,i+1).reverse().findIndex(Ue=>!fi(Ue[f.axis]));i-=Math.max(0,Ve)}i=$a(i,0,n-1)}if(qe){let Ve=Math.max(yl(_,s.axis,fe,!0).hi+1,r?0:yl(e,I,s.getPixelForValue(fe),!0).hi+1);if(N){const Ue=_.slice(Ve-1).findIndex(Ee=>!fi(Ee[f.axis]));Ve+=Math.max(0,Ue)}a=$a(Ve,i,n)-i}else a=n-i}return{start:i,count:a}}function $3(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=i,!0;const a=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,i),a}const Wh=t=>t===0||t===1,Yb=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ra/r)),Gb=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*ra/r)+1,Jd={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ja)+1,easeOutSine:t=>Math.sin(t*ja),easeInOutSine:t=>-.5*(Math.cos(Si*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Wh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Wh(t)?t:Yb(t,.075,.3),easeOutElastic:t=>Wh(t)?t:Gb(t,.075,.3),easeInOutElastic(t){return Wh(t)?t:t<.5?.5*Yb(t*2,.1125,.45):.5+.5*Gb(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Jd.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Jd.easeInBounce(t*2)*.5:Jd.easeOutBounce(t*2-1)*.5+.5};function by(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Xb(t){return by(t)?t:new bf(t)}function Hv(t){return by(t)?t:new bf(t).saturate(.5).darken(.1).hexString()}const h7=["x","y","borderWidth","radius","tension"],p7=["color","borderColor","backgroundColor"];function m7(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:p7},numbers:{type:"number",properties:h7}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function v7(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Zb=new Map;function g7(t,e){e=e||{};const r=t+JSON.stringify(e);let n=Zb.get(r);return n||(n=new Intl.NumberFormat(t,e),Zb.set(r,n)),n}function Nf(t,e,r){return g7(e,r).format(t)}const Y3={values(t){return oa(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let i,a=t;if(r.length>1){const N=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(N<1e-4||N>1e15)&&(i="scientific"),a=y7(t,r)}const s=Wl(Math.abs(a)),f=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),_={notation:i,minimumFractionDigits:f,maximumFractionDigits:f};return Object.assign(_,this.options.ticks.format),Nf(t,n,_)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(Wl(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?Y3.numeric.call(this,t,e,r):""}};function y7(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var gm={formatters:Y3};function x7(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const $c=Object.create(null),n0=Object.create(null);function Qd(t,e){if(!e)return t;const r=e.split(".");for(let n=0,i=r.length;n<i;++n){const a=r[n];t=t[a]||(t[a]=Object.create(null))}return t}function Wv(t,e,r){return typeof e=="string"?wf(Qd(t,e),r):wf(Qd(t,""),e)}class b7{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Hv(i.backgroundColor),this.hoverBorderColor=(n,i)=>Hv(i.borderColor),this.hoverColor=(n,i)=>Hv(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return Wv(this,e,r)}get(e){return Qd(this,e)}describe(e,r){return Wv(n0,e,r)}override(e,r){return Wv($c,e,r)}route(e,r,n,i){const a=Qd(this,e),s=Qd(this,n),f="_"+r;Object.defineProperties(a,{[f]:{value:a[r],writable:!0},[r]:{enumerable:!0,get(){const _=this[f],N=s[i];return mi(_)?Object.assign({},N,_):Qn(_,N)},set(_){this[f]=_}}})}apply(e){e.forEach(r=>r(this))}}var la=new b7({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[m7,v7,x7]);function w7(t){return!t||fi(t.size)||fi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Zp(t,e,r,n,i){let a=e[i];return a||(a=e[i]=t.measureText(i).width,r.push(i)),a>n&&(n=a),n}function _7(t,e,r,n){n=n||{};let i=n.data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},a=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let s=0;const f=r.length;let _,N,I,me,fe;for(_=0;_<f;_++)if(me=r[_],me!=null&&!oa(me))s=Zp(t,i,a,s,me);else if(oa(me))for(N=0,I=me.length;N<I;N++)fe=me[N],fe!=null&&!oa(fe)&&(s=Zp(t,i,a,s,fe));t.restore();const Te=a.length/2;if(Te>r.length){for(_=0;_<Te;_++)delete i[a[_]];a.splice(0,Te)}return s}function Tc(t,e,r){const n=t.currentDevicePixelRatio,i=r!==0?Math.max(r/2,.5):0;return Math.round((e-i)*n)/n+i}function Kb(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function i0(t,e,r,n){G3(t,e,r,n,null)}function G3(t,e,r,n,i){let a,s,f,_,N,I,me,fe;const Te=e.pointStyle,qe=e.rotation,Ve=e.radius;let Ue=(qe||0)*r7;if(Te&&typeof Te=="object"&&(a=Te.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(Ue),t.drawImage(Te,-Te.width/2,-Te.height/2,Te.width,Te.height),t.restore();return}if(!(isNaN(Ve)||Ve<=0)){switch(t.beginPath(),Te){default:i?t.ellipse(r,n,i/2,Ve,0,0,ra):t.arc(r,n,Ve,0,ra),t.closePath();break;case"triangle":I=i?i/2:Ve,t.moveTo(r+Math.sin(Ue)*I,n-Math.cos(Ue)*Ve),Ue+=qb,t.lineTo(r+Math.sin(Ue)*I,n-Math.cos(Ue)*Ve),Ue+=qb,t.lineTo(r+Math.sin(Ue)*I,n-Math.cos(Ue)*Ve),t.closePath();break;case"rectRounded":N=Ve*.516,_=Ve-N,s=Math.cos(Ue+Mc)*_,me=Math.cos(Ue+Mc)*(i?i/2-N:_),f=Math.sin(Ue+Mc)*_,fe=Math.sin(Ue+Mc)*(i?i/2-N:_),t.arc(r-me,n-f,N,Ue-Si,Ue-ja),t.arc(r+fe,n-s,N,Ue-ja,Ue),t.arc(r+me,n+f,N,Ue,Ue+ja),t.arc(r-fe,n+s,N,Ue+ja,Ue+Si),t.closePath();break;case"rect":if(!qe){_=Math.SQRT1_2*Ve,I=i?i/2:_,t.rect(r-I,n-_,2*I,2*_);break}Ue+=Mc;case"rectRot":me=Math.cos(Ue)*(i?i/2:Ve),s=Math.cos(Ue)*Ve,f=Math.sin(Ue)*Ve,fe=Math.sin(Ue)*(i?i/2:Ve),t.moveTo(r-me,n-f),t.lineTo(r+fe,n-s),t.lineTo(r+me,n+f),t.lineTo(r-fe,n+s),t.closePath();break;case"crossRot":Ue+=Mc;case"cross":me=Math.cos(Ue)*(i?i/2:Ve),s=Math.cos(Ue)*Ve,f=Math.sin(Ue)*Ve,fe=Math.sin(Ue)*(i?i/2:Ve),t.moveTo(r-me,n-f),t.lineTo(r+me,n+f),t.moveTo(r+fe,n-s),t.lineTo(r-fe,n+s);break;case"star":me=Math.cos(Ue)*(i?i/2:Ve),s=Math.cos(Ue)*Ve,f=Math.sin(Ue)*Ve,fe=Math.sin(Ue)*(i?i/2:Ve),t.moveTo(r-me,n-f),t.lineTo(r+me,n+f),t.moveTo(r+fe,n-s),t.lineTo(r-fe,n+s),Ue+=Mc,me=Math.cos(Ue)*(i?i/2:Ve),s=Math.cos(Ue)*Ve,f=Math.sin(Ue)*Ve,fe=Math.sin(Ue)*(i?i/2:Ve),t.moveTo(r-me,n-f),t.lineTo(r+me,n+f),t.moveTo(r+fe,n-s),t.lineTo(r-fe,n+s);break;case"line":s=i?i/2:Math.cos(Ue)*Ve,f=Math.sin(Ue)*Ve,t.moveTo(r-s,n-f),t.lineTo(r+s,n+f);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(Ue)*(i?i/2:Ve),n+Math.sin(Ue)*Ve);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function xl(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function ym(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function xm(t){t.restore()}function S7(t,e,r,n,i){if(!e)return t.lineTo(r.x,r.y);if(i==="middle"){const a=(e.x+r.x)/2;t.lineTo(a,e.y),t.lineTo(a,r.y)}else i==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function k7(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function M7(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),fi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function T7(t,e,r,n,i){if(i.strikethrough||i.underline){const a=t.measureText(n),s=e-a.actualBoundingBoxLeft,f=e+a.actualBoundingBoxRight,_=r-a.actualBoundingBoxAscent,N=r+a.actualBoundingBoxDescent,I=i.strikethrough?(_+N)/2:N;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(s,I),t.lineTo(f,I),t.stroke()}}function A7(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Yc(t,e,r,n,i,a={}){const s=oa(e)?e:[e],f=a.strokeWidth>0&&a.strokeColor!=="";let _,N;for(t.save(),t.font=i.string,M7(t,a),_=0;_<s.length;++_)N=s[_],a.backdrop&&A7(t,a.backdrop),f&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),fi(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(N,r,n,a.maxWidth)),t.fillText(N,r,n,a.maxWidth),T7(t,r,n,N,a),n+=Number(i.lineHeight);t.restore()}function kf(t,e){const{x:r,y:n,w:i,h:a,radius:s}=e;t.arc(r+s.topLeft,n+s.topLeft,s.topLeft,1.5*Si,Si,!0),t.lineTo(r,n+a-s.bottomLeft),t.arc(r+s.bottomLeft,n+a-s.bottomLeft,s.bottomLeft,Si,ja,!0),t.lineTo(r+i-s.bottomRight,n+a),t.arc(r+i-s.bottomRight,n+a-s.bottomRight,s.bottomRight,ja,0,!0),t.lineTo(r+i,n+s.topRight),t.arc(r+i-s.topRight,n+s.topRight,s.topRight,0,-ja,!0),t.lineTo(r+s.topLeft,n)}const C7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,j7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function L7(t,e){const r=(""+t).match(C7);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const E7=t=>+t||0;function wy(t,e){const r={},n=mi(e),i=n?Object.keys(e):e,a=mi(t)?n?s=>Qn(t[s],t[e[s]]):s=>t[s]:()=>t;for(const s of i)r[s]=E7(a(s));return r}function X3(t){return wy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Oc(t){return wy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function xs(t){const e=X3(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Oa(t,e){t=t||{},e=e||la.font;let r=Qn(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=Qn(t.style,e.style);n&&!(""+n).match(j7)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:Qn(t.family,e.family),lineHeight:L7(Qn(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:Qn(t.weight,e.weight),string:""};return i.string=w7(i),i}function Nd(t,e,r,n){let i,a,s;for(i=0,a=t.length;i<a;++i)if(s=t[i],s!==void 0&&s!==void 0)return s}function D7(t,e,r){const{min:n,max:i}=t,a=F3(e,(i-n)/2),s=(f,_)=>r&&f===0?0:f+_;return{min:s(n,-Math.abs(a)),max:s(i,a)}}function cc(t,e){return Object.assign(Object.create(t),e)}function _y(t,e=[""],r,n,i=()=>t[0]){const a=r||t;typeof n>"u"&&(n=Q3("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:n,_getTarget:i,override:f=>_y([f,...t],e,a,n)};return new Proxy(s,{deleteProperty(f,_){return delete f[_],delete f._keys,delete t[0][_],!0},get(f,_){return K3(f,_,()=>B7(_,e,t,f))},getOwnPropertyDescriptor(f,_){return Reflect.getOwnPropertyDescriptor(f._scopes[0],_)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(f,_){return Qb(f).includes(_)},ownKeys(f){return Qb(f)},set(f,_,N){const I=f._storage||(f._storage=i());return f[_]=I[_]=N,delete f._keys,!0}})}function Vu(t,e,r,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:Z3(t,n),setContext:a=>Vu(t,a,r,n),override:a=>Vu(t.override(a),e,r,n)};return new Proxy(i,{deleteProperty(a,s){return delete a[s],delete t[s],!0},get(a,s,f){return K3(a,s,()=>P7(a,s,f))},getOwnPropertyDescriptor(a,s){return a._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(a,s,f){return t[s]=f,delete a[s],!0}})}function Z3(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:r,indexable:n,isScriptable:ac(r)?r:()=>r,isIndexable:ac(n)?n:()=>n}}const R7=(t,e)=>t?t+vy(e):e,Sy=(t,e)=>mi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function K3(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function P7(t,e,r){const{_proxy:n,_context:i,_subProxy:a,_descriptors:s}=t;let f=n[e];return ac(f)&&s.isScriptable(e)&&(f=N7(e,f,t,r)),oa(f)&&f.length&&(f=z7(e,f,t,s.isIndexable)),Sy(e,f)&&(f=Vu(f,i,a&&a[e],s)),f}function N7(t,e,r,n){const{_proxy:i,_context:a,_subProxy:s,_stack:f}=r;if(f.has(t))throw new Error("Recursion detected: "+Array.from(f).join("->")+"->"+t);f.add(t);let _=e(a,s||n);return f.delete(t),Sy(t,_)&&(_=ky(i._scopes,i,t,_)),_}function z7(t,e,r,n){const{_proxy:i,_context:a,_subProxy:s,_descriptors:f}=r;if(typeof a.index<"u"&&n(t))return e[a.index%e.length];if(mi(e[0])){const _=e,N=i._scopes.filter(I=>I!==_);e=[];for(const I of _){const me=ky(N,i,t,I);e.push(Vu(me,a,s&&s[t],f))}}return e}function J3(t,e,r){return ac(t)?t(e,r):t}const F7=(t,e)=>t===!0?e:typeof t=="string"?ic(e,t):void 0;function I7(t,e,r,n,i){for(const a of e){const s=F7(r,a);if(s){t.add(s);const f=J3(s._fallback,r,i);if(typeof f<"u"&&f!==r&&f!==n)return f}else if(s===!1&&typeof n<"u"&&r!==n)return null}return!1}function ky(t,e,r,n){const i=e._rootScopes,a=J3(e._fallback,r,n),s=[...t,...i],f=new Set;f.add(n);let _=Jb(f,s,r,a||r,n);return _===null||typeof a<"u"&&a!==r&&(_=Jb(f,s,a,_,n),_===null)?!1:_y(Array.from(f),[""],i,a,()=>O7(e,r,n))}function Jb(t,e,r,n,i){for(;r;)r=I7(t,e,r,n,i);return r}function O7(t,e,r){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return oa(i)&&mi(r)?r:i||{}}function B7(t,e,r,n){let i;for(const a of e)if(i=Q3(R7(a,t),r),typeof i<"u")return Sy(t,i)?ky(r,n,t,i):i}function Q3(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function Qb(t){let e=t._keys;return e||(e=t._keys=H7(t._scopes)),e}function H7(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function eS(t,e,r,n){const{iScale:i}=t,{key:a="r"}=this._parsing,s=new Array(n);let f,_,N,I;for(f=0,_=n;f<_;++f)N=f+r,I=e[N],s[f]={r:i.parse(ic(I,a),N)};return s}const W7=Number.EPSILON||1e-14,$u=(t,e)=>e<t.length&&!t[e].skip&&t[e],tS=t=>t==="x"?"y":"x";function q7(t,e,r,n){const i=t.skip?e:t,a=e,s=r.skip?e:r,f=r0(a,i),_=r0(s,a);let N=f/(f+_),I=_/(f+_);N=isNaN(N)?0:N,I=isNaN(I)?0:I;const me=n*N,fe=n*I;return{previous:{x:a.x-me*(s.x-i.x),y:a.y-me*(s.y-i.y)},next:{x:a.x+fe*(s.x-i.x),y:a.y+fe*(s.y-i.y)}}}function U7(t,e,r){const n=t.length;let i,a,s,f,_,N=$u(t,0);for(let I=0;I<n-1;++I)if(_=N,N=$u(t,I+1),!(!_||!N)){if(Kd(e[I],0,W7)){r[I]=r[I+1]=0;continue}i=r[I]/e[I],a=r[I+1]/e[I],f=Math.pow(i,2)+Math.pow(a,2),!(f<=9)&&(s=3/Math.sqrt(f),r[I]=i*s*e[I],r[I+1]=a*s*e[I])}}function V7(t,e,r="x"){const n=tS(r),i=t.length;let a,s,f,_=$u(t,0);for(let N=0;N<i;++N){if(s=f,f=_,_=$u(t,N+1),!f)continue;const I=f[r],me=f[n];s&&(a=(I-s[r])/3,f[`cp1${r}`]=I-a,f[`cp1${n}`]=me-a*e[N]),_&&(a=(_[r]-I)/3,f[`cp2${r}`]=I+a,f[`cp2${n}`]=me+a*e[N])}}function $7(t,e="x"){const r=tS(e),n=t.length,i=Array(n).fill(0),a=Array(n);let s,f,_,N=$u(t,0);for(s=0;s<n;++s)if(f=_,_=N,N=$u(t,s+1),!!_){if(N){const I=N[e]-_[e];i[s]=I!==0?(N[r]-_[r])/I:0}a[s]=f?N?Jo(i[s-1])!==Jo(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}U7(t,i,a),V7(t,a,e)}function qh(t,e,r){return Math.max(Math.min(t,r),e)}function Y7(t,e){let r,n,i,a,s,f=xl(t[0],e);for(r=0,n=t.length;r<n;++r)s=a,a=f,f=r<n-1&&xl(t[r+1],e),a&&(i=t[r],s&&(i.cp1x=qh(i.cp1x,e.left,e.right),i.cp1y=qh(i.cp1y,e.top,e.bottom)),f&&(i.cp2x=qh(i.cp2x,e.left,e.right),i.cp2y=qh(i.cp2y,e.top,e.bottom)))}function G7(t,e,r,n,i){let a,s,f,_;if(e.spanGaps&&(t=t.filter(N=>!N.skip)),e.cubicInterpolationMode==="monotone")$7(t,i);else{let N=n?t[t.length-1]:t[0];for(a=0,s=t.length;a<s;++a)f=t[a],_=q7(N,f,t[Math.min(a+1,s-(n?0:1))%s],e.tension),f.cp1x=_.previous.x,f.cp1y=_.previous.y,f.cp2x=_.next.x,f.cp2y=_.next.y,N=f}e.capBezierPoints&&Y7(t,r)}function My(){return typeof window<"u"&&typeof document<"u"}function Ty(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Kp(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const bm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function X7(t,e){return bm(t).getPropertyValue(e)}const Z7=["top","right","bottom","left"];function Bc(t,e,r){const n={};r=r?"-"+r:"";for(let i=0;i<4;i++){const a=Z7[i];n[a]=parseFloat(t[e+"-"+a+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const K7=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function J7(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:i,offsetY:a}=n;let s=!1,f,_;if(K7(i,a,t.target))f=i,_=a;else{const N=e.getBoundingClientRect();f=n.clientX-N.left,_=n.clientY-N.top,s=!0}return{x:f,y:_,box:s}}function Ec(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,i=bm(r),a=i.boxSizing==="border-box",s=Bc(i,"padding"),f=Bc(i,"border","width"),{x:_,y:N,box:I}=J7(t,r),me=s.left+(I&&f.left),fe=s.top+(I&&f.top);let{width:Te,height:qe}=e;return a&&(Te-=s.width+f.width,qe-=s.height+f.height),{x:Math.round((_-me)/Te*r.width/n),y:Math.round((N-fe)/qe*r.height/n)}}function Q7(t,e,r){let n,i;if(e===void 0||r===void 0){const a=t&&Ty(t);if(!a)e=t.clientWidth,r=t.clientHeight;else{const s=a.getBoundingClientRect(),f=bm(a),_=Bc(f,"border","width"),N=Bc(f,"padding");e=s.width-N.width-_.width,r=s.height-N.height-_.height,n=Kp(f.maxWidth,a,"clientWidth"),i=Kp(f.maxHeight,a,"clientHeight")}}return{width:e,height:r,maxWidth:n||Xp,maxHeight:i||Xp}}const Uh=t=>Math.round(t*10)/10;function ej(t,e,r,n){const i=bm(t),a=Bc(i,"margin"),s=Kp(i.maxWidth,t,"clientWidth")||Xp,f=Kp(i.maxHeight,t,"clientHeight")||Xp,_=Q7(t,e,r);let{width:N,height:I}=_;if(i.boxSizing==="content-box"){const fe=Bc(i,"border","width"),Te=Bc(i,"padding");N-=Te.width+fe.width,I-=Te.height+fe.height}return N=Math.max(0,N-a.width),I=Math.max(0,n?N/n:I-a.height),N=Uh(Math.min(N,s,_.maxWidth)),I=Uh(Math.min(I,f,_.maxHeight)),N&&!I&&(I=Uh(N/2)),(e!==void 0||r!==void 0)&&n&&_.height&&I>_.height&&(I=_.height,N=Uh(Math.floor(I*n))),{width:N,height:I}}function e2(t,e,r){const n=e||1,i=Math.floor(t.height*n),a=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(r||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||s.height!==i||s.width!==a?(t.currentDevicePixelRatio=n,s.height=i,s.width=a,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const tj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};My()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function t2(t,e){const r=X7(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Dc(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function rj(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function nj(t,e,r,n){const i={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},s=Dc(t,i,r),f=Dc(i,a,r),_=Dc(a,e,r),N=Dc(s,f,r),I=Dc(f,_,r);return Dc(N,I,r)}const ij=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},aj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function zu(t,e,r){return t?ij(e,r):aj()}function rS(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function nS(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function iS(t){return t==="angle"?{between:Sf,compare:s7,normalize:ms}:{between:gl,compare:(e,r)=>e-r,normalize:e=>e}}function r2({start:t,end:e,count:r,loop:n,style:i}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:i}}function sj(t,e,r){const{property:n,start:i,end:a}=r,{between:s,normalize:f}=iS(n),_=e.length;let{start:N,end:I,loop:me}=t,fe,Te;if(me){for(N+=_,I+=_,fe=0,Te=_;fe<Te&&s(f(e[N%_][n]),i,a);++fe)N--,I--;N%=_,I%=_}return I<N&&(I+=_),{start:N,end:I,loop:me,style:t.style}}function aS(t,e,r){if(!r)return[t];const{property:n,start:i,end:a}=r,s=e.length,{compare:f,between:_,normalize:N}=iS(n),{start:I,end:me,loop:fe,style:Te}=sj(t,e,r),qe=[];let Ve=!1,Ue=null,Ee,Fe,He;const tt=()=>_(i,He,Ee)&&f(i,He)!==0,et=()=>f(a,Ee)===0||_(a,He,Ee),ct=()=>Ve||tt(),xt=()=>!Ve||et();for(let Pt=I,ir=I;Pt<=me;++Pt)Fe=e[Pt%s],!Fe.skip&&(Ee=N(Fe[n]),Ee!==He&&(Ve=_(Ee,i,a),Ue===null&&ct()&&(Ue=f(Ee,i)===0?Pt:ir),Ue!==null&&xt()&&(qe.push(r2({start:Ue,end:Pt,loop:fe,count:s,style:Te})),Ue=null),ir=Pt,He=Ee));return Ue!==null&&qe.push(r2({start:Ue,end:me,loop:fe,count:s,style:Te})),qe}function sS(t,e){const r=[],n=t.segments;for(let i=0;i<n.length;i++){const a=aS(n[i],t.points,e);a.length&&r.push(...a)}return r}function oj(t,e,r,n){let i=0,a=e-1;if(r&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,r&&(a+=i);a>i&&t[a%e].skip;)a--;return a%=e,{start:i,end:a}}function lj(t,e,r,n){const i=t.length,a=[];let s=e,f=t[e],_;for(_=e+1;_<=r;++_){const N=t[_%i];N.skip||N.stop?f.skip||(n=!1,a.push({start:e%i,end:(_-1)%i,loop:n}),e=s=N.stop?_:null):(s=_,f.skip&&(e=_)),f=N}return s!==null&&a.push({start:e%i,end:s%i,loop:n}),a}function cj(t,e){const r=t.points,n=t.options.spanGaps,i=r.length;if(!i)return[];const a=!!t._loop,{start:s,end:f}=oj(r,i,a,n);if(n===!0)return n2(t,[{start:s,end:f,loop:a}],r,e);const _=f<s?f+i:f,N=!!t._fullLoop&&s===0&&f===i-1;return n2(t,lj(r,s,_,N),r,e)}function n2(t,e,r,n){return!n||!n.setContext||!r?e:uj(t,e,r,n)}function uj(t,e,r,n){const i=t._chart.getContext(),a=i2(t.options),{_datasetIndex:s,options:{spanGaps:f}}=t,_=r.length,N=[];let I=a,me=e[0].start,fe=me;function Te(qe,Ve,Ue,Ee){const Fe=f?-1:1;if(qe!==Ve){for(qe+=_;r[qe%_].skip;)qe-=Fe;for(;r[Ve%_].skip;)Ve+=Fe;qe%_!==Ve%_&&(N.push({start:qe%_,end:Ve%_,loop:Ue,style:Ee}),I=Ee,me=Ve%_)}}for(const qe of e){me=f?me:qe.start;let Ve=r[me%_],Ue;for(fe=me+1;fe<=qe.end;fe++){const Ee=r[fe%_];Ue=i2(n.setContext(cc(i,{type:"segment",p0:Ve,p1:Ee,p0DataIndex:(fe-1)%_,p1DataIndex:fe%_,datasetIndex:s}))),dj(Ue,I)&&Te(me,fe-1,qe.loop,I),Ve=Ee,I=Ue}me<fe-1&&Te(me,fe-1,qe.loop,I)}return N}function i2(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function dj(t,e){if(!e)return!1;const r=[],n=function(i,a){return by(a)?(r.includes(a)||r.push(a),r.indexOf(a)):a};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Vh(t,e,r){return t.options.clip?t[r]:e[r]}function fj(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:Vh(r,e,"left"),right:Vh(r,e,"right"),top:Vh(n,e,"top"),bottom:Vh(n,e,"bottom")}:e}function oS(t,e){const r=e._clip;if(r.disabled)return!1;const n=fj(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class hj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,i){const a=r.listeners[i],s=r.duration;a.forEach(f=>f({chart:e,initial:r.initial,numSteps:s,currentStep:Math.min(n-r.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=q3.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const a=n.items;let s=a.length-1,f=!1,_;for(;s>=0;--s)_=a[s],_._active?(_._total>n.duration&&(n.duration=_._total),_.tick(e),f=!0):(a[s]=a[a.length-1],a.pop());f&&(i.draw(),this._notify(i,n,e,"progress")),a.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),r+=a.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ul=new hj;const a2="transparent",pj={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=Xb(t||a2),i=n.valid&&Xb(e||a2);return i&&i.valid?i.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class mj{constructor(e,r,n,i){const a=r[n];i=Nd([e.to,i,a,e.from]);const s=Nd([e.from,a,i]);this._active=!0,this._fn=e.fn||pj[e.type||typeof s],this._easing=Jd[e.easing]||Jd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const i=this._target[this._prop],a=n-this._start,s=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Nd([e.to,r,i,e.from]),this._from=Nd([e.from,i,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,i=this._prop,a=this._from,s=this._loop,f=this._to;let _;if(this._active=a!==f&&(s||r<n),!this._active){this._target[i]=f,this._notify(!0);return}if(r<0){this._target[i]=a;return}_=r/n%2,_=s&&_>1?2-_:_,_=this._easing(Math.min(1,Math.max(0,_))),this._target[i]=this._fn(a,f,_)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][r]()}}class lS{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!mi(e))return;const r=Object.keys(la.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!mi(a))return;const s={};for(const f of r)s[f]=a[f];(oa(a.properties)&&a.properties||[i]).forEach(f=>{(f===i||!n.has(f))&&n.set(f,s)})})}_animateOptions(e,r){const n=r.options,i=gj(e,n);if(!i)return[];const a=this._createAnimations(i,n);return n.$shared&&vj(e.options.$animations,n).then(()=>{e.options=n},()=>{}),a}_createAnimations(e,r){const n=this._properties,i=[],a=e.$animations||(e.$animations={}),s=Object.keys(r),f=Date.now();let _;for(_=s.length-1;_>=0;--_){const N=s[_];if(N.charAt(0)==="$")continue;if(N==="options"){i.push(...this._animateOptions(e,r));continue}const I=r[N];let me=a[N];const fe=n.get(N);if(me)if(fe&&me.active()){me.update(fe,I,f);continue}else me.cancel();if(!fe||!fe.duration){e[N]=I;continue}a[N]=me=new mj(fe,e,N,I),i.push(me)}return i}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return ul.add(this._chart,n),!0}}function vj(t,e){const r=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const a=t[n[i]];a&&a.active()&&r.push(a.wait())}return Promise.all(r)}function gj(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function s2(t,e){const r=t&&t.options||{},n=r.reverse,i=r.min===void 0?e:0,a=r.max===void 0?e:0;return{start:n?a:i,end:n?i:a}}function yj(t,e,r){if(r===!1)return!1;const n=s2(t,r),i=s2(e,r);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function xj(t){let e,r,n,i;return mi(t)?(e=t.top,r=t.right,n=t.bottom,i=t.left):e=r=n=i=t,{top:e,right:r,bottom:n,left:i,disabled:t===!1}}function cS(t,e){const r=[],n=t._getSortedDatasetMetas(e);let i,a;for(i=0,a=n.length;i<a;++i)r.push(n[i].index);return r}function o2(t,e,r,n={}){const i=t.keys,a=n.mode==="single";let s,f,_,N;if(e===null)return;let I=!1;for(s=0,f=i.length;s<f;++s){if(_=+i[s],_===r){if(I=!0,n.all)continue;break}N=t.values[_],_a(N)&&(a||e===0||Jo(e)===Jo(N))&&(e+=N)}return!I&&!n.all?0:e}function bj(t,e){const{iScale:r,vScale:n}=e,i=r.axis==="x"?"x":"y",a=n.axis==="x"?"x":"y",s=Object.keys(t),f=new Array(s.length);let _,N,I;for(_=0,N=s.length;_<N;++_)I=s[_],f[_]={[i]:I,[a]:t[I]};return f}function qv(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function wj(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function _j(t){const{min:e,max:r,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}function Sj(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function l2(t,e,r,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const a=t[i.index];if(r&&a>0||!r&&a<0)return i.index}return null}function c2(t,e){const{chart:r,_cachedMeta:n}=t,i=r._stacks||(r._stacks={}),{iScale:a,vScale:s,index:f}=n,_=a.axis,N=s.axis,I=wj(a,s,n),me=e.length;let fe;for(let Te=0;Te<me;++Te){const qe=e[Te],{[_]:Ve,[N]:Ue}=qe,Ee=qe._stacks||(qe._stacks={});fe=Ee[N]=Sj(i,I,Ve),fe[f]=Ue,fe._top=l2(fe,s,!0,n.type),fe._bottom=l2(fe,s,!1,n.type);const Fe=fe._visualValues||(fe._visualValues={});Fe[f]=Ue}}function Uv(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function kj(t,e){return cc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Mj(t,e,r){return cc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function kd(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const a=i._stacks;if(!a||a[n]===void 0||a[n][r]===void 0)return;delete a[n][r],a[n]._visualValues!==void 0&&a[n]._visualValues[r]!==void 0&&delete a[n]._visualValues[r]}}}const Vv=t=>t==="reset"||t==="none",u2=(t,e)=>e?t:Object.assign({},t),Tj=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:cS(r,!0),values:null};class Eo{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&kd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),i=(me,fe,Te,qe)=>me==="x"?fe:me==="r"?qe:Te,a=r.xAxisID=Qn(n.xAxisID,Uv(e,"x")),s=r.yAxisID=Qn(n.yAxisID,Uv(e,"y")),f=r.rAxisID=Qn(n.rAxisID,Uv(e,"r")),_=r.indexAxis,N=r.iAxisID=i(_,a,s,f),I=r.vAxisID=i(_,s,a,f);r.xScale=this.getScaleForId(a),r.yScale=this.getScaleForId(s),r.rScale=this.getScaleForId(f),r.iScale=this.getScaleForId(N),r.vScale=this.getScaleForId(I)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$b(this._data,this),e._stacked&&kd(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(mi(r)){const i=this._cachedMeta;this._data=bj(r,i)}else if(n!==r){if(n){$b(n,this);const i=this._cachedMeta;kd(i),i._parsed=[]}r&&Object.isExtensible(r)&&u7(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const a=r._stacked;r._stacked=qv(r.vScale,r),r.stack!==n.stack&&(i=!0,kd(r),r.stack=n.stack),this._resyncElements(e),(i||a!==r._stacked)&&(c2(this,r._parsed),r._stacked=qv(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:i}=this,{iScale:a,_stacked:s}=n,f=a.axis;let _=e===0&&r===i.length?!0:n._sorted,N=e>0&&n._parsed[e-1],I,me,fe;if(this._parsing===!1)n._parsed=i,n._sorted=!0,fe=i;else{oa(i[e])?fe=this.parseArrayData(n,i,e,r):mi(i[e])?fe=this.parseObjectData(n,i,e,r):fe=this.parsePrimitiveData(n,i,e,r);const Te=()=>me[f]===null||N&&me[f]<N[f];for(I=0;I<r;++I)n._parsed[I+e]=me=fe[I],_&&(Te()&&(_=!1),N=me);n._sorted=_}s&&c2(this,fe)}parsePrimitiveData(e,r,n,i){const{iScale:a,vScale:s}=e,f=a.axis,_=s.axis,N=a.getLabels(),I=a===s,me=new Array(i);let fe,Te,qe;for(fe=0,Te=i;fe<Te;++fe)qe=fe+n,me[fe]={[f]:I||a.parse(N[qe],qe),[_]:s.parse(r[qe],qe)};return me}parseArrayData(e,r,n,i){const{xScale:a,yScale:s}=e,f=new Array(i);let _,N,I,me;for(_=0,N=i;_<N;++_)I=_+n,me=r[I],f[_]={x:a.parse(me[0],I),y:s.parse(me[1],I)};return f}parseObjectData(e,r,n,i){const{xScale:a,yScale:s}=e,{xAxisKey:f="x",yAxisKey:_="y"}=this._parsing,N=new Array(i);let I,me,fe,Te;for(I=0,me=i;I<me;++I)fe=I+n,Te=r[fe],N[I]={x:a.parse(ic(Te,f),fe),y:s.parse(ic(Te,_),fe)};return N}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const i=this.chart,a=this._cachedMeta,s=r[e.axis],f={keys:cS(i,!0),values:r._stacks[e.axis]._visualValues};return o2(f,s,a.index,{mode:n})}updateRangeFromParsed(e,r,n,i){const a=n[r.axis];let s=a===null?NaN:a;const f=i&&n._stacks[r.axis];i&&f&&(i.values=f,s=o2(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,r){const n=this._cachedMeta,i=n._parsed,a=n._sorted&&e===n.iScale,s=i.length,f=this._getOtherScale(e),_=Tj(r,n,this.chart),N={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:I,max:me}=_j(f);let fe,Te;function qe(){Te=i[fe];const Ve=Te[f.axis];return!_a(Te[e.axis])||I>Ve||me<Ve}for(fe=0;fe<s&&!(!qe()&&(this.updateRangeFromParsed(N,e,Te,_),a));++fe);if(a){for(fe=s-1;fe>=0;--fe)if(!qe()){this.updateRangeFromParsed(N,e,Te,_);break}}return N}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let i,a,s;for(i=0,a=r.length;i<a;++i)s=r[i][e.axis],_a(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,i=r.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=xj(Qn(this.options.clip,yj(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,i=n.data||[],a=r.chartArea,s=[],f=this._drawStart||0,_=this._drawCount||i.length-f,N=this.options.drawActiveElementsOnTop;let I;for(n.dataset&&n.dataset.draw(e,a,f,_),I=f;I<f+_;++I){const me=i[I];me.hidden||(me.active&&N?s.push(me):me.draw(e,a))}for(I=0;I<s.length;++I)s[I].draw(e,a)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const s=this._cachedMeta.data[e];a=s.$context||(s.$context=Mj(this.getContext(),e,s)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=kj(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!r,a.mode=n,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const i=r==="active",a=this._cachedDataOpts,s=e+"-"+r,f=a[s],_=this.enableOptionSharing&&_f(n);if(f)return u2(f,_);const N=this.chart.config,I=N.datasetElementScopeKeys(this._type,e),me=i?[`${e}Hover`,"hover",e,""]:[e,""],fe=N.getOptionScopes(this.getDataset(),I),Te=Object.keys(la.elements[e]),qe=()=>this.getContext(n,i,r),Ve=N.resolveNamedOptions(fe,Te,qe,me);return Ve.$shared&&(Ve.$shared=_,a[s]=Object.freeze(u2(Ve,_))),Ve}_resolveAnimations(e,r,n){const i=this.chart,a=this._cachedDataOpts,s=`animation-${r}`,f=a[s];if(f)return f;let _;if(i.options.animation!==!1){const I=this.chart.config,me=I.datasetAnimationScopeKeys(this._type,r),fe=I.getOptionScopes(this.getDataset(),me);_=I.createResolver(fe,this.getContext(e,n,r))}const N=new lS(i,_&&_.animations);return _&&_._cacheable&&(a[s]=Object.freeze(N)),N}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Vv(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),i=this._sharedOptions,a=this.getSharedOptions(n),s=this.includeOptions(r,a)||a!==i;return this.updateSharedOptions(a,r,n),{sharedOptions:a,includeOptions:s}}updateElement(e,r,n,i){Vv(i)?Object.assign(e,n):this._resolveAnimations(r,i).update(e,n)}updateSharedOptions(e,r,n){e&&!Vv(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,i){e.active=i;const a=this.getStyle(r,i);this._resolveAnimations(r,n,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[f,_,N]of this._syncList)this[f](_,N);this._syncList=[];const i=n.length,a=r.length,s=Math.min(a,i);s&&this.parse(0,s),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,r,n=!0){const i=this._cachedMeta,a=i.data,s=e+r;let f;const _=N=>{for(N.length+=r,f=N.length-1;f>=s;f--)N[f]=N[f-r]};for(_(a),f=e;f<s;++f)a[f]=new this.dataElementType;this._parsing&&_(i._parsed),this.parse(e,r),n&&this.updateElements(a,e,r,"reset")}updateElements(e,r,n,i){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,r);n._stacked&&kd(n,i)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,i]=e;this[r](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}cn(Eo,"defaults",{}),cn(Eo,"datasetElementType",null),cn(Eo,"dataElementType",null);function Aj(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,a=r.length;i<a;i++)n=n.concat(r[i].controller.getAllParsedValues(t));t._cache.$bar=W3(n.sort((i,a)=>i-a))}return t._cache.$bar}function Cj(t){const e=t.iScale,r=Aj(e,t.type);let n=e._length,i,a,s,f;const _=()=>{s===32767||s===-32768||(_f(f)&&(n=Math.min(n,Math.abs(s-f)||n)),f=s)};for(i=0,a=r.length;i<a;++i)s=e.getPixelForValue(r[i]),_();for(f=void 0,i=0,a=e.ticks.length;i<a;++i)s=e.getPixelForTick(i),_();return n}function jj(t,e,r,n){const i=r.barThickness;let a,s;return fi(i)?(a=e.min*r.categoryPercentage,s=r.barPercentage):(a=i*n,s=1),{chunk:a/n,ratio:s,start:e.pixels[t]-a/2}}function Lj(t,e,r,n){const i=e.pixels,a=i[t];let s=t>0?i[t-1]:null,f=t<i.length-1?i[t+1]:null;const _=r.categoryPercentage;s===null&&(s=a-(f===null?e.end-e.start:f-a)),f===null&&(f=a+a-s);const N=a-(a-Math.min(s,f))/2*_;return{chunk:Math.abs(f-s)/2*_/n,ratio:r.barPercentage,start:N}}function Ej(t,e,r,n){const i=r.parse(t[0],n),a=r.parse(t[1],n),s=Math.min(i,a),f=Math.max(i,a);let _=s,N=f;Math.abs(s)>Math.abs(f)&&(_=f,N=s),e[r.axis]=N,e._custom={barStart:_,barEnd:N,start:i,end:a,min:s,max:f}}function uS(t,e,r,n){return oa(t)?Ej(t,e,r,n):e[r.axis]=r.parse(t,n),e}function d2(t,e,r,n){const i=t.iScale,a=t.vScale,s=i.getLabels(),f=i===a,_=[];let N,I,me,fe;for(N=r,I=r+n;N<I;++N)fe=e[N],me={},me[i.axis]=f||i.parse(s[N],N),_.push(uS(fe,me,a,N));return _}function $v(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Dj(t,e,r){return t!==0?Jo(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function Rj(t){let e,r,n,i,a;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(i="end",a="start"):(i="start",a="end"),{start:r,end:n,reverse:e,top:i,bottom:a}}function Pj(t,e,r,n){let i=e.borderSkipped;const a={};if(!i){t.borderSkipped=a;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:s,end:f,reverse:_,top:N,bottom:I}=Rj(t);i==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?i=N:(r._bottom||0)===n?i=I:(a[f2(I,s,f,_)]=!0,i=N)),a[f2(i,s,f,_)]=!0,t.borderSkipped=a}function f2(t,e,r,n){return n?(t=Nj(t,e,r),t=h2(t,r,e)):t=h2(t,e,r),t}function Nj(t,e,r){return t===e?r:t===r?e:t}function h2(t,e,r){return t==="start"?e:t==="end"?r:t}function zj(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class hp extends Eo{parsePrimitiveData(e,r,n,i){return d2(e,r,n,i)}parseArrayData(e,r,n,i){return d2(e,r,n,i)}parseObjectData(e,r,n,i){const{iScale:a,vScale:s}=e,{xAxisKey:f="x",yAxisKey:_="y"}=this._parsing,N=a.axis==="x"?f:_,I=s.axis==="x"?f:_,me=[];let fe,Te,qe,Ve;for(fe=n,Te=n+i;fe<Te;++fe)Ve=r[fe],qe={},qe[a.axis]=a.parse(ic(Ve,N),fe),me.push(uS(ic(Ve,I),qe,s,fe));return me}updateRangeFromParsed(e,r,n,i){super.updateRangeFromParsed(e,r,n,i);const a=n._custom;a&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:i}=r,a=this.getParsed(e),s=a._custom,f=$v(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(a[i.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:f}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,i){const a=i==="reset",{index:s,_cachedMeta:{vScale:f}}=this,_=f.getBasePixel(),N=f.isHorizontal(),I=this._getRuler(),{sharedOptions:me,includeOptions:fe}=this._getSharedOptions(r,i);for(let Te=r;Te<r+n;Te++){const qe=this.getParsed(Te),Ve=a||fi(qe[f.axis])?{base:_,head:_}:this._calculateBarValuePixels(Te),Ue=this._calculateBarIndexPixels(Te,I),Ee=(qe._stacks||{})[f.axis],Fe={horizontal:N,base:Ve.base,enableBorderRadius:!Ee||$v(qe._custom)||s===Ee._top||s===Ee._bottom,x:N?Ve.head:Ue.center,y:N?Ue.center:Ve.head,height:N?Ue.size:Math.abs(Ve.size),width:N?Math.abs(Ve.size):Ue.size};fe&&(Fe.options=me||this.resolveDataElementOptions(Te,e[Te].active?"active":i));const He=Fe.options||e[Te].options;Pj(Fe,He,Ee,s),zj(Fe,He,I.ratio),this.updateElement(e[Te],Te,Fe,i)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(I=>I.controller.options.grouped),a=n.options.stacked,s=[],f=this._cachedMeta.controller.getParsed(r),_=f&&f[n.axis],N=I=>{const me=I._parsed.find(Te=>Te[n.axis]===_),fe=me&&me[I.vScale.axis];if(fi(fe)||isNaN(fe))return!0};for(const I of i)if(!(r!==void 0&&N(I))&&((a===!1||s.indexOf(I.stack)===-1||a===void 0&&I.stack===void 0)&&s.push(I.stack),I.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Qn(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,n){const i=this._getStacks(e,n),a=r!==void 0?i.indexOf(r):-1;return a===-1?i.length-1:a}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,i=[];let a,s;for(a=0,s=r.data.length;a<s;++a)i.push(n.getPixelForValue(this.getParsed(a)[n.axis],a));const f=e.barThickness;return{min:f||Cj(r),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:f?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:i},options:{base:a,minBarLength:s}}=this,f=a||0,_=this.getParsed(e),N=_._custom,I=$v(N);let me=_[r.axis],fe=0,Te=n?this.applyStack(r,_,n):me,qe,Ve;Te!==me&&(fe=Te-me,Te=me),I&&(me=N.barStart,Te=N.barEnd-N.barStart,me!==0&&Jo(me)!==Jo(N.barEnd)&&(fe=0),fe+=me);const Ue=!fi(a)&&!I?a:fe;let Ee=r.getPixelForValue(Ue);if(this.chart.getDataVisibility(e)?qe=r.getPixelForValue(fe+Te):qe=Ee,Ve=qe-Ee,Math.abs(Ve)<s){Ve=Dj(Ve,r,f)*s,me===f&&(Ee-=Ve/2);const Fe=r.getPixelForDecimal(0),He=r.getPixelForDecimal(1),tt=Math.min(Fe,He),et=Math.max(Fe,He);Ee=Math.max(Math.min(Ee,et),tt),qe=Ee+Ve,n&&!I&&(_._stacks[r.axis]._visualValues[i]=r.getValueForPixel(qe)-r.getValueForPixel(Ee))}if(Ee===r.getPixelForValue(f)){const Fe=Jo(Ve)*r.getLineWidthForValue(f)/2;Ee+=Fe,Ve-=Fe}return{size:Ve,base:Ee,head:qe,center:qe+Ve/2}}_calculateBarIndexPixels(e,r){const n=r.scale,i=this.options,a=i.skipNull,s=Qn(i.maxBarThickness,1/0);let f,_;const N=this._getAxisCount();if(r.grouped){const I=a?this._getStackCount(e):r.stackCount,me=i.barThickness==="flex"?Lj(e,r,i,I*N):jj(e,r,i,I*N),fe=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,Te=this._getAxis().indexOf(Qn(fe,this.getFirstScaleIdForIndexAxis())),qe=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+Te;f=me.start+me.chunk*qe+me.chunk/2,_=Math.min(s,me.chunk*me.ratio)}else f=n.getPixelForValue(this.getParsed(e)[n.axis],e),_=Math.min(s,r.min*r.ratio);return{base:f-_/2,head:f+_/2,center:f,size:_}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,i=n.length;let a=0;for(;a<i;++a)this.getParsed(a)[r.axis]!==null&&!n[a].hidden&&n[a].draw(this._ctx)}}cn(hp,"id","bar"),cn(hp,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),cn(hp,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class pp extends Eo{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,n,i){const a=super.parsePrimitiveData(e,r,n,i);for(let s=0;s<a.length;s++)a[s]._custom=this.resolveDataElementOptions(s+n).radius;return a}parseArrayData(e,r,n,i){const a=super.parseArrayData(e,r,n,i);for(let s=0;s<a.length;s++){const f=r[n+s];a[s]._custom=Qn(f[2],this.resolveDataElementOptions(s+n).radius)}return a}parseObjectData(e,r,n,i){const a=super.parseObjectData(e,r,n,i);for(let s=0;s<a.length;s++){const f=r[n+s];a[s]._custom=Qn(f&&f.r&&+f.r,this.resolveDataElementOptions(s+n).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let r=0;for(let n=e.length-1;n>=0;--n)r=Math.max(r,e[n].size(this.resolveDataElementOptions(n))/2);return r>0&&r}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:a}=r,s=this.getParsed(e),f=i.getLabelForValue(s.x),_=a.getLabelForValue(s.y),N=s._custom;return{label:n[e]||"",value:"("+f+", "+_+(N?", "+N:"")+")"}}update(e){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,n,i){const a=i==="reset",{iScale:s,vScale:f}=this._cachedMeta,{sharedOptions:_,includeOptions:N}=this._getSharedOptions(r,i),I=s.axis,me=f.axis;for(let fe=r;fe<r+n;fe++){const Te=e[fe],qe=!a&&this.getParsed(fe),Ve={},Ue=Ve[I]=a?s.getPixelForDecimal(.5):s.getPixelForValue(qe[I]),Ee=Ve[me]=a?f.getBasePixel():f.getPixelForValue(qe[me]);Ve.skip=isNaN(Ue)||isNaN(Ee),N&&(Ve.options=_||this.resolveDataElementOptions(fe,Te.active?"active":i),a&&(Ve.options.radius=0)),this.updateElement(Te,fe,Ve,i)}}resolveDataElementOptions(e,r){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,r);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const a=i.radius;return r!=="active"&&(i.radius=0),i.radius+=Qn(n&&n._custom,a),i}}cn(pp,"id","bubble"),cn(pp,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),cn(pp,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Fj(t,e,r){let n=1,i=1,a=0,s=0;if(e<ra){const f=t,_=f+e,N=Math.cos(f),I=Math.sin(f),me=Math.cos(_),fe=Math.sin(_),Te=(He,tt,et)=>Sf(He,f,_,!0)?1:Math.max(tt,tt*r,et,et*r),qe=(He,tt,et)=>Sf(He,f,_,!0)?-1:Math.min(tt,tt*r,et,et*r),Ve=Te(0,N,me),Ue=Te(ja,I,fe),Ee=qe(Si,N,me),Fe=qe(Si+ja,I,fe);n=(Ve-Ee)/2,i=(Ue-Fe)/2,a=-(Ve+Ee)/2,s=-(Ue+Fe)/2}return{ratioX:n,ratioY:i,offsetX:a,offsetY:s}}class zc extends Eo{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let a=_=>+n[_];if(mi(n[e])){const{key:_="value"}=this._parsing;a=N=>+ic(n[N],_)}let s,f;for(s=e,f=e+r;s<f;++s)i._parsed[s]=a(s)}}_getRotation(){return Co(this.options.rotation-90)}_getCircumference(){return Co(this.options.circumference)}_getRotationExtents(){let e=ra,r=-ra;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,a=i._getRotation(),s=i._getCircumference();e=Math.min(e,a),r=Math.max(r,a+s)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:n}=r,i=this._cachedMeta,a=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,f=Math.max((Math.min(n.width,n.height)-s)/2,0),_=Math.min(X8(this.options.cutout,f),1),N=this._getRingWeight(this.index),{circumference:I,rotation:me}=this._getRotationExtents(),{ratioX:fe,ratioY:Te,offsetX:qe,offsetY:Ve}=Fj(me,I,_),Ue=(n.width-s)/fe,Ee=(n.height-s)/Te,Fe=Math.max(Math.min(Ue,Ee)/2,0),He=F3(this.options.radius,Fe),tt=Math.max(He*_,0),et=(He-tt)/this._getVisibleDatasetWeightTotal();this.offsetX=qe*He,this.offsetY=Ve*He,i.total=this.calculateTotal(),this.outerRadius=He-et*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-et*N,0),this.updateElements(a,0,a.length,e)}_circumference(e,r){const n=this.options,i=this._cachedMeta,a=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*a/ra)}updateElements(e,r,n,i){const a=i==="reset",s=this.chart,f=s.chartArea,N=s.options.animation,I=(f.left+f.right)/2,me=(f.top+f.bottom)/2,fe=a&&N.animateScale,Te=fe?0:this.innerRadius,qe=fe?0:this.outerRadius,{sharedOptions:Ve,includeOptions:Ue}=this._getSharedOptions(r,i);let Ee=this._getRotation(),Fe;for(Fe=0;Fe<r;++Fe)Ee+=this._circumference(Fe,a);for(Fe=r;Fe<r+n;++Fe){const He=this._circumference(Fe,a),tt=e[Fe],et={x:I+this.offsetX,y:me+this.offsetY,startAngle:Ee,endAngle:Ee+He,circumference:He,outerRadius:qe,innerRadius:Te};Ue&&(et.options=Ve||this.resolveDataElementOptions(Fe,tt.active?"active":i)),Ee+=He,this.updateElement(tt,Fe,et,i)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let n=0,i;for(i=0;i<r.length;i++){const a=e._parsed[i];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(i)&&!r[i].hidden&&(n+=Math.abs(a))}return n}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?ra*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,i=n.data.labels||[],a=Nf(r._parsed[e],n.options.locale);return{label:i[e]||"",value:a}}getMaxBorderWidth(e){let r=0;const n=this.chart;let i,a,s,f,_;if(!e){for(i=0,a=n.data.datasets.length;i<a;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,f=s.controller;break}}if(!e)return 0;for(i=0,a=e.length;i<a;++i)_=f.resolveDataElementOptions(i),_.borderAlign!=="inner"&&(r=Math.max(r,_.borderWidth||0,_.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,i=e.length;n<i;++n){const a=this.resolveDataElementOptions(n);r=Math.max(r,a.offset||0,a.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(Qn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}cn(zc,"id","doughnut"),cn(zc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),cn(zc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),cn(zc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return r.labels.map((a,s)=>{const _=e.getDatasetMeta(0).controller.getStyle(s);return{text:a,fillStyle:_.backgroundColor,strokeStyle:_.borderColor,fontColor:i,lineWidth:_.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}});class mp extends Eo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:i=[],_dataset:a}=r,s=this.chart._animationsDisabled;let{start:f,count:_}=V3(r,i,s);this._drawStart=f,this._drawCount=_,$3(r)&&(f=0,_=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=i;const N=this.resolveDatasetElementOptions(e);this.options.showLine||(N.borderWidth=0),N.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:N},e),this.updateElements(i,f,_,e)}updateElements(e,r,n,i){const a=i==="reset",{iScale:s,vScale:f,_stacked:_,_dataset:N}=this._cachedMeta,{sharedOptions:I,includeOptions:me}=this._getSharedOptions(r,i),fe=s.axis,Te=f.axis,{spanGaps:qe,segment:Ve}=this.options,Ue=Uu(qe)?qe:Number.POSITIVE_INFINITY,Ee=this.chart._animationsDisabled||a||i==="none",Fe=r+n,He=e.length;let tt=r>0&&this.getParsed(r-1);for(let et=0;et<He;++et){const ct=e[et],xt=Ee?ct:{};if(et<r||et>=Fe){xt.skip=!0;continue}const Pt=this.getParsed(et),ir=fi(Pt[Te]),mr=xt[fe]=s.getPixelForValue(Pt[fe],et),kr=xt[Te]=a||ir?f.getBasePixel():f.getPixelForValue(_?this.applyStack(f,Pt,_):Pt[Te],et);xt.skip=isNaN(mr)||isNaN(kr)||ir,xt.stop=et>0&&Math.abs(Pt[fe]-tt[fe])>Ue,Ve&&(xt.parsed=Pt,xt.raw=N.data[et]),me&&(xt.options=I||this.resolveDataElementOptions(et,ct.active?"active":i)),Ee||this.updateElement(ct,et,xt,i),tt=Pt}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const a=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,a,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}cn(mp,"id","line"),cn(mp,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),cn(mp,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ef extends Eo{constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,i=n.data.labels||[],a=Nf(r._parsed[e].r,n.options.locale);return{label:i[e]||"",value:a}}parseObjectData(e,r,n,i){return eS.bind(this)(e,r,n,i)}update(e){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){const e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const a=this.getParsed(i).r;!isNaN(a)&&this.chart.getDataVisibility(i)&&(a<r.min&&(r.min=a),a>r.max&&(r.max=a))}),r}_updateRadius(){const e=this.chart,r=e.chartArea,n=e.options,i=Math.min(r.right-r.left,r.bottom-r.top),a=Math.max(i/2,0),s=Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0),f=(a-s)/e.getVisibleDatasetCount();this.outerRadius=a-f*this.index,this.innerRadius=this.outerRadius-f}updateElements(e,r,n,i){const a=i==="reset",s=this.chart,_=s.options.animation,N=this._cachedMeta.rScale,I=N.xCenter,me=N.yCenter,fe=N.getIndexAngle(0)-.5*Si;let Te=fe,qe;const Ve=360/this.countVisibleElements();for(qe=0;qe<r;++qe)Te+=this._computeAngle(qe,i,Ve);for(qe=r;qe<r+n;qe++){const Ue=e[qe];let Ee=Te,Fe=Te+this._computeAngle(qe,i,Ve),He=s.getDataVisibility(qe)?N.getDistanceFromCenterForValue(this.getParsed(qe).r):0;Te=Fe,a&&(_.animateScale&&(He=0),_.animateRotate&&(Ee=Fe=fe));const tt={x:I,y:me,innerRadius:0,outerRadius:He,startAngle:Ee,endAngle:Fe,options:this.resolveDataElementOptions(qe,Ue.active?"active":i)};this.updateElement(Ue,qe,tt,i)}}countVisibleElements(){const e=this._cachedMeta;let r=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&r++}),r}_computeAngle(e,r,n){return this.chart.getDataVisibility(e)?Co(this.resolveDataElementOptions(e,r).angle||n):0}}cn(ef,"id","polarArea"),cn(ef,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),cn(ef,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return r.labels.map((a,s)=>{const _=e.getDatasetMeta(0).controller.getStyle(s);return{text:a,fillStyle:_.backgroundColor,strokeStyle:_.borderColor,fontColor:i,lineWidth:_.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class a0 extends zc{}cn(a0,"id","pie"),cn(a0,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class vp extends Eo{getLabelAndValue(e){const r=this._cachedMeta.vScale,n=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(n[r.axis])}}parseObjectData(e,r,n,i){return eS.bind(this)(e,r,n,i)}update(e){const r=this._cachedMeta,n=r.dataset,i=r.data||[],a=r.iScale.getLabels();if(n.points=i,e!=="resize"){const s=this.resolveDatasetElementOptions(e);this.options.showLine||(s.borderWidth=0);const f={_loop:!0,_fullLoop:a.length===i.length,options:s};this.updateElement(n,void 0,f,e)}this.updateElements(i,0,i.length,e)}updateElements(e,r,n,i){const a=this._cachedMeta.rScale,s=i==="reset";for(let f=r;f<r+n;f++){const _=e[f],N=this.resolveDataElementOptions(f,_.active?"active":i),I=a.getPointPositionForValue(f,this.getParsed(f).r),me=s?a.xCenter:I.x,fe=s?a.yCenter:I.y,Te={x:me,y:fe,angle:I.angle,skip:isNaN(me)||isNaN(fe),options:N};this.updateElement(_,f,Te,i)}}}cn(vp,"id","radar"),cn(vp,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),cn(vp,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class gp extends Eo{getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:a}=r,s=this.getParsed(e),f=i.getLabelForValue(s.x),_=a.getLabelForValue(s.y);return{label:n[e]||"",value:"("+f+", "+_+")"}}update(e){const r=this._cachedMeta,{data:n=[]}=r,i=this.chart._animationsDisabled;let{start:a,count:s}=V3(r,n,i);if(this._drawStart=a,this._drawCount=s,$3(r)&&(a=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:f,_dataset:_}=r;f._chart=this.chart,f._datasetIndex=this.index,f._decimated=!!_._decimated,f.points=n;const N=this.resolveDatasetElementOptions(e);N.segment=this.options.segment,this.updateElement(f,void 0,{animated:!i,options:N},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(n,a,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,n,i){const a=i==="reset",{iScale:s,vScale:f,_stacked:_,_dataset:N}=this._cachedMeta,I=this.resolveDataElementOptions(r,i),me=this.getSharedOptions(I),fe=this.includeOptions(i,me),Te=s.axis,qe=f.axis,{spanGaps:Ve,segment:Ue}=this.options,Ee=Uu(Ve)?Ve:Number.POSITIVE_INFINITY,Fe=this.chart._animationsDisabled||a||i==="none";let He=r>0&&this.getParsed(r-1);for(let tt=r;tt<r+n;++tt){const et=e[tt],ct=this.getParsed(tt),xt=Fe?et:{},Pt=fi(ct[qe]),ir=xt[Te]=s.getPixelForValue(ct[Te],tt),mr=xt[qe]=a||Pt?f.getBasePixel():f.getPixelForValue(_?this.applyStack(f,ct,_):ct[qe],tt);xt.skip=isNaN(ir)||isNaN(mr)||Pt,xt.stop=tt>0&&Math.abs(ct[Te]-He[Te])>Ee,Ue&&(xt.parsed=ct,xt.raw=N.data[tt]),fe&&(xt.options=me||this.resolveDataElementOptions(tt,et.active?"active":i)),Fe||this.updateElement(et,tt,xt,i),He=ct}this.updateSharedOptions(me,i,I)}getMaxOverflow(){const e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let f=0;for(let _=r.length-1;_>=0;--_)f=Math.max(f,r[_].size(this.resolveDataElementOptions(_))/2);return f>0&&f}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!r.length)return i;const a=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,a,s)/2}}cn(gp,"id","scatter"),cn(gp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),cn(gp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Ij=Object.freeze({__proto__:null,BarController:hp,BubbleController:pp,DoughnutController:zc,LineController:mp,PieController:a0,PolarAreaController:ef,RadarController:vp,ScatterController:gp});function Ac(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ay{constructor(e){cn(this,"options");this.options=e||{}}static override(e){Object.assign(Ay.prototype,e)}init(){}formats(){return Ac()}parse(){return Ac()}format(){return Ac()}add(){return Ac()}diff(){return Ac()}startOf(){return Ac()}endOf(){return Ac()}}var Oj={_date:Ay};function Bj(t,e,r,n){const{controller:i,data:a,_sorted:s}=t,f=i._cachedMeta.iScale,_=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(f&&e===f.axis&&e!=="r"&&s&&a.length){const N=f._reversePixels?l7:yl;if(n){if(i._sharedOptions){const I=a[0],me=typeof I.getRange=="function"&&I.getRange(e);if(me){const fe=N(a,e,r-me),Te=N(a,e,r+me);return{lo:fe.lo,hi:Te.hi}}}}else{const I=N(a,e,r);if(_){const{vScale:me}=i._cachedMeta,{_parsed:fe}=t,Te=fe.slice(0,I.lo+1).reverse().findIndex(Ve=>!fi(Ve[me.axis]));I.lo-=Math.max(0,Te);const qe=fe.slice(I.hi).findIndex(Ve=>!fi(Ve[me.axis]));I.hi+=Math.max(0,qe)}return I}}return{lo:0,hi:a.length-1}}function wm(t,e,r,n,i){const a=t.getSortedVisibleDatasetMetas(),s=r[e];for(let f=0,_=a.length;f<_;++f){const{index:N,data:I}=a[f],{lo:me,hi:fe}=Bj(a[f],e,s,i);for(let Te=me;Te<=fe;++Te){const qe=I[Te];qe.skip||n(qe,N,Te)}}}function Hj(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,i){const a=e?Math.abs(n.x-i.x):0,s=r?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}function Yv(t,e,r,n,i){const a=[];return!i&&!t.isPointInArea(e)||wm(t,r,e,function(f,_,N){!i&&!xl(f,t.chartArea,0)||f.inRange(e.x,e.y,n)&&a.push({element:f,datasetIndex:_,index:N})},!0),a}function Wj(t,e,r,n){let i=[];function a(s,f,_){const{startAngle:N,endAngle:I}=s.getProps(["startAngle","endAngle"],n),{angle:me}=B3(s,{x:e.x,y:e.y});Sf(me,N,I)&&i.push({element:s,datasetIndex:f,index:_})}return wm(t,r,e,a),i}function qj(t,e,r,n,i,a){let s=[];const f=Hj(r);let _=Number.POSITIVE_INFINITY;function N(I,me,fe){const Te=I.inRange(e.x,e.y,i);if(n&&!Te)return;const qe=I.getCenterPoint(i);if(!(!!a||t.isPointInArea(qe))&&!Te)return;const Ue=f(e,qe);Ue<_?(s=[{element:I,datasetIndex:me,index:fe}],_=Ue):Ue===_&&s.push({element:I,datasetIndex:me,index:fe})}return wm(t,r,e,N),s}function Gv(t,e,r,n,i,a){return!a&&!t.isPointInArea(e)?[]:r==="r"&&!n?Wj(t,e,r,i):qj(t,e,r,n,i,a)}function p2(t,e,r,n,i){const a=[],s=r==="x"?"inXRange":"inYRange";let f=!1;return wm(t,r,e,(_,N,I)=>{_[s]&&_[s](e[r],i)&&(a.push({element:_,datasetIndex:N,index:I}),f=f||_.inRange(e.x,e.y,i))}),n&&!f?[]:a}var Uj={modes:{index(t,e,r,n){const i=Ec(e,t),a=r.axis||"x",s=r.includeInvisible||!1,f=r.intersect?Yv(t,i,a,n,s):Gv(t,i,a,!1,n,s),_=[];return f.length?(t.getSortedVisibleDatasetMetas().forEach(N=>{const I=f[0].index,me=N.data[I];me&&!me.skip&&_.push({element:me,datasetIndex:N.index,index:I})}),_):[]},dataset(t,e,r,n){const i=Ec(e,t),a=r.axis||"xy",s=r.includeInvisible||!1;let f=r.intersect?Yv(t,i,a,n,s):Gv(t,i,a,!1,n,s);if(f.length>0){const _=f[0].datasetIndex,N=t.getDatasetMeta(_).data;f=[];for(let I=0;I<N.length;++I)f.push({element:N[I],datasetIndex:_,index:I})}return f},point(t,e,r,n){const i=Ec(e,t),a=r.axis||"xy",s=r.includeInvisible||!1;return Yv(t,i,a,n,s)},nearest(t,e,r,n){const i=Ec(e,t),a=r.axis||"xy",s=r.includeInvisible||!1;return Gv(t,i,a,r.intersect,n,s)},x(t,e,r,n){const i=Ec(e,t);return p2(t,i,"x",r.intersect,n)},y(t,e,r,n){const i=Ec(e,t);return p2(t,i,"y",r.intersect,n)}}};const dS=["left","top","right","bottom"];function Md(t,e){return t.filter(r=>r.pos===e)}function m2(t,e){return t.filter(r=>dS.indexOf(r.pos)===-1&&r.box.axis===e)}function Td(t,e){return t.sort((r,n)=>{const i=e?n:r,a=e?r:n;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function Vj(t){const e=[];let r,n,i,a,s,f;for(r=0,n=(t||[]).length;r<n;++r)i=t[r],{position:a,options:{stack:s,stackWeight:f=1}}=i,e.push({index:r,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&a+s,stackWeight:f});return e}function $j(t){const e={};for(const r of t){const{stack:n,pos:i,stackWeight:a}=r;if(!n||!dS.includes(i))continue;const s=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return e}function Yj(t,e){const r=$j(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let a,s,f;for(a=0,s=t.length;a<s;++a){f=t[a];const{fullSize:_}=f.box,N=r[f.stack],I=N&&f.stackWeight/N.weight;f.horizontal?(f.width=I?I*n:_&&e.availableWidth,f.height=i):(f.width=n,f.height=I?I*i:_&&e.availableHeight)}return r}function Gj(t){const e=Vj(t),r=Td(e.filter(N=>N.box.fullSize),!0),n=Td(Md(e,"left"),!0),i=Td(Md(e,"right")),a=Td(Md(e,"top"),!0),s=Td(Md(e,"bottom")),f=m2(e,"x"),_=m2(e,"y");return{fullSize:r,leftAndTop:n.concat(a),rightAndBottom:i.concat(_).concat(s).concat(f),chartArea:Md(e,"chartArea"),vertical:n.concat(i).concat(_),horizontal:a.concat(s).concat(f)}}function v2(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function fS(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Xj(t,e,r,n){const{pos:i,box:a}=r,s=t.maxPadding;if(!mi(i)){r.size&&(t[i]-=r.size);const me=n[r.stack]||{size:0,count:1};me.size=Math.max(me.size,r.horizontal?a.height:a.width),r.size=me.size/me.count,t[i]+=r.size}a.getPadding&&fS(s,a.getPadding());const f=Math.max(0,e.outerWidth-v2(s,t,"left","right")),_=Math.max(0,e.outerHeight-v2(s,t,"top","bottom")),N=f!==t.w,I=_!==t.h;return t.w=f,t.h=_,r.horizontal?{same:N,other:I}:{same:I,other:N}}function Zj(t){const e=t.maxPadding;function r(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function Kj(t,e){const r=e.maxPadding;function n(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{a[s]=Math.max(e[s],r[s])}),a}return n(t?["left","right"]:["top","bottom"])}function zd(t,e,r,n){const i=[];let a,s,f,_,N,I;for(a=0,s=t.length,N=0;a<s;++a){f=t[a],_=f.box,_.update(f.width||e.w,f.height||e.h,Kj(f.horizontal,e));const{same:me,other:fe}=Xj(e,r,f,n);N|=me&&i.length,I=I||fe,_.fullSize||i.push(f)}return N&&zd(i,e,r,n)||I}function $h(t,e,r,n,i){t.top=r,t.left=e,t.right=e+n,t.bottom=r+i,t.width=n,t.height=i}function g2(t,e,r,n){const i=r.padding;let{x:a,y:s}=e;for(const f of t){const _=f.box,N=n[f.stack]||{placed:0,weight:1},I=f.stackWeight/N.weight||1;if(f.horizontal){const me=e.w*I,fe=N.size||_.height;_f(N.start)&&(s=N.start),_.fullSize?$h(_,i.left,s,r.outerWidth-i.right-i.left,fe):$h(_,e.left+N.placed,s,me,fe),N.start=s,N.placed+=me,s=_.bottom}else{const me=e.h*I,fe=N.size||_.width;_f(N.start)&&(a=N.start),_.fullSize?$h(_,a,i.top,fe,r.outerHeight-i.bottom-i.top):$h(_,a,e.top+N.placed,fe,me),N.start=a,N.placed+=me,a=_.right}}e.x=a,e.y=s}var gs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const i=xs(t.options.layout.padding),a=Math.max(e-i.width,0),s=Math.max(r-i.height,0),f=Gj(t.boxes),_=f.vertical,N=f.horizontal;Di(t.boxes,Ve=>{typeof Ve.beforeLayout=="function"&&Ve.beforeLayout()});const I=_.reduce((Ve,Ue)=>Ue.box.options&&Ue.box.options.display===!1?Ve:Ve+1,0)||1,me=Object.freeze({outerWidth:e,outerHeight:r,padding:i,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/I,hBoxMaxHeight:s/2}),fe=Object.assign({},i);fS(fe,xs(n));const Te=Object.assign({maxPadding:fe,w:a,h:s,x:i.left,y:i.top},i),qe=Yj(_.concat(N),me);zd(f.fullSize,Te,me,qe),zd(_,Te,me,qe),zd(N,Te,me,qe)&&zd(_,Te,me,qe),Zj(Te),g2(f.leftAndTop,Te,me,qe),Te.x+=Te.w,Te.y+=Te.h,g2(f.rightAndBottom,Te,me,qe),t.chartArea={left:Te.left,top:Te.top,right:Te.left+Te.w,bottom:Te.top+Te.h,height:Te.h,width:Te.w},Di(f.chartArea,Ve=>{const Ue=Ve.box;Object.assign(Ue,t.chartArea),Ue.update(Te.w,Te.h,{left:0,top:0,right:0,bottom:0})})}};class hS{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,i){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,i?Math.floor(r/i):n)}}isAttached(e){return!0}updateConfig(e){}}class Jj extends hS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yp="$chartjs",Qj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},y2=t=>t===null||t==="";function eL(t,e){const r=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[yp]={initial:{height:n,width:i,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",y2(i)){const a=t2(t,"width");a!==void 0&&(t.width=a)}if(y2(n))if(t.style.height==="")t.height=t.width/(e||2);else{const a=t2(t,"height");a!==void 0&&(t.height=a)}return t}const pS=tj?{passive:!0}:!1;function tL(t,e,r){t&&t.addEventListener(e,r,pS)}function rL(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,pS)}function nL(t,e){const r=Qj[t.type]||t.type,{x:n,y:i}=Ec(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Jp(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function iL(t,e,r){const n=t.canvas,i=new MutationObserver(a=>{let s=!1;for(const f of a)s=s||Jp(f.addedNodes,n),s=s&&!Jp(f.removedNodes,n);s&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}function aL(t,e,r){const n=t.canvas,i=new MutationObserver(a=>{let s=!1;for(const f of a)s=s||Jp(f.removedNodes,n),s=s&&!Jp(f.addedNodes,n);s&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}const Mf=new Map;let x2=0;function mS(){const t=window.devicePixelRatio;t!==x2&&(x2=t,Mf.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function sL(t,e){Mf.size||window.addEventListener("resize",mS),Mf.set(t,e)}function oL(t){Mf.delete(t),Mf.size||window.removeEventListener("resize",mS)}function lL(t,e,r){const n=t.canvas,i=n&&Ty(n);if(!i)return;const a=U3((f,_)=>{const N=i.clientWidth;r(f,_),N<i.clientWidth&&r()},window),s=new ResizeObserver(f=>{const _=f[0],N=_.contentRect.width,I=_.contentRect.height;N===0&&I===0||a(N,I)});return s.observe(i),sL(t,a),s}function Xv(t,e,r){r&&r.disconnect(),e==="resize"&&oL(t)}function cL(t,e,r){const n=t.canvas,i=U3(a=>{t.ctx!==null&&r(nL(a,t))},t);return tL(n,e,i),i}class uL extends hS{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(eL(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[yp])return!1;const n=r[yp].initial;["height","width"].forEach(a=>{const s=n[a];fi(s)?r.removeAttribute(a):r.setAttribute(a,s)});const i=n.style||{};return Object.keys(i).forEach(a=>{r.style[a]=i[a]}),r.width=r.width,delete r[yp],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const i=e.$proxies||(e.$proxies={}),s={attach:iL,detach:aL,resize:lL}[r]||cL;i[r]=s(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),i=n[r];if(!i)return;({attach:Xv,detach:Xv,resize:Xv}[r]||rL)(e,r,i),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,i){return ej(e,r,n,i)}isAttached(e){const r=e&&Ty(e);return!!(r&&r.isConnected)}}function dL(t){return!My()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Jj:uL}var ep;let Tl=(ep=class{constructor(){cn(this,"x");cn(this,"y");cn(this,"active",!1);cn(this,"options");cn(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Uu(this.x)&&Uu(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const i={};return e.forEach(a=>{i[a]=n[a]&&n[a].active()?n[a]._to:this[a]}),i}},cn(ep,"defaults",{}),cn(ep,"defaultRoutes"),ep);function fL(t,e){const r=t.options.ticks,n=hL(t),i=Math.min(r.maxTicksLimit||n,n),a=r.major.enabled?mL(e):[],s=a.length,f=a[0],_=a[s-1],N=[];if(s>i)return vL(e,N,a,s/i),N;const I=pL(a,e,i);if(s>0){let me,fe;const Te=s>1?Math.round((_-f)/(s-1)):null;for(Yh(e,N,I,fi(Te)?0:f-Te,f),me=0,fe=s-1;me<fe;me++)Yh(e,N,I,a[me],a[me+1]);return Yh(e,N,I,_,fi(Te)?e.length:_+Te),N}return Yh(e,N,I),N}function hL(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),i=t._maxLength/r;return Math.floor(Math.min(n,i))}function pL(t,e,r){const n=gL(t),i=e.length/r;if(!n)return Math.max(i,1);const a=n7(n);for(let s=0,f=a.length-1;s<f;s++){const _=a[s];if(_>i)return _}return Math.max(i,1)}function mL(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function vL(t,e,r,n){let i=0,a=r[0],s;for(n=Math.ceil(n),s=0;s<t.length;s++)s===a&&(e.push(t[s]),i++,a=r[i*n])}function Yh(t,e,r,n,i){const a=Qn(n,0),s=Math.min(Qn(i,t.length),t.length);let f=0,_,N,I;for(r=Math.ceil(r),i&&(_=i-n,r=_/Math.floor(_/r)),I=a;I<0;)f++,I=Math.round(a+f*r);for(N=Math.max(a,0);N<s;N++)N===I&&(e.push(t[N]),f++,I=Math.round(a+f*r))}function gL(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const yL=t=>t==="left"?"right":t==="right"?"left":t,b2=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,w2=(t,e)=>Math.min(e||t,t);function _2(t,e){const r=[],n=t.length/e,i=t.length;let a=0;for(;a<i;a+=n)r.push(t[Math.floor(a)]);return r}function xL(t,e,r){const n=t.ticks.length,i=Math.min(e,n-1),a=t._startPixel,s=t._endPixel,f=1e-6;let _=t.getPixelForTick(i),N;if(!(r&&(n===1?N=Math.max(_-a,s-_):e===0?N=(t.getPixelForTick(1)-_)/2:N=(_-t.getPixelForTick(i-1))/2,_+=i<e?N:-N,_<a-f||_>s+f)))return _}function bL(t,e){Di(t,r=>{const n=r.gc,i=n.length/2;let a;if(i>e){for(a=0;a<i;++a)delete r.data[n[a]];n.splice(0,i)}})}function Ad(t){return t.drawTicks?t.tickLength:0}function S2(t,e){if(!t.display)return 0;const r=Oa(t.font,e),n=xs(t.padding);return(oa(t.text)?t.text.length:1)*r.lineHeight+n.height}function wL(t,e){return cc(t,{scale:e,type:"scale"})}function _L(t,e,r){return cc(t,{tick:r,index:e,type:"tick"})}function SL(t,e,r){let n=xy(t);return(r&&e!=="right"||!r&&e==="right")&&(n=yL(n)),n}function kL(t,e,r,n){const{top:i,left:a,bottom:s,right:f,chart:_}=t,{chartArea:N,scales:I}=_;let me=0,fe,Te,qe;const Ve=s-i,Ue=f-a;if(t.isHorizontal()){if(Te=ps(n,a,f),mi(r)){const Ee=Object.keys(r)[0],Fe=r[Ee];qe=I[Ee].getPixelForValue(Fe)+Ve-e}else r==="center"?qe=(N.bottom+N.top)/2+Ve-e:qe=b2(t,r,e);fe=f-a}else{if(mi(r)){const Ee=Object.keys(r)[0],Fe=r[Ee];Te=I[Ee].getPixelForValue(Fe)-Ue+e}else r==="center"?Te=(N.left+N.right)/2-Ue+e:Te=b2(t,r,e);qe=ps(n,s,i),me=r==="left"?-ja:ja}return{titleX:Te,titleY:qe,maxWidth:fe,rotation:me}}class Kc extends Tl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:i}=this;return e=Xs(e,Number.POSITIVE_INFINITY),r=Xs(r,Number.NEGATIVE_INFINITY),n=Xs(n,Number.POSITIVE_INFINITY),i=Xs(i,Number.NEGATIVE_INFINITY),{min:Xs(e,n),max:Xs(r,i),minDefined:_a(e),maxDefined:_a(r)}}getMinMax(e){let{min:r,max:n,minDefined:i,maxDefined:a}=this.getUserBounds(),s;if(i&&a)return{min:r,max:n};const f=this.getMatchingVisibleMetas();for(let _=0,N=f.length;_<N;++_)s=f[_].controller.getMinMax(this,e),i||(r=Math.min(r,s.min)),a||(n=Math.max(n,s.max));return r=a&&r>n?n:r,n=i&&r>n?r:n,{min:Xs(r,Xs(n,r)),max:Xs(n,Xs(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xi(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:i,grace:a,ticks:s}=this.options,f=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=D7(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const _=f<this.ticks.length;this._convertTicksToLabels(_?_2(this.ticks,f):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=fL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),_&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xi(this.options.afterUpdate,[this])}beforeSetDimensions(){Xi(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xi(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Xi(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xi(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,i,a;for(n=0,i=e.length;n<i;n++)a=e[n],a.label=Xi(r.callback,[a.value,n,e],this)}afterTickToLabelConversion(){Xi(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xi(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=w2(this.ticks.length,e.ticks.maxTicksLimit),i=r.minRotation||0,a=r.maxRotation;let s=i,f,_,N;if(!this._isVisible()||!r.display||i>=a||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const I=this._getLabelSizes(),me=I.widest.width,fe=I.highest.height,Te=$a(this.chart.width-me,0,this.maxWidth);f=e.offset?this.maxWidth/n:Te/(n-1),me+6>f&&(f=Te/(n-(e.offset?.5:1)),_=this.maxHeight-Ad(e.grid)-r.padding-S2(e.title,this.chart.options.font),N=Math.sqrt(me*me+fe*fe),s=gy(Math.min(Math.asin($a((I.highest.height+6)/f,-1,1)),Math.asin($a(_/N,-1,1))-Math.asin($a(fe/N,-1,1)))),s=Math.max(i,Math.min(a,s))),this.labelRotation=s}afterCalculateLabelRotation(){Xi(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xi(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:i,grid:a}}=this,s=this._isVisible(),f=this.isHorizontal();if(s){const _=S2(i,r.options.font);if(f?(e.width=this.maxWidth,e.height=Ad(a)+_):(e.height=this.maxHeight,e.width=Ad(a)+_),n.display&&this.ticks.length){const{first:N,last:I,widest:me,highest:fe}=this._getLabelSizes(),Te=n.padding*2,qe=Co(this.labelRotation),Ve=Math.cos(qe),Ue=Math.sin(qe);if(f){const Ee=n.mirror?0:Ue*me.width+Ve*fe.height;e.height=Math.min(this.maxHeight,e.height+Ee+Te)}else{const Ee=n.mirror?0:Ve*me.width+Ue*fe.height;e.width=Math.min(this.maxWidth,e.width+Ee+Te)}this._calculatePadding(N,I,Ue,Ve)}}this._handleMargins(),f?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,i){const{ticks:{align:a,padding:s},position:f}=this.options,_=this.labelRotation!==0,N=f!=="top"&&this.axis==="x";if(this.isHorizontal()){const I=this.getPixelForTick(0)-this.left,me=this.right-this.getPixelForTick(this.ticks.length-1);let fe=0,Te=0;_?N?(fe=i*e.width,Te=n*r.height):(fe=n*e.height,Te=i*r.width):a==="start"?Te=r.width:a==="end"?fe=e.width:a!=="inner"&&(fe=e.width/2,Te=r.width/2),this.paddingLeft=Math.max((fe-I+s)*this.width/(this.width-I),0),this.paddingRight=Math.max((Te-me+s)*this.width/(this.width-me),0)}else{let I=r.height/2,me=e.height/2;a==="start"?(I=0,me=e.height):a==="end"&&(I=r.height,me=0),this.paddingTop=I+s,this.paddingBottom=me+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xi(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)fi(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=_2(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:i,_longestTextCache:a}=this,s=[],f=[],_=Math.floor(r/w2(r,n));let N=0,I=0,me,fe,Te,qe,Ve,Ue,Ee,Fe,He,tt,et;for(me=0;me<r;me+=_){if(qe=e[me].label,Ve=this._resolveTickFontOptions(me),i.font=Ue=Ve.string,Ee=a[Ue]=a[Ue]||{data:{},gc:[]},Fe=Ve.lineHeight,He=tt=0,!fi(qe)&&!oa(qe))He=Zp(i,Ee.data,Ee.gc,He,qe),tt=Fe;else if(oa(qe))for(fe=0,Te=qe.length;fe<Te;++fe)et=qe[fe],!fi(et)&&!oa(et)&&(He=Zp(i,Ee.data,Ee.gc,He,et),tt+=Fe);s.push(He),f.push(tt),N=Math.max(He,N),I=Math.max(tt,I)}bL(a,r);const ct=s.indexOf(N),xt=f.indexOf(I),Pt=ir=>({width:s[ir]||0,height:f[ir]||0});return{first:Pt(0),last:Pt(r-1),widest:Pt(ct),highest:Pt(xt),widths:s,heights:f}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return o7(this._alignToPixels?Tc(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=_L(this.getContext(),e,n))}return this.$context||(this.$context=wL(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Co(this.labelRotation),n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,f=a?a.widest.width+s:0,_=a?a.highest.height+s:0;return this.isHorizontal()?_*n>f*i?f/n:_/i:_*i<f*n?_/n:f/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,i=this.options,{grid:a,position:s,border:f}=i,_=a.offset,N=this.isHorizontal(),me=this.ticks.length+(_?1:0),fe=Ad(a),Te=[],qe=f.setContext(this.getContext()),Ve=qe.display?qe.width:0,Ue=Ve/2,Ee=function(ut){return Tc(n,ut,Ve)};let Fe,He,tt,et,ct,xt,Pt,ir,mr,kr,yr,vt;if(s==="top")Fe=Ee(this.bottom),xt=this.bottom-fe,ir=Fe-Ue,kr=Ee(e.top)+Ue,vt=e.bottom;else if(s==="bottom")Fe=Ee(this.top),kr=e.top,vt=Ee(e.bottom)-Ue,xt=Fe+Ue,ir=this.top+fe;else if(s==="left")Fe=Ee(this.right),ct=this.right-fe,Pt=Fe-Ue,mr=Ee(e.left)+Ue,yr=e.right;else if(s==="right")Fe=Ee(this.left),mr=e.left,yr=Ee(e.right)-Ue,ct=Fe+Ue,Pt=this.left+fe;else if(r==="x"){if(s==="center")Fe=Ee((e.top+e.bottom)/2+.5);else if(mi(s)){const ut=Object.keys(s)[0],qt=s[ut];Fe=Ee(this.chart.scales[ut].getPixelForValue(qt))}kr=e.top,vt=e.bottom,xt=Fe+Ue,ir=xt+fe}else if(r==="y"){if(s==="center")Fe=Ee((e.left+e.right)/2);else if(mi(s)){const ut=Object.keys(s)[0],qt=s[ut];Fe=Ee(this.chart.scales[ut].getPixelForValue(qt))}ct=Fe-Ue,Pt=ct-fe,mr=e.left,yr=e.right}const gt=Qn(i.ticks.maxTicksLimit,me),It=Math.max(1,Math.ceil(me/gt));for(He=0;He<me;He+=It){const ut=this.getContext(He),qt=a.setContext(ut),Vt=f.setContext(ut),Ot=qt.lineWidth,Ht=qt.color,Qt=Vt.dash||[],er=Vt.dashOffset,kt=qt.tickWidth,lr=qt.tickColor,dr=qt.tickBorderDash||[],Ar=qt.tickBorderDashOffset;tt=xL(this,He,_),tt!==void 0&&(et=Tc(n,tt,Ot),N?ct=Pt=mr=yr=et:xt=ir=kr=vt=et,Te.push({tx1:ct,ty1:xt,tx2:Pt,ty2:ir,x1:mr,y1:kr,x2:yr,y2:vt,width:Ot,color:Ht,borderDash:Qt,borderDashOffset:er,tickWidth:kt,tickColor:lr,tickBorderDash:dr,tickBorderDashOffset:Ar}))}return this._ticksLength=me,this._borderValue=Fe,Te}_computeLabelItems(e){const r=this.axis,n=this.options,{position:i,ticks:a}=n,s=this.isHorizontal(),f=this.ticks,{align:_,crossAlign:N,padding:I,mirror:me}=a,fe=Ad(n.grid),Te=fe+I,qe=me?-I:Te,Ve=-Co(this.labelRotation),Ue=[];let Ee,Fe,He,tt,et,ct,xt,Pt,ir,mr,kr,yr,vt="middle";if(i==="top")ct=this.bottom-qe,xt=this._getXAxisLabelAlignment();else if(i==="bottom")ct=this.top+qe,xt=this._getXAxisLabelAlignment();else if(i==="left"){const It=this._getYAxisLabelAlignment(fe);xt=It.textAlign,et=It.x}else if(i==="right"){const It=this._getYAxisLabelAlignment(fe);xt=It.textAlign,et=It.x}else if(r==="x"){if(i==="center")ct=(e.top+e.bottom)/2+Te;else if(mi(i)){const It=Object.keys(i)[0],ut=i[It];ct=this.chart.scales[It].getPixelForValue(ut)+Te}xt=this._getXAxisLabelAlignment()}else if(r==="y"){if(i==="center")et=(e.left+e.right)/2-Te;else if(mi(i)){const It=Object.keys(i)[0],ut=i[It];et=this.chart.scales[It].getPixelForValue(ut)}xt=this._getYAxisLabelAlignment(fe).textAlign}r==="y"&&(_==="start"?vt="top":_==="end"&&(vt="bottom"));const gt=this._getLabelSizes();for(Ee=0,Fe=f.length;Ee<Fe;++Ee){He=f[Ee],tt=He.label;const It=a.setContext(this.getContext(Ee));Pt=this.getPixelForTick(Ee)+a.labelOffset,ir=this._resolveTickFontOptions(Ee),mr=ir.lineHeight,kr=oa(tt)?tt.length:1;const ut=kr/2,qt=It.color,Vt=It.textStrokeColor,Ot=It.textStrokeWidth;let Ht=xt;s?(et=Pt,xt==="inner"&&(Ee===Fe-1?Ht=this.options.reverse?"left":"right":Ee===0?Ht=this.options.reverse?"right":"left":Ht="center"),i==="top"?N==="near"||Ve!==0?yr=-kr*mr+mr/2:N==="center"?yr=-gt.highest.height/2-ut*mr+mr:yr=-gt.highest.height+mr/2:N==="near"||Ve!==0?yr=mr/2:N==="center"?yr=gt.highest.height/2-ut*mr:yr=gt.highest.height-kr*mr,me&&(yr*=-1),Ve!==0&&!It.showLabelBackdrop&&(et+=mr/2*Math.sin(Ve))):(ct=Pt,yr=(1-kr)*mr/2);let Qt;if(It.showLabelBackdrop){const er=xs(It.backdropPadding),kt=gt.heights[Ee],lr=gt.widths[Ee];let dr=yr-er.top,Ar=0-er.left;switch(vt){case"middle":dr-=kt/2;break;case"bottom":dr-=kt;break}switch(xt){case"center":Ar-=lr/2;break;case"right":Ar-=lr;break;case"inner":Ee===Fe-1?Ar-=lr:Ee>0&&(Ar-=lr/2);break}Qt={left:Ar,top:dr,width:lr+er.width,height:kt+er.height,color:It.backdropColor}}Ue.push({label:tt,font:ir,textOffset:yr,options:{rotation:Ve,color:qt,strokeColor:Vt,strokeWidth:Ot,textAlign:Ht,textBaseline:vt,translation:[et,ct],backdrop:Qt}})}return Ue}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Co(this.labelRotation))return e==="top"?"left":"right";let i="center";return r.align==="start"?i="left":r.align==="end"?i="right":r.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:i,padding:a}}=this.options,s=this._getLabelSizes(),f=e+a,_=s.widest.width;let N,I;return r==="left"?i?(I=this.right+a,n==="near"?N="left":n==="center"?(N="center",I+=_/2):(N="right",I+=_)):(I=this.right-f,n==="near"?N="right":n==="center"?(N="center",I-=_/2):(N="left",I=this.left)):r==="right"?i?(I=this.left+a,n==="near"?N="right":n==="center"?(N="center",I-=_/2):(N="left",I-=_)):(I=this.left+f,n==="near"?N="left":n==="center"?(N="center",I+=_/2):(N="right",I=this.right)):N="right",{textAlign:N,x:I}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:i,width:a,height:s}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,i,a,s),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?r.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,s;const f=(_,N,I)=>{!I.width||!I.color||(n.save(),n.lineWidth=I.width,n.strokeStyle=I.color,n.setLineDash(I.borderDash||[]),n.lineDashOffset=I.borderDashOffset,n.beginPath(),n.moveTo(_.x,_.y),n.lineTo(N.x,N.y),n.stroke(),n.restore())};if(r.display)for(a=0,s=i.length;a<s;++a){const _=i[a];r.drawOnChartArea&&f({x:_.x1,y:_.y1},{x:_.x2,y:_.y2},_),r.drawTicks&&f({x:_.tx1,y:_.ty1},{x:_.tx2,y:_.ty2},{color:_.tickColor,width:_.tickWidth,borderDash:_.tickBorderDash,borderDashOffset:_.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:i}}=this,a=n.setContext(this.getContext()),s=n.display?a.width:0;if(!s)return;const f=i.setContext(this.getContext(0)).lineWidth,_=this._borderValue;let N,I,me,fe;this.isHorizontal()?(N=Tc(e,this.left,s)-s/2,I=Tc(e,this.right,f)+f/2,me=fe=_):(me=Tc(e,this.top,s)-s/2,fe=Tc(e,this.bottom,f)+f/2,N=I=_),r.save(),r.lineWidth=a.width,r.strokeStyle=a.color,r.beginPath(),r.moveTo(N,me),r.lineTo(I,fe),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&ym(n,i);const a=this.getLabelItems(e);for(const s of a){const f=s.options,_=s.font,N=s.label,I=s.textOffset;Yc(n,N,0,I,_,f)}i&&xm(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:i}}=this;if(!n.display)return;const a=Oa(n.font),s=xs(n.padding),f=n.align;let _=a.lineHeight/2;r==="bottom"||r==="center"||mi(r)?(_+=s.bottom,oa(n.text)&&(_+=a.lineHeight*(n.text.length-1))):_+=s.top;const{titleX:N,titleY:I,maxWidth:me,rotation:fe}=kL(this,_,r,f);Yc(e,n.text,0,0,a,{color:n.color,maxWidth:me,rotation:fe,textAlign:SL(f,r,i),textBaseline:"middle",translation:[N,I]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=Qn(e.grid&&e.grid.z,-1),i=Qn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Kc.prototype.draw?[{z:r,draw:a=>{this.draw(a)}}]:[{z:n,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:r,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let a,s;for(a=0,s=r.length;a<s;++a){const f=r[a];f[n]===this.id&&(!e||f.type===e)&&i.push(f)}return i}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return Oa(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gh{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;AL(r)&&(n=this.register(r));const i=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,ML(e,s,n),this.override&&la.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,i=this.scope;n in r&&delete r[n],i&&n in la[i]&&(delete la[i][n],this.override&&delete $c[n])}}function ML(t,e,r){const n=wf(Object.create(null),[r?la.get(r):{},la.get(e),t.defaults]);la.set(e,n),t.defaultRoutes&&TL(e,t.defaultRoutes),t.descriptors&&la.describe(e,t.descriptors)}function TL(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),i=n.pop(),a=[t].concat(n).join("."),s=e[r].split("."),f=s.pop(),_=s.join(".");la.route(a,i,_,f)})}function AL(t){return"id"in t&&"defaults"in t}class CL{constructor(){this.controllers=new Gh(Eo,"datasets",!0),this.elements=new Gh(Tl,"elements"),this.plugins=new Gh(Object,"plugins"),this.scales=new Gh(Kc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(i=>{const a=n||this._getRegistryForType(i);n||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):Di(i,s=>{const f=n||this._getRegistryForType(s);this._exec(e,f,s)})})}_exec(e,r,n){const i=vy(e);Xi(n["before"+i],[],n),r[e](n),Xi(n["after"+i],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const i=r.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Yo=new CL;class jL{constructor(){this._init=[]}notify(e,r,n,i){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(a,e,r,n);return r==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,r,n,i){i=i||{};for(const a of e){const s=a.plugin,f=s[n],_=[r,i,a.options];if(Xi(f,_,s)===!1&&i.cancelable)return!1}return!0}invalidate(){fi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,i=Qn(n.options&&n.options.plugins,{}),a=LL(n);return i===!1&&!r?[]:DL(e,a,i,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,i=(a,s)=>a.filter(f=>!s.some(_=>f.plugin.id===_.plugin.id));this._notify(i(r,n),e,"stop"),this._notify(i(n,r),e,"start")}}function LL(t){const e={},r=[],n=Object.keys(Yo.plugins.items);for(let a=0;a<n.length;a++)r.push(Yo.getPlugin(n[a]));const i=t.plugins||[];for(let a=0;a<i.length;a++){const s=i[a];r.indexOf(s)===-1&&(r.push(s),e[s.id]=!0)}return{plugins:r,localIds:e}}function EL(t,e){return!e&&t===!1?null:t===!0?{}:t}function DL(t,{plugins:e,localIds:r},n,i){const a=[],s=t.getContext();for(const f of e){const _=f.id,N=EL(n[_],i);N!==null&&a.push({plugin:f,options:RL(t.config,{plugin:f,local:r[_]},N,s)})}return a}function RL(t,{plugin:e,local:r},n,i){const a=t.pluginScopeKeys(e),s=t.getOptionScopes(n,a);return r&&e.defaults&&s.push(e.defaults),t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function s0(t,e){const r=la.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function PL(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function NL(t,e){return t===e?"_index_":"_value_"}function k2(t){if(t==="x"||t==="y"||t==="r")return t}function zL(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function o0(t,...e){if(k2(t))return t;for(const r of e){const n=r.axis||zL(r.position)||t.length>1&&k2(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function M2(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function FL(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return M2(t,"x",r[0])||M2(t,"y",r[0])}return{}}function IL(t,e){const r=$c[t.type]||{scales:{}},n=e.scales||{},i=s0(t.type,e),a=Object.create(null);return Object.keys(n).forEach(s=>{const f=n[s];if(!mi(f))return console.error(`Invalid scale configuration for scale: ${s}`);if(f._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const _=o0(s,f,FL(s,t),la.scales[f.type]),N=NL(_,i),I=r.scales||{};a[s]=Zd(Object.create(null),[{axis:_},f,I[_],I[N]])}),t.data.datasets.forEach(s=>{const f=s.type||t.type,_=s.indexAxis||s0(f,e),I=($c[f]||{}).scales||{};Object.keys(I).forEach(me=>{const fe=PL(me,_),Te=s[fe+"AxisID"]||fe;a[Te]=a[Te]||Object.create(null),Zd(a[Te],[{axis:fe},n[Te],I[me]])})}),Object.keys(a).forEach(s=>{const f=a[s];Zd(f,[la.scales[f.type],la.scale])}),a}function vS(t){const e=t.options||(t.options={});e.plugins=Qn(e.plugins,{}),e.scales=IL(t,e)}function gS(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function OL(t){return t=t||{},t.data=gS(t.data),vS(t),t}const T2=new Map,yS=new Set;function Xh(t,e){let r=T2.get(t);return r||(r=e(),T2.set(t,r),yS.add(r)),r}const Cd=(t,e,r)=>{const n=ic(e,r);n!==void 0&&t.add(n)};class BL{constructor(e){this._config=OL(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=gS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),vS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Xh(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Xh(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return Xh(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let i=n.get(e);return(!i||r)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,r,n){const{options:i,type:a}=this,s=this._cachedScopes(e,n),f=s.get(r);if(f)return f;const _=new Set;r.forEach(I=>{e&&(_.add(e),I.forEach(me=>Cd(_,e,me))),I.forEach(me=>Cd(_,i,me)),I.forEach(me=>Cd(_,$c[a]||{},me)),I.forEach(me=>Cd(_,la,me)),I.forEach(me=>Cd(_,n0,me))});const N=Array.from(_);return N.length===0&&N.push(Object.create(null)),yS.has(r)&&s.set(r,N),N}chartOptionScopes(){const{options:e,type:r}=this;return[e,$c[r]||{},la.datasets[r]||{},{type:r},la,n0]}resolveNamedOptions(e,r,n,i=[""]){const a={$shared:!0},{resolver:s,subPrefixes:f}=A2(this._resolverCache,e,i);let _=s;if(WL(s,r)){a.$shared=!1,n=ac(n)?n():n;const N=this.createResolver(e,n,f);_=Vu(s,n,N)}for(const N of r)a[N]=_[N];return a}createResolver(e,r,n=[""],i){const{resolver:a}=A2(this._resolverCache,e,n);return mi(r)?Vu(a,r,void 0,i):a}}function A2(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=r.join();let a=n.get(i);return a||(a={resolver:_y(e,r),subPrefixes:r.filter(f=>!f.toLowerCase().includes("hover"))},n.set(i,a)),a}const HL=t=>mi(t)&&Object.getOwnPropertyNames(t).some(e=>ac(t[e]));function WL(t,e){const{isScriptable:r,isIndexable:n}=Z3(t);for(const i of e){const a=r(i),s=n(i),f=(s||a)&&t[i];if(a&&(ac(f)||HL(f))||s&&oa(f))return!0}return!1}var qL="4.5.0";const UL=["top","bottom","left","right","chartArea"];function C2(t,e){return t==="top"||t==="bottom"||UL.indexOf(t)===-1&&e==="x"}function j2(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function L2(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),Xi(r&&r.onComplete,[t],e)}function VL(t){const e=t.chart,r=e.options.animation;Xi(r&&r.onProgress,[t],e)}function xS(t){return My()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const xp={},E2=t=>{const e=xS(t);return Object.values(xp).filter(r=>r.canvas===e).pop()};function $L(t,e,r){const n=Object.keys(t);for(const i of n){const a=+i;if(a>=e){const s=t[i];delete t[i],(r>0||a>e)&&(t[a+r]=s)}}}function YL(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}class Qa{static register(...e){Yo.add(...e),D2()}static unregister(...e){Yo.remove(...e),D2()}constructor(e,r){const n=this.config=new BL(r),i=xS(e),a=E2(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||dL(i)),this.platform.updateConfig(n);const f=this.platform.acquireContext(i,s.aspectRatio),_=f&&f.canvas,N=_&&_.height,I=_&&_.width;if(this.id=G8(),this.ctx=f,this.canvas=_,this.width=I,this.height=N,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new jL,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=d7(me=>this.update(me),s.resizeDelay||0),this._dataChanges=[],xp[this.id]=this,!f||!_){console.error("Failed to create chart: can't acquire context from the given item");return}ul.listen(this,"complete",L2),ul.listen(this,"progress",VL),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:i,_aspectRatio:a}=this;return fi(e)?r&&a?a:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Yo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():e2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Kb(this.canvas,this.ctx),this}stop(){return ul.stop(this),this}resize(e,r){ul.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,i=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,r,a),f=n.devicePixelRatio||this.platform.getDevicePixelRatio(),_=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,e2(this,f,!0)&&(this.notifyPlugins("resize",{size:s}),Xi(n.onResize,[this,s],this),this.attached&&this._doResize(_)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Di(r,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,i=Object.keys(n).reduce((s,f)=>(s[f]=!1,s),{});let a=[];r&&(a=a.concat(Object.keys(r).map(s=>{const f=r[s],_=o0(s,f),N=_==="r",I=_==="x";return{options:f,dposition:N?"chartArea":I?"bottom":"left",dtype:N?"radialLinear":I?"category":"linear"}}))),Di(a,s=>{const f=s.options,_=f.id,N=o0(_,f),I=Qn(f.type,s.dtype);(f.position===void 0||C2(f.position,N)!==C2(s.dposition))&&(f.position=s.dposition),i[_]=!0;let me=null;if(_ in n&&n[_].type===I)me=n[_];else{const fe=Yo.getScale(I);me=new fe({id:_,type:I,ctx:this.ctx,chart:this}),n[me.id]=me}me.init(f,e)}),Di(i,(s,f)=>{s||delete n[f]}),Di(n,s=>{gs.configure(this,s,s.options),gs.addBox(this,s)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((i,a)=>i.index-a.index),n>r){for(let i=r;i<n;++i)this._destroyDatasetMeta(i);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(j2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,i)=>{r.filter(a=>a===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=r.length;n<i;n++){const a=r[n];let s=this.getDatasetMeta(n);const f=a.type||this.config.type;if(s.type&&s.type!==f&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=f,s.indexAxis=a.indexAxis||s0(f,this.options),s.order=a.order||0,s.index=n,s.label=""+a.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const _=Yo.getController(f),{datasetElementType:N,dataElementType:I}=la.datasets[f];Object.assign(_,{dataElementType:Yo.getElement(I),datasetElementType:N&&Yo.getElement(N)}),s.controller=new _(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Di(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let N=0,I=this.data.datasets.length;N<I;N++){const{controller:me}=this.getDatasetMeta(N),fe=!i&&a.indexOf(me)===-1;me.buildOrUpdateElements(fe),s=Math.max(+me.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Di(a,N=>{N.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(j2("z","_idx"));const{_active:f,_lastEvent:_}=this;_?this._eventHandler(_,!0):f.length&&this._updateHoverStyles(f,f,!0),this.render()}_updateScales(){Di(this.scales,e=>{gs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Wb(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:a}of r){const s=n==="_removeElements"?-a:a;$L(e,i,s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=a=>new Set(e.filter(s=>s[0]===a).map((s,f)=>f+","+s.splice(1).join(","))),i=n(0);for(let a=1;a<r;a++)if(!Wb(i,n(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;gs.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],Di(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,ac(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(r),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ul.has(this)?this.attached&&!ul.running(this)&&ul.start(this):(this.draw(),L2({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let i,a;for(i=0,a=r.length;i<a;++i){const s=r[i];(!e||s.visible)&&n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=oS(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&ym(r,i),e.controller.draw(),i&&xm(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return xl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,i){const a=Uj.modes[r];return typeof a=="function"?a(this,e,n,i):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let i=n.filter(a=>a&&a._dataset===r).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=cc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const i=n?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,i);_f(r)?(a.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(a,{visible:n}),this.update(f=>f.datasetIndex===e?i:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),ul.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Kb(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete xp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(a,s)=>{r.addEventListener(this,a,s),e[a]=s},i=(a,s,f)=>{a.offsetX=s,a.offsetY=f,this._eventHandler(a)};Di(this.options.events,a=>n(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(_,N)=>{r.addEventListener(this,_,N),e[_]=N},i=(_,N)=>{e[_]&&(r.removeEventListener(this,_,N),delete e[_])},a=(_,N)=>{this.canvas&&this.resize(_,N)};let s;const f=()=>{i("attach",f),this.attached=!0,this.resize(),n("resize",a),n("detach",s)};s=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),n("attach",f)},r.isAttached(this.canvas)?f():s()}unbindEvents(){Di(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},Di(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const i=n?"set":"remove";let a,s,f,_;for(r==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),f=0,_=e.length;f<_;++f){s=e[f];const N=s&&this.getDatasetMeta(s.datasetIndex).controller;N&&N[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:a,index:s})=>{const f=this.getDatasetMeta(a);if(!f)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:f.data[s],index:s}});!Yp(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const i=this.options.hover,a=(_,N)=>_.filter(I=>!N.some(me=>I.datasetIndex===me.datasetIndex&&I.index===me.index)),s=a(r,e),f=n?e:a(e,r);s.length&&this.updateHoverStyle(s,i.mode,!1),f.length&&i.mode&&this.updateHoverStyle(f,i.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},i=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const a=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(a||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:i=[],options:a}=this,s=r,f=this._getActiveElements(e,i,n,s),_=e7(e),N=YL(e,this._lastEvent,n,_);n&&(this._lastEvent=null,Xi(a.onHover,[e,f,this],this),_&&Xi(a.onClick,[e,f,this],this));const I=!Yp(f,i);return(I||r)&&(this._active=f,this._updateHoverStyles(f,i,r)),this._lastEvent=N,I}_getActiveElements(e,r,n,i){if(e.type==="mouseout")return[];if(!n)return r;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}}cn(Qa,"defaults",la),cn(Qa,"instances",xp),cn(Qa,"overrides",$c),cn(Qa,"registry",Yo),cn(Qa,"version",qL),cn(Qa,"getChart",E2);function D2(){return Di(Qa.instances,t=>t._plugins.invalidate())}function GL(t,e,r){const{startAngle:n,x:i,y:a,outerRadius:s,innerRadius:f,options:_}=e,{borderWidth:N,borderJoinStyle:I}=_,me=Math.min(N/s,ms(n-r));if(t.beginPath(),t.arc(i,a,s-N/2,n+me/2,r-me/2),f>0){const fe=Math.min(N/f,ms(n-r));t.arc(i,a,f+N/2,r-fe/2,n+fe/2,!0)}else{const fe=Math.min(N/2,s*ms(n-r));if(I==="round")t.arc(i,a,fe,r-Si/2,n+Si/2,!0);else if(I==="bevel"){const Te=2*fe*fe,qe=-Te*Math.cos(r+Si/2)+i,Ve=-Te*Math.sin(r+Si/2)+a,Ue=Te*Math.cos(n+Si/2)+i,Ee=Te*Math.sin(n+Si/2)+a;t.lineTo(qe,Ve),t.lineTo(Ue,Ee)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function XL(t,e,r){const{startAngle:n,pixelMargin:i,x:a,y:s,outerRadius:f,innerRadius:_}=e;let N=i/f;t.beginPath(),t.arc(a,s,f,n-N,r+N),_>i?(N=i/_,t.arc(a,s,_,r+N,n-N,!0)):t.arc(a,s,i,r+ja,n-ja),t.closePath(),t.clip()}function ZL(t){return wy(t,["outerStart","outerEnd","innerStart","innerEnd"])}function KL(t,e,r,n){const i=ZL(t.options.borderRadius),a=(r-e)/2,s=Math.min(a,n*e/2),f=_=>{const N=(r-Math.min(a,_))*n/2;return $a(_,0,Math.min(a,N))};return{outerStart:f(i.outerStart),outerEnd:f(i.outerEnd),innerStart:$a(i.innerStart,0,s),innerEnd:$a(i.innerEnd,0,s)}}function gu(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function Qp(t,e,r,n,i,a){const{x:s,y:f,startAngle:_,pixelMargin:N,innerRadius:I}=e,me=Math.max(e.outerRadius+n+r-N,0),fe=I>0?I+n+r+N:0;let Te=0;const qe=i-_;if(n){const It=I>0?I-n:0,ut=me>0?me-n:0,qt=(It+ut)/2,Vt=qt!==0?qe*qt/(qt+n):qe;Te=(qe-Vt)/2}const Ve=Math.max(.001,qe*me-r/Si)/me,Ue=(qe-Ve)/2,Ee=_+Ue+Te,Fe=i-Ue-Te,{outerStart:He,outerEnd:tt,innerStart:et,innerEnd:ct}=KL(e,fe,me,Fe-Ee),xt=me-He,Pt=me-tt,ir=Ee+He/xt,mr=Fe-tt/Pt,kr=fe+et,yr=fe+ct,vt=Ee+et/kr,gt=Fe-ct/yr;if(t.beginPath(),a){const It=(ir+mr)/2;if(t.arc(s,f,me,ir,It),t.arc(s,f,me,It,mr),tt>0){const Ot=gu(Pt,mr,s,f);t.arc(Ot.x,Ot.y,tt,mr,Fe+ja)}const ut=gu(yr,Fe,s,f);if(t.lineTo(ut.x,ut.y),ct>0){const Ot=gu(yr,gt,s,f);t.arc(Ot.x,Ot.y,ct,Fe+ja,gt+Math.PI)}const qt=(Fe-ct/fe+(Ee+et/fe))/2;if(t.arc(s,f,fe,Fe-ct/fe,qt,!0),t.arc(s,f,fe,qt,Ee+et/fe,!0),et>0){const Ot=gu(kr,vt,s,f);t.arc(Ot.x,Ot.y,et,vt+Math.PI,Ee-ja)}const Vt=gu(xt,Ee,s,f);if(t.lineTo(Vt.x,Vt.y),He>0){const Ot=gu(xt,ir,s,f);t.arc(Ot.x,Ot.y,He,Ee-ja,ir)}}else{t.moveTo(s,f);const It=Math.cos(ir)*me+s,ut=Math.sin(ir)*me+f;t.lineTo(It,ut);const qt=Math.cos(mr)*me+s,Vt=Math.sin(mr)*me+f;t.lineTo(qt,Vt)}t.closePath()}function JL(t,e,r,n,i){const{fullCircles:a,startAngle:s,circumference:f}=e;let _=e.endAngle;if(a){Qp(t,e,r,n,_,i);for(let N=0;N<a;++N)t.fill();isNaN(f)||(_=s+(f%ra||ra))}return Qp(t,e,r,n,_,i),t.fill(),_}function QL(t,e,r,n,i){const{fullCircles:a,startAngle:s,circumference:f,options:_}=e,{borderWidth:N,borderJoinStyle:I,borderDash:me,borderDashOffset:fe,borderRadius:Te}=_,qe=_.borderAlign==="inner";if(!N)return;t.setLineDash(me||[]),t.lineDashOffset=fe,qe?(t.lineWidth=N*2,t.lineJoin=I||"round"):(t.lineWidth=N,t.lineJoin=I||"bevel");let Ve=e.endAngle;if(a){Qp(t,e,r,n,Ve,i);for(let Ue=0;Ue<a;++Ue)t.stroke();isNaN(f)||(Ve=s+(f%ra||ra))}qe&&XL(t,e,Ve),_.selfJoin&&Ve-s>=Si&&Te===0&&I!=="miter"&&GL(t,e,Ve),a||(Qp(t,e,r,n,Ve,i),t.stroke())}class Fd extends Tl{constructor(r){super();cn(this,"circumference");cn(this,"endAngle");cn(this,"fullCircles");cn(this,"innerRadius");cn(this,"outerRadius");cn(this,"pixelMargin");cn(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,i){const a=this.getProps(["x","y"],i),{angle:s,distance:f}=B3(a,{x:r,y:n}),{startAngle:_,endAngle:N,innerRadius:I,outerRadius:me,circumference:fe}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),Te=(this.options.spacing+this.options.borderWidth)/2,qe=Qn(fe,N-_),Ve=Sf(s,_,N)&&_!==N,Ue=qe>=ra||Ve,Ee=gl(f,I+Te,me+Te);return Ue&&Ee}getCenterPoint(r){const{x:n,y:i,startAngle:a,endAngle:s,innerRadius:f,outerRadius:_}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:N,spacing:I}=this.options,me=(a+s)/2,fe=(f+_+I+N)/2;return{x:n+Math.cos(me)*fe,y:i+Math.sin(me)*fe}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:i}=this,a=(n.offset||0)/4,s=(n.spacing||0)/2,f=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>ra?Math.floor(i/ra):0,i===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const _=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(_)*a,Math.sin(_)*a);const N=1-Math.sin(Math.min(Si,i||0)),I=a*N;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,JL(r,this,I,s,f),QL(r,this,I,s,f),r.restore()}}cn(Fd,"id","arc"),cn(Fd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),cn(Fd,"defaultRoutes",{backgroundColor:"backgroundColor"}),cn(Fd,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function bS(t,e,r=e){t.lineCap=Qn(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Qn(r.borderDash,e.borderDash)),t.lineDashOffset=Qn(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Qn(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Qn(r.borderWidth,e.borderWidth),t.strokeStyle=Qn(r.borderColor,e.borderColor)}function eE(t,e,r){t.lineTo(r.x,r.y)}function tE(t){return t.stepped?S7:t.tension||t.cubicInterpolationMode==="monotone"?k7:eE}function wS(t,e,r={}){const n=t.length,{start:i=0,end:a=n-1}=r,{start:s,end:f}=e,_=Math.max(i,s),N=Math.min(a,f),I=i<s&&a<s||i>f&&a>f;return{count:n,start:_,loop:e.loop,ilen:N<_&&!I?n+N-_:N-_}}function rE(t,e,r,n){const{points:i,options:a}=e,{count:s,start:f,loop:_,ilen:N}=wS(i,r,n),I=tE(a);let{move:me=!0,reverse:fe}=n||{},Te,qe,Ve;for(Te=0;Te<=N;++Te)qe=i[(f+(fe?N-Te:Te))%s],!qe.skip&&(me?(t.moveTo(qe.x,qe.y),me=!1):I(t,Ve,qe,fe,a.stepped),Ve=qe);return _&&(qe=i[(f+(fe?N:0))%s],I(t,Ve,qe,fe,a.stepped)),!!_}function nE(t,e,r,n){const i=e.points,{count:a,start:s,ilen:f}=wS(i,r,n),{move:_=!0,reverse:N}=n||{};let I=0,me=0,fe,Te,qe,Ve,Ue,Ee;const Fe=tt=>(s+(N?f-tt:tt))%a,He=()=>{Ve!==Ue&&(t.lineTo(I,Ue),t.lineTo(I,Ve),t.lineTo(I,Ee))};for(_&&(Te=i[Fe(0)],t.moveTo(Te.x,Te.y)),fe=0;fe<=f;++fe){if(Te=i[Fe(fe)],Te.skip)continue;const tt=Te.x,et=Te.y,ct=tt|0;ct===qe?(et<Ve?Ve=et:et>Ue&&(Ue=et),I=(me*I+tt)/++me):(He(),t.lineTo(tt,et),qe=ct,me=0,Ve=Ue=et),Ee=et}He()}function l0(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?nE:rE}function iE(t){return t.stepped?rj:t.tension||t.cubicInterpolationMode==="monotone"?nj:Dc}function aE(t,e,r,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,r,n)&&i.closePath()),bS(t,e.options),t.stroke(i)}function sE(t,e,r,n){const{segments:i,options:a}=e,s=l0(e);for(const f of i)bS(t,a,f.style),t.beginPath(),s(t,e,f,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const oE=typeof Path2D=="function";function lE(t,e,r,n){oE&&!e.options.segment?aE(t,e,r,n):sE(t,e,r,n)}class ql extends Tl{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;G7(this._points,n,e,i,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cj(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,i=e[r],a=this.points,s=sS(this,{property:r,start:i,end:i});if(!s.length)return;const f=[],_=iE(n);let N,I;for(N=0,I=s.length;N<I;++N){const{start:me,end:fe}=s[N],Te=a[me],qe=a[fe];if(Te===qe){f.push(Te);continue}const Ve=Math.abs((i-Te[r])/(qe[r]-Te[r])),Ue=_(Te,qe,Ve,n.stepped);Ue[r]=e[r],f.push(Ue)}return f.length===1?f[0]:f}pathSegment(e,r,n){return l0(this)(e,this,r,n)}path(e,r,n){const i=this.segments,a=l0(this);let s=this._loop;r=r||0,n=n||this.points.length-r;for(const f of i)s&=a(e,this,f,{start:r,end:r+n-1});return!!s}draw(e,r,n,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),lE(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}cn(ql,"id","line"),cn(ql,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),cn(ql,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),cn(ql,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function R2(t,e,r,n){const i=t.options,{[r]:a}=t.getProps([r],n);return Math.abs(e-a)<i.radius+i.hitRadius}class bp extends Tl{constructor(r){super();cn(this,"parsed");cn(this,"skip");cn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,i){const a=this.options,{x:s,y:f}=this.getProps(["x","y"],i);return Math.pow(r-s,2)+Math.pow(n-f,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(r,n){return R2(this,r,"x",n)}inYRange(r,n){return R2(this,r,"y",n)}getCenterPoint(r){const{x:n,y:i}=this.getProps(["x","y"],r);return{x:n,y:i}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const i=n&&r.borderWidth||0;return(n+i)*2}draw(r,n){const i=this.options;this.skip||i.radius<.1||!xl(this,n,this.size(i)/2)||(r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.fillStyle=i.backgroundColor,i0(r,i,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}cn(bp,"id","point"),cn(bp,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),cn(bp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function _S(t,e){const{x:r,y:n,base:i,width:a,height:s}=t.getProps(["x","y","base","width","height"],e);let f,_,N,I,me;return t.horizontal?(me=s/2,f=Math.min(r,i),_=Math.max(r,i),N=n-me,I=n+me):(me=a/2,f=r-me,_=r+me,N=Math.min(n,i),I=Math.max(n,i)),{left:f,top:N,right:_,bottom:I}}function Ul(t,e,r,n){return t?0:$a(e,r,n)}function cE(t,e,r){const n=t.options.borderWidth,i=t.borderSkipped,a=X3(n);return{t:Ul(i.top,a.top,0,r),r:Ul(i.right,a.right,0,e),b:Ul(i.bottom,a.bottom,0,r),l:Ul(i.left,a.left,0,e)}}function uE(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,a=Oc(i),s=Math.min(e,r),f=t.borderSkipped,_=n||mi(i);return{topLeft:Ul(!_||f.top||f.left,a.topLeft,0,s),topRight:Ul(!_||f.top||f.right,a.topRight,0,s),bottomLeft:Ul(!_||f.bottom||f.left,a.bottomLeft,0,s),bottomRight:Ul(!_||f.bottom||f.right,a.bottomRight,0,s)}}function dE(t){const e=_S(t),r=e.right-e.left,n=e.bottom-e.top,i=cE(t,r/2,n/2),a=uE(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:r-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function Zv(t,e,r,n){const i=e===null,a=r===null,f=t&&!(i&&a)&&_S(t,n);return f&&(i||gl(e,f.left,f.right))&&(a||gl(r,f.top,f.bottom))}function fE(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function hE(t,e){t.rect(e.x,e.y,e.w,e.h)}function Kv(t,e,r={}){const n=t.x!==r.x?-e:0,i=t.y!==r.y?-e:0,a=(t.x+t.w!==r.x+r.w?e:0)-n,s=(t.y+t.h!==r.y+r.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+a,h:t.h+s,radius:t.radius}}class wp extends Tl{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:i}}=this,{inner:a,outer:s}=dE(this),f=fE(s.radius)?kf:hE;e.save(),(s.w!==a.w||s.h!==a.h)&&(e.beginPath(),f(e,Kv(s,r,a)),e.clip(),f(e,Kv(a,-r,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),f(e,Kv(a,r)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,r,n){return Zv(this,e,r,n)}inXRange(e,r){return Zv(this,e,null,r)}inYRange(e,r){return Zv(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(r+i)/2:r,y:a?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}cn(wp,"id","bar"),cn(wp,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),cn(wp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var pE=Object.freeze({__proto__:null,ArcElement:Fd,BarElement:wp,LineElement:ql,PointElement:bp});const c0=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],P2=c0.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function SS(t){return c0[t%c0.length]}function kS(t){return P2[t%P2.length]}function mE(t,e){return t.borderColor=SS(e),t.backgroundColor=kS(e),++e}function vE(t,e){return t.backgroundColor=t.data.map(()=>SS(e++)),e}function gE(t,e){return t.backgroundColor=t.data.map(()=>kS(e++)),e}function yE(t){let e=0;return(r,n)=>{const i=t.getDatasetMeta(n).controller;i instanceof zc?e=vE(r,e):i instanceof ef?e=gE(r,e):i&&(e=mE(r,e))}}function N2(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function xE(t){return t&&(t.borderColor||t.backgroundColor)}function bE(){return la.borderColor!=="rgba(0,0,0,0.1)"||la.backgroundColor!=="rgba(0,0,0,0.1)"}var wE={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,r){if(!r.enabled)return;const{data:{datasets:n},options:i}=t.config,{elements:a}=i,s=N2(n)||xE(i)||a&&N2(a)||bE();if(!r.forceOverride&&s)return;const f=yE(t);n.forEach(f)}};function _E(t,e,r,n,i){const a=i.samples||n;if(a>=r)return t.slice(e,e+r);const s=[],f=(r-2)/(a-2);let _=0;const N=e+r-1;let I=e,me,fe,Te,qe,Ve;for(s[_++]=t[I],me=0;me<a-2;me++){let Ue=0,Ee=0,Fe;const He=Math.floor((me+1)*f)+1+e,tt=Math.min(Math.floor((me+2)*f)+1,r)+e,et=tt-He;for(Fe=He;Fe<tt;Fe++)Ue+=t[Fe].x,Ee+=t[Fe].y;Ue/=et,Ee/=et;const ct=Math.floor(me*f)+1+e,xt=Math.min(Math.floor((me+1)*f)+1,r)+e,{x:Pt,y:ir}=t[I];for(Te=qe=-1,Fe=ct;Fe<xt;Fe++)qe=.5*Math.abs((Pt-Ue)*(t[Fe].y-ir)-(Pt-t[Fe].x)*(Ee-ir)),qe>Te&&(Te=qe,fe=t[Fe],Ve=Fe);s[_++]=fe,I=Ve}return s[_++]=t[N],s}function SE(t,e,r,n){let i=0,a=0,s,f,_,N,I,me,fe,Te,qe,Ve;const Ue=[],Ee=e+r-1,Fe=t[e].x,tt=t[Ee].x-Fe;for(s=e;s<e+r;++s){f=t[s],_=(f.x-Fe)/tt*n,N=f.y;const et=_|0;if(et===I)N<qe?(qe=N,me=s):N>Ve&&(Ve=N,fe=s),i=(a*i+f.x)/++a;else{const ct=s-1;if(!fi(me)&&!fi(fe)){const xt=Math.min(me,fe),Pt=Math.max(me,fe);xt!==Te&&xt!==ct&&Ue.push({...t[xt],x:i}),Pt!==Te&&Pt!==ct&&Ue.push({...t[Pt],x:i})}s>0&&ct!==Te&&Ue.push(t[ct]),Ue.push(f),I=et,a=0,qe=Ve=N,me=fe=Te=s}}return Ue}function MS(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function z2(t){t.data.datasets.forEach(e=>{MS(e)})}function kE(t,e){const r=e.length;let n=0,i;const{iScale:a}=t,{min:s,max:f,minDefined:_,maxDefined:N}=a.getUserBounds();return _&&(n=$a(yl(e,a.axis,s).lo,0,r-1)),N?i=$a(yl(e,a.axis,f).hi+1,n,r)-n:i=r-n,{start:n,count:i}}var ME={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,r)=>{if(!r.enabled){z2(t);return}const n=t.width;t.data.datasets.forEach((i,a)=>{const{_data:s,indexAxis:f}=i,_=t.getDatasetMeta(a),N=s||i.data;if(Nd([f,t.options.indexAxis])==="y"||!_.controller.supportsDecimation)return;const I=t.scales[_.xAxisID];if(I.type!=="linear"&&I.type!=="time"||t.options.parsing)return;let{start:me,count:fe}=kE(_,N);const Te=r.threshold||4*n;if(fe<=Te){MS(i);return}fi(s)&&(i._data=N,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(Ve){this._data=Ve}}));let qe;switch(r.algorithm){case"lttb":qe=_E(N,me,fe,n,r);break;case"min-max":qe=SE(N,me,fe,n);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}i._decimated=qe})},destroy(t){z2(t)}};function TE(t,e,r){const n=t.segments,i=t.points,a=e.points,s=[];for(const f of n){let{start:_,end:N}=f;N=_m(_,N,i);const I=u0(r,i[_],i[N],f.loop);if(!e.segments){s.push({source:f,target:I,start:i[_],end:i[N]});continue}const me=sS(e,I);for(const fe of me){const Te=u0(r,a[fe.start],a[fe.end],fe.loop),qe=aS(f,i,Te);for(const Ve of qe)s.push({source:Ve,target:fe,start:{[r]:F2(I,Te,"start",Math.max)},end:{[r]:F2(I,Te,"end",Math.min)}})}}return s}function u0(t,e,r,n){if(n)return;let i=e[t],a=r[t];return t==="angle"&&(i=ms(i),a=ms(a)),{property:t,start:i,end:a}}function AE(t,e){const{x:r=null,y:n=null}=t||{},i=e.points,a=[];return e.segments.forEach(({start:s,end:f})=>{f=_m(s,f,i);const _=i[s],N=i[f];n!==null?(a.push({x:_.x,y:n}),a.push({x:N.x,y:n})):r!==null&&(a.push({x:r,y:_.y}),a.push({x:r,y:N.y}))}),a}function _m(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function F2(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function TS(t,e){let r=[],n=!1;return oa(t)?(n=!0,r=t):r=AE(t,e),r.length?new ql({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function I2(t){return t&&t.fill!==!1}function CE(t,e,r){let i=t[e].fill;const a=[e];let s;if(!r)return i;for(;i!==!1&&a.indexOf(i)===-1;){if(!_a(i))return i;if(s=t[i],!s)return!1;if(s.visible)return i;a.push(i),i=s.fill}return!1}function jE(t,e,r){const n=RE(t);if(mi(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return _a(i)&&Math.floor(i)===i?LE(n[0],e,i,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function LE(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function EE(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:mi(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function DE(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:mi(t)?n=t.value:n=e.getBaseValue(),n}function RE(t){const e=t.options,r=e.fill;let n=Qn(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function PE(t){const{scale:e,index:r,line:n}=t,i=[],a=n.segments,s=n.points,f=NE(e,r);f.push(TS({x:null,y:e.bottom},n));for(let _=0;_<a.length;_++){const N=a[_];for(let I=N.start;I<=N.end;I++)zE(i,s[I],f)}return new ql({points:i,options:{}})}function NE(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const a=n[i];if(a.index===e)break;a.hidden||r.unshift(a.dataset)}return r}function zE(t,e,r){const n=[];for(let i=0;i<r.length;i++){const a=r[i],{first:s,last:f,point:_}=FE(a,e,"x");if(!(!_||s&&f)){if(s)n.unshift(_);else if(t.push(_),!f)break}}t.push(...n)}function FE(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const i=n[r],a=t.segments,s=t.points;let f=!1,_=!1;for(let N=0;N<a.length;N++){const I=a[N],me=s[I.start][r],fe=s[I.end][r];if(gl(i,me,fe)){f=i===me,_=i===fe;break}}return{first:f,last:_,point:n}}class AS{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:i,y:a,radius:s}=this;return r=r||{start:0,end:ra},e.arc(i,a,s,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:i}=this,a=e.angle;return{x:r+Math.cos(a)*i,y:n+Math.sin(a)*i,angle:a}}}function IE(t){const{chart:e,fill:r,line:n}=t;if(_a(r))return OE(e,r);if(r==="stack")return PE(t);if(r==="shape")return!0;const i=BE(t);return i instanceof AS?i:TS(i,n)}function OE(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function BE(t){return(t.scale||{}).getPointPositionForValue?WE(t):HE(t)}function HE(t){const{scale:e={},fill:r}=t,n=EE(r,e);if(_a(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function WE(t){const{scale:e,fill:r}=t,n=e.options,i=e.getLabels().length,a=n.reverse?e.max:e.min,s=DE(r,e,a),f=[];if(n.grid.circular){const _=e.getPointPositionForValue(0,a);return new AS({x:_.x,y:_.y,radius:e.getDistanceFromCenterForValue(s)})}for(let _=0;_<i;++_)f.push(e.getPointPositionForValue(_,s));return f}function Jv(t,e,r){const n=IE(e),{chart:i,index:a,line:s,scale:f,axis:_}=e,N=s.options,I=N.fill,me=N.backgroundColor,{above:fe=me,below:Te=me}=I||{},qe=i.getDatasetMeta(a),Ve=oS(i,qe);n&&s.points.length&&(ym(t,r),qE(t,{line:s,target:n,above:fe,below:Te,area:r,scale:f,axis:_,clip:Ve}),xm(t))}function qE(t,e){const{line:r,target:n,above:i,below:a,area:s,scale:f,clip:_}=e,N=r._loop?"angle":e.axis;t.save();let I=a;a!==i&&(N==="x"?(O2(t,n,s.top),Qv(t,{line:r,target:n,color:i,scale:f,property:N,clip:_}),t.restore(),t.save(),O2(t,n,s.bottom)):N==="y"&&(B2(t,n,s.left),Qv(t,{line:r,target:n,color:a,scale:f,property:N,clip:_}),t.restore(),t.save(),B2(t,n,s.right),I=i)),Qv(t,{line:r,target:n,color:I,scale:f,property:N,clip:_}),t.restore()}function O2(t,e,r){const{segments:n,points:i}=e;let a=!0,s=!1;t.beginPath();for(const f of n){const{start:_,end:N}=f,I=i[_],me=i[_m(_,N,i)];a?(t.moveTo(I.x,I.y),a=!1):(t.lineTo(I.x,r),t.lineTo(I.x,I.y)),s=!!e.pathSegment(t,f,{move:s}),s?t.closePath():t.lineTo(me.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function B2(t,e,r){const{segments:n,points:i}=e;let a=!0,s=!1;t.beginPath();for(const f of n){const{start:_,end:N}=f,I=i[_],me=i[_m(_,N,i)];a?(t.moveTo(I.x,I.y),a=!1):(t.lineTo(r,I.y),t.lineTo(I.x,I.y)),s=!!e.pathSegment(t,f,{move:s}),s?t.closePath():t.lineTo(r,me.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function Qv(t,e){const{line:r,target:n,property:i,color:a,scale:s,clip:f}=e,_=TE(r,n,i);for(const{source:N,target:I,start:me,end:fe}of _){const{style:{backgroundColor:Te=a}={}}=N,qe=n!==!0;t.save(),t.fillStyle=Te,UE(t,s,f,qe&&u0(i,me,fe)),t.beginPath();const Ve=!!r.pathSegment(t,N);let Ue;if(qe){Ve?t.closePath():H2(t,n,fe,i);const Ee=!!n.pathSegment(t,I,{move:Ve,reverse:!0});Ue=Ve&&Ee,Ue||H2(t,n,me,i)}t.closePath(),t.fill(Ue?"evenodd":"nonzero"),t.restore()}}function UE(t,e,r,n){const i=e.chart.chartArea,{property:a,start:s,end:f}=n||{};if(a==="x"||a==="y"){let _,N,I,me;a==="x"?(_=s,N=i.top,I=f,me=i.bottom):(_=i.left,N=s,I=i.right,me=f),t.beginPath(),r&&(_=Math.max(_,r.left),I=Math.min(I,r.right),N=Math.max(N,r.top),me=Math.min(me,r.bottom)),t.rect(_,N,I-_,me-N),t.clip()}}function H2(t,e,r,n){const i=e.interpolate(r,n);i&&t.lineTo(i.x,i.y)}var VE={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,i=[];let a,s,f,_;for(s=0;s<n;++s)a=t.getDatasetMeta(s),f=a.dataset,_=null,f&&f.options&&f instanceof ql&&(_={visible:t.isDatasetVisible(s),index:s,fill:jE(f,s,n),chart:t,axis:a.controller.options.indexAxis,scale:a.vScale,line:f}),a.$filler=_,i.push(_);for(s=0;s<n;++s)_=i[s],!(!_||_.fill===!1)&&(_.fill=CE(i,s,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),a=t.chartArea;for(let s=i.length-1;s>=0;--s){const f=i[s].$filler;f&&(f.line.updateControlPoints(a,f.axis),n&&f.fill&&Jv(t.ctx,f,a))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const a=n[i].$filler;I2(a)&&Jv(t.ctx,a,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!I2(n)||r.drawTime!=="beforeDatasetDraw"||Jv(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const W2=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},$E=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class q2 extends Tl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=Xi(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=Oa(n.font),a=i.size,s=this._computeTitleHeight(),{boxWidth:f,itemHeight:_}=W2(n,a);let N,I;r.font=i.string,this.isHorizontal()?(N=this.maxWidth,I=this._fitRows(s,a,f,_)+10):(I=this.maxHeight,N=this._fitCols(s,i,f,_)+10),this.width=Math.min(N,e.maxWidth||this.maxWidth),this.height=Math.min(I,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,i){const{ctx:a,maxWidth:s,options:{labels:{padding:f}}}=this,_=this.legendHitBoxes=[],N=this.lineWidths=[0],I=i+f;let me=e;a.textAlign="left",a.textBaseline="middle";let fe=-1,Te=-I;return this.legendItems.forEach((qe,Ve)=>{const Ue=n+r/2+a.measureText(qe.text).width;(Ve===0||N[N.length-1]+Ue+2*f>s)&&(me+=I,N[N.length-(Ve>0?0:1)]=0,Te+=I,fe++),_[Ve]={left:0,top:Te,row:fe,width:Ue,height:i},N[N.length-1]+=Ue+f}),me}_fitCols(e,r,n,i){const{ctx:a,maxHeight:s,options:{labels:{padding:f}}}=this,_=this.legendHitBoxes=[],N=this.columnSizes=[],I=s-e;let me=f,fe=0,Te=0,qe=0,Ve=0;return this.legendItems.forEach((Ue,Ee)=>{const{itemWidth:Fe,itemHeight:He}=YE(n,r,a,Ue,i);Ee>0&&Te+He+2*f>I&&(me+=fe+f,N.push({width:fe,height:Te}),qe+=fe+f,Ve++,fe=Te=0),_[Ee]={left:qe,top:Te,col:Ve,width:Fe,height:He},fe=Math.max(fe,Fe),Te+=He+f}),me+=fe,N.push({width:fe,height:Te}),me}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:i},rtl:a}}=this,s=zu(a,this.left,this.width);if(this.isHorizontal()){let f=0,_=ps(n,this.left+i,this.right-this.lineWidths[f]);for(const N of r)f!==N.row&&(f=N.row,_=ps(n,this.left+i,this.right-this.lineWidths[f])),N.top+=this.top+e+i,N.left=s.leftForLtr(s.x(_),N.width),_+=N.width+i}else{let f=0,_=ps(n,this.top+e+i,this.bottom-this.columnSizes[f].height);for(const N of r)N.col!==f&&(f=N.col,_=ps(n,this.top+e+i,this.bottom-this.columnSizes[f].height)),N.top=_,N.left+=this.left+i,N.left=s.leftForLtr(s.x(N.left),N.width),_+=N.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ym(e,this),this._draw(),xm(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:i}=this,{align:a,labels:s}=e,f=la.color,_=zu(e.rtl,this.left,this.width),N=Oa(s.font),{padding:I}=s,me=N.size,fe=me/2;let Te;this.drawTitle(),i.textAlign=_.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=N.string;const{boxWidth:qe,boxHeight:Ve,itemHeight:Ue}=W2(s,me),Ee=function(ct,xt,Pt){if(isNaN(qe)||qe<=0||isNaN(Ve)||Ve<0)return;i.save();const ir=Qn(Pt.lineWidth,1);if(i.fillStyle=Qn(Pt.fillStyle,f),i.lineCap=Qn(Pt.lineCap,"butt"),i.lineDashOffset=Qn(Pt.lineDashOffset,0),i.lineJoin=Qn(Pt.lineJoin,"miter"),i.lineWidth=ir,i.strokeStyle=Qn(Pt.strokeStyle,f),i.setLineDash(Qn(Pt.lineDash,[])),s.usePointStyle){const mr={radius:Ve*Math.SQRT2/2,pointStyle:Pt.pointStyle,rotation:Pt.rotation,borderWidth:ir},kr=_.xPlus(ct,qe/2),yr=xt+fe;G3(i,mr,kr,yr,s.pointStyleWidth&&qe)}else{const mr=xt+Math.max((me-Ve)/2,0),kr=_.leftForLtr(ct,qe),yr=Oc(Pt.borderRadius);i.beginPath(),Object.values(yr).some(vt=>vt!==0)?kf(i,{x:kr,y:mr,w:qe,h:Ve,radius:yr}):i.rect(kr,mr,qe,Ve),i.fill(),ir!==0&&i.stroke()}i.restore()},Fe=function(ct,xt,Pt){Yc(i,Pt.text,ct,xt+Ue/2,N,{strikethrough:Pt.hidden,textAlign:_.textAlign(Pt.textAlign)})},He=this.isHorizontal(),tt=this._computeTitleHeight();He?Te={x:ps(a,this.left+I,this.right-n[0]),y:this.top+I+tt,line:0}:Te={x:this.left+I,y:ps(a,this.top+tt+I,this.bottom-r[0].height),line:0},rS(this.ctx,e.textDirection);const et=Ue+I;this.legendItems.forEach((ct,xt)=>{i.strokeStyle=ct.fontColor,i.fillStyle=ct.fontColor;const Pt=i.measureText(ct.text).width,ir=_.textAlign(ct.textAlign||(ct.textAlign=s.textAlign)),mr=qe+fe+Pt;let kr=Te.x,yr=Te.y;_.setWidth(this.width),He?xt>0&&kr+mr+I>this.right&&(yr=Te.y+=et,Te.line++,kr=Te.x=ps(a,this.left+I,this.right-n[Te.line])):xt>0&&yr+et>this.bottom&&(kr=Te.x=kr+r[Te.line].width+I,Te.line++,yr=Te.y=ps(a,this.top+tt+I,this.bottom-r[Te.line].height));const vt=_.x(kr);if(Ee(vt,yr,ct),kr=f7(ir,kr+qe+fe,He?kr+mr:this.right,e.rtl),Fe(_.x(kr),yr,ct),He)Te.x+=mr+I;else if(typeof ct.text!="string"){const gt=N.lineHeight;Te.y+=CS(ct,gt)+I}else Te.y+=et}),nS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=Oa(r.font),i=xs(r.padding);if(!r.display)return;const a=zu(e.rtl,this.left,this.width),s=this.ctx,f=r.position,_=n.size/2,N=i.top+_;let I,me=this.left,fe=this.width;if(this.isHorizontal())fe=Math.max(...this.lineWidths),I=this.top+N,me=ps(e.align,me,this.right-fe);else{const qe=this.columnSizes.reduce((Ve,Ue)=>Math.max(Ve,Ue.height),0);I=N+ps(e.align,this.top,this.bottom-qe-e.labels.padding-this._computeTitleHeight())}const Te=ps(f,me,me+fe);s.textAlign=a.textAlign(xy(f)),s.textBaseline="middle",s.strokeStyle=r.color,s.fillStyle=r.color,s.font=n.string,Yc(s,r.text,Te,I,n)}_computeTitleHeight(){const e=this.options.title,r=Oa(e.font),n=xs(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,i,a;if(gl(e,this.left,this.right)&&gl(r,this.top,this.bottom)){for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(i=a[n],gl(e,i.left,i.left+i.width)&&gl(r,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!ZE(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=$E(i,n);i&&!a&&Xi(r.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!a&&Xi(r.onHover,[e,n,this],this)}else n&&Xi(r.onClick,[e,n,this],this)}}function YE(t,e,r,n,i){const a=GE(n,t,e,r),s=XE(i,n,e.lineHeight);return{itemWidth:a,itemHeight:s}}function GE(t,e,r,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((a,s)=>a.length>s.length?a:s)),e+r.size/2+n.measureText(i).width}function XE(t,e,r){let n=t;return typeof e.text!="string"&&(n=CS(e,r)),n}function CS(t,e){const r=t.text?t.text.length:0;return e*r}function ZE(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var KE={id:"legend",_element:q2,start(t,e,r){const n=t.legend=new q2({ctx:t.ctx,options:r,chart:t});gs.configure(t,n,r),gs.addBox(t,n)},stop(t){gs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;gs.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,i=r.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:i,color:a,useBorderRadius:s,borderRadius:f}}=t.legend.options;return t._getSortedDatasetMetas().map(_=>{const N=_.controller.getStyle(r?0:void 0),I=xs(N.borderWidth);return{text:e[_.index].label,fillStyle:N.backgroundColor,fontColor:a,hidden:!_.visible,lineCap:N.borderCapStyle,lineDash:N.borderDash,lineDashOffset:N.borderDashOffset,lineJoin:N.borderJoinStyle,lineWidth:(I.width+I.height)/4,strokeStyle:N.borderColor,pointStyle:n||N.pointStyle,rotation:N.rotation,textAlign:i||N.textAlign,borderRadius:s&&(f||N.borderRadius),datasetIndex:_.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Cy extends Tl{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const i=oa(n.text)?n.text.length:1;this._padding=xs(n.padding);const a=i*Oa(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:i,right:a,options:s}=this,f=s.align;let _=0,N,I,me;return this.isHorizontal()?(I=ps(f,n,a),me=r+e,N=a-n):(s.position==="left"?(I=n+e,me=ps(f,i,r),_=Si*-.5):(I=a-e,me=ps(f,r,i),_=Si*.5),N=i-r),{titleX:I,titleY:me,maxWidth:N,rotation:_}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=Oa(r.font),a=n.lineHeight/2+this._padding.top,{titleX:s,titleY:f,maxWidth:_,rotation:N}=this._drawArgs(a);Yc(e,r.text,0,0,n,{color:r.color,maxWidth:_,rotation:N,textAlign:xy(r.align),textBaseline:"middle",translation:[s,f]})}}function JE(t,e){const r=new Cy({ctx:t.ctx,options:e,chart:t});gs.configure(t,r,e),gs.addBox(t,r),t.titleBlock=r}var QE={id:"title",_element:Cy,start(t,e,r){JE(t,r)},stop(t){const e=t.titleBlock;gs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;gs.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zh=new WeakMap;var e9={id:"subtitle",start(t,e,r){const n=new Cy({ctx:t.ctx,options:r,chart:t});gs.configure(t,n,r),gs.addBox(t,n),Zh.set(t,n)},stop(t){gs.removeBox(t,Zh.get(t)),Zh.delete(t)},beforeUpdate(t,e,r){const n=Zh.get(t);gs.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Id={average(t){if(!t.length)return!1;let e,r,n=new Set,i=0,a=0;for(e=0,r=t.length;e<r;++e){const f=t[e].element;if(f&&f.hasValue()){const _=f.tooltipPosition();n.add(_.x),i+=_.y,++a}}return a===0||n.size===0?!1:{x:[...n].reduce((f,_)=>f+_)/n.size,y:i/a}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,i=Number.POSITIVE_INFINITY,a,s,f;for(a=0,s=t.length;a<s;++a){const _=t[a].element;if(_&&_.hasValue()){const N=_.getCenterPoint(),I=r0(e,N);I<i&&(i=I,f=_)}}if(f){const _=f.tooltipPosition();r=_.x,n=_.y}return{x:r,y:n}}};function Vo(t,e){return e&&(oa(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function dl(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function t9(t,e){const{element:r,datasetIndex:n,index:i}=e,a=t.getDatasetMeta(n).controller,{label:s,value:f}=a.getLabelAndValue(i);return{chart:t,label:s,parsed:a.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:f,dataset:a.getDataset(),dataIndex:i,datasetIndex:n,element:r}}function U2(t,e){const r=t.chart.ctx,{body:n,footer:i,title:a}=t,{boxWidth:s,boxHeight:f}=e,_=Oa(e.bodyFont),N=Oa(e.titleFont),I=Oa(e.footerFont),me=a.length,fe=i.length,Te=n.length,qe=xs(e.padding);let Ve=qe.height,Ue=0,Ee=n.reduce((tt,et)=>tt+et.before.length+et.lines.length+et.after.length,0);if(Ee+=t.beforeBody.length+t.afterBody.length,me&&(Ve+=me*N.lineHeight+(me-1)*e.titleSpacing+e.titleMarginBottom),Ee){const tt=e.displayColors?Math.max(f,_.lineHeight):_.lineHeight;Ve+=Te*tt+(Ee-Te)*_.lineHeight+(Ee-1)*e.bodySpacing}fe&&(Ve+=e.footerMarginTop+fe*I.lineHeight+(fe-1)*e.footerSpacing);let Fe=0;const He=function(tt){Ue=Math.max(Ue,r.measureText(tt).width+Fe)};return r.save(),r.font=N.string,Di(t.title,He),r.font=_.string,Di(t.beforeBody.concat(t.afterBody),He),Fe=e.displayColors?s+2+e.boxPadding:0,Di(n,tt=>{Di(tt.before,He),Di(tt.lines,He),Di(tt.after,He)}),Fe=0,r.font=I.string,Di(t.footer,He),r.restore(),Ue+=qe.width,{width:Ue,height:Ve}}function r9(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function n9(t,e,r,n){const{x:i,width:a}=n,s=r.caretSize+r.caretPadding;if(t==="left"&&i+a+s>e.width||t==="right"&&i-a-s<0)return!0}function i9(t,e,r,n){const{x:i,width:a}=r,{width:s,chartArea:{left:f,right:_}}=t;let N="center";return n==="center"?N=i<=(f+_)/2?"left":"right":i<=a/2?N="left":i>=s-a/2&&(N="right"),n9(N,t,e,r)&&(N="center"),N}function V2(t,e,r){const n=r.yAlign||e.yAlign||r9(t,r);return{xAlign:r.xAlign||e.xAlign||i9(t,e,r,n),yAlign:n}}function a9(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function s9(t,e,r){let{y:n,height:i}=t;return e==="top"?n+=r:e==="bottom"?n-=i+r:n-=i/2,n}function $2(t,e,r,n){const{caretSize:i,caretPadding:a,cornerRadius:s}=t,{xAlign:f,yAlign:_}=r,N=i+a,{topLeft:I,topRight:me,bottomLeft:fe,bottomRight:Te}=Oc(s);let qe=a9(e,f);const Ve=s9(e,_,N);return _==="center"?f==="left"?qe+=N:f==="right"&&(qe-=N):f==="left"?qe-=Math.max(I,fe)+i:f==="right"&&(qe+=Math.max(me,Te)+i),{x:$a(qe,0,n.width-e.width),y:$a(Ve,0,n.height-e.height)}}function Kh(t,e,r){const n=xs(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Y2(t){return Vo([],dl(t))}function o9(t,e,r){return cc(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function G2(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const jS={beforeTitle:ll,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:ll,beforeBody:ll,beforeLabel:ll,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return fi(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:ll,afterBody:ll,beforeFooter:ll,footer:ll,afterFooter:ll};function Is(t,e,r,n){const i=t[e].call(r,n);return typeof i>"u"?jS[e].call(r,n):i}class d0 extends Tl{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&r.options.animation&&n.animations,a=new lS(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=o9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,i=Is(n,"beforeTitle",this,e),a=Is(n,"title",this,e),s=Is(n,"afterTitle",this,e);let f=[];return f=Vo(f,dl(i)),f=Vo(f,dl(a)),f=Vo(f,dl(s)),f}getBeforeBody(e,r){return Y2(Is(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,i=[];return Di(e,a=>{const s={before:[],lines:[],after:[]},f=G2(n,a);Vo(s.before,dl(Is(f,"beforeLabel",this,a))),Vo(s.lines,Is(f,"label",this,a)),Vo(s.after,dl(Is(f,"afterLabel",this,a))),i.push(s)}),i}getAfterBody(e,r){return Y2(Is(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,i=Is(n,"beforeFooter",this,e),a=Is(n,"footer",this,e),s=Is(n,"afterFooter",this,e);let f=[];return f=Vo(f,dl(i)),f=Vo(f,dl(a)),f=Vo(f,dl(s)),f}_createItems(e){const r=this._active,n=this.chart.data,i=[],a=[],s=[];let f=[],_,N;for(_=0,N=r.length;_<N;++_)f.push(t9(this.chart,r[_]));return e.filter&&(f=f.filter((I,me,fe)=>e.filter(I,me,fe,n))),e.itemSort&&(f=f.sort((I,me)=>e.itemSort(I,me,n))),Di(f,I=>{const me=G2(e.callbacks,I);i.push(Is(me,"labelColor",this,I)),a.push(Is(me,"labelPointStyle",this,I)),s.push(Is(me,"labelTextColor",this,I))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=s,this.dataPoints=f,f}update(e,r){const n=this.options.setContext(this.getContext()),i=this._active;let a,s=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const f=Id[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const _=this._size=U2(this,n),N=Object.assign({},f,_),I=V2(this.chart,n,N),me=$2(n,N,I,this.chart);this.xAlign=I.xAlign,this.yAlign=I.yAlign,a={opacity:1,x:me.x,y:me.y,width:_.width,height:_.height,caretX:f.x,caretY:f.y}}this._tooltipItems=s,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,i){const a=this.getCaretPosition(e,n,i);r.lineTo(a.x1,a.y1),r.lineTo(a.x2,a.y2),r.lineTo(a.x3,a.y3)}getCaretPosition(e,r,n){const{xAlign:i,yAlign:a}=this,{caretSize:s,cornerRadius:f}=n,{topLeft:_,topRight:N,bottomLeft:I,bottomRight:me}=Oc(f),{x:fe,y:Te}=e,{width:qe,height:Ve}=r;let Ue,Ee,Fe,He,tt,et;return a==="center"?(tt=Te+Ve/2,i==="left"?(Ue=fe,Ee=Ue-s,He=tt+s,et=tt-s):(Ue=fe+qe,Ee=Ue+s,He=tt-s,et=tt+s),Fe=Ue):(i==="left"?Ee=fe+Math.max(_,I)+s:i==="right"?Ee=fe+qe-Math.max(N,me)-s:Ee=this.caretX,a==="top"?(He=Te,tt=He-s,Ue=Ee-s,Fe=Ee+s):(He=Te+Ve,tt=He+s,Ue=Ee+s,Fe=Ee-s),et=He),{x1:Ue,x2:Ee,x3:Fe,y1:He,y2:tt,y3:et}}drawTitle(e,r,n){const i=this.title,a=i.length;let s,f,_;if(a){const N=zu(n.rtl,this.x,this.width);for(e.x=Kh(this,n.titleAlign,n),r.textAlign=N.textAlign(n.titleAlign),r.textBaseline="middle",s=Oa(n.titleFont),f=n.titleSpacing,r.fillStyle=n.titleColor,r.font=s.string,_=0;_<a;++_)r.fillText(i[_],N.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+f,_+1===a&&(e.y+=n.titleMarginBottom-f)}}_drawColorBox(e,r,n,i,a){const s=this.labelColors[n],f=this.labelPointStyles[n],{boxHeight:_,boxWidth:N}=a,I=Oa(a.bodyFont),me=Kh(this,"left",a),fe=i.x(me),Te=_<I.lineHeight?(I.lineHeight-_)/2:0,qe=r.y+Te;if(a.usePointStyle){const Ve={radius:Math.min(N,_)/2,pointStyle:f.pointStyle,rotation:f.rotation,borderWidth:1},Ue=i.leftForLtr(fe,N)+N/2,Ee=qe+_/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,i0(e,Ve,Ue,Ee),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,i0(e,Ve,Ue,Ee)}else{e.lineWidth=mi(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const Ve=i.leftForLtr(fe,N),Ue=i.leftForLtr(i.xPlus(fe,1),N-2),Ee=Oc(s.borderRadius);Object.values(Ee).some(Fe=>Fe!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,kf(e,{x:Ve,y:qe,w:N,h:_,radius:Ee}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),kf(e,{x:Ue,y:qe+1,w:N-2,h:_-2,radius:Ee}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(Ve,qe,N,_),e.strokeRect(Ve,qe,N,_),e.fillStyle=s.backgroundColor,e.fillRect(Ue,qe+1,N-2,_-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:i}=this,{bodySpacing:a,bodyAlign:s,displayColors:f,boxHeight:_,boxWidth:N,boxPadding:I}=n,me=Oa(n.bodyFont);let fe=me.lineHeight,Te=0;const qe=zu(n.rtl,this.x,this.width),Ve=function(Pt){r.fillText(Pt,qe.x(e.x+Te),e.y+fe/2),e.y+=fe+a},Ue=qe.textAlign(s);let Ee,Fe,He,tt,et,ct,xt;for(r.textAlign=s,r.textBaseline="middle",r.font=me.string,e.x=Kh(this,Ue,n),r.fillStyle=n.bodyColor,Di(this.beforeBody,Ve),Te=f&&Ue!=="right"?s==="center"?N/2+I:N+2+I:0,tt=0,ct=i.length;tt<ct;++tt){for(Ee=i[tt],Fe=this.labelTextColors[tt],r.fillStyle=Fe,Di(Ee.before,Ve),He=Ee.lines,f&&He.length&&(this._drawColorBox(r,e,tt,qe,n),fe=Math.max(me.lineHeight,_)),et=0,xt=He.length;et<xt;++et)Ve(He[et]),fe=me.lineHeight;Di(Ee.after,Ve)}Te=0,fe=me.lineHeight,Di(this.afterBody,Ve),e.y-=a}drawFooter(e,r,n){const i=this.footer,a=i.length;let s,f;if(a){const _=zu(n.rtl,this.x,this.width);for(e.x=Kh(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=_.textAlign(n.footerAlign),r.textBaseline="middle",s=Oa(n.footerFont),r.fillStyle=n.footerColor,r.font=s.string,f=0;f<a;++f)r.fillText(i[f],_.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,r,n,i){const{xAlign:a,yAlign:s}=this,{x:f,y:_}=e,{width:N,height:I}=n,{topLeft:me,topRight:fe,bottomLeft:Te,bottomRight:qe}=Oc(i.cornerRadius);r.fillStyle=i.backgroundColor,r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.beginPath(),r.moveTo(f+me,_),s==="top"&&this.drawCaret(e,r,n,i),r.lineTo(f+N-fe,_),r.quadraticCurveTo(f+N,_,f+N,_+fe),s==="center"&&a==="right"&&this.drawCaret(e,r,n,i),r.lineTo(f+N,_+I-qe),r.quadraticCurveTo(f+N,_+I,f+N-qe,_+I),s==="bottom"&&this.drawCaret(e,r,n,i),r.lineTo(f+Te,_+I),r.quadraticCurveTo(f,_+I,f,_+I-Te),s==="center"&&a==="left"&&this.drawCaret(e,r,n,i),r.lineTo(f,_+me),r.quadraticCurveTo(f,_,f+me,_),r.closePath(),r.fill(),i.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,i=n&&n.x,a=n&&n.y;if(i||a){const s=Id[e.position].call(this,this._active,this._eventPosition);if(!s)return;const f=this._size=U2(this,e),_=Object.assign({},s,this._size),N=V2(r,e,_),I=$2(e,_,N,r);(i._to!==I.x||a._to!==I.y)&&(this.xAlign=N.xAlign,this.yAlign=N.yAlign,this.width=f.width,this.height=f.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,I))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=xs(r.padding),f=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&f&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,i,r),rS(e,r.textDirection),a.y+=s.top,this.drawTitle(a,e,r),this.drawBody(a,e,r),this.drawFooter(a,e,r),nS(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,i=e.map(({datasetIndex:f,index:_})=>{const N=this.chart.getDatasetMeta(f);if(!N)throw new Error("Cannot find a dataset at index "+f);return{datasetIndex:f,element:N.data[_],index:_}}),a=!Yp(n,i),s=this._positionChanged(i,r);(a||s)&&(this._active=i,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],s=this._getActiveElements(e,a,r,n),f=this._positionChanged(s,e),_=r||!Yp(s,a)||f;return _&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),_}_getActiveElements(e,r,n,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return r.filter(f=>this.chart.data.datasets[f.datasetIndex]&&this.chart.getDatasetMeta(f.datasetIndex).controller.getParsed(f.index)!==void 0);const s=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&s.reverse(),s}_positionChanged(e,r){const{caretX:n,caretY:i,options:a}=this,s=Id[a.position].call(this,e,r);return s!==!1&&(n!==s.x||i!==s.y)}}cn(d0,"positioners",Id);var l9={id:"tooltip",_element:d0,positioners:Id,afterInit(t,e,r){r&&(t.tooltip=new d0({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},c9=Object.freeze({__proto__:null,Colors:wE,Decimation:ME,Filler:VE,Legend:KE,SubTitle:e9,Title:QE,Tooltip:l9});const u9=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function d9(t,e,r,n){const i=t.indexOf(e);if(i===-1)return u9(t,e,r,n);const a=t.lastIndexOf(e);return i!==a?r:i}const f9=(t,e)=>t===null?null:$a(Math.round(t),0,e);function X2(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class f0 extends Kc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:i,label:a}of r)n[i]===a&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(fi(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:d9(n,e,Qn(r,e),this._addedLabels),f9(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,i=[];let a=this.getLabels();a=e===0&&r===a.length-1?a:a.slice(e,r+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=r;s++)i.push({value:s});return i}getLabelForValue(e){return X2.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}cn(f0,"id","category"),cn(f0,"defaults",{ticks:{callback:X2}});function h9(t,e){const r=[],{bounds:i,step:a,min:s,max:f,precision:_,count:N,maxTicks:I,maxDigits:me,includeBounds:fe}=t,Te=a||1,qe=I-1,{min:Ve,max:Ue}=e,Ee=!fi(s),Fe=!fi(f),He=!fi(N),tt=(Ue-Ve)/(me+1);let et=Ub((Ue-Ve)/qe/Te)*Te,ct,xt,Pt,ir;if(et<1e-14&&!Ee&&!Fe)return[{value:Ve},{value:Ue}];ir=Math.ceil(Ue/et)-Math.floor(Ve/et),ir>qe&&(et=Ub(ir*et/qe/Te)*Te),fi(_)||(ct=Math.pow(10,_),et=Math.ceil(et*ct)/ct),i==="ticks"?(xt=Math.floor(Ve/et)*et,Pt=Math.ceil(Ue/et)*et):(xt=Ve,Pt=Ue),Ee&&Fe&&a&&a7((f-s)/a,et/1e3)?(ir=Math.round(Math.min((f-s)/et,I)),et=(f-s)/ir,xt=s,Pt=f):He?(xt=Ee?s:xt,Pt=Fe?f:Pt,ir=N-1,et=(Pt-xt)/ir):(ir=(Pt-xt)/et,Kd(ir,Math.round(ir),et/1e3)?ir=Math.round(ir):ir=Math.ceil(ir));const mr=Math.max(Vb(et),Vb(xt));ct=Math.pow(10,fi(_)?mr:_),xt=Math.round(xt*ct)/ct,Pt=Math.round(Pt*ct)/ct;let kr=0;for(Ee&&(fe&&xt!==s?(r.push({value:s}),xt<s&&kr++,Kd(Math.round((xt+kr*et)*ct)/ct,s,Z2(s,tt,t))&&kr++):xt<s&&kr++);kr<ir;++kr){const yr=Math.round((xt+kr*et)*ct)/ct;if(Fe&&yr>f)break;r.push({value:yr})}return Fe&&fe&&Pt!==f?r.length&&Kd(r[r.length-1].value,f,Z2(f,tt,t))?r[r.length-1].value=f:r.push({value:f}):(!Fe||Pt===f)&&r.push({value:Pt}),r}function Z2(t,e,{horizontal:r,minRotation:n}){const i=Co(n),a=(r?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+t).length;return Math.min(e/a,s)}class em extends Kc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return fi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:i,max:a}=this;const s=_=>i=r?i:_,f=_=>a=n?a:_;if(e){const _=Jo(i),N=Jo(a);_<0&&N<0?f(0):_>0&&N>0&&s(0)}if(i===a){let _=a===0?1:Math.abs(a*.05);f(a+_),e||s(i-_)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),r=r||11),r&&(i=Math.min(r,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},a=this._range||this,s=h9(i,a);return e.bounds==="ticks"&&O3(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-r)/Math.max(e.length-1,1)/2;r-=i,n+=i}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return Nf(e,this.chart.options.locale,this.options.ticks.format)}}class h0 extends em{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=_a(e)?e:0,this.max=_a(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Co(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}cn(h0,"id","linear"),cn(h0,"defaults",{ticks:{callback:gm.formatters.numeric}});const Tf=t=>Math.floor(Wl(t)),Cc=(t,e)=>Math.pow(10,Tf(t)+e);function K2(t){return t/Math.pow(10,Tf(t))===1}function J2(t,e,r){const n=Math.pow(10,r),i=Math.floor(t/n);return Math.ceil(e/n)-i}function p9(t,e){const r=e-t;let n=Tf(r);for(;J2(t,e,n)>10;)n++;for(;J2(t,e,n)<10;)n--;return Math.min(n,Tf(t))}function m9(t,{min:e,max:r}){e=Xs(t.min,e);const n=[],i=Tf(e);let a=p9(e,r),s=a<0?Math.pow(10,Math.abs(a)):1;const f=Math.pow(10,a),_=i>a?Math.pow(10,i):0,N=Math.round((e-_)*s)/s,I=Math.floor((e-_)/f/10)*f*10;let me=Math.floor((N-I)/Math.pow(10,a)),fe=Xs(t.min,Math.round((_+I+me*Math.pow(10,a))*s)/s);for(;fe<r;)n.push({value:fe,major:K2(fe),significand:me}),me>=10?me=me<15?15:20:me++,me>=20&&(a++,me=2,s=a>=0?1:s),fe=Math.round((_+I+me*Math.pow(10,a))*s)/s;const Te=Xs(t.max,fe);return n.push({value:Te,major:K2(Te),significand:me}),n}class p0 extends Kc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const n=em.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return _a(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=_a(e)?Math.max(0,e):null,this.max=_a(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!_a(this._userMin)&&(this.min=e===Cc(this.min,0)?Cc(this.min,-1):Cc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let n=this.min,i=this.max;const a=f=>n=e?n:f,s=f=>i=r?i:f;n===i&&(n<=0?(a(1),s(10)):(a(Cc(n,-1)),s(Cc(i,1)))),n<=0&&a(Cc(i,-1)),i<=0&&s(Cc(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},n=m9(r,this);return e.bounds==="ticks"&&O3(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Nf(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Wl(e),this._valueRange=Wl(this.max)-Wl(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Wl(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}cn(p0,"id","logarithmic"),cn(p0,"defaults",{ticks:{callback:gm.formatters.logarithmic,major:{enabled:!0}}});function m0(t){const e=t.ticks;if(e.display&&t.display){const r=xs(e.backdropPadding);return Qn(e.font&&e.font.size,la.font.size)+r.height}return 0}function v9(t,e,r){return r=oa(r)?r:[r],{w:_7(t,e.string,r),h:r.length*e.lineHeight}}function Q2(t,e,r,n,i){return t===n||t===i?{start:e-r/2,end:e+r/2}:t<n||t>i?{start:e-r,end:e}:{start:e,end:e+r}}function g9(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],i=[],a=t._pointLabels.length,s=t.options.pointLabels,f=s.centerPointLabels?Si/a:0;for(let _=0;_<a;_++){const N=s.setContext(t.getPointLabelContext(_));i[_]=N.padding;const I=t.getPointPosition(_,t.drawingArea+i[_],f),me=Oa(N.font),fe=v9(t.ctx,me,t._pointLabels[_]);n[_]=fe;const Te=ms(t.getIndexAngle(_)+f),qe=Math.round(gy(Te)),Ve=Q2(qe,I.x,fe.w,0,180),Ue=Q2(qe,I.y,fe.h,90,270);y9(r,e,Te,Ve,Ue)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=w9(t,n,i)}function y9(t,e,r,n,i){const a=Math.abs(Math.sin(r)),s=Math.abs(Math.cos(r));let f=0,_=0;n.start<e.l?(f=(e.l-n.start)/a,t.l=Math.min(t.l,e.l-f)):n.end>e.r&&(f=(n.end-e.r)/a,t.r=Math.max(t.r,e.r+f)),i.start<e.t?(_=(e.t-i.start)/s,t.t=Math.min(t.t,e.t-_)):i.end>e.b&&(_=(i.end-e.b)/s,t.b=Math.max(t.b,e.b+_))}function x9(t,e,r){const n=t.drawingArea,{extra:i,additionalAngle:a,padding:s,size:f}=r,_=t.getPointPosition(e,n+i+s,a),N=Math.round(gy(ms(_.angle+ja))),I=k9(_.y,f.h,N),me=_9(N),fe=S9(_.x,f.w,me);return{visible:!0,x:_.x,y:I,textAlign:me,left:fe,top:I,right:fe+f.w,bottom:I+f.h}}function b9(t,e){if(!e)return!0;const{left:r,top:n,right:i,bottom:a}=t;return!(xl({x:r,y:n},e)||xl({x:r,y:a},e)||xl({x:i,y:n},e)||xl({x:i,y:a},e))}function w9(t,e,r){const n=[],i=t._pointLabels.length,a=t.options,{centerPointLabels:s,display:f}=a.pointLabels,_={extra:m0(a)/2,additionalAngle:s?Si/i:0};let N;for(let I=0;I<i;I++){_.padding=r[I],_.size=e[I];const me=x9(t,I,_);n.push(me),f==="auto"&&(me.visible=b9(me,N),me.visible&&(N=me))}return n}function _9(t){return t===0||t===180?"center":t<180?"left":"right"}function S9(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function k9(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function M9(t,e,r){const{left:n,top:i,right:a,bottom:s}=r,{backdropColor:f}=e;if(!fi(f)){const _=Oc(e.borderRadius),N=xs(e.backdropPadding);t.fillStyle=f;const I=n-N.left,me=i-N.top,fe=a-n+N.width,Te=s-i+N.height;Object.values(_).some(qe=>qe!==0)?(t.beginPath(),kf(t,{x:I,y:me,w:fe,h:Te,radius:_}),t.fill()):t.fillRect(I,me,fe,Te)}}function T9(t,e){const{ctx:r,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){const a=t._pointLabelItems[i];if(!a.visible)continue;const s=n.setContext(t.getPointLabelContext(i));M9(r,s,a);const f=Oa(s.font),{x:_,y:N,textAlign:I}=a;Yc(r,t._pointLabels[i],_,N+f.lineHeight/2,f,{color:s.color,textAlign:I,textBaseline:"middle"})}}function LS(t,e,r,n){const{ctx:i}=t;if(r)i.arc(t.xCenter,t.yCenter,e,0,ra);else{let a=t.getPointPosition(0,e);i.moveTo(a.x,a.y);for(let s=1;s<n;s++)a=t.getPointPosition(s,e),i.lineTo(a.x,a.y)}}function A9(t,e,r,n,i){const a=t.ctx,s=e.circular,{color:f,lineWidth:_}=e;!s&&!n||!f||!_||r<0||(a.save(),a.strokeStyle=f,a.lineWidth=_,a.setLineDash(i.dash||[]),a.lineDashOffset=i.dashOffset,a.beginPath(),LS(t,r,s,n),a.closePath(),a.stroke(),a.restore())}function C9(t,e,r){return cc(t,{label:r,index:e,type:"pointLabel"})}class Od extends em{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=xs(m0(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=_a(e)&&!isNaN(e)?e:0,this.max=_a(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/m0(this.options))}generateTickLabels(e){em.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{const i=Xi(this.options.pointLabels.callback,[r,n],this);return i||i===0?i:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?g9(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,i){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,i))}getIndexAngle(e){const r=ra/(this._pointLabels.length||1),n=this.options.startAngle||0;return ms(e*r+Co(n))}getDistanceFromCenterForValue(e){if(fi(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(fi(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const n=r[e];return C9(this.getContext(),e,n)}}getPointPosition(e,r,n=0){const i=this.getIndexAngle(e)-ja+n;return{x:Math.cos(i)*r+this.xCenter,y:Math.sin(i)*r+this.yCenter,angle:i}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:n,right:i,bottom:a}=this._pointLabelItems[e];return{left:r,top:n,right:i,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),LS(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:n,grid:i,border:a}=r,s=this._pointLabels.length;let f,_,N;if(r.pointLabels.display&&T9(this,s),i.display&&this.ticks.forEach((I,me)=>{if(me!==0||me===0&&this.min<0){_=this.getDistanceFromCenterForValue(I.value);const fe=this.getContext(me),Te=i.setContext(fe),qe=a.setContext(fe);A9(this,Te,_,s,qe)}}),n.display){for(e.save(),f=s-1;f>=0;f--){const I=n.setContext(this.getPointLabelContext(f)),{color:me,lineWidth:fe}=I;!fe||!me||(e.lineWidth=fe,e.strokeStyle=me,e.setLineDash(I.borderDash),e.lineDashOffset=I.borderDashOffset,_=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),N=this.getPointPosition(f,_),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(N.x,N.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let a,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((f,_)=>{if(_===0&&this.min>=0&&!r.reverse)return;const N=n.setContext(this.getContext(_)),I=Oa(N.font);if(a=this.getDistanceFromCenterForValue(this.ticks[_].value),N.showLabelBackdrop){e.font=I.string,s=e.measureText(f.label).width,e.fillStyle=N.backdropColor;const me=xs(N.backdropPadding);e.fillRect(-s/2-me.left,-a-I.size/2-me.top,s+me.width,I.size+me.height)}Yc(e,f.label,0,-a,I,{color:N.color,strokeColor:N.textStrokeColor,strokeWidth:N.textStrokeWidth})}),e.restore()}drawTitle(){}}cn(Od,"id","radialLinear"),cn(Od,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:gm.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),cn(Od,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),cn(Od,"descriptors",{angleLines:{_fallback:"grid"}});const Sm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Bs=Object.keys(Sm);function ew(t,e){return t-e}function tw(t,e){if(fi(e))return null;const r=t._adapter,{parser:n,round:i,isoWeekday:a}=t._parseOpts;let s=e;return typeof n=="function"&&(s=n(s)),_a(s)||(s=typeof n=="string"?r.parse(s,n):r.parse(s)),s===null?null:(i&&(s=i==="week"&&(Uu(a)||a===!0)?r.startOf(s,"isoWeek",a):r.startOf(s,i)),+s)}function rw(t,e,r,n){const i=Bs.length;for(let a=Bs.indexOf(t);a<i-1;++a){const s=Sm[Bs[a]],f=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((r-e)/(f*s.size))<=n)return Bs[a]}return Bs[i-1]}function j9(t,e,r,n,i){for(let a=Bs.length-1;a>=Bs.indexOf(r);a--){const s=Bs[a];if(Sm[s].common&&t._adapter.diff(i,n,s)>=e-1)return s}return Bs[r?Bs.indexOf(r):0]}function L9(t){for(let e=Bs.indexOf(t)+1,r=Bs.length;e<r;++e)if(Sm[Bs[e]].common)return Bs[e]}function nw(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:i}=yy(r,e),a=r[n]>=e?r[n]:r[i];t[a]=!0}}function E9(t,e,r,n){const i=t._adapter,a=+i.startOf(e[0].value,n),s=e[e.length-1].value;let f,_;for(f=a;f<=s;f=+i.add(f,1,n))_=r[f],_>=0&&(e[_].major=!0);return e}function iw(t,e,r){const n=[],i={},a=e.length;let s,f;for(s=0;s<a;++s)f=e[s],i[f]=s,n.push({value:f,major:!1});return a===0||!r?n:E9(t,n,i,r)}class Af extends Kc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),i=this._adapter=new Oj._date(e.adapters.date);i.init(r),Zd(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:tw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:i,max:a,minDefined:s,maxDefined:f}=this.getUserBounds();function _(N){!s&&!isNaN(N.min)&&(i=Math.min(i,N.min)),!f&&!isNaN(N.max)&&(a=Math.max(a,N.max))}(!s||!f)&&(_(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&_(this.getMinMax(!1))),i=_a(i)&&!isNaN(i)?i:+r.startOf(Date.now(),n),a=_a(a)&&!isNaN(a)?a:+r.endOf(Date.now(),n)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,s=this.max,f=c7(i,a,s);return this._unit=r.unit||(n.autoSkip?rw(r.minUnit,this.min,this.max,this._getLabelCapacity(a)):j9(this,f.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:L9(this._unit),this.initOffsets(i),e.reverse&&f.reverse(),iw(this,f,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?r=1-i:r=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?n=a:n=(a-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;r=$a(r,0,s),n=$a(n,0,s),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,i=this.options,a=i.time,s=a.unit||rw(a.minUnit,r,n,this._getLabelCapacity(r)),f=Qn(i.ticks.stepSize,1),_=s==="week"?a.isoWeekday:!1,N=Uu(_)||_===!0,I={};let me=r,fe,Te;if(N&&(me=+e.startOf(me,"isoWeek",_)),me=+e.startOf(me,N?"day":s),e.diff(n,r,s)>1e5*f)throw new Error(r+" and "+n+" are too far apart with stepSize of "+f+" "+s);const qe=i.ticks.source==="data"&&this.getDataTimestamps();for(fe=me,Te=0;fe<n;fe=+e.add(fe,f,s),Te++)nw(I,fe,qe);return(fe===n||i.bounds==="ticks"||Te===1)&&nw(I,fe,qe),Object.keys(I).sort(ew).map(Ve=>+Ve)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const i=this.options.time.displayFormats,a=this._unit,s=r||i[a];return this._adapter.format(e,s)}_tickFormatFunction(e,r,n,i){const a=this.options,s=a.ticks.callback;if(s)return Xi(s,[e,r,n],this);const f=a.time.displayFormats,_=this._unit,N=this._majorUnit,I=_&&f[_],me=N&&f[N],fe=n[r],Te=N&&me&&fe&&fe.major;return this._adapter.format(e,i||(Te?me:I))}generateTickLabels(e){let r,n,i;for(r=0,n=e.length;r<n;++r)i=e[r],i.label=this._tickFormatFunction(i.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,i=Co(this.isHorizontal()?r.maxRotation:r.minRotation),a=Math.cos(i),s=Math.sin(i),f=this._resolveTickFontOptions(0).size;return{w:n*a+f*s,h:n*s+f*a}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,i=n[r.unit]||n.millisecond,a=this._tickFormatFunction(e,0,iw(this,[e],this._majorUnit),i),s=this._getLabelSize(a),f=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return f>0?f:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(r=0,n=i.length;r<n;++r)e=e.concat(i[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const i=this.getLabels();for(r=0,n=i.length;r<n;++r)e.push(tw(this,i[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return W3(e.sort(ew))}}cn(Af,"id","time"),cn(Af,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Jh(t,e,r){let n=0,i=t.length-1,a,s,f,_;r?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=yl(t,"pos",e)),{pos:a,time:f}=t[n],{pos:s,time:_}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=yl(t,"time",e)),{time:a,pos:f}=t[n],{time:s,pos:_}=t[i]);const N=s-a;return N?f+(_-f)*(e-a)/N:f}class v0 extends Af{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Jh(r,this.min),this._tableRange=Jh(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,i=[],a=[];let s,f,_,N,I;for(s=0,f=e.length;s<f;++s)N=e[s],N>=r&&N<=n&&i.push(N);if(i.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(s=0,f=i.length;s<f;++s)I=i[s+1],_=i[s-1],N=i[s],Math.round((I+_)/2)!==N&&a.push({time:N,pos:s/(f-1)});return a}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Jh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return Jh(this._table,n*this._tableRange+this._minPos,!0)}}cn(v0,"id","timeseries"),cn(v0,"defaults",Af.defaults);var D9=Object.freeze({__proto__:null,CategoryScale:f0,LinearScale:h0,LogarithmicScale:p0,RadialLinearScale:Od,TimeScale:Af,TimeSeriesScale:v0});const R9=[Ij,pE,c9,D9];var ES={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():e.moduleName=r()})(typeof self<"u"?self:cw,()=>{var e=(()=>{var r=Object.getOwnPropertyNames,n=(V,$)=>function(){return V&&($=(0,V[r(V)[0]])(V=0)),$},i=(V,$)=>function(){return $||(0,V[r(V)[0]])(($={exports:{}}).exports,$),$.exports},a=i({"src/version.js"(V){V.version="3.0.1"}}),s=i({"node_modules/native-promise-only/lib/npo.src.js"(V,$){(function(c,u,p){u[c]=u[c]||p(),typeof $<"u"&&$.exports&&($.exports=u[c])})("Promise",typeof window<"u"?window:V,function(){var c,u,p,v=Object.prototype.toString,m=typeof setImmediate<"u"?function(S){return setImmediate(S)}:setTimeout;try{Object.defineProperty({},"x",{}),c=function(S,L,F,P){return Object.defineProperty(S,L,{value:F,writable:!0,configurable:P!==!1})}}catch{c=function(L,F,P){return L[F]=P,L}}p=function(){var S,L,F;function P(J,H){this.fn=J,this.self=H,this.next=void 0}return{add:function(H,Y){F=new P(H,Y),L?L.next=F:S=F,L=F,F=void 0},drain:function(){var H=S;for(S=L=u=void 0;H;)H.fn.call(H.self),H=H.next}}}();function g(b,S){p.add(b,S),u||(u=m(p.drain))}function w(b){var S,L=typeof b;return b!=null&&(L=="object"||L=="function")&&(S=b.then),typeof S=="function"?S:!1}function o(){for(var b=0;b<this.chain.length;b++)T(this,this.state===1?this.chain[b].success:this.chain[b].failure,this.chain[b]);this.chain.length=0}function T(b,S,L){var F,P;try{S===!1?L.reject(b.msg):(S===!0?F=b.msg:F=S.call(void 0,b.msg),F===L.promise?L.reject(TypeError("Promise-chain cycle")):(P=w(F))?P.call(F,L.resolve,L.reject):L.resolve(F))}catch(J){L.reject(J)}}function y(b){var S,L=this;if(!L.triggered){L.triggered=!0,L.def&&(L=L.def);try{(S=w(b))?g(function(){var F=new M(L);try{S.call(b,function(){y.apply(F,arguments)},function(){k.apply(F,arguments)})}catch(P){k.call(F,P)}}):(L.msg=b,L.state=1,L.chain.length>0&&g(o,L))}catch(F){k.call(new M(L),F)}}}function k(b){var S=this;S.triggered||(S.triggered=!0,S.def&&(S=S.def),S.msg=b,S.state=2,S.chain.length>0&&g(o,S))}function D(b,S,L,F){for(var P=0;P<S.length;P++)(function(H){b.resolve(S[H]).then(function(Z){L(H,Z)},F)})(P)}function M(b){this.def=b,this.triggered=!1}function A(b){this.promise=b,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function C(b){if(typeof b!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var S=new A(this);this.then=function(F,P){var J={success:typeof F=="function"?F:!0,failure:typeof P=="function"?P:!1};return J.promise=new this.constructor(function(Y,Z){if(typeof Y!="function"||typeof Z!="function")throw TypeError("Not a function");J.resolve=Y,J.reject=Z}),S.chain.push(J),S.state!==0&&g(o,S),J.promise},this.catch=function(F){return this.then(void 0,F)};try{b.call(void 0,function(F){y.call(S,F)},function(F){k.call(S,F)})}catch(L){k.call(S,L)}}var j=c({},"constructor",C,!1);return C.prototype=j,c(j,"__NPO__",0,!1),c(C,"resolve",function(S){var L=this;return S&&typeof S=="object"&&S.__NPO__===1?S:new L(function(P,J){if(typeof P!="function"||typeof J!="function")throw TypeError("Not a function");P(S)})}),c(C,"reject",function(S){return new this(function(F,P){if(typeof F!="function"||typeof P!="function")throw TypeError("Not a function");P(S)})}),c(C,"all",function(S){var L=this;return v.call(S)!="[object Array]"?L.reject(TypeError("Not an array")):S.length===0?L.resolve([]):new L(function(P,J){if(typeof P!="function"||typeof J!="function")throw TypeError("Not a function");var H=S.length,Y=Array(H),Z=0;D(L,S,function(q,X){Y[q]=X,++Z===H&&P(Y)},J)})}),c(C,"race",function(S){var L=this;return v.call(S)!="[object Array]"?L.reject(TypeError("Not an array")):new L(function(P,J){if(typeof P!="function"||typeof J!="function")throw TypeError("Not a function");D(L,S,function(Y,Z){P(Z)},J)})}),C})}}),f=i({"node_modules/@plotly/d3/d3.js"(V,$){(function(){var h={version:"3.8.2"},c=[].slice,u=function(d){return c.call(d)},p=self.document;function v(d){return d&&(d.ownerDocument||d.document||d).documentElement}function m(d){return d&&(d.ownerDocument&&d.ownerDocument.defaultView||d.document&&d||d.defaultView)}if(p)try{u(p.documentElement.childNodes)[0].nodeType}catch{u=function(E){for(var O=E.length,se=new Array(O);O--;)se[O]=E[O];return se}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch{var g=this.Element.prototype,w=g.setAttribute,o=g.setAttributeNS,T=this.CSSStyleDeclaration.prototype,y=T.setProperty;g.setAttribute=function(E,O){w.call(this,E,O+"")},g.setAttributeNS=function(E,O,se){o.call(this,E,O,se+"")},T.setProperty=function(E,O,se){y.call(this,E,O+"",se)}}h.ascending=k;function k(d,E){return d<E?-1:d>E?1:d>=E?0:NaN}h.descending=function(d,E){return E<d?-1:E>d?1:E>=d?0:NaN},h.min=function(d,E){var O=-1,se=d.length,ue,ye;if(arguments.length===1){for(;++O<se;)if((ye=d[O])!=null&&ye>=ye){ue=ye;break}for(;++O<se;)(ye=d[O])!=null&&ue>ye&&(ue=ye)}else{for(;++O<se;)if((ye=E.call(d,d[O],O))!=null&&ye>=ye){ue=ye;break}for(;++O<se;)(ye=E.call(d,d[O],O))!=null&&ue>ye&&(ue=ye)}return ue},h.max=function(d,E){var O=-1,se=d.length,ue,ye;if(arguments.length===1){for(;++O<se;)if((ye=d[O])!=null&&ye>=ye){ue=ye;break}for(;++O<se;)(ye=d[O])!=null&&ye>ue&&(ue=ye)}else{for(;++O<se;)if((ye=E.call(d,d[O],O))!=null&&ye>=ye){ue=ye;break}for(;++O<se;)(ye=E.call(d,d[O],O))!=null&&ye>ue&&(ue=ye)}return ue},h.extent=function(d,E){var O=-1,se=d.length,ue,ye,De;if(arguments.length===1){for(;++O<se;)if((ye=d[O])!=null&&ye>=ye){ue=De=ye;break}for(;++O<se;)(ye=d[O])!=null&&(ue>ye&&(ue=ye),De<ye&&(De=ye))}else{for(;++O<se;)if((ye=E.call(d,d[O],O))!=null&&ye>=ye){ue=De=ye;break}for(;++O<se;)(ye=E.call(d,d[O],O))!=null&&(ue>ye&&(ue=ye),De<ye&&(De=ye))}return[ue,De]};function D(d){return d===null?NaN:+d}function M(d){return!isNaN(d)}h.sum=function(d,E){var O=0,se=d.length,ue,ye=-1;if(arguments.length===1)for(;++ye<se;)M(ue=+d[ye])&&(O+=ue);else for(;++ye<se;)M(ue=+E.call(d,d[ye],ye))&&(O+=ue);return O},h.mean=function(d,E){var O=0,se=d.length,ue,ye=-1,De=se;if(arguments.length===1)for(;++ye<se;)M(ue=D(d[ye]))?O+=ue:--De;else for(;++ye<se;)M(ue=D(E.call(d,d[ye],ye)))?O+=ue:--De;if(De)return O/De},h.quantile=function(d,E){var O=(d.length-1)*E+1,se=Math.floor(O),ue=+d[se-1],ye=O-se;return ye?ue+ye*(d[se]-ue):ue},h.median=function(d,E){var O=[],se=d.length,ue,ye=-1;if(arguments.length===1)for(;++ye<se;)M(ue=D(d[ye]))&&O.push(ue);else for(;++ye<se;)M(ue=D(E.call(d,d[ye],ye)))&&O.push(ue);if(O.length)return h.quantile(O.sort(k),.5)},h.variance=function(d,E){var O=d.length,se=0,ue,ye,De=0,Me=-1,Oe=0;if(arguments.length===1)for(;++Me<O;)M(ue=D(d[Me]))&&(ye=ue-se,se+=ye/++Oe,De+=ye*(ue-se));else for(;++Me<O;)M(ue=D(E.call(d,d[Me],Me)))&&(ye=ue-se,se+=ye/++Oe,De+=ye*(ue-se));if(Oe>1)return De/(Oe-1)},h.deviation=function(){var d=h.variance.apply(this,arguments);return d&&Math.sqrt(d)};function A(d){return{left:function(E,O,se,ue){for(arguments.length<3&&(se=0),arguments.length<4&&(ue=E.length);se<ue;){var ye=se+ue>>>1;d(E[ye],O)<0?se=ye+1:ue=ye}return se},right:function(E,O,se,ue){for(arguments.length<3&&(se=0),arguments.length<4&&(ue=E.length);se<ue;){var ye=se+ue>>>1;d(E[ye],O)>0?ue=ye:se=ye+1}return se}}}var C=A(k);h.bisectLeft=C.left,h.bisect=h.bisectRight=C.right,h.bisector=function(d){return A(d.length===1?function(E,O){return k(d(E),O)}:d)},h.shuffle=function(d,E,O){(se=arguments.length)<3&&(O=d.length,se<2&&(E=0));for(var se=O-E,ue,ye;se;)ye=Math.random()*se--|0,ue=d[se+E],d[se+E]=d[ye+E],d[ye+E]=ue;return d},h.permute=function(d,E){for(var O=E.length,se=new Array(O);O--;)se[O]=d[E[O]];return se},h.pairs=function(d){for(var E=0,O=d.length-1,se=d[0],ue=new Array(O<0?0:O);E<O;)ue[E]=[se,se=d[++E]];return ue},h.transpose=function(d){if(!(ye=d.length))return[];for(var E=-1,O=h.min(d,j),se=new Array(O);++E<O;)for(var ue=-1,ye,De=se[E]=new Array(ye);++ue<ye;)De[ue]=d[ue][E];return se};function j(d){return d.length}h.zip=function(){return h.transpose(arguments)},h.keys=function(d){var E=[];for(var O in d)E.push(O);return E},h.values=function(d){var E=[];for(var O in d)E.push(d[O]);return E},h.entries=function(d){var E=[];for(var O in d)E.push({key:O,value:d[O]});return E},h.merge=function(d){for(var E=d.length,O,se=-1,ue=0,ye,De;++se<E;)ue+=d[se].length;for(ye=new Array(ue);--E>=0;)for(De=d[E],O=De.length;--O>=0;)ye[--ue]=De[O];return ye};var b=Math.abs;h.range=function(d,E,O){if(arguments.length<3&&(O=1,arguments.length<2&&(E=d,d=0)),(E-d)/O===1/0)throw new Error("infinite range");var se=[],ue=S(b(O)),ye=-1,De;if(d*=ue,E*=ue,O*=ue,O<0)for(;(De=d+O*++ye)>E;)se.push(De/ue);else for(;(De=d+O*++ye)<E;)se.push(De/ue);return se};function S(d){for(var E=1;d*E%1;)E*=10;return E}function L(d,E){for(var O in E)Object.defineProperty(d.prototype,O,{value:E[O],enumerable:!1})}h.map=function(d,E){var O=new F;if(d instanceof F)d.forEach(function(Me,Oe){O.set(Me,Oe)});else if(Array.isArray(d)){var se=-1,ue=d.length,ye;if(arguments.length===1)for(;++se<ue;)O.set(se,d[se]);else for(;++se<ue;)O.set(E.call(d,ye=d[se],se),ye)}else for(var De in d)O.set(De,d[De]);return O};function F(){this._=Object.create(null)}var P="__proto__",J="\0";L(F,{has:Z,get:function(d){return this._[H(d)]},set:function(d,E){return this._[H(d)]=E},remove:z,keys:q,values:function(){var d=[];for(var E in this._)d.push(this._[E]);return d},entries:function(){var d=[];for(var E in this._)d.push({key:Y(E),value:this._[E]});return d},size:X,empty:K,forEach:function(d){for(var E in this._)d.call(this,Y(E),this._[E])}});function H(d){return(d+="")===P||d[0]===J?J+d:d}function Y(d){return(d+="")[0]===J?d.slice(1):d}function Z(d){return H(d)in this._}function z(d){return(d=H(d))in this._&&delete this._[d]}function q(){var d=[];for(var E in this._)d.push(Y(E));return d}function X(){var d=0;for(var E in this._)++d;return d}function K(){for(var d in this._)return!1;return!0}h.nest=function(){var d={},E=[],O=[],se,ue;function ye(Me,Oe,Ze){if(Ze>=E.length)return ue?ue.call(d,Oe):se?Oe.sort(se):Oe;for(var Ke=-1,wt=Oe.length,St=E[Ze++],Kt,ar,Et,Wt=new F,Xt;++Ke<wt;)(Xt=Wt.get(Kt=St(ar=Oe[Ke])))?Xt.push(ar):Wt.set(Kt,[ar]);return Me?(ar=Me(),Et=function(or,cr){ar.set(or,ye(Me,cr,Ze))}):(ar={},Et=function(or,cr){ar[or]=ye(Me,cr,Ze)}),Wt.forEach(Et),ar}function De(Me,Oe){if(Oe>=E.length)return Me;var Ze=[],Ke=O[Oe++];return Me.forEach(function(wt,St){Ze.push({key:wt,values:De(St,Oe)})}),Ke?Ze.sort(function(wt,St){return Ke(wt.key,St.key)}):Ze}return d.map=function(Me,Oe){return ye(Oe,Me,0)},d.entries=function(Me){return De(ye(h.map,Me,0),0)},d.key=function(Me){return E.push(Me),d},d.sortKeys=function(Me){return O[E.length-1]=Me,d},d.sortValues=function(Me){return se=Me,d},d.rollup=function(Me){return ue=Me,d},d},h.set=function(d){var E=new ee;if(d)for(var O=0,se=d.length;O<se;++O)E.add(d[O]);return E};function ee(){this._=Object.create(null)}L(ee,{has:Z,add:function(d){return this._[H(d+="")]=!0,d},remove:z,values:q,size:X,empty:K,forEach:function(d){for(var E in this._)d.call(this,Y(E))}}),h.behavior={};function ne(d){return d}h.rebind=function(d,E){for(var O=1,se=arguments.length,ue;++O<se;)d[ue=arguments[O]]=le(d,E,E[ue]);return d};function le(d,E,O){return function(){var se=O.apply(E,arguments);return se===E?d:se}}function W(d,E){if(E in d)return E;E=E.charAt(0).toUpperCase()+E.slice(1);for(var O=0,se=ce.length;O<se;++O){var ue=ce[O]+E;if(ue in d)return ue}}var ce=["webkit","ms","moz","Moz","o","O"];function de(){}h.dispatch=function(){for(var d=new ve,E=-1,O=arguments.length;++E<O;)d[arguments[E]]=pe(d);return d};function ve(){}ve.prototype.on=function(d,E){var O=d.indexOf("."),se="";if(O>=0&&(se=d.slice(O+1),d=d.slice(0,O)),d)return arguments.length<2?this[d].on(se):this[d].on(se,E);if(arguments.length===2){if(E==null)for(d in this)this.hasOwnProperty(d)&&this[d].on(se,null);return this}};function pe(d){var E=[],O=new F;function se(){for(var ue=E,ye=-1,De=ue.length,Me;++ye<De;)(Me=ue[ye].on)&&Me.apply(this,arguments);return d}return se.on=function(ue,ye){var De=O.get(ue),Me;return arguments.length<2?De&&De.on:(De&&(De.on=null,E=E.slice(0,Me=E.indexOf(De)).concat(E.slice(Me+1)),O.remove(ue)),ye&&E.push(O.set(ue,{on:ye})),d)},se}h.event=null;function be(){h.event.preventDefault()}function Le(){for(var d=h.event,E;E=d.sourceEvent;)d=E;return d}function Ae(d){for(var E=new ve,O=0,se=arguments.length;++O<se;)E[arguments[O]]=pe(E);return E.of=function(ue,ye){return function(De){try{var Me=De.sourceEvent=h.event;De.target=d,h.event=De,E[De.type].apply(ue,ye)}finally{h.event=Me}}},E}h.requote=function(d){return d.replace(We,"\\$&")};var We=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,te={}.__proto__?function(d,E){d.__proto__=E}:function(d,E){for(var O in E)d[O]=E[O]};function ae(d){return te(d,re),d}var G=function(d,E){return E.querySelector(d)},Q=function(d,E){return E.querySelectorAll(d)},U=function(d,E){var O=d.matches||d[W(d,"matchesSelector")];return U=function(se,ue){return O.call(se,ue)},U(d,E)};typeof Sizzle=="function"&&(G=function(d,E){return Sizzle(d,E)[0]||null},Q=Sizzle,U=Sizzle.matchesSelector),h.selection=function(){return h.select(p.documentElement)};var re=h.selection.prototype=[];re.select=function(d){var E=[],O,se,ue,ye;d=R(d);for(var De=-1,Me=this.length;++De<Me;){E.push(O=[]),O.parentNode=(ue=this[De]).parentNode;for(var Oe=-1,Ze=ue.length;++Oe<Ze;)(ye=ue[Oe])?(O.push(se=d.call(ye,ye.__data__,Oe,De)),se&&"__data__"in ye&&(se.__data__=ye.__data__)):O.push(null)}return ae(E)};function R(d){return typeof d=="function"?d:function(){return G(d,this)}}re.selectAll=function(d){var E=[],O,se;d=B(d);for(var ue=-1,ye=this.length;++ue<ye;)for(var De=this[ue],Me=-1,Oe=De.length;++Me<Oe;)(se=De[Me])&&(E.push(O=u(d.call(se,se.__data__,Me,ue))),O.parentNode=se);return ae(E)};function B(d){return typeof d=="function"?d:function(){return Q(d,this)}}var oe="http://www.w3.org/1999/xhtml",ie={svg:"http://www.w3.org/2000/svg",xhtml:oe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};h.ns={prefix:ie,qualify:function(d){var E=d.indexOf(":"),O=d;return E>=0&&(O=d.slice(0,E))!=="xmlns"&&(d=d.slice(E+1)),ie.hasOwnProperty(O)?{space:ie[O],local:d}:d}},re.attr=function(d,E){if(arguments.length<2){if(typeof d=="string"){var O=this.node();return d=h.ns.qualify(d),d.local?O.getAttributeNS(d.space,d.local):O.getAttribute(d)}for(E in d)this.each(xe(E,d[E]));return this}return this.each(xe(d,E))};function xe(d,E){d=h.ns.qualify(d);function O(){this.removeAttribute(d)}function se(){this.removeAttributeNS(d.space,d.local)}function ue(){this.setAttribute(d,E)}function ye(){this.setAttributeNS(d.space,d.local,E)}function De(){var Oe=E.apply(this,arguments);Oe==null?this.removeAttribute(d):this.setAttribute(d,Oe)}function Me(){var Oe=E.apply(this,arguments);Oe==null?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,Oe)}return E==null?d.local?se:O:typeof E=="function"?d.local?Me:De:d.local?ye:ue}function _e(d){return d.trim().replace(/\s+/g," ")}re.classed=function(d,E){if(arguments.length<2){if(typeof d=="string"){var O=this.node(),se=(d=Pe(d)).length,ue=-1;if(E=O.classList){for(;++ue<se;)if(!E.contains(d[ue]))return!1}else for(E=O.getAttribute("class");++ue<se;)if(!ke(d[ue]).test(E))return!1;return!0}for(E in d)this.each(Ge(E,d[E]));return this}return this.each(Ge(d,E))};function ke(d){return new RegExp("(?:^|\\s+)"+h.requote(d)+"(?:\\s+|$)","g")}function Pe(d){return(d+"").trim().split(/^|\s+/)}function Ge(d,E){d=Pe(d).map(Je);var O=d.length;function se(){for(var ye=-1;++ye<O;)d[ye](this,E)}function ue(){for(var ye=-1,De=E.apply(this,arguments);++ye<O;)d[ye](this,De)}return typeof E=="function"?ue:se}function Je(d){var E=ke(d);return function(O,se){if(ue=O.classList)return se?ue.add(d):ue.remove(d);var ue=O.getAttribute("class")||"";se?(E.lastIndex=0,E.test(ue)||O.setAttribute("class",_e(ue+" "+d))):O.setAttribute("class",_e(ue.replace(E," ")))}}re.style=function(d,E,O){var se=arguments.length;if(se<3){if(typeof d!="string"){se<2&&(E="");for(O in d)this.each(yt(O,d[O],E));return this}if(se<2){var ue=this.node();return m(ue).getComputedStyle(ue,null).getPropertyValue(d)}O=""}return this.each(yt(d,E,O))};function yt(d,E,O){function se(){this.style.removeProperty(d)}function ue(){this.style.setProperty(d,E,O)}function ye(){var De=E.apply(this,arguments);De==null?this.style.removeProperty(d):this.style.setProperty(d,De,O)}return E==null?se:typeof E=="function"?ye:ue}re.property=function(d,E){if(arguments.length<2){if(typeof d=="string")return this.node()[d];for(E in d)this.each(lt(E,d[E]));return this}return this.each(lt(d,E))};function lt(d,E){function O(){delete this[d]}function se(){this[d]=E}function ue(){var ye=E.apply(this,arguments);ye==null?delete this[d]:this[d]=ye}return E==null?O:typeof E=="function"?ue:se}re.text=function(d){return arguments.length?this.each(typeof d=="function"?function(){var E=d.apply(this,arguments);this.textContent=E??""}:d==null?function(){this.textContent=""}:function(){this.textContent=d}):this.node().textContent},re.html=function(d){return arguments.length?this.each(typeof d=="function"?function(){var E=d.apply(this,arguments);this.innerHTML=E??""}:d==null?function(){this.innerHTML=""}:function(){this.innerHTML=d}):this.node().innerHTML},re.append=function(d){return d=mt(d),this.select(function(){return this.appendChild(d.apply(this,arguments))})};function mt(d){function E(){var se=this.ownerDocument,ue=this.namespaceURI;return ue===oe&&se.documentElement.namespaceURI===oe?se.createElement(d):se.createElementNS(ue,d)}function O(){return this.ownerDocument.createElementNS(d.space,d.local)}return typeof d=="function"?d:(d=h.ns.qualify(d)).local?O:E}re.insert=function(d,E){return d=mt(d),E=R(E),this.select(function(){return this.insertBefore(d.apply(this,arguments),E.apply(this,arguments)||null)})},re.remove=function(){return this.each(Ce)};function Ce(){var d=this.parentNode;d&&d.removeChild(this)}re.data=function(d,E){var O=-1,se=this.length,ue,ye;if(!arguments.length){for(d=new Array(se=(ue=this[0]).length);++O<se;)(ye=ue[O])&&(d[O]=ye.__data__);return d}function De(Ke,wt){var St,Kt=Ke.length,ar=wt.length,Et=Math.min(Kt,ar),Wt=new Array(ar),Xt=new Array(ar),or=new Array(Kt),cr,Zt;if(E){var Cr=new F,Jr=new Array(Kt),nn;for(St=-1;++St<Kt;)(cr=Ke[St])&&(Cr.has(nn=E.call(cr,cr.__data__,St))?or[St]=cr:Cr.set(nn,cr),Jr[St]=nn);for(St=-1;++St<ar;)(cr=Cr.get(nn=E.call(wt,Zt=wt[St],St)))?cr!==!0&&(Wt[St]=cr,cr.__data__=Zt):Xt[St]=Ie(Zt),Cr.set(nn,!0);for(St=-1;++St<Kt;)St in Jr&&Cr.get(Jr[St])!==!0&&(or[St]=Ke[St])}else{for(St=-1;++St<Et;)cr=Ke[St],Zt=wt[St],cr?(cr.__data__=Zt,Wt[St]=cr):Xt[St]=Ie(Zt);for(;St<ar;++St)Xt[St]=Ie(wt[St]);for(;St<Kt;++St)or[St]=Ke[St]}Xt.update=Wt,Xt.parentNode=Wt.parentNode=or.parentNode=Ke.parentNode,Me.push(Xt),Oe.push(Wt),Ze.push(or)}var Me=ht([]),Oe=ae([]),Ze=ae([]);if(typeof d=="function")for(;++O<se;)De(ue=this[O],d.call(ue,ue.parentNode.__data__,O));else for(;++O<se;)De(ue=this[O],d);return Oe.enter=function(){return Me},Oe.exit=function(){return Ze},Oe};function Ie(d){return{__data__:d}}re.datum=function(d){return arguments.length?this.property("__data__",d):this.property("__data__")},re.filter=function(d){var E=[],O,se,ue;typeof d!="function"&&(d=Se(d));for(var ye=0,De=this.length;ye<De;ye++){E.push(O=[]),O.parentNode=(se=this[ye]).parentNode;for(var Me=0,Oe=se.length;Me<Oe;Me++)(ue=se[Me])&&d.call(ue,ue.__data__,Me,ye)&&O.push(ue)}return ae(E)};function Se(d){return function(){return U(this,d)}}re.order=function(){for(var d=-1,E=this.length;++d<E;)for(var O=this[d],se=O.length-1,ue=O[se],ye;--se>=0;)(ye=O[se])&&(ue&&ue!==ye.nextSibling&&ue.parentNode.insertBefore(ye,ue),ue=ye);return this},re.sort=function(d){d=Be.apply(this,arguments);for(var E=-1,O=this.length;++E<O;)this[E].sort(d);return this.order()};function Be(d){return arguments.length||(d=k),function(E,O){return E&&O?d(E.__data__,O.__data__):!E-!O}}re.each=function(d){return rt(this,function(E,O,se){d.call(E,E.__data__,O,se)})};function rt(d,E){for(var O=0,se=d.length;O<se;O++)for(var ue=d[O],ye=0,De=ue.length,Me;ye<De;ye++)(Me=ue[ye])&&E(Me,ye,O);return d}re.call=function(d){var E=u(arguments);return d.apply(E[0]=this,E),this},re.empty=function(){return!this.node()},re.node=function(){for(var d=0,E=this.length;d<E;d++)for(var O=this[d],se=0,ue=O.length;se<ue;se++){var ye=O[se];if(ye)return ye}return null},re.size=function(){var d=0;return rt(this,function(){++d}),d};function ht(d){return te(d,Lt),d}var Lt=[];h.selection.enter=ht,h.selection.enter.prototype=Lt,Lt.append=re.append,Lt.empty=re.empty,Lt.node=re.node,Lt.call=re.call,Lt.size=re.size,Lt.select=function(d){for(var E=[],O,se,ue,ye,De,Me=-1,Oe=this.length;++Me<Oe;){ue=(ye=this[Me]).update,E.push(O=[]),O.parentNode=ye.parentNode;for(var Ze=-1,Ke=ye.length;++Ze<Ke;)(De=ye[Ze])?(O.push(ue[Ze]=se=d.call(ye.parentNode,De.__data__,Ze,Me)),se.__data__=De.__data__):O.push(null)}return ae(E)},Lt.insert=function(d,E){return arguments.length<2&&(E=Ct(this)),re.insert.call(this,d,E)};function Ct(d){var E,O;return function(se,ue,ye){var De=d[ye].update,Me=De.length,Oe;for(ye!=O&&(O=ye,E=0),ue>=E&&(E=ue+1);!(Oe=De[E])&&++E<Me;);return Oe}}h.select=function(d){var E;return typeof d=="string"?(E=[G(d,p)],E.parentNode=p.documentElement):(E=[d],E.parentNode=v(d)),ae([E])},h.selectAll=function(d){var E;return typeof d=="string"?(E=u(Q(d,p)),E.parentNode=p.documentElement):(E=u(d),E.parentNode=null),ae([E])},re.on=function(d,E,O){var se=arguments.length;if(se<3){if(typeof d!="string"){se<2&&(E=!1);for(O in d)this.each(zt(O,d[O],E));return this}if(se<2)return(se=this.node()["__on"+d])&&se._;O=!1}return this.each(zt(d,E,O))};function zt(d,E,O){var se="__on"+d,ue=d.indexOf("."),ye=Ft;ue>0&&(d=d.slice(0,ue));var De=Bt.get(d);De&&(d=De,ye=nr);function Me(){var Ke=this[se];Ke&&(this.removeEventListener(d,Ke,Ke.$),delete this[se])}function Oe(){var Ke=ye(E,u(arguments));Me.call(this),this.addEventListener(d,this[se]=Ke,Ke.$=O),Ke._=E}function Ze(){var Ke=new RegExp("^__on([^.]+)"+h.requote(d)+"$"),wt;for(var St in this)if(wt=St.match(Ke)){var Kt=this[St];this.removeEventListener(wt[1],Kt,Kt.$),delete this[St]}}return ue?E?Oe:Me:E?de:Ze}var Bt=h.map({mouseenter:"mouseover",mouseleave:"mouseout"});p&&Bt.forEach(function(d){"on"+d in p&&Bt.remove(d)});function Ft(d,E){return function(O){var se=h.event;h.event=O,E[0]=this.__data__;try{d.apply(this,E)}finally{h.event=se}}}function nr(d,E){var O=Ft(d,E);return function(se){var ue=this,ye=se.relatedTarget;(!ye||ye!==ue&&!(ye.compareDocumentPosition(ue)&8))&&O.call(ue,se)}}var _t,rr=0;function pr(d){var E=".dragsuppress-"+ ++rr,O="click"+E,se=h.select(m(d)).on("touchmove"+E,be).on("dragstart"+E,be).on("selectstart"+E,be);if(_t==null&&(_t="onselectstart"in d?!1:W(d.style,"userSelect")),_t){var ue=v(d).style,ye=ue[_t];ue[_t]="none"}return function(De){if(se.on(E,null),_t&&(ue[_t]=ye),De){var Me=function(){se.on(O,null)};se.on(O,function(){be(),Me()},!0),setTimeout(Me,0)}}}h.mouse=function(d){return sr(d,Le())};var Yt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function sr(d,E){E.changedTouches&&(E=E.changedTouches[0]);var O=d.ownerSVGElement||d;if(O.createSVGPoint){var se=O.createSVGPoint();if(Yt<0){var ue=m(d);if(ue.scrollX||ue.scrollY){O=h.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ye=O[0][0].getScreenCTM();Yt=!(ye.f||ye.e),O.remove()}}return Yt?(se.x=E.pageX,se.y=E.pageY):(se.x=E.clientX,se.y=E.clientY),se=se.matrixTransform(d.getScreenCTM().inverse()),[se.x,se.y]}var De=d.getBoundingClientRect();return[E.clientX-De.left-d.clientLeft,E.clientY-De.top-d.clientTop]}h.touch=function(d,E,O){if(arguments.length<3&&(O=E,E=Le().changedTouches),E){for(var se=0,ue=E.length,ye;se<ue;++se)if((ye=E[se]).identifier===O)return sr(d,ye)}},h.behavior.drag=function(){var d=Ae(ue,"drag","dragstart","dragend"),E=null,O=ye(de,h.mouse,m,"mousemove","mouseup"),se=ye(ze,h.touch,ne,"touchmove","touchend");function ue(){this.on("mousedown.drag",O).on("touchstart.drag",se)}function ye(De,Me,Oe,Ze,Ke){return function(){var wt=this,St=h.event.target.correspondingElement||h.event.target,Kt=wt.parentNode,ar=d.of(wt,arguments),Et=0,Wt=De(),Xt=".drag"+(Wt==null?"":"-"+Wt),or,cr=h.select(Oe(St)).on(Ze+Xt,Jr).on(Ke+Xt,nn),Zt=pr(St),Cr=Me(Kt,Wt);E?(or=E.apply(wt,arguments),or=[or.x-Cr[0],or.y-Cr[1]]):or=[0,0],ar({type:"dragstart"});function Jr(){var Qr=Me(Kt,Wt),un,dn;Qr&&(un=Qr[0]-Cr[0],dn=Qr[1]-Cr[1],Et|=un|dn,Cr=Qr,ar({type:"drag",x:Qr[0]+or[0],y:Qr[1]+or[1],dx:un,dy:dn}))}function nn(){Me(Kt,Wt)&&(cr.on(Ze+Xt,null).on(Ke+Xt,null),Zt(Et),ar({type:"dragend"}))}}}return ue.origin=function(De){return arguments.length?(E=De,ue):E},h.rebind(ue,d,"on")};function ze(){return h.event.changedTouches[0].identifier}h.touches=function(d,E){return arguments.length<2&&(E=Le().touches),E?u(E).map(function(O){var se=sr(d,O);return se.identifier=O.identifier,se}):[]};var Ye=1e-6,$e=Ye*Ye,he=Math.PI,je=2*he,Ne=je-Ye,Re=he/2,nt=he/180,at=180/he;function dt(d,E,O){return(E[0]-d[0])*(O[1]-d[1])-(E[1]-d[1])*(O[0]-d[0])}function Mt(d){return d>1?Re:d<-1?-Re:Math.asin(d)}function Nt(d){return((d=Math.exp(d))-1/d)/2}function ot(d){return((d=Math.exp(d))+1/d)/2}function jt(d){return((d=Math.exp(2*d))-1)/(d+1)}var Ut=Math.SQRT2,Gt=2,Tr=4;h.interpolateZoom=function(d,E){var O=d[0],se=d[1],ue=d[2],ye=E[0],De=E[1],Me=E[2],Oe=ye-O,Ze=De-se,Ke=Oe*Oe+Ze*Ze,wt,St;if(Ke<$e)St=Math.log(Me/ue)/Ut,wt=function(or){return[O+or*Oe,se+or*Ze,ue*Math.exp(Ut*or*St)]};else{var Kt=Math.sqrt(Ke),ar=(Me*Me-ue*ue+Tr*Ke)/(2*ue*Gt*Kt),Et=(Me*Me-ue*ue-Tr*Ke)/(2*Me*Gt*Kt),Wt=Math.log(Math.sqrt(ar*ar+1)-ar),Xt=Math.log(Math.sqrt(Et*Et+1)-Et);St=(Xt-Wt)/Ut,wt=function(or){var cr=or*St,Zt=ot(Wt),Cr=ue/(Gt*Kt)*(Zt*jt(Ut*cr+Wt)-Nt(Wt));return[O+Cr*Oe,se+Cr*Ze,ue*Zt/ot(Ut*cr+Wt)]}}return wt.duration=St*1e3,wt},h.behavior.zoom=function(){var d={x:0,y:0,k:1},E,O,se,ue=[960,500],ye=Dr,De=250,Me=0,Oe="mousedown.zoom",Ze="mousemove.zoom",Ke="mouseup.zoom",wt,St="touchstart.zoom",Kt,ar=Ae(cr,"zoomstart","zoom","zoomend"),Et,Wt,Xt,or;Mr||(Mr="onwheel"in p?(Vr=function(){return-h.event.deltaY*(h.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(Vr=function(){return h.event.wheelDelta},"mousewheel"):(Vr=function(){return-h.event.detail},"MozMousePixelScroll"));function cr(Zr){Zr.on(Oe,Dn).on(Mr+".zoom",fa).on("dblclick.zoom",wi).on(St,ui)}cr.event=function(Zr){Zr.each(function(){var Bn=ar.of(this,arguments),$n=d;wc?h.select(this).transition().each("start.zoom",function(){d=this.__chart__||{x:0,y:0,k:1},dn(Bn)}).tween("zoom:zoom",function(){var di=ue[0],Qi=ue[1],Aa=O?O[0]:di/2,qa=O?O[1]:Qi/2,us=h.interpolateZoom([(Aa-d.x)/d.k,(qa-d.y)/d.k,di/d.k],[(Aa-$n.x)/$n.k,(qa-$n.y)/$n.k,di/$n.k]);return function(Ms){var ds=us(Ms),zs=di/ds[2];this.__chart__=d={x:Aa-ds[0]*zs,y:qa-ds[1]*zs,k:zs},On(Bn)}}).each("interrupt.zoom",function(){vn(Bn)}).each("end.zoom",function(){vn(Bn)}):(this.__chart__=d,dn(Bn),On(Bn),vn(Bn))})},cr.translate=function(Zr){return arguments.length?(d={x:+Zr[0],y:+Zr[1],k:d.k},un(),cr):[d.x,d.y]},cr.scale=function(Zr){return arguments.length?(d={x:d.x,y:d.y,k:null},Jr(+Zr),un(),cr):d.k},cr.scaleExtent=function(Zr){return arguments.length?(ye=Zr==null?Dr:[+Zr[0],+Zr[1]],cr):ye},cr.center=function(Zr){return arguments.length?(se=Zr&&[+Zr[0],+Zr[1]],cr):se},cr.size=function(Zr){return arguments.length?(ue=Zr&&[+Zr[0],+Zr[1]],cr):ue},cr.duration=function(Zr){return arguments.length?(De=+Zr,cr):De},cr.x=function(Zr){return arguments.length?(Wt=Zr,Et=Zr.copy(),d={x:0,y:0,k:1},cr):Wt},cr.y=function(Zr){return arguments.length?(or=Zr,Xt=Zr.copy(),d={x:0,y:0,k:1},cr):or};function Zt(Zr){return[(Zr[0]-d.x)/d.k,(Zr[1]-d.y)/d.k]}function Cr(Zr){return[Zr[0]*d.k+d.x,Zr[1]*d.k+d.y]}function Jr(Zr){d.k=Math.max(ye[0],Math.min(ye[1],Zr))}function nn(Zr,Bn){Bn=Cr(Bn),d.x+=Zr[0]-Bn[0],d.y+=Zr[1]-Bn[1]}function Qr(Zr,Bn,$n,di){Zr.__chart__={x:d.x,y:d.y,k:d.k},Jr(Math.pow(2,di)),nn(O=Bn,$n),Zr=h.select(Zr),De>0&&(Zr=Zr.transition().duration(De)),Zr.call(cr.event)}function un(){Wt&&Wt.domain(Et.range().map(function(Zr){return(Zr-d.x)/d.k}).map(Et.invert)),or&&or.domain(Xt.range().map(function(Zr){return(Zr-d.y)/d.k}).map(Xt.invert))}function dn(Zr){Me++||Zr({type:"zoomstart"})}function On(Zr){un(),Zr({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function vn(Zr){--Me||(Zr({type:"zoomend"}),O=null)}function Dn(){var Zr=this,Bn=ar.of(Zr,arguments),$n=0,di=h.select(m(Zr)).on(Ze,qa).on(Ke,us),Qi=Zt(h.mouse(Zr)),Aa=pr(Zr);ph.call(Zr),dn(Bn);function qa(){$n=1,nn(h.mouse(Zr),Qi),On(Bn)}function us(){di.on(Ze,null).on(Ke,null),Aa($n),vn(Bn)}}function ui(){var Zr=this,Bn=ar.of(Zr,arguments),$n={},di=0,Qi,Aa=".zoom-"+h.event.changedTouches[0].identifier,qa="touchmove"+Aa,us="touchend"+Aa,Ms=[],ds=h.select(Zr),zs=pr(Zr);Fs(),dn(Bn),ds.on(Oe,null).on(St,Fs);function Ka(){var So=h.touches(Zr);return Qi=d.k,So.forEach(function(Ua){Ua.identifier in $n&&($n[Ua.identifier]=Zt(Ua))}),So}function Fs(){var So=h.event.target;h.select(So).on(qa,_c).on(us,QT),Ms.push(So);for(var Ua=h.event.changedTouches,co=0,Wo=Ua.length;co<Wo;++co)$n[Ua[co].identifier]=null;var uo=Ka(),hu=Date.now();if(uo.length===1){if(hu-Kt<500){var Sc=uo[0];Qr(Zr,Sc,$n[Sc.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),be()}Kt=hu}else if(uo.length>1){var Sc=uo[0],Rl=uo[1],gh=Sc[0]-Rl[0],cx=Sc[1]-Rl[1];di=gh*gh+cx*cx}}function _c(){var So=h.touches(Zr),Ua,co,Wo,uo;ph.call(Zr);for(var hu=0,Sc=So.length;hu<Sc;++hu,uo=null)if(Wo=So[hu],uo=$n[Wo.identifier]){if(co)break;Ua=Wo,co=uo}if(uo){var Rl=(Rl=Wo[0]-Ua[0])*Rl+(Rl=Wo[1]-Ua[1])*Rl,gh=di&&Math.sqrt(Rl/di);Ua=[(Ua[0]+Wo[0])/2,(Ua[1]+Wo[1])/2],co=[(co[0]+uo[0])/2,(co[1]+uo[1])/2],Jr(gh*Qi)}Kt=null,nn(Ua,co),On(Bn)}function QT(){if(h.event.touches.length){for(var So=h.event.changedTouches,Ua=0,co=So.length;Ua<co;++Ua)delete $n[So[Ua].identifier];for(var Wo in $n)return void Ka()}h.selectAll(Ms).on(Aa,null),ds.on(Oe,Dn).on(St,ui),zs(),vn(Bn)}}function fa(){var Zr=ar.of(this,arguments);wt?clearTimeout(wt):(ph.call(this),E=Zt(O=se||h.mouse(this)),dn(Zr)),wt=setTimeout(function(){wt=null,vn(Zr)},50),be(),Jr(Math.pow(2,Vr()*.002)*d.k),nn(O,E),On(Zr)}function wi(){var Zr=h.mouse(this),Bn=Math.log(d.k)/Math.LN2;Qr(this,Zr,Zt(Zr),h.event.shiftKey?Math.ceil(Bn)-1:Math.floor(Bn)+1)}return h.rebind(cr,ar,"on")};var Dr=[0,1/0],Vr,Mr;h.color=Fr;function Fr(){}Fr.prototype.toString=function(){return this.rgb()+""},h.hsl=xr;function xr(d,E,O){return this instanceof xr?(this.h=+d,this.s=+E,void(this.l=+O)):arguments.length<2?d instanceof xr?new xr(d.h,d.s,d.l):st(""+d,At,xr):new xr(d,E,O)}var br=xr.prototype=new Fr;br.brighter=function(d){return d=Math.pow(.7,arguments.length?d:1),new xr(this.h,this.s,this.l/d)},br.darker=function(d){return d=Math.pow(.7,arguments.length?d:1),new xr(this.h,this.s,d*this.l)},br.rgb=function(){return Wr(this.h,this.s,this.l)};function Wr(d,E,O){var se,ue;d=isNaN(d)?0:(d%=360)<0?d+360:d,E=isNaN(E)||E<0?0:E>1?1:E,O=O<0?0:O>1?1:O,ue=O<=.5?O*(1+E):O+E-O*E,se=2*O-ue;function ye(Me){return Me>360?Me-=360:Me<0&&(Me+=360),Me<60?se+(ue-se)*Me/60:Me<180?ue:Me<240?se+(ue-se)*(240-Me)/60:se}function De(Me){return Math.round(ye(Me)*255)}return new ge(De(d+120),De(d),De(d-120))}h.hcl=Or;function Or(d,E,O){return this instanceof Or?(this.h=+d,this.c=+E,void(this.l=+O)):arguments.length<2?d instanceof Or?new Or(d.h,d.c,d.l):d instanceof vr?Un(d.l,d.a,d.b):Un((d=it((d=h.rgb(d)).r,d.g,d.b)).l,d.a,d.b):new Or(d,E,O)}var qr=Or.prototype=new Fr;qr.brighter=function(d){return new Or(this.h,this.c,Math.min(100,this.l+Ir*(arguments.length?d:1)))},qr.darker=function(d){return new Or(this.h,this.c,Math.max(0,this.l-Ir*(arguments.length?d:1)))},qr.rgb=function(){return Er(this.h,this.c,this.l).rgb()};function Er(d,E,O){return isNaN(d)&&(d=0),isNaN(E)&&(E=0),new vr(O,Math.cos(d*=nt)*E,Math.sin(d)*E)}h.lab=vr;function vr(d,E,O){return this instanceof vr?(this.l=+d,this.a=+E,void(this.b=+O)):arguments.length<2?d instanceof vr?new vr(d.l,d.a,d.b):d instanceof Or?Er(d.h,d.c,d.l):it((d=ge(d)).r,d.g,d.b):new vr(d,E,O)}var Ir=18,ln=.95047,kn=1,Hr=1.08883,pn=vr.prototype=new Fr;pn.brighter=function(d){return new vr(Math.min(100,this.l+Ir*(arguments.length?d:1)),this.a,this.b)},pn.darker=function(d){return new vr(Math.max(0,this.l-Ir*(arguments.length?d:1)),this.a,this.b)},pn.rgb=function(){return mn(this.l,this.a,this.b)};function mn(d,E,O){var se=(d+16)/116,ue=se+E/500,ye=se-O/200;return ue=gr(ue)*ln,se=gr(se)*kn,ye=gr(ye)*Hr,new ge(we(3.2404542*ue-1.5371385*se-.4985314*ye),we(-.969266*ue+1.8760108*se+.041556*ye),we(.0556434*ue-.2040259*se+1.0572252*ye))}function Un(d,E,O){return d>0?new Or(Math.atan2(O,E)*at,Math.sqrt(E*E+O*O),d):new Or(NaN,NaN,d)}function gr(d){return d>.206893034?d*d*d:(d-4/29)/7.787037}function Cn(d){return d>.008856?Math.pow(d,1/3):7.787037*d+4/29}function we(d){return Math.round(255*(d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055))}h.rgb=ge;function ge(d,E,O){return this instanceof ge?(this.r=~~d,this.g=~~E,void(this.b=~~O)):arguments.length<2?d instanceof ge?new ge(d.r,d.g,d.b):st(""+d,ge,Wr):new ge(d,E,O)}function pt(d){return new ge(d>>16,d>>8&255,d&255)}function ft(d){return pt(d)+""}var Xe=ge.prototype=new Fr;Xe.brighter=function(d){d=Math.pow(.7,arguments.length?d:1);var E=this.r,O=this.g,se=this.b,ue=30;return!E&&!O&&!se?new ge(ue,ue,ue):(E&&E<ue&&(E=ue),O&&O<ue&&(O=ue),se&&se<ue&&(se=ue),new ge(Math.min(255,E/d),Math.min(255,O/d),Math.min(255,se/d)))},Xe.darker=function(d){return d=Math.pow(.7,arguments.length?d:1),new ge(d*this.r,d*this.g,d*this.b)},Xe.hsl=function(){return At(this.r,this.g,this.b)},Xe.toString=function(){return"#"+Qe(this.r)+Qe(this.g)+Qe(this.b)};function Qe(d){return d<16?"0"+Math.max(0,d).toString(16):Math.min(255,d).toString(16)}function st(d,E,O){var se=0,ue=0,ye=0,De,Me,Oe;if(De=/([a-z]+)\((.*)\)/.exec(d=d.toLowerCase()),De)switch(Me=De[2].split(","),De[1]){case"hsl":return O(parseFloat(Me[0]),parseFloat(Me[1])/100,parseFloat(Me[2])/100);case"rgb":return E(Tt(Me[0]),Tt(Me[1]),Tt(Me[2]))}return(Oe=Rt.get(d))?E(Oe.r,Oe.g,Oe.b):(d!=null&&d.charAt(0)==="#"&&!isNaN(Oe=parseInt(d.slice(1),16))&&(d.length===4?(se=(Oe&3840)>>4,se=se>>4|se,ue=Oe&240,ue=ue>>4|ue,ye=Oe&15,ye=ye<<4|ye):d.length===7&&(se=(Oe&16711680)>>16,ue=(Oe&65280)>>8,ye=Oe&255)),E(se,ue,ye))}function At(d,E,O){var se=Math.min(d/=255,E/=255,O/=255),ue=Math.max(d,E,O),ye=ue-se,De,Me,Oe=(ue+se)/2;return ye?(Me=Oe<.5?ye/(ue+se):ye/(2-ue-se),d==ue?De=(E-O)/ye+(E<O?6:0):E==ue?De=(O-d)/ye+2:De=(d-E)/ye+4,De*=60):(De=NaN,Me=Oe>0&&Oe<1?0:De),new xr(De,Me,Oe)}function it(d,E,O){d=bt(d),E=bt(E),O=bt(O);var se=Cn((.4124564*d+.3575761*E+.1804375*O)/ln),ue=Cn((.2126729*d+.7151522*E+.072175*O)/kn),ye=Cn((.0193339*d+.119192*E+.9503041*O)/Hr);return vr(116*ue-16,500*(se-ue),200*(ue-ye))}function bt(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Tt(d){var E=parseFloat(d);return d.charAt(d.length-1)==="%"?Math.round(E*2.55):E}var Rt=h.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Rt.forEach(function(d,E){Rt.set(d,pt(E))});function tr(d){return typeof d=="function"?d:function(){return d}}h.functor=tr,h.xhr=ur(ne);function ur(d){return function(E,O,se){return arguments.length===2&&typeof O=="function"&&(se=O,O=null),fr(E,O,d,se)}}function fr(d,E,O,se){var ue={},ye=h.dispatch("beforesend","progress","load","error"),De={},Me=new XMLHttpRequest,Oe=null;self.XDomainRequest&&!("withCredentials"in Me)&&/^(http(s)?:)?\/\//.test(d)&&(Me=new XDomainRequest),"onload"in Me?Me.onload=Me.onerror=Ze:Me.onreadystatechange=function(){Me.readyState>3&&Ze()};function Ze(){var Ke=Me.status,wt;if(!Ke&&wr(Me)||Ke>=200&&Ke<300||Ke===304){try{wt=O.call(ue,Me)}catch(St){ye.error.call(ue,St);return}ye.load.call(ue,wt)}else ye.error.call(ue,Me)}return Me.onprogress=function(Ke){var wt=h.event;h.event=Ke;try{ye.progress.call(ue,Me)}finally{h.event=wt}},ue.header=function(Ke,wt){return Ke=(Ke+"").toLowerCase(),arguments.length<2?De[Ke]:(wt==null?delete De[Ke]:De[Ke]=wt+"",ue)},ue.mimeType=function(Ke){return arguments.length?(E=Ke==null?null:Ke+"",ue):E},ue.responseType=function(Ke){return arguments.length?(Oe=Ke,ue):Oe},ue.response=function(Ke){return O=Ke,ue},["get","post"].forEach(function(Ke){ue[Ke]=function(){return ue.send.apply(ue,[Ke].concat(u(arguments)))}}),ue.send=function(Ke,wt,St){if(arguments.length===2&&typeof wt=="function"&&(St=wt,wt=null),Me.open(Ke,d,!0),E!=null&&!("accept"in De)&&(De.accept=E+",*/*"),Me.setRequestHeader)for(var Kt in De)Me.setRequestHeader(Kt,De[Kt]);return E!=null&&Me.overrideMimeType&&Me.overrideMimeType(E),Oe!=null&&(Me.responseType=Oe),St!=null&&ue.on("error",St).on("load",function(ar){St(null,ar)}),ye.beforesend.call(ue,Me),Me.send(wt??null),ue},ue.abort=function(){return Me.abort(),ue},h.rebind(ue,ye,"on"),se==null?ue:ue.get(Rr(se))}function Rr(d){return d.length===1?function(E,O){d(E==null?O:null)}:d}function wr(d){var E=d.responseType;return E&&E!=="text"?d.response:d.responseText}h.dsv=function(d,E){var O=new RegExp('["'+d+`
]`),se=d.charCodeAt(0);function ue(Ze,Ke,wt){arguments.length<3&&(wt=Ke,Ke=null);var St=fr(Ze,E,Ke==null?ye:De(Ke),wt);return St.row=function(Kt){return arguments.length?St.response((Ke=Kt)==null?ye:De(Kt)):Ke},St}function ye(Ze){return ue.parse(Ze.responseText)}function De(Ze){return function(Ke){return ue.parse(Ke.responseText,Ze)}}ue.parse=function(Ze,Ke){var wt;return ue.parseRows(Ze,function(St,Kt){if(wt)return wt(St,Kt-1);var ar=function(Et){for(var Wt={},Xt=St.length,or=0;or<Xt;++or)Wt[St[or]]=Et[or];return Wt};wt=Ke?function(Et,Wt){return Ke(ar(Et),Wt)}:ar})},ue.parseRows=function(Ze,Ke){var wt={},St={},Kt=[],ar=Ze.length,Et=0,Wt=0,Xt,or;function cr(){if(Et>=ar)return St;if(or)return or=!1,wt;var Cr=Et;if(Ze.charCodeAt(Cr)===34){for(var Jr=Cr;Jr++<ar;)if(Ze.charCodeAt(Jr)===34){if(Ze.charCodeAt(Jr+1)!==34)break;++Jr}Et=Jr+2;var nn=Ze.charCodeAt(Jr+1);return nn===13?(or=!0,Ze.charCodeAt(Jr+2)===10&&++Et):nn===10&&(or=!0),Ze.slice(Cr+1,Jr).replace(/""/g,'"')}for(;Et<ar;){var nn=Ze.charCodeAt(Et++),Qr=1;if(nn===10)or=!0;else if(nn===13)or=!0,Ze.charCodeAt(Et)===10&&(++Et,++Qr);else if(nn!==se)continue;return Ze.slice(Cr,Et-Qr)}return Ze.slice(Cr)}for(;(Xt=cr())!==St;){for(var Zt=[];Xt!==wt&&Xt!==St;)Zt.push(Xt),Xt=cr();Ke&&(Zt=Ke(Zt,Wt++))==null||Kt.push(Zt)}return Kt},ue.format=function(Ze){if(Array.isArray(Ze[0]))return ue.formatRows(Ze);var Ke=new ee,wt=[];return Ze.forEach(function(St){for(var Kt in St)Ke.has(Kt)||wt.push(Ke.add(Kt))}),[wt.map(Oe).join(d)].concat(Ze.map(function(St){return wt.map(function(Kt){return Oe(St[Kt])}).join(d)})).join(`
`)},ue.formatRows=function(Ze){return Ze.map(Me).join(`
`)};function Me(Ze){return Ze.map(Oe).join(d)}function Oe(Ze){return O.test(Ze)?'"'+Ze.replace(/\"/g,'""')+'"':Ze}return ue},h.csv=h.dsv(",","text/csv"),h.tsv=h.dsv("	","text/tab-separated-values");var Gr,Lr,$r,Xr,jn=this[W(this,"requestAnimationFrame")]||function(d){setTimeout(d,17)};h.timer=function(){bn.apply(this,arguments)};function bn(d,E,O){var se=arguments.length;se<2&&(E=0),se<3&&(O=Date.now());var ue=O+E,ye={c:d,t:ue,n:null};return Lr?Lr.n=ye:Gr=ye,Lr=ye,$r||(Xr=clearTimeout(Xr),$r=1,jn(pi)),ye}function pi(){var d=Gn(),E=ei()-d;E>24?(isFinite(E)&&(clearTimeout(Xr),Xr=setTimeout(pi,E)),$r=0):($r=1,jn(pi))}h.timer.flush=function(){Gn(),ei()};function Gn(){for(var d=Date.now(),E=Gr;E;)d>=E.t&&E.c(d-E.t)&&(E.c=null),E=E.n;return d}function ei(){for(var d,E=Gr,O=1/0;E;)E.c?(E.t<O&&(O=E.t),E=(d=E).n):E=d?d.n=E.n:Gr=E.n;return Lr=d,O}h.round=function(d,E){return E?Math.round(d*(E=Math.pow(10,E)))/E:Math.round(d)},h.geom={};function $i(d){return d[0]}function da(d){return d[1]}h.geom.hull=function(d){var E=$i,O=da;if(arguments.length)return se(d);function se(ue){if(ue.length<3)return[];var ye=tr(E),De=tr(O),Me,Oe=ue.length,Ze=[],Ke=[];for(Me=0;Me<Oe;Me++)Ze.push([+ye.call(this,ue[Me],Me),+De.call(this,ue[Me],Me),Me]);for(Ze.sort(yn),Me=0;Me<Oe;Me++)Ke.push([Ze[Me][0],-Ze[Me][1]]);var wt=si(Ze),St=si(Ke),Kt=St[0]===wt[0],ar=St[St.length-1]===wt[wt.length-1],Et=[];for(Me=wt.length-1;Me>=0;--Me)Et.push(ue[Ze[wt[Me]][2]]);for(Me=+Kt;Me<St.length-ar;++Me)Et.push(ue[Ze[St[Me]][2]]);return Et}return se.x=function(ue){return arguments.length?(E=ue,se):E},se.y=function(ue){return arguments.length?(O=ue,se):O},se};function si(d){for(var E=d.length,O=[0,1],se=2,ue=2;ue<E;ue++){for(;se>1&&dt(d[O[se-2]],d[O[se-1]],d[ue])<=0;)--se;O[se++]=ue}return O.slice(0,se)}function yn(d,E){return d[0]-E[0]||d[1]-E[1]}h.geom.polygon=function(d){return te(d,Vn),d};var Vn=h.geom.polygon.prototype=[];Vn.area=function(){for(var d=-1,E=this.length,O,se=this[E-1],ue=0;++d<E;)O=se,se=this[d],ue+=O[1]*se[0]-O[0]*se[1];return ue*.5},Vn.centroid=function(d){var E=-1,O=this.length,se=0,ue=0,ye,De=this[O-1],Me;for(arguments.length||(d=-1/(6*this.area()));++E<O;)ye=De,De=this[E],Me=ye[0]*De[1]-De[0]*ye[1],se+=(ye[0]+De[0])*Me,ue+=(ye[1]+De[1])*Me;return[se*d,ue*d]},Vn.clip=function(d){for(var E,O=Ii(d),se=-1,ue=this.length-Ii(this),ye,De,Me=this[ue-1],Oe,Ze,Ke;++se<ue;){for(E=d.slice(),d.length=0,Oe=this[se],Ze=E[(De=E.length-O)-1],ye=-1;++ye<De;)Ke=E[ye],ci(Ke,Me,Oe)?(ci(Ze,Me,Oe)||d.push(Yi(Ze,Ke,Me,Oe)),d.push(Ke)):ci(Ze,Me,Oe)&&d.push(Yi(Ze,Ke,Me,Oe)),Ze=Ke;O&&d.push(d[0]),Me=Oe}return d};function ci(d,E,O){return(O[0]-E[0])*(d[1]-E[1])<(O[1]-E[1])*(d[0]-E[0])}function Yi(d,E,O,se){var ue=d[0],ye=O[0],De=E[0]-ue,Me=se[0]-ye,Oe=d[1],Ze=O[1],Ke=E[1]-Oe,wt=se[1]-Ze,St=(Me*(Oe-Ze)-wt*(ue-ye))/(wt*De-Me*Ke);return[ue+St*De,Oe+St*Ke]}function Ii(d){var E=d[0],O=d[d.length-1];return!(E[0]-O[0]||E[1]-O[1])}var Ln,In,Nn,vi=[],bi,Li,Ei=[];function gi(){yc(this),this.edge=this.site=this.circle=null}function Ea(d){var E=vi.pop()||new gi;return E.site=d,E}function Gi(d){cs(d),Nn.remove(d),vi.push(d),yc(d)}function Ji(d){var E=d.circle,O=E.x,se=E.cy,ue={x:O,y:se},ye=d.P,De=d.N,Me=[d];Gi(d);for(var Oe=ye;Oe.circle&&b(O-Oe.circle.x)<Ye&&b(se-Oe.circle.cy)<Ye;)ye=Oe.P,Me.unshift(Oe),Gi(Oe),Oe=ye;Me.unshift(Oe),cs(Oe);for(var Ze=De;Ze.circle&&b(O-Ze.circle.x)<Ye&&b(se-Ze.circle.cy)<Ye;)De=Ze.N,Me.push(Ze),Gi(Ze),Ze=De;Me.push(Ze),cs(Ze);var Ke=Me.length,wt;for(wt=1;wt<Ke;++wt)Ze=Me[wt],Oe=Me[wt-1],yi(Ze.edge,Oe.site,Ze.site,ue);Oe=Me[0],Ze=Me[Ke-1],Ze.edge=Oi(Oe.site,Ze.site,null,ue),Pi(Oe),Pi(Ze)}function Da(d){for(var E=d.x,O=d.y,se,ue,ye,De,Me=Nn._;Me;)if(ye=ai(Me,O)-E,ye>Ye)Me=Me.L;else if(De=E-Ga(Me,O),De>Ye){if(!Me.R){se=Me;break}Me=Me.R}else{ye>-Ye?(se=Me.P,ue=Me):De>-Ye?(se=Me,ue=Me.N):se=ue=Me;break}var Oe=Ea(d);if(Nn.insert(se,Oe),!(!se&&!ue)){if(se===ue){cs(se),ue=Ea(se.site),Nn.insert(Oe,ue),Oe.edge=ue.edge=Oi(se.site,Oe.site),Pi(se),Pi(ue);return}if(!ue){Oe.edge=Oi(se.site,Oe.site);return}cs(se),cs(ue);var Ze=se.site,Ke=Ze.x,wt=Ze.y,St=d.x-Ke,Kt=d.y-wt,ar=ue.site,Et=ar.x-Ke,Wt=ar.y-wt,Xt=2*(St*Wt-Kt*Et),or=St*St+Kt*Kt,cr=Et*Et+Wt*Wt,Zt={x:(Wt*or-Kt*cr)/Xt+Ke,y:(St*cr-Et*or)/Xt+wt};yi(ue.edge,Ze,ar,Zt),Oe.edge=Oi(Ze,d,null,Zt),ue.edge=Oi(d,ar,null,Zt),Pi(se),Pi(ue)}}function ai(d,E){var O=d.site,se=O.x,ue=O.y,ye=ue-E;if(!ye)return se;var De=d.P;if(!De)return-1/0;O=De.site;var Me=O.x,Oe=O.y,Ze=Oe-E;if(!Ze)return Me;var Ke=Me-se,wt=1/ye-1/Ze,St=Ke/Ze;return wt?(-St+Math.sqrt(St*St-2*wt*(Ke*Ke/(-2*Ze)-Oe+Ze/2+ue-ye/2)))/wt+se:(se+Me)/2}function Ga(d,E){var O=d.N;if(O)return ai(O,E);var se=d.site;return se.y===E?se.x:1/0}function Xa(d){this.site=d,this.edges=[]}Xa.prototype.prepare=function(){for(var d=this.edges,E=d.length,O;E--;)O=d[E].edge,(!O.b||!O.a)&&d.splice(E,1);return d.sort(ls),d.length};function os(d){for(var E=d[0][0],O=d[1][0],se=d[0][1],ue=d[1][1],ye,De,Me,Oe,Ze=In,Ke=Ze.length,wt,St,Kt,ar,Et,Wt;Ke--;)if(wt=Ze[Ke],!(!wt||!wt.prepare()))for(Kt=wt.edges,ar=Kt.length,St=0;St<ar;)Wt=Kt[St].end(),Me=Wt.x,Oe=Wt.y,Et=Kt[++St%ar].start(),ye=Et.x,De=Et.y,(b(Me-ye)>Ye||b(Oe-De)>Ye)&&(Kt.splice(St,0,new ks(Jn(wt.site,Wt,b(Me-E)<Ye&&ue-Oe>Ye?{x:E,y:b(ye-E)<Ye?De:ue}:b(Oe-ue)<Ye&&O-Me>Ye?{x:b(De-ue)<Ye?ye:O,y:ue}:b(Me-O)<Ye&&Oe-se>Ye?{x:O,y:b(ye-O)<Ye?De:se}:b(Oe-se)<Ye&&Me-E>Ye?{x:b(De-se)<Ye?ye:E,y:se}:null),wt.site,null)),++ar)}function ls(d,E){return E.angle-d.angle}function Za(){yc(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pi(d){var E=d.P,O=d.N;if(!(!E||!O)){var se=E.site,ue=d.site,ye=O.site;if(se!==ye){var De=ue.x,Me=ue.y,Oe=se.x-De,Ze=se.y-Me,Ke=ye.x-De,Wt=ye.y-Me,wt=2*(Oe*Wt-Ze*Ke);if(!(wt>=-$e)){var St=Oe*Oe+Ze*Ze,Kt=Ke*Ke+Wt*Wt,ar=(Wt*St-Ze*Kt)/wt,Et=(Oe*Kt-Ke*St)/wt,Wt=Et+Me,Xt=Ei.pop()||new Za;Xt.arc=d,Xt.site=ue,Xt.x=ar+De,Xt.y=Wt+Math.sqrt(ar*ar+Et*Et),Xt.cy=Wt,d.circle=Xt;for(var or=null,cr=Li._;cr;)if(Xt.y<cr.y||Xt.y===cr.y&&Xt.x<=cr.x)if(cr.L)cr=cr.L;else{or=cr.P;break}else if(cr.R)cr=cr.R;else{or=cr;break}Li.insert(or,Xt),or||(bi=Xt)}}}}function cs(d){var E=d.circle;E&&(E.P||(bi=E.N),Li.remove(E),Ei.push(E),yc(E),d.circle=null)}function _s(d,E,O,se){return function(ue){var ye=ue.a,De=ue.b,Me=ye.x,Oe=ye.y,Ze=De.x,Ke=De.y,wt=0,St=1,Kt=Ze-Me,ar=Ke-Oe,Et;if(Et=d-Me,!(!Kt&&Et>0)){if(Et/=Kt,Kt<0){if(Et<wt)return;Et<St&&(St=Et)}else if(Kt>0){if(Et>St)return;Et>wt&&(wt=Et)}if(Et=O-Me,!(!Kt&&Et<0)){if(Et/=Kt,Kt<0){if(Et>St)return;Et>wt&&(wt=Et)}else if(Kt>0){if(Et<wt)return;Et<St&&(St=Et)}if(Et=E-Oe,!(!ar&&Et>0)){if(Et/=ar,ar<0){if(Et<wt)return;Et<St&&(St=Et)}else if(ar>0){if(Et>St)return;Et>wt&&(wt=Et)}if(Et=se-Oe,!(!ar&&Et<0)){if(Et/=ar,ar<0){if(Et>St)return;Et>wt&&(wt=Et)}else if(ar>0){if(Et<wt)return;Et<St&&(St=Et)}return wt>0&&(ue.a={x:Me+wt*Kt,y:Oe+wt*ar}),St<1&&(ue.b={x:Me+St*Kt,y:Oe+St*ar}),ue}}}}}}function aa(d){for(var E=Ln,O=_s(d[0][0],d[0][1],d[1][0],d[1][1]),se=E.length,ue;se--;)ue=E[se],(!Ss(ue,d)||!O(ue)||b(ue.a.x-ue.b.x)<Ye&&b(ue.a.y-ue.b.y)<Ye)&&(ue.a=ue.b=null,E.splice(se,1))}function Ss(d,E){var O=d.b;if(O)return!0;var se=d.a,ue=E[0][0],ye=E[1][0],De=E[0][1],Me=E[1][1],Oe=d.l,Ze=d.r,Ke=Oe.x,wt=Oe.y,St=Ze.x,Kt=Ze.y,ar=(Ke+St)/2,Et=(wt+Kt)/2,Wt,Xt;if(Kt===wt){if(ar<ue||ar>=ye)return;if(Ke>St){if(!se)se={x:ar,y:De};else if(se.y>=Me)return;O={x:ar,y:Me}}else{if(!se)se={x:ar,y:Me};else if(se.y<De)return;O={x:ar,y:De}}}else if(Wt=(Ke-St)/(Kt-wt),Xt=Et-Wt*ar,Wt<-1||Wt>1)if(Ke>St){if(!se)se={x:(De-Xt)/Wt,y:De};else if(se.y>=Me)return;O={x:(Me-Xt)/Wt,y:Me}}else{if(!se)se={x:(Me-Xt)/Wt,y:Me};else if(se.y<De)return;O={x:(De-Xt)/Wt,y:De}}else if(wt<Kt){if(!se)se={x:ue,y:Wt*ue+Xt};else if(se.x>=ye)return;O={x:ye,y:Wt*ye+Xt}}else{if(!se)se={x:ye,y:Wt*ye+Xt};else if(se.x<ue)return;O={x:ue,y:Wt*ue+Xt}}return d.a=se,d.b=O,!0}function Ni(d,E){this.l=d,this.r=E,this.a=this.b=null}function Oi(d,E,O,se){var ue=new Ni(d,E);return Ln.push(ue),O&&yi(ue,d,E,O),se&&yi(ue,E,d,se),In[d.i].edges.push(new ks(ue,d,E)),In[E.i].edges.push(new ks(ue,E,d)),ue}function Jn(d,E,O){var se=new Ni(d,null);return se.a=E,se.b=O,Ln.push(se),se}function yi(d,E,O,se){!d.a&&!d.b?(d.a=se,d.l=E,d.r=O):d.l===O?d.b=se:d.a=se}function ks(d,E,O){var se=d.a,ue=d.b;this.edge=d,this.site=E,this.angle=O?Math.atan2(O.y-E.y,O.x-E.x):d.l===E?Math.atan2(ue.x-se.x,se.y-ue.y):Math.atan2(se.x-ue.x,ue.y-se.y)}ks.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Bo(){this._=null}function yc(d){d.U=d.C=d.L=d.R=d.P=d.N=null}Bo.prototype={insert:function(d,E){var O,se,ue;if(d){if(E.P=d,E.N=d.N,d.N&&(d.N.P=E),d.N=E,d.R){for(d=d.R;d.L;)d=d.L;d.L=E}else d.R=E;O=d}else this._?(d=dd(this._),E.P=null,E.N=d,d.P=d.L=E,O=d):(E.P=E.N=null,this._=E,O=null);for(E.L=E.R=null,E.U=O,E.C=!0,d=E;O&&O.C;)se=O.U,O===se.L?(ue=se.R,ue&&ue.C?(O.C=ue.C=!1,se.C=!0,d=se):(d===O.R&&(sl(this,O),d=O,O=d.U),O.C=!1,se.C=!0,wo(this,se))):(ue=se.L,ue&&ue.C?(O.C=ue.C=!1,se.C=!0,d=se):(d===O.L&&(wo(this,O),d=O,O=d.U),O.C=!1,se.C=!0,sl(this,se))),O=d.U;this._.C=!1},remove:function(d){d.N&&(d.N.P=d.P),d.P&&(d.P.N=d.N),d.N=d.P=null;var E=d.U,O,se=d.L,ue=d.R,ye,De;if(se?ue?ye=dd(ue):ye=se:ye=ue,E?E.L===d?E.L=ye:E.R=ye:this._=ye,se&&ue?(De=ye.C,ye.C=d.C,ye.L=se,se.U=ye,ye!==ue?(E=ye.U,ye.U=d.U,d=ye.R,E.L=d,ye.R=ue,ue.U=ye):(ye.U=E,E=ye,d=ye.R)):(De=d.C,d=ye),d&&(d.U=E),!De){if(d&&d.C){d.C=!1;return}do{if(d===this._)break;if(d===E.L){if(O=E.R,O.C&&(O.C=!1,E.C=!0,sl(this,E),O=E.R),O.L&&O.L.C||O.R&&O.R.C){(!O.R||!O.R.C)&&(O.L.C=!1,O.C=!0,wo(this,O),O=E.R),O.C=E.C,E.C=O.R.C=!1,sl(this,E),d=this._;break}}else if(O=E.L,O.C&&(O.C=!1,E.C=!0,wo(this,E),O=E.L),O.L&&O.L.C||O.R&&O.R.C){(!O.L||!O.L.C)&&(O.R.C=!1,O.C=!0,sl(this,O),O=E.L),O.C=E.C,E.C=O.L.C=!1,wo(this,E),d=this._;break}O.C=!0,d=E,E=E.U}while(!d.C);d&&(d.C=!1)}}};function sl(d,E){var O=E,se=E.R,ue=O.U;ue?ue.L===O?ue.L=se:ue.R=se:d._=se,se.U=ue,O.U=se,O.R=se.L,O.R&&(O.R.U=O),se.L=O}function wo(d,E){var O=E,se=E.L,ue=O.U;ue?ue.L===O?ue.L=se:ue.R=se:d._=se,se.U=ue,O.U=se,O.L=se.R,O.L&&(O.L.U=O),se.R=O}function dd(d){for(;d.L;)d=d.L;return d}function du(d,E){var O=d.sort(nh).pop(),se,ue,ye;for(Ln=[],In=new Array(d.length),Nn=new Bo,Li=new Bo;;)if(ye=bi,O&&(!ye||O.y<ye.y||O.y===ye.y&&O.x<ye.x))(O.x!==se||O.y!==ue)&&(In[O.i]=new Xa(O),Da(O),se=O.x,ue=O.y),O=d.pop();else if(ye)Ji(ye.arc);else break;E&&(aa(E),os(E));var De={cells:In,edges:Ln};return Nn=Li=Ln=In=null,De}function nh(d,E){return E.y-d.y||E.x-d.x}h.geom.voronoi=function(d){var E=$i,O=da,se=E,ue=O,ye=xc;if(d)return De(d);function De(Oe){var Ze=new Array(Oe.length),Ke=ye[0][0],wt=ye[0][1],St=ye[1][0],Kt=ye[1][1];return du(Me(Oe),ye).cells.forEach(function(ar,Et){var Wt=ar.edges,Xt=ar.site,or=Ze[Et]=Wt.length?Wt.map(function(cr){var Zt=cr.start();return[Zt.x,Zt.y]}):Xt.x>=Ke&&Xt.x<=St&&Xt.y>=wt&&Xt.y<=Kt?[[Ke,Kt],[St,Kt],[St,wt],[Ke,wt]]:[];or.point=Oe[Et]}),Ze}function Me(Oe){return Oe.map(function(Ze,Ke){return{x:Math.round(se(Ze,Ke)/Ye)*Ye,y:Math.round(ue(Ze,Ke)/Ye)*Ye,i:Ke}})}return De.links=function(Oe){return du(Me(Oe)).edges.filter(function(Ze){return Ze.l&&Ze.r}).map(function(Ze){return{source:Oe[Ze.l.i],target:Oe[Ze.r.i]}})},De.triangles=function(Oe){var Ze=[];return du(Me(Oe)).cells.forEach(function(Ke,wt){for(var St=Ke.site,Kt=Ke.edges.sort(ls),ar=-1,Et=Kt.length,Wt,Xt=Kt[Et-1].edge,or=Xt.l===St?Xt.r:Xt.l;++ar<Et;)Wt=or,Xt=Kt[ar].edge,or=Xt.l===St?Xt.r:Xt.l,wt<Wt.i&&wt<or.i&&ih(St,Wt,or)<0&&Ze.push([Oe[wt],Oe[Wt.i],Oe[or.i]])}),Ze},De.x=function(Oe){return arguments.length?(se=tr(E=Oe),De):E},De.y=function(Oe){return arguments.length?(ue=tr(O=Oe),De):O},De.clipExtent=function(Oe){return arguments.length?(ye=Oe??xc,De):ye===xc?null:ye},De.size=function(Oe){return arguments.length?De.clipExtent(Oe&&[[0,0],Oe]):ye===xc?null:ye&&ye[1]},De};var xc=[[-1e6,-1e6],[1e6,1e6]];function ih(d,E,O){return(d.x-O.x)*(E.y-d.y)-(d.x-E.x)*(O.y-d.y)}h.geom.delaunay=function(d){return h.geom.voronoi().triangles(d)},h.geom.quadtree=function(d,E,O,se,ue){var ye=$i,De=da,Me;if(Me=arguments.length)return ye=vM,De=gM,Me===3&&(ue=O,se=E,O=E=0),Oe(d);function Oe(Ze){var Ke,wt=tr(ye),St=tr(De),Kt,ar,Et,Wt,Xt,or,cr,Zt;if(E!=null)Xt=E,or=O,cr=se,Zt=ue;else if(cr=Zt=-(Xt=or=1/0),Kt=[],ar=[],Wt=Ze.length,Me)for(Et=0;Et<Wt;++Et)Ke=Ze[Et],Ke.x<Xt&&(Xt=Ke.x),Ke.y<or&&(or=Ke.y),Ke.x>cr&&(cr=Ke.x),Ke.y>Zt&&(Zt=Ke.y),Kt.push(Ke.x),ar.push(Ke.y);else for(Et=0;Et<Wt;++Et){var Cr=+wt(Ke=Ze[Et],Et),Jr=+St(Ke,Et);Cr<Xt&&(Xt=Cr),Jr<or&&(or=Jr),Cr>cr&&(cr=Cr),Jr>Zt&&(Zt=Jr),Kt.push(Cr),ar.push(Jr)}var nn=cr-Xt,Qr=Zt-or;nn>Qr?Zt=or+nn:cr=Xt+Qr;function un(vn,Dn,ui,fa,wi,Zr,Bn,$n){if(!(isNaN(ui)||isNaN(fa)))if(vn.leaf){var di=vn.x,Qi=vn.y;if(di!=null)if(b(di-ui)+b(Qi-fa)<.01)dn(vn,Dn,ui,fa,wi,Zr,Bn,$n);else{var Aa=vn.point;vn.x=vn.y=vn.point=null,dn(vn,Aa,di,Qi,wi,Zr,Bn,$n),dn(vn,Dn,ui,fa,wi,Zr,Bn,$n)}else vn.x=ui,vn.y=fa,vn.point=Dn}else dn(vn,Dn,ui,fa,wi,Zr,Bn,$n)}function dn(vn,Dn,ui,fa,wi,Zr,Bn,$n){var di=(wi+Bn)*.5,Qi=(Zr+$n)*.5,Aa=ui>=di,qa=fa>=Qi,us=qa<<1|Aa;vn.leaf=!1,vn=vn.nodes[us]||(vn.nodes[us]=c1()),Aa?wi=di:Bn=di,qa?Zr=Qi:$n=Qi,un(vn,Dn,ui,fa,wi,Zr,Bn,$n)}var On=c1();if(On.add=function(vn){un(On,vn,+wt(vn,++Et),+St(vn,Et),Xt,or,cr,Zt)},On.visit=function(vn){fd(vn,On,Xt,or,cr,Zt)},On.find=function(vn){return yM(On,vn[0],vn[1],Xt,or,cr,Zt)},Et=-1,E==null){for(;++Et<Wt;)un(On,Ze[Et],Kt[Et],ar[Et],Xt,or,cr,Zt);--Et}else Ze.forEach(On.add);return Kt=ar=Ze=Ke=null,On}return Oe.x=function(Ze){return arguments.length?(ye=Ze,Oe):ye},Oe.y=function(Ze){return arguments.length?(De=Ze,Oe):De},Oe.extent=function(Ze){return arguments.length?(Ze==null?E=O=se=ue=null:(E=+Ze[0][0],O=+Ze[0][1],se=+Ze[1][0],ue=+Ze[1][1]),Oe):E==null?null:[[E,O],[se,ue]]},Oe.size=function(Ze){return arguments.length?(Ze==null?E=O=se=ue=null:(E=O=0,se=+Ze[0],ue=+Ze[1]),Oe):E==null?null:[se-E,ue-O]},Oe};function vM(d){return d.x}function gM(d){return d.y}function c1(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fd(d,E,O,se,ue,ye){if(!d(E,O,se,ue,ye)){var De=(O+ue)*.5,Me=(se+ye)*.5,Oe=E.nodes;Oe[0]&&fd(d,Oe[0],O,se,De,Me),Oe[1]&&fd(d,Oe[1],De,se,ue,Me),Oe[2]&&fd(d,Oe[2],O,Me,De,ye),Oe[3]&&fd(d,Oe[3],De,Me,ue,ye)}}function yM(d,E,O,se,ue,ye,De){var Me=1/0,Oe;return function Ze(Ke,wt,St,Kt,ar){if(!(wt>ye||St>De||Kt<se||ar<ue)){if(Et=Ke.point){var Et,Wt=E-Ke.x,Xt=O-Ke.y,or=Wt*Wt+Xt*Xt;if(or<Me){var cr=Math.sqrt(Me=or);se=E-cr,ue=O-cr,ye=E+cr,De=O+cr,Oe=Et}}for(var Zt=Ke.nodes,Cr=(wt+Kt)*.5,Jr=(St+ar)*.5,nn=E>=Cr,Qr=O>=Jr,un=Qr<<1|nn,dn=un+4;un<dn;++un)if(Ke=Zt[un&3])switch(un&3){case 0:Ze(Ke,wt,St,Cr,Jr);break;case 1:Ze(Ke,Cr,St,Kt,Jr);break;case 2:Ze(Ke,wt,Jr,Cr,ar);break;case 3:Ze(Ke,Cr,Jr,Kt,ar);break}}}(d,se,ue,ye,De),Oe}h.interpolateRgb=Wm;function Wm(d,E){d=h.rgb(d),E=h.rgb(E);var O=d.r,se=d.g,ue=d.b,ye=E.r-O,De=E.g-se,Me=E.b-ue;return function(Oe){return"#"+Qe(Math.round(O+ye*Oe))+Qe(Math.round(se+De*Oe))+Qe(Math.round(ue+Me*Oe))}}h.interpolateObject=u1;function u1(d,E){var O={},se={},ue;for(ue in d)ue in E?O[ue]=bc(d[ue],E[ue]):se[ue]=d[ue];for(ue in E)ue in d||(se[ue]=E[ue]);return function(ye){for(ue in O)se[ue]=O[ue](ye);return se}}h.interpolateNumber=ol;function ol(d,E){return d=+d,E=+E,function(O){return d*(1-O)+E*O}}h.interpolateString=d1;function d1(d,E){var O=qm.lastIndex=Um.lastIndex=0,se,ue,ye,De=-1,Me=[],Oe=[];for(d=d+"",E=E+"";(se=qm.exec(d))&&(ue=Um.exec(E));)(ye=ue.index)>O&&(ye=E.slice(O,ye),Me[De]?Me[De]+=ye:Me[++De]=ye),(se=se[0])===(ue=ue[0])?Me[De]?Me[De]+=ue:Me[++De]=ue:(Me[++De]=null,Oe.push({i:De,x:ol(se,ue)})),O=Um.lastIndex;return O<E.length&&(ye=E.slice(O),Me[De]?Me[De]+=ye:Me[++De]=ye),Me.length<2?Oe[0]?(E=Oe[0].x,function(Ze){return E(Ze)+""}):function(){return E}:(E=Oe.length,function(Ze){for(var Ke=0,wt;Ke<E;++Ke)Me[(wt=Oe[Ke]).i]=wt.x(Ze);return Me.join("")})}var qm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Um=new RegExp(qm.source,"g");h.interpolate=bc;function bc(d,E){for(var O=h.interpolators.length,se;--O>=0&&!(se=h.interpolators[O](d,E)););return se}h.interpolators=[function(d,E){var O=typeof E;return(O==="string"?Rt.has(E.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(E)?Wm:d1:E instanceof Fr?Wm:Array.isArray(E)?ah:O==="object"&&isNaN(E)?u1:ol)(d,E)}],h.interpolateArray=ah;function ah(d,E){var O=[],se=[],ue=d.length,ye=E.length,De=Math.min(d.length,E.length),Me;for(Me=0;Me<De;++Me)O.push(bc(d[Me],E[Me]));for(;Me<ue;++Me)se[Me]=d[Me];for(;Me<ye;++Me)se[Me]=E[Me];return function(Oe){for(Me=0;Me<De;++Me)se[Me]=O[Me](Oe);return se}}var f1=function(){return ne},xM=h.map({linear:f1,poly:MM,quad:function(){return _M},cubic:function(){return SM},sin:function(){return TM},exp:function(){return AM},circle:function(){return CM},elastic:jM,back:LM,bounce:function(){return EM}}),bM=h.map({in:ne,out:h1,"in-out":p1,"out-in":function(d){return p1(h1(d))}});h.ease=function(d){var E=d.indexOf("-"),O=E>=0?d.slice(0,E):d,se=E>=0?d.slice(E+1):"in";return O=xM.get(O)||f1,se=bM.get(se)||ne,wM(se(O.apply(null,c.call(arguments,1))))};function wM(d){return function(E){return E<=0?0:E>=1?1:d(E)}}function h1(d){return function(E){return 1-d(1-E)}}function p1(d){return function(E){return .5*(E<.5?d(2*E):2-d(2-2*E))}}function _M(d){return d*d}function SM(d){return d*d*d}function kM(d){if(d<=0)return 0;if(d>=1)return 1;var E=d*d,O=E*d;return 4*(d<.5?O:3*(d-E)+O-.75)}function MM(d){return function(E){return Math.pow(E,d)}}function TM(d){return 1-Math.cos(d*Re)}function AM(d){return Math.pow(2,10*(d-1))}function CM(d){return 1-Math.sqrt(1-d*d)}function jM(d,E){var O;return arguments.length<2&&(E=.45),arguments.length?O=E/je*Math.asin(1/d):(d=1,O=E/4),function(se){return 1+d*Math.pow(2,-10*se)*Math.sin((se-O)*je/E)}}function LM(d){return d||(d=1.70158),function(E){return E*E*((d+1)*E-d)}}function EM(d){return d<1/2.75?7.5625*d*d:d<2/2.75?7.5625*(d-=1.5/2.75)*d+.75:d<2.5/2.75?7.5625*(d-=2.25/2.75)*d+.9375:7.5625*(d-=2.625/2.75)*d+.984375}h.interpolateHcl=DM;function DM(d,E){d=h.hcl(d),E=h.hcl(E);var O=d.h,se=d.c,ue=d.l,ye=E.h-O,De=E.c-se,Me=E.l-ue;return isNaN(De)&&(De=0,se=isNaN(se)?E.c:se),isNaN(ye)?(ye=0,O=isNaN(O)?E.h:O):ye>180?ye-=360:ye<-180&&(ye+=360),function(Oe){return Er(O+ye*Oe,se+De*Oe,ue+Me*Oe)+""}}h.interpolateHsl=RM;function RM(d,E){d=h.hsl(d),E=h.hsl(E);var O=d.h,se=d.s,ue=d.l,ye=E.h-O,De=E.s-se,Me=E.l-ue;return isNaN(De)&&(De=0,se=isNaN(se)?E.s:se),isNaN(ye)?(ye=0,O=isNaN(O)?E.h:O):ye>180?ye-=360:ye<-180&&(ye+=360),function(Oe){return Wr(O+ye*Oe,se+De*Oe,ue+Me*Oe)+""}}h.interpolateLab=PM;function PM(d,E){d=h.lab(d),E=h.lab(E);var O=d.l,se=d.a,ue=d.b,ye=E.l-O,De=E.a-se,Me=E.b-ue;return function(Oe){return mn(O+ye*Oe,se+De*Oe,ue+Me*Oe)+""}}h.interpolateRound=m1;function m1(d,E){return E-=d,function(O){return Math.round(d+E*O)}}h.transform=function(d){var E=p.createElementNS(h.ns.prefix.svg,"g");return(h.transform=function(O){if(O!=null){E.setAttribute("transform",O);var se=E.transform.baseVal.consolidate()}return new v1(se?se.matrix:zM)})(d)};function v1(d){var E=[d.a,d.b],O=[d.c,d.d],se=y1(E),ue=g1(E,O),ye=y1(NM(O,E,-ue))||0;E[0]*O[1]<O[0]*E[1]&&(E[0]*=-1,E[1]*=-1,se*=-1,ue*=-1),this.rotate=(se?Math.atan2(E[1],E[0]):Math.atan2(-O[0],O[1]))*at,this.translate=[d.e,d.f],this.scale=[se,ye],this.skew=ye?Math.atan2(ue,ye)*at:0}v1.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function g1(d,E){return d[0]*E[0]+d[1]*E[1]}function y1(d){var E=Math.sqrt(g1(d,d));return E&&(d[0]/=E,d[1]/=E),E}function NM(d,E,O){return d[0]+=O*E[0],d[1]+=O*E[1],d}var zM={a:1,b:0,c:0,d:1,e:0,f:0};h.interpolateTransform=x1;function fu(d){return d.length?d.pop()+",":""}function FM(d,E,O,se){if(d[0]!==E[0]||d[1]!==E[1]){var ue=O.push("translate(",null,",",null,")");se.push({i:ue-4,x:ol(d[0],E[0])},{i:ue-2,x:ol(d[1],E[1])})}else(E[0]||E[1])&&O.push("translate("+E+")")}function IM(d,E,O,se){d!==E?(d-E>180?E+=360:E-d>180&&(d+=360),se.push({i:O.push(fu(O)+"rotate(",null,")")-2,x:ol(d,E)})):E&&O.push(fu(O)+"rotate("+E+")")}function OM(d,E,O,se){d!==E?se.push({i:O.push(fu(O)+"skewX(",null,")")-2,x:ol(d,E)}):E&&O.push(fu(O)+"skewX("+E+")")}function BM(d,E,O,se){if(d[0]!==E[0]||d[1]!==E[1]){var ue=O.push(fu(O)+"scale(",null,",",null,")");se.push({i:ue-4,x:ol(d[0],E[0])},{i:ue-2,x:ol(d[1],E[1])})}else(E[0]!==1||E[1]!==1)&&O.push(fu(O)+"scale("+E+")")}function x1(d,E){var O=[],se=[];return d=h.transform(d),E=h.transform(E),FM(d.translate,E.translate,O,se),IM(d.rotate,E.rotate,O,se),OM(d.skew,E.skew,O,se),BM(d.scale,E.scale,O,se),d=E=null,function(ue){for(var ye=-1,De=se.length,Me;++ye<De;)O[(Me=se[ye]).i]=Me.x(ue);return O.join("")}}function HM(d,E){return E=(E-=d=+d)||1/E,function(O){return(O-d)/E}}function WM(d,E){return E=(E-=d=+d)||1/E,function(O){return Math.max(0,Math.min(1,(O-d)/E))}}h.layout={},h.layout.bundle=function(){return function(d){for(var E=[],O=-1,se=d.length;++O<se;)E.push(qM(d[O]));return E}};function qM(d){for(var E=d.source,O=d.target,se=UM(E,O),ue=[E];E!==se;)E=E.parent,ue.push(E);for(var ye=ue.length;O!==se;)ue.splice(ye,0,O),O=O.parent;return ue}function b1(d){for(var E=[],O=d.parent;O!=null;)E.push(d),d=O,O=O.parent;return E.push(d),E}function UM(d,E){if(d===E)return d;for(var O=b1(d),se=b1(E),ue=O.pop(),ye=se.pop(),De=null;ue===ye;)De=ue,ue=O.pop(),ye=se.pop();return De}h.layout.chord=function(){var d={},E,O,se,ue,ye=0,De,Me,Oe;function Ze(){var wt={},St=[],Kt=h.range(ue),ar=[],Et,Wt,Xt,or,cr;for(E=[],O=[],Et=0,or=-1;++or<ue;){for(Wt=0,cr=-1;++cr<ue;)Wt+=se[or][cr];St.push(Wt),ar.push(h.range(ue)),Et+=Wt}for(De&&Kt.sort(function(On,vn){return De(St[On],St[vn])}),Me&&ar.forEach(function(On,vn){On.sort(function(Dn,ui){return Me(se[vn][Dn],se[vn][ui])})}),Et=(je-ye*ue)/Et,Wt=0,or=-1;++or<ue;){for(Xt=Wt,cr=-1;++cr<ue;){var Zt=Kt[or],Cr=ar[Zt][cr],Jr=se[Zt][Cr],nn=Wt,Qr=Wt+=Jr*Et;wt[Zt+"-"+Cr]={index:Zt,subindex:Cr,startAngle:nn,endAngle:Qr,value:Jr}}O[Zt]={index:Zt,startAngle:Xt,endAngle:Wt,value:St[Zt]},Wt+=ye}for(or=-1;++or<ue;)for(cr=or-1;++cr<ue;){var un=wt[or+"-"+cr],dn=wt[cr+"-"+or];(un.value||dn.value)&&E.push(un.value<dn.value?{source:dn,target:un}:{source:un,target:dn})}Oe&&Ke()}function Ke(){E.sort(function(wt,St){return Oe((wt.source.value+wt.target.value)/2,(St.source.value+St.target.value)/2)})}return d.matrix=function(wt){return arguments.length?(ue=(se=wt)&&se.length,E=O=null,d):se},d.padding=function(wt){return arguments.length?(ye=wt,E=O=null,d):ye},d.sortGroups=function(wt){return arguments.length?(De=wt,E=O=null,d):De},d.sortSubgroups=function(wt){return arguments.length?(Me=wt,E=null,d):Me},d.sortChords=function(wt){return arguments.length?(Oe=wt,E&&Ke(),d):Oe},d.chords=function(){return E||Ze(),E},d.groups=function(){return O||Ze(),O},d},h.layout.force=function(){var d={},E=h.dispatch("start","tick","end"),O,se=[1,1],ue,ye,De=.9,Me=XM,Oe=ZM,Ze=-30,Ke=KM,wt=.1,St=.64,Kt=[],ar=[],Et,Wt,Xt;function or(Zt){return function(Cr,Jr,nn,Qr){if(Cr.point!==Zt){var un=Cr.cx-Zt.x,dn=Cr.cy-Zt.y,On=Qr-Jr,vn=un*un+dn*dn;if(On*On/St<vn){if(vn<Ke){var Dn=Cr.charge/vn;Zt.px-=un*Dn,Zt.py-=dn*Dn}return!0}if(Cr.point&&vn&&vn<Ke){var Dn=Cr.pointCharge/vn;Zt.px-=un*Dn,Zt.py-=dn*Dn}}return!Cr.charge}}d.tick=function(){if((ye*=.99)<.005)return O=null,E.end({type:"end",alpha:ye=0}),!0;var Zt=Kt.length,Cr=ar.length,Jr,nn,Qr,un,dn,On,vn,Dn,ui;for(nn=0;nn<Cr;++nn)Qr=ar[nn],un=Qr.source,dn=Qr.target,Dn=dn.x-un.x,ui=dn.y-un.y,(On=Dn*Dn+ui*ui)&&(On=ye*Wt[nn]*((On=Math.sqrt(On))-Et[nn])/On,Dn*=On,ui*=On,dn.x-=Dn*(vn=un.weight+dn.weight?un.weight/(un.weight+dn.weight):.5),dn.y-=ui*vn,un.x+=Dn*(vn=1-vn),un.y+=ui*vn);if((vn=ye*wt)&&(Dn=se[0]/2,ui=se[1]/2,nn=-1,vn))for(;++nn<Zt;)Qr=Kt[nn],Qr.x+=(Dn-Qr.x)*vn,Qr.y+=(ui-Qr.y)*vn;if(Ze)for(w1(Jr=h.geom.quadtree(Kt),ye,Xt),nn=-1;++nn<Zt;)(Qr=Kt[nn]).fixed||Jr.visit(or(Qr));for(nn=-1;++nn<Zt;)Qr=Kt[nn],Qr.fixed?(Qr.x=Qr.px,Qr.y=Qr.py):(Qr.x-=(Qr.px-(Qr.px=Qr.x))*De,Qr.y-=(Qr.py-(Qr.py=Qr.y))*De);E.tick({type:"tick",alpha:ye})},d.nodes=function(Zt){return arguments.length?(Kt=Zt,d):Kt},d.links=function(Zt){return arguments.length?(ar=Zt,d):ar},d.size=function(Zt){return arguments.length?(se=Zt,d):se},d.linkDistance=function(Zt){return arguments.length?(Me=typeof Zt=="function"?Zt:+Zt,d):Me},d.distance=d.linkDistance,d.linkStrength=function(Zt){return arguments.length?(Oe=typeof Zt=="function"?Zt:+Zt,d):Oe},d.friction=function(Zt){return arguments.length?(De=+Zt,d):De},d.charge=function(Zt){return arguments.length?(Ze=typeof Zt=="function"?Zt:+Zt,d):Ze},d.chargeDistance=function(Zt){return arguments.length?(Ke=Zt*Zt,d):Math.sqrt(Ke)},d.gravity=function(Zt){return arguments.length?(wt=+Zt,d):wt},d.theta=function(Zt){return arguments.length?(St=Zt*Zt,d):Math.sqrt(St)},d.alpha=function(Zt){return arguments.length?(Zt=+Zt,ye?Zt>0?ye=Zt:(O.c=null,O.t=NaN,O=null,E.end({type:"end",alpha:ye=0})):Zt>0&&(E.start({type:"start",alpha:ye=Zt}),O=bn(d.tick)),d):ye},d.start=function(){var Zt,Cr=Kt.length,Jr=ar.length,nn=se[0],Qr=se[1],un,dn;for(Zt=0;Zt<Cr;++Zt)(dn=Kt[Zt]).index=Zt,dn.weight=0;for(Zt=0;Zt<Jr;++Zt)dn=ar[Zt],typeof dn.source=="number"&&(dn.source=Kt[dn.source]),typeof dn.target=="number"&&(dn.target=Kt[dn.target]),++dn.source.weight,++dn.target.weight;for(Zt=0;Zt<Cr;++Zt)dn=Kt[Zt],isNaN(dn.x)&&(dn.x=On("x",nn)),isNaN(dn.y)&&(dn.y=On("y",Qr)),isNaN(dn.px)&&(dn.px=dn.x),isNaN(dn.py)&&(dn.py=dn.y);if(Et=[],typeof Me=="function")for(Zt=0;Zt<Jr;++Zt)Et[Zt]=+Me.call(this,ar[Zt],Zt);else for(Zt=0;Zt<Jr;++Zt)Et[Zt]=Me;if(Wt=[],typeof Oe=="function")for(Zt=0;Zt<Jr;++Zt)Wt[Zt]=+Oe.call(this,ar[Zt],Zt);else for(Zt=0;Zt<Jr;++Zt)Wt[Zt]=Oe;if(Xt=[],typeof Ze=="function")for(Zt=0;Zt<Cr;++Zt)Xt[Zt]=+Ze.call(this,Kt[Zt],Zt);else for(Zt=0;Zt<Cr;++Zt)Xt[Zt]=Ze;function On(vn,Dn){if(!un){for(un=new Array(Cr),wi=0;wi<Cr;++wi)un[wi]=[];for(wi=0;wi<Jr;++wi){var ui=ar[wi];un[ui.source.index].push(ui.target),un[ui.target.index].push(ui.source)}}for(var fa=un[Zt],wi=-1,Zr=fa.length,Bn;++wi<Zr;)if(!isNaN(Bn=fa[wi][vn]))return Bn;return Math.random()*Dn}return d.resume()},d.resume=function(){return d.alpha(.1)},d.stop=function(){return d.alpha(0)},d.drag=function(){if(ue||(ue=h.behavior.drag().origin(ne).on("dragstart.force",VM).on("drag.force",cr).on("dragend.force",$M)),!arguments.length)return ue;this.on("mouseover.force",YM).on("mouseout.force",GM).call(ue)};function cr(Zt){Zt.px=h.event.x,Zt.py=h.event.y,d.resume()}return h.rebind(d,E,"on")};function VM(d){d.fixed|=2}function $M(d){d.fixed&=-7}function YM(d){d.fixed|=4,d.px=d.x,d.py=d.y}function GM(d){d.fixed&=-5}function w1(d,E,O){var se=0,ue=0;if(d.charge=0,!d.leaf)for(var ye=d.nodes,De=ye.length,Me=-1,Oe;++Me<De;)Oe=ye[Me],Oe!=null&&(w1(Oe,E,O),d.charge+=Oe.charge,se+=Oe.charge*Oe.cx,ue+=Oe.charge*Oe.cy);if(d.point){d.leaf||(d.point.x+=Math.random()-.5,d.point.y+=Math.random()-.5);var Ze=E*O[d.point.index];d.charge+=d.pointCharge=Ze,se+=Ze*d.point.x,ue+=Ze*d.point.y}d.cx=se/d.charge,d.cy=ue/d.charge}var XM=20,ZM=1,KM=1/0;h.layout.hierarchy=function(){var d=eT,E=JM,O=QM;function se(ue){var ye=[ue],De=[],Me;for(ue.depth=0;(Me=ye.pop())!=null;)if(De.push(Me),(Ze=E.call(se,Me,Me.depth))&&(Oe=Ze.length)){for(var Oe,Ze,Ke;--Oe>=0;)ye.push(Ke=Ze[Oe]),Ke.parent=Me,Ke.depth=Me.depth+1;O&&(Me.value=0),Me.children=Ze}else O&&(Me.value=+O.call(se,Me,Me.depth)||0),delete Me.children;return Ho(ue,function(wt){var St,Kt;d&&(St=wt.children)&&St.sort(d),O&&(Kt=wt.parent)&&(Kt.value+=wt.value)}),De}return se.sort=function(ue){return arguments.length?(d=ue,se):d},se.children=function(ue){return arguments.length?(E=ue,se):E},se.value=function(ue){return arguments.length?(O=ue,se):O},se.revalue=function(ue){return O&&(pd(ue,function(ye){ye.children&&(ye.value=0)}),Ho(ue,function(ye){var De;ye.children||(ye.value=+O.call(se,ye,ye.depth)||0),(De=ye.parent)&&(De.value+=ye.value)})),ue},se};function hd(d,E){return h.rebind(d,E,"sort","children","value"),d.nodes=d,d.links=tT,d}function pd(d,E){for(var O=[d];(d=O.pop())!=null;)if(E(d),(ue=d.children)&&(se=ue.length))for(var se,ue;--se>=0;)O.push(ue[se])}function Ho(d,E){for(var O=[d],se=[];(d=O.pop())!=null;)if(se.push(d),(De=d.children)&&(ye=De.length))for(var ue=-1,ye,De;++ue<ye;)O.push(De[ue]);for(;(d=se.pop())!=null;)E(d)}function JM(d){return d.children}function QM(d){return d.value}function eT(d,E){return E.value-d.value}function tT(d){return h.merge(d.map(function(E){return(E.children||[]).map(function(O){return{source:E,target:O}})}))}h.layout.partition=function(){var d=h.layout.hierarchy(),E=[1,1];function O(ye,De,Me,Oe){var Ze=ye.children;if(ye.x=De,ye.y=ye.depth*Oe,ye.dx=Me,ye.dy=Oe,Ze&&(wt=Ze.length)){var Ke=-1,wt,St,Kt;for(Me=ye.value?Me/ye.value:0;++Ke<wt;)O(St=Ze[Ke],De,Kt=St.value*Me,Oe),De+=Kt}}function se(ye){var De=ye.children,Me=0;if(De&&(Ze=De.length))for(var Oe=-1,Ze;++Oe<Ze;)Me=Math.max(Me,se(De[Oe]));return 1+Me}function ue(ye,De){var Me=d.call(this,ye,De);return O(Me[0],0,E[0],E[1]/se(Me[0])),Me}return ue.size=function(ye){return arguments.length?(E=ye,ue):E},hd(ue,d)},h.layout.pie=function(){var d=Number,E=_1,O=0,se=je,ue=0;function ye(De){var Me=De.length,Oe=De.map(function(or,cr){return+d.call(ye,or,cr)}),Ze=+(typeof O=="function"?O.apply(this,arguments):O),Ke=(typeof se=="function"?se.apply(this,arguments):se)-Ze,wt=Math.min(Math.abs(Ke)/Me,+(typeof ue=="function"?ue.apply(this,arguments):ue)),St=wt*(Ke<0?-1:1),Kt=h.sum(Oe),ar=Kt?(Ke-Me*St)/Kt:0,Et=h.range(Me),Wt=[],Xt;return E!=null&&Et.sort(E===_1?function(or,cr){return Oe[cr]-Oe[or]}:function(or,cr){return E(De[or],De[cr])}),Et.forEach(function(or){Wt[or]={data:De[or],value:Xt=Oe[or],startAngle:Ze,endAngle:Ze+=Xt*ar+St,padAngle:wt}}),Wt}return ye.value=function(De){return arguments.length?(d=De,ye):d},ye.sort=function(De){return arguments.length?(E=De,ye):E},ye.startAngle=function(De){return arguments.length?(O=De,ye):O},ye.endAngle=function(De){return arguments.length?(se=De,ye):se},ye.padAngle=function(De){return arguments.length?(ue=De,ye):ue},ye};var _1={};h.layout.stack=function(){var d=ne,E=Vm,O=$m,se=iT,ue=rT,ye=nT;function De(Me,Oe){if(!(ar=Me.length))return Me;var Ze=Me.map(function(or,cr){return d.call(De,or,cr)}),Ke=Ze.map(function(or){return or.map(function(cr,Zt){return[ue.call(De,cr,Zt),ye.call(De,cr,Zt)]})}),wt=E.call(De,Ke,Oe);Ze=h.permute(Ze,wt),Ke=h.permute(Ke,wt);var St=O.call(De,Ke,Oe),Kt=Ze[0].length,ar,Et,Wt,Xt;for(Wt=0;Wt<Kt;++Wt)for(se.call(De,Ze[0][Wt],Xt=St[Wt],Ke[0][Wt][1]),Et=1;Et<ar;++Et)se.call(De,Ze[Et][Wt],Xt+=Ke[Et-1][Wt][1],Ke[Et][Wt][1]);return Me}return De.values=function(Me){return arguments.length?(d=Me,De):d},De.order=function(Me){return arguments.length?(E=typeof Me=="function"?Me:aT.get(Me)||Vm,De):E},De.offset=function(Me){return arguments.length?(O=typeof Me=="function"?Me:sT.get(Me)||$m,De):O},De.x=function(Me){return arguments.length?(ue=Me,De):ue},De.y=function(Me){return arguments.length?(ye=Me,De):ye},De.out=function(Me){return arguments.length?(se=Me,De):se},De};function rT(d){return d.x}function nT(d){return d.y}function iT(d,E,O){d.y0=E,d.y=O}var aT=h.map({"inside-out":function(d){var E=d.length,O,se,ue=d.map(oT),ye=d.map(lT),De=h.range(E).sort(function(wt,St){return ue[wt]-ue[St]}),Me=0,Oe=0,Ze=[],Ke=[];for(O=0;O<E;++O)se=De[O],Me<Oe?(Me+=ye[se],Ze.push(se)):(Oe+=ye[se],Ke.push(se));return Ke.reverse().concat(Ze)},reverse:function(d){return h.range(d.length).reverse()},default:Vm}),sT=h.map({silhouette:function(d){var E=d.length,O=d[0].length,se=[],ue=0,ye,De,Me,Oe=[];for(De=0;De<O;++De){for(ye=0,Me=0;ye<E;ye++)Me+=d[ye][De][1];Me>ue&&(ue=Me),se.push(Me)}for(De=0;De<O;++De)Oe[De]=(ue-se[De])/2;return Oe},wiggle:function(d){var E=d.length,O=d[0],se=O.length,ue,ye,De,Me,Oe,Ze,Ke,wt,St,Kt=[];for(Kt[0]=wt=St=0,ye=1;ye<se;++ye){for(ue=0,Me=0;ue<E;++ue)Me+=d[ue][ye][1];for(ue=0,Oe=0,Ke=O[ye][0]-O[ye-1][0];ue<E;++ue){for(De=0,Ze=(d[ue][ye][1]-d[ue][ye-1][1])/(2*Ke);De<ue;++De)Ze+=(d[De][ye][1]-d[De][ye-1][1])/Ke;Oe+=Ze*d[ue][ye][1]}Kt[ye]=wt-=Me?Oe/Me*Ke:0,wt<St&&(St=wt)}for(ye=0;ye<se;++ye)Kt[ye]-=St;return Kt},expand:function(d){var E=d.length,O=d[0].length,se=1/E,ue,ye,De,Me=[];for(ye=0;ye<O;++ye){for(ue=0,De=0;ue<E;ue++)De+=d[ue][ye][1];if(De)for(ue=0;ue<E;ue++)d[ue][ye][1]/=De;else for(ue=0;ue<E;ue++)d[ue][ye][1]=se}for(ye=0;ye<O;++ye)Me[ye]=0;return Me},zero:$m});function Vm(d){return h.range(d.length)}function $m(d){for(var E=-1,O=d[0].length,se=[];++E<O;)se[E]=0;return se}function oT(d){for(var E=1,O=0,se=d[0][1],ue,ye=d.length;E<ye;++E)(ue=d[E][1])>se&&(O=E,se=ue);return O}function lT(d){return d.reduce(cT,0)}function cT(d,E){return d+E[1]}h.layout.histogram=function(){var d=!0,E=Number,O=dT,se=uT;function ue(ye,St){for(var Me=[],Oe=ye.map(E,this),Ze=O.call(this,Oe,St),Ke=se.call(this,Ze,Oe,St),wt,St=-1,Kt=Oe.length,ar=Ke.length-1,Et=d?1:1/Kt,Wt;++St<ar;)wt=Me[St]=[],wt.dx=Ke[St+1]-(wt.x=Ke[St]),wt.y=0;if(ar>0)for(St=-1;++St<Kt;)Wt=Oe[St],Wt>=Ze[0]&&Wt<=Ze[1]&&(wt=Me[h.bisect(Ke,Wt,1,ar)-1],wt.y+=Et,wt.push(ye[St]));return Me}return ue.value=function(ye){return arguments.length?(E=ye,ue):E},ue.range=function(ye){return arguments.length?(O=tr(ye),ue):O},ue.bins=function(ye){return arguments.length?(se=typeof ye=="number"?function(De){return S1(De,ye)}:tr(ye),ue):se},ue.frequency=function(ye){return arguments.length?(d=!!ye,ue):d},ue};function uT(d,E){return S1(d,Math.ceil(Math.log(E.length)/Math.LN2+1))}function S1(d,E){for(var O=-1,se=+d[0],ue=(d[1]-se)/E,ye=[];++O<=E;)ye[O]=ue*O+se;return ye}function dT(d){return[h.min(d),h.max(d)]}h.layout.pack=function(){var d=h.layout.hierarchy().sort(fT),E=0,O=[1,1],se;function ue(ye,De){var Me=d.call(this,ye,De),Oe=Me[0],Ze=O[0],Ke=O[1],wt=se==null?Math.sqrt:typeof se=="function"?se:function(){return se};if(Oe.x=Oe.y=0,Ho(Oe,function(Kt){Kt.r=+wt(Kt.value)}),Ho(Oe,T1),E){var St=E*(se?1:Math.max(2*Oe.r/Ze,2*Oe.r/Ke))/2;Ho(Oe,function(Kt){Kt.r+=St}),Ho(Oe,T1),Ho(Oe,function(Kt){Kt.r-=St})}return A1(Oe,Ze/2,Ke/2,se?1:1/Math.max(2*Oe.r/Ze,2*Oe.r/Ke)),Me}return ue.size=function(ye){return arguments.length?(O=ye,ue):O},ue.radius=function(ye){return arguments.length?(se=ye==null||typeof ye=="function"?ye:+ye,ue):se},ue.padding=function(ye){return arguments.length?(E=+ye,ue):E},hd(ue,d)};function fT(d,E){return d.value-E.value}function Ym(d,E){var O=d._pack_next;d._pack_next=E,E._pack_prev=d,E._pack_next=O,O._pack_prev=E}function k1(d,E){d._pack_next=E,E._pack_prev=d}function M1(d,E){var O=E.x-d.x,se=E.y-d.y,ue=d.r+E.r;return .999*ue*ue>O*O+se*se}function T1(d){if(!(E=d.children)||!(St=E.length))return;var E,O=1/0,se=-1/0,ue=1/0,ye=-1/0,De,Me,Oe,Ze,Ke,wt,St;function Kt(Zt){O=Math.min(Zt.x-Zt.r,O),se=Math.max(Zt.x+Zt.r,se),ue=Math.min(Zt.y-Zt.r,ue),ye=Math.max(Zt.y+Zt.r,ye)}if(E.forEach(hT),De=E[0],De.x=-De.r,De.y=0,Kt(De),St>1&&(Me=E[1],Me.x=Me.r,Me.y=0,Kt(Me),St>2))for(Oe=E[2],C1(De,Me,Oe),Kt(Oe),Ym(De,Oe),De._pack_prev=Oe,Ym(Oe,Me),Me=De._pack_next,Ze=3;Ze<St;Ze++){C1(De,Me,Oe=E[Ze]);var ar=0,Et=1,Wt=1;for(Ke=Me._pack_next;Ke!==Me;Ke=Ke._pack_next,Et++)if(M1(Ke,Oe)){ar=1;break}if(ar==1)for(wt=De._pack_prev;wt!==Ke._pack_prev&&!M1(wt,Oe);wt=wt._pack_prev,Wt++);ar?(Et<Wt||Et==Wt&&Me.r<De.r?k1(De,Me=Ke):k1(De=wt,Me),Ze--):(Ym(De,Oe),Me=Oe,Kt(Oe))}var Xt=(O+se)/2,or=(ue+ye)/2,cr=0;for(Ze=0;Ze<St;Ze++)Oe=E[Ze],Oe.x-=Xt,Oe.y-=or,cr=Math.max(cr,Oe.r+Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y));d.r=cr,E.forEach(pT)}function hT(d){d._pack_next=d._pack_prev=d}function pT(d){delete d._pack_next,delete d._pack_prev}function A1(d,E,O,se){var ue=d.children;if(d.x=E+=se*d.x,d.y=O+=se*d.y,d.r*=se,ue)for(var ye=-1,De=ue.length;++ye<De;)A1(ue[ye],E,O,se)}function C1(d,E,O){var se=d.r+O.r,ue=E.x-d.x,ye=E.y-d.y;if(se&&(ue||ye)){var De=E.r+O.r,Me=ue*ue+ye*ye;De*=De,se*=se;var Oe=.5+(se-De)/(2*Me),Ze=Math.sqrt(Math.max(0,2*De*(se+Me)-(se-=Me)*se-De*De))/(2*Me);O.x=d.x+Oe*ue+Ze*ye,O.y=d.y+Oe*ye-Ze*ue}else O.x=d.x+se,O.y=d.y}h.layout.tree=function(){var d=h.layout.hierarchy().sort(null).value(null),E=j1,O=[1,1],se=null;function ue(Ke,wt){var St=d.call(this,Ke,wt),Kt=St[0],ar=ye(Kt);if(Ho(ar,De),ar.parent.m=-ar.z,pd(ar,Me),se)pd(Kt,Ze);else{var Et=Kt,Wt=Kt,Xt=Kt;pd(Kt,function(Cr){Cr.x<Et.x&&(Et=Cr),Cr.x>Wt.x&&(Wt=Cr),Cr.depth>Xt.depth&&(Xt=Cr)});var or=E(Et,Wt)/2-Et.x,cr=O[0]/(Wt.x+E(Wt,Et)/2+or),Zt=O[1]/(Xt.depth||1);pd(Kt,function(Cr){Cr.x=(Cr.x+or)*cr,Cr.y=Cr.depth*Zt})}return St}function ye(Ke){for(var wt={A:null,children:[Ke]},St=[wt],Kt;(Kt=St.pop())!=null;)for(var ar=Kt.children,Et,Wt=0,Xt=ar.length;Wt<Xt;++Wt)St.push((ar[Wt]=Et={_:ar[Wt],parent:Kt,children:(Et=ar[Wt].children)&&Et.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Wt}).a=Et);return wt.children[0]}function De(Ke){var wt=Ke.children,St=Ke.parent.children,Kt=Ke.i?St[Ke.i-1]:null;if(wt.length){vT(Ke);var ar=(wt[0].z+wt[wt.length-1].z)/2;Kt?(Ke.z=Kt.z+E(Ke._,Kt._),Ke.m=Ke.z-ar):Ke.z=ar}else Kt&&(Ke.z=Kt.z+E(Ke._,Kt._));Ke.parent.A=Oe(Ke,Kt,Ke.parent.A||St[0])}function Me(Ke){Ke._.x=Ke.z+Ke.parent.m,Ke.m+=Ke.parent.m}function Oe(Ke,wt,St){if(wt){for(var Kt=Ke,ar=Ke,Et=wt,Wt=Kt.parent.children[0],Xt=Kt.m,or=ar.m,cr=Et.m,Zt=Wt.m,Cr;Et=Xm(Et),Kt=Gm(Kt),Et&&Kt;)Wt=Gm(Wt),ar=Xm(ar),ar.a=Ke,Cr=Et.z+cr-Kt.z-Xt+E(Et._,Kt._),Cr>0&&(mT(gT(Et,Ke,St),Ke,Cr),Xt+=Cr,or+=Cr),cr+=Et.m,Xt+=Kt.m,Zt+=Wt.m,or+=ar.m;Et&&!Xm(ar)&&(ar.t=Et,ar.m+=cr-or),Kt&&!Gm(Wt)&&(Wt.t=Kt,Wt.m+=Xt-Zt,St=Ke)}return St}function Ze(Ke){Ke.x*=O[0],Ke.y=Ke.depth*O[1]}return ue.separation=function(Ke){return arguments.length?(E=Ke,ue):E},ue.size=function(Ke){return arguments.length?(se=(O=Ke)==null?Ze:null,ue):se?null:O},ue.nodeSize=function(Ke){return arguments.length?(se=(O=Ke)==null?null:Ze,ue):se?O:null},hd(ue,d)};function j1(d,E){return d.parent==E.parent?1:2}function Gm(d){var E=d.children;return E.length?E[0]:d.t}function Xm(d){var E=d.children,O;return(O=E.length)?E[O-1]:d.t}function mT(d,E,O){var se=O/(E.i-d.i);E.c-=se,E.s+=O,d.c+=se,E.z+=O,E.m+=O}function vT(d){for(var E=0,O=0,se=d.children,ue=se.length,ye;--ue>=0;)ye=se[ue],ye.z+=E,ye.m+=E,E+=ye.s+(O+=ye.c)}function gT(d,E,O){return d.a.parent===E.parent?d.a:O}h.layout.cluster=function(){var d=h.layout.hierarchy().sort(null).value(null),E=j1,O=[1,1],se=!1;function ue(ye,De){var Me=d.call(this,ye,De),Oe=Me[0],Ze,Ke=0;Ho(Oe,function(Et){var Wt=Et.children;Wt&&Wt.length?(Et.x=xT(Wt),Et.y=yT(Wt)):(Et.x=Ze?Ke+=E(Et,Ze):0,Et.y=0,Ze=Et)});var wt=L1(Oe),St=E1(Oe),Kt=wt.x-E(wt,St)/2,ar=St.x+E(St,wt)/2;return Ho(Oe,se?function(Et){Et.x=(Et.x-Oe.x)*O[0],Et.y=(Oe.y-Et.y)*O[1]}:function(Et){Et.x=(Et.x-Kt)/(ar-Kt)*O[0],Et.y=(1-(Oe.y?Et.y/Oe.y:1))*O[1]}),Me}return ue.separation=function(ye){return arguments.length?(E=ye,ue):E},ue.size=function(ye){return arguments.length?(se=(O=ye)==null,ue):se?null:O},ue.nodeSize=function(ye){return arguments.length?(se=(O=ye)!=null,ue):se?O:null},hd(ue,d)};function yT(d){return 1+h.max(d,function(E){return E.y})}function xT(d){return d.reduce(function(E,O){return E+O.x},0)/d.length}function L1(d){var E=d.children;return E&&E.length?L1(E[0]):d}function E1(d){var E=d.children,O;return E&&(O=E.length)?E1(E[O-1]):d}h.layout.treemap=function(){var d=h.layout.hierarchy(),E=Math.round,O=[1,1],se=null,ue=Zm,ye=!1,De,Me="squarify",Oe=.5*(1+Math.sqrt(5));function Ze(Et,Wt){for(var Xt=-1,or=Et.length,cr,Zt;++Xt<or;)Zt=(cr=Et[Xt]).value*(Wt<0?0:Wt),cr.area=isNaN(Zt)||Zt<=0?0:Zt}function Ke(Et){var Wt=Et.children;if(Wt&&Wt.length){var Xt=ue(Et),or=[],cr=Wt.slice(),Zt,Cr=1/0,Jr,nn=Me==="slice"?Xt.dx:Me==="dice"?Xt.dy:Me==="slice-dice"?Et.depth&1?Xt.dy:Xt.dx:Math.min(Xt.dx,Xt.dy),Qr;for(Ze(cr,Xt.dx*Xt.dy/Et.value),or.area=0;(Qr=cr.length)>0;)or.push(Zt=cr[Qr-1]),or.area+=Zt.area,Me!=="squarify"||(Jr=St(or,nn))<=Cr?(cr.pop(),Cr=Jr):(or.area-=or.pop().area,Kt(or,nn,Xt,!1),nn=Math.min(Xt.dx,Xt.dy),or.length=or.area=0,Cr=1/0);or.length&&(Kt(or,nn,Xt,!0),or.length=or.area=0),Wt.forEach(Ke)}}function wt(Et){var Wt=Et.children;if(Wt&&Wt.length){var Xt=ue(Et),or=Wt.slice(),cr,Zt=[];for(Ze(or,Xt.dx*Xt.dy/Et.value),Zt.area=0;cr=or.pop();)Zt.push(cr),Zt.area+=cr.area,cr.z!=null&&(Kt(Zt,cr.z?Xt.dx:Xt.dy,Xt,!or.length),Zt.length=Zt.area=0);Wt.forEach(wt)}}function St(Et,Wt){for(var Xt=Et.area,or,cr=0,Zt=1/0,Cr=-1,Jr=Et.length;++Cr<Jr;)(or=Et[Cr].area)&&(or<Zt&&(Zt=or),or>cr&&(cr=or));return Xt*=Xt,Wt*=Wt,Xt?Math.max(Wt*cr*Oe/Xt,Xt/(Wt*Zt*Oe)):1/0}function Kt(Et,Wt,Xt,or){var cr=-1,Zt=Et.length,Cr=Xt.x,Jr=Xt.y,nn=Wt?E(Et.area/Wt):0,Qr;if(Wt==Xt.dx){for((or||nn>Xt.dy)&&(nn=Xt.dy);++cr<Zt;)Qr=Et[cr],Qr.x=Cr,Qr.y=Jr,Qr.dy=nn,Cr+=Qr.dx=Math.min(Xt.x+Xt.dx-Cr,nn?E(Qr.area/nn):0);Qr.z=!0,Qr.dx+=Xt.x+Xt.dx-Cr,Xt.y+=nn,Xt.dy-=nn}else{for((or||nn>Xt.dx)&&(nn=Xt.dx);++cr<Zt;)Qr=Et[cr],Qr.x=Cr,Qr.y=Jr,Qr.dx=nn,Jr+=Qr.dy=Math.min(Xt.y+Xt.dy-Jr,nn?E(Qr.area/nn):0);Qr.z=!1,Qr.dy+=Xt.y+Xt.dy-Jr,Xt.x+=nn,Xt.dx-=nn}}function ar(Et){var Wt=De||d(Et),Xt=Wt[0];return Xt.x=Xt.y=0,Xt.value?(Xt.dx=O[0],Xt.dy=O[1]):Xt.dx=Xt.dy=0,De&&d.revalue(Xt),Ze([Xt],Xt.dx*Xt.dy/Xt.value),(De?wt:Ke)(Xt),ye&&(De=Wt),Wt}return ar.size=function(Et){return arguments.length?(O=Et,ar):O},ar.padding=function(Et){if(!arguments.length)return se;function Wt(cr){var Zt=Et.call(ar,cr,cr.depth);return Zt==null?Zm(cr):D1(cr,typeof Zt=="number"?[Zt,Zt,Zt,Zt]:Zt)}function Xt(cr){return D1(cr,Et)}var or;return ue=(se=Et)==null?Zm:(or=typeof Et)=="function"?Wt:(or==="number"&&(Et=[Et,Et,Et,Et]),Xt),ar},ar.round=function(Et){return arguments.length?(E=Et?Math.round:Number,ar):E!=Number},ar.sticky=function(Et){return arguments.length?(ye=Et,De=null,ar):ye},ar.ratio=function(Et){return arguments.length?(Oe=Et,ar):Oe},ar.mode=function(Et){return arguments.length?(Me=Et+"",ar):Me},hd(ar,d)};function Zm(d){return{x:d.x,y:d.y,dx:d.dx,dy:d.dy}}function D1(d,E){var O=d.x+E[3],se=d.y+E[0],ue=d.dx-E[1]-E[3],ye=d.dy-E[0]-E[2];return ue<0&&(O+=ue/2,ue=0),ye<0&&(se+=ye/2,ye=0),{x:O,y:se,dx:ue,dy:ye}}h.random={normal:function(d,E){var O=arguments.length;return O<2&&(E=1),O<1&&(d=0),function(){var se,ue,ye;do se=Math.random()*2-1,ue=Math.random()*2-1,ye=se*se+ue*ue;while(!ye||ye>1);return d+E*se*Math.sqrt(-2*Math.log(ye)/ye)}},logNormal:function(){var d=h.random.normal.apply(h,arguments);return function(){return Math.exp(d())}},bates:function(d){var E=h.random.irwinHall(d);return function(){return E()/d}},irwinHall:function(d){return function(){for(var E=0,O=0;O<d;O++)E+=Math.random();return E}}},h.scale={};function sh(d){var E=d[0],O=d[d.length-1];return E<O?[E,O]:[O,E]}function oh(d){return d.rangeExtent?d.rangeExtent():sh(d.range())}function bT(d,E,O,se){var ue=O(d[0],d[1]),ye=se(E[0],E[1]);return function(De){return ye(ue(De))}}function Km(d,E){var O=0,se=d.length-1,ue=d[O],ye=d[se],De;return ye<ue&&(De=O,O=se,se=De,De=ue,ue=ye,ye=De),d[O]=E.floor(ue),d[se]=E.ceil(ye),d}function R1(d){return d?{floor:function(E){return Math.floor(E/d)*d},ceil:function(E){return Math.ceil(E/d)*d}}:wT}var wT={floor:ne,ceil:ne};function _T(d,E,O,se){var ue=[],ye=[],De=0,Me=Math.min(d.length,E.length)-1;for(d[Me]<d[0]&&(d=d.slice().reverse(),E=E.slice().reverse());++De<=Me;)ue.push(O(d[De-1],d[De])),ye.push(se(E[De-1],E[De]));return function(Oe){var Ze=h.bisect(d,Oe,1,Me)-1;return ye[Ze](ue[Ze](Oe))}}h.scale.linear=function(){return P1([0,1],[0,1],bc,!1)};function P1(d,E,O,se){var ue,ye;function De(){var Oe=Math.min(d.length,E.length)>2?_T:bT,Ze=se?WM:HM;return ue=Oe(d,E,Ze,O),ye=Oe(E,d,Ze,bc),Me}function Me(Oe){return ue(Oe)}return Me.invert=function(Oe){return ye(Oe)},Me.domain=function(Oe){return arguments.length?(d=Oe.map(Number),De()):d},Me.range=function(Oe){return arguments.length?(E=Oe,De()):E},Me.rangeRound=function(Oe){return Me.range(Oe).interpolate(m1)},Me.clamp=function(Oe){return arguments.length?(se=Oe,De()):se},Me.interpolate=function(Oe){return arguments.length?(O=Oe,De()):O},Me.ticks=function(Oe){return Qm(d,Oe)},Me.tickFormat=function(Oe,Ze){return d3_scale_linearTickFormat(d,Oe,Ze)},Me.nice=function(Oe){return z1(d,Oe),De()},Me.copy=function(){return P1(d,E,O,se)},De()}function N1(d,E){return h.rebind(d,E,"range","rangeRound","interpolate","clamp")}function z1(d,E){return Km(d,R1(Jm(d,E)[2])),Km(d,R1(Jm(d,E)[2])),d}function Jm(d,E){E==null&&(E=10);var O=sh(d),se=O[1]-O[0],ue=Math.pow(10,Math.floor(Math.log(se/E)/Math.LN10)),ye=E/se*ue;return ye<=.15?ue*=10:ye<=.35?ue*=5:ye<=.75&&(ue*=2),O[0]=Math.ceil(O[0]/ue)*ue,O[1]=Math.floor(O[1]/ue)*ue+ue*.5,O[2]=ue,O}function Qm(d,E){return h.range.apply(h,Jm(d,E))}h.scale.log=function(){return F1(h.scale.linear().domain([0,1]),10,!0,[1,10])};function F1(d,E,O,se){function ue(Me){return(O?Math.log(Me<0?0:Me):-Math.log(Me>0?0:-Me))/Math.log(E)}function ye(Me){return O?Math.pow(E,Me):-Math.pow(E,-Me)}function De(Me){return d(ue(Me))}return De.invert=function(Me){return ye(d.invert(Me))},De.domain=function(Me){return arguments.length?(O=Me[0]>=0,d.domain((se=Me.map(Number)).map(ue)),De):se},De.base=function(Me){return arguments.length?(E=+Me,d.domain(se.map(ue)),De):E},De.nice=function(){var Me=Km(se.map(ue),O?Math:ST);return d.domain(Me),se=Me.map(ye),De},De.ticks=function(){var Me=sh(se),Oe=[],Ze=Me[0],Ke=Me[1],wt=Math.floor(ue(Ze)),St=Math.ceil(ue(Ke)),Kt=E%1?2:E;if(isFinite(St-wt)){if(O){for(;wt<St;wt++)for(var ar=1;ar<Kt;ar++)Oe.push(ye(wt)*ar);Oe.push(ye(wt))}else for(Oe.push(ye(wt));wt++<St;)for(var ar=Kt-1;ar>0;ar--)Oe.push(ye(wt)*ar);for(wt=0;Oe[wt]<Ze;wt++);for(St=Oe.length;Oe[St-1]>Ke;St--);Oe=Oe.slice(wt,St)}return Oe},De.copy=function(){return F1(d.copy(),E,O,se)},N1(De,d)}var ST={floor:function(d){return-Math.ceil(-d)},ceil:function(d){return-Math.floor(-d)}};h.scale.pow=function(){return I1(h.scale.linear(),1,[0,1])};function I1(d,E,O){var se=lh(E),ue=lh(1/E);function ye(De){return d(se(De))}return ye.invert=function(De){return ue(d.invert(De))},ye.domain=function(De){return arguments.length?(d.domain((O=De.map(Number)).map(se)),ye):O},ye.ticks=function(De){return Qm(O,De)},ye.tickFormat=function(De,Me){return d3_scale_linearTickFormat(O,De,Me)},ye.nice=function(De){return ye.domain(z1(O,De))},ye.exponent=function(De){return arguments.length?(se=lh(E=De),ue=lh(1/E),d.domain(O.map(se)),ye):E},ye.copy=function(){return I1(d.copy(),E,O)},N1(ye,d)}function lh(d){return function(E){return E<0?-Math.pow(-E,d):Math.pow(E,d)}}h.scale.sqrt=function(){return h.scale.pow().exponent(.5)},h.scale.ordinal=function(){return O1([],{t:"range",a:[[]]})};function O1(d,E){var O,se,ue;function ye(Me){return se[((O.get(Me)||(E.t==="range"?O.set(Me,d.push(Me)):NaN))-1)%se.length]}function De(Me,Oe){return h.range(d.length).map(function(Ze){return Me+Oe*Ze})}return ye.domain=function(Me){if(!arguments.length)return d;d=[],O=new F;for(var Oe=-1,Ze=Me.length,Ke;++Oe<Ze;)O.has(Ke=Me[Oe])||O.set(Ke,d.push(Ke));return ye[E.t].apply(ye,E.a)},ye.range=function(Me){return arguments.length?(se=Me,ue=0,E={t:"range",a:arguments},ye):se},ye.rangePoints=function(Me,Oe){arguments.length<2&&(Oe=0);var Ze=Me[0],Ke=Me[1],wt=d.length<2?(Ze=(Ze+Ke)/2,0):(Ke-Ze)/(d.length-1+Oe);return se=De(Ze+wt*Oe/2,wt),ue=0,E={t:"rangePoints",a:arguments},ye},ye.rangeRoundPoints=function(Me,Oe){arguments.length<2&&(Oe=0);var Ze=Me[0],Ke=Me[1],wt=d.length<2?(Ze=Ke=Math.round((Ze+Ke)/2),0):(Ke-Ze)/(d.length-1+Oe)|0;return se=De(Ze+Math.round(wt*Oe/2+(Ke-Ze-(d.length-1+Oe)*wt)/2),wt),ue=0,E={t:"rangeRoundPoints",a:arguments},ye},ye.rangeBands=function(Me,Oe,Ze){arguments.length<2&&(Oe=0),arguments.length<3&&(Ze=Oe);var Ke=Me[1]<Me[0],wt=Me[Ke-0],St=Me[1-Ke],Kt=(St-wt)/(d.length-Oe+2*Ze);return se=De(wt+Kt*Ze,Kt),Ke&&se.reverse(),ue=Kt*(1-Oe),E={t:"rangeBands",a:arguments},ye},ye.rangeRoundBands=function(Me,Oe,Ze){arguments.length<2&&(Oe=0),arguments.length<3&&(Ze=Oe);var Ke=Me[1]<Me[0],wt=Me[Ke-0],St=Me[1-Ke],Kt=Math.floor((St-wt)/(d.length-Oe+2*Ze));return se=De(wt+Math.round((St-wt-(d.length-Oe)*Kt)/2),Kt),Ke&&se.reverse(),ue=Math.round(Kt*(1-Oe)),E={t:"rangeRoundBands",a:arguments},ye},ye.rangeBand=function(){return ue},ye.rangeExtent=function(){return sh(E.a[0])},ye.copy=function(){return O1(d,E)},ye.domain(d)}h.scale.category10=function(){return h.scale.ordinal().range(kT)},h.scale.category20=function(){return h.scale.ordinal().range(MT)},h.scale.category20b=function(){return h.scale.ordinal().range(TT)},h.scale.category20c=function(){return h.scale.ordinal().range(AT)};var kT=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ft),MT=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ft),TT=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ft),AT=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ft);h.scale.quantile=function(){return B1([],[])};function B1(d,E){var O;function se(){var ye=0,De=E.length;for(O=[];++ye<De;)O[ye-1]=h.quantile(d,ye/De);return ue}function ue(ye){if(!isNaN(ye=+ye))return E[h.bisect(O,ye)]}return ue.domain=function(ye){return arguments.length?(d=ye.map(D).filter(M).sort(k),se()):d},ue.range=function(ye){return arguments.length?(E=ye,se()):E},ue.quantiles=function(){return O},ue.invertExtent=function(ye){return ye=E.indexOf(ye),ye<0?[NaN,NaN]:[ye>0?O[ye-1]:d[0],ye<O.length?O[ye]:d[d.length-1]]},ue.copy=function(){return B1(d,E)},se()}h.scale.quantize=function(){return H1(0,1,[0,1])};function H1(d,E,O){var se,ue;function ye(Me){return O[Math.max(0,Math.min(ue,Math.floor(se*(Me-d))))]}function De(){return se=O.length/(E-d),ue=O.length-1,ye}return ye.domain=function(Me){return arguments.length?(d=+Me[0],E=+Me[Me.length-1],De()):[d,E]},ye.range=function(Me){return arguments.length?(O=Me,De()):O},ye.invertExtent=function(Me){return Me=O.indexOf(Me),Me=Me<0?NaN:Me/se+d,[Me,Me+1/se]},ye.copy=function(){return H1(d,E,O)},De()}h.scale.threshold=function(){return W1([.5],[0,1])};function W1(d,E){function O(se){if(se<=se)return E[h.bisect(d,se)]}return O.domain=function(se){return arguments.length?(d=se,O):d},O.range=function(se){return arguments.length?(E=se,O):E},O.invertExtent=function(se){return se=E.indexOf(se),[d[se-1],d[se]]},O.copy=function(){return W1(d,E)},O}h.scale.identity=function(){return q1([0,1])};function q1(d){function E(O){return+O}return E.invert=E,E.domain=E.range=function(O){return arguments.length?(d=O.map(E),E):d},E.ticks=function(O){return Qm(d,O)},E.tickFormat=function(O,se){return d3_scale_linearTickFormat(d,O,se)},E.copy=function(){return q1(d)},E}h.svg={};function CT(){return 0}h.svg.arc=function(){var d=jT,E=LT,O=CT,se=ch,ue=U1,ye=V1,De=ET;function Me(){var Ze=Math.max(0,+d.apply(this,arguments)),Ke=Math.max(0,+E.apply(this,arguments)),wt=ue.apply(this,arguments)-Re,St=ye.apply(this,arguments)-Re,Kt=Math.abs(St-wt),ar=wt>St?0:1;if(Ke<Ze&&(Et=Ke,Ke=Ze,Ze=Et),Kt>=Ne)return Oe(Ke,ar)+(Ze?Oe(Ze,1-ar):"")+"Z";var Et,Wt,Xt,or,cr=0,Zt=0,Cr,Jr,nn,Qr,un,dn,On,vn,Dn=[];if((or=(+De.apply(this,arguments)||0)/2)&&(Xt=se===ch?Math.sqrt(Ze*Ze+Ke*Ke):+se.apply(this,arguments),ar||(Zt*=-1),Ke&&(Zt=Mt(Xt/Ke*Math.sin(or))),Ze&&(cr=Mt(Xt/Ze*Math.sin(or)))),Ke){Cr=Ke*Math.cos(wt+Zt),Jr=Ke*Math.sin(wt+Zt),nn=Ke*Math.cos(St-Zt),Qr=Ke*Math.sin(St-Zt);var ui=Math.abs(St-wt-2*Zt)<=he?0:1;if(Zt&&uh(Cr,Jr,nn,Qr)===ar^ui){var fa=(wt+St)/2;Cr=Ke*Math.cos(fa),Jr=Ke*Math.sin(fa),nn=Qr=null}}else Cr=Jr=0;if(Ze){un=Ze*Math.cos(St-cr),dn=Ze*Math.sin(St-cr),On=Ze*Math.cos(wt+cr),vn=Ze*Math.sin(wt+cr);var wi=Math.abs(wt-St+2*cr)<=he?0:1;if(cr&&uh(un,dn,On,vn)===1-ar^wi){var Zr=(wt+St)/2;un=Ze*Math.cos(Zr),dn=Ze*Math.sin(Zr),On=vn=null}}else un=dn=0;if(Kt>Ye&&(Et=Math.min(Math.abs(Ke-Ze)/2,+O.apply(this,arguments)))>.001){Wt=Ze<Ke^ar?0:1;var Bn=Et,$n=Et;if(Kt<he){var di=On==null?[un,dn]:nn==null?[Cr,Jr]:Yi([Cr,Jr],[On,vn],[nn,Qr],[un,dn]),Qi=Cr-di[0],Aa=Jr-di[1],qa=nn-di[0],us=Qr-di[1],Ms=1/Math.sin(Math.acos((Qi*qa+Aa*us)/(Math.sqrt(Qi*Qi+Aa*Aa)*Math.sqrt(qa*qa+us*us)))/2),ds=Math.sqrt(di[0]*di[0]+di[1]*di[1]);$n=Math.min(Et,(Ze-ds)/(Ms-1)),Bn=Math.min(Et,(Ke-ds)/(Ms+1))}if(nn!=null){var zs=dh(On==null?[un,dn]:[On,vn],[Cr,Jr],Ke,Bn,ar),Ka=dh([nn,Qr],[un,dn],Ke,Bn,ar);Et===Bn?Dn.push("M",zs[0],"A",Bn,",",Bn," 0 0,",Wt," ",zs[1],"A",Ke,",",Ke," 0 ",1-ar^uh(zs[1][0],zs[1][1],Ka[1][0],Ka[1][1]),",",ar," ",Ka[1],"A",Bn,",",Bn," 0 0,",Wt," ",Ka[0]):Dn.push("M",zs[0],"A",Bn,",",Bn," 0 1,",Wt," ",Ka[0])}else Dn.push("M",Cr,",",Jr);if(On!=null){var Fs=dh([Cr,Jr],[On,vn],Ze,-$n,ar),_c=dh([un,dn],nn==null?[Cr,Jr]:[nn,Qr],Ze,-$n,ar);Et===$n?Dn.push("L",_c[0],"A",$n,",",$n," 0 0,",Wt," ",_c[1],"A",Ze,",",Ze," 0 ",ar^uh(_c[1][0],_c[1][1],Fs[1][0],Fs[1][1]),",",1-ar," ",Fs[1],"A",$n,",",$n," 0 0,",Wt," ",Fs[0]):Dn.push("L",_c[0],"A",$n,",",$n," 0 0,",Wt," ",Fs[0])}else Dn.push("L",un,",",dn)}else Dn.push("M",Cr,",",Jr),nn!=null&&Dn.push("A",Ke,",",Ke," 0 ",ui,",",ar," ",nn,",",Qr),Dn.push("L",un,",",dn),On!=null&&Dn.push("A",Ze,",",Ze," 0 ",wi,",",1-ar," ",On,",",vn);return Dn.push("Z"),Dn.join("")}function Oe(Ze,Ke){return"M0,"+Ze+"A"+Ze+","+Ze+" 0 1,"+Ke+" 0,"+-Ze+"A"+Ze+","+Ze+" 0 1,"+Ke+" 0,"+Ze}return Me.innerRadius=function(Ze){return arguments.length?(d=tr(Ze),Me):d},Me.outerRadius=function(Ze){return arguments.length?(E=tr(Ze),Me):E},Me.cornerRadius=function(Ze){return arguments.length?(O=tr(Ze),Me):O},Me.padRadius=function(Ze){return arguments.length?(se=Ze==ch?ch:tr(Ze),Me):se},Me.startAngle=function(Ze){return arguments.length?(ue=tr(Ze),Me):ue},Me.endAngle=function(Ze){return arguments.length?(ye=tr(Ze),Me):ye},Me.padAngle=function(Ze){return arguments.length?(De=tr(Ze),Me):De},Me.centroid=function(){var Ze=(+d.apply(this,arguments)+ +E.apply(this,arguments))/2,Ke=(+ue.apply(this,arguments)+ +ye.apply(this,arguments))/2-Re;return[Math.cos(Ke)*Ze,Math.sin(Ke)*Ze]},Me};var ch="auto";function jT(d){return d.innerRadius}function LT(d){return d.outerRadius}function U1(d){return d.startAngle}function V1(d){return d.endAngle}function ET(d){return d&&d.padAngle}function uh(d,E,O,se){return(d-O)*E-(E-se)*d>0?0:1}function dh(d,E,O,se,ue){var ye=d[0]-E[0],De=d[1]-E[1],Me=(ue?se:-se)/Math.sqrt(ye*ye+De*De),Oe=Me*De,Ze=-Me*ye,Ke=d[0]+Oe,wt=d[1]+Ze,St=E[0]+Oe,Kt=E[1]+Ze,ar=(Ke+St)/2,Et=(wt+Kt)/2,Wt=St-Ke,Xt=Kt-wt,or=Wt*Wt+Xt*Xt,cr=O-se,Zt=Ke*Kt-St*wt,Cr=(Xt<0?-1:1)*Math.sqrt(Math.max(0,cr*cr*or-Zt*Zt)),Jr=(Zt*Xt-Wt*Cr)/or,nn=(-Zt*Wt-Xt*Cr)/or,Qr=(Zt*Xt+Wt*Cr)/or,un=(-Zt*Wt+Xt*Cr)/or,dn=Jr-ar,On=nn-Et,vn=Qr-ar,Dn=un-Et;return dn*dn+On*On>vn*vn+Dn*Dn&&(Jr=Qr,nn=un),[[Jr-Oe,nn-Ze],[Jr*O/cr,nn*O/cr]]}function $1(){return!0}function Y1(d){var E=$i,O=da,se=$1,ue=_o,ye=ue.key,De=.7;function Me(Oe){var Ze=[],Ke=[],wt=-1,St=Oe.length,Kt,ar=tr(E),Et=tr(O);function Wt(){Ze.push("M",ue(d(Ke),De))}for(;++wt<St;)se.call(this,Kt=Oe[wt],wt)?Ke.push([+ar.call(this,Kt,wt),+Et.call(this,Kt,wt)]):Ke.length&&(Wt(),Ke=[]);return Ke.length&&Wt(),Ze.length?Ze.join(""):null}return Me.x=function(Oe){return arguments.length?(E=Oe,Me):E},Me.y=function(Oe){return arguments.length?(O=Oe,Me):O},Me.defined=function(Oe){return arguments.length?(se=Oe,Me):se},Me.interpolate=function(Oe){return arguments.length?(typeof Oe=="function"?ye=ue=Oe:ye=(ue=ev.get(Oe)||_o).key,Me):ye},Me.tension=function(Oe){return arguments.length?(De=Oe,Me):De},Me}h.svg.line=function(){return Y1(ne)};var ev=h.map({linear:_o,"linear-closed":G1,step:DT,"step-before":tv,"step-after":rv,basis:X1,"basis-open":zT,"basis-closed":FT,bundle:IT,cardinal:NT,"cardinal-open":RT,"cardinal-closed":PT,monotone:HT});ev.forEach(function(d,E){E.key=d,E.closed=/-closed$/.test(d)});function _o(d){return d.length>1?d.join("L"):d+"Z"}function G1(d){return d.join("L")+"Z"}function DT(d){for(var E=0,O=d.length,se=d[0],ue=[se[0],",",se[1]];++E<O;)ue.push("H",(se[0]+(se=d[E])[0])/2,"V",se[1]);return O>1&&ue.push("H",se[0]),ue.join("")}function tv(d){for(var E=0,O=d.length,se=d[0],ue=[se[0],",",se[1]];++E<O;)ue.push("V",(se=d[E])[1],"H",se[0]);return ue.join("")}function rv(d){for(var E=0,O=d.length,se=d[0],ue=[se[0],",",se[1]];++E<O;)ue.push("H",(se=d[E])[0],"V",se[1]);return ue.join("")}function RT(d,E){return d.length<4?_o(d):d[1]+fh(d.slice(1,-1),nv(d,E))}function PT(d,E){return d.length<3?G1(d):d[0]+fh((d.push(d[0]),d),nv([d[d.length-2]].concat(d,[d[1]]),E))}function NT(d,E){return d.length<3?_o(d):d[0]+fh(d,nv(d,E))}function fh(d,E){if(E.length<1||d.length!=E.length&&d.length!=E.length+2)return _o(d);var O=d.length!=E.length,se="",ue=d[0],ye=d[1],De=E[0],Me=De,Oe=1;if(O&&(se+="Q"+(ye[0]-De[0]*2/3)+","+(ye[1]-De[1]*2/3)+","+ye[0]+","+ye[1],ue=d[1],Oe=2),E.length>1){Me=E[1],ye=d[Oe],Oe++,se+="C"+(ue[0]+De[0])+","+(ue[1]+De[1])+","+(ye[0]-Me[0])+","+(ye[1]-Me[1])+","+ye[0]+","+ye[1];for(var Ze=2;Ze<E.length;Ze++,Oe++)ye=d[Oe],Me=E[Ze],se+="S"+(ye[0]-Me[0])+","+(ye[1]-Me[1])+","+ye[0]+","+ye[1]}if(O){var Ke=d[Oe];se+="Q"+(ye[0]+Me[0]*2/3)+","+(ye[1]+Me[1]*2/3)+","+Ke[0]+","+Ke[1]}return se}function nv(d,E){for(var O=[],se=(1-E)/2,ue,ye=d[0],De=d[1],Me=1,Oe=d.length;++Me<Oe;)ue=ye,ye=De,De=d[Me],O.push([se*(De[0]-ue[0]),se*(De[1]-ue[1])]);return O}function X1(d){if(d.length<3)return _o(d);var E=1,O=d.length,se=d[0],ue=se[0],ye=se[1],De=[ue,ue,ue,(se=d[1])[0]],Me=[ye,ye,ye,se[1]],Oe=[ue,",",ye,"L",lo(Dl,De),",",lo(Dl,Me)];for(d.push(d[O-1]);++E<=O;)se=d[E],De.shift(),De.push(se[0]),Me.shift(),Me.push(se[1]),iv(Oe,De,Me);return d.pop(),Oe.push("L",se),Oe.join("")}function zT(d){if(d.length<4)return _o(d);for(var E=[],O=-1,se=d.length,ue,ye=[0],De=[0];++O<3;)ue=d[O],ye.push(ue[0]),De.push(ue[1]);for(E.push(lo(Dl,ye)+","+lo(Dl,De)),--O;++O<se;)ue=d[O],ye.shift(),ye.push(ue[0]),De.shift(),De.push(ue[1]),iv(E,ye,De);return E.join("")}function FT(d){for(var E,O=-1,se=d.length,ue=se+4,ye,De=[],Me=[];++O<4;)ye=d[O%se],De.push(ye[0]),Me.push(ye[1]);for(E=[lo(Dl,De),",",lo(Dl,Me)],--O;++O<ue;)ye=d[O%se],De.shift(),De.push(ye[0]),Me.shift(),Me.push(ye[1]),iv(E,De,Me);return E.join("")}function IT(d,E){var O=d.length-1;if(O)for(var se=d[0][0],ue=d[0][1],ye=d[O][0]-se,De=d[O][1]-ue,Me=-1,Oe,Ze;++Me<=O;)Oe=d[Me],Ze=Me/O,Oe[0]=E*Oe[0]+(1-E)*(se+Ze*ye),Oe[1]=E*Oe[1]+(1-E)*(ue+Ze*De);return X1(d)}function lo(d,E){return d[0]*E[0]+d[1]*E[1]+d[2]*E[2]+d[3]*E[3]}var Z1=[0,2/3,1/3,0],K1=[0,1/3,2/3,0],Dl=[0,1/6,2/3,1/6];function iv(d,E,O){d.push("C",lo(Z1,E),",",lo(Z1,O),",",lo(K1,E),",",lo(K1,O),",",lo(Dl,E),",",lo(Dl,O))}function av(d,E){return(E[1]-d[1])/(E[0]-d[0])}function OT(d){for(var E=0,O=d.length-1,se=[],ue=d[0],ye=d[1],De=se[0]=av(ue,ye);++E<O;)se[E]=(De+(De=av(ue=ye,ye=d[E+1])))/2;return se[E]=De,se}function BT(d){for(var E=[],O,se,ue,ye,De=OT(d),Me=-1,Oe=d.length-1;++Me<Oe;)O=av(d[Me],d[Me+1]),b(O)<Ye?De[Me]=De[Me+1]=0:(se=De[Me]/O,ue=De[Me+1]/O,ye=se*se+ue*ue,ye>9&&(ye=O*3/Math.sqrt(ye),De[Me]=ye*se,De[Me+1]=ye*ue));for(Me=-1;++Me<=Oe;)ye=(d[Math.min(Oe,Me+1)][0]-d[Math.max(0,Me-1)][0])/(6*(1+De[Me]*De[Me])),E.push([ye||0,De[Me]*ye||0]);return E}function HT(d){return d.length<3?_o(d):d[0]+fh(d,BT(d))}h.svg.line.radial=function(){var d=Y1(J1);return d.radius=d.x,delete d.x,d.angle=d.y,delete d.y,d};function J1(d){for(var E,O=-1,se=d.length,ue,ye;++O<se;)E=d[O],ue=E[0],ye=E[1]-Re,E[0]=ue*Math.cos(ye),E[1]=ue*Math.sin(ye);return d}function Q1(d){var E=$i,O=$i,se=0,ue=da,ye=$1,De=_o,Me=De.key,Oe=De,Ze="L",Ke=.7;function wt(St){var Kt=[],ar=[],Et=[],Wt=-1,Xt=St.length,or,cr=tr(E),Zt=tr(se),Cr=E===O?function(){return nn}:tr(O),Jr=se===ue?function(){return Qr}:tr(ue),nn,Qr;function un(){Kt.push("M",De(d(Et),Ke),Ze,Oe(d(ar.reverse()),Ke),"Z")}for(;++Wt<Xt;)ye.call(this,or=St[Wt],Wt)?(ar.push([nn=+cr.call(this,or,Wt),Qr=+Zt.call(this,or,Wt)]),Et.push([+Cr.call(this,or,Wt),+Jr.call(this,or,Wt)])):ar.length&&(un(),ar=[],Et=[]);return ar.length&&un(),Kt.length?Kt.join(""):null}return wt.x=function(St){return arguments.length?(E=O=St,wt):O},wt.x0=function(St){return arguments.length?(E=St,wt):E},wt.x1=function(St){return arguments.length?(O=St,wt):O},wt.y=function(St){return arguments.length?(se=ue=St,wt):ue},wt.y0=function(St){return arguments.length?(se=St,wt):se},wt.y1=function(St){return arguments.length?(ue=St,wt):ue},wt.defined=function(St){return arguments.length?(ye=St,wt):ye},wt.interpolate=function(St){return arguments.length?(typeof St=="function"?Me=De=St:Me=(De=ev.get(St)||_o).key,Oe=De.reverse||De,Ze=De.closed?"M":"L",wt):Me},wt.tension=function(St){return arguments.length?(Ke=St,wt):Ke},wt}tv.reverse=rv,rv.reverse=tv,h.svg.area=function(){return Q1(ne)},h.svg.area.radial=function(){var d=Q1(J1);return d.radius=d.x,delete d.x,d.innerRadius=d.x0,delete d.x0,d.outerRadius=d.x1,delete d.x1,d.angle=d.y,delete d.y,d.startAngle=d.y0,delete d.y0,d.endAngle=d.y1,delete d.y1,d};function ex(d){return d.source}function tx(d){return d.target}h.svg.chord=function(){var d=ex,E=tx,O=WT,se=U1,ue=V1;function ye(Ke,wt){var St=De(this,d,Ke,wt),Kt=De(this,E,Ke,wt);return"M"+St.p0+Oe(St.r,St.p1,St.a1-St.a0)+(Me(St,Kt)?Ze(St.r,St.p1,St.r,St.p0):Ze(St.r,St.p1,Kt.r,Kt.p0)+Oe(Kt.r,Kt.p1,Kt.a1-Kt.a0)+Ze(Kt.r,Kt.p1,St.r,St.p0))+"Z"}function De(Ke,wt,St,Kt){var ar=wt.call(Ke,St,Kt),Et=O.call(Ke,ar,Kt),Wt=se.call(Ke,ar,Kt)-Re,Xt=ue.call(Ke,ar,Kt)-Re;return{r:Et,a0:Wt,a1:Xt,p0:[Et*Math.cos(Wt),Et*Math.sin(Wt)],p1:[Et*Math.cos(Xt),Et*Math.sin(Xt)]}}function Me(Ke,wt){return Ke.a0==wt.a0&&Ke.a1==wt.a1}function Oe(Ke,wt,St){return"A"+Ke+","+Ke+" 0 "+ +(St>he)+",1 "+wt}function Ze(Ke,wt,St,Kt){return"Q 0,0 "+Kt}return ye.radius=function(Ke){return arguments.length?(O=tr(Ke),ye):O},ye.source=function(Ke){return arguments.length?(d=tr(Ke),ye):d},ye.target=function(Ke){return arguments.length?(E=tr(Ke),ye):E},ye.startAngle=function(Ke){return arguments.length?(se=tr(Ke),ye):se},ye.endAngle=function(Ke){return arguments.length?(ue=tr(Ke),ye):ue},ye};function WT(d){return d.radius}h.svg.diagonal=function(){var d=ex,E=tx,O=rx;function se(ue,ye){var De=d.call(this,ue,ye),Me=E.call(this,ue,ye),Oe=(De.y+Me.y)/2,Ze=[De,{x:De.x,y:Oe},{x:Me.x,y:Oe},Me];return Ze=Ze.map(O),"M"+Ze[0]+"C"+Ze[1]+" "+Ze[2]+" "+Ze[3]}return se.source=function(ue){return arguments.length?(d=tr(ue),se):d},se.target=function(ue){return arguments.length?(E=tr(ue),se):E},se.projection=function(ue){return arguments.length?(O=ue,se):O},se};function rx(d){return[d.x,d.y]}h.svg.diagonal.radial=function(){var d=h.svg.diagonal(),E=rx,O=d.projection;return d.projection=function(se){return arguments.length?O(qT(E=se)):E},d};function qT(d){return function(){var E=d.apply(this,arguments),O=E[0],se=E[1]-Re;return[O*Math.cos(se),O*Math.sin(se)]}}h.svg.symbol=function(){var d=VT,E=UT;function O(se,ue){return(ix.get(d.call(this,se,ue))||nx)(E.call(this,se,ue))}return O.type=function(se){return arguments.length?(d=tr(se),O):d},O.size=function(se){return arguments.length?(E=tr(se),O):E},O};function UT(){return 64}function VT(){return"circle"}function nx(d){var E=Math.sqrt(d/he);return"M0,"+E+"A"+E+","+E+" 0 1,1 0,"+-E+"A"+E+","+E+" 0 1,1 0,"+E+"Z"}var ix=h.map({circle:nx,cross:function(d){var E=Math.sqrt(d/5)/2;return"M"+-3*E+","+-E+"H"+-E+"V"+-3*E+"H"+E+"V"+-E+"H"+3*E+"V"+E+"H"+E+"V"+3*E+"H"+-E+"V"+E+"H"+-3*E+"Z"},diamond:function(d){var E=Math.sqrt(d/(2*ax)),O=E*ax;return"M0,"+-E+"L"+O+",0 0,"+E+" "+-O+",0Z"},square:function(d){var E=Math.sqrt(d)/2;return"M"+-E+","+-E+"L"+E+","+-E+" "+E+","+E+" "+-E+","+E+"Z"},"triangle-down":function(d){var E=Math.sqrt(d/hh),O=E*hh/2;return"M0,"+O+"L"+E+","+-O+" "+-E+","+-O+"Z"},"triangle-up":function(d){var E=Math.sqrt(d/hh),O=E*hh/2;return"M0,"+-O+"L"+E+","+O+" "+-E+","+O+"Z"}});h.svg.symbolTypes=ix.keys();var hh=Math.sqrt(3),ax=Math.tan(30*nt);re.transition=function(d){for(var E=wc||++ox,O=ov(d),se=[],ue,ye,De=mh||{time:Date.now(),ease:kM,delay:0,duration:250},Me=-1,Oe=this.length;++Me<Oe;){se.push(ue=[]);for(var Ze=this[Me],Ke=-1,wt=Ze.length;++Ke<wt;)(ye=Ze[Ke])&&vh(ye,Ke,O,E,De),ue.push(ye)}return md(se,O,E)},re.interrupt=function(d){return this.each(d==null?ph:sx(ov(d)))};var ph=sx(ov());function sx(d){return function(){var E,O,se;(E=this[d])&&(se=E[O=E.active])&&(se.timer.c=null,se.timer.t=NaN,--E.count?delete E[O]:delete this[d],E.active+=.5,se.event&&se.event.interrupt.call(this,this.__data__,se.index))}}function md(d,E,O){return te(d,Ta),d.namespace=E,d.id=O,d}var Ta=[],ox=0,wc,mh;Ta.call=re.call,Ta.empty=re.empty,Ta.node=re.node,Ta.size=re.size,h.transition=function(d,E){return d&&d.transition?wc?d.transition(E):d:h.selection().transition(d)},h.transition.prototype=Ta,Ta.select=function(d){var E=this.id,O=this.namespace,se=[],ue,ye,De;d=R(d);for(var Me=-1,Oe=this.length;++Me<Oe;){se.push(ue=[]);for(var Ze=this[Me],Ke=-1,wt=Ze.length;++Ke<wt;)(De=Ze[Ke])&&(ye=d.call(De,De.__data__,Ke,Me))?("__data__"in De&&(ye.__data__=De.__data__),vh(ye,Ke,O,E,De[O][E]),ue.push(ye)):ue.push(null)}return md(se,O,E)},Ta.selectAll=function(d){var E=this.id,O=this.namespace,se=[],ue,ye,De,Me,Oe;d=B(d);for(var Ze=-1,Ke=this.length;++Ze<Ke;)for(var wt=this[Ze],St=-1,Kt=wt.length;++St<Kt;)if(De=wt[St]){Oe=De[O][E],ye=d.call(De,De.__data__,St,Ze),se.push(ue=[]);for(var ar=-1,Et=ye.length;++ar<Et;)(Me=ye[ar])&&vh(Me,ar,O,E,Oe),ue.push(Me)}return md(se,O,E)},Ta.filter=function(d){var E=[],O,se,ue;typeof d!="function"&&(d=Se(d));for(var ye=0,De=this.length;ye<De;ye++){E.push(O=[]);for(var se=this[ye],Me=0,Oe=se.length;Me<Oe;Me++)(ue=se[Me])&&d.call(ue,ue.__data__,Me,ye)&&O.push(ue)}return md(E,this.namespace,this.id)},Ta.tween=function(d,E){var O=this.id,se=this.namespace;return arguments.length<2?this.node()[se][O].tween.get(d):rt(this,E==null?function(ue){ue[se][O].tween.remove(d)}:function(ue){ue[se][O].tween.set(d,E)})};function sv(d,E,O,se){var ue=d.id,ye=d.namespace;return rt(d,typeof O=="function"?function(De,Me,Oe){De[ye][ue].tween.set(E,se(O.call(De,De.__data__,Me,Oe)))}:(O=se(O),function(De){De[ye][ue].tween.set(E,O)}))}Ta.attr=function(d,E){if(arguments.length<2){for(E in d)this.attr(E,d[E]);return this}var O=d=="transform"?x1:bc,se=h.ns.qualify(d);function ue(){this.removeAttribute(se)}function ye(){this.removeAttributeNS(se.space,se.local)}function De(Oe){return Oe==null?ue:(Oe+="",function(){var Ze=this.getAttribute(se),Ke;return Ze!==Oe&&(Ke=O(Ze,Oe),function(wt){this.setAttribute(se,Ke(wt))})})}function Me(Oe){return Oe==null?ye:(Oe+="",function(){var Ze=this.getAttributeNS(se.space,se.local),Ke;return Ze!==Oe&&(Ke=O(Ze,Oe),function(wt){this.setAttributeNS(se.space,se.local,Ke(wt))})})}return sv(this,"attr."+d,E,se.local?Me:De)},Ta.attrTween=function(d,E){var O=h.ns.qualify(d);function se(ye,De){var Me=E.call(this,ye,De,this.getAttribute(O));return Me&&function(Oe){this.setAttribute(O,Me(Oe))}}function ue(ye,De){var Me=E.call(this,ye,De,this.getAttributeNS(O.space,O.local));return Me&&function(Oe){this.setAttributeNS(O.space,O.local,Me(Oe))}}return this.tween("attr."+d,O.local?ue:se)},Ta.style=function(d,E,O){var se=arguments.length;if(se<3){if(typeof d!="string"){se<2&&(E="");for(O in d)this.style(O,d[O],E);return this}O=""}function ue(){this.style.removeProperty(d)}function ye(De){return De==null?ue:(De+="",function(){var Me=m(this).getComputedStyle(this,null).getPropertyValue(d),Oe;return Me!==De&&(Oe=bc(Me,De),function(Ze){this.style.setProperty(d,Oe(Ze),O)})})}return sv(this,"style."+d,E,ye)},Ta.styleTween=function(d,E,O){arguments.length<3&&(O="");function se(ue,ye){var De=E.call(this,ue,ye,m(this).getComputedStyle(this,null).getPropertyValue(d));return De&&function(Me){this.style.setProperty(d,De(Me),O)}}return this.tween("style."+d,se)},Ta.text=function(d){return sv(this,"text",d,$T)};function $T(d){return d==null&&(d=""),function(){this.textContent=d}}Ta.remove=function(){var d=this.namespace;return this.each("end.transition",function(){var E;this[d].count<2&&(E=this.parentNode)&&E.removeChild(this)})},Ta.ease=function(d){var E=this.id,O=this.namespace;return arguments.length<1?this.node()[O][E].ease:(typeof d!="function"&&(d=h.ease.apply(h,arguments)),rt(this,function(se){se[O][E].ease=d}))},Ta.delay=function(d){var E=this.id,O=this.namespace;return arguments.length<1?this.node()[O][E].delay:rt(this,typeof d=="function"?function(se,ue,ye){se[O][E].delay=+d.call(se,se.__data__,ue,ye)}:(d=+d,function(se){se[O][E].delay=d}))},Ta.duration=function(d){var E=this.id,O=this.namespace;return arguments.length<1?this.node()[O][E].duration:rt(this,typeof d=="function"?function(se,ue,ye){se[O][E].duration=Math.max(1,d.call(se,se.__data__,ue,ye))}:(d=Math.max(1,d),function(se){se[O][E].duration=d}))},Ta.each=function(d,E){var O=this.id,se=this.namespace;if(arguments.length<2){var ue=mh,ye=wc;try{wc=O,rt(this,function(De,Me,Oe){mh=De[se][O],d.call(De,De.__data__,Me,Oe)})}finally{mh=ue,wc=ye}}else rt(this,function(De){var Me=De[se][O];(Me.event||(Me.event=h.dispatch("start","end","interrupt"))).on(d,E)});return this},Ta.transition=function(){for(var d=this.id,E=++ox,O=this.namespace,se=[],ue,ye,De,Me,Oe=0,Ze=this.length;Oe<Ze;Oe++){se.push(ue=[]);for(var ye=this[Oe],Ke=0,wt=ye.length;Ke<wt;Ke++)(De=ye[Ke])&&(Me=De[O][d],vh(De,Ke,O,E,{time:Me.time,ease:Me.ease,delay:Me.delay+Me.duration,duration:Me.duration})),ue.push(De)}return md(se,O,E)};function ov(d){return d==null?"__transition__":"__transition_"+d+"__"}function vh(d,E,O,se,ue){var ye=d[O]||(d[O]={active:0,count:0}),De=ye[se],Me,Oe,Ze,Ke,wt;function St(Et){var Wt=De.delay;if(Oe.t=Wt+Me,Wt<=Et)return Kt(Et-Wt);Oe.c=Kt}function Kt(Et){var Wt=ye.active,Xt=ye[Wt];Xt&&(Xt.timer.c=null,Xt.timer.t=NaN,--ye.count,delete ye[Wt],Xt.event&&Xt.event.interrupt.call(d,d.__data__,Xt.index));for(var or in ye)if(+or<se){var cr=ye[or];cr.timer.c=null,cr.timer.t=NaN,--ye.count,delete ye[or]}Oe.c=ar,bn(function(){return Oe.c&&ar(Et||1)&&(Oe.c=null,Oe.t=NaN),1},0,Me),ye.active=se,De.event&&De.event.start.call(d,d.__data__,E),wt=[],De.tween.forEach(function(Zt,Cr){(Cr=Cr.call(d,d.__data__,E))&&wt.push(Cr)}),Ke=De.ease,Ze=De.duration}function ar(Et){for(var Wt=Et/Ze,Xt=Ke(Wt),or=wt.length;or>0;)wt[--or].call(d,Xt);if(Wt>=1)return De.event&&De.event.end.call(d,d.__data__,E),--ye.count?delete ye[se]:delete d[O],1}De||(Me=ue.time,Oe=bn(St,0,Me),De=ye[se]={tween:new F,time:Me,timer:Oe,delay:ue.delay,duration:ue.duration,ease:ue.ease,index:E},ue=null,++ye.count)}h.svg.axis=function(){var d=h.scale.linear(),E=lx,O=6,se=6,ue=3,ye=[10],De=null,Me;function Oe(Ze){Ze.each(function(){var Ke=h.select(this),wt=this.__chart__||d,St=this.__chart__=d.copy(),Kt=De??(St.ticks?St.ticks.apply(St,ye):St.domain()),ar=Me??(St.tickFormat?St.tickFormat.apply(St,ye):ne),Et=Ke.selectAll(".tick").data(Kt,St),Wt=Et.enter().insert("g",".domain").attr("class","tick").style("opacity",Ye),Xt=h.transition(Et.exit()).style("opacity",Ye).remove(),or=h.transition(Et.order()).style("opacity",1),cr=Math.max(O,0)+ue,Zt,Cr=oh(St),Jr=Ke.selectAll(".domain").data([0]),nn=(Jr.enter().append("path").attr("class","domain"),h.transition(Jr));Wt.append("line"),Wt.append("text");var Qr=Wt.select("line"),un=or.select("line"),dn=Et.select("text").text(ar),On=Wt.select("text"),vn=or.select("text"),Dn=E==="top"||E==="left"?-1:1,ui,fa,wi,Zr;if(E==="bottom"||E==="top"?(Zt=GT,ui="x",wi="y",fa="x2",Zr="y2",dn.attr("dy",Dn<0?"0em":".71em").style("text-anchor","middle"),nn.attr("d","M"+Cr[0]+","+Dn*se+"V0H"+Cr[1]+"V"+Dn*se)):(Zt=XT,ui="y",wi="x",fa="y2",Zr="x2",dn.attr("dy",".32em").style("text-anchor",Dn<0?"end":"start"),nn.attr("d","M"+Dn*se+","+Cr[0]+"H0V"+Cr[1]+"H"+Dn*se)),Qr.attr(Zr,Dn*O),On.attr(wi,Dn*cr),un.attr(fa,0).attr(Zr,Dn*O),vn.attr(ui,0).attr(wi,Dn*cr),St.rangeBand){var Bn=St,$n=Bn.rangeBand()/2;wt=St=function(di){return Bn(di)+$n}}else wt.rangeBand?wt=St:Xt.call(Zt,St,wt);Wt.call(Zt,wt,St),or.call(Zt,St,St)})}return Oe.scale=function(Ze){return arguments.length?(d=Ze,Oe):d},Oe.orient=function(Ze){return arguments.length?(E=Ze in YT?Ze+"":lx,Oe):E},Oe.ticks=function(){return arguments.length?(ye=u(arguments),Oe):ye},Oe.tickValues=function(Ze){return arguments.length?(De=Ze,Oe):De},Oe.tickFormat=function(Ze){return arguments.length?(Me=Ze,Oe):Me},Oe.tickSize=function(Ze){var Ke=arguments.length;return Ke?(O=+Ze,se=+arguments[Ke-1],Oe):O},Oe.innerTickSize=function(Ze){return arguments.length?(O=+Ze,Oe):O},Oe.outerTickSize=function(Ze){return arguments.length?(se=+Ze,Oe):se},Oe.tickPadding=function(Ze){return arguments.length?(ue=+Ze,Oe):ue},Oe.tickSubdivide=function(){return arguments.length&&Oe},Oe};var lx="bottom",YT={top:1,right:1,bottom:1,left:1};function GT(d,E,O){d.attr("transform",function(se){var ue=E(se);return"translate("+(isFinite(ue)?ue:O(se))+",0)"})}function XT(d,E,O){d.attr("transform",function(se){var ue=E(se);return"translate(0,"+(isFinite(ue)?ue:O(se))+")"})}h.svg.brush=function(){var d=Ae(Ke,"brushstart","brush","brushend"),E=null,O=null,se=[0,0],ue=[0,0],ye,De,Me=!0,Oe=!0,Ze=lv[0];function Ke(Et){Et.each(function(){var Wt=h.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",ar).on("touchstart.brush",ar),Xt=Wt.selectAll(".background").data([0]);Xt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Wt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var or=Wt.selectAll(".resize").data(Ze,ne);or.exit().remove(),or.enter().append("g").attr("class",function(Jr){return"resize "+Jr}).style("cursor",function(Jr){return ZT[Jr]}).append("rect").attr("x",function(Jr){return/[ew]$/.test(Jr)?-3:null}).attr("y",function(Jr){return/^[ns]/.test(Jr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),or.style("display",Ke.empty()?"none":null);var cr=h.transition(Wt),Zt=h.transition(Xt),Cr;E&&(Cr=oh(E),Zt.attr("x",Cr[0]).attr("width",Cr[1]-Cr[0]),St(cr)),O&&(Cr=oh(O),Zt.attr("y",Cr[0]).attr("height",Cr[1]-Cr[0]),Kt(cr)),wt(cr)})}Ke.event=function(Et){Et.each(function(){var Wt=d.of(this,arguments),Xt={x:se,y:ue,i:ye,j:De},or=this.__chart__||Xt;this.__chart__=Xt,wc?h.select(this).transition().each("start.brush",function(){ye=or.i,De=or.j,se=or.x,ue=or.y,Wt({type:"brushstart"})}).tween("brush:brush",function(){var cr=ah(se,Xt.x),Zt=ah(ue,Xt.y);return ye=De=null,function(Cr){se=Xt.x=cr(Cr),ue=Xt.y=Zt(Cr),Wt({type:"brush",mode:"resize"})}}).each("end.brush",function(){ye=Xt.i,De=Xt.j,Wt({type:"brush",mode:"resize"}),Wt({type:"brushend"})}):(Wt({type:"brushstart"}),Wt({type:"brush",mode:"resize"}),Wt({type:"brushend"}))})};function wt(Et){Et.selectAll(".resize").attr("transform",function(Wt){return"translate("+se[+/e$/.test(Wt)]+","+ue[+/^s/.test(Wt)]+")"})}function St(Et){Et.select(".extent").attr("x",se[0]),Et.selectAll(".extent,.n>rect,.s>rect").attr("width",se[1]-se[0])}function Kt(Et){Et.select(".extent").attr("y",ue[0]),Et.selectAll(".extent,.e>rect,.w>rect").attr("height",ue[1]-ue[0])}function ar(){var Et=this,Wt=h.select(h.event.target),Xt=d.of(Et,arguments),or=h.select(Et),cr=Wt.datum(),Zt=!/^(n|s)$/.test(cr)&&E,Cr=!/^(e|w)$/.test(cr)&&O,Jr=Wt.classed("extent"),nn=pr(Et),Qr,un=h.mouse(Et),dn,On=h.select(m(Et)).on("keydown.brush",ui).on("keyup.brush",fa);if(h.event.changedTouches?On.on("touchmove.brush",wi).on("touchend.brush",Bn):On.on("mousemove.brush",wi).on("mouseup.brush",Bn),or.interrupt().selectAll("*").interrupt(),Jr)un[0]=se[0]-un[0],un[1]=ue[0]-un[1];else if(cr){var vn=+/w$/.test(cr),Dn=+/^n/.test(cr);dn=[se[1-vn]-un[0],ue[1-Dn]-un[1]],un[0]=se[vn],un[1]=ue[Dn]}else h.event.altKey&&(Qr=un.slice());or.style("pointer-events","none").selectAll(".resize").style("display",null),h.select("body").style("cursor",Wt.style("cursor")),Xt({type:"brushstart"}),wi();function ui(){h.event.keyCode==32&&(Jr||(Qr=null,un[0]-=se[1],un[1]-=ue[1],Jr=2),be())}function fa(){h.event.keyCode==32&&Jr==2&&(un[0]+=se[1],un[1]+=ue[1],Jr=0,be())}function wi(){var $n=h.mouse(Et),di=!1;dn&&($n[0]+=dn[0],$n[1]+=dn[1]),Jr||(h.event.altKey?(Qr||(Qr=[(se[0]+se[1])/2,(ue[0]+ue[1])/2]),un[0]=se[+($n[0]<Qr[0])],un[1]=ue[+($n[1]<Qr[1])]):Qr=null),Zt&&Zr($n,E,0)&&(St(or),di=!0),Cr&&Zr($n,O,1)&&(Kt(or),di=!0),di&&(wt(or),Xt({type:"brush",mode:Jr?"move":"resize"}))}function Zr($n,di,Qi){var Aa=oh(di),qa=Aa[0],us=Aa[1],Ms=un[Qi],ds=Qi?ue:se,zs=ds[1]-ds[0],Ka,Fs;if(Jr&&(qa-=Ms,us-=zs+Ms),Ka=(Qi?Oe:Me)?Math.max(qa,Math.min(us,$n[Qi])):$n[Qi],Jr?Fs=(Ka+=Ms)+zs:(Qr&&(Ms=Math.max(qa,Math.min(us,2*Qr[Qi]-Ka))),Ms<Ka?(Fs=Ka,Ka=Ms):Fs=Ms),ds[0]!=Ka||ds[1]!=Fs)return Qi?De=null:ye=null,ds[0]=Ka,ds[1]=Fs,!0}function Bn(){wi(),or.style("pointer-events","all").selectAll(".resize").style("display",Ke.empty()?"none":null),h.select("body").style("cursor",null),On.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),nn(),Xt({type:"brushend"})}}return Ke.x=function(Et){return arguments.length?(E=Et,Ze=lv[!E<<1|!O],Ke):E},Ke.y=function(Et){return arguments.length?(O=Et,Ze=lv[!E<<1|!O],Ke):O},Ke.clamp=function(Et){return arguments.length?(E&&O?(Me=!!Et[0],Oe=!!Et[1]):E?Me=!!Et:O&&(Oe=!!Et),Ke):E&&O?[Me,Oe]:E?Me:O?Oe:null},Ke.extent=function(Et){var Wt,Xt,or,cr,Zt;return arguments.length?(E&&(Wt=Et[0],Xt=Et[1],O&&(Wt=Wt[0],Xt=Xt[0]),ye=[Wt,Xt],E.invert&&(Wt=E(Wt),Xt=E(Xt)),Xt<Wt&&(Zt=Wt,Wt=Xt,Xt=Zt),(Wt!=se[0]||Xt!=se[1])&&(se=[Wt,Xt])),O&&(or=Et[0],cr=Et[1],E&&(or=or[1],cr=cr[1]),De=[or,cr],O.invert&&(or=O(or),cr=O(cr)),cr<or&&(Zt=or,or=cr,cr=Zt),(or!=ue[0]||cr!=ue[1])&&(ue=[or,cr])),Ke):(E&&(ye?(Wt=ye[0],Xt=ye[1]):(Wt=se[0],Xt=se[1],E.invert&&(Wt=E.invert(Wt),Xt=E.invert(Xt)),Xt<Wt&&(Zt=Wt,Wt=Xt,Xt=Zt))),O&&(De?(or=De[0],cr=De[1]):(or=ue[0],cr=ue[1],O.invert&&(or=O.invert(or),cr=O.invert(cr)),cr<or&&(Zt=or,or=cr,cr=Zt))),E&&O?[[Wt,or],[Xt,cr]]:E?[Wt,Xt]:O&&[or,cr])},Ke.clear=function(){return Ke.empty()||(se=[0,0],ue=[0,0],ye=De=null),Ke},Ke.empty=function(){return!!E&&se[0]==se[1]||!!O&&ue[0]==ue[1]},h.rebind(Ke,d,"on")};var ZT={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},lv=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];h.text=ur(function(d){return d.responseText}),h.json=function(d,E){return fr(d,"application/json",KT,E)};function KT(d){return JSON.parse(d.responseText)}h.html=function(d,E){return fr(d,"text/html",JT,E)};function JT(d){var E=p.createRange();return E.selectNode(p.body),E.createContextualFragment(d.responseText)}h.xml=ur(function(d){return d.responseXML}),typeof $=="object"&&$.exports?$.exports=h:this.d3=h}).apply(self)}}),_=i({"node_modules/d3-time/dist/d3-time.js"(V,$){(function(h,c){typeof V=="object"&&typeof $<"u"?c(V):(h=h||self,c(h.d3=h.d3||{}))})(V,function(h){var c=new Date,u=new Date;function p(Se,Be,rt,ht){function Lt(Ct){return Se(Ct=arguments.length===0?new Date:new Date(+Ct)),Ct}return Lt.floor=function(Ct){return Se(Ct=new Date(+Ct)),Ct},Lt.ceil=function(Ct){return Se(Ct=new Date(Ct-1)),Be(Ct,1),Se(Ct),Ct},Lt.round=function(Ct){var zt=Lt(Ct),Bt=Lt.ceil(Ct);return Ct-zt<Bt-Ct?zt:Bt},Lt.offset=function(Ct,zt){return Be(Ct=new Date(+Ct),zt==null?1:Math.floor(zt)),Ct},Lt.range=function(Ct,zt,Bt){var Ft=[],nr;if(Ct=Lt.ceil(Ct),Bt=Bt==null?1:Math.floor(Bt),!(Ct<zt)||!(Bt>0))return Ft;do Ft.push(nr=new Date(+Ct)),Be(Ct,Bt),Se(Ct);while(nr<Ct&&Ct<zt);return Ft},Lt.filter=function(Ct){return p(function(zt){if(zt>=zt)for(;Se(zt),!Ct(zt);)zt.setTime(zt-1)},function(zt,Bt){if(zt>=zt)if(Bt<0)for(;++Bt<=0;)for(;Be(zt,-1),!Ct(zt););else for(;--Bt>=0;)for(;Be(zt,1),!Ct(zt););})},rt&&(Lt.count=function(Ct,zt){return c.setTime(+Ct),u.setTime(+zt),Se(c),Se(u),Math.floor(rt(c,u))},Lt.every=function(Ct){return Ct=Math.floor(Ct),!isFinite(Ct)||!(Ct>0)?null:Ct>1?Lt.filter(ht?function(zt){return ht(zt)%Ct===0}:function(zt){return Lt.count(0,zt)%Ct===0}):Lt}),Lt}var v=p(function(){},function(Se,Be){Se.setTime(+Se+Be)},function(Se,Be){return Be-Se});v.every=function(Se){return Se=Math.floor(Se),!isFinite(Se)||!(Se>0)?null:Se>1?p(function(Be){Be.setTime(Math.floor(Be/Se)*Se)},function(Be,rt){Be.setTime(+Be+rt*Se)},function(Be,rt){return(rt-Be)/Se}):v};var m=v.range,g=1e3,w=6e4,o=36e5,T=864e5,y=6048e5,k=p(function(Se){Se.setTime(Se-Se.getMilliseconds())},function(Se,Be){Se.setTime(+Se+Be*g)},function(Se,Be){return(Be-Se)/g},function(Se){return Se.getUTCSeconds()}),D=k.range,M=p(function(Se){Se.setTime(Se-Se.getMilliseconds()-Se.getSeconds()*g)},function(Se,Be){Se.setTime(+Se+Be*w)},function(Se,Be){return(Be-Se)/w},function(Se){return Se.getMinutes()}),A=M.range,C=p(function(Se){Se.setTime(Se-Se.getMilliseconds()-Se.getSeconds()*g-Se.getMinutes()*w)},function(Se,Be){Se.setTime(+Se+Be*o)},function(Se,Be){return(Be-Se)/o},function(Se){return Se.getHours()}),j=C.range,b=p(function(Se){Se.setHours(0,0,0,0)},function(Se,Be){Se.setDate(Se.getDate()+Be)},function(Se,Be){return(Be-Se-(Be.getTimezoneOffset()-Se.getTimezoneOffset())*w)/T},function(Se){return Se.getDate()-1}),S=b.range;function L(Se){return p(function(Be){Be.setDate(Be.getDate()-(Be.getDay()+7-Se)%7),Be.setHours(0,0,0,0)},function(Be,rt){Be.setDate(Be.getDate()+rt*7)},function(Be,rt){return(rt-Be-(rt.getTimezoneOffset()-Be.getTimezoneOffset())*w)/y})}var F=L(0),P=L(1),J=L(2),H=L(3),Y=L(4),Z=L(5),z=L(6),q=F.range,X=P.range,K=J.range,ee=H.range,ne=Y.range,le=Z.range,W=z.range,ce=p(function(Se){Se.setDate(1),Se.setHours(0,0,0,0)},function(Se,Be){Se.setMonth(Se.getMonth()+Be)},function(Se,Be){return Be.getMonth()-Se.getMonth()+(Be.getFullYear()-Se.getFullYear())*12},function(Se){return Se.getMonth()}),de=ce.range,ve=p(function(Se){Se.setMonth(0,1),Se.setHours(0,0,0,0)},function(Se,Be){Se.setFullYear(Se.getFullYear()+Be)},function(Se,Be){return Be.getFullYear()-Se.getFullYear()},function(Se){return Se.getFullYear()});ve.every=function(Se){return!isFinite(Se=Math.floor(Se))||!(Se>0)?null:p(function(Be){Be.setFullYear(Math.floor(Be.getFullYear()/Se)*Se),Be.setMonth(0,1),Be.setHours(0,0,0,0)},function(Be,rt){Be.setFullYear(Be.getFullYear()+rt*Se)})};var pe=ve.range,be=p(function(Se){Se.setUTCSeconds(0,0)},function(Se,Be){Se.setTime(+Se+Be*w)},function(Se,Be){return(Be-Se)/w},function(Se){return Se.getUTCMinutes()}),Le=be.range,Ae=p(function(Se){Se.setUTCMinutes(0,0,0)},function(Se,Be){Se.setTime(+Se+Be*o)},function(Se,Be){return(Be-Se)/o},function(Se){return Se.getUTCHours()}),We=Ae.range,te=p(function(Se){Se.setUTCHours(0,0,0,0)},function(Se,Be){Se.setUTCDate(Se.getUTCDate()+Be)},function(Se,Be){return(Be-Se)/T},function(Se){return Se.getUTCDate()-1}),ae=te.range;function G(Se){return p(function(Be){Be.setUTCDate(Be.getUTCDate()-(Be.getUTCDay()+7-Se)%7),Be.setUTCHours(0,0,0,0)},function(Be,rt){Be.setUTCDate(Be.getUTCDate()+rt*7)},function(Be,rt){return(rt-Be)/y})}var Q=G(0),U=G(1),re=G(2),R=G(3),B=G(4),oe=G(5),ie=G(6),xe=Q.range,_e=U.range,ke=re.range,Pe=R.range,Ge=B.range,Je=oe.range,yt=ie.range,lt=p(function(Se){Se.setUTCDate(1),Se.setUTCHours(0,0,0,0)},function(Se,Be){Se.setUTCMonth(Se.getUTCMonth()+Be)},function(Se,Be){return Be.getUTCMonth()-Se.getUTCMonth()+(Be.getUTCFullYear()-Se.getUTCFullYear())*12},function(Se){return Se.getUTCMonth()}),mt=lt.range,Ce=p(function(Se){Se.setUTCMonth(0,1),Se.setUTCHours(0,0,0,0)},function(Se,Be){Se.setUTCFullYear(Se.getUTCFullYear()+Be)},function(Se,Be){return Be.getUTCFullYear()-Se.getUTCFullYear()},function(Se){return Se.getUTCFullYear()});Ce.every=function(Se){return!isFinite(Se=Math.floor(Se))||!(Se>0)?null:p(function(Be){Be.setUTCFullYear(Math.floor(Be.getUTCFullYear()/Se)*Se),Be.setUTCMonth(0,1),Be.setUTCHours(0,0,0,0)},function(Be,rt){Be.setUTCFullYear(Be.getUTCFullYear()+rt*Se)})};var Ie=Ce.range;h.timeDay=b,h.timeDays=S,h.timeFriday=Z,h.timeFridays=le,h.timeHour=C,h.timeHours=j,h.timeInterval=p,h.timeMillisecond=v,h.timeMilliseconds=m,h.timeMinute=M,h.timeMinutes=A,h.timeMonday=P,h.timeMondays=X,h.timeMonth=ce,h.timeMonths=de,h.timeSaturday=z,h.timeSaturdays=W,h.timeSecond=k,h.timeSeconds=D,h.timeSunday=F,h.timeSundays=q,h.timeThursday=Y,h.timeThursdays=ne,h.timeTuesday=J,h.timeTuesdays=K,h.timeWednesday=H,h.timeWednesdays=ee,h.timeWeek=F,h.timeWeeks=q,h.timeYear=ve,h.timeYears=pe,h.utcDay=te,h.utcDays=ae,h.utcFriday=oe,h.utcFridays=Je,h.utcHour=Ae,h.utcHours=We,h.utcMillisecond=v,h.utcMilliseconds=m,h.utcMinute=be,h.utcMinutes=Le,h.utcMonday=U,h.utcMondays=_e,h.utcMonth=lt,h.utcMonths=mt,h.utcSaturday=ie,h.utcSaturdays=yt,h.utcSecond=k,h.utcSeconds=D,h.utcSunday=Q,h.utcSundays=xe,h.utcThursday=B,h.utcThursdays=Ge,h.utcTuesday=re,h.utcTuesdays=ke,h.utcWednesday=R,h.utcWednesdays=Pe,h.utcWeek=Q,h.utcWeeks=xe,h.utcYear=Ce,h.utcYears=Ie,Object.defineProperty(h,"__esModule",{value:!0})})}}),N=i({"node_modules/d3-time-format/dist/d3-time-format.js"(V,$){(function(h,c){typeof V=="object"&&typeof $<"u"?c(V,_()):(h=h||self,c(h.d3=h.d3||{},h.d3))})(V,function(h,c){function u(ze){if(0<=ze.y&&ze.y<100){var Ye=new Date(-1,ze.m,ze.d,ze.H,ze.M,ze.S,ze.L);return Ye.setFullYear(ze.y),Ye}return new Date(ze.y,ze.m,ze.d,ze.H,ze.M,ze.S,ze.L)}function p(ze){if(0<=ze.y&&ze.y<100){var Ye=new Date(Date.UTC(-1,ze.m,ze.d,ze.H,ze.M,ze.S,ze.L));return Ye.setUTCFullYear(ze.y),Ye}return new Date(Date.UTC(ze.y,ze.m,ze.d,ze.H,ze.M,ze.S,ze.L))}function v(ze,Ye,$e){return{y:ze,m:Ye,d:$e,H:0,M:0,S:0,L:0}}function m(ze){var Ye=ze.dateTime,$e=ze.date,he=ze.time,je=ze.periods,Ne=ze.days,Re=ze.shortDays,nt=ze.months,at=ze.shortMonths,dt=D(je),Mt=M(je),Nt=D(Ne),ot=M(Ne),jt=D(Re),Ut=M(Re),Gt=D(nt),Tr=M(nt),Dr=D(at),Vr=M(at),Mr={a:mn,A:Un,b:gr,B:Cn,c:null,d:ce,e:ce,f:Le,H:de,I:ve,j:pe,L:be,m:Ae,M:We,p:we,q:ge,Q:zt,s:Bt,S:te,u:ae,U:G,V:Q,w:U,W:re,x:null,X:null,y:R,Y:B,Z:oe,"%":Ct},Fr={a:pt,A:ft,b:Xe,B:Qe,c:null,d:ie,e:ie,f:Ge,H:xe,I:_e,j:ke,L:Pe,m:Je,M:yt,p:st,q:At,Q:zt,s:Bt,S:lt,u:mt,U:Ce,V:Ie,w:Se,W:Be,x:null,X:null,y:rt,Y:ht,Z:Lt,"%":Ct},xr={a:Er,A:vr,b:Ir,B:ln,c:kn,d:Y,e:Y,f:ee,H:z,I:z,j:Z,L:K,m:H,M:q,p:qr,q:J,Q:le,s:W,S:X,u:C,U:j,V:b,w:A,W:S,x:Hr,X:pn,y:F,Y:L,Z:P,"%":ne};Mr.x=br($e,Mr),Mr.X=br(he,Mr),Mr.c=br(Ye,Mr),Fr.x=br($e,Fr),Fr.X=br(he,Fr),Fr.c=br(Ye,Fr);function br(it,bt){return function(Tt){var Rt=[],tr=-1,ur=0,fr=it.length,Rr,wr,Gr;for(Tt instanceof Date||(Tt=new Date(+Tt));++tr<fr;)it.charCodeAt(tr)===37&&(Rt.push(it.slice(ur,tr)),(wr=g[Rr=it.charAt(++tr)])!=null?Rr=it.charAt(++tr):wr=Rr==="e"?" ":"0",(Gr=bt[Rr])&&(Rr=Gr(Tt,wr)),Rt.push(Rr),ur=tr+1);return Rt.push(it.slice(ur,tr)),Rt.join("")}}function Wr(it,bt){return function(Tt){var Rt=v(1900,void 0,1),tr=Or(Rt,it,Tt+="",0),ur,fr;if(tr!=Tt.length)return null;if("Q"in Rt)return new Date(Rt.Q);if("s"in Rt)return new Date(Rt.s*1e3+("L"in Rt?Rt.L:0));if(bt&&!("Z"in Rt)&&(Rt.Z=0),"p"in Rt&&(Rt.H=Rt.H%12+Rt.p*12),Rt.m===void 0&&(Rt.m="q"in Rt?Rt.q:0),"V"in Rt){if(Rt.V<1||Rt.V>53)return null;"w"in Rt||(Rt.w=1),"Z"in Rt?(ur=p(v(Rt.y,0,1)),fr=ur.getUTCDay(),ur=fr>4||fr===0?c.utcMonday.ceil(ur):c.utcMonday(ur),ur=c.utcDay.offset(ur,(Rt.V-1)*7),Rt.y=ur.getUTCFullYear(),Rt.m=ur.getUTCMonth(),Rt.d=ur.getUTCDate()+(Rt.w+6)%7):(ur=u(v(Rt.y,0,1)),fr=ur.getDay(),ur=fr>4||fr===0?c.timeMonday.ceil(ur):c.timeMonday(ur),ur=c.timeDay.offset(ur,(Rt.V-1)*7),Rt.y=ur.getFullYear(),Rt.m=ur.getMonth(),Rt.d=ur.getDate()+(Rt.w+6)%7)}else("W"in Rt||"U"in Rt)&&("w"in Rt||(Rt.w="u"in Rt?Rt.u%7:"W"in Rt?1:0),fr="Z"in Rt?p(v(Rt.y,0,1)).getUTCDay():u(v(Rt.y,0,1)).getDay(),Rt.m=0,Rt.d="W"in Rt?(Rt.w+6)%7+Rt.W*7-(fr+5)%7:Rt.w+Rt.U*7-(fr+6)%7);return"Z"in Rt?(Rt.H+=Rt.Z/100|0,Rt.M+=Rt.Z%100,p(Rt)):u(Rt)}}function Or(it,bt,Tt,Rt){for(var tr=0,ur=bt.length,fr=Tt.length,Rr,wr;tr<ur;){if(Rt>=fr)return-1;if(Rr=bt.charCodeAt(tr++),Rr===37){if(Rr=bt.charAt(tr++),wr=xr[Rr in g?bt.charAt(tr++):Rr],!wr||(Rt=wr(it,Tt,Rt))<0)return-1}else if(Rr!=Tt.charCodeAt(Rt++))return-1}return Rt}function qr(it,bt,Tt){var Rt=dt.exec(bt.slice(Tt));return Rt?(it.p=Mt[Rt[0].toLowerCase()],Tt+Rt[0].length):-1}function Er(it,bt,Tt){var Rt=jt.exec(bt.slice(Tt));return Rt?(it.w=Ut[Rt[0].toLowerCase()],Tt+Rt[0].length):-1}function vr(it,bt,Tt){var Rt=Nt.exec(bt.slice(Tt));return Rt?(it.w=ot[Rt[0].toLowerCase()],Tt+Rt[0].length):-1}function Ir(it,bt,Tt){var Rt=Dr.exec(bt.slice(Tt));return Rt?(it.m=Vr[Rt[0].toLowerCase()],Tt+Rt[0].length):-1}function ln(it,bt,Tt){var Rt=Gt.exec(bt.slice(Tt));return Rt?(it.m=Tr[Rt[0].toLowerCase()],Tt+Rt[0].length):-1}function kn(it,bt,Tt){return Or(it,Ye,bt,Tt)}function Hr(it,bt,Tt){return Or(it,$e,bt,Tt)}function pn(it,bt,Tt){return Or(it,he,bt,Tt)}function mn(it){return Re[it.getDay()]}function Un(it){return Ne[it.getDay()]}function gr(it){return at[it.getMonth()]}function Cn(it){return nt[it.getMonth()]}function we(it){return je[+(it.getHours()>=12)]}function ge(it){return 1+~~(it.getMonth()/3)}function pt(it){return Re[it.getUTCDay()]}function ft(it){return Ne[it.getUTCDay()]}function Xe(it){return at[it.getUTCMonth()]}function Qe(it){return nt[it.getUTCMonth()]}function st(it){return je[+(it.getUTCHours()>=12)]}function At(it){return 1+~~(it.getUTCMonth()/3)}return{format:function(it){var bt=br(it+="",Mr);return bt.toString=function(){return it},bt},parse:function(it){var bt=Wr(it+="",!1);return bt.toString=function(){return it},bt},utcFormat:function(it){var bt=br(it+="",Fr);return bt.toString=function(){return it},bt},utcParse:function(it){var bt=Wr(it+="",!0);return bt.toString=function(){return it},bt}}}var g={"-":"",_:" ",0:"0"},w=/^\s*\d+/,o=/^%/,T=/[\\^$*+?|[\]().{}]/g;function y(ze,Ye,$e){var he=ze<0?"-":"",je=(he?-ze:ze)+"",Ne=je.length;return he+(Ne<$e?new Array($e-Ne+1).join(Ye)+je:je)}function k(ze){return ze.replace(T,"\\$&")}function D(ze){return new RegExp("^(?:"+ze.map(k).join("|")+")","i")}function M(ze){for(var Ye={},$e=-1,he=ze.length;++$e<he;)Ye[ze[$e].toLowerCase()]=$e;return Ye}function A(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+1));return he?(ze.w=+he[0],$e+he[0].length):-1}function C(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+1));return he?(ze.u=+he[0],$e+he[0].length):-1}function j(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+2));return he?(ze.U=+he[0],$e+he[0].length):-1}function b(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+2));return he?(ze.V=+he[0],$e+he[0].length):-1}function S(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+2));return he?(ze.W=+he[0],$e+he[0].length):-1}function L(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+4));return he?(ze.y=+he[0],$e+he[0].length):-1}function F(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+2));return he?(ze.y=+he[0]+(+he[0]>68?1900:2e3),$e+he[0].length):-1}function P(ze,Ye,$e){var he=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Ye.slice($e,$e+6));return he?(ze.Z=he[1]?0:-(he[2]+(he[3]||"00")),$e+he[0].length):-1}function J(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+1));return he?(ze.q=he[0]*3-3,$e+he[0].length):-1}function H(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+2));return he?(ze.m=he[0]-1,$e+he[0].length):-1}function Y(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+2));return he?(ze.d=+he[0],$e+he[0].length):-1}function Z(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+3));return he?(ze.m=0,ze.d=+he[0],$e+he[0].length):-1}function z(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+2));return he?(ze.H=+he[0],$e+he[0].length):-1}function q(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+2));return he?(ze.M=+he[0],$e+he[0].length):-1}function X(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+2));return he?(ze.S=+he[0],$e+he[0].length):-1}function K(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+3));return he?(ze.L=+he[0],$e+he[0].length):-1}function ee(ze,Ye,$e){var he=w.exec(Ye.slice($e,$e+6));return he?(ze.L=Math.floor(he[0]/1e3),$e+he[0].length):-1}function ne(ze,Ye,$e){var he=o.exec(Ye.slice($e,$e+1));return he?$e+he[0].length:-1}function le(ze,Ye,$e){var he=w.exec(Ye.slice($e));return he?(ze.Q=+he[0],$e+he[0].length):-1}function W(ze,Ye,$e){var he=w.exec(Ye.slice($e));return he?(ze.s=+he[0],$e+he[0].length):-1}function ce(ze,Ye){return y(ze.getDate(),Ye,2)}function de(ze,Ye){return y(ze.getHours(),Ye,2)}function ve(ze,Ye){return y(ze.getHours()%12||12,Ye,2)}function pe(ze,Ye){return y(1+c.timeDay.count(c.timeYear(ze),ze),Ye,3)}function be(ze,Ye){return y(ze.getMilliseconds(),Ye,3)}function Le(ze,Ye){return be(ze,Ye)+"000"}function Ae(ze,Ye){return y(ze.getMonth()+1,Ye,2)}function We(ze,Ye){return y(ze.getMinutes(),Ye,2)}function te(ze,Ye){return y(ze.getSeconds(),Ye,2)}function ae(ze){var Ye=ze.getDay();return Ye===0?7:Ye}function G(ze,Ye){return y(c.timeSunday.count(c.timeYear(ze)-1,ze),Ye,2)}function Q(ze,Ye){var $e=ze.getDay();return ze=$e>=4||$e===0?c.timeThursday(ze):c.timeThursday.ceil(ze),y(c.timeThursday.count(c.timeYear(ze),ze)+(c.timeYear(ze).getDay()===4),Ye,2)}function U(ze){return ze.getDay()}function re(ze,Ye){return y(c.timeMonday.count(c.timeYear(ze)-1,ze),Ye,2)}function R(ze,Ye){return y(ze.getFullYear()%100,Ye,2)}function B(ze,Ye){return y(ze.getFullYear()%1e4,Ye,4)}function oe(ze){var Ye=ze.getTimezoneOffset();return(Ye>0?"-":(Ye*=-1,"+"))+y(Ye/60|0,"0",2)+y(Ye%60,"0",2)}function ie(ze,Ye){return y(ze.getUTCDate(),Ye,2)}function xe(ze,Ye){return y(ze.getUTCHours(),Ye,2)}function _e(ze,Ye){return y(ze.getUTCHours()%12||12,Ye,2)}function ke(ze,Ye){return y(1+c.utcDay.count(c.utcYear(ze),ze),Ye,3)}function Pe(ze,Ye){return y(ze.getUTCMilliseconds(),Ye,3)}function Ge(ze,Ye){return Pe(ze,Ye)+"000"}function Je(ze,Ye){return y(ze.getUTCMonth()+1,Ye,2)}function yt(ze,Ye){return y(ze.getUTCMinutes(),Ye,2)}function lt(ze,Ye){return y(ze.getUTCSeconds(),Ye,2)}function mt(ze){var Ye=ze.getUTCDay();return Ye===0?7:Ye}function Ce(ze,Ye){return y(c.utcSunday.count(c.utcYear(ze)-1,ze),Ye,2)}function Ie(ze,Ye){var $e=ze.getUTCDay();return ze=$e>=4||$e===0?c.utcThursday(ze):c.utcThursday.ceil(ze),y(c.utcThursday.count(c.utcYear(ze),ze)+(c.utcYear(ze).getUTCDay()===4),Ye,2)}function Se(ze){return ze.getUTCDay()}function Be(ze,Ye){return y(c.utcMonday.count(c.utcYear(ze)-1,ze),Ye,2)}function rt(ze,Ye){return y(ze.getUTCFullYear()%100,Ye,2)}function ht(ze,Ye){return y(ze.getUTCFullYear()%1e4,Ye,4)}function Lt(){return"+0000"}function Ct(){return"%"}function zt(ze){return+ze}function Bt(ze){return Math.floor(+ze/1e3)}var Ft;nr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nr(ze){return Ft=m(ze),h.timeFormat=Ft.format,h.timeParse=Ft.parse,h.utcFormat=Ft.utcFormat,h.utcParse=Ft.utcParse,Ft}var _t="%Y-%m-%dT%H:%M:%S.%LZ";function rr(ze){return ze.toISOString()}var pr=Date.prototype.toISOString?rr:h.utcFormat(_t);function Yt(ze){var Ye=new Date(ze);return isNaN(Ye)?null:Ye}var sr=+new Date("2000-01-01T00:00:00.000Z")?Yt:h.utcParse(_t);h.isoFormat=pr,h.isoParse=sr,h.timeFormatDefaultLocale=nr,h.timeFormatLocale=m,Object.defineProperty(h,"__esModule",{value:!0})})}}),I=i({"node_modules/d3-format/dist/d3-format.js"(V,$){(function(h,c){typeof V=="object"&&typeof $<"u"?c(V):(h=typeof globalThis<"u"?globalThis:h||self,c(h.d3=h.d3||{}))})(V,function(h){function c(H){return Math.abs(H=Math.round(H))>=1e21?H.toLocaleString("en").replace(/,/g,""):H.toString(10)}function u(H,Y){if((Z=(H=Y?H.toExponential(Y-1):H.toExponential()).indexOf("e"))<0)return null;var Z,z=H.slice(0,Z);return[z.length>1?z[0]+z.slice(2):z,+H.slice(Z+1)]}function p(H){return H=u(Math.abs(H)),H?H[1]:NaN}function v(H,Y){return function(Z,z){for(var q=Z.length,X=[],K=0,ee=H[0],ne=0;q>0&&ee>0&&(ne+ee+1>z&&(ee=Math.max(1,z-ne)),X.push(Z.substring(q-=ee,q+ee)),!((ne+=ee+1)>z));)ee=H[K=(K+1)%H.length];return X.reverse().join(Y)}}function m(H){return function(Y){return Y.replace(/[0-9]/g,function(Z){return H[+Z]})}}var g=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w(H){if(!(Y=g.exec(H)))throw new Error("invalid format: "+H);var Y;return new o({fill:Y[1],align:Y[2],sign:Y[3],symbol:Y[4],zero:Y[5],width:Y[6],comma:Y[7],precision:Y[8]&&Y[8].slice(1),trim:Y[9],type:Y[10]})}w.prototype=o.prototype;function o(H){this.fill=H.fill===void 0?" ":H.fill+"",this.align=H.align===void 0?">":H.align+"",this.sign=H.sign===void 0?"-":H.sign+"",this.symbol=H.symbol===void 0?"":H.symbol+"",this.zero=!!H.zero,this.width=H.width===void 0?void 0:+H.width,this.comma=!!H.comma,this.precision=H.precision===void 0?void 0:+H.precision,this.trim=!!H.trim,this.type=H.type===void 0?"":H.type+""}o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function T(H){e:for(var Y=H.length,Z=1,z=-1,q;Z<Y;++Z)switch(H[Z]){case".":z=q=Z;break;case"0":z===0&&(z=Z),q=Z;break;default:if(!+H[Z])break e;z>0&&(z=0);break}return z>0?H.slice(0,z)+H.slice(q+1):H}var y;function k(H,Y){var Z=u(H,Y);if(!Z)return H+"";var z=Z[0],q=Z[1],X=q-(y=Math.max(-8,Math.min(8,Math.floor(q/3)))*3)+1,K=z.length;return X===K?z:X>K?z+new Array(X-K+1).join("0"):X>0?z.slice(0,X)+"."+z.slice(X):"0."+new Array(1-X).join("0")+u(H,Math.max(0,Y+X-1))[0]}function D(H,Y){var Z=u(H,Y);if(!Z)return H+"";var z=Z[0],q=Z[1];return q<0?"0."+new Array(-q).join("0")+z:z.length>q+1?z.slice(0,q+1)+"."+z.slice(q+1):z+new Array(q-z.length+2).join("0")}var M={"%":function(H,Y){return(H*100).toFixed(Y)},b:function(H){return Math.round(H).toString(2)},c:function(H){return H+""},d:c,e:function(H,Y){return H.toExponential(Y)},f:function(H,Y){return H.toFixed(Y)},g:function(H,Y){return H.toPrecision(Y)},o:function(H){return Math.round(H).toString(8)},p:function(H,Y){return D(H*100,Y)},r:D,s:k,X:function(H){return Math.round(H).toString(16).toUpperCase()},x:function(H){return Math.round(H).toString(16)}};function A(H){return H}var C=Array.prototype.map,j=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function b(H){var Y=H.grouping===void 0||H.thousands===void 0?A:v(C.call(H.grouping,Number),H.thousands+""),Z=H.currency===void 0?"":H.currency[0]+"",z=H.currency===void 0?"":H.currency[1]+"",q=H.decimal===void 0?".":H.decimal+"",X=H.numerals===void 0?A:m(C.call(H.numerals,String)),K=H.percent===void 0?"%":H.percent+"",ee=H.minus===void 0?"-":H.minus+"",ne=H.nan===void 0?"NaN":H.nan+"";function le(ce){ce=w(ce);var de=ce.fill,ve=ce.align,pe=ce.sign,be=ce.symbol,Le=ce.zero,Ae=ce.width,We=ce.comma,te=ce.precision,ae=ce.trim,G=ce.type;G==="n"?(We=!0,G="g"):M[G]||(te===void 0&&(te=12),ae=!0,G="g"),(Le||de==="0"&&ve==="=")&&(Le=!0,de="0",ve="=");var Q=be==="$"?Z:be==="#"&&/[boxX]/.test(G)?"0"+G.toLowerCase():"",U=be==="$"?z:/[%p]/.test(G)?K:"",re=M[G],R=/[defgprs%]/.test(G);te=te===void 0?6:/[gprs]/.test(G)?Math.max(1,Math.min(21,te)):Math.max(0,Math.min(20,te));function B(oe){var ie=Q,xe=U,_e,ke,Pe;if(G==="c")xe=re(oe)+xe,oe="";else{oe=+oe;var Ge=oe<0||1/oe<0;if(oe=isNaN(oe)?ne:re(Math.abs(oe),te),ae&&(oe=T(oe)),Ge&&+oe==0&&pe!=="+"&&(Ge=!1),ie=(Ge?pe==="("?pe:ee:pe==="-"||pe==="("?"":pe)+ie,xe=(G==="s"?j[8+y/3]:"")+xe+(Ge&&pe==="("?")":""),R){for(_e=-1,ke=oe.length;++_e<ke;)if(Pe=oe.charCodeAt(_e),48>Pe||Pe>57){xe=(Pe===46?q+oe.slice(_e+1):oe.slice(_e))+xe,oe=oe.slice(0,_e);break}}}We&&!Le&&(oe=Y(oe,1/0));var Je=ie.length+oe.length+xe.length,yt=Je<Ae?new Array(Ae-Je+1).join(de):"";switch(We&&Le&&(oe=Y(yt+oe,yt.length?Ae-xe.length:1/0),yt=""),ve){case"<":oe=ie+oe+xe+yt;break;case"=":oe=ie+yt+oe+xe;break;case"^":oe=yt.slice(0,Je=yt.length>>1)+ie+oe+xe+yt.slice(Je);break;default:oe=yt+ie+oe+xe;break}return X(oe)}return B.toString=function(){return ce+""},B}function W(ce,de){var ve=le((ce=w(ce),ce.type="f",ce)),pe=Math.max(-8,Math.min(8,Math.floor(p(de)/3)))*3,be=Math.pow(10,-pe),Le=j[8+pe/3];return function(Ae){return ve(be*Ae)+Le}}return{format:le,formatPrefix:W}}var S;L({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function L(H){return S=b(H),h.format=S.format,h.formatPrefix=S.formatPrefix,S}function F(H){return Math.max(0,-p(Math.abs(H)))}function P(H,Y){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(p(Y)/3)))*3-p(Math.abs(H)))}function J(H,Y){return H=Math.abs(H),Y=Math.abs(Y)-H,Math.max(0,p(Y)-p(H))+1}h.FormatSpecifier=o,h.formatDefaultLocale=L,h.formatLocale=b,h.formatSpecifier=w,h.precisionFixed=F,h.precisionPrefix=P,h.precisionRound=J,Object.defineProperty(h,"__esModule",{value:!0})})}}),me=i({"node_modules/is-string-blank/index.js"(V,$){$.exports=function(h){for(var c=h.length,u,p=0;p<c;p++)if(u=h.charCodeAt(p),(u<9||u>13)&&u!==32&&u!==133&&u!==160&&u!==5760&&u!==6158&&(u<8192||u>8205)&&u!==8232&&u!==8233&&u!==8239&&u!==8287&&u!==8288&&u!==12288&&u!==65279)return!1;return!0}}}),fe=i({"node_modules/fast-isnumeric/index.js"(V,$){var h=me();$.exports=function(c){var u=typeof c;if(u==="string"){var p=c;if(c=+c,c===0&&h(p))return!1}else if(u!=="number")return!1;return c-c<1}}}),Te=i({"src/constants/numerical.js"(V,$){$.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}}}),qe=i({"node_modules/base64-arraybuffer/dist/base64-arraybuffer.umd.js"(V,$){(function(h,c){typeof V=="object"&&typeof $<"u"?c(V):(h=typeof globalThis<"u"?globalThis:h||self,c(h["base64-arraybuffer"]={}))})(V,function(h){for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=typeof Uint8Array>"u"?[]:new Uint8Array(256),p=0;p<c.length;p++)u[c.charCodeAt(p)]=p;var v=function(g){var w=new Uint8Array(g),o,T=w.length,y="";for(o=0;o<T;o+=3)y+=c[w[o]>>2],y+=c[(w[o]&3)<<4|w[o+1]>>4],y+=c[(w[o+1]&15)<<2|w[o+2]>>6],y+=c[w[o+2]&63];return T%3===2?y=y.substring(0,y.length-1)+"=":T%3===1&&(y=y.substring(0,y.length-2)+"=="),y},m=function(g){var w=g.length*.75,o=g.length,T,y=0,k,D,M,A;g[g.length-1]==="="&&(w--,g[g.length-2]==="="&&w--);var C=new ArrayBuffer(w),j=new Uint8Array(C);for(T=0;T<o;T+=4)k=u[g.charCodeAt(T)],D=u[g.charCodeAt(T+1)],M=u[g.charCodeAt(T+2)],A=u[g.charCodeAt(T+3)],j[y++]=k<<2|D>>4,j[y++]=(D&15)<<4|M>>2,j[y++]=(M&3)<<6|A&63;return C};h.decode=m,h.encode=v,Object.defineProperty(h,"__esModule",{value:!0})})}}),Ve=i({"src/lib/is_plain_object.js"(V,$){$.exports=function(c){return window&&window.process&&window.process.versions?Object.prototype.toString.call(c)==="[object Object]":Object.prototype.toString.call(c)==="[object Object]"&&Object.getPrototypeOf(c).hasOwnProperty("hasOwnProperty")}}}),Ue=i({"src/lib/array.js"(V){var $=qe().decode,h=Ve(),c=Array.isArray,u=ArrayBuffer,p=DataView;function v(k){return u.isView(k)&&!(k instanceof p)}V.isTypedArray=v;function m(k){return c(k)||v(k)}V.isArrayOrTypedArray=m;function g(k){return!m(k[0])}V.isArray1D=g,V.ensureArray=function(k,D){return c(k)||(k=[]),k.length=D,k};var w={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};w.uint8c=w.u1c,w.uint8=w.u1,w.int8=w.i1,w.uint16=w.u2,w.int16=w.i2,w.uint32=w.u4,w.int32=w.i4,w.float32=w.f4,w.float64=w.f8;function o(k){return k.constructor===ArrayBuffer}V.isArrayBuffer=o,V.decodeTypedArraySpec=function(k){var D=[],M=T(k),A=M.dtype,C=w[A];if(!C)throw new Error('Error in dtype: "'+A+'"');var j=C.BYTES_PER_ELEMENT,b=M.bdata;o(b)||(b=$(b));var S=M.shape===void 0?[b.byteLength/j]:(""+M.shape).split(",");S.reverse();var L=S.length,F,P,J=+S[0],H=j*J,Y=0;if(L===1)D=new C(b);else if(L===2)for(F=+S[1],P=0;P<F;P++)D[P]=new C(b,Y,J),Y+=H;else if(L===3){F=+S[1];for(var Z=+S[2],z=0;z<Z;z++)for(D[z]=[],P=0;P<F;P++)D[z][P]=new C(b,Y,J),Y+=H}else throw new Error("ndim: "+L+'is not supported with the shape:"'+M.shape+'"');return D.bdata=M.bdata,D.dtype=M.dtype,D.shape=S.reverse().join(","),k._inputArray=D,D},V.isTypedArraySpec=function(k){return h(k)&&k.hasOwnProperty("dtype")&&typeof k.dtype=="string"&&k.hasOwnProperty("bdata")&&(typeof k.bdata=="string"||o(k.bdata))&&(k.shape===void 0||k.hasOwnProperty("shape")&&(typeof k.shape=="string"||typeof k.shape=="number"))};function T(k){return{bdata:k.bdata,dtype:k.dtype,shape:k.shape}}V.concat=function(){var k=[],D=!0,M=0,A,C,j,b,S,L,F,P;for(j=0;j<arguments.length;j++)b=arguments[j],L=b.length,L&&(C?k.push(b):(C=b,S=L),c(b)?A=!1:(D=!1,M?A!==b.constructor&&(A=!1):A=b.constructor),M+=L);if(!M)return[];if(!k.length)return C;if(D)return C.concat.apply(C,k);if(A){for(F=new A(M),F.set(C),j=0;j<k.length;j++)b=k[j],F.set(b,S),S+=b.length;return F}for(F=new Array(M),P=0;P<C.length;P++)F[P]=C[P];for(j=0;j<k.length;j++){for(b=k[j],P=0;P<b.length;P++)F[S+P]=b[P];S+=P}return F},V.maxRowLength=function(k){return y(k,Math.max,0)},V.minRowLength=function(k){return y(k,Math.min,1/0)};function y(k,D,M){if(m(k))if(m(k[0])){for(var A=M,C=0;C<k.length;C++)A=D(A,k[C].length);return A}else return k.length;return 0}}}),Ee=i({"src/lib/nested_property.js"(V,$){var h=fe(),c=Ue().isArrayOrTypedArray;$.exports=function(k,D){if(h(D))D=String(D);else if(typeof D!="string"||D.substr(D.length-4)==="[-1]")throw"bad property string";var M=D.split("."),A,C,j,b;for(b=0;b<M.length;b++)if(String(M[b]).slice(0,2)==="__")throw"bad property string";for(b=0;b<M.length;){if(A=String(M[b]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),A){if(A[1])M[b]=A[1];else if(b===0)M.splice(0,1);else throw"bad property string";for(C=A[2].substr(1,A[2].length-2).split("]["),j=0;j<C.length;j++)b++,M.splice(b,0,Number(C[j]))}b++}return typeof k!="object"?T(k,D,M):{set:m(k,M,D),get:u(k,M),astr:D,parts:M,obj:k}};function u(y,k){return function(D){var M=y,A,C,j,b,S;for(b=0;b<k.length-1;b++){if(A=k[b],A===-1){for(C=!0,j=[],S=0;S<M.length;S++)j[S]=u(M[S],k.slice(b+1))(D),j[S]!==j[0]&&(C=!1);return C?j[0]:j}if(typeof A=="number"&&!c(M)||(M=M[A],typeof M!="object"||M===null))return}if(!(typeof M!="object"||M===null)&&(j=M[k[b]],!(!D&&j===null)))return j}}var p=/(^|\.)args\[/;function v(y,k){return y===void 0||y===null&&!k.match(p)}function m(y,k,D){return function(M){var A=y,C="",j=v(M,D),b,S;for(S=0;S<k.length-1;S++){if(b=k[S],typeof b=="number"&&!c(A))throw"array index but container is not an array";if(b===-1){if(j=!w(A,k.slice(S+1),M,D),j)break;return}if(!o(A,b,k[S+1],j))break;if(A=A[b],typeof A!="object"||A===null)throw"container is not an object";C=g(C,b)}if(j){if(S===k.length-1&&(delete A[k[S]],Array.isArray(A)&&+k[S]===A.length-1))for(;A.length&&A[A.length-1]===void 0;)A.pop()}else A[k[S]]=M}}function g(y,k){var D=k;return h(k)?D="["+k+"]":y&&(D="."+k),y+D}function w(y,k,D,M){var A=c(D),C=!0,j=D,b=M.replace("-1",0),S=A?!1:v(D,b),L=k[0],F;for(F=0;F<y.length;F++)b=M.replace("-1",F),A&&(j=D[F%D.length],S=v(j,b)),S&&(C=!1),o(y,F,L,S)&&m(y[F],k,M.replace("-1",F))(j);return C}function o(y,k,D,M){if(y[k]===void 0){if(M)return!1;typeof D=="number"?y[k]=[]:y[k]={}}return!0}function T(y,k,D){return{set:function(){throw"bad container"},get:function(){},astr:k,parts:D,obj:y}}}}),Fe=i({"src/lib/keyed_container.js"(V,$){var h=Ee(),c=/^\w*$/,u=0,p=1,v=2,m=3,g=4;$.exports=function(o,T,y,k){y=y||"name",k=k||"value";var D,M,A,C={};T&&T.length?(A=h(o,T),M=A.get()):M=o,T=T||"";var j={};if(M)for(D=0;D<M.length;D++)j[M[D][y]]=D;var b=c.test(k),S={set:function(L,F){var P=F===null?g:u;if(!M){if(!A||P===g)return;M=[],A.set(M)}var J=j[L];if(J===void 0){if(P===g)return;P=P|m,J=M.length,j[L]=J}else F!==(b?M[J][k]:h(M[J],k).get())&&(P=P|v);var H=M[J]=M[J]||{};return H[y]=L,b?H[k]=F:h(H,k).set(F),F!==null&&(P=P&~g),C[J]=C[J]|P,S},get:function(L){if(M){var F=j[L];if(F!==void 0)return b?M[F][k]:h(M[F],k).get()}},rename:function(L,F){var P=j[L];return P===void 0||(C[P]=C[P]|p,j[F]=P,delete j[L],M[P][y]=F),S},remove:function(L){var F=j[L];if(F===void 0)return S;var P=M[F];if(Object.keys(P).length>2)return C[F]=C[F]|v,S.set(L,null);if(b){for(D=F;D<M.length;D++)C[D]=C[D]|m;for(D=F;D<M.length;D++)j[M[D][y]]--;M.splice(F,1),delete j[L]}else h(P,k).set(null),C[F]=C[F]|v|g;return S},constructUpdate:function(){for(var L,F,P={},J=Object.keys(C),H=0;H<J.length;H++)F=J[H],L=T+"["+F+"]",M[F]?(C[F]&p&&(P[L+"."+y]=M[F][y]),C[F]&v&&(b?P[L+"."+k]=C[F]&g?null:M[F][k]:P[L+"."+k]=C[F]&g?null:h(M[F],k).get())):P[L]=null;return P}};return S}}}),He=i({"src/lib/relative_attr.js"(V,$){var h=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,c=/^[^\.\[\]]+$/;$.exports=function(u,p){for(;p;){var v=u.match(h);if(v)u=v[1];else if(u.match(c))u="";else throw new Error("bad relativeAttr call:"+[u,p]);if(p.charAt(0)==="^")p=p.slice(1);else break}return u&&p.charAt(0)!=="["?u+"."+p:u+p}}}),tt=i({"src/lib/to_log_range.js"(V,$){var h=fe();$.exports=function(u,p){if(u>0)return Math.log(u)/Math.LN10;var v=Math.log(Math.min(p[0],p[1]))/Math.LN10;return h(v)||(v=Math.log(Math.max(p[0],p[1]))/Math.LN10-6),v}}}),et=i({"src/lib/relink_private.js"(V,$){var h=Ue().isArrayOrTypedArray,c=Ve();$.exports=function u(p,v){for(var m in v){var g=v[m],w=p[m];if(w!==g)if(m.charAt(0)==="_"||typeof g=="function"){if(m in p)continue;p[m]=g}else if(h(g)&&h(w)&&c(g[0])){if(m==="customdata"||m==="ids")continue;for(var o=Math.min(g.length,w.length),T=0;T<o;T++)w[T]!==g[T]&&c(g[T])&&c(w[T])&&u(w[T],g[T])}else c(g)&&c(w)&&(u(w,g),Object.keys(w).length||delete p[m])}}}}),ct=i({"src/lib/mod.js"(V,$){function h(u,p){var v=u%p;return v<0?v+p:v}function c(u,p){return Math.abs(u)>p/2?u-Math.round(u/p)*p:u}$.exports={mod:h,modHalf:c}}}),xt=i({"node_modules/tinycolor2/tinycolor.js"(V,$){(function(h){var c=/^\s+/,u=/\s+$/,p=0,v=h.round,m=h.min,g=h.max,w=h.random;function o(R,B){if(R=R||"",B=B||{},R instanceof o)return R;if(!(this instanceof o))return new o(R,B);var oe=T(R);this._originalInput=R,this._r=oe.r,this._g=oe.g,this._b=oe.b,this._a=oe.a,this._roundA=v(100*this._a)/100,this._format=B.format||oe.format,this._gradientType=B.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=oe.ok,this._tc_id=p++}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var R=this.toRgb();return(R.r*299+R.g*587+R.b*114)/1e3},getLuminance:function(){var R=this.toRgb(),B,oe,ie,xe,_e,ke;return B=R.r/255,oe=R.g/255,ie=R.b/255,B<=.03928?xe=B/12.92:xe=h.pow((B+.055)/1.055,2.4),oe<=.03928?_e=oe/12.92:_e=h.pow((oe+.055)/1.055,2.4),ie<=.03928?ke=ie/12.92:ke=h.pow((ie+.055)/1.055,2.4),.2126*xe+.7152*_e+.0722*ke},setAlpha:function(R){return this._a=ce(R),this._roundA=v(100*this._a)/100,this},toHsv:function(){var R=M(this._r,this._g,this._b);return{h:R.h*360,s:R.s,v:R.v,a:this._a}},toHsvString:function(){var R=M(this._r,this._g,this._b),B=v(R.h*360),oe=v(R.s*100),ie=v(R.v*100);return this._a==1?"hsv("+B+", "+oe+"%, "+ie+"%)":"hsva("+B+", "+oe+"%, "+ie+"%, "+this._roundA+")"},toHsl:function(){var R=k(this._r,this._g,this._b);return{h:R.h*360,s:R.s,l:R.l,a:this._a}},toHslString:function(){var R=k(this._r,this._g,this._b),B=v(R.h*360),oe=v(R.s*100),ie=v(R.l*100);return this._a==1?"hsl("+B+", "+oe+"%, "+ie+"%)":"hsla("+B+", "+oe+"%, "+ie+"%, "+this._roundA+")"},toHex:function(R){return C(this._r,this._g,this._b,R)},toHexString:function(R){return"#"+this.toHex(R)},toHex8:function(R){return j(this._r,this._g,this._b,this._a,R)},toHex8String:function(R){return"#"+this.toHex8(R)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(de(this._r,255)*100)+"%",g:v(de(this._g,255)*100)+"%",b:v(de(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+v(de(this._r,255)*100)+"%, "+v(de(this._g,255)*100)+"%, "+v(de(this._b,255)*100)+"%)":"rgba("+v(de(this._r,255)*100)+"%, "+v(de(this._g,255)*100)+"%, "+v(de(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:le[C(this._r,this._g,this._b,!0)]||!1},toFilter:function(R){var B="#"+b(this._r,this._g,this._b,this._a),oe=B,ie=this._gradientType?"GradientType = 1, ":"";if(R){var xe=o(R);oe="#"+b(xe._r,xe._g,xe._b,xe._a)}return"progid:DXImageTransform.Microsoft.gradient("+ie+"startColorstr="+B+",endColorstr="+oe+")"},toString:function(R){var B=!!R;R=R||this._format;var oe=!1,ie=this._a<1&&this._a>=0,xe=!B&&ie&&(R==="hex"||R==="hex6"||R==="hex3"||R==="hex4"||R==="hex8"||R==="name");return xe?R==="name"&&this._a===0?this.toName():this.toRgbString():(R==="rgb"&&(oe=this.toRgbString()),R==="prgb"&&(oe=this.toPercentageRgbString()),(R==="hex"||R==="hex6")&&(oe=this.toHexString()),R==="hex3"&&(oe=this.toHexString(!0)),R==="hex4"&&(oe=this.toHex8String(!0)),R==="hex8"&&(oe=this.toHex8String()),R==="name"&&(oe=this.toName()),R==="hsl"&&(oe=this.toHslString()),R==="hsv"&&(oe=this.toHsvString()),oe||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(R,B){var oe=R.apply(null,[this].concat([].slice.call(B)));return this._r=oe._r,this._g=oe._g,this._b=oe._b,this.setAlpha(oe._a),this},lighten:function(){return this._applyModification(P,arguments)},brighten:function(){return this._applyModification(J,arguments)},darken:function(){return this._applyModification(H,arguments)},desaturate:function(){return this._applyModification(S,arguments)},saturate:function(){return this._applyModification(L,arguments)},greyscale:function(){return this._applyModification(F,arguments)},spin:function(){return this._applyModification(Y,arguments)},_applyCombination:function(R,B){return R.apply(null,[this].concat([].slice.call(B)))},analogous:function(){return this._applyCombination(K,arguments)},complement:function(){return this._applyCombination(Z,arguments)},monochromatic:function(){return this._applyCombination(ee,arguments)},splitcomplement:function(){return this._applyCombination(X,arguments)},triad:function(){return this._applyCombination(z,arguments)},tetrad:function(){return this._applyCombination(q,arguments)}},o.fromRatio=function(R,B){if(typeof R=="object"){var oe={};for(var ie in R)R.hasOwnProperty(ie)&&(ie==="a"?oe[ie]=R[ie]:oe[ie]=We(R[ie]));R=oe}return o(R,B)};function T(R){var B={r:0,g:0,b:0},oe=1,ie=null,xe=null,_e=null,ke=!1,Pe=!1;return typeof R=="string"&&(R=U(R)),typeof R=="object"&&(Q(R.r)&&Q(R.g)&&Q(R.b)?(B=y(R.r,R.g,R.b),ke=!0,Pe=String(R.r).substr(-1)==="%"?"prgb":"rgb"):Q(R.h)&&Q(R.s)&&Q(R.v)?(ie=We(R.s),xe=We(R.v),B=A(R.h,ie,xe),ke=!0,Pe="hsv"):Q(R.h)&&Q(R.s)&&Q(R.l)&&(ie=We(R.s),_e=We(R.l),B=D(R.h,ie,_e),ke=!0,Pe="hsl"),R.hasOwnProperty("a")&&(oe=R.a)),oe=ce(oe),{ok:ke,format:R.format||Pe,r:m(255,g(B.r,0)),g:m(255,g(B.g,0)),b:m(255,g(B.b,0)),a:oe}}function y(R,B,oe){return{r:de(R,255)*255,g:de(B,255)*255,b:de(oe,255)*255}}function k(R,B,oe){R=de(R,255),B=de(B,255),oe=de(oe,255);var ie=g(R,B,oe),xe=m(R,B,oe),_e,ke,Pe=(ie+xe)/2;if(ie==xe)_e=ke=0;else{var Ge=ie-xe;switch(ke=Pe>.5?Ge/(2-ie-xe):Ge/(ie+xe),ie){case R:_e=(B-oe)/Ge+(B<oe?6:0);break;case B:_e=(oe-R)/Ge+2;break;case oe:_e=(R-B)/Ge+4;break}_e/=6}return{h:_e,s:ke,l:Pe}}function D(R,B,oe){var ie,xe,_e;R=de(R,360),B=de(B,100),oe=de(oe,100);function ke(Je,yt,lt){return lt<0&&(lt+=1),lt>1&&(lt-=1),lt<1/6?Je+(yt-Je)*6*lt:lt<1/2?yt:lt<2/3?Je+(yt-Je)*(2/3-lt)*6:Je}if(B===0)ie=xe=_e=oe;else{var Pe=oe<.5?oe*(1+B):oe+B-oe*B,Ge=2*oe-Pe;ie=ke(Ge,Pe,R+1/3),xe=ke(Ge,Pe,R),_e=ke(Ge,Pe,R-1/3)}return{r:ie*255,g:xe*255,b:_e*255}}function M(R,B,oe){R=de(R,255),B=de(B,255),oe=de(oe,255);var ie=g(R,B,oe),xe=m(R,B,oe),_e,ke,Pe=ie,Ge=ie-xe;if(ke=ie===0?0:Ge/ie,ie==xe)_e=0;else{switch(ie){case R:_e=(B-oe)/Ge+(B<oe?6:0);break;case B:_e=(oe-R)/Ge+2;break;case oe:_e=(R-B)/Ge+4;break}_e/=6}return{h:_e,s:ke,v:Pe}}function A(R,B,oe){R=de(R,360)*6,B=de(B,100),oe=de(oe,100);var ie=h.floor(R),xe=R-ie,_e=oe*(1-B),ke=oe*(1-xe*B),Pe=oe*(1-(1-xe)*B),Ge=ie%6,Je=[oe,ke,_e,_e,Pe,oe][Ge],yt=[Pe,oe,oe,ke,_e,_e][Ge],lt=[_e,_e,Pe,oe,oe,ke][Ge];return{r:Je*255,g:yt*255,b:lt*255}}function C(R,B,oe,ie){var xe=[Ae(v(R).toString(16)),Ae(v(B).toString(16)),Ae(v(oe).toString(16))];return ie&&xe[0].charAt(0)==xe[0].charAt(1)&&xe[1].charAt(0)==xe[1].charAt(1)&&xe[2].charAt(0)==xe[2].charAt(1)?xe[0].charAt(0)+xe[1].charAt(0)+xe[2].charAt(0):xe.join("")}function j(R,B,oe,ie,xe){var _e=[Ae(v(R).toString(16)),Ae(v(B).toString(16)),Ae(v(oe).toString(16)),Ae(te(ie))];return xe&&_e[0].charAt(0)==_e[0].charAt(1)&&_e[1].charAt(0)==_e[1].charAt(1)&&_e[2].charAt(0)==_e[2].charAt(1)&&_e[3].charAt(0)==_e[3].charAt(1)?_e[0].charAt(0)+_e[1].charAt(0)+_e[2].charAt(0)+_e[3].charAt(0):_e.join("")}function b(R,B,oe,ie){var xe=[Ae(te(ie)),Ae(v(R).toString(16)),Ae(v(B).toString(16)),Ae(v(oe).toString(16))];return xe.join("")}o.equals=function(R,B){return!R||!B?!1:o(R).toRgbString()==o(B).toRgbString()},o.random=function(){return o.fromRatio({r:w(),g:w(),b:w()})};function S(R,B){B=B===0?0:B||10;var oe=o(R).toHsl();return oe.s-=B/100,oe.s=ve(oe.s),o(oe)}function L(R,B){B=B===0?0:B||10;var oe=o(R).toHsl();return oe.s+=B/100,oe.s=ve(oe.s),o(oe)}function F(R){return o(R).desaturate(100)}function P(R,B){B=B===0?0:B||10;var oe=o(R).toHsl();return oe.l+=B/100,oe.l=ve(oe.l),o(oe)}function J(R,B){B=B===0?0:B||10;var oe=o(R).toRgb();return oe.r=g(0,m(255,oe.r-v(255*-(B/100)))),oe.g=g(0,m(255,oe.g-v(255*-(B/100)))),oe.b=g(0,m(255,oe.b-v(255*-(B/100)))),o(oe)}function H(R,B){B=B===0?0:B||10;var oe=o(R).toHsl();return oe.l-=B/100,oe.l=ve(oe.l),o(oe)}function Y(R,B){var oe=o(R).toHsl(),ie=(oe.h+B)%360;return oe.h=ie<0?360+ie:ie,o(oe)}function Z(R){var B=o(R).toHsl();return B.h=(B.h+180)%360,o(B)}function z(R){var B=o(R).toHsl(),oe=B.h;return[o(R),o({h:(oe+120)%360,s:B.s,l:B.l}),o({h:(oe+240)%360,s:B.s,l:B.l})]}function q(R){var B=o(R).toHsl(),oe=B.h;return[o(R),o({h:(oe+90)%360,s:B.s,l:B.l}),o({h:(oe+180)%360,s:B.s,l:B.l}),o({h:(oe+270)%360,s:B.s,l:B.l})]}function X(R){var B=o(R).toHsl(),oe=B.h;return[o(R),o({h:(oe+72)%360,s:B.s,l:B.l}),o({h:(oe+216)%360,s:B.s,l:B.l})]}function K(R,B,oe){B=B||6,oe=oe||30;var ie=o(R).toHsl(),xe=360/oe,_e=[o(R)];for(ie.h=(ie.h-(xe*B>>1)+720)%360;--B;)ie.h=(ie.h+xe)%360,_e.push(o(ie));return _e}function ee(R,B){B=B||6;for(var oe=o(R).toHsv(),ie=oe.h,xe=oe.s,_e=oe.v,ke=[],Pe=1/B;B--;)ke.push(o({h:ie,s:xe,v:_e})),_e=(_e+Pe)%1;return ke}o.mix=function(R,B,oe){oe=oe===0?0:oe||50;var ie=o(R).toRgb(),xe=o(B).toRgb(),_e=oe/100,ke={r:(xe.r-ie.r)*_e+ie.r,g:(xe.g-ie.g)*_e+ie.g,b:(xe.b-ie.b)*_e+ie.b,a:(xe.a-ie.a)*_e+ie.a};return o(ke)},o.readability=function(R,B){var oe=o(R),ie=o(B);return(h.max(oe.getLuminance(),ie.getLuminance())+.05)/(h.min(oe.getLuminance(),ie.getLuminance())+.05)},o.isReadable=function(R,B,oe){var ie=o.readability(R,B),xe,_e;switch(_e=!1,xe=re(oe),xe.level+xe.size){case"AAsmall":case"AAAlarge":_e=ie>=4.5;break;case"AAlarge":_e=ie>=3;break;case"AAAsmall":_e=ie>=7;break}return _e},o.mostReadable=function(R,B,oe){var ie=null,xe=0,_e,ke,Pe,Ge;oe=oe||{},ke=oe.includeFallbackColors,Pe=oe.level,Ge=oe.size;for(var Je=0;Je<B.length;Je++)_e=o.readability(R,B[Je]),_e>xe&&(xe=_e,ie=o(B[Je]));return o.isReadable(R,ie,{level:Pe,size:Ge})||!ke?ie:(oe.includeFallbackColors=!1,o.mostReadable(R,["#fff","#000"],oe))};var ne=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},le=o.hexNames=W(ne);function W(R){var B={};for(var oe in R)R.hasOwnProperty(oe)&&(B[R[oe]]=oe);return B}function ce(R){return R=parseFloat(R),(isNaN(R)||R<0||R>1)&&(R=1),R}function de(R,B){be(R)&&(R="100%");var oe=Le(R);return R=m(B,g(0,parseFloat(R))),oe&&(R=parseInt(R*B,10)/100),h.abs(R-B)<1e-6?1:R%B/parseFloat(B)}function ve(R){return m(1,g(0,R))}function pe(R){return parseInt(R,16)}function be(R){return typeof R=="string"&&R.indexOf(".")!=-1&&parseFloat(R)===1}function Le(R){return typeof R=="string"&&R.indexOf("%")!=-1}function Ae(R){return R.length==1?"0"+R:""+R}function We(R){return R<=1&&(R=R*100+"%"),R}function te(R){return h.round(parseFloat(R)*255).toString(16)}function ae(R){return pe(R)/255}var G=function(){var R="[-\\+]?\\d+%?",B="[-\\+]?\\d*\\.\\d+%?",oe="(?:"+B+")|(?:"+R+")",ie="[\\s|\\(]+("+oe+")[,|\\s]+("+oe+")[,|\\s]+("+oe+")\\s*\\)?",xe="[\\s|\\(]+("+oe+")[,|\\s]+("+oe+")[,|\\s]+("+oe+")[,|\\s]+("+oe+")\\s*\\)?";return{CSS_UNIT:new RegExp(oe),rgb:new RegExp("rgb"+ie),rgba:new RegExp("rgba"+xe),hsl:new RegExp("hsl"+ie),hsla:new RegExp("hsla"+xe),hsv:new RegExp("hsv"+ie),hsva:new RegExp("hsva"+xe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Q(R){return!!G.CSS_UNIT.exec(R)}function U(R){R=R.replace(c,"").replace(u,"").toLowerCase();var B=!1;if(ne[R])R=ne[R],B=!0;else if(R=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var oe;return(oe=G.rgb.exec(R))?{r:oe[1],g:oe[2],b:oe[3]}:(oe=G.rgba.exec(R))?{r:oe[1],g:oe[2],b:oe[3],a:oe[4]}:(oe=G.hsl.exec(R))?{h:oe[1],s:oe[2],l:oe[3]}:(oe=G.hsla.exec(R))?{h:oe[1],s:oe[2],l:oe[3],a:oe[4]}:(oe=G.hsv.exec(R))?{h:oe[1],s:oe[2],v:oe[3]}:(oe=G.hsva.exec(R))?{h:oe[1],s:oe[2],v:oe[3],a:oe[4]}:(oe=G.hex8.exec(R))?{r:pe(oe[1]),g:pe(oe[2]),b:pe(oe[3]),a:ae(oe[4]),format:B?"name":"hex8"}:(oe=G.hex6.exec(R))?{r:pe(oe[1]),g:pe(oe[2]),b:pe(oe[3]),format:B?"name":"hex"}:(oe=G.hex4.exec(R))?{r:pe(oe[1]+""+oe[1]),g:pe(oe[2]+""+oe[2]),b:pe(oe[3]+""+oe[3]),a:ae(oe[4]+""+oe[4]),format:B?"name":"hex8"}:(oe=G.hex3.exec(R))?{r:pe(oe[1]+""+oe[1]),g:pe(oe[2]+""+oe[2]),b:pe(oe[3]+""+oe[3]),format:B?"name":"hex"}:!1}function re(R){var B,oe;return R=R||{level:"AA",size:"small"},B=(R.level||"AA").toUpperCase(),oe=(R.size||"small").toLowerCase(),B!=="AA"&&B!=="AAA"&&(B="AA"),oe!=="small"&&oe!=="large"&&(oe="small"),{level:B,size:oe}}typeof $<"u"&&$.exports?$.exports=o:window.tinycolor=o})(Math)}}),Pt=i({"src/lib/extend.js"(V){var $=Ve(),h=Array.isArray;function c(p,v){var m,g;for(m=0;m<p.length;m++){if(g=p[m],g!==null&&typeof g=="object")return!1;g!==void 0&&(v[m]=g)}return!0}V.extendFlat=function(){return u(arguments,!1,!1,!1)},V.extendDeep=function(){return u(arguments,!0,!1,!1)},V.extendDeepAll=function(){return u(arguments,!0,!0,!1)},V.extendDeepNoArrays=function(){return u(arguments,!0,!1,!0)};function u(p,v,m,g){var w=p[0],o=p.length,T,y,k,D,M,A,C;if(o===2&&h(w)&&h(p[1])&&w.length===0){if(C=c(p[1],w),C)return w;w.splice(0,w.length)}for(var j=1;j<o;j++){T=p[j];for(y in T)k=w[y],D=T[y],g&&h(D)?w[y]=D:v&&D&&($(D)||(M=h(D)))?(M?(M=!1,A=k&&h(k)?k:[]):A=k&&$(k)?k:{},w[y]=u([A,D],v,m,g)):(typeof D<"u"||m)&&(w[y]=D)}return w}}}),ir=i({"src/plots/font_attributes.js"(V,$){$.exports=function(h){var c=h.variantValues,u=h.editType,p=h.colorEditType;p===void 0&&(p=u);var v={editType:u,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};h.noNumericWeightValues&&(v.valType="enumerated",v.values=v.extras,v.extras=void 0,v.min=void 0,v.max=void 0);var m={family:{valType:"string",noBlank:!0,strict:!0,editType:u},size:{valType:"number",min:1,editType:u},color:{valType:"color",editType:p},weight:v,style:{editType:u,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:h.noFontVariant?void 0:{editType:u,valType:"enumerated",values:c||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:h.noFontTextcase?void 0:{editType:u,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:h.noFontLineposition?void 0:{editType:u,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:h.noFontShadow?void 0:{editType:u,valType:"string",dflt:h.autoShadowDflt?"auto":"none"},editType:u};return h.autoSize&&(m.size.dflt="auto"),h.autoColor&&(m.color.dflt="auto"),h.arrayOk&&(m.family.arrayOk=!0,m.weight.arrayOk=!0,m.style.arrayOk=!0,h.noFontVariant||(m.variant.arrayOk=!0),h.noFontTextcase||(m.textcase.arrayOk=!0),h.noFontLineposition||(m.lineposition.arrayOk=!0),h.noFontShadow||(m.shadow.arrayOk=!0),m.size.arrayOk=!0,m.color.arrayOk=!0),m}}}),mr=i({"src/components/fx/constants.js"(V,$){$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}}}),kr=i({"src/components/fx/layout_attributes.js"(V,$){var h=mr(),c=ir(),u=c({editType:"none"});u.family.dflt=h.HOVERFONT,u.size.dflt=h.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:u,grouptitlefont:c({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}}}),yr=i({"src/components/fx/attributes.js"(V,$){var h=ir(),c=kr().hoverlabel,u=Pt().extendFlat;$.exports={hoverlabel:{bgcolor:u({},c.bgcolor,{arrayOk:!0}),bordercolor:u({},c.bordercolor,{arrayOk:!0}),font:h({arrayOk:!0,editType:"none"}),align:u({},c.align,{arrayOk:!0}),namelength:u({},c.namelength,{arrayOk:!0}),editType:"none"}}}}),vt=i({"src/plots/attributes.js"(V,$){var h=ir(),c=yr();$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:h({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:c.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}}}),gt=i({"src/components/colorscale/scales.js"(V,$){var h=xt(),c={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},u=c.RdBu;function p(g,w){if(w||(w=u),!g)return w;function o(){try{g=c[g]||JSON.parse(g)}catch{g=w}}return typeof g=="string"&&(o(),typeof g=="string"&&o()),v(g)?g:w}function v(g){var w=0;if(!Array.isArray(g)||g.length<2||!g[0]||!g[g.length-1]||+g[0][0]!=0||+g[g.length-1][0]!=1)return!1;for(var o=0;o<g.length;o++){var T=g[o];if(T.length!==2||+T[0]<w||!h(T[1]).isValid())return!1;w=+T[0]}return!0}function m(g){return c[g]!==void 0?!0:v(g)}$.exports={scales:c,defaultScale:u,get:p,isValid:m}}}),It=i({"src/components/color/attributes.js"(V){V.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],V.defaultLine="#444",V.lightLine="#eee",V.background="#fff",V.borderLine="#BEC8D9",V.lightFraction=100*10/11}}),ut=i({"src/components/color/index.js"(V,$){var h=xt(),c=fe(),u=Ue().isTypedArray,p=$.exports={},v=It();p.defaults=v.defaults;var m=p.defaultLine=v.defaultLine;p.lightLine=v.lightLine;var g=p.background=v.background;p.tinyRGB=function(o){var T=o.toRgb();return"rgb("+Math.round(T.r)+", "+Math.round(T.g)+", "+Math.round(T.b)+")"},p.rgb=function(o){return p.tinyRGB(h(o))},p.opacity=function(o){return o?h(o).getAlpha():0},p.addOpacity=function(o,T){var y=h(o).toRgb();return"rgba("+Math.round(y.r)+", "+Math.round(y.g)+", "+Math.round(y.b)+", "+T+")"},p.combine=function(o,T){var y=h(o).toRgb();if(y.a===1)return h(o).toRgbString();var k=h(T||g).toRgb(),D=k.a===1?k:{r:255*(1-k.a)+k.r*k.a,g:255*(1-k.a)+k.g*k.a,b:255*(1-k.a)+k.b*k.a},M={r:D.r*(1-y.a)+y.r*y.a,g:D.g*(1-y.a)+y.g*y.a,b:D.b*(1-y.a)+y.b*y.a};return h(M).toRgbString()},p.interpolate=function(o,T,y){var k=h(o).toRgb(),D=h(T).toRgb(),M={r:y*k.r+(1-y)*D.r,g:y*k.g+(1-y)*D.g,b:y*k.b+(1-y)*D.b};return h(M).toRgbString()},p.contrast=function(o,T,y){var k=h(o);k.getAlpha()!==1&&(k=h(p.combine(o,g)));var D=k.isDark()?T?k.lighten(T):g:y?k.darken(y):m;return D.toString()},p.stroke=function(o,T){var y=h(T);o.style({stroke:p.tinyRGB(y),"stroke-opacity":y.getAlpha()})},p.fill=function(o,T){var y=h(T);o.style({fill:p.tinyRGB(y),"fill-opacity":y.getAlpha()})},p.clean=function(o){if(!(!o||typeof o!="object")){var T=Object.keys(o),y,k,D,M;for(y=0;y<T.length;y++)if(D=T[y],M=o[D],D.substr(D.length-5)==="color")if(Array.isArray(M))for(k=0;k<M.length;k++)M[k]=w(M[k]);else o[D]=w(M);else if(D.substr(D.length-10)==="colorscale"&&Array.isArray(M))for(k=0;k<M.length;k++)Array.isArray(M[k])&&(M[k][1]=w(M[k][1]));else if(Array.isArray(M)){var A=M[0];if(!Array.isArray(A)&&A&&typeof A=="object")for(k=0;k<M.length;k++)p.clean(M[k])}else M&&typeof M=="object"&&!u(M)&&p.clean(M)}};function w(o){if(c(o)||typeof o!="string")return o;var T=o.trim();if(T.substr(0,3)!=="rgb")return o;var y=T.match(/^rgba?\s*\(([^()]*)\)$/);if(!y)return o;var k=y[1].trim().split(/\s*[\s,]\s*/),D=T.charAt(3)==="a"&&k.length===4;if(!D&&k.length!==3)return o;for(var M=0;M<k.length;M++){if(!k[M].length||(k[M]=Number(k[M]),!(k[M]>=0)))return o;if(M===3)k[M]>1&&(k[M]=1);else if(k[M]>=1)return o}var A=Math.round(k[0]*255)+", "+Math.round(k[1]*255)+", "+Math.round(k[2]*255);return D?"rgba("+A+", "+k[3]+")":"rgb("+A+")"}}}),qt=i({"src/constants/interactions.js"(V,$){$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}}}),Vt=i({"src/lib/regex.js"(V){V.counter=function($,h,c,u){var p=(h||"")+(c?"":"$"),v=u===!1?"":"^";return $==="xy"?new RegExp(v+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+p):new RegExp(v+$+"([2-9]|[1-9][0-9]+)?"+p)}}}),Ot=i({"src/lib/coerce.js"(V){var $=fe(),h=xt(),c=Pt().extendFlat,u=vt(),p=gt(),v=ut(),m=qt().DESELECTDIM,g=Ee(),w=Vt().counter,o=ct().modHalf,T=Ue().isArrayOrTypedArray,y=Ue().isTypedArraySpec,k=Ue().decodeTypedArraySpec;V.valObjectMeta={data_array:{coerceFunction:function(M,A,C){A.set(T(M)?M:y(M)?k(M):C)}},enumerated:{coerceFunction:function(M,A,C,j){j.coerceNumber&&(M=+M),j.values.indexOf(M)===-1?A.set(C):A.set(M)},validateFunction:function(M,A){A.coerceNumber&&(M=+M);for(var C=A.values,j=0;j<C.length;j++){var b=String(C[j]);if(b.charAt(0)==="/"&&b.charAt(b.length-1)==="/"){var S=new RegExp(b.substr(1,b.length-2));if(S.test(M))return!0}else if(M===C[j])return!0}return!1}},boolean:{coerceFunction:function(M,A,C){M===!0||M===!1?A.set(M):A.set(C)}},number:{coerceFunction:function(M,A,C,j){y(M)&&(M=k(M)),!$(M)||j.min!==void 0&&M<j.min||j.max!==void 0&&M>j.max?A.set(C):A.set(+M)}},integer:{coerceFunction:function(M,A,C,j){if((j.extras||[]).indexOf(M)!==-1){A.set(M);return}y(M)&&(M=k(M)),M%1||!$(M)||j.min!==void 0&&M<j.min||j.max!==void 0&&M>j.max?A.set(C):A.set(+M)}},string:{coerceFunction:function(M,A,C,j){if(typeof M!="string"){var b=typeof M=="number";j.strict===!0||!b?A.set(C):A.set(String(M))}else j.noBlank&&!M?A.set(C):A.set(M)}},color:{coerceFunction:function(M,A,C){y(M)&&(M=k(M)),h(M).isValid()?A.set(M):A.set(C)}},colorlist:{coerceFunction:function(M,A,C){function j(b){return h(b).isValid()}!Array.isArray(M)||!M.length?A.set(C):M.every(j)?A.set(M):A.set(C)}},colorscale:{coerceFunction:function(M,A,C){A.set(p.get(M,C))}},angle:{coerceFunction:function(M,A,C){y(M)&&(M=k(M)),M==="auto"?A.set("auto"):$(M)?A.set(o(+M,360)):A.set(C)}},subplotid:{coerceFunction:function(M,A,C,j){var b=j.regex||w(C);if(typeof M=="string"&&b.test(M)){A.set(M);return}A.set(C)},validateFunction:function(M,A){var C=A.dflt;return M===C?!0:typeof M!="string"?!1:!!w(C).test(M)}},flaglist:{coerceFunction:function(M,A,C,j){if((j.extras||[]).indexOf(M)!==-1){A.set(M);return}if(typeof M!="string"){A.set(C);return}for(var b=M.split("+"),S=0;S<b.length;){var L=b[S];j.flags.indexOf(L)===-1||b.indexOf(L)<S?b.splice(S,1):S++}b.length?A.set(b.join("+")):A.set(C)}},any:{coerceFunction:function(M,A,C){M===void 0?A.set(C):A.set(y(M)?k(M):M)}},info_array:{coerceFunction:function(M,A,C,j){function b(ne,le,W){var ce,de={set:function(ve){ce=ve}};return W===void 0&&(W=le.dflt),V.valObjectMeta[le.valType].coerceFunction(ne,de,W,le),ce}if(y(M)&&(M=k(M)),!T(M)){A.set(C);return}var S=j.dimensions===2||j.dimensions==="1-2"&&Array.isArray(M)&&T(M[0]),L=j.items,F=[],P=Array.isArray(L),J=P&&S&&T(L[0]),H=S&&P&&!J,Y=P&&!H?L.length:M.length,Z,z,q,X,K,ee;if(C=Array.isArray(C)?C:[],S)for(Z=0;Z<Y;Z++)for(F[Z]=[],q=T(M[Z])?M[Z]:[],H?K=L.length:P?K=L[Z].length:K=q.length,z=0;z<K;z++)H?X=L[z]:P?X=L[Z][z]:X=L,ee=b(q[z],X,(C[Z]||[])[z]),ee!==void 0&&(F[Z][z]=ee);else for(Z=0;Z<Y;Z++)ee=b(M[Z],P?L[Z]:L,C[Z]),ee!==void 0&&(F[Z]=ee);A.set(F)},validateFunction:function(M,A){if(!T(M))return!1;var C=A.items,j=Array.isArray(C),b=A.dimensions===2;if(!A.freeLength&&M.length!==C.length)return!1;for(var S=0;S<M.length;S++)if(b){if(!T(M[S])||!A.freeLength&&M[S].length!==C[S].length)return!1;for(var L=0;L<M[S].length;L++)if(!D(M[S][L],j?C[S][L]:C))return!1}else if(!D(M[S],j?C[S]:C))return!1;return!0}}},V.coerce=function(M,A,C,j,b){var S=g(C,j).get(),L=g(M,j),F=g(A,j),P=L.get(),J=A._template;if(P===void 0&&J&&(P=g(J,j).get(),J=0),b===void 0&&(b=S.dflt),S.arrayOk){if(T(P))return F.set(P),P;if(y(P))return P=k(P),F.set(P),P}var H=V.valObjectMeta[S.valType].coerceFunction;H(P,F,b,S);var Y=F.get();return J&&Y===b&&!D(P,S)&&(P=g(J,j).get(),H(P,F,b,S),Y=F.get()),Y},V.coerce2=function(M,A,C,j,b){var S=g(M,j),L=V.coerce(M,A,C,j,b),F=S.get();return F!=null?L:!1},V.coerceFont=function(M,A,C,j){j||(j={}),C=c({},C),C=c(C,j.overrideDflt||{});var b={family:M(A+".family",C.family),size:M(A+".size",C.size),color:M(A+".color",C.color),weight:M(A+".weight",C.weight),style:M(A+".style",C.style)};if(j.noFontVariant||(b.variant=M(A+".variant",C.variant)),j.noFontLineposition||(b.lineposition=M(A+".lineposition",C.lineposition)),j.noFontTextcase||(b.textcase=M(A+".textcase",C.textcase)),!j.noFontShadow){var S=C.shadow;S==="none"&&j.autoShadowDflt&&(S="auto"),b.shadow=M(A+".shadow",S)}return b},V.coercePattern=function(M,A,C,j){var b=M(A+".shape");if(b){M(A+".solidity"),M(A+".size");var S=M(A+".fillmode"),L=S==="overlay";if(!j){var F=M(A+".bgcolor",L?C:void 0);M(A+".fgcolor",L?v.contrast(F):C)}M(A+".fgopacity",L?.5:1)}},V.coerceHoverinfo=function(M,A,C){var j=A._module.attributes,b=j.hoverinfo?j:u,S=b.hoverinfo,L;if(C._dataLength===1){var F=S.dflt==="all"?S.flags.slice():S.dflt.split("+");F.splice(F.indexOf("name"),1),L=F.join("+")}return V.coerce(M,A,b,"hoverinfo",L)},V.coerceSelectionMarkerOpacity=function(M,A){if(M.marker){var C=M.marker.opacity;if(C!==void 0){var j,b;!T(C)&&!M.selected&&!M.unselected&&(j=C,b=m*C),A("selected.marker.opacity",j),A("unselected.marker.opacity",b)}}};function D(M,A){var C=V.valObjectMeta[A.valType];if(A.arrayOk&&T(M))return!0;if(C.validateFunction)return C.validateFunction(M,A);var j={},b=j,S={set:function(L){b=L}};return C.coerceFunction(M,S,j,A),b!==j}V.validate=D}}),Ht=i({"src/plot_api/plot_config.js"(V,$){var h={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},c={};function u(p,v){for(var m in p){var g=p[m];g.valType?v[m]=g.dflt:(v[m]||(v[m]={}),u(g,v[m]))}}u(h,c),$.exports={configAttributes:h,dfltConfig:c}}}),Qt=i({"src/lib/notifier.js"(V,$){var h=f(),c=fe(),u=[];$.exports=function(p,v){if(u.indexOf(p)!==-1)return;u.push(p);var m=1e3;c(v)?m=v:v==="long"&&(m=3e3);var g=h.select("body").selectAll(".plotly-notifier").data([0]);g.enter().append("div").classed("plotly-notifier",!0);var w=g.selectAll(".notifier-note").data(u);function o(T){T.duration(700).style("opacity",0).each("end",function(y){var k=u.indexOf(y);k!==-1&&u.splice(k,1),h.select(this).remove()})}w.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(T){var y=h.select(this);y.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){y.transition().call(o)});for(var k=y.append("p"),D=T.split(/<br\s*\/?>/g),M=0;M<D.length;M++)M&&k.append("br"),k.append("span").text(D[M]);v==="stick"?y.transition().duration(350).style("opacity",1):y.transition().duration(700).style("opacity",1).transition().delay(m).call(o)})}}}),er=i({"src/lib/loggers.js"(V,$){var h=Ht().dfltConfig,c=Qt(),u=$.exports={};u.log=function(){var p;if(h.logging>1){var v=["LOG:"];for(p=0;p<arguments.length;p++)v.push(arguments[p]);console.trace.apply(console,v)}if(h.notifyOnLogging>1){var m=[];for(p=0;p<arguments.length;p++)m.push(arguments[p]);c(m.join("<br>"),"long")}},u.warn=function(){var p;if(h.logging>0){var v=["WARN:"];for(p=0;p<arguments.length;p++)v.push(arguments[p]);console.trace.apply(console,v)}if(h.notifyOnLogging>0){var m=[];for(p=0;p<arguments.length;p++)m.push(arguments[p]);c(m.join("<br>"),"stick")}},u.error=function(){var p;if(h.logging>0){var v=["ERROR:"];for(p=0;p<arguments.length;p++)v.push(arguments[p]);console.error.apply(console,v)}if(h.notifyOnLogging>0){var m=[];for(p=0;p<arguments.length;p++)m.push(arguments[p]);c(m.join("<br>"),"stick")}}}}),kt=i({"src/lib/noop.js"(V,$){$.exports=function(){}}}),lr=i({"src/lib/push_unique.js"(V,$){$.exports=function(c,u){if(u instanceof RegExp){for(var p=u.toString(),v=0;v<c.length;v++)if(c[v]instanceof RegExp&&c[v].toString()===p)return c;c.push(u)}else(u||u===0)&&c.indexOf(u)===-1&&c.push(u);return c}}}),dr=i({"node_modules/gl-mat4/create.js"(V,$){$.exports=h;function h(){var c=new Float32Array(16);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),Ar=i({"node_modules/gl-mat4/clone.js"(V,$){$.exports=h;function h(c){var u=new Float32Array(16);return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u}}}),Nr=i({"node_modules/gl-mat4/copy.js"(V,$){$.exports=h;function h(c,u){return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15],c}}}),hn=i({"node_modules/gl-mat4/identity.js"(V,$){$.exports=h;function h(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),Wn=i({"node_modules/gl-mat4/transpose.js"(V,$){$.exports=h;function h(c,u){if(c===u){var p=u[1],v=u[2],m=u[3],g=u[6],w=u[7],o=u[11];c[1]=u[4],c[2]=u[8],c[3]=u[12],c[4]=p,c[6]=u[9],c[7]=u[13],c[8]=v,c[9]=g,c[11]=u[14],c[12]=m,c[13]=w,c[14]=o}else c[0]=u[0],c[1]=u[4],c[2]=u[8],c[3]=u[12],c[4]=u[1],c[5]=u[5],c[6]=u[9],c[7]=u[13],c[8]=u[2],c[9]=u[6],c[10]=u[10],c[11]=u[14],c[12]=u[3],c[13]=u[7],c[14]=u[11],c[15]=u[15];return c}}}),Sn=i({"node_modules/gl-mat4/invert.js"(V,$){$.exports=h;function h(c,u){var p=u[0],v=u[1],m=u[2],g=u[3],w=u[4],o=u[5],T=u[6],y=u[7],k=u[8],D=u[9],M=u[10],A=u[11],C=u[12],j=u[13],b=u[14],S=u[15],L=p*o-v*w,F=p*T-m*w,P=p*y-g*w,J=v*T-m*o,H=v*y-g*o,Y=m*y-g*T,Z=k*j-D*C,z=k*b-M*C,q=k*S-A*C,X=D*b-M*j,K=D*S-A*j,ee=M*S-A*b,ne=L*ee-F*K+P*X+J*q-H*z+Y*Z;return ne?(ne=1/ne,c[0]=(o*ee-T*K+y*X)*ne,c[1]=(m*K-v*ee-g*X)*ne,c[2]=(j*Y-b*H+S*J)*ne,c[3]=(M*H-D*Y-A*J)*ne,c[4]=(T*q-w*ee-y*z)*ne,c[5]=(p*ee-m*q+g*z)*ne,c[6]=(b*P-C*Y-S*F)*ne,c[7]=(k*Y-M*P+A*F)*ne,c[8]=(w*K-o*q+y*Z)*ne,c[9]=(v*q-p*K-g*Z)*ne,c[10]=(C*H-j*P+S*L)*ne,c[11]=(D*P-k*H-A*L)*ne,c[12]=(o*z-w*X-T*Z)*ne,c[13]=(p*X-v*z+m*Z)*ne,c[14]=(j*F-C*J-b*L)*ne,c[15]=(k*J-D*F+M*L)*ne,c):null}}}),Tn=i({"node_modules/gl-mat4/adjoint.js"(V,$){$.exports=h;function h(c,u){var p=u[0],v=u[1],m=u[2],g=u[3],w=u[4],o=u[5],T=u[6],y=u[7],k=u[8],D=u[9],M=u[10],A=u[11],C=u[12],j=u[13],b=u[14],S=u[15];return c[0]=o*(M*S-A*b)-D*(T*S-y*b)+j*(T*A-y*M),c[1]=-(v*(M*S-A*b)-D*(m*S-g*b)+j*(m*A-g*M)),c[2]=v*(T*S-y*b)-o*(m*S-g*b)+j*(m*y-g*T),c[3]=-(v*(T*A-y*M)-o*(m*A-g*M)+D*(m*y-g*T)),c[4]=-(w*(M*S-A*b)-k*(T*S-y*b)+C*(T*A-y*M)),c[5]=p*(M*S-A*b)-k*(m*S-g*b)+C*(m*A-g*M),c[6]=-(p*(T*S-y*b)-w*(m*S-g*b)+C*(m*y-g*T)),c[7]=p*(T*A-y*M)-w*(m*A-g*M)+k*(m*y-g*T),c[8]=w*(D*S-A*j)-k*(o*S-y*j)+C*(o*A-y*D),c[9]=-(p*(D*S-A*j)-k*(v*S-g*j)+C*(v*A-g*D)),c[10]=p*(o*S-y*j)-w*(v*S-g*j)+C*(v*y-g*o),c[11]=-(p*(o*A-y*D)-w*(v*A-g*D)+k*(v*y-g*o)),c[12]=-(w*(D*b-M*j)-k*(o*b-T*j)+C*(o*M-T*D)),c[13]=p*(D*b-M*j)-k*(v*b-m*j)+C*(v*M-m*D),c[14]=-(p*(o*b-T*j)-w*(v*b-m*j)+C*(v*T-m*o)),c[15]=p*(o*M-T*D)-w*(v*M-m*D)+k*(v*T-m*o),c}}}),zn=i({"node_modules/gl-mat4/determinant.js"(V,$){$.exports=h;function h(c){var u=c[0],p=c[1],v=c[2],m=c[3],g=c[4],w=c[5],o=c[6],T=c[7],y=c[8],k=c[9],D=c[10],M=c[11],A=c[12],C=c[13],j=c[14],b=c[15],S=u*w-p*g,L=u*o-v*g,F=u*T-m*g,P=p*o-v*w,J=p*T-m*w,H=v*T-m*o,Y=y*C-k*A,Z=y*j-D*A,z=y*b-M*A,q=k*j-D*C,X=k*b-M*C,K=D*b-M*j;return S*K-L*X+F*q+P*z-J*Z+H*Y}}}),Bi=i({"node_modules/gl-mat4/multiply.js"(V,$){$.exports=h;function h(c,u,p){var v=u[0],m=u[1],g=u[2],w=u[3],o=u[4],T=u[5],y=u[6],k=u[7],D=u[8],M=u[9],A=u[10],C=u[11],j=u[12],b=u[13],S=u[14],L=u[15],F=p[0],P=p[1],J=p[2],H=p[3];return c[0]=F*v+P*o+J*D+H*j,c[1]=F*m+P*T+J*M+H*b,c[2]=F*g+P*y+J*A+H*S,c[3]=F*w+P*k+J*C+H*L,F=p[4],P=p[5],J=p[6],H=p[7],c[4]=F*v+P*o+J*D+H*j,c[5]=F*m+P*T+J*M+H*b,c[6]=F*g+P*y+J*A+H*S,c[7]=F*w+P*k+J*C+H*L,F=p[8],P=p[9],J=p[10],H=p[11],c[8]=F*v+P*o+J*D+H*j,c[9]=F*m+P*T+J*M+H*b,c[10]=F*g+P*y+J*A+H*S,c[11]=F*w+P*k+J*C+H*L,F=p[12],P=p[13],J=p[14],H=p[15],c[12]=F*v+P*o+J*D+H*j,c[13]=F*m+P*T+J*M+H*b,c[14]=F*g+P*y+J*A+H*S,c[15]=F*w+P*k+J*C+H*L,c}}}),rs=i({"node_modules/gl-mat4/translate.js"(V,$){$.exports=h;function h(c,u,p){var v=p[0],m=p[1],g=p[2],w,o,T,y,k,D,M,A,C,j,b,S;return u===c?(c[12]=u[0]*v+u[4]*m+u[8]*g+u[12],c[13]=u[1]*v+u[5]*m+u[9]*g+u[13],c[14]=u[2]*v+u[6]*m+u[10]*g+u[14],c[15]=u[3]*v+u[7]*m+u[11]*g+u[15]):(w=u[0],o=u[1],T=u[2],y=u[3],k=u[4],D=u[5],M=u[6],A=u[7],C=u[8],j=u[9],b=u[10],S=u[11],c[0]=w,c[1]=o,c[2]=T,c[3]=y,c[4]=k,c[5]=D,c[6]=M,c[7]=A,c[8]=C,c[9]=j,c[10]=b,c[11]=S,c[12]=w*v+k*m+C*g+u[12],c[13]=o*v+D*m+j*g+u[13],c[14]=T*v+M*m+b*g+u[14],c[15]=y*v+A*m+S*g+u[15]),c}}}),Sa=i({"node_modules/gl-mat4/scale.js"(V,$){$.exports=h;function h(c,u,p){var v=p[0],m=p[1],g=p[2];return c[0]=u[0]*v,c[1]=u[1]*v,c[2]=u[2]*v,c[3]=u[3]*v,c[4]=u[4]*m,c[5]=u[5]*m,c[6]=u[6]*m,c[7]=u[7]*m,c[8]=u[8]*g,c[9]=u[9]*g,c[10]=u[10]*g,c[11]=u[11]*g,c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15],c}}}),zr=i({"node_modules/gl-mat4/rotate.js"(V,$){$.exports=h;function h(c,u,p,v){var m=v[0],g=v[1],w=v[2],o=Math.sqrt(m*m+g*g+w*w),T,y,k,D,M,A,C,j,b,S,L,F,P,J,H,Y,Z,z,q,X,K,ee,ne,le;return Math.abs(o)<1e-6?null:(o=1/o,m*=o,g*=o,w*=o,T=Math.sin(p),y=Math.cos(p),k=1-y,D=u[0],M=u[1],A=u[2],C=u[3],j=u[4],b=u[5],S=u[6],L=u[7],F=u[8],P=u[9],J=u[10],H=u[11],Y=m*m*k+y,Z=g*m*k+w*T,z=w*m*k-g*T,q=m*g*k-w*T,X=g*g*k+y,K=w*g*k+m*T,ee=m*w*k+g*T,ne=g*w*k-m*T,le=w*w*k+y,c[0]=D*Y+j*Z+F*z,c[1]=M*Y+b*Z+P*z,c[2]=A*Y+S*Z+J*z,c[3]=C*Y+L*Z+H*z,c[4]=D*q+j*X+F*K,c[5]=M*q+b*X+P*K,c[6]=A*q+S*X+J*K,c[7]=C*q+L*X+H*K,c[8]=D*ee+j*ne+F*le,c[9]=M*ee+b*ne+P*le,c[10]=A*ee+S*ne+J*le,c[11]=C*ee+L*ne+H*le,u!==c&&(c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]),c)}}}),sn=i({"node_modules/gl-mat4/rotateX.js"(V,$){$.exports=h;function h(c,u,p){var v=Math.sin(p),m=Math.cos(p),g=u[4],w=u[5],o=u[6],T=u[7],y=u[8],k=u[9],D=u[10],M=u[11];return u!==c&&(c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]),c[4]=g*m+y*v,c[5]=w*m+k*v,c[6]=o*m+D*v,c[7]=T*m+M*v,c[8]=y*m-g*v,c[9]=k*m-w*v,c[10]=D*m-o*v,c[11]=M*m-T*v,c}}}),jr=i({"node_modules/gl-mat4/rotateY.js"(V,$){$.exports=h;function h(c,u,p){var v=Math.sin(p),m=Math.cos(p),g=u[0],w=u[1],o=u[2],T=u[3],y=u[8],k=u[9],D=u[10],M=u[11];return u!==c&&(c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]),c[0]=g*m-y*v,c[1]=w*m-k*v,c[2]=o*m-D*v,c[3]=T*m-M*v,c[8]=g*v+y*m,c[9]=w*v+k*m,c[10]=o*v+D*m,c[11]=T*v+M*m,c}}}),Rn=i({"node_modules/gl-mat4/rotateZ.js"(V,$){$.exports=h;function h(c,u,p){var v=Math.sin(p),m=Math.cos(p),g=u[0],w=u[1],o=u[2],T=u[3],y=u[4],k=u[5],D=u[6],M=u[7];return u!==c&&(c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]),c[0]=g*m+y*v,c[1]=w*m+k*v,c[2]=o*m+D*v,c[3]=T*m+M*v,c[4]=y*m-g*v,c[5]=k*m-w*v,c[6]=D*m-o*v,c[7]=M*m-T*v,c}}}),Zn=i({"node_modules/gl-mat4/fromRotation.js"(V,$){$.exports=h;function h(c,u,p){var v,m,g,w=p[0],o=p[1],T=p[2],y=Math.sqrt(w*w+o*o+T*T);return Math.abs(y)<1e-6?null:(y=1/y,w*=y,o*=y,T*=y,v=Math.sin(u),m=Math.cos(u),g=1-m,c[0]=w*w*g+m,c[1]=o*w*g+T*v,c[2]=T*w*g-o*v,c[3]=0,c[4]=w*o*g-T*v,c[5]=o*o*g+m,c[6]=T*o*g+w*v,c[7]=0,c[8]=w*T*g+o*v,c[9]=o*T*g-w*v,c[10]=T*T*g+m,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}}}),Pr=i({"node_modules/gl-mat4/fromRotationTranslation.js"(V,$){$.exports=h;function h(c,u,p){var v=u[0],m=u[1],g=u[2],w=u[3],o=v+v,T=m+m,y=g+g,k=v*o,D=v*T,M=v*y,A=m*T,C=m*y,j=g*y,b=w*o,S=w*T,L=w*y;return c[0]=1-(A+j),c[1]=D+L,c[2]=M-S,c[3]=0,c[4]=D-L,c[5]=1-(k+j),c[6]=C+b,c[7]=0,c[8]=M+S,c[9]=C-b,c[10]=1-(k+A),c[11]=0,c[12]=p[0],c[13]=p[1],c[14]=p[2],c[15]=1,c}}}),wn=i({"node_modules/gl-mat4/fromScaling.js"(V,$){$.exports=h;function h(c,u){return c[0]=u[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=u[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=u[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),Xn=i({"node_modules/gl-mat4/fromTranslation.js"(V,$){$.exports=h;function h(c,u){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=u[0],c[13]=u[1],c[14]=u[2],c[15]=1,c}}}),li=i({"node_modules/gl-mat4/fromXRotation.js"(V,$){$.exports=h;function h(c,u){var p=Math.sin(u),v=Math.cos(u);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=v,c[6]=p,c[7]=0,c[8]=0,c[9]=-p,c[10]=v,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),Ti=i({"node_modules/gl-mat4/fromYRotation.js"(V,$){$.exports=h;function h(c,u){var p=Math.sin(u),v=Math.cos(u);return c[0]=v,c[1]=0,c[2]=-p,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=p,c[9]=0,c[10]=v,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),ca=i({"node_modules/gl-mat4/fromZRotation.js"(V,$){$.exports=h;function h(c,u){var p=Math.sin(u),v=Math.cos(u);return c[0]=v,c[1]=p,c[2]=0,c[3]=0,c[4]=-p,c[5]=v,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),va=i({"node_modules/gl-mat4/fromQuat.js"(V,$){$.exports=h;function h(c,u){var p=u[0],v=u[1],m=u[2],g=u[3],w=p+p,o=v+v,T=m+m,y=p*w,k=v*w,D=v*o,M=m*w,A=m*o,C=m*T,j=g*w,b=g*o,S=g*T;return c[0]=1-D-C,c[1]=k+S,c[2]=M-b,c[3]=0,c[4]=k-S,c[5]=1-y-C,c[6]=A+j,c[7]=0,c[8]=M+b,c[9]=A-j,c[10]=1-y-D,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}}),ni=i({"node_modules/gl-mat4/frustum.js"(V,$){$.exports=h;function h(c,u,p,v,m,g,w){var o=1/(p-u),T=1/(m-v),y=1/(g-w);return c[0]=g*2*o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=g*2*T,c[6]=0,c[7]=0,c[8]=(p+u)*o,c[9]=(m+v)*T,c[10]=(w+g)*y,c[11]=-1,c[12]=0,c[13]=0,c[14]=w*g*2*y,c[15]=0,c}}}),ga=i({"node_modules/gl-mat4/perspective.js"(V,$){$.exports=h;function h(c,u,p,v,m){var g=1/Math.tan(u/2),w=1/(v-m);return c[0]=g/p,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=g,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=(m+v)*w,c[11]=-1,c[12]=0,c[13]=0,c[14]=2*m*v*w,c[15]=0,c}}}),Hn=i({"node_modules/gl-mat4/perspectiveFromFieldOfView.js"(V,$){$.exports=h;function h(c,u,p,v){var m=Math.tan(u.upDegrees*Math.PI/180),g=Math.tan(u.downDegrees*Math.PI/180),w=Math.tan(u.leftDegrees*Math.PI/180),o=Math.tan(u.rightDegrees*Math.PI/180),T=2/(w+o),y=2/(m+g);return c[0]=T,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=y,c[6]=0,c[7]=0,c[8]=-((w-o)*T*.5),c[9]=(m-g)*y*.5,c[10]=v/(p-v),c[11]=-1,c[12]=0,c[13]=0,c[14]=v*p/(p-v),c[15]=0,c}}}),ti=i({"node_modules/gl-mat4/ortho.js"(V,$){$.exports=h;function h(c,u,p,v,m,g,w){var o=1/(u-p),T=1/(v-m),y=1/(g-w);return c[0]=-2*o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*T,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*y,c[11]=0,c[12]=(u+p)*o,c[13]=(m+v)*T,c[14]=(w+g)*y,c[15]=1,c}}}),Ai=i({"node_modules/gl-mat4/lookAt.js"(V,$){var h=hn();$.exports=c;function c(u,p,v,m){var g,w,o,T,y,k,D,M,A,C,j=p[0],b=p[1],S=p[2],L=m[0],F=m[1],P=m[2],J=v[0],H=v[1],Y=v[2];return Math.abs(j-J)<1e-6&&Math.abs(b-H)<1e-6&&Math.abs(S-Y)<1e-6?h(u):(D=j-J,M=b-H,A=S-Y,C=1/Math.sqrt(D*D+M*M+A*A),D*=C,M*=C,A*=C,g=F*A-P*M,w=P*D-L*A,o=L*M-F*D,C=Math.sqrt(g*g+w*w+o*o),C?(C=1/C,g*=C,w*=C,o*=C):(g=0,w=0,o=0),T=M*o-A*w,y=A*g-D*o,k=D*w-M*g,C=Math.sqrt(T*T+y*y+k*k),C?(C=1/C,T*=C,y*=C,k*=C):(T=0,y=0,k=0),u[0]=g,u[1]=T,u[2]=D,u[3]=0,u[4]=w,u[5]=y,u[6]=M,u[7]=0,u[8]=o,u[9]=k,u[10]=A,u[11]=0,u[12]=-(g*j+w*b+o*S),u[13]=-(T*j+y*b+k*S),u[14]=-(D*j+M*b+A*S),u[15]=1,u)}}}),Ci=i({"node_modules/gl-mat4/str.js"(V,$){$.exports=h;function h(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}}}),Hi=i({"node_modules/gl-mat4/index.js"(V,$){$.exports={create:dr(),clone:Ar(),copy:Nr(),identity:hn(),transpose:Wn(),invert:Sn(),adjoint:Tn(),determinant:zn(),multiply:Bi(),translate:rs(),scale:Sa(),rotate:zr(),rotateX:sn(),rotateY:jr(),rotateZ:Rn(),fromRotation:Zn(),fromRotationTranslation:Pr(),fromScaling:wn(),fromTranslation:Xn(),fromXRotation:li(),fromYRotation:Ti(),fromZRotation:ca(),fromQuat:va(),frustum:ni(),perspective:ga(),perspectiveFromFieldOfView:Hn(),ortho:ti(),lookAt:Ai(),str:Ci()}}}),ya=i({"src/lib/matrix.js"(V){var $=Hi();V.init2dArray=function(h,c){for(var u=new Array(h),p=0;p<h;p++)u[p]=new Array(c);return u},V.transposeRagged=function(h){var c=0,u=h.length,p,v;for(p=0;p<u;p++)c=Math.max(c,h[p].length);var m=new Array(c);for(p=0;p<c;p++)for(m[p]=new Array(u),v=0;v<u;v++)m[p][v]=h[v][p];return m},V.dot=function(h,c){if(!(h.length&&c.length)||h.length!==c.length)return null;var u=h.length,p,v;if(h[0].length)for(p=new Array(u),v=0;v<u;v++)p[v]=V.dot(h[v],c);else if(c[0].length){var m=V.transposeRagged(c);for(p=new Array(m.length),v=0;v<m.length;v++)p[v]=V.dot(h,m[v])}else for(p=0,v=0;v<u;v++)p+=h[v]*c[v];return p},V.translationMatrix=function(h,c){return[[1,0,h],[0,1,c],[0,0,1]]},V.rotationMatrix=function(h){var c=h*Math.PI/180;return[[Math.cos(c),-Math.sin(c),0],[Math.sin(c),Math.cos(c),0],[0,0,1]]},V.rotationXYMatrix=function(h,c,u){return V.dot(V.dot(V.translationMatrix(c,u),V.rotationMatrix(h)),V.translationMatrix(-c,-u))},V.apply3DTransform=function(h){return function(){var c=arguments,u=arguments.length===1?c[0]:[c[0],c[1],c[2]||0];return V.dot(h,[u[0],u[1],u[2],1]).slice(0,3)}},V.apply2DTransform=function(h){return function(){var c=arguments;c.length===3&&(c=c[0]);var u=arguments.length===1?c[0]:[c[0],c[1]];return V.dot(h,[u[0],u[1],1]).slice(0,2)}},V.apply2DTransform2=function(h){var c=V.apply2DTransform(h);return function(u){return c(u.slice(0,2)).concat(c(u.slice(2,4)))}},V.convertCssMatrix=function(h){if(h){var c=h.length;if(c===16)return h;if(c===6)return[h[0],h[1],0,0,h[2],h[3],0,0,0,0,1,0,h[4],h[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},V.inverseTransformMatrix=function(h){var c=[];return $.invert(c,h),[[c[0],c[1],c[2],c[3]],[c[4],c[5],c[6],c[7]],[c[8],c[9],c[10],c[11]],[c[12],c[13],c[14],c[15]]]}}}),Kn=i({"src/lib/dom.js"(V,$){var h=f(),c=er(),u=ya(),p=Hi();function v(j){var b;if(typeof j=="string"){if(b=document.getElementById(j),b===null)throw new Error("No DOM element with id '"+j+"' exists on the page.");return b}else if(j==null)throw new Error("DOM element provided is null or undefined");return j}function m(j){var b=h.select(j);return b.node()instanceof HTMLElement&&b.size()&&b.classed("js-plotly-plot")}function g(j){var b=j&&j.parentNode;b&&b.removeChild(j)}function w(j,b){o("global",j,b)}function o(j,b,S){var L="plotly.js-style-"+j,F=document.getElementById(L);if(!(F&&F.matches(".no-inline-styles"))){F||(F=document.createElement("style"),F.setAttribute("id",L),F.appendChild(document.createTextNode("")),document.head.appendChild(F));var P=F.sheet;P?P.insertRule?P.insertRule(b+"{"+S+"}",0):P.addRule?P.addRule(b,S,0):c.warn("addStyleRule failed"):c.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function T(j){var b="plotly.js-style-"+j,S=document.getElementById(b);S&&g(S)}function y(j,b,S,L,F,P){var J=L.split(":"),H=F.split(":"),Y="data-btn-style-event-added";P||(P=document),P.querySelectorAll(j).forEach(function(Z){Z.getAttribute(Y)||(Z.addEventListener("mouseenter",function(){var z=this.querySelector(S);z&&(z.style[J[0]]=J[1])}),Z.addEventListener("mouseleave",function(){var z=this.querySelector(S);z&&(b&&this.matches(b)?z.style[J[0]]=J[1]:z.style[H[0]]=H[1])}),Z.setAttribute(Y,!0))})}function k(j){var b=M(j),S=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return b.forEach(function(L){var F=D(L);if(F){var P=u.convertCssMatrix(F);S=p.multiply(S,S,P)}}),S}function D(j){var b=window.getComputedStyle(j,null),S=b.getPropertyValue("-webkit-transform")||b.getPropertyValue("-moz-transform")||b.getPropertyValue("-ms-transform")||b.getPropertyValue("-o-transform")||b.getPropertyValue("transform");return S==="none"?null:S.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(L){return+L})}function M(j){for(var b=[];A(j);)b.push(j),j=j.parentNode,typeof ShadowRoot=="function"&&j instanceof ShadowRoot&&(j=j.host);return b}function A(j){return j&&(j instanceof Element||j instanceof HTMLElement)}function C(j,b){return j&&b&&j.top===b.top&&j.left===b.left&&j.right===b.right&&j.bottom===b.bottom}$.exports={getGraphDiv:v,isPlotDiv:m,removeElement:g,addStyleRule:w,addRelatedStyleRule:o,deleteRelatedStyleRule:T,setStyleOnHover:y,getFullTransformMatrix:k,getElementTransformMatrix:D,getElementAndAncestors:M,equalDomRects:C}}}),ka=i({"src/plots/animation_attributes.js"(V,$){$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}}}),Ma=i({"src/plot_api/edit_types.js"(V,$){var h=Pt().extendFlat,c=Ve(),u={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},p={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},v=u.flags.slice().concat(["fullReplot"]),m=p.flags.slice().concat("layoutReplot");$.exports={traces:u,layout:p,traceFlags:function(){return g(v)},layoutFlags:function(){return g(m)},update:function(T,y){var k=y.editType;if(k&&k!=="none")for(var D=k.split("+"),M=0;M<D.length;M++)T[D[M]]=!0},overrideAll:w};function g(T){for(var y={},k=0;k<T.length;k++)y[T[k]]=!1;return y}function w(T,y,k){var D=h({},T);for(var M in D){var A=D[M];c(A)&&(D[M]=o(A,y,k,M))}return k==="from-root"&&(D.editType=y),D}function o(T,y,k,D){if(T.valType){var M=h({},T);if(M.editType=y,Array.isArray(T.items)){M.items=new Array(T.items.length);for(var A=0;A<T.items.length;A++)M.items[A]=o(T.items[A],y)}return M}else return w(T,y,D.charAt(0)==="_"?"nested":"from-root")}}}),Wi=i({"src/components/drawing/attributes.js"(V){V.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},V.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}}}),Ls=i({"src/constants/docs.js"(V,$){$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}}}),Pn=i({"src/plots/template_attributes.js"(V){var $=Ls();$.FORMAT_LINK,$.DATE_FORMAT_LINK;function h(c){var u=c.description?" "+c.description:"",p=c.keys||[];if(p.length>0){for(var v=[],m=0;m<p.length;m++)v[m]="`"+p[m]+"`";u=u+"Finally, the template string has access to ",p.length===1?u=u+"variable "+v[0]:u=u+"variables "+v.slice(0,-1).join(", ")+" and "+v.slice(-1)+"."}return u}V.hovertemplateAttrs=function(c,u){c=c||{},u=u||{},h(u);var p={valType:"string",dflt:"",editType:c.editType||"none"};return c.arrayOk!==!1&&(p.arrayOk=!0),p},V.texttemplateAttrs=function(c,u){c=c||{},u=u||{},h(u);var p={valType:"string",dflt:"",editType:c.editType||"calc"};return c.arrayOk!==!1&&(p.arrayOk=!0),p},V.shapeTexttemplateAttrs=function(c,u){c=c||{},u=u||{},c.newshape,h(u);var p={valType:"string",dflt:"",editType:c.editType||"arraydraw"};return p}}}),Ki=i({"src/components/shapes/label_texttemplate.js"(V,$){function h(S,L){return L?L.d2l(S):S}function c(S,L){return L?L.l2d(S):S}function u(S){return S.x0}function p(S){return S.x1}function v(S){return S.y0}function m(S){return S.y1}function g(S){return S.x0shift||0}function w(S){return S.x1shift||0}function o(S){return S.y0shift||0}function T(S){return S.y1shift||0}function y(S,L){return h(S.x1,L)+w(S)-h(S.x0,L)-g(S)}function k(S,L,F){return h(S.y1,F)+T(S)-h(S.y0,F)-o(S)}function D(S,L){return Math.abs(y(S,L))}function M(S,L,F){return Math.abs(k(S,L,F))}function A(S,L,F){return S.type!=="line"?void 0:Math.sqrt(Math.pow(y(S,L),2)+Math.pow(k(S,L,F),2))}function C(S,L){return c((h(S.x1,L)+w(S)+h(S.x0,L)+g(S))/2,L)}function j(S,L,F){return c((h(S.y1,F)+T(S)+h(S.y0,F)+o(S))/2,F)}function b(S,L,F){return S.type!=="line"?void 0:k(S,L,F)/y(S,L)}$.exports={x0:u,x1:p,y0:v,y1:m,slope:b,dx:y,dy:k,width:D,height:M,length:A,xcenter:C,ycenter:j}}}),Ba=i({"src/components/shapes/draw_newshape/attributes.js"(V,$){var h=Ma().overrideAll,c=vt(),u=ir(),p=Wi().dash,v=Pt().extendFlat,m=Pn().shapeTexttemplateAttrs,g=Ki();$.exports=h({newshape:{visible:v({},c.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:v({},c.legend,{}),legendgroup:v({},c.legendgroup,{}),legendgrouptitle:{text:v({},c.legendgrouptitle.text,{}),font:u({})},legendrank:v({},c.legendrank,{}),legendwidth:v({},c.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:v({},p,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:v({},c.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:m({newshape:!0},{keys:Object.keys(g)}),font:u({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")}}),ki=i({"src/components/selections/draw_newselection/attributes.js"(V,$){var h=Wi().dash,c=Pt().extendFlat;$.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:c({},h,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}}}),La=i({"src/plots/pad_attributes.js"(V,$){$.exports=function(h){var c=h.editType;return{t:{valType:"number",dflt:0,editType:c},r:{valType:"number",dflt:0,editType:c},b:{valType:"number",dflt:0,editType:c},l:{valType:"number",dflt:0,editType:c},editType:c}}}}),Pa=i({"src/plots/layout_attributes.js"(V,$){var h=ir(),c=ka(),u=It(),p=Ba(),v=ki(),m=La(),g=Pt().extendFlat,w=h({editType:"calc"});w.family.dflt='"Open Sans", verdana, arial, sans-serif',w.size.dflt=12,w.color.dflt=u.defaultLine,$.exports={font:w,title:{text:{valType:"string",editType:"layoutstyle"},font:h({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:h({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:g(m({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:u.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:u.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:u.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:p.newshape,activeshape:p.activeshape,newselection:v.newselection,activeselection:v.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:g({},c.transition,{editType:"none"})}}}),Vs=n({"temp_stylePlugin:node_modules/maplibre-gl/dist/maplibre-gl.css"(){}}),Es=n({"stylePlugin:/Users/ekl/code/plotly.js/node_modules/maplibre-gl/dist/maplibre-gl.css"(){Vs()}}),xn=i({"src/registry.js"(V){var $=er(),h=kt(),c=lr(),u=Ve(),p=Kn().addStyleRule,v=Pt(),m=vt(),g=Pa(),w=v.extendFlat,o=v.extendDeepAll;V.modules={},V.allCategories={},V.allTypes=[],V.subplotsRegistry={},V.componentsRegistry={},V.layoutArrayContainers=[],V.layoutArrayRegexes=[],V.traceLayoutAttributes={},V.localeRegistry={},V.apiMethodRegistry={},V.collectableSubplotTypes=null,V.register=function(L){if(V.collectableSubplotTypes=null,L)L&&!Array.isArray(L)&&(L=[L]);else throw new Error("No argument passed to Plotly.register.");for(var F=0;F<L.length;F++){var P=L[F];if(!P)throw new Error("Invalid module was attempted to be registered!");switch(P.moduleType){case"trace":T(P);break;case"transform":D(P);break;case"component":k(P);break;case"locale":M(P);break;case"apiMethod":var J=P.name;V.apiMethodRegistry[J]=P.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},V.getModule=function(S){var L=V.modules[b(S)];return L?L._module:!1},V.traceIs=function(S,L){if(S=b(S),S==="various")return!1;var F=V.modules[S];return F||(S&&$.log("Unrecognized trace type "+S+"."),F=V.modules[m.type.dflt]),!!F.categories[L]},V.getComponentMethod=function(S,L){var F=V.componentsRegistry[S];return F&&F[L]||h},V.call=function(){var S=arguments[0],L=[].slice.call(arguments,1);return V.apiMethodRegistry[S].apply(null,L)};function T(S){var L=S.name,F=S.categories,P=S.meta;if(V.modules[L]){$.log("Type "+L+" already registered");return}V.subplotsRegistry[S.basePlotModule.name]||y(S.basePlotModule);for(var J={},H=0;H<F.length;H++)J[F[H]]=!0,V.allCategories[F[H]]=!0;V.modules[L]={_module:S,categories:J},P&&Object.keys(P).length&&(V.modules[L].meta=P),V.allTypes.push(L);for(var Y in V.componentsRegistry)C(Y,L);S.layoutAttributes&&w(V.traceLayoutAttributes,S.layoutAttributes);var Z=S.basePlotModule,z=Z.name;if(z==="mapbox"){var q=Z.constants.styleRules;for(var X in q)p(".js-plotly-plot .plotly .mapboxgl-"+X,q[X])}z==="map"&&Es(),(z==="geo"||z==="mapbox"||z==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function y(S){var L=S.name;if(V.subplotsRegistry[L]){$.log("Plot type "+L+" already registered.");return}A(S),V.subplotsRegistry[L]=S;for(var F in V.componentsRegistry)j(F,S.name)}function k(S){if(typeof S.name!="string")throw new Error("Component module *name* must be a string.");var L=S.name;V.componentsRegistry[L]=S,S.layoutAttributes&&(S.layoutAttributes._isLinkedToArray&&c(V.layoutArrayContainers,L),A(S));for(var F in V.modules)C(L,F);for(var P in V.subplotsRegistry)j(L,P);S.schema&&S.schema.layout&&o(g,S.schema.layout)}function D(S){if(typeof S.name!="string")throw new Error("Transform module *name* must be a string.");var L="Transform module "+S.name,F=typeof S.transform=="function",P=typeof S.calcTransform=="function";if(!F&&!P)throw new Error(L+" is missing a *transform* or *calcTransform* method.");F&&P&&$.log([L+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),u(S.attributes)||$.log(L+" registered without an *attributes* object."),typeof S.supplyDefaults!="function"&&$.log(L+" registered without a *supplyDefaults* method.")}function M(S){var L=S.name,F=L.split("-")[0],P=S.dictionary,J=S.format,H=P&&Object.keys(P).length,Y=J&&Object.keys(J).length,Z=V.localeRegistry,z=Z[L];if(z||(Z[L]=z={}),F!==L){var q=Z[F];q||(Z[F]=q={}),H&&q.dictionary===z.dictionary&&(q.dictionary=P),Y&&q.format===z.format&&(q.format=J)}H&&(z.dictionary=P),Y&&(z.format=J)}function A(S){if(S.layoutAttributes){var L=S.layoutAttributes._arrayAttrRegexps;if(L)for(var F=0;F<L.length;F++)c(V.layoutArrayRegexes,L[F])}}function C(S,L){var F=V.componentsRegistry[S].schema;if(!(!F||!F.traces)){var P=F.traces[L];P&&o(V.modules[L]._module.attributes,P)}}function j(S,L){var F=V.componentsRegistry[S].schema;if(!(!F||!F.subplots)){var P=V.subplotsRegistry[L],J=P.layoutAttributes,H=P.attr==="subplot"?P.name:P.attr;Array.isArray(H)&&(H=H[0]);var Y=F.subplots[H];J&&Y&&o(J,Y)}}function b(S){return typeof S=="object"&&(S=S.type),S}}}),Sr=i({"src/lib/dates.js"(V){var $=N().timeFormat,h=fe(),c=er(),u=ct().mod,p=Te(),v=p.BADNUM,m=p.ONEDAY,g=p.ONEHOUR,w=p.ONEMIN,o=p.ONESEC,T=p.EPOCHJD,y=xn(),k=N().utcFormat,D=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,M=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,A=new Date().getFullYear()-70;function C(ne){return ne&&y.componentsRegistry.calendars&&typeof ne=="string"&&ne!=="gregorian"}V.dateTick0=function(ne,le){var W=j(ne,!!le);if(le<2)return W;var ce=V.dateTime2ms(W,ne);return ce+=m*(le-1),V.ms2DateTime(ce,0,ne)};function j(ne,le){return C(ne)?le?y.getComponentMethod("calendars","CANONICAL_SUNDAY")[ne]:y.getComponentMethod("calendars","CANONICAL_TICK")[ne]:le?"2000-01-02":"2000-01-01"}V.dfltRange=function(ne){return C(ne)?y.getComponentMethod("calendars","DFLTRANGE")[ne]:["2000-01-01","2001-01-01"]},V.isJSDate=function(ne){return typeof ne=="object"&&ne!==null&&typeof ne.getTime=="function"};var b,S;V.dateTime2ms=function(ne,le){if(V.isJSDate(ne)){var W=ne.getTimezoneOffset()*w,ce=(ne.getUTCMinutes()-ne.getMinutes())*w+(ne.getUTCSeconds()-ne.getSeconds())*o+(ne.getUTCMilliseconds()-ne.getMilliseconds());if(ce){var de=3*w;W=W-de/2+u(ce-W+de/2,de)}return ne=Number(ne)-W,ne>=b&&ne<=S?ne:v}if(typeof ne!="string"&&typeof ne!="number")return v;ne=String(ne);var ve=C(le),pe=ne.charAt(0);ve&&(pe==="G"||pe==="g")&&(ne=ne.substr(1),le="");var be=ve&&le.substr(0,7)==="chinese",Le=ne.match(be?M:D);if(!Le)return v;var Ae=Le[1],We=Le[3]||"1",te=Number(Le[5]||1),ae=Number(Le[7]||0),G=Number(Le[9]||0),Q=Number(Le[11]||0);if(ve){if(Ae.length===2)return v;Ae=Number(Ae);var U;try{var re=y.getComponentMethod("calendars","getCal")(le);if(be){var R=We.charAt(We.length-1)==="i";We=parseInt(We,10),U=re.newDate(Ae,re.toMonthIndex(Ae,We,R),te)}else U=re.newDate(Ae,Number(We),te)}catch{return v}return U?(U.toJD()-T)*m+ae*g+G*w+Q*o:v}Ae.length===2?Ae=(Number(Ae)+2e3-A)%100+A:Ae=Number(Ae),We-=1;var B=new Date(Date.UTC(2e3,We,te,ae,G));return B.setUTCFullYear(Ae),B.getUTCMonth()!==We||B.getUTCDate()!==te?v:B.getTime()+Q*o},b=V.MIN_MS=V.dateTime2ms("-9999"),S=V.MAX_MS=V.dateTime2ms("9999-12-31 23:59:59.9999"),V.isDateTime=function(ne,le){return V.dateTime2ms(ne,le)!==v};function L(ne,le){return String(ne+Math.pow(10,le)).substr(1)}var F=90*m,P=3*g,J=5*w;V.ms2DateTime=function(ne,le,W){if(typeof ne!="number"||!(ne>=b&&ne<=S))return v;le||(le=0);var ce=Math.floor(u(ne+.05,1)*10),de=Math.round(ne-ce/10),ve,pe,be,Le,Ae,We;if(C(W)){var te=Math.floor(de/m)+T,ae=Math.floor(u(ne,m));try{ve=y.getComponentMethod("calendars","getCal")(W).fromJD(te).formatDate("yyyy-mm-dd")}catch{ve=k("G%Y-%m-%d")(new Date(de))}if(ve.charAt(0)==="-")for(;ve.length<11;)ve="-0"+ve.substr(1);else for(;ve.length<10;)ve="0"+ve;pe=le<F?Math.floor(ae/g):0,be=le<F?Math.floor(ae%g/w):0,Le=le<P?Math.floor(ae%w/o):0,Ae=le<J?ae%o*10+ce:0}else We=new Date(de),ve=k("%Y-%m-%d")(We),pe=le<F?We.getUTCHours():0,be=le<F?We.getUTCMinutes():0,Le=le<P?We.getUTCSeconds():0,Ae=le<J?We.getUTCMilliseconds()*10+ce:0;return H(ve,pe,be,Le,Ae)},V.ms2DateTimeLocal=function(ne){if(!(ne>=b+m&&ne<=S-m))return v;var le=Math.floor(u(ne+.05,1)*10),W=new Date(Math.round(ne-le/10)),ce=$("%Y-%m-%d")(W),de=W.getHours(),ve=W.getMinutes(),pe=W.getSeconds(),be=W.getUTCMilliseconds()*10+le;return H(ce,de,ve,pe,be)};function H(ne,le,W,ce,de){if((le||W||ce||de)&&(ne+=" "+L(le,2)+":"+L(W,2),(ce||de)&&(ne+=":"+L(ce,2),de))){for(var ve=4;de%10===0;)ve-=1,de/=10;ne+="."+L(de,ve)}return ne}V.cleanDate=function(ne,le,W){if(ne===v)return le;if(V.isJSDate(ne)||typeof ne=="number"&&isFinite(ne)){if(C(W))return c.error("JS Dates and milliseconds are incompatible with world calendars",ne),le;if(ne=V.ms2DateTimeLocal(+ne),!ne&&le!==void 0)return le}else if(!V.isDateTime(ne,W))return c.error("unrecognized date",ne),le;return ne};var Y=/%\d?f/g,Z=/%h/g,z={1:"1",2:"1",3:"2",4:"2"};function q(ne,le,W,ce){ne=ne.replace(Y,function(ve){var pe=Math.min(+ve.charAt(1)||6,6),be=(le/1e3%1+2).toFixed(pe).substr(2).replace(/0+$/,"")||"0";return be});var de=new Date(Math.floor(le+.05));if(ne=ne.replace(Z,function(){return z[W("%q")(de)]}),C(ce))try{ne=y.getComponentMethod("calendars","worldCalFmt")(ne,le,ce)}catch{return"Invalid"}return W(ne)(de)}var X=[59,59.9,59.99,59.999,59.9999];function K(ne,le){var W=u(ne+.05,m),ce=L(Math.floor(W/g),2)+":"+L(u(Math.floor(W/w),60),2);if(le!=="M"){h(le)||(le=0);var de=Math.min(u(ne/o,60),X[le]),ve=(100+de).toFixed(le).substr(1);le>0&&(ve=ve.replace(/0+$/,"").replace(/[\.]$/,"")),ce+=":"+ve}return ce}V.formatDate=function(ne,le,W,ce,de,ve){if(de=C(de)&&de,!le)if(W==="y")le=ve.year;else if(W==="m")le=ve.month;else if(W==="d")le=ve.dayMonth+`
`+ve.year;else return K(ne,W)+`
`+q(ve.dayMonthYear,ne,ce,de);return q(le,ne,ce,de)};var ee=3*m;V.incrementMonth=function(ne,le,W){W=C(W)&&W;var ce=u(ne,m);if(ne=Math.round(ne-ce),W)try{var de=Math.round(ne/m)+T,ve=y.getComponentMethod("calendars","getCal")(W),pe=ve.fromJD(de);return le%12?ve.add(pe,le,"m"):ve.add(pe,le/12,"y"),(pe.toJD()-T)*m+ce}catch{c.error("invalid ms "+ne+" in calendar "+W)}var be=new Date(ne+ee);return be.setUTCMonth(be.getUTCMonth()+le)+ce-ee},V.findExactDates=function(ne,le){for(var W=0,ce=0,de=0,ve=0,pe,be,Le=C(le)&&y.getComponentMethod("calendars","getCal")(le),Ae=0;Ae<ne.length;Ae++){if(be=ne[Ae],!h(be)){ve++;continue}if(!(be%m))if(Le)try{pe=Le.fromJD(be/m+T),pe.day()===1?pe.month()===1?W++:ce++:de++}catch{}else pe=new Date(be),pe.getUTCDate()===1?pe.getUTCMonth()===0?W++:ce++:de++}ce+=W,de+=ce;var We=ne.length-ve;return{exactYears:W/We,exactMonths:ce/We,exactDays:de/We}}}}),Br=i({"src/lib/identity.js"(V,$){$.exports=function(c){return c}}}),en=i({"src/lib/search.js"(V){var $=fe(),h=er(),c=Br(),u=Te().BADNUM,p=1e-9;V.findBin=function(o,T,y){if($(T.start))return y?Math.ceil((o-T.start)/T.size-p)-1:Math.floor((o-T.start)/T.size+p);var k=0,D=T.length,M=0,A=D>1?(T[D-1]-T[0])/(D-1):1,C,j;for(A>=0?j=y?v:m:j=y?w:g,o+=A*p*(y?-1:1)*(A>=0?1:-1);k<D&&M++<100;)C=Math.floor((k+D)/2),j(T[C],o)?k=C+1:D=C;return M>90&&h.log("Long binary search..."),k-1};function v(o,T){return o<T}function m(o,T){return o<=T}function g(o,T){return o>T}function w(o,T){return o>=T}V.sorterAsc=function(o,T){return o-T},V.sorterDes=function(o,T){return T-o},V.distinctVals=function(o){var T=o.slice();T.sort(V.sorterAsc);var y;for(y=T.length-1;y>-1&&T[y]===u;y--);for(var k=T[y]-T[0]||1,D=k/(y||1)/1e4,M=[],A,C=0;C<=y;C++){var j=T[C],b=j-A;A===void 0?(M.push(j),A=j):b>D&&(k=Math.min(k,b),M.push(j),A=j)}return{vals:M,minDiff:k}},V.roundUp=function(o,T,y){for(var k=0,D=T.length-1,M,A=0,C=y?0:1,j=y?1:0,b=y?Math.ceil:Math.floor;k<D&&A++<100;)M=b((k+D)/2),T[M]<=o?k=M+C:D=M-j;return T[k]},V.sort=function(o,T){for(var y=0,k=0,D=1;D<o.length;D++){var M=T(o[D],o[D-1]);if(M<0?y=1:M>0&&(k=1),y&&k)return o.sort(T)}return k?o:o.reverse()},V.findIndexOfMin=function(o,T){T=T||c;for(var y=1/0,k,D=0;D<o.length;D++){var M=T(o[D]);M<y&&(y=M,k=D)}return k}}}),Kr=i({"src/lib/sort_object_keys.js"(V,$){$.exports=function(c){return Object.keys(c).sort()}}}),an=i({"src/lib/stats.js"(V){var $=fe(),h=Ue().isArrayOrTypedArray;V.aggNums=function(c,u,p,v){var m,g;if((!v||v>p.length)&&(v=p.length),$(u)||(u=!1),h(p[0])){for(g=new Array(v),m=0;m<v;m++)g[m]=V.aggNums(c,u,p[m]);p=g}for(m=0;m<v;m++)$(u)?$(p[m])&&(u=c(+u,+p[m])):u=p[m];return u},V.len=function(c){return V.aggNums(function(u){return u+1},0,c)},V.mean=function(c,u){return u||(u=V.len(c)),V.aggNums(function(p,v){return p+v},0,c)/u},V.geometricMean=function(c,u){return u||(u=V.len(c)),Math.pow(V.aggNums(function(p,v){return p*v},1,c),1/u)},V.midRange=function(c){if(!(c===void 0||c.length===0))return(V.aggNums(Math.max,null,c)+V.aggNums(Math.min,null,c))/2},V.variance=function(c,u,p){return u||(u=V.len(c)),$(p)||(p=V.mean(c,u)),V.aggNums(function(v,m){return v+Math.pow(m-p,2)},0,c)/u},V.stdev=function(c,u,p){return Math.sqrt(V.variance(c,u,p))},V.median=function(c){var u=c.slice().sort();return V.interp(u,.5)},V.interp=function(c,u){if(!$(u))throw"n should be a finite number";if(u=u*c.length-.5,u<0)return c[0];if(u>c.length-1)return c[c.length-1];var p=u%1;return p*c[Math.ceil(u)]+(1-p)*c[Math.floor(u)]}}}),En=i({"src/lib/angles.js"(V,$){var h=ct(),c=h.mod,u=h.modHalf,p=Math.PI,v=2*p;function m(j){return j/180*p}function g(j){return j/p*180}function w(j){return Math.abs(j[1]-j[0])>v-1e-14}function o(j,b){return u(b-j,v)}function T(j,b){return Math.abs(o(j,b))}function y(j,b){if(w(b))return!0;var S,L;b[0]<b[1]?(S=b[0],L=b[1]):(S=b[1],L=b[0]),S=c(S,v),L=c(L,v),S>L&&(L+=v);var F=c(j,v),P=F+v;return F>=S&&F<=L||P>=S&&P<=L}function k(j,b,S,L){if(!y(b,L))return!1;var F,P;return S[0]<S[1]?(F=S[0],P=S[1]):(F=S[1],P=S[0]),j>=F&&j<=P}function D(j,b,S,L,F,P,J){F=F||0,P=P||0;var H=w([S,L]),Y,Z,z,q,X;H?(Y=0,Z=p,z=v):S<L?(Y=S,z=L):(Y=L,z=S),j<b?(q=j,X=b):(q=b,X=j);function K(W,ce){return[W*Math.cos(ce)+F,P-W*Math.sin(ce)]}var ee=Math.abs(z-Y)<=p?0:1;function ne(W,ce,de){return"A"+[W,W]+" "+[0,ee,de]+" "+K(W,ce)}var le;return H?q===null?le="M"+K(X,Y)+ne(X,Z,0)+ne(X,z,0)+"Z":le="M"+K(q,Y)+ne(q,Z,0)+ne(q,z,0)+"ZM"+K(X,Y)+ne(X,Z,1)+ne(X,z,1)+"Z":q===null?(le="M"+K(X,Y)+ne(X,z,0),J&&(le+="L0,0Z")):le="M"+K(q,Y)+"L"+K(X,Y)+ne(X,z,0)+"L"+K(q,z)+ne(q,Y,1)+"Z",le}function M(j,b,S,L,F){return D(null,j,b,S,L,F,0)}function A(j,b,S,L,F){return D(null,j,b,S,L,F,1)}function C(j,b,S,L,F,P){return D(j,b,S,L,F,P,1)}$.exports={deg2rad:m,rad2deg:g,angleDelta:o,angleDist:T,isFullCircle:w,isAngleInsideSector:y,isPtInsideSector:k,pathArc:M,pathSector:A,pathAnnulus:C}}}),_n=i({"src/lib/anchor_utils.js"(V){V.isLeftAnchor=function(h){return h.xanchor==="left"||h.xanchor==="auto"&&h.x<=1/3},V.isCenterAnchor=function(h){return h.xanchor==="center"||h.xanchor==="auto"&&h.x>1/3&&h.x<2/3},V.isRightAnchor=function(h){return h.xanchor==="right"||h.xanchor==="auto"&&h.x>=2/3},V.isTopAnchor=function(h){return h.yanchor==="top"||h.yanchor==="auto"&&h.y>=2/3},V.isMiddleAnchor=function(h){return h.yanchor==="middle"||h.yanchor==="auto"&&h.y>1/3&&h.y<2/3},V.isBottomAnchor=function(h){return h.yanchor==="bottom"||h.yanchor==="auto"&&h.y<=1/3}}}),fn=i({"src/lib/geometry2d.js"(V){var $=ct().mod;V.segmentsIntersect=h;function h(m,g,w,o,T,y,k,D){var M=w-m,A=T-m,C=k-T,j=o-g,b=y-g,S=D-y,L=M*S-C*j;if(L===0)return null;var F=(A*S-C*b)/L,P=(A*j-M*b)/L;return P<0||P>1||F<0||F>1?null:{x:m+M*F,y:g+j*F}}V.segmentDistance=function(g,w,o,T,y,k,D,M){if(h(g,w,o,T,y,k,D,M))return 0;var A=o-g,C=T-w,j=D-y,b=M-k,S=A*A+C*C,L=j*j+b*b,F=Math.min(c(A,C,S,y-g,k-w),c(A,C,S,D-g,M-w),c(j,b,L,g-y,w-k),c(j,b,L,o-y,T-k));return Math.sqrt(F)};function c(m,g,w,o,T){var y=o*m+T*g;if(y<0)return o*o+T*T;if(y>w){var k=o-m,D=T-g;return k*k+D*D}else{var M=o*g-T*m;return M*M/w}}var u,p,v;V.getTextLocation=function(g,w,o,T){if((g!==p||T!==v)&&(u={},p=g,v=T),u[o])return u[o];var y=g.getPointAtLength($(o-T/2,w)),k=g.getPointAtLength($(o+T/2,w)),D=Math.atan((k.y-y.y)/(k.x-y.x)),M=g.getPointAtLength($(o,w)),A=(M.x*4+y.x+k.x)/6,C=(M.y*4+y.y+k.y)/6,j={x:A,y:C,theta:D};return u[o]=j,j},V.clearLocationCache=function(){p=null},V.getVisibleSegment=function(g,w,o){var T=w.left,y=w.right,k=w.top,D=w.bottom,M=0,A=g.getTotalLength(),C=A,j,b;function S(F){var P=g.getPointAtLength(F);F===0?j=P:F===A&&(b=P);var J=P.x<T?T-P.x:P.x>y?P.x-y:0,H=P.y<k?k-P.y:P.y>D?P.y-D:0;return Math.sqrt(J*J+H*H)}for(var L=S(M);L;){if(M+=L+o,M>C)return;L=S(M)}for(L=S(C);L;){if(C-=L+o,M>C)return;L=S(C)}return{min:M,max:C,len:C-M,total:A,isClosed:M===0&&C===A&&Math.abs(j.x-b.x)<.1&&Math.abs(j.y-b.y)<.1}},V.findPointOnPath=function(g,w,o,T){T=T||{};for(var y=T.pathLength||g.getTotalLength(),k=T.tolerance||.001,D=T.iterationLimit||30,M=g.getPointAtLength(0)[o]>g.getPointAtLength(y)[o]?-1:1,A=0,C=0,j=y,b,S,L;A<D;){if(b=(C+j)/2,S=g.getPointAtLength(b),L=S[o]-w,Math.abs(L)<k)return S;M*L>0?j=b:C=b,A++}return S}}}),on=i({"src/lib/throttle.js"(V){var $={};V.throttle=function(u,p,v){var m=$[u],g=Date.now();if(!m){for(var w in $)$[w].ts<g-6e4&&delete $[w];m=$[u]={ts:0,timer:null}}h(m);function o(){v(),m.ts=Date.now(),m.onDone&&(m.onDone(),m.onDone=null)}if(g>m.ts+p){o();return}m.timer=setTimeout(function(){o(),m.timer=null},p)},V.done=function(c){var u=$[c];return!u||!u.timer?Promise.resolve():new Promise(function(p){var v=u.onDone;u.onDone=function(){v&&v(),p(),u.onDone=null}})},V.clear=function(c){if(c)h($[c]),delete $[c];else for(var u in $)V.clear(u)};function h(c){c&&c.timer!==null&&(clearTimeout(c.timer),c.timer=null)}}}),Yn=i({"src/lib/clear_responsive.js"(V,$){$.exports=function(c){c._responsiveChartHandler&&(window.removeEventListener("resize",c._responsiveChartHandler),delete c._responsiveChartHandler)}}}),ri=i({"node_modules/is-mobile/index.js"(V,$){$.exports=p,$.exports.isMobile=p,$.exports.default=p;var h=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,c=/CrOS/,u=/android|ipad|playbook|silk/i;function p(v){v||(v={});let m=v.ua;if(!m&&typeof navigator<"u"&&(m=navigator.userAgent),m&&m.headers&&typeof m.headers["user-agent"]=="string"&&(m=m.headers["user-agent"]),typeof m!="string")return!1;let g=h.test(m)&&!c.test(m)||!!v.tablet&&u.test(m);return!g&&v.tablet&&v.featureDetect&&navigator&&navigator.maxTouchPoints>1&&m.indexOf("Macintosh")!==-1&&m.indexOf("Safari")!==-1&&(g=!0),g}}}),xa=i({"src/lib/preserve_drawing_buffer.js"(V,$){var h=fe(),c=ri();$.exports=function(v){var m;if(v&&v.hasOwnProperty("userAgent")?m=v.userAgent:m=u(),typeof m!="string")return!0;var g=c({ua:{headers:{"user-agent":m}},tablet:!0,featureDetect:!1});if(!g)for(var w=m.split(" "),o=1;o<w.length;o++){var T=w[o];if(T.indexOf("Safari")!==-1)for(var y=o-1;y>-1;y--){var k=w[y];if(k.substr(0,8)==="Version/"){var D=k.substr(8).split(".")[0];if(h(D)&&(D=+D),D>=13)return!0}}}return g};function u(){var p;return typeof navigator<"u"&&(p=navigator.userAgent),p&&p.headers&&typeof p.headers["user-agent"]=="string"&&(p=p.headers["user-agent"]),p}}}),qi=i({"src/lib/make_trace_groups.js"(V,$){var h=f();$.exports=function(u,p,v){var m=u.selectAll("g."+v.replace(/\s/g,".")).data(p,function(w){return w[0].trace.uid});m.exit().remove(),m.enter().append("g").attr("class",v),m.order();var g=u.classed("rangeplot")?"nodeRangePlot3":"node3";return m.each(function(w){w[0][g]=h.select(this)}),m}}}),Ui=i({"src/lib/localize.js"(V,$){var h=xn();$.exports=function(u,p){for(var v=u._context.locale,m=0;m<2;m++){for(var g=u._context.locales,w=0;w<2;w++){var o=(g[v]||{}).dictionary;if(o){var T=o[p];if(T)return T}g=h.localeRegistry}var y=v.split("-")[0];if(y===v)break;v=y}return p}}}),zi=i({"src/lib/filter_unique.js"(V,$){$.exports=function(c){for(var u={},p=[],v=0,m=0;m<c.length;m++){var g=c[m];u[g]!==1&&(u[g]=1,p[v++]=g)}return p}}}),Vi=i({"src/lib/filter_visible.js"(V,$){$.exports=function(v){for(var m=u(v)?c:h,g=[],w=0;w<v.length;w++){var o=v[w];m(o)&&g.push(o)}return g};function h(p){return p.visible===!0}function c(p){var v=p[0].trace;return v.visible===!0&&v._length!==0}function u(p){return Array.isArray(p)&&Array.isArray(p[0])&&p[0][0]&&p[0][0].trace}}}),Ds=i({"src/lib/increment.js"(V,$){$.exports=function(c,u){if(!u)return c;var p=1/Math.abs(u),v=p>1?(p*c+p*u)/p:c+u,m=String(v).length;if(m>16){var g=String(u).length,w=String(c).length;if(m>=w+g){var o=parseFloat(v).toPrecision(12);o.indexOf("e+")===-1&&(v=+o)}}return v}}}),Rs=i({"src/lib/clean_number.js"(V,$){var h=fe(),c=Te().BADNUM,u=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(v){return typeof v=="string"&&(v=v.replace(u,"")),h(v)?Number(v):c}}}),_r=i({"src/lib/index.js"(V,$){var h=f(),c=N().utcFormat,u=I().format,p=fe(),v=Te(),m=v.FP_SAFE,g=-m,w=v.BADNUM,o=$.exports={};o.adjustFormat=function(re){return!re||/^\d[.]\df/.test(re)||/[.]\d%/.test(re)?re:re==="0.f"?"~f":/^\d%/.test(re)?"~%":/^\ds/.test(re)?"~s":!/^[~,.0$]/.test(re)&&/[&fps]/.test(re)?"~"+re:re};var T={};o.warnBadFormat=function(U){var re=String(U);T[re]||(T[re]=1,o.warn('encountered bad format: "'+re+'"'))},o.noFormat=function(U){return String(U)},o.numberFormat=function(U){var re;try{re=u(o.adjustFormat(U))}catch{return o.warnBadFormat(U),o.noFormat}return re},o.nestedProperty=Ee(),o.keyedContainer=Fe(),o.relativeAttr=He(),o.isPlainObject=Ve(),o.toLogRange=tt(),o.relinkPrivateKeys=et();var y=Ue();o.isArrayBuffer=y.isArrayBuffer,o.isTypedArray=y.isTypedArray,o.isArrayOrTypedArray=y.isArrayOrTypedArray,o.isArray1D=y.isArray1D,o.ensureArray=y.ensureArray,o.concat=y.concat,o.maxRowLength=y.maxRowLength,o.minRowLength=y.minRowLength;var k=ct();o.mod=k.mod,o.modHalf=k.modHalf;var D=Ot();o.valObjectMeta=D.valObjectMeta,o.coerce=D.coerce,o.coerce2=D.coerce2,o.coerceFont=D.coerceFont,o.coercePattern=D.coercePattern,o.coerceHoverinfo=D.coerceHoverinfo,o.coerceSelectionMarkerOpacity=D.coerceSelectionMarkerOpacity,o.validate=D.validate;var M=Sr();o.dateTime2ms=M.dateTime2ms,o.isDateTime=M.isDateTime,o.ms2DateTime=M.ms2DateTime,o.ms2DateTimeLocal=M.ms2DateTimeLocal,o.cleanDate=M.cleanDate,o.isJSDate=M.isJSDate,o.formatDate=M.formatDate,o.incrementMonth=M.incrementMonth,o.dateTick0=M.dateTick0,o.dfltRange=M.dfltRange,o.findExactDates=M.findExactDates,o.MIN_MS=M.MIN_MS,o.MAX_MS=M.MAX_MS;var A=en();o.findBin=A.findBin,o.sorterAsc=A.sorterAsc,o.sorterDes=A.sorterDes,o.distinctVals=A.distinctVals,o.roundUp=A.roundUp,o.sort=A.sort,o.findIndexOfMin=A.findIndexOfMin,o.sortObjectKeys=Kr();var C=an();o.aggNums=C.aggNums,o.len=C.len,o.mean=C.mean,o.geometricMean=C.geometricMean,o.median=C.median,o.midRange=C.midRange,o.variance=C.variance,o.stdev=C.stdev,o.interp=C.interp;var j=ya();o.init2dArray=j.init2dArray,o.transposeRagged=j.transposeRagged,o.dot=j.dot,o.translationMatrix=j.translationMatrix,o.rotationMatrix=j.rotationMatrix,o.rotationXYMatrix=j.rotationXYMatrix,o.apply3DTransform=j.apply3DTransform,o.apply2DTransform=j.apply2DTransform,o.apply2DTransform2=j.apply2DTransform2,o.convertCssMatrix=j.convertCssMatrix,o.inverseTransformMatrix=j.inverseTransformMatrix;var b=En();o.deg2rad=b.deg2rad,o.rad2deg=b.rad2deg,o.angleDelta=b.angleDelta,o.angleDist=b.angleDist,o.isFullCircle=b.isFullCircle,o.isAngleInsideSector=b.isAngleInsideSector,o.isPtInsideSector=b.isPtInsideSector,o.pathArc=b.pathArc,o.pathSector=b.pathSector,o.pathAnnulus=b.pathAnnulus;var S=_n();o.isLeftAnchor=S.isLeftAnchor,o.isCenterAnchor=S.isCenterAnchor,o.isRightAnchor=S.isRightAnchor,o.isTopAnchor=S.isTopAnchor,o.isMiddleAnchor=S.isMiddleAnchor,o.isBottomAnchor=S.isBottomAnchor;var L=fn();o.segmentsIntersect=L.segmentsIntersect,o.segmentDistance=L.segmentDistance,o.getTextLocation=L.getTextLocation,o.clearLocationCache=L.clearLocationCache,o.getVisibleSegment=L.getVisibleSegment,o.findPointOnPath=L.findPointOnPath;var F=Pt();o.extendFlat=F.extendFlat,o.extendDeep=F.extendDeep,o.extendDeepAll=F.extendDeepAll,o.extendDeepNoArrays=F.extendDeepNoArrays;var P=er();o.log=P.log,o.warn=P.warn,o.error=P.error;var J=Vt();o.counterRegex=J.counter;var H=on();o.throttle=H.throttle,o.throttleDone=H.done,o.clearThrottle=H.clear;var Y=Kn();o.getGraphDiv=Y.getGraphDiv,o.isPlotDiv=Y.isPlotDiv,o.removeElement=Y.removeElement,o.addStyleRule=Y.addStyleRule,o.addRelatedStyleRule=Y.addRelatedStyleRule,o.deleteRelatedStyleRule=Y.deleteRelatedStyleRule,o.setStyleOnHover=Y.setStyleOnHover,o.getFullTransformMatrix=Y.getFullTransformMatrix,o.getElementTransformMatrix=Y.getElementTransformMatrix,o.getElementAndAncestors=Y.getElementAndAncestors,o.equalDomRects=Y.equalDomRects,o.clearResponsive=Yn(),o.preserveDrawingBuffer=xa(),o.makeTraceGroups=qi(),o._=Ui(),o.notifier=Qt(),o.filterUnique=zi(),o.filterVisible=Vi(),o.pushUnique=lr(),o.increment=Ds(),o.cleanNumber=Rs(),o.ensureNumber=function(re){return p(re)?(re=Number(re),re>m||re<g?w:re):w},o.isIndex=function(U,re){return re!==void 0&&U>=re?!1:p(U)&&U>=0&&U%1===0},o.noop=kt(),o.identity=Br(),o.repeat=function(U,re){for(var R=new Array(re),B=0;B<re;B++)R[B]=U;return R},o.swapAttrs=function(U,re,R,B){R||(R="x"),B||(B="y");for(var oe=0;oe<re.length;oe++){var ie=re[oe],xe=o.nestedProperty(U,ie.replace("?",R)),_e=o.nestedProperty(U,ie.replace("?",B)),ke=xe.get();xe.set(_e.get()),_e.set(ke)}},o.raiseToTop=function(re){re.parentNode.appendChild(re)},o.cancelTransition=function(U){return U.transition().duration(0)},o.constrain=function(U,re,R){return re>R?Math.max(R,Math.min(re,U)):Math.max(re,Math.min(R,U))},o.bBoxIntersect=function(U,re,R){return R=R||0,U.left<=re.right+R&&re.left<=U.right+R&&U.top<=re.bottom+R&&re.top<=U.bottom+R},o.simpleMap=function(U,re,R,B,oe){for(var ie=U.length,xe=new Array(ie),_e=0;_e<ie;_e++)xe[_e]=re(U[_e],R,B,oe);return xe},o.randstr=function U(re,R,B,oe){if(B||(B=16),R===void 0&&(R=24),R<=0)return"0";var ie=Math.log(Math.pow(2,R))/Math.log(B),xe="",_e,ke,Pe;for(_e=2;ie===1/0;_e*=2)ie=Math.log(Math.pow(2,R/_e))/Math.log(B)*_e;var Ge=ie-Math.floor(ie);for(_e=0;_e<Math.floor(ie);_e++)Pe=Math.floor(Math.random()*B).toString(B),xe=Pe+xe;Ge&&(ke=Math.pow(B,Ge),Pe=Math.floor(Math.random()*ke).toString(B),xe=Pe+xe);var Je=parseInt(xe,B);return re&&re[xe]||Je!==1/0&&Je>=Math.pow(2,R)?oe>10?(o.warn("randstr failed uniqueness"),xe):U(re,R,B,(oe||0)+1):xe},o.OptionControl=function(U,re){U||(U={}),re||(re="opt");var R={};return R.optionList=[],R._newoption=function(B){B[re]=U,R[B.name]=B,R.optionList.push(B)},R["_"+re]=U,R},o.smooth=function(U,re){if(re=Math.round(re)||0,re<2)return U;var R=U.length,B=2*R,oe=2*re-1,ie=new Array(oe),xe=new Array(R),_e,ke,Pe,Ge;for(_e=0;_e<oe;_e++)ie[_e]=(1-Math.cos(Math.PI*(_e+1)/re))/(2*re);for(_e=0;_e<R;_e++){for(Ge=0,ke=0;ke<oe;ke++)Pe=_e+ke+1-re,Pe<-R?Pe-=B*Math.round(Pe/B):Pe>=B&&(Pe-=B*Math.floor(Pe/B)),Pe<0?Pe=-1-Pe:Pe>=R&&(Pe=B-1-Pe),Ge+=U[Pe]*ie[ke];xe[_e]=Ge}return xe},o.syncOrAsync=function(U,re,R){var B,oe;function ie(){return o.syncOrAsync(U,re,R)}for(;U.length;)if(oe=U.splice(0,1)[0],B=oe(re),B&&B.then)return B.then(ie);return R&&R(re)},o.stripTrailingSlash=function(U){return U.substr(-1)==="/"?U.substr(0,U.length-1):U},o.noneOrAll=function(U,re,R){if(U){var B=!1,oe=!0,ie,xe;for(ie=0;ie<R.length;ie++)xe=U[R[ie]],xe!=null?B=!0:oe=!1;if(B&&!oe)for(ie=0;ie<R.length;ie++)U[R[ie]]=re[R[ie]]}},o.mergeArray=function(U,re,R,B){var oe=typeof B=="function";if(o.isArrayOrTypedArray(U))for(var ie=Math.min(U.length,re.length),xe=0;xe<ie;xe++){var _e=U[xe];re[xe][R]=oe?B(_e):_e}},o.mergeArrayCastPositive=function(U,re,R){return o.mergeArray(U,re,R,function(B){var oe=+B;return isFinite(oe)&&oe>0?oe:0})},o.fillArray=function(U,re,R,B){if(B=B||o.identity,o.isArrayOrTypedArray(U))for(var oe=0;oe<re.length;oe++)re[oe][R]=B(U[oe])},o.castOption=function(U,re,R,B){B=B||o.identity;var oe=o.nestedProperty(U,R).get();return o.isArrayOrTypedArray(oe)?Array.isArray(re)&&o.isArrayOrTypedArray(oe[re[0]])?B(oe[re[0]][re[1]]):B(oe[re]):oe},o.extractOption=function(U,re,R,B){if(R in U)return U[R];var oe=o.nestedProperty(re,B).get();if(!Array.isArray(oe))return oe};function Z(U){var re={};for(var R in U)for(var B=U[R],oe=0;oe<B.length;oe++)re[B[oe]]=+R;return re}o.tagSelected=function(U,re,R){var B=re.selectedpoints,oe=re._indexToPoints,ie;oe&&(ie=Z(oe));function xe(Je){return Je!==void 0&&Je<U.length}for(var _e=0;_e<B.length;_e++){var ke=B[_e];if(o.isIndex(ke)||o.isArrayOrTypedArray(ke)&&o.isIndex(ke[0])&&o.isIndex(ke[1])){var Pe=ie?ie[ke]:ke,Ge=R?R[Pe]:Pe;xe(Ge)&&(U[Ge].selected=1)}}},o.selIndices2selPoints=function(U){var re=U.selectedpoints,R=U._indexToPoints;if(R){for(var B=Z(R),oe=[],ie=0;ie<re.length;ie++){var xe=re[ie];if(o.isIndex(xe)){var _e=B[xe];o.isIndex(_e)&&oe.push(_e)}}return oe}else return re},o.getTargetArray=function(U,re){var R=re.target;if(typeof R=="string"&&R){var B=o.nestedProperty(U,R).get();return o.isArrayOrTypedArray(B)?B:!1}else if(o.isArrayOrTypedArray(R))return R;return!1};function z(U,re,R){var B={};typeof re!="object"&&(re={});var oe=R==="pieLike"?-1:3,ie=Object.keys(U),xe,_e,ke;for(xe=0;xe<ie.length;xe++)_e=ie[xe],ke=U[_e],!(_e.charAt(0)==="_"||typeof ke=="function")&&(_e==="module"?B[_e]=ke:Array.isArray(ke)?_e==="colorscale"||oe===-1?B[_e]=ke.slice():B[_e]=ke.slice(0,oe):o.isTypedArray(ke)?oe===-1?B[_e]=ke.subarray():B[_e]=ke.subarray(0,oe):ke&&typeof ke=="object"?B[_e]=z(U[_e],re[_e],R):B[_e]=ke);for(ie=Object.keys(re),xe=0;xe<ie.length;xe++)_e=ie[xe],ke=re[_e],(typeof ke!="object"||!(_e in B)||typeof B[_e]!="object")&&(B[_e]=ke);return B}o.minExtend=z,o.titleCase=function(U){return U.charAt(0).toUpperCase()+U.substr(1)},o.containsAny=function(U,re){for(var R=0;R<re.length;R++)if(U.indexOf(re[R])!==-1)return!0;return!1};var q=/Version\/[\d\.]+.*Safari/;o.isSafari=function(){return q.test(window.navigator.userAgent)};var X=/iPad|iPhone|iPod/;o.isIOS=function(){return X.test(window.navigator.userAgent)};var K=/Firefox\/(\d+)\.\d+/;o.getFirefoxVersion=function(){var U=K.exec(window.navigator.userAgent);if(U&&U.length===2){var re=parseInt(U[1]);if(!isNaN(re))return re}return null},o.isD3Selection=function(U){return U instanceof h.selection},o.ensureSingle=function(U,re,R,B){var oe=U.select(re+(R?"."+R:""));if(oe.size())return oe;var ie=U.append(re);return R&&ie.classed(R,!0),B&&ie.call(B),ie},o.ensureSingleById=function(U,re,R,B){var oe=U.select(re+"#"+R);if(oe.size())return oe;var ie=U.append(re).attr("id",R);return B&&ie.call(B),ie},o.objectFromPath=function(U,re){for(var R=U.split("."),B,oe=B={},ie=0;ie<R.length;ie++){var xe=R[ie],_e=null,ke=R[ie].match(/(.*)\[([0-9]+)\]/);ke?(xe=ke[1],_e=ke[2],B=B[xe]=[],ie===R.length-1?B[_e]=re:B[_e]={},B=B[_e]):(ie===R.length-1?B[xe]=re:B[xe]={},B=B[xe])}return oe};var ee=/^([^\[\.]+)\.(.+)?/,ne=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function le(U){return U.slice(0,2)==="__"}o.expandObjectPaths=function(U){var re,R,B,oe,ie,xe,_e;if(typeof U=="object"&&!Array.isArray(U)){for(R in U)if(U.hasOwnProperty(R))if(re=R.match(ee)){if(oe=U[R],B=re[1],le(B))continue;delete U[R],U[B]=o.extendDeepNoArrays(U[B]||{},o.objectFromPath(R,o.expandObjectPaths(oe))[B])}else if(re=R.match(ne)){if(oe=U[R],B=re[1],le(B))continue;if(ie=parseInt(re[2]),delete U[R],U[B]=U[B]||[],re[3]===".")_e=re[4],xe=U[B][ie]=U[B][ie]||{},o.extendDeepNoArrays(xe,o.objectFromPath(_e,o.expandObjectPaths(oe)));else{if(le(B))continue;U[B][ie]=o.expandObjectPaths(oe)}}else{if(le(R))continue;U[R]=o.expandObjectPaths(U[R])}}return U},o.numSeparate=function(U,re,R){if(R||(R=!1),typeof re!="string"||re.length===0)throw new Error("Separator string required for formatting!");typeof U=="number"&&(U=String(U));var B=/(\d+)(\d{3})/,oe=re.charAt(0),ie=re.charAt(1),xe=U.split("."),_e=xe[0],ke=xe.length>1?oe+xe[1]:"";if(ie&&(xe.length>1||_e.length>4||R))for(;B.test(_e);)_e=_e.replace(B,"$1"+ie+"$2");return _e+ke},o.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var W=/^\w*$/;o.templateString=function(U,re){var R={};return U.replace(o.TEMPLATE_STRING_REGEX,function(B,oe){var ie;return W.test(oe)?ie=re[oe]:(R[oe]=R[oe]||o.nestedProperty(re,oe).get,ie=R[oe](!0)),ie!==void 0?ie:""})};var ce={max:10,count:0,name:"hovertemplate"};o.hovertemplateString=function(){return Ae.apply(ce,arguments)};var de={max:10,count:0,name:"texttemplate"};o.texttemplateString=function(){return Ae.apply(de,arguments)};var ve=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function pe(U){var re=U.match(ve);return re?{key:re[1],op:re[2],number:Number(re[3])}:{key:U,op:null,number:null}}var be={max:10,count:0,name:"texttemplate",parseMultDiv:!0};o.texttemplateStringForShapes=function(){return Ae.apply(be,arguments)};var Le=/^[:|\|]/;function Ae(U,re,R){var B=this,oe=arguments;return re||(re={}),U.replace(o.TEMPLATE_STRING_REGEX,function(ie,xe,_e){var ke=xe==="xother"||xe==="yother",Pe=xe==="_xother"||xe==="_yother",Ge=xe==="_xother_"||xe==="_yother_",Je=xe==="xother_"||xe==="yother_",yt=ke||Pe||Je||Ge,lt=xe;(Pe||Ge)&&(lt=lt.substring(1)),(Je||Ge)&&(lt=lt.substring(0,lt.length-1));var mt=null,Ce=null;if(B.parseMultDiv){var Ie=pe(lt);lt=Ie.key,mt=Ie.op,Ce=Ie.number}var Se;if(yt){if(Se=re[lt],Se===void 0)return""}else{var Be,rt;for(rt=3;rt<oe.length;rt++)if(Be=oe[rt],!!Be){if(Be.hasOwnProperty(lt)){Se=Be[lt];break}if(W.test(lt)||(Se=o.nestedProperty(Be,lt).get(!0)),Se!==void 0)break}}if(Se!==void 0&&(mt==="*"&&(Se*=Ce),mt==="/"&&(Se/=Ce)),Se===void 0&&B)return B.count<B.max&&(o.warn("Variable '"+lt+"' in "+B.name+" could not be found!"),Se=ie),B.count===B.max&&o.warn("Too many "+B.name+" warnings - additional warnings will be suppressed"),B.count++,ie;if(_e){var ht;if(_e[0]===":"&&(ht=R?R.numberFormat:o.numberFormat,Se!==""&&(Se=ht(_e.replace(Le,""))(Se))),_e[0]==="|"){ht=R?R.timeFormat:c;var Lt=o.dateTime2ms(Se);Se=o.formatDate(Lt,_e.replace(Le,""),!1,ht)}}else{var Ct=lt+"Label";re.hasOwnProperty(Ct)&&(Se=re[Ct])}return yt&&(Se="("+Se+")",(Pe||Ge)&&(Se=" "+Se),(Je||Ge)&&(Se=Se+" ")),Se})}var We=48,te=57;o.subplotSort=function(U,re){for(var R=Math.min(U.length,re.length)+1,B=0,oe=0,ie=0;ie<R;ie++){var xe=U.charCodeAt(ie)||0,_e=re.charCodeAt(ie)||0,ke=xe>=We&&xe<=te,Pe=_e>=We&&_e<=te;if(ke&&(B=10*B+xe-We),Pe&&(oe=10*oe+_e-We),!ke||!Pe){if(B!==oe)return B-oe;if(xe!==_e)return xe-_e}}return oe-B};var ae=2e9;o.seedPseudoRandom=function(){ae=2e9},o.pseudoRandom=function(){var U=ae;return ae=(69069*ae+1)%4294967296,Math.abs(ae-U)<429496729?o.pseudoRandom():ae/4294967296},o.fillText=function(U,re,R){var B=Array.isArray(R)?function(xe){R.push(xe)}:function(xe){R.text=xe},oe=o.extractOption(U,re,"htx","hovertext");if(o.isValidTextValue(oe))return B(oe);var ie=o.extractOption(U,re,"tx","text");if(o.isValidTextValue(ie))return B(ie)},o.isValidTextValue=function(U){return U||U===0},o.formatPercent=function(U,re){re=re||0;for(var R=(Math.round(100*U*Math.pow(10,re))*Math.pow(.1,re)).toFixed(re)+"%",B=0;B<re;B++)R.indexOf(".")!==-1&&(R=R.replace("0%","%"),R=R.replace(".%","%"));return R},o.isHidden=function(U){var re=window.getComputedStyle(U).display;return!re||re==="none"},o.strTranslate=function(U,re){return U||re?"translate("+U+","+re+")":""},o.strRotate=function(U){return U?"rotate("+U+")":""},o.strScale=function(U){return U!==1?"scale("+U+")":""},o.getTextTransform=function(U){var re=U.noCenter,R=U.textX,B=U.textY,oe=U.targetX,ie=U.targetY,xe=U.anchorX||0,_e=U.anchorY||0,ke=U.rotate,Pe=U.scale;return Pe?Pe>1&&(Pe=1):Pe=0,o.strTranslate(oe-Pe*(R+xe),ie-Pe*(B+_e))+o.strScale(Pe)+(ke?"rotate("+ke+(re?"":" "+R+" "+B)+")":"")},o.setTransormAndDisplay=function(U,re){U.attr("transform",o.getTextTransform(re)),U.style("display",re.scale?null:"none")},o.ensureUniformFontSize=function(U,re){var R=o.extendFlat({},re);return R.size=Math.max(re.size,U._fullLayout.uniformtext.minsize||0),R},o.join2=function(U,re,R){var B=U.length;return B>1?U.slice(0,-1).join(re)+R+U[B-1]:U.join(re)},o.bigFont=function(U){return Math.round(1.2*U)};var G=o.getFirefoxVersion(),Q=G!==null&&G<86;o.getPositionFromD3Event=function(){return Q?[h.event.layerX,h.event.layerY]:[h.event.offsetX,h.event.offsetY]}}}),ro=i({"build/plotcss.js"(){var V=_r(),$={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(c in $)h=c.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),V.addStyleRule(h,$[c]);var h,c}}),no=i({"node_modules/is-browser/client.js"(V,$){$.exports=!0}}),bs=i({"node_modules/has-hover/index.js"(V,$){var h=no(),c;typeof window.matchMedia=="function"?c=!window.matchMedia("(hover: none)").matches:c=h,$.exports=c}}),bo=i({"node_modules/events/events.js"(V,$){var h=typeof Reflect=="object"?Reflect:null,c=h&&typeof h.apply=="function"?h.apply:function(P,J,H){return Function.prototype.apply.call(P,J,H)},u;h&&typeof h.ownKeys=="function"?u=h.ownKeys:Object.getOwnPropertySymbols?u=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:u=function(P){return Object.getOwnPropertyNames(P)};function p(F){console&&console.warn&&console.warn(F)}var v=Number.isNaN||function(P){return P!==P};function m(){m.init.call(this)}$.exports=m,$.exports.once=b,m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var g=10;function w(F){if(typeof F!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof F)}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(F){if(typeof F!="number"||F<0||v(F))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+F+".");g=F}}),m.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||v(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function o(F){return F._maxListeners===void 0?m.defaultMaxListeners:F._maxListeners}m.prototype.getMaxListeners=function(){return o(this)},m.prototype.emit=function(P){for(var J=[],H=1;H<arguments.length;H++)J.push(arguments[H]);var Y=P==="error",Z=this._events;if(Z!==void 0)Y=Y&&Z.error===void 0;else if(!Y)return!1;if(Y){var z;if(J.length>0&&(z=J[0]),z instanceof Error)throw z;var q=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw q.context=z,q}var X=Z[P];if(X===void 0)return!1;if(typeof X=="function")c(X,this,J);else for(var K=X.length,ee=A(X,K),H=0;H<K;++H)c(ee[H],this,J);return!0};function T(F,P,J,H){var Y,Z,z;if(w(J),Z=F._events,Z===void 0?(Z=F._events=Object.create(null),F._eventsCount=0):(Z.newListener!==void 0&&(F.emit("newListener",P,J.listener?J.listener:J),Z=F._events),z=Z[P]),z===void 0)z=Z[P]=J,++F._eventsCount;else if(typeof z=="function"?z=Z[P]=H?[J,z]:[z,J]:H?z.unshift(J):z.push(J),Y=o(F),Y>0&&z.length>Y&&!z.warned){z.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=F,q.type=P,q.count=z.length,p(q)}return F}m.prototype.addListener=function(P,J){return T(this,P,J,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(P,J){return T(this,P,J,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function k(F,P,J){var H={fired:!1,wrapFn:void 0,target:F,type:P,listener:J},Y=y.bind(H);return Y.listener=J,H.wrapFn=Y,Y}m.prototype.once=function(P,J){return w(J),this.on(P,k(this,P,J)),this},m.prototype.prependOnceListener=function(P,J){return w(J),this.prependListener(P,k(this,P,J)),this},m.prototype.removeListener=function(P,J){var H,Y,Z,z,q;if(w(J),Y=this._events,Y===void 0)return this;if(H=Y[P],H===void 0)return this;if(H===J||H.listener===J)--this._eventsCount===0?this._events=Object.create(null):(delete Y[P],Y.removeListener&&this.emit("removeListener",P,H.listener||J));else if(typeof H!="function"){for(Z=-1,z=H.length-1;z>=0;z--)if(H[z]===J||H[z].listener===J){q=H[z].listener,Z=z;break}if(Z<0)return this;Z===0?H.shift():C(H,Z),H.length===1&&(Y[P]=H[0]),Y.removeListener!==void 0&&this.emit("removeListener",P,q||J)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(P){var J,H,Y;if(H=this._events,H===void 0)return this;if(H.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):H[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete H[P]),this;if(arguments.length===0){var Z=Object.keys(H),z;for(Y=0;Y<Z.length;++Y)z=Z[Y],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(J=H[P],typeof J=="function")this.removeListener(P,J);else if(J!==void 0)for(Y=J.length-1;Y>=0;Y--)this.removeListener(P,J[Y]);return this};function D(F,P,J){var H=F._events;if(H===void 0)return[];var Y=H[P];return Y===void 0?[]:typeof Y=="function"?J?[Y.listener||Y]:[Y]:J?j(Y):A(Y,Y.length)}m.prototype.listeners=function(P){return D(this,P,!0)},m.prototype.rawListeners=function(P){return D(this,P,!1)},m.listenerCount=function(F,P){return typeof F.listenerCount=="function"?F.listenerCount(P):M.call(F,P)},m.prototype.listenerCount=M;function M(F){var P=this._events;if(P!==void 0){var J=P[F];if(typeof J=="function")return 1;if(J!==void 0)return J.length}return 0}m.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function A(F,P){for(var J=new Array(P),H=0;H<P;++H)J[H]=F[H];return J}function C(F,P){for(;P+1<F.length;P++)F[P]=F[P+1];F.pop()}function j(F){for(var P=new Array(F.length),J=0;J<P.length;++J)P[J]=F[J].listener||F[J];return P}function b(F,P){return new Promise(function(J,H){function Y(z){F.removeListener(P,Z),H(z)}function Z(){typeof F.removeListener=="function"&&F.removeListener("error",Y),J([].slice.call(arguments))}L(F,P,Z,{once:!0}),P!=="error"&&S(F,Y,{once:!0})})}function S(F,P,J){typeof F.on=="function"&&L(F,"error",P,J)}function L(F,P,J,H){if(typeof F.on=="function")H.once?F.once(P,J):F.on(P,J);else if(typeof F.addEventListener=="function")F.addEventListener(P,function Y(Z){H.once&&F.removeEventListener(P,Y),J(Z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof F)}}}),Na=i({"src/lib/events.js"(V,$){var h=bo().EventEmitter,c={init:function(u){if(u._ev instanceof h)return u;var p=new h,v=new h;return u._ev=p,u._internalEv=v,u.on=p.on.bind(p),u.once=p.once.bind(p),u.removeListener=p.removeListener.bind(p),u.removeAllListeners=p.removeAllListeners.bind(p),u._internalOn=v.on.bind(v),u._internalOnce=v.once.bind(v),u._removeInternalListener=v.removeListener.bind(v),u._removeAllInternalListeners=v.removeAllListeners.bind(v),u.emit=function(m,g){p.emit(m,g),v.emit(m,g)},u},triggerHandler:function(u,p,v){var m,g=u._ev;if(!g)return;var w=g._events[p];if(!w)return;function o(y){if(y.listener){if(g.removeListener(p,y.listener),!y.fired)return y.fired=!0,y.listener.apply(g,[v])}else return y.apply(g,[v])}w=Array.isArray(w)?w:[w];var T;for(T=0;T<w.length-1;T++)o(w[T]);return m=o(w[T]),m},purge:function(u){return delete u._ev,delete u.on,delete u.once,delete u.removeListener,delete u.removeAllListeners,delete u.emit,delete u._ev,delete u._internalEv,delete u._internalOn,delete u._internalOnce,delete u._removeInternalListener,delete u._removeAllInternalListeners,u}};$.exports=c}}),Mi=i({"src/lib/queue.js"(V,$){var h=_r(),c=Ht().dfltConfig;function u(v,m){for(var g=[],w,o=0;o<m.length;o++)w=m[o],w===v?g[o]=w:typeof w=="object"?g[o]=Array.isArray(w)?h.extendDeep([],w):h.extendDeepAll({},w):g[o]=w;return g}var p={};p.add=function(v,m,g,w,o){var T,y;if(v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},y=v.undoQueue.index,v.autoplay){v.undoQueue.inSequence||(v.autoplay=!1);return}!v.undoQueue.sequence||v.undoQueue.beginSequence?(T={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},v.undoQueue.queue.splice(y,v.undoQueue.queue.length-y,T),v.undoQueue.index+=1):T=v.undoQueue.queue[y-1],v.undoQueue.beginSequence=!1,T&&(T.undo.calls.unshift(m),T.undo.args.unshift(g),T.redo.calls.push(w),T.redo.args.push(o)),v.undoQueue.queue.length>c.queueLength&&(v.undoQueue.queue.shift(),v.undoQueue.index--)},p.startSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!0,v.undoQueue.beginSequence=!0},p.stopSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!1,v.undoQueue.beginSequence=!1},p.undo=function(m){var g,w;if(!(m.undoQueue===void 0||isNaN(m.undoQueue.index)||m.undoQueue.index<=0)){for(m.undoQueue.index--,g=m.undoQueue.queue[m.undoQueue.index],m.undoQueue.inSequence=!0,w=0;w<g.undo.calls.length;w++)p.plotDo(m,g.undo.calls[w],g.undo.args[w]);m.undoQueue.inSequence=!1,m.autoplay=!1}},p.redo=function(m){var g,w;if(!(m.undoQueue===void 0||isNaN(m.undoQueue.index)||m.undoQueue.index>=m.undoQueue.queue.length)){for(g=m.undoQueue.queue[m.undoQueue.index],m.undoQueue.inSequence=!0,w=0;w<g.redo.calls.length;w++)p.plotDo(m,g.redo.calls[w],g.redo.args[w]);m.undoQueue.inSequence=!1,m.autoplay=!1,m.undoQueue.index++}},p.plotDo=function(v,m,g){v.autoplay=!0,g=u(v,g),m.apply(null,g)},$.exports=p}}),Fi=i({"src/plots/frame_attributes.js"(V,$){$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}}}),Dt=i({"src/plot_api/plot_schema.js"(V){var $=xn(),h=_r(),c=vt(),u=Pa(),p=Fi(),v=ka(),m=Ht().configAttributes,g=Ma(),w=h.extendDeepAll,o=h.isPlainObject,T=h.isArrayOrTypedArray,y=h.nestedProperty,k=h.valObjectMeta,D="_isSubplotObj",M="_isLinkedToArray",A="_arrayAttrRegexps",C="_deprecated",j=[D,M,A,C];V.IS_SUBPLOT_OBJ=D,V.IS_LINKED_TO_ARRAY=M,V.DEPRECATED=C,V.UNDERSCORE_ATTRS=j,V.get=function(){var K={};return $.allTypes.forEach(function(ee){K[ee]=F(ee)}),{defs:{valObjects:k,metaKeys:j.concat(["description","role","editType","impliedEdits"]),editType:{traces:g.traces,layout:g.layout},impliedEdits:{}},traces:K,layout:P(),frames:J(),animation:H(v),config:H(m)}},V.crawl=function(K,ee,ne,le){var W=ne||0;le=le||"",Object.keys(K).forEach(function(ce){var de=K[ce];if(j.indexOf(ce)===-1){var ve=(le?le+".":"")+ce;ee(de,ce,K,W,ve),!V.isValObject(de)&&o(de)&&ce!=="impliedEdits"&&V.crawl(de,ee,W+1,ve)}})},V.isValObject=function(K){return K&&K.valType!==void 0},V.findArrayAttributes=function(K){var ee=[],ne=[],le=[],W,ce;function de(pe,be,Le,Ae){ne=ne.slice(0,Ae).concat([be]),le=le.slice(0,Ae).concat([pe&&pe._isLinkedToArray]);var We=pe&&(pe.valType==="data_array"||pe.arrayOk===!0)&&!(ne[Ae-1]==="colorbar"&&(be==="ticktext"||be==="tickvals"));We&&ve(W,0,"")}function ve(pe,be,Le){var Ae=pe[ne[be]],We=Le+ne[be];if(be===ne.length-1)T(Ae)&&ee.push(ce+We);else if(le[be]){if(Array.isArray(Ae))for(var te=0;te<Ae.length;te++)o(Ae[te])&&ve(Ae[te],be+1,We+"["+te+"].")}else o(Ae)&&ve(Ae,be+1,We+".")}return W=K,ce="",V.crawl(c,de),K._module&&K._module.attributes&&V.crawl(K._module.attributes,de),ee},V.getTraceValObject=function(K,ee){var ne=ee[0],le=1,W,ce,de=K._module;if(de||(de=($.modules[K.type||c.type.dflt]||{})._module),!de)return!1;if(W=de.attributes,ce=W&&W[ne],!ce){var ve=de.basePlotModule;ve&&ve.attributes&&(ce=ve.attributes[ne])}return ce||(ce=c[ne]),S(ce,ee,le)},V.getLayoutValObject=function(K,ee){var ne=b(K,ee[0]);return S(ne,ee,1)};function b(K,ee){var ne,le,W,ce,de=K._basePlotModules;if(de){var ve;for(ne=0;ne<de.length;ne++){if(W=de[ne],W.attrRegex&&W.attrRegex.test(ee)){if(W.layoutAttrOverrides)return W.layoutAttrOverrides;!ve&&W.layoutAttributes&&(ve=W.layoutAttributes)}var pe=W.baseLayoutAttrOverrides;if(pe&&ee in pe)return pe[ee]}if(ve)return ve}var be=K._modules;if(be){for(ne=0;ne<be.length;ne++)if(ce=be[ne].layoutAttributes,ce&&ee in ce)return ce[ee]}for(le in $.componentsRegistry){if(W=$.componentsRegistry[le],W.name==="colorscale"&&ee.indexOf("coloraxis")===0)return W.layoutAttributes[ee];if(!W.schema&&ee===W.name)return W.layoutAttributes}return ee in u?u[ee]:!1}function S(K,ee,ne){if(!K)return!1;if(K._isLinkedToArray){if(L(ee[ne]))ne++;else if(ne<ee.length)return!1}for(;ne<ee.length;ne++){var le=K[ee[ne]];if(o(le))K=le;else break;if(ne===ee.length-1)break;if(K._isLinkedToArray){if(ne++,!L(ee[ne]))return!1}else if(K.valType==="info_array"){ne++;var W=ee[ne];if(!L(W))return!1;var ce=K.items;if(Array.isArray(ce)){if(W>=ce.length)return!1;if(K.dimensions===2){if(ne++,ee.length===ne)return K;var de=ee[ne];if(!L(de))return!1;K=ce[W][de]}else K=ce[W]}else K=ce}}return K}function L(K){return K===Math.round(K)&&K>=0}function F(K){var ee,ne;ee=$.modules[K]._module,ne=ee.basePlotModule;var le={};le.type=null;var W=w({},c),ce=w({},ee.attributes);V.crawl(ce,function(pe,be,Le,Ae,We){y(W,We).set(void 0),pe===void 0&&y(ce,We).set(void 0)}),w(le,W),$.traceIs(K,"noOpacity")&&delete le.opacity,$.traceIs(K,"showLegend")||(delete le.showlegend,delete le.legendgroup),$.traceIs(K,"noHover")&&(delete le.hoverinfo,delete le.hoverlabel),ee.selectPoints||delete le.selectedpoints,w(le,ce),ne.attributes&&w(le,ne.attributes),le.type=K;var de={meta:ee.meta||{},categories:ee.categories||{},animatable:!!ee.animatable,type:K,attributes:H(le)};if(ee.layoutAttributes){var ve={};w(ve,ee.layoutAttributes),de.layoutAttributes=H(ve)}return ee.animatable||V.crawl(de,function(pe){V.isValObject(pe)&&"anim"in pe&&delete pe.anim}),de}function P(){var K={},ee,ne;w(K,u);for(ee in $.subplotsRegistry)if(ne=$.subplotsRegistry[ee],!!ne.layoutAttributes)if(Array.isArray(ne.attr))for(var le=0;le<ne.attr.length;le++)q(K,ne,ne.attr[le]);else{var W=ne.attr==="subplot"?ne.name:ne.attr;q(K,ne,W)}for(ee in $.componentsRegistry){ne=$.componentsRegistry[ee];var ce=ne.schema;if(ce&&(ce.subplots||ce.layout)){var de=ce.subplots;if(de&&de.xaxis&&!de.yaxis)for(var ve in de.xaxis)delete K.yaxis[ve];delete K.xaxis.shift,delete K.xaxis.autoshift}else ne.name==="colorscale"?w(K,ne.layoutAttributes):ne.layoutAttributes&&X(K,ne.layoutAttributes,ne.name)}return{layoutAttributes:H(K)}}function J(){var K={frames:w({},p)};return H(K),K.frames}function H(K){return Y(K),Z(K),z(K),K}function Y(K){function ee(le){return{valType:"string",editType:"none"}}function ne(le,W,ce){V.isValObject(le)?(le.arrayOk===!0||le.valType==="data_array")&&(ce[W+"src"]=ee()):o(le)&&(le.role="object")}V.crawl(K,ne)}function Z(K){function ee(ne,le,W){if(ne){var ce=ne[M];ce&&(delete ne[M],W[le]={items:{}},W[le].items[ce]=ne,W[le].role="object")}}V.crawl(K,ee)}function z(K){function ee(ne){for(var le in ne)if(o(ne[le]))ee(ne[le]);else if(Array.isArray(ne[le]))for(var W=0;W<ne[le].length;W++)ee(ne[le][W]);else ne[le]instanceof RegExp&&(ne[le]=ne[le].toString())}ee(K)}function q(K,ee,ne){var le=y(K,ne),W=w({},ee.layoutAttributes);W[D]=!0,le.set(W)}function X(K,ee,ne){var le=y(K,ne);le.set(w(le.get()||{},ee))}}}),hr=i({"src/plot_api/plot_template.js"(V){var $=_r(),h=vt(),c="templateitemname",u={name:{valType:"string",editType:"none"}};u[c]={valType:"string",editType:"calc"},V.templatedArray=function(m,g){return g._isLinkedToArray=m,g.name=u.name,g[c]=u[c],g},V.traceTemplater=function(m){var g={},w,o;for(w in m)o=m[w],Array.isArray(o)&&o.length&&(g[w]=0);function T(y){w=$.coerce(y,{},h,"type");var k={type:w,_template:null};if(w in g){o=m[w];var D=g[w]%o.length;g[w]++,k._template=o[D]}return k}return{newTrace:T}},V.newContainer=function(m,g,w){var o=m._template,T=o&&(o[g]||w&&o[w]);$.isPlainObject(T)||(T=null);var y=m[g]={_template:T};return y},V.arrayTemplater=function(m,g,w){var o=m._template,T=o&&o[v(g)],y=o&&o[g];(!Array.isArray(y)||!y.length)&&(y=[]);var k={};function D(A){var C={name:A.name,_input:A},j=C[c]=A[c];if(!p(j))return C._template=T,C;for(var b=0;b<y.length;b++){var S=y[b];if(S.name===j)return k[j]=1,C._template=S,C}return C[w]=A[w]||!1,C._template=!1,C}function M(){for(var A=[],C=0;C<y.length;C++){var j=y[C],b=j.name;if(p(b)&&!k[b]){var S={_template:j,name:b,_input:{_templateitemname:b}};S[c]=j[c],A.push(S),k[b]=1}}return A}return{newItem:D,defaultItems:M}};function p(m){return m&&typeof m=="string"}function v(m){var g=m.length-1;return m.charAt(g)!=="s"&&$.warn("bad argument to arrayDefaultKey: "+m),m.substr(0,m.length-1)+"defaults"}V.arrayDefaultKey=v,V.arrayEditor=function(m,g,w){var o=($.nestedProperty(m,g).get()||[]).length,T=w._index,y=T>=o&&(w._input||{})._templateitemname;y&&(T=o);var k=g+"["+T+"]",D;function M(){D={},y&&(D[k]={},D[k][c]=y)}M();function A(S,L){D[S]=L}function C(S,L){y?$.nestedProperty(D[k],S).set(L):D[k+"."+S]=L}function j(){var S=D;return M(),S}function b(S,L){S&&C(S,L);var F=j();for(var P in F)$.nestedProperty(m,P).set(F[P])}return{modifyBase:A,modifyItem:C,getUpdateObj:j,applyUpdate:b}}}}),Yr=i({"src/plots/cartesian/constants.js"(V,$){var h=Vt().counter;$.exports={idRegex:{x:h("x","( domain)?"),y:h("y","( domain)?")},attrRegex:h("[xy]axis"),xAxisMatch:h("xaxis"),yAxisMatch:h("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}}}),Ur=i({"src/plots/cartesian/axis_ids.js"(V){var $=xn(),h=Yr();V.id2name=function(p){if(!(typeof p!="string"||!p.match(h.AX_ID_PATTERN))){var v=p.split(" ")[0].substr(1);return v==="1"&&(v=""),p.charAt(0)+"axis"+v}},V.name2id=function(p){if(p.match(h.AX_NAME_PATTERN)){var v=p.substr(5);return v==="1"&&(v=""),p.charAt(0)+v}},V.cleanId=function(p,v,m){var g=/( domain)$/.test(p);if(!(typeof p!="string"||!p.match(h.AX_ID_PATTERN))&&!(v&&p.charAt(0)!==v)&&!(g&&!m)){var w=p.split(" ")[0].substr(1).replace(/^0+/,"");return w==="1"&&(w=""),p.charAt(0)+w+(g&&m?" domain":"")}},V.list=function(u,p,v){var m=u._fullLayout;if(!m)return[];var g=V.listIds(u,p),w=new Array(g.length),o;for(o=0;o<g.length;o++){var T=g[o];w[o]=m[T.charAt(0)+"axis"+T.substr(1)]}if(!v){var y=m._subplots.gl3d||[];for(o=0;o<y.length;o++){var k=m[y[o]];p?w.push(k[p+"axis"]):w.push(k.xaxis,k.yaxis,k.zaxis)}}return w},V.listIds=function(u,p){var v=u._fullLayout;if(!v)return[];var m=v._subplots;return p?m[p+"axis"]:m.xaxis.concat(m.yaxis)},V.getFromId=function(u,p,v){var m=u._fullLayout;return p=p===void 0||typeof p!="string"?p:p.replace(" domain",""),v==="x"?p=p.replace(/y[0-9]*/,""):v==="y"&&(p=p.replace(/x[0-9]*/,"")),m[V.id2name(p)]},V.getFromTrace=function(u,p,v){var m=u._fullLayout,g=null;if($.traceIs(p,"gl3d")){var w=p.scene;w.substr(0,5)==="scene"&&(g=m[w][v+"axis"])}else g=V.getFromId(u,p[v+"axis"]||v);return g},V.idSort=function(u,p){var v=u.charAt(0),m=p.charAt(0);return v!==m?v>m?1:-1:+(u.substr(1)||1)-+(p.substr(1)||1)},V.ref2id=function(u){return/^[xyz]/.test(u)?u.split(" ")[0]:!1};function c(u,p){if(p&&p.length){for(var v=0;v<p.length;v++)if(p[v][u])return!0}return!1}V.isLinked=function(u,p){return c(p,u._axisMatchGroups)||c(p,u._axisConstraintGroups)}}}),rn=i({"src/components/shapes/handle_outline.js"(V,$){function h(u){var p=u._fullLayout._zoomlayer;p&&p.selectAll(".outline-controllers").remove()}function c(u){var p=u._fullLayout._zoomlayer;p&&p.selectAll(".select-outline").remove(),u._fullLayout._outlining=!1}$.exports={clearOutlineControllers:h,clearOutline:c}}}),An=i({"src/traces/scatter/layout_attributes.js"(V,$){$.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}}}),ii=i({"src/plots/get_data.js"(V){var $=xn();Yr().SUBPLOT_PATTERN,V.getSubplotCalcData=function(h,c,u){var p=$.subplotsRegistry[c];if(!p)return[];for(var v=p.attr,m=[],g=0;g<h.length;g++){var w=h[g],o=w[0].trace;o[v]===u&&m.push(w)}return m},V.getModuleCalcData=function(h,c,u){var p=[],v=[],m;if(typeof c=="string"?m=$.getModule(c).plot:typeof c=="function"?m=c:m=c.plot,!m)return[p,h];for(var g=u,w=0;w<h.length;w++){var o=h[w],T=o[0].trace,y=T.zorder!==void 0;T.visible!==!0||T._length===0||(T._module&&T._module.plot===m&&(!y||T.zorder===g)?p.push(o):v.push(o))}return[p,v]},V.getSubplotData=function(c,u,p){if(!$.subplotsRegistry[u])return[];for(var v=$.subplotsRegistry[u].attr,m=[],g,w=0;w<c.length;w++)g=c[w],g[v]===p&&m.push(g);return m}}}),ba=i({"src/plots/command.js"(V){var $=xn(),h=_r();V.manageCommandObserver=function(g,w,o,T){var y={},k=!0;w&&w._commandObserver&&(y=w._commandObserver),y.cache||(y.cache={}),y.lookupTable={};var D=V.hasSimpleAPICommandBindings(g,o,y.lookupTable);if(w&&w._commandObserver){if(D)return y;if(w._commandObserver.remove)return w._commandObserver.remove(),w._commandObserver=null,y}if(D){c(g,D,y.cache),y.check=function(){if(k){var j=c(g,D,y.cache);return j.changed&&T&&y.lookupTable[j.value]!==void 0&&(y.disable(),Promise.resolve(T({value:j.value,type:D.type,prop:D.prop,traces:D.traces,index:y.lookupTable[j.value]})).then(y.enable,y.enable)),j.changed}};for(var M=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],A=0;A<M.length;A++)g._internalOn(M[A],y.check);y.remove=function(){for(var C=0;C<M.length;C++)g._removeInternalListener(M[C],y.check)}}else h.log("Unable to automatically bind plot updates to API command"),y.lookupTable={},y.remove=function(){};return y.disable=function(){k=!1},y.enable=function(){k=!0},w&&(w._commandObserver=y),y},V.hasSimpleAPICommandBindings=function(g,w,o){var T,y=w.length,k;for(T=0;T<y;T++){var D,M=w[T],A=M.method,C=M.args;if(Array.isArray(C)||(C=[]),!A)return!1;var j=V.computeAPICommandBindings(g,A,C);if(j.length!==1)return!1;if(!k)k=j[0],Array.isArray(k.traces)&&k.traces.sort();else{if(D=j[0],D.type!==k.type||D.prop!==k.prop)return!1;if(Array.isArray(k.traces))if(Array.isArray(D.traces)){D.traces.sort();for(var b=0;b<k.traces.length;b++)if(k.traces[b]!==D.traces[b])return!1}else return!1;else if(D.prop!==k.prop)return!1}D=j[0];var S=D.value;if(Array.isArray(S))if(S.length===1)S=S[0];else return!1;o&&(o[S]=T)}return k};function c(g,w,o){var T,y,k,D=!1;if(w.type==="data")T=g._fullData[w.traces!==null?w.traces[0]:0];else if(w.type==="layout")T=g._fullLayout;else return!1;return y=h.nestedProperty(T,w.prop).get(),k=o[w.type]=o[w.type]||{},k.hasOwnProperty(w.prop)&&k[w.prop]!==y&&(D=!0),k[w.prop]=y,{changed:D,value:y}}V.executeAPICommand=function(g,w,o){if(w==="skip")return Promise.resolve();var T=$.apiMethodRegistry[w],y=[g];Array.isArray(o)||(o=[]);for(var k=0;k<o.length;k++)y.push(o[k]);return T.apply(null,y).catch(function(D){return h.warn("API call to Plotly."+w+" rejected.",D),Promise.reject(D)})},V.computeAPICommandBindings=function(g,w,o){var T;switch(Array.isArray(o)||(o=[]),w){case"restyle":T=v(g,o);break;case"relayout":T=p(g,o);break;case"update":T=v(g,[o[0],o[2]]).concat(p(g,[o[1]]));break;case"animate":T=u(g,o);break;default:T=[]}return T};function u(g,w){return Array.isArray(w[0])&&w[0].length===1&&["string","number"].indexOf(typeof w[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:w[0][0].toString()}]:[]}function p(g,w){var o=[],T=w[0],y={};if(typeof T=="string")y[T]=w[1];else if(h.isPlainObject(T))y=T;else return o;return m(y,function(k,D,M){o.push({type:"layout",prop:k,value:M})},"",0),o}function v(g,w){var o,T,y,k,D=[];if(T=w[0],y=w[1],o=w[2],k={},typeof T=="string")k[T]=y;else if(h.isPlainObject(T))k=T,o===void 0&&(o=y);else return D;return o===void 0&&(o=null),m(k,function(M,A,C){var j,b;if(Array.isArray(C)){b=C.slice();var S=Math.min(b.length,g.data.length);o&&(S=Math.min(S,o.length)),j=[];for(var L=0;L<S;L++)j[L]=o?o[L]:L}else b=C,j=o?o.slice():null;if(j===null)Array.isArray(b)&&(b=b[0]);else if(Array.isArray(j)){if(!Array.isArray(b)){var F=b;b=[];for(var P=0;P<j.length;P++)b[P]=F}b.length=Math.min(j.length,b.length)}D.push({type:"data",prop:M,traces:j,value:b})},"",0),D}function m(g,w,o,T){Object.keys(g).forEach(function(y){var k=g[y];if(y[0]!=="_"){var D=o+(T>0?".":"")+y;h.isPlainObject(k)?m(k,w,D,T+1):w(D,y,k)}})}}}),xi=i({"src/plots/plots.js"(V,$){var h=f(),c=N().timeFormatLocale,u=I().formatLocale,p=fe(),v=qe(),m=xn(),g=Dt(),w=hr(),o=_r(),T=ut(),y=Te().BADNUM,k=Ur(),D=rn().clearOutline,M=An(),A=ka(),C=Fi(),j=ii().getModuleCalcData,b=o.relinkPrivateKeys,S=o._,L=$.exports={};o.extendFlat(L,m),L.attributes=vt(),L.attributes.type.values=L.allTypes,L.fontAttrs=ir(),L.layoutAttributes=Pa();var F=ba();L.executeAPICommand=F.executeAPICommand,L.computeAPICommandBindings=F.computeAPICommandBindings,L.manageCommandObserver=F.manageCommandObserver,L.hasSimpleAPICommandBindings=F.hasSimpleAPICommandBindings,L.redrawText=function(te){return te=o.getGraphDiv(te),new Promise(function(ae){setTimeout(function(){te._fullLayout&&(m.getComponentMethod("annotations","draw")(te),m.getComponentMethod("legend","draw")(te),m.getComponentMethod("colorbar","draw")(te),ae(L.previousPromises(te)))},300)})},L.resize=function(te){te=o.getGraphDiv(te);var ae,G=new Promise(function(Q,U){(!te||o.isHidden(te))&&U(new Error("Resize must be passed a displayed plot div element.")),te._redrawTimer&&clearTimeout(te._redrawTimer),te._resolveResize&&(ae=te._resolveResize),te._resolveResize=Q,te._redrawTimer=setTimeout(function(){if(!te.layout||te.layout.width&&te.layout.height||o.isHidden(te)){Q(te);return}delete te.layout.width,delete te.layout.height;var re=te.changed;te.autoplay=!0,m.call("relayout",te,{autosize:!0}).then(function(){te.changed=re,te._resolveResize===Q&&(delete te._resolveResize,Q(te))})},100)});return ae&&ae(G),G},L.previousPromises=function(te){if((te._promises||[]).length)return Promise.all(te._promises).then(function(){te._promises=[]})},L.addLinks=function(te){if(!(!te._context.showLink&&!te._context.showSources)){var ae=te._fullLayout,G=o.ensureSingle(ae._paper,"text","js-plot-link-container",function(oe){oe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:T.defaultLine,"pointer-events":"all"}).each(function(){var ie=h.select(this);ie.append("tspan").classed("js-link-to-tool",!0),ie.append("tspan").classed("js-link-spacer",!0),ie.append("tspan").classed("js-sourcelinks",!0)})}),Q=G.node(),U={y:ae._paper.attr("height")-9};document.body.contains(Q)&&Q.getComputedTextLength()>=ae.width-20?(U["text-anchor"]="start",U.x=5):(U["text-anchor"]="end",U.x=ae._paper.attr("width")-7),G.attr(U);var re=G.select(".js-link-to-tool"),R=G.select(".js-link-spacer"),B=G.select(".js-sourcelinks");te._context.showSources&&te._context.showSources(te),te._context.showLink&&P(te,re),R.text(re.text()&&B.text()?" - ":"")}};function P(te,ae){ae.text("");var G=ae.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(te._context.linkText+" ");if(te._context.sendData)G.on("click",function(){L.sendDataToCloud(te)});else{var Q=window.location.pathname.split("/"),U=window.location.search;G.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+Q[2].split(".")[0]+"/"+Q[1]+U})}}L.sendDataToCloud=function(te){var ae=(window.PLOTLYENV||{}).BASE_URL||te._context.plotlyServerURL;if(ae){te.emit("plotly_beforeexport");var G=h.select(te).append("div").attr("id","hiddenform").style("display","none"),Q=G.append("form").attr({action:ae+"/external",method:"post",target:"_blank"}),U=Q.append("input").attr({type:"text",name:"data"});return U.node().value=L.graphJson(te,!1,"keepdata"),Q.node().submit(),G.remove(),te.emit("plotly_afterexport"),!1}};var J=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],H=["year","month","dayMonth","dayMonthYear"];L.supplyDefaults=function(te,ae){var G=ae&&ae.skipUpdateCalc,Q=te._fullLayout||{};if(Q._skipDefaults){delete Q._skipDefaults;return}var U=te._fullLayout={},re=te.layout||{},R=te._fullData||[],B=te._fullData=[],oe=te.data||[],ie=te.calcdata||[],xe=te._context||{},_e;te._transitionData||L.createTransitionData(te),U._dfltTitle={plot:S(te,"Click to enter Plot title"),subtitle:S(te,"Click to enter Plot subtitle"),x:S(te,"Click to enter X axis title"),y:S(te,"Click to enter Y axis title"),colorbar:S(te,"Click to enter Colorscale title"),annotation:S(te,"new text")},U._traceWord=S(te,"trace");var ke=z(te,J);if(U._mapboxAccessToken=xe.mapboxAccessToken,Q._initialAutoSizeIsDone){var Pe=Q.width,Ge=Q.height;L.supplyLayoutGlobalDefaults(re,U,ke),re.width||(U.width=Pe),re.height||(U.height=Ge),L.sanitizeMargins(U)}else{L.supplyLayoutGlobalDefaults(re,U,ke);var Je=!re.width||!re.height,yt=U.autosize,lt=xe.autosizable,mt=Je&&(yt||lt);mt?L.plotAutoSize(te,re,U):Je&&L.sanitizeMargins(U),!yt&&Je&&(re.width=U.width,re.height=U.height)}U._d3locale=q(ke,U.separators),U._extraFormat=z(te,H),U._initialAutoSizeIsDone=!0,U._dataLength=oe.length,U._modules=[],U._visibleModules=[],U._basePlotModules=[];var Ce=U._subplots=Z(),Ie=U._splomAxes={x:{},y:{}},Se=U._splomSubplots={};U._splomGridDflt={},U._scatterStackOpts={},U._firstScatter={},U._alignmentOpts={},U._colorAxes={},U._requestRangeslider={},U._traceUids=Y(R,oe),L.supplyDataDefaults(oe,B,re,U);var Be=Object.keys(Ie.x),rt=Object.keys(Ie.y);if(Be.length>1&&rt.length>1){for(m.getComponentMethod("grid","sizeDefaults")(re,U),_e=0;_e<Be.length;_e++)o.pushUnique(Ce.xaxis,Be[_e]);for(_e=0;_e<rt.length;_e++)o.pushUnique(Ce.yaxis,rt[_e]);for(var ht in Se)o.pushUnique(Ce.cartesian,ht)}if(U._has=L._hasPlotType.bind(U),R.length===B.length)for(_e=0;_e<B.length;_e++)b(B[_e],R[_e]);L.supplyLayoutModuleDefaults(re,U,B,te._transitionData);var Lt=U._visibleModules,Ct=[];for(_e=0;_e<Lt.length;_e++){var zt=Lt[_e].crossTraceDefaults;zt&&o.pushUnique(Ct,zt)}for(_e=0;_e<Ct.length;_e++)Ct[_e](B,U);U._hasOnlyLargeSploms=U._basePlotModules.length===1&&U._basePlotModules[0].name==="splom"&&Be.length>15&&rt.length>15&&U.shapes.length===0&&U.images.length===0,L.linkSubplots(B,U,R,Q),L.cleanPlot(B,U,R,Q);var Bt=!!(Q._has&&Q._has("cartesian")),Ft=!!(U._has&&U._has("cartesian")),nr=Bt,_t=Ft;nr&&!_t?Q._bgLayer.remove():_t&&!nr&&(U._shouldCreateBgLayer=!0),Q._zoomlayer&&!te._dragging&&D({_fullLayout:Q}),X(B,U),b(U,Q),m.getComponentMethod("colorscale","crossTraceDefaults")(B,U),U._preGUI||(U._preGUI={}),U._tracePreGUI||(U._tracePreGUI={});var rr=U._tracePreGUI,pr={},Yt;for(Yt in rr)pr[Yt]="old";for(_e=0;_e<B.length;_e++)Yt=B[_e]._fullInput.uid,pr[Yt]||(rr[Yt]={}),pr[Yt]="new";for(Yt in pr)pr[Yt]==="old"&&delete rr[Yt];ne(U),m.getComponentMethod("rangeslider","makeData")(U),!G&&ie.length===B.length&&L.supplyDefaultsUpdateCalc(ie,B)},L.supplyDefaultsUpdateCalc=function(te,ae){for(var G=0;G<ae.length;G++){var Q=ae[G],U=(te[G]||[])[0];if(U&&U.trace){var re=U.trace;if(re._hasCalcTransform){var R=re._arrayAttrs,B,oe,ie;for(B=0;B<R.length;B++)oe=R[B],ie=o.nestedProperty(re,oe).get().slice(),o.nestedProperty(Q,oe).set(ie)}U.trace=Q}}};function Y(te,ae){var G=ae.length,Q=[],U,re;for(U=0;U<te.length;U++){var R=te[U]._fullInput;R!==re&&Q.push(R),re=R}var B=Q.length,oe=new Array(G),ie={};function xe(Pe,Ge){oe[Ge]=Pe,ie[Pe]=1}function _e(Pe,Ge){if(Pe&&typeof Pe=="string"&&!ie[Pe])return xe(Pe,Ge),!0}for(U=0;U<G;U++){var ke=ae[U].uid;typeof ke=="number"&&(ke=String(ke)),!_e(ke,U)&&(U<B&&_e(Q[U].uid,U)||xe(o.randstr(ie),U))}return oe}function Z(){var te=m.collectableSubplotTypes,ae={},G,Q;if(!te){te=[];var U=m.subplotsRegistry;for(var re in U){var R=U[re],B=R.attr;if(B&&(te.push(re),Array.isArray(B)))for(Q=0;Q<B.length;Q++)o.pushUnique(te,B[Q])}}for(G=0;G<te.length;G++)ae[te[G]]=[];return ae}function z(te,ae){var G=te._context.locale;G||(G="en-US");var Q=!1,U={};function re(_e){for(var ke=!0,Pe=0;Pe<ae.length;Pe++){var Ge=ae[Pe];U[Ge]||(_e[Ge]?U[Ge]=_e[Ge]:ke=!1)}ke&&(Q=!0)}for(var R=0;R<2;R++){for(var B=te._context.locales,oe=0;oe<2;oe++){var ie=(B[G]||{}).format;if(ie&&(re(ie),Q))break;B=m.localeRegistry}var xe=G.split("-")[0];if(Q||xe===G)break;G=xe}return Q||re(m.localeRegistry.en.format),U}function q(te,ae){return te.decimal=ae.charAt(0),te.thousands=ae.charAt(1),{numberFormat:function(G){try{G=u(te).format(o.adjustFormat(G))}catch{return o.warnBadFormat(G),o.noFormat}return G},timeFormat:c(te).utcFormat}}function X(te,ae){var G,Q=[];ae.meta&&(G=ae._meta={meta:ae.meta,layout:{meta:ae.meta}});for(var U=0;U<te.length;U++){var re=te[U];re.meta?Q[re.index]=re._meta={meta:re.meta}:ae.meta&&(re._meta={meta:ae.meta}),ae.meta&&(re._meta.layout={meta:ae.meta})}Q.length&&(G||(G=ae._meta={}),G.data=Q)}L.createTransitionData=function(te){te._transitionData||(te._transitionData={}),te._transitionData._frames||(te._transitionData._frames=[]),te._transitionData._frameHash||(te._transitionData._frameHash={}),te._transitionData._counter||(te._transitionData._counter=0),te._transitionData._interruptCallbacks||(te._transitionData._interruptCallbacks=[])},L._hasPlotType=function(te){var ae,G=this._basePlotModules||[];for(ae=0;ae<G.length;ae++)if(G[ae].name===te)return!0;var Q=this._modules||[];for(ae=0;ae<Q.length;ae++){var U=Q[ae].name;if(U===te)return!0;var re=m.modules[U];if(re&&re.categories[te])return!0}return!1},L.cleanPlot=function(te,ae,G,Q){var U,re,R=Q._basePlotModules||[];for(U=0;U<R.length;U++){var B=R[U];B.clean&&B.clean(te,ae,G,Q)}var oe=Q._has&&Q._has("gl"),ie=ae._has&&ae._has("gl");oe&&!ie&&Q._glcontainer!==void 0&&(Q._glcontainer.selectAll(".gl-canvas").remove(),Q._glcontainer.selectAll(".no-webgl").remove(),Q._glcanvas=null);var xe=!!Q._infolayer;e:for(U=0;U<G.length;U++){var _e=G[U],ke=_e.uid;for(re=0;re<te.length;re++){var Pe=te[re];if(ke===Pe.uid)continue e}xe&&Q._infolayer.select(".cb"+ke).remove()}},L.linkSubplots=function(te,ae,G,Q){var U,re,R=Q._plots||{},B=ae._plots={},oe=ae._subplots,ie={_fullData:te,_fullLayout:ae},xe=oe.cartesian||[];for(U=0;U<xe.length;U++){var _e=xe[U],ke=R[_e],Pe=k.getFromId(ie,_e,"x"),Ge=k.getFromId(ie,_e,"y"),Je;for(ke?Je=B[_e]=ke:(Je=B[_e]={},Je.id=_e),Pe._counterAxes.push(Ge._id),Ge._counterAxes.push(Pe._id),Pe._subplotsWith.push(_e),Ge._subplotsWith.push(_e),Je.xaxis=Pe,Je.yaxis=Ge,Je._hasClipOnAxisFalse=!1,re=0;re<te.length;re++){var yt=te[re];if(yt.xaxis===Je.xaxis._id&&yt.yaxis===Je.yaxis._id&&yt.cliponaxis===!1){Je._hasClipOnAxisFalse=!0;break}}}var lt=k.list(ie,null,!0),mt;for(U=0;U<lt.length;U++){mt=lt[U];var Ce=null;mt.overlaying&&(Ce=k.getFromId(ie,mt.overlaying),Ce&&Ce.overlaying&&(mt.overlaying=!1,Ce=null)),mt._mainAxis=Ce||mt,Ce&&(mt.domain=Ce.domain.slice()),mt._anchorAxis=mt.anchor==="free"?null:k.getFromId(ie,mt.anchor)}for(U=0;U<lt.length;U++)if(mt=lt[U],mt._counterAxes.sort(k.idSort),mt._subplotsWith.sort(o.subplotSort),mt._mainSubplot=K(mt,ae),mt._counterAxes.length&&(mt.spikemode&&mt.spikemode.indexOf("across")!==-1||mt.automargin&&mt.mirror&&mt.anchor!=="free"||m.getComponentMethod("rangeslider","isVisible")(mt))){var Ie=1,Se=0;for(re=0;re<mt._counterAxes.length;re++){var Be=k.getFromId(ie,mt._counterAxes[re]);Ie=Math.min(Ie,Be.domain[0]),Se=Math.max(Se,Be.domain[1])}Ie<Se&&(mt._counterDomainMin=Ie,mt._counterDomainMax=Se)}};function K(te,ae){var G={_fullLayout:ae},Q=te._id.charAt(0)==="x",U=te._mainAxis._anchorAxis,re="",R="",B="";if(U&&(B=U._mainAxis._id,re=Q?te._id+B:B+te._id),!re||!ae._plots[re]){re="";for(var oe=te._counterAxes,ie=0;ie<oe.length;ie++){var xe=oe[ie],_e=Q?te._id+xe:xe+te._id;R||(R=_e);var ke=k.getFromId(G,xe);if(B&&ke.overlaying===B){re=_e;break}}}return re||R}L.clearExpandedTraceDefaultColors=function(te){var ae,G,Q;function U(R,B,oe,ie){G[ie]=B,G.length=ie+1,R.valType==="color"&&R.dflt===void 0&&ae.push(G.join("."))}for(G=[],ae=te._module._colorAttrs,ae||(te._module._colorAttrs=ae=[],g.crawl(te._module.attributes,U)),Q=0;Q<ae.length;Q++){var re=o.nestedProperty(te,"_input."+ae[Q]);re.get()||o.nestedProperty(te,ae[Q]).set(null)}},L.supplyDataDefaults=function(te,ae,G,Q){var U=Q._modules,re=Q._visibleModules,R=Q._basePlotModules,B=0,oe,ie,xe;Q._transformModules=[];function _e(lt){ae.push(lt);var mt=lt._module;mt&&(o.pushUnique(U,mt),lt.visible===!0&&o.pushUnique(re,mt),o.pushUnique(R,lt._module.basePlotModule),lt._input.visible!==!1&&B++)}var ke={},Pe=[],Ge=(G.template||{}).data||{},Je=w.traceTemplater(Ge);for(oe=0;oe<te.length;oe++)xe=te[oe],ie=Je.newTrace(xe),ie.uid=Q._traceUids[oe],L.supplyTraceDefaults(xe,ie,B,Q,oe),ie.index=oe,ie._input=xe,ie._fullInput=ie,_e(ie),m.traceIs(ie,"carpetAxis")&&(ke[ie.carpet]=ie),m.traceIs(ie,"carpetDependent")&&Pe.push(oe);for(oe=0;oe<Pe.length;oe++)if(ie=ae[Pe[oe]],!!ie.visible){var yt=ke[ie.carpet];if(ie._carpet=yt,!yt||!yt.visible){ie.visible=!1;continue}ie.xaxis=yt.xaxis,ie.yaxis=yt.yaxis}},L.supplyAnimationDefaults=function(te){te=te||{};var ae,G={};function Q(U,re){return o.coerce(te||{},G,A,U,re)}if(Q("mode"),Q("direction"),Q("fromcurrent"),Array.isArray(te.frame))for(G.frame=[],ae=0;ae<te.frame.length;ae++)G.frame[ae]=L.supplyAnimationFrameDefaults(te.frame[ae]||{});else G.frame=L.supplyAnimationFrameDefaults(te.frame||{});if(Array.isArray(te.transition))for(G.transition=[],ae=0;ae<te.transition.length;ae++)G.transition[ae]=L.supplyAnimationTransitionDefaults(te.transition[ae]||{});else G.transition=L.supplyAnimationTransitionDefaults(te.transition||{});return G},L.supplyAnimationFrameDefaults=function(te){var ae={};function G(Q,U){return o.coerce(te||{},ae,A.frame,Q,U)}return G("duration"),G("redraw"),ae},L.supplyAnimationTransitionDefaults=function(te){var ae={};function G(Q,U){return o.coerce(te||{},ae,A.transition,Q,U)}return G("duration"),G("easing"),ae},L.supplyFrameDefaults=function(te){var ae={};function G(Q,U){return o.coerce(te,ae,C,Q,U)}return G("group"),G("name"),G("traces"),G("baseframe"),G("data"),G("layout"),ae},L.supplyTraceDefaults=function(te,ae,G,Q,U){var re=Q.colorway||T.defaults,R=re[G%re.length],B;function oe(Ce,Ie){return o.coerce(te,ae,L.attributes,Ce,Ie)}var ie=oe("visible");oe("type"),oe("name",Q._traceWord+" "+U),oe("uirevision",Q.uirevision);var xe=L.getModule(ae);if(ae._module=xe,xe){var _e=xe.basePlotModule,ke=_e.attr,Pe=_e.attributes;if(ke&&Pe){var Ge=Q._subplots,Je="";if(Array.isArray(ke))for(B=0;B<ke.length;B++){var yt=ke[B],lt=o.coerce(te,ae,Pe,yt);Ge[yt]&&o.pushUnique(Ge[yt],lt),Je+=lt}else Je=o.coerce(te,ae,Pe,ke);Ge[_e.name]&&o.pushUnique(Ge[_e.name],Je)}}if(ie&&(oe("customdata"),oe("ids"),oe("meta"),m.traceIs(ae,"showLegend")?(o.coerce(te,ae,xe.attributes.showlegend?xe.attributes:L.attributes,"showlegend"),oe("legend"),oe("legendwidth"),oe("legendgroup"),oe("legendgrouptitle.text"),oe("legendrank"),ae._dfltShowLegend=!0):ae._dfltShowLegend=!1,xe&&xe.supplyDefaults(te,ae,R,Q),m.traceIs(ae,"noOpacity")||oe("opacity"),m.traceIs(ae,"notLegendIsolatable")&&(ae.visible=!!ae.visible),m.traceIs(ae,"noHover")||(ae.hovertemplate||o.coerceHoverinfo(te,ae,Q),ae.type!=="parcats"&&m.getComponentMethod("fx","supplyDefaults")(te,ae,R,Q)),xe&&xe.selectPoints)){var mt=oe("selectedpoints");o.isTypedArray(mt)&&(ae.selectedpoints=Array.from(mt))}return ae},L.supplyLayoutGlobalDefaults=function(te,ae,G){function Q(_e,ke){return o.coerce(te,ae,L.layoutAttributes,_e,ke)}var U=te.template;o.isPlainObject(U)&&(ae.template=U,ae._template=U.layout,ae._dataTemplate=U.data),Q("autotypenumbers");var re=o.coerceFont(Q,"font"),R=re.size;o.coerceFont(Q,"title.font",re,{overrideDflt:{size:Math.round(R*1.4)}}),Q("title.text",ae._dfltTitle.plot),Q("title.xref");var B=Q("title.yref");Q("title.pad.t"),Q("title.pad.r"),Q("title.pad.b"),Q("title.pad.l");var oe=Q("title.automargin");Q("title.x"),Q("title.xanchor"),Q("title.y"),Q("title.yanchor"),Q("title.subtitle.text",ae._dfltTitle.subtitle),o.coerceFont(Q,"title.subtitle.font",re,{overrideDflt:{size:Math.round(ae.title.font.size*.7)}}),oe&&(B==="paper"&&(ae.title.y!==0&&(ae.title.y=1),ae.title.yanchor==="auto"&&(ae.title.yanchor=ae.title.y===0?"top":"bottom")),B==="container"&&(ae.title.y==="auto"&&(ae.title.y=1),ae.title.yanchor==="auto"&&(ae.title.yanchor=ae.title.y<.5?"bottom":"top")));var ie=Q("uniformtext.mode");ie&&Q("uniformtext.minsize"),Q("autosize",!(te.width&&te.height)),Q("width"),Q("height"),Q("minreducedwidth"),Q("minreducedheight"),Q("margin.l"),Q("margin.r"),Q("margin.t"),Q("margin.b"),Q("margin.pad"),Q("margin.autoexpand"),te.width&&te.height&&L.sanitizeMargins(ae),m.getComponentMethod("grid","sizeDefaults")(te,ae),Q("paper_bgcolor"),Q("separators",G.decimal+G.thousands),Q("hidesources"),Q("colorway"),Q("datarevision");var xe=Q("uirevision");Q("editrevision",xe),Q("selectionrevision",xe),m.getComponentMethod("modebar","supplyLayoutDefaults")(te,ae),m.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(te,ae,Q),m.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(te,ae,Q),Q("meta"),o.isPlainObject(te.transition)&&(Q("transition.duration"),Q("transition.easing"),Q("transition.ordering")),m.getComponentMethod("calendars","handleDefaults")(te,ae,"calendar"),m.getComponentMethod("fx","supplyLayoutGlobalDefaults")(te,ae,Q),o.coerce(te,ae,M,"scattermode")};function ee(te){return typeof te=="string"&&te.substr(te.length-2)==="px"&&parseFloat(te)}L.plotAutoSize=function(ae,G,Q){var U=ae._context||{},re=U.frameMargins,R,B,oe=o.isPlotDiv(ae);if(oe&&ae.emit("plotly_autosize"),U.fillFrame)R=window.innerWidth,B=window.innerHeight,document.body.style.overflow="hidden";else{var ie=oe?window.getComputedStyle(ae):{};if(R=ee(ie.width)||ee(ie.maxWidth)||Q.width,B=ee(ie.height)||ee(ie.maxHeight)||Q.height,p(re)&&re>0){var xe=1-2*re;R=Math.round(xe*R),B=Math.round(xe*B)}}var _e=L.layoutAttributes.width.min,ke=L.layoutAttributes.height.min;R<_e&&(R=_e),B<ke&&(B=ke);var Pe=!G.width&&Math.abs(Q.width-R)>1,Ge=!G.height&&Math.abs(Q.height-B)>1;(Ge||Pe)&&(Pe&&(Q.width=R),Ge&&(Q.height=B)),ae._initialAutoSize||(ae._initialAutoSize={width:R,height:B}),L.sanitizeMargins(Q)},L.supplyLayoutModuleDefaults=function(te,ae,G,Q){var U=m.componentsRegistry,re=ae._basePlotModules,R,B,oe,ie=m.subplotsRegistry.cartesian;for(R in U)oe=U[R],oe.includeBasePlot&&oe.includeBasePlot(te,ae);re.length||re.push(ie),ae._has("cartesian")&&(m.getComponentMethod("grid","contentDefaults")(te,ae),ie.finalizeSubplots(te,ae));for(var xe in ae._subplots)ae._subplots[xe].sort(o.subplotSort);for(B=0;B<re.length;B++)oe=re[B],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(te,ae,G);var _e=ae._modules;for(B=0;B<_e.length;B++)oe=_e[B],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(te,ae,G);var ke=ae._transformModules;for(B=0;B<ke.length;B++)oe=ke[B],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(te,ae,G,Q);for(R in U)oe=U[R],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(te,ae,G)},L.purge=function(te){var ae=te._fullLayout||{};ae._glcontainer!==void 0&&(ae._glcontainer.selectAll(".gl-canvas").remove(),ae._glcontainer.remove(),ae._glcanvas=null),ae._modeBar&&ae._modeBar.destroy(),te._transitionData&&(te._transitionData._interruptCallbacks&&(te._transitionData._interruptCallbacks.length=0),te._transitionData._animationRaf&&window.cancelAnimationFrame(te._transitionData._animationRaf)),o.clearThrottle(),o.clearResponsive(te),delete te.data,delete te.layout,delete te._fullData,delete te._fullLayout,delete te.calcdata,delete te.empty,delete te.fid,delete te.undoqueue,delete te.undonum,delete te.autoplay,delete te.changed,delete te._promises,delete te._redrawTimer,delete te._hmlumcount,delete te._hmpixcount,delete te._transitionData,delete te._transitioning,delete te._initialAutoSize,delete te._transitioningWithDuration,delete te._dragging,delete te._dragged,delete te._dragdata,delete te._hoverdata,delete te._snapshotInProgress,delete te._editing,delete te._mouseDownTime,delete te._legendMouseDownTime,te.removeAllListeners&&te.removeAllListeners()},L.style=function(te){var ae=te._fullLayout._visibleModules,G=[],Q;for(Q=0;Q<ae.length;Q++){var U=ae[Q];U.style&&o.pushUnique(G,U.style)}for(Q=0;Q<G.length;Q++)G[Q](te)},L.sanitizeMargins=function(te){if(!(!te||!te.margin)){var ae=te.width,G=te.height,Q=te.margin,U=ae-(Q.l+Q.r),re=G-(Q.t+Q.b),R;U<0&&(R=(ae-1)/(Q.l+Q.r),Q.l=Math.floor(R*Q.l),Q.r=Math.floor(R*Q.r)),re<0&&(R=(G-1)/(Q.t+Q.b),Q.t=Math.floor(R*Q.t),Q.b=Math.floor(R*Q.b))}},L.clearAutoMarginIds=function(te){te._fullLayout._pushmarginIds={}},L.allowAutoMargin=function(te,ae){te._fullLayout._pushmarginIds[ae]=1};function ne(te){var ae=te.margin;if(!te._size){var G=te._size={l:Math.round(ae.l),r:Math.round(ae.r),t:Math.round(ae.t),b:Math.round(ae.b),p:Math.round(ae.pad)};G.w=Math.round(te.width)-G.l-G.r,G.h=Math.round(te.height)-G.t-G.b}te._pushmargin||(te._pushmargin={}),te._pushmarginIds||(te._pushmarginIds={}),te._reservedMargin||(te._reservedMargin={})}var le=2,W=2;L.autoMargin=function(te,ae,G){var Q=te._fullLayout,U=Q.width,re=Q.height,R=Q.margin,B=Q.minreducedwidth,oe=Q.minreducedheight,ie=o.constrain(U-R.l-R.r,le,B),xe=o.constrain(re-R.t-R.b,W,oe),_e=Math.max(0,U-ie),ke=Math.max(0,re-xe),Pe=Q._pushmargin,Ge=Q._pushmarginIds;if(R.autoexpand!==!1){if(!G)delete Pe[ae],delete Ge[ae];else{var Je=G.pad;if(Je===void 0&&(Je=Math.min(12,R.l,R.r,R.t,R.b)),_e){var yt=(G.l+G.r)/_e;yt>1&&(G.l/=yt,G.r/=yt)}if(ke){var lt=(G.t+G.b)/ke;lt>1&&(G.t/=lt,G.b/=lt)}var mt=G.xl!==void 0?G.xl:G.x,Ce=G.xr!==void 0?G.xr:G.x,Ie=G.yt!==void 0?G.yt:G.y,Se=G.yb!==void 0?G.yb:G.y;Pe[ae]={l:{val:mt,size:G.l+Je},r:{val:Ce,size:G.r+Je},b:{val:Se,size:G.b+Je},t:{val:Ie,size:G.t+Je}},Ge[ae]=1}if(!Q._replotting)return L.doAutoMargin(te)}};function ce(te){if("_redrawFromAutoMarginCount"in te._fullLayout)return!1;var ae=k.list(te,"",!0);for(var G in ae)if(ae[G].autoshift||ae[G].shift)return!0;return!1}L.doAutoMargin=function(te){var ae=te._fullLayout,G=ae.width,Q=ae.height;ae._size||(ae._size={}),ne(ae);var U=ae._size,re=ae.margin,R={t:0,b:0,l:0,r:0},B=o.extendFlat({},U),oe=re.l,ie=re.r,xe=re.t,_e=re.b,ke=ae._pushmargin,Pe=ae._pushmarginIds,Ge=ae.minreducedwidth,Je=ae.minreducedheight;if(re.autoexpand!==!1){for(var yt in ke)Pe[yt]||delete ke[yt];var lt=te._fullLayout._reservedMargin;for(var mt in lt)for(var Ce in lt[mt]){var Ie=lt[mt][Ce];R[Ce]=Math.max(R[Ce],Ie)}ke.base={l:{val:0,size:oe},r:{val:1,size:ie},t:{val:1,size:xe},b:{val:0,size:_e}};for(var Se in R){var Be=0;for(var rt in ke)rt!=="base"&&p(ke[rt][Se].size)&&(Be=ke[rt][Se].size>Be?ke[rt][Se].size:Be);var ht=Math.max(0,re[Se]-Be);R[Se]=Math.max(0,R[Se]-ht)}for(var Lt in ke){var Ct=ke[Lt].l||{},zt=ke[Lt].b||{},Bt=Ct.val,Ft=Ct.size,nr=zt.val,_t=zt.size,rr=G-R.r-R.l,pr=Q-R.t-R.b;for(var Yt in ke){if(p(Ft)&&ke[Yt].r){var sr=ke[Yt].r.val,ze=ke[Yt].r.size;if(sr>Bt){var Ye=(Ft*sr+(ze-rr)*Bt)/(sr-Bt),$e=(ze*(1-Bt)+(Ft-rr)*(1-sr))/(sr-Bt);Ye+$e>oe+ie&&(oe=Ye,ie=$e)}}if(p(_t)&&ke[Yt].t){var he=ke[Yt].t.val,je=ke[Yt].t.size;if(he>nr){var Ne=(_t*he+(je-pr)*nr)/(he-nr),Re=(je*(1-nr)+(_t-pr)*(1-he))/(he-nr);Ne+Re>_e+xe&&(_e=Ne,xe=Re)}}}}}var nt=o.constrain(G-re.l-re.r,le,Ge),at=o.constrain(Q-re.t-re.b,W,Je),dt=Math.max(0,G-nt),Mt=Math.max(0,Q-at);if(dt){var Nt=(oe+ie)/dt;Nt>1&&(oe/=Nt,ie/=Nt)}if(Mt){var ot=(_e+xe)/Mt;ot>1&&(_e/=ot,xe/=ot)}if(U.l=Math.round(oe)+R.l,U.r=Math.round(ie)+R.r,U.t=Math.round(xe)+R.t,U.b=Math.round(_e)+R.b,U.p=Math.round(re.pad),U.w=Math.round(G)-U.l-U.r,U.h=Math.round(Q)-U.t-U.b,!ae._replotting&&(L.didMarginChange(B,U)||ce(te))){"_redrawFromAutoMarginCount"in ae?ae._redrawFromAutoMarginCount++:ae._redrawFromAutoMarginCount=1;var jt=3*(1+Object.keys(Pe).length);if(ae._redrawFromAutoMarginCount<jt)return m.call("_doPlot",te);ae._size=B,o.warn("Too many auto-margin redraws.")}de(te)};function de(te){var ae=k.list(te,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(G){for(var Q=0;Q<ae.length;Q++){var U=ae[Q][G];U&&U()}})}var ve=["l","r","t","b","p","w","h"];L.didMarginChange=function(te,ae){for(var G=0;G<ve.length;G++){var Q=ve[G],U=te[Q],re=ae[Q];if(!p(U)||Math.abs(re-U)>1)return!0}return!1},L.graphJson=function(te,ae,G,Q,U,re){(U&&ae&&!te._fullData||U&&!ae&&!te._fullLayout)&&L.supplyDefaults(te);var R=U?te._fullData:te.data,B=U?te._fullLayout:te.layout,oe=(te._transitionData||{})._frames;function ie(ke,Pe){if(typeof ke=="function")return Pe?"_function_":null;if(o.isPlainObject(ke)){var Ge={},Je;return Object.keys(ke).sort().forEach(function(Ce){if(["_","["].indexOf(Ce.charAt(0))===-1){if(typeof ke[Ce]=="function"){Pe&&(Ge[Ce]="_function");return}if(G==="keepdata"){if(Ce.substr(Ce.length-3)==="src")return}else if(G==="keepstream"){if(Je=ke[Ce+"src"],typeof Je=="string"&&Je.indexOf(":")>0&&!o.isPlainObject(ke.stream))return}else if(G!=="keepall"&&(Je=ke[Ce+"src"],typeof Je=="string"&&Je.indexOf(":")>0))return;Ge[Ce]=ie(ke[Ce],Pe)}}),Ge}var yt=Array.isArray(ke),lt=o.isTypedArray(ke);if((yt||lt)&&ke.dtype&&ke.shape){var mt=ke.bdata;return ie({dtype:ke.dtype,shape:ke.shape,bdata:o.isArrayBuffer(mt)?v.encode(mt):mt},Pe)}return yt?ke.map(function(Ce){return ie(Ce,Pe)}):lt?o.simpleMap(ke,o.identity):o.isJSDate(ke)?o.ms2DateTimeLocal(+ke):ke}var xe={data:(R||[]).map(function(ke){var Pe=ie(ke);return ae&&delete Pe.fit,Pe})};if(!ae&&(xe.layout=ie(B),U)){var _e=B._size;xe.layout.computed={margin:{b:_e.b,l:_e.l,r:_e.r,t:_e.t}}}return oe&&(xe.frames=ie(oe)),re&&(xe.config=ie(te._context,!0)),Q==="object"?xe:JSON.stringify(xe)},L.modifyFrames=function(te,ae){var G,Q,U,re=te._transitionData._frames,R=te._transitionData._frameHash;for(G=0;G<ae.length;G++)switch(Q=ae[G],Q.type){case"replace":U=Q.value;var B=(re[Q.index]||{}).name,oe=U.name;re[Q.index]=R[oe]=U,oe!==B&&(delete R[B],R[oe]=U);break;case"insert":U=Q.value,R[U.name]=U,re.splice(Q.index,0,U);break;case"delete":U=re[Q.index],delete R[U.name],re.splice(Q.index,1);break}return Promise.resolve()},L.computeFrame=function(te,ae){var G=te._transitionData._frameHash,Q,U,re,R;if(!ae)throw new Error("computeFrame must be given a string frame name");var B=G[ae.toString()];if(!B)return!1;for(var oe=[B],ie=[B.name];B.baseframe&&(B=G[B.baseframe.toString()])&&ie.indexOf(B.name)===-1;)oe.push(B),ie.push(B.name);for(var xe={};B=oe.pop();)if(B.layout&&(xe.layout=L.extendLayout(xe.layout,B.layout)),B.data){if(xe.data||(xe.data=[]),U=B.traces,!U)for(U=[],Q=0;Q<B.data.length;Q++)U[Q]=Q;for(xe.traces||(xe.traces=[]),Q=0;Q<B.data.length;Q++)re=U[Q],re!=null&&(R=xe.traces.indexOf(re),R===-1&&(R=xe.data.length,xe.traces[R]=re),xe.data[R]=L.extendTrace(xe.data[R],B.data[Q]))}return xe},L.recomputeFrameHash=function(te){for(var ae=te._transitionData._frameHash={},G=te._transitionData._frames,Q=0;Q<G.length;Q++){var U=G[Q];U&&U.name&&(ae[U.name]=U)}},L.extendObjectWithContainers=function(te,ae,G){var Q,U,re,R,B,oe,ie,xe,_e=o.extendDeepNoArrays({},ae||{}),ke=o.expandObjectPaths(_e),Pe={};if(G&&G.length)for(re=0;re<G.length;re++)Q=o.nestedProperty(ke,G[re]),U=Q.get(),U===void 0?o.nestedProperty(Pe,G[re]).set(null):(Q.set(null),o.nestedProperty(Pe,G[re]).set(U));if(te=o.extendDeepNoArrays(te||{},ke),G&&G.length){for(re=0;re<G.length;re++)if(B=o.nestedProperty(Pe,G[re]),ie=B.get(),!!ie){for(oe=o.nestedProperty(te,G[re]),xe=oe.get(),Array.isArray(xe)||(xe=[],oe.set(xe)),R=0;R<ie.length;R++){var Ge=ie[R];Ge===null?xe[R]=null:xe[R]=L.extendObjectWithContainers(xe[R],Ge)}oe.set(xe)}}return te},L.dataArrayContainers=["transforms","dimensions"],L.layoutArrayContainers=m.layoutArrayContainers,L.extendTrace=function(te,ae){return L.extendObjectWithContainers(te,ae,L.dataArrayContainers)},L.extendLayout=function(te,ae){return L.extendObjectWithContainers(te,ae,L.layoutArrayContainers)},L.transition=function(te,ae,G,Q,U,re){var R={redraw:U.redraw},B={},oe=[];return R.prepareFn=function(){for(var ie=Array.isArray(ae)?ae.length:0,xe=Q.slice(0,ie),_e=0;_e<xe.length;_e++){var ke=xe[_e],Pe=te._fullData[ke],Ge=Pe._module;if(Ge){if(Ge.animatable){var Je=Ge.basePlotModule.name;B[Je]||(B[Je]=[]),B[Je].push(ke)}te.data[xe[_e]]=L.extendTrace(te.data[xe[_e]],ae[_e])}}var yt=o.expandObjectPaths(o.extendDeepNoArrays({},G)),lt=/^[xy]axis[0-9]*$/;for(var mt in yt)lt.test(mt)&&delete yt[mt].range;L.extendLayout(te.layout,yt),delete te.calcdata,L.supplyDefaults(te),L.doCalcdata(te);var Ce=o.expandObjectPaths(G);if(Ce){var Ie=te._fullLayout._plots;for(var Se in Ie){var Be=Ie[Se],rt=Be.xaxis,ht=Be.yaxis,Lt=rt.range.slice(),Ct=ht.range.slice(),zt=null,Bt=null,Ft=null,nr=null;Array.isArray(Ce[rt._name+".range"])?zt=Ce[rt._name+".range"].slice():Array.isArray((Ce[rt._name]||{}).range)&&(zt=Ce[rt._name].range.slice()),Array.isArray(Ce[ht._name+".range"])?Bt=Ce[ht._name+".range"].slice():Array.isArray((Ce[ht._name]||{}).range)&&(Bt=Ce[ht._name].range.slice()),Lt&&zt&&(rt.r2l(Lt[0])!==rt.r2l(zt[0])||rt.r2l(Lt[1])!==rt.r2l(zt[1]))&&(Ft={xr0:Lt,xr1:zt}),Ct&&Bt&&(ht.r2l(Ct[0])!==ht.r2l(Bt[0])||ht.r2l(Ct[1])!==ht.r2l(Bt[1]))&&(nr={yr0:Ct,yr1:Bt}),(Ft||nr)&&oe.push(o.extendFlat({plotinfo:Be},Ft,nr))}}return Promise.resolve()},R.runFn=function(ie){var xe,_e=te._fullLayout._basePlotModules,ke=oe.length,Pe;if(G)for(Pe=0;Pe<_e.length;Pe++)_e[Pe].transitionAxes&&_e[Pe].transitionAxes(te,oe,re,ie);ke?(xe=o.extendFlat({},re),xe.duration=0,delete B.cartesian):xe=re;for(var Ge in B){var Je=B[Ge],yt=te._fullData[Je[0]]._module;yt.basePlotModule.plot(te,Je,xe,ie)}},pe(te,re,R)},L.transitionFromReact=function(te,ae,G,Q){var U=te._fullLayout,re=U.transition,R={},B=[];return R.prepareFn=function(){var oe=U._plots;R.redraw=!1,ae.anim==="some"&&(R.redraw=!0),G.anim==="some"&&(R.redraw=!0);for(var ie in oe){var xe=oe[ie],_e=xe.xaxis,ke=xe.yaxis,Pe=Q[_e._name].range.slice(),Ge=Q[ke._name].range.slice(),Je=_e.range.slice(),yt=ke.range.slice();_e.setScale(),ke.setScale();var lt=null,mt=null;(_e.r2l(Pe[0])!==_e.r2l(Je[0])||_e.r2l(Pe[1])!==_e.r2l(Je[1]))&&(lt={xr0:Pe,xr1:Je}),(ke.r2l(Ge[0])!==ke.r2l(yt[0])||ke.r2l(Ge[1])!==ke.r2l(yt[1]))&&(mt={yr0:Ge,yr1:yt}),(lt||mt)&&B.push(o.extendFlat({plotinfo:xe},lt,mt))}return Promise.resolve()},R.runFn=function(oe){for(var ie=te._fullData,xe=te._fullLayout,_e=xe._basePlotModules,ke,Pe,Ge,Je=[],yt=0;yt<ie.length;yt++)Je.push(yt);function lt(){if(te._fullLayout)for(var Ce=0;Ce<_e.length;Ce++)_e[Ce].transitionAxes&&_e[Ce].transitionAxes(te,B,ke,oe)}function mt(){if(te._fullLayout)for(var Ce=0;Ce<_e.length;Ce++)_e[Ce].plot(te,Ge,Pe,oe)}B.length&&ae.anim?re.ordering==="traces first"?(ke=o.extendFlat({},re,{duration:0}),Ge=Je,Pe=re,setTimeout(lt,re.duration),mt()):(ke=re,Ge=null,Pe=o.extendFlat({},re,{duration:0}),setTimeout(mt,ke.duration),lt()):B.length?(ke=re,lt()):ae.anim&&(Ge=Je,Pe=re,mt())},pe(te,re,R)};function pe(te,ae,G){var Q=!1;function U(_e){var ke=Promise.resolve();if(!_e)return ke;for(;_e.length;)ke=ke.then(_e.shift());return ke}function re(_e){if(_e)for(;_e.length;)_e.shift()}function R(){return te.emit("plotly_transitioning",[]),new Promise(function(_e){te._transitioning=!0,ae.duration>0&&(te._transitioningWithDuration=!0),te._transitionData._interruptCallbacks.push(function(){Q=!0}),G.redraw&&te._transitionData._interruptCallbacks.push(function(){return m.call("redraw",te)}),te._transitionData._interruptCallbacks.push(function(){te.emit("plotly_transitioninterrupted",[])});var ke=0,Pe=0;function Ge(){return ke++,function(){Pe++,!Q&&Pe===ke&&B(_e)}}G.runFn(Ge),setTimeout(Ge())})}function B(_e){if(te._transitionData)return re(te._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(G.redraw)return m.call("redraw",te)}).then(function(){te._transitioning=!1,te._transitioningWithDuration=!1,te.emit("plotly_transitioned",[])}).then(_e)}function oe(){if(te._transitionData)return te._transitioning=!1,U(te._transitionData._interruptCallbacks)}var ie=[L.previousPromises,oe,G.prepareFn,L.rehover,L.reselect,R],xe=o.syncOrAsync(ie,te);return(!xe||!xe.then)&&(xe=Promise.resolve()),xe.then(function(){return te})}L.doCalcdata=function(te,ae){var G=k.list(te),Q=te._fullData,U=te._fullLayout,re,R,B,oe,ie=new Array(Q.length),xe=(te.calcdata||[]).slice();for(te.calcdata=ie,U._numBoxes=0,U._numViolins=0,U._violinScaleGroupStats={},te._hmpixcount=0,te._hmlumcount=0,U._piecolormap={},U._sunburstcolormap={},U._treemapcolormap={},U._iciclecolormap={},U._funnelareacolormap={},B=0;B<Q.length;B++)if(Array.isArray(ae)&&ae.indexOf(B)===-1){ie[B]=xe[B];continue}for(B=0;B<Q.length;B++)re=Q[B],re._arrayAttrs=g.findArrayAttributes(re),re._extremes={};var _e=U._subplots.polar||[];for(B=0;B<_e.length;B++)G.push(U[_e[B]].radialaxis,U[_e[B]].angularaxis);for(var ke in U._colorAxes){var Pe=U[ke];Pe.cauto!==!1&&(delete Pe.cmin,delete Pe.cmax)}var Ge=!1;function Je(mt){if(re=Q[mt],R=re._module,re.visible===!0&&re.transforms){if(R&&R.calc){var Ce=R.calc(te,re);Ce[0]&&Ce[0].t&&Ce[0].t._scene&&delete Ce[0].t._scene.dirty}for(oe=0;oe<re.transforms.length;oe++){var Ie=re.transforms[oe];R=transformsRegistry[Ie.type],R&&R.calcTransform&&(re._hasCalcTransform=!0,Ge=!0,R.calcTransform(te,re,Ie))}}}function yt(mt,Ce){if(re=Q[mt],R=re._module,!!R.isContainer===Ce){var Ie=[];if(re.visible===!0&&re._length!==0){delete re._indexToPoints;var Se=re.transforms||[];for(oe=Se.length-1;oe>=0;oe--)if(Se[oe].enabled){re._indexToPoints=Se[oe]._indexToPoints;break}R&&R.calc&&(Ie=R.calc(te,re))}(!Array.isArray(Ie)||!Ie[0])&&(Ie=[{x:y,y}]),Ie[0].t||(Ie[0].t={}),Ie[0].trace=re,ie[mt]=Ie}}for(Ae(G,Q,U),B=0;B<Q.length;B++)yt(B,!0);for(B=0;B<Q.length;B++)Je(B);for(Ge&&Ae(G,Q,U),B=0;B<Q.length;B++)yt(B,!0);for(B=0;B<Q.length;B++)yt(B,!1);We(te);var lt=Le(G,te);if(lt.length){for(U._numBoxes=0,U._numViolins=0,B=0;B<lt.length;B++)yt(lt[B],!0);for(B=0;B<lt.length;B++)yt(lt[B],!1);We(te)}m.getComponentMethod("fx","calc")(te),m.getComponentMethod("errorbars","calc")(te)};var be=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function Le(te,ae){var G=[],Q,U,re,R,B;function oe(Yt,sr,ze){var Ye=sr._id.charAt(0);if(Yt==="histogram2dcontour"){var $e=sr._counterAxes[0],he=k.getFromId(ae,$e),je=Ye==="x"||$e==="x"&&he.type==="category",Ne=Ye==="y"||$e==="y"&&he.type==="category";return function(Re,nt){return Re===0||nt===0||je&&Re===ze[nt].length-1||Ne&&nt===ze.length-1?-1:(Ye==="y"?nt:Re)-1}}else return function(Re,nt){return Ye==="y"?nt:Re}}var ie={min:function(Yt){return o.aggNums(Math.min,null,Yt)},max:function(Yt){return o.aggNums(Math.max,null,Yt)},sum:function(Yt){return o.aggNums(function(sr,ze){return sr+ze},null,Yt)},total:function(Yt){return o.aggNums(function(sr,ze){return sr+ze},null,Yt)},mean:function(Yt){return o.mean(Yt)},"geometric mean":function(Yt){return o.geometricMean(Yt)},median:function(Yt){return o.median(Yt)}};function xe(Yt,sr){return Yt[1]-sr[1]}function _e(Yt,sr){return sr[1]-Yt[1]}for(Q=0;Q<te.length;Q++){var ke=te[Q];if(ke.type==="category"){var Pe=ke.categoryorder.match(be);if(Pe){var Ge=Pe[1],Je=Pe[2],yt=ke._id.charAt(0),lt=yt==="x",mt=[];for(U=0;U<ke._categories.length;U++)mt.push([ke._categories[U],[]]);for(U=0;U<ke._traceIndices.length;U++){var Ce=ke._traceIndices[U],Ie=ae._fullData[Ce];if(Ie.visible===!0){var Se=Ie.type;m.traceIs(Ie,"histogram")&&(delete Ie._xautoBinFinished,delete Ie._yautoBinFinished);var Be=Se==="splom",rt=Se==="scattergl",ht=ae.calcdata[Ce];for(re=0;re<ht.length;re++){var Lt=ht[re],Ct,zt;if(Be){var Bt=Ie._axesDim[ke._id];if(!lt){var Ft=Ie._diag[Bt][0];Ft&&(ke=ae._fullLayout[k.id2name(Ft)])}var nr=Lt.trace.dimensions[Bt].values;for(R=0;R<nr.length;R++)for(Ct=ke._categoriesMap[nr[R]],B=0;B<Lt.trace.dimensions.length;B++)if(B!==Bt){var _t=Lt.trace.dimensions[B];mt[Ct][1].push(_t.values[R])}}else if(rt){for(R=0;R<Lt.t.x.length;R++)lt?(Ct=Lt.t.x[R],zt=Lt.t.y[R]):(Ct=Lt.t.y[R],zt=Lt.t.x[R]),mt[Ct][1].push(zt);Lt.t&&Lt.t._scene&&delete Lt.t._scene.dirty}else if(Lt.hasOwnProperty("z")){zt=Lt.z;var rr=oe(Ie.type,ke,zt);for(R=0;R<zt.length;R++)for(B=0;B<zt[R].length;B++)Ct=rr(B,R),Ct+1&&mt[Ct][1].push(zt[R][B])}else for(Ct=Lt.p,Ct===void 0&&(Ct=Lt[yt]),zt=Lt.s,zt===void 0&&(zt=Lt.v),zt===void 0&&(zt=lt?Lt.y:Lt.x),Array.isArray(zt)||(zt===void 0?zt=[]:zt=[zt]),R=0;R<zt.length;R++)mt[Ct][1].push(zt[R])}}}ke._categoriesValue=mt;var pr=[];for(U=0;U<mt.length;U++)pr.push([mt[U][0],ie[Ge](mt[U][1])]);pr.sort(Je==="descending"?_e:xe),ke._categoriesAggregatedValue=pr,ke._initialCategories=pr.map(function(Yt){return Yt[0]}),G=G.concat(ke.sortByInitialCategories())}}}return G}function Ae(te,ae,G){var Q={};function U(oe){oe.clearCalc(),oe.type==="multicategory"&&oe.setupMultiCategory(ae),Q[oe._id]=1}o.simpleMap(te,U);for(var re=G._axisMatchGroups||[],R=0;R<re.length;R++)for(var B in re[R])Q[B]||U(G[k.id2name(B)])}function We(te){var ae=te._fullLayout,G=ae._visibleModules,Q={},U,re,R;for(re=0;re<G.length;re++){var B=G[re],oe=B.crossTraceCalc;if(oe){var ie=B.basePlotModule.name;Q[ie]?o.pushUnique(Q[ie],oe):Q[ie]=[oe]}}for(R in Q){var xe=Q[R],_e=ae._subplots[R];if(Array.isArray(_e))for(U=0;U<_e.length;U++){var ke=_e[U],Pe=R==="cartesian"?ae._plots[ke]:ae[ke];for(re=0;re<xe.length;re++)xe[re](te,Pe,ke)}else for(re=0;re<xe.length;re++)xe[re](te)}}L.rehover=function(te){te._fullLayout._rehover&&te._fullLayout._rehover()},L.redrag=function(te){te._fullLayout._redrag&&te._fullLayout._redrag()},L.reselect=function(te){var ae=te._fullLayout,G=(te.layout||{}).selections,Q=ae._previousSelections;ae._previousSelections=G;var U=ae._reselect||JSON.stringify(G)!==JSON.stringify(Q);m.getComponentMethod("selections","reselect")(te,U)},L.generalUpdatePerTraceModule=function(te,ae,G,Q){var U=ae.traceHash,re={},R;for(R=0;R<G.length;R++){var B=G[R],oe=B[0].trace;oe.visible&&(re[oe.type]=re[oe.type]||[],re[oe.type].push(B))}for(var ie in U)if(!re[ie]){var xe=U[ie][0],_e=xe[0].trace;_e.visible=!1,re[ie]=[xe]}for(var ke in re){var Pe=re[ke],Ge=Pe[0][0].trace._module;Ge.plot(te,ae,o.filterVisible(Pe),Q)}ae.traceHash=re},L.plotBasePlot=function(te,ae,G,Q,U){var re=m.getModule(te),R=j(ae.calcdata,re)[0];re.plot(ae,R,Q,U)},L.cleanBasePlot=function(te,ae,G,Q,U){var re=U._has&&U._has(te),R=G._has&&G._has(te);re&&!R&&U["_"+te+"layer"].selectAll("g.trace").remove()}}}),ns=i({"src/constants/xmlns_namespaces.js"(V){V.xmlns="http://www.w3.org/2000/xmlns/",V.svg="http://www.w3.org/2000/svg",V.xlink="http://www.w3.org/1999/xlink",V.svgAttrs={xmlns:V.svg,"xmlns:xlink":V.xlink}}}),na=i({"src/constants/alignment.js"(V,$){$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}}}),ia=i({"src/lib/svg_text_utils.js"(V){var $=f(),h=_r(),c=h.strTranslate,u=ns(),p=na().LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;V.convertToTspans=function(W,ce,de){var ve=W.text(),pe=!W.attr("data-notex")&&ce&&ce._context.typesetMath&&typeof MathJax<"u"&&ve.match(v),be=$.select(W.node().parentNode);if(be.empty())return;var Le=W.attr("class")?W.attr("class").split(" ")[0]:"text";Le+="-math",be.selectAll("svg."+Le).remove(),be.selectAll("g."+Le+"-group").remove(),W.style("display",null).attr({"data-unformatted":ve,"data-math":"N"});function Ae(){be.empty()||(Le=W.attr("class")+"-math",be.select("svg."+Le).remove()),W.text("").style("white-space","pre");var We=K(W.node(),ve);We&&W.style("pointer-events","all"),V.positionText(W),de&&de.call(W)}return pe?(ce&&ce._promises||[]).push(new Promise(function(We){W.style("display","none");var te=parseInt(W.node().style.fontSize,10),ae={fontSize:te};T(pe[2],ae,function(G,Q,U){be.selectAll("svg."+Le).remove(),be.selectAll("g."+Le+"-group").remove();var re=G&&G.select("svg");if(!re||!re.node()){Ae(),We();return}var R=be.append("g").classed(Le+"-group",!0).attr({"pointer-events":"none","data-unformatted":ve,"data-math":"Y"});R.node().appendChild(re.node()),Q&&Q.node()&&re.node().insertBefore(Q.node().cloneNode(!0),re.node().firstChild);var B=U.width,oe=U.height;re.attr({class:Le,height:oe,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ie=W.node().style.fill||"black",xe=re.select("g");xe.attr({fill:ie,stroke:ie});var _e=xe.node().getBoundingClientRect(),ke=_e.width,Pe=_e.height;(ke>B||Pe>oe)&&(re.style("overflow","hidden"),_e=re.node().getBoundingClientRect(),ke=_e.width,Pe=_e.height);var Ge=+W.attr("x"),Je=+W.attr("y"),yt=te||W.node().getBoundingClientRect().height,lt=-yt/4;if(Le[0]==="y")R.attr({transform:"rotate("+[-90,Ge,Je]+")"+c(-ke/2,lt-Pe/2)});else if(Le[0]==="l")Je=lt-Pe/2;else if(Le[0]==="a"&&Le.indexOf("atitle")!==0)Ge=0,Je=lt;else{var mt=W.attr("text-anchor");Ge=Ge-ke*(mt==="middle"?.5:mt==="end"?1:0),Je=Je+lt-Pe/2}re.attr({x:Ge,y:Je}),de&&de.call(W,R),We(R)})})):Ae(),W};var m=/(<|&lt;|&#60;)/g,g=/(>|&gt;|&#62;)/g;function w(W){return W.replace(m,"\\lt ").replace(g,"\\gt ")}var o=[["$","$"],["\\(","\\)"]];function T(W,ce,de){var ve=parseInt((MathJax.version||"").split(".")[0]);if(ve!==2&&ve!==3){h.warn("No MathJax version:",MathJax.version);return}var pe,be,Le,Ae,We=function(){return be=h.extendDeepAll({},MathJax.Hub.config),Le=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:o},displayAlign:"left"})},te=function(){be=h.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=o},ae=function(){if(pe=MathJax.Hub.config.menuSettings.renderer,pe!=="SVG")return MathJax.Hub.setRenderer("SVG")},G=function(){pe=MathJax.config.startup.output,pe!=="svg"&&(MathJax.config.startup.output="svg")},Q=function(){var ie="math-output-"+h.randstr({},64);Ae=$.select("body").append("div").attr({id:ie}).style({visibility:"hidden",position:"absolute","font-size":ce.fontSize+"px"}).text(w(W));var xe=Ae.node();return ve===2?MathJax.Hub.Typeset(xe):MathJax.typeset([xe])},U=function(){var ie=Ae.select(ve===2?".MathJax_SVG":".MathJax"),xe=!ie.empty()&&Ae.select("svg").node();if(!xe)h.log("There was an error in the tex syntax.",W),de();else{var _e=xe.getBoundingClientRect(),ke;ve===2?ke=$.select("body").select("#MathJax_SVG_glyphs"):ke=ie.select("defs"),de(ie,ke,_e)}Ae.remove()},re=function(){if(pe!=="SVG")return MathJax.Hub.setRenderer(pe)},R=function(){pe!=="svg"&&(MathJax.config.startup.output=pe)},B=function(){return Le!==void 0&&(MathJax.Hub.processSectionDelay=Le),MathJax.Hub.Config(be)},oe=function(){MathJax.config=be};ve===2?MathJax.Hub.Queue(We,ae,Q,U,re,B):ve===3&&(te(),G(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){Q(),U(),R(),oe()}))}var y={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},k={sub:"0.3em",sup:"-0.6em"},D={sub:"-0.21em",sup:"0.42em"},M="",A=["http:","https:","mailto:","",void 0,":"],C=V.NEWLINES=/(\r\n?|\n)/g,j=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,S=/<br(\s+.*)?>/i;V.BR_TAG_ALL=/<br(\s+.*)?>/gi;var L=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,F=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,P=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,J=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function H(W,ce){if(!W)return null;var de=W.match(ce),ve=de&&(de[3]||de[4]);return ve&&q(ve)}var Y=/(^|;)\s*color:/;V.plainText=function(W,ce){ce=ce||{};for(var de=ce.len!==void 0&&ce.len!==-1?ce.len:1/0,ve=ce.allowedTags!==void 0?ce.allowedTags:["br"],pe="...",be=pe.length,Le=W.split(j),Ae=[],We="",te=0,ae=0;ae<Le.length;ae++){var G=Le[ae],Q=G.match(b),U=Q&&Q[2].toLowerCase();if(U)ve.indexOf(U)!==-1&&(Ae.push(G),We=U);else{var re=G.length;if(te+re<de)Ae.push(G),te+=re;else if(te<de){var R=de-te;We&&(We!=="br"||R<=be||re<=be)&&Ae.pop(),de>be?Ae.push(G.substr(0,R-be)+pe):Ae.push(G.substr(0,R));break}We=""}}return Ae.join("")};var Z={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},z=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function q(W){return W.replace(z,function(ce,de){var ve;return de.charAt(0)==="#"?ve=X(de.charAt(1)==="x"?parseInt(de.substr(2),16):parseInt(de.substr(1),10)):ve=Z[de],ve||ce})}V.convertEntities=q;function X(W){if(!(W>1114111)){var ce=String.fromCodePoint;if(ce)return ce(W);var de=String.fromCharCode;return W<=65535?de(W):de((W>>10)+55232,W%1024+56320)}}function K(W,ce){ce=ce.replace(C," ");var de=!1,ve=[],pe,be=-1;function Le(){be++;var Pe=document.createElementNS(u.svg,"tspan");$.select(Pe).attr({class:"line",dy:be*p+"em"}),W.appendChild(Pe),pe=Pe;var Ge=ve;if(ve=[{node:Pe}],Ge.length>1)for(var Je=1;Je<Ge.length;Je++)Ae(Ge[Je])}function Ae(Pe){var Ge=Pe.type,Je={},yt;if(Ge==="a"){yt="a";var lt=Pe.target,mt=Pe.href,Ce=Pe.popup;mt&&(Je={"xlink:xlink:show":lt==="_blank"||lt.charAt(0)!=="_"?"new":"replace",target:lt,"xlink:xlink:href":mt},Ce&&(Je.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ce+'");return false;'))}else yt="tspan";Pe.style&&(Je.style=Pe.style);var Ie=document.createElementNS(u.svg,yt);if(Ge==="sup"||Ge==="sub"){We(pe,M),pe.appendChild(Ie);var Se=document.createElementNS(u.svg,"tspan");We(Se,M),$.select(Se).attr("dy",D[Ge]),Je.dy=k[Ge],pe.appendChild(Ie),pe.appendChild(Se)}else pe.appendChild(Ie);$.select(Ie).attr(Je),pe=Pe.node=Ie,ve.push(Pe)}function We(Pe,Ge){Pe.appendChild(document.createTextNode(Ge))}function te(Pe){if(ve.length===1){h.log("Ignoring unexpected end tag </"+Pe+">.",ce);return}var Ge=ve.pop();Pe!==Ge.type&&h.log("Start tag <"+Ge.type+"> doesnt match end tag <"+Pe+">. Pretending it did match.",ce),pe=ve[ve.length-1].node}var ae=S.test(ce);ae?Le():(pe=W,ve=[{node:W}]);for(var G=ce.split(j),Q=0;Q<G.length;Q++){var U=G[Q],re=U.match(b),R=re&&re[2].toLowerCase(),B=y[R];if(R==="br")Le();else if(B===void 0)We(pe,q(U));else if(re[1])te(R);else{var oe=re[4],ie={type:R},xe=H(oe,L);if(xe?(xe=xe.replace(Y,"$1 fill:"),B&&(xe+=";"+B)):B&&(xe=B),xe&&(ie.style=xe),R==="a"){de=!0;var _e=H(oe,F);if(_e){var ke=ee(_e);ke&&(ie.href=ke,ie.target=H(oe,P)||"_blank",ie.popup=H(oe,J))}}Ae(ie)}}return de}function ee(W){var ce=encodeURI(decodeURI(W)),de=document.createElement("a"),ve=document.createElement("a");de.href=W,ve.href=ce;var pe=de.protocol,be=ve.protocol;return A.indexOf(pe)!==-1&&A.indexOf(be)!==-1?ce:""}V.sanitizeHTML=function(ce){ce=ce.replace(C," ");for(var de=document.createElement("p"),ve=de,pe=[],be=ce.split(j),Le=0;Le<be.length;Le++){var Ae=be[Le],We=Ae.match(b),te=We&&We[2].toLowerCase();if(te in y)if(We[1])pe.length&&(ve=pe.pop());else{var ae=We[4],G=H(ae,L),Q=G?{style:G}:{};if(te==="a"){var U=H(ae,F);if(U){var re=ee(U);if(re){Q.href=re;var R=H(ae,P);R&&(Q.target=R)}}}var B=document.createElement(te);ve.appendChild(B),$.select(B).attr(Q),ve=B,pe.push(B)}else ve.appendChild(document.createTextNode(q(Ae)))}var oe="innerHTML";return de[oe]},V.lineCount=function(ce){return ce.selectAll("tspan.line").size()||1},V.positionText=function(ce,de,ve){return ce.each(function(){var pe=$.select(this);function be(We,te){return te===void 0?(te=pe.attr(We),te===null&&(pe.attr(We,0),te=0)):pe.attr(We,te),te}var Le=be("x",de),Ae=be("y",ve);this.nodeName==="text"&&pe.selectAll("tspan.line").attr({x:Le,y:Ae})})};function ne(W,ce,de){var ve=de.horizontalAlign,pe=de.verticalAlign||"top",be=W.node().getBoundingClientRect(),Le=ce.node().getBoundingClientRect(),Ae,We,te;return pe==="bottom"?We=function(){return be.bottom-Ae.height}:pe==="middle"?We=function(){return be.top+(be.height-Ae.height)/2}:We=function(){return be.top},ve==="right"?te=function(){return be.right-Ae.width}:ve==="center"?te=function(){return be.left+(be.width-Ae.width)/2}:te=function(){return be.left},function(){Ae=this.node().getBoundingClientRect();var ae=te()-Le.left,G=We()-Le.top,Q=de.gd||{};if(de.gd){Q._fullLayout._calcInverseTransform(Q);var U=h.apply3DTransform(Q._fullLayout._invTransform)(ae,G);ae=U[0],G=U[1]}return this.style({top:G+"px",left:ae+"px","z-index":1e3}),this}}var le="1px ";V.makeTextShadow=function(W){var ce=le,de=le,ve=le;return ce+de+ve+W+", -"+ce+"-"+de+ve+W+", "+ce+"-"+de+ve+W+", -"+ce+de+ve+W},V.makeEditable=function(W,ce){var de=ce.gd,ve=ce.delegate,pe=$.dispatch("edit","input","cancel"),be=ve||W;if(W.style({"pointer-events":ve?"none":"all"}),W.size()!==1)throw new Error("boo");function Le(){We(),W.style({opacity:0});var te=be.attr("class"),ae;te?ae="."+te.split(" ")[0]+"-math-group":ae="[class*=-math-group]",ae&&$.select(W.node().parentNode).select(ae).style({opacity:0})}function Ae(te){var ae=te.node(),G=document.createRange();G.selectNodeContents(ae);var Q=window.getSelection();Q.removeAllRanges(),Q.addRange(G),ae.focus()}function We(){var te=$.select(de),ae=te.select(".svg-container"),G=ae.append("div"),Q=W.node().style,U=parseFloat(Q.fontSize||12),re=ce.text;re===void 0&&(re=W.attr("data-unformatted")),G.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Q.fontFamily||"Arial","font-size":U,color:ce.fill||Q.fill||"black",opacity:1,"background-color":ce.background||"transparent",outline:"#ffffff33 1px solid",margin:[-U/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(re).call(ne(W,ae,ce)).on("blur",function(){de._editing=!1,W.text(this.textContent).style({opacity:1});var R=$.select(this).attr("class"),B;R?B="."+R.split(" ")[0]+"-math-group":B="[class*=-math-group]",B&&$.select(W.node().parentNode).select(B).style({opacity:0});var oe=this.textContent;$.select(this).transition().duration(0).remove(),$.select(document).on("mouseup",null),pe.edit.call(W,oe)}).on("focus",function(){var R=this;de._editing=!0,$.select(document).on("mouseup",function(){if($.event.target===R)return!1;document.activeElement===G.node()&&G.node().blur()})}).on("keyup",function(){$.event.which===27?(de._editing=!1,W.style({opacity:1}),$.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),pe.cancel.call(W,this.textContent)):(pe.input.call(W,this.textContent),$.select(this).call(ne(W,ae,ce)))}).on("keydown",function(){$.event.which===13&&this.blur()}).call(Ae)}return ce.immediate?Le():be.on("click",Le),$.rebind(W,pe,"on")}}}),Ha=i({"src/components/colorscale/helpers.js"(V,$){var h=f(),c=xt(),u=fe(),p=_r(),v=ut(),m=gt().isValid;function g(C,j,b){var S=j?p.nestedProperty(C,j).get()||{}:C,L=S[b||"color"];L&&L._inputArray&&(L=L._inputArray);var F=!1;if(p.isArrayOrTypedArray(L)){for(var P=0;P<L.length;P++)if(u(L[P])){F=!0;break}}return p.isPlainObject(S)&&(F||S.showscale===!0||u(S.cmin)&&u(S.cmax)||m(S.colorscale)||p.isPlainObject(S.colorbar))}var w=["showscale","autocolorscale","colorscale","reversescale","colorbar"],o=["min","max","mid","auto"];function T(C){var j=C._colorAx,b=j||C,S={},L,F,P;for(F=0;F<w.length;F++)P=w[F],S[P]=b[P];if(j)for(L="c",F=0;F<o.length;F++)P=o[F],S[P]=b["c"+P];else{var J;for(F=0;F<o.length;F++){if(P=o[F],J="c"+P,J in b){S[P]=b[J];continue}J="z"+P,J in b&&(S[P]=b[J])}L=J.charAt(0)}return S._sync=function(H,Y){var Z=o.indexOf(H)!==-1?L+H:H;b[Z]=b["_"+Z]=Y},S}function y(C){for(var j=T(C),b=j.min,S=j.max,L=j.reversescale?k(j.colorscale):j.colorscale,F=L.length,P=new Array(F),J=new Array(F),H=0;H<F;H++){var Y=L[H];P[H]=b+Y[0]*(S-b),J[H]=Y[1]}return{domain:P,range:J}}function k(C){for(var j=C.length,b=new Array(j),S=j-1,L=0;S>=0;S--,L++){var F=C[S];b[L]=[1-F[0],F[1]]}return b}function D(C,j){j=j||{};for(var b=C.domain,S=C.range,L=S.length,F=new Array(L),P=0;P<L;P++){var J=c(S[P]).toRgb();F[P]=[J.r,J.g,J.b,J.a]}var H=h.scale.linear().domain(b).range(F).clamp(!0),Y=j.noNumericCheck,Z=j.returnArray,z;return Y&&Z?z=H:Y?z=function(q){return A(H(q))}:Z?z=function(q){return u(q)?H(q):c(q).isValid()?q:v.defaultLine}:z=function(q){return u(q)?A(H(q)):c(q).isValid()?q:v.defaultLine},z.domain=H.domain,z.range=function(){return S},z}function M(C,j){return D(y(C),j)}function A(C){var j={r:C[0],g:C[1],b:C[2],a:C[3]};return c(j).toRgbString()}$.exports={hasColorscale:g,extractOpts:T,extractScale:y,flipScale:k,makeColorScaleFunc:D,makeColorScaleFuncFromTrace:M}}}),io=i({"src/plots/cartesian/axis_format_attributes.js"(V,$){var h=Ls(),c=h.FORMAT_LINK,u=h.DATE_FORMAT_LINK;function p(g,w){return{valType:"string",dflt:"",editType:"none",description:(w?v:m)("hover text",g)+["By default the values are formatted using "+(w?"generic number format":"`"+g+"axis.hoverformat`")+"."].join(" ")}}function v(g,w){return["Sets the "+g+" formatting rule"+(w?"for `"+w+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+c+"."].join(" ")}function m(g,w){return v(g,w)+[" And for dates see: "+u+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:p,descriptionOnlyNumbers:v,descriptionWithDates:m}}}),Ps=i({"src/plots/cartesian/layout_attributes.js"(V,$){var h=ir(),c=It(),u=Wi().dash,p=Pt().extendFlat,v=hr().templatedArray,m=io().descriptionWithDates,g=Te().ONEDAY,w=Yr(),o=w.HOUR_PATTERN,T=w.WEEKDAY_PATTERN,y={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},k=p({},y,{values:y.values.slice().concat(["sync"])});function D(Y){return{valType:"integer",min:0,dflt:Y?5:0,editType:"ticks"}}var M={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},A={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},C={valType:"data_array",editType:"ticks"},j={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function b(Y){var Z={valType:"number",min:0,editType:"ticks"};return Y||(Z.dflt=5),Z}function S(Y){var Z={valType:"number",min:0,editType:"ticks"};return Y||(Z.dflt=1),Z}var L={valType:"color",dflt:c.defaultLine,editType:"ticks"},F={valType:"color",dflt:c.lightLine,editType:"ticks"};function P(Y){var Z={valType:"number",min:0,editType:"ticks"};return Y||(Z.dflt=1),Z}var J=p({},u,{editType:"ticks"}),H={valType:"boolean",editType:"ticks"};$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:c.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:h({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[w.idRegex.x.toString(),w.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[w.idRegex.x.toString(),w.idRegex.y.toString()],editType:"calc"},rangebreaks:v("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[T,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:g},editType:"calc"}),tickmode:k,nticks:D(),tick0:M,dtick:A,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:C,ticktext:{valType:"data_array",editType:"ticks"},ticks:j,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:b(),tickwidth:S(),tickcolor:L,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:p({},u,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:h({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:m("tick label")},tickformatstops:v("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:m("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:H,gridcolor:F,gridwidth:P(),griddash:J,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",w.idRegex.x.toString(),w.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",w.idRegex.x.toString(),w.idRegex.y.toString()],editType:"plot"},minor:{tickmode:y,nticks:D("minor"),tick0:M,dtick:A,tickvals:C,ticks:j,ticklen:b("minor"),tickwidth:S("minor"),tickcolor:L,gridcolor:F,gridwidth:P("minor"),griddash:J,showgrid:H,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}}}),Po=i({"src/components/colorbar/attributes.js"(V,$){var h=Ps(),c=ir(),u=Pt().extendFlat,p=Ma().overrideAll;$.exports=p({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:h.linecolor,outlinewidth:h.linewidth,bordercolor:h.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:h.minor.tickmode,nticks:h.nticks,tick0:h.tick0,dtick:h.dtick,tickvals:h.tickvals,ticktext:h.ticktext,ticks:u({},h.ticks,{dflt:""}),ticklabeloverflow:u({},h.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:h.ticklen,tickwidth:h.tickwidth,tickcolor:h.tickcolor,ticklabelstep:h.ticklabelstep,showticklabels:h.showticklabels,labelalias:h.labelalias,tickfont:c({}),tickangle:h.tickangle,tickformat:h.tickformat,tickformatstops:h.tickformatstops,tickprefix:h.tickprefix,showtickprefix:h.showtickprefix,ticksuffix:h.ticksuffix,showticksuffix:h.showticksuffix,separatethousands:h.separatethousands,exponentformat:h.exponentformat,minexponent:h.minexponent,showexponent:h.showexponent,title:{text:{valType:"string"},font:c({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")}}),ao=i({"src/components/colorscale/attributes.js"(V,$){var h=Po(),c=Vt().counter,u=Kr(),p=gt().scales;u(p),$.exports=function(m,g){m=m||"",g=g||{};var w=g.cLetter||"c";"onlyIfNumerical"in g&&g.onlyIfNumerical;var o="noScale"in g?g.noScale:m==="marker.line",T="showScaleDflt"in g?g.showScaleDflt:w==="z",y=typeof g.colorscaleDflt=="string"?p[g.colorscaleDflt]:null,k=g.editTypeOverride||"",D;"colorAttr"in g?(D=g.colorAttr,g.colorAttr):D={z:"z",c:"color"}[w];var M=w+"auto",A=w+"min",C=w+"max",j=w+"mid",b={};b[A]=b[C]=void 0;var S={};S[M]=!1;var L={};return D==="color"&&(L.color={valType:"color",arrayOk:!0,editType:k||"style"},g.anim&&(L.color.anim=!0)),L[M]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:b},L[A]={valType:"number",dflt:null,editType:k||"plot",impliedEdits:S},L[C]={valType:"number",dflt:null,editType:k||"plot",impliedEdits:S},L[j]={valType:"number",dflt:null,editType:"calc",impliedEdits:b},L.colorscale={valType:"colorscale",editType:"calc",dflt:y,impliedEdits:{autocolorscale:!1}},L.autocolorscale={valType:"boolean",dflt:g.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},L.reversescale={valType:"boolean",dflt:!1,editType:"plot"},o||(L.showscale={valType:"boolean",dflt:T,editType:"calc"},L.colorbar=h),g.noColorAxis||(L.coloraxis={valType:"subplotid",regex:c("coloraxis"),dflt:null,editType:"calc"}),L}}}),Qo=i({"src/components/colorscale/layout_attributes.js"(V,$){var h=Pt().extendFlat,c=ao(),u=gt().scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:u.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:u.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:u.RdBu,editType:"calc"}},coloraxis:h({_isSubplotObj:!0,editType:"calc"},c("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}}}),No=i({"src/components/colorbar/has_colorbar.js"(V,$){var h=_r();$.exports=function(u){return h.isPlainObject(u.colorbar)}}}),el=i({"src/plots/cartesian/clean_ticks.js"(V){var $=fe(),h=_r(),c=Te(),u=c.ONEDAY,p=c.ONEWEEK;V.dtick=function(v,m){var g=m==="log",w=m==="date",o=m==="category",T=w?u:1;if(!v)return T;if($(v))return v=Number(v),v<=0?T:o?Math.max(1,Math.round(v)):w?Math.max(.1,v):v;if(typeof v!="string"||!(w||g))return T;var y=v.charAt(0),k=v.substr(1);return k=$(k)?Number(k):0,k<=0||!(w&&y==="M"&&k===Math.round(k)||g&&y==="L"||g&&y==="D"&&(k===1||k===2))?T:v},V.tick0=function(v,m,g,w){if(m==="date")return h.cleanDate(v,h.dateTick0(g,w%p===0?1:0));if(!(w==="D1"||w==="D2"))return $(v)?Number(v):0}}}),zo=i({"src/plots/cartesian/tick_value_defaults.js"(V,$){var h=el(),c=_r().isArrayOrTypedArray,u=Ue().isTypedArraySpec,p=Ue().decodeTypedArraySpec;$.exports=function(m,g,w,o,T){T||(T={});var y=T.isMinor,k=y?m.minor||{}:m,D=y?g.minor:g,M=y?"minor.":"";function A(J){var H=k[J];return u(H)&&(H=p(H)),H!==void 0?H:(D._template||{})[J]}var C=A("tick0"),j=A("dtick"),b=A("tickvals"),S=c(b)?"array":j?"linear":"auto",L=w(M+"tickmode",S);if(L==="auto"||L==="sync")w(M+"nticks");else if(L==="linear"){var F=D.dtick=h.dtick(j,o);D.tick0=h.tick0(C,o,g.calendar,F)}else if(o!=="multicategory"){var P=w(M+"tickvals");P===void 0?D.tickmode="auto":y||w("ticktext")}}}}),Jc=i({"src/plots/cartesian/tick_mark_defaults.js"(V,$){var h=_r(),c=Ps();$.exports=function(p,v,m,g){var w=g.isMinor,o=w?p.minor||{}:p,T=w?v.minor:v,y=w?c.minor:c,k=w?"minor.":"",D=h.coerce2(o,T,y,"ticklen",w?(v.ticklen||5)*.6:void 0),M=h.coerce2(o,T,y,"tickwidth",w?v.tickwidth||1:void 0),A=h.coerce2(o,T,y,"tickcolor",(w?v.tickcolor:void 0)||T.color),C=m(k+"ticks",!w&&g.outerTicks||D||M||A?"outside":"");C||(delete T.ticklen,delete T.tickwidth,delete T.tickcolor)}}}),uc=i({"src/plots/cartesian/show_dflt.js"(V,$){$.exports=function(c){var u=["showexponent","showtickprefix","showticksuffix"],p=u.filter(function(m){return c[m]!==void 0}),v=function(m){return c[m]===c[p[0]]};if(p.every(v)||p.length===1)return c[p[0]]}}}),Ns=i({"src/plots/array_container_defaults.js"(V,$){var h=_r(),c=hr();$.exports=function(p,v,m){var g=m.name,w=m.inclusionAttr||"visible",o=v[g],T=h.isArrayOrTypedArray(p[g])?p[g]:[],y=v[g]=[],k=c.arrayTemplater(v,g,w),D,M;for(D=0;D<T.length;D++){var A=T[D];h.isPlainObject(A)?M=k.newItem(A):(M=k.newItem({}),M[w]=!1),M._index=D,M[w]!==!1&&m.handleItemDefaults(A,M,v,m),y.push(M)}var C=k.defaultItems();for(D=0;D<C.length;D++)M=C[D],M._index=y.length,m.handleItemDefaults({},M,v,m,{}),y.push(M);if(h.isArrayOrTypedArray(o)){var j=Math.min(o.length,y.length);for(D=0;D<j;D++)h.relinkPrivateKeys(y[D],o[D])}return y}}}),dc=i({"src/plots/cartesian/tick_label_defaults.js"(V,$){var h=_r(),c=ut().contrast,u=Ps(),p=uc(),v=Ns();$.exports=function(w,o,T,y,k){k||(k={});var D=T("labelalias");h.isPlainObject(D)||delete o.labelalias;var M=p(w),A=T("showticklabels");if(A){k.noTicklabelshift||T("ticklabelshift"),k.noTicklabelstandoff||T("ticklabelstandoff");var C=k.font||{},j=o.color,b=o.ticklabelposition||"",S=b.indexOf("inside")!==-1?c(k.bgColor):j&&j!==u.color.dflt?j:C.color;if(h.coerceFont(T,"tickfont",C,{overrideDflt:{color:S}}),!k.noTicklabelstep&&y!=="multicategory"&&y!=="log"&&T("ticklabelstep"),!k.noAng){var L=T("tickangle");!k.noAutotickangles&&L==="auto"&&T("autotickangles")}if(y!=="category"){var F=T("tickformat");v(w,o,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:m}),o.tickformatstops.length||delete o.tickformatstops,!k.noExp&&!F&&y!=="date"&&(T("showexponent",M),T("exponentformat"),T("minexponent"),T("separatethousands"))}}};function m(g,w){function o(y,k){return h.coerce(g,w,u.tickformatstops,y,k)}var T=o("enabled");T&&(o("dtickrange"),o("value"))}}}),tl=i({"src/plots/cartesian/prefix_suffix_defaults.js"(V,$){var h=uc();$.exports=function(u,p,v,m,g){g||(g={});var w=g.tickSuffixDflt,o=h(u),T=v("tickprefix");T&&v("showtickprefix",o);var y=v("ticksuffix",w);y&&v("showticksuffix",o)}}}),Al=i({"src/components/colorbar/defaults.js"(V,$){var h=_r(),c=hr(),u=zo(),p=Jc(),v=dc(),m=tl(),g=Po();$.exports=function(o,T,y){var k=c.newContainer(T,"colorbar"),D=o.colorbar||{};function M(ce,de){return h.coerce(D,k,g,ce,de)}var A=y.margin||{t:0,b:0,l:0,r:0},C=y.width-A.l-A.r,j=y.height-A.t-A.b,b=M("orientation"),S=b==="v",L=M("thicknessmode");M("thickness",L==="fraction"?30/(S?C:j):30);var F=M("lenmode");M("len",F==="fraction"?1:S?j:C);var P=M("yref"),J=M("xref"),H=P==="paper",Y=J==="paper",Z,z,q,X="left";S?(q="middle",X=Y?"left":"right",Z=Y?1.02:1,z=.5):(q=H?"bottom":"top",X="center",Z=.5,z=H?1.02:1),h.coerce(D,k,{x:{valType:"number",min:Y?-2:0,max:Y?3:1,dflt:Z}},"x"),h.coerce(D,k,{y:{valType:"number",min:H?-2:0,max:H?3:1,dflt:z}},"y"),M("xanchor",X),M("xpad"),M("yanchor",q),M("ypad"),h.noneOrAll(D,k,["x","y"]),M("outlinecolor"),M("outlinewidth"),M("bordercolor"),M("borderwidth"),M("bgcolor");var K=h.coerce(D,k,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");M("ticklabeloverflow",K.indexOf("inside")!==-1?"hide past domain":"hide past div"),u(D,k,M,"linear");var ee=y.font,ne={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:ee};K.indexOf("inside")!==-1&&(ne.bgColor="black"),m(D,k,M,"linear",ne),v(D,k,M,"linear",ne),p(D,k,M,"linear",ne),M("title.text",y._dfltTitle.colorbar);var le=k.showticklabels?k.tickfont:ee,W=h.extendFlat({},ee,{family:le.family,size:h.bigFont(le.size)});h.coerceFont(M,"title.font",W),M("title.side",S?"top":"right")}}}),is=i({"src/components/colorscale/defaults.js"(V,$){var h=fe(),c=_r(),u=No(),p=Al(),v=gt().isValid,m=xn().traceIs;function g(w,o){var T=o.slice(0,o.length-1);return o?c.nestedProperty(w,T).get()||{}:w}$.exports=function w(o,T,y,k,D){var M=D.prefix,A=D.cLetter,C="_module"in T,j=g(o,M),b=g(T,M),S=g(T._template||{},M)||{},L=function(){return delete o.coloraxis,delete T.coloraxis,w(o,T,y,k,D)};if(C){var F=y._colorAxes||{},P=k(M+"coloraxis");if(P){var J=m(T,"contour")&&c.nestedProperty(T,"contours.coloring").get()||"heatmap",H=F[P];H?(H[2].push(L),H[0]!==J&&(H[0]=!1,c.warn(["Ignoring coloraxis:",P,"setting","as it is linked to incompatible colorscales."].join(" ")))):F[P]=[J,T,[L]];return}}var Y=j[A+"min"],Z=j[A+"max"],z=h(Y)&&h(Z)&&Y<Z,q=k(M+A+"auto",!z);q?k(M+A+"mid"):(k(M+A+"min"),k(M+A+"max"));var X=j.colorscale,K=S.colorscale,ee;if(X!==void 0&&(ee=!v(X)),K!==void 0&&(ee=!v(K)),k(M+"autocolorscale",ee),k(M+"colorscale"),k(M+"reversescale"),M!=="marker.line."){var ne;M&&C&&(ne=u(j));var le=k(M+"showscale",ne);le&&(M&&S&&(b._template=S),p(j,b,y))}}}}),Cl=i({"src/components/colorscale/layout_defaults.js"(V,$){var h=_r(),c=hr(),u=Qo(),p=is();$.exports=function(m,g){function w(C,j){return h.coerce(m,g,u,C,j)}w("colorscale.sequential"),w("colorscale.sequentialminus"),w("colorscale.diverging");var o=g._colorAxes,T,y;function k(C,j){return h.coerce(T,y,u.coloraxis,C,j)}for(var D in o){var M=o[D];if(M[0])T=m[D]||{},y=c.newContainer(g,D,"coloraxis"),y._name=D,p(T,y,g,k,{prefix:"",cLetter:"c"});else{for(var A=0;A<M[2].length;A++)M[2][A]();delete g._colorAxes[D]}}}}}),rl=i({"src/components/colorscale/cross_trace_defaults.js"(V,$){var h=_r(),c=Ha().hasColorscale,u=Ha().extractOpts;$.exports=function(v,m){function g(M,A){var C=M["_"+A];C!==void 0&&(M[A]=C)}function w(M,A){var C=A.container?h.nestedProperty(M,A.container).get():M;if(C)if(C.coloraxis)C._colorAx=m[C.coloraxis];else{var j=u(C),b=j.auto;(b||j.min===void 0)&&g(C,A.min),(b||j.max===void 0)&&g(C,A.max),j.autocolorscale&&g(C,"colorscale")}}for(var o=0;o<v.length;o++){var T=v[o],y=T._module.colorbar;if(y)if(Array.isArray(y))for(var k=0;k<y.length;k++)w(T,y[k]);else w(T,y);c(T,"marker.line")&&w(T,{container:"marker.line",min:"cmin",max:"cmax"})}for(var D in m._colorAxes)w(m[D],{min:"cmin",max:"cmax"})}}}),fc=i({"src/components/colorscale/calc.js"(V,$){var h=fe(),c=_r(),u=Ha().extractOpts;$.exports=function(v,m,g){var w=v._fullLayout,o=g.vals,T=g.containerStr,y=T?c.nestedProperty(m,T).get():m,k=u(y),D=k.auto!==!1,M=k.min,A=k.max,C=k.mid,j=function(){return c.aggNums(Math.min,null,o)},b=function(){return c.aggNums(Math.max,null,o)};if(M===void 0?M=j():D&&(y._colorAx&&h(M)?M=Math.min(M,j()):M=j()),A===void 0?A=b():D&&(y._colorAx&&h(A)?A=Math.max(A,b()):A=b()),D&&C!==void 0&&(A-C>C-M?M=C-(A-C):A-C<C-M&&(A=C+(C-M))),M===A&&(M-=.5,A+=.5),k._sync("min",M),k._sync("max",A),k.autocolorscale){var S;M*A<0?S=w.colorscale.diverging:M>=0?S=w.colorscale.sequential:S=w.colorscale.sequentialminus,k._sync("colorscale",S)}}}}),nl=i({"src/components/colorscale/index.js"(V,$){var h=gt(),c=Ha();$.exports={moduleType:"component",name:"colorscale",attributes:ao(),layoutAttributes:Qo(),supplyLayoutDefaults:Cl(),handleDefaults:is(),crossTraceDefaults:rl(),calc:fc(),scales:h.scales,defaultScale:h.defaultScale,getScale:h.get,isValidScale:h.isValid,hasColorscale:c.hasColorscale,extractOpts:c.extractOpts,extractScale:c.extractScale,flipScale:c.flipScale,makeColorScaleFunc:c.makeColorScaleFunc,makeColorScaleFuncFromTrace:c.makeColorScaleFuncFromTrace}}}),za=i({"src/traces/scatter/subtypes.js"(V,$){var h=_r(),c=Ue().isTypedArraySpec;$.exports={hasLines:function(u){return u.visible&&u.mode&&u.mode.indexOf("lines")!==-1},hasMarkers:function(u){return u.visible&&(u.mode&&u.mode.indexOf("markers")!==-1||u.type==="splom")},hasText:function(u){return u.visible&&u.mode&&u.mode.indexOf("text")!==-1},isBubble:function(u){var p=u.marker;return h.isPlainObject(p)&&(h.isArrayOrTypedArray(p.size)||c(p.size))}}}}),$s=i({"src/traces/scatter/make_bubble_size_func.js"(V,$){var h=fe();$.exports=function(u,p){p||(p=2);var v=u.marker,m=v.sizeref||1,g=v.sizemin||0,w=v.sizemode==="area"?function(o){return Math.sqrt(o/m)}:function(o){return o/m};return function(o){var T=w(o/p);return h(T)&&T>0?Math.max(T,g):0}}}}),Wa=i({"src/components/fx/helpers.js"(V){var $=_r();V.getSubplot=function(m){return m.subplot||m.xaxis+m.yaxis||m.geo},V.isTraceInSubplots=function(m,g){if(m.type==="splom"){for(var w=m.xaxes||[],o=m.yaxes||[],T=0;T<w.length;T++)for(var y=0;y<o.length;y++)if(g.indexOf(w[T]+o[y])!==-1)return!0;return!1}return g.indexOf(V.getSubplot(m))!==-1},V.flat=function(m,g){for(var w=new Array(m.length),o=0;o<m.length;o++)w[o]=g;return w},V.p2c=function(m,g){for(var w=new Array(m.length),o=0;o<m.length;o++)w[o]=m[o].p2c(g);return w},V.getDistanceFunction=function(m,g,w,o){return m==="closest"?o||V.quadrature(g,w):m.charAt(0)==="x"?g:w},V.getClosest=function(m,g,w){if(w.index!==!1)w.index>=0&&w.index<m.length?w.distance=0:w.index=!1;else for(var o=1/0,T=m.length,y=0;y<T;y++)o=g(m[y]),o<=w.distance&&(w.index=y,w.distance=o);return w},V.inbox=function(m,g,w){return m*g<0||m===0?w:1/0},V.quadrature=function(m,g){return function(w){var o=m(w),T=g(w);return Math.sqrt(o*o+T*T)}},V.makeEventData=function(m,g,w){var o="index"in m?m.index:m.pointNumber,T={data:g._input,fullData:g,curveNumber:g.index,pointNumber:o};if(g._indexToPoints){var y=g._indexToPoints[o];y.length===1?T.pointIndex=y[0]:T.pointIndices=y}else T.pointIndex=o;return g._module.eventData?T=g._module.eventData(T,m,g,w,o):("xVal"in m?T.x=m.xVal:"x"in m&&(T.x=m.x),"yVal"in m?T.y=m.yVal:"y"in m&&(T.y=m.y),m.xa&&(T.xaxis=m.xa),m.ya&&(T.yaxis=m.ya),m.zLabelVal!==void 0&&(T.z=m.zLabelVal)),V.appendArrayPointValue(T,g,o),T},V.appendArrayPointValue=function(m,g,w){var o=g._arrayAttrs;if(o)for(var T=0;T<o.length;T++){var y=o[T],k=c(y);if(m[k]===void 0){var D=$.nestedProperty(g,y).get(),M=u(D,w);M!==void 0&&(m[k]=M)}}},V.appendArrayMultiPointValues=function(m,g,w){var o=g._arrayAttrs;if(o)for(var T=0;T<o.length;T++){var y=o[T],k=c(y);if(m[k]===void 0){for(var D=$.nestedProperty(g,y).get(),M=new Array(w.length),A=0;A<w.length;A++)M[A]=u(D,w[A]);m[k]=M}}};var h={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function c(m){return h[m]||m}function u(m,g){if(Array.isArray(g)){if(Array.isArray(m)&&Array.isArray(m[g[0]]))return m[g[0]][g[1]]}else return m[g]}var p={x:!0,y:!0},v={"x unified":!0,"y unified":!0};V.isUnifiedHover=function(m){return typeof m!="string"?!1:!!v[m]},V.isXYhover=function(m){return typeof m!="string"?!1:!!p[m]}}}),hc=i({"node_modules/parse-svg-path/index.js"(V,$){$.exports=u;var h={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function u(m){var g=[];return m.replace(c,function(w,o,T){var y=o.toLowerCase();for(T=v(T),y=="m"&&T.length>2&&(g.push([o].concat(T.splice(0,2))),y="l",o=o=="m"?"l":"L");;){if(T.length==h[y])return T.unshift(o),g.push(T);if(T.length<h[y])throw new Error("malformed path data");g.push([o].concat(T.splice(0,h[y])))}}),g}var p=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function v(m){var g=m.match(p);return g?g.map(Number):[]}}}),Fn=i({"src/components/drawing/symbol_defs.js"(V,$){var h=hc(),c=function(A,C){return C?Math.round(A*(C=Math.pow(10,C)))/C:Math.round(A)},u="M0,0Z",p=Math.sqrt(2),v=Math.sqrt(3),m=Math.PI,g=Math.cos,w=Math.sin;$.exports={circle:{n:0,f:function(A,C,j){if(o(C))return u;var b=c(A,2),S="M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z";return j?M(C,j,S):S}},square:{n:1,f:function(A,C,j){if(o(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z")}},diamond:{n:2,f:function(A,C,j){if(o(C))return u;var b=c(A*1.3,2);return M(C,j,"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z")}},cross:{n:3,f:function(A,C,j){if(o(C))return u;var b=c(A*.4,2),S=c(A*1.2,2);return M(C,j,"M"+S+","+b+"H"+b+"V"+S+"H-"+b+"V"+b+"H-"+S+"V-"+b+"H-"+b+"V-"+S+"H"+b+"V-"+b+"H"+S+"Z")}},x:{n:4,f:function(A,C,j){if(o(C))return u;var b=c(A*.8/p,2),S="l"+b+","+b,L="l"+b+",-"+b,F="l-"+b+",-"+b,P="l-"+b+","+b;return M(C,j,"M0,"+b+S+L+F+L+F+P+F+P+S+P+S+"Z")}},"triangle-up":{n:5,f:function(A,C,j){if(o(C))return u;var b=c(A*2/v,2),S=c(A/2,2),L=c(A,2);return M(C,j,"M-"+b+","+S+"H"+b+"L0,-"+L+"Z")}},"triangle-down":{n:6,f:function(A,C,j){if(o(C))return u;var b=c(A*2/v,2),S=c(A/2,2),L=c(A,2);return M(C,j,"M-"+b+",-"+S+"H"+b+"L0,"+L+"Z")}},"triangle-left":{n:7,f:function(A,C,j){if(o(C))return u;var b=c(A*2/v,2),S=c(A/2,2),L=c(A,2);return M(C,j,"M"+S+",-"+b+"V"+b+"L-"+L+",0Z")}},"triangle-right":{n:8,f:function(A,C,j){if(o(C))return u;var b=c(A*2/v,2),S=c(A/2,2),L=c(A,2);return M(C,j,"M-"+S+",-"+b+"V"+b+"L"+L+",0Z")}},"triangle-ne":{n:9,f:function(A,C,j){if(o(C))return u;var b=c(A*.6,2),S=c(A*1.2,2);return M(C,j,"M-"+S+",-"+b+"H"+b+"V"+S+"Z")}},"triangle-se":{n:10,f:function(A,C,j){if(o(C))return u;var b=c(A*.6,2),S=c(A*1.2,2);return M(C,j,"M"+b+",-"+S+"V"+b+"H-"+S+"Z")}},"triangle-sw":{n:11,f:function(A,C,j){if(o(C))return u;var b=c(A*.6,2),S=c(A*1.2,2);return M(C,j,"M"+S+","+b+"H-"+b+"V-"+S+"Z")}},"triangle-nw":{n:12,f:function(A,C,j){if(o(C))return u;var b=c(A*.6,2),S=c(A*1.2,2);return M(C,j,"M-"+b+","+S+"V-"+b+"H"+S+"Z")}},pentagon:{n:13,f:function(A,C,j){if(o(C))return u;var b=c(A*.951,2),S=c(A*.588,2),L=c(-A,2),F=c(A*-.309,2),P=c(A*.809,2);return M(C,j,"M"+b+","+F+"L"+S+","+P+"H-"+S+"L-"+b+","+F+"L0,"+L+"Z")}},hexagon:{n:14,f:function(A,C,j){if(o(C))return u;var b=c(A,2),S=c(A/2,2),L=c(A*v/2,2);return M(C,j,"M"+L+",-"+S+"V"+S+"L0,"+b+"L-"+L+","+S+"V-"+S+"L0,-"+b+"Z")}},hexagon2:{n:15,f:function(A,C,j){if(o(C))return u;var b=c(A,2),S=c(A/2,2),L=c(A*v/2,2);return M(C,j,"M-"+S+","+L+"H"+S+"L"+b+",0L"+S+",-"+L+"H-"+S+"L-"+b+",0Z")}},octagon:{n:16,f:function(A,C,j){if(o(C))return u;var b=c(A*.924,2),S=c(A*.383,2);return M(C,j,"M-"+S+",-"+b+"H"+S+"L"+b+",-"+S+"V"+S+"L"+S+","+b+"H-"+S+"L-"+b+","+S+"V-"+S+"Z")}},star:{n:17,f:function(A,C,j){if(o(C))return u;var b=A*1.4,S=c(b*.225,2),L=c(b*.951,2),F=c(b*.363,2),P=c(b*.588,2),J=c(-b,2),H=c(b*-.309,2),Y=c(b*.118,2),Z=c(b*.809,2),z=c(b*.382,2);return M(C,j,"M"+S+","+H+"H"+L+"L"+F+","+Y+"L"+P+","+Z+"L0,"+z+"L-"+P+","+Z+"L-"+F+","+Y+"L-"+L+","+H+"H-"+S+"L0,"+J+"Z")}},hexagram:{n:18,f:function(A,C,j){if(o(C))return u;var b=c(A*.66,2),S=c(A*.38,2),L=c(A*.76,2);return M(C,j,"M-"+L+",0l-"+S+",-"+b+"h"+L+"l"+S+",-"+b+"l"+S+","+b+"h"+L+"l-"+S+","+b+"l"+S+","+b+"h-"+L+"l-"+S+","+b+"l-"+S+",-"+b+"h-"+L+"Z")}},"star-triangle-up":{n:19,f:function(A,C,j){if(o(C))return u;var b=c(A*v*.8,2),S=c(A*.8,2),L=c(A*1.6,2),F=c(A*4,2),P="A "+F+","+F+" 0 0 1 ";return M(C,j,"M-"+b+","+S+P+b+","+S+P+"0,-"+L+P+"-"+b+","+S+"Z")}},"star-triangle-down":{n:20,f:function(A,C,j){if(o(C))return u;var b=c(A*v*.8,2),S=c(A*.8,2),L=c(A*1.6,2),F=c(A*4,2),P="A "+F+","+F+" 0 0 1 ";return M(C,j,"M"+b+",-"+S+P+"-"+b+",-"+S+P+"0,"+L+P+b+",-"+S+"Z")}},"star-square":{n:21,f:function(A,C,j){if(o(C))return u;var b=c(A*1.1,2),S=c(A*2,2),L="A "+S+","+S+" 0 0 1 ";return M(C,j,"M-"+b+",-"+b+L+"-"+b+","+b+L+b+","+b+L+b+",-"+b+L+"-"+b+",-"+b+"Z")}},"star-diamond":{n:22,f:function(A,C,j){if(o(C))return u;var b=c(A*1.4,2),S=c(A*1.9,2),L="A "+S+","+S+" 0 0 1 ";return M(C,j,"M-"+b+",0"+L+"0,"+b+L+b+",0"+L+"0,-"+b+L+"-"+b+",0Z")}},"diamond-tall":{n:23,f:function(A,C,j){if(o(C))return u;var b=c(A*.7,2),S=c(A*1.4,2);return M(C,j,"M0,"+S+"L"+b+",0L0,-"+S+"L-"+b+",0Z")}},"diamond-wide":{n:24,f:function(A,C,j){if(o(C))return u;var b=c(A*1.4,2),S=c(A*.7,2);return M(C,j,"M0,"+S+"L"+b+",0L0,-"+S+"L-"+b+",0Z")}},hourglass:{n:25,f:function(A,C,j){if(o(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z")},noDot:!0},bowtie:{n:26,f:function(A,C,j){if(o(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z")},noDot:!0},"circle-cross":{n:27,f:function(A,C,j){if(o(C))return u;var b=c(A,2);return M(C,j,"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(A,C,j){if(o(C))return u;var b=c(A,2),S=c(A/p,2);return M(C,j,"M"+S+","+S+"L-"+S+",-"+S+"M"+S+",-"+S+"L-"+S+","+S+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(A,C,j){if(o(C))return u;var b=c(A,2);return M(C,j,"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(A,C,j){if(o(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(A,C,j){if(o(C))return u;var b=c(A*1.3,2);return M(C,j,"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(A,C,j){if(o(C))return u;var b=c(A*1.3,2),S=c(A*.65,2);return M(C,j,"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+S+",-"+S+"L"+S+","+S+"M-"+S+","+S+"L"+S+",-"+S)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(A,C,j){if(o(C))return u;var b=c(A*1.4,2);return M(C,j,"M0,"+b+"V-"+b+"M"+b+",0H-"+b)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(A,C,j){if(o(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(A,C,j){if(o(C))return u;var b=c(A*1.2,2),S=c(A*.85,2);return M(C,j,"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+S+","+S+"L-"+S+",-"+S+"M"+S+",-"+S+"L-"+S+","+S)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(A,C,j){if(o(C))return u;var b=c(A/2,2),S=c(A,2);return M(C,j,"M"+b+","+S+"V-"+S+"M"+(b-S)+",-"+S+"V"+S+"M"+S+","+b+"H-"+S+"M-"+S+","+(b-S)+"H"+S)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(A,C,j){if(o(C))return u;var b=c(A*1.2,2),S=c(A*1.6,2),L=c(A*.8,2);return M(C,j,"M-"+b+","+L+"L0,0M"+b+","+L+"L0,0M0,-"+S+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(A,C,j){if(o(C))return u;var b=c(A*1.2,2),S=c(A*1.6,2),L=c(A*.8,2);return M(C,j,"M-"+b+",-"+L+"L0,0M"+b+",-"+L+"L0,0M0,"+S+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(A,C,j){if(o(C))return u;var b=c(A*1.2,2),S=c(A*1.6,2),L=c(A*.8,2);return M(C,j,"M"+L+","+b+"L0,0M"+L+",-"+b+"L0,0M-"+S+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(A,C,j){if(o(C))return u;var b=c(A*1.2,2),S=c(A*1.6,2),L=c(A*.8,2);return M(C,j,"M-"+L+","+b+"L0,0M-"+L+",-"+b+"L0,0M"+S+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(A,C,j){if(o(C))return u;var b=c(A*1.4,2);return M(C,j,"M"+b+",0H-"+b)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(A,C,j){if(o(C))return u;var b=c(A*1.4,2);return M(C,j,"M0,"+b+"V-"+b)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(A,C,j){if(o(C))return u;var b=c(A,2);return M(C,j,"M"+b+",-"+b+"L-"+b+","+b)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(A,C,j){if(o(C))return u;var b=c(A,2);return M(C,j,"M"+b+","+b+"L-"+b+",-"+b)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(A,C,j){if(o(C))return u;var b=c(A,2),S=c(A*2,2);return M(C,j,"M0,0L-"+b+","+S+"H"+b+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(A,C,j){if(o(C))return u;var b=c(A,2),S=c(A*2,2);return M(C,j,"M0,0L-"+b+",-"+S+"H"+b+"Z")},noDot:!0},"arrow-left":{n:47,f:function(A,C,j){if(o(C))return u;var b=c(A*2,2),S=c(A,2);return M(C,j,"M0,0L"+b+",-"+S+"V"+S+"Z")},noDot:!0},"arrow-right":{n:48,f:function(A,C,j){if(o(C))return u;var b=c(A*2,2),S=c(A,2);return M(C,j,"M0,0L-"+b+",-"+S+"V"+S+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(A,C,j){if(o(C))return u;var b=c(A,2),S=c(A*2,2);return M(C,j,"M-"+b+",0H"+b+"M0,0L-"+b+","+S+"H"+b+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(A,C,j){if(o(C))return u;var b=c(A,2),S=c(A*2,2);return M(C,j,"M-"+b+",0H"+b+"M0,0L-"+b+",-"+S+"H"+b+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(A,C,j){if(o(C))return u;var b=c(A*2,2),S=c(A,2);return M(C,j,"M0,-"+S+"V"+S+"M0,0L"+b+",-"+S+"V"+S+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(A,C,j){if(o(C))return u;var b=c(A*2,2),S=c(A,2);return M(C,j,"M0,-"+S+"V"+S+"M0,0L-"+b+",-"+S+"V"+S+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(A,C,j){if(o(C))return u;var b=m/2.5,S=2*A*g(b),L=2*A*w(b);return M(C,j,"M0,0L"+-S+","+L+"L"+S+","+L+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(A,C,j){if(o(C))return u;var b=m/4,S=2*A*g(b),L=2*A*w(b);return M(C,j,"M0,0L"+-S+","+L+"A "+2*A+","+2*A+" 0 0 1 "+S+","+L+"Z")},backoff:.4,noDot:!0}};function o(A){return A===null}var T,y,k,D;function M(A,C,j){if((!A||A%360===0)&&!C)return j;if(k===A&&D===C&&T===j)return y;k=A,D=C,T=j;function b(ee,ne){var le=g(ee),W=w(ee),ce=ne[0],de=ne[1]+(C||0);return[ce*le-de*W,ce*W+de*le]}for(var S=A/180*m,L=0,F=0,P=h(j),J="",H=0;H<P.length;H++){var Y=P[H],Z=Y[0],z=L,q=F;if(Z==="M"||Z==="L")L=+Y[1],F=+Y[2];else if(Z==="m"||Z==="l")L+=+Y[1],F+=+Y[2];else if(Z==="H")L=+Y[1];else if(Z==="h")L+=+Y[1];else if(Z==="V")F=+Y[1];else if(Z==="v")F+=+Y[1];else if(Z==="A"){L=+Y[1],F=+Y[2];var X=b(S,[+Y[6],+Y[7]]);Y[6]=X[0],Y[7]=X[1],Y[3]=+Y[3]+A}(Z==="H"||Z==="V")&&(Z="L"),(Z==="h"||Z==="v")&&(Z="l"),(Z==="m"||Z==="l")&&(L-=z,F-=q);var K=b(S,[L,F]);(Z==="H"||Z==="V")&&(Z="L"),(Z==="M"||Z==="L"||Z==="m"||Z==="l")&&(Y[1]=K[0],Y[2]=K[1]),Y[0]=Z,J+=Y[0]+Y.slice(1).join(",")}return y=J,J}}}),oi=i({"src/components/drawing/index.js"(V,$){var h=f(),c=_r(),u=c.numberFormat,p=fe(),v=xt(),m=xn(),g=ut(),w=nl(),o=c.strTranslate,T=ia(),y=ns(),k=na(),D=k.LINE_SPACING,M=qt().DESELECTDIM,A=za(),C=$s(),j=Wa().appendArrayPointValue,b=$.exports={};b.font=function(Ce,Ie){var Se=Ie.variant,Be=Ie.style,rt=Ie.weight,ht=Ie.color,Lt=Ie.size,Ct=Ie.family,zt=Ie.shadow,Bt=Ie.lineposition,Ft=Ie.textcase;Ct&&Ce.style("font-family",Ct),Lt+1&&Ce.style("font-size",Lt+"px"),ht&&Ce.call(g.fill,ht),rt&&Ce.style("font-weight",rt),Be&&Ce.style("font-style",Be),Se&&Ce.style("font-variant",Se),Ft&&Ce.style("text-transform",S(F(Ft))),zt&&Ce.style("text-shadow",zt==="auto"?T.makeTextShadow(g.contrast(ht)):S(zt)),Bt&&Ce.style("text-decoration-line",S(P(Bt)))};function S(Ce){return Ce==="none"?void 0:Ce}var L={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function F(Ce){return L[Ce]}function P(Ce){return Ce.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}b.setPosition=function(Ce,Ie,Se){Ce.attr("x",Ie).attr("y",Se)},b.setSize=function(Ce,Ie,Se){Ce.attr("width",Ie).attr("height",Se)},b.setRect=function(Ce,Ie,Se,Be,rt){Ce.call(b.setPosition,Ie,Se).call(b.setSize,Be,rt)},b.translatePoint=function(Ce,Ie,Se,Be){var rt=Se.c2p(Ce.x),ht=Be.c2p(Ce.y);if(p(rt)&&p(ht)&&Ie.node())Ie.node().nodeName==="text"?Ie.attr("x",rt).attr("y",ht):Ie.attr("transform",o(rt,ht));else return!1;return!0},b.translatePoints=function(Ce,Ie,Se){Ce.each(function(Be){var rt=h.select(this);b.translatePoint(Be,rt,Ie,Se)})},b.hideOutsideRangePoint=function(Ce,Ie,Se,Be,rt,ht){Ie.attr("display",Se.isPtWithinRange(Ce,rt)&&Be.isPtWithinRange(Ce,ht)?null:"none")},b.hideOutsideRangePoints=function(Ce,Ie){if(Ie._hasClipOnAxisFalse){var Se=Ie.xaxis,Be=Ie.yaxis;Ce.each(function(rt){var ht=rt[0].trace,Lt=ht.xcalendar,Ct=ht.ycalendar,zt=m.traceIs(ht,"bar-like")?".bartext":".point,.textpoint";Ce.selectAll(zt).each(function(Bt){b.hideOutsideRangePoint(Bt,h.select(this),Se,Be,Lt,Ct)})})}},b.crispRound=function(Ce,Ie,Se){return!Ie||!p(Ie)?Se||0:Ce._context.staticPlot?Ie:Ie<1?1:Math.round(Ie)},b.singleLineStyle=function(Ce,Ie,Se,Be,rt){Ie.style("fill","none");var ht=(((Ce||[])[0]||{}).trace||{}).line||{},Lt=Se||ht.width||0,Ct=rt||ht.dash||"";g.stroke(Ie,Be||ht.color),b.dashLine(Ie,Ct,Lt)},b.lineGroupStyle=function(Ce,Ie,Se,Be){Ce.style("fill","none").each(function(rt){var ht=(((rt||[])[0]||{}).trace||{}).line||{},Lt=Ie||ht.width||0,Ct=Be||ht.dash||"";h.select(this).call(g.stroke,Se||ht.color).call(b.dashLine,Ct,Lt)})},b.dashLine=function(Ce,Ie,Se){Se=+Se||0,Ie=b.dashStyle(Ie,Se),Ce.style({"stroke-dasharray":Ie,"stroke-width":Se+"px"})},b.dashStyle=function(Ce,Ie){Ie=+Ie||1;var Se=Math.max(Ie,3);return Ce==="solid"?Ce="":Ce==="dot"?Ce=Se+"px,"+Se+"px":Ce==="dash"?Ce=3*Se+"px,"+3*Se+"px":Ce==="longdash"?Ce=5*Se+"px,"+5*Se+"px":Ce==="dashdot"?Ce=3*Se+"px,"+Se+"px,"+Se+"px,"+Se+"px":Ce==="longdashdot"&&(Ce=5*Se+"px,"+2*Se+"px,"+Se+"px,"+2*Se+"px"),Ce};function J(Ce,Ie,Se,Be){var rt=Ie.fillpattern,ht=Ie.fillgradient,Lt=rt&&b.getPatternAttr(rt.shape,0,"");if(Lt){var Ct=b.getPatternAttr(rt.bgcolor,0,null),zt=b.getPatternAttr(rt.fgcolor,0,null),Bt=rt.fgopacity,Ft=b.getPatternAttr(rt.size,0,8),nr=b.getPatternAttr(rt.solidity,0,.3),_t=Ie.uid;b.pattern(Ce,"point",Se,_t,Lt,Ft,nr,void 0,rt.fillmode,Ct,zt,Bt)}else if(ht&&ht.type!=="none"){var rr=ht.type,pr="scatterfill-"+Ie.uid;if(Be&&(pr="legendfill-"+Ie.uid),!Be&&(ht.start!==void 0||ht.stop!==void 0)){var Yt,sr;rr==="horizontal"?(Yt={x:ht.start,y:0},sr={x:ht.stop,y:0}):rr==="vertical"&&(Yt={x:0,y:ht.start},sr={x:0,y:ht.stop}),Yt.x=Ie._xA.c2p(Yt.x===void 0?Ie._extremes.x.min[0].val:Yt.x,!0),Yt.y=Ie._yA.c2p(Yt.y===void 0?Ie._extremes.y.min[0].val:Yt.y,!0),sr.x=Ie._xA.c2p(sr.x===void 0?Ie._extremes.x.max[0].val:sr.x,!0),sr.y=Ie._yA.c2p(sr.y===void 0?Ie._extremes.y.max[0].val:sr.y,!0),Ce.call(K,Se,pr,"linear",ht.colorscale,"fill",Yt,sr,!0,!1)}else rr==="horizontal"&&(rr=rr+"reversed"),Ce.call(b.gradient,Se,pr,rr,ht.colorscale,"fill")}else Ie.fillcolor&&Ce.call(g.fill,Ie.fillcolor)}b.singleFillStyle=function(Ce,Ie){var Se=h.select(Ce.node()),Be=Se.data(),rt=((Be[0]||[])[0]||{}).trace||{};J(Ce,rt,Ie,!1)},b.fillGroupStyle=function(Ce,Ie,Se){Ce.style("stroke-width",0).each(function(Be){var rt=h.select(this);Be[0].trace&&J(rt,Be[0].trace,Ie,Se)})};var H=Fn();b.symbolNames=[],b.symbolFuncs=[],b.symbolBackOffs=[],b.symbolNeedLines={},b.symbolNoDot={},b.symbolNoFill={},b.symbolList=[],Object.keys(H).forEach(function(Ce){var Ie=H[Ce],Se=Ie.n;b.symbolList.push(Se,String(Se),Ce,Se+100,String(Se+100),Ce+"-open"),b.symbolNames[Se]=Ce,b.symbolFuncs[Se]=Ie.f,b.symbolBackOffs[Se]=Ie.backoff||0,Ie.needLine&&(b.symbolNeedLines[Se]=!0),Ie.noDot?b.symbolNoDot[Se]=!0:b.symbolList.push(Se+200,String(Se+200),Ce+"-dot",Se+300,String(Se+300),Ce+"-open-dot"),Ie.noFill&&(b.symbolNoFill[Se]=!0)});var Y=b.symbolNames.length,Z="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";b.symbolNumber=function(Ce){if(p(Ce))Ce=+Ce;else if(typeof Ce=="string"){var Ie=0;Ce.indexOf("-open")>0&&(Ie=100,Ce=Ce.replace("-open","")),Ce.indexOf("-dot")>0&&(Ie+=200,Ce=Ce.replace("-dot","")),Ce=b.symbolNames.indexOf(Ce),Ce>=0&&(Ce+=Ie)}return Ce%100>=Y||Ce>=400?0:Math.floor(Math.max(Ce,0))};function z(Ce,Ie,Se,Be){var rt=Ce%100;return b.symbolFuncs[rt](Ie,Se,Be)+(Ce>=200?Z:"")}var q=u("~f"),X={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};b.gradient=function(Ce,Ie,Se,Be,rt,ht){var Lt=X[Be];return K(Ce,Ie,Se,Lt.type,rt,ht,Lt.start,Lt.stop,!1,Lt.reversed)};function K(Ce,Ie,Se,Be,rt,ht,Lt,Ct,zt,Bt){var Ft=rt.length,nr;Be==="linear"?nr={node:"linearGradient",attrs:{x1:Lt.x,y1:Lt.y,x2:Ct.x,y2:Ct.y,gradientUnits:zt?"userSpaceOnUse":"objectBoundingBox"},reversed:Bt}:Be==="radial"&&(nr={node:"radialGradient",reversed:Bt});for(var _t=new Array(Ft),rr=0;rr<Ft;rr++)nr.reversed?_t[Ft-1-rr]=[q((1-rt[rr][0])*100),rt[rr][1]]:_t[rr]=[q(rt[rr][0]*100),rt[rr][1]];var pr=Ie._fullLayout,Yt="g"+pr._uid+"-"+Se,sr=pr._defs.select(".gradients").selectAll("#"+Yt).data([Be+_t.join(";")],c.identity);sr.exit().remove(),sr.enter().append(nr.node).each(function(){var ze=h.select(this);nr.attrs&&ze.attr(nr.attrs),ze.attr("id",Yt);var Ye=ze.selectAll("stop").data(_t);Ye.exit().remove(),Ye.enter().append("stop"),Ye.each(function($e){var he=v($e[1]);h.select(this).attr({offset:$e[0]+"%","stop-color":g.tinyRGB(he),"stop-opacity":he.getAlpha()})})}),Ce.style(ht,U(Yt,Ie)).style(ht+"-opacity",null),Ce.classed("gradient_filled",!0)}b.pattern=function(Ce,Ie,Se,Be,rt,ht,Lt,Ct,zt,Bt,Ft,nr){var _t=Ie==="legend";Ct&&(zt==="overlay"?(Bt=Ct,Ft=g.contrast(Bt)):(Bt=void 0,Ft=Ct));var rr=Se._fullLayout,pr="p"+rr._uid+"-"+Be,Yt,sr,ze=function(ot,jt,Ut,Gt,Tr){return Gt+(Tr-Gt)*(ot-jt)/(Ut-jt)},Ye,$e,he,je,Ne={},Re=v(Ft),nt=g.tinyRGB(Re),at=Re.getAlpha(),dt=nr*at;switch(rt){case"/":Yt=ht*Math.sqrt(2),sr=ht*Math.sqrt(2),Ye="M-"+Yt/4+","+sr/4+"l"+Yt/2+",-"+sr/2+"M0,"+sr+"L"+Yt+",0M"+Yt/4*3+","+sr/4*5+"l"+Yt/2+",-"+sr/2,$e=Lt*ht,je="path",Ne={d:Ye,opacity:dt,stroke:nt,"stroke-width":$e+"px"};break;case"\\":Yt=ht*Math.sqrt(2),sr=ht*Math.sqrt(2),Ye="M"+Yt/4*3+",-"+sr/4+"l"+Yt/2+","+sr/2+"M0,0L"+Yt+","+sr+"M-"+Yt/4+","+sr/4*3+"l"+Yt/2+","+sr/2,$e=Lt*ht,je="path",Ne={d:Ye,opacity:dt,stroke:nt,"stroke-width":$e+"px"};break;case"x":Yt=ht*Math.sqrt(2),sr=ht*Math.sqrt(2),Ye="M-"+Yt/4+","+sr/4+"l"+Yt/2+",-"+sr/2+"M0,"+sr+"L"+Yt+",0M"+Yt/4*3+","+sr/4*5+"l"+Yt/2+",-"+sr/2+"M"+Yt/4*3+",-"+sr/4+"l"+Yt/2+","+sr/2+"M0,0L"+Yt+","+sr+"M-"+Yt/4+","+sr/4*3+"l"+Yt/2+","+sr/2,$e=ht-ht*Math.sqrt(1-Lt),je="path",Ne={d:Ye,opacity:dt,stroke:nt,"stroke-width":$e+"px"};break;case"|":Yt=ht,sr=ht,je="path",Ye="M"+Yt/2+",0L"+Yt/2+","+sr,$e=Lt*ht,je="path",Ne={d:Ye,opacity:dt,stroke:nt,"stroke-width":$e+"px"};break;case"-":Yt=ht,sr=ht,je="path",Ye="M0,"+sr/2+"L"+Yt+","+sr/2,$e=Lt*ht,je="path",Ne={d:Ye,opacity:dt,stroke:nt,"stroke-width":$e+"px"};break;case"+":Yt=ht,sr=ht,je="path",Ye="M"+Yt/2+",0L"+Yt/2+","+sr+"M0,"+sr/2+"L"+Yt+","+sr/2,$e=ht-ht*Math.sqrt(1-Lt),je="path",Ne={d:Ye,opacity:dt,stroke:nt,"stroke-width":$e+"px"};break;case".":Yt=ht,sr=ht,Lt<Math.PI/4?he=Math.sqrt(Lt*ht*ht/Math.PI):he=ze(Lt,Math.PI/4,1,ht/2,ht/Math.sqrt(2)),je="circle",Ne={cx:Yt/2,cy:sr/2,r:he,opacity:dt,fill:nt};break}var Mt=[rt||"noSh",Bt||"noBg",Ft||"noFg",ht,Lt].join(";"),Nt=rr._defs.select(".patterns").selectAll("#"+pr).data([Mt],c.identity);Nt.exit().remove(),Nt.enter().append("pattern").each(function(){var ot=h.select(this);if(ot.attr({id:pr,width:Yt+"px",height:sr+"px",patternUnits:"userSpaceOnUse",patternTransform:_t?"scale(0.8)":""}),Bt){var jt=v(Bt),Ut=g.tinyRGB(jt),Gt=jt.getAlpha(),Tr=ot.selectAll("rect").data([0]);Tr.exit().remove(),Tr.enter().append("rect").attr({width:Yt+"px",height:sr+"px",fill:Ut,"fill-opacity":Gt})}var Dr=ot.selectAll(je).data([0]);Dr.exit().remove(),Dr.enter().append(je).attr(Ne)}),Ce.style("fill",U(pr,Se)).style("fill-opacity",null),Ce.classed("pattern_filled",!0)},b.initGradients=function(Ce){var Ie=Ce._fullLayout,Se=c.ensureSingle(Ie._defs,"g","gradients");Se.selectAll("linearGradient,radialGradient").remove(),h.select(Ce).selectAll(".gradient_filled").classed("gradient_filled",!1)},b.initPatterns=function(Ce){var Ie=Ce._fullLayout,Se=c.ensureSingle(Ie._defs,"g","patterns");Se.selectAll("pattern").remove(),h.select(Ce).selectAll(".pattern_filled").classed("pattern_filled",!1)},b.getPatternAttr=function(Ce,Ie,Se){return Ce&&c.isArrayOrTypedArray(Ce)?Ie<Ce.length?Ce[Ie]:Se:Ce},b.pointStyle=function(Ce,Ie,Se,Be){if(Ce.size()){var rt=b.makePointStyleFns(Ie);Ce.each(function(ht){b.singlePointStyle(ht,h.select(this),Ie,rt,Se,Be)})}},b.singlePointStyle=function(Ce,Ie,Se,Be,rt,ht){var Lt=Se.marker,Ct=Lt.line;if(ht&&ht.i>=0&&Ce.i===void 0&&(Ce.i=ht.i),Ie.style("opacity",Be.selectedOpacityFn?Be.selectedOpacityFn(Ce):Ce.mo===void 0?Lt.opacity:Ce.mo),Be.ms2mrc){var zt;Ce.ms==="various"||Lt.size==="various"?zt=3:zt=Be.ms2mrc(Ce.ms),Ce.mrc=zt,Be.selectedSizeFn&&(zt=Ce.mrc=Be.selectedSizeFn(Ce));var Bt=b.symbolNumber(Ce.mx||Lt.symbol)||0;Ce.om=Bt%200>=100;var Ft=mt(Ce,Se),nr=B(Ce,Se);Ie.attr("d",z(Bt,zt,Ft,nr))}var _t=!1,rr,pr,Yt;if(Ce.so)Yt=Ct.outlierwidth,pr=Ct.outliercolor,rr=Lt.outliercolor;else{var sr=(Ct||{}).width;Yt=(Ce.mlw+1||sr+1||(Ce.trace?(Ce.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Ce?pr=Ce.mlcc=Be.lineScale(Ce.mlc):c.isArrayOrTypedArray(Ct.color)?pr=g.defaultLine:pr=Ct.color,c.isArrayOrTypedArray(Lt.color)&&(rr=g.defaultLine,_t=!0),"mc"in Ce?rr=Ce.mcc=Be.markerScale(Ce.mc):rr=Lt.color||Lt.colors||"rgba(0,0,0,0)",Be.selectedColorFn&&(rr=Be.selectedColorFn(Ce))}if(Ce.om)Ie.call(g.stroke,rr).style({"stroke-width":(Yt||1)+"px",fill:"none"});else{Ie.style("stroke-width",(Ce.isBlank?0:Yt)+"px");var ze=Lt.gradient,Ye=Ce.mgt;Ye?_t=!0:Ye=ze&&ze.type,c.isArrayOrTypedArray(Ye)&&(Ye=Ye[0],X[Ye]||(Ye=0));var $e=Lt.pattern,he=$e&&b.getPatternAttr($e.shape,Ce.i,"");if(Ye&&Ye!=="none"){var je=Ce.mgc;je?_t=!0:je=ze.color;var Ne=Se.uid;_t&&(Ne+="-"+Ce.i),b.gradient(Ie,rt,Ne,Ye,[[0,je],[1,rr]],"fill")}else if(he){var Re=!1,nt=$e.fgcolor;!nt&&ht&&ht.color&&(nt=ht.color,Re=!0);var at=b.getPatternAttr(nt,Ce.i,ht&&ht.color||null),dt=b.getPatternAttr($e.bgcolor,Ce.i,null),Mt=$e.fgopacity,Nt=b.getPatternAttr($e.size,Ce.i,8),ot=b.getPatternAttr($e.solidity,Ce.i,.3);Re=Re||Ce.mcc||c.isArrayOrTypedArray($e.shape)||c.isArrayOrTypedArray($e.bgcolor)||c.isArrayOrTypedArray($e.fgcolor)||c.isArrayOrTypedArray($e.size)||c.isArrayOrTypedArray($e.solidity);var jt=Se.uid;Re&&(jt+="-"+Ce.i),b.pattern(Ie,"point",rt,jt,he,Nt,ot,Ce.mcc,$e.fillmode,dt,at,Mt)}else c.isArrayOrTypedArray(rr)?g.fill(Ie,rr[Ce.i]):g.fill(Ie,rr);Yt&&g.stroke(Ie,pr)}},b.makePointStyleFns=function(Ce){var Ie={},Se=Ce.marker;return Ie.markerScale=b.tryColorscale(Se,""),Ie.lineScale=b.tryColorscale(Se,"line"),m.traceIs(Ce,"symbols")&&(Ie.ms2mrc=A.isBubble(Ce)?C(Ce):function(){return(Se.size||6)/2}),Ce.selectedpoints&&c.extendFlat(Ie,b.makeSelectedPointStyleFns(Ce)),Ie},b.makeSelectedPointStyleFns=function(Ce){var Ie={},Se=Ce.selected||{},Be=Ce.unselected||{},rt=Ce.marker||{},ht=Se.marker||{},Lt=Be.marker||{},Ct=rt.opacity,zt=ht.opacity,Bt=Lt.opacity,Ft=zt!==void 0,nr=Bt!==void 0;(c.isArrayOrTypedArray(Ct)||Ft||nr)&&(Ie.selectedOpacityFn=function(he){var je=he.mo===void 0?rt.opacity:he.mo;return he.selected?Ft?zt:je:nr?Bt:M*je});var _t=rt.color,rr=ht.color,pr=Lt.color;(rr||pr)&&(Ie.selectedColorFn=function(he){var je=he.mcc||_t;return he.selected?rr||je:pr||je});var Yt=rt.size,sr=ht.size,ze=Lt.size,Ye=sr!==void 0,$e=ze!==void 0;return m.traceIs(Ce,"symbols")&&(Ye||$e)&&(Ie.selectedSizeFn=function(he){var je=he.mrc||Yt/2;return he.selected?Ye?sr/2:je:$e?ze/2:je}),Ie},b.makeSelectedTextStyleFns=function(Ce){var Ie={},Se=Ce.selected||{},Be=Ce.unselected||{},rt=Ce.textfont||{},ht=Se.textfont||{},Lt=Be.textfont||{},Ct=rt.color,zt=ht.color,Bt=Lt.color;return Ie.selectedTextColorFn=function(Ft){var nr=Ft.tc||Ct;return Ft.selected?zt||nr:Bt||(zt?nr:g.addOpacity(nr,M))},Ie},b.selectedPointStyle=function(Ce,Ie){if(!(!Ce.size()||!Ie.selectedpoints)){var Se=b.makeSelectedPointStyleFns(Ie),Be=Ie.marker||{},rt=[];Se.selectedOpacityFn&&rt.push(function(ht,Lt){ht.style("opacity",Se.selectedOpacityFn(Lt))}),Se.selectedColorFn&&rt.push(function(ht,Lt){g.fill(ht,Se.selectedColorFn(Lt))}),Se.selectedSizeFn&&rt.push(function(ht,Lt){var Ct=Lt.mx||Be.symbol||0,zt=Se.selectedSizeFn(Lt);ht.attr("d",z(b.symbolNumber(Ct),zt,mt(Lt,Ie),B(Lt,Ie))),Lt.mrc2=zt}),rt.length&&Ce.each(function(ht){for(var Lt=h.select(this),Ct=0;Ct<rt.length;Ct++)rt[Ct](Lt,ht)})}},b.tryColorscale=function(Ce,Ie){var Se=Ie?c.nestedProperty(Ce,Ie).get():Ce;if(Se){var Be=Se.color;if((Se.colorscale||Se._colorAx)&&c.isArrayOrTypedArray(Be))return w.makeColorScaleFuncFromTrace(Se)}return c.identity};var ee={start:1,end:-1,middle:0,bottom:1,top:-1};function ne(Ce,Ie,Se,Be,rt){var ht=h.select(Ce.node().parentNode),Lt=Ie.indexOf("top")!==-1?"top":Ie.indexOf("bottom")!==-1?"bottom":"middle",Ct=Ie.indexOf("left")!==-1?"end":Ie.indexOf("right")!==-1?"start":"middle",zt=Be?Be/.8+1:0,Bt=(T.lineCount(Ce)-1)*D+1,Ft=ee[Ct]*zt,nr=Se*.75+ee[Lt]*zt+(ee[Lt]-1)*Bt*Se/2;Ce.attr("text-anchor",Ct),rt||ht.attr("transform",o(Ft,nr))}function le(Ce,Ie){var Se=Ce.ts||Ie.textfont.size;return p(Se)&&Se>0?Se:0}b.textPointStyle=function(Ce,Ie,Se){if(Ce.size()){var Be;if(Ie.selectedpoints){var rt=b.makeSelectedTextStyleFns(Ie);Be=rt.selectedTextColorFn}var ht=Ie.texttemplate,Lt=Se._fullLayout;Ce.each(function(Ct){var zt=h.select(this),Bt=ht?c.extractOption(Ct,Ie,"txt","texttemplate"):c.extractOption(Ct,Ie,"tx","text");if(!Bt&&Bt!==0){zt.remove();return}if(ht){var Ft=Ie._module.formatLabels,nr=Ft?Ft(Ct,Ie,Lt):{},_t={};j(_t,Ie,Ct.i);var rr=Ie._meta||{};Bt=c.texttemplateString(Bt,nr,Lt._d3locale,_t,Ct,rr)}var pr=Ct.tp||Ie.textposition,Yt=le(Ct,Ie),sr=Be?Be(Ct):Ct.tc||Ie.textfont.color;zt.call(b.font,{family:Ct.tf||Ie.textfont.family,weight:Ct.tw||Ie.textfont.weight,style:Ct.ty||Ie.textfont.style,variant:Ct.tv||Ie.textfont.variant,textcase:Ct.tC||Ie.textfont.textcase,lineposition:Ct.tE||Ie.textfont.lineposition,shadow:Ct.tS||Ie.textfont.shadow,size:Yt,color:sr}).text(Bt).call(T.convertToTspans,Se).call(ne,pr,Yt,Ct.mrc)})}},b.selectedTextStyle=function(Ce,Ie){if(!(!Ce.size()||!Ie.selectedpoints)){var Se=b.makeSelectedTextStyleFns(Ie);Ce.each(function(Be){var rt=h.select(this),ht=Se.selectedTextColorFn(Be),Lt=Be.tp||Ie.textposition,Ct=le(Be,Ie);g.fill(rt,ht);var zt=m.traceIs(Ie,"bar-like");ne(rt,Lt,Ct,Be.mrc2||Be.mrc,zt)})}};var W=.5;b.smoothopen=function(Ce,Ie){if(Ce.length<3)return"M"+Ce.join("L");var Se="M"+Ce[0],Be=[],rt;for(rt=1;rt<Ce.length-1;rt++)Be.push(Le(Ce[rt-1],Ce[rt],Ce[rt+1],Ie));for(Se+="Q"+Be[0][0]+" "+Ce[1],rt=2;rt<Ce.length-1;rt++)Se+="C"+Be[rt-2][1]+" "+Be[rt-1][0]+" "+Ce[rt];return Se+="Q"+Be[Ce.length-3][1]+" "+Ce[Ce.length-1],Se},b.smoothclosed=function(Ce,Ie){if(Ce.length<3)return"M"+Ce.join("L")+"Z";var Se="M"+Ce[0],Be=Ce.length-1,rt=[Le(Ce[Be],Ce[0],Ce[1],Ie)],ht;for(ht=1;ht<Be;ht++)rt.push(Le(Ce[ht-1],Ce[ht],Ce[ht+1],Ie));for(rt.push(Le(Ce[Be-1],Ce[Be],Ce[0],Ie)),ht=1;ht<=Be;ht++)Se+="C"+rt[ht-1][1]+" "+rt[ht][0]+" "+Ce[ht];return Se+="C"+rt[Be][1]+" "+rt[0][0]+" "+Ce[0]+"Z",Se};var ce,de;function ve(Ce,Ie,Se){return Se&&(Ce=te(Ce)),Ie?be(Ce[1]):pe(Ce[0])}function pe(Ce){var Ie=h.round(Ce,2);return ce=Ie,Ie}function be(Ce){var Ie=h.round(Ce,2);return de=Ie,Ie}function Le(Ce,Ie,Se,Be){var rt=Ce[0]-Ie[0],ht=Ce[1]-Ie[1],Lt=Se[0]-Ie[0],Ct=Se[1]-Ie[1],zt=Math.pow(rt*rt+ht*ht,W/2),Bt=Math.pow(Lt*Lt+Ct*Ct,W/2),Ft=(Bt*Bt*rt-zt*zt*Lt)*Be,nr=(Bt*Bt*ht-zt*zt*Ct)*Be,_t=3*Bt*(zt+Bt),rr=3*zt*(zt+Bt);return[[pe(Ie[0]+(_t&&Ft/_t)),be(Ie[1]+(_t&&nr/_t))],[pe(Ie[0]-(rr&&Ft/rr)),be(Ie[1]-(rr&&nr/rr))]]}var Ae={hv:function(Ce,Ie,Se){return"H"+pe(Ie[0])+"V"+ve(Ie,1,Se)},vh:function(Ce,Ie,Se){return"V"+be(Ie[1])+"H"+ve(Ie,0,Se)},hvh:function(Ce,Ie,Se){return"H"+pe((Ce[0]+Ie[0])/2)+"V"+be(Ie[1])+"H"+ve(Ie,0,Se)},vhv:function(Ce,Ie,Se){return"V"+be((Ce[1]+Ie[1])/2)+"H"+pe(Ie[0])+"V"+ve(Ie,1,Se)}},We=function(Ce,Ie,Se){return"L"+ve(Ie,0,Se)+","+ve(Ie,1,Se)};b.steps=function(Ce){var Ie=Ae[Ce]||We;return function(Se){for(var Be="M"+pe(Se[0][0])+","+be(Se[0][1]),rt=Se.length,ht=1;ht<rt;ht++)Be+=Ie(Se[ht-1],Se[ht],ht===rt-1);return Be}};function te(Ce,Ie){var Se=Ce.backoff,Be=Ce.trace,rt=Ce.d,ht=Ce.i;if(Se&&Be&&Be.marker&&Be.marker.angle%360===0&&Be.line&&Be.line.shape!=="spline"){var Lt=c.isArrayOrTypedArray(Se),Ct=Ce,zt=Ie?Ie[0]:ce||0,Bt=Ie?Ie[1]:de||0,Ft=Ct[0],nr=Ct[1],_t=Ft-zt,rr=nr-Bt,pr=Math.atan2(rr,_t),Yt=Lt?Se[ht]:Se;if(Yt==="auto"){var sr=Ct.i;Be.type==="scatter"&&sr--;var ze=Ct.marker,Ye=ze.symbol;c.isArrayOrTypedArray(Ye)&&(Ye=Ye[sr]);var $e=ze.size;c.isArrayOrTypedArray($e)&&($e=$e[sr]),Yt=ze?b.symbolBackOffs[b.symbolNumber(Ye)]*$e:0,Yt+=b.getMarkerStandoff(rt[sr],Be)||0}var he=Ft-Yt*Math.cos(pr),je=nr-Yt*Math.sin(pr);(he<=Ft&&he>=zt||he>=Ft&&he<=zt)&&(je<=nr&&je>=Bt||je>=nr&&je<=Bt)&&(Ce=[he,je])}return Ce}b.applyBackoff=te,b.makeTester=function(){var Ce=c.ensureSingleById(h.select("body"),"svg","js-plotly-tester",function(Se){Se.attr(y.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Ie=c.ensureSingle(Ce,"path","js-reference-point",function(Se){Se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});b.tester=Ce,b.testref=Ie},b.savedBBoxes={};var ae=0,G=1e4;b.bBox=function(Ce,Ie,Se){Se||(Se=Q(Ce));var Be;if(Se){if(Be=b.savedBBoxes[Se],Be)return c.extendFlat({},Be)}else if(Ce.childNodes.length===1){var rt=Ce.childNodes[0];if(Se=Q(rt),Se){var ht=+rt.getAttribute("x")||0,Lt=+rt.getAttribute("y")||0,Ct=rt.getAttribute("transform");if(!Ct){var zt=b.bBox(rt,!1,Se);return ht&&(zt.left+=ht,zt.right+=ht),Lt&&(zt.top+=Lt,zt.bottom+=Lt),zt}if(Se+="~"+ht+"~"+Lt+"~"+Ct,Be=b.savedBBoxes[Se],Be)return c.extendFlat({},Be)}}var Bt,Ft;Ie?Bt=Ce:(Ft=b.tester.node(),Bt=Ce.cloneNode(!0),Ft.appendChild(Bt)),h.select(Bt).attr("transform",null).call(T.positionText,0,0);var nr=Bt.getBoundingClientRect(),_t=b.testref.node().getBoundingClientRect();Ie||Ft.removeChild(Bt);var rr={height:nr.height,width:nr.width,left:nr.left-_t.left,top:nr.top-_t.top,right:nr.right-_t.left,bottom:nr.bottom-_t.top};return ae>=G&&(b.savedBBoxes={},ae=0),Se&&(b.savedBBoxes[Se]=rr),ae++,c.extendFlat({},rr)};function Q(Ce){var Ie=Ce.getAttribute("data-unformatted");if(Ie!==null)return Ie+Ce.getAttribute("data-math")+Ce.getAttribute("text-anchor")+Ce.getAttribute("style")}b.setClipUrl=function(Ce,Ie,Se){Ce.attr("clip-path",U(Ie,Se))};function U(Ce,Ie){if(!Ce)return null;var Se=Ie._context,Be=Se._exportedPlot?"":Se._baseUrl||"";return Be?"url('"+Be+"#"+Ce+"')":"url(#"+Ce+")"}b.getTranslate=function(Ce){var Ie=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Se=Ce.attr?"attr":"getAttribute",Be=Ce[Se]("transform")||"",rt=Be.replace(Ie,function(ht,Lt,Ct){return[Lt,Ct].join(" ")}).split(" ");return{x:+rt[0]||0,y:+rt[1]||0}},b.setTranslate=function(Ce,Ie,Se){var Be=/(\btranslate\(.*?\);?)/,rt=Ce.attr?"attr":"getAttribute",ht=Ce.attr?"attr":"setAttribute",Lt=Ce[rt]("transform")||"";return Ie=Ie||0,Se=Se||0,Lt=Lt.replace(Be,"").trim(),Lt+=o(Ie,Se),Lt=Lt.trim(),Ce[ht]("transform",Lt),Lt},b.getScale=function(Ce){var Ie=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Se=Ce.attr?"attr":"getAttribute",Be=Ce[Se]("transform")||"",rt=Be.replace(Ie,function(ht,Lt,Ct){return[Lt,Ct].join(" ")}).split(" ");return{x:+rt[0]||1,y:+rt[1]||1}},b.setScale=function(Ce,Ie,Se){var Be=/(\bscale\(.*?\);?)/,rt=Ce.attr?"attr":"getAttribute",ht=Ce.attr?"attr":"setAttribute",Lt=Ce[rt]("transform")||"";return Ie=Ie||1,Se=Se||1,Lt=Lt.replace(Be,"").trim(),Lt+="scale("+Ie+","+Se+")",Lt=Lt.trim(),Ce[ht]("transform",Lt),Lt};var re=/\s*sc.*/;b.setPointGroupScale=function(Ce,Ie,Se){if(Ie=Ie||1,Se=Se||1,!!Ce){var Be=Ie===1&&Se===1?"":"scale("+Ie+","+Se+")";Ce.each(function(){var rt=(this.getAttribute("transform")||"").replace(re,"");rt+=Be,rt=rt.trim(),this.setAttribute("transform",rt)})}};var R=/translate\([^)]*\)\s*$/;b.setTextPointsScale=function(Ce,Ie,Se){Ce&&Ce.each(function(){var Be,rt=h.select(this),ht=rt.select("text");if(ht.node()){var Lt=parseFloat(ht.attr("x")||0),Ct=parseFloat(ht.attr("y")||0),zt=(rt.attr("transform")||"").match(R);Ie===1&&Se===1?Be=[]:Be=[o(Lt,Ct),"scale("+Ie+","+Se+")",o(-Lt,-Ct)],zt&&Be.push(zt),rt.attr("transform",Be.join(""))}})};function B(Ce,Ie){var Se;return Ce&&(Se=Ce.mf),Se===void 0&&(Se=Ie.marker&&Ie.marker.standoff||0),!Ie._geo&&!Ie._xA?-Se:Se}b.getMarkerStandoff=B;var oe=Math.atan2,ie=Math.cos,xe=Math.sin;function _e(Ce,Ie){var Se=Ie[0],Be=Ie[1];return[Se*ie(Ce)-Be*xe(Ce),Se*xe(Ce)+Be*ie(Ce)]}var ke,Pe,Ge,Je,yt,lt;function mt(Ce,Ie){var Se=Ce.ma;Se===void 0&&(Se=Ie.marker.angle,(!Se||c.isArrayOrTypedArray(Se))&&(Se=0));var Be,rt,ht=Ie.marker.angleref;if(ht==="previous"||ht==="north"){if(Ie._geo){var Lt=Ie._geo.project(Ce.lonlat);Be=Lt[0],rt=Lt[1]}else{var Ct=Ie._xA,zt=Ie._yA;if(Ct&&zt)Be=Ct.c2p(Ce.x),rt=zt.c2p(Ce.y);else return 90}if(Ie._geo){var Bt=Ce.lonlat[0],Ft=Ce.lonlat[1],nr=Ie._geo.project([Bt,Ft+1e-5]),_t=Ie._geo.project([Bt+1e-5,Ft]),rr=oe(_t[1]-rt,_t[0]-Be),pr=oe(nr[1]-rt,nr[0]-Be),Yt;if(ht==="north")Yt=Se/180*Math.PI;else if(ht==="previous"){var sr=Bt/180*Math.PI,ze=Ft/180*Math.PI,Ye=ke/180*Math.PI,$e=Pe/180*Math.PI,he=Ye-sr,je=ie($e)*xe(he),Ne=xe($e)*ie(ze)-ie($e)*xe(ze)*ie(he);Yt=-oe(je,Ne)-Math.PI,ke=Bt,Pe=Ft}var Re=_e(rr,[ie(Yt),0]),nt=_e(pr,[xe(Yt),0]);Se=oe(Re[1]+nt[1],Re[0]+nt[0])/Math.PI*180,ht==="previous"&&!(lt===Ie.uid&&Ce.i===yt+1)&&(Se=null)}if(ht==="previous"&&!Ie._geo)if(lt===Ie.uid&&Ce.i===yt+1&&p(Be)&&p(rt)){var at=Be-Ge,dt=rt-Je,Mt=Ie.line&&Ie.line.shape||"",Nt=Mt.slice(Mt.length-1);Nt==="h"&&(dt=0),Nt==="v"&&(at=0),Se+=oe(dt,at)/Math.PI*180+90}else Se=null}return Ge=Be,Je=rt,yt=Ce.i,lt=Ie.uid,Se}b.getMarkerAngle=mt}}),pc=i({"src/components/titles/index.js"(V,$){var h=f(),c=fe(),u=xi(),p=xn(),v=_r(),m=v.strTranslate,g=oi(),w=ut(),o=ia(),T=qt(),y=na().OPPOSITE_SIDE,k=/ [XY][0-9]* /,D=1.6,M=1.6;function A(C,j,b){var S=C._fullLayout,L=b.propContainer,F=b.propName,P=b.placeholder,J=b.traceIndex,H=b.avoid||{},Y=b.attributes,Z=b.transform,z=b.containerGroup,q=1,X=L.title,K=(X&&X.text?X.text:"").trim(),ee=!1,ne=X&&X.font?X.font:{},le=ne.family,W=ne.size,ce=ne.color,de=ne.weight,ve=ne.style,pe=ne.variant,be=ne.textcase,Le=ne.lineposition,Ae=ne.shadow,We=b.subtitlePropName,te=!!We,ae=b.subtitlePlaceholder,G=(L.title||{}).subtitle||{text:"",font:{}},Q=G.text.trim(),U=!1,re=1,R=G.font,B=R.family,oe=R.size,ie=R.color,xe=R.weight,_e=R.style,ke=R.variant,Pe=R.textcase,Ge=R.lineposition,Je=R.shadow,yt;F==="title.text"?yt="titleText":F.indexOf("axis")!==-1?yt="axisTitleText":F.indexOf("colorbar"!==-1)&&(yt="colorbarTitleText");var lt=C._context.edits[yt];function mt(_t,rr){return _t===void 0||rr===void 0?!1:_t.replace(k," % ")===rr.replace(k," % ")}K===""?q=0:mt(K,P)&&(lt||(K=""),q=.2,ee=!0),te&&(Q===""?re=0:mt(Q,ae)&&(lt||(Q=""),re=.2,U=!0)),b._meta?K=v.templateString(K,b._meta):S._meta&&(K=v.templateString(K,S._meta));var Ce=K||Q||lt,Ie;z||(z=v.ensureSingle(S._infolayer,"g","g-"+j),Ie=S._hColorbarMoveTitle);var Se=z.selectAll("text."+j).data(Ce?[0]:[]);Se.enter().append("text"),Se.text(K).attr("class",j),Se.exit().remove();var Be=null,rt=j+"-subtitle",ht=Q||lt;if(te&&ht&&(Be=z.selectAll("text."+rt).data(ht?[0]:[]),Be.enter().append("text"),Be.text(Q).attr("class",rt),Be.exit().remove()),!Ce)return z;function Lt(_t,rr){v.syncOrAsync([Ct,zt],{title:_t,subtitle:rr})}function Ct(_t){var rr=_t.title,pr=_t.subtitle,Yt;!Z&&Ie&&(Z={}),Z?(Yt="",Z.rotate&&(Yt+="rotate("+[Z.rotate,Y.x,Y.y]+")"),(Z.offset||Ie)&&(Yt+=m(0,(Z.offset||0)-(Ie||0)))):Yt=null,rr.attr("transform",Yt);function sr(Ne){if(Ne){var Re=h.select(Ne.node().parentNode).select("."+rt);if(!Re.empty()){var nt=Ne.node().getBBox();if(nt.height){var at=nt.y+nt.height+D*oe;Re.attr("y",at)}}}}if(rr.style("opacity",q*w.opacity(ce)).call(g.font,{color:w.rgb(ce),size:h.round(W,2),family:le,weight:de,style:ve,variant:pe,textcase:be,shadow:Ae,lineposition:Le}).attr(Y).call(o.convertToTspans,C,sr),pr){var ze=z.select("."+j+"-math-group"),Ye=rr.node().getBBox(),$e=ze.node()?ze.node().getBBox():void 0,he=$e?$e.y+$e.height+D*oe:Ye.y+Ye.height+M*oe,je=v.extendFlat({},Y,{y:he});pr.attr("transform",Yt),pr.style("opacity",re*w.opacity(ie)).call(g.font,{color:w.rgb(ie),size:h.round(oe,2),family:B,weight:xe,style:_e,variant:ke,textcase:Pe,shadow:Je,lineposition:Ge}).attr(je).call(o.convertToTspans,C)}return u.previousPromises(C)}function zt(_t){var rr=_t.title,pr=h.select(rr.node().parentNode);if(H&&H.selection&&H.side&&K){pr.attr("transform",null);var Yt=y[H.side],sr=H.side==="left"||H.side==="top"?-1:1,ze=c(H.pad)?H.pad:2,Ye=g.bBox(pr.node()),$e={t:0,b:0,l:0,r:0},he=C._fullLayout._reservedMargin;for(var je in he)for(var Ne in he[je]){var Re=he[je][Ne];$e[Ne]=Math.max($e[Ne],Re)}var nt={left:$e.l,top:$e.t,right:S.width-$e.r,bottom:S.height-$e.b},at=H.maxShift||sr*(nt[H.side]-Ye[H.side]),dt=0;if(at<0)dt=at;else{var Mt=H.offsetLeft||0,Nt=H.offsetTop||0;Ye.left-=Mt,Ye.right-=Mt,Ye.top-=Nt,Ye.bottom-=Nt,H.selection.each(function(){var jt=g.bBox(this);v.bBoxIntersect(Ye,jt,ze)&&(dt=Math.max(dt,sr*(jt[H.side]-Ye[Yt])+ze))}),dt=Math.min(at,dt),L._titleScoot=Math.abs(dt)}if(dt>0||at<0){var ot={left:[-dt,0],right:[dt,0],top:[0,-dt],bottom:[0,dt]}[H.side];pr.attr("transform",m(ot[0],ot[1]))}}}Se.call(Lt,Be);function Bt(_t,rr){_t.text(rr).on("mouseover.opacity",function(){h.select(this).transition().duration(T.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){h.select(this).transition().duration(T.HIDE_PLACEHOLDER).style("opacity",0)})}if(lt&&(K?Se.on(".opacity",null):(Bt(Se,P),ee=!0),Se.call(o.makeEditable,{gd:C}).on("edit",function(_t){J!==void 0?p.call("_guiRestyle",C,F,_t,J):p.call("_guiRelayout",C,F,_t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Lt)}).on("input",function(_t){this.text(_t||" ").call(o.positionText,Y.x,Y.y)}),te)){if(te&&!K){var Ft=Se.node().getBBox(),nr=Ft.y+Ft.height+M*oe;Be.attr("y",nr)}Q?Be.on(".opacity",null):(Bt(Be,ae),U=!0),Be.call(o.makeEditable,{gd:C}).on("edit",function(_t){p.call("_guiRelayout",C,"title.subtitle.text",_t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Lt)}).on("input",function(_t){this.text(_t||" ").call(o.positionText,Be.attr("x"),Be.attr("y"))})}return Se.classed("js-placeholder",ee),Be&&Be.classed("js-placeholder",U),z}$.exports={draw:A,SUBTITLE_PADDING_EM:M,SUBTITLE_PADDING_MATHJAX_EM:D}}}),Qc=i({"src/plots/cartesian/set_convert.js"(V,$){var h=f(),c=N().utcFormat,u=_r(),p=u.numberFormat,v=fe(),m=u.cleanNumber,g=u.ms2DateTime,w=u.dateTime2ms,o=u.ensureNumber,T=u.isArrayOrTypedArray,y=Te(),k=y.FP_SAFE,D=y.BADNUM,M=y.LOG_CLIP,A=y.ONEWEEK,C=y.ONEDAY,j=y.ONEHOUR,b=y.ONEMIN,S=y.ONESEC,L=Ur(),F=Yr(),P=F.HOUR_PATTERN,J=F.WEEKDAY_PATTERN;function H(Z){return Math.pow(10,Z)}function Y(Z){return Z!=null}$.exports=function(z,q){q=q||{};var X=z._id||"x",K=X.charAt(0);function ee(Q,U){if(Q>0)return Math.log(Q)/Math.LN10;if(Q<=0&&U&&z.range&&z.range.length===2){var re=z.range[0],R=z.range[1];return .5*(re+R-2*M*Math.abs(re-R))}else return D}function ne(Q,U,re,R){if((R||{}).msUTC&&v(Q))return+Q;var B=w(Q,re||z.calendar);if(B===D)if(v(Q)){Q=+Q;var oe=Math.floor(u.mod(Q+.05,1)*10),ie=Math.round(Q-oe/10);B=w(new Date(ie))+oe/10}else return D;return B}function le(Q,U,re){return g(Q,U,re||z.calendar)}function W(Q){return z._categories[Math.round(Q)]}function ce(Q){if(Y(Q)){if(z._categoriesMap===void 0&&(z._categoriesMap={}),z._categoriesMap[Q]!==void 0)return z._categoriesMap[Q];z._categories.push(typeof Q=="number"?String(Q):Q);var U=z._categories.length-1;return z._categoriesMap[Q]=U,U}return D}function de(Q,U){for(var re=new Array(U),R=0;R<U;R++){var B=(Q[0]||[])[R],oe=(Q[1]||[])[R];re[R]=ve([B,oe])}return re}function ve(Q){if(z._categoriesMap)return z._categoriesMap[Q]}function pe(Q){var U=ve(Q);if(U!==void 0)return U;if(v(Q))return+Q}function be(Q){return v(Q)?+Q:ve(Q)}function Le(Q,U,re){return h.round(re+U*Q,2)}function Ae(Q,U,re){return(Q-re)/U}var We=function(U){return v(U)?Le(U,z._m,z._b):D},te=function(Q){return Ae(Q,z._m,z._b)};if(z.rangebreaks){var ae=K==="y";We=function(Q){if(!v(Q))return D;var U=z._rangebreaks.length;if(!U)return Le(Q,z._m,z._b);var re=ae;z.range[0]>z.range[1]&&(re=!re);for(var R=re?-1:1,B=R*Q,oe=0,ie=0;ie<U;ie++){var xe=R*z._rangebreaks[ie].min,_e=R*z._rangebreaks[ie].max;if(B<xe)break;if(B>_e)oe=ie+1;else{oe=B<(xe+_e)/2?ie:ie+1;break}}var ke=z._B[oe]||0;return isFinite(ke)?Le(Q,z._m2,ke):0},te=function(Q){var U=z._rangebreaks.length;if(!U)return Ae(Q,z._m,z._b);for(var re=0,R=0;R<U&&!(Q<z._rangebreaks[R].pmin);R++)Q>z._rangebreaks[R].pmax&&(re=R+1);return Ae(Q,z._m2,z._B[re])}}z.c2l=z.type==="log"?ee:o,z.l2c=z.type==="log"?H:o,z.l2p=We,z.p2l=te,z.c2p=z.type==="log"?function(Q,U){return We(ee(Q,U))}:We,z.p2c=z.type==="log"?function(Q){return H(te(Q))}:te,["linear","-"].indexOf(z.type)!==-1?(z.d2r=z.r2d=z.d2c=z.r2c=z.d2l=z.r2l=m,z.c2d=z.c2r=z.l2d=z.l2r=o,z.d2p=z.r2p=function(Q){return z.l2p(m(Q))},z.p2d=z.p2r=te,z.cleanPos=o):z.type==="log"?(z.d2r=z.d2l=function(Q,U){return ee(m(Q),U)},z.r2d=z.r2c=function(Q){return H(m(Q))},z.d2c=z.r2l=m,z.c2d=z.l2r=o,z.c2r=ee,z.l2d=H,z.d2p=function(Q,U){return z.l2p(z.d2r(Q,U))},z.p2d=function(Q){return H(te(Q))},z.r2p=function(Q){return z.l2p(m(Q))},z.p2r=te,z.cleanPos=o):z.type==="date"?(z.d2r=z.r2d=u.identity,z.d2c=z.r2c=z.d2l=z.r2l=ne,z.c2d=z.c2r=z.l2d=z.l2r=le,z.d2p=z.r2p=function(Q,U,re){return z.l2p(ne(Q,0,re))},z.p2d=z.p2r=function(Q,U,re){return le(te(Q),U,re)},z.cleanPos=function(Q){return u.cleanDate(Q,D,z.calendar)}):z.type==="category"?(z.d2c=z.d2l=ce,z.r2d=z.c2d=z.l2d=W,z.d2r=z.d2l_noadd=pe,z.r2c=function(Q){var U=be(Q);return U!==void 0?U:z.fraction2r(.5)},z.l2r=z.c2r=o,z.r2l=be,z.d2p=function(Q){return z.l2p(z.r2c(Q))},z.p2d=function(Q){return W(te(Q))},z.r2p=z.d2p,z.p2r=te,z.cleanPos=function(Q){return typeof Q=="string"&&Q!==""?Q:o(Q)}):z.type==="multicategory"&&(z.r2d=z.c2d=z.l2d=W,z.d2r=z.d2l_noadd=pe,z.r2c=function(Q){var U=pe(Q);return U!==void 0?U:z.fraction2r(.5)},z.r2c_just_indices=ve,z.l2r=z.c2r=o,z.r2l=pe,z.d2p=function(Q){return z.l2p(z.r2c(Q))},z.p2d=function(Q){return W(te(Q))},z.r2p=z.d2p,z.p2r=te,z.cleanPos=function(Q){return Array.isArray(Q)||typeof Q=="string"&&Q!==""?Q:o(Q)},z.setupMultiCategory=function(Q){var U=z._traceIndices,re,R,B=z._matchGroup;if(B&&z._categories.length===0){for(var oe in B)if(oe!==X){var ie=q[L.id2name(oe)];U=U.concat(ie._traceIndices)}}var xe=[[0,{}],[0,{}]],_e=[];for(re=0;re<U.length;re++){var ke=Q[U[re]];if(K in ke){var Pe=ke[K],Ge=ke._length||u.minRowLength(Pe);if(T(Pe[0])&&T(Pe[1]))for(R=0;R<Ge;R++){var Je=Pe[0][R],yt=Pe[1][R];Y(Je)&&Y(yt)&&(_e.push([Je,yt]),Je in xe[0][1]||(xe[0][1][Je]=xe[0][0]++),yt in xe[1][1]||(xe[1][1][yt]=xe[1][0]++))}}}for(_e.sort(function(lt,mt){var Ce=xe[0][1],Ie=Ce[lt[0]]-Ce[mt[0]];if(Ie)return Ie;var Se=xe[1][1];return Se[lt[1]]-Se[mt[1]]}),re=0;re<_e.length;re++)ce(_e[re])}),z.fraction2r=function(Q){var U=z.r2l(z.range[0]),re=z.r2l(z.range[1]);return z.l2r(U+Q*(re-U))},z.r2fraction=function(Q){var U=z.r2l(z.range[0]),re=z.r2l(z.range[1]);return(z.r2l(Q)-U)/(re-U)},z.limitRange=function(Q){var U=z.minallowed,re=z.maxallowed;if(!(U===void 0&&re===void 0)){Q||(Q="range");var R=u.nestedProperty(z,Q).get(),B=u.simpleMap(R,z.r2l),oe=B[1]<B[0];oe&&B.reverse();var ie=u.simpleMap([U,re],z.r2l);if(U!==void 0&&B[0]<ie[0]&&(R[oe?1:0]=U),re!==void 0&&B[1]>ie[1]&&(R[oe?0:1]=re),R[0]===R[1]){var xe=z.l2r(U),_e=z.l2r(re);if(U!==void 0){var ke=xe+1;re!==void 0&&(ke=Math.min(ke,_e)),R[oe?1:0]=ke}if(re!==void 0){var Pe=_e+1;U!==void 0&&(Pe=Math.max(Pe,xe)),R[oe?0:1]=Pe}}}},z.cleanRange=function(Q,U){z._cleanRange(Q,U),z.limitRange(Q)},z._cleanRange=function(Q,U){U||(U={}),Q||(Q="range");var re=u.nestedProperty(z,Q).get(),R,B;if(z.type==="date"?B=u.dfltRange(z.calendar):K==="y"?B=F.DFLTRANGEY:z._name==="realaxis"?B=[0,1]:B=U.dfltRange||F.DFLTRANGEX,B=B.slice(),(z.rangemode==="tozero"||z.rangemode==="nonnegative")&&(B[0]=0),!re||re.length!==2){u.nestedProperty(z,Q).set(B);return}var oe=re[0]===null,ie=re[1]===null;for(z.type==="date"&&!z.autorange&&(re[0]=u.cleanDate(re[0],D,z.calendar),re[1]=u.cleanDate(re[1],D,z.calendar)),R=0;R<2;R++)if(z.type==="date"){if(!u.isDateTime(re[R],z.calendar)){z[Q]=B;break}if(z.r2l(re[0])===z.r2l(re[1])){var xe=u.constrain(z.r2l(re[0]),u.MIN_MS+1e3,u.MAX_MS-1e3);re[0]=z.l2r(xe-1e3),re[1]=z.l2r(xe+1e3);break}}else{if(!v(re[R]))if(!(oe||ie)&&v(re[1-R]))re[R]=re[1-R]*(R?10:.1);else{z[Q]=B;break}if(re[R]<-k?re[R]=-k:re[R]>k&&(re[R]=k),re[0]===re[1]){var _e=Math.max(1,Math.abs(re[0]*1e-6));re[0]-=_e,re[1]+=_e}}},z.setScale=function(Q){var U=q._size;if(z.overlaying){var re=L.getFromId({_fullLayout:q},z.overlaying);z.domain=re.domain}var R=Q&&z._r?"_r":"range",B=z.calendar;z.cleanRange(R);var oe=z.r2l(z[R][0],B),ie=z.r2l(z[R][1],B),xe=K==="y";if(xe?(z._offset=U.t+(1-z.domain[1])*U.h,z._length=U.h*(z.domain[1]-z.domain[0]),z._m=z._length/(oe-ie),z._b=-z._m*ie):(z._offset=U.l+z.domain[0]*U.w,z._length=U.w*(z.domain[1]-z.domain[0]),z._m=z._length/(ie-oe),z._b=-z._m*oe),z._rangebreaks=[],z._lBreaks=0,z._m2=0,z._B=[],z.rangebreaks){var _e,ke;if(z._rangebreaks=z.locateBreaks(Math.min(oe,ie),Math.max(oe,ie)),z._rangebreaks.length){for(_e=0;_e<z._rangebreaks.length;_e++)ke=z._rangebreaks[_e],z._lBreaks+=Math.abs(ke.max-ke.min);var Pe=xe;oe>ie&&(Pe=!Pe),Pe&&z._rangebreaks.reverse();var Ge=Pe?-1:1;for(z._m2=Ge*z._length/(Math.abs(ie-oe)-z._lBreaks),z._B.push(-z._m2*(xe?ie:oe)),_e=0;_e<z._rangebreaks.length;_e++)ke=z._rangebreaks[_e],z._B.push(z._B[z._B.length-1]-Ge*z._m2*(ke.max-ke.min));for(_e=0;_e<z._rangebreaks.length;_e++)ke=z._rangebreaks[_e],ke.pmin=We(ke.min),ke.pmax=We(ke.max)}}if(!isFinite(z._m)||!isFinite(z._b)||z._length<0)throw q._replotting=!1,new Error("Something went wrong with axis scaling")},z.maskBreaks=function(Q){var U=z.rangebreaks||[],re,R,B,oe,ie;U._cachedPatterns||(U._cachedPatterns=U.map(function(Ce){return Ce.enabled&&Ce.bounds?u.simpleMap(Ce.bounds,Ce.pattern?m:z.d2c):null})),U._cachedValues||(U._cachedValues=U.map(function(Ce){return Ce.enabled&&Ce.values?u.simpleMap(Ce.values,z.d2c).sort(u.sorterAsc):null}));for(var xe=0;xe<U.length;xe++){var _e=U[xe];if(_e.enabled){if(_e.bounds){var ke=_e.pattern;switch(re=U._cachedPatterns[xe],R=re[0],B=re[1],ke){case J:ie=new Date(Q),oe=ie.getUTCDay(),R>B&&(B+=7,oe<R&&(oe+=7));break;case P:ie=new Date(Q);var Pe=ie.getUTCHours(),Ge=ie.getUTCMinutes(),Je=ie.getUTCSeconds(),yt=ie.getUTCMilliseconds();oe=Pe+(Ge/60+Je/3600+yt/36e5),R>B&&(B+=24,oe<R&&(oe+=24));break;case"":oe=Q;break}if(oe>=R&&oe<B)return D}else for(var lt=U._cachedValues[xe],mt=0;mt<lt.length;mt++)if(R=lt[mt],B=R+_e.dvalue,Q>=R&&Q<B)return D}}return Q},z.locateBreaks=function(Q,U){var re,R,B,oe,ie=[];if(!z.rangebreaks)return ie;var xe=z.rangebreaks.slice().sort(function(Se,Be){return Se.pattern===J&&Be.pattern===P?-1:Be.pattern===J&&Se.pattern===P?1:0}),_e=function(Se,Be){if(Se=u.constrain(Se,Q,U),Be=u.constrain(Be,Q,U),Se!==Be){for(var rt=!0,ht=0;ht<ie.length;ht++){var Lt=ie[ht];Se<Lt.max&&Be>=Lt.min&&(Se<Lt.min&&(Lt.min=Se),Be>Lt.max&&(Lt.max=Be),rt=!1)}rt&&ie.push({min:Se,max:Be})}};for(re=0;re<xe.length;re++){var ke=xe[re];if(ke.enabled)if(ke.bounds){var Pe=Q,Ge=U;ke.pattern&&(Pe=Math.floor(Pe)),R=u.simpleMap(ke.bounds,ke.pattern?m:z.r2l),B=R[0],oe=R[1];var Je=new Date(Pe),yt,lt;switch(ke.pattern){case J:lt=A,yt=((oe<B?7:0)+(oe-B))*C,Pe+=B*C-(Je.getUTCDay()*C+Je.getUTCHours()*j+Je.getUTCMinutes()*b+Je.getUTCSeconds()*S+Je.getUTCMilliseconds());break;case P:lt=C,yt=((oe<B?24:0)+(oe-B))*j,Pe+=B*j-(Je.getUTCHours()*j+Je.getUTCMinutes()*b+Je.getUTCSeconds()*S+Je.getUTCMilliseconds());break;default:Pe=Math.min(R[0],R[1]),Ge=Math.max(R[0],R[1]),lt=Ge-Pe,yt=lt}for(var mt=Pe;mt<Ge;mt+=lt)_e(mt,mt+yt)}else for(var Ce=u.simpleMap(ke.values,z.d2c),Ie=0;Ie<Ce.length;Ie++)B=Ce[Ie],oe=B+ke.dvalue,_e(B,oe)}return ie.sort(function(Se,Be){return Se.min-Be.min}),ie},z.makeCalcdata=function(Q,U,re){var R,B,oe,ie,xe=z.type,_e=xe==="date"&&Q[U+"calendar"];if(U in Q){if(R=Q[U],ie=Q._length||u.minRowLength(R),u.isTypedArray(R)&&(xe==="linear"||xe==="log")){if(ie===R.length)return R;if(R.subarray)return R.subarray(0,ie)}if(xe==="multicategory")return de(R,ie);for(B=new Array(ie),oe=0;oe<ie;oe++)B[oe]=z.d2c(R[oe],0,_e,re)}else{var ke=U+"0"in Q?z.d2c(Q[U+"0"],0,_e):0,Pe=Q["d"+U]?Number(Q["d"+U]):1;for(R=Q[{x:"y",y:"x"}[U]],ie=Q._length||R.length,B=new Array(ie),oe=0;oe<ie;oe++)B[oe]=ke+oe*Pe}if(z.rangebreaks)for(oe=0;oe<ie;oe++)B[oe]=z.maskBreaks(B[oe]);return B},z.isValidRange=function(Q,U){return Array.isArray(Q)&&Q.length===2&&(U&&Q[0]===null||v(z.r2l(Q[0])))&&(U&&Q[1]===null||v(z.r2l(Q[1])))},z.getAutorangeDflt=function(Q,U){var re=!z.isValidRange(Q,"nullOk");return re&&U&&U.reverseDflt?re="reversed":Q&&(Q[0]===null&&Q[1]===null?re=!0:Q[0]===null&&Q[1]!==null?re="min":Q[0]!==null&&Q[1]===null&&(re="max")),re},z.isReversed=function(){var Q=z.autorange;return Q==="reversed"||Q==="min reversed"||Q==="max reversed"},z.isPtWithinRange=function(Q,U){var re=z.c2l(Q[K],null,U),R=z.r2l(z.range[0]),B=z.r2l(z.range[1]);return R<B?R<=re&&re<=B:B<=re&&re<=R},z._emptyCategories=function(){z._categories=[],z._categoriesMap={}},z.clearCalc=function(){var Q=z._matchGroup;if(Q){var U=null,re=null;for(var R in Q){var B=q[L.id2name(R)];if(B._categories){U=B._categories,re=B._categoriesMap;break}}U&&re?(z._categories=U,z._categoriesMap=re):z._emptyCategories()}else z._emptyCategories();if(z._initialCategories)for(var oe=0;oe<z._initialCategories.length;oe++)ce(z._initialCategories[oe])},z.sortByInitialCategories=function(){var Q=[];if(z._emptyCategories(),z._initialCategories)for(var U=0;U<z._initialCategories.length;U++)ce(z._initialCategories[U]);Q=Q.concat(z._traceIndices);var re=z._matchGroup;for(var R in re)if(X!==R){var B=q[L.id2name(R)];B._categories=z._categories,B._categoriesMap=z._categoriesMap,Q=Q.concat(B._traceIndices)}return Q};var G=q._d3locale;z.type==="date"&&(z._dateFormat=G?G.timeFormat:c,z._extraFormat=q._extraFormat),z._separators=q.separators,z._numFormat=G?G.numberFormat:p,delete z._minDtick,delete z._forceTick0}}}),Ku=i({"src/plots/cartesian/axis_autotype.js"(V,$){var h=fe(),c=_r(),u=Te().BADNUM,p=c.isArrayOrTypedArray,v=c.isDateTime,m=c.cleanNumber,g=Math.round;$.exports=function(A,C,j){var b=A,S=j.noMultiCategory;if(p(b)&&!b.length)return"-";if(!S&&D(b))return"multicategory";if(S&&Array.isArray(b[0])){for(var L=[],F=0;F<b.length;F++)if(p(b[F]))for(var P=0;P<b[F].length;P++)L.push(b[F][P]);b=L}if(T(b,C))return"date";var J=j.autotypenumbers!=="strict";return k(b,J)?"category":o(b,J)?"linear":"-"};function w(M,A){return A?h(M):typeof M=="number"}function o(M,A){for(var C=M.length,j=0;j<C;j++)if(w(M[j],A))return!0;return!1}function T(M,A){for(var C=M.length,j=y(C),b=0,S=0,L={},F=0;F<C;F+=j){var P=g(F),J=M[P],H=String(J);L[H]||(L[H]=1,v(J,A)&&b++,h(J)&&S++)}return b>S*2}function y(M){return Math.max(1,(M-1)/1e3)}function k(M,A){for(var C=M.length,j=y(C),b=0,S=0,L={},F=0;F<C;F+=j){var P=g(F),J=M[P],H=String(J);if(!L[H]){L[H]=1;var Y=typeof J;Y==="boolean"?S++:(A?m(J)!==u:Y==="number")?b++:Y==="string"&&S++}}return S>b*2}function D(M){return p(M[0])&&p(M[1])}}}),mc=i({"src/plots/cartesian/autorange.js"(V,$){var h=f(),c=fe(),u=_r(),p=Te().FP_SAFE,v=xn(),m=oi(),g=Ur(),w=g.getFromId,o=g.isLinked;$.exports={applyAutorangeOptions:z,getAutoRange:T,makePadFn:k,doAutoRange:C,findExtremes:j,concatExtremes:A};function T(q,X){var K,ee,ne=[],le=q._fullLayout,W=k(le,X,0),ce=k(le,X,1),de=A(q,X),ve=de.min,pe=de.max;if(ve.length===0||pe.length===0)return u.simpleMap(X.range,X.r2l);var be=ve[0].val,Le=pe[0].val;for(K=1;K<ve.length&&be===Le;K++)be=Math.min(be,ve[K].val);for(K=1;K<pe.length&&be===Le;K++)Le=Math.max(Le,pe[K].val);var Ae=X.autorange,We=Ae==="reversed"||Ae==="min reversed"||Ae==="max reversed";if(!We&&X.range){var te=u.simpleMap(X.range,X.r2l);We=te[1]<te[0]}X.autorange==="reversed"&&(X.autorange=!0);var ae=X.rangemode,G=ae==="tozero",Q=ae==="nonnegative",U=X._length,re=U/10,R=0,B,oe,ie,xe,_e,ke;for(K=0;K<ve.length;K++)for(B=ve[K],ee=0;ee<pe.length;ee++)oe=pe[ee],ke=oe.val-B.val-y(X,B.val,oe.val),ke>0&&(_e=U-W(B)-ce(oe),_e>re?ke/_e>R&&(ie=B,xe=oe,R=ke/_e):ke/U>R&&(ie={val:B.val,nopad:1},xe={val:oe.val,nopad:1},R=ke/U));function Pe(mt,Ce){return Math.max(mt,ce(Ce))}if(be===Le){var Ge=be-1,Je=be+1;if(G)if(be===0)ne=[0,1];else{var yt=(be>0?pe:ve).reduce(Pe,0),lt=be/(1-Math.min(.5,yt/U));ne=be>0?[0,lt]:[lt,0]}else Q?ne=[Math.max(0,Ge),Math.max(1,Je)]:ne=[Ge,Je]}else G?(ie.val>=0&&(ie={val:0,nopad:1}),xe.val<=0&&(xe={val:0,nopad:1})):Q&&(ie.val-R*W(ie)<0&&(ie={val:0,nopad:1}),xe.val<=0&&(xe={val:1,nopad:1})),R=(xe.val-ie.val-y(X,B.val,oe.val))/(U-W(ie)-ce(xe)),ne=[ie.val-R*W(ie),xe.val+R*ce(xe)];return ne=z(ne,X),X.limitRange&&X.limitRange(),We&&ne.reverse(),u.simpleMap(ne,X.l2r||Number)}function y(q,X,K){var ee=0;if(q.rangebreaks)for(var ne=q.locateBreaks(X,K),le=0;le<ne.length;le++){var W=ne[le];ee+=W.max-W.min}return ee}function k(q,X,K){var ee=.05*X._length,ne=X._anchorAxis||{};if((X.ticklabelposition||"").indexOf("inside")!==-1||(ne.ticklabelposition||"").indexOf("inside")!==-1){var le=X.isReversed();if(!le){var W=u.simpleMap(X.range,X.r2l);le=W[1]<W[0]}le&&(K=!K)}var ce=0;return o(q,X._id)||(ce=M(q,X,K)),ee=Math.max(ce,ee),X.constrain==="domain"&&X._inputDomain&&(ee*=(X._inputDomain[1]-X._inputDomain[0])/(X.domain[1]-X.domain[0])),function(ve){return ve.nopad?0:ve.pad+(ve.extrapad?ee:ce)}}var D=3;function M(q,X,K){var ee=0,ne=X._id.charAt(0)==="x";for(var le in q._plots){var W=q._plots[le];if(!(X._id!==W.xaxis._id&&X._id!==W.yaxis._id)){var ce=(ne?W.yaxis:W.xaxis)||{};if((ce.ticklabelposition||"").indexOf("inside")!==-1&&(!K&&(ce.side==="left"||ce.side==="bottom")||K&&(ce.side==="top"||ce.side==="right"))){if(ce._vals){var de=u.deg2rad(ce._tickAngles[ce._id+"tick"]||0),ve=Math.abs(Math.cos(de)),pe=Math.abs(Math.sin(de));if(!ce._vals[0].bb){var be=ce._id+"tick",Le=ce._selections[be];Le.each(function(Q){var U=h.select(this),re=U.select(".text-math-group");re.empty()&&(Q.bb=m.bBox(U.node()))})}for(var Ae=0;Ae<ce._vals.length;Ae++){var We=ce._vals[Ae],te=We.bb;if(te){var ae=2*D+te.width,G=2*D+te.height;ee=Math.max(ee,ne?Math.max(ae*ve,G*pe):Math.max(G*ve,ae*pe))}}}ce.ticks==="inside"&&ce.ticklabelposition==="inside"&&(ee+=ce.ticklen||0)}}}return ee}function A(q,X,K){var ee=X._id,ne=q._fullData,le=q._fullLayout,W=[],ce=[],de,ve,pe;function be(ae,G){for(de=0;de<G.length;de++){var Q=ae[G[de]],U=(Q._extremes||{})[ee];if(Q.visible===!0&&U){for(ve=0;ve<U.min.length;ve++)pe=U.min[ve],b(W,pe.val,pe.pad,{extrapad:pe.extrapad});for(ve=0;ve<U.max.length;ve++)pe=U.max[ve],S(ce,pe.val,pe.pad,{extrapad:pe.extrapad})}}}if(be(ne,X._traceIndices),be(le.annotations||[],X._annIndices||[]),be(le.shapes||[],X._shapeIndices||[]),X._matchGroup&&!K){for(var Le in X._matchGroup)if(Le!==X._id){var Ae=w(q,Le),We=A(q,Ae,!0),te=X._length/Ae._length;for(ve=0;ve<We.min.length;ve++)pe=We.min[ve],b(W,pe.val,pe.pad*te,{extrapad:pe.extrapad});for(ve=0;ve<We.max.length;ve++)pe=We.max[ve],S(ce,pe.val,pe.pad*te,{extrapad:pe.extrapad})}}return{min:W,max:ce}}function C(q,X,K){if(X.setScale(),X.autorange){X.range=K?K.slice():T(q,X),X._r=X.range.slice(),X._rl=u.simpleMap(X._r,X.r2l);var ee=X._input,ne={};ne[X._attr+".range"]=X.range,ne[X._attr+".autorange"]=X.autorange,v.call("_storeDirectGUIEdit",q.layout,q._fullLayout._preGUI,ne),ee.range=X.range.slice(),ee.autorange=X.autorange}var le=X._anchorAxis;if(le&&le.rangeslider){var W=le.rangeslider[X._name];W&&W.rangemode==="auto"&&(W.range=T(q,X)),le._input.rangeslider[X._name]=u.extendFlat({},W)}}function j(q,X,K){K||(K={}),q._m||q.setScale();var ee=[],ne=[],le=X.length,W=K.padded||!1,ce=K.tozero&&(q.type==="linear"||q.type==="-"),de=q.type==="log",ve=!1,pe=K.vpadLinearized||!1,be,Le,Ae,We,te,ae,G,Q,U;function re(Pe){if(Array.isArray(Pe))return ve=!0,function(Je){return Math.max(Number(Pe[Je]||0),0)};var Ge=Math.max(Number(Pe||0),0);return function(){return Ge}}var R=re((q._m>0?K.ppadplus:K.ppadminus)||K.ppad||0),B=re((q._m>0?K.ppadminus:K.ppadplus)||K.ppad||0),oe=re(K.vpadplus||K.vpad),ie=re(K.vpadminus||K.vpad);if(!ve){if(Q=1/0,U=-1/0,de)for(be=0;be<le;be++)Le=X[be],Le<Q&&Le>0&&(Q=Le),Le>U&&Le<p&&(U=Le);else for(be=0;be<le;be++)Le=X[be],Le<Q&&Le>-p&&(Q=Le),Le>U&&Le<p&&(U=Le);X=[Q,U],le=2}var xe={tozero:ce,extrapad:W};function _e(Pe){Ae=X[Pe],c(Ae)&&(ae=R(Pe),G=B(Pe),pe?(We=q.c2l(Ae)-ie(Pe),te=q.c2l(Ae)+oe(Pe)):(Q=Ae-ie(Pe),U=Ae+oe(Pe),de&&Q<U/10&&(Q=U/10),We=q.c2l(Q),te=q.c2l(U)),ce&&(We=Math.min(0,We),te=Math.max(0,te)),F(We)&&b(ee,We,G,xe),F(te)&&S(ne,te,ae,xe))}var ke=Math.min(6,le);for(be=0;be<ke;be++)_e(be);for(be=le-1;be>=ke;be--)_e(be);return{min:ee,max:ne,opts:K}}function b(q,X,K,ee){L(q,X,K,ee,P)}function S(q,X,K,ee){L(q,X,K,ee,J)}function L(q,X,K,ee,ne){for(var le=ee.tozero,W=ee.extrapad,ce=!0,de=0;de<q.length&&ce;de++){var ve=q[de];if(ne(ve.val,X)&&ve.pad>=K&&(ve.extrapad||!W)){ce=!1;break}else ne(X,ve.val)&&ve.pad<=K&&(W||!ve.extrapad)&&(q.splice(de,1),de--)}if(ce){var pe=le&&X===0;q.push({val:X,pad:pe?0:K,extrapad:pe?!1:W})}}function F(q){return c(q)&&Math.abs(q)<p}function P(q,X){return q<=X}function J(q,X){return q>=X}function H(q,X){var K=X.autorangeoptions;return K&&K.minallowed!==void 0&&Z(X,K.minallowed,K.maxallowed)?K.minallowed:K&&K.clipmin!==void 0&&Z(X,K.clipmin,K.clipmax)?Math.max(q,X.d2l(K.clipmin)):q}function Y(q,X){var K=X.autorangeoptions;return K&&K.maxallowed!==void 0&&Z(X,K.minallowed,K.maxallowed)?K.maxallowed:K&&K.clipmax!==void 0&&Z(X,K.clipmin,K.clipmax)?Math.min(q,X.d2l(K.clipmax)):q}function Z(q,X,K){return X!==void 0&&K!==void 0?(X=q.d2l(X),K=q.d2l(K),X<K):!0}function z(q,X){if(!X||!X.autorangeoptions)return q;var K=q[0],ee=q[1],ne=X.autorangeoptions.include;if(ne!==void 0){var le=X.d2l(K),W=X.d2l(ee);u.isArrayOrTypedArray(ne)||(ne=[ne]);for(var ce=0;ce<ne.length;ce++){var de=X.d2l(ne[ce]);le>=de&&(le=de,K=de),W<=de&&(W=de,ee=de)}}return K=H(K,X),ee=Y(ee,X),[K,ee]}}}),ji=i({"src/plots/cartesian/axes.js"(V,$){var h=f(),c=fe(),u=xi(),p=xn(),v=_r(),m=v.strTranslate,g=ia(),w=pc(),o=ut(),T=oi(),y=Ps(),k=el(),D=Te(),M=D.ONEMAXYEAR,A=D.ONEAVGYEAR,C=D.ONEMINYEAR,j=D.ONEMAXQUARTER,b=D.ONEAVGQUARTER,S=D.ONEMINQUARTER,L=D.ONEMAXMONTH,F=D.ONEAVGMONTH,P=D.ONEMINMONTH,J=D.ONEWEEK,H=D.ONEDAY,Y=H/2,Z=D.ONEHOUR,z=D.ONEMIN,q=D.ONESEC,X=D.ONEMILLI,K=D.ONEMICROSEC,ee=D.MINUS_SIGN,ne=D.BADNUM,le={K:"zeroline"},W={K:"gridline",L:"path"},ce={K:"minor-gridline",L:"path"},de={K:"tick",L:"path"},ve={K:"tick",L:"text"},pe={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},be=na(),Le=be.MID_SHIFT,Ae=be.CAP_SHIFT,We=be.LINE_SPACING,te=be.OPPOSITE_SIDE,ae=3,G=$.exports={};G.setConvert=Qc();var Q=Ku(),U=Ur(),re=U.idSort,R=U.isLinked;G.id2name=U.id2name,G.name2id=U.name2id,G.cleanId=U.cleanId,G.list=U.list,G.listIds=U.listIds,G.getFromId=U.getFromId,G.getFromTrace=U.getFromTrace;var B=mc();G.getAutoRange=B.getAutoRange,G.findExtremes=B.findExtremes;var oe=1e-4;function ie(we){var ge=(we[1]-we[0])*oe;return[we[0]-ge,we[1]+ge]}G.coerceRef=function(we,ge,pt,ft,Xe,Qe){var st=ft.charAt(ft.length-1),At=pt._fullLayout._subplots[st+"axis"],it=ft+"ref",bt={};return Xe||(Xe=At[0]||(typeof Qe=="string"?Qe:Qe[0])),Qe||(Qe=Xe),At=At.concat(At.map(function(Tt){return Tt+" domain"})),bt[it]={valType:"enumerated",values:At.concat(Qe?typeof Qe=="string"?[Qe]:Qe:[]),dflt:Xe},v.coerce(we,ge,bt,it)},G.getRefType=function(we){return we===void 0?we:we==="paper"?"paper":we==="pixel"?"pixel":/( domain)$/.test(we)?"domain":"range"},G.coercePosition=function(we,ge,pt,ft,Xe,Qe){var st,At,it=G.getRefType(ft);if(it!=="range")st=v.ensureNumber,At=pt(Xe,Qe);else{var bt=G.getFromId(ge,ft);Qe=bt.fraction2r(Qe),At=pt(Xe,Qe),st=bt.cleanPos}we[Xe]=st(At)},G.cleanPosition=function(we,ge,pt){var ft=pt==="paper"||pt==="pixel"?v.ensureNumber:G.getFromId(ge,pt).cleanPos;return ft(we)},G.redrawComponents=function(we,ge){ge=ge||G.listIds(we);var pt=we._fullLayout;function ft(Xe,Qe,st,At){for(var it=p.getComponentMethod(Xe,Qe),bt={},Tt=0;Tt<ge.length;Tt++)for(var Rt=pt[G.id2name(ge[Tt])],tr=Rt[st],ur=0;ur<tr.length;ur++){var fr=tr[ur];if(!bt[fr]&&(it(we,fr),bt[fr]=1,At))return}}ft("annotations","drawOne","_annIndices"),ft("shapes","drawOne","_shapeIndices"),ft("images","draw","_imgIndices",!0),ft("selections","drawOne","_selectionIndices")};var xe=G.getDataConversions=function(we,ge,pt,ft){var Xe,Qe=pt==="x"||pt==="y"||pt==="z"?pt:ft;if(v.isArrayOrTypedArray(Qe)){if(Xe={type:Q(ft,void 0,{autotypenumbers:we._fullLayout.autotypenumbers}),_categories:[]},G.setConvert(Xe),Xe.type==="category")for(var st=0;st<ft.length;st++)Xe.d2c(ft[st])}else Xe=G.getFromTrace(we,ge,Qe);return Xe?{d2c:Xe.d2c,c2d:Xe.c2d}:Qe==="ids"?{d2c:ke,c2d:ke}:{d2c:_e,c2d:_e}};function _e(we){return+we}function ke(we){return String(we)}G.getDataToCoordFunc=function(we,ge,pt,ft){return xe(we,ge,pt,ft).d2c},G.counterLetter=function(we){var ge=we.charAt(0);if(ge==="x")return"y";if(ge==="y")return"x"},G.minDtick=function(we,ge,pt,ft){["log","category","multicategory"].indexOf(we.type)!==-1||!ft?we._minDtick=0:we._minDtick===void 0?(we._minDtick=ge,we._forceTick0=pt):we._minDtick&&((we._minDtick/ge+1e-6)%1<2e-6&&((pt-we._forceTick0)/ge%1+1.000001)%1<2e-6?(we._minDtick=ge,we._forceTick0=pt):((ge/we._minDtick+1e-6)%1>2e-6||((pt-we._forceTick0)/we._minDtick%1+1.000001)%1>2e-6)&&(we._minDtick=0))},G.saveRangeInitial=function(we,ge){for(var pt=G.list(we,"",!0),ft=!1,Xe=0;Xe<pt.length;Xe++){var Qe=pt[Xe],st=Qe._rangeInitial0===void 0&&Qe._rangeInitial1===void 0,At=st||Qe.range[0]!==Qe._rangeInitial0||Qe.range[1]!==Qe._rangeInitial1,it=Qe.autorange;(st&&it!==!0||ge&&At)&&(Qe._rangeInitial0=it==="min"||it==="max reversed"?void 0:Qe.range[0],Qe._rangeInitial1=it==="max"||it==="min reversed"?void 0:Qe.range[1],Qe._autorangeInitial=it,ft=!0)}return ft},G.saveShowSpikeInitial=function(we,ge){for(var pt=G.list(we,"",!0),ft=!1,Xe="on",Qe=0;Qe<pt.length;Qe++){var st=pt[Qe],At=st._showSpikeInitial===void 0,it=At||st.showspikes!==st._showspikes;(At||ge&&it)&&(st._showSpikeInitial=st.showspikes,ft=!0),Xe==="on"&&!st.showspikes&&(Xe="off")}return we._fullLayout._cartesianSpikesEnabled=Xe,ft},G.autoBin=function(we,ge,pt,ft,Xe,Qe){var st=v.aggNums(Math.min,null,we),At=v.aggNums(Math.max,null,we);if(ge.type==="category"||ge.type==="multicategory")return{start:st-.5,end:At+.5,size:Math.max(1,Math.round(Qe)||1),_dataSpan:At-st};Xe||(Xe=ge.calendar);var it;if(ge.type==="log"?it={type:"linear",range:[st,At]}:it={type:ge.type,range:v.simpleMap([st,At],ge.c2r,0,Xe),calendar:Xe},G.setConvert(it),Qe=Qe&&k.dtick(Qe,it.type),Qe)it.dtick=Qe,it.tick0=k.tick0(void 0,it.type,Xe);else{var bt;if(pt)bt=(At-st)/pt;else{var Tt=v.distinctVals(we),Rt=Math.pow(10,Math.floor(Math.log(Tt.minDiff)/Math.LN10)),tr=Rt*v.roundUp(Tt.minDiff/Rt,[.9,1.9,4.9,9.9],!0);bt=Math.max(tr,2*v.stdev(we)/Math.pow(we.length,ft?.25:.4)),c(bt)||(bt=1)}G.autoTicks(it,bt)}var ur=it.dtick,fr=G.tickIncrement(G.tickFirst(it),ur,"reverse",Xe),Rr,wr;if(typeof ur=="number")fr=Pe(fr,we,it,st,At),wr=1+Math.floor((At-fr)/ur),Rr=fr+wr*ur;else for(it.dtick.charAt(0)==="M"&&(fr=Ge(fr,we,ur,st,Xe)),Rr=fr,wr=0;Rr<=At;)Rr=G.tickIncrement(Rr,ur,!1,Xe),wr++;return{start:ge.c2r(fr,0,Xe),end:ge.c2r(Rr,0,Xe),size:ur,_dataSpan:At-st}};function Pe(we,ge,pt,ft,Xe){var Qe=0,st=0,At=0,it=0;function bt(ur){return(1+(ur-we)*100/pt.dtick)%100<2}for(var Tt=0;Tt<ge.length;Tt++)ge[Tt]%1===0?At++:c(ge[Tt])||it++,bt(ge[Tt])&&Qe++,bt(ge[Tt]+pt.dtick/2)&&st++;var Rt=ge.length-it;if(At===Rt&&pt.type!=="date")pt.dtick<1?we=ft-.5*pt.dtick:(we-=.5,we+pt.dtick<ft&&(we+=pt.dtick));else if(st<Rt*.1&&(Qe>Rt*.3||bt(ft)||bt(Xe))){var tr=pt.dtick/2;we+=we+tr<ft?tr:-tr}return we}function Ge(we,ge,pt,ft,Xe){var Qe=v.findExactDates(ge,Xe),st=.8;if(Qe.exactDays>st){var At=Number(pt.substr(1));Qe.exactYears>st&&At%12===0?we=G.tickIncrement(we,"M6","reverse")+H*1.5:Qe.exactMonths>st?we=G.tickIncrement(we,"M1","reverse")+H*15.5:we-=Y;var it=G.tickIncrement(we,pt);if(it<=ft)return it}return we}G.prepMinorTicks=function(we,ge,pt){if(!ge.minor.dtick){delete we.dtick;var ft=ge.dtick&&c(ge._tmin),Xe;if(ft){var Qe=G.tickIncrement(ge._tmin,ge.dtick,!0);Xe=[ge._tmin,Qe*.99+ge._tmin*.01]}else{var st=v.simpleMap(ge.range,ge.r2l);Xe=[st[0],.8*st[0]+.2*st[1]]}if(we.range=v.simpleMap(Xe,ge.l2r),we._isMinor=!0,G.prepTicks(we,pt),ft){var At=c(ge.dtick),it=c(we.dtick),bt=At?ge.dtick:+ge.dtick.substring(1),Tt=it?we.dtick:+we.dtick.substring(1);At&&it?Je(bt,Tt)?bt===2*J&&Tt===2*H&&(we.dtick=J):bt===2*J&&Tt===3*H?we.dtick=J:bt===J&&!(ge._input.minor||{}).nticks?we.dtick=H:yt(bt/Tt,2.5)?we.dtick=bt/2:we.dtick=bt:String(ge.dtick).charAt(0)==="M"?it?we.dtick="M1":Je(bt,Tt)?bt>=12&&Tt===2&&(we.dtick="M3"):we.dtick=ge.dtick:String(we.dtick).charAt(0)==="L"?String(ge.dtick).charAt(0)==="L"?Je(bt,Tt)||(we.dtick=yt(bt/Tt,2.5)?ge.dtick/2:ge.dtick):we.dtick="D1":we.dtick==="D2"&&+ge.dtick>1&&(we.dtick=1)}we.range=ge.range}ge.minor._tick0Init===void 0&&(we.tick0=ge.tick0)};function Je(we,ge){return Math.abs((we/ge+.5)%1-.5)<.001}function yt(we,ge){return Math.abs(we/ge-1)<.001}G.prepTicks=function(we,ge){var pt=v.simpleMap(we.range,we.r2l,void 0,void 0,ge);if(we.tickmode==="auto"||!we.dtick){var ft=we.nticks,Xe;ft||(we.type==="category"||we.type==="multicategory"?(Xe=we.tickfont?v.bigFont(we.tickfont.size||12):15,ft=we._length/Xe):(Xe=we._id.charAt(0)==="y"?40:80,ft=v.constrain(we._length/Xe,4,9)+1),we._name==="radialaxis"&&(ft*=2)),we.minor&&we.minor.tickmode!=="array"||we.tickmode==="array"&&(ft*=100),we._roughDTick=Math.abs(pt[1]-pt[0])/ft,G.autoTicks(we,we._roughDTick),we._minDtick>0&&we.dtick<we._minDtick*2&&(we.dtick=we._minDtick,we.tick0=we.l2r(we._forceTick0))}we.ticklabelmode==="period"&&mt(we),we.tick0||(we.tick0=we.type==="date"?"2000-01-01":0),we.type==="date"&&we.dtick<.1&&(we.dtick=.1),_t(we)};function lt(we){return+we.substring(1)}function mt(we){var ge;function pt(){return!(c(we.dtick)||we.dtick.charAt(0)!=="M")}var ft=pt(),Xe=G.getTickFormat(we);if(Xe){var Qe=we._dtickInit!==we.dtick;/%[fLQsSMX]/.test(Xe)||(/%[HI]/.test(Xe)?(ge=Z,Qe&&!ft&&we.dtick<Z&&(we.dtick=Z)):/%p/.test(Xe)?(ge=Y,Qe&&!ft&&we.dtick<Y&&(we.dtick=Y)):/%[Aadejuwx]/.test(Xe)?(ge=H,Qe&&!ft&&we.dtick<H&&(we.dtick=H)):/%[UVW]/.test(Xe)?(ge=J,Qe&&!ft&&we.dtick<J&&(we.dtick=J)):/%[Bbm]/.test(Xe)?(ge=F,Qe&&(ft?lt(we.dtick)<1:we.dtick<P)&&(we.dtick="M1")):/%[q]/.test(Xe)?(ge=b,Qe&&(ft?lt(we.dtick)<3:we.dtick<S)&&(we.dtick="M3")):/%[Yy]/.test(Xe)&&(ge=A,Qe&&(ft?lt(we.dtick)<12:we.dtick<C)&&(we.dtick="M12")))}ft=pt(),ft&&we.tick0===we._dowTick0&&(we.tick0=we._rawTick0),we._definedDelta=ge}function Ce(we,ge,pt){for(var ft=0;ft<we.length;ft++){var Xe=we[ft].value,Qe=ft,st=ft+1;ft<we.length-1?(Qe=ft,st=ft+1):ft>0?(Qe=ft-1,st=ft):(Qe=ft,st=ft);var At=we[Qe].value,it=we[st].value,bt=Math.abs(it-At),Tt=pt||bt,Rt=0;Tt>=C?bt>=C&&bt<=M?Rt=bt:Rt=A:pt===b&&Tt>=S?bt>=S&&bt<=j?Rt=bt:Rt=b:Tt>=P?bt>=P&&bt<=L?Rt=bt:Rt=F:pt===J&&Tt>=J?Rt=J:Tt>=H?Rt=H:pt===Y&&Tt>=Y?Rt=Y:pt===Z&&Tt>=Z&&(Rt=Z);var tr;Rt>=bt&&(Rt=bt,tr=!0);var ur=Xe+Rt;if(ge.rangebreaks&&Rt>0){for(var fr=84,Rr=0,wr=0;wr<fr;wr++){var Gr=(wr+.5)/fr;ge.maskBreaks(Xe*(1-Gr)+Gr*ur)!==ne&&Rr++}Rt*=Rr/fr,Rt||(we[ft].drop=!0),tr&&bt>J&&(Rt=bt)}(Rt>0||ft===0)&&(we[ft].periodX=Xe+Rt/2)}}G.calcTicks=function(ge,pt){for(var ft=ge.type,Xe=ge.calendar,Qe=ge.ticklabelstep,st=ge.ticklabelmode==="period",At=ge.range[0]>ge.range[1],it=!ge.ticklabelindex||v.isArrayOrTypedArray(ge.ticklabelindex)?ge.ticklabelindex:[ge.ticklabelindex],bt=v.simpleMap(ge.range,ge.r2l,void 0,void 0,pt),Tt=bt[1]<bt[0],Rt=Math.min(bt[0],bt[1]),tr=Math.max(bt[0],bt[1]),ur=Math.max(1e3,ge._length||0),fr=[],Rr=[],wr=[],Gr=[],Lr=[],$r=ge.minor&&(ge.minor.ticks||ge.minor.showgrid),Xr=1;Xr>=($r?0:1);Xr--){var jn=!Xr;Xr?(ge._dtickInit=ge.dtick,ge._tick0Init=ge.tick0):(ge.minor._dtickInit=ge.minor.dtick,ge.minor._tick0Init=ge.minor.tick0);var bn=Xr?ge:v.extendFlat({},ge,ge.minor);if(jn?G.prepMinorTicks(bn,ge,pt):G.prepTicks(bn,pt),bn.tickmode==="array"){Xr?(wr=[],fr=Be(ge,!jn)):(Gr=[],Rr=Be(ge,!jn));continue}if(bn.tickmode==="sync"){wr=[],fr=Se(ge);continue}var pi=ie(bt),Gn=pi[0],ei=pi[1],$i=c(bn.dtick),da=ft==="log"&&!($i||bn.dtick.charAt(0)==="L"),si=G.tickFirst(bn,pt);if(Xr){if(ge._tmin=si,si<Gn!==Tt)break;(ft==="category"||ft==="multicategory")&&(ei=Tt?Math.max(-.5,ei):Math.min(ge._categories.length-.5,ei))}var yn=null,Vn=si,ci;if(Xr){var Yi;$i?Yi=ge.dtick:ft==="date"?typeof ge.dtick=="string"&&ge.dtick.charAt(0)==="M"&&(Yi=F*ge.dtick.substring(1)):Yi=ge._roughDTick,ci=Math.round((ge.r2l(Vn)-ge.r2l(ge.tick0))/Yi)-1}var Ii=bn.dtick;for(bn.rangebreaks&&bn._tick0Init!==bn.tick0&&(Vn=Hr(Vn,ge),Tt||(Vn=G.tickIncrement(Vn,Ii,!Tt,Xe))),Xr&&st&&(Vn=G.tickIncrement(Vn,Ii,!Tt,Xe),ci--);Tt?Vn>=ei:Vn<=ei;Vn=G.tickIncrement(Vn,Ii,Tt,Xe)){if(Xr&&ci++,bn.rangebreaks&&!Tt){if(Vn<Gn)continue;if(bn.maskBreaks(Vn)===ne&&Hr(Vn,bn)>=tr)break}if(wr.length>ur||Vn===yn)break;yn=Vn;var Ln={value:Vn};Xr?(da&&Vn!==(Vn|0)&&(Ln.simpleLabel=!0),Qe>1&&ci%Qe&&(Ln.skipLabel=!0),wr.push(Ln)):(Ln.minor=!0,Gr.push(Ln))}}if(!Gr||Gr.length<2)it=!1;else{var In=(Gr[1].value-Gr[0].value)*(At?-1:1);Cn(In,ge.tickformat)||(it=!1)}if(!it)Lr=wr;else{var Nn=wr.concat(Gr);st&&wr.length&&(Nn=Nn.slice(1)),Nn=Nn.sort(function(Ni,Oi){return Ni.value-Oi.value}).filter(function(Ni,Oi,Jn){return Oi===0||Ni.value!==Jn[Oi-1].value});var vi=Nn.map(function(Ni,Oi){return Ni.minor===void 0&&!Ni.skipLabel?Oi:null}).filter(function(Ni){return Ni!==null});vi.forEach(function(Ni){it.map(function(Oi){var Jn=Ni+Oi;Jn>=0&&Jn<Nn.length&&v.pushUnique(Lr,Nn[Jn])})})}if($r){var bi=ge.minor.ticks==="inside"&&ge.ticks==="outside"||ge.minor.ticks==="outside"&&ge.ticks==="inside";if(!bi){for(var Li=wr.map(function(Ni){return Ni.value}),Ei=[],gi=0;gi<Gr.length;gi++){var Ea=Gr[gi],Gi=Ea.value;if(Li.indexOf(Gi)===-1){for(var Ji=!1,Da=0;!Ji&&Da<wr.length;Da++)1e7+wr[Da].value===1e7+Gi&&(Ji=!0);Ji||Ei.push(Ea)}}Gr=Ei}}st&&Ce(Lr,ge,ge._definedDelta);var ai;if(ge.rangebreaks){var Ga=ge._id.charAt(0)==="y",Xa=1;ge.tickmode==="auto"&&(Xa=ge.tickfont?ge.tickfont.size:12);var os=NaN;for(ai=wr.length-1;ai>-1;ai--){if(wr[ai].drop){wr.splice(ai,1);continue}wr[ai].value=Hr(wr[ai].value,ge);var ls=ge.c2p(wr[ai].value);(Ga?os>ls-Xa:os<ls+Xa)?wr.splice(Tt?ai+1:ai,1):os=ls}}kn(ge)&&Math.abs(bt[1]-bt[0])===360&&wr.pop(),ge._tmax=(wr[wr.length-1]||{}).value,ge._prevDateHead="",ge._inCalcTicks=!0;var Za,Pi=function(Ni){Ni.text="",ge._prevDateHead=Za};wr=wr.concat(Gr);function cs(Ni,Oi){var Jn=G.tickText(Ni,Oi.value,!1,Oi.simpleLabel),yi=Oi.periodX;return yi!==void 0&&(Jn.periodX=yi,(yi>tr||yi<Rt)&&(yi>tr&&(Jn.periodX=tr),yi<Rt&&(Jn.periodX=Rt),Pi(Jn))),Jn}var _s;for(ai=0;ai<wr.length;ai++){var aa=wr[ai].minor,Ss=wr[ai].value;aa?(it&&Lr.indexOf(wr[ai])!==-1?_s=cs(ge,wr[ai]):_s={x:Ss},_s.minor=!0,Rr.push(_s)):(Za=ge._prevDateHead,_s=cs(ge,wr[ai]),(wr[ai].skipLabel||it&&Lr.indexOf(wr[ai])===-1)&&Pi(_s),fr.push(_s))}return fr=fr.concat(Rr),ge._inCalcTicks=!1,st&&fr.length&&(fr[0].noTick=!0),fr};function Ie(we,ge){return we.rangebreaks&&(ge=ge.filter(function(pt){return we.maskBreaks(pt.x)!==ne})),ge}function Se(we){var ge=we._mainAxis,pt=[];if(ge._vals){for(var ft=0;ft<ge._vals.length;ft++)if(!ge._vals[ft].noTick){var Xe=ge.l2p(ge._vals[ft].x),Qe=we.p2l(Xe),st=G.tickText(we,Qe);ge._vals[ft].minor&&(st.minor=!0,st.text=""),pt.push(st)}}return pt=Ie(we,pt),pt}function Be(we,ge){var pt=v.simpleMap(we.range,we.r2l),ft=ie(pt),Xe=Math.min(ft[0],ft[1]),Qe=Math.max(ft[0],ft[1]),st=we.type==="category"?we.d2l_noadd:we.d2l;we.type==="log"&&String(we.dtick).charAt(0)!=="L"&&(we.dtick="L"+Math.pow(10,Math.floor(Math.min(we.range[0],we.range[1]))-1));for(var At=[],it=0;it<=1;it++)if(!(ge!==void 0&&(ge&&it||ge===!1&&!it))&&!(it&&!we.minor)){var bt=it?we.minor.tickvals:we.tickvals,Tt=it?[]:we.ticktext;if(bt){v.isArrayOrTypedArray(Tt)||(Tt=[]);for(var Rt=0;Rt<bt.length;Rt++){var tr=st(bt[Rt]);if(tr>Xe&&tr<Qe){var ur=G.tickText(we,tr,!1,String(Tt[Rt]));it&&(ur.minor=!0,ur.text=""),At.push(ur)}}}}return At=Ie(we,At),At}var rt=[2,5,10],ht=[1,2,3,6,12],Lt=[1,2,5,10,15,30],Ct=[1,2,3,7,14],zt=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Bt=[-.301,0,.301,.699,1],Ft=[15,30,45,90,180];function nr(we,ge,pt){return ge*v.roundUp(we/ge,pt)}G.autoTicks=function(we,ge,pt){var ft;function Xe(Rt){return Math.pow(Rt,Math.floor(Math.log(ge)/Math.LN10))}if(we.type==="date"){we.tick0=v.dateTick0(we.calendar,0);var Qe=2*ge;if(Qe>A)ge/=A,ft=Xe(10),we.dtick="M"+12*nr(ge,ft,rt);else if(Qe>F)ge/=F,we.dtick="M"+nr(ge,1,ht);else if(Qe>H){if(we.dtick=nr(ge,H,we._hasDayOfWeekBreaks?[1,2,7,14]:Ct),!pt){var st=G.getTickFormat(we),At=we.ticklabelmode==="period";At&&(we._rawTick0=we.tick0),/%[uVW]/.test(st)?we.tick0=v.dateTick0(we.calendar,2):we.tick0=v.dateTick0(we.calendar,1),At&&(we._dowTick0=we.tick0)}}else Qe>Z?we.dtick=nr(ge,Z,ht):Qe>z?we.dtick=nr(ge,z,Lt):Qe>q?we.dtick=nr(ge,q,Lt):(ft=Xe(10),we.dtick=nr(ge,ft,rt))}else if(we.type==="log"){we.tick0=0;var it=v.simpleMap(we.range,we.r2l);if(we._isMinor&&(ge*=1.5),ge>.7)we.dtick=Math.ceil(ge);else if(Math.abs(it[1]-it[0])<1){var bt=1.5*Math.abs((it[1]-it[0])/ge);ge=Math.abs(Math.pow(10,it[1])-Math.pow(10,it[0]))/bt,ft=Xe(10),we.dtick="L"+nr(ge,ft,rt)}else we.dtick=ge>.3?"D2":"D1"}else we.type==="category"||we.type==="multicategory"?(we.tick0=0,we.dtick=Math.ceil(Math.max(ge,1))):kn(we)?(we.tick0=0,ft=1,we.dtick=nr(ge,ft,Ft)):(we.tick0=0,ft=Xe(10),we.dtick=nr(ge,ft,rt));if(we.dtick===0&&(we.dtick=1),!c(we.dtick)&&typeof we.dtick!="string"){var Tt=we.dtick;throw we.dtick=1,"ax.dtick error: "+String(Tt)}};function _t(we){var ge=we.dtick;if(we._tickexponent=0,!c(ge)&&typeof ge!="string"&&(ge=1),(we.type==="category"||we.type==="multicategory")&&(we._tickround=null),we.type==="date"){var pt=we.r2l(we.tick0),ft=we.l2r(pt).replace(/(^-|i)/g,""),Xe=ft.length;if(String(ge).charAt(0)==="M")Xe>10||ft.substr(5)!=="01-01"?we._tickround="d":we._tickround=+ge.substr(1)%12===0?"y":"m";else if(ge>=H&&Xe<=10||ge>=H*15)we._tickround="d";else if(ge>=z&&Xe<=16||ge>=Z)we._tickround="M";else if(ge>=q&&Xe<=19||ge>=z)we._tickround="S";else{var Qe=we.l2r(pt+ge).replace(/^-/,"").length;we._tickround=Math.max(Xe,Qe)-20,we._tickround<0&&(we._tickround=4)}}else if(c(ge)||ge.charAt(0)==="L"){var st=we.range.map(we.r2d||Number);c(ge)||(ge=Number(ge.substr(1))),we._tickround=2-Math.floor(Math.log(ge)/Math.LN10+.01);var At=Math.max(Math.abs(st[0]),Math.abs(st[1])),it=Math.floor(Math.log(At)/Math.LN10+.01),bt=we.minexponent===void 0?3:we.minexponent;Math.abs(it)>bt&&(Ne(we.exponentformat)&&!Re(it)?we._tickexponent=3*Math.round((it-1)/3):we._tickexponent=it)}else we._tickround=null}G.tickIncrement=function(we,ge,pt,ft){var Xe=pt?-1:1;if(c(ge))return v.increment(we,Xe*ge);var Qe=ge.charAt(0),st=Xe*Number(ge.substr(1));if(Qe==="M")return v.incrementMonth(we,st,ft);if(Qe==="L")return Math.log(Math.pow(10,we)+st)/Math.LN10;if(Qe==="D"){var At=ge==="D2"?Bt:zt,it=we+Xe*.01,bt=v.roundUp(v.mod(it,1),At,pt);return Math.floor(it)+Math.log(h.round(Math.pow(10,bt),1))/Math.LN10}throw"unrecognized dtick "+String(ge)},G.tickFirst=function(we,ge){var pt=we.r2l||Number,ft=v.simpleMap(we.range,pt,void 0,void 0,ge),Xe=ft[1]<ft[0],Qe=Xe?Math.floor:Math.ceil,st=ie(ft)[0],At=we.dtick,it=pt(we.tick0);if(c(At)){var bt=Qe((st-it)/At)*At+it;return(we.type==="category"||we.type==="multicategory")&&(bt=v.constrain(bt,0,we._categories.length-1)),bt}var Tt=At.charAt(0),Rt=Number(At.substr(1));if(Tt==="M"){for(var tr=0,ur=it,fr,Rr,wr;tr<10;){if(fr=G.tickIncrement(ur,At,Xe,we.calendar),(fr-st)*(ur-st)<=0)return Xe?Math.min(ur,fr):Math.max(ur,fr);Rr=(st-(ur+fr)/2)/(fr-ur),wr=Tt+(Math.abs(Math.round(Rr))||1)*Rt,ur=G.tickIncrement(ur,wr,Rr<0?!Xe:Xe,we.calendar),tr++}return v.error("tickFirst did not converge",we),ur}else{if(Tt==="L")return Math.log(Qe((Math.pow(10,st)-it)/Rt)*Rt+it)/Math.LN10;if(Tt==="D"){var Gr=At==="D2"?Bt:zt,Lr=v.roundUp(v.mod(st,1),Gr,Xe);return Math.floor(st)+Math.log(h.round(Math.pow(10,Lr),1))/Math.LN10}else throw"unrecognized dtick "+String(At)}},G.tickText=function(we,ge,pt,ft){var Xe=rr(we,ge),Qe=we.tickmode==="array",st=pt||Qe,At=we.type,it=At==="category"?we.d2l_noadd:we.d2l,bt,Tt=function(wr){var Gr=we.l2p(wr);return Gr>=0&&Gr<=we._length?wr:null};if(Qe&&v.isArrayOrTypedArray(we.ticktext)){var Rt=v.simpleMap(we.range,we.r2l),tr=(Math.abs(Rt[1]-Rt[0])-(we._lBreaks||0))/1e4;for(bt=0;bt<we.ticktext.length&&!(Math.abs(ge-it(we.tickvals[bt]))<tr);bt++);if(bt<we.ticktext.length)return Xe.text=String(we.ticktext[bt]),Xe.xbnd=[Tt(Xe.x-.5),Tt(Xe.x+we.dtick-.5)],Xe}function ur(wr){if(wr===void 0)return!0;if(pt)return wr==="none";var Gr={first:we._tmin,last:we._tmax}[wr];return wr!=="all"&&ge!==Gr}var fr=pt?"never":we.exponentformat!=="none"&&ur(we.showexponent)?"hide":"";if(At==="date"?pr(we,Xe,pt,st):At==="log"?Yt(we,Xe,pt,st,fr):At==="category"?sr(we,Xe):At==="multicategory"?ze(we,Xe,pt):kn(we)?$e(we,Xe,pt,st,fr):Ye(we,Xe,pt,st,fr),ft||(we.tickprefix&&!ur(we.showtickprefix)&&(Xe.text=we.tickprefix+Xe.text),we.ticksuffix&&!ur(we.showticksuffix)&&(Xe.text+=we.ticksuffix)),we.labelalias&&we.labelalias.hasOwnProperty(Xe.text)){var Rr=we.labelalias[Xe.text];typeof Rr=="string"&&(Xe.text=Rr)}return(we.tickson==="boundaries"||we.showdividers)&&(Xe.xbnd=[Tt(Xe.x-.5),Tt(Xe.x+we.dtick-.5)]),Xe},G.hoverLabelText=function(we,ge,pt){pt&&(we=v.extendFlat({},we,{hoverformat:pt}));var ft=v.isArrayOrTypedArray(ge)?ge[0]:ge,Xe=v.isArrayOrTypedArray(ge)?ge[1]:void 0;if(Xe!==void 0&&Xe!==ft)return G.hoverLabelText(we,ft,pt)+" - "+G.hoverLabelText(we,Xe,pt);var Qe=we.type==="log"&&ft<=0,st=G.tickText(we,we.c2l(Qe?-ft:ft),"hover").text;return Qe?ft===0?"0":ee+st:st};function rr(we,ge,pt){var ft=we.tickfont||{};return{x:ge,dx:0,dy:0,text:pt||"",fontSize:ft.size,font:ft.family,fontWeight:ft.weight,fontStyle:ft.style,fontVariant:ft.variant,fontTextcase:ft.textcase,fontLineposition:ft.lineposition,fontShadow:ft.shadow,fontColor:ft.color}}function pr(we,ge,pt,ft){var Xe=we._tickround,Qe=pt&&we.hoverformat||G.getTickFormat(we);ft=!Qe&&ft,ft&&(c(Xe)?Xe=4:Xe={y:"m",m:"d",d:"M",M:"S",S:4}[Xe]);var st=v.formatDate(ge.x,Qe,Xe,we._dateFormat,we.calendar,we._extraFormat),At,it=st.indexOf(`
`);if(it!==-1&&(At=st.substr(it+1),st=st.substr(0,it)),ft&&(At!==void 0&&(st==="00:00:00"||st==="00:00")?(st=At,At=""):st.length===8&&(st=st.replace(/:00$/,""))),At)if(pt)Xe==="d"?st+=", "+At:st=At+(st?", "+st:"");else if(!we._inCalcTicks||we._prevDateHead!==At)we._prevDateHead=At,st+="<br>"+At;else{var bt=pn(we),Tt=we._trueSide||we.side;(!bt&&Tt==="top"||bt&&Tt==="bottom")&&(st+="<br> ")}ge.text=st}function Yt(we,ge,pt,ft,Xe){var Qe=we.dtick,st=ge.x,At=we.tickformat,it=typeof Qe=="string"&&Qe.charAt(0);if(Xe==="never"&&(Xe=""),ft&&it!=="L"&&(Qe="L3",it="L"),At||it==="L")ge.text=nt(Math.pow(10,st),we,Xe,ft);else if(c(Qe)||it==="D"&&v.mod(st+.01,1)<.1){var bt=Math.round(st),Tt=Math.abs(bt),Rt=we.exponentformat;Rt==="power"||Ne(Rt)&&Re(bt)?(bt===0?ge.text=1:bt===1?ge.text="10":ge.text="10<sup>"+(bt>1?"":ee)+Tt+"</sup>",ge.fontSize*=1.25):(Rt==="e"||Rt==="E")&&Tt>2?ge.text="1"+Rt+(bt>0?"+":ee)+Tt:(ge.text=nt(Math.pow(10,st),we,"","fakehover"),Qe==="D1"&&we._id.charAt(0)==="y"&&(ge.dy-=ge.fontSize/6))}else if(it==="D")ge.text=String(Math.round(Math.pow(10,v.mod(st,1)))),ge.fontSize*=.75;else throw"unrecognized dtick "+String(Qe);if(we.dtick==="D1"){var tr=String(ge.text).charAt(0);(tr==="0"||tr==="1")&&(we._id.charAt(0)==="y"?ge.dx-=ge.fontSize/4:(ge.dy+=ge.fontSize/2,ge.dx+=(we.range[1]>we.range[0]?1:-1)*ge.fontSize*(st<0?.5:.25)))}}function sr(we,ge){var pt=we._categories[Math.round(ge.x)];pt===void 0&&(pt=""),ge.text=String(pt)}function ze(we,ge,pt){var ft=Math.round(ge.x),Xe=we._categories[ft]||[],Qe=Xe[1]===void 0?"":String(Xe[1]),st=Xe[0]===void 0?"":String(Xe[0]);pt?ge.text=st+" - "+Qe:(ge.text=Qe,ge.text2=st)}function Ye(we,ge,pt,ft,Xe){Xe==="never"?Xe="":we.showexponent==="all"&&Math.abs(ge.x/we.dtick)<1e-6&&(Xe="hide"),ge.text=nt(ge.x,we,Xe,ft)}function $e(we,ge,pt,ft,Xe){if(we.thetaunit==="radians"&&!pt){var Qe=ge.x/180;if(Qe===0)ge.text="0";else{var st=he(Qe);if(st[1]>=100)ge.text=nt(v.deg2rad(ge.x),we,Xe,ft);else{var At=ge.x<0;st[1]===1?st[0]===1?ge.text="":ge.text=st[0]+"":ge.text=["<sup>",st[0],"</sup>","","<sub>",st[1],"</sub>",""].join(""),At&&(ge.text=ee+ge.text)}}}else ge.text=nt(ge.x,we,Xe,ft)}function he(we){function ge(At,it){return Math.abs(At-it)<=1e-6}function pt(At,it){return ge(it,0)?At:pt(it,At%it)}function ft(At){for(var it=1;!ge(Math.round(At*it)/it,At);)it*=10;return it}var Xe=ft(we),Qe=we*Xe,st=Math.abs(pt(Qe,Xe));return[Math.round(Qe/st),Math.round(Xe/st)]}var je=["f","p","n","","m","","k","M","G","T"];function Ne(we){return we==="SI"||we==="B"}function Re(we){return we>14||we<-15}function nt(we,ge,pt,ft){var Xe=we<0,Qe=ge._tickround,st=pt||ge.exponentformat||"B",At=ge._tickexponent,it=G.getTickFormat(ge),bt=ge.separatethousands;if(ft){var Tt={exponentformat:st,minexponent:ge.minexponent,dtick:ge.showexponent==="none"?ge.dtick:c(we)&&Math.abs(we)||1,range:ge.showexponent==="none"?ge.range.map(ge.r2d):[0,we||1]};_t(Tt),Qe=(Number(Tt._tickround)||0)+4,At=Tt._tickexponent,ge.hoverformat&&(it=ge.hoverformat)}if(it)return ge._numFormat(it)(we).replace(/-/g,ee);var Rt=Math.pow(10,-Qe)/2;if(st==="none"&&(At=0),we=Math.abs(we),we<Rt)we="0",Xe=!1;else{if(we+=Rt,At&&(we*=Math.pow(10,-At),Qe+=At),Qe===0)we=String(Math.floor(we));else if(Qe<0){we=String(Math.round(we)),we=we.substr(0,we.length+Qe);for(var tr=Qe;tr<0;tr++)we+="0"}else{we=String(we);var ur=we.indexOf(".")+1;ur&&(we=we.substr(0,ur+Qe).replace(/\.?0+$/,""))}we=v.numSeparate(we,ge._separators,bt)}if(At&&st!=="hide"){Ne(st)&&Re(At)&&(st="power");var fr;At<0?fr=ee+-At:st!=="power"?fr="+"+At:fr=String(At),st==="e"||st==="E"?we+=st+fr:st==="power"?we+="10<sup>"+fr+"</sup>":st==="B"&&At===9?we+="B":Ne(st)&&(we+=je[At/3+5])}return Xe?ee+we:we}G.getTickFormat=function(we){var ge;function pt(it){return typeof it!="string"?it:Number(it.replace("M",""))*F}function ft(it,bt){var Tt=["L","D"];if(typeof it==typeof bt){if(typeof it=="number")return it-bt;var Rt=Tt.indexOf(it.charAt(0)),tr=Tt.indexOf(bt.charAt(0));return Rt===tr?Number(it.replace(/(L|D)/g,""))-Number(bt.replace(/(L|D)/g,"")):Rt-tr}else return typeof it=="number"?1:-1}function Xe(it,bt,Tt){var Rt=Tt||function(fr){return fr},tr=bt[0],ur=bt[1];return(!tr&&typeof tr!="number"||Rt(tr)<=Rt(it))&&(!ur&&typeof ur!="number"||Rt(ur)>=Rt(it))}function Qe(it,bt){var Tt=bt[0]===null,Rt=bt[1]===null,tr=ft(it,bt[0])>=0,ur=ft(it,bt[1])<=0;return(Tt||tr)&&(Rt||ur)}var st,At;if(we.tickformatstops&&we.tickformatstops.length>0)switch(we.type){case"date":case"linear":{for(ge=0;ge<we.tickformatstops.length;ge++)if(At=we.tickformatstops[ge],At.enabled&&Xe(we.dtick,At.dtickrange,pt)){st=At;break}break}case"log":{for(ge=0;ge<we.tickformatstops.length;ge++)if(At=we.tickformatstops[ge],At.enabled&&Qe(we.dtick,At.dtickrange)){st=At;break}break}}return st?st.value:we.tickformat},G.getSubplots=function(we,ge){var pt=we._fullLayout._subplots,ft=pt.cartesian.concat(pt.gl2d||[]),Xe=ge?G.findSubplotsWithAxis(ft,ge):ft;return Xe.sort(function(Qe,st){var At=Qe.substr(1).split("y"),it=st.substr(1).split("y");return At[0]===it[0]?+At[1]-+it[1]:+At[0]-+it[0]}),Xe},G.findSubplotsWithAxis=function(we,ge){for(var pt=new RegExp(ge._id.charAt(0)==="x"?"^"+ge._id+"y":ge._id+"$"),ft=[],Xe=0;Xe<we.length;Xe++){var Qe=we[Xe];pt.test(Qe)&&ft.push(Qe)}return ft},G.makeClipPaths=function(we){var ge=we._fullLayout;if(!ge._hasOnlyLargeSploms){var pt={_offset:0,_length:ge.width,_id:""},ft={_offset:0,_length:ge.height,_id:""},Xe=G.list(we,"x",!0),Qe=G.list(we,"y",!0),st=[],At,it;for(At=0;At<Xe.length;At++)for(st.push({x:Xe[At],y:ft}),it=0;it<Qe.length;it++)At===0&&st.push({x:pt,y:Qe[it]}),st.push({x:Xe[At],y:Qe[it]});var bt=ge._clips.selectAll(".axesclip").data(st,function(Tt){return Tt.x._id+Tt.y._id});bt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Tt){return"clip"+ge._uid+Tt.x._id+Tt.y._id}).append("rect"),bt.exit().remove(),bt.each(function(Tt){h.select(this).select("rect").attr({x:Tt.x._offset||0,y:Tt.y._offset||0,width:Tt.x._length||1,height:Tt.y._length||1})})}},G.draw=function(we,ge,pt){var ft=we._fullLayout;ge==="redraw"&&ft._paper.selectAll("g.subplot").each(function(it){var bt=it[0],Tt=ft._plots[bt];if(Tt){var Rt=Tt.xaxis,tr=Tt.yaxis;Tt.xaxislayer.selectAll("."+Rt._id+"tick").remove(),Tt.yaxislayer.selectAll("."+tr._id+"tick").remove(),Tt.xaxislayer.selectAll("."+Rt._id+"tick2").remove(),Tt.yaxislayer.selectAll("."+tr._id+"tick2").remove(),Tt.xaxislayer.selectAll("."+Rt._id+"divider").remove(),Tt.yaxislayer.selectAll("."+tr._id+"divider").remove(),Tt.minorGridlayer&&Tt.minorGridlayer.selectAll("path").remove(),Tt.gridlayer&&Tt.gridlayer.selectAll("path").remove(),Tt.zerolinelayer&&Tt.zerolinelayer.selectAll("path").remove(),ft._infolayer.select(".g-"+Rt._id+"title").remove(),ft._infolayer.select(".g-"+tr._id+"title").remove()}});var Xe=!ge||ge==="redraw"?G.listIds(we):ge,Qe=G.list(we),st=Qe.filter(function(it){return it.autoshift}).map(function(it){return it.overlaying});Xe.map(function(it){var bt=G.getFromId(we,it);if(bt.tickmode==="sync"&&bt.overlaying){var Tt=Xe.findIndex(function(Rt){return Rt===bt.overlaying});Tt>=0&&Xe.unshift(Xe.splice(Tt,1).shift())}});var At={false:{left:0,right:0}};return v.syncOrAsync(Xe.map(function(it){return function(){if(it){var bt=G.getFromId(we,it);pt||(pt={}),pt.axShifts=At,pt.overlayingShiftedAx=st;var Tt=G.drawOne(we,bt,pt);return bt._shiftPusher&&Un(bt,bt._fullDepth||0,At,!0),bt._r=bt.range.slice(),bt._rl=v.simpleMap(bt._r,bt.r2l),Tt}}}))},G.drawOne=function(we,ge,pt){pt=pt||{};var ft=pt.axShifts||{},Xe=pt.overlayingShiftedAx||[],Qe,st,At;ge.setScale();var it=we._fullLayout,bt=ge._id,Tt=bt.charAt(0),Rt=G.counterLetter(bt),tr=it._plots[ge._mainSubplot];if(!tr)return;if(ge._shiftPusher=ge.autoshift||Xe.indexOf(ge._id)!==-1||Xe.indexOf(ge.overlaying)!==-1,ge._shiftPusher&ge.anchor==="free"){var ur=ge.linewidth/2||0;ge.ticks==="inside"&&(ur+=ge.ticklen),Un(ge,ur,ft,!0),Un(ge,ge.shift||0,ft,!1)}(pt.skipTitle!==!0||ge._shift===void 0)&&(ge._shift=gr(ge,ft));var fr=tr[Tt+"axislayer"],Rr=ge._mainLinePosition,wr=Rr+=ge._shift,Gr=ge._mainMirrorPosition,Lr=ge._vals=G.calcTicks(ge),$r=[ge.mirror,wr,Gr].join("_");for(Qe=0;Qe<Lr.length;Qe++)Lr[Qe].axInfo=$r;ge._selections={},ge._tickAngles&&(ge._prevTickAngles=ge._tickAngles),ge._tickAngles={},ge._depth=null;var Xr={};function jn(aa){var Ss=bt+(aa||"tick");return Xr[Ss]||(Xr[Ss]=ot(ge,Ss,wr)),Xr[Ss]}if(ge.visible){var bn=G.makeTransTickFn(ge),pi=G.makeTransTickLabelFn(ge),Gn,ei,$i=ge.ticks==="inside",da=ge.ticks==="outside";if(ge.tickson==="boundaries"){var si=dt(ge,Lr);ei=G.clipEnds(ge,si),Gn=$i?ei:si}else ei=G.clipEnds(ge,Lr),Gn=$i&&ge.ticklabelmode!=="period"?ei:Lr;var yn=ge._gridVals=ei,Vn=Nt(ge,Lr);if(!it._hasOnlyLargeSploms){var ci=ge._subplotsWith,Yi={};for(Qe=0;Qe<ci.length;Qe++){st=ci[Qe],At=it._plots[st];var Ii=At[Rt+"axis"],Ln=Ii._mainAxis._id;if(!Yi[Ln]){Yi[Ln]=1;var In=Tt==="x"?"M0,"+Ii._offset+"v"+Ii._length:"M"+Ii._offset+",0h"+Ii._length;G.drawGrid(we,ge,{vals:yn,counterAxis:Ii,layer:At.gridlayer.select("."+bt),minorLayer:At.minorGridlayer.select("."+bt),path:In,transFn:bn}),G.drawZeroLine(we,ge,{counterAxis:Ii,layer:At.zerolinelayer,path:In,transFn:bn})}}}var Nn,vi=G.getTickSigns(ge),bi=G.getTickSigns(ge,"minor");if(ge.ticks||ge.minor&&ge.minor.ticks){var Li=G.makeTickPath(ge,wr,vi[2]),Ei=G.makeTickPath(ge,wr,bi[2],{minor:!0}),gi,Ea,Gi,Ji;if(ge._anchorAxis&&ge.mirror&&ge.mirror!==!0?(gi=G.makeTickPath(ge,Gr,vi[3]),Ea=G.makeTickPath(ge,Gr,bi[3],{minor:!0}),Gi=Li+gi,Ji=Ei+Ea):(gi="",Ea="",Gi=Li,Ji=Ei),ge.showdividers&&da&&ge.tickson==="boundaries"){var Da={};for(Qe=0;Qe<Vn.length;Qe++)Da[Vn[Qe].x]=1;Nn=function(aa){return Da[aa.x]?gi:Gi}}else Nn=function(aa){return aa.minor?Ji:Gi}}if(G.drawTicks(we,ge,{vals:Gn,layer:fr,path:Nn,transFn:bn}),ge.mirror==="allticks"){var ai=Object.keys(ge._linepositions||{});for(Qe=0;Qe<ai.length;Qe++){st=ai[Qe],At=it._plots[st];var Ga=ge._linepositions[st]||[],Xa=Ga[0],os=Ga[1],ls=Ga[2],Za=G.makeTickPath(ge,Xa,ls?vi[0]:bi[0],{minor:ls})+G.makeTickPath(ge,os,ls?vi[1]:bi[1],{minor:ls});G.drawTicks(we,ge,{vals:Gn,layer:At[Tt+"axislayer"],path:Za,transFn:bn})}}var Pi=[];if(Pi.push(function(){return G.drawLabels(we,ge,{vals:Lr,layer:fr,plotinfo:At,transFn:pi,labelFns:G.makeLabelFns(ge,wr)})}),ge.type==="multicategory"){var cs={x:2,y:10}[Tt];Pi.push(function(){var aa={x:"height",y:"width"}[Tt],Ss=jn()[aa]+cs+(ge._tickAngles[bt+"tick"]?ge.tickfont.size*We:0);return G.drawLabels(we,ge,{vals:Mt(ge,Lr),layer:fr,cls:bt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:bn,labelFns:G.makeLabelFns(ge,wr+Ss*vi[4])})}),Pi.push(function(){return ge._depth=vi[4]*(jn("tick2")[ge.side]-wr),Tr(we,ge,{vals:Vn,layer:fr,path:G.makeTickPath(ge,wr,vi[4],{len:ge._depth}),transFn:bn})})}else ge.title.hasOwnProperty("standoff")&&Pi.push(function(){ge._depth=vi[4]*(jn()[ge.side]-wr)});var _s=p.getComponentMethod("rangeslider","isVisible")(ge);return!pt.skipTitle&&!(_s&&ge.side==="bottom")&&Pi.push(function(){return Vr(we,ge)}),Pi.push(function(){var aa=ge.side.charAt(0),Ss=te[ge.side].charAt(0),Ni=G.getPxPosition(we,ge),Oi=da?ge.ticklen:0,Jn,yi,ks,Bo;(ge.automargin||_s||ge._shiftPusher)&&(ge.type==="multicategory"?Jn=jn("tick2"):(Jn=jn(),Tt==="x"&&aa==="b"&&(ge._depth=Math.max(Jn.width>0?Jn.bottom-Ni:0,Oi))));var yc=0,sl=0;if(ge._shiftPusher&&(yc=Math.max(Oi,Jn.height>0?aa==="l"?Ni-Jn.left:Jn.right-Ni:0),ge.title.text!==it._dfltTitle[Tt]&&(sl=(ge._titleStandoff||0)+(ge._titleScoot||0),aa==="l"&&(sl+=Dr(ge))),ge._fullDepth=Math.max(yc,sl)),ge.automargin){yi={x:0,y:0,r:0,l:0,t:0,b:0};var wo=[0,1],dd=typeof ge._shift=="number"?ge._shift:0;if(Tt==="x"){if(aa==="b"?yi[aa]=ge._depth:(yi[aa]=ge._depth=Math.max(Jn.width>0?Ni-Jn.top:0,Oi),wo.reverse()),Jn.width>0){var du=Jn.right-(ge._offset+ge._length);du>0&&(yi.xr=1,yi.r=du);var nh=ge._offset-Jn.left;nh>0&&(yi.xl=0,yi.l=nh)}}else if(aa==="l"?(ge._depth=Math.max(Jn.height>0?Ni-Jn.left:0,Oi),yi[aa]=ge._depth-dd):(ge._depth=Math.max(Jn.height>0?Jn.right-Ni:0,Oi),yi[aa]=ge._depth+dd,wo.reverse()),Jn.height>0){var xc=Jn.bottom-(ge._offset+ge._length);xc>0&&(yi.yb=0,yi.b=xc);var ih=ge._offset-Jn.top;ih>0&&(yi.yt=1,yi.t=ih)}yi[Rt]=ge.anchor==="free"?ge.position:ge._anchorAxis.domain[wo[0]],ge.title.text!==it._dfltTitle[Tt]&&(yi[aa]+=Dr(ge)+(ge.title.standoff||0)),ge.mirror&&ge.anchor!=="free"&&(ks={x:0,y:0,r:0,l:0,t:0,b:0},ks[Ss]=ge.linewidth,ge.mirror&&ge.mirror!==!0&&(ks[Ss]+=Oi),ge.mirror===!0||ge.mirror==="ticks"?ks[Rt]=ge._anchorAxis.domain[wo[1]]:(ge.mirror==="all"||ge.mirror==="allticks")&&(ks[Rt]=[ge._counterDomainMin,ge._counterDomainMax][wo[1]]))}_s&&(Bo=p.getComponentMethod("rangeslider","autoMarginOpts")(we,ge)),typeof ge.automargin=="string"&&(at(yi,ge.automargin),at(ks,ge.automargin)),u.autoMargin(we,Wr(ge),yi),u.autoMargin(we,Or(ge),ks),u.autoMargin(we,qr(ge),Bo)}),v.syncOrAsync(Pi)}};function at(we,ge){if(we){var pt=Object.keys(pe).reduce(function(ft,Xe){return ge.indexOf(Xe)!==-1&&pe[Xe].forEach(function(Qe){ft[Qe]=1}),ft},{});Object.keys(we).forEach(function(ft){pt[ft]||(ft.length===1?we[ft]=0:delete we[ft])})}}function dt(we,ge){var pt=[],ft,Xe=function(Qe,st){var At=Qe.xbnd[st];At!==null&&pt.push(v.extendFlat({},Qe,{x:At}))};if(ge.length){for(ft=0;ft<ge.length;ft++)Xe(ge[ft],0);Xe(ge[ft-1],1)}return pt}function Mt(we,ge){for(var pt=[],ft={},Xe=0;Xe<ge.length;Xe++){var Qe=ge[Xe];ft[Qe.text2]?ft[Qe.text2].push(Qe.x):ft[Qe.text2]=[Qe.x]}for(var st in ft)pt.push(rr(we,v.interp(ft[st],.5),st));return pt}function Nt(we,ge){var pt=[],ft,Xe,Qe=ge.length&&ge[ge.length-1].x<ge[0].x,st=function(it,bt){var Tt=it.xbnd[bt];Tt!==null&&pt.push(v.extendFlat({},it,{x:Tt}))};if(we.showdividers&&ge.length){for(ft=0;ft<ge.length;ft++){var At=ge[ft];At.text2!==Xe&&st(At,Qe?1:0),Xe=At.text2}st(ge[ft-1],Qe?0:1)}return pt}function ot(we,ge,pt){var ft,Xe,Qe,st;if(we._selections[ge].size())ft=1/0,Xe=-1/0,Qe=1/0,st=-1/0,we._selections[ge].each(function(){var it=br(this),bt=T.bBox(it.node().parentNode);ft=Math.min(ft,bt.top),Xe=Math.max(Xe,bt.bottom),Qe=Math.min(Qe,bt.left),st=Math.max(st,bt.right)});else{var At=G.makeLabelFns(we,pt);ft=Xe=At.yFn({dx:0,dy:0,fontSize:0}),Qe=st=At.xFn({dx:0,dy:0,fontSize:0})}return{top:ft,bottom:Xe,left:Qe,right:st,height:Xe-ft,width:st-Qe}}G.getTickSigns=function(we,ge){var pt=we._id.charAt(0),ft={x:"top",y:"right"}[pt],Xe=we.side===ft?1:-1,Qe=[-1,1,Xe,-Xe],st=ge?(we.minor||{}).ticks:we.ticks;return st!=="inside"==(pt==="x")&&(Qe=Qe.map(function(At){return-At})),we.side&&Qe.push({l:-1,t:-1,r:1,b:1}[we.side.charAt(0)]),Qe},G.makeTransTickFn=function(we){return we._id.charAt(0)==="x"?function(ge){return m(we._offset+we.l2p(ge.x),0)}:function(ge){return m(0,we._offset+we.l2p(ge.x))}},G.makeTransTickLabelFn=function(we){var ge=Ut(we),pt=we.ticklabelshift||0,ft=we.ticklabelstandoff||0,Xe=ge[0],Qe=ge[1],st=we.range[0]>we.range[1],At=we.ticklabelposition&&we.ticklabelposition.indexOf("inside")!==-1,it=!At;if(pt){var bt=st?-1:1;pt=pt*bt}if(ft){var Tt=we.side,Rt=At&&(Tt==="top"||Tt==="left")||it&&(Tt==="bottom"||Tt==="right")?1:-1;ft=ft*Rt}return we._id.charAt(0)==="x"?function(tr){return m(Xe+we._offset+we.l2p(jt(tr))+pt,Qe+ft)}:function(tr){return m(Qe+ft,Xe+we._offset+we.l2p(jt(tr))+pt)}};function jt(we){return we.periodX!==void 0?we.periodX:we.x}function Ut(we){var ge=we.ticklabelposition||"",pt=function(ur){return ge.indexOf(ur)!==-1},ft=pt("top"),Xe=pt("left"),Qe=pt("right"),st=pt("bottom"),At=pt("inside"),it=st||Xe||ft||Qe;if(!it&&!At)return[0,0];var bt=we.side,Tt=it?(we.tickwidth||0)/2:0,Rt=ae,tr=we.tickfont?we.tickfont.size:12;return(st||ft)&&(Tt+=tr*Ae,Rt+=(we.linewidth||0)/2),(Xe||Qe)&&(Tt+=(we.linewidth||0)/2,Rt+=ae),At&&bt==="top"&&(Rt-=tr*(1-Ae)),(Xe||ft)&&(Tt=-Tt),(bt==="bottom"||bt==="right")&&(Rt=-Rt),[it?Tt:0,At?Rt:0]}G.makeTickPath=function(we,ge,pt,ft){ft||(ft={});var Xe=ft.minor;if(Xe&&!we.minor)return"";var Qe=ft.len!==void 0?ft.len:Xe?we.minor.ticklen:we.ticklen,st=we._id.charAt(0),At=(we.linewidth||1)/2;return st==="x"?"M0,"+(ge+At*pt)+"v"+Qe*pt:"M"+(ge+At*pt)+",0h"+Qe*pt},G.makeLabelFns=function(we,ge,pt){var ft=we.ticklabelposition||"",Xe=function(si){return ft.indexOf(si)!==-1},Qe=Xe("top"),st=Xe("left"),At=Xe("right"),it=Xe("bottom"),bt=it||st||Qe||At,Tt=Xe("inside"),Rt=ft==="inside"&&we.ticks==="inside"||!Tt&&we.ticks==="outside"&&we.tickson!=="boundaries",tr=0,ur=0,fr=Rt?we.ticklen:0;if(Tt?fr*=-1:bt&&(fr=0),Rt&&(tr+=fr,pt)){var Rr=v.deg2rad(pt);tr=fr*Math.cos(Rr)+1,ur=fr*Math.sin(Rr)}we.showticklabels&&(Rt||we.showline)&&(tr+=.2*we.tickfont.size),tr+=(we.linewidth||1)/2*(Tt?-1:1);var wr={labelStandoff:tr,labelShift:ur},Gr,Lr,$r,Xr,jn=0,bn=we.side,pi=we._id.charAt(0),Gn=we.tickangle,ei;if(pi==="x")ei=!Tt&&bn==="bottom"||Tt&&bn==="top",Xr=ei?1:-1,Tt&&(Xr*=-1),Gr=ur*Xr,Lr=ge+tr*Xr,$r=ei?1:-.2,Math.abs(Gn)===90&&(Tt?$r+=Le:Gn===-90&&bn==="bottom"?$r=Ae:Gn===90&&bn==="top"?$r=Le:$r=.5,jn=Le/2*(Gn/90)),wr.xFn=function(si){return si.dx+Gr+jn*si.fontSize},wr.yFn=function(si){return si.dy+Lr+si.fontSize*$r},wr.anchorFn=function(si,yn){if(bt){if(st)return"end";if(At)return"start"}return!c(yn)||yn===0||yn===180?"middle":yn*Xr<0!==Tt?"end":"start"},wr.heightFn=function(si,yn,Vn){return yn<-60||yn>60?-.5*Vn:we.side==="top"!==Tt?-Vn:0};else if(pi==="y"){if(ei=!Tt&&bn==="left"||Tt&&bn==="right",Xr=ei?1:-1,Tt&&(Xr*=-1),Gr=tr,Lr=ur*Xr,$r=0,!Tt&&Math.abs(Gn)===90&&(Gn===-90&&bn==="left"||Gn===90&&bn==="right"?$r=Ae:$r=.5),Tt){var $i=c(Gn)?+Gn:0;if($i!==0){var da=v.deg2rad($i);jn=Math.abs(Math.sin(da))*Ae*Xr,$r=0}}wr.xFn=function(si){return si.dx+ge-(Gr+si.fontSize*$r)*Xr+jn*si.fontSize},wr.yFn=function(si){return si.dy+Lr+si.fontSize*Le},wr.anchorFn=function(si,yn){return c(yn)&&Math.abs(yn)===90?"middle":ei?"end":"start"},wr.heightFn=function(si,yn,Vn){return we.side==="right"&&(yn*=-1),yn<-30?-Vn:yn<30?-.5*Vn:0}}return wr};function Gt(we){return[we.text,we.x,we.axInfo,we.font,we.fontSize,we.fontColor].join("_")}G.drawTicks=function(we,ge,pt){pt=pt||{};var ft=ge._id+"tick",Xe=[].concat(ge.minor&&ge.minor.ticks?pt.vals.filter(function(st){return st.minor&&!st.noTick}):[]).concat(ge.ticks?pt.vals.filter(function(st){return!st.minor&&!st.noTick}):[]),Qe=pt.layer.selectAll("path."+ft).data(Xe,Gt);Qe.exit().remove(),Qe.enter().append("path").classed(ft,1).classed("ticks",1).classed("crisp",pt.crisp!==!1).each(function(st){return o.stroke(h.select(this),st.minor?ge.minor.tickcolor:ge.tickcolor)}).style("stroke-width",function(st){return T.crispRound(we,st.minor?ge.minor.tickwidth:ge.tickwidth,1)+"px"}).attr("d",pt.path).style("display",null),mn(ge,[de]),Qe.attr("transform",pt.transFn)},G.drawGrid=function(we,ge,pt){if(pt=pt||{},ge.tickmode!=="sync"){var ft=ge._id+"grid",Xe=ge.minor&&ge.minor.showgrid,Qe=Xe?pt.vals.filter(function(Gr){return Gr.minor}):[],st=ge.showgrid?pt.vals.filter(function(Gr){return!Gr.minor}):[],At=pt.counterAxis;if(At&&G.shouldShowZeroLine(we,ge,At))for(var it=ge.tickmode==="array",bt=0;bt<st.length;bt++){var Tt=st[bt].x;if(it?!Tt:Math.abs(Tt)<ge.dtick/100)if(st=st.slice(0,bt).concat(st.slice(bt+1)),it)bt--;else break}ge._gw=T.crispRound(we,ge.gridwidth,1);for(var Rt=Xe?T.crispRound(we,ge.minor.gridwidth,1):0,tr=pt.layer,ur=pt.minorLayer,fr=1;fr>=0;fr--){var Rr=fr?tr:ur;if(Rr){var wr=Rr.selectAll("path."+ft).data(fr?st:Qe,Gt);wr.exit().remove(),wr.enter().append("path").classed(ft,1).classed("crisp",pt.crisp!==!1),wr.attr("transform",pt.transFn).attr("d",pt.path).each(function(Gr){return o.stroke(h.select(this),Gr.minor?ge.minor.gridcolor:ge.gridcolor||"#ddd")}).style("stroke-dasharray",function(Gr){return T.dashStyle(Gr.minor?ge.minor.griddash:ge.griddash,Gr.minor?ge.minor.gridwidth:ge.gridwidth)}).style("stroke-width",function(Gr){return(Gr.minor?Rt:ge._gw)+"px"}).style("display",null),typeof pt.path=="function"&&wr.attr("d",pt.path)}}mn(ge,[W,ce])}},G.drawZeroLine=function(we,ge,pt){pt=pt||pt;var ft=ge._id+"zl",Xe=G.shouldShowZeroLine(we,ge,pt.counterAxis),Qe=pt.layer.selectAll("path."+ft).data(Xe?[{x:0,id:ge._id}]:[]);Qe.exit().remove(),Qe.enter().append("path").classed(ft,1).classed("zl",1).classed("crisp",pt.crisp!==!1).each(function(){pt.layer.selectAll("path").sort(function(st,At){return re(st.id,At.id)})}),Qe.attr("transform",pt.transFn).attr("d",pt.path).call(o.stroke,ge.zerolinecolor||o.defaultLine).style("stroke-width",T.crispRound(we,ge.zerolinewidth,ge._gw||1)+"px").style("display",null),mn(ge,[le])},G.drawLabels=function(we,ge,pt){pt=pt||{};var ft=we._fullLayout,Xe=ge._id,Qe=pt.cls||Xe+"tick",st=pt.vals.filter(function(Ln){return Ln.text}),At=pt.labelFns,it=pt.secondary?0:ge.tickangle,bt=(ge._prevTickAngles||{})[Qe],Tt=pt.layer.selectAll("g."+Qe).data(ge.showticklabels?st:[],Gt),Rt=[];Tt.enter().append("g").classed(Qe,1).append("text").attr("text-anchor","middle").each(function(Ln){var In=h.select(this),Nn=we._promises.length;In.call(g.positionText,At.xFn(Ln),At.yFn(Ln)).call(T.font,{family:Ln.font,size:Ln.fontSize,color:Ln.fontColor,weight:Ln.fontWeight,style:Ln.fontStyle,variant:Ln.fontVariant,textcase:Ln.fontTextcase,lineposition:Ln.fontLineposition,shadow:Ln.fontShadow}).text(Ln.text).call(g.convertToTspans,we),we._promises[Nn]?Rt.push(we._promises.pop().then(function(){tr(In,it)})):tr(In,it)}),mn(ge,[ve]),Tt.exit().remove(),pt.repositionOnUpdate&&Tt.each(function(Ln){h.select(this).select("text").call(g.positionText,At.xFn(Ln),At.yFn(Ln))});function tr(Ln,In){Ln.each(function(Nn){var vi=h.select(this),bi=vi.select(".text-math-group"),Li=At.anchorFn(Nn,In),Ei=pt.transFn.call(vi.node(),Nn)+(c(In)&&+In!=0?" rotate("+In+","+At.xFn(Nn)+","+(At.yFn(Nn)-Nn.fontSize/2)+")":""),gi=g.lineCount(vi),Ea=We*Nn.fontSize,Gi=At.heightFn(Nn,c(In)?+In:0,(gi-1)*Ea);if(Gi&&(Ei+=m(0,Gi)),bi.empty()){var Ji=vi.select("text");Ji.attr({transform:Ei,"text-anchor":Li}),Ji.style("opacity",1),ge._adjustTickLabelsOverflow&&ge._adjustTickLabelsOverflow()}else{var Da=T.bBox(bi.node()).width,ai=Da*{end:-.5,start:.5}[Li];bi.attr("transform",Ei+m(ai,0))}})}ge._adjustTickLabelsOverflow=function(){var Ln=ge.ticklabeloverflow;if(!(!Ln||Ln==="allow")){var In=Ln.indexOf("hide")!==-1,Nn=ge._id.charAt(0)==="x",vi=0,bi=Nn?we._fullLayout.width:we._fullLayout.height;if(Ln.indexOf("domain")!==-1){var Li=v.simpleMap(ge.range,ge.r2l);vi=ge.l2p(Li[0])+ge._offset,bi=ge.l2p(Li[1])+ge._offset}var Ei=Math.min(vi,bi),gi=Math.max(vi,bi),Ea=ge.side,Gi=1/0,Ji=-1/0;Tt.each(function(Xa){var os=h.select(this),ls=os.select(".text-math-group");if(ls.empty()){var Za=T.bBox(os.node()),Pi=0;Nn?(Za.right>gi||Za.left<Ei)&&(Pi=1):(Za.bottom>gi||Za.top+(ge.tickangle?0:Xa.fontSize/4)<Ei)&&(Pi=1);var cs=os.select("text");Pi?In&&cs.style("opacity",0):(cs.style("opacity",1),Ea==="bottom"||Ea==="right"?Gi=Math.min(Gi,Nn?Za.top:Za.left):Gi=-1/0,Ea==="top"||Ea==="left"?Ji=Math.max(Ji,Nn?Za.bottom:Za.right):Ji=1/0)}});for(var Da in ft._plots){var ai=ft._plots[Da];if(!(ge._id!==ai.xaxis._id&&ge._id!==ai.yaxis._id)){var Ga=Nn?ai.yaxis:ai.xaxis;Ga&&(Ga["_visibleLabelMin_"+ge._id]=Gi,Ga["_visibleLabelMax_"+ge._id]=Ji)}}}},ge._hideCounterAxisInsideTickLabels=function(Ln){var In=ge._id.charAt(0)==="x",Nn=[];for(var vi in ft._plots){var bi=ft._plots[vi];ge._id!==bi.xaxis._id&&ge._id!==bi.yaxis._id||Nn.push(In?bi.yaxis:bi.xaxis)}Nn.forEach(function(Li,Ei){Li&&pn(Li)&&(Ln||[le,ce,W,de,ve]).forEach(function(gi){var Ea=gi.K==="tick"&&gi.L==="text"&&ge.ticklabelmode==="period",Gi=ft._plots[ge._mainSubplot],Ji;gi.K===le.K?Ji=Gi.zerolinelayer.selectAll("."+ge._id+"zl"):gi.K===ce.K?Ji=Gi.minorGridlayer.selectAll("."+ge._id):gi.K===W.K?Ji=Gi.gridlayer.selectAll("."+ge._id):Ji=Gi[ge._id.charAt(0)+"axislayer"],Ji.each(function(){var Da=h.select(this);gi.L&&(Da=Da.selectAll(gi.L)),Da.each(function(ai){var Ga=ge.l2p(Ea?jt(ai):ai.x)+ge._offset,Xa=h.select(this);Ga<ge["_visibleLabelMax_"+Li._id]&&Ga>ge["_visibleLabelMin_"+Li._id]?Xa.style("display","none"):gi.K==="tick"&&!Ei&&Xa.style("display",null)})})})})},tr(Tt,bt+1?bt:it);function ur(){return Rt.length&&Promise.all(Rt)}var fr=null;function Rr(){if(tr(Tt,it),st.length&&ge.autotickangles&&(ge.type!=="log"||String(ge.dtick).charAt(0)!=="D")){fr=ge.autotickangles[0];var Ln=0,In=[],Nn,vi=1;Tt.each(function(Jn){Ln=Math.max(Ln,Jn.fontSize);var yi=ge.l2p(Jn.x),ks=br(this),Bo=T.bBox(ks.node());vi=Math.max(vi,g.lineCount(ks)),In.push({top:0,bottom:10,height:10,left:yi-Bo.width/2,right:yi+Bo.width/2+2,width:Bo.width+2})});var bi=(ge.tickson==="boundaries"||ge.showdividers)&&!pt.secondary,Li=st.length,Ei=Math.abs((st[Li-1].x-st[0].x)*ge._m)/(Li-1),gi=bi?Ei/2:Ei,Ea=bi?ge.ticklen:Ln*1.25*vi,Gi=Math.sqrt(Math.pow(gi,2)+Math.pow(Ea,2)),Ji=gi/Gi,Da=ge.autotickangles.map(function(Jn){return Jn*Math.PI/180}),ai=Da.find(function(Jn){return Math.abs(Math.cos(Jn))<=Ji});ai===void 0&&(ai=Da.reduce(function(Jn,yi){return Math.abs(Math.cos(Jn))<Math.abs(Math.cos(yi))?Jn:yi},Da[0]));var Ga=ai*(180/Math.PI);if(bi){var Xa=2;for(ge.ticks&&(Xa+=ge.tickwidth/2),Nn=0;Nn<In.length;Nn++){var os=st[Nn].xbnd,ls=In[Nn];if(os[0]!==null&&ls.left-ge.l2p(os[0])<Xa||os[1]!==null&&ge.l2p(os[1])-ls.right<Xa){fr=Ga;break}}}else{var Za=ge.ticklabelposition||"",Pi=function(Jn){return Za.indexOf(Jn)!==-1},cs=Pi("top"),_s=Pi("left"),aa=Pi("right"),Ss=Pi("bottom"),Ni=Ss||_s||cs||aa,Oi=Ni?(ge.tickwidth||0)+2*ae:0;for(Nn=0;Nn<In.length-1;Nn++)if(v.bBoxIntersect(In[Nn],In[Nn+1],Oi)){fr=Ga;break}}fr&&tr(Tt,fr)}}ge._selections&&(ge._selections[Qe]=Tt);var wr=[ur];ge.automargin&&ft._redrawFromAutoMarginCount&&bt===90?(fr=bt,wr.push(function(){tr(Tt,bt)})):wr.push(Rr),ge._tickAngles&&wr.push(function(){ge._tickAngles[Qe]=fr===null?c(it)?it:0:fr});var Gr=function(){var Ln=0,In=0;return Tt.each(function(Nn,vi){var bi=br(this),Li=bi.select(".text-math-group");if(Li.empty()){var Ei;ge._vals[vi]&&(Ei=ge._vals[vi].bb||T.bBox(bi.node()),ge._vals[vi].bb=Ei),Ln=Math.max(Ln,Ei.width),In=Math.max(In,Ei.height)}}),{labelsMaxW:Ln,labelsMaxH:In}},Lr=ge._anchorAxis;if(Lr&&(Lr.autorange||Lr.insiderange)&&pn(ge)&&!R(ft,ge._id)&&(ft._insideTickLabelsUpdaterange||(ft._insideTickLabelsUpdaterange={}),Lr.autorange&&(ft._insideTickLabelsUpdaterange[Lr._name+".autorange"]=Lr.autorange,wr.push(Gr)),Lr.insiderange)){var $r=Gr(),Xr=ge._id.charAt(0)==="y"?$r.labelsMaxW:$r.labelsMaxH;Xr+=2*ae,ge.ticklabelposition==="inside"&&(Xr+=ge.ticklen||0);var jn=ge.side==="right"||ge.side==="top"?1:-1,bn=jn===1?1:0,pi=jn===1?0:1,Gn=[];Gn[pi]=Lr.range[pi];var ei=Lr.range,$i=Lr.r2p(ei[bn]),da=Lr.r2p(ei[pi]),si=ft._insideTickLabelsUpdaterange[Lr._name+".range"];if(si){var yn=Lr.r2p(si[bn]),Vn=Lr.r2p(si[pi]),ci=jn*(ge._id.charAt(0)==="y"?1:-1);ci*$i<ci*yn&&($i=yn,Gn[bn]=ei[bn]=si[bn]),ci*da>ci*Vn&&(da=Vn,Gn[pi]=ei[pi]=si[pi])}var Yi=Math.abs(da-$i);Yi-Xr>0?(Yi-=Xr,Xr*=1+Xr/Yi):Xr=0,ge._id.charAt(0)!=="y"&&(Xr=-Xr),Gn[bn]=Lr.p2r(Lr.r2p(ei[bn])+jn*Xr),Lr.autorange==="min"||Lr.autorange==="max reversed"?(Gn[0]=null,Lr._rangeInitial0=void 0,Lr._rangeInitial1=void 0):(Lr.autorange==="max"||Lr.autorange==="min reversed")&&(Gn[1]=null,Lr._rangeInitial0=void 0,Lr._rangeInitial1=void 0),ft._insideTickLabelsUpdaterange[Lr._name+".range"]=Gn}var Ii=v.syncOrAsync(wr);return Ii&&Ii.then&&we._promises.push(Ii),Ii};function Tr(we,ge,pt){var ft=ge._id+"divider",Xe=pt.vals,Qe=pt.layer.selectAll("path."+ft).data(Xe,Gt);Qe.exit().remove(),Qe.enter().insert("path",":first-child").classed(ft,1).classed("crisp",1).call(o.stroke,ge.dividercolor).style("stroke-width",T.crispRound(we,ge.dividerwidth,1)+"px"),Qe.attr("transform",pt.transFn).attr("d",pt.path)}G.getPxPosition=function(we,ge){var pt=we._fullLayout._size,ft=ge._id.charAt(0),Xe=ge.side,Qe;if(ge.anchor!=="free"?Qe=ge._anchorAxis:ft==="x"?Qe={_offset:pt.t+(1-(ge.position||0))*pt.h,_length:0}:ft==="y"&&(Qe={_offset:pt.l+(ge.position||0)*pt.w+ge._shift,_length:0}),Xe==="top"||Xe==="left")return Qe._offset;if(Xe==="bottom"||Xe==="right")return Qe._offset+Qe._length};function Dr(we){var ge=we.title.font.size,pt=(we.title.text.match(g.BR_TAG_ALL)||[]).length;return we.title.hasOwnProperty("standoff")?ge*(Ae+pt*We):pt?ge*(pt+1)*We:ge}function Vr(we,ge){var pt=we._fullLayout,ft=ge._id,Xe=ft.charAt(0),Qe=ge.title.font.size,st,At=(ge.title.text.match(g.BR_TAG_ALL)||[]).length;if(ge.title.hasOwnProperty("standoff"))ge.side==="bottom"||ge.side==="right"?st=ge._depth+ge.title.standoff+Qe*Ae:(ge.side==="top"||ge.side==="left")&&(st=ge._depth+ge.title.standoff+Qe*(Le+At*We));else{var it=pn(ge);if(ge.type==="multicategory")st=ge._depth;else{var bt=1.5*Qe;it&&(bt=.5*Qe,ge.ticks==="outside"&&(bt+=ge.ticklen)),st=10+bt+(ge.linewidth?ge.linewidth-1:0)}it||(Xe==="x"?st+=ge.side==="top"?Qe*(ge.showticklabels?1:0):Qe*(ge.showticklabels?1.5:.5):st+=ge.side==="right"?Qe*(ge.showticklabels?1:.5):Qe*(ge.showticklabels?.5:0))}var Tt=G.getPxPosition(we,ge),Rt,tr,ur;Xe==="x"?(tr=ge._offset+ge._length/2,ur=ge.side==="top"?Tt-st:Tt+st):(ur=ge._offset+ge._length/2,tr=ge.side==="right"?Tt+st:Tt-st,Rt={rotate:"-90",offset:0});var fr;if(ge.type!=="multicategory"){var Rr=ge._selections[ge._id+"tick"];if(fr={selection:Rr,side:ge.side},Rr&&Rr.node()&&Rr.node().parentNode){var wr=T.getTranslate(Rr.node().parentNode);fr.offsetLeft=wr.x,fr.offsetTop=wr.y}ge.title.hasOwnProperty("standoff")&&(fr.pad=0)}return ge._titleStandoff=st,w.draw(we,ft+"title",{propContainer:ge,propName:ge._name+".title.text",placeholder:pt._dfltTitle[Xe],avoid:fr,transform:Rt,attributes:{x:tr,y:ur,"text-anchor":"middle"}})}G.shouldShowZeroLine=function(we,ge,pt){var ft=v.simpleMap(ge.range,ge.r2l);return ft[0]*ft[1]<=0&&ge.zeroline&&(ge.type==="linear"||ge.type==="-")&&!(ge.rangebreaks&&ge.maskBreaks(0)===ne)&&(Mr(ge,0)||!Fr(we,ge,pt,ft)||xr(we,ge))},G.clipEnds=function(we,ge){return ge.filter(function(pt){return Mr(we,pt.x)})};function Mr(we,ge){var pt=we.l2p(ge);return pt>1&&pt<we._length-1}function Fr(we,ge,pt,ft){var Xe=pt._mainAxis;if(!Xe)return;var Qe=we._fullLayout,st=ge._id.charAt(0),At=G.counterLetter(ge._id),it=ge._offset+(Math.abs(ft[0])<Math.abs(ft[1])==(st==="x")?0:ge._length);function bt(fr){if(!fr.showline||!fr.linewidth)return!1;var Rr=Math.max((fr.linewidth+ge.zerolinewidth)/2,1);function wr($r){return typeof $r=="number"&&Math.abs($r-it)<Rr}if(wr(fr._mainLinePosition)||wr(fr._mainMirrorPosition))return!0;var Gr=fr._linepositions||{};for(var Lr in Gr)if(wr(Gr[Lr][0])||wr(Gr[Lr][1]))return!0}var Tt=Qe._plots[pt._mainSubplot];if(!(Tt.mainplotinfo||Tt).overlays.length)return bt(pt);for(var Rt=G.list(we,At),tr=0;tr<Rt.length;tr++){var ur=Rt[tr];if(ur._mainAxis===Xe&&bt(ur))return!0}}function xr(we,ge){for(var pt=we._fullData,ft=ge._mainSubplot,Xe=ge._id.charAt(0),Qe=0;Qe<pt.length;Qe++){var st=pt[Qe];if(st.visible===!0&&st.xaxis+st.yaxis===ft&&(p.traceIs(st,"bar-like")&&st.orientation==={x:"h",y:"v"}[Xe]||st.fill&&st.fill.charAt(st.fill.length-1)===Xe))return!0}return!1}function br(we){var ge=h.select(we),pt=ge.select(".text-math-group");return pt.empty()?ge.select("text"):pt}G.allowAutoMargin=function(we){for(var ge=G.list(we,"",!0),pt=0;pt<ge.length;pt++){var ft=ge[pt];ft.automargin&&(u.allowAutoMargin(we,Wr(ft)),ft.mirror&&u.allowAutoMargin(we,Or(ft))),p.getComponentMethod("rangeslider","isVisible")(ft)&&u.allowAutoMargin(we,qr(ft))}};function Wr(we){return we._id+".automargin"}function Or(we){return Wr(we)+".mirror"}function qr(we){return we._id+".rangeslider"}G.swap=function(we,ge){for(var pt=Er(we,ge),ft=0;ft<pt.length;ft++)Ir(we,pt[ft].x,pt[ft].y)};function Er(we,ge){var pt=[],ft,Xe;for(ft=0;ft<ge.length;ft++){var Qe=[],st=we._fullData[ge[ft]].xaxis,At=we._fullData[ge[ft]].yaxis;if(!(!st||!At)){for(Xe=0;Xe<pt.length;Xe++)(pt[Xe].x.indexOf(st)!==-1||pt[Xe].y.indexOf(At)!==-1)&&Qe.push(Xe);if(!Qe.length){pt.push({x:[st],y:[At]});continue}var it=pt[Qe[0]],bt;if(Qe.length>1)for(Xe=1;Xe<Qe.length;Xe++)bt=pt[Qe[Xe]],vr(it.x,bt.x),vr(it.y,bt.y);vr(it.x,[st]),vr(it.y,[At])}}return pt}function vr(we,ge){for(var pt=0;pt<ge.length;pt++)we.indexOf(ge[pt])===-1&&we.push(ge[pt])}function Ir(we,ge,pt){var ft=[],Xe=[],Qe=we.layout,st,At;for(st=0;st<ge.length;st++)ft.push(G.getFromId(we,ge[st]));for(st=0;st<pt.length;st++)Xe.push(G.getFromId(we,pt[st]));var it=Object.keys(y),bt=["anchor","domain","overlaying","position","side","tickangle","editType"],Tt=["linear","log"];for(st=0;st<it.length;st++){var Rt=it[st],tr=ft[0][Rt],ur=Xe[0][Rt],fr=!0,Rr=!1,wr=!1;if(!(Rt.charAt(0)==="_"||typeof tr=="function"||bt.indexOf(Rt)!==-1)){for(At=1;At<ft.length&&fr;At++){var Gr=ft[At][Rt];Rt==="type"&&Tt.indexOf(tr)!==-1&&Tt.indexOf(Gr)!==-1&&tr!==Gr?Rr=!0:Gr!==tr&&(fr=!1)}for(At=1;At<Xe.length&&fr;At++){var Lr=Xe[At][Rt];Rt==="type"&&Tt.indexOf(ur)!==-1&&Tt.indexOf(Lr)!==-1&&ur!==Lr?wr=!0:Xe[At][Rt]!==ur&&(fr=!1)}fr&&(Rr&&(Qe[ft[0]._name].type="linear"),wr&&(Qe[Xe[0]._name].type="linear"),ln(Qe,Rt,ft,Xe,we._fullLayout._dfltTitle))}}for(st=0;st<we._fullLayout.annotations.length;st++){var $r=we._fullLayout.annotations[st];ge.indexOf($r.xref)!==-1&&pt.indexOf($r.yref)!==-1&&v.swapAttrs(Qe.annotations[st],["?"])}}function ln(we,ge,pt,ft,Xe){var Qe=v.nestedProperty,st=Qe(we[pt[0]._name],ge).get(),At=Qe(we[ft[0]._name],ge).get(),it;for(ge==="title"&&(st&&st.text===Xe.x&&(st.text=Xe.y),At&&At.text===Xe.y&&(At.text=Xe.x)),it=0;it<pt.length;it++)Qe(we,pt[it]._name+"."+ge).set(At);for(it=0;it<ft.length;it++)Qe(we,ft[it]._name+"."+ge).set(st)}function kn(we){return we._id==="angularaxis"}function Hr(we,ge){for(var pt=ge._rangebreaks.length,ft=0;ft<pt;ft++){var Xe=ge._rangebreaks[ft];if(we>=Xe.min&&we<Xe.max)return Xe.max}return we}function pn(we){return(we.ticklabelposition||"").indexOf("inside")!==-1}function mn(we,ge){pn(we._anchorAxis||{})&&we._hideCounterAxisInsideTickLabels&&we._hideCounterAxisInsideTickLabels(ge)}function Un(we,ge,pt,ft){var Xe=we.anchor!=="free"&&(we.overlaying===void 0||we.overlaying===!1)?we._id:we.overlaying,Qe;ft?Qe=we.side==="right"?ge:-ge:Qe=ge,Xe in pt||(pt[Xe]={}),we.side in pt[Xe]||(pt[Xe][we.side]=0),pt[Xe][we.side]+=Qe}function gr(we,ge){return we.autoshift?ge[we.overlaying][we.side]:we.shift||0}function Cn(we,ge){return/%f/.test(ge)?we>=K:/%L/.test(ge)?we>=X:/%[SX]/.test(ge)?we>=q:/%M/.test(ge)?we>=z:/%[HI]/.test(ge)?we>=Z:/%p/.test(ge)?we>=Y:/%[Aadejuwx]/.test(ge)?we>=H:/%[UVW]/.test(ge)?we>=J:/%[Bbm]/.test(ge)?we>=P:/%[q]/.test(ge)?we>=S:/%[Yy]/.test(ge)?we>=C:!0}}}),zf=i({"src/plots/cartesian/autorange_options_defaults.js"(V,$){$.exports=function(c,u,p){var v,m;if(p){var g=u==="reversed"||u==="min reversed"||u==="max reversed";v=p[g?1:0],m=p[g?0:1]}var w=c("autorangeoptions.minallowed",m===null?v:void 0),o=c("autorangeoptions.maxallowed",v===null?m:void 0);w===void 0&&c("autorangeoptions.clipmin"),o===void 0&&c("autorangeoptions.clipmax"),c("autorangeoptions.include")}}}),Ju=i({"src/plots/cartesian/range_defaults.js"(V,$){var h=zf();$.exports=function(u,p,v,m){var g=p._template||{},w=p.type||g.type||"-";v("minallowed"),v("maxallowed");var o=v("range");if(!o){var T;!m.noInsiderange&&w!=="log"&&(T=v("insiderange"),T&&(T[0]===null||T[1]===null)&&(p.insiderange=!1,T=void 0),T&&(o=v("range",T)))}var y=p.getAutorangeDflt(o,m),k=v("autorange",y),D;o&&(o[0]===null&&o[1]===null||(o[0]===null||o[1]===null)&&(k==="reversed"||k===!0)||o[0]!==null&&(k==="min"||k==="max reversed")||o[1]!==null&&(k==="max"||k==="min reversed"))&&(o=void 0,delete p.range,p.autorange=!0,D=!0),D||(y=p.getAutorangeDflt(o,m),k=v("autorange",y)),k&&(h(v,k,o),(w==="linear"||w==="-")&&v("rangemode")),p.cleanRange()}}}),Ff=i({"node_modules/mouse-event-offset/index.js"(V,$){var h={left:0,top:0};$.exports=c;function c(p,v,m){v=v||p.currentTarget||p.srcElement,Array.isArray(m)||(m=[0,0]);var g=p.clientX||0,w=p.clientY||0,o=u(v);return m[0]=g-o.left,m[1]=w-o.top,m}function u(p){return p===window||p===document||p===document.body?h:p.getBoundingClientRect()}}}),Qu=i({"node_modules/has-passive-events/index.js"(V,$){var h=no();function c(){var u=!1;try{var p=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,p),window.removeEventListener("test",null,p)}catch{u=!1}return u}$.exports=h&&c()}}),If=i({"src/components/dragelement/align.js"(V,$){$.exports=function(c,u,p,v,m){var g=(c-p)/(v-p),w=g+u/(v-p),o=(g+w)/2;return m==="left"||m==="bottom"?g:m==="center"||m==="middle"?o:m==="right"||m==="top"?w:g<2/3-o?g:w>4/3-o?w:o}}}),Of=i({"src/components/dragelement/cursor.js"(V,$){var h=_r(),c=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(p,v,m,g){return m==="left"?p=0:m==="center"?p=1:m==="right"?p=2:p=h.constrain(Math.floor(p*3),0,2),g==="bottom"?v=0:g==="middle"?v=1:g==="top"?v=2:v=h.constrain(Math.floor(v*3),0,2),c[v][p]}}}),Bf=i({"src/components/dragelement/unhover.js"(V,$){var h=Na(),c=on(),u=Kn().getGraphDiv,p=mr(),v=$.exports={};v.wrapped=function(m,g,w){m=u(m),m._fullLayout&&c.clear(m._fullLayout._uid+p.HOVERID),v.raw(m,g,w)},v.raw=function(g,w){var o=g._fullLayout,T=g._hoverdata;w||(w={}),!(w.target&&!g._dragged&&h.triggerHandler(g,"plotly_beforehover",w)===!1)&&(o._hoverlayer.selectAll("g").remove(),o._hoverlayer.selectAll("line").remove(),o._hoverlayer.selectAll("circle").remove(),g._hoverdata=void 0,w.target&&T&&g.emit("plotly_unhover",{event:w,points:T}))}}}),Ys=i({"src/components/dragelement/index.js"(V,$){var h=Ff(),c=bs(),u=Qu(),p=_r().removeElement,v=Yr(),m=$.exports={};m.align=If(),m.getCursor=Of();var g=Bf();m.unhover=g.wrapped,m.unhoverRaw=g.raw,m.init=function(y){var k=y.gd,D=1,M=k._context.doubleClickDelay,A=y.element,C,j,b,S,L,F,P,J;k._mouseDownTime||(k._mouseDownTime=0),A.style.pointerEvents="all",A.onmousedown=Z,u?(A._ontouchstart&&A.removeEventListener("touchstart",A._ontouchstart),A._ontouchstart=Z,A.addEventListener("touchstart",Z,{passive:!1})):A.ontouchstart=Z;function H(X,K,ee){return Math.abs(X)<ee&&(X=0),Math.abs(K)<ee&&(K=0),[X,K]}var Y=y.clampFn||H;function Z(X){k._dragged=!1,k._dragging=!0;var K=o(X);C=K[0],j=K[1],P=X.target,F=X,J=X.buttons===2||X.ctrlKey,typeof X.clientX>"u"&&typeof X.clientY>"u"&&(X.clientX=C,X.clientY=j),b=new Date().getTime(),b-k._mouseDownTime<M?D+=1:(D=1,k._mouseDownTime=b),y.prepFn&&y.prepFn(X,C,j),c&&!J?(L=w(),L.style.cursor=window.getComputedStyle(A).cursor):c||(L=document,S=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(A).cursor),document.addEventListener("mouseup",q),document.addEventListener("touchend",q),y.dragmode!==!1&&(X.preventDefault(),document.addEventListener("mousemove",z),document.addEventListener("touchmove",z,{passive:!1}))}function z(X){X.preventDefault();var K=o(X),ee=y.minDrag||v.MINDRAG,ne=Y(K[0]-C,K[1]-j,ee),le=ne[0],W=ne[1];(le||W)&&(k._dragged=!0,m.unhover(k,X)),k._dragged&&y.moveFn&&!J&&(k._dragdata={element:A,dx:le,dy:W},y.moveFn(le,W))}function q(X){if(delete k._dragdata,y.dragmode!==!1&&(X.preventDefault(),document.removeEventListener("mousemove",z),document.removeEventListener("touchmove",z)),document.removeEventListener("mouseup",q),document.removeEventListener("touchend",q),c?p(L):S&&(L.documentElement.style.cursor=S,S=null),!k._dragging){k._dragged=!1;return}if(k._dragging=!1,new Date().getTime()-k._mouseDownTime>M&&(D=Math.max(D-1,1)),k._dragged)y.doneFn&&y.doneFn();else{var K;F.target===P?K=F:(K={target:P,srcElement:P,toElement:P},Object.keys(F).concat(Object.keys(F.__proto__)).forEach(ee=>{var ne=F[ee];!K[ee]&&typeof ne!="function"&&(K[ee]=ne)})),y.clickFn&&y.clickFn(D,K),J||P.dispatchEvent(new MouseEvent("click",X))}k._dragging=!1,k._dragged=!1}};function w(){var T=document.createElement("div");T.className="dragcover";var y=T.style;return y.position="fixed",y.left=0,y.right=0,y.top=0,y.bottom=0,y.zIndex=999999999,y.background="none",document.body.appendChild(T),T}m.coverSlip=w;function o(T){return h(T.changedTouches?T.changedTouches[0]:T,document.body)}}}),Fo=i({"src/lib/setcursor.js"(V,$){$.exports=function(c,u){(c.attr("class")||"").split(" ").forEach(function(p){p.indexOf("cursor-")===0&&c.classed(p,!1)}),u&&c.classed("cursor-"+u,!0)}}}),Hf=i({"src/lib/override_cursor.js"(V,$){var h=Fo(),c="data-savedcursor",u="!!";$.exports=function(v,m){var g=v.attr(c);if(m){if(!g){for(var w=(v.attr("class")||"").split(" "),o=0;o<w.length;o++){var T=w[o];T.indexOf("cursor-")===0&&v.attr(c,T.substr(7)).classed(T,!1)}v.attr(c)||v.attr(c,u)}h(v,m)}else g&&(v.attr(c,null),g===u?h(v):h(v,g))}}}),ed=i({"src/components/legend/attributes.js"(V,$){var h=ir(),c=It();$.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:h({editType:"legend"}),grouptitlefont:h({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:h({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}}}),eu=i({"src/components/legend/helpers.js"(V){V.isGrouped=function(h){return(h.traceorder||"").indexOf("grouped")!==-1},V.isVertical=function(h){return h.orientation!=="h"},V.isReversed=function(h){return(h.traceorder||"").indexOf("reversed")!==-1}}}),td=i({"src/components/legend/defaults.js"(V,$){var h=xn(),c=_r(),u=hr(),p=vt(),v=ed(),m=Pa(),g=eu();function w(o,T,y,k){var D=T[o]||{},M=u.newContainer(y,o);function A(We,te){return c.coerce(D,M,v,We,te)}var C=c.coerceFont(A,"font",y.font);A("bgcolor",y.paper_bgcolor),A("bordercolor");var j=A("visible");if(j){for(var b,S=function(We,te){var ae=b._input,G=b;return c.coerce(ae,G,p,We,te)},L=y.font||{},F=c.coerceFont(A,"grouptitlefont",L,{overrideDflt:{size:Math.round(L.size*1.1)}}),P=0,J=!1,H="normal",Y=(y.shapes||[]).filter(function(We){return We.showlegend}),Z=k.concat(Y).filter(function(We){return o===(We.legend||"legend")}),z=0;z<Z.length;z++)if(b=Z[z],!!b.visible){var q=b._isShape;(b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&b._module.attributes.showlegend.dflt===!1))&&(P++,b.showlegend&&(J=!0,(!q&&h.traceIs(b,"pie-like")||b._input.showlegend===!0)&&P++),c.coerceFont(S,"legendgrouptitle.font",F)),(!q&&h.traceIs(b,"bar")&&y.barmode==="stack"||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(H=g.isGrouped({traceorder:H})?"grouped+reversed":"reversed"),b.legendgroup!==void 0&&b.legendgroup!==""&&(H=g.isReversed({traceorder:H})?"reversed+grouped":"grouped")}var X=c.coerce(T,y,m,"showlegend",J&&P>(o==="legend"?1:0));if(X===!1&&(y[o]=void 0),!(X===!1&&!D.uirevision)&&(A("uirevision",y.uirevision),X!==!1)){A("borderwidth");var K=A("orientation"),ee=A("yref"),ne=A("xref"),le=K==="h",W=ee==="paper",ce=ne==="paper",de,ve,pe,be="left";le?(de=0,h.getComponentMethod("rangeslider","isVisible")(T.xaxis)?W?(ve=1.1,pe="bottom"):(ve=1,pe="top"):W?(ve=-.1,pe="top"):(ve=0,pe="bottom")):(ve=1,pe="auto",ce?de=1.02:(de=1,be="right")),c.coerce(D,M,{x:{valType:"number",editType:"legend",min:ce?-2:0,max:ce?3:1,dflt:de}},"x"),c.coerce(D,M,{y:{valType:"number",editType:"legend",min:W?-2:0,max:W?3:1,dflt:ve}},"y"),A("traceorder",H),g.isGrouped(y[o])&&A("tracegroupgap"),A("entrywidth"),A("entrywidthmode"),A("indentation"),A("itemsizing"),A("itemwidth"),A("itemclick"),A("itemdoubleclick"),A("groupclick"),A("xanchor",be),A("yanchor",pe),A("valign"),c.noneOrAll(D,M,["x","y"]);var Le=A("title.text");if(Le){A("title.side",le?"left":"top");var Ae=c.extendFlat({},C,{size:c.bigFont(C.size)});c.coerceFont(A,"title.font",Ae)}}}}$.exports=function(T,y,k){var D,M=k.slice(),A=y.shapes;if(A)for(D=0;D<A.length;D++){var C=A[D];if(C.showlegend){var j={_input:C._input,visible:C.visible,showlegend:C.showlegend,legend:C.legend};M.push(j)}}var b=["legend"];for(D=0;D<M.length;D++)c.pushUnique(b,M[D].legend);for(y._legends=[],D=0;D<b.length;D++){var S=b[D];w(S,T,y,M),y[S]&&y[S].visible&&(y[S]._id=S),y._legends.push(S)}}}}),Wf=i({"src/components/legend/handle_click.js"(V,$){var h=xn(),c=_r(),u=c.pushUnique,p=!0;$.exports=function(m,g,w){var o=g._fullLayout;if(g._dragged||g._editing)return;var T=o.legend.itemclick,y=o.legend.itemdoubleclick,k=o.legend.groupclick;w===1&&T==="toggle"&&y==="toggleothers"&&p&&g.data&&g._context.showTips&&c.notifier(c._(g,"Double-click on legend to isolate one trace"),"long"),p=!1;var D;if(w===1?D=T:w===2&&(D=y),!D)return;var M=k==="togglegroup",A=o.hiddenlabels?o.hiddenlabels.slice():[],C=m.data()[0][0];if(C.groupTitle&&C.noClick)return;var j=g._fullData,b=(o.shapes||[]).filter(function(Ce){return Ce.showlegend}),S=j.concat(b),L=C.trace;L._isShape&&(L=L._fullInput);var F=L.legendgroup,P,J,H,Y,Z,z,q={},X=[],K=[],ee=[];function ne(Ce,Ie){var Se=X.indexOf(Ce),Be=q.visible;return Be||(Be=q.visible=[]),X.indexOf(Ce)===-1&&(X.push(Ce),Se=X.length-1),Be[Se]=Ie,Se}var le=(o.shapes||[]).map(function(Ce){return Ce._input}),W=!1;function ce(Ce,Ie){le[Ce].visible=Ie,W=!0}function de(Ce,Ie){if(!(C.groupTitle&&!M)){var Se=Ce._fullInput||Ce,Be=Se._isShape,rt=Se.index;rt===void 0&&(rt=Se._index);var ht=Se.visible===!1?!1:Ie;Be?ce(rt,ht):ne(rt,ht)}}var ve=L.legend,pe=L._fullInput,be=pe&&pe._isShape;if(!be&&h.traceIs(L,"pie-like")){var Le=C.label,Ae=A.indexOf(Le);if(D==="toggle")Ae===-1?A.push(Le):A.splice(Ae,1);else if(D==="toggleothers"){var We=Ae!==-1,te=[];for(P=0;P<g.calcdata.length;P++){var ae=g.calcdata[P];for(J=0;J<ae.length;J++){var G=ae[J],Q=G.label;ve===ae[0].trace.legend&&Le!==Q&&(A.indexOf(Q)===-1&&(We=!0),u(A,Q),te.push(Q))}}if(!We)for(var U=0;U<te.length;U++){var re=A.indexOf(te[U]);re!==-1&&A.splice(re,1)}}h.call("_guiRelayout",g,"hiddenlabels",A)}else{var R=F&&F.length,B=[],oe;if(R)for(P=0;P<S.length;P++)oe=S[P],oe.visible&&oe.legendgroup===F&&B.push(P);if(D==="toggle"){var ie;switch(L.visible){case!0:ie="legendonly";break;case!1:ie=!1;break;case"legendonly":ie=!0;break}if(R)if(M)for(P=0;P<S.length;P++){var xe=S[P];xe.visible!==!1&&xe.legendgroup===F&&de(xe,ie)}else de(L,ie);else de(L,ie)}else if(D==="toggleothers"){var _e,ke,Pe,Ge,Je,yt=!0;for(P=0;P<S.length;P++)if(Je=S[P],_e=Je===L,Pe=Je.showlegend!==!0,!(_e||Pe)&&(ke=R&&Je.legendgroup===F,!ke&&Je.legend===ve&&Je.visible===!0&&!h.traceIs(Je,"notLegendIsolatable"))){yt=!1;break}for(P=0;P<S.length;P++)if(Je=S[P],!(Je.visible===!1||Je.legend!==ve)&&!h.traceIs(Je,"notLegendIsolatable"))switch(L.visible){case"legendonly":de(Je,!0);break;case!0:Ge=yt?!0:"legendonly",_e=Je===L,Pe=Je.showlegend!==!0&&!Je.legendgroup,ke=_e||R&&Je.legendgroup===F,de(Je,ke||Pe?!0:Ge);break}}for(P=0;P<K.length;P++)if(H=K[P],!!H){var lt=H.constructUpdate(),mt=Object.keys(lt);for(J=0;J<mt.length;J++)Y=mt[J],z=q[Y]=q[Y]||[],z[ee[P]]=lt[Y]}for(Z=Object.keys(q),P=0;P<Z.length;P++)for(Y=Z[P],J=0;J<X.length;J++)q[Y].hasOwnProperty(J)||(q[Y][J]=void 0);W?h.call("_guiUpdate",g,q,{shapes:le},X):h.call("_guiRestyle",g,q,X)}}}}),rd=i({"src/components/legend/constants.js"(V,$){$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}}}),qf=i({"src/components/legend/get_legend_data.js"(V,$){var h=xn(),c=eu();$.exports=function(p,v,m){var g=v._inHover,w=c.isGrouped(v),o=c.isReversed(v),T={},y=[],k=!1,D={},M=0,A=0,C,j;function b(de,ve,pe){if(v.visible!==!1&&!(m&&de!==v._id))if(ve===""||!c.isGrouped(v)){var be="~~i"+M;y.push(be),T[be]=[pe],M++}else y.indexOf(ve)===-1?(y.push(ve),k=!0,T[ve]=[pe]):T[ve].push(pe)}for(C=0;C<p.length;C++){var S=p[C],L=S[0],F=L.trace,P=F.legend,J=F.legendgroup;if(!(!g&&(!F.visible||!F.showlegend)))if(h.traceIs(F,"pie-like"))for(D[J]||(D[J]={}),j=0;j<S.length;j++){var H=S[j].label;D[J][H]||(b(P,J,{label:H,color:S[j].color,i:S[j].i,trace:F,pts:S[j].pts}),D[J][H]=!0,A=Math.max(A,(H||"").length))}else b(P,J,L),A=Math.max(A,(F.name||"").length)}if(!y.length)return[];var Y=!k||!w,Z=[];for(C=0;C<y.length;C++){var z=T[y[C]];Y?Z.push(z[0]):Z.push(z)}for(Y&&(Z=[Z]),C=0;C<Z.length;C++){var q=1/0;for(j=0;j<Z[C].length;j++){var X=Z[C][j].trace.legendrank;q>X&&(q=X)}Z[C][0]._groupMinRank=q,Z[C][0]._preGroupSort=C}var K=function(de,ve){return de[0]._groupMinRank-ve[0]._groupMinRank||de[0]._preGroupSort-ve[0]._preGroupSort},ee=function(de,ve){return de.trace.legendrank-ve.trace.legendrank||de._preSort-ve._preSort};for(Z.forEach(function(de,ve){de[0]._preGroupSort=ve}),Z.sort(K),C=0;C<Z.length;C++){Z[C].forEach(function(de,ve){de._preSort=ve}),Z[C].sort(ee);var ne=Z[C][0].trace,le=null;for(j=0;j<Z[C].length;j++){var W=Z[C][j].trace.legendgrouptitle;if(W&&W.text){le=W,g&&(W.font=v._groupTitleFont);break}}if(o&&Z[C].reverse(),le){var ce=!1;for(j=0;j<Z[C].length;j++)if(h.traceIs(Z[C][j].trace,"pie-like")){ce=!0;break}Z[C].unshift({i:-1,groupTitle:le,noClick:ce,trace:{showlegend:ne.showlegend,legendgroup:ne.legendgroup,visible:v.groupclick==="toggleitem"?!0:ne.visible}})}for(j=0;j<Z[C].length;j++)Z[C][j]=[Z[C][j]]}return v._lgroupsLength=Z.length,v._maxNameLength=A,Z}}}),tu=i({"src/traces/pie/helpers.js"(V){var $=_r();function h(c){return c.indexOf("e")!==-1?c.replace(/[.]?0+e/,"e"):c.indexOf(".")!==-1?c.replace(/[.]?0+$/,""):c}V.formatPiePercent=function(u,p){var v=h((u*100).toPrecision(3));return $.numSeparate(v,p)+"%"},V.formatPieValue=function(u,p){var v=h(u.toPrecision(10));return $.numSeparate(v,p)},V.getFirstFilled=function(u,p){if($.isArrayOrTypedArray(u))for(var v=0;v<p.length;v++){var m=u[p[v]];if(m||m===0||m==="")return m}},V.castOption=function(u,p){if($.isArrayOrTypedArray(u))return V.getFirstFilled(u,p);if(u)return u},V.getRotationAngle=function(c){return(c==="auto"?0:c)*Math.PI/180}}}),Uf=i({"src/traces/pie/fill_one.js"(V,$){var h=oi(),c=ut();$.exports=function(p,v,m,g){var w=m.marker.pattern;w&&w.shape?h.pointStyle(p,m,g,v):c.fill(p,v.color)}}}),ru=i({"src/traces/pie/style_one.js"(V,$){var h=ut(),c=tu().castOption,u=Uf();$.exports=function(v,m,g,w){var o=g.marker.line,T=c(o.color,m.pts)||h.defaultLine,y=c(o.width,m.pts)||0;v.call(u,m,g,w).style("stroke-width",y).call(h.stroke,T)}}}),nd=i({"src/components/legend/style.js"(V,$){var h=f(),c=xn(),u=_r(),p=u.strTranslate,v=oi(),m=ut(),g=Ha().extractOpts,w=za(),o=ru(),T=tu().castOption,y=rd(),k=12,D=5,M=2,A=10,C=5;$.exports=function(F,P,J){var H=P._fullLayout;J||(J=H.legend);var Y=J.itemsizing==="constant",Z=J.itemwidth,z=(Z+y.itemGap*2)/2,q=p(z,0),X=function(te,ae,G,Q){var U;if(te+1)U=te;else if(ae&&ae.width>0)U=ae.width;else return 0;return Y?Q:Math.min(U,G)};F.each(function(te){var ae=h.select(this),G=u.ensureSingle(ae,"g","layers");G.style("opacity",te[0].trace.opacity);var Q=J.indentation,U=J.valign,re=te[0].lineHeight,R=te[0].height;if(U==="middle"&&Q===0||!re||!R)G.attr("transform",null);else{var B={top:1,bottom:-1}[U],oe=B*(.5*(re-R+3))||0,ie=J.indentation;G.attr("transform",p(ie,oe))}var xe=G.selectAll("g.legendfill").data([te]);xe.enter().append("g").classed("legendfill",!0);var _e=G.selectAll("g.legendlines").data([te]);_e.enter().append("g").classed("legendlines",!0);var ke=G.selectAll("g.legendsymbols").data([te]);ke.enter().append("g").classed("legendsymbols",!0),ke.selectAll("g.legendpoints").data([te]).enter().append("g").classed("legendpoints",!0)}).each(We).each(ne).each(W).each(le).each(de).each(Le).each(be).each(K).each(ee).each(ve).each(pe);function K(te){var ae=b(te),G=ae.showFill,Q=ae.showLine,U=ae.showGradientLine,re=ae.showGradientFill,R=ae.anyFill,B=ae.anyLine,oe=te[0],ie=oe.trace,xe,_e,ke=g(ie),Pe=ke.colorscale,Ge=ke.reversescale,Je=function(Be){if(Be.size())if(G)v.fillGroupStyle(Be,P,!0);else{var rt="legendfill-"+ie.uid;v.gradient(Be,P,rt,j(Ge),Pe,"fill")}},yt=function(Be){if(Be.size()){var rt="legendline-"+ie.uid;v.lineGroupStyle(Be),v.gradient(Be,P,rt,j(Ge),Pe,"stroke")}},lt=w.hasMarkers(ie)||!R?"M5,0":B?"M5,-2":"M5,-3",mt=h.select(this),Ce=mt.select(".legendfill").selectAll("path").data(G||re?[te]:[]);if(Ce.enter().append("path").classed("js-fill",!0),Ce.exit().remove(),Ce.attr("d",lt+"h"+Z+"v6h-"+Z+"z").call(Je),Q||U){var Ie=X(void 0,ie.line,A,D);_e=u.minExtend(ie,{line:{width:Ie}}),xe=[u.minExtend(oe,{trace:_e})]}var Se=mt.select(".legendlines").selectAll("path").data(Q||U?[xe]:[]);Se.enter().append("path").classed("js-line",!0),Se.exit().remove(),Se.attr("d",lt+(U?"l"+Z+",0.0001":"h"+Z)).call(Q?v.lineGroupStyle:yt)}function ee(te){var ae=b(te),G=ae.anyFill,Q=ae.anyLine,U=ae.showLine,re=ae.showMarker,R=te[0],B=R.trace,oe=!re&&!Q&&!G&&w.hasText(B),ie,xe;function _e(Ce,Ie,Se,Be){var rt=u.nestedProperty(B,Ce).get(),ht=u.isArrayOrTypedArray(rt)&&Ie?Ie(rt):rt;if(Y&&ht&&Be!==void 0&&(ht=Be),Se){if(ht<Se[0])return Se[0];if(ht>Se[1])return Se[1]}return ht}function ke(Ce){return R._distinct&&R.index&&Ce[R.index]?Ce[R.index]:Ce[0]}if(re||oe||U){var Pe={},Ge={};if(re){Pe.mc=_e("marker.color",ke),Pe.mx=_e("marker.symbol",ke),Pe.mo=_e("marker.opacity",u.mean,[.2,1]),Pe.mlc=_e("marker.line.color",ke),Pe.mlw=_e("marker.line.width",u.mean,[0,5],M),Ge.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Je=_e("marker.size",u.mean,[2,16],k);Pe.ms=Je,Ge.marker.size=Je}U&&(Ge.line={width:_e("line.width",ke,[0,10],D)}),oe&&(Pe.tx="Aa",Pe.tp=_e("textposition",ke),Pe.ts=10,Pe.tc=_e("textfont.color",ke),Pe.tf=_e("textfont.family",ke),Pe.tw=_e("textfont.weight",ke),Pe.ty=_e("textfont.style",ke),Pe.tv=_e("textfont.variant",ke),Pe.tC=_e("textfont.textcase",ke),Pe.tE=_e("textfont.lineposition",ke),Pe.tS=_e("textfont.shadow",ke)),ie=[u.minExtend(R,Pe)],xe=u.minExtend(B,Ge),xe.selectedpoints=null,xe.texttemplate=null}var yt=h.select(this).select("g.legendpoints"),lt=yt.selectAll("path.scatterpts").data(re?ie:[]);lt.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",q),lt.exit().remove(),lt.call(v.pointStyle,xe,P),re&&(ie[0].mrc=3);var mt=yt.selectAll("g.pointtext").data(oe?ie:[]);mt.enter().append("g").classed("pointtext",!0).append("text").attr("transform",q),mt.exit().remove(),mt.selectAll("text").call(v.textPointStyle,xe,P)}function ne(te){var ae=te[0].trace,G=ae.type==="waterfall";if(te[0]._distinct&&G){var Q=te[0].trace[te[0].dir].marker;return te[0].mc=Q.color,te[0].mlw=Q.line.width,te[0].mlc=Q.line.color,ce(te,this,"waterfall")}var U=[];ae.visible&&G&&(U=te[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var re=h.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(U);re.enter().append("path").classed("legendwaterfall",!0).attr("transform",q).style("stroke-miterlimit",1),re.exit().remove(),re.each(function(R){var B=h.select(this),oe=ae[R[0]].marker,ie=X(void 0,oe.line,C,M);B.attr("d",R[1]).style("stroke-width",ie+"px").call(m.fill,oe.color),ie&&B.call(m.stroke,oe.line.color)})}function le(te){ce(te,this)}function W(te){ce(te,this,"funnel")}function ce(te,ae,G){var Q=te[0].trace,U=Q.marker||{},re=U.line||{},R=U.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",B=G?Q.visible&&Q.type===G:c.traceIs(Q,"bar"),oe=h.select(ae).select("g.legendpoints").selectAll("path.legend"+G).data(B?[te]:[]);oe.enter().append("path").classed("legend"+G,!0).attr("d",R).attr("transform",q),oe.exit().remove(),oe.each(function(ie){var xe=h.select(this),_e=ie[0],ke=X(_e.mlw,U.line,C,M);xe.style("stroke-width",ke+"px");var Pe=_e.mcc;if(!J._inHover&&"mc"in _e){var Ge=g(U),Je=Ge.mid;Je===void 0&&(Je=(Ge.max+Ge.min)/2),Pe=v.tryColorscale(U,"")(Je)}var yt=Pe||_e.mc||U.color,lt=U.pattern,mt=lt&&v.getPatternAttr(lt.shape,0,"");if(mt){var Ce=v.getPatternAttr(lt.bgcolor,0,null),Ie=v.getPatternAttr(lt.fgcolor,0,null),Se=lt.fgopacity,Be=S(lt.size,8,10),rt=S(lt.solidity,.5,1),ht="legend-"+Q.uid;xe.call(v.pattern,"legend",P,ht,mt,Be,rt,Pe,lt.fillmode,Ce,Ie,Se)}else xe.call(m.fill,yt);ke&&m.stroke(xe,_e.mlc||re.color)})}function de(te){var ae=te[0].trace,G=h.select(this).select("g.legendpoints").selectAll("path.legendbox").data(ae.visible&&c.traceIs(ae,"box-violin")?[te]:[]);G.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",q),G.exit().remove(),G.each(function(){var Q=h.select(this);if((ae.boxpoints==="all"||ae.points==="all")&&m.opacity(ae.fillcolor)===0&&m.opacity((ae.line||{}).color)===0){var U=u.minExtend(ae,{marker:{size:Y?k:u.constrain(ae.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});G.call(v.pointStyle,U,P)}else{var re=X(void 0,ae.line,C,M);Q.style("stroke-width",re+"px").call(m.fill,ae.fillcolor),re&&m.stroke(Q,ae.line.color)}})}function ve(te){var ae=te[0].trace,G=h.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(ae.visible&&ae.type==="candlestick"?[te,te]:[]);G.enter().append("path").classed("legendcandle",!0).attr("d",function(Q,U){return U?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",q).style("stroke-miterlimit",1),G.exit().remove(),G.each(function(Q,U){var re=h.select(this),R=ae[U?"increasing":"decreasing"],B=X(void 0,R.line,C,M);re.style("stroke-width",B+"px").call(m.fill,R.fillcolor),B&&m.stroke(re,R.line.color)})}function pe(te){var ae=te[0].trace,G=h.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(ae.visible&&ae.type==="ohlc"?[te,te]:[]);G.enter().append("path").classed("legendohlc",!0).attr("d",function(Q,U){return U?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",q).style("stroke-miterlimit",1),G.exit().remove(),G.each(function(Q,U){var re=h.select(this),R=ae[U?"increasing":"decreasing"],B=X(void 0,R.line,C,M);re.style("fill","none").call(v.dashLine,R.line.dash,B),B&&m.stroke(re,R.line.color)})}function be(te){Ae(te,this,"pie")}function Le(te){Ae(te,this,"funnelarea")}function Ae(te,ae,G){var Q=te[0],U=Q.trace,re=G?U.visible&&U.type===G:c.traceIs(U,G),R=h.select(ae).select("g.legendpoints").selectAll("path.legend"+G).data(re?[te]:[]);if(R.enter().append("path").classed("legend"+G,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",q),R.exit().remove(),R.size()){var B=U.marker||{},oe=X(T(B.line.width,Q.pts),B.line,C,M),ie="pieLike",xe=u.minExtend(U,{marker:{line:{width:oe}}},ie),_e=u.minExtend(Q,{trace:xe},ie);o(R,_e,xe,P)}}function We(te){var ae=te[0].trace,G,Q=[];if(ae.visible)switch(ae.type){case"histogram2d":case"heatmap":Q=[["M-15,-2V4H15V-2Z"]],G=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":Q=[["M-6,-6V6H6V-6Z"]],G=!0;break;case"densitymapbox":case"densitymap":Q=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],G="radial";break;case"cone":Q=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],G=!1;break;case"streamtube":Q=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],G=!1;break;case"surface":Q=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],G=!0;break;case"mesh3d":Q=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],G=!1;break;case"volume":Q=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],G=!0;break;case"isosurface":Q=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],G=!1;break}var U=h.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(Q);U.enter().append("path").classed("legend3dandfriends",!0).attr("transform",q).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(re,R){var B=h.select(this),oe=g(ae),ie=oe.colorscale,xe=oe.reversescale,_e=function(Je){if(Je.size()){var yt="legendfill-"+ae.uid;v.gradient(Je,P,yt,j(xe,G==="radial"),ie,"fill")}},ke;if(ie){if(!G){var Ge=ie.length;ke=R===0?ie[xe?Ge-1:0][1]:R===1?ie[xe?0:Ge-1][1]:ie[Math.floor((Ge-1)/2)][1]}}else{var Pe=ae.vertexcolor||ae.facecolor||ae.color;ke=u.isArrayOrTypedArray(Pe)?Pe[R]||Pe[0]:Pe}B.attr("d",re[0]),ke?B.call(m.fill,ke):B.call(_e)})}};function j(L,F){var P=F?"radial":"horizontal";return P+(L?"":"reversed")}function b(L){var F=L[0].trace,P=F.contours,J=w.hasLines(F),H=w.hasMarkers(F),Y=F.visible&&F.fill&&F.fill!=="none",Z=!1,z=!1;if(P){var q=P.coloring;q==="lines"?Z=!0:J=q==="none"||q==="heatmap"||P.showlines,P.type==="constraint"?Y=P._operation!=="=":(q==="fill"||q==="heatmap")&&(z=!0)}return{showMarker:H,showLine:J,showFill:Y,showGradientLine:Z,showGradientFill:z,anyLine:J||Z,anyFill:Y||z}}function S(L,F,P){return L&&u.isArrayOrTypedArray(L)?F:L>P?P:L}}}),id=i({"src/components/legend/draw.js"(V,$){var h=f(),c=_r(),u=xi(),p=xn(),v=Na(),m=Ys(),g=oi(),w=ut(),o=ia(),T=Wf(),y=rd(),k=na(),D=k.LINE_SPACING,M=k.FROM_TL,A=k.FROM_BR,C=qf(),j=nd(),b=eu(),S=1,L=/^legend[0-9]*$/;$.exports=function(ve,pe){if(pe)P(ve,pe);else{var be=ve._fullLayout,Le=be._legends,Ae=be._infolayer.selectAll('[class^="legend"]');Ae.each(function(){var G=h.select(this),Q=G.attr("class"),U=Q.split(" ")[0];U.match(L)&&Le.indexOf(U)===-1&&G.remove()});for(var We=0;We<Le.length;We++){var te=Le[We],ae=ve._fullLayout[te];P(ve,ae)}}};function F(de,ve,pe){if(!(ve.title.side!=="top center"&&ve.title.side!=="top right")){var be=ve.title.font,Le=be.size*D,Ae=0,We=de.node(),te=g.bBox(We).width;ve.title.side==="top center"?Ae=.5*(ve._width-2*pe-2*y.titlePad-te):ve.title.side==="top right"&&(Ae=ve._width-2*pe-2*y.titlePad-te),o.positionText(de,pe+y.titlePad+Ae,pe+Le)}}function P(de,ve){var pe=ve||{},be=de._fullLayout,Le=ce(pe),Ae,We,te=pe._inHover;if(te?(We=pe.layer,Ae="hover"):(We=be._infolayer,Ae=Le),!!We){Ae+=be._uid,de._legendMouseDownTime||(de._legendMouseDownTime=0);var ae;if(te){if(!pe.entries)return;ae=C(pe.entries,pe)}else{for(var G=(de.calcdata||[]).slice(),Q=be.shapes,U=0;U<Q.length;U++){var re=Q[U];if(re.showlegend){var R={_isShape:!0,_fullInput:re,index:re._index,name:re.name||re.label.text||"shape "+re._index,legend:re.legend,legendgroup:re.legendgroup,legendgrouptitle:re.legendgrouptitle,legendrank:re.legendrank,legendwidth:re.legendwidth,showlegend:re.showlegend,visible:re.visible,opacity:re.opacity,mode:re.type==="line"?"lines":"markers",line:re.line,marker:{line:re.line,color:re.fillcolor,size:12,symbol:re.type==="rect"?"square":re.type==="circle"?"circle":"hexagon2"}};G.push([{trace:R}])}}ae=be.showlegend&&C(G,pe,be._legends.length>1)}var B=be.hiddenlabels||[];if(!te&&(!be.showlegend||!ae.length))return We.selectAll("."+Le).remove(),be._topdefs.select("#"+Ae).remove(),u.autoMargin(de,Le);var oe=c.ensureSingle(We,"g",Le,function(lt){te||lt.attr("pointer-events","all")}),ie=c.ensureSingleById(be._topdefs,"clipPath",Ae,function(lt){lt.append("rect")}),xe=c.ensureSingle(oe,"rect","bg",function(lt){lt.attr("shape-rendering","crispEdges")});xe.call(w.stroke,pe.bordercolor).call(w.fill,pe.bgcolor).style("stroke-width",pe.borderwidth+"px");var _e=c.ensureSingle(oe,"g","scrollbox"),ke=pe.title;pe._titleWidth=0,pe._titleHeight=0;var Pe;ke.text?(Pe=c.ensureSingle(_e,"text",Le+"titletext"),Pe.attr("text-anchor","start").call(g.font,ke.font).text(ke.text),q(Pe,_e,de,pe,S)):_e.selectAll("."+Le+"titletext").remove();var Ge=c.ensureSingle(oe,"rect","scrollbar",function(lt){lt.attr(y.scrollBarEnterAttrs).call(w.fill,y.scrollBarColor)}),Je=_e.selectAll("g.groups").data(ae);Je.enter().append("g").attr("class","groups"),Je.exit().remove();var yt=Je.selectAll("g.traces").data(c.identity);yt.enter().append("g").attr("class","traces"),yt.exit().remove(),yt.style("opacity",function(lt){var mt=lt[0].trace;return p.traceIs(mt,"pie-like")?B.indexOf(lt[0].label)!==-1?.5:1:mt.visible==="legendonly"?.5:1}).each(function(){h.select(this).call(Y,de,pe)}).call(j,de,pe).each(function(){te||h.select(this).call(z,de,Le)}),c.syncOrAsync([u.previousPromises,function(){return ee(de,Je,yt,pe)},function(){var lt=be._size,mt=pe.borderwidth,Ce=pe.xref==="paper",Ie=pe.yref==="paper";if(ke.text&&F(Pe,pe,mt),!te){var Se,Be;Ce?Se=lt.l+lt.w*pe.x-M[le(pe)]*pe._width:Se=be.width*pe.x-M[le(pe)]*pe._width,Ie?Be=lt.t+lt.h*(1-pe.y)-M[W(pe)]*pe._effHeight:Be=be.height*(1-pe.y)-M[W(pe)]*pe._effHeight;var rt=ne(de,Le,Se,Be);if(rt)return;if(be.margin.autoexpand){var ht=Se,Lt=Be;Se=Ce?c.constrain(Se,0,be.width-pe._width):ht,Be=Ie?c.constrain(Be,0,be.height-pe._effHeight):Lt,Se!==ht&&c.log("Constrain "+Le+".x to make legend fit inside graph"),Be!==Lt&&c.log("Constrain "+Le+".y to make legend fit inside graph")}g.setTranslate(oe,Se,Be)}if(Ge.on(".drag",null),oe.on("wheel",null),te||pe._height<=pe._maxHeight||de._context.staticPlot){var Ct=pe._effHeight;te&&(Ct=pe._height),xe.attr({width:pe._width-mt,height:Ct-mt,x:mt/2,y:mt/2}),g.setTranslate(_e,0,0),ie.select("rect").attr({width:pe._width-2*mt,height:Ct-2*mt,x:mt,y:mt}),g.setClipUrl(_e,Ae,de),g.setRect(Ge,0,0,0,0),delete pe._scrollY}else{var zt=Math.max(y.scrollBarMinHeight,pe._effHeight*pe._effHeight/pe._height),Bt=pe._effHeight-zt-2*y.scrollBarMargin,Ft=pe._height-pe._effHeight,nr=Bt/Ft,_t=Math.min(pe._scrollY||0,Ft);xe.attr({width:pe._width-2*mt+y.scrollBarWidth+y.scrollBarMargin,height:pe._effHeight-mt,x:mt/2,y:mt/2}),ie.select("rect").attr({width:pe._width-2*mt+y.scrollBarWidth+y.scrollBarMargin,height:pe._effHeight-2*mt,x:mt,y:mt+_t}),g.setClipUrl(_e,Ae,de),he(_t,zt,nr),oe.on("wheel",function(){_t=c.constrain(pe._scrollY+h.event.deltaY/Bt*Ft,0,Ft),he(_t,zt,nr),_t!==0&&_t!==Ft&&h.event.preventDefault()});var rr,pr,Yt,sr=function(at,dt,Mt){var Nt=(Mt-dt)/nr+at;return c.constrain(Nt,0,Ft)},ze=function(at,dt,Mt){var Nt=(dt-Mt)/nr+at;return c.constrain(Nt,0,Ft)},Ye=h.behavior.drag().on("dragstart",function(){var at=h.event.sourceEvent;at.type==="touchstart"?rr=at.changedTouches[0].clientY:rr=at.clientY,Yt=_t}).on("drag",function(){var at=h.event.sourceEvent;at.buttons===2||at.ctrlKey||(at.type==="touchmove"?pr=at.changedTouches[0].clientY:pr=at.clientY,_t=sr(Yt,rr,pr),he(_t,zt,nr))});Ge.call(Ye);var $e=h.behavior.drag().on("dragstart",function(){var at=h.event.sourceEvent;at.type==="touchstart"&&(rr=at.changedTouches[0].clientY,Yt=_t)}).on("drag",function(){var at=h.event.sourceEvent;at.type==="touchmove"&&(pr=at.changedTouches[0].clientY,_t=ze(Yt,rr,pr),he(_t,zt,nr))});_e.call($e)}function he(at,dt,Mt){pe._scrollY=de._fullLayout[Le]._scrollY=at,g.setTranslate(_e,0,-at),g.setRect(Ge,pe._width,y.scrollBarMargin+at*Mt,y.scrollBarWidth,dt),ie.select("rect").attr("y",mt+at)}if(de._context.edits.legendPosition){var je,Ne,Re,nt;oe.classed("cursor-move",!0),m.init({element:oe.node(),gd:de,prepFn:function(at){if(at.target!==Ge.node()){var dt=g.getTranslate(oe);Re=dt.x,nt=dt.y}},moveFn:function(at,dt){if(Re!==void 0&&nt!==void 0){var Mt=Re+at,Nt=nt+dt;g.setTranslate(oe,Mt,Nt),je=m.align(Mt,pe._width,lt.l,lt.l+lt.w,pe.xanchor),Ne=m.align(Nt+pe._height,-pe._height,lt.t+lt.h,lt.t,pe.yanchor)}},doneFn:function(){if(je!==void 0&&Ne!==void 0){var at={};at[Le+".x"]=je,at[Le+".y"]=Ne,p.call("_guiRelayout",de,at)}},clickFn:function(at,dt){var Mt=We.selectAll("g.traces").filter(function(){var Nt=this.getBoundingClientRect();return dt.clientX>=Nt.left&&dt.clientX<=Nt.right&&dt.clientY>=Nt.top&&dt.clientY<=Nt.bottom});Mt.size()>0&&H(de,oe,Mt,at,dt)}})}}],de)}}function J(de,ve,pe){var be=de[0],Le=be.width,Ae=ve.entrywidthmode,We=be.trace.legendwidth||ve.entrywidth;return Ae==="fraction"?ve._maxWidth*We:pe+(We||Le)}function H(de,ve,pe,be,Le){var Ae=pe.data()[0][0].trace,We={event:Le,node:pe.node(),curveNumber:Ae.index,expandedIndex:Ae.index,data:de.data,layout:de.layout,frames:de._transitionData._frames,config:de._context,fullData:de._fullData,fullLayout:de._fullLayout};Ae._group&&(We.group=Ae._group),p.traceIs(Ae,"pie-like")&&(We.label=pe.datum()[0].label);var te=v.triggerHandler(de,"plotly_legendclick",We);if(be===1){if(te===!1)return;ve._clickTimeout=setTimeout(function(){de._fullLayout&&T(pe,de,be)},de._context.doubleClickDelay)}else if(be===2){ve._clickTimeout&&clearTimeout(ve._clickTimeout),de._legendMouseDownTime=0;var ae=v.triggerHandler(de,"plotly_legenddoubleclick",We);ae!==!1&&te!==!1&&T(pe,de,be)}}function Y(de,ve,pe){var be=ce(pe),Le=de.data()[0][0],Ae=Le.trace,We=p.traceIs(Ae,"pie-like"),te=!pe._inHover&&ve._context.edits.legendText&&!We,ae=pe._maxNameLength,G,Q;Le.groupTitle?(G=Le.groupTitle.text,Q=Le.groupTitle.font):(Q=pe.font,pe.entries?G=Le.text:(G=We?Le.label:Ae.name,Ae._meta&&(G=c.templateString(G,Ae._meta))));var U=c.ensureSingle(de,"text",be+"text");U.attr("text-anchor","start").call(g.font,Q).text(te?Z(G,ae):G);var re=pe.indentation+pe.itemwidth+y.itemGap*2;o.positionText(U,re,0),te?U.call(o.makeEditable,{gd:ve,text:G}).call(q,de,ve,pe).on("edit",function(R){this.text(Z(R,ae)).call(q,de,ve,pe);var B=Le.trace._fullInput||{},oe={};return oe.name=R,B._isShape?p.call("_guiRelayout",ve,"shapes["+Ae.index+"].name",oe.name):p.call("_guiRestyle",ve,oe,Ae.index)}):q(U,de,ve,pe)}function Z(de,ve){var pe=Math.max(4,ve);if(de&&de.trim().length>=pe/2)return de;de=de||"";for(var be=pe-de.length;be>0;be--)de+=" ";return de}function z(de,ve,pe){var be=ve._context.doubleClickDelay,Le,Ae=1,We=c.ensureSingle(de,"rect",pe+"toggle",function(te){ve._context.staticPlot||te.style("cursor","pointer").attr("pointer-events","all"),te.call(w.fill,"rgba(0,0,0,0)")});ve._context.staticPlot||(We.on("mousedown",function(){Le=new Date().getTime(),Le-ve._legendMouseDownTime<be?Ae+=1:(Ae=1,ve._legendMouseDownTime=Le)}),We.on("mouseup",function(){if(!(ve._dragged||ve._editing)){var te=ve._fullLayout[pe];new Date().getTime()-ve._legendMouseDownTime>be&&(Ae=Math.max(Ae-1,1)),H(ve,te,de,Ae,h.event)}}))}function q(de,ve,pe,be,Le){be._inHover&&de.attr("data-notex",!0),o.convertToTspans(de,pe,function(){X(ve,pe,be,Le)})}function X(de,ve,pe,be){var Le=de.data()[0][0];if(!pe._inHover&&Le&&!Le.trace.showlegend){de.remove();return}var Ae=de.select("g[class*=math-group]"),We=Ae.node(),te=ce(pe);pe||(pe=ve._fullLayout[te]);var ae=pe.borderwidth,G;be===S?G=pe.title.font:Le.groupTitle?G=Le.groupTitle.font:G=pe.font;var Q=G.size*D,U,re;if(We){var R=g.bBox(We);U=R.height,re=R.width,be===S?g.setTranslate(Ae,ae,ae+U*.75):g.setTranslate(Ae,0,U*.25)}else{var B="."+te+(be===S?"title":"")+"text",oe=de.select(B),ie=o.lineCount(oe),xe=oe.node();if(U=Q*ie,re=xe?g.bBox(xe).width:0,be===S)pe.title.side==="left"&&(re+=y.itemGap*2),o.positionText(oe,ae+y.titlePad,ae+Q);else{var _e=y.itemGap*2+pe.indentation+pe.itemwidth;Le.groupTitle&&(_e=y.itemGap,re-=pe.indentation+pe.itemwidth),o.positionText(oe,_e,-Q*((ie-1)/2-.3))}}be===S?(pe._titleWidth=re,pe._titleHeight=U):(Le.lineHeight=Q,Le.height=Math.max(U,16)+3,Le.width=re)}function K(de){var ve=0,pe=0,be=de.title.side;return be&&(be.indexOf("left")!==-1&&(ve=de._titleWidth),be.indexOf("top")!==-1&&(pe=de._titleHeight)),[ve,pe]}function ee(de,ve,pe,be){var Le=de._fullLayout,Ae=ce(be);be||(be=Le[Ae]);var We=Le._size,te=b.isVertical(be),ae=b.isGrouped(be),G=be.entrywidthmode==="fraction",Q=be.borderwidth,U=2*Q,re=y.itemGap,R=be.indentation+be.itemwidth+re*2,B=2*(Q+re),oe=W(be),ie=be.y<0||be.y===0&&oe==="top",xe=be.y>1||be.y===1&&oe==="bottom",_e=be.tracegroupgap,ke={};be._maxHeight=Math.max(ie||xe?Le.height/2:We.h,30);var Pe=0;be._width=0,be._height=0;var Ge=K(be);if(te)pe.each(function(Yt){var sr=Yt[0].height;g.setTranslate(this,Q+Ge[0],Q+Ge[1]+be._height+sr/2+re),be._height+=sr,be._width=Math.max(be._width,Yt[0].width)}),Pe=R+be._width,be._width+=re+R+U,be._height+=B,ae&&(ve.each(function(Yt,sr){g.setTranslate(this,0,sr*be.tracegroupgap)}),be._height+=(be._lgroupsLength-1)*be.tracegroupgap);else{var Je=le(be),yt=be.x<0||be.x===0&&Je==="right",lt=be.x>1||be.x===1&&Je==="left",mt=xe||ie,Ce=Le.width/2;be._maxWidth=Math.max(yt?mt&&Je==="left"?We.l+We.w:Ce:lt?mt&&Je==="right"?We.r+We.w:Ce:We.w,2*R);var Ie=0,Se=0;pe.each(function(Yt){var sr=J(Yt,be,R);Ie=Math.max(Ie,sr),Se+=sr}),Pe=null;var Be=0;if(ae){var rt=0,ht=0,Lt=0;ve.each(function(){var Yt=0,sr=0;h.select(this).selectAll("g.traces").each(function(Ye){var $e=J(Ye,be,R),he=Ye[0].height;g.setTranslate(this,Ge[0],Ge[1]+Q+re+he/2+sr),sr+=he,Yt=Math.max(Yt,$e),ke[Ye[0].trace.legendgroup]=Yt});var ze=Yt+re;ht>0&&ze+Q+ht>be._maxWidth?(Be=Math.max(Be,ht),ht=0,Lt+=rt+_e,rt=sr):rt=Math.max(rt,sr),g.setTranslate(this,ht,Lt),ht+=ze}),be._width=Math.max(Be,ht)+Q,be._height=Lt+rt+B}else{var Ct=pe.size(),zt=Se+U+(Ct-1)*re<be._maxWidth,Bt=0,Ft=0,nr=0,_t=0;pe.each(function(Yt){var sr=Yt[0].height,ze=J(Yt,be,R),Ye=zt?ze:Ie;G||(Ye+=re),Ye+Q+Ft-re>=be._maxWidth&&(Be=Math.max(Be,_t),Ft=0,nr+=Bt,be._height+=Bt,Bt=0),g.setTranslate(this,Ge[0]+Q+Ft,Ge[1]+Q+nr+sr/2+re),_t=Ft+ze+re,Ft+=Ye,Bt=Math.max(Bt,sr)}),zt?(be._width=Ft+U,be._height=Bt+B):(be._width=Math.max(Be,_t)+U,be._height+=Bt+B)}}be._width=Math.ceil(Math.max(be._width+Ge[0],be._titleWidth+2*(Q+y.titlePad))),be._height=Math.ceil(Math.max(be._height+Ge[1],be._titleHeight+2*(Q+y.itemGap))),be._effHeight=Math.min(be._height,be._maxHeight);var rr=de._context.edits,pr=rr.legendText||rr.legendPosition;pe.each(function(Yt){var sr=h.select(this).select("."+Ae+"toggle"),ze=Yt[0].height,Ye=Yt[0].trace.legendgroup,$e=J(Yt,be,R);ae&&Ye!==""&&($e=ke[Ye]);var he=pr?R:Pe||$e;!te&&!G&&(he+=re/2),g.setRect(sr,0,-ze/2,he,ze)})}function ne(de,ve,pe,be){var Le=de._fullLayout,Ae=Le[ve],We=le(Ae),te=W(Ae),ae=Ae.xref==="paper",G=Ae.yref==="paper";de._fullLayout._reservedMargin[ve]={};var Q=Ae.y<.5?"b":"t",U=Ae.x<.5?"l":"r",re={r:Le.width-pe,l:pe+Ae._width,b:Le.height-be,t:be+Ae._effHeight};if(ae&&G)return u.autoMargin(de,ve,{x:Ae.x,y:Ae.y,l:Ae._width*M[We],r:Ae._width*A[We],b:Ae._effHeight*A[te],t:Ae._effHeight*M[te]});ae?de._fullLayout._reservedMargin[ve][Q]=re[Q]:G||Ae.orientation==="v"?de._fullLayout._reservedMargin[ve][U]=re[U]:de._fullLayout._reservedMargin[ve][Q]=re[Q]}function le(de){return c.isRightAnchor(de)?"right":c.isCenterAnchor(de)?"center":"left"}function W(de){return c.isBottomAnchor(de)?"bottom":c.isMiddleAnchor(de)?"middle":"top"}function ce(de){return de._id||"legend"}}}),ad=i({"src/components/fx/hover.js"(V){var $=f(),h=fe(),c=xt(),u=_r(),p=u.pushUnique,v=u.strTranslate,m=u.strRotate,g=Na(),w=ia(),o=Hf(),T=oi(),y=ut(),k=Ys(),D=ji(),M=Yr().zindexSeparator,A=xn(),C=Wa(),j=mr(),b=td(),S=id(),L=j.YANGLE,F=Math.PI*L/180,P=1/Math.sin(F),J=Math.cos(F),H=Math.sin(F),Y=j.HOVERARROWSIZE,Z=j.HOVERTEXTPAD,z={box:!0,ohlc:!0,violin:!0,candlestick:!0},q={scatter:!0,scattergl:!0,splom:!0};function X(R,B){return R.distance-B.distance}V.hover=function(B,oe,ie,xe){B=u.getGraphDiv(B);var _e=oe.target;u.throttle(B._fullLayout._uid+j.HOVERID,j.HOVERMINTIME,function(){K(B,oe,ie,xe,_e)})},V.loneHover=function(B,oe){var ie=!0;Array.isArray(B)||(ie=!1,B=[B]);var xe=oe.gd,_e=Q(xe),ke=U(xe),Pe=B.map(function(Be){var rt=Be._x0||Be.x0||Be.x||0,ht=Be._x1||Be.x1||Be.x||0,Lt=Be._y0||Be.y0||Be.y||0,Ct=Be._y1||Be.y1||Be.y||0,zt=Be.eventData;if(zt){var Bt=Math.min(rt,ht),Ft=Math.max(rt,ht),nr=Math.min(Lt,Ct),_t=Math.max(Lt,Ct),rr=Be.trace;if(A.traceIs(rr,"gl3d")){var pr=xe._fullLayout[rr.scene]._scene.container,Yt=pr.offsetLeft,sr=pr.offsetTop;Bt+=Yt,Ft+=Yt,nr+=sr,_t+=sr}zt.bbox={x0:Bt+ke,x1:Ft+ke,y0:nr+_e,y1:_t+_e},oe.inOut_bbox&&oe.inOut_bbox.push(zt.bbox)}else zt=!1;return{color:Be.color||y.defaultLine,x0:Be.x0||Be.x||0,x1:Be.x1||Be.x||0,y0:Be.y0||Be.y||0,y1:Be.y1||Be.y||0,xLabel:Be.xLabel,yLabel:Be.yLabel,zLabel:Be.zLabel,text:Be.text,name:Be.name,idealAlign:Be.idealAlign,borderColor:Be.borderColor,fontFamily:Be.fontFamily,fontSize:Be.fontSize,fontColor:Be.fontColor,fontWeight:Be.fontWeight,fontStyle:Be.fontStyle,fontVariant:Be.fontVariant,nameLength:Be.nameLength,textAlign:Be.textAlign,trace:Be.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Be.hovertemplate||!1,hovertemplateLabels:Be.hovertemplateLabels||!1,eventData:zt}}),Ge=!1,Je=le(Pe,{gd:xe,hovermode:"closest",rotateLabels:Ge,bgColor:oe.bgColor||y.background,container:$.select(oe.container),outerContainer:oe.outerContainer||oe.container}),yt=Je.hoverLabels,lt=5,mt=0,Ce=0;yt.sort(function(Be,rt){return Be.y0-rt.y0}).each(function(Be,rt){var ht=Be.y0-Be.by/2;ht-lt<mt?Be.offset=mt-ht+lt:Be.offset=0,mt=ht+Be.by+Be.offset,rt===oe.anchorIndex&&(Ce=Be.offset)}).each(function(Be){Be.offset-=Ce});var Ie=xe._fullLayout._invScaleX,Se=xe._fullLayout._invScaleY;return pe(yt,Ge,Ie,Se),ie?yt:yt.node()};function K(R,B,oe,ie,xe){oe||(oe="xy"),typeof oe=="string"&&(oe=oe.split(M)[0]);var _e=Array.isArray(oe)?oe:[oe],ke,Pe=R._fullLayout,Ge=Pe.hoversubplots,Je=Pe._plots||[],yt=Je[oe],lt=Pe._has("cartesian"),mt=B.hovermode||Pe.hovermode,Ce=(mt||"").charAt(0)==="x",Ie=(mt||"").charAt(0)==="y",Se,Be;if(lt&&(Ce||Ie)&&Ge==="axis"){for(var rt=_e.length,ht=0;ht<rt;ht++)if(ke=_e[ht],Je[ke]){Se=D.getFromId(R,ke,"x"),Be=D.getFromId(R,ke,"y");var Lt=(Ce?Se:Be)._subplotsWith;if(Lt&&Lt.length)for(var Ct=0;Ct<Lt.length;Ct++)p(_e,Lt[Ct])}}if(yt&&Ge!=="single"){var zt=yt.overlays.map(function(yn){return yn.id});_e=_e.concat(zt)}for(var Bt=_e.length,Ft=new Array(Bt),nr=new Array(Bt),_t=!1,rr=0;rr<Bt;rr++)if(ke=_e[rr],Je[ke])_t=!0,Ft[rr]=Je[ke].xaxis,nr[rr]=Je[ke].yaxis;else if(Pe[ke]&&Pe[ke]._subplot){var pr=Pe[ke]._subplot;Ft[rr]=pr.xaxis,nr[rr]=pr.yaxis}else{u.warn("Unrecognized subplot: "+ke);return}if(mt&&!_t&&(mt="closest"),["x","y","closest","x unified","y unified"].indexOf(mt)===-1||!R.calcdata||R.querySelector(".zoombox")||R._dragging)return k.unhoverRaw(R,B);var Yt=Pe.hoverdistance;Yt===-1&&(Yt=1/0);var sr=Pe.spikedistance;sr===-1&&(sr=1/0);var ze=[],Ye=[],$e,he,je,Ne,Re,nt,at,dt,Mt,Nt,ot,jt,Ut,Gt={hLinePoint:null,vLinePoint:null},Tr=!1;if(Array.isArray(B))for(mt="array",je=0;je<B.length;je++)Re=R.calcdata[B[je].curveNumber||0],Re&&(nt=Re[0].trace,Re[0].trace.hoverinfo!=="skip"&&(Ye.push(Re),nt.orientation==="h"&&(Tr=!0)));else{var Dr=R.calcdata.slice();for(Dr.sort(function(yn,Vn){var ci=yn[0].trace.zorder||0,Yi=Vn[0].trace.zorder||0;return ci-Yi}),Ne=0;Ne<Dr.length;Ne++)Re=Dr[Ne],nt=Re[0].trace,nt.hoverinfo!=="skip"&&C.isTraceInSubplots(nt,_e)&&(Ye.push(Re),nt.orientation==="h"&&(Tr=!0));var Vr=!xe,Mr,Fr;if(Vr)"xpx"in B?Mr=B.xpx:Mr=Ft[0]._length/2,"ypx"in B?Fr=B.ypx:Fr=nr[0]._length/2;else{if(g.triggerHandler(R,"plotly_beforehover",B)===!1)return;var xr=xe.getBoundingClientRect();Mr=B.clientX-xr.left,Fr=B.clientY-xr.top,Pe._calcInverseTransform(R);var br=u.apply3DTransform(Pe._invTransform)(Mr,Fr);if(Mr=br[0],Fr=br[1],Mr<0||Mr>Ft[0]._length||Fr<0||Fr>nr[0]._length)return k.unhoverRaw(R,B)}if(B.pointerX=Mr+Ft[0]._offset,B.pointerY=Fr+nr[0]._offset,"xval"in B?$e=C.flat(_e,B.xval):$e=C.p2c(Ft,Mr),"yval"in B?he=C.flat(_e,B.yval):he=C.p2c(nr,Fr),!h($e[0])||!h(he[0]))return u.warn("Fx.hover failed",B,R),k.unhoverRaw(R,B)}var Wr=1/0;function Or(yn,Vn){for(Ne=0;Ne<Ye.length;Ne++)if(Re=Ye[Ne],!(!Re||!Re[0]||!Re[0].trace)&&(nt=Re[0].trace,!(nt.visible!==!0||nt._length===0)&&["carpet","contourcarpet"].indexOf(nt._module.name)===-1)){if(Mt=mt,C.isUnifiedHover(Mt)&&(Mt=Mt.charAt(0)),nt.type==="splom"?(dt=0,at=_e[dt]):(at=C.getSubplot(nt),dt=_e.indexOf(at)),jt={cd:Re,trace:nt,xa:Ft[dt],ya:nr[dt],maxHoverDistance:Yt,maxSpikeDistance:sr,index:!1,distance:Math.min(Wr,Yt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:y.defaultLine,name:nt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},Pe[at]&&(jt.subplot=Pe[at]._subplot),Pe._splomScenes&&Pe._splomScenes[nt.uid]&&(jt.scene=Pe._splomScenes[nt.uid]),Mt==="array"){var ci=B[Ne];"pointNumber"in ci?(jt.index=ci.pointNumber,Mt="closest"):(Mt="","xval"in ci&&(Nt=ci.xval,Mt="x"),"yval"in ci&&(ot=ci.yval,Mt=Mt?"closest":"y"))}else yn!==void 0&&Vn!==void 0?(Nt=yn,ot=Vn):(Nt=$e[dt],ot=he[dt]);if(Ut=ze.length,Yt!==0)if(nt._module&&nt._module.hoverPoints){var Yi=nt._module.hoverPoints(jt,Nt,ot,Mt,{finiteRange:!0,hoverLayer:Pe._hoverlayer,hoversubplots:Ge,gd:R});if(Yi)for(var Ii,Ln=0;Ln<Yi.length;Ln++)Ii=Yi[Ln],h(Ii.x0)&&h(Ii.y0)&&ze.push(be(Ii,mt))}else u.log("Unrecognized trace type in hover:",nt);if(mt==="closest"&&ze.length>Ut&&(ze.splice(0,Ut),Wr=ze[0].distance),lt&&sr!==0&&ze.length===0){jt.distance=sr,jt.index=!1;var In=nt._module.hoverPoints(jt,Nt,ot,"closest",{hoverLayer:Pe._hoverlayer});if(In&&(In=In.filter(function(gi){return gi.spikeDistance<=sr})),In&&In.length){var Nn,vi=In.filter(function(gi){return gi.xa.showspikes&&gi.xa.spikesnap!=="hovered data"});if(vi.length){var bi=vi[0];h(bi.x0)&&h(bi.y0)&&(Nn=Er(bi),(!Gt.vLinePoint||Gt.vLinePoint.spikeDistance>Nn.spikeDistance)&&(Gt.vLinePoint=Nn))}var Li=In.filter(function(gi){return gi.ya.showspikes&&gi.ya.spikesnap!=="hovered data"});if(Li.length){var Ei=Li[0];h(Ei.x0)&&h(Ei.y0)&&(Nn=Er(Ei),(!Gt.hLinePoint||Gt.hLinePoint.spikeDistance>Nn.spikeDistance)&&(Gt.hLinePoint=Nn))}}}}}Or();function qr(yn,Vn,ci){for(var Yi=null,Ii=1/0,Ln,In=0;In<yn.length;In++)Se&&Se._id!==yn[In].xa._id||Be&&Be._id!==yn[In].ya._id||(Ln=yn[In].spikeDistance,ci&&In===0&&(Ln=-1/0),Ln<=Ii&&Ln<=Vn&&(Yi=yn[In],Ii=Ln));return Yi}function Er(yn){return yn?{xa:yn.xa,ya:yn.ya,x:yn.xSpike!==void 0?yn.xSpike:(yn.x0+yn.x1)/2,y:yn.ySpike!==void 0?yn.ySpike:(yn.y0+yn.y1)/2,distance:yn.distance,spikeDistance:yn.spikeDistance,curveNumber:yn.trace.index,color:yn.color,pointNumber:yn.index}:null}var vr={fullLayout:Pe,container:Pe._hoverlayer,event:B};R._spikepoints;var Ir={vLinePoint:Gt.vLinePoint,hLinePoint:Gt.hLinePoint};R._spikepoints=Ir;var ln=function(){var yn=ze.filter(function(ci){return Se&&Se._id===ci.xa._id&&Be&&Be._id===ci.ya._id}),Vn=ze.filter(function(ci){return!(Se&&Se._id===ci.xa._id&&Be&&Be._id===ci.ya._id)});yn.sort(X),Vn.sort(X),ze=yn.concat(Vn),ze=ae(ze,mt)};ln();var kn=mt.charAt(0),Hr=(kn==="x"||kn==="y")&&ze[0]&&q[ze[0].trace.type];if(lt&&sr!==0&&ze.length!==0){var pn=ze.filter(function(yn){return yn.ya.showspikes}),mn=qr(pn,sr,Hr);Gt.hLinePoint=Er(mn);var Un=ze.filter(function(yn){return yn.xa.showspikes}),gr=qr(Un,sr,Hr);Gt.vLinePoint=Er(gr)}if(ze.length===0){var Cn=k.unhoverRaw(R,B);return lt&&(Gt.hLinePoint!==null||Gt.vLinePoint!==null)&&We()&&Le(R,Gt,vr),Cn}if(lt&&We()&&Le(R,Gt,vr),C.isXYhover(Mt)&&ze[0].length!==0&&ze[0].trace.type!=="splom"){var we=ze[0];z[we.trace.type]?ze=ze.filter(function(yn){return yn.trace.index===we.trace.index}):ze=[we];var ge=ze.length,pt=G("x",we,Pe),ft=G("y",we,Pe);Or(pt,ft);var Xe=[],Qe={},st=0,At=function(yn){var Vn=z[yn.trace.type]?ee(yn):yn.trace.index;if(!Qe[Vn])st++,Qe[Vn]=st,Xe.push(yn);else{var ci=Qe[Vn]-1,Yi=Xe[ci];ci>0&&Math.abs(yn.distance)<Math.abs(Yi.distance)&&(Xe[ci]=yn)}},it;for(it=0;it<ge;it++)At(ze[it]);for(it=ze.length-1;it>ge-1;it--)At(ze[it]);ze=Xe,ln()}var bt=R._hoverdata,Tt=[],Rt=Q(R),tr=U(R);for(je=0;je<ze.length;je++){var ur=ze[je],fr=C.makeEventData(ur,ur.trace,ur.cd);if(ur.hovertemplate!==!1){var Rr=!1;ur.cd[ur.index]&&ur.cd[ur.index].ht&&(Rr=ur.cd[ur.index].ht),ur.hovertemplate=Rr||ur.trace.hovertemplate||!1}if(ur.xa&&ur.ya){var wr=ur.x0+ur.xa._offset,Gr=ur.x1+ur.xa._offset,Lr=ur.y0+ur.ya._offset,$r=ur.y1+ur.ya._offset,Xr=Math.min(wr,Gr),jn=Math.max(wr,Gr),bn=Math.min(Lr,$r),pi=Math.max(Lr,$r);fr.bbox={x0:Xr+tr,x1:jn+tr,y0:bn+Rt,y1:pi+Rt}}ur.eventData=[fr],Tt.push(fr)}R._hoverdata=Tt;var Gn=mt==="y"&&(Ye.length>1||ze.length>1)||mt==="closest"&&Tr&&ze.length>1,ei=y.combine(Pe.plot_bgcolor||y.background,Pe.paper_bgcolor),$i=le(ze,{gd:R,hovermode:mt,rotateLabels:Gn,bgColor:ei,container:Pe._hoverlayer,outerContainer:Pe._paper.node(),commonLabelOpts:Pe.hoverlabel,hoverdistance:Pe.hoverdistance}),da=$i.hoverLabels;if(C.isUnifiedHover(mt)||(ce(da,Gn,Pe,$i.commonLabelBoundingBox),pe(da,Gn,Pe._invScaleX,Pe._invScaleY)),xe&&xe.tagName){var si=A.getComponentMethod("annotations","hasClickToShow")(R,Tt);o($.select(xe),si?"pointer":"")}!xe||ie||!Ae(R,B,bt)||(bt&&R.emit("plotly_unhover",{event:B,points:bt}),R.emit("plotly_hover",{event:B,points:R._hoverdata,xaxes:Ft,yaxes:nr,xvals:$e,yvals:he}))}function ee(R){return[R.trace.index,R.index,R.x0,R.y0,R.name,R.attr,R.xa?R.xa._id:"",R.ya?R.ya._id:""].join(",")}var ne=/<extra>([\s\S]*)<\/extra>/;function le(R,B){var oe=B.gd,ie=oe._fullLayout,xe=B.hovermode,_e=B.rotateLabels,ke=B.bgColor,Pe=B.container,Ge=B.outerContainer,Je=B.commonLabelOpts||{};if(R.length===0)return[[]];var yt=B.fontFamily||j.HOVERFONT,lt=B.fontSize||j.HOVERFONTSIZE,mt=B.fontWeight||ie.font.weight,Ce=B.fontStyle||ie.font.style,Ie=B.fontVariant||ie.font.variant,Se=B.fontTextcase||ie.font.textcase,Be=B.fontLineposition||ie.font.lineposition,rt=B.fontShadow||ie.font.shadow,ht=R[0],Lt=ht.xa,Ct=ht.ya,zt=xe.charAt(0),Bt=zt+"Label",Ft=ht[Bt];if(Ft===void 0&&Lt.type==="multicategory")for(var nr=0;nr<R.length&&(Ft=R[nr][Bt],Ft===void 0);nr++);var _t=re(oe,Ge),rr=_t.top,pr=_t.width,Yt=_t.height,sr=Ft!==void 0&&ht.distance<=B.hoverdistance&&(xe==="x"||xe==="y");if(sr){var ze=!0,Ye,$e;for(Ye=0;Ye<R.length;Ye++)if(ze&&R[Ye].zLabel===void 0&&(ze=!1),$e=R[Ye].hoverinfo||R[Ye].trace.hoverinfo,$e){var he=Array.isArray($e)?$e:$e.split("+");if(he.indexOf("all")===-1&&he.indexOf(xe)===-1){sr=!1;break}}ze&&(sr=!1)}var je=Pe.selectAll("g.axistext").data(sr?[0]:[]);je.enter().append("g").classed("axistext",!0),je.exit().remove();var Ne={minX:0,maxX:0,minY:0,maxY:0};if(je.each(function(){var gr=$.select(this),Cn=u.ensureSingle(gr,"path","",function(jn){jn.style({"stroke-width":"1px"})}),we=u.ensureSingle(gr,"text","",function(jn){jn.attr("data-notex",1)}),ge=Je.bgcolor||y.defaultLine,pt=Je.bordercolor||y.contrast(ge),ft=y.contrast(ge),Xe=Je.font,Qe={weight:Xe.weight||mt,style:Xe.style||Ce,variant:Xe.variant||Ie,textcase:Xe.textcase||Se,lineposition:Xe.lineposition||Be,shadow:Xe.shadow||rt,family:Xe.family||yt,size:Xe.size||lt,color:Xe.color||ft};Cn.style({fill:ge,stroke:pt}),we.text(Ft).call(T.font,Qe).call(w.positionText,0,0).call(w.convertToTspans,oe),gr.attr("transform","");var st=re(oe,we.node()),At,it;if(xe==="x"){var bt=Lt.side==="top"?"-":"";we.attr("text-anchor","middle").call(w.positionText,0,Lt.side==="top"?rr-st.bottom-Y-Z:rr-st.top+Y+Z),At=Lt._offset+(ht.x0+ht.x1)/2,it=Ct._offset+(Lt.side==="top"?0:Ct._length);var Tt=st.width/2+Z,Rt=At;At<Tt?Rt=Tt:At>ie.width-Tt&&(Rt=ie.width-Tt),Cn.attr("d","M"+(At-Rt)+",0L"+(At-Rt+Y)+","+bt+Y+"H"+Tt+"v"+bt+(Z*2+st.height)+"H"+-Tt+"V"+bt+Y+"H"+(At-Rt-Y)+"Z"),At=Rt,Ne.minX=At-Tt,Ne.maxX=At+Tt,Lt.side==="top"?(Ne.minY=it-(Z*2+st.height),Ne.maxY=it-Z):(Ne.minY=it+Z,Ne.maxY=it+(Z*2+st.height))}else{var tr,ur,fr;Ct.side==="right"?(tr="start",ur=1,fr="",At=Lt._offset+Lt._length):(tr="end",ur=-1,fr="-",At=Lt._offset),it=Ct._offset+(ht.y0+ht.y1)/2,we.attr("text-anchor",tr),Cn.attr("d","M0,0L"+fr+Y+","+Y+"V"+(Z+st.height/2)+"h"+fr+(Z*2+st.width)+"V-"+(Z+st.height/2)+"H"+fr+Y+"V-"+Y+"Z"),Ne.minY=it-(Z+st.height/2),Ne.maxY=it+(Z+st.height/2),Ct.side==="right"?(Ne.minX=At+Y,Ne.maxX=At+Y+(Z*2+st.width)):(Ne.minX=At-Y-(Z*2+st.width),Ne.maxX=At-Y);var Rr=st.height/2,wr=rr-st.top-Rr,Gr="clip"+ie._uid+"commonlabel"+Ct._id,Lr;if(At<st.width+2*Z+Y){Lr="M-"+(Y+Z)+"-"+Rr+"h-"+(st.width-Z)+"V"+Rr+"h"+(st.width-Z)+"Z";var $r=st.width-At+Z;w.positionText(we,$r,wr),tr==="end"&&we.selectAll("tspan").each(function(){var jn=$.select(this),bn=T.tester.append("text").text(jn.text()).call(T.font,Qe),pi=re(oe,bn.node());Math.round(pi.width)<Math.round(st.width)&&jn.attr("x",$r-pi.width),bn.remove()})}else w.positionText(we,ur*(Z+Y),wr),Lr=null;var Xr=ie._topclips.selectAll("#"+Gr).data(Lr?[0]:[]);Xr.enter().append("clipPath").attr("id",Gr).append("path"),Xr.exit().remove(),Xr.select("path").attr("d",Lr),T.setClipUrl(we,Lr?Gr:null,oe)}gr.attr("transform",v(At,it))}),C.isUnifiedHover(xe)){Pe.selectAll("g.hovertext").remove();var Re=R.filter(function(gr){return gr.hoverinfo!=="none"});if(Re.length===0)return[];var nt=ie.hoverlabel,at=nt.font,dt={showlegend:!0,legend:{title:{text:Ft,font:at},font:at,bgcolor:nt.bgcolor,bordercolor:nt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ie.legend?ie.legend.traceorder:void 0,orientation:"v"}},Mt={font:at};b(dt,Mt,oe._fullData);var Nt=Mt.legend;Nt.entries=[];for(var ot=0;ot<Re.length;ot++){var jt=Re[ot];if(jt.hoverinfo!=="none"){var Ut=W(jt,!0,xe,ie,Ft),Gt=Ut[0],Tr=Ut[1];jt.name=Tr,Tr!==""?jt.text=Tr+" : "+Gt:jt.text=Gt;var Dr=jt.cd[jt.index];Dr&&(Dr.mc&&(jt.mc=Dr.mc),Dr.mcc&&(jt.mc=Dr.mcc),Dr.mlc&&(jt.mlc=Dr.mlc),Dr.mlcc&&(jt.mlc=Dr.mlcc),Dr.mlw&&(jt.mlw=Dr.mlw),Dr.mrc&&(jt.mrc=Dr.mrc),Dr.dir&&(jt.dir=Dr.dir)),jt._distinct=!0,Nt.entries.push([jt])}}Nt.entries.sort(function(gr,Cn){return gr[0].trace.index-Cn[0].trace.index}),Nt.layer=Pe,Nt._inHover=!0,Nt._groupTitleFont=nt.grouptitlefont,S(oe,Nt);var Vr=Pe.select("g.legend"),Mr=re(oe,Vr.node()),Fr=Mr.width+2*Z,xr=Mr.height+2*Z,br=Re[0],Wr=(br.x0+br.x1)/2,Or=(br.y0+br.y1)/2,qr=!(A.traceIs(br.trace,"bar-like")||A.traceIs(br.trace,"box-violin")),Er,vr;zt==="y"?qr?(vr=Or-Z,Er=Or+Z):(vr=Math.min.apply(null,Re.map(function(gr){return Math.min(gr.y0,gr.y1)})),Er=Math.max.apply(null,Re.map(function(gr){return Math.max(gr.y0,gr.y1)}))):vr=Er=u.mean(Re.map(function(gr){return(gr.y0+gr.y1)/2}))-xr/2;var Ir,ln;zt==="x"?qr?(Ir=Wr+Z,ln=Wr-Z):(Ir=Math.max.apply(null,Re.map(function(gr){return Math.max(gr.x0,gr.x1)})),ln=Math.min.apply(null,Re.map(function(gr){return Math.min(gr.x0,gr.x1)}))):Ir=ln=u.mean(Re.map(function(gr){return(gr.x0+gr.x1)/2}))-Fr/2;var kn=Lt._offset,Hr=Ct._offset;Er+=Hr,Ir+=kn,ln+=kn-Fr,vr+=Hr-xr;var pn,mn;return Ir+Fr<pr&&Ir>=0?pn=Ir:ln+Fr<pr&&ln>=0?pn=ln:kn+Fr<pr?pn=kn:Ir-Wr<Wr-ln+Fr?pn=pr-Fr:pn=0,pn+=Z,Er+xr<Yt&&Er>=0?mn=Er:vr+xr<Yt&&vr>=0?mn=vr:Hr+xr<Yt?mn=Hr:Er-Or<Or-vr+xr?mn=Yt-xr:mn=0,mn+=Z,Vr.attr("transform",v(pn-1,mn-1)),Vr}var Un=Pe.selectAll("g.hovertext").data(R,function(gr){return ee(gr)});return Un.enter().append("g").classed("hovertext",!0).each(function(){var gr=$.select(this);gr.append("rect").call(y.fill,y.addOpacity(ke,.8)),gr.append("text").classed("name",!0),gr.append("path").style("stroke-width","1px"),gr.append("text").classed("nums",!0).call(T.font,{weight:mt,style:Ce,variant:Ie,textcase:Se,lineposition:Be,shadow:rt,family:yt,size:lt})}),Un.exit().remove(),Un.each(function(gr){var Cn=$.select(this).attr("transform",""),we=gr.color;Array.isArray(we)&&(we=we[gr.eventData[0].pointNumber]);var ge=gr.bgcolor||we,pt=y.combine(y.opacity(ge)?ge:y.defaultLine,ke),ft=y.combine(y.opacity(we)?we:y.defaultLine,ke),Xe=gr.borderColor||y.contrast(pt),Qe=W(gr,sr,xe,ie,Ft,Cn),st=Qe[0],At=Qe[1],it=Cn.select("text.nums").call(T.font,{family:gr.fontFamily||yt,size:gr.fontSize||lt,color:gr.fontColor||Xe,weight:gr.fontWeight||mt,style:gr.fontStyle||Ce,variant:gr.fontVariant||Ie,textcase:gr.fontTextcase||Se,lineposition:gr.fontLineposition||Be,shadow:gr.fontShadow||rt}).text(st).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,oe),bt=Cn.select("text.name"),Tt=0,Rt=0;if(At&&At!==st){bt.call(T.font,{family:gr.fontFamily||yt,size:gr.fontSize||lt,color:ft,weight:gr.fontWeight||mt,style:gr.fontStyle||Ce,variant:gr.fontVariant||Ie,textcase:gr.fontTextcase||Se,lineposition:gr.fontLineposition||Be,shadow:gr.fontShadow||rt}).text(At).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,oe);var tr=re(oe,bt.node());Tt=tr.width+2*Z,Rt=tr.height+2*Z}else bt.remove(),Cn.select("rect").remove();Cn.select("path").style({fill:pt,stroke:Xe});var ur=gr.xa._offset+(gr.x0+gr.x1)/2,fr=gr.ya._offset+(gr.y0+gr.y1)/2,Rr=Math.abs(gr.x1-gr.x0),wr=Math.abs(gr.y1-gr.y0),Gr=re(oe,it.node()),Lr=Gr.width/ie._invScaleX,$r=Gr.height/ie._invScaleY;gr.ty0=(rr-Gr.top)/ie._invScaleY,gr.bx=Lr+2*Z,gr.by=Math.max($r+2*Z,Rt),gr.anchor="start",gr.txwidth=Lr,gr.tx2width=Tt,gr.offset=0;var Xr=(Lr+Y+Z+Tt)*ie._invScaleX,jn,bn;if(_e)gr.pos=ur,jn=fr+wr/2+Xr<=Yt,bn=fr-wr/2-Xr>=0,(gr.idealAlign==="top"||!jn)&&bn?(fr-=wr/2,gr.anchor="end"):jn?(fr+=wr/2,gr.anchor="start"):gr.anchor="middle",gr.crossPos=fr;else{if(gr.pos=fr,jn=ur+Rr/2+Xr<=pr,bn=ur-Rr/2-Xr>=0,(gr.idealAlign==="left"||!jn)&&bn)ur-=Rr/2,gr.anchor="end";else if(jn)ur+=Rr/2,gr.anchor="start";else{gr.anchor="middle";var pi=Xr/2,Gn=ur+pi-pr,ei=ur-pi;Gn>0&&(ur-=Gn),ei<0&&(ur+=-ei)}gr.crossPos=ur}it.attr("text-anchor",gr.anchor),Tt&&bt.attr("text-anchor",gr.anchor),Cn.attr("transform",v(ur,fr)+(_e?m(L):""))}),{hoverLabels:Un,commonLabelBoundingBox:Ne}}function W(R,B,oe,ie,xe,_e){var ke="",Pe="";R.nameOverride!==void 0&&(R.name=R.nameOverride),R.name&&(R.trace._meta&&(R.name=u.templateString(R.name,R.trace._meta)),ke=te(R.name,R.nameLength));var Ge=oe.charAt(0),Je=Ge==="x"?"y":"x";R.zLabel!==void 0?(R.xLabel!==void 0&&(Pe+="x: "+R.xLabel+"<br>"),R.yLabel!==void 0&&(Pe+="y: "+R.yLabel+"<br>"),R.trace.type!=="choropleth"&&R.trace.type!=="choroplethmapbox"&&R.trace.type!=="choroplethmap"&&(Pe+=(Pe?"z: ":"")+R.zLabel)):B&&R[Ge+"Label"]===xe?Pe=R[Je+"Label"]||"":R.xLabel===void 0?R.yLabel!==void 0&&R.trace.type!=="scattercarpet"&&(Pe=R.yLabel):R.yLabel===void 0?Pe=R.xLabel:Pe="("+R.xLabel+", "+R.yLabel+")",(R.text||R.text===0)&&!Array.isArray(R.text)&&(Pe+=(Pe?"<br>":"")+R.text),R.extraText!==void 0&&(Pe+=(Pe?"<br>":"")+R.extraText),_e&&Pe===""&&!R.hovertemplate&&(ke===""&&_e.remove(),Pe=ke);var yt=R.hovertemplate||!1;if(yt){var lt=R.hovertemplateLabels||R;R[Ge+"Label"]!==xe&&(lt[Ge+"other"]=lt[Ge+"Val"],lt[Ge+"otherLabel"]=lt[Ge+"Label"]),Pe=u.hovertemplateString(yt,lt,ie._d3locale,R.eventData[0]||{},R.trace._meta),Pe=Pe.replace(ne,function(mt,Ce){return ke=te(Ce,R.nameLength),""})}return[Pe,ke]}function ce(R,B,oe,ie){var xe=B?"xa":"ya",_e=B?"ya":"xa",ke=0,Pe=1,Ge=R.size(),Je=new Array(Ge),yt=0,lt=ie.minX,mt=ie.maxX,Ce=ie.minY,Ie=ie.maxY,Se=function($e){return $e*oe._invScaleX},Be=function($e){return $e*oe._invScaleY};R.each(function($e){var he=$e[xe],je=$e[_e],Ne=he._id.charAt(0)==="x",Re=he.range;yt===0&&Re&&Re[0]>Re[1]!==Ne&&(Pe=-1);var nt=0,at=Ne?oe.width:oe.height;if(oe.hovermode==="x"||oe.hovermode==="y"){var dt=de($e,B),Mt=$e.anchor,Nt=Mt==="end"?-1:1,ot,jt;if(Mt==="middle")ot=$e.crossPos+(Ne?Be(dt.y-$e.by/2):Se($e.bx/2+$e.tx2width/2)),jt=ot+(Ne?Be($e.by):Se($e.bx));else if(Ne)ot=$e.crossPos+Be(Y+dt.y)-Be($e.by/2-Y),jt=ot+Be($e.by);else{var Ut=Se(Nt*Y+dt.x),Gt=Ut+Se(Nt*$e.bx);ot=$e.crossPos+Math.min(Ut,Gt),jt=$e.crossPos+Math.max(Ut,Gt)}Ne?Ce!==void 0&&Ie!==void 0&&Math.min(jt,Ie)-Math.max(ot,Ce)>1&&(je.side==="left"?(nt=je._mainLinePosition,at=oe.width):at=je._mainLinePosition):lt!==void 0&&mt!==void 0&&Math.min(jt,mt)-Math.max(ot,lt)>1&&(je.side==="top"?(nt=je._mainLinePosition,at=oe.height):at=je._mainLinePosition)}Je[yt++]=[{datum:$e,traceIndex:$e.trace.index,dp:0,pos:$e.pos,posref:$e.posref,size:$e.by*(Ne?P:1)/2,pmin:nt,pmax:at}]}),Je.sort(function($e,he){return $e[0].posref-he[0].posref||Pe*(he[0].traceIndex-$e[0].traceIndex)});var rt,ht,Lt,Ct,zt,Bt,Ft;function nr($e){var he=$e[0],je=$e[$e.length-1];if(ht=he.pmin-he.pos-he.dp+he.size,Lt=je.pos+je.dp+je.size-he.pmax,ht>.01){for(zt=$e.length-1;zt>=0;zt--)$e[zt].dp+=ht;rt=!1}if(!(Lt<.01)){if(ht<-.01){for(zt=$e.length-1;zt>=0;zt--)$e[zt].dp-=Lt;rt=!1}if(rt){var Ne=0;for(Ct=0;Ct<$e.length;Ct++)Bt=$e[Ct],Bt.pos+Bt.dp+Bt.size>he.pmax&&Ne++;for(Ct=$e.length-1;Ct>=0&&!(Ne<=0);Ct--)Bt=$e[Ct],Bt.pos>he.pmax-1&&(Bt.del=!0,Ne--);for(Ct=0;Ct<$e.length&&!(Ne<=0);Ct++)if(Bt=$e[Ct],Bt.pos<he.pmin+1)for(Bt.del=!0,Ne--,Lt=Bt.size*2,zt=$e.length-1;zt>=0;zt--)$e[zt].dp-=Lt;for(Ct=$e.length-1;Ct>=0&&!(Ne<=0);Ct--)Bt=$e[Ct],Bt.pos+Bt.dp+Bt.size>he.pmax&&(Bt.del=!0,Ne--)}}}for(;!rt&&ke<=Ge;){for(ke++,rt=!0,Ct=0;Ct<Je.length-1;){var _t=Je[Ct],rr=Je[Ct+1],pr=_t[_t.length-1],Yt=rr[0];if(ht=pr.pos+pr.dp+pr.size-Yt.pos-Yt.dp+Yt.size,ht>.01){for(zt=rr.length-1;zt>=0;zt--)rr[zt].dp+=ht;for(_t.push.apply(_t,rr),Je.splice(Ct+1,1),Ft=0,zt=_t.length-1;zt>=0;zt--)Ft+=_t[zt].dp;for(Lt=Ft/_t.length,zt=_t.length-1;zt>=0;zt--)_t[zt].dp-=Lt;rt=!1}else Ct++}Je.forEach(nr)}for(Ct=Je.length-1;Ct>=0;Ct--){var sr=Je[Ct];for(zt=sr.length-1;zt>=0;zt--){var ze=sr[zt],Ye=ze.datum;Ye.offset=ze.dp,Ye.del=ze.del}}}function de(R,B){var oe=0,ie=R.offset;return B&&(ie*=-H,oe=R.offset*J),{x:oe,y:ie}}function ve(R){var B={start:1,end:-1,middle:0}[R.anchor],oe=B*(Y+Z),ie=oe+B*(R.txwidth+Z),xe=R.anchor==="middle";return xe&&(oe-=R.tx2width/2,ie+=R.txwidth/2+Z),{alignShift:B,textShiftX:oe,text2ShiftX:ie}}function pe(R,B,oe,ie){var xe=function(ke){return ke*oe},_e=function(ke){return ke*ie};R.each(function(ke){var Pe=$.select(this);if(ke.del)return Pe.remove();var Ge=Pe.select("text.nums"),Je=ke.anchor,yt=Je==="end"?-1:1,lt=ve(ke),mt=de(ke,B),Ce=mt.x,Ie=mt.y,Se=Je==="middle";Pe.select("path").attr("d",Se?"M-"+xe(ke.bx/2+ke.tx2width/2)+","+_e(Ie-ke.by/2)+"h"+xe(ke.bx)+"v"+_e(ke.by)+"h-"+xe(ke.bx)+"Z":"M0,0L"+xe(yt*Y+Ce)+","+_e(Y+Ie)+"v"+_e(ke.by/2-Y)+"h"+xe(yt*ke.bx)+"v-"+_e(ke.by)+"H"+xe(yt*Y+Ce)+"V"+_e(Ie-Y)+"Z");var Be=Ce+lt.textShiftX,rt=Ie+ke.ty0-ke.by/2+Z,ht=ke.textAlign||"auto";ht!=="auto"&&(ht==="left"&&Je!=="start"?(Ge.attr("text-anchor","start"),Be=Se?-ke.bx/2-ke.tx2width/2+Z:-ke.bx-Z):ht==="right"&&Je!=="end"&&(Ge.attr("text-anchor","end"),Be=Se?ke.bx/2-ke.tx2width/2-Z:ke.bx+Z)),Ge.call(w.positionText,xe(Be),_e(rt)),ke.tx2width&&(Pe.select("text.name").call(w.positionText,xe(lt.text2ShiftX+lt.alignShift*Z+Ce),_e(Ie+ke.ty0-ke.by/2+Z)),Pe.select("rect").call(T.setRect,xe(lt.text2ShiftX+(lt.alignShift-1)*ke.tx2width/2+Ce),_e(Ie-ke.by/2-1),xe(ke.tx2width),_e(ke.by+2)))})}function be(R,B){var oe=R.index,ie=R.trace||{},xe=R.cd[0],_e=R.cd[oe]||{};function ke(mt){return mt||h(mt)&&mt===0}var Pe=Array.isArray(oe)?function(mt,Ce){var Ie=u.castOption(xe,oe,mt);return ke(Ie)?Ie:u.extractOption({},ie,"",Ce)}:function(mt,Ce){return u.extractOption(_e,ie,mt,Ce)};function Ge(mt,Ce,Ie){var Se=Pe(Ce,Ie);ke(Se)&&(R[mt]=Se)}if(Ge("hoverinfo","hi","hoverinfo"),Ge("bgcolor","hbg","hoverlabel.bgcolor"),Ge("borderColor","hbc","hoverlabel.bordercolor"),Ge("fontFamily","htf","hoverlabel.font.family"),Ge("fontSize","hts","hoverlabel.font.size"),Ge("fontColor","htc","hoverlabel.font.color"),Ge("fontWeight","htw","hoverlabel.font.weight"),Ge("fontStyle","hty","hoverlabel.font.style"),Ge("fontVariant","htv","hoverlabel.font.variant"),Ge("nameLength","hnl","hoverlabel.namelength"),Ge("textAlign","hta","hoverlabel.align"),R.posref=B==="y"||B==="closest"&&ie.orientation==="h"?R.xa._offset+(R.x0+R.x1)/2:R.ya._offset+(R.y0+R.y1)/2,R.x0=u.constrain(R.x0,0,R.xa._length),R.x1=u.constrain(R.x1,0,R.xa._length),R.y0=u.constrain(R.y0,0,R.ya._length),R.y1=u.constrain(R.y1,0,R.ya._length),R.xLabelVal!==void 0&&(R.xLabel="xLabel"in R?R.xLabel:D.hoverLabelText(R.xa,R.xLabelVal,ie.xhoverformat),R.xVal=R.xa.c2d(R.xLabelVal)),R.yLabelVal!==void 0&&(R.yLabel="yLabel"in R?R.yLabel:D.hoverLabelText(R.ya,R.yLabelVal,ie.yhoverformat),R.yVal=R.ya.c2d(R.yLabelVal)),R.zLabelVal!==void 0&&R.zLabel===void 0&&(R.zLabel=String(R.zLabelVal)),!isNaN(R.xerr)&&!(R.xa.type==="log"&&R.xerr<=0)){var Je=D.tickText(R.xa,R.xa.c2l(R.xerr),"hover").text;R.xerrneg!==void 0?R.xLabel+=" +"+Je+" / -"+D.tickText(R.xa,R.xa.c2l(R.xerrneg),"hover").text:R.xLabel+="  "+Je,B==="x"&&(R.distance+=1)}if(!isNaN(R.yerr)&&!(R.ya.type==="log"&&R.yerr<=0)){var yt=D.tickText(R.ya,R.ya.c2l(R.yerr),"hover").text;R.yerrneg!==void 0?R.yLabel+=" +"+yt+" / -"+D.tickText(R.ya,R.ya.c2l(R.yerrneg),"hover").text:R.yLabel+="  "+yt,B==="y"&&(R.distance+=1)}var lt=R.hoverinfo||R.trace.hoverinfo;return lt&&lt!=="all"&&(lt=Array.isArray(lt)?lt:lt.split("+"),lt.indexOf("x")===-1&&(R.xLabel=void 0),lt.indexOf("y")===-1&&(R.yLabel=void 0),lt.indexOf("z")===-1&&(R.zLabel=void 0),lt.indexOf("text")===-1&&(R.text=void 0),lt.indexOf("name")===-1&&(R.name=void 0)),R}function Le(R,B,oe){var ie=oe.container,xe=oe.fullLayout,_e=xe._size,ke=oe.event,Pe=!!B.hLinePoint,Ge=!!B.vLinePoint,Je,yt;if(ie.selectAll(".spikeline").remove(),!!(Ge||Pe)){var lt=y.combine(xe.plot_bgcolor,xe.paper_bgcolor);if(Pe){var mt=B.hLinePoint,Ce,Ie;Je=mt&&mt.xa,yt=mt&&mt.ya;var Se=yt.spikesnap;Se==="cursor"?(Ce=ke.pointerX,Ie=ke.pointerY):(Ce=Je._offset+mt.x,Ie=yt._offset+mt.y);var Be=c.readability(mt.color,lt)<1.5?y.contrast(lt):mt.color,rt=yt.spikemode,ht=yt.spikethickness,Lt=yt.spikecolor||Be,Ct=D.getPxPosition(R,yt),zt,Bt;if(rt.indexOf("toaxis")!==-1||rt.indexOf("across")!==-1){if(rt.indexOf("toaxis")!==-1&&(zt=Ct,Bt=Ce),rt.indexOf("across")!==-1){var Ft=yt._counterDomainMin,nr=yt._counterDomainMax;yt.anchor==="free"&&(Ft=Math.min(Ft,yt.position),nr=Math.max(nr,yt.position)),zt=_e.l+Ft*_e.w,Bt=_e.l+nr*_e.w}ie.insert("line",":first-child").attr({x1:zt,x2:Bt,y1:Ie,y2:Ie,"stroke-width":ht,stroke:Lt,"stroke-dasharray":T.dashStyle(yt.spikedash,ht)}).classed("spikeline",!0).classed("crisp",!0),ie.insert("line",":first-child").attr({x1:zt,x2:Bt,y1:Ie,y2:Ie,"stroke-width":ht+2,stroke:lt}).classed("spikeline",!0).classed("crisp",!0)}rt.indexOf("marker")!==-1&&ie.insert("circle",":first-child").attr({cx:Ct+(yt.side!=="right"?ht:-ht),cy:Ie,r:ht,fill:Lt}).classed("spikeline",!0)}if(Ge){var _t=B.vLinePoint,rr,pr;Je=_t&&_t.xa,yt=_t&&_t.ya;var Yt=Je.spikesnap;Yt==="cursor"?(rr=ke.pointerX,pr=ke.pointerY):(rr=Je._offset+_t.x,pr=yt._offset+_t.y);var sr=c.readability(_t.color,lt)<1.5?y.contrast(lt):_t.color,ze=Je.spikemode,Ye=Je.spikethickness,$e=Je.spikecolor||sr,he=D.getPxPosition(R,Je),je,Ne;if(ze.indexOf("toaxis")!==-1||ze.indexOf("across")!==-1){if(ze.indexOf("toaxis")!==-1&&(je=he,Ne=pr),ze.indexOf("across")!==-1){var Re=Je._counterDomainMin,nt=Je._counterDomainMax;Je.anchor==="free"&&(Re=Math.min(Re,Je.position),nt=Math.max(nt,Je.position)),je=_e.t+(1-nt)*_e.h,Ne=_e.t+(1-Re)*_e.h}ie.insert("line",":first-child").attr({x1:rr,x2:rr,y1:je,y2:Ne,"stroke-width":Ye,stroke:$e,"stroke-dasharray":T.dashStyle(Je.spikedash,Ye)}).classed("spikeline",!0).classed("crisp",!0),ie.insert("line",":first-child").attr({x1:rr,x2:rr,y1:je,y2:Ne,"stroke-width":Ye+2,stroke:lt}).classed("spikeline",!0).classed("crisp",!0)}ze.indexOf("marker")!==-1&&ie.insert("circle",":first-child").attr({cx:rr,cy:he-(Je.side!=="top"?Ye:-Ye),r:Ye,fill:$e}).classed("spikeline",!0)}}}function Ae(R,B,oe){if(!oe||oe.length!==R._hoverdata.length)return!0;for(var ie=oe.length-1;ie>=0;ie--){var xe=oe[ie],_e=R._hoverdata[ie];if(xe.curveNumber!==_e.curveNumber||String(xe.pointNumber)!==String(_e.pointNumber)||String(xe.pointNumbers)!==String(_e.pointNumbers))return!0}return!1}function We(R,B){return!0}function te(R,B){return w.plainText(R||"",{len:B,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function ae(R,B){for(var oe=B.charAt(0),ie=[],xe=[],_e=[],ke=0;ke<R.length;ke++){var Pe=R[ke];A.traceIs(Pe.trace,"bar-like")||A.traceIs(Pe.trace,"box-violin")?_e.push(Pe):Pe.trace[oe+"period"]?xe.push(Pe):ie.push(Pe)}return ie.concat(xe).concat(_e)}function G(R,B,oe){var ie=B[R+"a"],xe=B[R+"Val"],_e=B.cd[0];if(ie.type==="category"||ie.type==="multicategory")xe=ie._categoriesMap[xe];else if(ie.type==="date"){var ke=B.trace[R+"periodalignment"];if(ke){var Pe=B.cd[B.index],Ge=Pe[R+"Start"];Ge===void 0&&(Ge=Pe[R]);var Je=Pe[R+"End"];Je===void 0&&(Je=Pe[R]);var yt=Je-Ge;ke==="end"?xe+=yt:ke==="middle"&&(xe+=yt/2)}xe=ie.d2c(xe)}return _e&&_e.t&&_e.t.posLetter===ie._id&&(oe.boxmode==="group"||oe.violinmode==="group")&&(xe+=_e.t.dPos),xe}function Q(R){return R.offsetTop+R.clientTop}function U(R){return R.offsetLeft+R.clientLeft}function re(R,B){var oe=R._fullLayout,ie=B.getBoundingClientRect(),xe=ie.left,_e=ie.top,ke=xe+ie.width,Pe=_e+ie.height,Ge=u.apply3DTransform(oe._invTransform)(xe,_e),Je=u.apply3DTransform(oe._invTransform)(ke,Pe),yt=Ge[0],lt=Ge[1],mt=Je[0],Ce=Je[1];return{x:yt,y:lt,width:mt-yt,height:Ce-lt,top:Math.min(lt,Ce),left:Math.min(yt,mt),right:Math.max(yt,mt),bottom:Math.max(lt,Ce)}}}}),nu=i({"src/components/fx/hoverlabel_defaults.js"(V,$){var h=_r(),c=ut(),u=Wa().isUnifiedHover;$.exports=function(v,m,g,w){w=w||{};var o=m.legend;function T(y){w.font[y]||(w.font[y]=o?m.legend.font[y]:m.font[y])}m&&u(m.hovermode)&&(w.font||(w.font={}),T("size"),T("family"),T("color"),T("weight"),T("style"),T("variant"),o?(w.bgcolor||(w.bgcolor=c.combine(m.legend.bgcolor,m.paper_bgcolor)),w.bordercolor||(w.bordercolor=m.legend.bordercolor)):w.bgcolor||(w.bgcolor=m.paper_bgcolor)),g("hoverlabel.bgcolor",w.bgcolor),g("hoverlabel.bordercolor",w.bordercolor),g("hoverlabel.namelength",w.namelength),h.coerceFont(g,"hoverlabel.font",w.font),g("hoverlabel.align",w.align)}}}),Vf=i({"src/components/fx/layout_global_defaults.js"(V,$){var h=_r(),c=nu(),u=kr();$.exports=function(v,m){function g(w,o){return h.coerce(v,m,u,w,o)}c(v,m,g)}}}),$f=i({"src/components/fx/defaults.js"(V,$){var h=_r(),c=yr(),u=nu();$.exports=function(v,m,g,w){function o(y,k){return h.coerce(v,m,c,y,k)}var T=h.extendFlat({},w.hoverlabel);m.hovertemplate&&(T.namelength=-1),u(v,m,o,T)}}}),sd=i({"src/components/fx/hovermode_defaults.js"(V,$){var h=_r(),c=kr();$.exports=function(p,v){function m(g,w){return v[g]!==void 0?v[g]:h.coerce(p,v,c,g,w)}return m("clickmode"),m("hoversubplots"),m("hovermode")}}}),Yf=i({"src/components/fx/layout_defaults.js"(V,$){var h=_r(),c=kr(),u=sd(),p=nu();$.exports=function(m,g){function w(A,C){return h.coerce(m,g,c,A,C)}var o=u(m,g);o&&(w("hoverdistance"),w("spikedistance"));var T=w("dragmode");T==="select"&&w("selectdirection");var y=g._has("mapbox"),k=g._has("map"),D=g._has("geo"),M=g._basePlotModules.length;g.dragmode==="zoom"&&((y||k||D)&&M===1||(y||k)&&D&&M===2)&&(g.dragmode="pan"),p(m,g,w),h.coerceFont(w,"hoverlabel.grouptitlefont",g.hoverlabel.font)}}}),Gf=i({"src/components/fx/calc.js"(V,$){var h=_r(),c=xn();$.exports=function(v){var m=v.calcdata,g=v._fullLayout;function w(D){return function(M){return h.coerceHoverinfo({hoverinfo:M},{_module:D._module},g)}}for(var o=0;o<m.length;o++){var T=m[o],y=T[0].trace;if(!c.traceIs(y,"pie-like")){var k=c.traceIs(y,"2dMap")?u:h.fillArray;k(y.hoverinfo,T,"hi",w(y)),y.hovertemplate&&k(y.hovertemplate,T,"ht"),y.hoverlabel&&(k(y.hoverlabel.bgcolor,T,"hbg"),k(y.hoverlabel.bordercolor,T,"hbc"),k(y.hoverlabel.font.size,T,"hts"),k(y.hoverlabel.font.color,T,"htc"),k(y.hoverlabel.font.family,T,"htf"),k(y.hoverlabel.font.weight,T,"htw"),k(y.hoverlabel.font.style,T,"hty"),k(y.hoverlabel.font.variant,T,"htv"),k(y.hoverlabel.namelength,T,"hnl"),k(y.hoverlabel.align,T,"hta"))}}};function u(p,v,m,g){g=g||h.identity,Array.isArray(p)&&(v[0][m]=g(p))}}}),Xf=i({"src/components/fx/click.js"(V,$){var h=xn(),c=ad().hover;$.exports=function(p,v,m){var g=h.getComponentMethod("annotations","onClick")(p,p._hoverdata);m!==void 0&&c(p,v,m,!0);function w(){p.emit("plotly_click",{points:p._hoverdata,event:v})}p._hoverdata&&v&&v.target&&(g&&g.then?g.then(w):w(),v.stopImmediatePropagation&&v.stopImmediatePropagation())}}}),so=i({"src/components/fx/index.js"(V,$){var h=f(),c=_r(),u=Ys(),p=Wa(),v=kr(),m=ad();$.exports={moduleType:"component",name:"fx",constants:mr(),schema:{layout:v},attributes:yr(),layoutAttributes:v,supplyLayoutGlobalDefaults:Vf(),supplyDefaults:$f(),supplyLayoutDefaults:Yf(),calc:Gf(),getDistanceFunction:p.getDistanceFunction,getClosest:p.getClosest,inbox:p.inbox,quadrature:p.quadrature,appendArrayPointValue:p.appendArrayPointValue,castHoverOption:w,castHoverinfo:o,hover:m.hover,unhover:u.unhover,loneHover:m.loneHover,loneUnhover:g,click:Xf()};function g(T){var y=c.isD3Selection(T)?T:h.select(T);y.selectAll("g.hovertext").remove(),y.selectAll(".spikeline").remove()}function w(T,y,k){return c.castOption(T,y,"hoverlabel."+k)}function o(T,y,k){function D(M){return c.coerceHoverinfo({hoverinfo:M},{_module:T._module},y)}return c.castOption(T,k,"hoverinfo",D)}}}),jl=i({"src/components/dragelement/helpers.js"(V){V.selectMode=function($){return $==="lasso"||$==="select"},V.drawMode=function($){return $==="drawclosedpath"||$==="drawopenpath"||$==="drawline"||$==="drawrect"||$==="drawcircle"},V.openMode=function($){return $==="drawline"||$==="drawopenpath"},V.rectMode=function($){return $==="select"||$==="drawline"||$==="drawrect"||$==="drawcircle"},V.freeMode=function($){return $==="lasso"||$==="drawclosedpath"||$==="drawopenpath"},V.selectingOrDrawing=function($){return V.freeMode($)||V.rectMode($)}}}),iu=i({"src/lib/clear_gl_canvases.js"(V,$){$.exports=function(c){var u=c._fullLayout;u._glcanvas&&u._glcanvas.size()&&u._glcanvas.each(function(p){p.regl&&p.regl.clear({color:!0,depth:!0})})}}}),au=i({"src/fonts/ploticon.js"(V,$){$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}}}),su=i({"src/components/shapes/draw_newshape/constants.js"(V,$){var h=32;$.exports={CIRCLE_SIDES:h,i000:0,i090:h/4,i180:h/2,i270:h/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}}}),ou=i({"src/components/selections/helpers.js"(V,$){var h=_r().strTranslate;function c(m,g){switch(m.type){case"log":return m.p2d(g);case"date":return m.p2r(g,0,m.calendar);default:return m.p2r(g)}}function u(m,g){switch(m.type){case"log":return m.d2p(g);case"date":return m.r2p(g,0,m.calendar);default:return m.r2p(g)}}function p(m){var g=m._id.charAt(0)==="y"?1:0;return function(w){return c(m,w[g])}}function v(m){return h(m.xaxis._offset,m.yaxis._offset)}$.exports={p2r:c,r2p:u,axValue:p,getTransform:v}}}),Io=i({"src/components/shapes/draw_newshape/helpers.js"(V){var $=hc(),h=su(),c=h.CIRCLE_SIDES,u=h.SQRT2,p=ou(),v=p.p2r,m=p.r2p,g=[0,3,4,5,6,1,2],w=[0,3,4,1,2];V.writePaths=function(y){var k=y.length;if(!k)return"M0,0Z";for(var D="",M=0;M<k;M++)for(var A=y[M].length,C=0;C<A;C++){var j=y[M][C][0];if(j==="Z")D+="Z";else for(var b=y[M][C].length,S=0;S<b;S++){var L=S;j==="Q"||j==="S"?L=w[S]:j==="C"&&(L=g[S]),D+=y[M][C][L],S>0&&S<b-1&&(D+=",")}}return D},V.readPaths=function(y,k,D,M){var A=$(y),C=[],j=-1,b=function(){j++,C[j]=[]},S,L=0,F=0,P,J,H=function(){P=L,J=F};H();for(var Y=0;Y<A.length;Y++){var Z=[],z,q,X,K,ee=A[Y][0],ne=ee;switch(ee){case"M":b(),L=+A[Y][1],F=+A[Y][2],Z.push([ne,L,F]),H();break;case"Q":case"S":z=+A[Y][1],X=+A[Y][2],L=+A[Y][3],F=+A[Y][4],Z.push([ne,L,F,z,X]);break;case"C":z=+A[Y][1],X=+A[Y][2],q=+A[Y][3],K=+A[Y][4],L=+A[Y][5],F=+A[Y][6],Z.push([ne,L,F,z,X,q,K]);break;case"T":case"L":L=+A[Y][1],F=+A[Y][2],Z.push([ne,L,F]);break;case"H":ne="L",L=+A[Y][1],Z.push([ne,L,F]);break;case"V":ne="L",F=+A[Y][1],Z.push([ne,L,F]);break;case"A":ne="L";var le=+A[Y][1],W=+A[Y][2];+A[Y][4]||(le=-le,W=-W);var ce=L-le,de=F;for(S=1;S<=c/2;S++){var ve=2*Math.PI*S/c;Z.push([ne,ce+le*Math.cos(ve),de+W*Math.sin(ve)])}break;case"Z":(L!==P||F!==J)&&(L=P,F=J,Z.push([ne,L,F]));break}for(var pe=(D||{}).domain,be=k._fullLayout._size,Le=D&&D.xsizemode==="pixel",Ae=D&&D.ysizemode==="pixel",We=M===!1,te=0;te<Z.length;te++){for(S=0;S+2<7;S+=2){var ae=Z[te][S+1],G=Z[te][S+2];ae===void 0||G===void 0||(L=ae,F=G,D&&(D.xaxis&&D.xaxis.p2r?(We&&(ae-=D.xaxis._offset),Le?ae=m(D.xaxis,D.xanchor)+ae:ae=v(D.xaxis,ae)):(We&&(ae-=be.l),pe?ae=pe.x[0]+ae/be.w:ae=ae/be.w),D.yaxis&&D.yaxis.p2r?(We&&(G-=D.yaxis._offset),Ae?G=m(D.yaxis,D.yanchor)-G:G=v(D.yaxis,G)):(We&&(G-=be.t),pe?G=pe.y[1]-G/be.h:G=1-G/be.h)),Z[te][S+1]=ae,Z[te][S+2]=G)}C[j].push(Z[te].slice())}}return C};function o(y,k){return Math.abs(y-k)<=1e-6}function T(y,k){var D=k[1]-y[1],M=k[2]-y[2];return Math.sqrt(D*D+M*M)}V.pointsOnRectangle=function(y){var k=y.length;if(k!==5)return!1;for(var D=1;D<3;D++){var M=y[0][D]-y[1][D],A=y[3][D]-y[2][D];if(!o(M,A))return!1;var C=y[0][D]-y[3][D],j=y[1][D]-y[2][D];if(!o(C,j))return!1}return!o(y[0][1],y[1][1])&&!o(y[0][1],y[3][1])?!1:!!(T(y[0],y[1])*T(y[0],y[3]))},V.pointsOnEllipse=function(y){var k=y.length;if(k!==c+1)return!1;k=c;for(var D=0;D<k;D++){var M=(k*2-D)%k,A=(k/2+M)%k,C=(k/2+D)%k;if(!o(T(y[D],y[C]),T(y[M],y[A])))return!1}return!0},V.handleEllipse=function(y,k,D){if(!y)return[k,D];var M=V.ellipseOver({x0:k[0],y0:k[1],x1:D[0],y1:D[1]}),A=(M.x1+M.x0)/2,C=(M.y1+M.y0)/2,j=(M.x1-M.x0)/2,b=(M.y1-M.y0)/2;j||(j=b=b/u),b||(b=j=j/u);for(var S=[],L=0;L<c;L++){var F=L*2*Math.PI/c;S.push([A+j*Math.cos(F),C+b*Math.sin(F)])}return S},V.ellipseOver=function(y){var k=y.x0,D=y.y0,M=y.x1,A=y.y1,C=M-k,j=A-D;k-=C,D-=j;var b=(k+M)/2,S=(D+A)/2,L=u;return C*=L,j*=L,{x0:b-C,y0:S-j,x1:b+C,y1:S+j}},V.fixDatesForPaths=function(y,k,D){var M=k.type==="date",A=D.type==="date";if(!M&&!A)return y;for(var C=0;C<y.length;C++)for(var j=0;j<y[C].length;j++)for(var b=0;b+2<y[C][j].length;b+=2)M&&(y[C][j][b+1]=y[C][j][b+1].replace(" ","_")),A&&(y[C][j][b+2]=y[C][j][b+2].replace(" ","_"));return y}}}),lu=i({"src/components/shapes/draw_newshape/newshapes.js"(V,$){var h=jl(),c=h.drawMode,u=h.openMode,p=su(),v=p.i000,m=p.i090,g=p.i180,w=p.i270,o=p.cos45,T=p.sin45,y=ou(),k=y.p2r,D=y.r2p,M=rn(),A=M.clearOutline,C=Io(),j=C.readPaths,b=C.writePaths,S=C.ellipseOver,L=C.fixDatesForPaths;function F(J,H){if(J.length){var Y=J[0][0];if(Y){var Z=H.gd,z=H.isActiveShape,q=H.dragmode,X=(Z.layout||{}).shapes||[];if(!c(q)&&z!==void 0){var K=Z._fullLayout._activeShapeIndex;if(K<X.length)switch(Z._fullLayout.shapes[K].type){case"rect":q="drawrect";break;case"circle":q="drawcircle";break;case"line":q="drawline";break;case"path":var ee=X[K].path||"";ee[ee.length-1]==="Z"?q="drawclosedpath":q="drawopenpath";break}}var ne=P(J,H,q);A(Z);for(var le=H.editHelpers,W=(le||{}).modifyItem,ce=[],de=0;de<X.length;de++){var ve=Z._fullLayout.shapes[de];if(ce[de]=ve._input,z!==void 0&&de===Z._fullLayout._activeShapeIndex){var pe=ne;switch(ve.type){case"line":case"rect":case"circle":W("x0",pe.x0-(ve.x0shift||0)),W("x1",pe.x1-(ve.x1shift||0)),W("y0",pe.y0-(ve.y0shift||0)),W("y1",pe.y1-(ve.y1shift||0));break;case"path":W("path",pe.path);break}}}return z===void 0?(ce.push(ne),ce):le?le.getUpdateObj():{}}}}function P(J,H,Y){var Z=J[0][0],z=H.gd,q=Z.getAttribute("d"),X=z._fullLayout.newshape,K=H.plotinfo,ee=H.isActiveShape,ne=K.xaxis,le=K.yaxis,W=!!K.domain||!K.xaxis,ce=!!K.domain||!K.yaxis,de=u(Y),ve=j(q,z,K,ee),pe={editable:!0,visible:X.visible,name:X.name,showlegend:X.showlegend,legend:X.legend,legendwidth:X.legendwidth,legendgroup:X.legendgroup,legendgrouptitle:{text:X.legendgrouptitle.text,font:X.legendgrouptitle.font},legendrank:X.legendrank,label:X.label,xref:W?"paper":ne._id,yref:ce?"paper":le._id,layer:X.layer,opacity:X.opacity,line:{color:X.line.color,width:X.line.width,dash:X.line.dash}};de||(pe.fillcolor=X.fillcolor,pe.fillrule=X.fillrule);var be;if(ve.length===1&&(be=ve[0]),be&&be.length===5&&Y==="drawrect")pe.type="rect",pe.x0=be[0][1],pe.y0=be[0][2],pe.x1=be[2][1],pe.y1=be[2][2];else if(be&&Y==="drawline")pe.type="line",pe.x0=be[0][1],pe.y0=be[0][2],pe.x1=be[1][1],pe.y1=be[1][2];else if(be&&Y==="drawcircle"){pe.type="circle";var Le=be[v][1],Ae=be[m][1],We=be[g][1],te=be[w][1],ae=be[v][2],G=be[m][2],Q=be[g][2],U=be[w][2],re=K.xaxis&&(K.xaxis.type==="date"||K.xaxis.type==="log"),R=K.yaxis&&(K.yaxis.type==="date"||K.yaxis.type==="log");re&&(Le=D(K.xaxis,Le),Ae=D(K.xaxis,Ae),We=D(K.xaxis,We),te=D(K.xaxis,te)),R&&(ae=D(K.yaxis,ae),G=D(K.yaxis,G),Q=D(K.yaxis,Q),U=D(K.yaxis,U));var B=(Ae+te)/2,oe=(ae+Q)/2,ie=(te-Ae+We-Le)/2,xe=(U-G+Q-ae)/2,_e=S({x0:B,y0:oe,x1:B+ie*o,y1:oe+xe*T});re&&(_e.x0=k(K.xaxis,_e.x0),_e.x1=k(K.xaxis,_e.x1)),R&&(_e.y0=k(K.yaxis,_e.y0),_e.y1=k(K.yaxis,_e.y1)),pe.x0=_e.x0,pe.y0=_e.y0,pe.x1=_e.x1,pe.y1=_e.y1}else pe.type="path",ne&&le&&L(ve,ne,le),pe.path=b(ve),be=null;return pe}$.exports={newShapes:F,createShapeObj:P}}}),od=i({"src/components/selections/draw_newselection/newselections.js"(V,$){var h=jl(),c=h.selectMode,u=rn(),p=u.clearOutline,v=Io(),m=v.readPaths,g=v.writePaths,w=v.fixDatesForPaths;$.exports=function(T,y){if(T.length){var k=T[0][0];if(k){var D=k.getAttribute("d"),M=y.gd,A=M._fullLayout.newselection,C=y.plotinfo,j=C.xaxis,b=C.yaxis,S=y.isActiveSelection,L=y.dragmode,F=(M.layout||{}).selections||[];if(!c(L)&&S!==void 0){var P=M._fullLayout._activeSelectionIndex;if(P<F.length)switch(M._fullLayout.selections[P].type){case"rect":L="select";break;case"path":L="lasso";break}}var J=m(D,M,C,S),H={xref:j._id,yref:b._id,opacity:A.opacity,line:{color:A.line.color,width:A.line.width,dash:A.line.dash}},Y;J.length===1&&(Y=J[0]),Y&&Y.length===5&&L==="select"?(H.type="rect",H.x0=Y[0][1],H.y0=Y[0][2],H.x1=Y[2][1],H.y1=Y[2][2]):(H.type="path",j&&b&&w(J,j,b),H.path=g(J),Y=null),p(M);for(var Z=y.editHelpers,z=(Z||{}).modifyItem,q=[],X=0;X<F.length;X++){var K=M._fullLayout.selections[X];if(!K){q[X]=K;continue}if(q[X]=K._input,S!==void 0&&X===M._fullLayout._activeSelectionIndex){var ee=H;switch(K.type){case"rect":z("x0",ee.x0),z("x1",ee.x1),z("y0",ee.y0),z("y1",ee.y1);break;case"path":z("path",ee.path);break}}}return S===void 0?(q.push(H),q):Z?Z.getUpdateObj():{}}}}}}),vc=i({"src/components/shapes/constants.js"(V,$){$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}}}),$t=i({"src/components/shapes/helpers.js"(V){var $=vc(),h=_r(),c=ji();V.rangeToShapePosition=function(v){return v.type==="log"?v.r2d:function(m){return m}},V.shapePositionToRange=function(v){return v.type==="log"?v.d2r:function(m){return m}},V.decodeDate=function(v){return function(m){return m.replace&&(m=m.replace("_"," ")),v(m)}},V.encodeDate=function(v){return function(m){return v(m).replace(" ","_")}},V.extractPathCoords=function(v,m,g){var w=[],o=v.match($.segmentRE);return o.forEach(function(T){var y=m[T.charAt(0)].drawn;if(y!==void 0){var k=T.substr(1).match($.paramRE);if(!(!k||k.length<y)){var D=k[y],M=g?D:h.cleanNumber(D);w.push(M)}}}),w},V.getDataToPixel=function(v,m,g,w,o){var T=v._fullLayout._size,y;if(m)if(o==="domain")y=function(D){return m._length*(w?1-D:D)+m._offset};else{var k=V.shapePositionToRange(m);y=function(D){var M=p(m,g);return m._offset+m.r2p(k(D,!0))+M},m.type==="date"&&(y=V.decodeDate(y))}else w?y=function(D){return T.t+T.h*(1-D)}:y=function(D){return T.l+T.w*D};return y},V.getPixelToData=function(v,m,g,w){var o=v._fullLayout._size,T;if(m)if(w==="domain")T=function(k){var D=(k-m._offset)/m._length;return g?1-D:D};else{var y=V.rangeToShapePosition(m);T=function(k){return y(m.p2r(k-m._offset))}}else g?T=function(k){return 1-(k-o.t)/o.h}:T=function(k){return(k-o.l)/o.w};return T},V.roundPositionForSharpStrokeRendering=function(v,m){var g=Math.round(m%2)===1,w=Math.round(v);return g?w+.5:w},V.makeShapesOptionsAndPlotinfo=function(v,m){var g=v._fullLayout.shapes[m]||{},w=v._fullLayout._plots[g.xref+g.yref],o=!!w;return o?w._hadPlotinfo=!0:(w={},g.xref&&g.xref!=="paper"&&(w.xaxis=v._fullLayout[g.xref+"axis"]),g.yref&&g.yref!=="paper"&&(w.yaxis=v._fullLayout[g.yref+"axis"])),w.xsizemode=g.xsizemode,w.ysizemode=g.ysizemode,w.xanchor=g.xanchor,w.yanchor=g.yanchor,{options:g,plotinfo:w}},V.makeSelectionsOptionsAndPlotinfo=function(v,m){var g=v._fullLayout.selections[m]||{},w=v._fullLayout._plots[g.xref+g.yref],o=!!w;return o?w._hadPlotinfo=!0:(w={},g.xref&&(w.xaxis=v._fullLayout[g.xref+"axis"]),g.yref&&(w.yaxis=v._fullLayout[g.yref+"axis"])),{options:g,plotinfo:w}},V.getPathString=function(v,m){var g=m.type,w=c.getRefType(m.xref),o=c.getRefType(m.yref),T=c.getFromId(v,m.xref),y=c.getFromId(v,m.yref),k=v._fullLayout._size,D,M,A,C,j=p(T,m.x0shift),b=p(T,m.x1shift),S=p(y,m.y0shift),L=p(y,m.y1shift),F,P,J,H;if(T?w==="domain"?M=function(W){return T._offset+T._length*W}:(D=V.shapePositionToRange(T),M=function(W){return T._offset+T.r2p(D(W,!0))}):M=function(W){return k.l+k.w*W},y?o==="domain"?C=function(W){return y._offset+y._length*(1-W)}:(A=V.shapePositionToRange(y),C=function(W){return y._offset+y.r2p(A(W,!0))}):C=function(W){return k.t+k.h*(1-W)},g==="path")return T&&T.type==="date"&&(M=V.decodeDate(M)),y&&y.type==="date"&&(C=V.decodeDate(C)),u(m,M,C);if(m.xsizemode==="pixel"){var Y=M(m.xanchor);F=Y+m.x0+j,P=Y+m.x1+b}else F=M(m.x0)+j,P=M(m.x1)+b;if(m.ysizemode==="pixel"){var Z=C(m.yanchor);J=Z-m.y0+S,H=Z-m.y1+L}else J=C(m.y0)+S,H=C(m.y1)+L;if(g==="line")return"M"+F+","+J+"L"+P+","+H;if(g==="rect")return"M"+F+","+J+"H"+P+"V"+H+"H"+F+"Z";var z=(F+P)/2,q=(J+H)/2,X=Math.abs(z-F),K=Math.abs(q-J),ee="A"+X+","+K,ne=z+X+","+q,le=z+","+(q-K);return"M"+ne+ee+" 0 1,1 "+le+ee+" 0 0,1 "+ne+"Z"};function u(v,m,g){var w=v.path,o=v.xsizemode,T=v.ysizemode,y=v.xanchor,k=v.yanchor;return w.replace($.segmentRE,function(D){var M=0,A=D.charAt(0),C=$.paramIsX[A],j=$.paramIsY[A],b=$.numParams[A],S=D.substr(1).replace($.paramRE,function(L){return C[M]?o==="pixel"?L=m(y)+Number(L):L=m(L):j[M]&&(T==="pixel"?L=g(k)-Number(L):L=g(L)),M++,M>b&&(L="X"),L});return M>b&&(S=S.replace(/[\s,]*X.*/,""),h.log("Ignoring extra params in segment "+D)),A+S})}function p(v,m){m=m||0;var g=0;return m&&v&&(v.type==="category"||v.type==="multicategory")&&(g=(v.r2p(1)-v.r2p(0))*m),g}}}),gn=i({"src/components/shapes/display_labels.js"(V,$){var h=_r(),c=ji(),u=ia(),p=oi(),v=Io().readPaths,m=$t(),g=m.getPathString,w=Ki(),o=na().FROM_TL;$.exports=function(D,M,A,C){if(C.selectAll(".shape-label").remove(),!!(A.label.text||A.label.texttemplate)){var j;if(A.label.texttemplate){var b={};if(A.type!=="path"){var S=c.getFromId(D,A.xref),L=c.getFromId(D,A.yref);for(var F in w){var P=w[F](A,S,L);P!==void 0&&(b[F]=P)}}j=h.texttemplateStringForShapes(A.label.texttemplate,{},D._fullLayout._d3locale,b)}else j=A.label.text;var J={"data-index":M},H=A.label.font,Y={"data-notex":1},Z=C.append("g").attr(J).classed("shape-label",!0),z=Z.append("text").attr(Y).classed("shape-label-text",!0).text(j),q,X,K,ee;if(A.path){var ne=g(D,A),le=v(ne,D);q=1/0,K=1/0,X=-1/0,ee=-1/0;for(var W=0;W<le.length;W++)for(var ce=0;ce<le[W].length;ce++)for(var de=le[W][ce],ve=1;ve<de.length;ve+=2){var pe=de[ve],be=de[ve+1];q=Math.min(q,pe),X=Math.max(X,pe),K=Math.min(K,be),ee=Math.max(ee,be)}}else{var Le=c.getFromId(D,A.xref),Ae=A.x0shift,We=A.x1shift,te=c.getRefType(A.xref),ae=c.getFromId(D,A.yref),G=A.y0shift,Q=A.y1shift,U=c.getRefType(A.yref),re=function(Pe,Ge){var Je=m.getDataToPixel(D,Le,Ge,!1,te);return Je(Pe)},R=function(Pe,Ge){var Je=m.getDataToPixel(D,ae,Ge,!0,U);return Je(Pe)};q=re(A.x0,Ae),X=re(A.x1,We),K=R(A.y0,G),ee=R(A.y1,Q)}var B=A.label.textangle;B==="auto"&&(A.type==="line"?B=T(q,K,X,ee):B=0),z.call(function(Pe){return Pe.call(p.font,H).attr({}),u.convertToTspans(Pe,D),Pe});var oe=p.bBox(z.node()),ie=y(q,K,X,ee,A,B,oe),xe=ie.textx,_e=ie.texty,ke=ie.xanchor;z.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ke],y:_e,x:xe,transform:"rotate("+B+","+xe+","+_e+")"}).call(u.positionText,xe,_e)}};function T(k,D,M,A){var C,j;return j=Math.abs(M-k),M>=k?C=D-A:C=A-D,-180/Math.PI*Math.atan2(C,j)}function y(k,D,M,A,C,j,b){var S=C.label.textposition,L=C.label.textangle,F=C.label.padding,P=C.type,J=Math.PI/180*j,H=Math.sin(J),Y=Math.cos(J),Z=C.label.xanchor,z=C.label.yanchor,q,X,K,ee;if(P==="line"){S==="start"?(q=k,X=D):S==="end"?(q=M,X=A):(q=(k+M)/2,X=(D+A)/2),Z==="auto"&&(S==="start"?L==="auto"?M>k?Z="left":M<k?Z="right":Z="center":M>k?Z="right":M<k?Z="left":Z="center":S==="end"?L==="auto"?M>k?Z="right":M<k?Z="left":Z="center":M>k?Z="left":M<k?Z="right":Z="center":Z="center");var ne={left:1,center:0,right:-1},le={bottom:-1,middle:0,top:1};if(L==="auto"){var W=le[z];K=-F*H*W,ee=F*Y*W}else{var ce=ne[Z],de=le[z];K=F*ce,ee=F*de}q=q+K,X=X+ee}else K=F+3,S.indexOf("right")!==-1?(q=Math.max(k,M)-K,Z==="auto"&&(Z="right")):S.indexOf("left")!==-1?(q=Math.min(k,M)+K,Z==="auto"&&(Z="left")):(q=(k+M)/2,Z==="auto"&&(Z="center")),S.indexOf("top")!==-1?X=Math.min(D,A):S.indexOf("bottom")!==-1?X=Math.max(D,A):X=(D+A)/2,ee=F,z==="bottom"?X=X-ee:z==="top"&&(X=X+ee);var ve=o[z],pe=C.label.font.size,be=b.height,Le=(be*ve-pe)*H,Ae=-(be*ve-pe)*Y;return{textx:q+Le,texty:X+Ae,xanchor:Z}}}}),qn=i({"src/components/shapes/display_outlines.js"(V,$){var h=_r(),c=h.strTranslate,u=Ys(),p=jl(),v=p.drawMode,m=p.selectMode,g=xn(),w=ut(),o=su(),T=o.i000,y=o.i090,k=o.i180,D=o.i270,M=rn(),A=M.clearOutlineControllers,C=Io(),j=C.pointsOnRectangle,b=C.pointsOnEllipse,S=C.writePaths,L=lu().newShapes,F=lu().createShapeObj,P=od(),J=gn();$.exports=function z(q,X,K,ee){ee||(ee=0);var ne=K.gd;function le(){z(q,X,K,ee++),(b(q[0])||K.hasText)&&W({redrawing:!0})}function W(lt){var mt={};K.isActiveShape!==void 0&&(K.isActiveShape=!1,mt=L(X,K)),K.isActiveSelection!==void 0&&(K.isActiveSelection=!1,mt=P(X,K),ne._fullLayout._reselect=!0),Object.keys(mt).length&&g.call((lt||{}).redrawing?"relayout":"_guiRelayout",ne,mt)}var ce=ne._fullLayout,de=ce._zoomlayer,ve=K.dragmode,pe=v(ve),be=m(ve);(pe||be)&&(ne._fullLayout._outlining=!0),A(ne),X.attr("d",S(q));var Le,Ae,We,te,ae;if(!ee&&(K.isActiveShape||K.isActiveSelection)){ae=H([],q);var G=de.append("g").attr("class","outline-controllers");xe(G),yt()}if(pe&&K.hasText){var Q=de.select(".label-temp"),U=F(X,K,K.dragmode);J(ne,"label-temp",U,Q)}function re(lt){We=+lt.srcElement.getAttribute("data-i"),te=+lt.srcElement.getAttribute("data-j"),Le[We][te].moveFn=R}function R(lt,mt){if(q.length){var Ce=ae[We][te][1],Ie=ae[We][te][2],Se=q[We],Be=Se.length;if(j(Se)){var rt=lt,ht=mt;if(K.isActiveSelection){var Lt=Y(Se,te);Lt[1]===Se[te][1]?ht=0:rt=0}for(var Ct=0;Ct<Be;Ct++)if(Ct!==te){var zt=Se[Ct];zt[1]===Se[te][1]&&(zt[1]=Ce+rt),zt[2]===Se[te][2]&&(zt[2]=Ie+ht)}if(Se[te][1]=Ce+rt,Se[te][2]=Ie+ht,!j(Se))for(var Bt=0;Bt<Be;Bt++)for(var Ft=0;Ft<Se[Bt].length;Ft++)Se[Bt][Ft]=ae[We][Bt][Ft]}else Se[te][1]=Ce+lt,Se[te][2]=Ie+mt;le()}}function B(){W()}function oe(){if(q.length&&q[We]&&q[We].length){for(var lt=[],mt=0;mt<q[We].length;mt++)mt!==te&&lt.push(q[We][mt]);lt.length>1&&!(lt.length===2&&lt[1][0]==="Z")&&(te===0&&(lt[0][0]="M"),q[We]=lt,le(),W())}}function ie(lt,mt){if(lt===2){We=+mt.srcElement.getAttribute("data-i"),te=+mt.srcElement.getAttribute("data-j");var Ce=q[We];!j(Ce)&&!b(Ce)&&oe()}}function xe(lt){Le=[];for(var mt=0;mt<q.length;mt++){var Ce=q[mt],Ie=j(Ce),Se=!Ie&&b(Ce);Le[mt]=[];for(var Be=Ce.length,rt=0;rt<Be;rt++)if(Ce[rt][0]!=="Z"&&!(Se&&rt!==T&&rt!==y&&rt!==k&&rt!==D)){var ht=Ie&&K.isActiveSelection,Lt;ht&&(Lt=Y(Ce,rt));var Ct=Ce[rt][1],zt=Ce[rt][2],Bt=lt.append(ht?"rect":"circle").attr("data-i",mt).attr("data-j",rt).style({fill:w.background,stroke:w.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ht){var Ft=Lt[1]-Ct,nr=Lt[2]-zt,_t=nr?5:Math.max(Math.min(25,Math.abs(Ft)-5),5),rr=Ft?5:Math.max(Math.min(25,Math.abs(nr)-5),5);Bt.classed(nr?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",_t).attr("height",rr).attr("x",Ct-_t/2).attr("y",zt-rr/2).attr("transform",c(Ft/2,nr/2))}else Bt.classed("cursor-grab",!0).attr("r",5).attr("cx",Ct).attr("cy",zt);Le[mt][rt]={element:Bt.node(),gd:ne,prepFn:re,doneFn:B,clickFn:ie},u.init(Le[mt][rt])}}}function _e(lt,mt){if(q.length)for(var Ce=0;Ce<q.length;Ce++)for(var Ie=0;Ie<q[Ce].length;Ie++)for(var Se=0;Se+2<q[Ce][Ie].length;Se+=2)q[Ce][Ie][Se+1]=ae[Ce][Ie][Se+1]+lt,q[Ce][Ie][Se+2]=ae[Ce][Ie][Se+2]+mt}function ke(lt,mt){_e(lt,mt),le()}function Pe(lt){We=+lt.srcElement.getAttribute("data-i"),We||(We=0),Ae[We].moveFn=ke}function Ge(){W()}function Je(lt){lt===2&&Z(ne)}function yt(){if(Ae=[],!!q.length){var lt=0;Ae[lt]={element:X[0][0],gd:ne,prepFn:Pe,doneFn:Ge,clickFn:Je},u.init(Ae[lt])}}};function H(z,q){for(var X=0;X<q.length;X++){var K=q[X];z[X]=[];for(var ee=0;ee<K.length;ee++){z[X][ee]=[];for(var ne=0;ne<K[ee].length;ne++)z[X][ee][ne]=K[ee][ne]}}return z}function Y(z,q){var X=z[q][1],K=z[q][2],ee=z.length,ne,le,W;return ne=(q+1)%ee,le=z[ne][1],W=z[ne][2],le===X&&W===K&&(ne=(q+2)%ee,le=z[ne][1],W=z[ne][2]),[ne,le,W]}function Z(z){if(m(z._fullLayout.dragmode)){A(z);var q=z._fullLayout._activeSelectionIndex,X=(z.layout||{}).selections||[];if(q<X.length){for(var K=[],ee=0;ee<X.length;ee++)ee!==q&&K.push(X[ee]);delete z._fullLayout._activeSelectionIndex;var ne=z._fullLayout.selections[q];z._fullLayout._deselect={xref:ne.xref,yref:ne.yref},g.call("_guiRelayout",z,{selections:K})}}}}}),ua=i({"src/components/shapes/draw.js"(V,$){var h=f(),c=xn(),u=_r(),p=ji(),v=Io().readPaths,m=qn(),g=gn(),w=rn().clearOutlineControllers,o=ut(),T=oi(),y=hr().arrayEditor,k=Ys(),D=Fo(),M=vc(),A=$t(),C=A.getPathString;$.exports={draw:j,drawOne:L,eraseActiveShape:Z,drawLabel:g};function j(z){var q=z._fullLayout;q._shapeUpperLayer.selectAll("path").remove(),q._shapeLowerLayer.selectAll("path").remove(),q._shapeUpperLayer.selectAll("text").remove(),q._shapeLowerLayer.selectAll("text").remove();for(var X in q._plots){var K=q._plots[X].shapelayer;K&&(K.selectAll("path").remove(),K.selectAll("text").remove())}for(var ee=0;ee<q.shapes.length;ee++)q.shapes[ee].visible===!0&&L(z,ee)}function b(z){return!!z._fullLayout._outlining}function S(z){return!z._context.edits.shapePosition}function L(z,q){z._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+q+'"]').remove();var X=A.makeShapesOptionsAndPlotinfo(z,q),K=X.options,ee=X.plotinfo;if(!K._input||K.visible!==!0)return;if(K.layer==="above")le(z._fullLayout._shapeUpperLayer);else if(K.xref==="paper"||K.yref==="paper")le(z._fullLayout._shapeLowerLayer);else if(K.layer==="between")le(ee.shapelayerBetween);else if(ee._hadPlotinfo){var ne=ee.mainplotinfo||ee;le(ne.shapelayer)}else le(z._fullLayout._shapeLowerLayer);function le(W){var ce=C(z,K),de={"data-index":q,"fill-rule":K.fillrule,d:ce},ve=K.opacity,pe=K.fillcolor,be=K.line.width?K.line.color:"rgba(0,0,0,0)",Le=K.line.width,Ae=K.line.dash;!Le&&K.editable===!0&&(Le=5,Ae="solid");var We=ce[ce.length-1]!=="Z",te=S(z)&&K.editable&&z._fullLayout._activeShapeIndex===q;te&&(pe=We?"rgba(0,0,0,0)":z._fullLayout.activeshape.fillcolor,ve=z._fullLayout.activeshape.opacity);var ae=W.append("g").classed("shape-group",!0).attr({"data-index":q}),G=ae.append("path").attr(de).style("opacity",ve).call(o.stroke,be).call(o.fill,pe).call(T.dashLine,Ae,Le);F(ae,z,K),g(z,q,K,ae);var Q;if((te||z._context.edits.shapePosition)&&(Q=y(z.layout,"shapes",K)),te){G.style({cursor:"move"});var U={element:G.node(),plotinfo:ee,gd:z,editHelpers:Q,hasText:K.label.text||K.label.texttemplate,isActiveShape:!0},re=v(ce,z);m(re,G,U)}else z._context.edits.shapePosition?P(z,G,K,q,W,Q):K.editable===!0&&G.style("pointer-events",We||o.opacity(pe)*ve<=.5?"stroke":"all");G.node().addEventListener("click",function(){return H(z,G)})}}function F(z,q,X){var K=(X.xref+X.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");T.setClipUrl(z,K?"clip"+q._fullLayout._uid+K:null,q)}function P(z,q,X,K,ee,ne){var le=10,W=10,ce=X.xsizemode==="pixel",de=X.ysizemode==="pixel",ve=X.type==="line",pe=X.type==="path",be=ne.modifyItem,Le,Ae,We,te,ae,G,Q,U,re,R,B,oe,ie,xe,_e,ke=h.select(q.node().parentNode),Pe=p.getFromId(z,X.xref),Ge=p.getRefType(X.xref),Je=p.getFromId(z,X.yref),yt=p.getRefType(X.yref),lt=X.x0shift,mt=X.x1shift,Ce=X.y0shift,Ie=X.y1shift,Se=function(he,je){var Ne=A.getDataToPixel(z,Pe,je,!1,Ge);return Ne(he)},Be=function(he,je){var Ne=A.getDataToPixel(z,Je,je,!0,yt);return Ne(he)},rt=A.getPixelToData(z,Pe,!1,Ge),ht=A.getPixelToData(z,Je,!0,yt),Lt=Bt(),Ct={element:Lt.node(),gd:z,prepFn:_t,doneFn:rr,clickFn:pr},zt;k.init(Ct),Lt.node().onmousemove=nr;function Bt(){return ve?Ft():q}function Ft(){var he=10,je=Math.max(X.line.width,he),Ne=ee.append("g").attr("data-index",K).attr("drag-helper",!0);Ne.append("path").attr("d",q.attr("d")).style({cursor:"move","stroke-width":je,"stroke-opacity":"0"});var Re={"fill-opacity":"0"},nt=Math.max(je/2,he);return Ne.append("circle").attr({"data-line-point":"start-point",cx:ce?Se(X.xanchor)+X.x0:Se(X.x0,lt),cy:de?Be(X.yanchor)-X.y0:Be(X.y0,Ce),r:nt}).style(Re).classed("cursor-grab",!0),Ne.append("circle").attr({"data-line-point":"end-point",cx:ce?Se(X.xanchor)+X.x1:Se(X.x1,mt),cy:de?Be(X.yanchor)-X.y1:Be(X.y1,Ie),r:nt}).style(Re).classed("cursor-grab",!0),Ne}function nr(he){if(b(z)){zt=null;return}if(ve)he.target.tagName==="path"?zt="move":zt=he.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var je=Ct.element.getBoundingClientRect(),Ne=je.right-je.left,Re=je.bottom-je.top,nt=he.clientX-je.left,at=he.clientY-je.top,dt=!pe&&Ne>le&&Re>W&&!he.shiftKey?k.getCursor(nt/Ne,1-at/Re):"move";D(q,dt),zt=dt.split("-")[0]}}function _t(he){b(z)||(ce&&(ae=Se(X.xanchor)),de&&(G=Be(X.yanchor)),X.type==="path"?_e=X.path:(Le=ce?X.x0:Se(X.x0),Ae=de?X.y0:Be(X.y0),We=ce?X.x1:Se(X.x1),te=de?X.y1:Be(X.y1)),Le<We?(re=Le,ie="x0",R=We,xe="x1"):(re=We,ie="x1",R=Le,xe="x0"),!de&&Ae<te||de&&Ae>te?(Q=Ae,B="y0",U=te,oe="y1"):(Q=te,B="y1",U=Ae,oe="y0"),nr(he),ze(ee,X),$e(q,X,z),Ct.moveFn=zt==="move"?Yt:sr,Ct.altKey=he.altKey)}function rr(){b(z)||(D(q),Ye(ee),F(q,z,X),c.call("_guiRelayout",z,ne.getUpdateObj()))}function pr(){b(z)||Ye(ee)}function Yt(he,je){if(X.type==="path"){var Ne=function(at){return at},Re=Ne,nt=Ne;ce?be("xanchor",X.xanchor=rt(ae+he)):(Re=function(dt){return rt(Se(dt)+he)},Pe&&Pe.type==="date"&&(Re=A.encodeDate(Re))),de?be("yanchor",X.yanchor=ht(G+je)):(nt=function(dt){return ht(Be(dt)+je)},Je&&Je.type==="date"&&(nt=A.encodeDate(nt))),be("path",X.path=J(_e,Re,nt))}else ce?be("xanchor",X.xanchor=rt(ae+he)):(be("x0",X.x0=rt(Le+he)),be("x1",X.x1=rt(We+he))),de?be("yanchor",X.yanchor=ht(G+je)):(be("y0",X.y0=ht(Ae+je)),be("y1",X.y1=ht(te+je)));q.attr("d",C(z,X)),ze(ee,X),g(z,K,X,ke)}function sr(he,je){if(pe){var Ne=function(xr){return xr},Re=Ne,nt=Ne;ce?be("xanchor",X.xanchor=rt(ae+he)):(Re=function(br){return rt(Se(br)+he)},Pe&&Pe.type==="date"&&(Re=A.encodeDate(Re))),de?be("yanchor",X.yanchor=ht(G+je)):(nt=function(br){return ht(Be(br)+je)},Je&&Je.type==="date"&&(nt=A.encodeDate(nt))),be("path",X.path=J(_e,Re,nt))}else if(ve){if(zt==="resize-over-start-point"){var at=Le+he,dt=de?Ae-je:Ae+je;be("x0",X.x0=ce?at:rt(at)),be("y0",X.y0=de?dt:ht(dt))}else if(zt==="resize-over-end-point"){var Mt=We+he,Nt=de?te-je:te+je;be("x1",X.x1=ce?Mt:rt(Mt)),be("y1",X.y1=de?Nt:ht(Nt))}}else{var ot=function(xr){return zt.indexOf(xr)!==-1},jt=ot("n"),Ut=ot("s"),Gt=ot("w"),Tr=ot("e"),Dr=jt?Q+je:Q,Vr=Ut?U+je:U,Mr=Gt?re+he:re,Fr=Tr?R+he:R;de&&(jt&&(Dr=Q-je),Ut&&(Vr=U-je)),(!de&&Vr-Dr>W||de&&Dr-Vr>W)&&(be(B,X[B]=de?Dr:ht(Dr)),be(oe,X[oe]=de?Vr:ht(Vr))),Fr-Mr>le&&(be(ie,X[ie]=ce?Mr:rt(Mr)),be(xe,X[xe]=ce?Fr:rt(Fr)))}q.attr("d",C(z,X)),ze(ee,X),g(z,K,X,ke)}function ze(he,je){(ce||de)&&Ne();function Ne(){var Re=je.type!=="path",nt=he.selectAll(".visual-cue").data([0]),at=1;nt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":at}).classed("visual-cue",!0);var dt=Se(ce?je.xanchor:u.midRange(Re?[je.x0,je.x1]:A.extractPathCoords(je.path,M.paramIsX))),Mt=Be(de?je.yanchor:u.midRange(Re?[je.y0,je.y1]:A.extractPathCoords(je.path,M.paramIsY)));if(dt=A.roundPositionForSharpStrokeRendering(dt,at),Mt=A.roundPositionForSharpStrokeRendering(Mt,at),ce&&de){var Nt="M"+(dt-1-at)+","+(Mt-1-at)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";nt.attr("d",Nt)}else if(ce){var ot="M"+(dt-1-at)+","+(Mt-9-at)+"v18 h2 v-18 Z";nt.attr("d",ot)}else{var jt="M"+(dt-9-at)+","+(Mt-1-at)+"h18 v2 h-18 Z";nt.attr("d",jt)}}}function Ye(he){he.selectAll(".visual-cue").remove()}function $e(he,je,Ne){var Re=je.xref,nt=je.yref,at=p.getFromId(Ne,Re),dt=p.getFromId(Ne,nt),Mt="";Re!=="paper"&&!at.autorange&&(Mt+=Re),nt!=="paper"&&!dt.autorange&&(Mt+=nt),T.setClipUrl(he,Mt?"clip"+Ne._fullLayout._uid+Mt:null,Ne)}}function J(z,q,X){return z.replace(M.segmentRE,function(K){var ee=0,ne=K.charAt(0),le=M.paramIsX[ne],W=M.paramIsY[ne],ce=M.numParams[ne],de=K.substr(1).replace(M.paramRE,function(ve){return ee>=ce||(le[ee]?ve=q(ve):W[ee]&&(ve=X(ve)),ee++),ve});return ne+de})}function H(z,q){if(S(z)){var X=q.node(),K=+X.getAttribute("data-index");if(K>=0){if(K===z._fullLayout._activeShapeIndex){Y(z);return}z._fullLayout._activeShapeIndex=K,z._fullLayout._deactivateShape=Y,j(z)}}}function Y(z){if(S(z)){var q=z._fullLayout._activeShapeIndex;q>=0&&(w(z),delete z._fullLayout._activeShapeIndex,j(z))}}function Z(z){if(S(z)){w(z);var q=z._fullLayout._activeShapeIndex,X=(z.layout||{}).shapes||[];if(q<X.length){for(var K=[],ee=0;ee<X.length;ee++)ee!==q&&K.push(X[ee]);return delete z._fullLayout._activeShapeIndex,c.call("_guiRelayout",z,{shapes:K})}}}}}),ws=i({"src/components/modebar/buttons.js"(V,$){var h=xn(),c=xi(),u=Ur(),p=au(),v=ua().eraseActiveShape,m=_r(),g=m._,w=$.exports={};w.toImage={name:"toImage",title:function(P){var J=P._context.toImageButtonOptions||{},H=J.format||"png";return H==="png"?g(P,"Download plot as a png"):g(P,"Download plot")},icon:p.camera,click:function(P){var J=P._context.toImageButtonOptions,H={format:J.format||"png"};m.notifier(g(P,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(Y){Y in J&&(H[Y]=J[Y])}),h.call("downloadImage",P,H).then(function(Y){m.notifier(g(P,"Snapshot succeeded")+" - "+Y,"long")}).catch(function(){m.notifier(g(P,"Sorry, there was a problem downloading your snapshot!"),"long")})}},w.sendDataToCloud={name:"sendDataToCloud",title:function(P){return g(P,"Edit in Chart Studio")},icon:p.disk,click:function(P){c.sendDataToCloud(P)}},w.editInChartStudio={name:"editInChartStudio",title:function(P){return g(P,"Edit in Chart Studio")},icon:p.pencil,click:function(P){c.sendDataToCloud(P)}},w.zoom2d={name:"zoom2d",_cat:"zoom",title:function(P){return g(P,"Zoom")},attr:"dragmode",val:"zoom",icon:p.zoombox,click:o},w.pan2d={name:"pan2d",_cat:"pan",title:function(P){return g(P,"Pan")},attr:"dragmode",val:"pan",icon:p.pan,click:o},w.select2d={name:"select2d",_cat:"select",title:function(P){return g(P,"Box Select")},attr:"dragmode",val:"select",icon:p.selectbox,click:o},w.lasso2d={name:"lasso2d",_cat:"lasso",title:function(P){return g(P,"Lasso Select")},attr:"dragmode",val:"lasso",icon:p.lasso,click:o},w.drawclosedpath={name:"drawclosedpath",title:function(P){return g(P,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:p.drawclosedpath,click:o},w.drawopenpath={name:"drawopenpath",title:function(P){return g(P,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:p.drawopenpath,click:o},w.drawline={name:"drawline",title:function(P){return g(P,"Draw line")},attr:"dragmode",val:"drawline",icon:p.drawline,click:o},w.drawrect={name:"drawrect",title:function(P){return g(P,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:p.drawrect,click:o},w.drawcircle={name:"drawcircle",title:function(P){return g(P,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:p.drawcircle,click:o},w.eraseshape={name:"eraseshape",title:function(P){return g(P,"Erase active shape")},icon:p.eraseshape,click:v},w.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(P){return g(P,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:o},w.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(P){return g(P,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:o},w.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(P){return g(P,"Autoscale")},attr:"zoom",val:"auto",icon:p.autoscale,click:o},w.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(P){return g(P,"Reset axes")},attr:"zoom",val:"reset",icon:p.home,click:o},w.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(P){return g(P,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:p.tooltip_basic,gravity:"ne",click:o},w.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(P){return g(P,"Compare data on hover")},attr:"hovermode",val:function(P){return P._fullLayout._isHoriz?"y":"x"},icon:p.tooltip_compare,gravity:"ne",click:o};function o(P,J){var H=J.currentTarget,Y=H.getAttribute("data-attr"),Z=H.getAttribute("data-val")||!0,z=P._fullLayout,q={},X=u.list(P,null,!0),K=z._cartesianSpikesEnabled,ee,ne;if(Y==="zoom"){var le=Z==="in"?.5:2,W=(1+le)/2,ce=(1-le)/2,de;for(ne=0;ne<X.length;ne++)if(ee=X[ne],!ee.fixedrange)if(de=ee._name,Z==="auto")q[de+".autorange"]=!0;else if(Z==="reset")ee._rangeInitial0===void 0&&ee._rangeInitial1===void 0?q[de+".autorange"]=!0:ee._rangeInitial0===void 0?(q[de+".autorange"]=ee._autorangeInitial,q[de+".range"]=[null,ee._rangeInitial1]):ee._rangeInitial1===void 0?(q[de+".range"]=[ee._rangeInitial0,null],q[de+".autorange"]=ee._autorangeInitial):q[de+".range"]=[ee._rangeInitial0,ee._rangeInitial1],ee._showSpikeInitial!==void 0&&(q[de+".showspikes"]=ee._showSpikeInitial,K==="on"&&!ee._showSpikeInitial&&(K="off"));else{var ve=[ee.r2l(ee.range[0]),ee.r2l(ee.range[1])],pe=[W*ve[0]+ce*ve[1],W*ve[1]+ce*ve[0]];q[de+".range[0]"]=ee.l2r(pe[0]),q[de+".range[1]"]=ee.l2r(pe[1])}}else Y==="hovermode"&&(Z==="x"||Z==="y")&&(Z=z._isHoriz?"y":"x",H.setAttribute("data-val",Z)),q[Y]=Z;z._cartesianSpikesEnabled=K,h.call("_guiRelayout",P,q)}w.zoom3d={name:"zoom3d",_cat:"zoom",title:function(P){return g(P,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:p.zoombox,click:T},w.pan3d={name:"pan3d",_cat:"pan",title:function(P){return g(P,"Pan")},attr:"scene.dragmode",val:"pan",icon:p.pan,click:T},w.orbitRotation={name:"orbitRotation",title:function(P){return g(P,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:p["3d_rotate"],click:T},w.tableRotation={name:"tableRotation",title:function(P){return g(P,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:p["z-axis"],click:T};function T(P,J){for(var H=J.currentTarget,Y=H.getAttribute("data-attr"),Z=H.getAttribute("data-val")||!0,z=P._fullLayout._subplots.gl3d||[],q={},X=Y.split("."),K=0;K<z.length;K++)q[z[K]+"."+X[1]]=Z;var ee=Z==="pan"?Z:"zoom";q.dragmode=ee,h.call("_guiRelayout",P,q)}w.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(P){return g(P,"Reset camera to default")},attr:"resetDefault",icon:p.home,click:y},w.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(P){return g(P,"Reset camera to last save")},attr:"resetLastSave",icon:p.movie,click:y};function y(P,J){for(var H=J.currentTarget,Y=H.getAttribute("data-attr"),Z=Y==="resetLastSave",z=Y==="resetDefault",q=P._fullLayout,X=q._subplots.gl3d||[],K={},ee=0;ee<X.length;ee++){var ne=X[ee],le=ne+".camera",W=ne+".aspectratio",ce=ne+".aspectmode",de=q[ne]._scene,ve;Z?(K[le+".up"]=de.viewInitial.up,K[le+".eye"]=de.viewInitial.eye,K[le+".center"]=de.viewInitial.center,ve=!0):z&&(K[le+".up"]=null,K[le+".eye"]=null,K[le+".center"]=null,ve=!0),ve&&(K[W+".x"]=de.viewInitial.aspectratio.x,K[W+".y"]=de.viewInitial.aspectratio.y,K[W+".z"]=de.viewInitial.aspectratio.z,K[ce]=de.viewInitial.aspectmode)}h.call("_guiRelayout",P,K)}w.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(P){return g(P,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:D};function k(P,J){var H=J.currentTarget,Y=H._previousVal,Z=P._fullLayout,z=Z._subplots.gl3d||[],q=["xaxis","yaxis","zaxis"],X={},K={};if(Y)K=Y,H._previousVal=null;else{for(var ee=0;ee<z.length;ee++){var ne=z[ee],le=Z[ne],W=ne+".hovermode";X[W]=le.hovermode,K[W]=!1;for(var ce=0;ce<3;ce++){var de=q[ce],ve=ne+"."+de+".showspikes";K[ve]=!1,X[ve]=le[de].showspikes}}H._previousVal=X}return K}function D(P,J){var H=k(P,J);h.call("_guiRelayout",P,H)}w.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(P){return g(P,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:M},w.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(P){return g(P,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:M},w.resetGeo={name:"resetGeo",_cat:"reset",title:function(P){return g(P,"Reset")},attr:"reset",val:null,icon:p.autoscale,click:M},w.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(P){return g(P,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:C};function M(P,J){for(var H=J.currentTarget,Y=H.getAttribute("data-attr"),Z=H.getAttribute("data-val")||!0,z=P._fullLayout,q=z._subplots.geo||[],X=0;X<q.length;X++){var K=q[X],ee=z[K];if(Y==="zoom"){var ne=ee.projection.scale,le=Z==="in"?2*ne:.5*ne;h.call("_guiRelayout",P,K+".projection.scale",le)}}Y==="reset"&&F(P,"geo")}w.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(P){return g(P,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:p.tooltip_basic,gravity:"ne",click:C};function A(P){var J=P._fullLayout;return J.hovermode?!1:J._has("cartesian")?J._isHoriz?"y":"x":"closest"}function C(P){var J=A(P);h.call("_guiRelayout",P,"hovermode",J)}w.resetViewSankey={name:"resetSankeyGroup",title:function(P){return g(P,"Reset view")},icon:p.home,click:function(P){for(var J={"node.groups":[],"node.x":[],"node.y":[]},H=0;H<P._fullData.length;H++){var Y=P._fullData[H]._viewInitial;J["node.groups"].push(Y.node.groups.slice()),J["node.x"].push(Y.node.x.slice()),J["node.y"].push(Y.node.y.slice())}h.call("restyle",P,J)}},w.toggleHover={name:"toggleHover",title:function(P){return g(P,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:function(P,J){var H=k(P,J);H.hovermode=A(P),h.call("_guiRelayout",P,H)}},w.resetViews={name:"resetViews",title:function(P){return g(P,"Reset views")},icon:p.home,click:function(P,J){var H=J.currentTarget;H.setAttribute("data-attr","zoom"),H.setAttribute("data-val","reset"),o(P,J),H.setAttribute("data-attr","resetLastSave"),y(P,J),F(P,"geo"),F(P,"mapbox"),F(P,"map")}},w.toggleSpikelines={name:"toggleSpikelines",title:function(P){return g(P,"Toggle Spike Lines")},icon:p.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(P){var J=P._fullLayout,H=J._cartesianSpikesEnabled;J._cartesianSpikesEnabled=H==="on"?"off":"on",h.call("_guiRelayout",P,j(P))}};function j(P){for(var J=P._fullLayout,H=J._cartesianSpikesEnabled==="on",Y=u.list(P,null,!0),Z={},z=0;z<Y.length;z++){var q=Y[z];Z[q._name+".showspikes"]=H?!0:q._showSpikeInitial}return Z}w.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(P){return g(P,"Reset view")},attr:"reset",icon:p.home,click:function(P){F(P,"mapbox")}},w.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(P){return g(P,"Reset view")},attr:"reset",icon:p.home,click:function(P){F(P,"map")}},w.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(P){return g(P,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:b},w.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(P){return g(P,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:S},w.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(P){return g(P,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:b},w.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(P){return g(P,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:S};function b(P,J){L(P,J,"mapbox")}function S(P,J){L(P,J,"map")}function L(P,J,H){for(var Y=J.currentTarget,Z=Y.getAttribute("data-val"),z=P._fullLayout,q=z._subplots[H]||[],X=1.05,K={},ee=0;ee<q.length;ee++){var ne=q[ee],le=z[ne].zoom,W=Z==="in"?X*le:le/X;K[ne+".zoom"]=W}h.call("_guiRelayout",P,K)}function F(P,J){for(var H=P._fullLayout,Y=H._subplots[J]||[],Z={},z=0;z<Y.length;z++)for(var q=Y[z],X=H[q]._subplot,K=X.viewInitial,ee=Object.keys(K),ne=0;ne<ee.length;ne++){var le=ee[ne];Z[q+"."+le]=K[le]}h.call("_guiRelayout",P,Z)}}}),Gs=i({"src/components/modebar/constants.js"(V,$){var h=ws(),c=Object.keys(h),u=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],p=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(u),v=[],m=function(g){if(p.indexOf(g._cat||g.name)===-1){var w=g.name,o=(g._cat||g.name).toLowerCase();v.indexOf(w)===-1&&v.push(w),v.indexOf(o)===-1&&v.push(o)}};c.forEach(function(g){m(h[g])}),v.sort(),$.exports={DRAW_MODES:u,backButtons:p,foreButtons:v}}}),oo=i({"src/components/modebar/attributes.js"(V,$){Gs(),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}}}),il=i({"src/components/modebar/defaults.js"(V,$){var h=_r(),c=ut(),u=hr(),p=oo();$.exports=function(m,g){var w=m.modebar||{},o=u.newContainer(g,"modebar");function T(k,D){return h.coerce(w,o,p,k,D)}T("orientation"),T("bgcolor",c.addOpacity(g.paper_bgcolor,.5));var y=c.contrast(c.rgb(g.modebar.bgcolor));T("color",c.addOpacity(y,.3)),T("activecolor",c.addOpacity(y,.7)),T("uirevision",g.uirevision),T("add"),T("remove")}}}),al=i({"src/components/modebar/modebar.js"(V,$){var h=f(),c=fe(),u=_r(),p=au(),v=a().version,m=new DOMParser;function g(y){this.container=y.container,this.element=document.createElement("div"),this.update(y.graphInfo,y.buttons),this.container.appendChild(this.element)}var w=g.prototype;w.update=function(y,k){this.graphInfo=y;var D=this.graphInfo._context,M=this.graphInfo._fullLayout,A="modebar-"+M._uid;this.element.setAttribute("id",A),this._uid=A,this.element.className="modebar",D.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),M.modebar.orientation==="v"&&(this.element.className+=" vertical",k=k.reverse());var C=M.modebar,j="#"+A+" .modebar-group";document.querySelectorAll(j).forEach(function(P){P.style.backgroundColor=C.bgcolor});var b=!this.hasButtons(k),S=this.hasLogo!==D.displaylogo,L=this.locale!==D.locale;if(this.locale=D.locale,(b||S||L)&&(this.removeAllButtons(),this.updateButtons(k),D.watermark||D.displaylogo)){var F=this.getLogo();D.watermark&&(F.className=F.className+" watermark"),M.modebar.orientation==="v"?this.element.insertBefore(F,this.element.childNodes[0]):this.element.appendChild(F),this.hasLogo=!0}this.updateActiveButton(),u.setStyleOnHover("#"+A+" .modebar-btn",".active",".icon path","fill: "+C.activecolor,"fill: "+C.color,this.element)},w.updateButtons=function(y){var k=this;this.buttons=y,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(D){var M=k.createGroup();D.forEach(function(A){var C=A.name;if(!C)throw new Error("must provide button 'name' in button config");if(k.buttonsNames.indexOf(C)!==-1)throw new Error("button name '"+C+"' is taken");k.buttonsNames.push(C);var j=k.createButton(A);k.buttonElements.push(j),M.appendChild(j)}),k.element.appendChild(M)})},w.createGroup=function(){var y=document.createElement("div");y.className="modebar-group";var k=this.graphInfo._fullLayout.modebar;return y.style.backgroundColor=k.bgcolor,y},w.createButton=function(y){var k=this,D=document.createElement("a");D.setAttribute("rel","tooltip"),D.className="modebar-btn";var M=y.title;M===void 0?M=y.name:typeof M=="function"&&(M=M(this.graphInfo)),(M||M===0)&&D.setAttribute("data-title",M),y.attr!==void 0&&D.setAttribute("data-attr",y.attr);var A=y.val;A!==void 0&&(typeof A=="function"&&(A=A(this.graphInfo)),D.setAttribute("data-val",A));var C=y.click;if(typeof C!="function")throw new Error("must provide button 'click' function in button config");D.addEventListener("click",function(b){y.click(k.graphInfo,b),k.updateActiveButton(b.currentTarget)}),D.setAttribute("data-toggle",y.toggle||!1),y.toggle&&h.select(D).classed("active",!0);var j=y.icon;return typeof j=="function"?D.appendChild(j()):D.appendChild(this.createIcon(j||p.question)),D.setAttribute("data-gravity",y.gravity||"n"),D},w.createIcon=function(y){var k=c(y.height)?Number(y.height):y.ascent-y.descent,D="http://www.w3.org/2000/svg",M;if(y.path){M=document.createElementNS(D,"svg"),M.setAttribute("viewBox",[0,0,y.width,k].join(" ")),M.setAttribute("class","icon");var A=document.createElementNS(D,"path");A.setAttribute("d",y.path),y.transform?A.setAttribute("transform",y.transform):y.ascent!==void 0&&A.setAttribute("transform","matrix(1 0 0 -1 0 "+y.ascent+")"),M.appendChild(A)}if(y.svg){var C=m.parseFromString(y.svg,"application/xml");M=C.childNodes[0]}return M.setAttribute("height","1em"),M.setAttribute("width","1em"),M},w.updateActiveButton=function(y){var k=this.graphInfo._fullLayout,D=y!==void 0?y.getAttribute("data-attr"):null;this.buttonElements.forEach(function(M){var A=M.getAttribute("data-val")||!0,C=M.getAttribute("data-attr"),j=M.getAttribute("data-toggle")==="true",b=h.select(M),S=function(P,J){var H=k.modebar,Y=P.querySelector(".icon path");Y&&(J||P.matches(":hover")?Y.style.fill=H.activecolor:Y.style.fill=H.color)};if(j){if(C===D){var L=!b.classed("active");b.classed("active",L),S(M,L)}}else{var F=C===null?C:u.nestedProperty(k,C).get();b.classed("active",F===A),S(M,F===A)}})},w.hasButtons=function(y){var k=this.buttons;if(!k||y.length!==k.length)return!1;for(var D=0;D<y.length;++D){if(y[D].length!==k[D].length)return!1;for(var M=0;M<y[D].length;M++)if(y[D][M].name!==k[D][M].name)return!1}return!0};function o(y){return y+" (v"+v+")"}w.getLogo=function(){var y=this.createGroup(),k=document.createElement("a");return k.href="https://plotly.com/",k.target="_blank",k.setAttribute("data-title",o(u._(this.graphInfo,"Produced with Plotly.js"))),k.className="modebar-btn plotlyjsicon modebar-btn--logo",k.appendChild(this.createIcon(p.newplotlylogo)),y.appendChild(k),y},w.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},w.destroy=function(){u.removeElement(this.container.querySelector(".modebar"))};function T(y,k){var D=y._fullLayout,M=new g({graphInfo:y,container:D._modebardiv.node(),buttons:k});return D._privateplot&&h.select(M.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),M}$.exports=T}}),gc=i({"src/components/modebar/manage.js"(V,$){var h=Ur(),c=za(),u=xn(),p=Wa().isUnifiedHover,v=al(),m=ws(),g=Gs().DRAW_MODES,w=_r().extendDeep;$.exports=function(C){var j=C._fullLayout,b=C._context,S=j._modeBar;if(!b.displayModeBar&&!b.watermark){S&&(S.destroy(),delete j._modeBar);return}if(!Array.isArray(b.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(b.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var L=b.modeBarButtons,F;Array.isArray(L)&&L.length?F=M(L):!b.displayModeBar&&b.watermark?F=[]:F=o(C),S?S.update(C,F):j._modeBar=v(C,F)};function o(A){var C=A._fullLayout,j=A._fullData,b=A._context;function S(R,B){if(typeof B=="string"){if(B.toLowerCase()===R.toLowerCase())return!0}else{var oe=B.name,ie=B._cat||B.name;if(oe===R||ie===R.toLowerCase())return!0}return!1}var L=C.modebar.add;typeof L=="string"&&(L=[L]);var F=C.modebar.remove;typeof F=="string"&&(F=[F]);var P=b.modeBarButtonsToAdd.concat(L.filter(function(R){for(var B=0;B<b.modeBarButtonsToRemove.length;B++)if(S(R,b.modeBarButtonsToRemove[B]))return!1;return!0})),J=b.modeBarButtonsToRemove.concat(F.filter(function(R){for(var B=0;B<b.modeBarButtonsToAdd.length;B++)if(S(R,b.modeBarButtonsToAdd[B]))return!1;return!0})),H=C._has("cartesian"),Y=C._has("gl3d"),Z=C._has("geo"),z=C._has("pie"),q=C._has("funnelarea"),X=C._has("ternary"),K=C._has("mapbox"),ee=C._has("map"),ne=C._has("polar"),le=C._has("smith"),W=C._has("sankey"),ce=T(C),de=p(C.hovermode),ve=[];function pe(R){if(R.length){for(var B=[],oe=0;oe<R.length;oe++){for(var ie=R[oe],xe=m[ie],_e=xe.name.toLowerCase(),ke=(xe._cat||xe.name).toLowerCase(),Pe=!1,Ge=0;Ge<J.length;Ge++){var Je=J[Ge].toLowerCase();if(Je===_e||Je===ke){Pe=!0;break}}Pe||B.push(m[ie])}ve.push(B)}}var be=["toImage"];b.showEditInChartStudio?be.push("editInChartStudio"):b.showSendToCloud&&be.push("sendDataToCloud"),pe(be);var Le=[],Ae=[],We=[],te=[];(H||z||q||X)+Z+Y+K+ee+ne+le>1?(Ae=["toggleHover"],We=["resetViews"]):Z?(Le=["zoomInGeo","zoomOutGeo"],Ae=["hoverClosestGeo"],We=["resetGeo"]):Y?(Ae=["hoverClosest3d"],We=["resetCameraDefault3d","resetCameraLastSave3d"]):K?(Le=["zoomInMapbox","zoomOutMapbox"],Ae=["toggleHover"],We=["resetViewMapbox"]):ee?(Le=["zoomInMap","zoomOutMap"],Ae=["toggleHover"],We=["resetViewMap"]):z?Ae=["hoverClosestPie"]:W?(Ae=["hoverClosestCartesian","hoverCompareCartesian"],We=["resetViewSankey"]):Ae=["toggleHover"],H&&Ae.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(k(j)||de)&&(Ae=[]),H&&!ce&&(Le=["zoomIn2d","zoomOut2d","autoScale2d"],We[0]!=="resetViews"&&(We=["resetScale2d"])),Y?te=["zoom3d","pan3d","orbitRotation","tableRotation"]:H&&!ce||X?te=["zoom2d","pan2d"]:K||ee||Z?te=["pan2d"]:ne&&(te=["zoom2d"]),y(j)&&te.push("select2d","lasso2d");var ae=[],G=function(R){ae.indexOf(R)===-1&&Ae.indexOf(R)!==-1&&ae.push(R)};if(Array.isArray(P)){for(var Q=[],U=0;U<P.length;U++){var re=P[U];typeof re=="string"?(re=re.toLowerCase(),g.indexOf(re)!==-1?(C._has("mapbox")||C._has("map")||C._has("cartesian"))&&te.push(re):re==="togglespikelines"?G("toggleSpikelines"):re==="togglehover"?G("toggleHover"):re==="hovercompare"?G("hoverCompareCartesian"):re==="hoverclosest"?(G("hoverClosestCartesian"),G("hoverClosestGeo"),G("hoverClosest3d"),G("hoverClosestPie")):re==="v1hovermode"&&(G("hoverClosestCartesian"),G("hoverCompareCartesian"),G("hoverClosestGeo"),G("hoverClosest3d"),G("hoverClosestPie"))):Q.push(re)}P=Q}return pe(te),pe(Le.concat(We)),pe(ae),D(ve,P)}function T(A){for(var C=h.list({_fullLayout:A},null,!0),j=0;j<C.length;j++)if(!C[j].fixedrange)return!1;return!0}function y(A){for(var C=!1,j=0;j<A.length&&!C;j++){var b=A[j];!b._module||!b._module.selectPoints||(u.traceIs(b,"scatter-like")?(c.hasMarkers(b)||c.hasText(b))&&(C=!0):u.traceIs(b,"box-violin")?(b.boxpoints==="all"||b.points==="all")&&(C=!0):C=!0)}return C}function k(A){for(var C=0;C<A.length;C++)if(!u.traceIs(A[C],"noHover"))return!1;return!0}function D(A,C){if(C.length)if(Array.isArray(C[0]))for(var j=0;j<C.length;j++)A.push(C[j]);else A.push(C);return A}function M(A){for(var C=w([],A),j=0;j<C.length;j++)for(var b=C[j],S=0;S<b.length;S++){var L=b[S];if(typeof L=="string")if(m[L]!==void 0)C[j][S]=m[L];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return C}}}),Ll=i({"src/components/modebar/index.js"(V,$){$.exports={moduleType:"component",name:"modebar",layoutAttributes:oo(),supplyLayoutDefaults:il(),manage:gc()}}}),El=i({"src/plots/cartesian/scale_zoom.js"(V,$){var h=na().FROM_BL;$.exports=function(u,p,v){v===void 0&&(v=h[u.constraintoward||"center"]);var m=[u.r2l(u.range[0]),u.r2l(u.range[1])],g=m[0]+(m[1]-m[0])*v;u.range=u._input.range=[u.l2r(g+(m[0]-g)*p),u.l2r(g+(m[1]-g)*p)],u.setScale()}}}),Oo=i({"src/plots/cartesian/constraints.js"(V){var $=_r(),h=mc(),c=Ur().id2name,u=Ps(),p=El(),v=Qc(),m=Te().ALMOST_EQUAL,g=na().FROM_BL;V.handleDefaults=function(A,C,j){var b=j.axIds,S=j.axHasImage,L=C._axisConstraintGroups=[],F=C._axisMatchGroups=[],P,J,H,Y,Z,z,q,X;for(P=0;P<b.length;P++)Y=c(b[P]),Z=A[Y],z=C[Y],w(Z,z,{axIds:b,layoutOut:C,hasImage:S[Y]});function K(be,Le){for(P=0;P<be.length;P++){J=be[P];for(H in J)C[c(H)][Le]=J}}for(K(F,"_matchGroup"),P=0;P<L.length;P++){J=L[P];for(H in J)if(z=C[c(H)],z.fixedrange){for(var ee in J){var ne=c(ee);(A[ne]||{}).fixedrange===!1&&$.warn("fixedrange was specified as false for axis "+ne+" but was overridden because another axis in its constraint group has fixedrange true"),C[ne].fixedrange=!0}break}}for(P=0;P<L.length;){J=L[P];for(H in J){z=C[c(H)],z._matchGroup&&Object.keys(z._matchGroup).length===Object.keys(J).length&&(L.splice(P,1),P--);break}P++}K(L,"_constraintGroup");var le=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],W=!1,ce=!1;function de(){X=z[q],q==="rangebreaks"&&(ce=z._hasDayOfWeekBreaks)}for(P=0;P<F.length;P++){J=F[P];for(var ve=0;ve<le.length;ve++){q=le[ve],X=null;var pe;for(H in J)if(Y=c(H),Z=A[Y],z=C[Y],q in z){if(!z.matches&&(pe=z,q in Z)){de();break}X===null&&q in Z&&de()}if(q==="range"&&X&&Z.range&&Z.range.length===2&&Z.range[0]!==null&&Z.range[1]!==null&&(W=!0),q==="autorange"&&X===null&&W&&(X=!1),X===null&&q in pe&&(X=pe[q]),X!==null)for(H in J)z=C[c(H)],z[q]=q==="range"?X.slice():X,q==="rangebreaks"&&(z._hasDayOfWeekBreaks=ce,v(z,C))}}};function w(A,C,j){var b=j.axIds,S=j.layoutOut,L=j.hasImage,F=S._axisConstraintGroups,P=S._axisMatchGroups,J=C._id,H=J.charAt(0),Y=((S._splomAxes||{})[H]||{})[J]||{},Z=C._id,z=Z.charAt(0)==="x";C._matchGroup=null,C._constraintGroup=null;function q(te,ae){return $.coerce(A,C,u,te,ae)}q("constrain",L?"domain":"range"),$.coerce(A,C,{constraintoward:{valType:"enumerated",values:z?["left","center","right"]:["bottom","middle","top"],dflt:z?"center":"middle"}},"constraintoward");var X=C.type,K,ee,ne=[];for(K=0;K<b.length;K++)if(ee=b[K],ee!==Z){var le=S[c(ee)];le.type===X&&ne.push(ee)}var W=T(F,Z);if(W){var ce=[];for(K=0;K<ne.length;K++)ee=ne[K],W[ee]||ce.push(ee);ne=ce}var de=ne.length,ve,pe;de&&(A.matches||Y.matches)&&(ve=$.coerce(A,C,{matches:{valType:"enumerated",values:ne,dflt:ne.indexOf(Y.matches)!==-1?Y.matches:void 0}},"matches"));var be=L&&!z?C.anchor:void 0;if(de&&!ve&&(A.scaleanchor||be)&&(pe=$.coerce(A,C,{scaleanchor:{valType:"enumerated",values:ne.concat([!1])}},"scaleanchor",be)),ve){C._matchGroup=y(P,Z,ve,1);var Le=S[c(ve)],Ae=o(S,C)/o(S,Le);z!==(ve.charAt(0)==="x")&&(Ae=(z?"x":"y")+Ae),y(F,Z,ve,Ae)}else A.matches&&b.indexOf(A.matches)!==-1&&$.warn("ignored "+C._name+'.matches: "'+A.matches+'" to avoid an infinite loop');if(pe){var We=q("scaleratio");We||(We=C.scaleratio=1),y(F,Z,pe,We)}else A.scaleanchor&&b.indexOf(A.scaleanchor)!==-1&&$.warn("ignored "+C._name+'.scaleanchor: "'+A.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function o(A,C){var j=C.domain;return j||(j=A[c(C.overlaying)].domain),j[1]-j[0]}function T(A,C){for(var j=0;j<A.length;j++)if(A[j][C])return A[j];return null}function y(A,C,j,b){var S,L,F,P,J,H=T(A,C);H===null?(H={},H[C]=1,J=A.length,A.push(H)):J=A.indexOf(H);var Y=Object.keys(H);for(S=0;S<A.length;S++)if(F=A[S],S!==J&&F[j]){var Z=F[j];for(L=0;L<Y.length;L++)P=Y[L],F[P]=k(Z,k(b,H[P]));A.splice(J,1);return}if(b!==1)for(L=0;L<Y.length;L++){var z=Y[L];H[z]=k(b,H[z])}H[j]=1}function k(A,C){var j="",b="",S,L;typeof A=="string"&&(j=A.match(/^[xy]*/)[0],S=j.length,A=+A.substr(S)),typeof C=="string"&&(b=C.match(/^[xy]*/)[0],L=b.length,C=+C.substr(L));var F=A*C;return!S&&!L?F:!S||!L||j.charAt(0)===b.charAt(0)?j+b+A*C:S===L?F:(S>L?j.substr(L):b.substr(S))+F}function D(A,C){for(var j=C._size,b=j.h/j.w,S={},L=Object.keys(A),F=0;F<L.length;F++){var P=L[F],J=A[P];if(typeof J=="string"){var H=J.match(/^[xy]*/)[0],Y=H.length;J=+J.substr(Y);for(var Z=H.charAt(0)==="y"?b:1/b,z=0;z<Y;z++)J*=Z}S[P]=J}return S}V.enforce=function(C){var j=C._fullLayout,b=j._axisConstraintGroups||[],S,L,F,P,J,H,Y,Z;for(S=0;S<b.length;S++){F=D(b[S],j);var z=Object.keys(F),q=1/0,X=0,K=1/0,ee={},ne={},le=!1;for(L=0;L<z.length;L++)P=z[L],ne[P]=J=j[c(P)],J._inputDomain?J.domain=J._inputDomain.slice():J._inputDomain=J.domain.slice(),J._inputRange||(J._inputRange=J.range.slice()),J.setScale(),ee[P]=H=Math.abs(J._m)/F[P],q=Math.min(q,H),(J.constrain==="domain"||!J._constraintShrinkable)&&(K=Math.min(K,H)),delete J._constraintShrinkable,X=Math.max(X,H),J.constrain==="domain"&&(le=!0);if(!(q>m*X&&!le)){for(L=0;L<z.length;L++)if(P=z[L],H=ee[P],J=ne[P],Y=J.constrain,H!==K||Y==="domain")if(Z=H/K,Y==="range")p(J,Z);else{var W=J._inputDomain,ce=(J.domain[1]-J.domain[0])/(W[1]-W[0]),de=(J.r2l(J.range[1])-J.r2l(J.range[0]))/(J.r2l(J._inputRange[1])-J.r2l(J._inputRange[0]));if(Z/=ce,Z*de<1){J.domain=J._input.domain=W.slice(),p(J,Z);continue}if(de<1&&(J.range=J._input.range=J._inputRange.slice(),Z*=de),J.autorange){var ve=J.r2l(J.range[0]),pe=J.r2l(J.range[1]),be=(ve+pe)/2,Le=be,Ae=be,We=Math.abs(pe-be),te=be-We*Z*1.0001,ae=be+We*Z*1.0001,G=h.makePadFn(j,J,0),Q=h.makePadFn(j,J,1);M(J,Z);var U=Math.abs(J._m),re=h.concatExtremes(C,J),R=re.min,B=re.max,oe,ie;for(ie=0;ie<R.length;ie++)oe=R[ie].val-G(R[ie])/U,oe>te&&oe<Le&&(Le=oe);for(ie=0;ie<B.length;ie++)oe=B[ie].val+Q(B[ie])/U,oe<ae&&oe>Ae&&(Ae=oe);var xe=(Ae-Le)/(2*We);Z/=xe,Le=J.l2r(Le),Ae=J.l2r(Ae),J.range=J._input.range=ve<pe?[Le,Ae]:[Ae,Le]}M(J,Z)}}}},V.getAxisGroup=function(C,j){for(var b=C._axisMatchGroups,S=0;S<b.length;S++){var L=b[S];if(L[j])return"g"+S}return j},V.clean=function(C,j){if(j._inputDomain){for(var b=!1,S=j._id,L=C._fullLayout._axisConstraintGroups,F=0;F<L.length;F++)if(L[F][S]){b=!0;break}(!b||j.constrain!=="domain")&&(j._input.domain=j.domain=j._inputDomain,delete j._inputDomain)}};function M(A,C){var j=A._inputDomain,b=g[A.constraintoward],S=j[0]+(j[1]-j[0])*b;A.domain=A._input.domain=[S+(j[0]-S)/C,S+(j[1]-S)/C],A.setScale()}}}),ld=i({"src/plot_api/subroutines.js"(V){var $=f(),h=xn(),c=xi(),u=_r(),p=ia(),v=iu(),m=ut(),g=oi(),w=pc(),o=Ll(),T=ji(),y=na(),k=Oo(),D=k.enforce,M=k.clean,A=mc().doAutoRange,C="start",j="middle",b="end",S=Yr().zindexSeparator;V.layoutStyles=function(W){return u.syncOrAsync([c.doAutoMargin,F],W)};function L(W,ce,de){for(var ve=0;ve<de.length;ve++){var pe=de[ve][0],be=de[ve][1];if(!(pe[0]>=W[1]||pe[1]<=W[0])&&be[0]<ce[1]&&be[1]>ce[0])return!0}return!1}function F(W){var ce=W._fullLayout,de=ce._size,ve=de.p,pe=T.list(W,"",!0),be,Le,Ae,We,te,ae;if(ce._paperdiv.style({width:W._context.responsive&&ce.autosize&&!W._context._hasZeroWidth&&!W.layout.width?"100%":ce.width+"px",height:W._context.responsive&&ce.autosize&&!W._context._hasZeroHeight&&!W.layout.height?"100%":ce.height+"px"}).selectAll(".main-svg").call(g.setSize,ce.width,ce.height),W._context.setBackground(W,ce.paper_bgcolor),V.drawMainTitle(W),o.manage(W),!ce._has("cartesian"))return c.previousPromises(W);function G($e,he,je){var Ne=$e._lw/2;if($e._id.charAt(0)==="x"){if(he){if(je==="top")return he._offset-ve-Ne}else return de.t+de.h*(1-($e.position||0))+Ne%1;return he._offset+he._length+ve+Ne}if(he){if(je==="right")return he._offset+he._length+ve+Ne}else return de.l+de.w*($e.position||0)+Ne%1;return he._offset-ve-Ne}for(be=0;be<pe.length;be++){We=pe[be];var Q=We._anchorAxis;We._linepositions={},We._lw=g.crispRound(W,We.linewidth,1),We._mainLinePosition=G(We,Q,We.side),We._mainMirrorPosition=We.mirror&&Q?G(We,Q,y.OPPOSITE_SIDE[We.side]):null}var U=[],re=[],R=[],B=m.opacity(ce.paper_bgcolor)===1&&m.opacity(ce.plot_bgcolor)===1&&ce.paper_bgcolor===ce.plot_bgcolor;for(Le in ce._plots)if(Ae=ce._plots[Le],Ae.mainplot)Ae.bg&&Ae.bg.remove(),Ae.bg=void 0;else{var oe=Ae.xaxis.domain,ie=Ae.yaxis.domain,xe=Ae.plotgroup;if(L(oe,ie,R)&&Le.indexOf(S)===-1){var _e=xe.node(),ke=Ae.bg=u.ensureSingle(xe,"rect","bg");_e.insertBefore(ke.node(),_e.childNodes[0]),re.push(Le)}else xe.select("rect.bg").remove(),R.push([oe,ie]),B||(U.push(Le),re.push(Le))}var Pe=ce._bgLayer.selectAll(".bg").data(U);for(Pe.enter().append("rect").classed("bg",!0),Pe.exit().remove(),Pe.each(function($e){ce._plots[$e].bg=$.select(this)}),be=0;be<re.length;be++)Ae=ce._plots[re[be]],te=Ae.xaxis,ae=Ae.yaxis,Ae.bg&&te._offset!==void 0&&ae._offset!==void 0&&Ae.bg.call(g.setRect,te._offset-ve,ae._offset-ve,te._length+2*ve,ae._length+2*ve).call(m.fill,ce.plot_bgcolor).style("stroke-width",0);if(!ce._hasOnlyLargeSploms)for(Le in ce._plots){Ae=ce._plots[Le],te=Ae.xaxis,ae=Ae.yaxis;var Ge=Ae.clipId="clip"+ce._uid+Le+"plot",Je=u.ensureSingleById(ce._clips,"clipPath",Ge,function($e){$e.classed("plotclip",!0).append("rect")});Ae.clipRect=Je.select("rect").attr({width:te._length,height:ae._length}),g.setTranslate(Ae.plot,te._offset,ae._offset);var yt,lt;Ae._hasClipOnAxisFalse?(yt=null,lt=Ge):(yt=Ge,lt=null),g.setClipUrl(Ae.plot,yt,W),Ae.layerClipId=lt}var mt,Ce,Ie,Se,Be,rt,ht,Lt,Ct,zt,Bt,Ft,nr;function _t($e){return"M"+mt+","+$e+"H"+Ce}function rr($e){return"M"+te._offset+","+$e+"h"+te._length}function pr($e){return"M"+$e+","+Lt+"V"+ht}function Yt($e){return ae._shift!==void 0&&($e+=ae._shift),"M"+$e+","+ae._offset+"v"+ae._length}function sr($e,he,je){if(!$e.showline||Le!==$e._mainSubplot)return"";if(!$e._anchorAxis)return je($e._mainLinePosition);var Ne=he($e._mainLinePosition);return $e.mirror&&(Ne+=he($e._mainMirrorPosition)),Ne}for(Le in ce._plots){Ae=ce._plots[Le],te=Ae.xaxis,ae=Ae.yaxis;var ze="M0,0";P(te,Le)&&(Be=H(te,"left",ae,pe),mt=te._offset-(Be?ve+Be:0),rt=H(te,"right",ae,pe),Ce=te._offset+te._length+(rt?ve+rt:0),Ie=G(te,ae,"bottom"),Se=G(te,ae,"top"),nr=!te._anchorAxis||Le!==te._mainSubplot,nr&&(te.mirror==="allticks"||te.mirror==="all")&&(te._linepositions[Le]=[Ie,Se]),ze=sr(te,_t,rr),nr&&te.showline&&(te.mirror==="all"||te.mirror==="allticks")&&(ze+=_t(Ie)+_t(Se)),Ae.xlines.style("stroke-width",te._lw+"px").call(m.stroke,te.showline?te.linecolor:"rgba(0,0,0,0)")),Ae.xlines.attr("d",ze);var Ye="M0,0";P(ae,Le)&&(Bt=H(ae,"bottom",te,pe),ht=ae._offset+ae._length+(Bt?ve:0),Ft=H(ae,"top",te,pe),Lt=ae._offset-(Ft?ve:0),Ct=G(ae,te,"left"),zt=G(ae,te,"right"),nr=!ae._anchorAxis||Le!==ae._mainSubplot,nr&&(ae.mirror==="allticks"||ae.mirror==="all")&&(ae._linepositions[Le]=[Ct,zt]),Ye=sr(ae,pr,Yt),nr&&ae.showline&&(ae.mirror==="all"||ae.mirror==="allticks")&&(Ye+=pr(Ct)+pr(zt)),Ae.ylines.style("stroke-width",ae._lw+"px").call(m.stroke,ae.showline?ae.linecolor:"rgba(0,0,0,0)")),Ae.ylines.attr("d",Ye)}return T.makeClipPaths(W),c.previousPromises(W)}function P(W,ce){return(W.ticks||W.showline)&&(ce===W._mainSubplot||W.mirror==="all"||W.mirror==="allticks")}function J(W,ce,de){if(!de.showline||!de._lw)return!1;if(de.mirror==="all"||de.mirror==="allticks")return!0;var ve=de._anchorAxis;if(!ve)return!1;var pe=y.FROM_BL[ce];return de.side===ce?ve.domain[pe]===W.domain[pe]:de.mirror&&ve.domain[1-pe]===W.domain[1-pe]}function H(W,ce,de,ve){if(J(W,ce,de))return de._lw;for(var pe=0;pe<ve.length;pe++){var be=ve[pe];if(be._mainAxis===de._mainAxis&&J(W,ce,be))return be._lw}return 0}V.drawMainTitle=function(W){var ce=W._fullLayout.title,de=W._fullLayout,ve=ne(de),pe=le(de),be=K(de,pe),Le=X(de,ve);if(w.draw(W,"gtitle",{propContainer:de,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:de._dfltTitle.plot,subtitlePlaceholder:de._dfltTitle.subtitle,attributes:{x:Le,y:be,"text-anchor":ve,dy:pe}}),ce.text&&ce.automargin){var Ae=$.selectAll(".gtitle"),We=g.bBox($.selectAll(".g-gtitle").node()).height,te=z(W,ce,We);if(te>0){q(W,be,te,We),Ae.attr({x:Le,y:be,"text-anchor":ve,dy:ee(ce.yanchor)}).call(p.positionText,Le,be);var ae=(ce.text.match(p.BR_TAG_ALL)||[]).length;if(ae){var G=y.LINE_SPACING*ae+y.MID_SHIFT;ce.y===0&&(G=-G),Ae.selectAll(".line").each(function(){var B=+this.getAttribute("dy").slice(0,-2)-G+"em";this.setAttribute("dy",B)})}var Q=$.selectAll(".gtitle-subtitle");if(Q.node()){var U=Ae.node().getBBox(),re=U.y+U.height,R=re+w.SUBTITLE_PADDING_EM*ce.subtitle.font.size;Q.attr({x:Le,y:R,"text-anchor":ve,dy:ee(ce.yanchor)}).call(p.positionText,Le,R)}}}};function Y(W,ce,de,ve,pe){var be=ce.yref==="paper"?W._fullLayout._size.h:W._fullLayout.height,Le=u.isTopAnchor(ce)?ve:ve-pe,Ae=de==="b"?be-Le:Le;return u.isTopAnchor(ce)&&de==="t"||u.isBottomAnchor(ce)&&de==="b"?!1:Ae<pe}function Z(W,ce,de,ve,pe){var be=0;return de==="middle"&&(be+=pe/2),W==="t"?(de==="top"&&(be+=pe),be+=ve-ce*ve):(de==="bottom"&&(be+=pe),be+=ce*ve),be}function z(W,ce,de){var ve=ce.y,pe=ce.yanchor,be=ve>.5?"t":"b",Le=W._fullLayout.margin[be],Ae=0;return ce.yref==="paper"?Ae=de+ce.pad.t+ce.pad.b:ce.yref==="container"&&(Ae=Z(be,ve,pe,W._fullLayout.height,de)+ce.pad.t+ce.pad.b),Ae>Le?Ae:0}function q(W,ce,de,ve){var pe="title.automargin",be=W._fullLayout.title,Le=be.y>.5?"t":"b",Ae={x:be.x,y:be.y,t:0,b:0},We={};be.yref==="paper"&&Y(W,be,Le,ce,ve)?Ae[Le]=de:be.yref==="container"&&(We[Le]=de,W._fullLayout._reservedMargin[pe]=We),c.allowAutoMargin(W,pe),c.autoMargin(W,pe,Ae)}function X(W,ce){var de=W.title,ve=W._size,pe=0;switch(ce===C?pe=de.pad.l:ce===b&&(pe=-de.pad.r),de.xref){case"paper":return ve.l+ve.w*de.x+pe;case"container":default:return W.width*de.x+pe}}function K(W,ce){var de=W.title,ve=W._size,pe=0;if(ce==="0em"||!ce?pe=-de.pad.b:ce===y.CAP_SHIFT+"em"&&(pe=de.pad.t),de.y==="auto")return ve.t/2;switch(de.yref){case"paper":return ve.t+ve.h-ve.h*de.y+pe;case"container":default:return W.height-W.height*de.y+pe}}function ee(W){return W==="top"?y.CAP_SHIFT+.3+"em":W==="bottom"?"-0.3em":y.MID_SHIFT+"em"}function ne(W){var ce=W.title,de=j;return u.isRightAnchor(ce)?de=b:u.isLeftAnchor(ce)&&(de=C),de}function le(W){var ce=W.title,de="0em";return u.isTopAnchor(ce)?de=y.CAP_SHIFT+"em":u.isMiddleAnchor(ce)&&(de=y.MID_SHIFT+"em"),de}V.doTraceStyle=function(W){var ce=W.calcdata,de=[],ve;for(ve=0;ve<ce.length;ve++){var pe=ce[ve],be=pe[0]||{},Le=be.trace||{},Ae=Le._module||{},We=Ae.arraysToCalcdata;We&&We(pe,Le);var te=Ae.editStyle;te&&de.push({fn:te,cd0:be})}if(de.length){for(ve=0;ve<de.length;ve++){var ae=de[ve];ae.fn(W,ae.cd0)}v(W),V.redrawReglTraces(W)}return c.style(W),h.getComponentMethod("legend","draw")(W),c.previousPromises(W)},V.doColorBars=function(W){return h.getComponentMethod("colorbar","draw")(W),c.previousPromises(W)},V.layoutReplot=function(W){var ce=W.layout;return W.layout=void 0,h.call("_doPlot",W,"",ce)},V.doLegend=function(W){return h.getComponentMethod("legend","draw")(W),c.previousPromises(W)},V.doTicksRelayout=function(W){return T.draw(W,"redraw"),W._fullLayout._hasOnlyLargeSploms&&(h.subplotsRegistry.splom.updateGrid(W),v(W),V.redrawReglTraces(W)),V.drawMainTitle(W),c.previousPromises(W)},V.doModeBar=function(W){var ce=W._fullLayout;o.manage(W);for(var de=0;de<ce._basePlotModules.length;de++){var ve=ce._basePlotModules[de].updateFx;ve&&ve(W)}return c.previousPromises(W)},V.doCamera=function(W){for(var ce=W._fullLayout,de=ce._subplots.gl3d,ve=0;ve<de.length;ve++){var pe=ce[de[ve]],be=pe._scene;be.setViewport(pe)}},V.drawData=function(W){var ce=W._fullLayout;v(W);for(var de=ce._basePlotModules,ve=0;ve<de.length;ve++)de[ve].plot(W);return V.redrawReglTraces(W),c.style(W),h.getComponentMethod("selections","draw")(W),h.getComponentMethod("shapes","draw")(W),h.getComponentMethod("annotations","draw")(W),h.getComponentMethod("images","draw")(W),ce._replotting=!1,c.previousPromises(W)},V.redrawReglTraces=function(W){var ce=W._fullLayout;if(ce._has("regl")){var de=W._fullData,ve=[],pe=[],be,Le;for(ce._hasOnlyLargeSploms&&ce._splomGrid.draw(),be=0;be<de.length;be++){var Ae=de[be];Ae.visible===!0&&Ae._length!==0&&(Ae.type==="splom"?ce._splomScenes[Ae.uid].draw():Ae.type==="scattergl"?u.pushUnique(ve,Ae.xaxis+Ae.yaxis):Ae.type==="scatterpolargl"&&u.pushUnique(pe,Ae.subplot))}for(be=0;be<ve.length;be++)Le=ce._plots[ve[be]],Le._scene&&Le._scene.draw();for(be=0;be<pe.length;be++)Le=ce[pe[be]]._subplot,Le._scene&&Le._scene.draw()}},V.doAutoRangeAndConstraints=function(W){for(var ce=T.list(W,"",!0),de,ve={},pe=0;pe<ce.length;pe++)if(de=ce[pe],!ve[de._id]){ve[de._id]=1,M(W,de),A(W,de);var be=de._matchGroup;if(be)for(var Le in be){var Ae=T.getFromId(W,Le);A(W,Ae,de.range),ve[Le]=1}}D(W)},V.finalDraw=function(W){h.getComponentMethod("rangeslider","draw")(W),h.getComponentMethod("rangeselector","draw")(W)},V.drawMarginPushers=function(W){h.getComponentMethod("legend","draw")(W),h.getComponentMethod("rangeselector","draw")(W),h.getComponentMethod("sliders","draw")(W),h.getComponentMethod("updatemenus","draw")(W),h.getComponentMethod("colorbar","draw")(W)}}}),Zf=i({"src/components/selections/draw.js"(V,$){var h=Io().readPaths,c=qn(),u=rn().clearOutlineControllers,p=ut(),v=oi(),m=hr().arrayEditor,g=$t(),w=g.getPathString;$.exports={draw:o,drawOne:y,activateLastSelection:M};function o(C){var j=C._fullLayout;u(C),j._selectionLayer.selectAll("path").remove();for(var b in j._plots){var S=j._plots[b].selectionLayer;S&&S.selectAll("path").remove()}for(var L=0;L<j.selections.length;L++)y(C,L)}function T(C){return C._context.editSelection}function y(C,j){C._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+j+'"]').remove();var b=g.makeSelectionsOptionsAndPlotinfo(C,j),S=b.options,L=b.plotinfo;if(!S._input)return;F(C._fullLayout._selectionLayer);function F(P){var J=w(C,S),H={"data-index":j,"fill-rule":"evenodd",d:J},Y=S.opacity,Z="rgba(0,0,0,0)",z=S.line.color||p.contrast(C._fullLayout.plot_bgcolor),q=S.line.width,X=S.line.dash;q||(q=5,X="solid");var K=T(C)&&C._fullLayout._activeSelectionIndex===j;K&&(Z=C._fullLayout.activeselection.fillcolor,Y=C._fullLayout.activeselection.opacity);for(var ee=[],ne=1;ne>=0;ne--){var le=P.append("path").attr(H).style("opacity",ne?.1:Y).call(p.stroke,z).call(p.fill,Z).call(v.dashLine,ne?"solid":X,ne?4+q:q);if(k(le,C,S),K){var W=m(C.layout,"selections",S);le.style({cursor:"move"});var ce={element:le.node(),plotinfo:L,gd:C,editHelpers:W,isActiveSelection:!0},de=h(J,C);c(de,le,ce)}else le.style("pointer-events",ne?"all":"none");ee[ne]=le}var ve=ee[0],pe=ee[1];pe.node().addEventListener("click",function(){return D(C,ve)})}}function k(C,j,b){var S=b.xref+b.yref;v.setClipUrl(C,"clip"+j._fullLayout._uid+S,j)}function D(C,j){if(T(C)){var b=j.node(),S=+b.getAttribute("data-index");if(S>=0){if(S===C._fullLayout._activeSelectionIndex){A(C);return}C._fullLayout._activeSelectionIndex=S,C._fullLayout._deactivateSelection=A,o(C)}}}function M(C){if(T(C)){var j=C._fullLayout.selections.length-1;C._fullLayout._activeSelectionIndex=j,C._fullLayout._deactivateSelection=A,o(C)}}function A(C){if(T(C)){var j=C._fullLayout._activeSelectionIndex;j>=0&&(u(C),delete C._fullLayout._activeSelectionIndex,o(C))}}}}),Tm=i({"node_modules/polybooljs/lib/build-log.js"(V,$){function h(){var c,u=0,p=!1;function v(m,g){return c.list.push({type:m,data:g?JSON.parse(JSON.stringify(g)):void 0}),c}return c={list:[],segmentId:function(){return u++},checkIntersection:function(m,g){return v("check",{seg1:m,seg2:g})},segmentChop:function(m,g){return v("div_seg",{seg:m,pt:g}),v("chop",{seg:m,pt:g})},statusRemove:function(m){return v("pop_seg",{seg:m})},segmentUpdate:function(m){return v("seg_update",{seg:m})},segmentNew:function(m,g){return v("new_seg",{seg:m,primary:g})},segmentRemove:function(m){return v("rem_seg",{seg:m})},tempStatus:function(m,g,w){return v("temp_status",{seg:m,above:g,below:w})},rewind:function(m){return v("rewind",{seg:m})},status:function(m,g,w){return v("status",{seg:m,above:g,below:w})},vert:function(m){return m===p?c:(p=m,v("vert",{x:m}))},log:function(m){return typeof m!="string"&&(m=JSON.stringify(m,!1,"  ")),v("log",{txt:m})},reset:function(){return v("reset")},selected:function(m){return v("selected",{segs:m})},chainStart:function(m){return v("chain_start",{seg:m})},chainRemoveHead:function(m,g){return v("chain_rem_head",{index:m,pt:g})},chainRemoveTail:function(m,g){return v("chain_rem_tail",{index:m,pt:g})},chainNew:function(m,g){return v("chain_new",{pt1:m,pt2:g})},chainMatch:function(m){return v("chain_match",{index:m})},chainClose:function(m){return v("chain_close",{index:m})},chainAddHead:function(m,g){return v("chain_add_head",{index:m,pt:g})},chainAddTail:function(m,g){return v("chain_add_tail",{index:m,pt:g})},chainConnect:function(m,g){return v("chain_con",{index1:m,index2:g})},chainReverse:function(m){return v("chain_rev",{index:m})},chainJoin:function(m,g){return v("chain_join",{index1:m,index2:g})},done:function(){return v("done")}},c}$.exports=h}}),Am=i({"node_modules/polybooljs/lib/epsilon.js"(V,$){function h(c){typeof c!="number"&&(c=1e-10);var u={epsilon:function(p){return typeof p=="number"&&(c=p),c},pointAboveOrOnLine:function(p,v,m){var g=v[0],w=v[1],o=m[0],T=m[1],y=p[0],k=p[1];return(o-g)*(k-w)-(T-w)*(y-g)>=-c},pointBetween:function(p,v,m){var g=p[1]-v[1],w=m[0]-v[0],o=p[0]-v[0],T=m[1]-v[1],y=o*w+g*T;if(y<c)return!1;var k=w*w+T*T;return!(y-k>-c)},pointsSameX:function(p,v){return Math.abs(p[0]-v[0])<c},pointsSameY:function(p,v){return Math.abs(p[1]-v[1])<c},pointsSame:function(p,v){return u.pointsSameX(p,v)&&u.pointsSameY(p,v)},pointsCompare:function(p,v){return u.pointsSameX(p,v)?u.pointsSameY(p,v)?0:p[1]<v[1]?-1:1:p[0]<v[0]?-1:1},pointsCollinear:function(p,v,m){var g=p[0]-v[0],w=p[1]-v[1],o=v[0]-m[0],T=v[1]-m[1];return Math.abs(g*T-o*w)<c},linesIntersect:function(p,v,m,g){var w=v[0]-p[0],o=v[1]-p[1],T=g[0]-m[0],y=g[1]-m[1],k=w*y-o*T;if(Math.abs(k)<c)return!1;var D=p[0]-m[0],M=p[1]-m[1],A=(T*M-y*D)/k,C=(w*M-o*D)/k,j={alongA:0,alongB:0,pt:[p[0]+A*w,p[1]+A*o]};return A<=-c?j.alongA=-2:A<c?j.alongA=-1:A-1<=-c?j.alongA=0:A-1<c?j.alongA=1:j.alongA=2,C<=-c?j.alongB=-2:C<c?j.alongB=-1:C-1<=-c?j.alongB=0:C-1<c?j.alongB=1:j.alongB=2,j},pointInsideRegion:function(p,v){for(var m=p[0],g=p[1],w=v[v.length-1][0],o=v[v.length-1][1],T=!1,y=0;y<v.length;y++){var k=v[y][0],D=v[y][1];D-g>c!=o-g>c&&(w-k)*(g-D)/(o-D)+k-m>c&&(T=!T),w=k,o=D}return T}};return u}$.exports=h}}),VS=i({"node_modules/polybooljs/lib/linked-list.js"(V,$){var h={create:function(){var c={root:{root:!0,next:null},exists:function(u){return!(u===null||u===c.root)},isEmpty:function(){return c.root.next===null},getHead:function(){return c.root.next},insertBefore:function(u,p){for(var v=c.root,m=c.root.next;m!==null;){if(p(m)){u.prev=m.prev,u.next=m,m.prev.next=u,m.prev=u;return}v=m,m=m.next}v.next=u,u.prev=v,u.next=null},findTransition:function(u){for(var p=c.root,v=c.root.next;v!==null&&!u(v);)p=v,v=v.next;return{before:p===c.root?null:p,after:v,insert:function(m){return m.prev=p,m.next=v,p.next=m,v!==null&&(v.prev=m),m}}}};return c},node:function(c){return c.prev=null,c.next=null,c.remove=function(){c.prev.next=c.next,c.next&&(c.next.prev=c.prev),c.prev=null,c.next=null},c}};$.exports=h}}),$S=i({"node_modules/polybooljs/lib/intersecter.js"(V,$){var h=VS();function c(u,p,v){function m(j,b){return{id:v?v.segmentId():-1,start:j,end:b,myFill:{above:null,below:null},otherFill:null}}function g(j,b,S){return{id:v?v.segmentId():-1,start:j,end:b,myFill:{above:S.myFill.above,below:S.myFill.below},otherFill:null}}var w=h.create();function o(j,b,S,L,F,P){var J=p.pointsCompare(b,F);return J!==0?J:p.pointsSame(S,P)?0:j!==L?j?1:-1:p.pointAboveOrOnLine(S,L?F:P,L?P:F)?1:-1}function T(j,b){w.insertBefore(j,function(S){var L=o(j.isStart,j.pt,b,S.isStart,S.pt,S.other.pt);return L<0})}function y(j,b){var S=h.node({isStart:!0,pt:j.start,seg:j,primary:b,other:null,status:null});return T(S,j.end),S}function k(j,b,S){var L=h.node({isStart:!1,pt:b.end,seg:b,primary:S,other:j,status:null});j.other=L,T(L,j.pt)}function D(j,b){var S=y(j,b);return k(S,j,b),S}function M(j,b){v&&v.segmentChop(j.seg,b),j.other.remove(),j.seg.end=b,j.other.pt=b,T(j.other,j.pt)}function A(j,b){var S=g(b,j.seg.end,j.seg);return M(j,b),D(S,j.primary)}function C(j,b){var S=h.create();function L(le,W){var ce=le.seg.start,de=le.seg.end,ve=W.seg.start,pe=W.seg.end;return p.pointsCollinear(ce,ve,pe)?p.pointsCollinear(de,ve,pe)||p.pointAboveOrOnLine(de,ve,pe)?1:-1:p.pointAboveOrOnLine(ce,ve,pe)?1:-1}function F(le){return S.findTransition(function(W){var ce=L(le,W.ev);return ce>0})}function P(le,W){var ce=le.seg,de=W.seg,ve=ce.start,pe=ce.end,be=de.start,Le=de.end;v&&v.checkIntersection(ce,de);var Ae=p.linesIntersect(ve,pe,be,Le);if(Ae===!1){if(!p.pointsCollinear(ve,pe,be)||p.pointsSame(ve,Le)||p.pointsSame(pe,be))return!1;var We=p.pointsSame(ve,be),te=p.pointsSame(pe,Le);if(We&&te)return W;var ae=!We&&p.pointBetween(ve,be,Le),G=!te&&p.pointBetween(pe,be,Le);if(We)return G?A(W,pe):A(le,Le),W;ae&&(te||(G?A(W,pe):A(le,Le)),A(W,ve))}else Ae.alongA===0&&(Ae.alongB===-1?A(le,be):Ae.alongB===0?A(le,Ae.pt):Ae.alongB===1&&A(le,Le)),Ae.alongB===0&&(Ae.alongA===-1?A(W,ve):Ae.alongA===0?A(W,Ae.pt):Ae.alongA===1&&A(W,pe));return!1}for(var J=[];!w.isEmpty();){var H=w.getHead();if(v&&v.vert(H.pt[0]),H.isStart){let le=function(){if(Z){var W=P(H,Z);if(W)return W}return z?P(H,z):!1};v&&v.segmentNew(H.seg,H.primary);var Y=F(H),Z=Y.before?Y.before.ev:null,z=Y.after?Y.after.ev:null;v&&v.tempStatus(H.seg,Z?Z.seg:!1,z?z.seg:!1);var q=le();if(q){if(u){var X;H.seg.myFill.below===null?X=!0:X=H.seg.myFill.above!==H.seg.myFill.below,X&&(q.seg.myFill.above=!q.seg.myFill.above)}else q.seg.otherFill=H.seg.myFill;v&&v.segmentUpdate(q.seg),H.other.remove(),H.remove()}if(w.getHead()!==H){v&&v.rewind(H.seg);continue}if(u){var X;H.seg.myFill.below===null?X=!0:X=H.seg.myFill.above!==H.seg.myFill.below,z?H.seg.myFill.below=z.seg.myFill.above:H.seg.myFill.below=j,X?H.seg.myFill.above=!H.seg.myFill.below:H.seg.myFill.above=H.seg.myFill.below}else if(H.seg.otherFill===null){var K;z?H.primary===z.primary?K=z.seg.otherFill.above:K=z.seg.myFill.above:K=H.primary?b:j,H.seg.otherFill={above:K,below:K}}v&&v.status(H.seg,Z?Z.seg:!1,z?z.seg:!1),H.other.status=Y.insert(h.node({ev:H}))}else{var ee=H.status;if(ee===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(S.exists(ee.prev)&&S.exists(ee.next)&&P(ee.prev.ev,ee.next.ev),v&&v.statusRemove(ee.ev.seg),ee.remove(),!H.primary){var ne=H.seg.myFill;H.seg.myFill=H.seg.otherFill,H.seg.otherFill=ne}J.push(H.seg)}w.getHead().remove()}return v&&v.done(),J}return u?{addRegion:function(j){for(var b,S=j[j.length-1],L=0;L<j.length;L++){b=S,S=j[L];var F=p.pointsCompare(b,S);F!==0&&D(m(F<0?b:S,F<0?S:b),!0)}},calculate:function(j){return C(j,!1)}}:{calculate:function(j,b,S,L){return j.forEach(function(F){D(g(F.start,F.end,F),!0)}),S.forEach(function(F){D(g(F.start,F.end,F),!1)}),C(b,L)}}}$.exports=c}}),YS=i({"node_modules/polybooljs/lib/segment-chainer.js"(V,$){function h(c,u,p){var v=[],m=[];return c.forEach(function(g){var w=g.start,o=g.end;if(u.pointsSame(w,o)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}p&&p.chainStart(g);var T={index:0,matches_head:!1,matches_pt1:!1},y={index:0,matches_head:!1,matches_pt1:!1},k=T;function D(K,ee,ne){return k.index=K,k.matches_head=ee,k.matches_pt1=ne,k===T?(k=y,!1):(k=null,!0)}for(var M=0;M<v.length;M++){var A=v[M],C=A[0];A[1];var j=A[A.length-1];if(A[A.length-2],u.pointsSame(C,w)){if(D(M,!0,!0))break}else if(u.pointsSame(C,o)){if(D(M,!0,!1))break}else if(u.pointsSame(j,w)){if(D(M,!1,!0))break}else if(u.pointsSame(j,o)&&D(M,!1,!1))break}if(k===T){v.push([w,o]),p&&p.chainNew(w,o);return}if(k===y){p&&p.chainMatch(T.index);var b=T.index,S=T.matches_pt1?o:w,L=T.matches_head,A=v[b],F=L?A[0]:A[A.length-1],P=L?A[1]:A[A.length-2],J=L?A[A.length-1]:A[0],H=L?A[A.length-2]:A[1];if(u.pointsCollinear(P,F,S)&&(L?(p&&p.chainRemoveHead(T.index,S),A.shift()):(p&&p.chainRemoveTail(T.index,S),A.pop()),F=P),u.pointsSame(J,S)){v.splice(b,1),u.pointsCollinear(H,J,F)&&(L?(p&&p.chainRemoveTail(T.index,F),A.pop()):(p&&p.chainRemoveHead(T.index,F),A.shift())),p&&p.chainClose(T.index),m.push(A);return}L?(p&&p.chainAddHead(T.index,S),A.unshift(S)):(p&&p.chainAddTail(T.index,S),A.push(S));return}function Y(K){p&&p.chainReverse(K),v[K].reverse()}function Z(K,ee){var ne=v[K],le=v[ee],W=ne[ne.length-1],ce=ne[ne.length-2],de=le[0],ve=le[1];u.pointsCollinear(ce,W,de)&&(p&&p.chainRemoveTail(K,W),ne.pop(),W=ce),u.pointsCollinear(W,de,ve)&&(p&&p.chainRemoveHead(ee,de),le.shift()),p&&p.chainJoin(K,ee),v[K]=ne.concat(le),v.splice(ee,1)}var z=T.index,q=y.index;p&&p.chainConnect(z,q);var X=v[z].length<v[q].length;T.matches_head?y.matches_head?X?(Y(z),Z(z,q)):(Y(q),Z(q,z)):Z(q,z):y.matches_head?Z(z,q):X?(Y(z),Z(q,z)):(Y(q),Z(z,q))}),m}$.exports=h}}),GS=i({"node_modules/polybooljs/lib/segment-selector.js"(V,$){function h(u,p,v){var m=[];return u.forEach(function(g){var w=(g.myFill.above?8:0)+(g.myFill.below?4:0)+(g.otherFill&&g.otherFill.above?2:0)+(g.otherFill&&g.otherFill.below?1:0);p[w]!==0&&m.push({id:v?v.segmentId():-1,start:g.start,end:g.end,myFill:{above:p[w]===1,below:p[w]===2},otherFill:null})}),v&&v.selected(m),m}var c={union:function(u,p){return h(u,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],p)},intersect:function(u,p){return h(u,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],p)},difference:function(u,p){return h(u,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],p)},differenceRev:function(u,p){return h(u,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],p)},xor:function(u,p){return h(u,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],p)}};$.exports=c}}),XS=i({"node_modules/polybooljs/lib/geojson.js"(V,$){var h={toPolygon:function(c,u){function p(g){if(g.length<=0)return c.segments({inverted:!1,regions:[]});function w(y){var k=y.slice(0,y.length-1);return c.segments({inverted:!1,regions:[k]})}for(var o=w(g[0]),T=1;T<g.length;T++)o=c.selectDifference(c.combine(o,w(g[T])));return o}if(u.type==="Polygon")return c.polygon(p(u.coordinates));if(u.type==="MultiPolygon"){for(var v=c.segments({inverted:!1,regions:[]}),m=0;m<u.coordinates.length;m++)v=c.selectUnion(c.combine(v,p(u.coordinates[m])));return c.polygon(v)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(c,u,p){p=c.polygon(c.segments(p));function v(A,C){return u.pointInsideRegion([(A[0][0]+A[1][0])*.5,(A[0][1]+A[1][1])*.5],C)}function m(A){return{region:A,children:[]}}var g=m(null);function w(A,C){for(var j=0;j<A.children.length;j++){var b=A.children[j];if(v(C,b.region)){w(b,C);return}}for(var S=m(C),j=0;j<A.children.length;j++){var b=A.children[j];v(b.region,C)&&(S.children.push(b),A.children.splice(j,1),j--)}A.children.push(S)}for(var o=0;o<p.regions.length;o++){var T=p.regions[o];T.length<3||w(g,T)}function y(A,C){for(var j=0,b=A[A.length-1][0],S=A[A.length-1][1],L=[],F=0;F<A.length;F++){var P=A[F][0],J=A[F][1];L.push([P,J]),j+=J*b-P*S,b=P,S=J}var H=j<0;return H!==C&&L.reverse(),L.push([L[0][0],L[0][1]]),L}var k=[];function D(A){var C=[y(A.region,!1)];k.push(C);for(var j=0;j<A.children.length;j++)C.push(M(A.children[j]))}function M(A){for(var C=0;C<A.children.length;C++)D(A.children[C]);return y(A.region,!0)}for(var o=0;o<g.children.length;o++)D(g.children[o]);return k.length<=0?{type:"Polygon",coordinates:[]}:k.length==1?{type:"Polygon",coordinates:k[0]}:{type:"MultiPolygon",coordinates:k}}};$.exports=h}}),ZS=i({"node_modules/polybooljs/index.js"(V,$){var h=Tm(),c=Am(),u=$S(),p=YS(),v=GS(),m=XS(),g=!1,w=c(),o;o={buildLog:function(y){return y===!0?g=h():y===!1&&(g=!1),g===!1?!1:g.list},epsilon:function(y){return w.epsilon(y)},segments:function(y){var k=u(!0,w,g);return y.regions.forEach(k.addRegion),{segments:k.calculate(y.inverted),inverted:y.inverted}},combine:function(y,k){var D=u(!1,w,g);return{combined:D.calculate(y.segments,y.inverted,k.segments,k.inverted),inverted1:y.inverted,inverted2:k.inverted}},selectUnion:function(y){return{segments:v.union(y.combined,g),inverted:y.inverted1||y.inverted2}},selectIntersect:function(y){return{segments:v.intersect(y.combined,g),inverted:y.inverted1&&y.inverted2}},selectDifference:function(y){return{segments:v.difference(y.combined,g),inverted:y.inverted1&&!y.inverted2}},selectDifferenceRev:function(y){return{segments:v.differenceRev(y.combined,g),inverted:!y.inverted1&&y.inverted2}},selectXor:function(y){return{segments:v.xor(y.combined,g),inverted:y.inverted1!==y.inverted2}},polygon:function(y){return{regions:p(y.segments,w,g),inverted:y.inverted}},polygonFromGeoJSON:function(y){return m.toPolygon(o,y)},polygonToGeoJSON:function(y){return m.fromPolygon(o,w,y)},union:function(y,k){return T(y,k,o.selectUnion)},intersect:function(y,k){return T(y,k,o.selectIntersect)},difference:function(y,k){return T(y,k,o.selectDifference)},differenceRev:function(y,k){return T(y,k,o.selectDifferenceRev)},xor:function(y,k){return T(y,k,o.selectXor)}};function T(y,k,D){var M=o.segments(y),A=o.segments(k),C=o.combine(M,A),j=D(C);return o.polygon(j)}typeof window=="object"&&(window.PolyBool=o),$.exports=o}}),KS=i({"node_modules/point-in-polygon/nested.js"(V,$){$.exports=function(c,u,p,v){var m=c[0],g=c[1],w=!1;p===void 0&&(p=0),v===void 0&&(v=u.length);for(var o=v-p,T=0,y=o-1;T<o;y=T++){var k=u[T+p][0],D=u[T+p][1],M=u[y+p][0],A=u[y+p][1],C=D>g!=A>g&&m<(M-k)*(g-D)/(A-D)+k;C&&(w=!w)}return w}}}),jy=i({"src/lib/polygon.js"(V,$){var h=ya().dot,c=Te().BADNUM,u=$.exports={};u.tester=function(v){var m=v.slice(),g=m[0][0],w=g,o=m[0][1],T=o,y;for((m[m.length-1][0]!==m[0][0]||m[m.length-1][1]!==m[0][1])&&m.push(m[0]),y=1;y<m.length;y++)g=Math.min(g,m[y][0]),w=Math.max(w,m[y][0]),o=Math.min(o,m[y][1]),T=Math.max(T,m[y][1]);var k=!1,D;m.length===5&&(m[0][0]===m[1][0]?m[2][0]===m[3][0]&&m[0][1]===m[3][1]&&m[1][1]===m[2][1]&&(k=!0,D=function(b){return b[0]===m[0][0]}):m[0][1]===m[1][1]&&m[2][1]===m[3][1]&&m[0][0]===m[3][0]&&m[1][0]===m[2][0]&&(k=!0,D=function(b){return b[1]===m[0][1]}));function M(b,S){var L=b[0],F=b[1];return!(L===c||L<g||L>w||F===c||F<o||F>T||S&&D(b))}function A(b,S){var L=b[0],F=b[1];if(L===c||L<g||L>w||F===c||F<o||F>T)return!1;var P=m.length,J=m[0][0],H=m[0][1],Y=0,Z,z,q,X,K;for(Z=1;Z<P;Z++)if(z=J,q=H,J=m[Z][0],H=m[Z][1],X=Math.min(z,J),!(L<X||L>Math.max(z,J)||F>Math.max(q,H)))if(F<Math.min(q,H))L!==X&&Y++;else{if(J===z?K=F:K=q+(L-z)*(H-q)/(J-z),F===K)return!(Z===1&&S);F<=K&&L!==X&&Y++}return Y%2===1}var C=!0,j=m[0];for(y=1;y<m.length;y++)if(j[0]!==m[y][0]||j[1]!==m[y][1]){C=!1;break}return{xmin:g,xmax:w,ymin:o,ymax:T,pts:m,contains:k?M:A,isRect:k,degenerate:C}},u.isSegmentBent=function(v,m,g,w){var o=v[m],T=[v[g][0]-o[0],v[g][1]-o[1]],y=h(T,T),k=Math.sqrt(y),D=[-T[1]/k,T[0]/k],M,A,C;for(M=m+1;M<g;M++)if(A=[v[M][0]-o[0],v[M][1]-o[1]],C=h(A,T),C<0||C>y||Math.abs(h(A,D))>w)return!0;return!1},u.filter=function(v,m){var g=[v[0]],w=0,o=0;function T(k){v.push(k);var D=g.length,M=w;g.splice(o+1);for(var A=M+1;A<v.length;A++)(A===v.length-1||u.isSegmentBent(v,M,A+1,m))&&(g.push(v[A]),g.length<D-2&&(w=A,o=g.length-1),M=A)}if(v.length>1){var y=v.pop();T(y)}return{addPt:T,raw:v,filtered:g}}}}),JS=i({"src/components/selections/constants.js"(V,$){$.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}}}),QS=i({"src/components/selections/select.js"(V,$){var h=ZS(),c=KS(),u=xn(),p=oi().dashStyle,v=ut(),m=so(),g=Wa().makeEventData,w=jl(),o=w.freeMode,T=w.rectMode,y=w.drawMode,k=w.openMode,D=w.selectMode,M=$t(),A=vc(),C=qn(),j=rn().clearOutline,b=Io(),S=b.handleEllipse,L=b.readPaths,F=lu().newShapes,P=od(),J=Zf().activateLastSelection,H=_r(),Y=H.sorterAsc,Z=jy(),z=on(),q=Ur().getFromId,X=iu(),K=ld().redrawReglTraces,ee=JS(),ne=ee.MINSELECT,le=Z.filter,W=Z.tester,ce=ou(),de=ce.p2r,ve=ce.axValue,pe=ce.getTransform;function be(ze){return ze.subplot!==void 0}function Le(ze,Ye,$e,he,je){var Ne=!be(he),Re=o(je),nt=T(je),at=k(je),dt=y(je),Mt=D(je),Nt=je==="drawline",ot=je==="drawcircle",jt=Nt||ot,Ut=he.gd,Gt=Ut._fullLayout,Tr=Mt&&Gt.newselection.mode==="immediate"&&Ne,Dr=Gt._zoomlayer,Vr=he.element.getBoundingClientRect(),Mr=he.plotinfo,Fr=pe(Mr),xr=Ye-Vr.left,br=$e-Vr.top;Gt._calcInverseTransform(Ut);var Wr=H.apply3DTransform(Gt._invTransform)(xr,br);xr=Wr[0],br=Wr[1];var Or=Gt._invScaleX,qr=Gt._invScaleY,Er=xr,vr=br,Ir="M"+xr+","+br,ln=he.xaxes[0],kn=he.yaxes[0],Hr=ln._length,pn=kn._length,mn=ze.altKey&&!(y(je)&&at),Un,gr,Cn,we,ge,pt,ft;Q(ze,Ut,he),Re&&(Un=le([[xr,br]],ee.BENDPX));var Xe=Dr.selectAll("path.select-outline-"+Mr.id).data([1]),Qe=dt?Gt.newshape:Gt.newselection;dt&&(he.hasText=Qe.label.text||Qe.label.texttemplate);var st=dt&&!at?Qe.fillcolor:"rgba(0,0,0,0)",At=Qe.line.color||(Ne?v.contrast(Ut._fullLayout.plot_bgcolor):"#7f7f7f");Xe.enter().append("path").attr("class","select-outline select-outline-"+Mr.id).style({opacity:dt?Qe.opacity/2:1,"stroke-dasharray":p(Qe.line.dash,Qe.line.width),"stroke-width":Qe.line.width+"px","shape-rendering":"crispEdges"}).call(v.stroke,At).call(v.fill,st).attr("fill-rule","evenodd").classed("cursor-move",!!dt).attr("transform",Fr).attr("d",Ir+"Z");var it=Dr.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",Fr).attr("d","M0,0Z");if(dt&&he.hasText){var bt=Dr.select(".label-temp");bt.empty()&&(bt=Dr.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Tt=Gt._uid+ee.SELECTID,Rt=[],tr=oe(Ut,he.xaxes,he.yaxes,he.subplot);Tr&&!ze.shiftKey&&(he._clearSubplotSelections=function(){if(Ne){var fr=ln._id,Rr=kn._id;ht(Ut,fr,Rr,tr);for(var wr=(Ut.layout||{}).selections||[],Gr=[],Lr=!1,$r=0;$r<wr.length;$r++){var Xr=Gt.selections[$r];!Xr||Xr.xref!==fr||Xr.yref!==Rr?Gr.push(wr[$r]):Lr=!0}Lr&&(Ut._fullLayout._noEmitSelectedAtStart=!0,u.call("_guiRelayout",Ut,{selections:Gr}))}});var ur=rr(he);he.moveFn=function(fr,Rr){he._clearSubplotSelections&&(he._clearSubplotSelections(),he._clearSubplotSelections=void 0),Er=Math.max(0,Math.min(Hr,Or*fr+xr)),vr=Math.max(0,Math.min(pn,qr*Rr+br));var wr=Math.abs(Er-xr),Gr=Math.abs(vr-br);if(nt){var Lr,$r,Xr;if(Mt){var jn=Gt.selectdirection;switch(jn==="any"?Gr<Math.min(wr*.6,ne)?Lr="h":wr<Math.min(Gr*.6,ne)?Lr="v":Lr="d":Lr=jn,Lr){case"h":$r=ot?pn/2:0,Xr=pn;break;case"v":$r=ot?Hr/2:0,Xr=Hr;break}}if(dt)switch(Gt.newshape.drawdirection){case"vertical":Lr="h",$r=ot?pn/2:0,Xr=pn;break;case"horizontal":Lr="v",$r=ot?Hr/2:0,Xr=Hr;break;case"ortho":wr<Gr?(Lr="h",$r=br,Xr=vr):(Lr="v",$r=xr,Xr=Er);break;default:Lr="d"}Lr==="h"?(we=jt?S(ot,[Er,$r],[Er,Xr]):[[xr,$r],[xr,Xr],[Er,Xr],[Er,$r]],we.xmin=jt?Er:Math.min(xr,Er),we.xmax=jt?Er:Math.max(xr,Er),we.ymin=Math.min($r,Xr),we.ymax=Math.max($r,Xr),it.attr("d","M"+we.xmin+","+(br-ne)+"h-4v"+2*ne+"h4ZM"+(we.xmax-1)+","+(br-ne)+"h4v"+2*ne+"h-4Z")):Lr==="v"?(we=jt?S(ot,[$r,vr],[Xr,vr]):[[$r,br],[$r,vr],[Xr,vr],[Xr,br]],we.xmin=Math.min($r,Xr),we.xmax=Math.max($r,Xr),we.ymin=jt?vr:Math.min(br,vr),we.ymax=jt?vr:Math.max(br,vr),it.attr("d","M"+(xr-ne)+","+we.ymin+"v-4h"+2*ne+"v4ZM"+(xr-ne)+","+(we.ymax-1)+"v4h"+2*ne+"v-4Z")):Lr==="d"&&(we=jt?S(ot,[xr,br],[Er,vr]):[[xr,br],[xr,vr],[Er,vr],[Er,br]],we.xmin=Math.min(xr,Er),we.xmax=Math.max(xr,Er),we.ymin=Math.min(br,vr),we.ymax=Math.max(br,vr),it.attr("d","M0,0Z"))}else Re&&(Un.addPt([Er,vr]),we=Un.filtered);if(he.selectionDefs&&he.selectionDefs.length?(Cn=lt(he.mergedPolygons,we,mn),we.subtract=mn,gr=G(he.selectionDefs.concat([we]))):(Cn=[we],gr=W(we)),C(Ce(Cn,at),Xe,he),Mt){var bn=Se(Ut,!1),pi=bn.eventData?bn.eventData.points.slice():[];bn=Se(Ut,!1,gr,tr,he),gr=bn.selectionTesters,ft=bn.eventData;var Gn;Un?Gn=Un.filtered:Gn=Ft(Cn),z.throttle(Tt,ee.SELECTDELAY,function(){Rt=Ie(gr,tr);for(var ei=Rt.slice(),$i=0;$i<pi.length;$i++){for(var da=pi[$i],si=!1,yn=0;yn<ei.length;yn++)if(ei[yn].curveNumber===da.curveNumber&&ei[yn].pointNumber===da.pointNumber){si=!0;break}si||ei.push(da)}ei.length&&(ft||(ft={}),ft.points=ei),ur(ft,Gn),pr(Ut,ft)})}},he.clickFn=function(fr,Rr){if(it.remove(),Ut._fullLayout._activeShapeIndex>=0){Ut._fullLayout._deactivateShape(Ut);return}if(!dt){var wr=Gt.clickmode;z.done(Tt).then(function(){if(z.clear(Tt),fr===2){for(Xe.remove(),ge=0;ge<tr.length;ge++)pt=tr[ge],pt._module.selectPoints(pt,!1);if(Je(Ut,tr),R(he),sr(Ut),tr.length){var Gr=tr[0].xaxis,Lr=tr[0].yaxis;if(Gr&&Lr){for(var $r=[],Xr=Ut._fullLayout.selections,jn=0;jn<Xr.length;jn++){var bn=Xr[jn];bn&&(bn.xref!==Gr._id||bn.yref!==Lr._id)&&$r.push(bn)}$r.length<Xr.length&&(Ut._fullLayout._noEmitSelectedAtStart=!0,u.call("_guiRelayout",Ut,{selections:$r}))}}}else wr.indexOf("select")>-1&&Ae(Rr,Ut,he.xaxes,he.yaxes,he.subplot,he,Xe),wr==="event"&&Yt(Ut,void 0);m.click(Ut,Rr,Mr.id)}).catch(H.error)}},he.doneFn=function(){it.remove(),z.done(Tt).then(function(){z.clear(Tt),!Tr&&we&&he.selectionDefs&&(we.subtract=mn,he.selectionDefs.push(we),he.mergedPolygons.length=0,[].push.apply(he.mergedPolygons,Cn)),(Tr||dt)&&R(he,Tr),he.doneFnCompleted&&he.doneFnCompleted(Rt),Mt&&Yt(Ut,ft)}).catch(H.error)}}function Ae(ze,Ye,$e,he,je,Ne,Re){var nt=Ye._hoverdata,at=Ye._fullLayout,dt=at.clickmode,Mt=dt.indexOf("event")>-1,Nt=[],ot,jt,Ut,Gt,Tr,Dr,Vr,Mr,Fr,xr;if(xe(nt)){Q(ze,Ye,Ne),ot=oe(Ye,$e,he,je);var br=_e(nt,ot),Wr=br.pointNumbers.length>0;if(Wr?Pe(ot,br):Ge(ot)&&(Vr=ke(br))){for(Re&&Re.remove(),xr=0;xr<ot.length;xr++)jt=ot[xr],jt._module.selectPoints(jt,!1);Je(Ye,ot),R(Ne),Mt&&sr(Ye)}else{Mr=ze.shiftKey&&(Vr!==void 0?Vr:ke(br)),Ut=We(br.pointNumber,br.searchInfo,Mr);var Or=Ne.selectionDefs.concat([Ut]);for(Gt=G(Or),xr=0;xr<ot.length;xr++)if(Tr=ot[xr]._module.selectPoints(ot[xr],Gt),Dr=mt(Tr,ot[xr]),Nt.length)for(var qr=0;qr<Dr.length;qr++)Nt.push(Dr[qr]);else Nt=Dr;if(Fr={points:Nt},Je(Ye,ot,Fr),Ut&&Ne&&Ne.selectionDefs.push(Ut),Re){var Er=Ne.mergedPolygons,vr=k(Ne.dragmode);C(Ce(Er,vr),Re,Ne)}Mt&&Yt(Ye,Fr)}}}function We(ze,Ye,$e){return{pointNumber:ze,searchInfo:Ye,subtract:!!$e}}function te(ze){return"pointNumber"in ze&&"searchInfo"in ze}function ae(ze){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Ye,$e,he,je){var Ne=ze.searchInfo.cd[0].trace.index,Re=je.cd[0].trace.index;return Re===Ne&&he===ze.pointNumber},isRect:!1,degenerate:!1,subtract:!!ze.subtract}}function G(ze){if(!ze.length)return;for(var Ye=[],$e=te(ze[0])?0:ze[0][0][0],he=$e,je=te(ze[0])?0:ze[0][0][1],Ne=je,Re=0;Re<ze.length;Re++)if(te(ze[Re]))Ye.push(ae(ze[Re]));else{var nt=W(ze[Re]);nt.subtract=!!ze[Re].subtract,Ye.push(nt),$e=Math.min($e,nt.xmin),he=Math.max(he,nt.xmax),je=Math.min(je,nt.ymin),Ne=Math.max(Ne,nt.ymax)}function at(dt,Mt,Nt,ot){for(var jt=!1,Ut=0;Ut<Ye.length;Ut++)Ye[Ut].contains(dt,Mt,Nt,ot)&&(jt=!Ye[Ut].subtract);return jt}return{xmin:$e,xmax:he,ymin:je,ymax:Ne,pts:[],contains:at,isRect:!1,degenerate:!1}}function Q(ze,Ye,$e){var he=Ye._fullLayout,je=$e.plotinfo,Ne=$e.dragmode,Re=he._lastSelectedSubplot&&he._lastSelectedSubplot===je.id,nt=(ze.shiftKey||ze.altKey)&&!(y(Ne)&&k(Ne));Re&&nt&&je.selection&&je.selection.selectionDefs&&!$e.selectionDefs?($e.selectionDefs=je.selection.selectionDefs,$e.mergedPolygons=je.selection.mergedPolygons):(!nt||!je.selection)&&R($e),Re||(j(Ye),he._lastSelectedSubplot=je.id)}function U(ze){return ze._fullLayout._activeShapeIndex>=0}function re(ze){return ze._fullLayout._activeSelectionIndex>=0}function R(ze,Ye){var $e=ze.dragmode,he=ze.plotinfo,je=ze.gd;U(je)&&je._fullLayout._deactivateShape(je),re(je)&&je._fullLayout._deactivateSelection(je);var Ne=je._fullLayout,Re=Ne._zoomlayer,nt=y($e),at=D($e);if(nt||at){var dt=Re.selectAll(".select-outline-"+he.id);if(dt&&je._fullLayout._outlining){var Mt;nt&&(Mt=F(dt,ze)),Mt&&u.call("_guiRelayout",je,{shapes:Mt});var Nt;at&&!be(ze)&&(Nt=P(dt,ze)),Nt&&(je._fullLayout._noEmitSelectedAtStart=!0,u.call("_guiRelayout",je,{selections:Nt}).then(function(){Ye&&J(je)})),je._fullLayout._outlining=!1}}he.selection={},he.selection.selectionDefs=ze.selectionDefs=[],he.selection.mergedPolygons=ze.mergedPolygons=[]}function B(ze){return ze._id}function oe(ze,Ye,$e,he){if(!ze.calcdata)return[];var je=[],Ne=Ye.map(B),Re=$e.map(B),nt,at,dt;for(dt=0;dt<ze.calcdata.length;dt++)if(nt=ze.calcdata[dt],at=nt[0].trace,!(at.visible!==!0||!at._module||!at._module.selectPoints))if(be({subplot:he})&&(at.subplot===he||at.geo===he))je.push(ie(at._module,nt,Ye[0],$e[0]));else if(at.type==="splom"){if(at._xaxes[Ne[0]]&&at._yaxes[Re[0]]){var Mt=ie(at._module,nt,Ye[0],$e[0]);Mt.scene=ze._fullLayout._splomScenes[at.uid],je.push(Mt)}}else if(at.type==="sankey"){var Nt=ie(at._module,nt,Ye[0],$e[0]);je.push(Nt)}else{if(Ne.indexOf(at.xaxis)===-1&&(!at._xA||!at._xA.overlaying)||Re.indexOf(at.yaxis)===-1&&(!at._yA||!at._yA.overlaying))continue;je.push(ie(at._module,nt,q(ze,at.xaxis),q(ze,at.yaxis)))}return je}function ie(ze,Ye,$e,he){return{_module:ze,cd:Ye,xaxis:$e,yaxis:he}}function xe(ze){return ze&&Array.isArray(ze)&&ze[0].hoverOnBox!==!0}function _e(ze,Ye){var $e=ze[0],he=-1,je=[],Ne,Re;for(Re=0;Re<Ye.length;Re++)if(Ne=Ye[Re],$e.fullData.index===Ne.cd[0].trace.index){if($e.hoverOnBox===!0)break;$e.pointNumber!==void 0?he=$e.pointNumber:$e.binNumber!==void 0&&(he=$e.binNumber,je=$e.pointNumbers);break}return{pointNumber:he,pointNumbers:je,searchInfo:Ne}}function ke(ze){var Ye=ze.searchInfo.cd[0].trace,$e=ze.pointNumber,he=ze.pointNumbers,je=he.length>0,Ne=je?he[0]:$e;return Ye.selectedpoints?Ye.selectedpoints.indexOf(Ne)>-1:!1}function Pe(ze,Ye){var $e=[],he,je,Ne,Re;for(Re=0;Re<ze.length;Re++)he=ze[Re],he.cd[0].trace.selectedpoints&&he.cd[0].trace.selectedpoints.length>0&&$e.push(he);if($e.length===1&&(Ne=$e[0]===Ye.searchInfo,Ne&&(je=Ye.searchInfo.cd[0].trace,je.selectedpoints.length===Ye.pointNumbers.length))){for(Re=0;Re<Ye.pointNumbers.length;Re++)if(je.selectedpoints.indexOf(Ye.pointNumbers[Re])<0)return!1;return!0}return!1}function Ge(ze){var Ye=0,$e,he,je;for(je=0;je<ze.length;je++)if($e=ze[je],he=$e.cd[0].trace,he.selectedpoints&&(he.selectedpoints.length>1||(Ye+=he.selectedpoints.length,Ye>1)))return!1;return Ye===1}function Je(ze,Ye,$e){var he;for(he=0;he<Ye.length;he++){var je=Ye[he].cd[0].trace._fullInput,Ne=ze._fullLayout._tracePreGUI[je.uid]||{};Ne.selectedpoints===void 0&&(Ne.selectedpoints=je._input.selectedpoints||null)}var Re;if($e){var nt=$e.points||[];for(he=0;he<Ye.length;he++)Re=Ye[he].cd[0].trace,Re._input.selectedpoints=Re._fullInput.selectedpoints=[],Re._fullInput!==Re&&(Re.selectedpoints=[]);for(var at=0;at<nt.length;at++){var dt=nt[at],Mt=dt.data,Nt=dt.fullData,ot=dt.pointIndex,jt=dt.pointIndices;jt?([].push.apply(Mt.selectedpoints,jt),Re._fullInput!==Re&&[].push.apply(Nt.selectedpoints,jt)):(Mt.selectedpoints.push(ot),Re._fullInput!==Re&&Nt.selectedpoints.push(ot))}}else for(he=0;he<Ye.length;he++)Re=Ye[he].cd[0].trace,delete Re.selectedpoints,delete Re._input.selectedpoints,Re._fullInput!==Re&&delete Re._fullInput.selectedpoints;yt(ze,Ye)}function yt(ze,Ye){for(var $e=!1,he=0;he<Ye.length;he++){var je=Ye[he],Ne=je.cd;u.traceIs(Ne[0].trace,"regl")&&($e=!0);var Re=je._module,nt=Re.styleOnSelect||Re.style;nt&&(nt(ze,Ne,Ne[0].node3),Ne[0].nodeRangePlot3&&nt(ze,Ne,Ne[0].nodeRangePlot3))}$e&&(X(ze),K(ze))}function lt(ze,Ye,$e){for(var he=$e?h.difference:h.union,je=he({regions:ze},{regions:[Ye]}),Ne=je.regions.reverse(),Re=0;Re<Ne.length;Re++){var nt=Ne[Re];nt.subtract=zt(nt,Ne.slice(0,Re))}return Ne}function mt(ze,Ye){if(Array.isArray(ze))for(var $e=Ye.cd,he=Ye.cd[0].trace,je=0;je<ze.length;je++)ze[je]=g(ze[je],he,$e);return ze}function Ce(ze,Ye){for(var $e=[],he=0;he<ze.length;he++){$e[he]=[];for(var je=0;je<ze[he].length;je++){$e[he][je]=[],$e[he][je][0]=je?"L":"M";for(var Ne=0;Ne<ze[he][je].length;Ne++)$e[he][je].push(ze[he][je][Ne])}Ye||$e[he].push(["Z",$e[he][0][1],$e[he][0][2]])}return $e}function Ie(ze,Ye){for(var $e=[],he,je,Ne=0;Ne<Ye.length;Ne++){var Re=Ye[Ne];je=Re._module.selectPoints(Re,ze),he=mt(je,Re),$e=$e.concat(he)}return $e}function Se(ze,Ye,$e,he,je){var Ne=!!he,Re,nt,at;je&&(Re=je.plotinfo,nt=je.xaxes[0]._id,at=je.yaxes[0]._id);var dt=[],Mt=[],Nt=Ct(ze),ot=ze._fullLayout;if(Re){var jt=ot._zoomlayer,Ut=ot.dragmode,Gt=y(Ut),Tr=D(Ut);if(Gt||Tr){var Dr=q(ze,nt,"x"),Vr=q(ze,at,"y");if(Dr&&Vr){var Mr=jt.selectAll(".select-outline-"+Re.id);if(Mr&&ze._fullLayout._outlining&&Mr.length){for(var Fr=Mr[0][0],xr=Fr.getAttribute("d"),br=L(xr,ze,Re),Wr=[],Or=0;Or<br.length;Or++){for(var qr=br[Or],Er=[],vr=0;vr<qr.length;vr++)Er.push([Bt(Dr,qr[vr][1]),Bt(Vr,qr[vr][2])]);Er.xref=nt,Er.yref=at,Er.subtract=zt(Er,Wr),Wr.push(Er)}Nt=Nt.concat(Wr)}}}}var Ir=nt&&at?[nt+at]:ot._subplots.cartesian;Be(ze);for(var ln={},kn=0;kn<Ir.length;kn++){var Hr=Ir[kn],pn=Hr.indexOf("y"),mn=Hr.slice(0,pn),Un=Hr.slice(pn),gr=nt&&at?$e:void 0;if(gr=Lt(Nt,mn,Un,gr),gr){var Cn=he;if(!Ne){var we=q(ze,mn,"x"),ge=q(ze,Un,"y");Cn=oe(ze,[we],[ge],Hr);for(var pt=0;pt<Cn.length;pt++){var ft=Cn[pt],Xe=ft.cd[0],Qe=Xe.trace;if(ft._module.name==="scattergl"&&!Xe.t.xpx){var st=Qe.x,At=Qe.y,it=Qe._length;Xe.t.xpx=[],Xe.t.ypx=[];for(var bt=0;bt<it;bt++)Xe.t.xpx[bt]=we.c2p(st[bt]),Xe.t.ypx[bt]=ge.c2p(At[bt])}ft._module.name==="splom"&&(ln[Qe.uid]||(ln[Qe.uid]=!0))}}var Tt=Ie(gr,Cn);dt=dt.concat(Tt),Mt=Mt.concat(Cn)}}var Rt={points:dt};Je(ze,Mt,Rt);var tr=ot.clickmode,ur=tr.indexOf("event")>-1&&Ye;if(!Re&&Ye){var fr=Ct(ze,!0);if(fr.length){var Rr=fr[0].xref,wr=fr[0].yref;if(Rr&&wr){var Gr=Ft(fr),Lr=_t([q(ze,Rr,"x"),q(ze,wr,"y")]);Lr(Rt,Gr)}}ze._fullLayout._noEmitSelectedAtStart?ze._fullLayout._noEmitSelectedAtStart=!1:ur&&Yt(ze,Rt),ot._reselect=!1}if(!Re&&ot._deselect){var $r=ot._deselect;nt=$r.xref,at=$r.yref,rt(nt,at,Mt)||ht(ze,nt,at,he),ur&&(Rt.points.length?Yt(ze,Rt):sr(ze)),ot._deselect=!1}return{eventData:Rt,selectionTesters:$e}}function Be(ze){var Ye=ze.calcdata;if(Ye)for(var $e=0;$e<Ye.length;$e++){var he=Ye[$e][0],je=he.trace,Ne=ze._fullLayout._splomScenes;if(Ne){var Re=Ne[je.uid];Re&&(Re.selectBatch=[])}}}function rt(ze,Ye,$e){for(var he=0;he<$e.length;he++){var je=$e[he];if(je.xaxis&&je.xaxis._id===ze&&je.yaxis&&je.yaxis._id===Ye)return!0}return!1}function ht(ze,Ye,$e,he){he=oe(ze,[q(ze,Ye,"x")],[q(ze,$e,"y")],Ye+$e);for(var je=0;je<he.length;je++){var Ne=he[je];Ne._module.selectPoints(Ne,!1)}Je(ze,he)}function Lt(ze,Ye,$e,he){for(var je,Ne=0;Ne<ze.length;Ne++){var Re=ze[Ne];if(!(Ye!==Re.xref||$e!==Re.yref))if(je){var nt=!!Re.subtract;je=lt(je,Re,nt),he=G(je)}else je=[Re],he=W(Re)}return he}function Ct(ze,Ye){for(var $e=[],he=ze._fullLayout,je=he.selections,Ne=je.length,Re=0;Re<Ne;Re++)if(!(Ye&&Re!==he._activeSelectionIndex)){var nt=je[Re];if(nt){var at=nt.xref,dt=nt.yref,Mt=q(ze,at,"x"),Nt=q(ze,dt,"y"),ot,jt,Ut,Gt,Tr;if(nt.type==="rect"){Tr=[];var Dr=Bt(Mt,nt.x0),Vr=Bt(Mt,nt.x1),Mr=Bt(Nt,nt.y0),Fr=Bt(Nt,nt.y1);Tr=[[Dr,Mr],[Dr,Fr],[Vr,Fr],[Vr,Mr]],ot=Math.min(Dr,Vr),jt=Math.max(Dr,Vr),Ut=Math.min(Mr,Fr),Gt=Math.max(Mr,Fr),Tr.xmin=ot,Tr.xmax=jt,Tr.ymin=Ut,Tr.ymax=Gt,Tr.xref=at,Tr.yref=dt,Tr.subtract=!1,Tr.isRect=!0,$e.push(Tr)}else if(nt.type==="path")for(var xr=nt.path.split("Z"),br=[],Wr=0;Wr<xr.length;Wr++){var Or=xr[Wr];if(Or){Or+="Z";var qr=M.extractPathCoords(Or,A.paramIsX,"raw"),Er=M.extractPathCoords(Or,A.paramIsY,"raw");ot=1/0,jt=-1/0,Ut=1/0,Gt=-1/0,Tr=[];for(var vr=0;vr<qr.length;vr++){var Ir=Bt(Mt,qr[vr]),ln=Bt(Nt,Er[vr]);Tr.push([Ir,ln]),ot=Math.min(Ir,ot),jt=Math.max(Ir,jt),Ut=Math.min(ln,Ut),Gt=Math.max(ln,Gt)}Tr.xmin=ot,Tr.xmax=jt,Tr.ymin=Ut,Tr.ymax=Gt,Tr.xref=at,Tr.yref=dt,Tr.subtract=zt(Tr,br),br.push(Tr),$e.push(Tr)}}}}return $e}function zt(ze,Ye){for(var $e=!1,he=0;he<Ye.length;he++)for(var je=Ye[he],Ne=0;Ne<ze.length;Ne++)if(c(ze[Ne],je)){$e=!$e;break}return $e}function Bt(ze,Ye){return ze.type==="date"&&(Ye=Ye.replace("_"," ")),ze.type==="log"?ze.c2p(Ye):ze.r2p(Ye,null,ze.calendar)}function Ft(ze){for(var Ye=ze.length,$e=[],he=0;he<Ye;he++){var je=ze[he];$e=$e.concat(je),$e=$e.concat([je[0]])}return nr($e)}function nr(ze){return ze.isRect=ze.length===5&&ze[0][0]===ze[4][0]&&ze[0][1]===ze[4][1]&&ze[0][0]===ze[1][0]&&ze[2][0]===ze[3][0]&&ze[0][1]===ze[3][1]&&ze[1][1]===ze[2][1]||ze[0][1]===ze[1][1]&&ze[2][1]===ze[3][1]&&ze[0][0]===ze[3][0]&&ze[1][0]===ze[2][0],ze.isRect&&(ze.xmin=Math.min(ze[0][0],ze[2][0]),ze.xmax=Math.max(ze[0][0],ze[2][0]),ze.ymin=Math.min(ze[0][1],ze[2][1]),ze.ymax=Math.max(ze[0][1],ze[2][1])),ze}function _t(ze){return function(Ye,$e){for(var he,je,Ne=0;Ne<ze.length;Ne++){var Re=ze[Ne],nt=Re._id,at=nt.charAt(0);if($e.isRect){he||(he={});var dt=$e[at+"min"],Mt=$e[at+"max"];dt!==void 0&&Mt!==void 0&&(he[nt]=[de(Re,dt),de(Re,Mt)].sort(Y))}else je||(je={}),je[nt]=$e.map(ve(Re))}he&&(Ye.range=he),je&&(Ye.lassoPoints=je)}}function rr(ze){var Ye=ze.plotinfo;return Ye.fillRangeItems||_t(ze.xaxes.concat(ze.yaxes))}function pr(ze,Ye){ze.emit("plotly_selecting",Ye)}function Yt(ze,Ye){Ye&&(Ye.selections=(ze.layout||{}).selections||[]),ze.emit("plotly_selected",Ye)}function sr(ze){ze.emit("plotly_deselect",null)}$.exports={reselect:Se,prepSelect:Le,clearOutline:j,clearSelectionsCache:R,selectOnClick:Ae}}}),Ly=i({"src/components/annotations/arrow_paths.js"(V,$){$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]}}),Kf=i({"src/constants/axis_placeable_objects.js"(V,$){$.exports={axisRefDescription:function(h,c,u){return["If set to a",h,"axis id (e.g. *"+h+"* or","*"+h+"2*), the `"+h+"` position refers to a",h,"coordinate. If set to *paper*, the `"+h+"`","position refers to the distance from the",c,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",c,"("+u+"). If set to a",h,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",c,"of the domain of that axis: e.g.,","*"+h+"2 domain* refers to the domain of the second",h," axis and a",h,"position of 0.5 refers to the","point between the",c,"and the",u,"of the domain of the","second",h,"axis."].join(" ")}}}}),cd=i({"src/components/annotations/attributes.js"(V,$){var h=Ly(),c=ir(),u=Yr(),p=hr().templatedArray;Kf(),$.exports=p("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:h.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:h.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",u.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",u.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:c({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})}}),Cm=i({"src/traces/scatter/constants.js"(V,$){$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}}}),e5=i({"src/traces/scatter/fillcolor_attribute.js"(V,$){$.exports=function(c){return{valType:"color",editType:"style",anim:!0}}}}),cu=i({"src/traces/scatter/attributes.js"(V,$){var h=io().axisHoverFormat,c=Pn().texttemplateAttrs,u=Pn().hovertemplateAttrs,p=ao(),v=ir(),m=Wi().dash,g=Wi().pattern,w=oi(),o=Cm(),T=Pt().extendFlat,y=e5();function k(A){return{valType:"any",dflt:0,editType:"calc"}}function D(A){return{valType:"any",editType:"calc"}}function M(A){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:k(),yperiod:k(),xperiod0:D(),yperiod0:D(),xperiodalignment:M(),yperiodalignment:M(),xhoverformat:h("x"),yhoverformat:h("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:c({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:u({},{keys:o.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:T({},m,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:y(!0),fillgradient:T({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:g,marker:T({symbol:{valType:"enumerated",values:w.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:T({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},p("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},p("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:v({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}}}),Ey=i({"src/components/selections/attributes.js"(V,$){var h=cd(),c=cu().line,u=Wi().dash,p=Pt().extendFlat,v=Ma().overrideAll,m=hr().templatedArray;Kf(),$.exports=v(m("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:p({},h.xref,{}),yref:p({},h.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:c.color,width:p({},c.width,{min:1,dflt:1}),dash:p({},u,{dflt:"dot"})}}),"arraydraw","from-root")}}),t5=i({"src/components/selections/defaults.js"(V,$){var h=_r(),c=ji(),u=Ns(),p=Ey(),v=$t();$.exports=function(w,o){u(w,o,{name:"selections",handleItemDefaults:m});for(var T=o.selections,y=0;y<T.length;y++){var k=T[y];k&&k.path===void 0&&(k.x0===void 0||k.x1===void 0||k.y0===void 0||k.y1===void 0)&&(o.selections[y]=null)}};function m(g,w,o){function T(X,K){return h.coerce(g,w,p,X,K)}var y=T("path"),k=y?"path":"rect",D=T("type",k),M=D!=="path";M&&delete w.path,T("opacity"),T("line.color"),T("line.width"),T("line.dash");for(var A=["x","y"],C=0;C<2;C++){var j=A[C],b={_fullLayout:o},S,L,F,P=c.coerceRef(g,w,b,j);if(S=c.getFromId(b,P),S._selectionIndices.push(w._index),F=v.rangeToShapePosition(S),L=v.shapePositionToRange(S),M){var J=j+"0",H=j+"1",Y=g[J],Z=g[H];g[J]=L(g[J],!0),g[H]=L(g[H],!0),c.coercePosition(w,b,T,P,J),c.coercePosition(w,b,T,P,H);var z=w[J],q=w[H];z!==void 0&&q!==void 0&&(w[J]=F(z),w[H]=F(q),g[J]=Y,g[H]=Z)}}M&&h.noneOrAll(g,w,["x0","x1","y0","y1"])}}}),r5=i({"src/components/selections/draw_newselection/defaults.js"(V,$){$.exports=function(c,u,p){p("newselection.mode");var v=p("newselection.line.width");v&&(p("newselection.line.color"),p("newselection.line.dash")),p("activeselection.fillcolor"),p("activeselection.opacity")}}}),Jf=i({"src/plots/cartesian/include_components.js"(V,$){var h=xn(),c=_r(),u=Ur();$.exports=function(v){return function(g,w){var o=g[v];if(Array.isArray(o))for(var T=h.subplotsRegistry.cartesian,y=T.idRegex,k=w._subplots,D=k.xaxis,M=k.yaxis,A=k.cartesian,C=w._has("cartesian"),j=0;j<o.length;j++){var b=o[j];if(c.isPlainObject(b)){var S=u.cleanId(b.xref,"x",!1),L=u.cleanId(b.yref,"y",!1),F=y.x.test(S),P=y.y.test(L);if(F||P){C||c.pushUnique(w._basePlotModules,T);var J=!1;F&&D.indexOf(S)===-1&&(D.push(S),J=!0),P&&M.indexOf(L)===-1&&(M.push(L),J=!0),J&&F&&P&&A.push(S+L)}}}}}}}),ud=i({"src/components/selections/index.js"(V,$){var h=Zf(),c=QS();$.exports={moduleType:"component",name:"selections",layoutAttributes:Ey(),supplyLayoutDefaults:t5(),supplyDrawNewSelectionDefaults:r5(),includeBasePlot:Jf()("selections"),draw:h.draw,drawOne:h.drawOne,reselect:c.reselect,prepSelect:c.prepSelect,clearOutline:c.clearOutline,clearSelectionsCache:c.clearSelectionsCache,selectOnClick:c.selectOnClick}}}),n5=i({"src/plots/cartesian/dragbox.js"(V,$){var h=f(),c=_r(),u=c.numberFormat,p=xt(),v=Qu(),m=xn(),g=c.strTranslate,w=ia(),o=ut(),T=oi(),y=so(),k=ji(),D=Fo(),M=Ys(),A=jl(),C=A.selectingOrDrawing,j=A.freeMode,b=na().FROM_TL,S=iu(),L=ld().redrawReglTraces,F=xi(),P=Ur().getFromId,J=ud().prepSelect,H=ud().clearOutline,Y=ud().selectOnClick,Z=El(),z=Yr(),q=z.MINDRAG,X=z.MINZOOM,K=!0;function ee(ie,xe,_e,ke,Pe,Ge,Je,yt){var lt=ie._fullLayout._zoomlayer,mt=Je+yt==="nsew",Ce=(Je+yt).length===1,Ie,Se,Be,rt,ht,Lt,Ct,zt,Bt,Ft,nr,_t,rr,pr,Yt,sr,ze,Ye,$e,he,je,Ne,Re;_e+=xe.yaxis._shift;function nt(){if(Ie=xe.xaxis,Se=xe.yaxis,Bt=Ie._length,Ft=Se._length,Ct=Ie._offset,zt=Se._offset,Be={},Be[Ie._id]=Ie,rt={},rt[Se._id]=Se,Je&&yt)for(var Xe=xe.overlays,Qe=0;Qe<Xe.length;Qe++){var st=Xe[Qe].xaxis;Be[st._id]=st;var At=Xe[Qe].yaxis;rt[At._id]=At}ht=oe(Be),Lt=oe(rt),rr=W(ht,yt),pr=W(Lt,Je),Yt=!pr&&!rr,_t=R(ie,ie._fullLayout._axisMatchGroups,Be,rt),nr=R(ie,ie._fullLayout._axisConstraintGroups,Be,rt,_t);var it=nr.isSubplotConstrained||_t.isSubplotConstrained;sr=yt||it,ze=Je||it;var bt=ie._fullLayout;Ye=bt._has("scattergl"),$e=bt._has("splom"),he=bt._has("svg")}nt();var at=be(pr+rr,ie._fullLayout.dragmode,mt),dt=le(xe,Je+yt+"drag",at,_e,ke,Pe,Ge);if(Yt&&!mt)return dt.onmousedown=null,dt.style.pointerEvents="none",dt;var Mt={element:dt,gd:ie,plotinfo:xe};Mt.prepFn=function(Xe,Qe,st){var At=Mt.dragmode,it=ie._fullLayout.dragmode;it!==At&&(Mt.dragmode=it),nt(),Ne=ie._fullLayout._invScaleX,Re=ie._fullLayout._invScaleY,Yt||(mt?Xe.shiftKey?it==="pan"?it="zoom":C(it)||(it="pan"):Xe.ctrlKey&&(it="pan"):it="pan"),j(it)?Mt.minDrag=1:Mt.minDrag=void 0,C(it)?(Mt.xaxes=ht,Mt.yaxes=Lt,J(Xe,Qe,st,Mt,it)):(Mt.clickFn=ot,C(At)&&Nt(),Yt||(it==="zoom"?(Mt.moveFn=Or,Mt.doneFn=Er,Mt.minDrag=1,Wr(Xe,Qe,st)):it==="pan"&&(Mt.moveFn=pn,Mt.doneFn=Cn))),ie._fullLayout._redrag=function(){var bt=ie._dragdata;if(bt&&bt.element===dt){var Tt=ie._fullLayout.dragmode;C(Tt)||(nt(),we([0,0,Bt,Ft]),Mt.moveFn(bt.dx,bt.dy))}}};function Nt(){Mt.plotinfo.selection=!1,H(ie)}function ot(Xe,Qe){var st=Mt.gd;if(st._fullLayout._activeShapeIndex>=0){st._fullLayout._deactivateShape(st);return}var At=st._fullLayout.clickmode;if(ae(st),Xe===2&&!Ce&&gr(),mt)At.indexOf("select")>-1&&Y(Qe,st,ht,Lt,xe.id,Mt),At.indexOf("event")>-1&&y.click(st,Qe,xe.id);else if(Xe===1&&Ce){var it=Je?Se:Ie,bt=Je==="s"||yt==="w"?0:1,Tt=it._name+".range["+bt+"]",Rt=ce(it,bt),tr="left",ur="middle";if(it.fixedrange)return;Je?(ur=Je==="n"?"top":"bottom",it.side==="right"&&(tr="right")):yt==="e"&&(tr="right"),st._context.showAxisRangeEntryBoxes&&h.select(dt).call(w.makeEditable,{gd:st,immediate:!0,background:st._fullLayout.paper_bgcolor,text:String(Rt),fill:it.tickfont?it.tickfont.color:"#444",horizontalAlign:tr,verticalAlign:ur}).on("edit",function(fr){var Rr=it.d2r(fr);Rr!==void 0&&m.call("_guiRelayout",st,Tt,Rr)})}}M.init(Mt);var jt,Ut,Gt,Tr,Dr,Vr,Mr,Fr,xr,br;function Wr(Xe,Qe,st){var At=dt.getBoundingClientRect();jt=Qe-At.left,Ut=st-At.top,ie._fullLayout._calcInverseTransform(ie);var it=c.apply3DTransform(ie._fullLayout._invTransform)(jt,Ut);jt=it[0],Ut=it[1],Gt={l:jt,r:jt,w:0,t:Ut,b:Ut,h:0},Tr=ie._hmpixcount?ie._hmlumcount/ie._hmpixcount:p(ie._fullLayout.plot_bgcolor).getLuminance(),Dr="M0,0H"+Bt+"V"+Ft+"H0V0",Vr=!1,Mr="xy",br=!1,Fr=Le(lt,Tr,Ct,zt,Dr),xr=Ae(lt,Ct,zt)}function Or(Xe,Qe){if(ie._transitioningWithDuration)return!1;var st=Math.max(0,Math.min(Bt,Ne*Xe+jt)),At=Math.max(0,Math.min(Ft,Re*Qe+Ut)),it=Math.abs(st-jt),bt=Math.abs(At-Ut);Gt.l=Math.min(jt,st),Gt.r=Math.max(jt,st),Gt.t=Math.min(Ut,At),Gt.b=Math.max(Ut,At);function Tt(){Mr="",Gt.r=Gt.l,Gt.t=Gt.b,xr.attr("d","M0,0Z")}if(nr.isSubplotConstrained)it>X||bt>X?(Mr="xy",it/Bt>bt/Ft?(bt=it*Ft/Bt,Ut>At?Gt.t=Ut-bt:Gt.b=Ut+bt):(it=bt*Bt/Ft,jt>st?Gt.l=jt-it:Gt.r=jt+it),xr.attr("d",re(Gt))):Tt();else if(_t.isSubplotConstrained)if(it>X||bt>X){Mr="xy";var Rt=Math.min(Gt.l/Bt,(Ft-Gt.b)/Ft),tr=Math.max(Gt.r/Bt,(Ft-Gt.t)/Ft);Gt.l=Rt*Bt,Gt.r=tr*Bt,Gt.b=(1-Rt)*Ft,Gt.t=(1-tr)*Ft,xr.attr("d",re(Gt))}else Tt();else!pr||bt<Math.min(Math.max(it*.6,q),X)?it<q||!rr?Tt():(Gt.t=0,Gt.b=Ft,Mr="x",xr.attr("d",Q(Gt,Ut))):!rr||it<Math.min(bt*.6,X)?(Gt.l=0,Gt.r=Bt,Mr="y",xr.attr("d",U(Gt,jt))):(Mr="xy",xr.attr("d",re(Gt)));Gt.w=Gt.r-Gt.l,Gt.h=Gt.b-Gt.t,Mr&&(br=!0),ie._dragged=br,We(Fr,xr,Gt,Dr,Vr,Tr),qr(),ie.emit("plotly_relayouting",je),Vr=!0}function qr(){je={},(Mr==="xy"||Mr==="x")&&(de(ht,Gt.l/Bt,Gt.r/Bt,je,nr.xaxes),mn("x",je)),(Mr==="xy"||Mr==="y")&&(de(Lt,(Ft-Gt.b)/Ft,(Ft-Gt.t)/Ft,je,nr.yaxes),mn("y",je))}function Er(){qr(),ae(ie),Cn(),G(ie)}var vr=[0,0,Bt,Ft],Ir=null,ln=z.REDRAWDELAY,kn=xe.mainplot?ie._fullLayout._plots[xe.mainplot]:xe;function Hr(Xe){if(!ie._context._scrollZoom.cartesian&&!ie._fullLayout._enablescrollzoom)return;if(Nt(),ie._transitioningWithDuration){Xe.preventDefault(),Xe.stopPropagation();return}nt(),clearTimeout(Ir);var Qe=-Xe.deltaY;if(isFinite(Qe)||(Qe=Xe.wheelDelta/10),!isFinite(Qe)){c.log("Did not find wheel motion attributes: ",Xe);return}var st=Math.exp(-Math.min(Math.max(Qe,-20),20)/200),At=kn.draglayer.select(".nsewdrag").node().getBoundingClientRect(),it=(Xe.clientX-At.left)/At.width,bt=(At.bottom-Xe.clientY)/At.height,Tt;function Rt(tr,ur,fr){if(tr.fixedrange)return;var Rr=c.simpleMap(tr.range,tr.r2l),wr=Rr[0]+(Rr[1]-Rr[0])*ur;function Gr(Lr){return tr.l2r(wr+(Lr-wr)*fr)}tr.range=Rr.map(Gr)}if(sr){for(yt||(it=.5),Tt=0;Tt<ht.length;Tt++)Rt(ht[Tt],it,st);mn("x"),vr[2]*=st,vr[0]+=vr[2]*it*(1/st-1)}if(ze){for(Je||(bt=.5),Tt=0;Tt<Lt.length;Tt++)Rt(Lt[Tt],bt,st);mn("y"),vr[3]*=st,vr[1]+=vr[3]*(1-bt)*(1/st-1)}we(vr),Un(),ie.emit("plotly_relayouting",je),Ir=setTimeout(function(){ie._fullLayout&&(vr=[0,0,Bt,Ft],Cn())},ln),Xe.preventDefault()}Je.length*yt.length!==1&&B(dt,Hr);function pn(Xe,Qe){if(Xe=Xe*Ne,Qe=Qe*Re,ie._transitioningWithDuration)return;if(ie._fullLayout._replotting=!0,rr==="ew"||pr==="ns"){var st=rr?-Xe:0,At=pr?-Qe:0;if(_t.isSubplotConstrained){if(rr&&pr){var it=(Xe/Bt-Qe/Ft)/2;Xe=it*Bt,Qe=-it*Ft,st=-Xe,At=-Qe}pr?st=-At*Bt/Ft:At=-st*Ft/Bt}rr&&(ve(ht,Xe),mn("x")),pr&&(ve(Lt,Qe),mn("y")),we([st,At,Bt,Ft]),Un(),ie.emit("plotly_relayouting",je);return}function bt(Gr,Lr,$r){for(var Xr=1-Lr,jn,bn,pi=0;pi<Gr.length;pi++){var Gn=Gr[pi];if(!Gn.fixedrange){jn=Gn,bn=Gn._rl[Xr]+(Gn._rl[Lr]-Gn._rl[Xr])/pe($r/Gn._length);var ei=Gn.l2r(bn);ei!==!1&&ei!==void 0&&(Gn.range[Lr]=ei)}}return jn._length*(jn._rl[Lr]-bn)/(jn._rl[Lr]-jn._rl[Xr])}var Tt=rr==="w"==(pr==="n")?1:-1;if(rr&&pr&&(nr.isSubplotConstrained||_t.isSubplotConstrained)){var Rt=(Xe/Bt+Tt*Qe/Ft)/2;Xe=Rt*Bt,Qe=Tt*Rt*Ft}var tr,ur;if(rr==="w"?Xe=bt(ht,0,Xe):rr==="e"?Xe=bt(ht,1,-Xe):rr||(Xe=0),pr==="n"?Qe=bt(Lt,1,Qe):pr==="s"?Qe=bt(Lt,0,-Qe):pr||(Qe=0),tr=rr==="w"?Xe:0,ur=pr==="n"?Qe:0,nr.isSubplotConstrained&&!_t.isSubplotConstrained||_t.isSubplotConstrained&&rr&&pr&&Tt>0){var fr;if(_t.isSubplotConstrained||!rr&&pr.length===1){for(fr=0;fr<ht.length;fr++)ht[fr].range=ht[fr]._r.slice(),Z(ht[fr],1-Qe/Ft);Xe=Qe*Bt/Ft,tr=Xe/2}if(_t.isSubplotConstrained||!pr&&rr.length===1){for(fr=0;fr<Lt.length;fr++)Lt[fr].range=Lt[fr]._r.slice(),Z(Lt[fr],1-Xe/Bt);Qe=Xe*Ft/Bt,ur=Qe/2}}(!_t.isSubplotConstrained||!pr)&&mn("x"),(!_t.isSubplotConstrained||!rr)&&mn("y");var Rr=Bt-Xe,wr=Ft-Qe;_t.isSubplotConstrained&&!(rr&&pr)&&(rr?(ur=tr?0:Xe*Ft/Bt,wr=Rr*Ft/Bt):(tr=ur?0:Qe*Bt/Ft,Rr=wr*Bt/Ft)),we([tr,ur,Rr,wr]),Un(),ie.emit("plotly_relayouting",je)}function mn(Xe,Qe){for(var st=_t.isSubplotConstrained?{x:Lt,y:ht}[Xe]:_t[Xe+"axes"],At=_t.isSubplotConstrained?{x:ht,y:Lt}[Xe]:[],it=0;it<st.length;it++){var bt=st[it],Tt=bt._id,Rt=_t.xLinks[Tt]||_t.yLinks[Tt],tr=At[0]||Be[Rt]||rt[Rt];tr&&(Qe?(Qe[bt._name+".range[0]"]=Qe[tr._name+".range[0]"],Qe[bt._name+".range[1]"]=Qe[tr._name+".range[1]"]):bt.range=tr.range.slice())}}function Un(){var Xe=[],Qe;function st(Tt){for(Qe=0;Qe<Tt.length;Qe++)Tt[Qe].fixedrange||Xe.push(Tt[Qe]._id)}function At(Tt,Rt){for(Qe=0;Qe<Tt.length;Qe++){var tr=Tt[Qe],ur=tr[Rt];!tr.fixedrange&&ur.tickmode==="sync"&&Xe.push(ur._id)}}for(sr&&(st(ht),st(nr.xaxes),st(_t.xaxes),At(xe.overlays,"xaxis")),ze&&(st(Lt),st(nr.yaxes),st(_t.yaxes),At(xe.overlays,"yaxis")),je={},Qe=0;Qe<Xe.length;Qe++){var it=Xe[Qe],bt=P(ie,it);k.drawOne(ie,bt,{skipTitle:!0}),je[bt._name+".range[0]"]=bt.range[0],je[bt._name+".range[1]"]=bt.range[1]}k.redrawComponents(ie,Xe)}function gr(){if(!ie._transitioningWithDuration){var Xe=ie._context.doubleClick,Qe=[];rr&&(Qe=Qe.concat(ht)),pr&&(Qe=Qe.concat(Lt)),_t.xaxes&&(Qe=Qe.concat(_t.xaxes)),_t.yaxes&&(Qe=Qe.concat(_t.yaxes));var st={},At,it;if(Xe==="reset+autosize")for(Xe="autosize",it=0;it<Qe.length;it++){At=Qe[it];var bt=At._rangeInitial0,Tt=At._rangeInitial1,Rt=bt!==void 0||Tt!==void 0;if(Rt&&(bt!==void 0&&bt!==At.range[0]||Tt!==void 0&&Tt!==At.range[1])||!Rt&&At.autorange!==!0){Xe="reset";break}}if(Xe==="autosize")for(it=0;it<Qe.length;it++)At=Qe[it],At.fixedrange||(st[At._name+".autorange"]=!0);else if(Xe==="reset"){for((rr||nr.isSubplotConstrained)&&(Qe=Qe.concat(nr.xaxes)),pr&&!nr.isSubplotConstrained&&(Qe=Qe.concat(nr.yaxes)),nr.isSubplotConstrained&&(rr?pr||(Qe=Qe.concat(Lt)):Qe=Qe.concat(ht)),it=0;it<Qe.length;it++)if(At=Qe[it],!At.fixedrange){var tr=At._name,ur=At._autorangeInitial;At._rangeInitial0===void 0&&At._rangeInitial1===void 0?st[tr+".autorange"]=!0:At._rangeInitial0===void 0?(st[tr+".autorange"]=ur,st[tr+".range"]=[null,At._rangeInitial1]):At._rangeInitial1===void 0?(st[tr+".range"]=[At._rangeInitial0,null],st[tr+".autorange"]=ur):st[tr+".range"]=[At._rangeInitial0,At._rangeInitial1]}}ie.emit("plotly_doubleclick",null),m.call("_guiRelayout",ie,st)}}function Cn(){we([0,0,Bt,Ft]),c.syncOrAsync([F.previousPromises,function(){ie._fullLayout._replotting=!1,m.call("_guiRelayout",ie,je)}],ie)}function we(Xe){var Qe=ie._fullLayout,st=Qe._plots,At=Qe._subplots.cartesian,it,bt,Tt,Rt;if($e&&m.subplotsRegistry.splom.drag(ie),Ye){for(it=0;it<At.length;it++)if(bt=st[At[it]],Tt=bt.xaxis,Rt=bt.yaxis,bt._scene){Tt.limitRange&&Tt.limitRange(),Rt.limitRange&&Rt.limitRange();var tr=c.simpleMap(Tt.range,Tt.r2l),ur=c.simpleMap(Rt.range,Rt.r2l);bt._scene.update({range:[tr[0],ur[0],tr[1],ur[1]]})}}if(($e||Ye)&&(S(ie),L(ie)),he){var fr=Xe[2]/Ie._length,Rr=Xe[3]/Se._length;for(it=0;it<At.length;it++){bt=st[At[it]],Tt=bt.xaxis,Rt=bt.yaxis;var wr=(sr||_t.isSubplotConstrained)&&!Tt.fixedrange&&Be[Tt._id],Gr=(ze||_t.isSubplotConstrained)&&!Rt.fixedrange&&rt[Rt._id],Lr,$r,Xr,jn;if(wr?(Lr=fr,Xr=yt||_t.isSubplotConstrained?Xe[0]:ft(Tt,Lr)):_t.xaHash[Tt._id]?(Lr=fr,Xr=Xe[0]*Tt._length/Ie._length):_t.yaHash[Tt._id]?(Lr=Rr,Xr=pr==="ns"?-Xe[1]*Tt._length/Se._length:ft(Tt,Lr,{n:"top",s:"bottom"}[pr])):(Lr=ge(Tt,fr,Rr),Xr=pt(Tt,Lr)),Lr>1&&(Tt.maxallowed!==void 0&&sr===(Tt.range[0]<Tt.range[1]?"e":"w")||Tt.minallowed!==void 0&&sr===(Tt.range[0]<Tt.range[1]?"w":"e"))&&(Lr=1,Xr=0),Gr?($r=Rr,jn=Je||_t.isSubplotConstrained?Xe[1]:ft(Rt,$r)):_t.yaHash[Rt._id]?($r=Rr,jn=Xe[1]*Rt._length/Se._length):_t.xaHash[Rt._id]?($r=fr,jn=rr==="ew"?-Xe[0]*Rt._length/Ie._length:ft(Rt,$r,{e:"right",w:"left"}[rr])):($r=ge(Rt,fr,Rr),jn=pt(Rt,$r)),$r>1&&(Rt.maxallowed!==void 0&&ze===(Rt.range[0]<Rt.range[1]?"n":"s")||Rt.minallowed!==void 0&&ze===(Rt.range[0]<Rt.range[1]?"s":"n"))&&($r=1,jn=0),!(!Lr&&!$r)){Lr||(Lr=1),$r||($r=1);var bn=Tt._offset-Xr/Lr,pi=Rt._offset-jn/$r;bt.clipRect.call(T.setTranslate,Xr,jn).call(T.setScale,Lr,$r),bt.plot.call(T.setTranslate,bn,pi).call(T.setScale,1/Lr,1/$r),(Lr!==bt.xScaleFactor||$r!==bt.yScaleFactor)&&(T.setPointGroupScale(bt.zoomScalePts,Lr,$r),T.setTextPointsScale(bt.zoomScaleTxt,Lr,$r)),T.hideOutsideRangePoints(bt.clipOnAxisFalseTraces,bt),bt.xScaleFactor=Lr,bt.yScaleFactor=$r}}}}function ge(Xe,Qe,st){return Xe.fixedrange?0:sr&&nr.xaHash[Xe._id]?Qe:ze&&(nr.isSubplotConstrained?nr.xaHash:nr.yaHash)[Xe._id]?st:0}function pt(Xe,Qe){return Qe?(Xe.range=Xe._r.slice(),Z(Xe,Qe),ft(Xe,Qe)):0}function ft(Xe,Qe,st){return Xe._length*(1-Qe)*b[st||Xe.constraintoward||"middle"]}return dt}function ne(ie,xe,_e,ke){var Pe=c.ensureSingle(ie.draglayer,xe,_e,function(Ge){Ge.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ie.id)});return Pe.call(D,ke),Pe.node()}function le(ie,xe,_e,ke,Pe,Ge,Je){var yt=ne(ie,"rect",xe,_e);return h.select(yt).call(T.setRect,ke,Pe,Ge,Je),yt}function W(ie,xe){for(var _e=0;_e<ie.length;_e++)if(!ie[_e].fixedrange)return xe;return""}function ce(ie,xe){var _e=ie.range[xe],ke=Math.abs(_e-ie.range[1-xe]),Pe;return ie.type==="date"?_e:ie.type==="log"?(Pe=Math.ceil(Math.max(0,-Math.log(ke)/Math.LN10))+3,u("."+Pe+"g")(Math.pow(10,_e))):(Pe=Math.floor(Math.log(Math.abs(_e))/Math.LN10)-Math.floor(Math.log(ke)/Math.LN10)+4,u("."+String(Pe)+"g")(_e))}function de(ie,xe,_e,ke,Pe){for(var Ge=0;Ge<ie.length;Ge++){var Je=ie[Ge];if(!Je.fixedrange)if(Je.rangebreaks){var yt=Je._id.charAt(0)==="y",lt=yt?1-xe:xe,mt=yt?1-_e:_e;ke[Je._name+".range[0]"]=Je.l2r(Je.p2l(lt*Je._length)),ke[Je._name+".range[1]"]=Je.l2r(Je.p2l(mt*Je._length))}else{var Ce=Je._rl[0],Ie=Je._rl[1]-Ce;ke[Je._name+".range[0]"]=Je.l2r(Ce+Ie*xe),ke[Je._name+".range[1]"]=Je.l2r(Ce+Ie*_e)}}if(Pe&&Pe.length){var Se=(xe+(1-_e))/2;de(Pe,Se,1-Se,ke,[])}}function ve(ie,xe){for(var _e=0;_e<ie.length;_e++){var ke=ie[_e];if(!ke.fixedrange){if(ke.rangebreaks){var Pe=0,Ge=ke._length,Je=ke.p2l(Pe+xe)-ke.p2l(Pe),yt=ke.p2l(Ge+xe)-ke.p2l(Ge),lt=(Je+yt)/2;ke.range=[ke.l2r(ke._rl[0]-lt),ke.l2r(ke._rl[1]-lt)]}else ke.range=[ke.l2r(ke._rl[0]-xe/ke._m),ke.l2r(ke._rl[1]-xe/ke._m)];ke.limitRange&&ke.limitRange()}}}function pe(ie){return 1-(ie>=0?Math.min(ie,.9):1/(1/Math.max(ie,-.3)+3.222))}function be(ie,xe,_e){return ie?ie==="nsew"?_e?"":xe==="pan"?"move":"crosshair":ie.toLowerCase()+"-resize":"pointer"}function Le(ie,xe,_e,ke,Pe){return ie.append("path").attr("class","zoombox").style({fill:xe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",g(_e,ke)).attr("d",Pe+"Z")}function Ae(ie,xe,_e){return ie.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",g(xe,_e)).attr("d","M0,0Z")}function We(ie,xe,_e,ke,Pe,Ge){ie.attr("d",ke+"M"+_e.l+","+_e.t+"v"+_e.h+"h"+_e.w+"v-"+_e.h+"h-"+_e.w+"Z"),te(ie,xe,Pe,Ge)}function te(ie,xe,_e,ke){_e||(ie.transition().style("fill",ke>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),xe.transition().style("opacity",1).duration(200))}function ae(ie){h.select(ie).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function G(ie){K&&ie.data&&ie._context.showTips&&(c.notifier(c._(ie,"Double-click to zoom back out"),"long"),K=!1)}function Q(ie,xe){return"M"+(ie.l-.5)+","+(xe-X-.5)+"h-3v"+(2*X+1)+"h3ZM"+(ie.r+.5)+","+(xe-X-.5)+"h3v"+(2*X+1)+"h-3Z"}function U(ie,xe){return"M"+(xe-X-.5)+","+(ie.t-.5)+"v-3h"+(2*X+1)+"v3ZM"+(xe-X-.5)+","+(ie.b+.5)+"v3h"+(2*X+1)+"v-3Z"}function re(ie){var xe=Math.floor(Math.min(ie.b-ie.t,ie.r-ie.l,X)/2);return"M"+(ie.l-3.5)+","+(ie.t-.5+xe)+"h3v"+-xe+"h"+xe+"v-3h-"+(xe+3)+"ZM"+(ie.r+3.5)+","+(ie.t-.5+xe)+"h-3v"+-xe+"h"+-xe+"v-3h"+(xe+3)+"ZM"+(ie.r+3.5)+","+(ie.b+.5-xe)+"h-3v"+xe+"h"+-xe+"v3h"+(xe+3)+"ZM"+(ie.l-3.5)+","+(ie.b+.5-xe)+"h3v"+xe+"h"+xe+"v3h-"+(xe+3)+"Z"}function R(ie,xe,_e,ke,Pe){for(var Ge=!1,Je={},yt={},lt,mt,Ce,Ie,Se=(Pe||{}).xaHash,Be=(Pe||{}).yaHash,rt=0;rt<xe.length;rt++){var ht=xe[rt];for(lt in _e)if(ht[lt]){for(Ce in ht)!(Pe&&(Se[Ce]||Be[Ce]))&&!(Ce.charAt(0)==="x"?_e:ke)[Ce]&&(Je[Ce]=lt);for(mt in ke)!(Pe&&(Se[mt]||Be[mt]))&&ht[mt]&&(Ge=!0)}for(mt in ke)if(ht[mt])for(Ie in ht)!(Pe&&(Se[Ie]||Be[Ie]))&&!(Ie.charAt(0)==="x"?_e:ke)[Ie]&&(yt[Ie]=mt)}Ge&&(c.extendFlat(Je,yt),yt={});var Lt={},Ct=[];for(Ce in Je){var zt=P(ie,Ce);Ct.push(zt),Lt[zt._id]=zt}var Bt={},Ft=[];for(Ie in yt){var nr=P(ie,Ie);Ft.push(nr),Bt[nr._id]=nr}return{xaHash:Lt,yaHash:Bt,xaxes:Ct,yaxes:Ft,xLinks:Je,yLinks:yt,isSubplotConstrained:Ge}}function B(ie,xe){if(!v)ie.onwheel!==void 0?ie.onwheel=xe:ie.onmousewheel!==void 0?ie.onmousewheel=xe:ie.isAddedWheelEvent||(ie.isAddedWheelEvent=!0,ie.addEventListener("wheel",xe,{passive:!1}));else{var _e=ie.onwheel!==void 0?"wheel":"mousewheel";ie._onwheel&&ie.removeEventListener(_e,ie._onwheel),ie._onwheel=xe,ie.addEventListener(_e,xe,{passive:!1})}}function oe(ie){var xe=[];for(var _e in ie)xe.push(ie[_e]);return xe}$.exports={makeDragBox:ee,makeDragger:ne,makeRectDragger:le,makeZoombox:Le,makeCorners:Ae,updateZoombox:We,xyCorners:re,transitionZoombox:te,removeZoombox:ae,showDoubleClickNotifier:G,attachWheelEventHandler:B}}}),Dy=i({"src/plots/cartesian/graph_interact.js"(V){var $=f(),h=so(),c=Ys(),u=Fo(),p=n5().makeDragBox,v=Yr().DRAGGERSIZE;V.initInteractions=function(g){var w=g._fullLayout;if(g._context.staticPlot){$.select(g).selectAll(".drag").remove();return}if(!(!w._has("cartesian")&&!w._has("splom"))){var o=Object.keys(w._plots||{}).sort(function(y,k){if((w._plots[y].mainplot&&!0)===(w._plots[k].mainplot&&!0)){var D=y.split("y"),M=k.split("y");return D[0]===M[0]?Number(D[1]||1)-Number(M[1]||1):Number(D[0]||1)-Number(M[0]||1)}return w._plots[y].mainplot?1:-1});o.forEach(function(y){var k=w._plots[y],D=k.xaxis,M=k.yaxis;if(!k.mainplot){var A=p(g,k,D._offset,M._offset,D._length,M._length,"ns","ew");A.onmousemove=function(b){g._fullLayout._rehover=function(){g._fullLayout._hoversubplot===y&&g._fullLayout._plots[y]&&h.hover(g,b,y)},h.hover(g,b,y),g._fullLayout._lasthover=A,g._fullLayout._hoversubplot=y},A.onmouseout=function(b){g._dragging||(g._fullLayout._hoversubplot=null,c.unhover(g,b))},g._context.showAxisDragHandles&&(p(g,k,D._offset-v,M._offset-v,v,v,"n","w"),p(g,k,D._offset+D._length,M._offset-v,v,v,"n","e"),p(g,k,D._offset-v,M._offset+M._length,v,v,"s","w"),p(g,k,D._offset+D._length,M._offset+M._length,v,v,"s","e"))}if(g._context.showAxisDragHandles){if(y===D._mainSubplot){var C=D._mainLinePosition;D.side==="top"&&(C-=v),p(g,k,D._offset+D._length*.1,C,D._length*.8,v,"","ew"),p(g,k,D._offset,C,D._length*.1,v,"","w"),p(g,k,D._offset+D._length*.9,C,D._length*.1,v,"","e")}if(y===M._mainSubplot){var j=M._mainLinePosition;M.side!=="right"&&(j-=v),p(g,k,j,M._offset+M._length*.1,v,M._length*.8,"ns",""),p(g,k,j,M._offset+M._length*.9,v,M._length*.1,"s",""),p(g,k,j,M._offset,v,M._length*.1,"n","")}}});var T=w._hoverlayer.node();T.onmousemove=function(y){y.target=g._fullLayout._lasthover,h.hover(g,y,w._hoversubplot)},T.onclick=function(y){y.target=g._fullLayout._lasthover,h.click(g,y)},T.onmousedown=function(y){g._fullLayout._lasthover.onmousedown(y)},V.updateFx(g)}},V.updateFx=function(m){var g=m._fullLayout,w=g.dragmode==="pan"?"move":"crosshair";u(g._draggers,w)}}}),i5=i({"src/plot_api/container_array_match.js"(V,$){var h=xn();$.exports=function(u){for(var p=h.layoutArrayContainers,v=h.layoutArrayRegexes,m=u.split("[")[0],g,w,o=0;o<v.length;o++)if(w=u.match(v[o]),w&&w.index===0){g=w[0];break}if(g||(g=p[p.indexOf(m)]),!g)return!1;var T=u.substr(g.length);return T?(w=T.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),w?{array:g,index:Number(w[1]),property:w[3]||""}:!1):{array:g,index:"",property:""}}}}),a5=i({"src/plot_api/manage_arrays.js"(V){var $=Ve(),h=kt(),c=er(),u=en().sorterAsc,p=xn();V.containerArrayMatch=i5();var v=V.isAddVal=function(w){return w==="add"||$(w)},m=V.isRemoveVal=function(w){return w===null||w==="remove"};V.applyContainerArrayChanges=function(w,o,T,y,k){var D=o.astr,M=p.getComponentMethod(D,"supplyLayoutDefaults"),A=p.getComponentMethod(D,"draw"),C=p.getComponentMethod(D,"drawOne"),j=y.replot||y.recalc||M===h||A===h,b=w.layout,S=w._fullLayout;if(T[""]){Object.keys(T).length>1&&c.warn("Full array edits are incompatible with other edits",D);var L=T[""][""];if(m(L))o.set(null);else if(Array.isArray(L))o.set(L);else return c.warn("Unrecognized full array edit value",D,L),!0;return j?!1:(M(b,S),A(w),!0)}var F=Object.keys(T).map(Number).sort(u),P=o.get(),J=P||[],H=k(S,D).get(),Y=[],Z=-1,z=J.length,q,X,K,ee,ne,le,W,ce;for(q=0;q<F.length;q++){if(K=F[q],ee=T[K],ne=Object.keys(ee),le=ee[""],W=v(le),K<0||K>J.length-(W?0:1)){c.warn("index out of range",D,K);continue}if(le!==void 0)ne.length>1&&c.warn("Insertion & removal are incompatible with edits to the same index.",D,K),m(le)?Y.push(K):W?(le==="add"&&(le={}),J.splice(K,0,le),H&&H.splice(K,0,{})):c.warn("Unrecognized full object edit value",D,K,le),Z===-1&&(Z=K);else for(X=0;X<ne.length;X++)ce=D+"["+K+"].",k(J[K],ne[X],ce).set(ee[ne[X]])}for(q=Y.length-1;q>=0;q--)J.splice(Y[q],1),H&&H.splice(Y[q],1);if(J.length?P||o.set(J):o.set(null),j)return!1;if(M(b,S),C!==h){var de;if(Z===-1)de=F;else{for(z=Math.max(J.length,z),de=[],q=0;q<F.length&&(K=F[q],!(K>=Z));q++)de.push(K);for(q=Z;q<z;q++)de.push(q)}for(q=0;q<de.length;q++)C(w,de[q])}else A(w);return!0}}}),s5=i({"src/plot_api/helpers.js"(V){var $=fe();va();var h=xn(),c=_r(),u=xi(),p=Ur(),v=ut(),m=p.cleanId,g=p.getFromTrace,w=h.traceIs;V.clearPromiseQueue=function(j){Array.isArray(j._promises)&&j._promises.length>0&&c.log("Clearing previous rejected promises from queue."),j._promises=[]},V.cleanLayout=function(j){var b;j||(j={}),j.xaxis1&&(j.xaxis||(j.xaxis=j.xaxis1),delete j.xaxis1),j.yaxis1&&(j.yaxis||(j.yaxis=j.yaxis1),delete j.yaxis1),j.scene1&&(j.scene||(j.scene=j.scene1),delete j.scene1);var S=(u.subplotsRegistry.cartesian||{}).attrRegex;(u.subplotsRegistry.polar||{}).attrRegex,(u.subplotsRegistry.ternary||{}).attrRegex,(u.subplotsRegistry.gl3d||{}).attrRegex;var L=Object.keys(j);for(b=0;b<L.length;b++){var F=L[b];if(S&&S.test(F)){var P=j[F];P.anchor&&P.anchor!=="free"&&(P.anchor=m(P.anchor)),P.overlaying&&(P.overlaying=m(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),P.insiderange&&delete P.range,delete P.islog,delete P.isdate,delete P.categories,D(P,"domain")&&delete P.domain}}var J=Array.isArray(j.annotations)?j.annotations.length:0;for(b=0;b<J;b++){var H=j.annotations[b];c.isPlainObject(H)&&(o(H,"xref"),o(H,"yref"))}var Y=Array.isArray(j.shapes)?j.shapes.length:0;for(b=0;b<Y;b++){var Z=j.shapes[b];c.isPlainObject(Z)&&(o(Z,"xref"),o(Z,"yref"))}var z=Array.isArray(j.images)?j.images.length:0;for(b=0;b<z;b++){var q=j.images[b];c.isPlainObject(q)&&(o(q,"xref"),o(q,"yref"))}var X=j.legend;return X&&(X.x>3?(X.x=1.02,X.xanchor="left"):X.x<-2&&(X.x=-.02,X.xanchor="right"),X.y>3?(X.y=1.02,X.yanchor="bottom"):X.y<-2&&(X.y=-.02,X.yanchor="top")),j.dragmode==="rotate"&&(j.dragmode="orbit"),v.clean(j),j.template&&j.template.layout&&V.cleanLayout(j.template.layout),j};function o(j,b){var S=j[b],L=b.charAt(0);S&&S!=="paper"&&(j[b]=m(S,L,!0))}V.cleanData=function(j){for(var b=0;b<j.length;b++){var S=j[b],L;if(S.type==="histogramy"&&"xbins"in S&&!("ybins"in S)&&(S.ybins=S.xbins,delete S.xbins),S.type==="histogramy"&&V.swapXYData(S),(S.type==="histogramx"||S.type==="histogramy")&&(S.type="histogram"),"scl"in S&&!("colorscale"in S)&&(S.colorscale=S.scl,delete S.scl),"reversescl"in S&&!("reversescale"in S)&&(S.reversescale=S.reversescl,delete S.reversescl),S.xaxis&&(S.xaxis=m(S.xaxis,"x")),S.yaxis&&(S.yaxis=m(S.yaxis,"y")),w(S,"gl3d")&&S.scene&&(S.scene=u.subplotsRegistry.gl3d.cleanId(S.scene)),!w(S,"pie-like")&&!w(S,"bar-like"))if(Array.isArray(S.textposition))for(L=0;L<S.textposition.length;L++)S.textposition[L]=k(S.textposition[L]);else S.textposition&&(S.textposition=k(S.textposition));var F=h.getModule(S);if(F&&F.colorbar){var P=F.colorbar.container,J=P?S[P]:S;J&&J.colorscale&&(J.colorscale==="YIGnBu"&&(J.colorscale="YlGnBu"),J.colorscale==="YIOrRd"&&(J.colorscale="YlOrRd"))}if(S.type==="surface"&&c.isPlainObject(S.contours)){var H=["x","y","z"];for(L=0;L<H.length;L++){var Y=S.contours[H[L]];c.isPlainObject(Y)&&(Y.highlightColor&&(Y.highlightcolor=Y.highlightColor,delete Y.highlightColor),Y.highlightWidth&&(Y.highlightwidth=Y.highlightWidth,delete Y.highlightWidth))}}if(S.type==="candlestick"||S.type==="ohlc"){var Z=(S.increasing||{}).showlegend!==!1,z=(S.decreasing||{}).showlegend!==!1,q=T(S.increasing),X=T(S.decreasing);if(q!==!1&&X!==!1){var K=y(q,X,Z,z);K&&(S.name=K)}else(q||X)&&!S.name&&(S.name=q||X)}D(S,"line")&&delete S.line,"marker"in S&&(D(S.marker,"line")&&delete S.marker.line,D(S,"marker")&&delete S.marker),v.clean(S),S.autobinx&&(delete S.autobinx,delete S.xbins),S.autobiny&&(delete S.autobiny,delete S.ybins)}};function T(j){if(!c.isPlainObject(j))return!1;var b=j.name;return delete j.name,delete j.showlegend,(typeof b=="string"||typeof b=="number")&&String(b)}function y(j,b,S,L){if(S&&!L)return j;if(L&&!S||!j.trim())return b;if(!b.trim())return j;var F=Math.min(j.length,b.length),P;for(P=0;P<F&&j.charAt(P)===b.charAt(P);P++);var J=j.substr(0,P);return J.trim()}function k(j){var b="middle",S="center";return typeof j=="string"&&(j.indexOf("top")!==-1?b="top":j.indexOf("bottom")!==-1&&(b="bottom"),j.indexOf("left")!==-1?S="left":j.indexOf("right")!==-1&&(S="right")),b+" "+S}function D(j,b){return b in j&&typeof j[b]=="object"&&Object.keys(j[b]).length===0}V.swapXYData=function(j){var b;if(c.swapAttrs(j,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(j.z)&&Array.isArray(j.z[0])&&(j.transpose?delete j.transpose:j.transpose=!0),j.error_x&&j.error_y){var S=j.error_y,L="copy_ystyle"in S?S.copy_ystyle:!(S.color||S.thickness||S.width);c.swapAttrs(j,["error_?.copy_ystyle"]),L&&c.swapAttrs(j,["error_?.color","error_?.thickness","error_?.width"])}if(typeof j.hoverinfo=="string"){var F=j.hoverinfo.split("+");for(b=0;b<F.length;b++)F[b]==="x"?F[b]="y":F[b]==="y"&&(F[b]="x");j.hoverinfo=F.join("+")}},V.coerceTraceIndices=function(j,b){if($(b))return[b];if(!Array.isArray(b)||!b.length)return j.data.map(function(F,P){return P});if(Array.isArray(b)){for(var S=[],L=0;L<b.length;L++)c.isIndex(b[L],j.data.length)?S.push(b[L]):c.warn("trace index (",b[L],") is not a number or is out of bounds");return S}return b},V.manageArrayContainers=function(j,b,S){var L=j.obj,F=j.parts,P=F.length,J=F[P-1],H=$(J);if(H&&b===null){var Y=F.slice(0,P-1).join("."),Z=c.nestedProperty(L,Y).get();Z.splice(J,1)}else H&&j.get()===void 0&&j.get()===void 0&&(S[j.astr]=null),j.set(b)};var M=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function A(j){var b=j.search(M);if(b>0)return j.substr(0,b)}V.hasParent=function(j,b){for(var S=A(b);S;){if(S in j)return!0;S=A(S)}return!1};var C=["x","y","z"];V.clearAxisTypes=function(j,b,S){for(var L=0;L<b.length;L++)for(var F=j._fullData[L],P=0;P<3;P++){var J=g(j,F,C[P]);if(J&&J.type!=="log"){var H=J._name,Y=J._id.substr(1);if(Y.substr(0,5)==="scene"){if(S[Y]!==void 0)continue;H=Y+"."+H}var Z=H+".type";S[H]===void 0&&S[Z]===void 0&&c.nestedProperty(j.layout,Z).set(null)}}}}}),Ry=i({"src/plot_api/plot_api.js"(V){var $=f(),h=fe(),c=bs(),u=_r(),p=u.nestedProperty,v=Na(),m=Mi(),g=xn(),w=Dt(),o=xi(),T=ji(),y=Ju(),k=Ps(),D=oi(),M=ut(),A=Dy().initInteractions,C=ns(),j=ud().clearOutline,b=Ht().dfltConfig,S=a5(),L=s5(),F=ld(),P=Ma(),J=Yr().AX_NAME_PATTERN,H=0,Y=5;function Z(he,je,Ne,Re){var nt;if(he=u.getGraphDiv(he),v.init(he),u.isPlainObject(je)){var at=je;je=at.data,Ne=at.layout,Re=at.config,nt=at.frames}var dt=v.triggerHandler(he,"plotly_beforeplot",[je,Ne,Re]);if(dt===!1)return Promise.reject();!je&&!Ne&&!u.isPlotDiv(he)&&u.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",he);function Mt(){if(nt)return V.addFrames(he,nt)}ee(he,Re),Ne||(Ne={}),$.select(he).classed("js-plotly-plot",!0),D.makeTester(),Array.isArray(he._promises)||(he._promises=[]);var Nt=(he.data||[]).length===0&&Array.isArray(je);Array.isArray(je)&&(L.cleanData(je),Nt?he.data=je:he.data.push.apply(he.data,je),he.empty=!1),(!he.layout||Nt)&&(he.layout=L.cleanLayout(Ne)),o.supplyDefaults(he);var ot=he._fullLayout,jt=ot._has("cartesian");ot._replotting=!0,(Nt||ot._shouldCreateBgLayer)&&($e(he),ot._shouldCreateBgLayer&&delete ot._shouldCreateBgLayer),D.initGradients(he),D.initPatterns(he),Nt&&T.saveShowSpikeInitial(he);var Ut=!he.calcdata||he.calcdata.length!==(he._fullData||[]).length;Ut&&o.doCalcdata(he);for(var Gt=0;Gt<he.calcdata.length;Gt++)he.calcdata[Gt][0].trace=he._fullData[Gt];he._context.responsive?he._responsiveChartHandler||(he._responsiveChartHandler=function(){u.isHidden(he)||o.resize(he)},window.addEventListener("resize",he._responsiveChartHandler)):u.clearResponsive(he);var Tr=u.extendFlat({},ot._size),Dr=0;function Vr(){for(var Er=ot._basePlotModules,vr=0;vr<Er.length;vr++)Er[vr].drawFramework&&Er[vr].drawFramework(he);!ot._glcanvas&&ot._has("gl")&&(ot._glcanvas=ot._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Hr){return Hr.key}),ot._glcanvas.enter().append("canvas").attr("class",function(Hr){return"gl-canvas gl-canvas-"+Hr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ir=he._context.plotGlPixelRatio;if(ot._glcanvas){ot._glcanvas.attr("width",ot.width*Ir).attr("height",ot.height*Ir).style("width",ot.width+"px").style("height",ot.height+"px");var ln=ot._glcanvas.data()[0].regl;if(ln&&(Math.floor(ot.width*Ir)!==ln._gl.drawingBufferWidth||Math.floor(ot.height*Ir)!==ln._gl.drawingBufferHeight)){var kn="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Dr)u.error(kn);else return u.log(kn+" Clearing graph and plotting again."),o.cleanPlot([],{},he._fullData,ot),o.supplyDefaults(he),ot=he._fullLayout,o.doCalcdata(he),Dr++,Vr()}}return ot.modebar.orientation==="h"?ot._modebardiv.style("height",null).style("width","100%"):ot._modebardiv.style("width",null).style("height",ot.height+"px"),o.previousPromises(he)}function Mr(){if(o.clearAutoMarginIds(he),F.drawMarginPushers(he),T.allowAutoMargin(he),he._fullLayout.title.text&&he._fullLayout.title.automargin&&o.allowAutoMargin(he,"title.automargin"),ot._has("pie"))for(var Er=he._fullData,vr=0;vr<Er.length;vr++){var Ir=Er[vr];Ir.type==="pie"&&Ir.automargin&&o.allowAutoMargin(he,"pie."+Ir.uid+".automargin")}return o.doAutoMargin(he),o.previousPromises(he)}function Fr(){if(o.didMarginChange(Tr,ot._size))return u.syncOrAsync([Mr,F.layoutStyles],he)}function xr(){if(!Ut){br();return}return u.syncOrAsync([g.getComponentMethod("shapes","calcAutorange"),g.getComponentMethod("annotations","calcAutorange"),br],he)}function br(){he._transitioning||(F.doAutoRangeAndConstraints(he),Nt&&T.saveRangeInitial(he),g.getComponentMethod("rangeslider","calcAutorange")(he))}function Wr(){return T.draw(he,Nt?"":"redraw")}var Or=[o.previousPromises,Mt,Vr,Mr,Fr];jt&&Or.push(xr),Or.push(F.layoutStyles),jt&&Or.push(Wr,function(vr){var Ir=vr._fullLayout._insideTickLabelsUpdaterange;if(Ir)return vr._fullLayout._insideTickLabelsUpdaterange=void 0,xe(vr,Ir).then(function(){T.saveRangeInitial(vr,!0)})}),Or.push(F.drawData,F.finalDraw,A,o.addLinks,o.rehover,o.redrag,o.reselect,o.doAutoMargin,o.previousPromises);var qr=u.syncOrAsync(Or,he);return(!qr||!qr.then)&&(qr=Promise.resolve()),qr.then(function(){return z(he),he})}function z(he){var je=he._fullLayout;je._redrawFromAutoMarginCount?je._redrawFromAutoMarginCount--:he.emit("plotly_afterplot")}function q(he){return u.extendFlat(b,he)}function X(he,je){try{he._fullLayout._paper.style("background",je)}catch(Ne){u.error(Ne)}}function K(he,je){var Ne=M.combine(je,"white");X(he,Ne)}function ee(he,je){if(!he._context){he._context=u.extendDeep({},b);var Ne=$.select("base");he._context._baseUrl=Ne.size()&&Ne.attr("href")?window.location.href.split("#")[0]:""}var Re=he._context,nt,at,dt;if(je){for(at=Object.keys(je),nt=0;nt<at.length;nt++)dt=at[nt],!(dt==="editable"||dt==="edits")&&dt in Re&&(dt==="setBackground"&&je[dt]==="opaque"?Re[dt]=K:Re[dt]=je[dt]);var Mt=je.editable;if(Mt!==void 0)for(Re.editable=Mt,at=Object.keys(Re.edits),nt=0;nt<at.length;nt++)Re.edits[at[nt]]=Mt;if(je.edits)for(at=Object.keys(je.edits),nt=0;nt<at.length;nt++)dt=at[nt],dt in Re.edits&&(Re.edits[dt]=je.edits[dt]);Re._exportedPlot=je._exportedPlot}Re.staticPlot&&(Re.editable=!1,Re.edits={},Re.autosizable=!1,Re.scrollZoom=!1,Re.doubleClick=!1,Re.showTips=!1,Re.showLink=!1,Re.displayModeBar=!1),Re.displayModeBar==="hover"&&!c&&(Re.displayModeBar=!0),(Re.setBackground==="transparent"||typeof Re.setBackground!="function")&&(Re.setBackground=X),Re._hasZeroHeight=Re._hasZeroHeight||he.clientHeight===0,Re._hasZeroWidth=Re._hasZeroWidth||he.clientWidth===0;var Nt=Re.scrollZoom,ot=Re._scrollZoom={};if(Nt===!0)ot.cartesian=1,ot.gl3d=1,ot.geo=1,ot.mapbox=1,ot.map=1;else if(typeof Nt=="string"){var jt=Nt.split("+");for(nt=0;nt<jt.length;nt++)ot[jt[nt]]=1}else Nt!==!1&&(ot.gl3d=1,ot.geo=1,ot.mapbox=1,ot.map=1)}function ne(he){if(he=u.getGraphDiv(he),!u.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he);return L.cleanData(he.data),L.cleanLayout(he.layout),he.calcdata=void 0,V._doPlot(he).then(function(){return he.emit("plotly_redraw"),he})}function le(he,je,Ne,Re){return he=u.getGraphDiv(he),o.cleanPlot([],{},he._fullData||[],he._fullLayout||{}),o.purge(he),V._doPlot(he,je,Ne,Re)}function W(he,je){var Ne=je+1,Re=[],nt,at;for(nt=0;nt<he.length;nt++)at=he[nt],at<0?Re.push(Ne+at):Re.push(at);return Re}function ce(he,je,Ne){var Re,nt;for(Re=0;Re<je.length;Re++){if(nt=je[Re],nt!==parseInt(nt,10))throw new Error("all values in "+Ne+" must be integers");if(nt>=he.data.length||nt<-he.data.length)throw new Error(Ne+" must be valid indices for gd.data.");if(je.indexOf(nt,Re+1)>-1||nt>=0&&je.indexOf(-he.data.length+nt)>-1||nt<0&&je.indexOf(he.data.length+nt)>-1)throw new Error("each index in "+Ne+" must be unique.")}}function de(he,je,Ne){if(!Array.isArray(he.data))throw new Error("gd.data must be an array.");if(typeof je>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(je)||(je=[je]),ce(he,je,"currentIndices"),typeof Ne<"u"&&!Array.isArray(Ne)&&(Ne=[Ne]),typeof Ne<"u"&&ce(he,Ne,"newIndices"),typeof Ne<"u"&&je.length!==Ne.length)throw new Error("current and new indices must be of equal length.")}function ve(he,je,Ne){var Re,nt;if(!Array.isArray(he.data))throw new Error("gd.data must be an array.");if(typeof je>"u")throw new Error("traces must be defined.");for(Array.isArray(je)||(je=[je]),Re=0;Re<je.length;Re++)if(nt=je[Re],typeof nt!="object"||Array.isArray(nt)||nt===null)throw new Error("all values in traces array must be non-array objects");if(typeof Ne<"u"&&!Array.isArray(Ne)&&(Ne=[Ne]),typeof Ne<"u"&&Ne.length!==je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function pe(he,je,Ne,Re){var nt=u.isPlainObject(Re);if(!Array.isArray(he.data))throw new Error("gd.data must be an array");if(!u.isPlainObject(je))throw new Error("update must be a key:value object");if(typeof Ne>"u")throw new Error("indices must be an integer or array of integers");ce(he,Ne,"indices");for(var at in je){if(!Array.isArray(je[at])||je[at].length!==Ne.length)throw new Error("attribute "+at+" must be an array of length equal to indices array length");if(nt&&(!(at in Re)||!Array.isArray(Re[at])||Re[at].length!==je[at].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function be(he,je,Ne,Re){var nt=u.isPlainObject(Re),at=[],dt,Mt,Nt,ot,jt;Array.isArray(Ne)||(Ne=[Ne]),Ne=W(Ne,he.data.length-1);for(var Ut in je)for(var Gt=0;Gt<Ne.length;Gt++){if(dt=he.data[Ne[Gt]],Nt=p(dt,Ut),Mt=Nt.get(),ot=je[Ut][Gt],!u.isArrayOrTypedArray(ot))throw new Error("attribute: "+Ut+" index: "+Gt+" must be an array");if(!u.isArrayOrTypedArray(Mt))throw new Error("cannot extend missing or non-array attribute: "+Ut);if(Mt.constructor!==ot.constructor)throw new Error("cannot extend array with an array of a different type: "+Ut);jt=nt?Re[Ut][Gt]:Re,h(jt)||(jt=-1),at.push({prop:Nt,target:Mt,insert:ot,maxp:Math.floor(jt)})}return at}function Le(he,je,Ne,Re,nt){pe(he,je,Ne,Re);for(var at=be(he,je,Ne,Re),dt={},Mt={},Nt=0;Nt<at.length;Nt++){var ot=at[Nt].prop,jt=at[Nt].maxp,Ut=nt(at[Nt].target,at[Nt].insert,jt);ot.set(Ut[0]),Array.isArray(dt[ot.astr])||(dt[ot.astr]=[]),dt[ot.astr].push(Ut[1]),Array.isArray(Mt[ot.astr])||(Mt[ot.astr]=[]),Mt[ot.astr].push(at[Nt].target.length)}return{update:dt,maxPoints:Mt}}function Ae(he,je){var Ne=new he.constructor(he.length+je.length);return Ne.set(he),Ne.set(je,he.length),Ne}function We(he,je,Ne,Re){he=u.getGraphDiv(he);function nt(Nt,ot,jt){var Ut,Gt;if(u.isTypedArray(Nt))if(jt<0){var Tr=new Nt.constructor(0),Dr=Ae(Nt,ot);jt<0?(Ut=Dr,Gt=Tr):(Ut=Tr,Gt=Dr)}else if(Ut=new Nt.constructor(jt),Gt=new Nt.constructor(Nt.length+ot.length-jt),jt===ot.length)Ut.set(ot),Gt.set(Nt);else if(jt<ot.length){var Vr=ot.length-jt;Ut.set(ot.subarray(Vr)),Gt.set(Nt),Gt.set(ot.subarray(0,Vr),Nt.length)}else{var Mr=jt-ot.length,Fr=Nt.length-Mr;Ut.set(Nt.subarray(Fr)),Ut.set(ot,Mr),Gt.set(Nt.subarray(0,Fr))}else Ut=Nt.concat(ot),Gt=jt>=0&&jt<Ut.length?Ut.splice(0,Ut.length-jt):[];return[Ut,Gt]}var at=Le(he,je,Ne,Re,nt),dt=V.redraw(he),Mt=[he,at.update,Ne,at.maxPoints];return m.add(he,V.prependTraces,Mt,We,arguments),dt}function te(he,je,Ne,Re){he=u.getGraphDiv(he);function nt(Nt,ot,jt){var Ut,Gt;if(u.isTypedArray(Nt))if(jt<=0){var Tr=new Nt.constructor(0),Dr=Ae(ot,Nt);jt<0?(Ut=Dr,Gt=Tr):(Ut=Tr,Gt=Dr)}else if(Ut=new Nt.constructor(jt),Gt=new Nt.constructor(Nt.length+ot.length-jt),jt===ot.length)Ut.set(ot),Gt.set(Nt);else if(jt<ot.length){var Vr=ot.length-jt;Ut.set(ot.subarray(0,Vr)),Gt.set(ot.subarray(Vr)),Gt.set(Nt,Vr)}else{var Mr=jt-ot.length;Ut.set(ot),Ut.set(Nt.subarray(0,Mr),ot.length),Gt.set(Nt.subarray(Mr))}else Ut=ot.concat(Nt),Gt=jt>=0&&jt<Ut.length?Ut.splice(jt,Ut.length):[];return[Ut,Gt]}var at=Le(he,je,Ne,Re,nt),dt=V.redraw(he),Mt=[he,at.update,Ne,at.maxPoints];return m.add(he,V.extendTraces,Mt,te,arguments),dt}function ae(he,je,Ne){he=u.getGraphDiv(he);var Re=[],nt=V.deleteTraces,at=ae,dt=[he,Re],Mt=[he,je],Nt,ot;for(ve(he,je,Ne),Array.isArray(je)||(je=[je]),je=je.map(function(jt){return u.extendFlat({},jt)}),L.cleanData(je),Nt=0;Nt<je.length;Nt++)he.data.push(je[Nt]);for(Nt=0;Nt<je.length;Nt++)Re.push(-je.length+Nt);if(typeof Ne>"u")return ot=V.redraw(he),m.add(he,nt,dt,at,Mt),ot;Array.isArray(Ne)||(Ne=[Ne]);try{de(he,Re,Ne)}catch(jt){throw he.data.splice(he.data.length-je.length,je.length),jt}return m.startSequence(he),m.add(he,nt,dt,at,Mt),ot=V.moveTraces(he,Re,Ne),m.stopSequence(he),ot}function G(he,je){he=u.getGraphDiv(he);var Ne=[],Re=V.addTraces,nt=G,at=[he,Ne,je],dt=[he,je],Mt,Nt;if(typeof je>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(je)||(je=[je]),ce(he,je,"indices"),je=W(je,he.data.length-1),je.sort(u.sorterDes),Mt=0;Mt<je.length;Mt+=1)Nt=he.data.splice(je[Mt],1)[0],Ne.push(Nt);var ot=V.redraw(he);return m.add(he,Re,at,nt,dt),ot}function Q(he,je,Ne){he=u.getGraphDiv(he);var Re=[],nt=[],at=Q,dt=Q,Mt=[he,Ne,je],Nt=[he,je,Ne],ot;if(de(he,je,Ne),je=Array.isArray(je)?je:[je],typeof Ne>"u")for(Ne=[],ot=0;ot<je.length;ot++)Ne.push(-je.length+ot);for(Ne=Array.isArray(Ne)?Ne:[Ne],je=W(je,he.data.length-1),Ne=W(Ne,he.data.length-1),ot=0;ot<he.data.length;ot++)je.indexOf(ot)===-1&&Re.push(he.data[ot]);for(ot=0;ot<je.length;ot++)nt.push({newIndex:Ne[ot],trace:he.data[je[ot]]});for(nt.sort(function(Ut,Gt){return Ut.newIndex-Gt.newIndex}),ot=0;ot<nt.length;ot+=1)Re.splice(nt[ot].newIndex,0,nt[ot].trace);he.data=Re;var jt=V.redraw(he);return m.add(he,at,Mt,dt,Nt),jt}function U(he,je,Ne,Re){he=u.getGraphDiv(he),L.clearPromiseQueue(he);var nt={};if(typeof je=="string")nt[je]=Ne;else if(u.isPlainObject(je))nt=u.extendFlat({},je),Re===void 0&&(Re=Ne);else return u.warn("Restyle fail.",je,Ne,Re),Promise.reject();Object.keys(nt).length&&(he.changed=!0);var at=L.coerceTraceIndices(he,Re),dt=ie(he,nt,at),Mt=dt.flags;Mt.calc&&(he.calcdata=void 0),Mt.clearAxisTypes&&L.clearAxisTypes(he,at,{});var Nt=[];Mt.fullReplot?Nt.push(V._doPlot):(Nt.push(o.previousPromises),o.supplyDefaults(he),Mt.markerSize&&(o.doCalcdata(he),ke(Nt)),Mt.style&&Nt.push(F.doTraceStyle),Mt.colorbars&&Nt.push(F.doColorBars),Nt.push(z)),Nt.push(o.rehover,o.redrag,o.reselect),m.add(he,U,[he,dt.undoit,dt.traces],U,[he,dt.redoit,dt.traces]);var ot=u.syncOrAsync(Nt,he);return(!ot||!ot.then)&&(ot=Promise.resolve()),ot.then(function(){return he.emit("plotly_restyle",dt.eventData),he})}function re(he){return he===void 0?null:he}function R(he,je){return je?function(Ne,Re,nt){var at=p(Ne,Re),dt=at.set;return at.set=function(Mt){var Nt=(nt||"")+Re;B(Nt,at.get(),Mt,he),dt(Mt)},at}:p}function B(he,je,Ne,Re){if(Array.isArray(je)||Array.isArray(Ne))for(var nt=Array.isArray(je)?je:[],at=Array.isArray(Ne)?Ne:[],dt=Math.max(nt.length,at.length),Mt=0;Mt<dt;Mt++)B(he+"["+Mt+"]",nt[Mt],at[Mt],Re);else if(u.isPlainObject(je)||u.isPlainObject(Ne)){var Nt=u.isPlainObject(je)?je:{},ot=u.isPlainObject(Ne)?Ne:{},jt=u.extendFlat({},Nt,ot);for(var Ut in jt)B(he+"."+Ut,Nt[Ut],ot[Ut],Re)}else Re[he]===void 0&&(Re[he]=re(je))}function oe(he,je,Ne){for(var Re in Ne){var nt=p(he,Re);B(Re,nt.get(),Ne[Re],je)}}function ie(he,je,Ne){var Re=he._fullLayout,nt=he._fullData,at=he.data,dt=Re._guiEditing,Mt=R(Re._preGUI,dt),Nt=u.extendDeepAll({},je),ot,jt=P.traceFlags(),Ut={},Gt={},Tr;function Dr(){return Ne.map(function(){})}function Vr(fr){var Rr=T.id2name(fr);Tr.indexOf(Rr)===-1&&Tr.push(Rr)}function Mr(fr){return"LAYOUT"+fr+".autorange"}function Fr(fr){return"LAYOUT"+fr+".range"}function xr(fr){for(var Rr=fr;Rr<nt.length;Rr++)if(nt[Rr]._input===at[fr])return nt[Rr]}function br(fr,Rr,wr){if(Array.isArray(fr)){fr.forEach(function(Xr){br(Xr,Rr,wr)});return}if(!(fr in je||L.hasParent(je,fr))){var Gr;if(fr.substr(0,6)==="LAYOUT")Gr=Mt(he.layout,fr.replace("LAYOUT",""));else{var Lr=Ne[wr],$r=Re._tracePreGUI[xr(Lr)._fullInput.uid];Gr=R($r,dt)(at[Lr],fr)}fr in Gt||(Gt[fr]=Dr()),Gt[fr][wr]===void 0&&(Gt[fr][wr]=re(Gr.get())),Rr!==void 0&&Gr.set(Rr)}}function Wr(fr){return function(Rr){return nt[Rr][fr]}}function Or(fr){return function(Rr,wr){return Rr===!1?nt[Ne[wr]][fr]:null}}for(var qr in je){if(L.hasParent(je,qr))throw new Error("cannot set "+qr+" and a parent attribute simultaneously");var Er=je[qr],vr,Ir,ln,kn,Hr,pn;if((qr==="autobinx"||qr==="autobiny")&&(qr=qr.charAt(qr.length-1)+"bins",Array.isArray(Er)?Er=Er.map(Or(qr)):Er===!1?Er=Ne.map(Wr(qr)):Er=null),Ut[qr]=Er,qr.substr(0,6)==="LAYOUT"){ln=Mt(he.layout,qr.replace("LAYOUT","")),Gt[qr]=[re(ln.get())],ln.set(Array.isArray(Er)?Er[0]:Er),jt.calc=!0;continue}for(Gt[qr]=Dr(),ot=0;ot<Ne.length;ot++){vr=at[Ne[ot]],Ir=xr(Ne[ot]);var mn=Re._tracePreGUI[Ir._fullInput.uid];if(ln=R(mn,dt)(vr,qr),kn=ln.get(),Hr=Array.isArray(Er)?Er[ot%Er.length]:Er,Hr!==void 0){var Un=ln.parts[ln.parts.length-1],gr=qr.substr(0,qr.length-Un.length-1),Cn=gr?gr+".":"",we=gr?p(Ir,gr).get():Ir;if(pn=w.getTraceValObject(Ir,ln.parts),pn&&pn.impliedEdits&&Hr!==null)for(var ge in pn.impliedEdits)br(u.relativeAttr(qr,ge),pn.impliedEdits[ge],ot);else if((Un==="thicknessmode"||Un==="lenmode")&&kn!==Hr&&(Hr==="fraction"||Hr==="pixels")&&we){var pt=Re._size,ft=we.orient,Xe=ft==="top"||ft==="bottom";if(Un==="thicknessmode"){var Qe=Xe?pt.h:pt.w;br(Cn+"thickness",we.thickness*(Hr==="fraction"?1/Qe:Qe),ot)}else{var st=Xe?pt.w:pt.h;br(Cn+"len",we.len*(Hr==="fraction"?1/st:st),ot)}}else if(qr==="type"&&(Hr==="pie"!=(kn==="pie")||Hr==="funnelarea"!=(kn==="funnelarea"))){var At="x",it="y";(Hr==="bar"||kn==="bar")&&vr.orientation==="h"&&(At="y",it="x"),u.swapAttrs(vr,["?","?src"],"labels",At),u.swapAttrs(vr,["d?","?0"],"label",At),u.swapAttrs(vr,["?","?src"],"values",it),kn==="pie"||kn==="funnelarea"?(p(vr,"marker.color").set(p(vr,"marker.colors").get()),Re._pielayer.selectAll("g.trace").remove()):g.traceIs(vr,"cartesian")&&p(vr,"marker.colors").set(p(vr,"marker.color").get())}Gt[qr][ot]=re(kn);var bt=["swapxy","swapxyaxes","orientation","orientationaxes"];if(bt.indexOf(qr)!==-1){if(qr==="orientation"){ln.set(Hr);var Tt=vr.x&&!vr.y?"h":"v";if((ln.get()||Tt)===Ir.orientation)continue}else qr==="orientationaxes"&&(vr.orientation={v:"h",h:"v"}[Ir.orientation]);L.swapXYData(vr),jt.calc=jt.clearAxisTypes=!0}else o.dataArrayContainers.indexOf(ln.parts[0])!==-1?(L.manageArrayContainers(ln,Hr,Gt),jt.calc=!0):(pn?pn.arrayOk&&!g.traceIs(Ir,"regl")&&(u.isArrayOrTypedArray(Hr)||u.isArrayOrTypedArray(kn))?jt.calc=!0:P.update(jt,pn):jt.calc=!0,ln.set(Hr))}}if(["swapxyaxes","orientationaxes"].indexOf(qr)!==-1&&T.swap(he,Ne),qr==="orientationaxes"){var Rt=p(he.layout,"hovermode"),tr=Rt.get();tr==="x"?Rt.set("y"):tr==="y"?Rt.set("x"):tr==="x unified"?Rt.set("y unified"):tr==="y unified"&&Rt.set("x unified")}if(["orientation","type"].indexOf(qr)!==-1){for(Tr=[],ot=0;ot<Ne.length;ot++){var ur=at[Ne[ot]];g.traceIs(ur,"cartesian")&&(Vr(ur.xaxis||"x"),Vr(ur.yaxis||"y"))}br(Tr.map(Mr),!0,0),br(Tr.map(Fr),[0,1],0)}}return(jt.calc||jt.plot)&&(jt.fullReplot=!0),{flags:jt,undoit:Gt,redoit:Ut,traces:Ne,eventData:u.extendDeepNoArrays([],[Nt,Ne])}}function xe(he,je,Ne){he=u.getGraphDiv(he),L.clearPromiseQueue(he);var Re={};if(typeof je=="string")Re[je]=Ne;else if(u.isPlainObject(je))Re=u.extendFlat({},je);else return u.warn("Relayout fail.",je,Ne),Promise.reject();Object.keys(Re).length&&(he.changed=!0);var nt=yt(he,Re),at=nt.flags;at.calc&&(he.calcdata=void 0);var dt=[o.previousPromises];at.layoutReplot?dt.push(F.layoutReplot):Object.keys(Re).length&&(_e(he,at,nt)||o.supplyDefaults(he),at.legend&&dt.push(F.doLegend),at.layoutstyle&&dt.push(F.layoutStyles),at.axrange&&ke(dt,nt.rangesAltered),at.ticks&&dt.push(F.doTicksRelayout),at.modebar&&dt.push(F.doModeBar),at.camera&&dt.push(F.doCamera),at.colorbars&&dt.push(F.doColorBars),dt.push(z)),dt.push(o.rehover,o.redrag,o.reselect),m.add(he,xe,[he,nt.undoit],xe,[he,nt.redoit]);var Mt=u.syncOrAsync(dt,he);return(!Mt||!Mt.then)&&(Mt=Promise.resolve(he)),Mt.then(function(){return he.emit("plotly_relayout",nt.eventData),he})}function _e(he,je,Ne){var Re=he._fullLayout;if(!je.axrange)return!1;for(var nt in je)if(nt!=="axrange"&&je[nt])return!1;var at,dt,Mt=function(Tr,Dr){return u.coerce(at,dt,k,Tr,Dr)},Nt={};for(var ot in Ne.rangesAltered){var jt=T.id2name(ot);if(at=he.layout[jt],dt=Re[jt],y(at,dt,Mt,Nt),dt._matchGroup){for(var Ut in dt._matchGroup)if(Ut!==ot){var Gt=Re[T.id2name(Ut)];Gt.autorange=dt.autorange,Gt.range=dt.range.slice(),Gt._input.range=dt.range.slice()}}}return!0}function ke(he,je){var Ne=je?function(Re){var nt=[],at=!0;for(var dt in je){var Mt=T.getFromId(Re,dt);if(nt.push(dt),(Mt.ticklabelposition||"").indexOf("inside")!==-1&&Mt._anchorAxis&&nt.push(Mt._anchorAxis._id),Mt._matchGroup)for(var Nt in Mt._matchGroup)je[Nt]||nt.push(Nt)}return T.draw(Re,nt,{skipTitle:at})}:function(Re){return T.draw(Re,"redraw")};he.push(j,F.doAutoRangeAndConstraints,Ne,F.drawData,F.finalDraw)}var Pe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ge=/^[xyz]axis[0-9]*\.autorange$/,Je=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function yt(he,je){var Ne=he.layout,Re=he._fullLayout,nt=Re._guiEditing,at=R(Re._preGUI,nt),dt=Object.keys(je),Mt=T.list(he),Nt=u.extendDeepAll({},je),ot={},jt,Ut,Gt;for(dt=Object.keys(je),Ut=0;Ut<dt.length;Ut++)if(dt[Ut].indexOf("allaxes")===0){for(Gt=0;Gt<Mt.length;Gt++){var Tr=Mt[Gt]._id.substr(1),Dr=Tr.indexOf("scene")!==-1?Tr+".":"",Vr=dt[Ut].replace("allaxes",Dr+Mt[Gt]._name);je[Vr]||(je[Vr]=je[dt[Ut]])}delete je[dt[Ut]]}var Mr=P.layoutFlags(),Fr={},xr={};function br($r,Xr){if(Array.isArray($r)){$r.forEach(function(bn){br(bn,Xr)});return}if(!($r in je||L.hasParent(je,$r))){var jn=at(Ne,$r);$r in xr||(xr[$r]=re(jn.get())),Xr!==void 0&&jn.set(Xr)}}var Wr={},Or;function qr($r){var Xr=T.name2id($r.split(".")[0]);return Wr[Xr]=1,Xr}for(var Er in je){if(L.hasParent(je,Er))throw new Error("cannot set "+Er+" and a parent attribute simultaneously");for(var vr=at(Ne,Er),Ir=je[Er],ln=vr.parts.length,kn=ln-1;kn>0&&typeof vr.parts[kn]!="string";)kn--;var Hr=vr.parts[kn],pn=vr.parts[kn-1]+"."+Hr,mn=vr.parts.slice(0,kn).join("."),Un=p(he.layout,mn).get(),gr=p(Re,mn).get(),Cn=vr.get();if(Ir!==void 0){Fr[Er]=Ir,xr[Er]=Hr==="reverse"?Ir:re(Cn);var we=w.getLayoutValObject(Re,vr.parts);if(we&&we.impliedEdits&&Ir!==null)for(var ge in we.impliedEdits)br(u.relativeAttr(Er,ge),we.impliedEdits[ge]);if(["width","height"].indexOf(Er)!==-1)if(Ir){br("autosize",null);var pt=Er==="height"?"width":"height";br(pt,Re[pt])}else Re[Er]=he._initialAutoSize[Er];else if(Er==="autosize")br("width",Ir?null:Re.width),br("height",Ir?null:Re.height);else if(pn.match(Pe))qr(pn),p(Re,mn+"._inputRange").set(null);else if(pn.match(Ge)){qr(pn),p(Re,mn+"._inputRange").set(null);var ft=p(Re,mn).get();ft._inputDomain&&(ft._input.domain=ft._inputDomain.slice())}else pn.match(Je)&&p(Re,mn+"._inputDomain").set(null);if(Hr==="type"){Or=Un;var Xe=gr.type==="linear"&&Ir==="log",Qe=gr.type==="log"&&Ir==="linear";if(Xe||Qe){if(!Or||!Or.range)br(mn+".autorange",!0);else if(gr.autorange)Xe&&(Or.range=Or.range[1]>Or.range[0]?[1,2]:[2,1]);else{var st=Or.range[0],At=Or.range[1];Xe?(st<=0&&At<=0&&br(mn+".autorange",!0),st<=0?st=At/1e6:At<=0&&(At=st/1e6),br(mn+".range[0]",Math.log(st)/Math.LN10),br(mn+".range[1]",Math.log(At)/Math.LN10)):(br(mn+".range[0]",Math.pow(10,st)),br(mn+".range[1]",Math.pow(10,At)))}Array.isArray(Re._subplots.polar)&&Re._subplots.polar.length&&Re[vr.parts[0]]&&vr.parts[1]==="radialaxis"&&delete Re[vr.parts[0]]._subplot.viewInitial["radialaxis.range"],g.getComponentMethod("annotations","convertCoords")(he,gr,Ir,br),g.getComponentMethod("images","convertCoords")(he,gr,Ir,br)}else br(mn+".autorange",!0),br(mn+".range",null);p(Re,mn+"._inputRange").set(null)}else if(Hr.match(J)){var it=p(Re,Er).get(),bt=(Ir||{}).type;(!bt||bt==="-")&&(bt="linear"),g.getComponentMethod("annotations","convertCoords")(he,it,bt,br),g.getComponentMethod("images","convertCoords")(he,it,bt,br)}var Tt=S.containerArrayMatch(Er);if(Tt){jt=Tt.array,Ut=Tt.index;var Rt=Tt.property,tr=we||{editType:"calc"};Ut!==""&&Rt===""&&(S.isAddVal(Ir)?xr[Er]=null:S.isRemoveVal(Ir)?xr[Er]=(p(Ne,jt).get()||[])[Ut]:u.warn("unrecognized full object value",je)),P.update(Mr,tr),ot[jt]||(ot[jt]={});var ur=ot[jt][Ut];ur||(ur=ot[jt][Ut]={}),ur[Rt]=Ir,delete je[Er]}else Hr==="reverse"?(Un.range?Un.range.reverse():(br(mn+".autorange",!0),Un.range=[1,0]),gr.autorange?Mr.calc=!0:Mr.plot=!0):(Er==="dragmode"&&(Ir===!1&&Cn!==!1||Ir!==!1&&Cn===!1)||Re._has("scatter-like")&&Re._has("regl")&&Er==="dragmode"&&(Ir==="lasso"||Ir==="select")&&!(Cn==="lasso"||Cn==="select")?Mr.plot=!0:we?P.update(Mr,we):Mr.calc=!0,vr.set(Ir))}}for(jt in ot){var fr=S.applyContainerArrayChanges(he,at(Ne,jt),ot[jt],Mr,at);fr||(Mr.plot=!0)}for(var Rr in Wr){Or=T.getFromId(he,Rr);var wr=Or&&Or._constraintGroup;if(wr){Mr.calc=!0;for(var Gr in wr)Wr[Gr]||(T.getFromId(he,Gr)._constraintShrinkable=!0)}}(lt(he)||je.height||je.width)&&(Mr.plot=!0);var Lr=Re.shapes;for(Ut=0;Ut<Lr.length;Ut++)if(Lr[Ut].showlegend){Mr.calc=!0;break}return(Mr.plot||Mr.calc)&&(Mr.layoutReplot=!0),{flags:Mr,rangesAltered:Wr,undoit:xr,redoit:Fr,eventData:Nt}}function lt(he){var je=he._fullLayout,Ne=je.width,Re=je.height;return he.layout.autosize&&o.plotAutoSize(he,he.layout,je),je.width!==Ne||je.height!==Re}function mt(he,je,Ne,Re){he=u.getGraphDiv(he),L.clearPromiseQueue(he),u.isPlainObject(je)||(je={}),u.isPlainObject(Ne)||(Ne={}),Object.keys(je).length&&(he.changed=!0),Object.keys(Ne).length&&(he.changed=!0);var nt=L.coerceTraceIndices(he,Re),at=ie(he,u.extendFlat({},je),nt),dt=at.flags,Mt=yt(he,u.extendFlat({},Ne)),Nt=Mt.flags;(dt.calc||Nt.calc)&&(he.calcdata=void 0),dt.clearAxisTypes&&L.clearAxisTypes(he,nt,Ne);var ot=[];Nt.layoutReplot?ot.push(F.layoutReplot):dt.fullReplot?ot.push(V._doPlot):(ot.push(o.previousPromises),_e(he,Nt,Mt)||o.supplyDefaults(he),dt.style&&ot.push(F.doTraceStyle),(dt.colorbars||Nt.colorbars)&&ot.push(F.doColorBars),Nt.legend&&ot.push(F.doLegend),Nt.layoutstyle&&ot.push(F.layoutStyles),Nt.axrange&&ke(ot,Mt.rangesAltered),Nt.ticks&&ot.push(F.doTicksRelayout),Nt.modebar&&ot.push(F.doModeBar),Nt.camera&&ot.push(F.doCamera),ot.push(z)),ot.push(o.rehover,o.redrag,o.reselect),m.add(he,mt,[he,at.undoit,Mt.undoit,at.traces],mt,[he,at.redoit,Mt.redoit,at.traces]);var jt=u.syncOrAsync(ot,he);return(!jt||!jt.then)&&(jt=Promise.resolve(he)),jt.then(function(){return he.emit("plotly_update",{data:at.eventData,layout:Mt.eventData}),he})}function Ce(he){return function(Ne){Ne._fullLayout._guiEditing=!0;var Re=he.apply(null,arguments);return Ne._fullLayout._guiEditing=!1,Re}}var Ie=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Se=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Be(he,je){for(var Ne=0;Ne<je.length;Ne++){var Re=je[Ne],nt=he.match(Re.pattern);if(nt){var at=nt[1]||"";return{head:at,tail:he.substr(at.length+1),attr:Re.attr}}}}function rt(he,je){var Ne=p(je,he).get();if(Ne!==void 0)return Ne;var Re=he.split(".");for(Re.pop();Re.length>1;)if(Re.pop(),Ne=p(je,Re.join(".")+".uirevision").get(),Ne!==void 0)return Ne;return je.uirevision}function ht(he,je){for(var Ne=0;Ne<je.length;Ne++)if(je[Ne]._fullInput.uid===he)return Ne;return-1}function Lt(he,je,Ne){for(var Re=0;Re<je.length;Re++)if(je[Re].uid===he)return Re;return!je[Ne]||je[Ne].uid?-1:Ne}function Ct(he,je){var Ne=u.isPlainObject(he),Re=Array.isArray(he);return Ne||Re?(Ne&&u.isPlainObject(je)||Re&&Array.isArray(je))&&JSON.stringify(he)===JSON.stringify(je):he===je}function zt(he,je,Ne,Re){var nt=Re._preGUI,at,dt,Mt,Nt,ot,jt,Ut,Gt,Tr,Dr,Vr=[],Mr={},Fr={};for(at in nt){if(ot=Be(at,Ie),ot){if(Tr=ot.head,Dr=ot.tail,dt=ot.attr||Tr+".uirevision",Mt=p(Re,dt).get(),Nt=Mt&&rt(dt,je),Nt&&Nt===Mt){if(jt=nt[at],jt===null&&(jt=void 0),Ut=p(je,at),Gt=Ut.get(),Ct(Gt,jt)){Gt===void 0&&Dr==="autorange"&&Vr.push(Tr),Ut.set(re(p(Re,at).get()));continue}else if(Dr==="autorange"||Dr.substr(0,6)==="range["){var xr=nt[Tr+".range[0]"],br=nt[Tr+".range[1]"],Wr=nt[Tr+".autorange"];if(Wr||Wr===null&&xr===null&&br===null){if(!(Tr in Mr)){var Or=p(je,Tr).get();Mr[Tr]=Or&&(Or.autorange||Or.autorange!==!1&&(!Or.range||Or.range.length!==2))}if(Mr[Tr]){Ut.set(re(p(Re,at).get()));continue}}}}}else u.warn("unrecognized GUI edit: "+at);delete nt[at],ot&&ot.tail.substr(0,6)==="range["&&(Fr[ot.head]=1)}for(var qr=0;qr<Vr.length;qr++){var Er=Vr[qr];if(Fr[Er]){var vr=p(je,Er).get();vr&&delete vr.autorange}}var Ir=Re._tracePreGUI;for(var ln in Ir){var kn=Ir[ln],Hr=null,pn;for(at in kn){if(!Hr){var mn=ht(ln,Ne);if(mn<0){delete Ir[ln];break}var Un=Ne[mn];pn=Un._fullInput;var gr=Lt(ln,he,pn.index);if(gr<0){delete Ir[ln];break}Hr=he[gr]}if(ot=Be(at,Se),ot){if(ot.attr?(Mt=p(Re,ot.attr).get(),Nt=Mt&&rt(ot.attr,je)):(Mt=pn.uirevision,Nt=Hr.uirevision,Nt===void 0&&(Nt=je.uirevision)),Nt&&Nt===Mt&&(jt=kn[at],jt===null&&(jt=void 0),Ut=p(Hr,at),Gt=Ut.get(),Ct(Gt,jt))){Ut.set(re(p(pn,at).get()));continue}}else u.warn("unrecognized GUI edit: "+at+" in trace uid "+ln);delete kn[at]}}}function Bt(he,je,Ne,Re){var nt,at;function dt(){return V.addFrames(he,nt)}he=u.getGraphDiv(he),L.clearPromiseQueue(he);var Mt=he._fullData,Nt=he._fullLayout;if(!u.isPlotDiv(he)||!Mt||!Nt)at=V.newPlot(he,je,Ne,Re);else{if(u.isPlainObject(je)){var ot=je;je=ot.data,Ne=ot.layout,Re=ot.config,nt=ot.frames}var jt=!1;if(Re){var Ut=u.extendDeep({},he._context);he._context=void 0,ee(he,Re),jt=rr(Ut,he._context)}he.data=je||[],L.cleanData(he.data),he.layout=Ne||{},L.cleanLayout(he.layout),zt(he.data,he.layout,Mt,Nt),o.supplyDefaults(he,{skipUpdateCalc:!0});var Gt=he._fullData,Tr=he._fullLayout,Dr=Tr.datarevision===void 0,Vr=Tr.transition,Mr=nr(he,Nt,Tr,Dr,Vr),Fr=Mr.newDataRevision,xr=Ft(he,Mt,Gt,Dr,Vr,Fr);if(lt(he)&&(Mr.layoutReplot=!0),xr.calc||Mr.calc){he.calcdata=void 0;for(var br=Object.getOwnPropertyNames(Tr),Wr=0;Wr<br.length;Wr++){var Or=br[Wr],qr=Or.substring(0,5);if(qr==="xaxis"||qr==="yaxis"){var Er=Tr[Or]._emptyCategories;Er&&Er()}}}else o.supplyDefaultsUpdateCalc(he.calcdata,Gt);var vr=[];if(nt&&(he._transitionData={},o.createTransitionData(he),vr.push(dt)),Tr.transition&&!jt&&(xr.anim||Mr.anim))Mr.ticks&&vr.push(F.doTicksRelayout),o.doCalcdata(he),F.doAutoRangeAndConstraints(he),vr.push(function(){return o.transitionFromReact(he,xr,Mr,Nt)});else if(xr.fullReplot||Mr.layoutReplot||jt)he._fullLayout._skipDefaults=!0,vr.push(V._doPlot);else{for(var Ir in Mr.arrays){var ln=Mr.arrays[Ir];if(ln.length){var kn=g.getComponentMethod(Ir,"drawOne");if(kn!==u.noop)for(var Hr=0;Hr<ln.length;Hr++)kn(he,ln[Hr]);else{var pn=g.getComponentMethod(Ir,"draw");if(pn===u.noop)throw new Error("cannot draw components: "+Ir);pn(he)}}}vr.push(o.previousPromises),xr.style&&vr.push(F.doTraceStyle),(xr.colorbars||Mr.colorbars)&&vr.push(F.doColorBars),Mr.legend&&vr.push(F.doLegend),Mr.layoutstyle&&vr.push(F.layoutStyles),Mr.axrange&&ke(vr),Mr.ticks&&vr.push(F.doTicksRelayout),Mr.modebar&&vr.push(F.doModeBar),Mr.camera&&vr.push(F.doCamera),vr.push(z)}vr.push(o.rehover,o.redrag,o.reselect),at=u.syncOrAsync(vr,he),(!at||!at.then)&&(at=Promise.resolve(he))}return at.then(function(){return he.emit("plotly_react",{data:je,layout:Ne}),he})}function Ft(he,je,Ne,Re,nt,at){var dt=je.length===Ne.length;if(!nt&&!dt)return{fullReplot:!0,calc:!0};var Mt=P.traceFlags();Mt.arrays={},Mt.nChanges=0,Mt.nChangesAnim=0;var Nt,ot;function jt(Tr){var Dr=w.getTraceValObject(ot,Tr);return!ot._module.animatable&&Dr.anim&&(Dr.anim=!1),Dr}var Ut={getValObject:jt,flags:Mt,immutable:Re,transition:nt,newDataRevision:at,gd:he},Gt={};for(Nt=0;Nt<je.length;Nt++)if(Ne[Nt]){if(ot=Ne[Nt]._fullInput,Gt[ot.uid])continue;Gt[ot.uid]=1,_t(je[Nt]._fullInput,ot,[],Ut)}return(Mt.calc||Mt.plot)&&(Mt.fullReplot=!0),nt&&Mt.nChanges&&Mt.nChangesAnim&&(Mt.anim=Mt.nChanges===Mt.nChangesAnim&&dt?"all":"some"),Mt}function nr(he,je,Ne,Re,nt){var at=P.layoutFlags();at.arrays={},at.rangesAltered={},at.nChanges=0,at.nChangesAnim=0;function dt(Gt){return w.getLayoutValObject(Ne,Gt)}for(var Mt in Ne)if(!(!Mt.startsWith("xaxis")&&!Mt.startsWith("yaxis"))&&je[Mt]){var Nt=Ne[Mt].domain,ot=je[Mt].domain,jt=je[Mt]._inputDomain;je[Mt]._inputDomain&&(Nt[0]===jt[0]&&Nt[1]===jt[1]?Ne[Mt].domain=je[Mt].domain:(Nt[0]!==ot[0]||Nt[1]!==ot[1])&&(Ne[Mt]._inputDomain=null))}var Ut={getValObject:dt,flags:at,immutable:Re,transition:nt,gd:he};return _t(je,Ne,[],Ut),(at.plot||at.calc)&&(at.layoutReplot=!0),nt&&at.nChanges&&at.nChangesAnim&&(at.anim=at.nChanges===at.nChangesAnim?"all":"some"),at}function _t(he,je,Ne,Re){var nt,at,dt,Mt=Re.getValObject,Nt=Re.flags,ot=Re.immutable,jt=Re.inArray,Ut=Re.arrayIndex;function Gt(){var mn=nt.editType;if(jt&&mn.indexOf("arraydraw")!==-1){u.pushUnique(Nt.arrays[jt],Ut);return}P.update(Nt,nt),mn!=="none"&&Nt.nChanges++,Re.transition&&nt.anim&&Nt.nChangesAnim++,(Pe.test(dt)||Ge.test(dt))&&(Nt.rangesAltered[Ne[0]]=1),at==="datarevision"&&(Nt.newDataRevision=1)}function Tr(mn){return mn.valType==="data_array"||mn.arrayOk}for(at in he){if(Nt.calc&&!Re.transition)return;var Dr=he[at],Vr=je[at],Mr=Ne.concat(at);if(dt=Mr.join("."),!(at.charAt(0)==="_"||typeof Dr=="function"||Dr===Vr)){if((at==="tick0"||at==="dtick")&&Ne[0]!=="geo"){var Fr=je.tickmode;if(Fr==="auto"||Fr==="array"||!Fr)continue}if(!(at==="range"&&je.autorange)&&!((at==="zmin"||at==="zmax")&&je.type==="contourcarpet")&&(nt=Mt(Mr),!!nt&&!(nt._compareAsJSON&&JSON.stringify(Dr)===JSON.stringify(Vr)))){var xr=nt.valType,br,Wr=Tr(nt),Or=Array.isArray(Dr),qr=Array.isArray(Vr);if(Or&&qr){var Er="_input_"+at,vr=he[Er],Ir=je[Er];if(Array.isArray(vr)&&vr===Ir)continue}if(Vr===void 0)Wr&&Or?Nt.calc=!0:Gt();else if(nt._isLinkedToArray){var ln=[],kn=!1;jt||(Nt.arrays[at]=ln);var Hr=Math.min(Dr.length,Vr.length),pn=Math.max(Dr.length,Vr.length);if(Hr!==pn)if(nt.editType==="arraydraw")kn=!0;else{Gt();continue}for(br=0;br<Hr;br++)_t(Dr[br],Vr[br],Mr.concat(br),u.extendFlat({inArray:at,arrayIndex:br},Re));if(kn)for(br=Hr;br<pn;br++)ln.push(br)}else!xr&&u.isPlainObject(Dr)?_t(Dr,Vr,Mr,Re):Wr?Or&&qr?(ot&&(Nt.calc=!0),(ot||Re.newDataRevision)&&Gt()):Or!==qr?Nt.calc=!0:Gt():Or&&qr?(Dr.length!==Vr.length||String(Dr)!==String(Vr))&&Gt():Gt()}}}for(at in je)if(!(at in he||at.charAt(0)==="_"||typeof je[at]=="function"))if(nt=Mt(Ne.concat(at)),Tr(nt)&&Array.isArray(je[at])){Nt.calc=!0;return}else Gt()}function rr(he,je){var Ne;for(Ne in he)if(Ne.charAt(0)!=="_"){var Re=he[Ne],nt=je[Ne];if(Re!==nt)if(u.isPlainObject(Re)&&u.isPlainObject(nt)){if(rr(Re,nt))return!0}else if(Array.isArray(Re)&&Array.isArray(nt)){if(Re.length!==nt.length)return!0;for(var at=0;at<Re.length;at++)if(Re[at]!==nt[at])if(u.isPlainObject(Re[at])&&u.isPlainObject(nt[at])){if(rr(Re[at],nt[at]))return!0}else return!0}else return!0}}function pr(he,je,Ne){if(he=u.getGraphDiv(he),!u.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Re=he._transitionData;Re._frameQueue||(Re._frameQueue=[]),Ne=o.supplyAnimationDefaults(Ne);var nt=Ne.transition,at=Ne.frame;Re._frameWaitingCnt===void 0&&(Re._frameWaitingCnt=0);function dt(ot){return Array.isArray(nt)?ot>=nt.length?nt[0]:nt[ot]:nt}function Mt(ot){return Array.isArray(at)?ot>=at.length?at[0]:at[ot]:at}function Nt(ot,jt){var Ut=0;return function(){if(ot&&++Ut===jt)return ot()}}return new Promise(function(ot,jt){function Ut(){if(Re._frameQueue.length!==0){for(;Re._frameQueue.length;){var Hr=Re._frameQueue.pop();Hr.onInterrupt&&Hr.onInterrupt()}he.emit("plotly_animationinterrupted",[])}}function Gt(Hr){if(Hr.length!==0){for(var pn=0;pn<Hr.length;pn++){var mn;Hr[pn].type==="byname"?mn=o.computeFrame(he,Hr[pn].name):mn=Hr[pn].data;var Un=Mt(pn),gr=dt(pn);gr.duration=Math.min(gr.duration,Un.duration);var Cn={frame:mn,name:Hr[pn].name,frameOpts:Un,transitionOpts:gr};pn===Hr.length-1&&(Cn.onComplete=Nt(ot,2),Cn.onInterrupt=jt),Re._frameQueue.push(Cn)}Ne.mode==="immediate"&&(Re._lastFrameAt=-1/0),Re._animationRaf||Vr()}}function Tr(){he.emit("plotly_animated"),window.cancelAnimationFrame(Re._animationRaf),Re._animationRaf=null}function Dr(){Re._currentFrame&&Re._currentFrame.onComplete&&Re._currentFrame.onComplete();var Hr=Re._currentFrame=Re._frameQueue.shift();if(Hr){var pn=Hr.name?Hr.name.toString():null;he._fullLayout._currentFrame=pn,Re._lastFrameAt=Date.now(),Re._timeToNext=Hr.frameOpts.duration,o.transition(he,Hr.frame.data,Hr.frame.layout,L.coerceTraceIndices(he,Hr.frame.traces),Hr.frameOpts,Hr.transitionOpts).then(function(){Hr.onComplete&&Hr.onComplete()}),he.emit("plotly_animatingframe",{name:pn,frame:Hr.frame,animation:{frame:Hr.frameOpts,transition:Hr.transitionOpts}})}else Tr()}function Vr(){he.emit("plotly_animating"),Re._lastFrameAt=-1/0,Re._timeToNext=0,Re._runningTransitions=0,Re._currentFrame=null;var Hr=function(){Re._animationRaf=window.requestAnimationFrame(Hr),Date.now()-Re._lastFrameAt>Re._timeToNext&&Dr()};Hr()}var Mr=0;function Fr(Hr){return Array.isArray(nt)?Mr>=nt.length?Hr.transitionOpts=nt[Mr]:Hr.transitionOpts=nt[0]:Hr.transitionOpts=nt,Mr++,Hr}var xr,br,Wr=[],Or=je==null,qr=Array.isArray(je),Er=!Or&&!qr&&u.isPlainObject(je);if(Er)Wr.push({type:"object",data:Fr(u.extendFlat({},je))});else if(Or||["string","number"].indexOf(typeof je)!==-1)for(xr=0;xr<Re._frames.length;xr++)br=Re._frames[xr],br&&(Or||String(br.group)===String(je))&&Wr.push({type:"byname",name:String(br.name),data:Fr({name:br.name})});else if(qr)for(xr=0;xr<je.length;xr++){var vr=je[xr];["number","string"].indexOf(typeof vr)!==-1?(vr=String(vr),Wr.push({type:"byname",name:vr,data:Fr({name:vr})})):u.isPlainObject(vr)&&Wr.push({type:"object",data:Fr(u.extendFlat({},vr))})}for(xr=0;xr<Wr.length;xr++)if(br=Wr[xr],br.type==="byname"&&!Re._frameHash[br.data.name]){u.warn('animate failure: frame not found: "'+br.data.name+'"'),jt();return}["next","immediate"].indexOf(Ne.mode)!==-1&&Ut(),Ne.direction==="reverse"&&Wr.reverse();var Ir=he._fullLayout._currentFrame;if(Ir&&Ne.fromcurrent){var ln=-1;for(xr=0;xr<Wr.length;xr++)if(br=Wr[xr],br.type==="byname"&&br.name===Ir){ln=xr;break}if(ln>0&&ln<Wr.length-1){var kn=[];for(xr=0;xr<Wr.length;xr++)br=Wr[xr],(Wr[xr].type!=="byname"||xr>ln)&&kn.push(br);Wr=kn}}Wr.length>0?Gt(Wr):(he.emit("plotly_animated"),ot())})}function Yt(he,je,Ne){if(he=u.getGraphDiv(he),je==null)return Promise.resolve();if(!u.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Re,nt,at,dt,Mt=he._transitionData._frames,Nt=he._transitionData._frameHash;if(!Array.isArray(je))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+je);var ot=Mt.length+je.length*2,jt=[],Ut={};for(Re=je.length-1;Re>=0;Re--)if(u.isPlainObject(je[Re])){var Gt=je[Re].name,Tr=(Nt[Gt]||Ut[Gt]||{}).name,Dr=je[Re].name,Vr=Nt[Tr]||Ut[Tr];Tr&&Dr&&typeof Dr=="number"&&Vr&&H<Y&&(H++,u.warn('addFrames: overwriting frame "'+(Nt[Tr]||Ut[Tr]).name+'" with a frame whose name of type "number" also equates to "'+Tr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),H===Y&&u.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ut[Gt]={name:Gt},jt.push({frame:o.supplyFrameDefaults(je[Re]),index:Ne&&Ne[Re]!==void 0&&Ne[Re]!==null?Ne[Re]:ot+Re})}jt.sort(function(Er,vr){return Er.index>vr.index?-1:Er.index<vr.index?1:0});var Mr=[],Fr=[],xr=Mt.length;for(Re=jt.length-1;Re>=0;Re--){if(nt=jt[Re].frame,typeof nt.name=="number"&&u.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!nt.name)for(;Nt[nt.name="frame "+he._transitionData._counter++];);if(Nt[nt.name]){for(at=0;at<Mt.length&&(Mt[at]||{}).name!==nt.name;at++);Mr.push({type:"replace",index:at,value:nt}),Fr.unshift({type:"replace",index:at,value:Mt[at]})}else dt=Math.max(0,Math.min(jt[Re].index,xr)),Mr.push({type:"insert",index:dt,value:nt}),Fr.unshift({type:"delete",index:dt}),xr++}var br=o.modifyFrames,Wr=o.modifyFrames,Or=[he,Fr],qr=[he,Mr];return m&&m.add(he,br,Or,Wr,qr),o.modifyFrames(he,Mr)}function sr(he,je){if(he=u.getGraphDiv(he),!u.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he);var Ne,Re,nt=he._transitionData._frames,at=[],dt=[];if(!je)for(je=[],Ne=0;Ne<nt.length;Ne++)je.push(Ne);for(je=je.slice(),je.sort(),Ne=je.length-1;Ne>=0;Ne--)Re=je[Ne],at.push({type:"delete",index:Re}),dt.unshift({type:"insert",index:Re,value:nt[Re]});var Mt=o.modifyFrames,Nt=o.modifyFrames,ot=[he,dt],jt=[he,at];return m&&m.add(he,Mt,ot,Nt,jt),o.modifyFrames(he,at)}function ze(he){he=u.getGraphDiv(he);var je=he._fullLayout||{},Ne=he._fullData||[];return o.cleanPlot([],{},Ne,je),o.purge(he),v.purge(he),je._container&&je._container.remove(),delete he._context,he}function Ye(he){var je=he._fullLayout,Ne=he.getBoundingClientRect();if(!u.equalDomRects(Ne,je._lastBBox)){var Re=je._invTransform=u.inverseTransformMatrix(u.getFullTransformMatrix(he));je._invScaleX=Math.sqrt(Re[0][0]*Re[0][0]+Re[0][1]*Re[0][1]+Re[0][2]*Re[0][2]),je._invScaleY=Math.sqrt(Re[1][0]*Re[1][0]+Re[1][1]*Re[1][1]+Re[1][2]*Re[1][2]),je._lastBBox=Ne}}function $e(he){var je=$.select(he),Ne=he._fullLayout;if(Ne._calcInverseTransform=Ye,Ne._calcInverseTransform(he),Ne._container=je.selectAll(".plot-container").data([0]),Ne._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),Ne._paperdiv=Ne._container.selectAll(".svg-container").data([0]),Ne._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ne._glcontainer=Ne._paperdiv.selectAll(".gl-container").data([{}]),Ne._glcontainer.enter().append("div").classed("gl-container",!0),Ne._paperdiv.selectAll(".main-svg").remove(),Ne._paperdiv.select(".modebar-container").remove(),Ne._paper=Ne._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ne._toppaper=Ne._paperdiv.append("svg").classed("main-svg",!0),Ne._modebardiv=Ne._paperdiv.append("div"),delete Ne._modeBar,Ne._hoverpaper=Ne._paperdiv.append("svg").classed("main-svg",!0),!Ne._uid){var Re={};$.selectAll("defs").each(function(){this.id&&(Re[this.id.split("-")[1]]=1)}),Ne._uid=u.randstr(Re)}Ne._paperdiv.selectAll(".main-svg").attr(C.svgAttrs),Ne._defs=Ne._paper.append("defs").attr("id","defs-"+Ne._uid),Ne._clips=Ne._defs.append("g").classed("clips",!0),Ne._topdefs=Ne._toppaper.append("defs").attr("id","topdefs-"+Ne._uid),Ne._topclips=Ne._topdefs.append("g").classed("clips",!0),Ne._bgLayer=Ne._paper.append("g").classed("bglayer",!0),Ne._draggers=Ne._paper.append("g").classed("draglayer",!0);var nt=Ne._paper.append("g").classed("layer-below",!0);Ne._imageLowerLayer=nt.append("g").classed("imagelayer",!0),Ne._shapeLowerLayer=nt.append("g").classed("shapelayer",!0),Ne._cartesianlayer=Ne._paper.append("g").classed("cartesianlayer",!0),Ne._polarlayer=Ne._paper.append("g").classed("polarlayer",!0),Ne._smithlayer=Ne._paper.append("g").classed("smithlayer",!0),Ne._ternarylayer=Ne._paper.append("g").classed("ternarylayer",!0),Ne._geolayer=Ne._paper.append("g").classed("geolayer",!0),Ne._funnelarealayer=Ne._paper.append("g").classed("funnelarealayer",!0),Ne._pielayer=Ne._paper.append("g").classed("pielayer",!0),Ne._iciclelayer=Ne._paper.append("g").classed("iciclelayer",!0),Ne._treemaplayer=Ne._paper.append("g").classed("treemaplayer",!0),Ne._sunburstlayer=Ne._paper.append("g").classed("sunburstlayer",!0),Ne._indicatorlayer=Ne._toppaper.append("g").classed("indicatorlayer",!0),Ne._glimages=Ne._paper.append("g").classed("glimages",!0);var at=Ne._toppaper.append("g").classed("layer-above",!0);Ne._imageUpperLayer=at.append("g").classed("imagelayer",!0),Ne._shapeUpperLayer=at.append("g").classed("shapelayer",!0),Ne._selectionLayer=Ne._toppaper.append("g").classed("selectionlayer",!0),Ne._infolayer=Ne._toppaper.append("g").classed("infolayer",!0),Ne._menulayer=Ne._toppaper.append("g").classed("menulayer",!0),Ne._zoomlayer=Ne._toppaper.append("g").classed("zoomlayer",!0),Ne._hoverlayer=Ne._hoverpaper.append("g").classed("hoverlayer",!0),Ne._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),he.emit("plotly_framework")}V.animate=pr,V.addFrames=Yt,V.deleteFrames=sr,V.addTraces=ae,V.deleteTraces=G,V.extendTraces=We,V.moveTraces=Q,V.prependTraces=te,V.newPlot=le,V._doPlot=Z,V.purge=ze,V.react=Bt,V.redraw=ne,V.relayout=xe,V.restyle=U,V.setPlotConfig=q,V.update=mt,V._guiRelayout=Ce(xe),V._guiRestyle=Ce(U),V._guiUpdate=Ce(mt),V._storeDirectGUIEdit=oe}}),uu=i({"src/snapshot/helpers.js"(V){var $=xn();V.getDelay=function(u){return u._has&&(u._has("gl3d")||u._has("mapbox")||u._has("map"))?500:0},V.getRedrawFunc=function(u){return function(){$.getComponentMethod("colorbar","draw")(u)}},V.encodeSVG=function(u){return"data:image/svg+xml,"+encodeURIComponent(u)},V.encodeJSON=function(u){return"data:application/json,"+encodeURIComponent(u)};var h=window.URL||window.webkitURL;V.createObjectURL=function(u){return h.createObjectURL(u)},V.revokeObjectURL=function(u){return h.revokeObjectURL(u)},V.createBlob=function(u,p){if(p==="svg")return new window.Blob([u],{type:"image/svg+xml;charset=utf-8"});if(p==="full-json")return new window.Blob([u],{type:"application/json;charset=utf-8"});var v=c(window.atob(u));return new window.Blob([v],{type:"image/"+p})},V.octetStream=function(u){document.location.href="data:application/octet-stream"+u};function c(u){for(var p=u.length,v=new ArrayBuffer(p),m=new Uint8Array(v),g=0;g<p;g++)m[g]=u.charCodeAt(g);return v}V.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/}}),jm=i({"src/snapshot/tosvg.js"(V,$){var h=f();_r();var c=oi(),u=ut();ns();var p=/"/g,v="TOBESTRIPPED",m=new RegExp('("'+v+")|("+v+'")',"g");function g(o){var T=h.select("body").append("div").style({display:"none"}).html(""),y=o.replace(/(&[^;]*;)/gi,function(k){return k==="&lt;"?"&#60;":k==="&rt;"?"&#62;":k.indexOf("<")!==-1||k.indexOf(">")!==-1?"":T.html(k).text()});return T.remove(),y}function w(o){return o.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}$.exports=function(T,y,k){var D=T._fullLayout,M=D._paper,A=D._toppaper,C=D.width,j=D.height,b;M.insert("rect",":first-child").call(c.setRect,0,0,C,j).call(u.fill,D.paper_bgcolor);var S=D._basePlotModules||[];for(b=0;b<S.length;b++){var L=S[b];L.toSVG&&L.toSVG(T)}if(A){var F=A.node().childNodes,P=Array.prototype.slice.call(F);for(b=0;b<P.length;b++){var J=P[b];J.childNodes.length&&M.node().appendChild(J)}}D._draggers&&D._draggers.remove(),M.node().style.background="",M.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var Y=h.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){Y.remove();return}else Y.style({visibility:null,display:null});var Z=this.style.fontFamily;Z&&Z.indexOf('"')!==-1&&Y.style("font-family",Z.replace(p,v));var z=this.style.fontWeight;z&&(z==="normal"||z==="400")&&Y.style("font-weight",void 0);var q=this.style.fontStyle;q&&q==="normal"&&Y.style("font-style",void 0);var X=this.style.fontVariant;X&&X==="normal"&&Y.style("font-variant",void 0)}),M.selectAll(".gradient_filled,.pattern_filled").each(function(){var Y=h.select(this),Z=this.style.fill;Z&&Z.indexOf("url(")!==-1&&Y.style("fill",Z.replace(p,v));var z=this.style.stroke;z&&z.indexOf("url(")!==-1&&Y.style("stroke",z.replace(p,v))}),(y==="pdf"||y==="eps")&&M.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),y==="svg"&&k&&(M.attr("width",k*C),M.attr("height",k*j),M.attr("viewBox","0 0 "+C+" "+j));var H=new window.XMLSerializer().serializeToString(M.node());return H=g(H),H=w(H),H=H.replace(m,"'"),H}}}),Lm=i({"src/snapshot/svgtoimg.js"(V,$){var h=_r(),c=bo().EventEmitter,u=uu();function p(v){var m=v.emitter||new c,g=new Promise(function(w,o){var T=window.Image,y=v.svg,k=v.format||"png",D=v.canvas,M=v.scale||1,A=v.width||300,C=v.height||150,j=M*A,b=M*C,S=D.getContext("2d",{willReadFrequently:!0}),L=new T,F,P;k==="svg"||h.isSafari()?P=u.encodeSVG(y):(F=u.createBlob(y,"svg"),P=u.createObjectURL(F)),D.width=j,D.height=b,L.onload=function(){var J;switch(F=null,u.revokeObjectURL(P),k!=="svg"&&S.drawImage(L,0,0,j,b),k){case"jpeg":J=D.toDataURL("image/jpeg");break;case"png":J=D.toDataURL("image/png");break;case"webp":J=D.toDataURL("image/webp");break;case"svg":J=P;break;default:var H="Image format is not jpeg, png, svg or webp.";if(o(new Error(H)),!v.promise)return m.emit("error",H)}w(J),v.promise||m.emit("success",J)},L.onerror=function(J){if(F=null,u.revokeObjectURL(P),o(J),!v.promise)return m.emit("error",J)},L.src=P});return v.promise?g:m}$.exports=p}}),Py=i({"src/plot_api/to_image.js"(V,$){var h=fe(),c=Ry(),u=xi(),p=_r(),v=uu(),m=jm(),g=Lm(),w=a().version,o={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function T(y,k){k=k||{};var D,M,A,C;p.isPlainObject(y)?(D=y.data||[],M=y.layout||{},A=y.config||{},C={}):(y=p.getGraphDiv(y),D=p.extendDeep([],y.data),M=p.extendDeep({},y.layout),A=y._context,C=y._fullLayout||{});function j(le){return!(le in k)||p.validate(k[le],o[le])}if(!j("width")&&k.width!==null||!j("height")&&k.height!==null)throw new Error("Height and width should be pixel values.");if(!j("format"))throw new Error("Export format is not "+p.join2(o.format.values,", "," or ")+".");var b={};function S(le,W){return p.coerce(k,b,o,le,W)}var L=S("format"),F=S("width"),P=S("height"),J=S("scale"),H=S("setBackground"),Y=S("imageDataOnly"),Z=document.createElement("div");Z.style.position="absolute",Z.style.left="-5000px",document.body.appendChild(Z);var z=p.extendFlat({},M);F?z.width=F:k.width===null&&h(C.width)&&(z.width=C.width),P?z.height=P:k.height===null&&h(C.height)&&(z.height=C.height);var q=p.extendFlat({},A,{_exportedPlot:!0,staticPlot:!0,setBackground:H}),X=v.getRedrawFunc(Z);function K(){return new Promise(function(le){setTimeout(le,v.getDelay(Z._fullLayout))})}function ee(){return new Promise(function(le,W){var ce=m(Z,L,J),de=Z._fullLayout.width,ve=Z._fullLayout.height;function pe(){c.purge(Z),document.body.removeChild(Z)}if(L==="full-json"){var be=u.graphJson(Z,!1,"keepdata","object",!0,!0);return be.version=w,be=JSON.stringify(be),pe(),le(Y?be:v.encodeJSON(be))}if(pe(),L==="svg")return le(Y?ce:v.encodeSVG(ce));var Le=document.createElement("canvas");Le.id=p.randstr(),g({format:L,width:de,height:ve,scale:J,canvas:Le,svg:ce,promise:!0}).then(le).catch(W)})}function ne(le){return Y?le.replace(v.IMAGE_URL_PREFIX,""):le}return new Promise(function(le,W){c.newPlot(Z,D,z,q).then(X).then(K).then(ee).then(function(ce){le(ne(ce))}).catch(function(ce){W(ce)})})}$.exports=T}}),o5=i({"src/plot_api/validate.js"(V,$){var h=_r(),c=xi(),u=Dt(),p=Ht().dfltConfig,v=h.isPlainObject,m=Array.isArray,g=h.isArrayOrTypedArray;$.exports=function(S,L){S===void 0&&(S=[]),L===void 0&&(L={});var F=u.get(),P=[],J={_context:h.extendFlat({},p)},H,Y;m(S)?(J.data=h.extendDeep([],S),H=S):(J.data=[],H=[],P.push(k("array","data"))),v(L)?(J.layout=h.extendDeep({},L),Y=L):(J.layout={},Y={},arguments.length>1&&P.push(k("object","layout"))),c.supplyDefaults(J);for(var Z=J._fullData,z=H.length,q=0;q<z;q++){var X=H[q],K=["data",q];if(!v(X)){P.push(k("object",K));continue}var ee=Z[q],ne=ee.type,le=F.traces[ne].attributes;le.type={valType:"enumerated",values:[ne]},ee.visible===!1&&X.visible!==!1&&P.push(k("invisible",K)),w(X,ee,le,P,K)}var W=J._fullLayout,ce=o(F,Z);return w(Y,W,ce,P,"layout"),P.length===0?void 0:P};function w(b,S,L,F,P,J){J=J||[];for(var H=Object.keys(b),Y=0;Y<H.length;Y++){var Z=H[Y],z=J.slice();z.push(Z);var q=b[Z],X=S[Z],K=M(L,Z),ee=(K||{}).valType,ne=ee==="info_array",le=ee==="colorscale",W=(K||{}).items;if(!D(L,Z))F.push(k("schema",P,z));else if(v(q)&&v(X)&&ee!=="any")w(q,X,K,F,P,z);else if(ne&&m(q)){q.length>X.length&&F.push(k("unused",P,z.concat(X.length)));var ce=X.length,de=Array.isArray(W);de&&(ce=Math.min(ce,W.length));var ve,pe,be,Le,Ae;if(K.dimensions===2)for(pe=0;pe<ce;pe++)if(m(q[pe])){q[pe].length>X[pe].length&&F.push(k("unused",P,z.concat(pe,X[pe].length)));var We=X[pe].length;for(ve=0;ve<(de?Math.min(We,W[pe].length):We);ve++)be=de?W[pe][ve]:W,Le=q[pe][ve],Ae=X[pe][ve],h.validate(Le,be)?Ae!==Le&&Ae!==+Le&&F.push(k("dynamic",P,z.concat(pe,ve),Le,Ae)):F.push(k("value",P,z.concat(pe,ve),Le))}else F.push(k("array",P,z.concat(pe),q[pe]));else for(pe=0;pe<ce;pe++)be=de?W[pe]:W,Le=q[pe],Ae=X[pe],h.validate(Le,be)?Ae!==Le&&Ae!==+Le&&F.push(k("dynamic",P,z.concat(pe),Le,Ae)):F.push(k("value",P,z.concat(pe),Le))}else if(K.items&&!ne&&m(q)){var te=W[Object.keys(W)[0]],ae=[],G,Q;for(G=0;G<X.length;G++){var U=X[G]._index||G;if(Q=z.slice(),Q.push(U),v(q[U])&&v(X[G])){ae.push(U);var re=q[U],R=X[G];v(re)&&re.visible!==!1&&R.visible===!1?F.push(k("invisible",P,Q)):w(re,R,te,F,P,Q)}}for(G=0;G<q.length;G++)Q=z.slice(),Q.push(G),v(q[G])?ae.indexOf(G)===-1&&F.push(k("unused",P,Q)):F.push(k("object",P,Q,q[G]))}else!v(q)&&v(X)?F.push(k("object",P,z,q)):!g(q)&&g(X)&&!ne&&!le?F.push(k("array",P,z,q)):Z in S?h.validate(q,K)?K.valType==="enumerated"&&(K.coerceNumber&&q!==+X||q!==X)&&F.push(k("dynamic",P,z,q,X)):F.push(k("value",P,z,q)):F.push(k("unused",P,z,q))}return F}function o(b,S){for(var L=b.layout.layoutAttributes,F=0;F<S.length;F++){var P=S[F],J=b.traces[P.type],H=J.layoutAttributes;H&&(P.subplot?h.extendFlat(L[J.attributes.subplot.dflt],H):h.extendFlat(L,H))}return L}var T={object:function(b,S){var L;return b==="layout"&&S===""?L="The layout argument":b[0]==="data"&&S===""?L="Trace "+b[1]+" in the data argument":L=y(b)+"key "+S,L+" must be linked to an object container"},array:function(b,S){var L;return b==="data"?L="The data argument":L=y(b)+"key "+S,L+" must be linked to an array container"},schema:function(b,S){return y(b)+"key "+S+" is not part of the schema"},unused:function(b,S,L){var F=v(L)?"container":"key";return y(b)+F+" "+S+" did not get coerced"},dynamic:function(b,S,L,F){return[y(b)+"key",S,"(set to '"+L+"')","got reset to","'"+F+"'","during defaults."].join(" ")},invisible:function(b,S){return(S?y(b)+"item "+S:"Trace "+b[1])+" got defaulted to be not visible"},value:function(b,S,L){return[y(b)+"key "+S,"is set to an invalid value ("+L+")"].join(" ")}};function y(b){return m(b)?"In data trace "+b[1]+", ":"In "+b+", "}function k(b,S,L,F,P){L=L||"";var J,H;m(S)?(J=S[0],H=S[1]):(J=S,H=null);var Y=j(L),Z=T[b](S,Y,F,P);return h.log(Z),{code:b,container:J,trace:H,path:L,astr:Y,msg:Z}}function D(b,S){var L=C(S),F=L.keyMinusId,P=L.id;return F in b&&b[F]._isSubplotObj&&P?!0:S in b}function M(b,S){if(S in b)return b[S];var L=C(S);return b[L.keyMinusId]}var A=h.counterRegex("([a-z]+)");function C(b){var S=b.match(A);return{keyMinusId:S&&S[1],id:S&&S[2]}}function j(b){if(!m(b))return String(b);for(var S="",L=0;L<b.length;L++){var F=b[L];typeof F=="number"?S=S.substr(0,S.length-1)+"["+F+"]":S+=F,L<b.length-1&&(S+=".")}return S}}}),l5=i({"src/snapshot/filesaver.js"(V,$){var h=_r(),c=uu();function u(p,v,m){var g=document.createElement("a"),w="download"in g,o=new Promise(function(T,y){var k,D;if(w)return k=c.createBlob(p,m),D=c.createObjectURL(k),g.href=D,g.download=v,document.body.appendChild(g),g.click(),document.body.removeChild(g),c.revokeObjectURL(D),k=null,T(v);if(h.isSafari()){var M=m==="svg"?",":";base64,";return c.octetStream(M+encodeURIComponent(p)),T(v)}y(new Error("download error"))});return o}$.exports=u}}),Ny=i({"src/snapshot/download.js"(V,$){var h=_r(),c=Py(),u=l5();uu();function p(v,m){var g;return h.isPlainObject(v)||(g=h.getGraphDiv(v)),m=m||{},m.format=m.format||"png",m.width=m.width||null,m.height=m.height||null,m.imageDataOnly=!0,new Promise(function(w,o){g&&g._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),g&&(g._snapshotInProgress=!0);var T=c(v,m),y=m.filename||v.fn||"newplot";y+="."+m.format.replace("-","."),T.then(function(k){return g&&(g._snapshotInProgress=!1),u(k,y,m.format)}).then(function(k){w(k)}).catch(function(k){g&&(g._snapshotInProgress=!1),o(k)})})}$.exports=p}}),c5=i({"src/plot_api/template_api.js"(V){var $=_r(),h=$.isPlainObject,c=Dt(),u=xi(),p=vt(),v=hr(),m=Ht().dfltConfig;V.makeTemplate=function(A){A=$.isPlainObject(A)?A:$.getGraphDiv(A),A=$.extendDeep({_context:m},{data:A.data,layout:A.layout}),u.supplyDefaults(A);var C=A.data||[],j=A.layout||{};j._basePlotModules=A._fullLayout._basePlotModules,j._modules=A._fullLayout._modules;var b={data:{},layout:{}};C.forEach(function(q){var X={};o(q,X,y.bind(null,q));var K=$.coerce(q,{},p,"type"),ee=b.data[K];ee||(ee=b.data[K]=[]),ee.push(X)}),o(j,b.layout,T.bind(null,j)),delete b.layout.template;var S=j.template;if(h(S)){var L=S.layout,F,P,J,H,Y,Z;h(L)&&g(L,b.layout);var z=S.data;if(h(z)){for(P in b.data)if(J=z[P],Array.isArray(J)){for(Y=b.data[P],Z=Y.length,H=J.length,F=0;F<Z;F++)g(J[F%H],Y[F]);for(F=Z;F<H;F++)Y.push($.extendDeep({},J[F]))}for(P in z)P in b.data||(b.data[P]=$.extendDeep([],z[P]))}}return b};function g(A,C){A=$.extendDeep({},A);var j=Object.keys(A).sort(),b,S;function L(Y,Z,z){if(h(Z)&&h(Y))g(Y,Z);else if(Array.isArray(Z)&&Array.isArray(Y)){var q=v.arrayTemplater({_template:A},z);for(S=0;S<Z.length;S++){var X=Z[S],K=q.newItem(X)._template;K&&g(K,X)}var ee=q.defaultItems();for(S=0;S<ee.length;S++)Z.push(ee[S]._template);for(S=0;S<Z.length;S++)delete Z[S].templateitemname}}for(b=0;b<j.length;b++){var F=j[b],P=A[F];if(F in C?L(P,C[F],F):C[F]=P,w(F)===F)for(var J in C){var H=w(J);J!==H&&H===F&&!(J in A)&&L(P,C[J],F)}}}function w(A){return A.replace(/[0-9]+$/,"")}function o(A,C,j,b,S){var L=S&&j(S);for(var F in A){var P=A[F],J=k(A,F,b),H=k(A,F,S),Y=j(H);if(!Y){var Z=w(F);Z!==F&&(H=k(A,Z,S),Y=j(H))}if(!(L&&L===Y)&&!(!Y||Y._noTemplating||Y.valType==="data_array"||Y.arrayOk&&Array.isArray(P)))if(!Y.valType&&h(P))o(P,C,j,J,H);else if(Y._isLinkedToArray&&Array.isArray(P))for(var z=!1,q=0,X={},K=0;K<P.length;K++){var ee=P[K];if(h(ee)){var ne=ee.name;if(ne)X[ne]||(o(ee,C,j,k(P,q,J),k(P,q,H)),q++,X[ne]=1);else if(!z){var le=v.arrayDefaultKey(F),W=k(A,le,b),ce=k(P,q,J);o(ee,C,j,ce,k(P,q,H));var de=$.nestedProperty(C,ce),ve=$.nestedProperty(C,W);ve.set(de.get()),de.set(null),z=!0}}}else{var pe=$.nestedProperty(C,J);pe.set(P)}}}function T(A,C){return c.getLayoutValObject(A,$.nestedProperty({},C).parts)}function y(A,C){return c.getTraceValObject(A,$.nestedProperty({},C).parts)}function k(A,C,j){var b;return j?Array.isArray(A)?b=j+"["+C+"]":b=j+"."+C:b=C,b}V.validateTemplate=function(A,C){var j=$.extendDeep({},{_context:m,data:A.data,layout:A.layout}),b=j.layout||{};h(C)||(C=b.template||{});var S=C.layout,L=C.data,F=[];j.layout=b,j.layout.template=C,u.supplyDefaults(j);var P=j._fullLayout,J=j._fullData,H={};function Y(W,ce){for(var de in W)if(de.charAt(0)!=="_"&&h(W[de])){var ve=w(de),pe=[],be;for(be=0;be<ce.length;be++)pe.push(k(W,de,ce[be])),ve!==de&&pe.push(k(W,ve,ce[be]));for(be=0;be<pe.length;be++)H[pe[be]]=1;Y(W[de],pe)}}function Z(W,ce){for(var de in W)if(de.indexOf("defaults")===-1&&h(W[de])){var ve=k(W,de,ce);H[ve]?Z(W[de],ve):F.push({code:"unused",path:ve})}}if(h(S)?(Y(P,["layout"]),Z(S,"layout")):F.push({code:"layout"}),!h(L))F.push({code:"data"});else{for(var z={},q,X=0;X<J.length;X++){var K=J[X];q=K.type,z[q]=(z[q]||0)+1,K._fullInput._template||F.push({code:"missing",index:K.index,traceType:q})}for(q in L){var ee=L[q].length,ne=z[q]||0;ee>ne?F.push({code:"unused",traceType:q,templateCount:ee,dataCount:ne}):ne>ee&&F.push({code:"reused",traceType:q,templateCount:ee,dataCount:ne})}}function le(W,ce){for(var de in W)if(de.charAt(0)!=="_"){var ve=W[de],pe=k(W,de,ce);h(ve)?(Array.isArray(W)&&ve._template===!1&&ve.templateitemname&&F.push({code:"missing",path:pe,templateitemname:ve.templateitemname}),le(ve,pe)):Array.isArray(ve)&&D(ve)&&le(ve,pe)}}if(le({data:J,layout:P},""),F.length)return F.map(M)};function D(A){for(var C=0;C<A.length;C++)if(h(A[C]))return!0}function M(A){var C;switch(A.code){case"data":C="The template has no key data.";break;case"layout":C="The template has no key layout.";break;case"missing":A.path?C="There are no templates for item "+A.path+" with name "+A.templateitemname:C="There are no templates for trace "+A.index+", of type "+A.traceType+".";break;case"unused":A.path?C="The template item at "+A.path+" was not used in constructing the plot.":A.dataCount?C="Some of the templates of type "+A.traceType+" were not used. The template has "+A.templateCount+" traces, the data only has "+A.dataCount+" of this type.":C="The template has "+A.templateCount+" traces of type "+A.traceType+" but there are none in the data.";break;case"reused":C="Some of the templates of type "+A.traceType+" were used more than once. The template has "+A.templateCount+" traces, the data has "+A.dataCount+" of this type.";break}return A.msg=C,A}}}),u5=i({"src/plot_api/index.js"(V){var $=Ry();V._doPlot=$._doPlot,V.newPlot=$.newPlot,V.restyle=$.restyle,V.relayout=$.relayout,V.redraw=$.redraw,V.update=$.update,V._guiRestyle=$._guiRestyle,V._guiRelayout=$._guiRelayout,V._guiUpdate=$._guiUpdate,V._storeDirectGUIEdit=$._storeDirectGUIEdit,V.react=$.react,V.extendTraces=$.extendTraces,V.prependTraces=$.prependTraces,V.addTraces=$.addTraces,V.deleteTraces=$.deleteTraces,V.moveTraces=$.moveTraces,V.purge=$.purge,V.addFrames=$.addFrames,V.deleteFrames=$.deleteFrames,V.animate=$.animate,V.setPlotConfig=$.setPlotConfig;var h=Kn().getGraphDiv,c=ua().eraseActiveShape;V.deleteActiveShape=function(p){return c(h(p))},V.toImage=Py(),V.validate=o5(),V.downloadImage=Ny();var u=c5();V.makeTemplate=u.makeTemplate,V.validateTemplate=u.validateTemplate}}),zy=i({"src/traces/scatter/xy_defaults.js"(V,$){var h=_r(),c=xn();$.exports=function(p,v,m,g){var w=g("x"),o=g("y"),T,y=c.getComponentMethod("calendars","handleTraceDefaults");if(y(p,v,["x","y"],m),w){var k=h.minRowLength(w);o?T=Math.min(k,h.minRowLength(o)):(T=k,g("y0"),g("dy"))}else{if(!o)return 0;T=h.minRowLength(o),g("x0"),g("dx")}return v._length=T,T}}}),Fy=i({"src/traces/scatter/period_defaults.js"(V,$){var h=_r().dateTick0,c=Te(),u=c.ONEWEEK;function p(v,m){return v%u===0?h(m,1):h(m,0)}$.exports=function(m,g,w,o,T){if(T||(T={x:!0,y:!0}),T.x){var y=o("xperiod");y&&(o("xperiod0",p(y,g.xcalendar)),o("xperiodalignment"))}if(T.y){var k=o("yperiod");k&&(o("yperiod0",p(k,g.ycalendar)),o("yperiodalignment"))}}}}),d5=i({"src/traces/scatter/stack_defaults.js"(V,$){var h=["orientation","groupnorm","stackgaps"];$.exports=function(u,p,v,m){var g=v._scatterStackOpts,w=m("stackgroup");if(w){var o=p.xaxis+p.yaxis,T=g[o];T||(T=g[o]={});var y=T[w],k=!1;y?y.traces.push(p):(y=T[w]={traceIndices:[],traces:[p]},k=!0);for(var D={orientation:p.x&&!p.y?"h":"v"},M=0;M<h.length;M++){var A=h[M],C=A+"Found";if(!y[C]){var j=u[A]!==void 0,b=A==="orientation";if((j||k)&&(y[A]=m(A,D[A]),b&&(y.fillDflt=y[A]==="h"?"tonextx":"tonexty"),j&&(y[C]=!0,!k&&(delete y.traces[0][A],b))))for(var S=0;S<y.traces.length-1;S++){var L=y.traces[S];L._input.fill!==L.fill&&(L.fill=y.fillDflt)}}}return y}}}}),f5=i({"src/traces/scatter/marker_defaults.js"(V,$){var h=ut(),c=Ha().hasColorscale,u=is(),p=za();$.exports=function(m,g,w,o,T,y){var k=p.isBubble(m),D=(m.line||{}).color,M;if(y=y||{},D&&(w=D),T("marker.symbol"),T("marker.opacity",k?.7:1),T("marker.size"),y.noAngle||(T("marker.angle"),y.noAngleRef||T("marker.angleref"),y.noStandOff||T("marker.standoff")),T("marker.color",w),c(m,"marker")&&u(m,g,o,T,{prefix:"marker.",cLetter:"c"}),y.noSelect||(T("selected.marker.color"),T("unselected.marker.color"),T("selected.marker.size"),T("unselected.marker.size")),y.noLine||(D&&!Array.isArray(D)&&g.marker.color!==D?M=D:k?M=h.background:M=h.defaultLine,T("marker.line.color",M),c(m,"marker.line")&&u(m,g,o,T,{prefix:"marker.line.",cLetter:"c"}),T("marker.line.width",k?1:0)),k&&(T("marker.sizeref"),T("marker.sizemin"),T("marker.sizemode")),y.gradient){var A=T("marker.gradient.type");A!=="none"&&T("marker.gradient.color")}}}}),h5=i({"src/traces/scatter/line_defaults.js"(V,$){var h=_r().isArrayOrTypedArray,c=Ha().hasColorscale,u=is();$.exports=function(v,m,g,w,o,T){T||(T={});var y=(v.marker||{}).color;if(y&&y._inputArray&&(y=y._inputArray),o("line.color",g),c(v,"line"))u(v,m,w,o,{prefix:"line.",cLetter:"c"});else{var k=(h(y)?!1:y)||g;o("line.color",k)}o("line.width"),T.noDash||o("line.dash"),T.backoff&&o("line.backoff")}}}),p5=i({"src/traces/scatter/line_shape_defaults.js"(V,$){$.exports=function(c,u,p){var v=p("line.shape");v==="spline"&&p("line.smoothing")}}}),m5=i({"src/traces/scatter/text_defaults.js"(V,$){var h=_r();$.exports=function(c,u,p,v,m){m=m||{},v("textposition"),h.coerceFont(v,"textfont",m.font||p.font,m),m.noSelect||(v("selected.textfont.color"),v("unselected.textfont.color"))}}}),v5=i({"src/traces/scatter/fillcolor_defaults.js"(V,$){var h=ut(),c=_r().isArrayOrTypedArray;function u(p){for(var v=h.interpolate(p[0][1],p[1][1],.5),m=2;m<p.length;m++){var g=h.interpolate(p[m-1][1],p[m][1],.5);v=h.interpolate(v,g,p[m-1][0]/p[m][0])}return v}$.exports=function(v,m,g,w,o){o||(o={});var T=!1;if(m.marker){var y=m.marker.color,k=(m.marker.line||{}).color;y&&!c(y)?T=y:k&&!c(k)&&(T=k)}var D;if(o.moduleHasFillgradient){var M=w("fillgradient.type");if(M!=="none"){w("fillgradient.start"),w("fillgradient.stop");var A=w("fillgradient.colorscale");A&&(D=u(A))}}w("fillcolor",h.addOpacity((m.line||{}).color||T||D||g,.5))}}}),g5=i({"src/traces/scatter/defaults.js"(V,$){var h=_r(),c=xn(),u=cu(),p=Cm(),v=za(),m=zy(),g=Fy(),w=d5(),o=f5(),T=h5(),y=p5(),k=m5(),D=v5(),M=_r().coercePattern;$.exports=function(C,j,b,S){function L(q,X){return h.coerce(C,j,u,q,X)}var F=m(C,j,S,L);if(F||(j.visible=!1),!!j.visible){g(C,j,S,L),L("xhoverformat"),L("yhoverformat"),L("zorder");var P=w(C,j,S,L);S.scattermode==="group"&&j.orientation===void 0&&L("orientation","v");var J=!P&&F<p.PTS_LINESONLY?"lines+markers":"lines";L("text"),L("hovertext"),L("mode",J),v.hasMarkers(j)&&o(C,j,b,S,L,{gradient:!0}),v.hasLines(j)&&(T(C,j,b,S,L,{backoff:!0}),y(C,j,L),L("connectgaps"),L("line.simplify")),v.hasText(j)&&(L("texttemplate"),k(C,j,S,L));var H=[];(v.hasMarkers(j)||v.hasText(j))&&(L("cliponaxis"),L("marker.maxdisplayed"),H.push("points")),L("fill",P?P.fillDflt:"none"),j.fill!=="none"&&(D(C,j,b,L,{moduleHasFillgradient:!0}),v.hasLines(j)||y(C,j,L),M(L,"fillpattern",j.fillcolor,!1));var Y=(j.line||{}).color,Z=(j.marker||{}).color;(j.fill==="tonext"||j.fill==="toself")&&H.push("fills"),L("hoveron",H.join("+")||"points"),j.hoveron!=="fills"&&L("hovertemplate");var z=c.getComponentMethod("errorbars","supplyDefaults");z(C,j,Y||Z||b,{axis:"y"}),z(C,j,Y||Z||b,{axis:"x",inherit:"y"}),h.coerceSelectionMarkerOpacity(j,L)}}}}),Iy=i({"src/traces/scatter/grouping_defaults.js"(V,$){var h=Oo().getAxisGroup;$.exports=function(u,p,v,m,g){var w=p.orientation,o=p[{v:"x",h:"y"}[w]+"axis"],T=h(v,o)+w,y=v._alignmentOpts||{},k=m("alignmentgroup"),D=y[T];D||(D=y[T]={});var M=D[k];M?M.traces.push(p):M=D[k]={traces:[p],alignmentIndex:Object.keys(D).length,offsetGroups:{}};var A=m("offsetgroup")||"",C=M.offsetGroups,j=C[A];p._offsetIndex=0,(g!=="group"||A)&&(j||(j=C[A]={offsetIndex:Object.keys(C).length}),p._offsetIndex=j.offsetIndex)}}}),y5=i({"src/traces/scatter/cross_trace_defaults.js"(V,$){var h=_r(),c=Iy(),u=cu();$.exports=function(v,m){var g,w,o,T=m.scattermode;function y(C){return h.coerce(w._input,w,u,C)}if(m.scattermode==="group")for(o=0;o<v.length;o++)w=v[o],w.type==="scatter"&&(g=w._input,c(g,w,m,y,T));for(o=0;o<v.length;o++){var k=v[o];if(k.type==="scatter"){var D=k.fill;if(!(D==="none"||D==="toself")&&(k.opacity=void 0,D==="tonexty"||D==="tonextx"))for(var M=o-1;M>=0;M--){var A=v[M];if(A.type==="scatter"&&A.xaxis===k.xaxis&&A.yaxis===k.yaxis){A.opacity=void 0;break}}}}}}}),x5=i({"src/traces/scatter/layout_defaults.js"(V,$){var h=_r(),c=An();$.exports=function(u,p){function v(g,w){return h.coerce(u,p,c,g,w)}var m=p.barmode==="group";p.scattermode==="group"&&v("scattergap",m?p.bargap:.2)}}}),Oy=i({"src/plots/cartesian/align_period.js"(V,$){var h=fe(),c=_r(),u=c.dateTime2ms,p=c.incrementMonth,v=Te(),m=v.ONEAVGMONTH;$.exports=function(w,o,T,y){if(o.type!=="date")return{vals:y};var k=w[T+"periodalignment"];if(!k)return{vals:y};var D=w[T+"period"],M;if(h(D)){if(D=+D,D<=0)return{vals:y}}else if(typeof D=="string"&&D.charAt(0)==="M"){var A=+D.substring(1);if(A>0&&Math.round(A)===A)M=A;else return{vals:y}}for(var C=o.calendar,j=k==="start",b=k==="end",S=w[T+"period0"],L=u(S,C)||0,F=[],P=[],J=[],H=y.length,Y=0;Y<H;Y++){var Z=y[Y],z,q,X;if(M){for(z=Math.round((Z-L)/(M*m)),X=p(L,M*z,C);X>Z;)X=p(X,-M,C);for(;X<=Z;)X=p(X,M,C);q=p(X,-M,C)}else{for(z=Math.round((Z-L)/D),X=L+z*D;X>Z;)X-=D;for(;X<=Z;)X+=D;q=X-D}F[Y]=j?q:b?X:(q+X)/2,P[Y]=q,J[Y]=X}return{vals:F,starts:P,ends:J}}}}),b5=i({"src/traces/scatter/colorscale_calc.js"(V,$){var h=Ha().hasColorscale,c=fc(),u=za();$.exports=function(v,m){u.hasLines(m)&&h(m,"line")&&c(v,m,{vals:m.line.color,containerStr:"line",cLetter:"c"}),u.hasMarkers(m)&&(h(m,"marker")&&c(v,m,{vals:m.marker.color,containerStr:"marker",cLetter:"c"}),h(m,"marker.line")&&c(v,m,{vals:m.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}}}),By=i({"src/traces/scatter/arrays_to_calcdata.js"(V,$){var h=_r();$.exports=function(u,p){for(var v=0;v<u.length;v++)u[v].i=v;h.mergeArray(p.text,u,"tx"),h.mergeArray(p.texttemplate,u,"txt"),h.mergeArray(p.hovertext,u,"htx"),h.mergeArray(p.customdata,u,"data"),h.mergeArray(p.textposition,u,"tp"),p.textfont&&(h.mergeArrayCastPositive(p.textfont.size,u,"ts"),h.mergeArray(p.textfont.color,u,"tc"),h.mergeArray(p.textfont.family,u,"tf"),h.mergeArray(p.textfont.weight,u,"tw"),h.mergeArray(p.textfont.style,u,"ty"),h.mergeArray(p.textfont.variant,u,"tv"),h.mergeArray(p.textfont.textcase,u,"tC"),h.mergeArray(p.textfont.lineposition,u,"tE"),h.mergeArray(p.textfont.shadow,u,"tS"));var m=p.marker;if(m){h.mergeArrayCastPositive(m.size,u,"ms"),h.mergeArrayCastPositive(m.opacity,u,"mo"),h.mergeArray(m.symbol,u,"mx"),h.mergeArray(m.angle,u,"ma"),h.mergeArray(m.standoff,u,"mf"),h.mergeArray(m.color,u,"mc");var g=m.line;m.line&&(h.mergeArray(g.color,u,"mlc"),h.mergeArrayCastPositive(g.width,u,"mlw"));var w=m.gradient;w&&w.type!=="none"&&(h.mergeArray(w.type,u,"mgt"),h.mergeArray(w.color,u,"mgc"))}}}}),Hy=i({"src/traces/scatter/calc_selection.js"(V,$){var h=_r();$.exports=function(u,p){h.isArrayOrTypedArray(p.selectedpoints)&&h.tagSelected(u,p)}}}),Wy=i({"src/traces/scatter/calc.js"(V,$){var h=fe(),c=_r(),u=ji(),p=Oy(),v=Te().BADNUM,m=za(),g=b5(),w=By(),o=Hy();function T(C,j){var b=C._fullLayout,S=j._xA=u.getFromId(C,j.xaxis||"x","x"),L=j._yA=u.getFromId(C,j.yaxis||"y","y"),F=S.makeCalcdata(j,"x"),P=L.makeCalcdata(j,"y"),J=p(j,S,"x",F),H=p(j,L,"y",P),Y=J.vals,Z=H.vals,z=j._length,q=new Array(z),X=j.ids,K=A(j,b,S,L),ee=!1,ne,le,W,ce,de,ve;D(b,j);var pe="x",be="y",Le;if(K)c.pushUnique(K.traceIndices,j.index),ne=K.orientation==="v",ne?(be="s",Le="x"):(pe="s",Le="y"),de=K.stackgaps==="interpolate";else{var Ae=k(j,z);y(C,j,S,L,Y,Z,Ae)}var We=!!j.xperiodalignment,te=!!j.yperiodalignment;for(le=0;le<z;le++){var ae=q[le]={},G=h(Y[le]),Q=h(Z[le]);G&&Q?(ae[pe]=Y[le],ae[be]=Z[le],We&&(ae.orig_x=F[le],ae.xEnd=J.ends[le],ae.xStart=J.starts[le]),te&&(ae.orig_y=P[le],ae.yEnd=H.ends[le],ae.yStart=H.starts[le])):K&&(ne?G:Q)?(ae[Le]=ne?Y[le]:Z[le],ae.gap=!0,de?(ae.s=v,ee=!0):ae.s=0):ae[pe]=ae[be]=v,X&&(ae.id=String(X[le]))}if(w(q,j),g(C,j),o(q,j),K){for(le=0;le<q.length;)q[le][Le]===v?q.splice(le,1):le++;if(c.sort(q,function(B,oe){return B[Le]-oe[Le]||B.i-oe.i}),ee){for(le=0;le<q.length-1&&q[le].gap;)le++;for(ve=q[le].s,ve||(ve=q[le].s=0),W=0;W<le;W++)q[W].s=ve;for(ce=q.length-1;ce>le&&q[ce].gap;)ce--;for(ve=q[ce].s,W=q.length-1;W>ce;W--)q[W].s=ve;for(;le<ce;)if(le++,q[le].gap){for(W=le+1;q[W].gap;)W++;for(var U=q[le-1][Le],re=q[le-1].s,R=(q[W].s-re)/(q[W][Le]-U);le<W;)q[le].s=re+(q[le][Le]-U)*R,le++}}}return q}function y(C,j,b,S,L,F,P){var J=j._length,H=C._fullLayout,Y=b._id,Z=S._id,z=H._firstScatter[M(j)]===j.uid,q=(A(j,H,b,S)||{}).orientation,X=j.fill;b._minDtick=0,S._minDtick=0;var K={padded:!0},ee={padded:!0};P&&(K.ppad=ee.ppad=P);var ne=J<2||L[0]!==L[J-1]||F[0]!==F[J-1];ne&&(X==="tozerox"||X==="tonextx"&&(z||q==="h"))?K.tozero=!0:!(j.error_y||{}).visible&&(X==="tonexty"||X==="tozeroy"||!m.hasMarkers(j)&&!m.hasText(j))&&(K.padded=!1,K.ppad=0),ne&&(X==="tozeroy"||X==="tonexty"&&(z||q==="v"))?ee.tozero=!0:(X==="tonextx"||X==="tozerox")&&(ee.padded=!1),Y&&(j._extremes[Y]=u.findExtremes(b,L,K)),Z&&(j._extremes[Z]=u.findExtremes(S,F,ee))}function k(C,j){if(m.hasMarkers(C)){var b=C.marker,S=1.6*(C.marker.sizeref||1),L;if(C.marker.sizemode==="area"?L=function(Y){return Math.max(Math.sqrt((Y||0)/S),3)}:L=function(Y){return Math.max((Y||0)/S,3)},c.isArrayOrTypedArray(b.size)){var F={type:"linear"};u.setConvert(F);for(var P=F.makeCalcdata(C.marker,"size"),J=new Array(j),H=0;H<j;H++)J[H]=L(P[H]);return J}else return L(b.size)}}function D(C,j){var b=M(j),S=C._firstScatter;S[b]||(S[b]=j.uid)}function M(C){var j=C.stackgroup;return C.xaxis+C.yaxis+C.type+(j?"-"+j:"")}function A(C,j,b,S){var L=C.stackgroup;if(L){var F=j._scatterStackOpts[b._id+S._id][L],P=F.orientation==="v"?S:b;if(P.type==="linear"||P.type==="log")return F}}$.exports={calc:T,calcMarkerSize:k,calcAxisExpansion:y,setFirstScatter:D,getStackOpts:A}}}),w5=i({"src/traces/bar/sieve.js"(V,$){$.exports=c;var h=_r().distinctVals;function c(u,p){this.traces=u,this.sepNegVal=p.sepNegVal,this.overlapNoMerge=p.overlapNoMerge;for(var v=1/0,m=p.posAxis._id.charAt(0),g=[],w=0;w<u.length;w++){for(var o=u[w],T=0;T<o.length;T++){var y=o[T],k=y.p;k===void 0&&(k=y[m]),k!==void 0&&g.push(k)}o[0]&&o[0].width1&&(v=Math.min(o[0].width1,v))}this.positions=g;var D=h(g);this.distinctPositions=D.vals,D.vals.length===1&&v!==1/0?this.minDiff=v:this.minDiff=Math.min(D.minDiff,v);var M=(p.posAxis||{}).type;(M==="category"||M==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}c.prototype.put=function(p,v,m){var g=this.getLabel(p,v,m),w=this.bins[g]||0;return this.bins[g]=w+m,w},c.prototype.get=function(p,v,m){var g=this.getLabel(p,v,m);return this.bins[g]||0},c.prototype.getLabel=function(p,v,m){var g=m<0&&this.sepNegVal?"v":"^",w=this.overlapNoMerge?p:Math.round(p/this.binWidth);return g+w+"g"+v}}}),qy=i({"src/traces/bar/cross_trace_calc.js"(V,$){var h=fe(),c=_r().isArrayOrTypedArray,u=Te().BADNUM,p=xn(),v=ji(),m=Oo().getAxisGroup,g=w5();function w(q,X){for(var K=X.xaxis,ee=X.yaxis,ne=q._fullLayout,le=q._fullData,W=q.calcdata,ce=[],de=[],ve=0;ve<le.length;ve++){var pe=le[ve];if(pe.visible===!0&&p.traceIs(pe,"bar")&&pe.xaxis===K._id&&pe.yaxis===ee._id&&(pe.orientation==="h"?ce.push(W[ve]):de.push(W[ve]),pe._computePh))for(var be=q.calcdata[ve],Le=0;Le<be.length;Le++)typeof be[Le].ph0=="function"&&(be[Le].ph0=be[Le].ph0()),typeof be[Le].ph1=="function"&&(be[Le].ph1=be[Le].ph1())}var Ae={xCat:K.type==="category"||K.type==="multicategory",yCat:ee.type==="category"||ee.type==="multicategory",mode:ne.barmode,norm:ne.barnorm,gap:ne.bargap,groupgap:ne.bargroupgap};o(q,K,ee,de,Ae),o(q,ee,K,ce,Ae)}function o(q,X,K,ee,ne){if(ee.length){var le,W,ce,de,ve;switch(k(K,ee),ne.mode){case"overlay":D(q,X,K,ee,ne);break;case"group":for(le=[],W=[],ce=0;ce<ee.length;ce++)de=ee[ce],ve=de[0].trace,ve.offset===void 0?W.push(de):le.push(de);W.length&&M(q,X,K,W,ne),le.length&&D(q,X,K,le,ne);break;case"stack":case"relative":for(le=[],W=[],ce=0;ce<ee.length;ce++)de=ee[ce],ve=de[0].trace,ve.base===void 0?W.push(de):le.push(de);y(W),W.length&&A(q,X,K,W,ne),le.length&&D(q,X,K,le,ne);break}T(ee),Z(ee,X)}}function T(q){var X,K,ee,ne,le,W,ce;for(X=0;X<q.length;X++)K=q[X],ee=K[0].trace,ne=K[0].t,ne.cornerradiusvalue===void 0&&(le=ee.marker?ee.marker.cornerradius:void 0,le!==void 0&&(W=h(le)?+le:+le.slice(0,-1),ce=h(le)?"px":"%",ne.cornerradiusvalue=W,ne.cornerradiusform=ce))}function y(q){if(!(q.length<2)){var X,K,ee,ne,le,W,ce;for(X=0;X<q.length&&(K=q[X],ee=K[0].trace,le=ee.marker?ee.marker.cornerradius:void 0,le===void 0);X++);if(le!==void 0)for(W=h(le)?+le:+le.slice(0,-1),ce=h(le)?"px":"%",X=0;X<q.length;X++)K=q[X],ne=K[0].t,ne.cornerradiusvalue=W,ne.cornerradiusform=ce}}function k(q,X){var K,ee;for(K=0;K<X.length;K++){var ne=X[K],le=ne[0].trace,W=le.type==="funnel"?le._base:le.base,ce,de=le.orientation==="h"?le.xcalendar:le.ycalendar,ve=q.type==="category"||q.type==="multicategory"?function(){return null}:q.d2c;if(c(W)){for(ee=0;ee<Math.min(W.length,ne.length);ee++)ce=ve(W[ee],0,de),h(ce)?(ne[ee].b=+ce,ne[ee].hasB=1):ne[ee].b=0;for(;ee<ne.length;ee++)ne[ee].b=0}else{ce=ve(W,0,de);var pe=h(ce);for(ce=pe?ce:0,ee=0;ee<ne.length;ee++)ne[ee].b=ce,pe&&(ne[ee].hasB=1)}}}function D(q,X,K,ee,ne){for(var le=0;le<ee.length;le++){var W=ee[le],ce=new g([W],{posAxis:X,sepNegVal:!1,overlapNoMerge:!ne.norm});C(q,X,ce,ne),ne.norm?(P(ce),H(K,ce,ne)):L(K,ce)}}function M(q,X,K,ee,ne){var le=new g(ee,{posAxis:X,sepNegVal:!1,overlapNoMerge:!ne.norm});C(q,X,le,ne),J(le,X),ne.norm?(P(le),H(K,le,ne)):L(K,le)}function A(q,X,K,ee,ne){var le=new g(ee,{posAxis:X,sepNegVal:ne.mode==="relative",overlapNoMerge:!(ne.norm||ne.mode==="stack"||ne.mode==="relative")});C(q,X,le,ne),F(K,le,ne);for(var W=0;W<ee.length;W++)for(var ce=ee[W],de=ce[0].t.offsetindex,ve=0;ve<ce.length;ve++){var pe=ce[ve];if(pe.s!==u){var be=pe.b+pe.s===le.get(pe.p,de,pe.s);be&&(pe._outmost=!0)}}ne.norm&&H(K,le,ne)}function C(q,X,K,ee){var ne=q._fullLayout,le=K.positions,W=K.distinctPositions,ce=K.minDiff,de=K.traces,ve=de.length,pe=le.length!==W.length,be=ce*(1-ee.gap),Le,Ae,We,te;if(X._id==="angularaxis")Le=be,Ae=Le*(1-(ee.groupgap||0)),We=-Ae/2;else{var ae=m(ne,X._id)+de[0][0].trace.orientation;te=ne._alignmentOpts[ae]||{}}for(var G=0;G<ve;G++){var Q=de[G],U=Q[0].trace;if(X._id!=="angularaxis"){var re=te[U.alignmentgroup]||{},R=Object.keys(re.offsetGroups||{}).length;R?Le=be/R:Le=pe?be/ve:be,Ae=Le*(1-(ee.groupgap||0)),R?We=((2*U._offsetIndex+1-R)*Le-Ae)/2:We=pe?((2*G+1-ve)*Le-Ae)/2:-Ae/2}var B=Q[0].t;B.barwidth=Ae,B.offsetindex=U._offsetIndex||0,B.poffset=We,B.bargroupwidth=be,B.bardelta=ce}K.binWidth=de[0][0].t.barwidth/100,j(K),b(X,K),X._id==="angularaxis"?S(X,K):S(X,K,pe)}function j(q){var X=q.traces,K,ee;for(K=0;K<X.length;K++){var ne=X[K],le=ne[0],W=le.trace,ce=le.t,de=W._offset||W.offset,ve=ce.poffset,pe;if(c(de)){for(pe=Array.prototype.slice.call(de,0,ne.length),ee=0;ee<pe.length;ee++)h(pe[ee])||(pe[ee]=ve);for(ee=pe.length;ee<ne.length;ee++)pe.push(ve);ce.poffset=pe}else de!==void 0&&(ce.poffset=de);var be=W._width||W.width,Le=ce.barwidth;if(c(be)){var Ae=Array.prototype.slice.call(be,0,ne.length);for(ee=0;ee<Ae.length;ee++)h(Ae[ee])||(Ae[ee]=Le);for(ee=Ae.length;ee<ne.length;ee++)Ae.push(Le);if(ce.barwidth=Ae,de===void 0){for(pe=[],ee=0;ee<ne.length;ee++)pe.push(ve+(Le-Ae[ee])/2);ce.poffset=pe}}else be!==void 0&&(ce.barwidth=be,de===void 0&&(ce.poffset=ve+(Le-be)/2))}}function b(q,X){for(var K=X.traces,ee=z(q),ne=0;ne<K.length;ne++)for(var le=K[ne],W=le[0].t,ce=W.poffset,de=c(ce),ve=W.barwidth,pe=c(ve),be=0;be<le.length;be++){var Le=le[be],Ae=Le.w=pe?ve[be]:ve;Le.p===void 0&&(Le.p=Le[ee],Le["orig_"+ee]=Le[ee]);var We=(de?ce[be]:ce)+Ae/2;Le[ee]=Le.p+We}}function S(q,X,K){var ee=X.traces,ne=X.minDiff,le=ne/2;v.minDtick(q,X.minDiff,X.distinctPositions[0],K);for(var W=0;W<ee.length;W++){var ce=ee[W],de=ce[0],ve=de.trace,pe=[],be,Le,Ae,We;for(We=0;We<ce.length;We++)be=ce[We],Le=be.p-le,Ae=be.p+le,pe.push(Le,Ae);if(ve.width||ve.offset){var te=de.t,ae=te.poffset,G=te.barwidth,Q=c(ae),U=c(G);for(We=0;We<ce.length;We++){be=ce[We];var re=Q?ae[We]:ae,R=U?G[We]:G;Le=be.p+re,Ae=Le+R,pe.push(Le,Ae)}}ve._extremes[q._id]=v.findExtremes(q,pe,{padded:!1})}}function L(q,X){for(var K=X.traces,ee=z(q),ne=0;ne<K.length;ne++){for(var le=K[ne],W=le[0].trace,ce=W.type==="scatter",de=W.orientation==="v",ve=[],pe=!1,be=0;be<le.length;be++){var Le=le[be],Ae=ce?0:Le.b,We=ce?de?Le.y:Le.x:Ae+Le.s;Le[ee]=We,ve.push(We),Le.hasB&&ve.push(Ae),(!Le.hasB||!Le.b)&&(pe=!0)}W._extremes[q._id]=v.findExtremes(q,ve,{tozero:pe,padded:!0})}}function F(q,X,K){var ee=z(q),ne=X.traces,le,W,ce,de,ve,pe,be;for(de=0;de<ne.length;de++)if(le=ne[de],W=le[0].trace,W.type==="funnel")for(be=le[0].t.offsetindex,ve=0;ve<le.length;ve++)pe=le[ve],pe.s!==u&&X.put(pe.p,be,-.5*pe.s);for(de=0;de<ne.length;de++){le=ne[de],W=le[0].trace,ce=W.type==="funnel",be=W.type==="barpolar"?0:le[0].t.offsetindex;var Le=[];for(ve=0;ve<le.length;ve++)if(pe=le[ve],pe.s!==u){var Ae;ce?Ae=pe.s:Ae=pe.s+pe.b;var We=X.put(pe.p,be,Ae),te=We+Ae;pe.b=We,pe[ee]=te,K.norm||(Le.push(te),pe.hasB&&Le.push(We))}K.norm||(W._extremes[q._id]=v.findExtremes(q,Le,{tozero:!0,padded:!0}))}}function P(q){for(var X=q.traces,K=0;K<X.length;K++)for(var ee=X[K],ne=ee[0].t.offsetindex,le=0;le<ee.length;le++){var W=ee[le];W.s!==u&&q.put(W.p,ne,W.b+W.s)}}function J(q,X){for(var K=q.traces,ee=0;ee<K.length;ee++){var ne=K[ee],le=ne[0].trace,W=ne[0].t.offsetindex;if(le.base===void 0)for(var ce=new g([ne],{posAxis:X,sepNegVal:!0,overlapNoMerge:!0}),de=0;de<ne.length;de++){var ve=ne[de];if(ve.p!==u){var pe=ce.put(ve.p,W,ve.b+ve.s);pe&&(ve.b=pe)}}}}function H(q,X,K){var ee=X.traces,ne=z(q),le=K.norm==="fraction"?1:100,W=le/1e9,ce=q.l2c(q.c2l(0)),de=K.mode==="stack"?le:ce;function ve(B){return h(q.c2l(B))&&(B<ce-W||B>de+W||!h(ce))}for(var pe=0;pe<ee.length;pe++){for(var be=ee[pe],Le=be[0].t.offsetindex,Ae=be[0].trace,We=[],te=!1,ae=!1,G=0;G<be.length;G++){var Q=be[G];if(Q.s!==u){var U=Math.abs(le/X.get(Q.p,Le,Q.s));Q.b*=U,Q.s*=U;var re=Q.b,R=re+Q.s;Q[ne]=R,We.push(R),ae=ae||ve(R),Q.hasB&&(We.push(re),ae=ae||ve(re)),(!Q.hasB||!Q.b)&&(te=!0)}}Ae._extremes[q._id]=v.findExtremes(q,We,{tozero:te,padded:ae})}}function Y(q,X,K,ee){for(var ne=z(ee),le=0;le<q.length;le++)for(var W=q[le],ce=0;ce<W.length;ce++){var de=W[ce],ve=de[ne];de._sMin=X[ve],de._sMax=K[ve]}}function Z(q,X){var K=z(X),ee={},ne,le,W,ce=1/0,de=-1/0;for(ne=0;ne<q.length;ne++)for(W=q[ne],le=0;le<W.length;le++){var ve=W[le].p;h(ve)&&(ce=Math.min(ce,ve),de=Math.max(de,ve))}var pe=1e4/(de-ce),be=ee.round=function(ie){return String(Math.round(pe*(ie-ce)))},Le={},Ae={},We=q.some(function(ie){var xe=ie[0].trace;return"marker"in xe&&xe.marker.cornerradius});for(ne=0;ne<q.length;ne++){W=q[ne],W[0].t.extents=ee;var te=W[0].t.poffset,ae=c(te);for(le=0;le<W.length;le++){var G=W[le],Q=G[K]-G.w/2;if(h(Q)){var U=G[K]+G.w/2,re=be(G.p);ee[re]?ee[re]=[Math.min(Q,ee[re][0]),Math.max(U,ee[re][1])]:ee[re]=[Q,U]}if(G.p0=G.p+(ae?te[le]:te),G.p1=G.p0+G.w,G.s0=G.b,G.s1=G.s0+G.s,We){var R=Math.min(G.s0,G.s1)||0,B=Math.max(G.s0,G.s1)||0,oe=G[K];Le[oe]=oe in Le?Math.min(Le[oe],R):R,Ae[oe]=oe in Ae?Math.max(Ae[oe],B):B}}}We&&Y(q,Le,Ae,X)}function z(q){return q._id.charAt(0)}$.exports={crossTraceCalc:w,setGroupPositions:o}}}),_5=i({"src/traces/scatter/cross_trace_calc.js"(V,$){var h=Wy(),c=qy().setGroupPositions;function u(m,g){for(var w=g.xaxis,o=g.yaxis,T=m._fullLayout,y=m._fullData,k=m.calcdata,D=[],M=[],A=0;A<y.length;A++){var C=y[A];C.visible===!0&&C.type==="scatter"&&C.xaxis===w._id&&C.yaxis===o._id&&(C.orientation==="h"?D.push(k[A]):C.orientation==="v"&&M.push(k[A]))}var j={mode:T.scattermode,gap:T.scattergap};c(m,w,o,M,j),c(m,o,w,D,j)}$.exports=function(g,w){g._fullLayout.scattermode==="group"&&u(g,w);var o=w.xaxis,T=w.yaxis,y=o._id+T._id,k=g._fullLayout._scatterStackOpts[y];if(k){var D=g.calcdata,M,A,C,j,b,S,L,F,P,J,H,Y,Z,z,q;for(var X in k){J=k[X];var K=J.traceIndices;if(K.length){for(H=J.stackgaps==="interpolate",Y=J.groupnorm,J.orientation==="v"?(Z="x",z="y"):(Z="y",z="x"),q=new Array(K.length),M=0;M<q.length;M++)q[M]=!1;S=D[K[0]];var ee=new Array(S.length);for(M=0;M<S.length;M++)ee[M]=S[M][Z];for(M=1;M<K.length;M++){for(b=D[K[M]],A=C=0;A<b.length;A++){for(L=b[A][Z];L>ee[C]&&C<ee.length;C++)p(b,A,ee[C],M,q,H,Z),A++;if(L!==ee[C]){for(j=0;j<M;j++)p(D[K[j]],C,L,j,q,H,Z);ee.splice(C,0,L)}C++}for(;C<ee.length;C++)p(b,A,ee[C],M,q,H,Z),A++}var ne=ee.length;for(A=0;A<S.length;A++){for(F=S[A][z]=S[A].s,M=1;M<K.length;M++)b=D[K[M]],b[0].trace._rawLength=b[0].trace._length,b[0].trace._length=ne,F+=b[A].s,b[A][z]=F;if(Y)for(P=(Y==="fraction"?F:F/100)||1,M=0;M<K.length;M++){var le=D[K[M]][A];le[z]/=P,le.sNorm=le.s/P}}for(M=0;M<K.length;M++){b=D[K[M]];var W=b[0].trace,ce=h.calcMarkerSize(W,W._rawLength),de=Array.isArray(ce);if(ce&&q[M]||de){var ve=ce;for(ce=new Array(ne),A=0;A<ne;A++)ce[A]=b[A].gap?0:de?ve[b[A].i]:ve}var pe=new Array(ne),be=new Array(ne);for(A=0;A<ne;A++)pe[A]=b[A].x,be[A]=b[A].y;h.calcAxisExpansion(g,W,o,T,pe,be,ce),b[0].t.orientation=J.orientation}}}}};function p(m,g,w,o,T,y,k){T[o]=!0;var D={i:null,gap:!0,s:0};if(D[k]=w,m.splice(g,0,D),g&&w===m[g-1][k]){var M=m[g-1];D.s=M.s,D.i=M.i,D.gap=M.gap}else y&&(D.s=v(m,g,w,k));g||(m[0].t=m[1].t,m[0].trace=m[1].trace,delete m[1].t,delete m[1].trace)}function v(m,g,w,o){var T=m[g-1],y=m[g+1];return y?T?T.s+(y.s-T.s)*(w-T[o])/(y[o]-T[o]):y.s:T.s}}}),S5=i({"src/traces/scatter/line_points.js"(V,$){var h=oi(),c=Te(),u=c.BADNUM,p=c.LOG_CLIP,v=p+.5,m=p-.5,g=_r(),w=g.segmentsIntersect,o=g.constrain,T=Cm();$.exports=function(k,D){var M=D.trace||{},A=D.xaxis,C=D.yaxis,j=A.type==="log",b=C.type==="log",S=A._length,L=C._length,F=D.backoff,P=M.marker,J=D.connectGaps,H=D.baseTolerance,Y=D.shape,Z=Y==="linear",z=M.fill&&M.fill!=="none",q=[],X=T.minTolerance,K=k.length,ee=new Array(K),ne=0,le,W,ce,de,ve,pe,be,Le,Ae,We,te,ae,G,Q,U,re;function R(dt){var Mt=k[dt];if(!Mt)return!1;var Nt=D.linearized?A.l2p(Mt.x):A.c2p(Mt.x),ot=D.linearized?C.l2p(Mt.y):C.c2p(Mt.y);if(Nt===u){if(j&&(Nt=A.c2p(Mt.x,!0)),Nt===u)return!1;b&&ot===u&&(Nt*=Math.abs(A._m*L*(A._m>0?v:m)/(C._m*S*(C._m>0?v:m)))),Nt*=1e3}if(ot===u){if(b&&(ot=C.c2p(Mt.y,!0)),ot===u)return!1;ot*=1e3}return[Nt,ot]}function B(dt,Mt,Nt,ot){var jt=Nt-dt,Ut=ot-Mt,Gt=.5-dt,Tr=.5-Mt,Dr=jt*jt+Ut*Ut,Vr=jt*Gt+Ut*Tr;if(Vr>0&&Vr<Dr){var Mr=Gt*Ut-Tr*jt;if(Mr*Mr<Dr)return!0}}var oe,ie;function xe(dt,Mt){var Nt=dt[0]/S,ot=dt[1]/L,jt=Math.max(0,-Nt,Nt-1,-ot,ot-1);return jt&&oe!==void 0&&B(Nt,ot,oe,ie)&&(jt=0),jt&&Mt&&B(Nt,ot,Mt[0]/S,Mt[1]/L)&&(jt=0),(1+T.toleranceGrowth*jt)*H}function _e(dt,Mt){var Nt=dt[0]-Mt[0],ot=dt[1]-Mt[1];return Math.sqrt(Nt*Nt+ot*ot)}var ke=T.maxScreensAway,Pe=-S*ke,Ge=S*(1+ke),Je=-L*ke,yt=L*(1+ke),lt=[[Pe,Je,Ge,Je],[Ge,Je,Ge,yt],[Ge,yt,Pe,yt],[Pe,yt,Pe,Je]],mt,Ce,Ie,Se,Be,rt;function ht(dt,Mt){for(var Nt=[],ot=0,jt=0;jt<4;jt++){var Ut=lt[jt],Gt=w(dt[0],dt[1],Mt[0],Mt[1],Ut[0],Ut[1],Ut[2],Ut[3]);Gt&&(!ot||Math.abs(Gt.x-Nt[0][0])>1||Math.abs(Gt.y-Nt[0][1])>1)&&(Gt=[Gt.x,Gt.y],ot&&_e(Gt,dt)<_e(Nt[0],dt)?Nt.unshift(Gt):Nt.push(Gt),ot++)}return Nt}function Lt(dt){if(dt[0]<Pe||dt[0]>Ge||dt[1]<Je||dt[1]>yt)return[o(dt[0],Pe,Ge),o(dt[1],Je,yt)]}function Ct(dt,Mt){if(dt[0]===Mt[0]&&(dt[0]===Pe||dt[0]===Ge)||dt[1]===Mt[1]&&(dt[1]===Je||dt[1]===yt))return!0}function zt(dt,Mt){var Nt=[],ot=Lt(dt),jt=Lt(Mt);return ot&&jt&&Ct(ot,jt)||(ot&&Nt.push(ot),jt&&Nt.push(jt)),Nt}function Bt(dt,Mt,Nt){return function(ot,jt){var Ut=Lt(ot),Gt=Lt(jt),Tr=[];if(Ut&&Gt&&Ct(Ut,Gt))return Tr;Ut&&Tr.push(Ut),Gt&&Tr.push(Gt);var Dr=2*g.constrain((ot[dt]+jt[dt])/2,Mt,Nt)-((Ut||ot)[dt]+(Gt||jt)[dt]);if(Dr){var Vr;Ut&&Gt?Vr=Dr>0==Ut[dt]>Gt[dt]?Ut:Gt:Vr=Ut||Gt,Vr[dt]+=Dr}return Tr}}var Ft;Y==="linear"||Y==="spline"?Ft=ht:Y==="hv"||Y==="vh"?Ft=zt:Y==="hvh"?Ft=Bt(0,Pe,Ge):Y==="vhv"&&(Ft=Bt(1,Je,yt));function nr(dt,Mt){var Nt=Mt[0]-dt[0],ot=(Mt[1]-dt[1])/Nt,jt=(dt[1]*Mt[0]-Mt[1]*dt[0])/Nt;return jt>0?[ot>0?Pe:Ge,yt]:[ot>0?Ge:Pe,Je]}function _t(dt){var Mt=dt[0],Nt=dt[1],ot=Mt===ee[ne-1][0],jt=Nt===ee[ne-1][1];if(!(ot&&jt))if(ne>1){var Ut=Mt===ee[ne-2][0],Gt=Nt===ee[ne-2][1];ot&&(Mt===Pe||Mt===Ge)&&Ut?Gt?ne--:ee[ne-1]=dt:jt&&(Nt===Je||Nt===yt)&&Gt?Ut?ne--:ee[ne-1]=dt:ee[ne++]=dt}else ee[ne++]=dt}function rr(dt){ee[ne-1][0]!==dt[0]&&ee[ne-1][1]!==dt[1]&&_t([Ie,Se]),_t(dt),Be=null,Ie=Se=0}var pr=g.isArrayOrTypedArray(P);function Yt(dt){if(dt&&F&&(dt.i=le,dt.d=k,dt.trace=M,dt.marker=pr?P[dt.i]:P,dt.backoff=F),oe=dt[0]/S,ie=dt[1]/L,mt=dt[0]<Pe?Pe:dt[0]>Ge?Ge:0,Ce=dt[1]<Je?Je:dt[1]>yt?yt:0,mt||Ce){if(!ne)ee[ne++]=[mt||dt[0],Ce||dt[1]];else if(Be){var Mt=Ft(Be,dt);Mt.length>1&&(rr(Mt[0]),ee[ne++]=Mt[1])}else rt=Ft(ee[ne-1],dt)[0],ee[ne++]=rt;var Nt=ee[ne-1];mt&&Ce&&(Nt[0]!==mt||Nt[1]!==Ce)?(Be&&(Ie!==mt&&Se!==Ce?_t(Ie&&Se?nr(Be,dt):[Ie||mt,Se||Ce]):Ie&&Se&&_t([Ie,Se])),_t([mt,Ce])):Ie-mt&&Se-Ce&&_t([mt||Ie,Ce||Se]),Be=dt,Ie=mt,Se=Ce}else Be&&rr(Ft(Be,dt)[0]),ee[ne++]=dt}for(le=0;le<K;le++)if(W=R(le),!!W){for(ne=0,Be=null,Yt(W),le++;le<K;le++){if(de=R(le),!de){if(J)continue;break}if(!Z||!D.simplify){Yt(de);continue}var sr=R(le+1);if(We=_e(de,W),!(!(z&&(ne===0||ne===K-1))&&We<xe(de,sr)*X)){for(Le=[(de[0]-W[0])/We,(de[1]-W[1])/We],ve=W,te=We,ae=Q=U=0,be=!1,ce=de,le++;le<k.length;le++){if(pe=sr,sr=R(le+1),!pe){if(J)continue;break}if(Ae=[pe[0]-W[0],pe[1]-W[1]],re=Ae[0]*Le[1]-Ae[1]*Le[0],Q=Math.min(Q,re),U=Math.max(U,re),U-Q>xe(pe,sr))break;ce=pe,G=Ae[0]*Le[0]+Ae[1]*Le[1],G>te?(te=G,de=pe,be=!1):G<ae&&(ae=G,ve=pe,be=!0)}if(be?(Yt(de),ce!==ve&&Yt(ve)):(ve!==W&&Yt(ve),ce!==de&&Yt(de)),Yt(ce),le>=k.length||!pe)break;Yt(pe),W=pe}}Be&&_t([Ie||Be[0],Se||Be[1]]),q.push(ee.slice(0,ne))}var ze=Y.slice(Y.length-1);if(F&&ze!=="h"&&ze!=="v"){for(var Ye=!1,$e=-1,he=[],je=0;je<q.length;je++)for(var Ne=0;Ne<q[je].length-1;Ne++){var Re=q[je][Ne],nt=q[je][Ne+1],at=h.applyBackoff(nt,Re);(at[0]!==nt[0]||at[1]!==nt[1])&&(Ye=!0),he[$e+1]||($e++,he[$e]=[Re,[at[0],at[1]]])}return Ye?he:q}return q}}}),k5=i({"src/traces/scatter/link_traces.js"(V,$){var h={tonextx:1,tonexty:1,tonext:1};$.exports=function(u,p,v){var m,g,w,o,T,y={},k=!1,D=-1,M=0,A=-1;for(g=0;g<v.length;g++)m=v[g][0].trace,w=m.stackgroup||"",w?w in y?T=y[w]:(T=y[w]=M,M++):m.fill in h&&A>=0?T=A:(T=A=M,M++),T<D&&(k=!0),m._groupIndex=D=T;var C=v.slice();k&&C.sort(function(b,S){var L=b[0].trace,F=S[0].trace;return L._groupIndex-F._groupIndex||L.index-F.index});var j={};for(g=0;g<C.length;g++)m=C[g][0].trace,w=m.stackgroup||"",m.visible===!0?(m._nexttrace=null,m.fill in h&&(o=j[w],m._prevtrace=o||null,o&&(o._nexttrace=m)),m._ownfill=m.fill&&(m.fill.substr(0,6)==="tozero"||m.fill==="toself"||m.fill.substr(0,2)==="to"&&!m._prevtrace),j[w]=m):m._prevtrace=m._nexttrace=m._ownfill=null;return C}}}),M5=i({"src/traces/scatter/plot.js"(V,$){var h=f(),c=xn(),u=_r(),p=u.ensureSingle,v=u.identity,m=oi(),g=za(),w=S5(),o=k5(),T=jy().tester;$.exports=function(A,C,j,b,S,L){var F,P,J=!S,H=!!S&&S.duration>0,Y=o(A,C,j);if(F=b.selectAll("g.trace").data(Y,function(z){return z[0].trace.uid}),F.enter().append("g").attr("class",function(z){return"trace scatter trace"+z[0].trace.uid}).style("stroke-miterlimit",2),F.order(),y(A,F,C),H){L&&(P=L());var Z=h.transition().duration(S.duration).ease(S.easing).each("end",function(){P&&P()}).each("interrupt",function(){P&&P()});Z.each(function(){b.selectAll("g.trace").each(function(z,q){k(A,q,C,z,Y,this,S)})})}else F.each(function(z,q){k(A,q,C,z,Y,this,S)});J&&F.exit().remove(),b.selectAll("path:not([d])").remove()};function y(M,A,C){A.each(function(j){var b=p(h.select(this),"g","fills");m.setClipUrl(b,C.layerClipId,M);var S=j[0].trace,L=[];S._ownfill&&L.push("_ownFill"),S._nexttrace&&L.push("_nextFill");var F=b.selectAll("g").data(L,v);F.enter().append("g"),F.exit().each(function(P){S[P]=null}).remove(),F.order().each(function(P){S[P]=p(h.select(this),"path","js-fill")})})}function k(M,A,C,j,b,S,L){var F=M._context.staticPlot,P;D(M,A,C,j,b);var J=!!L&&L.duration>0;function H(_t){return J?_t.transition():_t}var Y=C.xaxis,Z=C.yaxis,z=j[0].trace,q=z.line,X=h.select(S),K=p(X,"g","errorbars"),ee=p(X,"g","lines"),ne=p(X,"g","points"),le=p(X,"g","text");if(c.getComponentMethod("errorbars","plot")(M,K,C,L),z.visible!==!0)return;H(X).style("opacity",z.opacity);var W,ce,de=z.fill.charAt(z.fill.length-1);de!=="x"&&de!=="y"&&(de="");var ve,pe;de==="y"?(ve=1,pe=Z.c2p(0,!0)):de==="x"&&(ve=0,pe=Y.c2p(0,!0)),j[0][C.isRangePlot?"nodeRangePlot3":"node3"]=X;var be="",Le=[],Ae=z._prevtrace,We=null,te=null;Ae&&(be=Ae._prevRevpath||"",ce=Ae._nextFill,Le=Ae._ownPolygons,We=Ae._fillsegments,te=Ae._fillElement);var ae,G,Q="",U="",re,R,B,oe,ie,xe,_e=[];z._polygons=[];var ke=[],Pe=[],Ge=u.noop;if(W=z._ownFill,g.hasLines(z)||z.fill!=="none"){ce&&ce.datum(j),["hv","vh","hvh","vhv"].indexOf(q.shape)!==-1?(re=m.steps(q.shape),R=m.steps(q.shape.split("").reverse().join(""))):q.shape==="spline"?re=R=function(_t){var rr=_t[_t.length-1];return _t.length>1&&_t[0][0]===rr[0]&&_t[0][1]===rr[1]?m.smoothclosed(_t.slice(1),q.smoothing):m.smoothopen(_t,q.smoothing)}:re=R=function(_t){return"M"+_t.join("L")},B=function(_t){return R(_t.reverse())},Pe=w(j,{xaxis:Y,yaxis:Z,trace:z,connectGaps:z.connectgaps,baseTolerance:Math.max(q.width||1,3)/4,shape:q.shape,backoff:q.backoff,simplify:q.simplify,fill:z.fill}),ke=new Array(Pe.length);var Je=0;for(P=0;P<Pe.length;P++){var yt,lt=Pe[P];!yt||!de?(yt=lt.slice(),ke[Je]=yt,Je++):yt.push.apply(yt,lt)}z._fillElement=null,z._fillExclusionElement=te,z._fillsegments=ke.slice(0,Je),ke=z._fillsegments,Pe.length&&(oe=Pe[0][0].slice(),ie=Pe[Pe.length-1],xe=ie[ie.length-1].slice()),Ge=function(_t){return function(rr){if(ae=re(rr),G=B(rr),Q?de?(Q+="L"+ae.substr(1),U=G+("L"+U.substr(1))):(Q+="Z"+ae,U=G+"Z"+U):(Q=ae,U=G),g.hasLines(z)){var pr=h.select(this);if(pr.datum(j),_t)H(pr.style("opacity",0).attr("d",ae).call(m.lineGroupStyle)).style("opacity",1);else{var Yt=H(pr);Yt.attr("d",ae),m.singleLineStyle(j,Yt)}}}}}var mt=ee.selectAll(".js-line").data(Pe);H(mt.exit()).style("opacity",0).remove(),mt.each(Ge(!1)),mt.enter().append("path").classed("js-line",!0).style("vector-effect",F?"none":"non-scaling-stroke").call(m.lineGroupStyle).each(Ge(!0)),m.setClipUrl(mt,C.layerClipId,M);function Ce(_t){H(_t).attr("d","M0,0Z")}var Ie=function(){var _t=new Array(ke.length);for(P=0;P<ke.length;P++)_t[P]=T(ke[P]);return _t},Se=function(_t){var rr,pr;if(!_t||_t.length===0)for(rr=new Array(ke.length),pr=0;pr<ke.length;pr++){var Yt=ke[pr][0].slice(),sr=ke[pr][ke[pr].length-1].slice();Yt[ve]=sr[ve]=pe;var ze=[sr,Yt],Ye=ze.concat(ke[pr]);rr[pr]=T(Ye)}else{for(rr=new Array(_t.length-1+ke.length),pr=0;pr<_t.length-1;pr++)rr[pr]=T(_t[pr]);var $e=_t[_t.length-1].slice();for($e.reverse(),pr=0;pr<ke.length;pr++)rr[_t.length-1+pr]=T(ke[pr].concat($e))}return rr};Pe.length?(W?(W.datum(j),oe&&xe&&(de?(oe[ve]=xe[ve]=pe,H(W).attr("d","M"+xe+"L"+oe+"L"+Q.substr(1)).call(m.singleFillStyle,M),_e=Se(null)):(H(W).attr("d",Q+"Z").call(m.singleFillStyle,M),_e=Ie())),z._polygons=_e,z._fillElement=W):ce&&(z.fill.substr(0,6)==="tonext"&&Q&&be?(z.fill==="tonext"?(H(ce).attr("d",Q+"Z"+be+"Z").call(m.singleFillStyle,M),_e=Ie(),z._polygons=_e.concat(Le)):(H(ce).attr("d",Q+"L"+be.substr(1)+"Z").call(m.singleFillStyle,M),_e=Se(We),z._polygons=_e),z._fillElement=ce):Ce(ce)),z._prevRevpath=U):(W?Ce(W):ce&&Ce(ce),z._prevRevpath=null),z._ownPolygons=_e;function Be(_t){return _t.filter(function(rr){return!rr.gap&&rr.vis})}function rt(_t){return _t.filter(function(rr){return rr.vis})}function ht(_t){return _t.filter(function(rr){return!rr.gap})}function Lt(_t){return _t.id}function Ct(_t){if(_t.ids)return Lt}function zt(){return!1}function Bt(_t,rr,pr){var Yt,sr,ze,Ye=pr[0].trace,$e=g.hasMarkers(Ye),he=g.hasText(Ye),je=Ct(Ye),Ne=zt,Re=zt;if($e||he){var nt=v,at=Ye.stackgroup,dt=at&&M._fullLayout._scatterStackOpts[Y._id+Z._id][at].stackgaps==="infer zero";Ye.marker.maxdisplayed||Ye._needsCull?nt=dt?rt:Be:at&&!dt&&(nt=ht),$e&&(Ne=nt),he&&(Re=nt)}sr=_t.selectAll("path.point"),Yt=sr.data(Ne,je);var Mt=Yt.enter().append("path").classed("point",!0);J&&Mt.call(m.pointStyle,Ye,M).call(m.translatePoints,Y,Z).style("opacity",0).transition().style("opacity",1),Yt.order();var Nt;$e&&(Nt=m.makePointStyleFns(Ye)),Yt.each(function(ot){var jt=h.select(this),Ut=H(jt);ze=m.translatePoint(ot,Ut,Y,Z),ze?(m.singlePointStyle(ot,Ut,Ye,Nt,M),C.layerClipId&&m.hideOutsideRangePoint(ot,Ut,Y,Z,Ye.xcalendar,Ye.ycalendar),Ye.customdata&&jt.classed("plotly-customdata",ot.data!==null&&ot.data!==void 0)):Ut.remove()}),J?Yt.exit().transition().style("opacity",0).remove():Yt.exit().remove(),sr=rr.selectAll("g"),Yt=sr.data(Re,je),Yt.enter().append("g").classed("textpoint",!0).append("text"),Yt.order(),Yt.each(function(ot){var jt=h.select(this),Ut=H(jt.select("text"));ze=m.translatePoint(ot,Ut,Y,Z),ze?C.layerClipId&&m.hideOutsideRangePoint(ot,jt,Y,Z,Ye.xcalendar,Ye.ycalendar):jt.remove()}),Yt.selectAll("text").call(m.textPointStyle,Ye,M).each(function(ot){var jt=Y.c2p(ot.x),Ut=Z.c2p(ot.y);h.select(this).selectAll("tspan.line").each(function(){H(h.select(this)).attr({x:jt,y:Ut})})}),Yt.exit().remove()}ne.datum(j),le.datum(j),Bt(ne,le,j);var Ft=z.cliponaxis===!1,nr=Ft?null:C.layerClipId;m.setClipUrl(ne,nr,M),m.setClipUrl(le,nr,M)}function D(M,A,C,j,b){var S=C.xaxis,L=C.yaxis,F=h.extent(u.simpleMap(S.range,S.r2c)),P=h.extent(u.simpleMap(L.range,L.r2c)),J=j[0].trace;if(g.hasMarkers(J)){var H=J.marker.maxdisplayed;if(H!==0){var Y=j.filter(function(X){return X.x>=F[0]&&X.x<=F[1]&&X.y>=P[0]&&X.y<=P[1]}),Z=Math.ceil(Y.length/H),z=0;b.forEach(function(X,K){var ee=X[0].trace;g.hasMarkers(ee)&&ee.marker.maxdisplayed>0&&K<A&&z++});var q=Math.round(z*Z/3+Math.floor(z/3)*Z/7.1);j.forEach(function(X){delete X.vis}),Y.forEach(function(X,K){Math.round((K+q)%Z)===0&&(X.vis=!0)})}}}}}),Uy=i({"src/traces/scatter/marker_colorbar.js"(V,$){$.exports={container:"marker",min:"cmin",max:"cmax"}}}),T5=i({"src/traces/scatter/format_labels.js"(V,$){var h=ji();$.exports=function(u,p,v){var m={},g={_fullLayout:v},w=h.getFromTrace(g,p,"x"),o=h.getFromTrace(g,p,"y"),T=u.orig_x;T===void 0&&(T=u.x);var y=u.orig_y;return y===void 0&&(y=u.y),m.xLabel=h.tickText(w,w.c2l(T),!0).text,m.yLabel=h.tickText(o,o.c2l(y),!0).text,m}}}),Vy=i({"src/traces/scatter/style.js"(V,$){var h=f(),c=oi(),u=xn();function p(w){var o=h.select(w).selectAll("g.trace.scatter");o.style("opacity",function(T){return T[0].trace.opacity}),o.selectAll("g.points").each(function(T){var y=h.select(this),k=T.trace||T[0].trace;v(y,k,w)}),o.selectAll("g.text").each(function(T){var y=h.select(this),k=T.trace||T[0].trace;m(y,k,w)}),o.selectAll("g.trace path.js-line").call(c.lineGroupStyle),o.selectAll("g.trace path.js-fill").call(c.fillGroupStyle,w,!1),u.getComponentMethod("errorbars","style")(o)}function v(w,o,T){c.pointStyle(w.selectAll("path.point"),o,T)}function m(w,o,T){c.textPointStyle(w.selectAll("text"),o,T)}function g(w,o,T){var y=o[0].trace;y.selectedpoints?(c.selectedPointStyle(T.selectAll("path.point"),y),c.selectedTextStyle(T.selectAll("text"),y)):(v(T,y,w),m(T,y,w))}$.exports={style:p,stylePoints:v,styleText:m,styleOnSelect:g}}}),A5=i({"src/traces/scatter/get_trace_color.js"(V,$){var h=ut(),c=za();$.exports=function(p,v){var m,g;if(p.mode==="lines")return m=p.line.color,m&&h.opacity(m)?m:p.fillcolor;if(p.mode==="none")return p.fill?p.fillcolor:"";var w=v.mcc||(p.marker||{}).color,o=v.mlcc||((p.marker||{}).line||{}).color;return g=w&&h.opacity(w)?w:o&&h.opacity(o)&&(v.mlw||((p.marker||{}).line||{}).width)?o:"",g?h.opacity(g)<.3?h.addOpacity(g,.3):g:(m=(p.line||{}).color,m&&h.opacity(m)&&c.hasLines(p)&&p.line.width?m:p.fillcolor)}}}),C5=i({"src/traces/scatter/hover.js"(V,$){var h=_r(),c=so(),u=xn(),p=A5(),v=ut(),m=h.fillText;$.exports=function(w,o,T,y){var k=w.cd,D=k[0].trace,M=w.xa,A=w.ya,C=M.c2p(o),j=A.c2p(T),b=[C,j],S=D.hoveron||"",L=D.mode.indexOf("markers")!==-1?3:.5,F=!!D.xperiodalignment,P=!!D.yperiodalignment;if(S.indexOf("points")!==-1){var J=function(Le){if(F){var Ae=M.c2p(Le.xStart),We=M.c2p(Le.xEnd);return C>=Math.min(Ae,We)&&C<=Math.max(Ae,We)?0:1/0}var te=Math.max(3,Le.mrc||0),ae=1-1/te,G=Math.abs(M.c2p(Le.x)-C);return G<te?ae*G/te:G-te+ae},H=function(Le){if(P){var Ae=A.c2p(Le.yStart),We=A.c2p(Le.yEnd);return j>=Math.min(Ae,We)&&j<=Math.max(Ae,We)?0:1/0}var te=Math.max(3,Le.mrc||0),ae=1-1/te,G=Math.abs(A.c2p(Le.y)-j);return G<te?ae*G/te:G-te+ae},Y=function(Le){var Ae=Math.max(L,Le.mrc||0),We=M.c2p(Le.x)-C,te=A.c2p(Le.y)-j;return Math.max(Math.sqrt(We*We+te*te)-Ae,1-L/Ae)},Z=c.getDistanceFunction(y,J,H,Y);if(c.getClosest(k,Z,w),w.index!==!1){var z=k[w.index],q=M.c2p(z.x,!0),X=A.c2p(z.y,!0),K=z.mrc||1;w.index=z.i;var ee=k[0].t.orientation,ne=ee&&(z.sNorm||z.s),le=ee==="h"?ne:z.orig_x!==void 0?z.orig_x:z.x,W=ee==="v"?ne:z.orig_y!==void 0?z.orig_y:z.y;return h.extendFlat(w,{color:p(D,z),x0:q-K,x1:q+K,xLabelVal:le,y0:X-K,y1:X+K,yLabelVal:W,spikeDistance:Y(z),hovertemplate:D.hovertemplate}),m(z,D,w),u.getComponentMethod("errorbars","hoverInfo")(z,D,w),[w]}}function ce(Le){if(!Le)return!1;var Ae=Le.node();try{var We=new DOMPoint(b[0],b[1]);return Ae.isPointInFill(We)}catch{var te=Ae.ownerSVGElement.createSVGPoint();return te.x=b[0],te.y=b[1],Ae.isPointInFill(te)}}function de(Le){var Ae,We=[],te=1/0,ae=-1/0,G=1/0,Q=-1/0,U;for(Ae=0;Ae<Le.length;Ae++){var re=Le[Ae];re.contains(b)&&(We.push(re),G=Math.min(G,re.ymin),Q=Math.max(Q,re.ymax))}if(We.length===0)return null;G=Math.max(G,0),Q=Math.min(Q,A._length),U=(G+Q)/2;var R,B,oe,ie,xe,_e,ke;for(Ae=0;Ae<We.length;Ae++)for(B=We[Ae].pts,R=1;R<B.length;R++)_e=B[R-1][1],ke=B[R][1],_e>U!=ke>=U&&(ie=B[R-1][0],xe=B[R][0],ke-_e&&(oe=ie+(xe-ie)*(U-_e)/(ke-_e),te=Math.min(te,oe),ae=Math.max(ae,oe)));return te=Math.max(te,0),ae=Math.min(ae,M._length),{x0:te,x1:ae,y0:U,y1:U}}if(S.indexOf("fills")!==-1&&D._fillElement){var ve=ce(D._fillElement)&&!ce(D._fillExclusionElement);if(ve){var pe=de(D._polygons);pe===null&&(pe={x0:b[0],x1:b[0],y0:b[1],y1:b[1]});var be=v.defaultLine;return v.opacity(D.fillcolor)?be=D.fillcolor:v.opacity((D.line||{}).color)&&(be=D.line.color),h.extendFlat(w,{distance:w.maxHoverDistance,x0:pe.x0,x1:pe.x1,y0:pe.y0,y1:pe.y1,color:be,hovertemplate:!1}),delete w.index,D.text&&!h.isArrayOrTypedArray(D.text)?w.text=String(D.text):w.text=D.name,[w]}}}}}),j5=i({"src/traces/scatter/select.js"(V,$){var h=za();$.exports=function(u,p){var v=u.cd,m=u.xaxis,g=u.yaxis,w=[],o=v[0].trace,T,y,k,D,M=!h.hasMarkers(o)&&!h.hasText(o);if(M)return[];if(p===!1)for(T=0;T<v.length;T++)v[T].selected=0;else for(T=0;T<v.length;T++)y=v[T],k=m.c2p(y.x),D=g.c2p(y.y),y.i!==null&&p.contains([k,D],!1,T,u)?(w.push({pointNumber:y.i,x:m.c2d(y.x),y:g.c2d(y.y)}),y.selected=1):y.selected=0;return w}}}),L5=i({"src/plots/cartesian/attributes.js"(V,$){$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}}}),E5=i({"src/plots/cartesian/type_defaults.js"(V,$){var h=xn().traceIs,c=Ku();$.exports=function(w,o,T,y){T("autotypenumbers",y.autotypenumbersDflt);var k=T("type",(y.splomStash||{}).type);k==="-"&&(u(o,y.data),o.type==="-"?o.type="linear":w.type=o.type)};function u(g,w){if(g.type==="-"){var o=g._id,T=o.charAt(0),y;o.indexOf("scene")!==-1&&(o=T);var k=p(w,o,T);if(k){if(k.type==="histogram"&&T==={v:"y",h:"x"}[k.orientation||"v"]){g.type="linear";return}var D=T+"calendar",M=k[D],A={noMultiCategory:!h(k,"cartesian")||h(k,"noMultiCategory")};if(k.type==="box"&&k._hasPreCompStats&&T==={h:"x",v:"y"}[k.orientation||"v"]&&(A.noMultiCategory=!0),A.autotypenumbers=g.autotypenumbers,m(k,T)){var C=v(k),j=[];for(y=0;y<w.length;y++){var b=w[y];!h(b,"box-violin")||(b[T+"axis"]||T)!==o||(b[C]!==void 0?j.push(b[C][0]):b.name!==void 0?j.push(b.name):j.push("text"),b[D]!==M&&(M=void 0))}g.type=c(j,M,A)}else if(k.type==="splom"){var S=k.dimensions,L=S[k._axesDim[o]];L.visible&&(g.type=c(L.values,M,A))}else g.type=c(k[T]||[k[T+"0"]],M,A)}}}function p(g,w,o){for(var T=0;T<g.length;T++){var y=g[T];if(y.type==="splom"&&y._length>0&&(y["_"+o+"axes"]||{})[w])return y;if((y[o+"axis"]||o)===w){if(m(y,o))return y;if((y[o]||[]).length||y[o+"0"])return y}}}function v(g){return{v:"x",h:"y"}[g.orientation||"v"]}function m(g,w){var o=v(g),T=h(g,"box-violin"),y=h(g._fullInput||{},"candlestick");return T&&!y&&w===o&&g[o]===void 0&&g[o+"0"]===void 0}}}),D5=i({"src/plots/cartesian/category_order_defaults.js"(V,$){var h=Ue().isTypedArraySpec;function c(u,p){var v=p.dataAttr||u._id.charAt(0),m={},g,w,o;if(p.axData)g=p.axData;else for(g=[],w=0;w<p.data.length;w++){var T=p.data[w];T[v+"axis"]===u._id&&g.push(T)}for(w=0;w<g.length;w++){var y=g[w][v];for(o=0;o<y.length;o++){var k=y[o];k!=null&&(m[k]=1)}}return Object.keys(m)}$.exports=function(p,v,m,g){if(v.type==="category"){var w=p.categoryarray,o=Array.isArray(w)&&w.length>0||h(w),T;o&&(T="array");var y=m("categoryorder",T),k;y==="array"&&(k=m("categoryarray")),!o&&y==="array"&&(y=v.categoryorder="trace"),y==="trace"?v._initialCategories=[]:y==="array"?v._initialCategories=k.slice():(k=c(v,g).sort(),y==="category ascending"?v._initialCategories=k:y==="category descending"&&(v._initialCategories=k.reverse()))}}}}),R5=i({"src/plots/cartesian/line_grid_defaults.js"(V,$){var h=xt().mix,c=It(),u=_r();$.exports=function(v,m,g,w){w=w||{};var o=w.dfltColor;function T(z,q){return u.coerce2(v,m,w.attributes,z,q)}var y=T("linecolor",o),k=T("linewidth"),D=g("showline",w.showLine||!!y||!!k);D||(delete m.linecolor,delete m.linewidth);var M=h(o,w.bgColor,w.blend||c.lightFraction).toRgbString(),A=T("gridcolor",M),C=T("gridwidth"),j=T("griddash"),b=g("showgrid",w.showGrid||!!A||!!C||!!j);if(b||(delete m.gridcolor,delete m.gridwidth,delete m.griddash),w.hasMinor){var S=h(m.gridcolor,w.bgColor,67).toRgbString(),L=T("minor.gridcolor",S),F=T("minor.gridwidth",m.gridwidth||1),P=T("minor.griddash",m.griddash||"solid"),J=g("minor.showgrid",!!L||!!F||!!P);J||(delete m.minor.gridcolor,delete m.minor.gridwidth,delete m.minor.griddash)}if(!w.noZeroLine){var H=T("zerolinecolor",o),Y=T("zerolinewidth"),Z=g("zeroline",w.showGrid||!!H||!!Y);Z||(delete m.zerolinecolor,delete m.zerolinewidth)}}}}),$y=i({"src/plots/cartesian/axis_defaults.js"(V,$){var h=fe(),c=xn(),u=_r(),p=hr(),v=Ns(),m=Ps(),g=zo(),w=Jc(),o=dc(),T=tl(),y=D5(),k=R5(),D=Ju(),M=Qc(),A=Yr().WEEKDAY_PATTERN,C=Yr().HOUR_PATTERN;$.exports=function(F,P,J,H,Y){var Z=H.letter,z=H.font||{},q=H.splomStash||{},X=J("visible",!H.visibleDflt),K=P._template||{},ee=P.type||K.type||"-",ne;if(ee==="date"){var le=c.getComponentMethod("calendars","handleDefaults");le(F,P,"calendar",H.calendar),H.noTicklabelmode||(ne=J("ticklabelmode"))}!H.noTicklabelindex&&(ee==="date"||ee==="linear")&&J("ticklabelindex");var W="";(!H.noTicklabelposition||ee==="multicategory")&&(W=u.coerce(F,P,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:ne==="period"?["outside","inside"]:Z==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),H.noTicklabeloverflow||J("ticklabeloverflow",W.indexOf("inside")!==-1?"hide past domain":ee==="category"||ee==="multicategory"?"allow":"hide past div"),M(P,Y),D(F,P,J,H),y(F,P,J,H),ee!=="category"&&!H.noHover&&J("hoverformat");var ce=J("color"),de=ce!==m.color.dflt?ce:z.color,ve=q.label||Y._dfltTitle[Z];if(T(F,P,J,ee,H),!X)return P;J("title.text",ve),u.coerceFont(J,"title.font",z,{overrideDflt:{size:u.bigFont(z.size),color:de}}),g(F,P,J,ee);var pe=H.hasMinor;if(pe&&(p.newContainer(P,"minor"),g(F,P,J,ee,{isMinor:!0})),o(F,P,J,ee,H),w(F,P,J,H),pe){var be=H.isMinor;H.isMinor=!0,w(F,P,J,H),H.isMinor=be}k(F,P,J,{dfltColor:ce,bgColor:H.bgColor,showGrid:H.showGrid,hasMinor:pe,attributes:m}),pe&&!P.minor.ticks&&!P.minor.showgrid&&delete P.minor,(P.showline||P.ticks)&&J("mirror");var Le=ee==="multicategory";if(!H.noTickson&&(ee==="category"||Le)&&(P.ticks||P.showgrid)){var Ae;Le&&(Ae="boundaries");var We=J("tickson",Ae);We==="boundaries"&&delete P.ticklabelposition}if(Le){var te=J("showdividers");te&&(J("dividercolor"),J("dividerwidth"))}if(ee==="date")if(v(F,P,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:j}),!P.rangebreaks.length)delete P.rangebreaks;else{for(var ae=0;ae<P.rangebreaks.length;ae++)if(P.rangebreaks[ae].pattern===A){P._hasDayOfWeekBreaks=!0;break}if(M(P,Y),Y._has("scattergl")||Y._has("splom"))for(var G=0;G<H.data.length;G++){var Q=H.data[G];(Q.type==="scattergl"||Q.type==="splom")&&(Q.visible=!1,u.warn(Q.type+" traces do not work on axes with rangebreaks. Setting trace "+Q.index+" to `visible: false`."))}}return P};function j(L,F,P){function J(ne,le){return u.coerce(L,F,m.rangebreaks,ne,le)}var H=J("enabled");if(H){var Y=J("bounds");if(Y&&Y.length>=2){var Z="",z,q;if(Y.length===2){for(z=0;z<2;z++)if(q=S(Y[z]),q){Z=A;break}}var X=J("pattern",Z);if(X===A)for(z=0;z<2;z++)q=S(Y[z]),q&&(F.bounds[z]=Y[z]=q-1);if(X)for(z=0;z<2;z++)switch(q=Y[z],X){case A:if(!h(q)){F.enabled=!1;return}if(q=+q,q!==Math.floor(q)||q<0||q>=7){F.enabled=!1;return}F.bounds[z]=Y[z]=q;break;case C:if(!h(q)){F.enabled=!1;return}if(q=+q,q<0||q>24){F.enabled=!1;return}F.bounds[z]=Y[z]=q;break}if(P.autorange===!1){var K=P.range;if(K[0]<K[1]){if(Y[0]<K[0]&&Y[1]>K[1]){F.enabled=!1;return}}else if(Y[0]>K[0]&&Y[1]<K[1]){F.enabled=!1;return}}}else{var ee=J("values");if(ee&&ee.length)J("dvalue");else{F.enabled=!1;return}}}}var b={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function S(L){if(typeof L=="string")return b[L.substr(0,3).toLowerCase()]}}}),Yy=i({"src/plots/cartesian/position_defaults.js"(V,$){var h=fe(),c=_r();$.exports=function(p,v,m,g){var w=g.counterAxes||[],o=g.overlayableAxes||[],T=g.letter,y=g.grid,k=g.overlayingDomain,D,M,A,C,j,b;y&&(M=y._domains[T][y._axisMap[v._id]],D=y._anchors[v._id],M&&(A=y[T+"side"].split(" ")[0],C=y.domain[T][A==="right"||A==="top"?1:0])),M=M||[0,1],D=D||(h(p.position)?"free":w[0]||"free"),A=A||(T==="x"?"bottom":"left"),C=C||0,j=0,b=!1;var S=c.coerce(p,v,{anchor:{valType:"enumerated",values:["free"].concat(w),dflt:D}},"anchor"),L=c.coerce(p,v,{side:{valType:"enumerated",values:T==="x"?["bottom","top"]:["left","right"],dflt:A}},"side");if(S==="free"){if(T==="y"){var F=m("autoshift");F&&(C=L==="left"?k[0]:k[1],b=v.automargin?v.automargin:!0,j=L==="left"?-3:3),m("shift",j)}m("position",C)}m("automargin",b);var P=!1;if(o.length&&(P=c.coerce(p,v,{overlaying:{valType:"enumerated",values:[!1].concat(o),dflt:!1}},"overlaying")),!P){var J=m("domain",M);J[0]>J[1]-1/4096&&(v.domain=M),c.noneOrAll(p.domain,v.domain,M),v.tickmode==="sync"&&(v.tickmode="auto")}return m("layer"),v}}}),P5=i({"src/plots/cartesian/layout_defaults.js"(V,$){var h=_r(),c=ut(),u=Wa().isUnifiedHover,p=sd(),v=hr(),m=Pa(),g=Ps(),w=E5(),o=$y(),T=Oo(),y=Yy(),k=Ur(),D=k.id2name,M=k.name2id,A=Yr().AX_ID_PATTERN,C=xn(),j=C.traceIs,b=C.getComponentMethod;function S(L,F,P){Array.isArray(L[F])?L[F].push(P):L[F]=[P]}$.exports=function(F,P,J){var H=P.autotypenumbers,Y={},Z={},z={},q={},X={},K={},ee={},ne={},le={},W={},ce,de;for(ce=0;ce<J.length;ce++){var ve=J[ce];if(j(ve,"cartesian")){var pe;if(ve.xaxis)pe=D(ve.xaxis),S(Y,pe,ve);else if(ve.xaxes)for(de=0;de<ve.xaxes.length;de++)S(Y,D(ve.xaxes[de]),ve);var be;if(ve.yaxis)be=D(ve.yaxis),S(Y,be,ve);else if(ve.yaxes)for(de=0;de<ve.yaxes.length;de++)S(Y,D(ve.yaxes[de]),ve);if(ve.type==="funnel"?ve.orientation==="h"?(pe&&(Z[pe]=!0),be&&(ee[be]=!0)):be&&(z[be]=!0):ve.type==="image"?(be&&(ne[be]=!0),pe&&(ne[pe]=!0)):(be&&(X[be]=!0,K[be]=!0),(!j(ve,"carpet")||ve.type==="carpet"&&!ve._cheater)&&pe&&(q[pe]=!0)),ve.type==="carpet"&&ve._cheater&&pe&&(Z[pe]=!0),j(ve,"2dMap")&&(le[pe]=!0,le[be]=!0),j(ve,"oriented")){var Le=ve.orientation==="h"?be:pe;W[Le]=!0}}}var Ae=P._subplots,We=Ae.xaxis,te=Ae.yaxis,ae=h.simpleMap(We,D),G=h.simpleMap(te,D),Q=ae.concat(G),U=c.background;We.length&&te.length&&(U=h.coerce(F,P,m,"plot_bgcolor"));var re=c.combine(U,P.paper_bgcolor),R,B,oe,ie,xe;function _e(){var Ne=Y[R]||[];xe._traceIndices=Ne.map(function(Re){return Re.index}),xe._annIndices=[],xe._shapeIndices=[],xe._selectionIndices=[],xe._imgIndices=[],xe._subplotsWith=[],xe._counterAxes=[],xe._name=xe._attr=R,xe._id=B}function ke(Ne,Re){return h.coerce(ie,xe,g,Ne,Re)}function Pe(Ne,Re){return h.coerce2(ie,xe,g,Ne,Re)}function Ge(Ne){return Ne==="x"?te:We}function Je(Ne,Re){for(var nt=Ne==="x"?ae:G,at=[],dt=0;dt<nt.length;dt++){var Mt=nt[dt];Mt!==Re&&!(F[Mt]||{}).overlaying&&at.push(M(Mt))}return at}var yt={x:Ge("x"),y:Ge("y")},lt=yt.x.concat(yt.y),mt={},Ce=[];function Ie(){var Ne=ie.matches;A.test(Ne)&&lt.indexOf(Ne)===-1&&(mt[Ne]=ie.type,Ce=Object.keys(mt))}var Se=p(F,P),Be=u(Se);for(ce=0;ce<Q.length;ce++){R=Q[ce],B=M(R),oe=R.charAt(0),h.isPlainObject(F[R])||(F[R]={}),ie=F[R],xe=v.newContainer(P,R,oe+"axis"),_e();var rt=oe==="x"&&!q[R]&&Z[R]||oe==="y"&&!X[R]&&z[R],ht=oe==="y"&&(!K[R]&&ee[R]||ne[R]),Lt={hasMinor:!0,letter:oe,font:P.font,outerTicks:le[R],showGrid:!W[R],data:Y[R]||[],bgColor:re,calendar:P.calendar,automargin:!0,visibleDflt:rt,reverseDflt:ht,autotypenumbersDflt:H,splomStash:((P._splomAxes||{})[oe]||{})[B],noAutotickangles:oe==="y"};ke("uirevision",P.uirevision),w(ie,xe,ke,Lt),o(ie,xe,ke,Lt,P);var Ct=Be&&oe===Se.charAt(0),zt=Pe("spikecolor",Be?xe.color:void 0),Bt=Pe("spikethickness",Be?1.5:void 0),Ft=Pe("spikedash",Be?"dot":void 0),nr=Pe("spikemode",Be?"across":void 0),_t=Pe("spikesnap"),rr=ke("showspikes",!!Ct||!!zt||!!Bt||!!Ft||!!nr||!!_t);rr||(delete xe.spikecolor,delete xe.spikethickness,delete xe.spikedash,delete xe.spikemode,delete xe.spikesnap);var pr=D(ie.overlaying),Yt=[0,1];if(P[pr]!==void 0){var sr=D(P[pr].anchor);P[sr]!==void 0&&(Yt=P[sr].domain)}y(ie,xe,ke,{letter:oe,counterAxes:yt[oe],overlayableAxes:Je(oe,R),grid:P.grid,overlayingDomain:Yt}),ke("title.standoff"),Ie(),xe._input=ie}for(ce=0;ce<Ce.length;){B=Ce[ce++],R=D(B),oe=R.charAt(0),h.isPlainObject(F[R])||(F[R]={}),ie=F[R],xe=v.newContainer(P,R,oe+"axis"),_e();var ze={letter:oe,font:P.font,outerTicks:le[R],showGrid:!W[R],data:[],bgColor:re,calendar:P.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:H,splomStash:((P._splomAxes||{})[oe]||{})[B]};ke("uirevision",P.uirevision),xe.type=mt[B]||"linear",o(ie,xe,ke,ze,P),y(ie,xe,ke,{letter:oe,counterAxes:yt[oe],overlayableAxes:Je(oe,R),grid:P.grid}),ke("fixedrange"),Ie(),xe._input=ie}var Ye=b("rangeslider","handleDefaults"),$e=b("rangeselector","handleDefaults");for(ce=0;ce<ae.length;ce++)R=ae[ce],ie=F[R],xe=P[R],Ye(F,P,R),xe.type==="date"&&$e(ie,xe,P,G,xe.calendar),ke("fixedrange");for(ce=0;ce<G.length;ce++){R=G[ce],ie=F[R],xe=P[R];var he=P[D(xe.anchor)],je=b("rangeslider","isVisible")(he);ke("fixedrange",je)}T.handleDefaults(F,P,{axIds:lt.concat(Ce).sort(k.idSort),axHasImage:ne})}}}),N5=i({"src/plots/cartesian/transition_axes.js"(V,$){var h=f(),c=xn(),u=_r(),p=oi(),v=ji();$.exports=function(g,w,o,T){var y=g._fullLayout;if(w.length===0){v.redrawComponents(g);return}function k(P){var J=P.xaxis,H=P.yaxis;y._defs.select("#"+P.clipId+"> rect").call(p.setTranslate,0,0).call(p.setScale,1,1),P.plot.call(p.setTranslate,J._offset,H._offset).call(p.setScale,1,1);var Y=P.plot.selectAll(".scatterlayer .trace");Y.selectAll(".point").call(p.setPointGroupScale,1,1),Y.selectAll(".textpoint").call(p.setTextPointsScale,1,1),Y.call(p.hideOutsideRangePoints,P)}function D(P,J){var H=P.plotinfo,Y=H.xaxis,Z=H.yaxis,z=Y._length,q=Z._length,X=!!P.xr1,K=!!P.yr1,ee=[];if(X){var ne=u.simpleMap(P.xr0,Y.r2l),le=u.simpleMap(P.xr1,Y.r2l),W=ne[1]-ne[0],ce=le[1]-le[0];ee[0]=(ne[0]*(1-J)+J*le[0]-ne[0])/(ne[1]-ne[0])*z,ee[2]=z*(1-J+J*ce/W),Y.range[0]=Y.l2r(ne[0]*(1-J)+J*le[0]),Y.range[1]=Y.l2r(ne[1]*(1-J)+J*le[1])}else ee[0]=0,ee[2]=z;if(K){var de=u.simpleMap(P.yr0,Z.r2l),ve=u.simpleMap(P.yr1,Z.r2l),pe=de[1]-de[0],be=ve[1]-ve[0];ee[1]=(de[1]*(1-J)+J*ve[1]-de[1])/(de[0]-de[1])*q,ee[3]=q*(1-J+J*be/pe),Z.range[0]=Y.l2r(de[0]*(1-J)+J*ve[0]),Z.range[1]=Z.l2r(de[1]*(1-J)+J*ve[1])}else ee[1]=0,ee[3]=q;v.drawOne(g,Y,{skipTitle:!0}),v.drawOne(g,Z,{skipTitle:!0}),v.redrawComponents(g,[Y._id,Z._id]);var Le=X?z/ee[2]:1,Ae=K?q/ee[3]:1,We=X?ee[0]:0,te=K?ee[1]:0,ae=X?ee[0]/ee[2]*z:0,G=K?ee[1]/ee[3]*q:0,Q=Y._offset-ae,U=Z._offset-G;H.clipRect.call(p.setTranslate,We,te).call(p.setScale,1/Le,1/Ae),H.plot.call(p.setTranslate,Q,U).call(p.setScale,Le,Ae),p.setPointGroupScale(H.zoomScalePts,1/Le,1/Ae),p.setTextPointsScale(H.zoomScaleTxt,1/Le,1/Ae)}var M;T&&(M=T());function A(){for(var P={},J=0;J<w.length;J++){var H=w[J],Y=H.plotinfo.xaxis,Z=H.plotinfo.yaxis;H.xr1&&(P[Y._name+".range"]=H.xr1.slice()),H.yr1&&(P[Z._name+".range"]=H.yr1.slice())}return M&&M(),c.call("relayout",g,P).then(function(){for(var z=0;z<w.length;z++)k(w[z].plotinfo)})}function C(){for(var P={},J=0;J<w.length;J++){var H=w[J],Y=H.plotinfo.xaxis,Z=H.plotinfo.yaxis;H.xr0&&(P[Y._name+".range"]=H.xr0.slice()),H.yr0&&(P[Z._name+".range"]=H.yr0.slice())}return c.call("relayout",g,P).then(function(){for(var z=0;z<w.length;z++)k(w[z].plotinfo)})}var j,b,S,L=h.ease(o.easing);g._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(S),S=null,C()});function F(){b=Date.now();for(var P=Math.min(1,(b-j)/o.duration),J=L(P),H=0;H<w.length;H++)D(w[H],J);b-j>o.duration?(A(),S=window.cancelAnimationFrame(F)):S=window.requestAnimationFrame(F)}return j=Date.now(),S=window.requestAnimationFrame(F),Promise.resolve()}}}),Em=i({"src/plots/cartesian/index.js"(V){var $=f(),h=xn(),c=_r(),u=xi(),p=oi(),v=ii().getModuleCalcData,m=Ur(),g=Yr(),w=ns(),o=c.ensureSingle;function T(j,b,S){return c.ensureSingle(j,b,S,function(L){L.datum(S)})}var y=g.zindexSeparator;V.name="cartesian",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=g.idRegex,V.attrRegex=g.attrRegex,V.attributes=L5(),V.layoutAttributes=Ps(),V.supplyLayoutDefaults=P5(),V.transitionAxes=N5(),V.finalizeSubplots=function(j,b){var S=b._subplots,L=S.xaxis,F=S.yaxis,P=S.cartesian,J=P,H={},Y={},Z,z,q;for(Z=0;Z<J.length;Z++){var X=J[Z].split("y");H[X[0]]=1,Y["y"+X[1]]=1}for(Z=0;Z<L.length;Z++)z=L[Z],H[z]||(q=(j[m.id2name(z)]||{}).anchor,g.idRegex.y.test(q)||(q="y"),P.push(z+q),J.push(z+q),Y[q]||(Y[q]=1,c.pushUnique(F,q)));for(Z=0;Z<F.length;Z++)q=F[Z],Y[q]||(z=(j[m.id2name(q)]||{}).anchor,g.idRegex.x.test(z)||(z="x"),P.push(z+q),J.push(z+q),H[z]||(H[z]=1,c.pushUnique(L,z)));if(!J.length){z="",q="";for(var K in j)if(g.attrRegex.test(K)){var ee=K.charAt(0);ee==="x"?(!z||+K.substr(5)<+z.substr(5))&&(z=K):(!q||+K.substr(5)<+q.substr(5))&&(q=K)}z=z?m.name2id(z):"x",q=q?m.name2id(q):"y",L.push(z),F.push(q),P.push(z+q)}},V.plot=function(j,b,S,L){var F=j._fullLayout,P=F._subplots.cartesian,J=j.calcdata,H;if(!Array.isArray(b))for(b=[],H=0;H<J.length;H++)b.push(H);for(var Y=F._zindices,Z=0;Z<Y.length;Z++){var z=Y[Z];for(H=0;H<P.length;H++){var q=P[H],X=F._plots[q];if(Z>0){var K=X.id;if(K.indexOf(y)!==-1)continue;K+=y+(Z+1),X=c.extendFlat({},X,{id:K,plot:F._cartesianlayer.selectAll(".subplot").select("."+K)})}for(var ee=[],ne,le=0;le<J.length;le++){var W=J[le],ce=W[0].trace;z===(ce.zorder||0)&&ce.xaxis+ce.yaxis===q&&((b.indexOf(ce.index)!==-1||ce.carpet)&&(ne&&ne[0].trace.xaxis+ne[0].trace.yaxis===q&&["tonextx","tonexty","tonext"].indexOf(ce.fill)!==-1&&ee.indexOf(ne)===-1&&ee.push(ne),ee.push(W)),ne=W)}k(j,X,ee,S,L)}}};function k(j,b,S,L,F){for(var P=g.traceLayerClasses,J=j._fullLayout,H=J._zindices,Y=J._modules,Z,z,q,X=[],K=[],ee=0;ee<H.length;ee++)for(var ne=H[ee],le=0;le<Y.length;le++){Z=Y[le];var W=Z.name,ce=h.modules[W].categories;if(ce.svg){var de=Z.layerName||W+"layer",ve=de+(ee?Number(ee)+1:""),pe=Z.plot;z=v(S,pe,ne),q=z[0],S=z[1],q.length&&X.push({i:P.indexOf(de),zindex:ee,className:ve,plotMethod:pe,cdModule:q}),ce.zoomScale&&K.push("."+ve)}}X.sort(function(Ae,We){return(Ae.zindex||0)-(We.zindex||0)||Ae.i-We.i});var be=b.plot.selectAll("g.mlayer").data(X,function(Ae){return Ae.className});if(be.enter().append("g").attr("class",function(Ae){return Ae.className}).classed("mlayer",!0).classed("rangeplot",b.isRangePlot),be.exit().remove(),be.order(),be.each(function(Ae){var We=$.select(this),te=Ae.className;Ae.plotMethod(j,b,Ae.cdModule,We,L,F),g.clipOnAxisFalseQuery.indexOf("."+te)===-1&&p.setClipUrl(We,b.layerClipId,j)}),J._has("scattergl")&&(Z=h.getModule("scattergl"),q=v(S,Z)[0],Z.plot(j,b,q)),!j._context.staticPlot&&(b._hasClipOnAxisFalse&&(b.clipOnAxisFalseTraces=b.plot.selectAll(g.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),K.length)){var Le=b.plot.selectAll(K.join(",")).selectAll(".trace");b.zoomScalePts=Le.selectAll("path.point"),b.zoomScaleTxt=Le.selectAll(".textpoint")}}V.clean=function(j,b,S,L){var F=L._plots||{},P=b._plots||{},J=L._subplots||{},H,Y,Z;if(L._hasOnlyLargeSploms&&!b._hasOnlyLargeSploms)for(Z in F)H=F[Z],H.plotgroup&&H.plotgroup.remove();var z=L._has&&L._has("gl"),q=b._has&&b._has("gl");if(z&&!q)for(Z in F)H=F[Z],H._scene&&H._scene.destroy();if(J.xaxis&&J.yaxis){var X=m.listIds({_fullLayout:L});for(Y=0;Y<X.length;Y++){var K=X[Y];b[m.id2name(K)]||L._infolayer.selectAll(".g-"+K+"title").remove()}}var ee=L._has&&L._has("cartesian"),ne=b._has&&b._has("cartesian");if(ee&&!ne)A(L._cartesianlayer.selectAll(".subplot"),L),L._defs.selectAll(".axesclip").remove(),delete L._axisConstraintGroups,delete L._axisMatchGroups;else if(J.cartesian)for(Y=0;Y<J.cartesian.length;Y++){var le=J.cartesian[Y];if(le.indexOf(y)===-1&&!P[le]){var W="."+le+",."+le+"-x,."+le+"-y";L._cartesianlayer.selectAll(W).remove(),C(le,L)}}},V.drawFramework=function(j){var b=j._fullLayout,S=j.calcdata,L,F={};for(L=0;L<S.length;L++){var P=S[L][0],J=P.trace,H=J.zorder||0;F[H]||(F[H]=[]),F[H].push(P)}var Y=Object.keys(F).map(Number).sort(c.sorterAsc);Y.length||(Y=[0]),b._zindices=Y;var Z=D(j),z=Z.length,q=[];for(L=0;L<z;L++)q[L]=Z[L].slice();for(var X=1;X<Y.length;X++){var K=[];for(L=0;L<z;L++)K[L]=Z[L].slice(),K[L][0]+=y+(X+1);q=q.concat(K)}var ee=b._cartesianlayer.selectAll(".subplot").data(q,String);ee.enter().append("g").attr("class",function(ne){return"subplot "+ne[0]}),ee.order(),ee.exit().call(A,b),ee.each(function(ne){var le=ne[0],W=le.indexOf(y),ce=W!==-1,de=ce?le.slice(0,W):le,ve=b._plots[le];ve||(ve=c.extendFlat({},b._plots[de]),ve&&(ve.id=le,b._plots[le]=ve,b._subplots.cartesian.push(le))),ve&&(ve.plotgroup=$.select(this),M(j,ve),ce||(ve.draglayer=o(b._draggers,"g",le)))})},V.rangePlot=function(j,b,S){M(j,b),k(j,b,S),u.style(j)};function D(j){var b=j._fullLayout,S=b._zindices.length,L=b._subplots.cartesian,F=L.length,P,J,H,Y,Z,z,q=[],X=[];for(P=0;P<F;P++){H=L[P],Y=b._plots[H],Z=Y.xaxis,z=Y.yaxis;var K=Z._mainAxis,ee=z._mainAxis,ne=K._id+ee._id,le=b._plots[ne];Y.overlays=[],ne!==H&&le?(Y.mainplot=ne,Y.mainplotinfo=le,X.push(H)):(Y.mainplot=void 0,Y.mainplotinfo=void 0,q.push(H))}for(P=0;P<X.length;P++)H=X[P],Y=b._plots[H],Y.mainplotinfo.overlays.push(Y);var W=q.concat(X),ce=[];for(P=0;P<F;P++){H=W[P],Y=b._plots[H],Z=Y.xaxis,z=Y.yaxis;for(var de=[],ve=1;ve<=S;ve++){var pe="";for(ve>1&&(pe+=y+ve),de.push(H+pe),J=0;J<Y.overlays.length;J++)de.push(Y.overlays[J].id+pe)}de=de.concat([Z.layer,z.layer,Z.overlaying||"",z.overlaying||""]),ce.push(de)}return ce}function M(j,b){var S=j._fullLayout,L=b.plotgroup,F=b.id,P=F.indexOf(y),J=P!==-1,H=g.layerValue2layerClass[b.xaxis.layer],Y=g.layerValue2layerClass[b.yaxis.layer],Z=S._hasOnlyLargeSploms,z=S._zindices.length>1,q=b.mainplotinfo;if(!b.mainplot||z)if(Z)b.xlines=o(L,"path","xlines-above"),b.ylines=o(L,"path","ylines-above"),b.xaxislayer=o(L,"g","xaxislayer-above"),b.yaxislayer=o(L,"g","yaxislayer-above");else{if(!J){var X=o(L,"g","layer-subplot");b.shapelayer=o(X,"g","shapelayer"),b.imagelayer=o(X,"g","imagelayer"),q&&z?(b.minorGridlayer=q.minorGridlayer,b.gridlayer=q.gridlayer,b.zerolinelayer=q.zerolinelayer):(b.minorGridlayer=o(L,"g","minor-gridlayer"),b.gridlayer=o(L,"g","gridlayer"),b.zerolinelayer=o(L,"g","zerolinelayer"));var K=o(L,"g","layer-between");b.shapelayerBetween=o(K,"g","shapelayer"),b.imagelayerBetween=o(K,"g","imagelayer"),o(L,"path","xlines-below"),o(L,"path","ylines-below"),b.overlinesBelow=o(L,"g","overlines-below"),o(L,"g","xaxislayer-below"),o(L,"g","yaxislayer-below"),b.overaxesBelow=o(L,"g","overaxes-below")}b.overplot=o(L,"g","overplot"),b.plot=o(b.overplot,"g",F),J||(b.xlines=o(L,"path","xlines-above"),b.ylines=o(L,"path","ylines-above"),b.overlinesAbove=o(L,"g","overlines-above"),o(L,"g","xaxislayer-above"),o(L,"g","yaxislayer-above"),b.overaxesAbove=o(L,"g","overaxes-above"),b.xlines=L.select(".xlines-"+H),b.ylines=L.select(".ylines-"+Y),b.xaxislayer=L.select(".xaxislayer-"+H),b.yaxislayer=L.select(".yaxislayer-"+Y))}else{var ee=q.plotgroup,ne=F+"-x",le=F+"-y";b.minorGridlayer=q.minorGridlayer,b.gridlayer=q.gridlayer,b.zerolinelayer=q.zerolinelayer,o(q.overlinesBelow,"path",ne),o(q.overlinesBelow,"path",le),o(q.overaxesBelow,"g",ne),o(q.overaxesBelow,"g",le),b.plot=o(q.overplot,"g",F),o(q.overlinesAbove,"path",ne),o(q.overlinesAbove,"path",le),o(q.overaxesAbove,"g",ne),o(q.overaxesAbove,"g",le),b.xlines=ee.select(".overlines-"+H).select("."+ne),b.ylines=ee.select(".overlines-"+Y).select("."+le),b.xaxislayer=ee.select(".overaxes-"+H).select("."+ne),b.yaxislayer=ee.select(".overaxes-"+Y).select("."+le)}J||(Z||(T(b.minorGridlayer,"g",b.xaxis._id),T(b.minorGridlayer,"g",b.yaxis._id),b.minorGridlayer.selectAll("g").map(function(W){return W[0]}).sort(m.idSort),T(b.gridlayer,"g",b.xaxis._id),T(b.gridlayer,"g",b.yaxis._id),b.gridlayer.selectAll("g").map(function(W){return W[0]}).sort(m.idSort)),b.xlines.style("fill","none").classed("crisp",!0),b.ylines.style("fill","none").classed("crisp",!0))}function A(j,b){if(j){var S={};j.each(function(Y){var Z=Y[0],z=$.select(this);z.remove(),C(Z,b),S[Z]=!0});for(var L in b._plots)for(var F=b._plots[L],P=F.overlays||[],J=0;J<P.length;J++){var H=P[J];S[H.id]&&H.plot.selectAll(".trace").remove()}}}function C(j,b){b._draggers.selectAll("g."+j).remove(),b._defs.select("#clip"+b._uid+j+"plot").remove()}V.toSVG=function(j){var b=j._fullLayout._glimages,S=$.select(j).selectAll(".svg-container"),L=S.filter(function(P,J){return J===S.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function F(){var P=this,J=P.toDataURL("image/png"),H=b.append("svg:image");H.attr({xmlns:w.svg,"xlink:href":J,preserveAspectRatio:"none",x:0,y:0,width:P.style.width,height:P.style.height})}L.each(F)},V.updateFx=Dy().updateFx}}),z5=i({"src/traces/scatter/index.js"(V,$){var h=za();$.exports={hasLines:h.hasLines,hasMarkers:h.hasMarkers,hasText:h.hasText,isBubble:h.isBubble,attributes:cu(),layoutAttributes:An(),supplyDefaults:g5(),crossTraceDefaults:y5(),supplyLayoutDefaults:x5(),calc:Wy().calc,crossTraceCalc:_5(),arraysToCalcdata:By(),plot:M5(),colorbar:Uy(),formatLabels:T5(),style:Vy().style,styleOnSelect:Vy().styleOnSelect,hoverPoints:C5(),selectPoints:j5(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:Em(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}}}),F5=i({"src/components/annotations/draw_arrow_head.js"(V,$){var h=f(),c=ut(),u=Ly(),p=_r(),v=p.strScale,m=p.strRotate,g=p.strTranslate;$.exports=function(o,T,y){var k=o.node(),D=u[y.arrowhead||0],M=u[y.startarrowhead||0],A=(y.arrowwidth||1)*(y.arrowsize||1),C=(y.arrowwidth||1)*(y.startarrowsize||1),j=T.indexOf("start")>=0,b=T.indexOf("end")>=0,S=D.backoff*A+y.standoff,L=M.backoff*C+y.startstandoff,F,P,J,H;if(k.nodeName==="line"){F={x:+o.attr("x1"),y:+o.attr("y1")},P={x:+o.attr("x2"),y:+o.attr("y2")};var Y=F.x-P.x,Z=F.y-P.y;if(J=Math.atan2(Z,Y),H=J+Math.PI,S&&L&&S+L>Math.sqrt(Y*Y+Z*Z)){pe();return}if(S){if(S*S>Y*Y+Z*Z){pe();return}var z=S*Math.cos(J),q=S*Math.sin(J);P.x+=z,P.y+=q,o.attr({x2:P.x,y2:P.y})}if(L){if(L*L>Y*Y+Z*Z){pe();return}var X=L*Math.cos(J),K=L*Math.sin(J);F.x-=X,F.y-=K,o.attr({x1:F.x,y1:F.y})}}else if(k.nodeName==="path"){var ee=k.getTotalLength(),ne="";if(ee<S+L){pe();return}var le=k.getPointAtLength(0),W=k.getPointAtLength(.1);J=Math.atan2(le.y-W.y,le.x-W.x),F=k.getPointAtLength(Math.min(L,ee)),ne="0px,"+L+"px,";var ce=k.getPointAtLength(ee),de=k.getPointAtLength(ee-.1);H=Math.atan2(ce.y-de.y,ce.x-de.x),P=k.getPointAtLength(Math.max(0,ee-S));var ve=ne?L+S:S;ne+=ee-ve+"px,"+ee+"px",o.style("stroke-dasharray",ne)}function pe(){o.style("stroke-dasharray","0px,100px")}function be(Le,Ae,We,te){Le.path&&(Le.noRotate&&(We=0),h.select(k.parentNode).append("path").attr({class:o.attr("class"),d:Le.path,transform:g(Ae.x,Ae.y)+m(We*180/Math.PI)+v(te)}).style({fill:c.rgb(y.arrowcolor),"stroke-width":0}))}j&&be(M,F,J,C),b&&be(D,P,H,A)}}}),Dm=i({"src/components/annotations/draw.js"(V,$){var h=f(),c=xn(),u=xi(),p=_r(),v=p.strTranslate,m=ji(),g=ut(),w=oi(),o=so(),T=ia(),y=Fo(),k=Ys(),D=hr().arrayEditor,M=F5();$.exports={draw:A,drawOne:C,drawRaw:b};function A(S){var L=S._fullLayout;L._infolayer.selectAll(".annotation").remove();for(var F=0;F<L.annotations.length;F++)L.annotations[F].visible&&C(S,F);return u.previousPromises(S)}function C(S,L){var F=S._fullLayout,P=F.annotations[L]||{},J=m.getFromId(S,P.xref),H=m.getFromId(S,P.yref);J&&J.setScale(),H&&H.setScale(),b(S,P,L,!1,J,H)}function j(S,L,F,P,J){var H=J[F],Y=J[F+"ref"],Z=F.indexOf("y")!==-1,z=m.getRefType(Y)==="domain",q=Z?P.h:P.w;return S?z?H+(Z?-L:L)/S._length:S.p2r(S.r2p(H)+L):H+(Z?-L:L)/q}function b(S,L,F,P,J,H){var Y=S._fullLayout,Z=S._fullLayout._size,z=S._context.edits,q,X;P?(q="annotation-"+P,X=P+".annotations"):(q="annotation",X="annotations");var K=D(S.layout,X,L),ee=K.modifyBase,ne=K.modifyItem,le=K.getUpdateObj;Y._infolayer.selectAll("."+q+'[data-index="'+F+'"]').remove();var W="clip"+Y._uid+"_ann"+F;if(!L._input||L.visible===!1){h.selectAll("#"+W).remove();return}var ce={x:{},y:{}},de=+L.textangle||0,ve=Y._infolayer.append("g").classed(q,!0).attr("data-index",String(F)).style("opacity",L.opacity),pe=ve.append("g").classed("annotation-text-g",!0),be=z[L.showarrow?"annotationTail":"annotationPosition"],Le=L.captureevents||z.annotationText||be;function Ae(_e){var ke={index:F,annotation:L._input,fullAnnotation:L,event:_e};return P&&(ke.subplotId=P),ke}var We=pe.append("g").style("pointer-events",Le?"all":null).call(y,"pointer").on("click",function(){S._dragging=!1,S.emit("plotly_clickannotation",Ae(h.event))});L.hovertext&&We.on("mouseover",function(){var _e=L.hoverlabel,ke=_e.font,Pe=this.getBoundingClientRect(),Ge=S.getBoundingClientRect();o.loneHover({x0:Pe.left-Ge.left,x1:Pe.right-Ge.left,y:(Pe.top+Pe.bottom)/2-Ge.top,text:L.hovertext,color:_e.bgcolor,borderColor:_e.bordercolor,fontFamily:ke.family,fontSize:ke.size,fontColor:ke.color,fontWeight:ke.weight,fontStyle:ke.style,fontVariant:ke.variant,fontShadow:ke.fontShadow,fontLineposition:ke.fontLineposition,fontTextcase:ke.fontTextcase},{container:Y._hoverlayer.node(),outerContainer:Y._paper.node(),gd:S})}).on("mouseout",function(){o.loneUnhover(Y._hoverlayer.node())});var te=L.borderwidth,ae=L.borderpad,G=te+ae,Q=We.append("rect").attr("class","bg").style("stroke-width",te+"px").call(g.stroke,L.bordercolor).call(g.fill,L.bgcolor),U=L.width||L.height,re=Y._topclips.selectAll("#"+W).data(U?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",W).append("rect"),re.exit().remove();var R=L.font,B=Y._meta?p.templateString(L.text,Y._meta):L.text,oe=We.append("text").classed("annotation-text",!0).text(B);function ie(_e){return _e.call(w.font,R).attr({"text-anchor":{left:"start",right:"end"}[L.align]||"middle"}),T.convertToTspans(_e,S,xe),_e}function xe(){var _e=oe.selectAll("a");if(_e.size()===1&&_e.text()===oe.text()){var ke=We.insert("a",":first-child").attr({"xlink:xlink:href":_e.attr("xlink:href"),"xlink:xlink:show":_e.attr("xlink:show")}).style({cursor:"pointer"});ke.node().appendChild(Q.node())}var Pe=We.select(".annotation-text-math-group"),Ge=!Pe.empty(),Je=w.bBox((Ge?Pe:oe).node()),yt=Je.width,lt=Je.height,mt=L.width||yt,Ce=L.height||lt,Ie=Math.round(mt+2*G),Se=Math.round(Ce+2*G);function Be(Fr,xr){return xr==="auto"&&(Fr<1/3?xr="left":Fr>2/3?xr="right":xr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[xr]}for(var rt=!1,ht=["x","y"],Lt=0;Lt<ht.length;Lt++){var Ct=ht[Lt],zt=L[Ct+"ref"]||Ct,Bt=L["a"+Ct+"ref"],Ft={x:J,y:H}[Ct],nr=(de+(Ct==="x"?0:-90))*Math.PI/180,_t=Ie*Math.cos(nr),rr=Se*Math.sin(nr),pr=Math.abs(_t)+Math.abs(rr),Yt=L[Ct+"anchor"],sr=L[Ct+"shift"]*(Ct==="x"?1:-1),ze=ce[Ct],Ye,$e,he,je,Ne,Re=m.getRefType(zt);if(Ft&&Re!=="domain"){var nt=Ft.r2fraction(L[Ct]);(nt<0||nt>1)&&(Bt===zt?(nt=Ft.r2fraction(L["a"+Ct]),(nt<0||nt>1)&&(rt=!0)):rt=!0),Ye=Ft._offset+Ft.r2p(L[Ct]),je=.5}else{var at=Re==="domain";Ct==="x"?(he=L[Ct],Ye=at?Ft._offset+Ft._length*he:Ye=Z.l+Z.w*he):(he=1-L[Ct],Ye=at?Ft._offset+Ft._length*he:Ye=Z.t+Z.h*he),je=L.showarrow?.5:he}if(L.showarrow){ze.head=Ye;var dt=L["a"+Ct];if(Ne=_t*Be(.5,L.xanchor)-rr*Be(.5,L.yanchor),Bt===zt){var Mt=m.getRefType(Bt);Mt==="domain"?(Ct==="y"&&(dt=1-dt),ze.tail=Ft._offset+Ft._length*dt):Mt==="paper"?Ct==="y"?(dt=1-dt,ze.tail=Z.t+Z.h*dt):ze.tail=Z.l+Z.w*dt:ze.tail=Ft._offset+Ft.r2p(dt),$e=Ne}else ze.tail=Ye+dt,$e=Ne+dt;ze.text=ze.tail+Ne;var Nt=Y[Ct==="x"?"width":"height"];if(zt==="paper"&&(ze.head=p.constrain(ze.head,1,Nt-1)),Bt==="pixel"){var ot=-Math.max(ze.tail-3,ze.text),jt=Math.min(ze.tail+3,ze.text)-Nt;ot>0?(ze.tail+=ot,ze.text+=ot):jt>0&&(ze.tail-=jt,ze.text-=jt)}ze.tail+=sr,ze.head+=sr}else Ne=pr*Be(je,Yt),$e=Ne,ze.text=Ye+Ne;ze.text+=sr,Ne+=sr,$e+=sr,L["_"+Ct+"padplus"]=pr/2+$e,L["_"+Ct+"padminus"]=pr/2-$e,L["_"+Ct+"size"]=pr,L["_"+Ct+"shift"]=Ne}if(rt){We.remove();return}var Ut=0,Gt=0;if(L.align!=="left"&&(Ut=(mt-yt)*(L.align==="center"?.5:1)),L.valign!=="top"&&(Gt=(Ce-lt)*(L.valign==="middle"?.5:1)),Ge)Pe.select("svg").attr({x:G+Ut-1,y:G+Gt}).call(w.setClipUrl,U?W:null,S);else{var Tr=G+Gt-Je.top,Dr=G+Ut-Je.left;oe.call(T.positionText,Dr,Tr).call(w.setClipUrl,U?W:null,S)}re.select("rect").call(w.setRect,G,G,mt,Ce),Q.call(w.setRect,te/2,te/2,Ie-te,Se-te),We.call(w.setTranslate,Math.round(ce.x.text-Ie/2),Math.round(ce.y.text-Se/2)),pe.attr({transform:"rotate("+de+","+ce.x.text+","+ce.y.text+")"});var Vr=function(Fr,xr){ve.selectAll(".annotation-arrow-g").remove();var br=ce.x.head,Wr=ce.y.head,Or=ce.x.tail+Fr,qr=ce.y.tail+xr,Er=ce.x.text+Fr,vr=ce.y.text+xr,Ir=p.rotationXYMatrix(de,Er,vr),ln=p.apply2DTransform(Ir),kn=p.apply2DTransform2(Ir),Hr=+Q.attr("width"),pn=+Q.attr("height"),mn=Er-.5*Hr,Un=mn+Hr,gr=vr-.5*pn,Cn=gr+pn,we=[[mn,gr,mn,Cn],[mn,Cn,Un,Cn],[Un,Cn,Un,gr],[Un,gr,mn,gr]].map(kn);if(!we.reduce(function(tr,ur){return tr^!!p.segmentsIntersect(br,Wr,br+1e6,Wr+1e6,ur[0],ur[1],ur[2],ur[3])},!1)){we.forEach(function(tr){var ur=p.segmentsIntersect(Or,qr,br,Wr,tr[0],tr[1],tr[2],tr[3]);ur&&(Or=ur.x,qr=ur.y)});var ge=L.arrowwidth,pt=L.arrowcolor,ft=L.arrowside,Xe=ve.append("g").style({opacity:g.opacity(pt)}).classed("annotation-arrow-g",!0),Qe=Xe.append("path").attr("d","M"+Or+","+qr+"L"+br+","+Wr).style("stroke-width",ge+"px").call(g.stroke,g.rgb(pt));if(M(Qe,ft,L),z.annotationPosition&&Qe.node().parentNode&&!P){var st=br,At=Wr;if(L.standoff){var it=Math.sqrt(Math.pow(br-Or,2)+Math.pow(Wr-qr,2));st+=L.standoff*(Or-br)/it,At+=L.standoff*(qr-Wr)/it}var bt=Xe.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Or-st)+","+(qr-At),transform:v(st,At)}).style("stroke-width",ge+6+"px").call(g.stroke,"rgba(0,0,0,0)").call(g.fill,"rgba(0,0,0,0)"),Tt,Rt;k.init({element:bt.node(),gd:S,prepFn:function(){var tr=w.getTranslate(We);Tt=tr.x,Rt=tr.y,J&&J.autorange&&ee(J._name+".autorange",!0),H&&H.autorange&&ee(H._name+".autorange",!0)},moveFn:function(tr,ur){var fr=ln(Tt,Rt),Rr=fr[0]+tr,wr=fr[1]+ur;We.call(w.setTranslate,Rr,wr),ne("x",j(J,tr,"x",Z,L)),ne("y",j(H,ur,"y",Z,L)),L.axref===L.xref&&ne("ax",j(J,tr,"ax",Z,L)),L.ayref===L.yref&&ne("ay",j(H,ur,"ay",Z,L)),Xe.attr("transform",v(tr,ur)),pe.attr({transform:"rotate("+de+","+Rr+","+wr+")"})},doneFn:function(){c.call("_guiRelayout",S,le());var tr=document.querySelector(".js-notes-box-panel");tr&&tr.redraw(tr.selectedObj)}})}}};if(L.showarrow&&Vr(0,0),be){var Mr;k.init({element:We.node(),gd:S,prepFn:function(){Mr=pe.attr("transform")},moveFn:function(Fr,xr){var br="pointer";if(L.showarrow)L.axref===L.xref?ne("ax",j(J,Fr,"ax",Z,L)):ne("ax",L.ax+Fr),L.ayref===L.yref?ne("ay",j(H,xr,"ay",Z.w,L)):ne("ay",L.ay+xr),Vr(Fr,xr);else{if(P)return;var Wr,Or;if(J)Wr=j(J,Fr,"x",Z,L);else{var qr=L._xsize/Z.w,Er=L.x+(L._xshift-L.xshift)/Z.w-qr/2;Wr=k.align(Er+Fr/Z.w,qr,0,1,L.xanchor)}if(H)Or=j(H,xr,"y",Z,L);else{var vr=L._ysize/Z.h,Ir=L.y-(L._yshift+L.yshift)/Z.h-vr/2;Or=k.align(Ir-xr/Z.h,vr,0,1,L.yanchor)}ne("x",Wr),ne("y",Or),(!J||!H)&&(br=k.getCursor(J?.5:Wr,H?.5:Or,L.xanchor,L.yanchor))}pe.attr({transform:v(Fr,xr)+Mr}),y(We,br)},clickFn:function(Fr,xr){L.captureevents&&S.emit("plotly_clickannotation",Ae(xr))},doneFn:function(){y(We),c.call("_guiRelayout",S,le());var Fr=document.querySelector(".js-notes-box-panel");Fr&&Fr.redraw(Fr.selectedObj)}})}}z.annotationText?oe.call(T.makeEditable,{delegate:We,gd:S}).call(ie).on("edit",function(_e){L.text=_e,this.call(ie),ne("text",_e),J&&J.autorange&&ee(J._name+".autorange",!0),H&&H.autorange&&ee(H._name+".autorange",!0),c.call("_guiRelayout",S,le())}):oe.call(ie)}}}),I5=i({"src/components/annotations/click.js"(V,$){var h=_r(),c=xn(),u=hr().arrayEditor;$.exports={hasClickToShow:p,onClick:v};function p(w,o){var T=m(w,o);return T.on.length>0||T.explicitOff.length>0}function v(w,o){var T=m(w,o),y=T.on,k=T.off.concat(T.explicitOff),D={},M=w._fullLayout.annotations,A,C;if(y.length||k.length){for(A=0;A<y.length;A++)C=u(w.layout,"annotations",M[y[A]]),C.modifyItem("visible",!0),h.extendFlat(D,C.getUpdateObj());for(A=0;A<k.length;A++)C=u(w.layout,"annotations",M[k[A]]),C.modifyItem("visible",!1),h.extendFlat(D,C.getUpdateObj());return c.call("update",w,{},D)}}function m(w,o){var T=w._fullLayout.annotations,y=[],k=[],D=[],M=(o||[]).length,A,C,j,b,S,L,F,P;for(A=0;A<T.length;A++)if(j=T[A],b=j.clicktoshow,b){for(C=0;C<M;C++)if(S=o[C],L=S.xaxis,F=S.yaxis,L._id===j.xref&&F._id===j.yref&&L.d2r(S.x)===g(j._xclick,L)&&F.d2r(S.y)===g(j._yclick,F)){j.visible?b==="onout"?P=k:P=D:P=y,P.push(A);break}C===M&&j.visible&&b==="onout"&&k.push(A)}return{on:y,off:k,explicitOff:D}}function g(w,o){return o.type==="log"?o.l2r(w):o.d2r(w)}}}),Gy=i({"src/components/annotations/common_defaults.js"(V,$){var h=_r(),c=ut();$.exports=function(p,v,m,g){g("opacity");var w=g("bgcolor"),o=g("bordercolor"),T=c.opacity(o);g("borderpad");var y=g("borderwidth"),k=g("showarrow");g("text",k?" ":m._dfltTitle.annotation),g("textangle"),h.coerceFont(g,"font",m.font),g("width"),g("align");var D=g("height");if(D&&g("valign"),k){var M=g("arrowside"),A,C;M.indexOf("end")!==-1&&(A=g("arrowhead"),C=g("arrowsize")),M.indexOf("start")!==-1&&(g("startarrowhead",A),g("startarrowsize",C)),g("arrowcolor",T?v.bordercolor:c.defaultLine),g("arrowwidth",(T&&y||1)*2),g("standoff"),g("startstandoff")}var j=g("hovertext"),b=m.hoverlabel||{};if(j){var S=g("hoverlabel.bgcolor",b.bgcolor||(c.opacity(w)?c.rgb(w):c.defaultLine)),L=g("hoverlabel.bordercolor",b.bordercolor||c.contrast(S)),F=h.extendFlat({},b.font);F.color||(F.color=L),h.coerceFont(g,"hoverlabel.font",F)}g("captureevents",!!j)}}}),O5=i({"src/components/annotations/defaults.js"(V,$){var h=_r(),c=ji(),u=Ns(),p=Gy(),v=cd();$.exports=function(w,o){u(w,o,{name:"annotations",handleItemDefaults:m})};function m(g,w,o){function T(Z,z){return h.coerce(g,w,v,Z,z)}var y=T("visible"),k=T("clicktoshow");if(y||k){p(g,w,o,T);for(var D=w.showarrow,M=["x","y"],A=[-10,-30],C={_fullLayout:o},j=0;j<2;j++){var b=M[j],S=c.coerceRef(g,w,C,b,"","paper");if(S!=="paper"){var L=c.getFromId(C,S);L._annIndices.push(w._index)}if(c.coercePosition(w,C,T,S,b,.5),D){var F="a"+b,P=c.coerceRef(g,w,C,F,"pixel",["pixel","paper"]);P!=="pixel"&&P!==S&&(P=w[F]="pixel");var J=P==="pixel"?A[j]:.4;c.coercePosition(w,C,T,P,F,J)}T(b+"anchor"),T(b+"shift")}if(h.noneOrAll(g,w,["x","y"]),D&&h.noneOrAll(g,w,["ax","ay"]),k){var H=T("xclick"),Y=T("yclick");w._xclick=H===void 0?w.x:c.cleanPosition(H,C,w.xref),w._yclick=Y===void 0?w.y:c.cleanPosition(Y,C,w.yref)}}}}}),B5=i({"src/components/annotations/calc_autorange.js"(V,$){var h=_r(),c=ji(),u=Dm().draw;$.exports=function(g){var w=g._fullLayout,o=h.filterVisible(w.annotations);if(o.length&&g._fullData.length)return h.syncOrAsync([u,p],g)};function p(m){var g=m._fullLayout;h.filterVisible(g.annotations).forEach(function(w){var o=c.getFromId(m,w.xref),T=c.getFromId(m,w.yref),y=c.getRefType(w.xref),k=c.getRefType(w.yref);w._extremes={},y==="range"&&v(w,o),k==="range"&&v(w,T)})}function v(m,g){var w=g._id,o=w.charAt(0),T=m[o],y=m["a"+o],k=m[o+"ref"],D=m["a"+o+"ref"],M=m["_"+o+"padplus"],A=m["_"+o+"padminus"],C={x:1,y:-1}[o]*m[o+"shift"],j=3*m.arrowsize*m.arrowwidth||0,b=j+C,S=j-C,L=3*m.startarrowsize*m.arrowwidth||0,F=L+C,P=L-C,J;if(D===k){var H=c.findExtremes(g,[g.r2c(T)],{ppadplus:b,ppadminus:S}),Y=c.findExtremes(g,[g.r2c(y)],{ppadplus:Math.max(M,F),ppadminus:Math.max(A,P)});J={min:[H.min[0],Y.min[0]],max:[H.max[0],Y.max[0]]}}else F=y?F+y:F,P=y?P-y:P,J=c.findExtremes(g,[g.r2c(T)],{ppadplus:Math.max(M,b,F),ppadminus:Math.max(A,S,P)});m._extremes[w]=J}}}),H5=i({"src/components/annotations/convert_coords.js"(V,$){var h=fe(),c=tt();$.exports=function(p,v,m,g){v=v||{};var w=m==="log"&&v.type==="linear",o=m==="linear"&&v.type==="log";if(!(w||o))return;var T=p._fullLayout.annotations,y=v._id.charAt(0),k,D;function M(C){var j=k[C],b=null;w?b=c(j,v.range):b=Math.pow(10,j),h(b)||(b=null),g(D+C,b)}for(var A=0;A<T.length;A++)k=T[A],D="annotations["+A+"].",k[y+"ref"]===v._id&&M(y),k["a"+y+"ref"]===v._id&&M("a"+y)}}}),W5=i({"src/components/annotations/index.js"(V,$){var h=Dm(),c=I5();$.exports={moduleType:"component",name:"annotations",layoutAttributes:cd(),supplyLayoutDefaults:O5(),includeBasePlot:Jf()("annotations"),calcAutorange:B5(),draw:h.draw,drawOne:h.drawOne,drawRaw:h.drawRaw,hasClickToShow:c.hasClickToShow,onClick:c.onClick,convertCoords:H5()}}}),Rm=i({"src/components/annotations3d/attributes.js"(V,$){var h=cd(),c=Ma().overrideAll,u=hr().templatedArray;$.exports=c(u("annotation",{visible:h.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:h.xanchor,xshift:h.xshift,yanchor:h.yanchor,yshift:h.yshift,text:h.text,textangle:h.textangle,font:h.font,width:h.width,height:h.height,opacity:h.opacity,align:h.align,valign:h.valign,bgcolor:h.bgcolor,bordercolor:h.bordercolor,borderpad:h.borderpad,borderwidth:h.borderwidth,showarrow:h.showarrow,arrowcolor:h.arrowcolor,arrowhead:h.arrowhead,startarrowhead:h.startarrowhead,arrowside:h.arrowside,arrowsize:h.arrowsize,startarrowsize:h.startarrowsize,arrowwidth:h.arrowwidth,standoff:h.standoff,startstandoff:h.startstandoff,hovertext:h.hovertext,hoverlabel:h.hoverlabel,captureevents:h.captureevents}),"calc","from-root")}}),q5=i({"src/components/annotations3d/defaults.js"(V,$){var h=_r(),c=ji(),u=Ns(),p=Gy(),v=Rm();$.exports=function(w,o,T){u(w,o,{name:"annotations",handleItemDefaults:m,fullLayout:T.fullLayout})};function m(g,w,o,T){function y(M,A){return h.coerce(g,w,v,M,A)}function k(M){var A=M+"axis",C={_fullLayout:{}};return C._fullLayout[A]=o[A],c.coercePosition(w,C,y,M,M,.5)}var D=y("visible");D&&(p(g,w,T.fullLayout,y),k("x"),k("y"),k("z"),h.noneOrAll(g,w,["x","y","z"]),w.xref="x",w.yref="y",w.zref="z",y("xanchor"),y("yanchor"),y("xshift"),y("yshift"),w.showarrow&&(w.axref="pixel",w.ayref="pixel",y("ax",-10),y("ay",-30),h.noneOrAll(g,w,["ax","ay"])))}}}),U5=i({"src/components/annotations3d/convert.js"(V,$){var h=_r(),c=ji();$.exports=function(v){for(var m=v.fullSceneLayout,g=m.annotations,w=0;w<g.length;w++)u(g[w],v);v.fullLayout._infolayer.selectAll(".annotation-"+v.id).remove()};function u(p,v){var m=v.fullSceneLayout,g=m.domain,w=v.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};p._xa={},h.extendFlat(p._xa,o),c.setConvert(p._xa),p._xa._offset=w.l+g.x[0]*w.w,p._xa.l2p=function(){return .5*(1+p._pdata[0]/p._pdata[3])*w.w*(g.x[1]-g.x[0])},p._ya={},h.extendFlat(p._ya,o),c.setConvert(p._ya),p._ya._offset=w.t+(1-g.y[1])*w.h,p._ya.l2p=function(){return .5*(1-p._pdata[1]/p._pdata[3])*w.h*(g.y[1]-g.y[0])}}}}),V5=i({"src/plots/gl3d/project.js"(V,$){function h(u,p){var v=[0,0,0,0],m,g;for(m=0;m<4;++m)for(g=0;g<4;++g)v[g]+=u[4*m+g]*p[m];return v}function c(u,p){var v=h(u.projection,h(u.view,h(u.model,[p[0],p[1],p[2],1])));return v}$.exports=c}}),$5=i({"src/components/annotations3d/draw.js"(V,$){var h=Dm().drawRaw,c=V5(),u=["x","y","z"];$.exports=function(v){for(var m=v.fullSceneLayout,g=v.dataScale,w=m.annotations,o=0;o<w.length;o++){for(var T=w[o],y=!1,k=0;k<3;k++){var D=u[k],M=T[D],A=m[D+"axis"],C=A.r2fraction(M);if(C<0||C>1){y=!0;break}}y?v.fullLayout._infolayer.select(".annotation-"+v.id+'[data-index="'+o+'"]').remove():(T._pdata=c(v.glplot.cameraParams,[m.xaxis.r2l(T.x)*g[0],m.yaxis.r2l(T.y)*g[1],m.zaxis.r2l(T.z)*g[2]]),h(v.graphDiv,T,o,v.id,T._xa,T._ya))}}}}),Y5=i({"src/components/annotations3d/index.js"(V,$){var h=xn(),c=_r();$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:Rm()}}},layoutAttributes:Rm(),handleDefaults:q5(),includeBasePlot:u,convert:U5(),draw:$5()};function u(p,v){var m=h.subplotsRegistry.gl3d;if(m)for(var g=m.attrRegex,w=Object.keys(p),o=0;o<w.length;o++){var T=w[o];g.test(T)&&(p[T].annotations||[]).length&&(c.pushUnique(v._basePlotModules,m),c.pushUnique(v._subplots.gl3d,T))}}}}),Xy=i({"src/components/shapes/attributes.js"(V,$){var h=cd(),c=ir(),u=cu().line,p=Wi().dash,v=Pt().extendFlat,m=hr().templatedArray;Kf();var g=vt(),w=Pn().shapeTexttemplateAttrs,o=Ki();$.exports=m("shape",{visible:v({},g.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:v({},g.legend,{editType:"calc+arraydraw"}),legendgroup:v({},g.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:v({},g.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:c({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:v({},g.legendrank,{editType:"calc+arraydraw"}),legendwidth:v({},g.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:v({},h.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:v({},h.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:v({},u.color,{editType:"arraydraw"}),width:v({},u.width,{editType:"calc+arraydraw"}),dash:v({},p,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:w({},{keys:Object.keys(o)}),font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})}}),G5=i({"src/components/shapes/defaults.js"(V,$){var h=_r(),c=ji(),u=Ns(),p=Xy(),v=$t();$.exports=function(o,T){u(o,T,{name:"shapes",handleItemDefaults:g})};function m(w,o){return w?"bottom":o.indexOf("top")!==-1?"top":o.indexOf("bottom")!==-1?"bottom":"middle"}function g(w,o,T){function y(te,ae){return h.coerce(w,o,p,te,ae)}o._isShape=!0;var k=y("visible");if(k){var D=y("showlegend");D&&(y("legend"),y("legendwidth"),y("legendgroup"),y("legendgrouptitle.text"),h.coerceFont(y,"legendgrouptitle.font"),y("legendrank"));var M=y("path"),A=M?"path":"rect",C=y("type",A),j=C!=="path";j&&delete o.path,y("editable"),y("layer"),y("opacity"),y("fillcolor"),y("fillrule");var b=y("line.width");b&&(y("line.color"),y("line.dash"));for(var S=y("xsizemode"),L=y("ysizemode"),F=["x","y"],P=0;P<2;P++){var J=F[P],H=J+"anchor",Y=J==="x"?S:L,Z={_fullLayout:T},z,q,X,K=c.coerceRef(w,o,Z,J,void 0,"paper"),ee=c.getRefType(K);if(ee==="range"?(z=c.getFromId(Z,K),z._shapeIndices.push(o._index),X=v.rangeToShapePosition(z),q=v.shapePositionToRange(z),(z.type==="category"||z.type==="multicategory")&&(y(J+"0shift"),y(J+"1shift"))):q=X=h.identity,j){var ne=.25,le=.75,W=J+"0",ce=J+"1",de=w[W],ve=w[ce];w[W]=q(w[W],!0),w[ce]=q(w[ce],!0),Y==="pixel"?(y(W,0),y(ce,10)):(c.coercePosition(o,Z,y,K,W,ne),c.coercePosition(o,Z,y,K,ce,le)),o[W]=X(o[W]),o[ce]=X(o[ce]),w[W]=de,w[ce]=ve}if(Y==="pixel"){var pe=w[H];w[H]=q(w[H],!0),c.coercePosition(o,Z,y,K,H,.25),o[H]=X(o[H]),w[H]=pe}}j&&h.noneOrAll(w,o,["x0","x1","y0","y1"]);var be=C==="line",Le,Ae;if(j&&(Le=y("label.texttemplate")),Le||(Ae=y("label.text")),Ae||Le){y("label.textangle");var We=y("label.textposition",be?"middle":"middle center");y("label.xanchor"),y("label.yanchor",m(be,We)),y("label.padding"),h.coerceFont(y,"label.font",T.font)}}}}}),X5=i({"src/components/shapes/draw_newshape/defaults.js"(V,$){var h=ut(),c=_r();function u(p,v){return p?"bottom":v.indexOf("top")!==-1?"top":v.indexOf("bottom")!==-1?"bottom":"middle"}$.exports=function(v,m,g){g("newshape.visible"),g("newshape.name"),g("newshape.showlegend"),g("newshape.legend"),g("newshape.legendwidth"),g("newshape.legendgroup"),g("newshape.legendgrouptitle.text"),c.coerceFont(g,"newshape.legendgrouptitle.font"),g("newshape.legendrank"),g("newshape.drawdirection"),g("newshape.layer"),g("newshape.fillcolor"),g("newshape.fillrule"),g("newshape.opacity");var w=g("newshape.line.width");if(w){var o=(v||{}).plot_bgcolor||"#FFF";g("newshape.line.color",h.contrast(o)),g("newshape.line.dash")}var T=v.dragmode==="drawline",y=g("newshape.label.text"),k=g("newshape.label.texttemplate");if(y||k){g("newshape.label.textangle");var D=g("newshape.label.textposition",T?"middle":"middle center");g("newshape.label.xanchor"),g("newshape.label.yanchor",u(T,D)),g("newshape.label.padding"),c.coerceFont(g,"newshape.label.font",m.font)}g("activeshape.fillcolor"),g("activeshape.opacity")}}}),Z5=i({"src/components/shapes/calc_autorange.js"(V,$){var h=_r(),c=ji(),u=vc(),p=$t();$.exports=function(T){var y=T._fullLayout,k=h.filterVisible(y.shapes);if(!(!k.length||!T._fullData.length))for(var D=0;D<k.length;D++){var M=k[D];M._extremes={};var A,C,j=c.getRefType(M.xref),b=c.getRefType(M.yref);M.xref!=="paper"&&j!=="domain"&&(A=c.getFromId(T,M.xref),C=w(A,M,u.paramIsX),C&&(M._extremes[A._id]=c.findExtremes(A,C,v(M)))),M.yref!=="paper"&&b!=="domain"&&(A=c.getFromId(T,M.yref),C=w(A,M,u.paramIsY),C&&(M._extremes[A._id]=c.findExtremes(A,C,m(M))))}};function v(o){return g(o.line.width,o.xsizemode,o.x0,o.x1,o.path,!1)}function m(o){return g(o.line.width,o.ysizemode,o.y0,o.y1,o.path,!0)}function g(o,T,y,k,D,M){var A=o/2,C=M;if(T==="pixel"){var j=D?p.extractPathCoords(D,M?u.paramIsY:u.paramIsX):[y,k],b=h.aggNums(Math.max,null,j),S=h.aggNums(Math.min,null,j),L=S<0?Math.abs(S)+A:A,F=b>0?b+A:A;return{ppad:A,ppadplus:C?L:F,ppadminus:C?F:L}}else return{ppad:A}}function w(o,T,y){var k=o._id.charAt(0)==="x"?"x":"y",D=o.type==="category"||o.type==="multicategory",M,A,C=0,j=0,b=D?o.r2c:o.d2c,S=T[k+"sizemode"]==="scaled";if(S?(M=T[k+"0"],A=T[k+"1"],D&&(C=T[k+"0shift"],j=T[k+"1shift"])):(M=T[k+"anchor"],A=T[k+"anchor"]),M!==void 0)return[b(M)+C,b(A)+j];if(T.path){var L=1/0,F=-1/0,P=T.path.match(u.segmentRE),J,H,Y,Z,z;for(o.type==="date"&&(b=p.decodeDate(b)),J=0;J<P.length;J++)H=P[J],Y=y[H.charAt(0)].drawn,Y!==void 0&&(Z=P[J].substr(1).match(u.paramRE),!(!Z||Z.length<Y)&&(z=b(Z[Y]),z<L&&(L=z),z>F&&(F=z)));if(F>=L)return[L,F]}}}}),K5=i({"src/components/shapes/index.js"(V,$){var h=ua();$.exports={moduleType:"component",name:"shapes",layoutAttributes:Xy(),supplyLayoutDefaults:G5(),supplyDrawNewShapeDefaults:X5(),includeBasePlot:Jf()("shapes"),calcAutorange:Z5(),draw:h.draw,drawOne:h.drawOne}}}),Zy=i({"src/components/images/attributes.js"(V,$){var h=Yr(),c=hr().templatedArray;Kf(),$.exports=c("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",h.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",h.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})}}),J5=i({"src/components/images/defaults.js"(V,$){var h=_r(),c=ji(),u=Ns(),p=Zy(),v="images";$.exports=function(w,o){var T={name:v,handleItemDefaults:m};u(w,o,T)};function m(g,w,o){function T(S,L){return h.coerce(g,w,p,S,L)}var y=T("source"),k=T("visible",!!y);if(!k)return w;T("layer"),T("xanchor"),T("yanchor"),T("sizex"),T("sizey"),T("sizing"),T("opacity");for(var D={_fullLayout:o},M=["x","y"],A=0;A<2;A++){var C=M[A],j=c.coerceRef(g,w,D,C,"paper",void 0);if(j!=="paper"){var b=c.getFromId(D,j);b._imgIndices.push(w._index)}c.coercePosition(w,D,T,j,C,0)}return w}}}),Q5=i({"src/components/images/draw.js"(V,$){var h=f(),c=oi(),u=ji(),p=Ur(),v=ns();$.exports=function(g){var w=g._fullLayout,o=[],T={},y=[],k,D;for(D=0;D<w.images.length;D++){var M=w.images[D];if(M.visible)if(M.layer==="below"&&M.xref!=="paper"&&M.yref!=="paper"){k=p.ref2id(M.xref)+p.ref2id(M.yref);var A=w._plots[k];if(!A){y.push(M);continue}A.mainplot&&(k=A.mainplot.id),T[k]||(T[k]=[]),T[k].push(M)}else M.layer==="above"?o.push(M):y.push(M)}var C={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function j(Z){var z=h.select(this);if(this._imgSrc!==Z.source)if(z.attr("xmlns",v.svg),!g._context.staticPlot||Z.source&&Z.source.slice(0,5)==="data:")z.attr("xlink:href",Z.source),this._imgSrc=Z.source;else{var q=new Promise((function(X){var K=new Image;this.img=K,K.setAttribute("crossOrigin","anonymous"),K.onerror=ee,K.onload=function(){var ne=document.createElement("canvas");ne.width=this.width,ne.height=this.height;var le=ne.getContext("2d",{willReadFrequently:!0});le.drawImage(this,0,0);var W=ne.toDataURL("image/png");z.attr("xlink:href",W),X()},z.on("error",ee),K.src=Z.source,this._imgSrc=Z.source;function ee(){z.remove(),X()}}).bind(this));g._promises.push(q)}}function b(Z){var z=h.select(this),q=u.getFromId(g,Z.xref),X=u.getFromId(g,Z.yref),K=u.getRefType(Z.xref)==="domain",ee=u.getRefType(Z.yref)==="domain",ne=w._size,le,W;q!==void 0?le=typeof Z.xref=="string"&&K?q._length*Z.sizex:Math.abs(q.l2p(Z.sizex)-q.l2p(0)):le=Z.sizex*ne.w,X!==void 0?W=typeof Z.yref=="string"&&ee?X._length*Z.sizey:Math.abs(X.l2p(Z.sizey)-X.l2p(0)):W=Z.sizey*ne.h;var ce=le*C.x[Z.xanchor].offset,de=W*C.y[Z.yanchor].offset,ve=C.x[Z.xanchor].sizing+C.y[Z.yanchor].sizing,pe,be;switch(q!==void 0?pe=typeof Z.xref=="string"&&K?q._length*Z.x+q._offset:q.r2p(Z.x)+q._offset:pe=Z.x*ne.w+ne.l,pe+=ce,X!==void 0?be=typeof Z.yref=="string"&&ee?X._length*(1-Z.y)+X._offset:X.r2p(Z.y)+X._offset:be=ne.h-Z.y*ne.h+ne.t,be+=de,Z.sizing){case"fill":ve+=" slice";break;case"stretch":ve="none";break}z.attr({x:pe,y:be,width:le,height:W,preserveAspectRatio:ve,opacity:Z.opacity});var Le=q&&u.getRefType(Z.xref)!=="domain"?q._id:"",Ae=X&&u.getRefType(Z.yref)!=="domain"?X._id:"",We=Le+Ae;c.setClipUrl(z,We?"clip"+w._uid+We:null,g)}function S(Z){return[Z.xref,Z.x,Z.sizex,Z.yref,Z.y,Z.sizey].join("_")}function L(Z,z){return Z._index-z._index}var F=w._imageLowerLayer.selectAll("image").data(y,S),P=w._imageUpperLayer.selectAll("image").data(o,S);F.enter().append("image"),P.enter().append("image"),F.exit().remove(),P.exit().remove(),F.each(function(Z){j.bind(this)(Z),b.bind(this)(Z)}),P.each(function(Z){j.bind(this)(Z),b.bind(this)(Z)}),F.sort(L),P.sort(L);var J=Object.keys(w._plots);for(D=0;D<J.length;D++){k=J[D];var H=w._plots[k];if(H.imagelayer){var Y=H.imagelayer.selectAll("image").data(T[k]||[],S);Y.enter().append("image"),Y.exit().remove(),Y.each(function(Z){j.bind(this)(Z),b.bind(this)(Z)}),Y.sort(L)}}}}}),ek=i({"src/components/images/convert_coords.js"(V,$){var h=fe(),c=tt();$.exports=function(p,v,m,g){v=v||{};var w=m==="log"&&v.type==="linear",o=m==="linear"&&v.type==="log";if(w||o){for(var T=p._fullLayout.images,y=v._id.charAt(0),k,D,M=0;M<T.length;M++)if(k=T[M],D="images["+M+"].",k[y+"ref"]===v._id){var A=k[y],C=k["size"+y],j=null,b=null;if(w){j=c(A,v.range);var S=C/Math.pow(10,j)/2;b=2*Math.log(S+Math.sqrt(1+S*S))/Math.LN10}else j=Math.pow(10,A),b=j*(Math.pow(10,C/2)-Math.pow(10,-C/2));h(j)?h(b)||(b=null):(j=null,b=null),g(D+y,j),g(D+"size"+y,b)}}}}}),tk=i({"src/components/images/index.js"(V,$){$.exports={moduleType:"component",name:"images",layoutAttributes:Zy(),supplyLayoutDefaults:J5(),includeBasePlot:Jf()("images"),draw:Q5(),convertCoords:ek()}}}),Pm=i({"src/components/updatemenus/constants.js"(V,$){$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}}}),Ky=i({"src/components/updatemenus/attributes.js"(V,$){var h=ir(),c=It(),u=Pt().extendFlat,p=Ma().overrideAll,v=La(),m=hr().templatedArray,g=m("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=p(m("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:g,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:u(v({editType:"arraydraw"}),{}),font:h({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:c.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")}}),rk=i({"src/components/updatemenus/defaults.js"(V,$){var h=_r(),c=Ns(),u=Ky(),p=Pm(),v=p.name,m=u.buttons;$.exports=function(T,y){var k={name:v,handleItemDefaults:g};c(T,y,k)};function g(o,T,y){function k(A,C){return h.coerce(o,T,u,A,C)}var D=c(o,T,{name:"buttons",handleItemDefaults:w}),M=k("visible",D.length>0);M&&(k("active"),k("direction"),k("type"),k("showactive"),k("x"),k("y"),h.noneOrAll(o,T,["x","y"]),k("xanchor"),k("yanchor"),k("pad.t"),k("pad.r"),k("pad.b"),k("pad.l"),h.coerceFont(k,"font",y.font),k("bgcolor",y.paper_bgcolor),k("bordercolor"),k("borderwidth"))}function w(o,T){function y(D,M){return h.coerce(o,T,m,D,M)}var k=y("visible",o.method==="skip"||Array.isArray(o.args));k&&(y("method"),y("args"),y("args2"),y("label"),y("execute"))}}}),nk=i({"src/components/updatemenus/scrollbox.js"(V,$){$.exports=v;var h=f(),c=ut(),u=oi(),p=_r();function v(m,g,w){this.gd=m,this.container=g,this.id=w,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}v.barWidth=2,v.barLength=20,v.barRadius=2,v.barPad=1,v.barColor="#808BA4",v.prototype.enable=function(g,w,o){var T=this.gd._fullLayout,y=T.width,k=T.height;this.position=g;var D=this.position.l,M=this.position.w,A=this.position.t,C=this.position.h,j=this.position.direction,b=j==="down",S=j==="left",L=j==="right",F=j==="up",P=M,J=C,H,Y,Z,z;!b&&!S&&!L&&!F&&(this.position.direction="down",b=!0);var q=b||F;q?(H=D,Y=H+P,b?(Z=A,z=Math.min(Z+J,k),J=z-Z):(z=A+J,Z=Math.max(z-J,0),J=z-Z)):(Z=A,z=Z+J,S?(Y=D+P,H=Math.max(Y-P,0),P=Y-H):(H=D,Y=Math.min(H+P,y),P=Y-H)),this._box={l:H,t:Z,w:P,h:J};var X=M>P,K=v.barLength+2*v.barPad,ee=v.barWidth+2*v.barPad,ne=D,le=A+C;le+ee>k&&(le=k-ee);var W=this.container.selectAll("rect.scrollbar-horizontal").data(X?[0]:[]);W.exit().on(".drag",null).remove(),W.enter().append("rect").classed("scrollbar-horizontal",!0).call(c.fill,v.barColor),X?(this.hbar=W.attr({rx:v.barRadius,ry:v.barRadius,x:ne,y:le,width:K,height:ee}),this._hbarXMin=ne+K/2,this._hbarTranslateMax=P-K):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var ce=C>J,de=v.barWidth+2*v.barPad,ve=v.barLength+2*v.barPad,pe=D+M,be=A;pe+de>y&&(pe=y-de);var Le=this.container.selectAll("rect.scrollbar-vertical").data(ce?[0]:[]);Le.exit().on(".drag",null).remove(),Le.enter().append("rect").classed("scrollbar-vertical",!0).call(c.fill,v.barColor),ce?(this.vbar=Le.attr({rx:v.barRadius,ry:v.barRadius,x:pe,y:be,width:de,height:ve}),this._vbarYMin=be+ve/2,this._vbarTranslateMax=J-ve):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Ae=this.id,We=H-.5,te=ce?Y+de+.5:Y+.5,ae=Z-.5,G=X?z+ee+.5:z+.5,Q=T._topdefs.selectAll("#"+Ae).data(X||ce?[0]:[]);if(Q.exit().remove(),Q.enter().append("clipPath").attr("id",Ae).append("rect"),X||ce?(this._clipRect=Q.select("rect").attr({x:Math.floor(We),y:Math.floor(ae),width:Math.ceil(te)-Math.floor(We),height:Math.ceil(G)-Math.floor(ae)}),this.container.call(u.setClipUrl,Ae,this.gd),this.bg.attr({x:D,y:A,width:M,height:C})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),X||ce){var U=h.behavior.drag().on("dragstart",function(){h.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(U);var re=h.behavior.drag().on("dragstart",function(){h.event.sourceEvent.preventDefault(),h.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));X&&this.hbar.on(".drag",null).call(re),ce&&this.vbar.on(".drag",null).call(re)}this.setTranslate(w,o)},v.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},v.prototype._onBoxDrag=function(){var g=this.translateX,w=this.translateY;this.hbar&&(g-=h.event.dx),this.vbar&&(w-=h.event.dy),this.setTranslate(g,w)},v.prototype._onBoxWheel=function(){var g=this.translateX,w=this.translateY;this.hbar&&(g+=h.event.deltaY),this.vbar&&(w+=h.event.deltaY),this.setTranslate(g,w)},v.prototype._onBarDrag=function(){var g=this.translateX,w=this.translateY;if(this.hbar){var o=g+this._hbarXMin,T=o+this._hbarTranslateMax,y=p.constrain(h.event.x,o,T),k=(y-o)/(T-o),D=this.position.w-this._box.w;g=k*D}if(this.vbar){var M=w+this._vbarYMin,A=M+this._vbarTranslateMax,C=p.constrain(h.event.y,M,A),j=(C-M)/(A-M),b=this.position.h-this._box.h;w=j*b}this.setTranslate(g,w)},v.prototype.setTranslate=function(g,w){var o=this.position.w-this._box.w,T=this.position.h-this._box.h;if(g=p.constrain(g||0,0,o),w=p.constrain(w||0,0,T),this.translateX=g,this.translateY=w,this.container.call(u.setTranslate,this._box.l-this.position.l-g,this._box.t-this.position.t-w),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+g-.5),y:Math.floor(this.position.t+w-.5)}),this.hbar){var y=g/o;this.hbar.call(u.setTranslate,g+y*this._hbarTranslateMax,w)}if(this.vbar){var k=w/T;this.vbar.call(u.setTranslate,g,w+k*this._vbarTranslateMax)}}}}),ik=i({"src/components/updatemenus/draw.js"(V,$){var h=f(),c=xi(),u=ut(),p=oi(),v=_r(),m=ia(),g=hr().arrayEditor,w=na().LINE_SPACING,o=Pm(),T=nk();$.exports=function(K){var ee=K._fullLayout,ne=v.filterVisible(ee[o.name]);function le(Ae){c.autoMargin(K,Z(Ae))}var W=ee._menulayer.selectAll("g."+o.containerClassName).data(ne.length>0?[0]:[]);if(W.enter().append("g").classed(o.containerClassName,!0).style("cursor","pointer"),W.exit().each(function(){h.select(this).selectAll("g."+o.headerGroupClassName).each(le)}).remove(),ne.length!==0){var ce=W.selectAll("g."+o.headerGroupClassName).data(ne,y);ce.enter().append("g").classed(o.headerGroupClassName,!0);for(var de=v.ensureSingle(W,"g",o.dropdownButtonGroupClassName,function(Ae){Ae.style("pointer-events","all")}),ve=0;ve<ne.length;ve++){var pe=ne[ve];Y(K,pe)}var be="updatemenus"+ee._uid,Le=new T(K,de,be);ce.enter().size()&&(de.node().parentNode.appendChild(de.node()),de.call(q)),ce.exit().each(function(Ae){de.call(q),le(Ae)}).remove(),ce.each(function(Ae){var We=h.select(this),te=Ae.type==="dropdown"?de:null;c.manageCommandObserver(K,Ae,Ae.buttons,function(ae){M(K,Ae,Ae.buttons[ae.index],We,te,Le,ae.index,!0)}),Ae.type==="dropdown"?(A(K,We,de,Le,Ae),D(de,Ae)&&C(K,We,de,Le,Ae)):C(K,We,null,null,Ae)})}};function y(X){return X._index}function k(X){return+X.attr(o.menuIndexAttrName)==-1}function D(X,K){return+X.attr(o.menuIndexAttrName)===K._index}function M(X,K,ee,ne,le,W,ce,de){K.active=ce,g(X.layout,o.name,K).applyUpdate("active",ce),K.type==="buttons"?C(X,ne,null,null,K):K.type==="dropdown"&&(le.attr(o.menuIndexAttrName,"-1"),A(X,ne,le,W,K),de||C(X,ne,le,W,K))}function A(X,K,ee,ne,le){var W=v.ensureSingle(K,"g",o.headerClassName,function(Ae){Ae.style("pointer-events","all")}),ce=le._dims,de=le.active,ve=le.buttons[de]||o.blankHeaderOpts,pe={y:le.pad.t,yPad:0,x:le.pad.l,xPad:0,index:0},be={width:ce.headerWidth,height:ce.headerHeight};W.call(S,le,ve,X).call(z,le,pe,be);var Le=v.ensureSingle(K,"text",o.headerArrowClassName,function(Ae){Ae.attr("text-anchor","end").call(p.font,le.font).text(o.arrowSymbol[le.direction])});Le.attr({x:ce.headerWidth-o.arrowOffsetX+le.pad.l,y:ce.headerHeight/2+o.textOffsetY+le.pad.t}),W.on("click",function(){ee.call(q,String(D(ee,le)?-1:le._index)),C(X,K,ee,ne,le)}),W.on("mouseover",function(){W.call(J)}),W.on("mouseout",function(){W.call(H,le)}),p.setTranslate(K,ce.lx,ce.ly)}function C(X,K,ee,ne,le){ee||(ee=K,ee.attr("pointer-events","all"));var W=!k(ee)||le.type==="buttons"?le.buttons:[],ce=le.type==="dropdown"?o.dropdownButtonClassName:o.buttonClassName,de=ee.selectAll("g."+ce).data(v.filterVisible(W)),ve=de.enter().append("g").classed(ce,!0),pe=de.exit();le.type==="dropdown"?(ve.attr("opacity","0").transition().attr("opacity","1"),pe.transition().attr("opacity","0").remove()):pe.remove();var be=0,Le=0,Ae=le._dims,We=["up","down"].indexOf(le.direction)!==-1;le.type==="dropdown"&&(We?Le=Ae.headerHeight+o.gapButtonHeader:be=Ae.headerWidth+o.gapButtonHeader),le.type==="dropdown"&&le.direction==="up"&&(Le=-o.gapButtonHeader+o.gapButton-Ae.openHeight),le.type==="dropdown"&&le.direction==="left"&&(be=-o.gapButtonHeader+o.gapButton-Ae.openWidth);var te={x:Ae.lx+be+le.pad.l,y:Ae.ly+Le+le.pad.t,yPad:o.gapButton,xPad:o.gapButton,index:0},ae={l:te.x+le.borderwidth,t:te.y+le.borderwidth};de.each(function(G,Q){var U=h.select(this);U.call(S,le,G,X).call(z,le,te),U.on("click",function(){h.event.defaultPrevented||(G.execute&&(G.args2&&le.active===Q?(M(X,le,G,K,ee,ne,-1),c.executeAPICommand(X,G.method,G.args2)):(M(X,le,G,K,ee,ne,Q),c.executeAPICommand(X,G.method,G.args))),X.emit("plotly_buttonclicked",{menu:le,button:G,active:le.active}))}),U.on("mouseover",function(){U.call(J)}),U.on("mouseout",function(){U.call(H,le),de.call(P,le)})}),de.call(P,le),We?(ae.w=Math.max(Ae.openWidth,Ae.headerWidth),ae.h=te.y-ae.t):(ae.w=te.x-ae.l,ae.h=Math.max(Ae.openHeight,Ae.headerHeight)),ae.direction=le.direction,ne&&(de.size()?j(X,K,ee,ne,le,ae):b(ne))}function j(X,K,ee,ne,le,W){var ce=le.direction,de=ce==="up"||ce==="down",ve=le._dims,pe=le.active,be,Le,Ae;if(de)for(Le=0,Ae=0;Ae<pe;Ae++)Le+=ve.heights[Ae]+o.gapButton;else for(be=0,Ae=0;Ae<pe;Ae++)be+=ve.widths[Ae]+o.gapButton;ne.enable(W,be,Le),ne.hbar&&ne.hbar.attr("opacity","0").transition().attr("opacity","1"),ne.vbar&&ne.vbar.attr("opacity","0").transition().attr("opacity","1")}function b(X){var K=!!X.hbar,ee=!!X.vbar;K&&X.hbar.transition().attr("opacity","0").each("end",function(){K=!1,ee||X.disable()}),ee&&X.vbar.transition().attr("opacity","0").each("end",function(){ee=!1,K||X.disable()})}function S(X,K,ee,ne){X.call(L,K).call(F,K,ee,ne)}function L(X,K){var ee=v.ensureSingle(X,"rect",o.itemRectClassName,function(ne){ne.attr({rx:o.rx,ry:o.ry,"shape-rendering":"crispEdges"})});ee.call(u.stroke,K.bordercolor).call(u.fill,K.bgcolor).style("stroke-width",K.borderwidth+"px")}function F(X,K,ee,ne){var le=v.ensureSingle(X,"text",o.itemTextClassName,function(de){de.attr({"text-anchor":"start","data-notex":1})}),W=ee.label,ce=ne._fullLayout._meta;ce&&(W=v.templateString(W,ce)),le.call(p.font,K.font).text(W).call(m.convertToTspans,ne)}function P(X,K){var ee=K.active;X.each(function(ne,le){var W=h.select(this);le===ee&&K.showactive&&W.select("rect."+o.itemRectClassName).call(u.fill,o.activeColor)})}function J(X){X.select("rect."+o.itemRectClassName).call(u.fill,o.hoverColor)}function H(X,K){X.select("rect."+o.itemRectClassName).call(u.fill,K.bgcolor)}function Y(X,K){var ee=K._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},ne=p.tester.selectAll("g."+o.dropdownButtonClassName).data(v.filterVisible(K.buttons));ne.enter().append("g").classed(o.dropdownButtonClassName,!0);var le=["up","down"].indexOf(K.direction)!==-1;ne.each(function(be,Le){var Ae=h.select(this);Ae.call(S,K,be,X);var We=Ae.select("."+o.itemTextClassName),te=We.node()&&p.bBox(We.node()).width,ae=Math.max(te+o.textPadX,o.minWidth),G=K.font.size*w,Q=m.lineCount(We),U=Math.max(G*Q,o.minHeight)+o.textOffsetY;U=Math.ceil(U),ae=Math.ceil(ae),ee.widths[Le]=ae,ee.heights[Le]=U,ee.height1=Math.max(ee.height1,U),ee.width1=Math.max(ee.width1,ae),le?(ee.totalWidth=Math.max(ee.totalWidth,ae),ee.openWidth=ee.totalWidth,ee.totalHeight+=U+o.gapButton,ee.openHeight+=U+o.gapButton):(ee.totalWidth+=ae+o.gapButton,ee.openWidth+=ae+o.gapButton,ee.totalHeight=Math.max(ee.totalHeight,U),ee.openHeight=ee.totalHeight)}),le?ee.totalHeight-=o.gapButton:ee.totalWidth-=o.gapButton,ee.headerWidth=ee.width1+o.arrowPadX,ee.headerHeight=ee.height1,K.type==="dropdown"&&(le?(ee.width1+=o.arrowPadX,ee.totalHeight=ee.height1):ee.totalWidth=ee.width1,ee.totalWidth+=o.arrowPadX),ne.remove();var W=ee.totalWidth+K.pad.l+K.pad.r,ce=ee.totalHeight+K.pad.t+K.pad.b,de=X._fullLayout._size;ee.lx=de.l+de.w*K.x,ee.ly=de.t+de.h*(1-K.y);var ve="left";v.isRightAnchor(K)&&(ee.lx-=W,ve="right"),v.isCenterAnchor(K)&&(ee.lx-=W/2,ve="center");var pe="top";v.isBottomAnchor(K)&&(ee.ly-=ce,pe="bottom"),v.isMiddleAnchor(K)&&(ee.ly-=ce/2,pe="middle"),ee.totalWidth=Math.ceil(ee.totalWidth),ee.totalHeight=Math.ceil(ee.totalHeight),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly),c.autoMargin(X,Z(K),{x:K.x,y:K.y,l:W*({right:1,center:.5}[ve]||0),r:W*({left:1,center:.5}[ve]||0),b:ce*({top:1,middle:.5}[pe]||0),t:ce*({bottom:1,middle:.5}[pe]||0)})}function Z(X){return o.autoMarginIdRoot+X._index}function z(X,K,ee,ne){ne=ne||{};var le=X.select("."+o.itemRectClassName),W=X.select("."+o.itemTextClassName),ce=K.borderwidth,de=ee.index,ve=K._dims;p.setTranslate(X,ce+ee.x,ce+ee.y);var pe=["up","down"].indexOf(K.direction)!==-1,be=ne.height||(pe?ve.heights[de]:ve.height1);le.attr({x:0,y:0,width:ne.width||(pe?ve.width1:ve.widths[de]),height:be});var Le=K.font.size*w,Ae=m.lineCount(W),We=(Ae-1)*Le/2;m.positionText(W,o.textOffsetX,be/2-We+o.textOffsetY),pe?ee.y+=ve.heights[de]+ee.yPad:ee.x+=ve.widths[de]+ee.xPad,ee.index++}function q(X,K){X.attr(o.menuIndexAttrName,K||"-1").selectAll("g."+o.dropdownButtonClassName).remove()}}}),ak=i({"src/components/updatemenus/index.js"(V,$){var h=Pm();$.exports={moduleType:"component",name:h.name,layoutAttributes:Ky(),supplyLayoutDefaults:rk(),draw:ik()}}}),Qf=i({"src/components/sliders/constants.js"(V,$){$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}}}),Jy=i({"src/components/sliders/attributes.js"(V,$){var h=ir(),c=La(),u=Pt().extendDeepAll,p=Ma().overrideAll,v=ka(),m=hr().templatedArray,g=Qf(),w=m("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=p(m("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:w,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:u(c({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:v.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:h({})},font:h({}),activebgcolor:{valType:"color",dflt:g.gripBgActiveColor},bgcolor:{valType:"color",dflt:g.railBgColor},bordercolor:{valType:"color",dflt:g.railBorderColor},borderwidth:{valType:"number",min:0,dflt:g.railBorderWidth},ticklen:{valType:"number",min:0,dflt:g.tickLength},tickcolor:{valType:"color",dflt:g.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:g.minorTickLength}}),"arraydraw","from-root")}}),sk=i({"src/components/sliders/defaults.js"(V,$){var h=_r(),c=Ns(),u=Jy(),p=Qf(),v=p.name,m=u.steps;$.exports=function(T,y){c(T,y,{name:v,handleItemDefaults:g})};function g(o,T,y){function k(L,F){return h.coerce(o,T,u,L,F)}for(var D=c(o,T,{name:"steps",handleItemDefaults:w}),M=0,A=0;A<D.length;A++)D[A].visible&&M++;var C;if(M<2?C=T.visible=!1:C=k("visible"),!!C){T._stepCount=M;var j=T._visibleSteps=h.filterVisible(D),b=k("active");(D[b]||{}).visible||(T.active=j[0]._index),k("x"),k("y"),h.noneOrAll(o,T,["x","y"]),k("xanchor"),k("yanchor"),k("len"),k("lenmode"),k("pad.t"),k("pad.r"),k("pad.b"),k("pad.l"),h.coerceFont(k,"font",y.font);var S=k("currentvalue.visible");S&&(k("currentvalue.xanchor"),k("currentvalue.prefix"),k("currentvalue.suffix"),k("currentvalue.offset"),h.coerceFont(k,"currentvalue.font",T.font)),k("transition.duration"),k("transition.easing"),k("bgcolor"),k("activebgcolor"),k("bordercolor"),k("borderwidth"),k("ticklen"),k("tickwidth"),k("tickcolor"),k("minorticklen")}}function w(o,T){function y(M,A){return h.coerce(o,T,m,M,A)}var k;if(o.method!=="skip"&&!Array.isArray(o.args)?k=T.visible=!1:k=y("visible"),k){y("method"),y("args");var D=y("label","step-"+T._index);y("value",D),y("execute")}}}}),ok=i({"src/components/sliders/draw.js"(V,$){var h=f(),c=xi(),u=ut(),p=oi(),v=_r(),m=v.strTranslate,g=ia(),w=hr().arrayEditor,o=Qf(),T=na(),y=T.LINE_SPACING,k=T.FROM_TL,D=T.FROM_BR;$.exports=function(W){var ce=W._context.staticPlot,de=W._fullLayout,ve=A(de,W),pe=de._infolayer.selectAll("g."+o.containerClassName).data(ve.length>0?[0]:[]);pe.enter().append("g").classed(o.containerClassName,!0).style("cursor",ce?null:"ew-resize");function be(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),c.autoMargin(W,M(te))}if(pe.exit().each(function(){h.select(this).selectAll("g."+o.groupClassName).each(be)}).remove(),ve.length!==0){var Le=pe.selectAll("g."+o.groupClassName).data(ve,C);Le.enter().append("g").classed(o.groupClassName,!0),Le.exit().each(be).remove();for(var Ae=0;Ae<ve.length;Ae++){var We=ve[Ae];j(W,We)}Le.each(function(te){var ae=h.select(this);z(te),c.manageCommandObserver(W,te,te._visibleSteps,function(G){var Q=ae.data()[0];Q.active!==G.index&&(Q._dragging||H(W,ae,Q,G.index,!1,!0))}),b(W,h.select(this),te)})}};function M(le){return o.autoMarginIdRoot+le._index}function A(le,W){for(var ce=le[o.name],de=[],ve=0;ve<ce.length;ve++){var pe=ce[ve];pe.visible&&(pe._gd=W,de.push(pe))}return de}function C(le){return le._index}function j(le,W){var ce=p.tester.selectAll("g."+o.labelGroupClass).data(W._visibleSteps);ce.enter().append("g").classed(o.labelGroupClass,!0);var de=0,ve=0;ce.each(function(U){var re=h.select(this),R=F(re,{step:U},W),B=R.node();if(B){var oe=p.bBox(B);ve=Math.max(ve,oe.height),de=Math.max(de,oe.width)}}),ce.remove();var pe=W._dims={};pe.inputAreaWidth=Math.max(o.railWidth,o.gripHeight);var be=le._fullLayout._size;pe.lx=be.l+be.w*W.x,pe.ly=be.t+be.h*(1-W.y),W.lenmode==="fraction"?pe.outerLength=Math.round(be.w*W.len):pe.outerLength=W.len,pe.inputAreaStart=0,pe.inputAreaLength=Math.round(pe.outerLength-W.pad.l-W.pad.r);var Le=pe.inputAreaLength-2*o.stepInset,Ae=Le/(W._stepCount-1),We=de+o.labelPadding;if(pe.labelStride=Math.max(1,Math.ceil(We/Ae)),pe.labelHeight=ve,pe.currentValueMaxWidth=0,pe.currentValueHeight=0,pe.currentValueTotalHeight=0,pe.currentValueMaxLines=1,W.currentvalue.visible){var te=p.tester.append("g");ce.each(function(U){var re=S(te,W,U.label),R=re.node()&&p.bBox(re.node())||{width:0,height:0},B=g.lineCount(re);pe.currentValueMaxWidth=Math.max(pe.currentValueMaxWidth,Math.ceil(R.width)),pe.currentValueHeight=Math.max(pe.currentValueHeight,Math.ceil(R.height)),pe.currentValueMaxLines=Math.max(pe.currentValueMaxLines,B)}),pe.currentValueTotalHeight=pe.currentValueHeight+W.currentvalue.offset,te.remove()}pe.height=pe.currentValueTotalHeight+o.tickOffset+W.ticklen+o.labelOffset+pe.labelHeight+W.pad.t+W.pad.b;var ae="left";v.isRightAnchor(W)&&(pe.lx-=pe.outerLength,ae="right"),v.isCenterAnchor(W)&&(pe.lx-=pe.outerLength/2,ae="center");var G="top";v.isBottomAnchor(W)&&(pe.ly-=pe.height,G="bottom"),v.isMiddleAnchor(W)&&(pe.ly-=pe.height/2,G="middle"),pe.outerLength=Math.ceil(pe.outerLength),pe.height=Math.ceil(pe.height),pe.lx=Math.round(pe.lx),pe.ly=Math.round(pe.ly);var Q={y:W.y,b:pe.height*D[G],t:pe.height*k[G]};W.lenmode==="fraction"?(Q.l=0,Q.xl=W.x-W.len*k[ae],Q.r=0,Q.xr=W.x+W.len*D[ae]):(Q.x=W.x,Q.l=pe.outerLength*k[ae],Q.r=pe.outerLength*D[ae]),c.autoMargin(le,M(W),Q)}function b(le,W,ce){(ce.steps[ce.active]||{}).visible||(ce.active=ce._visibleSteps[0]._index),W.call(S,ce).call(ne,ce).call(P,ce).call(Z,ce).call(ee,le,ce).call(L,le,ce);var de=ce._dims;p.setTranslate(W,de.lx+ce.pad.l,de.ly+ce.pad.t),W.call(q,ce,!1),W.call(S,ce)}function S(le,W,ce){if(W.currentvalue.visible){var de=W._dims,ve,pe;switch(W.currentvalue.xanchor){case"right":ve=de.inputAreaLength-o.currentValueInset-de.currentValueMaxWidth,pe="left";break;case"center":ve=de.inputAreaLength*.5,pe="middle";break;default:ve=o.currentValueInset,pe="left"}var be=v.ensureSingle(le,"text",o.labelClass,function(G){G.attr({"text-anchor":pe,"data-notex":1})}),Le=W.currentvalue.prefix?W.currentvalue.prefix:"";if(typeof ce=="string")Le+=ce;else{var Ae=W.steps[W.active].label,We=W._gd._fullLayout._meta;We&&(Ae=v.templateString(Ae,We)),Le+=Ae}W.currentvalue.suffix&&(Le+=W.currentvalue.suffix),be.call(p.font,W.currentvalue.font).text(Le).call(g.convertToTspans,W._gd);var te=g.lineCount(be),ae=(de.currentValueMaxLines+1-te)*W.currentvalue.font.size*y;return g.positionText(be,ve,ae),be}}function L(le,W,ce){var de=v.ensureSingle(le,"rect",o.gripRectClass,function(ve){ve.call(Y,W,le,ce).style("pointer-events","all")});de.attr({width:o.gripWidth,height:o.gripHeight,rx:o.gripRadius,ry:o.gripRadius}).call(u.stroke,ce.bordercolor).call(u.fill,ce.bgcolor).style("stroke-width",ce.borderwidth+"px")}function F(le,W,ce){var de=v.ensureSingle(le,"text",o.labelClass,function(be){be.attr({"text-anchor":"middle","data-notex":1})}),ve=W.step.label,pe=ce._gd._fullLayout._meta;return pe&&(ve=v.templateString(ve,pe)),de.call(p.font,ce.font).text(ve).call(g.convertToTspans,ce._gd),de}function P(le,W){var ce=v.ensureSingle(le,"g",o.labelsClass),de=W._dims,ve=ce.selectAll("g."+o.labelGroupClass).data(de.labelSteps);ve.enter().append("g").classed(o.labelGroupClass,!0),ve.exit().remove(),ve.each(function(pe){var be=h.select(this);be.call(F,pe,W),p.setTranslate(be,X(W,pe.fraction),o.tickOffset+W.ticklen+W.font.size*y+o.labelOffset+de.currentValueTotalHeight)})}function J(le,W,ce,de,ve){var pe=Math.round(de*(ce._stepCount-1)),be=ce._visibleSteps[pe]._index;be!==ce.active&&H(le,W,ce,be,!0,ve)}function H(le,W,ce,de,ve,pe){var be=ce.active;ce.active=de,w(le.layout,o.name,ce).applyUpdate("active",de);var Le=ce.steps[ce.active];W.call(q,ce,pe),W.call(S,ce),le.emit("plotly_sliderchange",{slider:ce,step:ce.steps[ce.active],interaction:ve,previousActive:be}),Le&&Le.method&&ve&&(W._nextMethod?(W._nextMethod.step=Le,W._nextMethod.doCallback=ve,W._nextMethod.doTransition=pe):(W._nextMethod={step:Le,doCallback:ve,doTransition:pe},W._nextMethodRaf=window.requestAnimationFrame(function(){var Ae=W._nextMethod.step;Ae.method&&(Ae.execute&&c.executeAPICommand(le,Ae.method,Ae.args),W._nextMethod=null,W._nextMethodRaf=null)})))}function Y(le,W,ce){if(W._context.staticPlot)return;var de=ce.node(),ve=h.select(W);function pe(){return ce.data()[0]}function be(){var Le=pe();W.emit("plotly_sliderstart",{slider:Le});var Ae=ce.select("."+o.gripRectClass);h.event.stopPropagation(),h.event.preventDefault(),Ae.call(u.fill,Le.activebgcolor);var We=K(Le,h.mouse(de)[0]);J(W,ce,Le,We,!0),Le._dragging=!0;function te(){var G=pe(),Q=K(G,h.mouse(de)[0]);J(W,ce,G,Q,!1)}ve.on("mousemove",te),ve.on("touchmove",te);function ae(){var G=pe();G._dragging=!1,Ae.call(u.fill,G.bgcolor),ve.on("mouseup",null),ve.on("mousemove",null),ve.on("touchend",null),ve.on("touchmove",null),W.emit("plotly_sliderend",{slider:G,step:G.steps[G.active]})}ve.on("mouseup",ae),ve.on("touchend",ae)}le.on("mousedown",be),le.on("touchstart",be)}function Z(le,W){var ce=le.selectAll("rect."+o.tickRectClass).data(W._visibleSteps),de=W._dims;ce.enter().append("rect").classed(o.tickRectClass,!0),ce.exit().remove(),ce.attr({width:W.tickwidth+"px","shape-rendering":"crispEdges"}),ce.each(function(ve,pe){var be=pe%de.labelStride===0,Le=h.select(this);Le.attr({height:be?W.ticklen:W.minorticklen}).call(u.fill,W.tickcolor),p.setTranslate(Le,X(W,pe/(W._stepCount-1))-.5*W.tickwidth,(be?o.tickOffset:o.minorTickOffset)+de.currentValueTotalHeight)})}function z(le){var W=le._dims;W.labelSteps=[];for(var ce=le._stepCount,de=0;de<ce;de+=W.labelStride)W.labelSteps.push({fraction:de/(ce-1),step:le._visibleSteps[de]})}function q(le,W,ce){for(var de=le.select("rect."+o.gripRectClass),ve=0,pe=0;pe<W._stepCount;pe++)if(W._visibleSteps[pe]._index===W.active){ve=pe;break}var be=X(W,ve/(W._stepCount-1));if(!W._invokingCommand){var Le=de;ce&&W.transition.duration>0&&(Le=Le.transition().duration(W.transition.duration).ease(W.transition.easing)),Le.attr("transform",m(be-o.gripWidth*.5,W._dims.currentValueTotalHeight))}}function X(le,W){var ce=le._dims;return ce.inputAreaStart+o.stepInset+(ce.inputAreaLength-2*o.stepInset)*Math.min(1,Math.max(0,W))}function K(le,W){var ce=le._dims;return Math.min(1,Math.max(0,(W-o.stepInset-ce.inputAreaStart)/(ce.inputAreaLength-2*o.stepInset-2*ce.inputAreaStart)))}function ee(le,W,ce){var de=ce._dims,ve=v.ensureSingle(le,"rect",o.railTouchRectClass,function(pe){pe.call(Y,W,le,ce).style("pointer-events","all")});ve.attr({width:de.inputAreaLength,height:Math.max(de.inputAreaWidth,o.tickOffset+ce.ticklen+de.labelHeight)}).call(u.fill,ce.bgcolor).attr("opacity",0),p.setTranslate(ve,0,de.currentValueTotalHeight)}function ne(le,W){var ce=W._dims,de=ce.inputAreaLength-o.railInset*2,ve=v.ensureSingle(le,"rect",o.railRectClass);ve.attr({width:de,height:o.railWidth,rx:o.railRadius,ry:o.railRadius,"shape-rendering":"crispEdges"}).call(u.stroke,W.bordercolor).call(u.fill,W.bgcolor).style("stroke-width",W.borderwidth+"px"),p.setTranslate(ve,o.railInset,(ce.inputAreaWidth-o.railWidth)*.5+ce.currentValueTotalHeight)}}}),lk=i({"src/components/sliders/index.js"(V,$){var h=Qf();$.exports={moduleType:"component",name:h.name,layoutAttributes:Jy(),supplyLayoutDefaults:sk(),draw:ok()}}}),Nm=i({"src/components/rangeslider/attributes.js"(V,$){var h=It();$.exports={bgcolor:{valType:"color",dflt:h.background,editType:"plot"},bordercolor:{valType:"color",dflt:h.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}}}),Qy=i({"src/components/rangeslider/oppaxis_attributes.js"(V,$){$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}}}),zm=i({"src/components/rangeslider/constants.js"(V,$){$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}}}),ck=i({"src/components/rangeslider/helpers.js"(V){var $=Ur(),h=ia(),c=zm(),u=na().LINE_SPACING,p=c.name;function v(m){var g=m&&m[p];return g&&g.visible}V.isVisible=v,V.makeData=function(m){for(var g=$.list({_fullLayout:m},"x",!0),w=m.margin,o=[],T=0;T<g.length;T++){var y=g[T];if(v(y)){o.push(y);var k=y[p];k._id=p+y._id,k._height=(m.height-w.b-w.t)*k.thickness,k._offsetShift=Math.floor(k.borderwidth/2)}}m._rangeSliderData=o},V.autoMarginOpts=function(m,g){var w=m._fullLayout,o=g[p],T=g._id.charAt(0),y=0,k=0;if(g.side==="bottom"&&(y=g._depth,g.title.text!==w._dfltTitle[T])){k=1.5*g.title.font.size+10+o._offsetShift;var D=(g.title.text.match(h.BR_TAG_ALL)||[]).length;k+=D*g.title.font.size*u}return{x:0,y:g._counterDomainMin,l:0,r:0,t:0,b:o._height+y+Math.max(w.margin.b,k),pad:c.extraPad+o._offsetShift*2}}}}),uk=i({"src/components/rangeslider/defaults.js"(V,$){var h=_r(),c=hr(),u=Ur(),p=Nm(),v=Qy();$.exports=function(g,w,o){var T=g[o],y=w[o];if(!(T.rangeslider||w._requestRangeslider[y._id]))return;h.isPlainObject(T.rangeslider)||(T.rangeslider={});var k=T.rangeslider,D=c.newContainer(y,"rangeslider");function M(z,q){return h.coerce(k,D,p,z,q)}var A,C;function j(z,q){return h.coerce(A,C,v,z,q)}var b=M("visible");if(b){M("bgcolor",w.plot_bgcolor),M("bordercolor"),M("borderwidth"),M("thickness"),M("autorange",!y.isValidRange(k.range)),M("range");var S=w._subplots;if(S)for(var L=S.cartesian.filter(function(z){return z.substr(0,z.indexOf("y"))===u.name2id(o)}).map(function(z){return z.substr(z.indexOf("y"),z.length)}),F=h.simpleMap(L,u.id2name),P=0;P<F.length;P++){var J=F[P];A=k[J]||{},C=c.newContainer(D,J,"yaxis");var H=w[J],Y;A.range&&H.isValidRange(A.range)&&(Y="fixed");var Z=j("rangemode",Y);Z!=="match"&&j("range",H.range.slice())}D._input=k}}}}),dk=i({"src/components/rangeslider/calc_autorange.js"(V,$){var h=Ur().list,c=mc().getAutoRange,u=zm();$.exports=function(v){for(var m=h(v,"x",!0),g=0;g<m.length;g++){var w=m[g],o=w[u.name];o&&o.visible&&o.autorange&&(o._input.autorange=!0,o._input.range=o.range=c(v,w))}}}}),fk=i({"src/components/rangeslider/draw.js"(V,$){var h=f(),c=xn(),u=xi(),p=_r(),v=p.strTranslate,m=oi(),g=ut(),w=pc(),o=Em(),T=Ur(),y=Ys(),k=Fo(),D=zm();$.exports=function(Y){for(var Z=Y._fullLayout,z=Z._rangeSliderData,q=0;q<z.length;q++){var X=z[q][D.name];X._clipId=X._id+"-"+Z._uid}function K(ne){return ne._name}var ee=Z._infolayer.selectAll("g."+D.containerClassName).data(z,K);ee.exit().each(function(ne){var le=ne[D.name];Z._topdefs.select("#"+le._clipId).remove()}).remove(),z.length!==0&&(ee.enter().append("g").classed(D.containerClassName,!0).attr("pointer-events","all"),ee.each(function(ne){var le=h.select(this),W=ne[D.name],ce=Z[T.id2name(ne.anchor)],de=W[T.id2name(ne.anchor)];if(W.range){var ve=p.simpleMap(W.range,ne.r2l),pe=p.simpleMap(ne.range,ne.r2l),be;pe[0]<pe[1]?be=[Math.min(ve[0],pe[0]),Math.max(ve[1],pe[1])]:be=[Math.max(ve[0],pe[0]),Math.min(ve[1],pe[1])],W.range=W._input.range=p.simpleMap(be,ne.l2r)}ne.cleanRange("rangeslider.range");var Le=Z._size,Ae=ne.domain;W._width=Le.w*(Ae[1]-Ae[0]);var We=Math.round(Le.l+Le.w*Ae[0]),te=Math.round(Le.t+Le.h*(1-ne._counterDomainMin)+(ne.side==="bottom"?ne._depth:0)+W._offsetShift+D.extraPad);le.attr("transform",v(We,te)),W._rl=p.simpleMap(W.range,ne.r2l);var ae=W._rl[0],G=W._rl[1],Q=G-ae;if(W.p2d=function(Pe){return Pe/W._width*Q+ae},W.d2p=function(Pe){return(Pe-ae)/Q*W._width},ne.rangebreaks){var U=ne.locateBreaks(ae,G);if(U.length){var re,R,B=0;for(re=0;re<U.length;re++)R=U[re],B+=R.max-R.min;var oe=W._width/(G-ae-B),ie=[-oe*ae];for(re=0;re<U.length;re++)R=U[re],ie.push(ie[ie.length-1]-oe*(R.max-R.min));for(W.d2p=function(Pe){for(var Ge=ie[0],Je=0;Je<U.length;Je++){var yt=U[Je];if(Pe>=yt.max)Ge=ie[Je+1];else if(Pe<yt.min)break}return Ge+oe*Pe},re=0;re<U.length;re++)R=U[re],R.pmin=W.d2p(R.min),R.pmax=W.d2p(R.max);W.p2d=function(Pe){for(var Ge=ie[0],Je=0;Je<U.length;Je++){var yt=U[Je];if(Pe>=yt.pmax)Ge=ie[Je+1];else if(Pe<yt.pmin)break}return(Pe-Ge)/oe}}}if(de.rangemode!=="match"){var xe=ce.r2l(de.range[0]),_e=ce.r2l(de.range[1]),ke=_e-xe;W.d2pOppAxis=function(Pe){return(Pe-xe)/ke*W._height}}le.call(b,Y,ne,W).call(S,Y,ne,W).call(L,Y,ne,W).call(P,Y,ne,W,de).call(J,Y,ne,W).call(H,Y,ne,W),A(le,Y,ne,W),j(le,Y,ne,W,ce,de),ne.side==="bottom"&&w.draw(Y,ne._id+"title",{propContainer:ne,propName:ne._name+".title",placeholder:Z._dfltTitle.x,attributes:{x:ne._offset+ne._length/2,y:te+W._height+W._offsetShift+10+1.5*ne.title.font.size,"text-anchor":"middle"}})}))};function M(Y){return typeof Y.clientX=="number"?Y.clientX:Y.touches&&Y.touches.length>0?Y.touches[0].clientX:0}function A(Y,Z,z,q){if(Z._context.staticPlot)return;var X=Y.select("rect."+D.slideBoxClassName).node(),K=Y.select("rect."+D.grabAreaMinClassName).node(),ee=Y.select("rect."+D.grabAreaMaxClassName).node();function ne(){var le=h.event,W=le.target,ce=M(le),de=ce-Y.node().getBoundingClientRect().left,ve=q.d2p(z._rl[0]),pe=q.d2p(z._rl[1]),be=y.coverSlip();this.addEventListener("touchmove",Le),this.addEventListener("touchend",Ae),be.addEventListener("mousemove",Le),be.addEventListener("mouseup",Ae);function Le(We){var te=M(We),ae=+te-ce,G,Q,U;switch(W){case X:if(U="ew-resize",ve+ae>z._length||pe+ae<0)return;G=ve+ae,Q=pe+ae;break;case K:if(U="col-resize",ve+ae>z._length)return;G=ve+ae,Q=pe;break;case ee:if(U="col-resize",pe+ae<0)return;G=ve,Q=pe+ae;break;default:U="ew-resize",G=de,Q=de+ae;break}if(Q<G){var re=Q;Q=G,G=re}q._pixelMin=G,q._pixelMax=Q,k(h.select(be),U),C(Y,Z,z,q)}function Ae(){be.removeEventListener("mousemove",Le),be.removeEventListener("mouseup",Ae),this.removeEventListener("touchmove",Le),this.removeEventListener("touchend",Ae),p.removeElement(be)}}Y.on("mousedown",ne),Y.on("touchstart",ne)}function C(Y,Z,z,q){function X(ne){return z.l2r(p.constrain(ne,q._rl[0],q._rl[1]))}var K=X(q.p2d(q._pixelMin)),ee=X(q.p2d(q._pixelMax));window.requestAnimationFrame(function(){c.call("_guiRelayout",Z,z._name+".range",[K,ee])})}function j(Y,Z,z,q,X,K){var ee=D.handleWidth/2;function ne(We){return p.constrain(We,0,q._width)}function le(We){return p.constrain(We,0,q._height)}function W(We){return p.constrain(We,-ee,q._width+ee)}var ce=ne(q.d2p(z._rl[0])),de=ne(q.d2p(z._rl[1]));if(Y.select("rect."+D.slideBoxClassName).attr("x",ce).attr("width",de-ce),Y.select("rect."+D.maskMinClassName).attr("width",ce),Y.select("rect."+D.maskMaxClassName).attr("x",de).attr("width",q._width-de),K.rangemode!=="match"){var ve=q._height-le(q.d2pOppAxis(X._rl[1])),pe=q._height-le(q.d2pOppAxis(X._rl[0]));Y.select("rect."+D.maskMinOppAxisClassName).attr("x",ce).attr("height",ve).attr("width",de-ce),Y.select("rect."+D.maskMaxOppAxisClassName).attr("x",ce).attr("y",pe).attr("height",q._height-pe).attr("width",de-ce),Y.select("rect."+D.slideBoxClassName).attr("y",ve).attr("height",pe-ve)}var be=.5,Le=Math.round(W(ce-ee))-be,Ae=Math.round(W(de-ee))+be;Y.select("g."+D.grabberMinClassName).attr("transform",v(Le,be)),Y.select("g."+D.grabberMaxClassName).attr("transform",v(Ae,be))}function b(Y,Z,z,q){var X=p.ensureSingle(Y,"rect",D.bgClassName,function(le){le.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),K=q.borderwidth%2===0?q.borderwidth:q.borderwidth-1,ee=-q._offsetShift,ne=m.crispRound(Z,q.borderwidth);X.attr({width:q._width+K,height:q._height+K,transform:v(ee,ee),"stroke-width":ne}).call(g.stroke,q.bordercolor).call(g.fill,q.bgcolor)}function S(Y,Z,z,q){var X=Z._fullLayout,K=p.ensureSingleById(X._topdefs,"clipPath",q._clipId,function(ee){ee.append("rect").attr({x:0,y:0})});K.select("rect").attr({width:q._width,height:q._height})}function L(Y,Z,z,q){var X=Z.calcdata,K=Y.selectAll("g."+D.rangePlotClassName).data(z._subplotsWith,p.identity);K.enter().append("g").attr("class",function(ne){return D.rangePlotClassName+" "+ne}).call(m.setClipUrl,q._clipId,Z),K.order(),K.exit().remove();var ee;K.each(function(ne,le){var W=h.select(this),ce=le===0,de=T.getFromId(Z,ne,"y"),ve=de._name,pe=q[ve],be={data:[],layout:{xaxis:{type:z.type,domain:[0,1],range:q.range.slice(),calendar:z.calendar},width:q._width,height:q._height,margin:{t:0,b:0,l:0,r:0}},_context:Z._context};z.rangebreaks&&(be.layout.xaxis.rangebreaks=z.rangebreaks),be.layout[ve]={type:de.type,domain:[0,1],range:pe.rangemode!=="match"?pe.range.slice():de.range.slice(),calendar:de.calendar},de.rangebreaks&&(be.layout[ve].rangebreaks=de.rangebreaks),u.supplyDefaults(be);var Le=be._fullLayout.xaxis,Ae=be._fullLayout[ve];Le.clearCalc(),Le.setScale(),Ae.clearCalc(),Ae.setScale();var We={id:ne,plotgroup:W,xaxis:Le,yaxis:Ae,isRangePlot:!0};ce?ee=We:(We.mainplot="xy",We.mainplotinfo=ee),o.rangePlot(Z,We,F(X,ne))})}function F(Y,Z){for(var z=[],q=0;q<Y.length;q++){var X=Y[q],K=X[0].trace;K.xaxis+K.yaxis===Z&&z.push(X)}return z}function P(Y,Z,z,q,X){var K=p.ensureSingle(Y,"rect",D.maskMinClassName,function(W){W.attr({x:0,y:0,"shape-rendering":"crispEdges"})});K.attr("height",q._height).call(g.fill,D.maskColor);var ee=p.ensureSingle(Y,"rect",D.maskMaxClassName,function(W){W.attr({y:0,"shape-rendering":"crispEdges"})});if(ee.attr("height",q._height).call(g.fill,D.maskColor),X.rangemode!=="match"){var ne=p.ensureSingle(Y,"rect",D.maskMinOppAxisClassName,function(W){W.attr({y:0,"shape-rendering":"crispEdges"})});ne.attr("width",q._width).call(g.fill,D.maskOppAxisColor);var le=p.ensureSingle(Y,"rect",D.maskMaxOppAxisClassName,function(W){W.attr({y:0,"shape-rendering":"crispEdges"})});le.attr("width",q._width).style("border-top",D.maskOppBorder).call(g.fill,D.maskOppAxisColor)}}function J(Y,Z,z,q){if(!Z._context.staticPlot){var X=p.ensureSingle(Y,"rect",D.slideBoxClassName,function(K){K.attr({y:0,cursor:D.slideBoxCursor,"shape-rendering":"crispEdges"})});X.attr({height:q._height,fill:D.slideBoxFill})}}function H(Y,Z,z,q){var X=p.ensureSingle(Y,"g",D.grabberMinClassName),K=p.ensureSingle(Y,"g",D.grabberMaxClassName),ee={x:0,width:D.handleWidth,rx:D.handleRadius,fill:g.background,stroke:g.defaultLine,"stroke-width":D.handleStrokeWidth,"shape-rendering":"crispEdges"},ne={y:Math.round(q._height/4),height:Math.round(q._height/2)},le=p.ensureSingle(X,"rect",D.handleMinClassName,function(pe){pe.attr(ee)});le.attr(ne);var W=p.ensureSingle(K,"rect",D.handleMaxClassName,function(pe){pe.attr(ee)});W.attr(ne);var ce={width:D.grabAreaWidth,x:0,y:0,fill:D.grabAreaFill,cursor:Z._context.staticPlot?void 0:D.grabAreaCursor},de=p.ensureSingle(X,"rect",D.grabAreaMinClassName,function(pe){pe.attr(ce)});de.attr("height",q._height);var ve=p.ensureSingle(K,"rect",D.grabAreaMaxClassName,function(pe){pe.attr(ce)});ve.attr("height",q._height)}}}),hk=i({"src/components/rangeslider/index.js"(V,$){var h=_r(),c=Nm(),u=Qy(),p=ck();$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:h.extendFlat({},c,{yaxis:u})}}},layoutAttributes:Nm(),handleDefaults:uk(),calcAutorange:dk(),draw:fk(),isVisible:p.isVisible,makeData:p.makeData,autoMarginOpts:p.autoMarginOpts}}}),Fm=i({"src/components/rangeselector/attributes.js"(V,$){var h=ir(),c=It(),u=hr().templatedArray,p=u("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:p,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:h({editType:"plot"}),bgcolor:{valType:"color",dflt:c.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}}}),e1=i({"src/components/rangeselector/constants.js"(V,$){$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}}}),pk=i({"src/components/rangeselector/defaults.js"(V,$){var h=_r(),c=ut(),u=hr(),p=Ns(),v=Fm(),m=e1();$.exports=function(T,y,k,D,M){var A=T.rangeselector||{},C=u.newContainer(y,"rangeselector");function j(P,J){return h.coerce(A,C,v,P,J)}var b=p(A,C,{name:"buttons",handleItemDefaults:g,calendar:M}),S=j("visible",b.length>0);if(S){var L=w(y,k,D);j("x",L[0]),j("y",L[1]),h.noneOrAll(T,y,["x","y"]),j("xanchor"),j("yanchor"),h.coerceFont(j,"font",k.font);var F=j("bgcolor");j("activecolor",c.contrast(F,m.lightAmount,m.darkAmount)),j("bordercolor"),j("borderwidth")}};function g(o,T,y,k){var D=k.calendar;function M(j,b){return h.coerce(o,T,v.buttons,j,b)}var A=M("visible");if(A){var C=M("step");C!=="all"&&(D&&D!=="gregorian"&&(C==="month"||C==="year")?T.stepmode="backward":M("stepmode"),M("count")),M("label")}}function w(o,T,y){for(var k=y.filter(function(C){return T[C].anchor===o._id}),D=0,M=0;M<k.length;M++){var A=T[k[M]].domain;A&&(D=Math.max(A[1],D))}return[o.domain[0],D+m.yPad]}}}),mk=i({"src/components/rangeselector/get_update_object.js"(V,$){var h=_(),c=_r().titleCase;$.exports=function(v,m){var g=v._name,w={};if(m.step==="all")w[g+".autorange"]=!0;else{var o=u(v,m);w[g+".range[0]"]=o[0],w[g+".range[1]"]=o[1]}return w};function u(p,v){var m=p.range,g=new Date(p.r2l(m[1])),w=v.step,o=h["utc"+c(w)],T=v.count,y;switch(v.stepmode){case"backward":y=p.l2r(+o.offset(g,-T));break;case"todate":var k=o.offset(g,-T);y=p.l2r(+o.ceil(k));break}var D=m[1];return[y,D]}}}),vk=i({"src/components/rangeselector/draw.js"(V,$){var h=f(),c=xn(),u=xi(),p=ut(),v=oi(),m=_r(),g=m.strTranslate,w=ia(),o=Ur(),T=na(),y=T.LINE_SPACING,k=T.FROM_TL,D=T.FROM_BR,M=e1(),A=mk();$.exports=function(Y){var Z=Y._fullLayout,z=Z._infolayer.selectAll(".rangeselector").data(C(Y),j);z.enter().append("g").classed("rangeselector",!0),z.exit().remove(),z.style({cursor:"pointer","pointer-events":"all"}),z.each(function(q){var X=h.select(this),K=q,ee=K.rangeselector,ne=X.selectAll("g.button").data(m.filterVisible(ee.buttons));ne.enter().append("g").classed("button",!0),ne.exit().remove(),ne.each(function(le){var W=h.select(this),ce=A(K,le);le._isActive=b(K,le,ce),W.call(S,ee,le),W.call(F,ee,le,Y),W.on("click",function(){Y._dragged||c.call("_guiRelayout",Y,ce)}),W.on("mouseover",function(){le._isHovered=!0,W.call(S,ee,le)}),W.on("mouseout",function(){le._isHovered=!1,W.call(S,ee,le)})}),J(Y,ne,ee,K._name,X)})};function C(H){for(var Y=o.list(H,"x",!0),Z=[],z=0;z<Y.length;z++){var q=Y[z];q.rangeselector&&q.rangeselector.visible&&Z.push(q)}return Z}function j(H){return H._id}function b(H,Y,Z){if(Y.step==="all")return H.autorange===!0;var z=Object.keys(Z);return H.range[0]===Z[z[0]]&&H.range[1]===Z[z[1]]}function S(H,Y,Z){var z=m.ensureSingle(H,"rect","selector-rect",function(q){q.attr("shape-rendering","crispEdges")});z.attr({rx:M.rx,ry:M.ry}),z.call(p.stroke,Y.bordercolor).call(p.fill,L(Y,Z)).style("stroke-width",Y.borderwidth+"px")}function L(H,Y){return Y._isActive||Y._isHovered?H.activecolor:H.bgcolor}function F(H,Y,Z,z){function q(K){w.convertToTspans(K,z)}var X=m.ensureSingle(H,"text","selector-text",function(K){K.attr("text-anchor","middle")});X.call(v.font,Y.font).text(P(Z,z._fullLayout._meta)).call(q)}function P(H,Y){return H.label?Y?m.templateString(H.label,Y):H.label:H.step==="all"?"all":H.count+H.step.charAt(0)}function J(H,Y,Z,z,q){var X=0,K=0,ee=Z.borderwidth;Y.each(function(){var ve=h.select(this),pe=ve.select(".selector-text"),be=Z.font.size*y,Le=Math.max(be*w.lineCount(pe),16)+3;K=Math.max(K,Le)}),Y.each(function(){var ve=h.select(this),pe=ve.select(".selector-rect"),be=ve.select(".selector-text"),Le=be.node()&&v.bBox(be.node()).width,Ae=Z.font.size*y,We=w.lineCount(be),te=Math.max(Le+10,M.minButtonWidth);ve.attr("transform",g(ee+X,ee)),pe.attr({x:0,y:0,width:te,height:K}),w.positionText(be,te/2,K/2-(We-1)*Ae/2+3),X+=te+5});var ne=H._fullLayout._size,le=ne.l+ne.w*Z.x,W=ne.t+ne.h*(1-Z.y),ce="left";m.isRightAnchor(Z)&&(le-=X,ce="right"),m.isCenterAnchor(Z)&&(le-=X/2,ce="center");var de="top";m.isBottomAnchor(Z)&&(W-=K,de="bottom"),m.isMiddleAnchor(Z)&&(W-=K/2,de="middle"),X=Math.ceil(X),K=Math.ceil(K),le=Math.round(le),W=Math.round(W),u.autoMargin(H,z+"-range-selector",{x:Z.x,y:Z.y,l:X*k[ce],r:X*D[ce],b:K*D[de],t:K*k[de]}),q.attr("transform",g(le,W))}}}),gk=i({"src/components/rangeselector/index.js"(V,$){$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:Fm()}}},layoutAttributes:Fm(),handleDefaults:pk(),draw:vk()}}}),Im=i({"src/plots/domain.js"(V){var $=Pt().extendFlat;V.attributes=function(h,c){h=h||{},c=c||{};var u={valType:"info_array",editType:h.editType,items:[{valType:"number",min:0,max:1,editType:h.editType},{valType:"number",min:0,max:1,editType:h.editType}],dflt:[0,1]};h.name&&h.name+"",h.trace,c.description&&""+c.description;var p={x:$({},u,{}),y:$({},u,{}),editType:h.editType};return h.noGridCell||(p.row={valType:"integer",min:0,dflt:0,editType:h.editType},p.column={valType:"integer",min:0,dflt:0,editType:h.editType}),p},V.defaults=function(h,c,u,p){var v=p&&p.x||[0,1],m=p&&p.y||[0,1],g=c.grid;if(g){var w=u("domain.column");w!==void 0&&(w<g.columns?v=g._domains.x[w]:delete h.domain.column);var o=u("domain.row");o!==void 0&&(o<g.rows?m=g._domains.y[o]:delete h.domain.row)}var T=u("domain.x",v),y=u("domain.y",m);T[0]<T[1]||(h.domain.x=v.slice()),y[0]<y[1]||(h.domain.y=m.slice())}}}),yk=i({"src/components/grid/index.js"(V,$){var h=_r(),c=Vt().counter,u=Im().attributes,p=Yr().idRegex,v=hr(),m={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[c("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[p.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[p.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:u({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function g(k,D,M){var A=D[M+"axes"],C=Object.keys((k._splomAxes||{})[M]||{});if(Array.isArray(A))return A;if(C.length)return C}function w(k,D){var M=k.grid||{},A=g(D,M,"x"),C=g(D,M,"y");if(!k.grid&&!A&&!C)return;var j=Array.isArray(M.subplots)&&Array.isArray(M.subplots[0]),b=Array.isArray(A),S=Array.isArray(C),L=b&&A!==M.xaxes&&S&&C!==M.yaxes,F,P;j?(F=M.subplots.length,P=M.subplots[0].length):(S&&(F=C.length),b&&(P=A.length));var J=v.newContainer(D,"grid");function H(W,ce){return h.coerce(M,J,m,W,ce)}var Y=H("rows",F),Z=H("columns",P);if(!(Y*Z>1)){delete D.grid;return}if(!j&&!b&&!S){var z=H("pattern")==="independent";z&&(j=!0)}J._hasSubplotGrid=j;var q=H("roworder"),X=q==="top to bottom",K=j?.2:.1,ee=j?.3:.1,ne,le;L&&D._splomGridDflt&&(ne=D._splomGridDflt.xside,le=D._splomGridDflt.yside),J._domains={x:o("x",H,K,ne,Z),y:o("y",H,ee,le,Y,X)}}function o(k,D,M,A,C,j){var b=D(k+"gap",M),S=D("domain."+k);D(k+"side",A);for(var L=new Array(C),F=S[0],P=(S[1]-F)/(C-b),J=P*(1-b),H=0;H<C;H++){var Y=F+P*H;L[j?C-1-H:H]=[Y,Y+J]}return L}function T(k,D){var M=D.grid;if(!(!M||!M._domains)){var A=k.grid||{},C=D._subplots,j=M._hasSubplotGrid,b=M.rows,S=M.columns,L=M.pattern==="independent",F,P,J,H,Y,Z,z,q=M._axisMap={};if(j){var X=A.subplots||[];Z=M.subplots=new Array(b);var K=1;for(F=0;F<b;F++){var ee=Z[F]=new Array(S),ne=X[F]||[];for(P=0;P<S;P++)if(L?(Y=K===1?"xy":"x"+K+"y"+K,K++):Y=ne[P],ee[P]="",C.cartesian.indexOf(Y)!==-1){if(z=Y.indexOf("y"),J=Y.slice(0,z),H=Y.slice(z),q[J]!==void 0&&q[J]!==P||q[H]!==void 0&&q[H]!==F)continue;ee[P]=Y,q[J]=P,q[H]=F}}}else{var le=g(D,A,"x"),W=g(D,A,"y");M.xaxes=y(le,C.xaxis,S,q,"x"),M.yaxes=y(W,C.yaxis,b,q,"y")}var ce=M._anchors={},de=M.roworder==="top to bottom";for(var ve in q){var pe=ve.charAt(0),be=M[pe+"side"],Le,Ae,We;if(be.length<8)ce[ve]="free";else if(pe==="x"){if(be.charAt(0)==="t"===de?(Le=0,Ae=1,We=b):(Le=b-1,Ae=-1,We=-1),j){var te=q[ve];for(F=Le;F!==We;F+=Ae)if(Y=Z[F][te],!!Y&&(z=Y.indexOf("y"),Y.slice(0,z)===ve)){ce[ve]=Y.slice(z);break}}else for(F=Le;F!==We;F+=Ae)if(H=M.yaxes[F],C.cartesian.indexOf(ve+H)!==-1){ce[ve]=H;break}}else if(be.charAt(0)==="l"?(Le=0,Ae=1,We=S):(Le=S-1,Ae=-1,We=-1),j){var ae=q[ve];for(F=Le;F!==We;F+=Ae)if(Y=Z[ae][F],!!Y&&(z=Y.indexOf("y"),Y.slice(z)===ve)){ce[ve]=Y.slice(0,z);break}}else for(F=Le;F!==We;F+=Ae)if(J=M.xaxes[F],C.cartesian.indexOf(J+ve)!==-1){ce[ve]=J;break}}}}function y(k,D,M,A,C){var j=new Array(M),b;function S(L,F){D.indexOf(F)!==-1&&A[F]===void 0?(j[L]=F,A[F]=L):j[L]=""}if(Array.isArray(k))for(b=0;b<M;b++)S(b,k[b]);else for(S(0,C),b=1;b<M;b++)S(b,C+(b+1));return j}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:m}},layoutAttributes:m,sizeDefaults:w,contentDefaults:T}}}),t1=i({"src/components/errorbars/attributes.js"(V,$){$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}}}),xk=i({"src/components/errorbars/defaults.js"(V,$){var h=fe(),c=xn(),u=_r(),p=hr(),v=t1();$.exports=function(m,g,w,o){var T="error_"+o.axis,y=p.newContainer(g,T),k=m[T]||{};function D(L,F){return u.coerce(k,y,v,L,F)}var M=k.array!==void 0||k.value!==void 0||k.type==="sqrt",A=D("visible",M);if(A!==!1){var C=D("type","array"in k?"data":"percent"),j=!0;C!=="sqrt"&&(j=D("symmetric",!((C==="data"?"arrayminus":"valueminus")in k))),C==="data"?(D("array"),D("traceref"),j||(D("arrayminus"),D("tracerefminus"))):(C==="percent"||C==="constant")&&(D("value"),j||D("valueminus"));var b="copy_"+o.inherit+"style";if(o.inherit){var S=g["error_"+o.inherit];(S||{}).visible&&D(b,!(k.color||h(k.thickness)||h(k.width)))}(!o.inherit||!y[b])&&(D("color",w),D("thickness"),D("width",c.traceIs(g,"gl3d")?0:4))}}}}),r1=i({"src/components/errorbars/compute_error.js"(V,$){$.exports=function(u){var p=u.type,v=u.symmetric;if(p==="data"){var m=u.array||[];if(v)return function(y,k){var D=+m[k];return[D,D]};var g=u.arrayminus||[];return function(y,k){var D=+m[k],M=+g[k];return!isNaN(D)||!isNaN(M)?[M||0,D||0]:[NaN,NaN]}}else{var w=h(p,u.value),o=h(p,u.valueminus);return v||u.valueminus===void 0?function(y){var k=w(y);return[k,k]}:function(y){return[o(y),w(y)]}}};function h(c,u){if(c==="percent")return function(p){return Math.abs(p*u/100)};if(c==="constant")return function(){return Math.abs(u)};if(c==="sqrt")return function(p){return Math.sqrt(Math.abs(p))}}}}),bk=i({"src/components/errorbars/calc.js"(V,$){var h=fe(),c=xn(),u=ji(),p=_r(),v=r1();$.exports=function(w){for(var o=w.calcdata,T=0;T<o.length;T++){var y=o[T],k=y[0].trace;if(k.visible===!0&&c.traceIs(k,"errorBarsOK")){var D=u.getFromId(w,k.xaxis),M=u.getFromId(w,k.yaxis);m(y,k,D,"x"),m(y,k,M,"y")}}};function m(g,w,o,T){var y=w["error_"+T]||{},k=y.visible&&["linear","log"].indexOf(o.type)!==-1,D=[];if(k){for(var M=v(y),A=0;A<g.length;A++){var C=g[A],j=C.i;if(j===void 0)j=A;else if(j===null)continue;var b=C[T];if(h(o.c2l(b))){var S=M(b,j);if(h(S[0])&&h(S[1])){var L=C[T+"s"]=b-S[0],F=C[T+"h"]=b+S[1];D.push(L,F)}}}var P=o._id,J=w._extremes[P],H=u.findExtremes(o,D,p.extendFlat({tozero:J.opts.tozero},{padded:!0}));J.min=J.min.concat(H.min),J.max=J.max.concat(H.max)}}}}),wk=i({"src/components/errorbars/plot.js"(V,$){var h=f(),c=fe(),u=oi(),p=za();$.exports=function(g,w,o,T){var y,k=o.xaxis,D=o.yaxis,M=T&&T.duration>0,A=g._context.staticPlot;w.each(function(C){var j=C[0].trace,b=j.error_x||{},S=j.error_y||{},L;j.ids&&(L=function(H){return H.id});var F=p.hasMarkers(j)&&j.marker.maxdisplayed>0;!S.visible&&!b.visible&&(C=[]);var P=h.select(this).selectAll("g.errorbar").data(C,L);if(P.exit().remove(),!!C.length){b.visible||P.selectAll("path.xerror").remove(),S.visible||P.selectAll("path.yerror").remove(),P.style("opacity",1);var J=P.enter().append("g").classed("errorbar",!0);M&&J.style("opacity",0).transition().duration(T.duration).style("opacity",1),u.setClipUrl(P,o.layerClipId,g),P.each(function(H){var Y=h.select(this),Z=v(H,k,D);if(!(F&&!H.vis)){var z,q=Y.select("path.yerror");if(S.visible&&c(Z.x)&&c(Z.yh)&&c(Z.ys)){var X=S.width;z="M"+(Z.x-X)+","+Z.yh+"h"+2*X+"m-"+X+",0V"+Z.ys,Z.noYS||(z+="m-"+X+",0h"+2*X),y=!q.size(),y?q=Y.append("path").style("vector-effect",A?"none":"non-scaling-stroke").classed("yerror",!0):M&&(q=q.transition().duration(T.duration).ease(T.easing)),q.attr("d",z)}else q.remove();var K=Y.select("path.xerror");if(b.visible&&c(Z.y)&&c(Z.xh)&&c(Z.xs)){var ee=(b.copy_ystyle?S:b).width;z="M"+Z.xh+","+(Z.y-ee)+"v"+2*ee+"m0,-"+ee+"H"+Z.xs,Z.noXS||(z+="m0,-"+ee+"v"+2*ee),y=!K.size(),y?K=Y.append("path").style("vector-effect",A?"none":"non-scaling-stroke").classed("xerror",!0):M&&(K=K.transition().duration(T.duration).ease(T.easing)),K.attr("d",z)}else K.remove()}})}})};function v(m,g,w){var o={x:g.c2p(m.x),y:w.c2p(m.y)};return m.yh!==void 0&&(o.yh=w.c2p(m.yh),o.ys=w.c2p(m.ys),c(o.ys)||(o.noYS=!0,o.ys=w.c2p(m.ys,!0))),m.xh!==void 0&&(o.xh=g.c2p(m.xh),o.xs=g.c2p(m.xs),c(o.xs)||(o.noXS=!0,o.xs=g.c2p(m.xs,!0))),o}}}),_k=i({"src/components/errorbars/style.js"(V,$){var h=f(),c=ut();$.exports=function(p){p.each(function(v){var m=v[0].trace,g=m.error_y||{},w=m.error_x||{},o=h.select(this);o.selectAll("path.yerror").style("stroke-width",g.thickness+"px").call(c.stroke,g.color),w.copy_ystyle&&(w=g),o.selectAll("path.xerror").style("stroke-width",w.thickness+"px").call(c.stroke,w.color)})}}}),Sk=i({"src/components/errorbars/index.js"(V,$){var h=_r(),c=Ma().overrideAll,u=t1(),p={error_x:h.extendFlat({},u),error_y:h.extendFlat({},u)};delete p.error_x.copy_zstyle,delete p.error_y.copy_zstyle,delete p.error_y.copy_ystyle;var v={error_x:h.extendFlat({},u),error_y:h.extendFlat({},u),error_z:h.extendFlat({},u)};delete v.error_x.copy_ystyle,delete v.error_y.copy_ystyle,delete v.error_z.copy_ystyle,delete v.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:p,bar:p,histogram:p,scatter3d:c(v,"calc","nested"),scattergl:c(p,"calc","nested")}},supplyDefaults:xk(),calc:bk(),makeComputeError:r1(),plot:wk(),style:_k(),hoverInfo:m};function m(g,w,o){(w.error_y||{}).visible&&(o.yerr=g.yh-g.y,w.error_y.symmetric||(o.yerrneg=g.y-g.ys)),(w.error_x||{}).visible&&(o.xerr=g.xh-g.x,w.error_x.symmetric||(o.xerrneg=g.x-g.xs))}}}),kk=i({"src/components/colorbar/constants.js"(V,$){$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}}}),Mk=i({"src/components/colorbar/draw.js"(V,$){var h=f(),c=xt(),u=xi(),p=xn(),v=ji(),m=Ys(),g=_r(),w=g.strTranslate,o=Pt().extendFlat,T=Fo(),y=oi(),k=ut(),D=pc(),M=ia(),A=Ha().flipScale,C=$y(),j=Yy(),b=Ps(),S=na(),L=S.LINE_SPACING,F=S.FROM_TL,P=S.FROM_BR,J=kk().cn;function H(K){var ee=K._fullLayout,ne=ee._infolayer.selectAll("g."+J.colorbar).data(Y(K),function(le){return le._id});ne.enter().append("g").attr("class",function(le){return le._id}).classed(J.colorbar,!0),ne.each(function(le){var W=h.select(this);g.ensureSingle(W,"rect",J.cbbg),g.ensureSingle(W,"g",J.cbfills),g.ensureSingle(W,"g",J.cblines),g.ensureSingle(W,"g",J.cbaxis,function(de){de.classed(J.crisp,!0)}),g.ensureSingle(W,"g",J.cbtitleunshift,function(de){de.append("g").classed(J.cbtitle,!0)}),g.ensureSingle(W,"rect",J.cboutline);var ce=Z(W,le,K);ce&&ce.then&&(K._promises||[]).push(ce),K._context.edits.colorbarPosition&&z(W,le,K)}),ne.exit().each(function(le){u.autoMargin(K,le._id)}).remove(),ne.order()}function Y(K){var ee=K._fullLayout,ne=K.calcdata,le=[],W,ce,de,ve;function pe(R){return o(R,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function be(){typeof ve.calc=="function"?ve.calc(K,de,W):(W._fillgradient=ce.reversescale?A(ce.colorscale):ce.colorscale,W._zrange=[ce[ve.min],ce[ve.max]])}for(var Le=0;Le<ne.length;Le++){var Ae=ne[Le];if(de=Ae[0].trace,!!de._module){var We=de._module.colorbar;if(de.visible===!0&&We)for(var te=Array.isArray(We),ae=te?We:[We],G=0;G<ae.length;G++){ve=ae[G];var Q=ve.container;ce=Q?de[Q]:de,ce&&ce.showscale&&(W=pe(ce.colorbar),W._id="cb"+de.uid+(te&&Q?"-"+Q:""),W._traceIndex=de.index,W._propPrefix=(Q?Q+".":"")+"colorbar.",W._meta=de._meta,be(),le.push(W))}}}for(var U in ee._colorAxes)if(ce=ee[U],ce.showscale){var re=ee._colorAxes[U];W=pe(ce.colorbar),W._id="cb"+U,W._propPrefix=U+".colorbar.",W._meta=ee._meta,ve={min:"cmin",max:"cmax"},re[0]!=="heatmap"&&(de=re[1],ve.calc=de._module.colorbar.calc),be(),le.push(W)}return le}function Z(K,ee,ne){var le=ee.orientation==="v",W=ee.len,ce=ee.lenmode,de=ee.thickness,ve=ee.thicknessmode,pe=ee.outlinewidth,be=ee.borderwidth,Le=ee.bgcolor,Ae=ee.xanchor,We=ee.yanchor,te=ee.xpad,ae=ee.ypad,G=ee.x,Q=le?ee.y:1-ee.y,U=ee.yref==="paper",re=ee.xref==="paper",R=ne._fullLayout,B=R._size,oe=ee._fillcolor,ie=ee._line,xe=ee.title,_e=xe.side,ke=ee._zrange||h.extent((typeof oe=="function"?oe:ie.color).domain()),Pe=typeof ie.color=="function"?ie.color:function(){return ie.color},Ge=typeof oe=="function"?oe:function(){return oe},Je=ee._levels,yt=q(ne,ee,ke),lt=yt.fill,mt=yt.line,Ce=Math.round(de*(ve==="fraction"?le?B.w:B.h:1)),Ie=Ce/(le?B.w:B.h),Se=Math.round(W*(ce==="fraction"?le?B.h:B.w:1)),Be=Se/(le?B.h:B.w),rt=re?B.w:ne._fullLayout.width,ht=U?B.h:ne._fullLayout.height,Lt=Math.round(le?G*rt+te:Q*ht+ae),Ct={center:.5,right:1}[Ae]||0,zt={top:1,middle:.5}[We]||0,Bt=le?G-Ct*Ie:Q-zt*Ie,Ft=le?Q-zt*Be:G-Ct*Be,nr=Math.round(le?ht*(1-Ft):rt*Ft);ee._lenFrac=Be,ee._thickFrac=Ie,ee._uFrac=Bt,ee._vFrac=Ft;var _t=ee._axis=X(ne,ee,ke);_t.position=Ie+(le?G+te/B.w:Q+ae/B.h);var rr=["top","bottom"].indexOf(_e)!==-1;if(le&&rr&&(_t.title.side=_e,_t.titlex=G+te/B.w,_t.titley=Ft+(xe.side==="top"?Be-ae/B.h:ae/B.h)),!le&&!rr&&(_t.title.side=_e,_t.titley=Q+ae/B.h,_t.titlex=Ft+te/B.w),ie.color&&ee.tickmode==="auto"){_t.tickmode="linear",_t.tick0=Je.start;var pr=Je.size,Yt=g.constrain(Se/50,4,15)+1,sr=(ke[1]-ke[0])/((ee.nticks||Yt)*pr);if(sr>1){var ze=Math.pow(10,Math.floor(Math.log(sr)/Math.LN10));pr*=ze*g.roundUp(sr/ze,[2,5,10]),(Math.abs(Je.start)/Je.size+1e-6)%1<2e-6&&(_t.tick0=0)}_t.dtick=pr}_t.domain=le?[Ft+ae/B.h,Ft+Be-ae/B.h]:[Ft+te/B.w,Ft+Be-te/B.w],_t.setScale(),K.attr("transform",w(Math.round(B.l),Math.round(B.t)));var Ye=K.select("."+J.cbtitleunshift).attr("transform",w(-Math.round(B.l),-Math.round(B.t))),$e=_t.ticklabelposition,he=_t.title.font.size,je=K.select("."+J.cbaxis),Ne,Re=0,nt=0;function at(jt,Ut){var Gt={propContainer:_t,propName:ee._propPrefix+"title",traceIndex:ee._traceIndex,_meta:ee._meta,placeholder:R._dfltTitle.colorbar,containerGroup:K.select("."+J.cbtitle)},Tr=jt.charAt(0)==="h"?jt.substr(1):"h"+jt;K.selectAll("."+Tr+",."+Tr+"-math-group").remove(),D.draw(ne,jt,o(Gt,Ut||{}))}function dt(){if(le&&rr||!le&&!rr){var jt,Ut;_e==="top"&&(jt=te+B.l+rt*G,Ut=ae+B.t+ht*(1-Ft-Be)+3+he*.75),_e==="bottom"&&(jt=te+B.l+rt*G,Ut=ae+B.t+ht*(1-Ft)-3-he*.25),_e==="right"&&(Ut=ae+B.t+ht*Q+3+he*.75,jt=te+B.l+rt*Ft),at(_t._id+"title",{attributes:{x:jt,y:Ut,"text-anchor":le?"start":"middle"}})}}function Mt(){if(le&&!rr||!le&&rr){var jt=_t.position||0,Ut=_t._offset+_t._length/2,Gt,Tr;if(_e==="right")Tr=Ut,Gt=B.l+rt*jt+10+he*(_t.showticklabels?1:.5);else if(Gt=Ut,_e==="bottom"&&(Tr=B.t+ht*jt+10+($e.indexOf("inside")===-1?_t.tickfont.size:0)+(_t.ticks!=="intside"&&ee.ticklen||0)),_e==="top"){var Dr=xe.text.split("<br>").length;Tr=B.t+ht*jt+10-Ce-L*he*Dr}at((le?"h":"v")+_t._id+"title",{avoid:{selection:h.select(ne).selectAll("g."+_t._id+"tick"),side:_e,offsetTop:le?0:B.t,offsetLeft:le?B.l:0,maxShift:le?R.width:R.height},attributes:{x:Gt,y:Tr,"text-anchor":"middle"},transform:{rotate:le?-90:0,offset:0}})}}function Nt(){if(!le&&!rr||le&&rr){var jt=K.select("."+J.cbtitle),Ut=jt.select("text"),Gt=[-pe/2,pe/2],Tr=jt.select(".h"+_t._id+"title-math-group").node(),Dr=15.6;Ut.node()&&(Dr=parseInt(Ut.node().style.fontSize,10)*L);var Vr;if(Tr?(Vr=y.bBox(Tr),nt=Vr.width,Re=Vr.height,Re>Dr&&(Gt[1]-=(Re-Dr)/2)):Ut.node()&&!Ut.classed(J.jsPlaceholder)&&(Vr=y.bBox(Ut.node()),nt=Vr.width,Re=Vr.height),le){if(Re){if(Re+=5,_e==="top")_t.domain[1]-=Re/B.h,Gt[1]*=-1;else{_t.domain[0]+=Re/B.h;var Mr=M.lineCount(Ut);Gt[1]+=(1-Mr)*Dr}jt.attr("transform",w(Gt[0],Gt[1])),_t.setScale()}}else nt&&(_e==="right"&&(_t.domain[0]+=(nt+he/2)/B.w),jt.attr("transform",w(Gt[0],Gt[1])),_t.setScale())}K.selectAll("."+J.cbfills+",."+J.cblines).attr("transform",le?w(0,Math.round(B.h*(1-_t.domain[1]))):w(Math.round(B.w*_t.domain[0]),0)),je.attr("transform",le?w(0,Math.round(-B.t)):w(Math.round(-B.l),0));var Fr=K.select("."+J.cbfills).selectAll("rect."+J.cbfill).attr("style","").data(lt);Fr.enter().append("rect").classed(J.cbfill,!0).attr("style",""),Fr.exit().remove();var xr=ke.map(_t.c2p).map(Math.round).sort(function(Er,vr){return Er-vr});Fr.each(function(Er,vr){var Ir=[vr===0?ke[0]:(lt[vr]+lt[vr-1])/2,vr===lt.length-1?ke[1]:(lt[vr]+lt[vr+1])/2].map(_t.c2p).map(Math.round);le&&(Ir[1]=g.constrain(Ir[1]+(Ir[1]>Ir[0])?1:-1,xr[0],xr[1]));var ln=h.select(this).attr(le?"x":"y",Lt).attr(le?"y":"x",h.min(Ir)).attr(le?"width":"height",Math.max(Ce,2)).attr(le?"height":"width",Math.max(h.max(Ir)-h.min(Ir),2));if(ee._fillgradient)y.gradient(ln,ne,ee._id,le?"vertical":"horizontalreversed",ee._fillgradient,"fill");else{var kn=Ge(Er).replace("e-","");ln.attr("fill",c(kn).toHexString())}});var br=K.select("."+J.cblines).selectAll("path."+J.cbline).data(ie.color&&ie.width?mt:[]);br.enter().append("path").classed(J.cbline,!0),br.exit().remove(),br.each(function(Er){var vr=Lt,Ir=Math.round(_t.c2p(Er))+ie.width/2%1;h.select(this).attr("d","M"+(le?vr+","+Ir:Ir+","+vr)+(le?"h":"v")+Ce).call(y.lineGroupStyle,ie.width,Pe(Er),ie.dash)}),je.selectAll("g."+_t._id+"tick,path").remove();var Wr=Lt+Ce+(pe||0)/2-(ee.ticks==="outside"?1:0),Or=v.calcTicks(_t),qr=v.getTickSigns(_t)[2];return v.drawTicks(ne,_t,{vals:_t.ticks==="inside"?v.clipEnds(_t,Or):Or,layer:je,path:v.makeTickPath(_t,Wr,qr),transFn:v.makeTransTickFn(_t)}),v.drawLabels(ne,_t,{vals:Or,layer:je,transFn:v.makeTransTickLabelFn(_t),labelFns:v.makeLabelFns(_t,Wr)})}function ot(){var jt,Ut=Ce+pe/2;$e.indexOf("inside")===-1&&(jt=y.bBox(je.node()),Ut+=le?jt.width:jt.height),Ne=Ye.select("text");var Gt=0,Tr=le&&_e==="top",Dr=!le&&_e==="right",Vr=0;if(Ne.node()&&!Ne.classed(J.jsPlaceholder)){var Mr,Fr=Ye.select(".h"+_t._id+"title-math-group").node();Fr&&(le&&rr||!le&&!rr)?(jt=y.bBox(Fr),Gt=jt.width,Mr=jt.height):(jt=y.bBox(Ye.node()),Gt=jt.right-B.l-(le?Lt:nr),Mr=jt.bottom-B.t-(le?nr:Lt),!le&&_e==="top"&&(Ut+=jt.height,Vr=jt.height)),Dr&&(Ne.attr("transform",w(Gt/2+he/2,0)),Gt*=2),Ut=Math.max(Ut,le?Gt:Mr)}var xr=(le?te:ae)*2+Ut+be+pe/2,br=0;!le&&xe.text&&We==="bottom"&&Q<=0&&(br=xr/2,xr+=br,Vr+=br),R._hColorbarMoveTitle=br,R._hColorbarMoveCBTitle=Vr;var Wr=be+pe,Or=(le?Lt:nr)-Wr/2-(le?te:0),qr=(le?nr:Lt)-(le?Se:ae+Vr-br);K.select("."+J.cbbg).attr("x",Or).attr("y",qr).attr(le?"width":"height",Math.max(xr-br,2)).attr(le?"height":"width",Math.max(Se+Wr,2)).call(k.fill,Le).call(k.stroke,ee.bordercolor).style("stroke-width",be);var Er=Dr?Math.max(Gt-10,0):0;K.selectAll("."+J.cboutline).attr("x",(le?Lt:nr+te)+Er).attr("y",(le?nr+ae-Se:Lt)+(Tr?Re:0)).attr(le?"width":"height",Math.max(Ce,2)).attr(le?"height":"width",Math.max(Se-(le?2*ae+Re:2*te+Er),2)).call(k.stroke,ee.outlinecolor).style({fill:"none","stroke-width":pe});var vr=le?Ct*xr:0,Ir=le?0:(1-zt)*xr-Vr;if(vr=re?B.l-vr:-vr,Ir=U?B.t-Ir:-Ir,K.attr("transform",w(vr,Ir)),!le&&(be||c(Le).getAlpha()&&!c.equals(R.paper_bgcolor,Le))){var ln=je.selectAll("text"),kn=ln[0].length,Hr=K.select("."+J.cbbg).node(),pn=y.bBox(Hr),mn=y.getTranslate(K),Un=2;ln.each(function(At,it){var bt=0,Tt=kn-1;if(it===bt||it===Tt){var Rt=y.bBox(this),tr=y.getTranslate(this),ur;if(it===Tt){var fr=Rt.right+tr.x,Rr=pn.right+mn.x+nr-be-Un+G;ur=Rr-fr,ur>0&&(ur=0)}else if(it===bt){var wr=Rt.left+tr.x,Gr=pn.left+mn.x+nr+be+Un;ur=Gr-wr,ur<0&&(ur=0)}ur&&(kn<3?this.setAttribute("transform","translate("+ur+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var gr={},Cn=F[Ae],we=P[Ae],ge=F[We],pt=P[We],ft=xr-Ce;le?(ce==="pixels"?(gr.y=Q,gr.t=Se*ge,gr.b=Se*pt):(gr.t=gr.b=0,gr.yt=Q+W*ge,gr.yb=Q-W*pt),ve==="pixels"?(gr.x=G,gr.l=xr*Cn,gr.r=xr*we):(gr.l=ft*Cn,gr.r=ft*we,gr.xl=G-de*Cn,gr.xr=G+de*we)):(ce==="pixels"?(gr.x=G,gr.l=Se*Cn,gr.r=Se*we):(gr.l=gr.r=0,gr.xl=G+W*Cn,gr.xr=G-W*we),ve==="pixels"?(gr.y=1-Q,gr.t=xr*ge,gr.b=xr*pt):(gr.t=ft*ge,gr.b=ft*pt,gr.yt=Q-de*ge,gr.yb=Q+de*pt));var Xe=ee.y<.5?"b":"t",Qe=ee.x<.5?"l":"r";ne._fullLayout._reservedMargin[ee._id]={};var st={r:R.width-Or-vr,l:Or+gr.r,b:R.height-qr-Ir,t:qr+gr.b};re&&U?u.autoMargin(ne,ee._id,gr):re?ne._fullLayout._reservedMargin[ee._id][Xe]=st[Xe]:U||le?ne._fullLayout._reservedMargin[ee._id][Qe]=st[Qe]:ne._fullLayout._reservedMargin[ee._id][Xe]=st[Xe]}return g.syncOrAsync([u.previousPromises,dt,Nt,Mt,u.previousPromises,ot],ne)}function z(K,ee,ne){var le=ee.orientation==="v",W=ne._fullLayout,ce=W._size,de,ve,pe;m.init({element:K.node(),gd:ne,prepFn:function(){de=K.attr("transform"),T(K)},moveFn:function(be,Le){K.attr("transform",de+w(be,Le)),ve=m.align((le?ee._uFrac:ee._vFrac)+be/ce.w,le?ee._thickFrac:ee._lenFrac,0,1,ee.xanchor),pe=m.align((le?ee._vFrac:1-ee._uFrac)-Le/ce.h,le?ee._lenFrac:ee._thickFrac,0,1,ee.yanchor);var Ae=m.getCursor(ve,pe,ee.xanchor,ee.yanchor);T(K,Ae)},doneFn:function(){if(T(K),ve!==void 0&&pe!==void 0){var be={};be[ee._propPrefix+"x"]=ve,be[ee._propPrefix+"y"]=pe,ee._traceIndex!==void 0?p.call("_guiRestyle",ne,be,ee._traceIndex):p.call("_guiRelayout",ne,be)}}})}function q(K,ee,ne){var le=ee._levels,W=[],ce=[],de,ve,pe=le.end+le.size/100,be=le.size,Le=1.001*ne[0]-.001*ne[1],Ae=1.001*ne[1]-.001*ne[0];for(ve=0;ve<1e5&&(de=le.start+ve*be,!(be>0?de>=pe:de<=pe));ve++)de>Le&&de<Ae&&W.push(de);if(ee._fillgradient)ce=[0];else if(typeof ee._fillcolor=="function"){var We=ee._filllevels;if(We)for(pe=We.end+We.size/100,be=We.size,ve=0;ve<1e5&&(de=We.start+ve*be,!(be>0?de>=pe:de<=pe));ve++)de>ne[0]&&de<ne[1]&&ce.push(de);else ce=W.map(function(te){return te-le.size/2}),ce.push(ce[ce.length-1]+le.size)}else ee._fillcolor&&typeof ee._fillcolor=="string"&&(ce=[0]);return le.size<0&&(W.reverse(),ce.reverse()),{line:W,fill:ce}}function X(K,ee,ne){var le=K._fullLayout,W=ee.orientation==="v",ce={type:"linear",range:ne,tickmode:ee.tickmode,nticks:ee.nticks,tick0:ee.tick0,dtick:ee.dtick,tickvals:ee.tickvals,ticktext:ee.ticktext,ticks:ee.ticks,ticklen:ee.ticklen,tickwidth:ee.tickwidth,tickcolor:ee.tickcolor,showticklabels:ee.showticklabels,labelalias:ee.labelalias,ticklabelposition:ee.ticklabelposition,ticklabeloverflow:ee.ticklabeloverflow,ticklabelstep:ee.ticklabelstep,tickfont:ee.tickfont,tickangle:ee.tickangle,tickformat:ee.tickformat,exponentformat:ee.exponentformat,minexponent:ee.minexponent,separatethousands:ee.separatethousands,showexponent:ee.showexponent,showtickprefix:ee.showtickprefix,tickprefix:ee.tickprefix,showticksuffix:ee.showticksuffix,ticksuffix:ee.ticksuffix,title:ee.title,showline:!0,anchor:"free",side:W?"right":"bottom",position:1},de=W?"y":"x",ve={type:"linear",_id:de+ee._id},pe={letter:de,font:le.font,noAutotickangles:de==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:le.calendar};function be(Le,Ae){return g.coerce(ce,ve,b,Le,Ae)}return C(ce,ve,be,pe,le),j(ce,ve,be,pe),ve}$.exports={draw:H}}}),Tk=i({"src/components/colorbar/index.js"(V,$){$.exports={moduleType:"component",name:"colorbar",attributes:Po(),supplyDefaults:Al(),draw:Mk().draw,hasColorbar:No()}}}),Ak=i({"src/components/legend/index.js"(V,$){$.exports={moduleType:"component",name:"legend",layoutAttributes:ed(),supplyLayoutDefaults:td(),draw:id(),style:nd()}}}),Ck=i({"src/locale-en.js"(V,$){$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}}}),jk=i({"src/locale-en-us.js"(V,$){$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}}}),n1=i({"src/snapshot/cloneplot.js"(V,$){var h=xn(),c=_r(),u=c.extendFlat,p=c.extendDeep;function v(g){var w;switch(g){case"themes__thumb":w={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":w={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:w={}}return w}function m(g){var w=["xaxis","yaxis","zaxis"];return w.indexOf(g.slice(0,5))>-1}$.exports=function(w,o){var T,y=w.data,k=w.layout,D=p([],y),M=p({},k,v(o.tileClass)),A=w._context||{};if(o.width&&(M.width=o.width),o.height&&(M.height=o.height),o.tileClass==="thumbnail"||o.tileClass==="themes__thumb"){M.annotations=[];var C=Object.keys(M);for(T=0;T<C.length;T++)m(C[T])&&(M[C[T]].title={text:""});for(T=0;T<D.length;T++){var j=D[T];j.showscale=!1,j.marker&&(j.marker.showscale=!1),h.traceIs(j,"pie-like")&&(j.textposition="none")}}if(Array.isArray(o.annotations))for(T=0;T<o.annotations.length;T++)M.annotations.push(o.annotations[T]);var b=Object.keys(M).filter(function(J){return J.match(/^scene\d*$/)});if(b.length){var S={};for(o.tileClass==="thumbnail"&&(S={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),T=0;T<b.length;T++){var L=M[b[T]];L.xaxis||(L.xaxis={}),L.yaxis||(L.yaxis={}),L.zaxis||(L.zaxis={}),u(L.xaxis,S),u(L.yaxis,S),u(L.zaxis,S),L._scene=null}}var F=document.createElement("div");o.tileClass&&(F.className=o.tileClass);var P={gd:F,td:F,layout:M,data:D,config:{staticPlot:o.staticPlot===void 0?!0:o.staticPlot,plotGlPixelRatio:o.plotGlPixelRatio===void 0?2:o.plotGlPixelRatio,displaylogo:o.displaylogo||!1,showLink:o.showLink||!1,showTips:o.showTips||!1,mapboxAccessToken:A.mapboxAccessToken}};return o.setBackground!=="transparent"&&(P.config.setBackground=o.setBackground||"opaque"),P.gd.defaultLayout=v(o.tileClass),P}}}),Lk=i({"src/snapshot/toimage.js"(V,$){var h=bo().EventEmitter,c=xn(),u=_r(),p=uu(),v=n1(),m=jm(),g=Lm();function w(o,T){var y=new h,k=v(o,{format:"png"}),D=k.gd;D.style.position="absolute",D.style.left="-5000px",document.body.appendChild(D);function M(){var C=p.getDelay(D._fullLayout);setTimeout(function(){var j=m(D),b=document.createElement("canvas");b.id=u.randstr(),y=g({format:T.format,width:D._fullLayout.width,height:D._fullLayout.height,canvas:b,emitter:y,svg:j}),y.clean=function(){D&&document.body.removeChild(D)}},C)}var A=p.getRedrawFunc(D);return c.call("_doPlot",D,k.data,k.layout,k.config).then(A).then(M).catch(function(C){y.emit("error",C)}),y}$.exports=w}}),Ek=i({"src/snapshot/index.js"(V,$){var h=uu(),c={getDelay:h.getDelay,getRedrawFunc:h.getRedrawFunc,clone:n1(),toSVG:jm(),svgToImg:Lm(),toImage:Lk(),downloadImage:Ny()};$.exports=c}}),Dk=i({"src/core.js"(V){V.version=a().version,s(),ro();var $=xn(),h=V.register=$.register,c=u5(),u=Object.keys(c);for(v=0;v<u.length;v++)p=u[v],p.charAt(0)!=="_"&&(V[p]=c[p]),h({moduleType:"apiMethod",name:p,fn:c[p]});var p,v;h(z5()),h([W5(),Y5(),ud(),K5(),tk(),ak(),lk(),hk(),gk(),yk(),Sk(),nl(),Tk(),Ak(),so(),Ll()]),h([Ck(),jk()]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(h(window.PlotlyLocales),delete window.PlotlyLocales),V.Icons=au();var m=so(),g=xi();V.Plots={resize:g.resize,graphJson:g.graphJson,sendDataToCloud:g.sendDataToCloud},V.Fx={hover:m.hover,unhover:m.unhover,loneHover:m.loneHover,loneUnhover:m.loneUnhover},V.Snapshot=Ek(),V.PlotSchema=Dt()}}),Rk=i({"lib/core.js"(V,$){$.exports=Dk()}}),Om=i({"src/traces/bar/constants.js"(V,$){$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}}}),eh=i({"src/traces/bar/attributes.js"(V,$){var h=cu(),c=io().axisHoverFormat,u=Pn().hovertemplateAttrs,p=Pn().texttemplateAttrs,v=ao(),m=ir(),g=Om(),w=Wi().pattern,o=Pt().extendFlat,T=m({editType:"calc",arrayOk:!0,colorEditType:"style"}),y=h.marker,k=y.line,D=o({},k.width,{dflt:0}),M=o({width:D,editType:"calc"},v("marker.line")),A=o({line:M,editType:"calc"},v("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:w,cornerradius:{valType:"any",editType:"calc"}});$.exports={x:h.x,x0:h.x0,dx:h.dx,y:h.y,y0:h.y0,dy:h.dy,xperiod:h.xperiod,yperiod:h.yperiod,xperiod0:h.xperiod0,yperiod0:h.yperiod0,xperiodalignment:h.xperiodalignment,yperiodalignment:h.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),text:h.text,texttemplate:p({editType:"plot"},{keys:g.eventDataKeys}),hovertext:h.hovertext,hovertemplate:u({},{keys:g.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:o({},T,{}),insidetextfont:o({},T,{}),outsidetextfont:o({},T,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:o({},h.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:A,offsetgroup:h.offsetgroup,alignmentgroup:h.alignmentgroup,selected:{marker:{opacity:h.selected.marker.opacity,color:h.selected.marker.color,editType:"style"},textfont:h.selected.textfont,editType:"style"},unselected:{marker:{opacity:h.unselected.marker.opacity,color:h.unselected.marker.color,editType:"style"},textfont:h.unselected.textfont,editType:"style"},zorder:h.zorder}}}),i1=i({"src/traces/bar/layout_attributes.js"(V,$){$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}}}),Pk=i({"src/traces/bar/style_defaults.js"(V,$){var h=ut(),c=Ha().hasColorscale,u=is(),p=_r().coercePattern;$.exports=function(m,g,w,o,T){var y=w("marker.color",o),k=c(m,"marker");k&&u(m,g,T,w,{prefix:"marker.",cLetter:"c"}),w("marker.line.color",h.defaultLine),c(m,"marker.line")&&u(m,g,T,w,{prefix:"marker.line.",cLetter:"c"}),w("marker.line.width"),w("marker.opacity"),p(w,"marker.pattern",y,k),w("selected.marker.color"),w("unselected.marker.color")}}}),th=i({"src/traces/bar/defaults.js"(V,$){var h=fe(),c=_r(),u=ut(),p=xn(),v=zy(),m=Fy(),g=Pk(),w=Iy(),o=eh(),T=c.coerceFont;function y(A,C,j,b){function S(H,Y){return c.coerce(A,C,o,H,Y)}var L=v(A,C,b,S);if(!L){C.visible=!1;return}m(A,C,b,S),S("xhoverformat"),S("yhoverformat"),S("zorder"),S("orientation",C.x&&!C.y?"h":"v"),S("base"),S("offset"),S("width"),S("text"),S("hovertext"),S("hovertemplate");var F=S("textposition");M(A,C,b,S,F,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),g(A,C,S,j,b);var P=(C.marker.line||{}).color,J=p.getComponentMethod("errorbars","supplyDefaults");J(A,C,P||u.defaultLine,{axis:"y"}),J(A,C,P||u.defaultLine,{axis:"x",inherit:"y"}),c.coerceSelectionMarkerOpacity(C,S)}function k(A,C){var j,b;function S(P,J){return c.coerce(b._input,b,o,P,J)}for(var L=0;L<A.length;L++)if(b=A[L],b.type==="bar"){j=b._input;var F=S("marker.cornerradius",C.barcornerradius);b.marker&&(b.marker.cornerradius=D(F)),w(j,b,C,S,C.barmode)}}function D(A){if(h(A)){if(A=+A,A>=0)return A}else if(typeof A=="string"&&(A=A.trim(),A.slice(-1)==="%"&&h(A.slice(0,-1))&&(A=+A.slice(0,-1),A>=0)))return A+"%"}function M(A,C,j,b,S,L){L=L||{};var F=L.moduleHasSelected!==!1,P=L.moduleHasUnselected!==!1,J=L.moduleHasConstrain!==!1,H=L.moduleHasCliponaxis!==!1,Y=L.moduleHasTextangle!==!1,Z=L.moduleHasInsideanchor!==!1,z=!!L.hasPathbar,q=Array.isArray(S)||S==="auto",X=q||S==="inside",K=q||S==="outside";if(X||K){var ee=T(b,"textfont",j.font),ne=c.extendFlat({},ee),le=A.textfont&&A.textfont.color,W=!le;if(W&&delete ne.color,T(b,"insidetextfont",ne),z){var ce=c.extendFlat({},ee);W&&delete ce.color,T(b,"pathbar.textfont",ce)}K&&T(b,"outsidetextfont",ee),F&&b("selected.textfont.color"),P&&b("unselected.textfont.color"),J&&b("constraintext"),H&&b("cliponaxis"),Y&&b("textangle"),b("texttemplate")}X&&Z&&b("insidetextanchor")}$.exports={supplyDefaults:y,crossTraceDefaults:k,handleText:M,validateCornerradius:D}}}),Nk=i({"src/traces/bar/layout_defaults.js"(V,$){var h=xn(),c=ji(),u=_r(),p=i1(),v=th().validateCornerradius;$.exports=function(m,g,w){function o(F,P){return u.coerce(m,g,p,F,P)}for(var T=!1,y=!1,k=!1,D={},M=o("barmode"),A=M==="group",C=0;C<w.length;C++){var j=w[C];if(h.traceIs(j,"bar")&&j.visible)T=!0;else continue;var b=j.xaxis+j.yaxis;if(A?(D[b]&&(k=!0),D[b]=!0):(b+=j._input.offsetgroup,D.length>0&&!D[b]&&(k=!0),D[b]=!0),j.visible&&j.type==="histogram"){var S=c.getFromId({_fullLayout:g},j[j.orientation==="v"?"xaxis":"yaxis"]);S.type!=="category"&&(y=!0)}}if(!T){delete g.barmode;return}M!=="overlay"&&o("barnorm"),o("bargap",y&&!k?0:.2),o("bargroupgap");var L=o("barcornerradius");g.barcornerradius=v(L)}}}),a1=i({"src/traces/bar/arrays_to_calcdata.js"(V,$){var h=_r();$.exports=function(u,p){for(var v=0;v<u.length;v++)u[v].i=v;h.mergeArray(p.text,u,"tx"),h.mergeArray(p.hovertext,u,"htx");var m=p.marker;if(m){h.mergeArray(m.opacity,u,"mo",!0),h.mergeArray(m.color,u,"mc");var g=m.line;g&&(h.mergeArray(g.color,u,"mlc"),h.mergeArrayCastPositive(g.width,u,"mlw"))}}}}),zk=i({"src/traces/bar/calc.js"(V,$){var h=ji(),c=Oy(),u=Ha().hasColorscale,p=fc(),v=a1(),m=Hy();$.exports=function(w,o){var T=h.getFromId(w,o.xaxis||"x"),y=h.getFromId(w,o.yaxis||"y"),k,D,M,A,C,j,b={msUTC:!!(o.base||o.base===0)};o.orientation==="h"?(k=T.makeCalcdata(o,"x",b),M=y.makeCalcdata(o,"y"),A=c(o,y,"y",M),C=!!o.yperiodalignment,j="y"):(k=y.makeCalcdata(o,"y",b),M=T.makeCalcdata(o,"x"),A=c(o,T,"x",M),C=!!o.xperiodalignment,j="x"),D=A.vals;for(var S=Math.min(D.length,k.length),L=new Array(S),F=0;F<S;F++)L[F]={p:D[F],s:k[F]},C&&(L[F].orig_p=M[F],L[F][j+"End"]=A.ends[F],L[F][j+"Start"]=A.starts[F]),o.ids&&(L[F].id=String(o.ids[F]));return u(o,"marker")&&p(w,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),u(o,"marker.line")&&p(w,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),v(L,o),m(L,o),L}}}),rh=i({"src/traces/bar/uniform_text.js"(V,$){var h=f(),c=_r();function u(g,w,o){var T=g._fullLayout,y=T["_"+o+"Text_minsize"];if(y){var k=T.uniformtext.mode==="hide",D;switch(o){case"funnelarea":case"pie":case"sunburst":D="g.slice";break;case"treemap":case"icicle":D="g.slice, g.pathbar";break;default:D="g.points > g.point"}w.selectAll(D).each(function(M){var A=M.transform;if(A){A.scale=k&&A.hide?0:y/A.fontSize;var C=h.select(this).select("text");c.setTransormAndDisplay(C,A)}})}}function p(g,w,o){if(o.uniformtext.mode){var T=m(g),y=o.uniformtext.minsize,k=w.scale*w.fontSize;w.hide=k<y,o[T]=o[T]||1/0,w.hide||(o[T]=Math.min(o[T],Math.max(k,y)))}}function v(g,w){var o=m(g);w[o]=void 0}function m(g){return"_"+g+"Text_minsize"}$.exports={recordMinTextSize:p,clearMinTextSize:v,resizeText:u}}}),Bm=i({"src/traces/bar/helpers.js"(V){var $=fe(),h=xt(),c=_r().isArrayOrTypedArray;V.coerceString=function(u,p,v){if(typeof p=="string"){if(p||!u.noBlank)return p}else if((typeof p=="number"||p===!0)&&!u.strict)return String(p);return v!==void 0?v:u.dflt},V.coerceNumber=function(u,p,v){if($(p)){p=+p;var m=u.min,g=u.max,w=m!==void 0&&p<m||g!==void 0&&p>g;if(!w)return p}return v!==void 0?v:u.dflt},V.coerceColor=function(u,p,v){return h(p).isValid()?p:v!==void 0?v:u.dflt},V.coerceEnumerated=function(u,p,v){return u.coerceNumber&&(p=+p),u.values.indexOf(p)!==-1?p:v!==void 0?v:u.dflt},V.getValue=function(u,p){var v;return c(u)?p<u.length&&(v=u[p]):v=u,v},V.getLineWidth=function(u,p){var v=0<p.mlw?p.mlw:c(u.marker.line.width)?0:u.marker.line.width;return v}}}),Hm=i({"src/traces/bar/style.js"(V,$){var h=f(),c=ut(),u=oi(),p=_r(),v=xn(),m=rh().resizeText,g=eh(),w=g.textfont,o=g.insidetextfont,T=g.outsidetextfont,y=Bm();function k(H){var Y=h.select(H).selectAll('g[class^="barlayer"]').selectAll("g.trace");m(H,Y,"bar");var Z=Y.size(),z=H._fullLayout;Y.style("opacity",function(q){return q[0].trace.opacity}).each(function(q){(z.barmode==="stack"&&Z>1||z.bargap===0&&z.bargroupgap===0&&!q[0].trace.marker.line.width)&&h.select(this).attr("shape-rendering","crispEdges")}),Y.selectAll("g.points").each(function(q){var X=h.select(this),K=q[0].trace;D(X,K,H)}),v.getComponentMethod("errorbars","style")(Y)}function D(H,Y,Z){u.pointStyle(H.selectAll("path"),Y,Z),M(H,Y,Z)}function M(H,Y,Z){H.selectAll("text").each(function(z){var q=h.select(this),X=p.ensureUniformFontSize(Z,b(q,z,Y,Z));u.font(q,X)})}function A(H,Y,Z){var z=Y[0].trace;z.selectedpoints?C(Z,z,H):(D(Z,z,H),v.getComponentMethod("errorbars","style")(Z))}function C(H,Y,Z){u.selectedPointStyle(H.selectAll("path"),Y),j(H.selectAll("text"),Y,Z)}function j(H,Y,Z){H.each(function(z){var q=h.select(this),X;if(z.selected){X=p.ensureUniformFontSize(Z,b(q,z,Y,Z));var K=Y.selected.textfont&&Y.selected.textfont.color;K&&(X.color=K),u.font(q,X)}else u.selectedTextStyle(q,Y)})}function b(H,Y,Z,z){var q=z._fullLayout.font,X=Z.textfont;if(H.classed("bartext-inside")){var K=J(Y,Z);X=L(Z,Y.i,q,K)}else H.classed("bartext-outside")&&(X=F(Z,Y.i,q));return X}function S(H,Y,Z){return P(w,H.textfont,Y,Z)}function L(H,Y,Z,z){var q=S(H,Y,Z),X=H._input.textfont===void 0||H._input.textfont.color===void 0||Array.isArray(H.textfont.color)&&H.textfont.color[Y]===void 0;return X&&(q={color:c.contrast(z),family:q.family,size:q.size,weight:q.weight,style:q.style,variant:q.variant,textcase:q.textcase,lineposition:q.lineposition,shadow:q.shadow}),P(o,H.insidetextfont,Y,q)}function F(H,Y,Z){var z=S(H,Y,Z);return P(T,H.outsidetextfont,Y,z)}function P(H,Y,Z,z){Y=Y||{};var q=y.getValue(Y.family,Z),X=y.getValue(Y.size,Z),K=y.getValue(Y.color,Z),ee=y.getValue(Y.weight,Z),ne=y.getValue(Y.style,Z),le=y.getValue(Y.variant,Z),W=y.getValue(Y.textcase,Z),ce=y.getValue(Y.lineposition,Z),de=y.getValue(Y.shadow,Z);return{family:y.coerceString(H.family,q,z.family),size:y.coerceNumber(H.size,X,z.size),color:y.coerceColor(H.color,K,z.color),weight:y.coerceString(H.weight,ee,z.weight),style:y.coerceString(H.style,ne,z.style),variant:y.coerceString(H.variant,le,z.variant),textcase:y.coerceString(H.variant,W,z.textcase),lineposition:y.coerceString(H.variant,ce,z.lineposition),shadow:y.coerceString(H.variant,de,z.shadow)}}function J(H,Y){return Y.type==="waterfall"?Y[H.dir].marker.color:H.mcc||H.mc||Y.marker.color}$.exports={style:k,styleTextPoints:M,styleOnSelect:A,getInsideTextFont:L,getOutsideTextFont:F,getBarColor:J,resizeText:m}}}),Fk=i({"src/traces/bar/plot.js"(V,$){var h=f(),c=fe(),u=_r(),p=ia(),v=ut(),m=oi(),g=xn(),w=ji().tickText,o=rh(),T=o.recordMinTextSize,y=o.clearMinTextSize,k=Hm(),D=Bm(),M=Om(),A=eh(),C=A.text,j=A.textposition,b=Wa().appendArrayPointValue,S=M.TEXTPAD;function L(be){return be.id}function F(be){if(be.ids)return L}function P(be){return(be>0)-(be<0)}function J(be,Le){return be<Le?1:-1}function H(be,Le,Ae,We){var te=[],ae=[],G=We?Le:Ae,Q=We?Ae:Le;return te[0]=G.c2p(be.s0,!0),ae[0]=Q.c2p(be.p0,!0),te[1]=G.c2p(be.s1,!0),ae[1]=Q.c2p(be.p1,!0),We?[te,ae]:[ae,te]}function Y(be,Le,Ae,We){if(!Le.uniformtext.mode&&Z(Ae)){var te;return We&&(te=We()),be.transition().duration(Ae.duration).ease(Ae.easing).each("end",function(){te&&te()}).each("interrupt",function(){te&&te()})}else return be}function Z(be){return be&&be.duration>0}function z(be,Le,Ae,We,te,ae){var G=Le.xaxis,Q=Le.yaxis,U=be._fullLayout,re=be._context.staticPlot;te||(te={mode:U.barmode,norm:U.barmode,gap:U.bargap,groupgap:U.bargroupgap},y("bar",U));var R=u.makeTraceGroups(We,Ae,"trace bars").each(function(B){var oe=h.select(this),ie=B[0].trace,xe=B[0].t,_e=ie.type==="waterfall",ke=ie.type==="funnel",Pe=ie.type==="histogram",Ge=ie.type==="bar",Je=Ge||ke,yt=0;_e&&ie.connector.visible&&ie.connector.mode==="between"&&(yt=ie.connector.line.width/2);var lt=ie.orientation==="h",mt=Z(te),Ce=u.ensureSingle(oe,"g","points"),Ie=F(ie),Se=Ce.selectAll("g.point").data(u.identity,Ie);Se.enter().append("g").classed("point",!0),Se.exit().remove(),Se.each(function(rt,ht){var Lt=h.select(this),Ct=H(rt,G,Q,lt),zt=Ct[0][0],Bt=Ct[0][1],Ft=Ct[1][0],nr=Ct[1][1],_t=(lt?Bt-zt:nr-Ft)===0;_t&&Je&&D.getLineWidth(ie,rt)&&(_t=!1),_t||(_t=!c(zt)||!c(Bt)||!c(Ft)||!c(nr)),rt.isBlank=_t,_t&&(lt?Bt=zt:nr=Ft),yt&&!_t&&(lt?(zt-=J(zt,Bt)*yt,Bt+=J(zt,Bt)*yt):(Ft-=J(Ft,nr)*yt,nr+=J(Ft,nr)*yt));var rr,pr;if(ie.type==="waterfall"){if(!_t){var Yt=ie[rt.dir].marker;rr=Yt.line.width,pr=Yt.color}}else rr=D.getLineWidth(ie,rt),pr=rt.mc||ie.marker.color;function sr(Wr){var Or=h.round(rr/2%1,2);return te.gap===0&&te.groupgap===0?h.round(Math.round(Wr)-Or,2):Wr}function ze(Wr,Or,qr){return qr&&Wr===Or?Wr:Math.abs(Wr-Or)>=2?sr(Wr):Wr>Or?Math.ceil(Wr):Math.floor(Wr)}var Ye=v.opacity(pr),$e=Ye<1||rr>.01?sr:ze;be._context.staticPlot||(zt=$e(zt,Bt,lt),Bt=$e(Bt,zt,lt),Ft=$e(Ft,nr,!lt),nr=$e(nr,Ft,!lt));var he=lt?G.c2p:Q.c2p,je;rt.s0>0?je=rt._sMax:rt.s0<0?je=rt._sMin:je=rt.s1>0?rt._sMax:rt._sMin;function Ne(Wr,Or){if(!Wr)return 0;var qr=Math.abs(lt?nr-Ft:Bt-zt),Er=Math.abs(lt?Bt-zt:nr-Ft),vr=$e(Math.abs(he(je,!0)-he(0,!0))),Ir=rt.hasB?Math.min(qr/2,Er/2):Math.min(qr/2,vr),ln;if(Or==="%"){var kn=Math.min(50,Wr);ln=qr*(kn/100)}else ln=Wr;return $e(Math.max(Math.min(ln,Ir),0))}var Re=Ge||Pe?Ne(xe.cornerradiusvalue,xe.cornerradiusform):0,nt,at,dt="M"+zt+","+Ft+"V"+nr+"H"+Bt+"V"+Ft+"Z",Mt=0;if(Re&&rt.s){var Nt=P(rt.s0)===0||P(rt.s)===P(rt.s0)?rt.s1:rt.s0;if(Mt=$e(rt.hasB?0:Math.abs(he(je,!0)-he(Nt,!0))),Mt<Re){var ot=J(zt,Bt),jt=J(Ft,nr),Ut=ot===-jt?1:0;if(lt)if(rt.hasB)nt="M"+(zt+Re*ot)+","+Ft+"A "+Re+","+Re+" 0 0 "+Ut+" "+zt+","+(Ft+Re*jt)+"V"+(nr-Re*jt)+"A "+Re+","+Re+" 0 0 "+Ut+" "+(zt+Re*ot)+","+nr+"H"+(Bt-Re*ot)+"A "+Re+","+Re+" 0 0 "+Ut+" "+Bt+","+(nr-Re*jt)+"V"+(Ft+Re*jt)+"A "+Re+","+Re+" 0 0 "+Ut+" "+(Bt-Re*ot)+","+Ft+"Z";else{at=Math.abs(Bt-zt)+Mt;var Gt=at<Re?Re-Math.sqrt(at*(2*Re-at)):0,Tr=Mt>0?Math.sqrt(Mt*(2*Re-Mt)):0,Dr=ot>0?Math.max:Math.min;nt="M"+zt+","+Ft+"V"+(nr-Gt*jt)+"H"+Dr(Bt-(Re-Mt)*ot,zt)+"A "+Re+","+Re+" 0 0 "+Ut+" "+Bt+","+(nr-Re*jt-Tr)+"V"+(Ft+Re*jt+Tr)+"A "+Re+","+Re+" 0 0 "+Ut+" "+Dr(Bt-(Re-Mt)*ot,zt)+","+(Ft+Gt*jt)+"Z"}else if(rt.hasB)nt="M"+(zt+Re*ot)+","+Ft+"A "+Re+","+Re+" 0 0 "+Ut+" "+zt+","+(Ft+Re*jt)+"V"+(nr-Re*jt)+"A "+Re+","+Re+" 0 0 "+Ut+" "+(zt+Re*ot)+","+nr+"H"+(Bt-Re*ot)+"A "+Re+","+Re+" 0 0 "+Ut+" "+Bt+","+(nr-Re*jt)+"V"+(Ft+Re*jt)+"A "+Re+","+Re+" 0 0 "+Ut+" "+(Bt-Re*ot)+","+Ft+"Z";else{at=Math.abs(nr-Ft)+Mt;var Vr=at<Re?Re-Math.sqrt(at*(2*Re-at)):0,Mr=Mt>0?Math.sqrt(Mt*(2*Re-Mt)):0,Fr=jt>0?Math.max:Math.min;nt="M"+(zt+Vr*ot)+","+Ft+"V"+Fr(nr-(Re-Mt)*jt,Ft)+"A "+Re+","+Re+" 0 0 "+Ut+" "+(zt+Re*ot-Mr)+","+nr+"H"+(Bt-Re*ot+Mr)+"A "+Re+","+Re+" 0 0 "+Ut+" "+(Bt-Vr*ot)+","+Fr(nr-(Re-Mt)*jt,Ft)+"V"+Ft+"Z"}}else nt=dt}else nt=dt;var xr=Y(u.ensureSingle(Lt,"path"),U,te,ae);if(xr.style("vector-effect",re?"none":"non-scaling-stroke").attr("d",isNaN((Bt-zt)*(nr-Ft))||_t&&be._context.staticPlot?"M0,0Z":nt).call(m.setClipUrl,Le.layerClipId,be),!U.uniformtext.mode&&mt){var br=m.makePointStyleFns(ie);m.singlePointStyle(rt,xr,ie,br,be)}q(be,Le,Lt,B,ht,zt,Bt,Ft,nr,Re,Mt,te,ae),Le.layerClipId&&m.hideOutsideRangePoint(rt,Lt.select("text"),G,Q,ie.xcalendar,ie.ycalendar)});var Be=ie.cliponaxis===!1;m.setClipUrl(oe,Be?null:Le.layerClipId,be)});g.getComponentMethod("errorbars","plot")(be,R,Le,te)}function q(be,Le,Ae,We,te,ae,G,Q,U,re,R,B,oe){var ie=Le.xaxis,xe=Le.yaxis,_e=be._fullLayout,ke;function Pe(at,dt,Mt){var Nt=u.ensureSingle(at,"text").text(dt).attr({class:"bartext bartext-"+ke,"text-anchor":"middle","data-notex":1}).call(m.font,Mt).call(p.convertToTspans,be);return Nt}var Ge=We[0].trace,Je=Ge.orientation==="h",yt=ce(_e,We,te,ie,xe);ke=de(Ge,te);var lt=B.mode==="stack"||B.mode==="relative",mt=We[te],Ce=!lt||mt._outmost,Ie=mt.hasB,Se=re&&re-R>S;if(!yt||ke==="none"||(mt.isBlank||ae===G||Q===U)&&(ke==="auto"||ke==="inside")){Ae.select("text").remove();return}var Be=_e.font,rt=k.getBarColor(We[te],Ge),ht=k.getInsideTextFont(Ge,te,Be,rt),Lt=k.getOutsideTextFont(Ge,te,Be),Ct=Ge.insidetextanchor||"end",zt=Ae.datum();Je?ie.type==="log"&&zt.s0<=0&&(ie.range[0]<ie.range[1]?ae=0:ae=ie._length):xe.type==="log"&&zt.s0<=0&&(xe.range[0]<xe.range[1]?Q=xe._length:Q=0);var Bt=Math.abs(G-ae),Ft=Math.abs(U-Q),nr=Bt-2*S,_t=Ft-2*S,rr,pr,Yt,sr,ze;if(ke==="outside"&&!Ce&&!mt.hasB&&(ke="inside"),ke==="auto")if(Ce){ke="inside",ze=u.ensureUniformFontSize(be,ht),rr=Pe(Ae,yt,ze),pr=m.bBox(rr.node()),Yt=pr.width,sr=pr.height;var Ye=Yt>0&&sr>0,$e;Se?Ie?$e=X(nr-2*re,_t,Yt,sr,Je)||X(nr,_t-2*re,Yt,sr,Je):Je?$e=X(nr-(re-R),_t,Yt,sr,Je)||X(nr,_t-2*(re-R),Yt,sr,Je):$e=X(nr,_t-(re-R),Yt,sr,Je)||X(nr-2*(re-R),_t,Yt,sr,Je):$e=X(nr,_t,Yt,sr,Je),Ye&&$e?ke="inside":(ke="outside",rr.remove(),rr=null)}else ke="inside";if(!rr){ze=u.ensureUniformFontSize(be,ke==="outside"?Lt:ht),rr=Pe(Ae,yt,ze);var he=rr.attr("transform");if(rr.attr("transform",""),pr=m.bBox(rr.node()),Yt=pr.width,sr=pr.height,rr.attr("transform",he),Yt<=0||sr<=0){rr.remove();return}}var je=Ge.textangle,Ne,Re;ke==="outside"?(Re=Ge.constraintext==="both"||Ge.constraintext==="outside",Ne=W(ae,G,Q,U,pr,{isHorizontal:Je,constrained:Re,angle:je})):(Re=Ge.constraintext==="both"||Ge.constraintext==="inside",Ne=ne(ae,G,Q,U,pr,{isHorizontal:Je,constrained:Re,angle:je,anchor:Ct,hasB:Ie,r:re,overhead:R})),Ne.fontSize=ze.size,T(Ge.type==="histogram"?"bar":Ge.type,Ne,_e),mt.transform=Ne;var nt=Y(rr,_e,B,oe);u.setTransormAndDisplay(nt,Ne)}function X(be,Le,Ae,We,te){if(be<0||Le<0)return!1;var ae=Ae<=be&&We<=Le,G=Ae<=Le&&We<=be,Q=te?be>=Ae*(Le/We):Le>=We*(be/Ae);return ae||G||Q}function K(be){return be==="auto"?0:be}function ee(be,Le){var Ae=Math.PI/180*Le,We=Math.abs(Math.sin(Ae)),te=Math.abs(Math.cos(Ae));return{x:be.width*te+be.height*We,y:be.width*We+be.height*te}}function ne(be,Le,Ae,We,te,ae){var G=!!ae.isHorizontal,Q=!!ae.constrained,U=ae.angle||0,re=ae.anchor,R=re==="end",B=re==="start",oe=ae.leftToRight||0,ie=(oe+1)/2,xe=1-ie,_e=ae.hasB,ke=ae.r,Pe=ae.overhead,Ge=te.width,Je=te.height,yt=Math.abs(Le-be),lt=Math.abs(We-Ae),mt=yt>2*S&&lt>2*S?S:0;yt-=2*mt,lt-=2*mt;var Ce=K(U);U==="auto"&&!(Ge<=yt&&Je<=lt)&&(Ge>yt||Je>lt)&&(!(Ge>lt||Je>yt)||Ge<Je!=yt<lt)&&(Ce+=90);var Ie=ee(te,Ce),Se,Be;if(ke&&ke-Pe>S){var rt=le(be,Le,Ae,We,Ie,ke,Pe,G,_e);Se=rt.scale,Be=rt.pad}else Se=1,Q&&(Se=Math.min(1,yt/Ie.x,lt/Ie.y)),Be=0;var ht=te.left*xe+te.right*ie,Lt=(te.top+te.bottom)/2,Ct=(be+S)*xe+(Le-S)*ie,zt=(Ae+We)/2,Bt=0,Ft=0;if(B||R){var nr=(G?Ie.x:Ie.y)/2;ke&&(R||_e)&&(mt+=Be);var _t=G?J(be,Le):J(Ae,We);G?B?(Ct=be+_t*mt,Bt=-_t*nr):(Ct=Le-_t*mt,Bt=_t*nr):B?(zt=Ae+_t*mt,Ft=-_t*nr):(zt=We-_t*mt,Ft=_t*nr)}return{textX:ht,textY:Lt,targetX:Ct,targetY:zt,anchorX:Bt,anchorY:Ft,scale:Se,rotate:Ce}}function le(be,Le,Ae,We,te,ae,G,Q,U){var re=Math.max(0,Math.abs(Le-be)-2*S),R=Math.max(0,Math.abs(We-Ae)-2*S),B=ae-S,oe=G?B-Math.sqrt(B*B-(B-G)*(B-G)):B,ie=U?B*2:Q?B-G:2*oe,xe=U?B*2:Q?2*oe:B-G,_e,ke,Pe,Ge,Je;return te.y/te.x>=R/(re-ie)?Ge=R/te.y:te.y/te.x<=(R-xe)/re?Ge=re/te.x:!U&&Q?(_e=te.x*te.x+te.y*te.y/4,ke=-2*te.x*(re-B)-te.y*(R/2-B),Pe=(re-B)*(re-B)+(R/2-B)*(R/2-B)-B*B,Ge=(-ke+Math.sqrt(ke*ke-4*_e*Pe))/(2*_e)):U?(_e=(te.x*te.x+te.y*te.y)/4,ke=-te.x*(re/2-B)-te.y*(R/2-B),Pe=(re/2-B)*(re/2-B)+(R/2-B)*(R/2-B)-B*B,Ge=(-ke+Math.sqrt(ke*ke-4*_e*Pe))/(2*_e)):(_e=te.x*te.x/4+te.y*te.y,ke=-te.x*(re/2-B)-2*te.y*(R-B),Pe=(re/2-B)*(re/2-B)+(R-B)*(R-B)-B*B,Ge=(-ke+Math.sqrt(ke*ke-4*_e*Pe))/(2*_e)),Ge=Math.min(1,Ge),Q?Je=Math.max(0,B-Math.sqrt(Math.max(0,B*B-(B-(R-te.y*Ge)/2)*(B-(R-te.y*Ge)/2)))-G):Je=Math.max(0,B-Math.sqrt(Math.max(0,B*B-(B-(re-te.x*Ge)/2)*(B-(re-te.x*Ge)/2)))-G),{scale:Ge,pad:Je}}function W(be,Le,Ae,We,te,ae){var G=!!ae.isHorizontal,Q=!!ae.constrained,U=ae.angle||0,re=te.width,R=te.height,B=Math.abs(Le-be),oe=Math.abs(We-Ae),ie;G?ie=oe>2*S?S:0:ie=B>2*S?S:0;var xe=1;Q&&(xe=G?Math.min(1,oe/R):Math.min(1,B/re));var _e=K(U),ke=ee(te,_e),Pe=(G?ke.x:ke.y)/2,Ge=(te.left+te.right)/2,Je=(te.top+te.bottom)/2,yt=(be+Le)/2,lt=(Ae+We)/2,mt=0,Ce=0,Ie=G?J(Le,be):J(Ae,We);return G?(yt=Le-Ie*ie,mt=Ie*Pe):(lt=We+Ie*ie,Ce=-Ie*Pe),{textX:Ge,textY:Je,targetX:yt,targetY:lt,anchorX:mt,anchorY:Ce,scale:xe,rotate:_e}}function ce(be,Le,Ae,We,te){var ae=Le[0].trace,G=ae.texttemplate,Q;return G?Q=ve(be,Le,Ae,We,te):ae.textinfo?Q=pe(Le,Ae,We,te):Q=D.getValue(ae.text,Ae),D.coerceString(C,Q)}function de(be,Le){var Ae=D.getValue(be.textposition,Le);return D.coerceEnumerated(j,Ae)}function ve(be,Le,Ae,We,te){var ae=Le[0].trace,G=u.castOption(ae,Ae,"texttemplate");if(!G)return"";var Q=ae.type==="histogram",U=ae.type==="waterfall",re=ae.type==="funnel",R=ae.orientation==="h",B,oe,ie,xe;R?(B="y",oe=te,ie="x",xe=We):(B="x",oe=We,ie="y",xe=te);function _e(mt){return w(oe,oe.c2l(mt),!0).text}function ke(mt){return w(xe,xe.c2l(mt),!0).text}var Pe=Le[Ae],Ge={};Ge.label=Pe.p,Ge.labelLabel=Ge[B+"Label"]=_e(Pe.p);var Je=u.castOption(ae,Pe.i,"text");(Je===0||Je)&&(Ge.text=Je),Ge.value=Pe.s,Ge.valueLabel=Ge[ie+"Label"]=ke(Pe.s);var yt={};b(yt,ae,Pe.i),(Q||yt.x===void 0)&&(yt.x=R?Ge.value:Ge.label),(Q||yt.y===void 0)&&(yt.y=R?Ge.label:Ge.value),(Q||yt.xLabel===void 0)&&(yt.xLabel=R?Ge.valueLabel:Ge.labelLabel),(Q||yt.yLabel===void 0)&&(yt.yLabel=R?Ge.labelLabel:Ge.valueLabel),U&&(Ge.delta=+Pe.rawS||Pe.s,Ge.deltaLabel=ke(Ge.delta),Ge.final=Pe.v,Ge.finalLabel=ke(Ge.final),Ge.initial=Ge.final-Ge.delta,Ge.initialLabel=ke(Ge.initial)),re&&(Ge.value=Pe.s,Ge.valueLabel=ke(Ge.value),Ge.percentInitial=Pe.begR,Ge.percentInitialLabel=u.formatPercent(Pe.begR),Ge.percentPrevious=Pe.difR,Ge.percentPreviousLabel=u.formatPercent(Pe.difR),Ge.percentTotal=Pe.sumR,Ge.percenTotalLabel=u.formatPercent(Pe.sumR));var lt=u.castOption(ae,Pe.i,"customdata");return lt&&(Ge.customdata=lt),u.texttemplateString(G,Ge,be._d3locale,yt,Ge,ae._meta||{})}function pe(be,Le,Ae,We){var te=be[0].trace,ae=te.orientation==="h",G=te.type==="waterfall",Q=te.type==="funnel";function U(lt){var mt=ae?We:Ae;return w(mt,lt,!0).text}function re(lt){var mt=ae?Ae:We;return w(mt,+lt,!0).text}var R=te.textinfo,B=be[Le],oe=R.split("+"),ie=[],xe,_e=function(lt){return oe.indexOf(lt)!==-1};if(_e("label")&&ie.push(U(be[Le].p)),_e("text")&&(xe=u.castOption(te,B.i,"text"),(xe===0||xe)&&ie.push(xe)),G){var ke=+B.rawS||B.s,Pe=B.v,Ge=Pe-ke;_e("initial")&&ie.push(re(Ge)),_e("delta")&&ie.push(re(ke)),_e("final")&&ie.push(re(Pe))}if(Q){_e("value")&&ie.push(re(B.s));var Je=0;_e("percent initial")&&Je++,_e("percent previous")&&Je++,_e("percent total")&&Je++;var yt=Je>1;_e("percent initial")&&(xe=u.formatPercent(B.begR),yt&&(xe+=" of initial"),ie.push(xe)),_e("percent previous")&&(xe=u.formatPercent(B.difR),yt&&(xe+=" of previous"),ie.push(xe)),_e("percent total")&&(xe=u.formatPercent(B.sumR),yt&&(xe+=" of total"),ie.push(xe))}return ie.join("<br>")}$.exports={plot:z,toMoveInsideBar:ne}}}),Ik=i({"src/traces/bar/hover.js"(V,$){var h=so(),c=xn(),u=ut(),p=_r().fillText,v=Bm().getLineWidth,m=ji().hoverLabelText,g=Te().BADNUM;function w(y,k,D,M,A){var C=o(y,k,D,M,A);if(C){var j=C.cd,b=j[0].trace,S=j[C.index];return C.color=T(b,S),c.getComponentMethod("errorbars","hoverInfo")(S,b,C),[C]}}function o(y,k,D,M,A){var C=y.cd,j=C[0].trace,b=C[0].t,S=M==="closest",L=j.type==="waterfall",F=y.maxHoverDistance,P=y.maxSpikeDistance,J,H,Y,Z,z,q,X;j.orientation==="h"?(J=D,H=k,Y="y",Z="x",z=We,q=be):(J=k,H=D,Y="x",Z="y",q=We,z=be);var K=j[Y+"period"],ee=S||K;function ne(xe){return W(xe,-1)}function le(xe){return W(xe,1)}function W(xe,_e){var ke=xe.w;return xe[Y]+_e*ke/2}function ce(xe){return xe[Y+"End"]-xe[Y+"Start"]}var de=S?ne:K?function(xe){return xe.p-ce(xe)/2}:function(xe){return Math.min(ne(xe),xe.p-b.bardelta/2)},ve=S?le:K?function(xe){return xe.p+ce(xe)/2}:function(xe){return Math.max(le(xe),xe.p+b.bardelta/2)};function pe(xe,_e,ke){return A.finiteRange&&(ke=0),h.inbox(xe-J,_e-J,ke+Math.min(1,Math.abs(_e-xe)/X)-1)}function be(xe){return pe(de(xe),ve(xe),F)}function Le(xe){return pe(ne(xe),le(xe),P)}function Ae(xe){var _e=xe[Z];if(L){var ke=Math.abs(xe.rawS)||0;H>0?_e+=ke:H<0&&(_e-=ke)}return _e}function We(xe){var _e=H,ke=xe.b,Pe=Ae(xe);return h.inbox(ke-_e,Pe-_e,F+(Pe-_e)/(Pe-ke)-1)}function te(xe){var _e=H,ke=xe.b,Pe=Ae(xe);return h.inbox(ke-_e,Pe-_e,P+(Pe-_e)/(Pe-ke)-1)}var ae=y[Y+"a"],G=y[Z+"a"];X=Math.abs(ae.r2c(ae.range[1])-ae.r2c(ae.range[0]));function Q(xe){return(z(xe)+q(xe))/2}var U=h.getDistanceFunction(M,z,q,Q);if(h.getClosest(C,U,y),y.index!==!1&&C[y.index].p!==g){ee||(de=function(xe){return Math.min(ne(xe),xe.p-b.bargroupwidth/2)},ve=function(xe){return Math.max(le(xe),xe.p+b.bargroupwidth/2)});var re=y.index,R=C[re],B=j.base?R.b+R.s:R.s;y[Z+"0"]=y[Z+"1"]=G.c2p(R[Z],!0),y[Z+"LabelVal"]=B;var oe=b.extents[b.extents.round(R.p)];y[Y+"0"]=ae.c2p(S?de(R):oe[0],!0),y[Y+"1"]=ae.c2p(S?ve(R):oe[1],!0);var ie=R.orig_p!==void 0;return y[Y+"LabelVal"]=ie?R.orig_p:R.p,y.labelLabel=m(ae,y[Y+"LabelVal"],j[Y+"hoverformat"]),y.valueLabel=m(G,y[Z+"LabelVal"],j[Z+"hoverformat"]),y.baseLabel=m(G,R.b,j[Z+"hoverformat"]),y.spikeDistance=(te(R)+Le(R))/2,y[Y+"Spike"]=ae.c2p(R.p,!0),p(R,j,y),y.hovertemplate=j.hovertemplate,y}}function T(y,k){var D=k.mcc||y.marker.color,M=k.mlcc||y.marker.line.color,A=v(y,k);if(u.opacity(D))return D;if(u.opacity(M)&&A)return M}$.exports={hoverPoints:w,hoverOnBars:o,getTraceColor:T}}}),Ok=i({"src/traces/bar/event_data.js"(V,$){$.exports=function(c,u,p){return c.x="xVal"in u?u.xVal:u.x,c.y="yVal"in u?u.yVal:u.y,u.xa&&(c.xaxis=u.xa),u.ya&&(c.yaxis=u.ya),p.orientation==="h"?(c.label=c.y,c.value=c.x):(c.label=c.x,c.value=c.y),c}}}),Bk=i({"src/traces/bar/select.js"(V,$){$.exports=function(u,p){var v=u.cd,m=u.xaxis,g=u.yaxis,w=v[0].trace,o=w.type==="funnel",T=w.orientation==="h",y=[],k;if(p===!1)for(k=0;k<v.length;k++)v[k].selected=0;else for(k=0;k<v.length;k++){var D=v[k],M="ct"in D?D.ct:h(D,m,g,T,o);p.contains(M,!1,k,u)?(y.push({pointNumber:k,x:m.c2d(D.x),y:g.c2d(D.y)}),D.selected=1):D.selected=0}return y};function h(c,u,p,v,m){var g=u.c2p(v?c.s0:c.p0,!0),w=u.c2p(v?c.s1:c.p1,!0),o=p.c2p(v?c.p0:c.s0,!0),T=p.c2p(v?c.p1:c.s1,!0);return m?[(g+w)/2,(o+T)/2]:v?[w,(o+T)/2]:[(g+w)/2,T]}}}),Hk=i({"src/traces/bar/index.js"(V,$){$.exports={attributes:eh(),layoutAttributes:i1(),supplyDefaults:th().supplyDefaults,crossTraceDefaults:th().crossTraceDefaults,supplyLayoutDefaults:Nk(),calc:zk(),crossTraceCalc:qy().crossTraceCalc,colorbar:Uy(),arraysToCalcdata:a1(),plot:Fk().plot,style:Hm().style,styleOnSelect:Hm().styleOnSelect,hoverPoints:Ik().hoverPoints,eventData:Ok(),selectPoints:Bk(),moduleType:"trace",name:"bar",basePlotModule:Em(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}}}),Wk=i({"lib/bar.js"(V,$){$.exports=Hk()}}),s1=i({"src/traces/pie/attributes.js"(V,$){var h=vt(),c=Im().attributes,u=ir(),p=It(),v=Pn().hovertemplateAttrs,m=Pn().texttemplateAttrs,g=Pt().extendFlat,w=Wi().pattern,o=u({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:p.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:w,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:g({},h.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:v({},{keys:["label","color","value","percent","text"]}),texttemplate:m({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:g({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:g({},o,{}),outsidetextfont:g({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:g({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:c({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}}}),qk=i({"src/traces/pie/defaults.js"(V,$){var h=fe(),c=_r(),u=s1(),p=Im().defaults,v=th().handleText,m=_r().coercePattern;function g(T,y){var k=c.isArrayOrTypedArray(T),D=c.isArrayOrTypedArray(y),M=Math.min(k?T.length:1/0,D?y.length:1/0);if(isFinite(M)||(M=0),M&&D){for(var A,C=0;C<M;C++){var j=y[C];if(h(j)&&j>0){A=!0;break}}A||(M=0)}return{hasLabels:k,hasValues:D,len:M}}function w(T,y,k,D,M){var A=D("marker.line.width");A&&D("marker.line.color",M?void 0:k.paper_bgcolor);var C=D("marker.colors");m(D,"marker.pattern",C),T.marker&&!y.marker.pattern.fgcolor&&(y.marker.pattern.fgcolor=T.marker.colors),y.marker.pattern.bgcolor||(y.marker.pattern.bgcolor=k.paper_bgcolor)}function o(T,y,k,D){function M(q,X){return c.coerce(T,y,u,q,X)}var A=M("labels"),C=M("values"),j=g(A,C),b=j.len;if(y._hasLabels=j.hasLabels,y._hasValues=j.hasValues,!y._hasLabels&&y._hasValues&&(M("label0"),M("dlabel")),!b){y.visible=!1;return}y._length=b,w(T,y,D,M,!0),M("scalegroup");var S=M("text"),L=M("texttemplate"),F;if(L||(F=M("textinfo",c.isArrayOrTypedArray(S)?"text+percent":"percent")),M("hovertext"),M("hovertemplate"),L||F&&F!=="none"){var P=M("textposition");v(T,y,D,M,P,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var J=Array.isArray(P)||P==="auto",H=J||P==="outside";H&&M("automargin"),(P==="inside"||P==="auto"||Array.isArray(P))&&M("insidetextorientation")}else F==="none"&&M("textposition","none");p(y,D,M);var Y=M("hole"),Z=M("title.text");if(Z){var z=M("title.position",Y?"middle center":"top center");!Y&&z==="middle center"&&(y.title.position="top center"),c.coerceFont(M,"title.font",D.font)}M("sort"),M("direction"),M("rotation"),M("pull")}$.exports={handleLabelsAndValues:g,handleMarkerDefaults:w,supplyDefaults:o}}}),o1=i({"src/traces/pie/layout_attributes.js"(V,$){$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}}}),Uk=i({"src/traces/pie/layout_defaults.js"(V,$){var h=_r(),c=o1();$.exports=function(p,v){function m(g,w){return h.coerce(p,v,c,g,w)}m("hiddenlabels"),m("piecolorway",v.colorway),m("extendpiecolors")}}}),l1=i({"src/traces/pie/calc.js"(V,$){var h=fe(),c=xt(),u=ut(),p={};function v(o,T){var y=[],k=o._fullLayout,D=k.hiddenlabels||[],M=T.labels,A=T.marker.colors||[],C=T.values,j=T._length,b=T._hasValues&&j,S,L;if(T.dlabel)for(M=new Array(j),S=0;S<j;S++)M[S]=String(T.label0+S*T.dlabel);var F={},P=m(k["_"+T.type+"colormap"]),J=0,H=!1;for(S=0;S<j;S++){var Y,Z,z;if(b){if(Y=C[S],!h(Y))continue;Y=+Y}else Y=1;Z=M[S],(Z===void 0||Z==="")&&(Z=S),Z=String(Z);var q=F[Z];q===void 0?(F[Z]=y.length,z=D.indexOf(Z)!==-1,z||(J+=Y),y.push({v:Y,label:Z,color:P(A[S],Z),i:S,pts:[S],hidden:z})):(H=!0,L=y[q],L.v+=Y,L.pts.push(S),L.hidden||(J+=Y),L.color===!1&&A[S]&&(L.color=P(A[S],Z)))}y=y.filter(function(K){return K.v>=0});var X=T.type==="funnelarea"?H:T.sort;return X&&y.sort(function(K,ee){return ee.v-K.v}),y[0]&&(y[0].vTotal=J),y}function m(o){return function(y,k){return!y||(y=c(y),!y.isValid())?!1:(y=u.addOpacity(y,y.getAlpha()),o[k]||(o[k]=y),y)}}function g(o,T){var y=(T||{}).type;y||(y="pie");var k=o._fullLayout,D=o.calcdata,M=k[y+"colorway"],A=k["_"+y+"colormap"];k["extend"+y+"colors"]&&(M=w(M,p));for(var C=0,j=0;j<D.length;j++){var b=D[j],S=b[0].trace.type;if(S===y)for(var L=0;L<b.length;L++){var F=b[L];F.color===!1&&(A[F.label]?F.color=A[F.label]:(A[F.label]=F.color=M[C%M.length],C++))}}}function w(o,T){var y,k=JSON.stringify(o),D=T[k];if(!D){for(D=o.slice(),y=0;y<o.length;y++)D.push(c(o[y]).lighten(20).toHexString());for(y=0;y<o.length;y++)D.push(c(o[y]).darken(20).toHexString());T[k]=D}return D}$.exports={calc:v,crossTraceCalc:g,makePullColorFn:m,generateExtendedColors:w}}}),Vk=i({"src/traces/pie/event_data.js"(V,$){var h=Wa().appendArrayMultiPointValues;$.exports=function(u,p){var v={curveNumber:p.index,pointNumbers:u.pts,data:p._input,fullData:p,label:u.label,color:u.color,value:u.v,percent:u.percent,text:u.text,bbox:u.bbox,v:u.v};return u.pts.length===1&&(v.pointNumber=v.i=u.pts[0]),h(v,p,u.pts),p.type==="funnelarea"&&(delete v.v,delete v.i),v}}}),$k=i({"src/traces/pie/plot.js"(V,$){var h=f(),c=xi(),u=so(),p=ut(),v=oi(),m=_r(),g=m.strScale,w=m.strTranslate,o=ia(),T=rh(),y=T.recordMinTextSize,k=T.clearMinTextSize,D=Om().TEXTPAD,M=tu(),A=Vk(),C=_r().isValidTextValue;function j(ae,G){var Q=ae._context.staticPlot,U=ae._fullLayout,re=U._size;k("pie",U),P(G,ae),pe(G,re);var R=m.makeTraceGroups(U._pielayer,G,"trace").each(function(B){var oe=h.select(this),ie=B[0],xe=ie.trace;Le(B),oe.attr("stroke-linejoin","round"),oe.each(function(){var _e=h.select(this).selectAll("g.slice").data(B);_e.enter().append("g").classed("slice",!0),_e.exit().remove();var ke=[[[],[]],[[],[]]],Pe=!1;_e.each(function(Se,Be){if(Se.hidden){h.select(this).selectAll("path,g").remove();return}Se.pointNumber=Se.i,Se.curveNumber=xe.index,ke[Se.pxmid[1]<0?0:1][Se.pxmid[0]<0?0:1].push(Se);var rt=ie.cx,ht=ie.cy,Lt=h.select(this),Ct=Lt.selectAll("path.surface").data([Se]);if(Ct.enter().append("path").classed("surface",!0).style({"pointer-events":Q?"none":"all"}),Lt.call(S,ae,B),xe.pull){var zt=+M.castOption(xe.pull,Se.pts)||0;zt>0&&(rt+=zt*Se.pxmid[0],ht+=zt*Se.pxmid[1])}Se.cxFinal=rt,Se.cyFinal=ht;function Bt(sr,ze,Ye,$e){var he=$e*(ze[0]-sr[0]),je=$e*(ze[1]-sr[1]);return"a"+$e*ie.r+","+$e*ie.r+" 0 "+Se.largeArc+(Ye?" 1 ":" 0 ")+he+","+je}var Ft=xe.hole;if(Se.v===ie.vTotal){var nr="M"+(rt+Se.px0[0])+","+(ht+Se.px0[1])+Bt(Se.px0,Se.pxmid,!0,1)+Bt(Se.pxmid,Se.px0,!0,1)+"Z";Ft?Ct.attr("d","M"+(rt+Ft*Se.px0[0])+","+(ht+Ft*Se.px0[1])+Bt(Se.px0,Se.pxmid,!1,Ft)+Bt(Se.pxmid,Se.px0,!1,Ft)+"Z"+nr):Ct.attr("d",nr)}else{var _t=Bt(Se.px0,Se.px1,!0,1);if(Ft){var rr=1-Ft;Ct.attr("d","M"+(rt+Ft*Se.px1[0])+","+(ht+Ft*Se.px1[1])+Bt(Se.px1,Se.px0,!1,Ft)+"l"+rr*Se.px0[0]+","+rr*Se.px0[1]+_t+"Z")}else Ct.attr("d","M"+rt+","+ht+"l"+Se.px0[0]+","+Se.px0[1]+_t+"Z")}We(ae,Se,ie);var pr=M.castOption(xe.textposition,Se.pts),Yt=Lt.selectAll("g.slicetext").data(Se.text&&pr!=="none"?[0]:[]);Yt.enter().append("g").classed("slicetext",!0),Yt.exit().remove(),Yt.each(function(){var sr=m.ensureSingle(h.select(this),"text","",function(nt){nt.attr("data-notex",1)}),ze=m.ensureUniformFontSize(ae,pr==="outside"?L(xe,Se,U.font):F(xe,Se,U.font));sr.text(Se.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,ze).call(o.convertToTspans,ae);var Ye=v.bBox(sr.node()),$e;if(pr==="outside")$e=ee(Ye,Se);else if($e=J(Ye,Se,ie),pr==="auto"&&$e.scale<1){var he=m.ensureUniformFontSize(ae,xe.outsidetextfont);sr.call(v.font,he),Ye=v.bBox(sr.node()),$e=ee(Ye,Se)}var je=$e.textPosAngle,Ne=je===void 0?Se.pxmid:Ae(ie.r,je);if($e.targetX=rt+Ne[0]*$e.rCenter+($e.x||0),$e.targetY=ht+Ne[1]*$e.rCenter+($e.y||0),te($e,Ye),$e.outside){var Re=$e.targetY;Se.yLabelMin=Re-Ye.height/2,Se.yLabelMid=Re,Se.yLabelMax=Re+Ye.height/2,Se.labelExtraX=0,Se.labelExtraY=0,Pe=!0}$e.fontSize=ze.size,y(xe.type,$e,U),B[Be].transform=$e,m.setTransormAndDisplay(sr,$e)})});var Ge=h.select(this).selectAll("g.titletext").data(xe.title.text?[0]:[]);if(Ge.enter().append("g").classed("titletext",!0),Ge.exit().remove(),Ge.each(function(){var Se=m.ensureSingle(h.select(this),"text","",function(ht){ht.attr("data-notex",1)}),Be=xe.title.text;xe._meta&&(Be=m.templateString(Be,xe._meta)),Se.text(Be).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,xe.title.font).call(o.convertToTspans,ae);var rt;xe.title.position==="middle center"?rt=ne(ie):rt=le(ie,re),Se.attr("transform",w(rt.x,rt.y)+g(Math.min(1,rt.scale))+w(rt.tx,rt.ty))}),Pe&&ve(ke,xe),b(_e,xe),Pe&&xe.automargin){var Je=v.bBox(oe.node()),yt=xe.domain,lt=re.w*(yt.x[1]-yt.x[0]),mt=re.h*(yt.y[1]-yt.y[0]),Ce=(.5*lt-ie.r)/re.w,Ie=(.5*mt-ie.r)/re.h;c.autoMargin(ae,"pie."+xe.uid+".automargin",{xl:yt.x[0]-Ce,xr:yt.x[1]+Ce,yb:yt.y[0]-Ie,yt:yt.y[1]+Ie,l:Math.max(ie.cx-ie.r-Je.left,0),r:Math.max(Je.right-(ie.cx+ie.r),0),b:Math.max(Je.bottom-(ie.cy+ie.r),0),t:Math.max(ie.cy-ie.r-Je.top,0),pad:5})}})});setTimeout(function(){R.selectAll("tspan").each(function(){var B=h.select(this);B.attr("dy")&&B.attr("dy",B.attr("dy"))})},0)}function b(ae,G){ae.each(function(Q){var U=h.select(this);if(!Q.labelExtraX&&!Q.labelExtraY){U.select("path.textline").remove();return}var re=U.select("g.slicetext text");Q.transform.targetX+=Q.labelExtraX,Q.transform.targetY+=Q.labelExtraY,m.setTransormAndDisplay(re,Q.transform);var R=Q.cxFinal+Q.pxmid[0],B=Q.cyFinal+Q.pxmid[1],oe="M"+R+","+B,ie=(Q.yLabelMax-Q.yLabelMin)*(Q.pxmid[0]<0?-1:1)/4;if(Q.labelExtraX){var xe=Q.labelExtraX*Q.pxmid[1]/Q.pxmid[0],_e=Q.yLabelMid+Q.labelExtraY-(Q.cyFinal+Q.pxmid[1]);Math.abs(xe)>Math.abs(_e)?oe+="l"+_e*Q.pxmid[0]/Q.pxmid[1]+","+_e+"H"+(R+Q.labelExtraX+ie):oe+="l"+Q.labelExtraX+","+xe+"v"+(_e-xe)+"h"+ie}else oe+="V"+(Q.yLabelMid+Q.labelExtraY)+"h"+ie;m.ensureSingle(U,"path","textline").call(p.stroke,G.outsidetextfont.color).attr({"stroke-width":Math.min(2,G.outsidetextfont.size/8),d:oe,fill:"none"})})}function S(ae,G,Q){var U=Q[0],re=U.cx,R=U.cy,B=U.trace,oe=B.type==="funnelarea";"_hasHoverLabel"in B||(B._hasHoverLabel=!1),"_hasHoverEvent"in B||(B._hasHoverEvent=!1),ae.on("mouseover",function(ie){var xe=G._fullLayout,_e=G._fullData[B.index];if(!(G._dragging||xe.hovermode===!1)){var ke=_e.hoverinfo;if(Array.isArray(ke)&&(ke=u.castHoverinfo({hoverinfo:[M.castOption(ke,ie.pts)],_module:B._module},xe,0)),ke==="all"&&(ke="label+text+value+percent+name"),_e.hovertemplate||ke!=="none"&&ke!=="skip"&&ke){var Pe=ie.rInscribed||0,Ge=re+ie.pxmid[0]*(1-Pe),Je=R+ie.pxmid[1]*(1-Pe),yt=xe.separators,lt=[];if(ke&&ke.indexOf("label")!==-1&&lt.push(ie.label),ie.text=M.castOption(_e.hovertext||_e.text,ie.pts),ke&&ke.indexOf("text")!==-1){var mt=ie.text;m.isValidTextValue(mt)&&lt.push(mt)}ie.value=ie.v,ie.valueLabel=M.formatPieValue(ie.v,yt),ke&&ke.indexOf("value")!==-1&&lt.push(ie.valueLabel),ie.percent=ie.v/U.vTotal,ie.percentLabel=M.formatPiePercent(ie.percent,yt),ke&&ke.indexOf("percent")!==-1&&lt.push(ie.percentLabel);var Ce=_e.hoverlabel,Ie=Ce.font,Se=[];u.loneHover({trace:B,x0:Ge-Pe*U.r,x1:Ge+Pe*U.r,y:Je,_x0:oe?re+ie.TL[0]:Ge-Pe*U.r,_x1:oe?re+ie.TR[0]:Ge+Pe*U.r,_y0:oe?R+ie.TL[1]:Je-Pe*U.r,_y1:oe?R+ie.BL[1]:Je+Pe*U.r,text:lt.join("<br>"),name:_e.hovertemplate||ke.indexOf("name")!==-1?_e.name:void 0,idealAlign:ie.pxmid[0]<0?"left":"right",color:M.castOption(Ce.bgcolor,ie.pts)||ie.color,borderColor:M.castOption(Ce.bordercolor,ie.pts),fontFamily:M.castOption(Ie.family,ie.pts),fontSize:M.castOption(Ie.size,ie.pts),fontColor:M.castOption(Ie.color,ie.pts),nameLength:M.castOption(Ce.namelength,ie.pts),textAlign:M.castOption(Ce.align,ie.pts),hovertemplate:M.castOption(_e.hovertemplate,ie.pts),hovertemplateLabels:ie,eventData:[A(ie,_e)]},{container:xe._hoverlayer.node(),outerContainer:xe._paper.node(),gd:G,inOut_bbox:Se}),ie.bbox=Se[0],B._hasHoverLabel=!0}B._hasHoverEvent=!0,G.emit("plotly_hover",{points:[A(ie,_e)],event:h.event})}}),ae.on("mouseout",function(ie){var xe=G._fullLayout,_e=G._fullData[B.index],ke=h.select(this).datum();B._hasHoverEvent&&(ie.originalEvent=h.event,G.emit("plotly_unhover",{points:[A(ke,_e)],event:h.event}),B._hasHoverEvent=!1),B._hasHoverLabel&&(u.loneUnhover(xe._hoverlayer.node()),B._hasHoverLabel=!1)}),ae.on("click",function(ie){var xe=G._fullLayout,_e=G._fullData[B.index];G._dragging||xe.hovermode===!1||(G._hoverdata=[A(ie,_e)],u.click(G,h.event))})}function L(ae,G,Q){var U=M.castOption(ae.outsidetextfont.color,G.pts)||M.castOption(ae.textfont.color,G.pts)||Q.color,re=M.castOption(ae.outsidetextfont.family,G.pts)||M.castOption(ae.textfont.family,G.pts)||Q.family,R=M.castOption(ae.outsidetextfont.size,G.pts)||M.castOption(ae.textfont.size,G.pts)||Q.size,B=M.castOption(ae.outsidetextfont.weight,G.pts)||M.castOption(ae.textfont.weight,G.pts)||Q.weight,oe=M.castOption(ae.outsidetextfont.style,G.pts)||M.castOption(ae.textfont.style,G.pts)||Q.style,ie=M.castOption(ae.outsidetextfont.variant,G.pts)||M.castOption(ae.textfont.variant,G.pts)||Q.variant,xe=M.castOption(ae.outsidetextfont.textcase,G.pts)||M.castOption(ae.textfont.textcase,G.pts)||Q.textcase,_e=M.castOption(ae.outsidetextfont.lineposition,G.pts)||M.castOption(ae.textfont.lineposition,G.pts)||Q.lineposition,ke=M.castOption(ae.outsidetextfont.shadow,G.pts)||M.castOption(ae.textfont.shadow,G.pts)||Q.shadow;return{color:U,family:re,size:R,weight:B,style:oe,variant:ie,textcase:xe,lineposition:_e,shadow:ke}}function F(ae,G,Q){var U=M.castOption(ae.insidetextfont.color,G.pts);!U&&ae._input.textfont&&(U=M.castOption(ae._input.textfont.color,G.pts));var re=M.castOption(ae.insidetextfont.family,G.pts)||M.castOption(ae.textfont.family,G.pts)||Q.family,R=M.castOption(ae.insidetextfont.size,G.pts)||M.castOption(ae.textfont.size,G.pts)||Q.size,B=M.castOption(ae.insidetextfont.weight,G.pts)||M.castOption(ae.textfont.weight,G.pts)||Q.weight,oe=M.castOption(ae.insidetextfont.style,G.pts)||M.castOption(ae.textfont.style,G.pts)||Q.style,ie=M.castOption(ae.insidetextfont.variant,G.pts)||M.castOption(ae.textfont.variant,G.pts)||Q.variant,xe=M.castOption(ae.insidetextfont.textcase,G.pts)||M.castOption(ae.textfont.textcase,G.pts)||Q.textcase,_e=M.castOption(ae.insidetextfont.lineposition,G.pts)||M.castOption(ae.textfont.lineposition,G.pts)||Q.lineposition,ke=M.castOption(ae.insidetextfont.shadow,G.pts)||M.castOption(ae.textfont.shadow,G.pts)||Q.shadow;return{color:U||p.contrast(G.color),family:re,size:R,weight:B,style:oe,variant:ie,textcase:xe,lineposition:_e,shadow:ke}}function P(ae,G){for(var Q,U,re=0;re<ae.length;re++)if(Q=ae[re][0],U=Q.trace,U.title.text){var R=U.title.text;U._meta&&(R=m.templateString(R,U._meta));var B=v.tester.append("text").attr("data-notex",1).text(R).call(v.font,U.title.font).call(o.convertToTspans,G),oe=v.bBox(B.node(),!0);Q.titleBox={width:oe.width,height:oe.height},B.remove()}}function J(ae,G,Q){var U=Q.r||G.rpx1,re=G.rInscribed,R=G.startangle===G.stopangle;if(R)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var B=G.ring,oe=B===1&&Math.abs(G.startangle-G.stopangle)===Math.PI*2,ie=G.halfangle,xe=G.midangle,_e=Q.trace.insidetextorientation,ke=_e==="horizontal",Pe=_e==="tangential",Ge=_e==="radial",Je=_e==="auto",yt=[],lt;if(!Je){var mt=function(Lt,Ct){if(H(G,Lt)){var zt=Math.abs(Lt-G.startangle),Bt=Math.abs(Lt-G.stopangle),Ft=zt<Bt?zt:Bt;Ct==="tan"?lt=Z(ae,U,B,Ft,0):lt=Y(ae,U,B,Ft,Math.PI/2),lt.textPosAngle=Lt,yt.push(lt)}},Ce;if(ke||Pe){for(Ce=4;Ce>=-4;Ce-=2)mt(Math.PI*Ce,"tan");for(Ce=4;Ce>=-4;Ce-=2)mt(Math.PI*(Ce+1),"tan")}if(ke||Ge){for(Ce=4;Ce>=-4;Ce-=2)mt(Math.PI*(Ce+1.5),"rad");for(Ce=4;Ce>=-4;Ce-=2)mt(Math.PI*(Ce+.5),"rad")}}if(oe||Je||ke){var Ie=Math.sqrt(ae.width*ae.width+ae.height*ae.height);if(lt={scale:re*U*2/Ie,rCenter:1-re,rotate:0},lt.textPosAngle=(G.startangle+G.stopangle)/2,lt.scale>=1)return lt;yt.push(lt)}(Je||Ge)&&(lt=Y(ae,U,B,ie,xe),lt.textPosAngle=(G.startangle+G.stopangle)/2,yt.push(lt)),(Je||Pe)&&(lt=Z(ae,U,B,ie,xe),lt.textPosAngle=(G.startangle+G.stopangle)/2,yt.push(lt));for(var Se=0,Be=0,rt=0;rt<yt.length;rt++){var ht=yt[rt].scale;if(Be<ht&&(Be=ht,Se=rt),!Je&&Be>=1)break}return yt[Se]}function H(ae,G){var Q=ae.startangle,U=ae.stopangle;return Q>G&&G>U||Q<G&&G<U}function Y(ae,G,Q,U,re){G=Math.max(0,G-2*D);var R=ae.width/ae.height,B=X(R,U,G,Q);return{scale:B*2/ae.height,rCenter:z(R,B/G),rotate:q(re)}}function Z(ae,G,Q,U,re){G=Math.max(0,G-2*D);var R=ae.height/ae.width,B=X(R,U,G,Q);return{scale:B*2/ae.width,rCenter:z(R,B/G),rotate:q(re+Math.PI/2)}}function z(ae,G){return Math.cos(G)-ae*G}function q(ae){return(180/Math.PI*ae+720)%180-90}function X(ae,G,Q,U){var re=ae+1/(2*Math.tan(G));return Q*Math.min(1/(Math.sqrt(re*re+.5)+re),U/(Math.sqrt(ae*ae+U/2)+ae))}function K(ae,G){return ae.v===G.vTotal&&!G.trace.hole?1:Math.min(1/(1+1/Math.sin(ae.halfangle)),ae.ring/2)}function ee(ae,G){var Q=G.pxmid[0],U=G.pxmid[1],re=ae.width/2,R=ae.height/2;return Q<0&&(re*=-1),U<0&&(R*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(R)*(re>0?1:-1)/2,y:R/(1+Q*Q/(U*U)),outside:!0}}function ne(ae){var G=Math.sqrt(ae.titleBox.width*ae.titleBox.width+ae.titleBox.height*ae.titleBox.height);return{x:ae.cx,y:ae.cy,scale:ae.trace.hole*ae.r*2/G,tx:0,ty:-ae.titleBox.height/2+ae.trace.title.font.size}}function le(ae,G){var Q=1,U=1,re,R=ae.trace,B={x:ae.cx,y:ae.cy},oe={tx:0,ty:0};oe.ty+=R.title.font.size,re=de(R),R.title.position.indexOf("top")!==-1?(B.y-=(1+re)*ae.r,oe.ty-=ae.titleBox.height):R.title.position.indexOf("bottom")!==-1&&(B.y+=(1+re)*ae.r);var ie=W(ae.r,ae.trace.aspectratio),xe=G.w*(R.domain.x[1]-R.domain.x[0])/2;return R.title.position.indexOf("left")!==-1?(xe=xe+ie,B.x-=(1+re)*ie,oe.tx+=ae.titleBox.width/2):R.title.position.indexOf("center")!==-1?xe*=2:R.title.position.indexOf("right")!==-1&&(xe=xe+ie,B.x+=(1+re)*ie,oe.tx-=ae.titleBox.width/2),Q=xe/ae.titleBox.width,U=ce(ae,G)/ae.titleBox.height,{x:B.x,y:B.y,scale:Math.min(Q,U),tx:oe.tx,ty:oe.ty}}function W(ae,G){return ae/(G===void 0?1:G)}function ce(ae,G){var Q=ae.trace,U=G.h*(Q.domain.y[1]-Q.domain.y[0]);return Math.min(ae.titleBox.height,U/2)}function de(ae){var G=ae.pull;if(!G)return 0;var Q;if(m.isArrayOrTypedArray(G))for(G=0,Q=0;Q<ae.pull.length;Q++)ae.pull[Q]>G&&(G=ae.pull[Q]);return G}function ve(ae,G){var Q,U,re,R,B,oe,ie,xe,_e,ke,Pe,Ge,Je;function yt(Ie,Se){return Ie.pxmid[1]-Se.pxmid[1]}function lt(Ie,Se){return Se.pxmid[1]-Ie.pxmid[1]}function mt(Ie,Se){Se||(Se={});var Be=Se.labelExtraY+(U?Se.yLabelMax:Se.yLabelMin),rt=U?Ie.yLabelMin:Ie.yLabelMax,ht=U?Ie.yLabelMax:Ie.yLabelMin,Lt=Ie.cyFinal+B(Ie.px0[1],Ie.px1[1]),Ct=Be-rt,zt,Bt,Ft,nr,_t,rr;if(Ct*ie>0&&(Ie.labelExtraY=Ct),!!m.isArrayOrTypedArray(G.pull))for(Bt=0;Bt<ke.length;Bt++)Ft=ke[Bt],!(Ft===Ie||(M.castOption(G.pull,Ie.pts)||0)>=(M.castOption(G.pull,Ft.pts)||0))&&((Ie.pxmid[1]-Ft.pxmid[1])*ie>0?(nr=Ft.cyFinal+B(Ft.px0[1],Ft.px1[1]),Ct=nr-rt-Ie.labelExtraY,Ct*ie>0&&(Ie.labelExtraY+=Ct)):(ht+Ie.labelExtraY-Lt)*ie>0&&(zt=3*oe*Math.abs(Bt-ke.indexOf(Ie)),_t=Ft.cxFinal+R(Ft.px0[0],Ft.px1[0]),rr=_t+zt-(Ie.cxFinal+Ie.pxmid[0])-Ie.labelExtraX,rr*oe>0&&(Ie.labelExtraX+=rr)))}for(U=0;U<2;U++)for(re=U?yt:lt,B=U?Math.max:Math.min,ie=U?1:-1,Q=0;Q<2;Q++){for(R=Q?Math.max:Math.min,oe=Q?1:-1,xe=ae[U][Q],xe.sort(re),_e=ae[1-U][Q],ke=_e.concat(xe),Ge=[],Pe=0;Pe<xe.length;Pe++)xe[Pe].yLabelMid!==void 0&&Ge.push(xe[Pe]);for(Je=!1,Pe=0;U&&Pe<_e.length;Pe++)if(_e[Pe].yLabelMid!==void 0){Je=_e[Pe];break}for(Pe=0;Pe<Ge.length;Pe++){var Ce=Pe&&Ge[Pe-1];Je&&!Pe&&(Ce=Je),mt(Ge[Pe],Ce)}}}function pe(ae,G){for(var Q=[],U=0;U<ae.length;U++){var re=ae[U][0],R=re.trace,B=R.domain,oe=G.w*(B.x[1]-B.x[0]),ie=G.h*(B.y[1]-B.y[0]);R.title.text&&R.title.position!=="middle center"&&(ie-=ce(re,G));var xe=oe/2,_e=ie/2;R.type==="funnelarea"&&!R.scalegroup&&(_e/=R.aspectratio),re.r=Math.min(xe,_e)/(1+de(R)),re.cx=G.l+G.w*(R.domain.x[1]+R.domain.x[0])/2,re.cy=G.t+G.h*(1-R.domain.y[0])-ie/2,R.title.text&&R.title.position.indexOf("bottom")!==-1&&(re.cy-=ce(re,G)),R.scalegroup&&Q.indexOf(R.scalegroup)===-1&&Q.push(R.scalegroup)}be(ae,Q)}function be(ae,G){for(var Q,U,re,R=0;R<G.length;R++){var B=1/0,oe=G[R];for(U=0;U<ae.length;U++)if(Q=ae[U][0],re=Q.trace,re.scalegroup===oe){var ie;if(re.type==="pie")ie=Q.r*Q.r;else if(re.type==="funnelarea"){var xe,_e;re.aspectratio>1?(xe=Q.r,_e=xe/re.aspectratio):(_e=Q.r,xe=_e*re.aspectratio),xe*=(1+re.baseratio)/2,ie=xe*_e}B=Math.min(B,ie/Q.vTotal)}for(U=0;U<ae.length;U++)if(Q=ae[U][0],re=Q.trace,re.scalegroup===oe){var ke=B*Q.vTotal;re.type==="funnelarea"&&(ke/=(1+re.baseratio)/2,ke/=re.aspectratio),Q.r=Math.sqrt(ke)}}}function Le(ae){var G=ae[0],Q=G.r,U=G.trace,re=M.getRotationAngle(U.rotation),R=2*Math.PI/G.vTotal,B="px0",oe="px1",ie,xe,_e;if(U.direction==="counterclockwise"){for(ie=0;ie<ae.length&&ae[ie].hidden;ie++);if(ie===ae.length)return;re+=R*ae[ie].v,R*=-1,B="px1",oe="px0"}for(_e=Ae(Q,re),ie=0;ie<ae.length;ie++)xe=ae[ie],!xe.hidden&&(xe[B]=_e,xe.startangle=re,re+=R*xe.v/2,xe.pxmid=Ae(Q,re),xe.midangle=re,re+=R*xe.v/2,_e=Ae(Q,re),xe.stopangle=re,xe[oe]=_e,xe.largeArc=xe.v>G.vTotal/2?1:0,xe.halfangle=Math.PI*Math.min(xe.v/G.vTotal,.5),xe.ring=1-U.hole,xe.rInscribed=K(xe,G))}function Ae(ae,G){return[ae*Math.sin(G),-ae*Math.cos(G)]}function We(ae,G,Q){var U=ae._fullLayout,re=Q.trace,R=re.texttemplate,B=re.textinfo;if(!R&&B&&B!=="none"){var oe=B.split("+"),ie=function(Se){return oe.indexOf(Se)!==-1},xe=ie("label"),_e=ie("text"),ke=ie("value"),Pe=ie("percent"),Ge=U.separators,Je;if(Je=xe?[G.label]:[],_e){var yt=M.getFirstFilled(re.text,G.pts);C(yt)&&Je.push(yt)}ke&&Je.push(M.formatPieValue(G.v,Ge)),Pe&&Je.push(M.formatPiePercent(G.v/Q.vTotal,Ge)),G.text=Je.join("<br>")}function lt(Se){return{label:Se.label,value:Se.v,valueLabel:M.formatPieValue(Se.v,U.separators),percent:Se.v/Q.vTotal,percentLabel:M.formatPiePercent(Se.v/Q.vTotal,U.separators),color:Se.color,text:Se.text,customdata:m.castOption(re,Se.i,"customdata")}}if(R){var mt=m.castOption(re,G.i,"texttemplate");if(!mt)G.text="";else{var Ce=lt(G),Ie=M.getFirstFilled(re.text,G.pts);(C(Ie)||Ie==="")&&(Ce.text=Ie),G.text=m.texttemplateString(mt,Ce,ae._fullLayout._d3locale,Ce,re._meta||{})}}}function te(ae,G){var Q=ae.rotate*Math.PI/180,U=Math.cos(Q),re=Math.sin(Q),R=(G.left+G.right)/2,B=(G.top+G.bottom)/2;ae.textX=R*U-B*re,ae.textY=R*re+B*U,ae.noCenter=!0}$.exports={plot:j,formatSliceLabel:We,transformInsideText:J,determineInsideTextFont:F,positionTitleOutside:le,prerenderTitles:P,layoutAreas:pe,attachFxHandlers:S,computeTransform:te}}}),Yk=i({"src/traces/pie/style.js"(V,$){var h=f(),c=ru(),u=rh().resizeText;$.exports=function(v){var m=v._fullLayout._pielayer.selectAll(".trace");u(v,m,"pie"),m.each(function(g){var w=g[0],o=w.trace,T=h.select(this);T.style({opacity:o.opacity}),T.selectAll("path.surface").each(function(y){h.select(this).call(c,y,o,v)})})}}}),Gk=i({"src/traces/pie/base_plot.js"(V){var $=xi();V.name="pie",V.plot=function(h,c,u,p){$.plotBasePlot(V.name,h,c,u,p)},V.clean=function(h,c,u,p){$.cleanBasePlot(V.name,h,c,u,p)}}}),Xk=i({"src/traces/pie/index.js"(V,$){$.exports={attributes:s1(),supplyDefaults:qk().supplyDefaults,supplyLayoutDefaults:Uk(),layoutAttributes:o1(),calc:l1().calc,crossTraceCalc:l1().crossTraceCalc,plot:$k().plot,style:Yk(),styleOne:ru(),moduleType:"trace",name:"pie",basePlotModule:Gk(),categories:["pie-like","pie","showLegend"],meta:{}}}}),Zk=i({"lib/pie.js"(V,$){$.exports=Xk()}}),as=i({"node_modules/object-assign/index.js"(V,$){var h=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;function p(m){if(m==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}function v(){try{if(!Object.assign)return!1;var m=new String("abc");if(m[5]="de",Object.getOwnPropertyNames(m)[0]==="5")return!1;for(var g={},w=0;w<10;w++)g["_"+String.fromCharCode(w)]=w;var o=Object.getOwnPropertyNames(g).map(function(y){return g[y]});if(o.join("")!=="0123456789")return!1;var T={};return"abcdefghijklmnopqrst".split("").forEach(function(y){T[y]=y}),Object.keys(Object.assign({},T)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}$.exports=v()?Object.assign:function(m,g){for(var w,o=p(m),T,y=1;y<arguments.length;y++){w=Object(arguments[y]);for(var k in w)c.call(w,k)&&(o[k]=w[k]);if(h){T=h(w);for(var D=0;D<T.length;D++)u.call(w,T[D])&&(o[T[D]]=w[T[D]])}}return o}}}),ss=i({"node_modules/world-calendars/dist/main.js"(V,$){var h=as();function c(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}h(c.prototype,{instance:function(w,o){w=(w||"gregorian").toLowerCase(),o=o||"";var T=this._localCals[w+"-"+o];if(!T&&this.calendars[w]&&(T=new this.calendars[w](o),this._localCals[w+"-"+o]=T),!T)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,w);return T},newDate:function(w,o,T,y,k){return y=(w!=null&&w.year?w.calendar():typeof y=="string"?this.instance(y,k):y)||this.instance(),y.newDate(w,o,T)},substituteDigits:function(w){return function(o){return(o+"").replace(/[0-9]/g,function(T){return w[T]})}},substituteChineseDigits:function(w,o){return function(T){for(var y="",k=0;T>0;){var D=T%10;y=(D===0?"":w[D]+o[k])+y,k++,T=Math.floor(T/10)}return y.indexOf(w[1]+o[1])===0&&(y=y.substr(1)),y||w[0]}}});function u(w,o,T,y){if(this._calendar=w,this._year=o,this._month=T,this._day=y,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function p(w,o){return w=""+w,"000000".substring(0,o-w.length)+w}h(u.prototype,{newDate:function(w,o,T){return this._calendar.newDate(w??this,o,T)},year:function(w){return arguments.length===0?this._year:this.set(w,"y")},month:function(w){return arguments.length===0?this._month:this.set(w,"m")},day:function(w){return arguments.length===0?this._day:this.set(w,"d")},date:function(w,o,T){if(!this._calendar.isValid(w,o,T))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=w,this._month=o,this._day=T,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(w,o){return this._calendar.add(this,w,o)},set:function(w,o){return this._calendar.set(this,w,o)},compareTo:function(w){if(this._calendar.name!==w._calendar.name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,w._calendar.local.name);var o=this._year!==w._year?this._year-w._year:this._month!==w._month?this.monthOfYear()-w.monthOfYear():this._day-w._day;return o===0?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(w){return this._calendar.fromJD(w)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(w){return this._calendar.fromJSDate(w)},toString:function(){return(this.year()<0?"-":"")+p(Math.abs(this.year()),4)+"-"+p(this.month(),2)+"-"+p(this.day(),2)}});function v(){this.shortYearCutoff="+10"}h(v.prototype,{_validateLevel:0,newDate:function(w,o,T){return w==null?this.today():(w.year&&(this._validate(w,o,T,g.local.invalidDate||g.regionalOptions[""].invalidDate),T=w.day(),o=w.month(),w=w.year()),new u(this,w,o,T))},today:function(){return this.fromJSDate(new Date)},epoch:function(w){var o=this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return o.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(w){var o=this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return(o.year()<0?"-":"")+p(Math.abs(o.year()),4)},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),12},monthOfYear:function(w,o){var T=this._validate(w,o,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return(T.month()+this.monthsInYear(T)-this.firstMonth)%this.monthsInYear(T)+this.minMonth},fromMonthOfYear:function(w,o){var T=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(w)+this.minMonth;return this._validate(w,T,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth),T},daysInYear:function(w){var o=this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(w,o,T){var y=this._validate(w,o,T,g.local.invalidDate||g.regionalOptions[""].invalidDate);return y.toJD()-this.newDate(y.year(),this.fromMonthOfYear(y.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(w,o,T){var y=this._validate(w,o,T,g.local.invalidDate||g.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(y))+2)%this.daysInWeek()},extraInfo:function(w,o,T){return this._validate(w,o,T,g.local.invalidDate||g.regionalOptions[""].invalidDate),{}},add:function(w,o,T){return this._validate(w,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate),this._correctAdd(w,this._add(w,o,T),o,T)},_add:function(w,o,T){if(this._validateLevel++,T==="d"||T==="w"){var y=w.toJD()+o*(T==="w"?this.daysInWeek():1),k=w.calendar().fromJD(y);return this._validateLevel--,[k.year(),k.month(),k.day()]}try{var D=w.year()+(T==="y"?o:0),M=w.monthOfYear()+(T==="m"?o:0),k=w.day(),A=function(b){for(;M<b.minMonth;)D--,M+=b.monthsInYear(D);for(var S=b.monthsInYear(D);M>S-1+b.minMonth;)D++,M-=S,S=b.monthsInYear(D)};T==="y"?(w.month()!==this.fromMonthOfYear(D,M)&&(M=this.newDate(D,w.month(),this.minDay).monthOfYear()),M=Math.min(M,this.monthsInYear(D)),k=Math.min(k,this.daysInMonth(D,this.fromMonthOfYear(D,M)))):T==="m"&&(A(this),k=Math.min(k,this.daysInMonth(D,this.fromMonthOfYear(D,M))));var C=[D,this.fromMonthOfYear(D,M),k];return this._validateLevel--,C}catch(j){throw this._validateLevel--,j}},_correctAdd:function(w,o,T,y){if(!this.hasYearZero&&(y==="y"||y==="m")&&(o[0]===0||w.year()>0!=o[0]>0)){var k={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[y],D=T<0?-1:1;o=this._add(w,T*k[0]+D*k[1],k[2])}return w.date(o[0],o[1],o[2])},set:function(w,o,T){this._validate(w,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);var y=T==="y"?o:w.year(),k=T==="m"?o:w.month(),D=T==="d"?o:w.day();return(T==="y"||T==="m")&&(D=Math.min(D,this.daysInMonth(y,k))),w.date(y,k,D)},isValid:function(w,o,T){this._validateLevel++;var y=this.hasYearZero||w!==0;if(y){var k=this.newDate(w,o,this.minDay);y=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(k)&&T>=this.minDay&&T-this.minDay<this.daysInMonth(k)}return this._validateLevel--,y},toJSDate:function(w,o,T){var y=this._validate(w,o,T,g.local.invalidDate||g.regionalOptions[""].invalidDate);return g.instance().fromJD(this.toJD(y)).toJSDate()},fromJSDate:function(w){return this.fromJD(g.instance().fromJSDate(w).toJD())},_validate:function(w,o,T,y){if(w.year){if(this._validateLevel===0&&this.name!==w.calendar().name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,w.calendar().local.name);return w}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(w,o,T))throw y.replace(/\{0\}/,this.local.name);var k=this.newDate(w,o,T);return this._validateLevel--,k}catch(D){throw this._validateLevel--,D}}});function m(w){this.local=this.regionalOptions[w]||this.regionalOptions[""]}m.prototype=new v,h(m.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var o=this._validate(T,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),T=o.year()+(o.year()<0?1:0);return T%4===0&&(T%100!==0||T%400===0)},weekOfYear:function(w,o,T){var y=this.newDate(w,o,T);return y.add(4-(y.dayOfWeek()||7),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(w,o){var T=this._validate(w,o,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return this.daysPerMonth[T.month()-1]+(T.month()===2&&this.leapYear(T.year())?1:0)},weekDay:function(w,o,T){return(this.dayOfWeek(w,o,T)||7)<6},toJD:function(w,o,T){var y=this._validate(w,o,T,g.local.invalidDate||g.regionalOptions[""].invalidDate);w=y.year(),o=y.month(),T=y.day(),w<0&&w++,o<3&&(o+=12,w--);var k=Math.floor(w/100),D=2-k+Math.floor(k/4);return Math.floor(365.25*(w+4716))+Math.floor(30.6001*(o+1))+T+D-1524.5},fromJD:function(w){var o=Math.floor(w+.5),T=Math.floor((o-186721625e-2)/36524.25);T=o+1+T-Math.floor(T/4);var y=T+1524,k=Math.floor((y-122.1)/365.25),D=Math.floor(365.25*k),M=Math.floor((y-D)/30.6001),A=y-D-Math.floor(M*30.6001),C=M-(M>13.5?13:1),j=k-(C>2.5?4716:4715);return j<=0&&j--,this.newDate(j,C,A)},toJSDate:function(w,o,T){var y=this._validate(w,o,T,g.local.invalidDate||g.regionalOptions[""].invalidDate),k=new Date(y.year(),y.month()-1,y.day());return k.setHours(0),k.setMinutes(0),k.setSeconds(0),k.setMilliseconds(0),k.setHours(k.getHours()>12?k.getHours()+2:0),k},fromJSDate:function(w){return this.newDate(w.getFullYear(),w.getMonth()+1,w.getDate())}});var g=$.exports=new c;g.cdate=u,g.baseCalendar=v,g.calendars.gregorian=m}}),Kk=i({"node_modules/world-calendars/dist/plus.js"(){var V=as(),$=ss();V($.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),$.local=$.regionalOptions[""],V($.cdate.prototype,{formatDate:function(h,c){return typeof h!="string"&&(c=h,h=""),this._calendar.formatDate(h||"",this,c)}}),V($.baseCalendar.prototype,{UNIX_EPOCH:$.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:$.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(h,c,u){if(typeof h!="string"&&(u=c,c=h,h=""),!c)return"";if(c.calendar()!==this)throw $.local.invalidFormat||$.regionalOptions[""].invalidFormat;h=h||this.local.dateFormat,u=u||{};var p=u.dayNamesShort||this.local.dayNamesShort,v=u.dayNames||this.local.dayNames,m=u.monthNumbers||this.local.monthNumbers,g=u.monthNamesShort||this.local.monthNamesShort,w=u.monthNames||this.local.monthNames;u.calculateWeek||this.local.calculateWeek;for(var o=function(L,F){for(var P=1;S+P<h.length&&h.charAt(S+P)===L;)P++;return S+=P-1,Math.floor(P/(F||1))>1},T=function(L,F,P,J){var H=""+F;if(o(L,J))for(;H.length<P;)H="0"+H;return H},y=function(L,F,P,J){return o(L)?J[F]:P[F]},k=this,D=function(L){return typeof m=="function"?m.call(k,L,o("m")):C(T("m",L.month(),2))},M=function(L,F){return F?typeof w=="function"?w.call(k,L):w[L.month()-k.minMonth]:typeof g=="function"?g.call(k,L):g[L.month()-k.minMonth]},A=this.local.digits,C=function(L){return u.localNumbers&&A?A(L):L},j="",b=!1,S=0;S<h.length;S++)if(b)h.charAt(S)==="'"&&!o("'")?b=!1:j+=h.charAt(S);else switch(h.charAt(S)){case"d":j+=C(T("d",c.day(),2));break;case"D":j+=y("D",c.dayOfWeek(),p,v);break;case"o":j+=T("o",c.dayOfYear(),3);break;case"w":j+=T("w",c.weekOfYear(),2);break;case"m":j+=D(c);break;case"M":j+=M(c,o("M"));break;case"y":j+=o("y",2)?c.year():(c.year()%100<10?"0":"")+c.year()%100;break;case"Y":o("Y",2),j+=c.formatYear();break;case"J":j+=c.toJD();break;case"@":j+=(c.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":j+=(c.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":o("'")?j+="'":b=!0;break;default:j+=h.charAt(S)}return j},parseDate:function(h,c,u){if(c==null)throw $.local.invalidArguments||$.regionalOptions[""].invalidArguments;if(c=typeof c=="object"?c.toString():c+"",c==="")return null;h=h||this.local.dateFormat,u=u||{};var p=u.shortYearCutoff||this.shortYearCutoff;p=typeof p!="string"?p:this.today().year()%100+parseInt(p,10);for(var v=u.dayNamesShort||this.local.dayNamesShort,m=u.dayNames||this.local.dayNames,g=u.parseMonth||this.local.parseMonth,w=u.monthNumbers||this.local.monthNumbers,o=u.monthNamesShort||this.local.monthNamesShort,T=u.monthNames||this.local.monthNames,y=-1,k=-1,D=-1,M=-1,A=-1,C=!1,j=!1,b=function(X,K){for(var ee=1;Z+ee<h.length&&h.charAt(Z+ee)===X;)ee++;return Z+=ee-1,Math.floor(ee/(K||1))>1},S=function(X,K){var ee=b(X,K),ne=[2,3,ee?4:2,ee?4:2,10,11,20]["oyYJ@!".indexOf(X)+1],le=new RegExp("^-?\\d{1,"+ne+"}"),W=c.substring(Y).match(le);if(!W)throw($.local.missingNumberAt||$.regionalOptions[""].missingNumberAt).replace(/\{0\}/,Y);return Y+=W[0].length,parseInt(W[0],10)},L=this,F=function(){if(typeof w=="function"){b("m");var X=w.call(L,c.substring(Y));return Y+=X.length,X}return S("m")},P=function(X,K,ee,ne){for(var le=b(X,ne)?ee:K,W=0;W<le.length;W++)if(c.substr(Y,le[W].length).toLowerCase()===le[W].toLowerCase())return Y+=le[W].length,W+L.minMonth;throw($.local.unknownNameAt||$.regionalOptions[""].unknownNameAt).replace(/\{0\}/,Y)},J=function(){if(typeof T=="function"){var X=b("M")?T.call(L,c.substring(Y)):o.call(L,c.substring(Y));return Y+=X.length,X}return P("M",o,T)},H=function(){if(c.charAt(Y)!==h.charAt(Z))throw($.local.unexpectedLiteralAt||$.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,Y);Y++},Y=0,Z=0;Z<h.length;Z++)if(j)h.charAt(Z)==="'"&&!b("'")?j=!1:H();else switch(h.charAt(Z)){case"d":M=S("d");break;case"D":P("D",v,m);break;case"o":A=S("o");break;case"w":S("w");break;case"m":D=F();break;case"M":D=J();break;case"y":var z=Z;C=!b("y",2),Z=z,k=S("y",2);break;case"Y":k=S("Y",2);break;case"J":y=S("J")+.5,c.charAt(Y)==="."&&(Y++,S("J"));break;case"@":y=S("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":y=S("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":Y=c.length;break;case"'":b("'")?H():j=!0;break;default:H()}if(Y<c.length)throw $.local.unexpectedText||$.regionalOptions[""].unexpectedText;if(k===-1?k=this.today().year():k<100&&C&&(k+=p===-1?1900:this.today().year()-this.today().year()%100-(k<=p?0:100)),typeof D=="string"&&(D=g.call(this,k,D)),A>-1){D=1,M=A;for(var q=this.daysInMonth(k,D);M>q;q=this.daysInMonth(k,D))D++,M-=q}return y>-1?this.fromJD(y):this.newDate(k,D,M)},determineDate:function(h,c,u,p,v){u&&typeof u!="object"&&(v=p,p=u,u=null),typeof p!="string"&&(v=p,p="");var m=this,g=function(w){try{return m.parseDate(p,w,v)}catch{}w=w.toLowerCase();for(var o=(w.match(/^c/)&&u?u.newDate():null)||m.today(),T=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,y=T.exec(w);y;)o.add(parseInt(y[1],10),y[2]||"d"),y=T.exec(w);return o};return c=c?c.newDate():null,h=h==null?c:typeof h=="string"?g(h):typeof h=="number"?isNaN(h)||h===1/0||h===-1/0?c:m.today().add(h,"d"):m.newDate(h),h}})}}),Jk=i({"node_modules/world-calendars/dist/calendars/chinese.js"(){var V=ss(),$=as(),h=V.instance();function c(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}c.prototype=new V.baseCalendar,$(c.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(y,k){if(typeof y=="string"){var D=y.match(p);return D?D[0]:""}var M=this._validateYear(y),A=y.month(),C=""+this.toChineseMonth(M,A);return k&&C.length<2&&(C="0"+C),this.isIntercalaryMonth(M,A)&&(C+="i"),C},monthNames:function(y){if(typeof y=="string"){var k=y.match(v);return k?k[0]:""}var D=this._validateYear(y),M=y.month(),A=this.toChineseMonth(D,M),C=["","","","","","","","","","","",""][A-1];return this.isIntercalaryMonth(D,M)&&(C=""+C),C},monthNamesShort:function(y){if(typeof y=="string"){var k=y.match(m);return k?k[0]:""}var D=this._validateYear(y),M=y.month(),A=this.toChineseMonth(D,M),C=["","","","","","","","","","","",""][A-1];return this.isIntercalaryMonth(D,M)&&(C=""+C),C},parseMonth:function(y,k){y=this._validateYear(y);var D=parseInt(k),M;if(isNaN(D))k[0]===""&&(M=!0,k=k.substring(1)),k[k.length-1]===""&&(k=k.substring(0,k.length-1)),D=1+["","","","","","","","","","","",""].indexOf(k);else{var A=k[k.length-1];M=A==="i"||A==="I"}var C=this.toMonthIndex(y,D,M);return C},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(y,k){if(y.year&&(y=y.year()),typeof y!="number"||y<1888||y>2111)throw k.replace(/\{0\}/,this.local.name);return y},toMonthIndex:function(y,k,D){var M=this.intercalaryMonth(y),A=D&&k!==M;if(A||k<1||k>12)throw V.local.invalidMonth.replace(/\{0\}/,this.local.name);var C;return M?!D&&k<=M?C=k-1:C=k:C=k-1,C},toChineseMonth:function(y,k){y.year&&(y=y.year(),k=y.month());var D=this.intercalaryMonth(y),M=D?12:11;if(k<0||k>M)throw V.local.invalidMonth.replace(/\{0\}/,this.local.name);var A;return D?k<D?A=k+1:A=k:A=k+1,A},intercalaryMonth:function(y){y=this._validateYear(y);var k=g[y-g[0]],D=k>>13;return D},isIntercalaryMonth:function(y,k){y.year&&(y=y.year(),k=y.month());var D=this.intercalaryMonth(y);return!!D&&D===k},leapYear:function(y){return this.intercalaryMonth(y)!==0},weekOfYear:function(y,k,D){var M=this._validateYear(y,V.local.invalidyear),A=w[M-w[0]],C=A>>9&4095,j=A>>5&15,b=A&31,S;S=h.newDate(C,j,b),S.add(4-(S.dayOfWeek()||7),"d");var L=this.toJD(y,k,D)-S.toJD();return 1+Math.floor(L/7)},monthsInYear:function(y){return this.leapYear(y)?13:12},daysInMonth:function(y,k){y.year&&(k=y.month(),y=y.year()),y=this._validateYear(y);var D=g[y-g[0]],M=D>>13,A=M?12:11;if(k>A)throw V.local.invalidMonth.replace(/\{0\}/,this.local.name);var C=D&1<<12-k?30:29;return C},weekDay:function(y,k,D){return(this.dayOfWeek(y,k,D)||7)<6},toJD:function(y,k,D){var M=this._validate(y,C,D,V.local.invalidDate);y=this._validateYear(M.year()),k=M.month(),D=M.day();var A=this.isIntercalaryMonth(y,k),C=this.toChineseMonth(y,k),j=T(y,C,D,A);return h.toJD(j.year,j.month,j.day)},fromJD:function(y){var k=h.fromJD(y),D=o(k.year(),k.month(),k.day()),M=this.toMonthIndex(D.year,D.month,D.isIntercalary);return this.newDate(D.year,M,D.day)},fromString:function(y){var k=y.match(u),D=this._validateYear(+k[1]),M=+k[2],A=!!k[3],C=this.toMonthIndex(D,M,A),j=+k[4];return this.newDate(D,C,j)},add:function(y,k,D){var M=y.year(),A=y.month(),C=this.isIntercalaryMonth(M,A),j=this.toChineseMonth(M,A),b=Object.getPrototypeOf(c.prototype).add.call(this,y,k,D);if(D==="y"){var S=b.year(),L=b.month(),F=this.isIntercalaryMonth(S,j),P=C&&F?this.toMonthIndex(S,j,!0):this.toMonthIndex(S,j,!1);P!==L&&b.month(P)}return b}});var u=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,p=/^\d?\d[iI]?/m,v=/^??[]?/m,m=/^??[]?/m;V.calendars.chinese=c;var g=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],w=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function o(y,k,D,M){var A,C;if(typeof y=="object")A=y,C=k||{};else{var j=typeof y=="number"&&y>=1888&&y<=2111;if(!j)throw new Error("Solar year outside range 1888-2111");var b=typeof k=="number"&&k>=1&&k<=12;if(!b)throw new Error("Solar month outside range 1 - 12");var S=typeof D=="number"&&D>=1&&D<=31;if(!S)throw new Error("Solar day outside range 1 - 31");A={year:y,month:k,day:D},C={}}var L=w[A.year-w[0]],F=A.year<<9|A.month<<5|A.day;C.year=F>=L?A.year:A.year-1,L=w[C.year-w[0]];var P=L>>9&4095,J=L>>5&15,H=L&31,Y,Z=new Date(P,J-1,H),z=new Date(A.year,A.month-1,A.day);Y=Math.round((z-Z)/(24*3600*1e3));var q=g[C.year-g[0]],X;for(X=0;X<13;X++){var K=q&1<<12-X?30:29;if(Y<K)break;Y-=K}var ee=q>>13;return!ee||X<ee?(C.isIntercalary=!1,C.month=1+X):X===ee?(C.isIntercalary=!0,C.month=X):(C.isIntercalary=!1,C.month=X),C.day=1+Y,C}function T(y,k,D,M,A){var C,j;if(typeof y=="object")j=y,C=k||{};else{var b=typeof y=="number"&&y>=1888&&y<=2111;if(!b)throw new Error("Lunar year outside range 1888-2111");var S=typeof k=="number"&&k>=1&&k<=12;if(!S)throw new Error("Lunar month outside range 1 - 12");var L=typeof D=="number"&&D>=1&&D<=30;if(!L)throw new Error("Lunar day outside range 1 - 30");var F;typeof M=="object"?(F=!1,C=M):(F=!!M,C={}),j={year:y,month:k,day:D,isIntercalary:F}}var P;P=j.day-1;var J=g[j.year-g[0]],H=J>>13,Y;H&&(j.month>H||j.isIntercalary)?Y=j.month:Y=j.month-1;for(var Z=0;Z<Y;Z++){var z=J&1<<12-Z?30:29;P+=z}var q=w[j.year-w[0]],X=q>>9&4095,K=q>>5&15,ee=q&31,ne=new Date(X,K-1,ee+P);return C.year=ne.getFullYear(),C.month=1+ne.getMonth(),C.day=ne.getDate(),C}}}),Qk=i({"node_modules/world-calendars/dist/calendars/coptic.js"(){var V=ss(),$=as();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var u=this._validate(p,this.minMonth,this.minDay,V.local.invalidYear),p=u.year()+(u.year()<0?1:0);return p%4===3||p%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,V.local.invalidYear||V.regionalOptions[""].invalidYear),13},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(c,u){var p=this._validate(c,u,this.minDay,V.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(c,u,p){return(this.dayOfWeek(c,u,p)||7)<6},toJD:function(c,u,p){var v=this._validate(c,u,p,V.local.invalidDate);return c=v.year(),c<0&&c++,v.day()+(v.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var u=Math.floor(c)+.5-this.jdEpoch,p=Math.floor((u-Math.floor((u+366)/1461))/365)+1;p<=0&&p--,u=Math.floor(c)+.5-this.newDate(p,1,1).toJD();var v=Math.floor(u/30)+1,m=u-(v-1)*30+1;return this.newDate(p,v,m)}}),V.calendars.coptic=h}}),eM=i({"node_modules/world-calendars/dist/calendars/discworld.js"(){var V=ss(),$=as();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(u){return this._validate(u,this.minMonth,this.minDay,V.local.invalidYear),!1},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,V.local.invalidYear),13},daysInYear:function(u){return this._validate(u,this.minMonth,this.minDay,V.local.invalidYear),400},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(-m.dayOfWeek(),"d"),Math.floor((m.dayOfYear()-1)/8)+1},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,V.local.invalidMonth);return this.daysPerMonth[v.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(u,p,v){var m=this._validate(u,p,v,V.local.invalidDate);return(m.day()+1)%8},weekDay:function(u,p,v){var m=this.dayOfWeek(u,p,v);return m>=2&&m<=6},extraInfo:function(u,p,v){var m=this._validate(u,p,v,V.local.invalidDate);return{century:c[Math.floor((m.year()-1)/100)+1]||""}},toJD:function(u,p,v){var m=this._validate(u,p,v,V.local.invalidDate);return u=m.year()+(m.year()<0?1:0),p=m.month(),v=m.day(),v+(p>1?16:0)+(p>2?(p-2)*32:0)+(u-1)*400+this.jdEpoch-1},fromJD:function(u){u=Math.floor(u+.5)-Math.floor(this.jdEpoch)-1;var p=Math.floor(u/400)+1;u-=(p-1)*400,u+=u>15?16:0;var v=Math.floor(u/32)+1,m=u-(v-1)*32+1;return this.newDate(p<=0?p-1:p,v,m)}});var c={20:"Fruitbat",21:"Anchovy"};V.calendars.discworld=h}}),tM=i({"node_modules/world-calendars/dist/calendars/ethiopian.js"(){var V=ss(),$=as();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var u=this._validate(p,this.minMonth,this.minDay,V.local.invalidYear),p=u.year()+(u.year()<0?1:0);return p%4===3||p%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,V.local.invalidYear||V.regionalOptions[""].invalidYear),13},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(c,u){var p=this._validate(c,u,this.minDay,V.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(c,u,p){return(this.dayOfWeek(c,u,p)||7)<6},toJD:function(c,u,p){var v=this._validate(c,u,p,V.local.invalidDate);return c=v.year(),c<0&&c++,v.day()+(v.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var u=Math.floor(c)+.5-this.jdEpoch,p=Math.floor((u-Math.floor((u+366)/1461))/365)+1;p<=0&&p--,u=Math.floor(c)+.5-this.newDate(p,1,1).toJD();var v=Math.floor(u/30)+1,m=u-(v-1)*30+1;return this.newDate(p,v,m)}}),V.calendars.ethiopian=h}}),rM=i({"node_modules/world-calendars/dist/calendars/hebrew.js"(){var V=ss(),$=as();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,V.local.invalidYear);return this._leapYear(p.year())},_leapYear:function(u){return u=u<0?u+1:u,c(u*7+1,19)<7},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,V.local.invalidYear),this._leapYear(u.year?u.year():u)?13:12},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(-m.dayOfWeek(),"d"),Math.floor((m.dayOfYear()-1)/7)+1},daysInYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,V.local.invalidYear);return u=p.year(),this.toJD(u===-1?1:u+1,7,1)-this.toJD(u,7,1)},daysInMonth:function(u,p){return u.year&&(p=u.month(),u=u.year()),this._validate(u,p,this.minDay,V.local.invalidMonth),p===12&&this.leapYear(u)||p===8&&c(this.daysInYear(u),10)===5?30:p===9&&c(this.daysInYear(u),10)===3?29:this.daysPerMonth[p-1]},weekDay:function(u,p,v){return this.dayOfWeek(u,p,v)!==6},extraInfo:function(u,p,v){var m=this._validate(u,p,v,V.local.invalidDate);return{yearType:(this.leapYear(m)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(m)%10-3]}},toJD:function(u,p,v){var m=this._validate(u,p,v,V.local.invalidDate);u=m.year(),p=m.month(),v=m.day();var g=u<=0?u+1:u,w=this.jdEpoch+this._delay1(g)+this._delay2(g)+v+1;if(p<7){for(var o=7;o<=this.monthsInYear(u);o++)w+=this.daysInMonth(u,o);for(var o=1;o<p;o++)w+=this.daysInMonth(u,o)}else for(var o=7;o<p;o++)w+=this.daysInMonth(u,o);return w},_delay1:function(u){var p=Math.floor((235*u-234)/19),v=12084+13753*p,m=p*29+Math.floor(v/25920);return c(3*(m+1),7)<3&&m++,m},_delay2:function(u){var p=this._delay1(u-1),v=this._delay1(u),m=this._delay1(u+1);return m-v===356?2:v-p===382?1:0},fromJD:function(u){u=Math.floor(u)+.5;for(var p=Math.floor((u-this.jdEpoch)*98496/35975351)-1;u>=this.toJD(p===-1?1:p+1,7,1);)p++;for(var v=u<this.toJD(p,1,1)?7:1;u>this.toJD(p,v,this.daysInMonth(p,v));)v++;var m=u-this.toJD(p,v,1)+1;return this.newDate(p,v,m)}});function c(u,p){return u-p*Math.floor(u/p)}V.calendars.hebrew=h}}),nM=i({"node_modules/world-calendars/dist/calendars/islamic.js"(){var V=ss(),$=as();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(c){var u=this._validate(c,this.minMonth,this.minDay,V.local.invalidYear);return(u.year()*11+14)%30<11},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(c){return this.leapYear(c)?355:354},daysInMonth:function(c,u){var p=this._validate(c,u,this.minDay,V.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===12&&this.leapYear(p.year())?1:0)},weekDay:function(c,u,p){return this.dayOfWeek(c,u,p)!==5},toJD:function(c,u,p){var v=this._validate(c,u,p,V.local.invalidDate);return c=v.year(),u=v.month(),p=v.day(),c=c<=0?c+1:c,p+Math.ceil(29.5*(u-1))+(c-1)*354+Math.floor((3+11*c)/30)+this.jdEpoch-1},fromJD:function(c){c=Math.floor(c)+.5;var u=Math.floor((30*(c-this.jdEpoch)+10646)/10631);u=u<=0?u-1:u;var p=Math.min(12,Math.ceil((c-29-this.toJD(u,1,1))/29.5)+1),v=c-this.toJD(u,p,1)+1;return this.newDate(u,p,v)}}),V.calendars.islamic=h}}),iM=i({"node_modules/world-calendars/dist/calendars/julian.js"(){var V=ss(),$=as();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var u=this._validate(p,this.minMonth,this.minDay,V.local.invalidYear),p=u.year()<0?u.year()+1:u.year();return p%4===0},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(4-(v.dayOfWeek()||7),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(c,u){var p=this._validate(c,u,this.minDay,V.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===2&&this.leapYear(p.year())?1:0)},weekDay:function(c,u,p){return(this.dayOfWeek(c,u,p)||7)<6},toJD:function(c,u,p){var v=this._validate(c,u,p,V.local.invalidDate);return c=v.year(),u=v.month(),p=v.day(),c<0&&c++,u<=2&&(c--,u+=12),Math.floor(365.25*(c+4716))+Math.floor(30.6001*(u+1))+p-1524.5},fromJD:function(c){var u=Math.floor(c+.5),p=u+1524,v=Math.floor((p-122.1)/365.25),m=Math.floor(365.25*v),g=Math.floor((p-m)/30.6001),w=g-Math.floor(g<14?1:13),o=v-Math.floor(w>2?4716:4715),T=p-m-Math.floor(30.6001*g);return o<=0&&o--,this.newDate(o,w,T)}}),V.calendars.julian=h}}),aM=i({"node_modules/world-calendars/dist/calendars/mayan.js"(){var V=ss(),$=as();function h(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(p){return this._validate(p,this.minMonth,this.minDay,V.local.invalidYear),!1},formatYear:function(p){var v=this._validate(p,this.minMonth,this.minDay,V.local.invalidYear);p=v.year();var m=Math.floor(p/400);p=p%400,p+=p<0?400:0;var g=Math.floor(p/20);return m+"."+g+"."+p%20},forYear:function(p){if(p=p.split("."),p.length<3)throw"Invalid Mayan year";for(var v=0,m=0;m<p.length;m++){var g=parseInt(p[m],10);if(Math.abs(g)>19||m>0&&g<0)throw"Invalid Mayan year";v=v*20+g}return v},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,V.local.invalidYear),18},weekOfYear:function(p,v,m){return this._validate(p,v,m,V.local.invalidDate),0},daysInYear:function(p){return this._validate(p,this.minMonth,this.minDay,V.local.invalidYear),360},daysInMonth:function(p,v){return this._validate(p,v,this.minDay,V.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(p,v,m){var g=this._validate(p,v,m,V.local.invalidDate);return g.day()},weekDay:function(p,v,m){return this._validate(p,v,m,V.local.invalidDate),!0},extraInfo:function(p,v,m){var g=this._validate(p,v,m,V.local.invalidDate),w=g.toJD(),o=this._toHaab(w),T=this._toTzolkin(w);return{haabMonthName:this.local.haabMonths[o[0]-1],haabMonth:o[0],haabDay:o[1],tzolkinDayName:this.local.tzolkinMonths[T[0]-1],tzolkinDay:T[0],tzolkinTrecena:T[1]}},_toHaab:function(p){p-=this.jdEpoch;var v=c(p+8+17*20,365);return[Math.floor(v/20)+1,c(v,20)]},_toTzolkin:function(p){return p-=this.jdEpoch,[u(p+20,20),u(p+4,13)]},toJD:function(p,v,m){var g=this._validate(p,v,m,V.local.invalidDate);return g.day()+g.month()*20+g.year()*360+this.jdEpoch},fromJD:function(p){p=Math.floor(p)+.5-this.jdEpoch;var v=Math.floor(p/360);p=p%360,p+=p<0?360:0;var m=Math.floor(p/20),g=p%20;return this.newDate(v,m,g)}});function c(p,v){return p-v*Math.floor(p/v)}function u(p,v){return c(p-1,v)+1}V.calendars.mayan=h}}),sM=i({"node_modules/world-calendars/dist/calendars/nanakshahi.js"(){var V=ss(),$=as();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar;var c=V.instance("gregorian");$(h.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,V.local.invalidYear||V.regionalOptions[""].invalidYear);return c.leapYear(p.year()+(p.year()<1?1:0)+1469)},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(1-(m.dayOfWeek()||7),"d"),Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,V.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(u,p,v){return(this.dayOfWeek(u,p,v)||7)<6},toJD:function(g,p,v){var m=this._validate(g,p,v,V.local.invalidMonth),g=m.year();g<0&&g++;for(var w=m.day(),o=1;o<m.month();o++)w+=this.daysPerMonth[o-1];return w+c.toJD(g+1468,3,13)},fromJD:function(u){u=Math.floor(u+.5);for(var p=Math.floor((u-(this.jdEpoch-1))/366);u>=this.toJD(p+1,1,1);)p++;for(var v=u-Math.floor(this.toJD(p,1,1)+.5)+1,m=1;v>this.daysInMonth(p,m);)v-=this.daysInMonth(p,m),m++;return this.newDate(p,m,v)}}),V.calendars.nanakshahi=h}}),oM=i({"node_modules/world-calendars/dist/calendars/nepali.js"(){var V=ss(),$=as();function h(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(c){return this.daysInYear(c)!==this.daysPerYear},weekOfYear:function(c,u,p){var v=this.newDate(c,u,p);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(c){var u=this._validate(c,this.minMonth,this.minDay,V.local.invalidYear);if(c=u.year(),typeof this.NEPALI_CALENDAR_DATA[c]>"u")return this.daysPerYear;for(var p=0,v=this.minMonth;v<=12;v++)p+=this.NEPALI_CALENDAR_DATA[c][v];return p},daysInMonth:function(c,u){return c.year&&(u=c.month(),c=c.year()),this._validate(c,u,this.minDay,V.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[c]>"u"?this.daysPerMonth[u-1]:this.NEPALI_CALENDAR_DATA[c][u]},weekDay:function(c,u,p){return this.dayOfWeek(c,u,p)!==6},toJD:function(c,u,p){var v=this._validate(c,u,p,V.local.invalidDate);c=v.year(),u=v.month(),p=v.day();var m=V.instance(),g=0,w=u,o=c;this._createMissingCalendarData(c);var T=c-(w>9||w===9&&p>=this.NEPALI_CALENDAR_DATA[o][0]?56:57);for(u!==9&&(g=p,w--);w!==9;)w<=0&&(w=12,o--),g+=this.NEPALI_CALENDAR_DATA[o][w],w--;return u===9?(g+=p-this.NEPALI_CALENDAR_DATA[o][0],g<0&&(g+=m.daysInYear(T))):g+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],m.newDate(T,1,1).add(g,"d").toJD()},fromJD:function(c){var u=V.instance(),p=u.fromJD(c),v=p.year(),m=p.dayOfYear(),g=v+56;this._createMissingCalendarData(g);for(var w=9,o=this.NEPALI_CALENDAR_DATA[g][0],T=this.NEPALI_CALENDAR_DATA[g][w]-o+1;m>T;)w++,w>12&&(w=1,g++),T+=this.NEPALI_CALENDAR_DATA[g][w];var y=this.NEPALI_CALENDAR_DATA[g][w]-(T-m);return this.newDate(g,w,y)},_createMissingCalendarData:function(c){var u=this.daysPerMonth.slice(0);u.unshift(17);for(var p=c-1;p<c+2;p++)typeof this.NEPALI_CALENDAR_DATA[p]>"u"&&(this.NEPALI_CALENDAR_DATA[p]=u)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),V.calendars.nepali=h}}),lM=i({"node_modules/world-calendars/dist/calendars/persian.js"(){var V=ss(),$=as();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,V.local.invalidYear);return((p.year()-(p.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(-((m.dayOfWeek()+1)%7),"d"),Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,V.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(u,p,v){return this.dayOfWeek(u,p,v)!==5},toJD:function(u,p,v){var m=this._validate(u,p,v,V.local.invalidDate);u=m.year(),p=m.month(),v=m.day();var g=u-(u>=0?474:473),w=474+c(g,2820);return v+(p<=7?(p-1)*31:(p-1)*30+6)+Math.floor((w*682-110)/2816)+(w-1)*365+Math.floor(g/2820)*1029983+this.jdEpoch-1},fromJD:function(u){u=Math.floor(u)+.5;var p=u-this.toJD(475,1,1),v=Math.floor(p/1029983),m=c(p,1029983),g=2820;if(m!==1029982){var w=Math.floor(m/366),o=c(m,366);g=Math.floor((2134*w+2816*o+2815)/1028522)+w+1}var T=g+2820*v+474;T=T<=0?T-1:T;var y=u-this.toJD(T,1,1)+1,k=y<=186?Math.ceil(y/31):Math.ceil((y-6)/30),D=u-this.toJD(T,k,1)+1;return this.newDate(T,k,D)}});function c(u,p){return u-p*Math.floor(u/p)}V.calendars.persian=h,V.calendars.jalali=h}}),cM=i({"node_modules/world-calendars/dist/calendars/taiwan.js"(){var V=ss(),$=as(),h=V.instance();function c(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}c.prototype=new V.baseCalendar,$(c.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(v){var p=this._validate(v,this.minMonth,this.minDay,V.local.invalidYear),v=this._t2gYear(p.year());return h.leapYear(v)},weekOfYear:function(g,p,v){var m=this._validate(g,this.minMonth,this.minDay,V.local.invalidYear),g=this._t2gYear(m.year());return h.weekOfYear(g,m.month(),m.day())},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,V.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(u,p,v){return(this.dayOfWeek(u,p,v)||7)<6},toJD:function(g,p,v){var m=this._validate(g,p,v,V.local.invalidDate),g=this._t2gYear(m.year());return h.toJD(g,m.month(),m.day())},fromJD:function(u){var p=h.fromJD(u),v=this._g2tYear(p.year());return this.newDate(v,p.month(),p.day())},_t2gYear:function(u){return u+this.yearsOffset+(u>=-this.yearsOffset&&u<=-1?1:0)},_g2tYear:function(u){return u-this.yearsOffset-(u>=1&&u<=this.yearsOffset?1:0)}}),V.calendars.taiwan=c}}),uM=i({"node_modules/world-calendars/dist/calendars/thai.js"(){var V=ss(),$=as(),h=V.instance();function c(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}c.prototype=new V.baseCalendar,$(c.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var p=this._validate(v,this.minMonth,this.minDay,V.local.invalidYear),v=this._t2gYear(p.year());return h.leapYear(v)},weekOfYear:function(g,p,v){var m=this._validate(g,this.minMonth,this.minDay,V.local.invalidYear),g=this._t2gYear(m.year());return h.weekOfYear(g,m.month(),m.day())},daysInMonth:function(u,p){var v=this._validate(u,p,this.minDay,V.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(u,p,v){return(this.dayOfWeek(u,p,v)||7)<6},toJD:function(g,p,v){var m=this._validate(g,p,v,V.local.invalidDate),g=this._t2gYear(m.year());return h.toJD(g,m.month(),m.day())},fromJD:function(u){var p=h.fromJD(u),v=this._g2tYear(p.year());return this.newDate(v,p.month(),p.day())},_t2gYear:function(u){return u-this.yearsOffset-(u>=1&&u<=this.yearsOffset?1:0)},_g2tYear:function(u){return u+this.yearsOffset+(u>=-this.yearsOffset&&u<=-1?1:0)}}),V.calendars.thai=c}}),dM=i({"node_modules/world-calendars/dist/calendars/ummalqura.js"(){var V=ss(),$=as();function h(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}h.prototype=new V.baseCalendar,$(h.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(u){var p=this._validate(u,this.minMonth,this.minDay,V.local.invalidYear);return this.daysInYear(p.year())===355},weekOfYear:function(u,p,v){var m=this.newDate(u,p,v);return m.add(-m.dayOfWeek(),"d"),Math.floor((m.dayOfYear()-1)/7)+1},daysInYear:function(u){for(var p=0,v=1;v<=12;v++)p+=this.daysInMonth(u,v);return p},daysInMonth:function(u,p){for(var v=this._validate(u,p,this.minDay,V.local.invalidMonth),m=v.toJD()-24e5+.5,g=0,w=0;w<c.length;w++){if(c[w]>m)return c[g]-c[g-1];g++}return 30},weekDay:function(u,p,v){return this.dayOfWeek(u,p,v)!==5},toJD:function(u,p,v){var m=this._validate(u,p,v,V.local.invalidDate),g=12*(m.year()-1)+m.month()-15292,w=m.day()+c[g-1]-1;return w+24e5-.5},fromJD:function(u){for(var p=u-24e5+.5,v=0,m=0;m<c.length&&!(c[m]>p);m++)v++;var g=v+15292,w=Math.floor((g-1)/12),o=w+1,T=g-12*w,y=p-c[v-1]+1;return this.newDate(o,T,y)},isValid:function(u,p,v){var m=V.baseCalendar.prototype.isValid.apply(this,arguments);return m&&(u=u.year!=null?u.year:u,m=u>=1276&&u<=1500),m},_validate:function(u,p,v,m){var g=V.baseCalendar.prototype._validate.apply(this,arguments);if(g.year<1276||g.year>1500)throw m.replace(/\{0\}/,this.local.name);return g}}),V.calendars.ummalqura=h;var c=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]}}),fM=i({"src/components/calendars/calendars.js"(V,$){$.exports=ss(),Kk(),Jk(),Qk(),eM(),tM(),rM(),nM(),iM(),aM(),sM(),oM(),lM(),cM(),uM(),dM()}}),hM=i({"src/components/calendars/index.js"(V,$){var h=fM(),c=_r(),u=Te(),p=u.EPOCHJD,v=u.ONEDAY,m={valType:"enumerated",values:c.sortObjectKeys(h.calendars),editType:"calc",dflt:"gregorian"},g=function(J,H,Y,Z){var z={};return z[Y]=m,c.coerce(J,H,z,Y,Z)},w=function(J,H,Y,Z){for(var z=0;z<Y.length;z++)g(J,H,Y[z]+"calendar",Z.calendar)},o={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},T={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},y={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},k="##",D={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:k,w:k,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function M(J,H,Y){for(var Z=Math.floor((H+.05)/v)+p,z=C(Y).fromJD(Z),q=0,X,K,ee,ne,le;(q=J.indexOf("%",q))!==-1;)X=J.charAt(q+1),X==="0"||X==="-"||X==="_"?(ee=3,K=J.charAt(q+2),X==="_"&&(X="-")):(K=X,X="0",ee=2),ne=D[K],ne?(ne===k?le=k:le=z.formatDate(ne[X]),J=J.substr(0,q)+le+J.substr(q+ee),q+=le.length):q+=ee;return J}var A={};function C(J){var H=A[J];return H||(H=A[J]=h.instance(J),H)}function j(J){return c.extendFlat({},m,{description:J})}function b(J){return"Sets the calendar system to use with `"+J+"` date data."}var S={xcalendar:j(b("x"))},L=c.extendFlat({},S,{ycalendar:j(b("y"))}),F=c.extendFlat({},L,{zcalendar:j(b("z"))}),P=j(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:L,bar:L,box:L,heatmap:L,contour:L,histogram:L,histogram2d:L,histogram2dcontour:L,scatter3d:F,surface:F,mesh3d:F,scattergl:L,ohlc:S,candlestick:S},layout:{calendar:j(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:P},yaxis:{calendar:P},scene:{xaxis:{calendar:P},yaxis:{calendar:P},zaxis:{calendar:P}},polar:{radialaxis:{calendar:P}}}},layoutAttributes:m,handleDefaults:g,handleTraceDefaults:w,CANONICAL_SUNDAY:T,CANONICAL_TICK:o,DFLTRANGE:y,getCal:C,worldCalFmt:M}}}),pM=i({"lib/calendars.js"(V,$){$.exports=hM()}}),mM=i({"lib/index-basic.js"(V,$){var h=Rk();h.register([Wk(),Zk(),pM()]),$.exports=h}});return mM()})();/*! Bundled license information:

	native-promise-only/lib/npo.src.js:
	  (*! Native Promise Only
	      v0.8.1 (c) Kyle Simpson
	      MIT License: http://getify.mit-license.org
	  *)

	polybooljs/index.js:
	  (*
	   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
	   * @license MIT
	   * @preserve Project Home: https://github.com/voidqk/polybooljs
	   *)

	object-assign/index.js:
	  (*
	  object-assign
	  (c) Sindre Sorhus
	  @license MIT
	  *)
	*/return window.Plotly=e,e})})(ES);var P9=ES.exports;const N9=Cf(P9);Qa.register(...R9);const z9=t=>{const e=JSON.stringify(t,null,2),r=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download="transcript-analysis.json",i.click()},F9=t=>{const e=[["Metric","Value"],["Total Words",t.wordCount],["Total Sentences",t.sentenceCount],["Reading Time",`${t.readingTime} minutes`],["Sentiment Score",t.sentimentScore],["Complexity Score",t.complexityScore]].map(a=>a.join(",")).join(`
`),r=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download="transcript-analysis.csv",i.click()},eg=({text:t,speed:e=50,className:r=""})=>{const[n,i]=Jt.useState(""),[a,s]=Jt.useState(0);return Jt.useEffect(()=>{if(a<t.length){const f=setTimeout(()=>{i(_=>_+t[a]),s(_=>_+1)},e);return()=>clearTimeout(f)}},[a,t,e]),l.jsxs("span",{className:`typewriter ${r}`,children:[n,l.jsx("span",{className:"typewriter-cursor",children:"|"})]})},cl=({value:t,duration:e=2e3})=>{const[r,n]=Jt.useState(0);return Jt.useEffect(()=>{let i=null;const a=0,s=parseInt(t)||0,f=_=>{i===null&&(i=_);const N=Math.min((_-i)/e,1);n(Math.floor(N*(s-a)+a)),N<1&&requestAnimationFrame(f)};requestAnimationFrame(f)},[t,e]),l.jsx("span",{className:"animated-counter",children:r})},I9=({transcript:t,isVisible:e,onAnalysisComplete:r})=>{var Ot,Ht,Qt,er,kt,lr,dr,Ar,Nr,hn,Wn,Sn,Tn,zn,Bi,rs,Sa,zr,sn,jr,Rn,Zn,Pr,wn,Xn,li,Ti,ca,va,ni,ga,Hn,ti,Ai,Ci,Hi,ya,Kn,ka,Ma,Wi,Ls,Pn,Ki,Ba,ki,La,Pa,Vs,Es,xn,Sr,Br,en,Kr,an,En,_n,fn,on,Yn,ri,xa,qi,Ui,zi,Vi,Ds,Rs,_r,ro,no,bs,bo,Na,Mi,Fi,Dt,hr,Yr,Ur,rn,An,ii,ba,xi,ns,na,ia,Ha,io,Ps,Po,ao,Qo,No,el,zo,Jc,uc,Ns,dc,tl,Al,is,Cl,rl,fc,nl,za,$s,Wa,hc,Fn,oi,pc,Qc,Ku,mc,ji,zf,Ju,Ff,Qu,If,Of,Bf,Ys,Fo,Hf,ed,eu,td,Wf,rd,qf,tu,Uf,ru,nd,id,ad,nu,Vf,$f,sd,Yf,Gf,Xf,so,jl,iu,au,su,ou,Io,lu,od,vc;const[n,i]=Jt.useState(null),[a,s]=Jt.useState(null),[f,_]=Jt.useState(!1),[N,I]=Jt.useState("summary"),me=Jt.useRef(null),fe=Jt.useRef(null),Te=Jt.useRef(null),qe=Jt.useRef(null),Ve=Jt.useRef(null),Ue=Jt.useRef(null),Ee=Jt.useRef(null),Fe=Jt.useRef(null),He=Jt.useRef(null),tt=Jt.useRef(null);Jt.useEffect(()=>{t&&e&&et()},[t,e]);const et=async()=>{_(!0);try{console.log("Starting transcript analysis...",{transcript:t==null?void 0:t.length}),await new Promise(qn=>setTimeout(qn,500));const $t=U6(t),gn=k8($t);console.log("Analysis completed:",{analysisResult:$t,chartDataResult:gn}),i($t),s(gn),typeof r=="function"&&r({analysis:$t,chartData:gn,transcript:t}),setTimeout(()=>{ct(gn)},100)}catch($t){console.error("Analysis error:",$t)}finally{_(!1)}},ct=$t=>{if(!$t){console.warn("No chart data available");return}console.log("Initializing charts with data:",$t),xt($t),Pt($t),ir($t),mr($t),yr($t),vt($t),gt($t),It($t),ut($t),kr($t)},xt=$t=>{if(console.log("Initializing sentiment chart with data:",$t==null?void 0:$t.sentimentPieData),me.current&&($t!=null&&$t.sentimentPieData)){const gn=me.current.getContext("2d");me.current.chartInstance&&me.current.chartInstance.destroy();try{me.current.chartInstance=new Qa(gn,{type:"pie",data:$t.sentimentPieData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sentiment Distribution Analysis",font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,font:{size:12}}},tooltip:{callbacks:{label:function(qn){const ua=qn.label||"",ws=qn.parsed||0;return`${ua}: ${ws.toFixed(1)}%`},afterLabel:function(qn){const ua=qn.label;return{Positive:"Optimistic, encouraging, or favorable sentiment",Negative:"Critical, discouraging, or unfavorable sentiment",Neutral:"Balanced, objective, or factual sentiment"}[ua]||""}}}}}}),console.log("Sentiment chart created successfully")}catch(qn){console.error("Error creating sentiment chart:",qn)}}else console.warn("Cannot initialize sentiment chart - missing ref or data")},Pt=$t=>{if(console.log("Initializing keywords chart with data:",$t==null?void 0:$t.keywordsBarData),fe.current&&($t!=null&&$t.keywordsBarData)){const gn=fe.current.getContext("2d");fe.current.chartInstance&&fe.current.chartInstance.destroy();try{fe.current.chartInstance=new Qa(gn,{type:"bar",data:$t.keywordsBarData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Most Frequent Keywords",font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},legend:{display:!1},tooltip:{callbacks:{label:function(qn){const ua=qn.parsed.y;return`Frequency: ${ua} occurrence${ua>1?"s":""}`},afterLabel:function(qn){const ua=qn.dataset.data.reduce((Gs,oo)=>Gs+oo,0);return`${(qn.parsed.y/ua*100).toFixed(1)}% of total keyword usage`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0,callback:function(qn){return qn+(qn===1?" time":" times")}},title:{display:!0,text:"Frequency Count"}},x:{title:{display:!0,text:"Keywords"},ticks:{maxRotation:45,minRotation:45}}}}}),console.log("Keywords chart created successfully")}catch(qn){console.error("Error creating keywords chart:",qn)}}else console.warn("Cannot initialize keywords chart - missing ref or data")},ir=$t=>{if(console.log("Initializing topics chart with data:",$t==null?void 0:$t.topicDistributionData),Te.current&&($t!=null&&$t.topicDistributionData)){const gn=Te.current.getContext("2d");Te.current.chartInstance&&Te.current.chartInstance.destroy();try{Te.current.chartInstance=new Qa(gn,{type:"doughnut",data:$t.topicDistributionData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Topic Distribution Overview",font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},legend:{position:"right",labels:{usePointStyle:!0,padding:15,font:{size:11}}},tooltip:{callbacks:{label:function(qn){const ua=qn.label||"",ws=qn.parsed||0,Gs=qn.dataset.data.reduce((il,al)=>il+al,0),oo=Gs>0?(ws/Gs*100).toFixed(1):0;return`${ua}: ${ws} mentions (${oo}%)`},afterLabel:function(qn){return{Technology:"Technical terms and digital concepts",Communication:"Discussion and interaction patterns",Analysis:"Analytical and research content",Process:"Procedural and methodical content",Data:"Information and statistical content",Results:"Outcomes and findings"}[qn.label]||"Content category"}}}},cutout:"60%"}}),console.log("Topics chart created successfully")}catch(qn){console.error("Error creating topics chart:",qn)}}else console.warn("Cannot initialize topics chart - missing ref or data")},mr=$t=>{if(console.log("Initializing emotions chart with data:",$t==null?void 0:$t.emotionsRadarData),qe.current&&($t!=null&&$t.emotionsRadarData)){const gn=qe.current.getContext("2d");qe.current.chartInstance&&qe.current.chartInstance.destroy();try{qe.current.chartInstance=new Qa(gn,{type:"radar",data:$t.emotionsRadarData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Emotional Analysis",font:{size:16,weight:"bold"}}},scales:{r:{beginAtZero:!0,ticks:{display:!1}}}}}),console.log("Emotions chart created successfully")}catch(qn){console.error("Error creating emotions chart:",qn)}}else console.warn("Cannot initialize emotions chart - missing ref or data")},kr=$t=>{var gn,qn,ua,ws,Gs,oo,il,al,gc,Ll,El;if(console.log("Initializing Plotly chart with data:",$t),Ve.current&&$t)try{const Oo={x:((gn=$t.keywordsBarData)==null?void 0:gn.labels)||[],y:((ua=(qn=$t.keywordsBarData)==null?void 0:qn.datasets[0])==null?void 0:ua.data)||[],type:"bar",name:"Keyword Frequency",marker:{color:"#2196F3",line:{color:"#1976D2",width:1}},hovertemplate:"<b>%{x}</b><br>Frequency: %{y}<extra></extra>"},ld={x:((ws=$t.topicDistributionData)==null?void 0:ws.labels)||[],y:((oo=(Gs=$t.topicDistributionData)==null?void 0:Gs.datasets[0])==null?void 0:oo.data)||[],type:"scatter",mode:"lines+markers",name:"Topic Distribution",yaxis:"y2",line:{color:"#FF6384",width:3},marker:{color:"#FF6384",size:10},hovertemplate:"<b>%{x}</b><br>Count: %{y}<extra></extra>"},Zf={values:((al=(il=$t.sentimentPieData)==null?void 0:il.datasets[0])==null?void 0:al.data)||[],labels:((gc=$t.sentimentPieData)==null?void 0:gc.labels)||[],type:"pie",name:"Sentiment Distribution",domain:{x:[.7,1],y:[.7,1]},marker:{colors:((El=(Ll=$t.sentimentPieData)==null?void 0:Ll.datasets[0])==null?void 0:El.backgroundColor)||[]},hovertemplate:"<b>%{label}</b><br>Percentage: %{percent}<extra></extra>"},Tm={title:{text:"Comprehensive Content Analysis Dashboard",font:{size:18,weight:"bold"},x:.1},xaxis:{title:"Content Elements",titlefont:{size:14},tickangle:-45},yaxis:{title:"Frequency",titlefont:{size:14}},yaxis2:{title:"Topic Count",titlefont:{size:14},overlaying:"y",side:"right"},plot_bgcolor:"#f8f9fa",paper_bgcolor:"#ffffff",margin:{l:60,r:60,t:80,b:100},legend:{x:.02,y:.98,bgcolor:"rgba(255, 255, 255, 0.8)",bordercolor:"#ddd",borderwidth:1},annotations:[{text:"Sentiment Distribution",x:.85,y:.5,xref:"paper",yref:"paper",showarrow:!1,font:{size:12,weight:"bold"}}]},Am={responsive:!0,displayModeBar:!0,modeBarButtonsToRemove:["pan2d","lasso2d","select2d"],toImageButtonOptions:{format:"png",filename:"content-analysis-chart",height:500,width:800,scale:1}};N9.newPlot(Ve.current,[Oo,ld,Zf],Tm,Am),console.log("Enhanced Plotly chart created successfully")}catch(Oo){console.error("Error creating Plotly chart:",Oo)}else console.warn("Cannot initialize Plotly chart - missing ref or data")},yr=$t=>{if(console.log("Initializing question types chart with data:",$t==null?void 0:$t.questionTypesData),Ue.current&&($t!=null&&$t.questionTypesData)){const gn=Ue.current.getContext("2d");Ue.current.chartInstance&&Ue.current.chartInstance.destroy();try{Ue.current.chartInstance=new Qa(gn,{type:"doughnut",data:$t.questionTypesData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Question Types Distribution",font:{size:16,weight:"bold"}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:15}}},cutout:"50%"}}),console.log("Question types chart created successfully")}catch(qn){console.error("Error creating question types chart:",qn)}}else console.warn("Cannot initialize question types chart - missing ref or data")},vt=$t=>{if(console.log("Initializing complexity chart with data:",$t==null?void 0:$t.complexityData),Ee.current&&($t!=null&&$t.complexityData)){const gn=Ee.current.getContext("2d");Ee.current.chartInstance&&Ee.current.chartInstance.destroy();try{Ee.current.chartInstance=new Qa(gn,{type:"bar",data:$t.complexityData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Question Complexity Analysis",font:{size:16,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}}),console.log("Complexity chart created successfully")}catch(qn){console.error("Error creating complexity chart:",qn)}}else console.warn("Cannot initialize complexity chart - missing ref or data")},gt=$t=>{if(console.log("Initializing linguistic chart with data:",$t==null?void 0:$t.linguisticData),Fe.current&&($t!=null&&$t.linguisticData)){const gn=Fe.current.getContext("2d");Fe.current.chartInstance&&Fe.current.chartInstance.destroy();try{Fe.current.chartInstance=new Qa(gn,{type:"radar",data:$t.linguisticData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Linguistic Features Analysis",font:{size:16,weight:"bold"}},legend:{display:!1}},scales:{r:{beginAtZero:!0,max:100,ticks:{display:!1}}}}}),console.log("Linguistic chart created successfully")}catch(qn){console.error("Error creating linguistic chart:",qn)}}else console.warn("Cannot initialize linguistic chart - missing ref or data")},It=$t=>{if(console.log("Initializing time reference chart with data:",$t==null?void 0:$t.timeReferenceData),He.current&&($t!=null&&$t.timeReferenceData)){const gn=He.current.getContext("2d");He.current.chartInstance&&He.current.chartInstance.destroy();try{He.current.chartInstance=new Qa(gn,{type:"pie",data:$t.timeReferenceData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Time Reference Analysis",font:{size:16,weight:"bold"}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:15}}}}}),console.log("Time reference chart created successfully")}catch(qn){console.error("Error creating time reference chart:",qn)}}else console.warn("Cannot initialize time reference chart - missing ref or data")},ut=$t=>{if(console.log("Initializing metrics chart with data:",$t==null?void 0:$t.advancedMetrics),tt.current&&($t!=null&&$t.advancedMetrics)){const gn=tt.current.getContext("2d");tt.current.chartInstance&&tt.current.chartInstance.destroy();try{const qn={labels:["Content Diversity","Emotional Range","Question Complexity","Linguistic Richness","Analytical Depth"],datasets:[{label:"Content Quality Metrics",data:[$t.advancedMetrics.contentDiversity,$t.advancedMetrics.emotionalRange,$t.advancedMetrics.questionComplexity,$t.advancedMetrics.linguisticRichness,$t.advancedMetrics.analyticalDepth],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:2}]};tt.current.chartInstance=new Qa(gn,{type:"bar",data:qn,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Advanced Content Quality Metrics",font:{size:16,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(ua){return ua+"%"}}}}}}),console.log("Metrics chart created successfully")}catch(qn){console.error("Error creating metrics chart:",qn)}}else console.warn("Cannot initialize metrics chart - missing ref or data")},qt=$t=>({what:"Seeks information about things, definitions, or explanations",how:"Asks about processes, methods, or procedures",why:"Explores reasons, causes, or motivations",when:"Inquires about time, timing, or temporal information",where:"Asks about location, place, or spatial information",who:"Seeks information about people, roles, or identity",which:"Requests choice or selection from options",whose:"Inquires about ownership or possession",yesNo:"Requires simple yes/no or binary answers",choice:"Presents alternatives for decision-making",confirmation:"Seeks validation or agreement",other:"Miscellaneous or unclassified questions"})[$t]||"General inquiry",Vt=$t=>({simple:"Short, direct questions with clear intent",moderate:"Questions with some complexity or subclauses",complex:"Multi-part questions with conditional elements"})[$t]||"Standard complexity";return e?(console.log("TranscriptAnalysis rendering:",{isVisible:e,analysis:!!n,loading:f,activeTab:N}),l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"guide-button",style:{position:"fixed",top:20,right:20,zIndex:2e3,background:"orange",color:"#fff",border:"none",borderRadius:"8px",padding:"14px 28px",fontWeight:"bold",fontSize:"1.2rem",boxShadow:"0 2px 12px rgba(0,0,0,0.18)",cursor:"pointer"},tabIndex:-1,"aria-label":"Guide",children:"Guide"}),n&&l.jsxs("div",{style:{display:"flex",gap:12,margin:"18px 0 0 18px"},children:[l.jsx("button",{onClick:()=>z9(n),style:{background:"#2d8cff",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600,cursor:"pointer",fontSize:"1em",boxShadow:"0 1px 4px rgba(0,0,0,0.08)"},children:"Export as JSON"}),l.jsx("button",{onClick:()=>F9(n),style:{background:"#27ae60",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600,cursor:"pointer",fontSize:"1em",boxShadow:"0 1px 4px rgba(0,0,0,0.08)"},children:"Export as CSV"})]}),l.jsxs("div",{className:"transcript-analysis",children:[l.jsxs("div",{className:"analysis-header",children:[l.jsx("h2",{children:" Transcript Analysis & Insights"}),l.jsxs("div",{className:"analysis-tabs",children:[l.jsx("button",{className:`tab-button ${N==="summary"?"active":""}`,onClick:()=>{console.log("Switching to summary tab"),I("summary")},children:" Summary"}),l.jsx("button",{className:`tab-button ${N==="detailed"?"active":""}`,onClick:()=>{console.log("Switching to detailed tab"),I("detailed")},children:" Detailed Analysis"}),l.jsx("button",{className:`tab-button ${N==="insights"?"active":""}`,onClick:()=>{console.log("Switching to insights tab"),I("insights")},children:" Insights"}),l.jsx("button",{className:`tab-button ${N==="charts"?"active":""}`,onClick:()=>{console.log("Switching to charts tab"),I("charts"),a&&setTimeout(()=>{ct(a)},100)},children:" Charts"}),l.jsx("button",{className:`tab-button ${N==="linguistic"?"active":""}`,onClick:()=>{console.log("Switching to linguistic tab"),I("linguistic")},children:" Linguistic"}),l.jsx("button",{className:`tab-button ${N==="content"?"active":""}`,onClick:()=>{console.log("Switching to content tab"),I("content")},children:" Content"}),l.jsx("button",{className:`tab-button ${N==="statistics"?"active":""}`,onClick:()=>{console.log("Switching to statistics tab"),I("statistics")},children:" Statistics"}),l.jsx("button",{className:`tab-button ${N==="transcript"?"active":""}`,onClick:()=>{console.log("Switching to transcript tab"),I("transcript")},children:" Transcript"}),l.jsx("button",{className:`tab-button ${N==="questions"?"active":""}`,onClick:()=>{console.log("Switching to questions tab"),I("questions")},children:" Questions"})]})]}),f&&l.jsxs("div",{className:"analysis-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Analyzing transcript..."})]}),n&&!f&&l.jsxs("div",{className:"analysis-content",children:[l.jsxs("div",{style:{marginBottom:"12px",padding:"14px 18px",background:"#f6f6fa",borderRadius:"7px",color:"#222",fontSize:"1.08em",fontWeight:500,boxShadow:"0 1px 6px rgba(0,0,0,0.06)",lineHeight:1.7},children:[N==="summary"&&l.jsxs(l.Fragment,{children:[l.jsx("b",{children:"Summary Tab:"})," Provides a concise overview of your transcript, including:",l.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[l.jsxs("li",{children:[l.jsx("b",{children:"Summary:"})," Auto-generated brief of the transcript's main content."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Quick Stats:"})," Word count, sentence count, estimated reading time, readability score, and analysis confidence."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Spam Detection:"})," Indicates if the transcript is likely spam, with matched keywords and spam score."]})]})]}),N==="detailed"&&l.jsxs(l.Fragment,{children:[l.jsx("b",{children:"Detailed Analysis Tab:"})," Offers an in-depth breakdown, including:",l.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[l.jsxs("li",{children:[l.jsx("b",{children:"Brief Summary:"})," A short summary of the transcript."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Main Points:"})," Key points and highlights extracted from the content."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Key Findings:"})," Important findings or insights identified."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Conclusions:"})," Summarized conclusions drawn from the transcript."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Questions Raised:"})," List of questions that arise from the content."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Overview Grid:"})," Shows length, tone, primary topic, complexity, reading level, and structure."]})]})]}),N==="insights"&&l.jsxs(l.Fragment,{children:[l.jsx("b",{children:"Insights Tab:"})," Presents actionable insights and sentiment analysis:",l.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[l.jsxs("li",{children:[l.jsx("b",{children:"Insights Grid:"})," Actionable takeaways, warnings, or suggestions, each with severity and icon."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Sentiment Analysis:"})," Overall sentiment label, score, and confidence."]})]})]}),N==="linguistic"&&l.jsxs(l.Fragment,{children:[l.jsx("b",{children:"Linguistic Tab:"})," Explores the language and structure of the transcript:",l.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[l.jsxs("li",{children:[l.jsx("b",{children:"Vocabulary Analysis:"})," Complexity, average word length, unique words, and repetition rate."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Sentence Types:"})," Counts of declarative, interrogative, and exclamatory sentences."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tense Distribution:"})," Usage of past, present, and future tenses."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Structure Analysis:"})," Coherence score, transition words, organization, and bullet points."]})]})]}),N==="content"&&l.jsxs(l.Fragment,{children:[l.jsx("b",{children:"Content Tab:"})," Analyzes the types and entities in your transcript:",l.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[l.jsxs("li",{children:[l.jsx("b",{children:"Content Types:"})," Factual statements, opinions, and examples."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Named Entities:"})," People, organizations, locations, and dates mentioned."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Question Analysis:"})," Total, direct, and rhetorical questions, with breakdown by type."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Action Items:"})," Tasks or follow-ups identified in the transcript."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Themes:"})," Main themes and their frequency."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Time Analysis:"})," Focus on past, present, future, and dominant tense."]})]})]}),N==="charts"&&l.jsxs(l.Fragment,{children:[l.jsx("b",{children:"Charts Tab:"})," Visualizes transcript data with interactive charts:",l.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[l.jsxs("li",{children:[l.jsx("b",{children:"Sentiment Analysis:"})," Pie chart of positive, negative, and neutral sentiments."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Top Keywords:"})," Bar chart of most frequent words."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Topic Distribution:"})," Doughnut chart of main topics."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Emotional Analysis:"})," Radar chart of emotional intensities."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Question Types & Complexity:"})," Charts for question types and complexity levels."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Linguistic Features:"})," Chart of vocabulary and readability."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Time References:"})," Chart of past, present, and future references."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Content Quality Metrics:"})," Advanced metrics for diversity and depth."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Interactive Dashboard:"})," Multi-dimensional Plotly chart combining keywords, topics, and sentiment."]})]})]}),N==="statistics"&&l.jsxs(l.Fragment,{children:[l.jsx("b",{children:"Statistics Tab:"})," Shows detailed text statistics and accuracy metrics:",l.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[l.jsxs("li",{children:[l.jsx("b",{children:"Text Statistics:"})," Word, sentence, and paragraph counts, reading time."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Readability:"})," Readability score and description."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Top Keywords:"})," Most frequent keywords and their counts."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Confidence Scores:"})," Analysis, sentiment, readability, keywords, and content confidence."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Accuracy Metrics:"})," Data quality, analysis depth, entity recognition, and linguistic coverage."]})]})]}),N==="questions"&&l.jsxs(l.Fragment,{children:[l.jsx("b",{children:"Questions Tab:"})," Deep dive into all questions in the transcript:",l.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[l.jsxs("li",{children:[l.jsx("b",{children:"Questions Overview:"})," Total, direct, and rhetorical questions, with summary stats."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Types Breakdown:"})," Counts and icons for each question type (what, how, why, etc.)."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Purposes:"})," Information, clarification, confirmation, engagement, reflection, challenge."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Complexity Analysis:"})," Distribution of question complexity levels."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Question Insights:"})," Key insights about the questions asked."]}),l.jsxs("li",{children:[l.jsx("b",{children:"All Questions List:"})," Every question found, with context, type, purpose, and analysis."]})]})]}),N==="transcript"&&l.jsxs(l.Fragment,{children:[l.jsx("b",{children:"Transcript Tab:"})," Annotated, word-by-word transcript analysis:",l.jsxs("ul",{style:{marginTop:4,marginBottom:0,paddingLeft:22},children:[l.jsxs("li",{children:[l.jsx("b",{children:"Word-by-Word Analysis:"})," Each word is annotated as a keyword, named entity, or regular word."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Word Cloud:"})," Visual representation of the most frequent words."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Annotated Transcript:"})," The full transcript with color-coded highlights."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Legend:"})," Explains the color codes for keywords, entities, and regular words."]})]})]}),!(N==="summary"||N==="detailed"||N==="insights"||N==="linguistic"||N==="content"||N==="charts"||N==="statistics"||N==="questions"||N==="transcript")&&l.jsxs("span",{children:[l.jsx("b",{children:"Analysis Overview:"})," Select a tab above to view detailed explanations and insights for your transcript. Each tab provides a unique perspective, from summaries and statistics to deep dives into questions, content, and linguistic features."]})]}),l.jsx("div",{style:{marginBottom:"20px",padding:"10px",background:"#34495e",borderRadius:"5px"},children:l.jsxs("small",{children:["Debug Info: Active Tab: ",N," | Analysis Keys: ",Object.keys(n||{}).join(", ")]})}),N==="summary"&&l.jsxs("div",{className:"analysis-section",children:[l.jsxs("div",{className:"summary-card",children:[l.jsx("h3",{children:" Summary"}),l.jsx("div",{className:"summary-content",children:l.jsx(eg,{text:n.summary,speed:30,className:"summary-text"})})]}),l.jsxs("div",{className:"quick-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-value",children:l.jsx(cl,{value:((Ot=a==null?void 0:a.statisticsData)==null?void 0:Ot.wordCount)||0})}),l.jsx("div",{className:"stat-label",children:"Words"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-value",children:l.jsx(cl,{value:((Ht=a==null?void 0:a.statisticsData)==null?void 0:Ht.sentenceCount)||0})}),l.jsx("div",{className:"stat-label",children:"Sentences"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsxs("div",{className:"stat-value",children:[l.jsx(cl,{value:((Qt=a==null?void 0:a.statisticsData)==null?void 0:Qt.readingTime)||0}),"m"]}),l.jsx("div",{className:"stat-label",children:"Reading Time"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsxs("div",{className:"stat-value",children:[l.jsx(cl,{value:((er=a==null?void 0:a.statisticsData)==null?void 0:er.confidenceScore)||0}),"%"]}),l.jsx("div",{className:"stat-label",children:"Analysis Confidence"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-value",children:l.jsx(cl,{value:Math.round(n.readabilityScore||0)})}),l.jsx("div",{className:"stat-label",children:"Readability Score"})]}),l.jsxs("div",{className:"stat-item",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:100},children:[l.jsxs("div",{className:"stat-value",style:{color:(kt=n.spamDetection)!=null&&kt.isSpam?"#e74c3c":"#27ae60",fontWeight:"bold",fontSize:32,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1.1},children:[(lr=n.spamDetection)!=null&&lr.isSpam?l.jsx("span",{style:{fontSize:36},children:""}):l.jsx("span",{style:{fontSize:36},children:""}),l.jsx("span",{style:{fontWeight:"bold",fontSize:28,marginTop:4},children:(dr=n.spamDetection)!=null&&dr.isSpam?"Spam":"Not"}),!((Ar=n.spamDetection)!=null&&Ar.isSpam)&&l.jsx("span",{style:{fontWeight:"bold",fontSize:28,marginTop:-4},children:"Spam"})]}),l.jsx("div",{className:"stat-label",style:{marginTop:4,fontWeight:600,letterSpacing:1,fontSize:14},children:"SPAM DETECTION"}),typeof((Nr=n.spamDetection)==null?void 0:Nr.spamScore)<"u"&&l.jsxs("div",{style:{fontSize:"0.9em",color:"#aaa",marginTop:2},children:["Score: ",n.spamDetection.spamScore]}),typeof((hn=n.spamDetection)==null?void 0:hn.spamPercent)<"u"&&l.jsxs("div",{style:{fontSize:"0.9em",color:n.spamDetection.spamPercent>50?"#e74c3c":"#27ae60",marginTop:2},children:["Spam %: ",n.spamDetection.spamPercent,"%"]}),Array.isArray((Wn=n.spamDetection)==null?void 0:Wn.matchedKeywords)&&n.spamDetection.matchedKeywords.length>0&&l.jsxs("div",{style:{fontSize:"0.9em",color:"#e67e22",marginTop:2,textAlign:"center"},children:["Matched Spam Keywords: ",n.spamDetection.matchedKeywords.map($t=>`${$t}${n.spamDetection.matchedKeywordCounts&&n.spamDetection.matchedKeywordCounts[$t]?` (${n.spamDetection.matchedKeywordCounts[$t]})`:""}`).join(", ")]}),Array.isArray((Sn=n.spamDetection)==null?void 0:Sn.uniqueSuspicious)&&n.spamDetection.uniqueSuspicious.length>0&&l.jsxs("div",{style:{fontSize:"0.9em",color:"#f39c12",marginTop:2,textAlign:"center"},children:["Unique Suspicious Keywords: ",n.spamDetection.uniqueSuspicious.map($t=>`${$t.word} (${$t.count})`).join(", ")]})]})]})]}),N==="detailed"&&l.jsx("div",{className:"analysis-section",children:l.jsxs("div",{className:"detailed-summary",children:[l.jsxs("div",{className:"summary-card",children:[l.jsx("h3",{children:" Brief Summary"}),l.jsx("p",{children:((Tn=n.detailedSummary)==null?void 0:Tn.brief)||"No brief summary available"})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("h3",{children:" Main Points"}),l.jsx("ul",{children:((Bi=(zn=n.detailedSummary)==null?void 0:zn.mainPoints)==null?void 0:Bi.length)>0?n.detailedSummary.mainPoints.map(($t,gn)=>l.jsx("li",{children:$t},gn)):l.jsx("li",{children:"No main points identified"})})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("h3",{children:" Key Findings"}),l.jsx("ul",{children:((Sa=(rs=n.detailedSummary)==null?void 0:rs.keyFindings)==null?void 0:Sa.length)>0?n.detailedSummary.keyFindings.map(($t,gn)=>l.jsx("li",{children:$t},gn)):l.jsx("li",{children:"No key findings identified"})})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("h3",{children:" Conclusions"}),l.jsx("ul",{children:((sn=(zr=n.detailedSummary)==null?void 0:zr.conclusions)==null?void 0:sn.length)>0?n.detailedSummary.conclusions.map(($t,gn)=>l.jsx("li",{children:$t},gn)):l.jsx("li",{children:"No conclusions identified"})})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("h3",{children:" Questions Raised"}),l.jsx("ul",{children:((Rn=(jr=n.detailedSummary)==null?void 0:jr.questions)==null?void 0:Rn.length)>0?n.detailedSummary.questions.map(($t,gn)=>l.jsx("li",{children:$t},gn)):l.jsx("li",{children:"No questions identified"})})]}),l.jsxs("div",{className:"overview-grid",children:[l.jsxs("div",{className:"overview-item",children:[l.jsx("strong",{children:"Length:"})," ",((Pr=(Zn=n.detailedSummary)==null?void 0:Zn.overview)==null?void 0:Pr.length)||"N/A"]}),l.jsxs("div",{className:"overview-item",children:[l.jsx("strong",{children:"Tone:"})," ",((Xn=(wn=n.detailedSummary)==null?void 0:wn.overview)==null?void 0:Xn.tone)||"N/A"]}),l.jsxs("div",{className:"overview-item",children:[l.jsx("strong",{children:"Primary Topic:"})," ",((Ti=(li=n.detailedSummary)==null?void 0:li.overview)==null?void 0:Ti.primaryTopic)||"N/A"]}),l.jsxs("div",{className:"overview-item",children:[l.jsx("strong",{children:"Complexity:"})," ",((va=(ca=n.detailedSummary)==null?void 0:ca.overview)==null?void 0:va.complexity)||"N/A"]}),l.jsxs("div",{className:"overview-item",children:[l.jsx("strong",{children:"Reading Level:"})," ",((ga=(ni=n.detailedSummary)==null?void 0:ni.overview)==null?void 0:ga.readingLevel)||"N/A"]}),l.jsxs("div",{className:"overview-item",children:[l.jsx("strong",{children:"Structure:"})," ",((ti=(Hn=n.detailedSummary)==null?void 0:Hn.structure)==null?void 0:ti.structure)||"N/A"]})]})]})}),N==="insights"&&l.jsxs("div",{className:"analysis-section",children:[l.jsx("div",{className:"insights-grid",children:n.insights&&n.insights.length>0?n.insights.map(($t,gn)=>l.jsxs("div",{className:`insight-card ${$t.severity}`,children:[l.jsxs("div",{className:"insight-header",children:[l.jsx("span",{className:"insight-icon",children:$t.icon}),l.jsx("h4",{children:$t.title})]}),l.jsx("p",{children:$t.description})]},gn)):l.jsxs("div",{className:"insight-card info",children:[l.jsxs("div",{className:"insight-header",children:[l.jsx("span",{className:"insight-icon",children:""}),l.jsx("h4",{children:"No Insights Available"})]}),l.jsx("p",{children:"No specific insights could be generated for this transcript."})]})}),l.jsxs("div",{className:"sentiment-analysis",children:[l.jsx("h3",{children:" Sentiment Analysis"}),l.jsxs("div",{className:"sentiment-details",children:[l.jsx("div",{className:`sentiment-badge ${((Ci=(Ai=n.sentiment)==null?void 0:Ai.label)==null?void 0:Ci.toLowerCase())||"neutral"}`,children:((Hi=n.sentiment)==null?void 0:Hi.label)||"Neutral"}),l.jsxs("div",{className:"sentiment-score",children:["Score: ",((((ya=n.sentiment)==null?void 0:ya.score)||0)*100).toFixed(1),"%"]}),l.jsxs("div",{className:"sentiment-confidence",children:["Confidence: ",((((Kn=n.sentiment)==null?void 0:Kn.confidence)||0)*100).toFixed(1),"%"]})]})]})]}),N==="linguistic"&&l.jsx("div",{className:"analysis-section",children:l.jsxs("div",{className:"linguistic-grid",children:[l.jsxs("div",{className:"linguistic-card",children:[l.jsx("h3",{children:" Vocabulary Analysis"}),l.jsxs("div",{className:"linguistic-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Vocabulary Complexity:"}),l.jsx("span",{children:((ka=n.linguisticAnalysis)==null?void 0:ka.vocabularyComplexity)||"N/A"})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Average Word Length:"}),l.jsxs("span",{children:[((Ma=n.linguisticAnalysis)==null?void 0:Ma.averageWordLength)||"N/A"," characters"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Unique Words:"}),l.jsx("span",{children:((Wi=n.linguisticAnalysis)==null?void 0:Wi.uniqueWords)||0})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Repetition Rate:"}),l.jsx("span",{children:((Ls=n.linguisticAnalysis)==null?void 0:Ls.repetitionRate)||"N/A"})]})]})]}),l.jsxs("div",{className:"linguistic-card",children:[l.jsx("h3",{children:" Sentence Types"}),l.jsxs("div",{className:"sentence-types",children:[l.jsxs("div",{className:"type-item",children:[l.jsx("span",{children:"Declarative:"}),l.jsx("span",{children:((Ki=(Pn=n.linguisticAnalysis)==null?void 0:Pn.sentenceTypes)==null?void 0:Ki.declarative)||0})]}),l.jsxs("div",{className:"type-item",children:[l.jsx("span",{children:"Interrogative:"}),l.jsx("span",{children:((ki=(Ba=n.linguisticAnalysis)==null?void 0:Ba.sentenceTypes)==null?void 0:ki.interrogative)||0})]}),l.jsxs("div",{className:"type-item",children:[l.jsx("span",{children:"Exclamatory:"}),l.jsx("span",{children:((Pa=(La=n.linguisticAnalysis)==null?void 0:La.sentenceTypes)==null?void 0:Pa.exclamatory)||0})]})]})]}),l.jsxs("div",{className:"linguistic-card",children:[l.jsx("h3",{children:" Tense Distribution"}),l.jsxs("div",{className:"tense-analysis",children:[l.jsxs("div",{className:"tense-item",children:[l.jsx("span",{children:"Past:"}),l.jsx("span",{children:((Es=(Vs=n.linguisticAnalysis)==null?void 0:Vs.tenseDistribution)==null?void 0:Es.past)||0})]}),l.jsxs("div",{className:"tense-item",children:[l.jsx("span",{children:"Present:"}),l.jsx("span",{children:((Sr=(xn=n.linguisticAnalysis)==null?void 0:xn.tenseDistribution)==null?void 0:Sr.present)||0})]}),l.jsxs("div",{className:"tense-item",children:[l.jsx("span",{children:"Future:"}),l.jsx("span",{children:((en=(Br=n.linguisticAnalysis)==null?void 0:Br.tenseDistribution)==null?void 0:en.future)||0})]})]})]}),l.jsxs("div",{className:"linguistic-card",children:[l.jsx("h3",{children:" Structure Analysis"}),l.jsxs("div",{className:"structure-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Coherence Score:"}),l.jsxs("span",{children:[((Kr=n.structuralAnalysis)==null?void 0:Kr.coherenceScore)||0,"/100"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Transition Words:"}),l.jsx("span",{children:((an=n.structuralAnalysis)==null?void 0:an.transitionWords)||0})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Organization:"}),l.jsx("span",{children:((En=n.structuralAnalysis)==null?void 0:En.organizationPattern)||"N/A"})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Bullet Points:"}),l.jsx("span",{children:((fn=(_n=n.structuralAnalysis)==null?void 0:_n.listElements)==null?void 0:fn.bulletPoints)||0})]})]})]})]})}),N==="content"&&l.jsx("div",{className:"analysis-section",children:l.jsxs("div",{className:"content-grid",children:[l.jsxs("div",{className:"content-card",children:[l.jsx("h3",{children:" Content Types"}),l.jsxs("div",{className:"content-types",children:[l.jsxs("div",{className:"type-bar",children:[l.jsx("span",{children:"Factual Statements:"}),l.jsx("div",{className:"bar-container",children:l.jsx("div",{className:"bar-fill",style:{width:`${(((Yn=(on=n.contentAnalysis)==null?void 0:on.contentTypes)==null?void 0:Yn.factual)||0)*10}%`}})}),l.jsx("span",{children:(xa=(ri=n.contentAnalysis)==null?void 0:ri.contentTypes)==null?void 0:xa.factual})]}),l.jsxs("div",{className:"type-bar",children:[l.jsx("span",{children:"Opinions:"}),l.jsx("div",{className:"bar-container",children:l.jsx("div",{className:"bar-fill",style:{width:`${(((Ui=(qi=n.contentAnalysis)==null?void 0:qi.contentTypes)==null?void 0:Ui.opinions)||0)*10}%`}})}),l.jsx("span",{children:(Vi=(zi=n.contentAnalysis)==null?void 0:zi.contentTypes)==null?void 0:Vi.opinions})]}),l.jsxs("div",{className:"type-bar",children:[l.jsx("span",{children:"Examples:"}),l.jsx("div",{className:"bar-container",children:l.jsx("div",{className:"bar-fill",style:{width:`${(((Rs=(Ds=n.contentAnalysis)==null?void 0:Ds.contentTypes)==null?void 0:Rs.examples)||0)*10}%`}})}),l.jsx("span",{children:(ro=(_r=n.contentAnalysis)==null?void 0:_r.contentTypes)==null?void 0:ro.examples})]})]})]}),l.jsxs("div",{className:"content-card",children:[l.jsx("h3",{children:" Named Entities"}),l.jsxs("div",{className:"entities-grid",children:[l.jsxs("div",{className:"entity-group",children:[l.jsx("h4",{children:" People"}),l.jsx("ul",{children:((bs=(no=n.namedEntities)==null?void 0:no.people)==null?void 0:bs.length)>0?n.namedEntities.people.slice(0,3).map(($t,gn)=>l.jsx("li",{children:$t},gn)):l.jsx("li",{children:"No people identified"})})]}),l.jsxs("div",{className:"entity-group",children:[l.jsx("h4",{children:" Organizations"}),l.jsx("ul",{children:((Na=(bo=n.namedEntities)==null?void 0:bo.organizations)==null?void 0:Na.length)>0?n.namedEntities.organizations.slice(0,3).map(($t,gn)=>l.jsx("li",{children:$t},gn)):l.jsx("li",{children:"No organizations identified"})})]}),l.jsxs("div",{className:"entity-group",children:[l.jsx("h4",{children:" Locations"}),l.jsx("ul",{children:((Fi=(Mi=n.namedEntities)==null?void 0:Mi.locations)==null?void 0:Fi.length)>0?n.namedEntities.locations.slice(0,3).map(($t,gn)=>l.jsx("li",{children:$t},gn)):l.jsx("li",{children:"No locations identified"})})]}),l.jsxs("div",{className:"entity-group",children:[l.jsx("h4",{children:" Dates"}),l.jsx("ul",{children:((hr=(Dt=n.namedEntities)==null?void 0:Dt.dates)==null?void 0:hr.length)>0?n.namedEntities.dates.slice(0,3).map(($t,gn)=>l.jsx("li",{children:$t},gn)):l.jsx("li",{children:"No dates identified"})})]})]})]}),l.jsxs("div",{className:"content-card",children:[l.jsx("h3",{children:" Question Analysis"}),l.jsxs("div",{className:"question-analysis-header",children:[l.jsxs("div",{className:"question-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{children:"Total Questions:"}),l.jsx("span",{className:"stat-value",children:((Yr=n.questionAnalysis)==null?void 0:Yr.totalQuestions)||0})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{children:"Direct Questions:"}),l.jsx("span",{className:"stat-value",children:((Ur=n.questionAnalysis)==null?void 0:Ur.direct)||0})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{children:"Rhetorical Questions:"}),l.jsx("span",{className:"stat-value",children:((rn=n.questionAnalysis)==null?void 0:rn.rhetorical)||0})]})]}),l.jsxs("div",{className:"question-types-grid",children:[l.jsxs("div",{className:"question-type-item",children:[l.jsx("span",{className:"type-label",children:"What:"}),l.jsx("span",{className:"type-count",children:((ii=(An=n.questionAnalysis)==null?void 0:An.questionTypes)==null?void 0:ii.what)||0})]}),l.jsxs("div",{className:"question-type-item",children:[l.jsx("span",{className:"type-label",children:"How:"}),l.jsx("span",{className:"type-count",children:((xi=(ba=n.questionAnalysis)==null?void 0:ba.questionTypes)==null?void 0:xi.how)||0})]}),l.jsxs("div",{className:"question-type-item",children:[l.jsx("span",{className:"type-label",children:"Why:"}),l.jsx("span",{className:"type-count",children:((na=(ns=n.questionAnalysis)==null?void 0:ns.questionTypes)==null?void 0:na.why)||0})]}),l.jsxs("div",{className:"question-type-item",children:[l.jsx("span",{className:"type-label",children:"When:"}),l.jsx("span",{className:"type-count",children:((Ha=(ia=n.questionAnalysis)==null?void 0:ia.questionTypes)==null?void 0:Ha.when)||0})]}),l.jsxs("div",{className:"question-type-item",children:[l.jsx("span",{className:"type-label",children:"Where:"}),l.jsx("span",{className:"type-count",children:((Ps=(io=n.questionAnalysis)==null?void 0:io.questionTypes)==null?void 0:Ps.where)||0})]}),l.jsxs("div",{className:"question-type-item",children:[l.jsx("span",{className:"type-label",children:"Who:"}),l.jsx("span",{className:"type-count",children:((ao=(Po=n.questionAnalysis)==null?void 0:Po.questionTypes)==null?void 0:ao.who)||0})]}),l.jsxs("div",{className:"question-type-item",children:[l.jsx("span",{className:"type-label",children:"Yes/No:"}),l.jsx("span",{className:"type-count",children:((No=(Qo=n.questionAnalysis)==null?void 0:Qo.questionTypes)==null?void 0:No.yesNo)||0})]}),l.jsxs("div",{className:"question-type-item",children:[l.jsx("span",{className:"type-label",children:"Other:"}),l.jsx("span",{className:"type-count",children:((zo=(el=n.questionAnalysis)==null?void 0:el.questionTypes)==null?void 0:zo.other)||0})]})]})]}),l.jsxs("div",{className:"questions-list",children:[l.jsx("h4",{children:" Questions Found in Text:"}),((uc=(Jc=n.questionAnalysis)==null?void 0:Jc.questionsWithContext)==null?void 0:uc.length)>0?l.jsx("div",{className:"extracted-questions",children:n.questionAnalysis.questionsWithContext.map(($t,gn)=>l.jsxs("div",{className:`question-item ${$t.isRhetorical?"rhetorical":"direct"}`,children:[l.jsxs("div",{className:"question-header",children:[l.jsxs("span",{className:"question-number",children:["Q",gn+1]}),l.jsx("span",{className:`question-type-badge ${$t.type}`,children:$t.type.toUpperCase()}),l.jsx("span",{className:`question-style-badge ${$t.isRhetorical?"rhetorical":"direct"}`,children:$t.isRhetorical?"Rhetorical":"Direct"})]}),l.jsx("div",{className:"question-text",children:$t.text}),$t.context&&($t.context.before||$t.context.after)&&l.jsxs("div",{className:"question-context",children:[$t.context.before&&l.jsxs("div",{className:"context-before",children:[l.jsx("strong",{children:"Context before:"})," ",$t.context.before]}),$t.context.after&&l.jsxs("div",{className:"context-after",children:[l.jsx("strong",{children:"Context after:"})," ",$t.context.after]})]})]},gn))}):l.jsxs("div",{className:"no-questions",children:[l.jsx("div",{className:"no-questions-icon",children:""}),l.jsx("p",{children:"No questions found in this transcript."}),l.jsx("p",{className:"suggestion",children:"This suggests a more declarative communication style focused on providing information rather than seeking it."})]})]})]}),l.jsxs("div",{className:"content-card",children:[l.jsx("h3",{children:" Action Items"}),l.jsx("div",{className:"action-items",children:n.actionItems&&n.actionItems.length>0?n.actionItems.slice(0,5).map(($t,gn)=>{var qn;return l.jsxs("div",{className:`action-item priority-${((qn=$t.priority)==null?void 0:qn.toLowerCase())||"low"}`,children:[l.jsx("div",{className:"action-text",children:$t.text}),l.jsxs("div",{className:"action-meta",children:[l.jsx("span",{className:"priority",children:$t.priority||"Low"}),l.jsx("span",{className:"type",children:$t.type||"Task"})]})]},gn)}):l.jsx("div",{className:"action-item priority-low",children:l.jsx("div",{className:"action-text",children:"No action items identified"})})})]}),l.jsxs("div",{className:"content-card",children:[l.jsx("h3",{children:" Themes"}),l.jsx("div",{className:"themes-list",children:n.themes&&n.themes.length>0?n.themes.map(($t,gn)=>l.jsxs("div",{className:"theme-item",children:[l.jsx("span",{className:"theme-name",children:$t.theme}),l.jsx("span",{className:"theme-count",children:$t.count})]},gn)):l.jsxs("div",{className:"theme-item",children:[l.jsx("span",{className:"theme-name",children:"No themes identified"}),l.jsx("span",{className:"theme-count",children:"0"})]})})]}),l.jsxs("div",{className:"content-card",children:[l.jsx("h3",{children:" Time Analysis"}),l.jsxs("div",{className:"time-analysis",children:[l.jsxs("div",{className:"time-orientation",children:[l.jsxs("div",{className:"time-item",children:[l.jsx("span",{children:"Past Focus:"}),l.jsx("span",{children:((dc=(Ns=n.timeAnalysis)==null?void 0:Ns.timeOrientation)==null?void 0:dc.past)||0})]}),l.jsxs("div",{className:"time-item",children:[l.jsx("span",{children:"Present Focus:"}),l.jsx("span",{children:((Al=(tl=n.timeAnalysis)==null?void 0:tl.timeOrientation)==null?void 0:Al.present)||0})]}),l.jsxs("div",{className:"time-item",children:[l.jsx("span",{children:"Future Focus:"}),l.jsx("span",{children:((Cl=(is=n.timeAnalysis)==null?void 0:is.timeOrientation)==null?void 0:Cl.future)||0})]})]}),l.jsxs("div",{className:"dominant-tense",children:[l.jsx("strong",{children:"Dominant Tense:"})," ",((rl=n.timeAnalysis)==null?void 0:rl.dominantTense)||"N/A"]})]})]})]})}),N==="charts"&&l.jsxs("div",{className:"analysis-section",children:[l.jsxs("div",{className:"charts-intro",children:[l.jsx("h3",{children:" Visual Analytics Dashboard"}),l.jsx("p",{children:"Comprehensive visual analysis of your transcript content with interactive charts and advanced metrics."})]}),l.jsxs("div",{className:"insights-cards",children:[l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-icon",children:""}),l.jsxs("div",{className:"insight-content",children:[l.jsx("h4",{children:"Content Quality Score"}),l.jsxs("div",{className:"insight-value",children:[((fc=a==null?void 0:a.statisticsData)==null?void 0:fc.confidenceScore)||0,"%"]}),l.jsx("p",{children:"Overall analysis confidence"})]})]}),l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-icon",children:""}),l.jsxs("div",{className:"insight-content",children:[l.jsx("h4",{children:"Dominant Sentiment"}),l.jsx("div",{className:"insight-value",children:((nl=n==null?void 0:n.sentiment)==null?void 0:nl.label)||"Neutral"}),l.jsxs("p",{children:[((((za=n==null?void 0:n.sentiment)==null?void 0:za.confidence)||0)*100).toFixed(1),"% confidence"]})]})]}),l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-icon",children:""}),l.jsxs("div",{className:"insight-content",children:[l.jsx("h4",{children:"Reading Level"}),l.jsx("div",{className:"insight-value",children:((Wa=($s=n==null?void 0:n.contentAnalysis)==null?void 0:$s.overview)==null?void 0:Wa.readingLevel)||"Medium"}),l.jsxs("p",{children:[((hc=a==null?void 0:a.statisticsData)==null?void 0:hc.readingTime)||0," min read"]})]})]}),l.jsxs("div",{className:"insight-card",children:[l.jsx("div",{className:"insight-icon",children:""}),l.jsxs("div",{className:"insight-content",children:[l.jsx("h4",{children:"Questions Found"}),l.jsx("div",{className:"insight-value",children:((Fn=a==null?void 0:a.statisticsData)==null?void 0:Fn.questionCount)||0}),l.jsx("p",{children:"Interactive elements detected"})]})]})]}),l.jsxs("div",{className:"charts-grid",children:[l.jsxs("div",{className:"chart-container",children:[l.jsx("h4",{children:"Sentiment Analysis"}),l.jsx("canvas",{ref:me}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Distribution of positive, negative, and neutral sentiments in the content"})})]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h4",{children:"Top Keywords"}),l.jsx("canvas",{ref:fe}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Most frequently used words and their occurrence counts"})})]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h4",{children:"Topic Distribution"}),l.jsx("canvas",{ref:Te}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Main topics covered in the content and their relative importance"})})]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h4",{children:"Emotional Analysis"}),l.jsx("canvas",{ref:qe}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Emotional spectrum analysis showing different emotional intensities"})})]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h4",{children:"Question Types"}),l.jsx("canvas",{ref:Ue}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Distribution of different question types (What, How, Why, etc.)"})})]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h4",{children:"Question Complexity"}),l.jsx("canvas",{ref:Ee}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Analysis of question complexity levels from simple to complex"})})]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h4",{children:"Linguistic Features"}),l.jsx("canvas",{ref:Fe}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Analysis of linguistic complexity, vocabulary, and readability"})})]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h4",{children:"Time References"}),l.jsx("canvas",{ref:He}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Distribution of past, present, and future time references"})})]}),l.jsxs("div",{className:"chart-container chart-wide",children:[l.jsx("h4",{children:"Content Quality Metrics"}),l.jsx("canvas",{ref:tt}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Advanced metrics showing content diversity, emotional range, and analytical depth"})})]})]}),l.jsxs("div",{className:"plotly-chart-container",children:[l.jsx("h4",{children:" Interactive Dashboard"}),l.jsx("div",{ref:Ve}),l.jsx("div",{className:"chart-info",children:l.jsx("p",{children:"Interactive multi-dimensional analysis combining keywords, topics, and sentiment data"})})]})]}),N==="summary"&&(n==null?void 0:n.analysisSections)&&l.jsx("div",{className:"analysis-sections-grid",children:n.analysisSections.map(($t,gn)=>l.jsxs("div",{className:"analysis-section-card white-text",children:[l.jsx("h4",{children:$t.label}),l.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify($t,null,2)})]},gn))}),N==="statistics"&&l.jsx("div",{className:"analysis-section",children:l.jsxs("div",{className:"statistics-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("h4",{children:" Text Statistics"}),l.jsxs("div",{className:"stat-details",children:[l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{children:"Words:"}),l.jsx("span",{children:((oi=n.statistics)==null?void 0:oi.wordCount)||0})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{children:"Sentences:"}),l.jsx("span",{children:((pc=n.statistics)==null?void 0:pc.sentenceCount)||0})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{children:"Paragraphs:"}),l.jsx("span",{children:((Qc=n.statistics)==null?void 0:Qc.paragraphCount)||0})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{children:"Reading Time:"}),l.jsxs("span",{children:[((Ku=n.statistics)==null?void 0:Ku.readingTime)||0," minutes"]})]})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("h4",{children:" Readability"}),l.jsxs("div",{className:"readability-score",children:[l.jsxs("div",{className:"score-circle",children:[l.jsx("span",{className:"score-value",children:Math.round(n.readabilityScore||0)}),l.jsx("span",{className:"score-label",children:"/100"})]}),l.jsx("p",{className:"readability-description",children:(n.readabilityScore||0)>=70?"Easy to read":(n.readabilityScore||0)>=50?"Moderate difficulty":"Difficult to read"})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("h4",{children:" Top Keywords"}),l.jsx("div",{className:"keywords-list",children:n.keywords&&n.keywords.length>0?n.keywords.slice(0,5).map(($t,gn)=>l.jsxs("div",{className:"keyword-item",children:[l.jsx("span",{className:"keyword-word",children:$t.word}),l.jsxs("span",{className:"keyword-count",children:[$t.count,"x"]})]},gn)):l.jsxs("div",{className:"keyword-item",children:[l.jsx("span",{className:"keyword-word",children:"No keywords found"}),l.jsx("span",{className:"keyword-count",children:"0x"})]})})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("h4",{children:" Confidence Scores"}),l.jsxs("div",{className:"confidence-scores",children:[l.jsxs("div",{className:"confidence-item",children:[l.jsx("span",{children:"Overall Analysis Confidence:"}),l.jsx("div",{className:"confidence-bar",children:l.jsx("div",{className:"confidence-fill",style:{width:`${((mc=a==null?void 0:a.statisticsData)==null?void 0:mc.confidenceScore)||0}%`}})}),l.jsxs("span",{children:[((ji=a==null?void 0:a.statisticsData)==null?void 0:ji.confidenceScore)||0,"%"]})]}),l.jsxs("div",{className:"confidence-item",children:[l.jsx("span",{children:"Sentiment Confidence:"}),l.jsx("div",{className:"confidence-bar",children:l.jsx("div",{className:"confidence-fill",style:{width:`${(((zf=n.sentiment)==null?void 0:zf.confidence)||0)*100}%`}})}),l.jsxs("span",{children:[((((Ju=n.sentiment)==null?void 0:Ju.confidence)||0)*100).toFixed(1),"%"]})]}),l.jsxs("div",{className:"confidence-item",children:[l.jsx("span",{children:"Readability Confidence:"}),l.jsx("div",{className:"confidence-bar",children:l.jsx("div",{className:"confidence-fill",style:{width:`${Math.min(100,n.readabilityScore||0)}%`}})}),l.jsxs("span",{children:[Math.round(n.readabilityScore||0),"%"]})]}),l.jsxs("div",{className:"confidence-item",children:[l.jsx("span",{children:"Keywords Confidence:"}),l.jsx("div",{className:"confidence-bar",children:l.jsx("div",{className:"confidence-fill",style:{width:`${Math.min(100,(((Ff=n.keywords)==null?void 0:Ff.length)||0)*10)}%`}})}),l.jsxs("span",{children:[Math.min(100,(((Qu=n.keywords)==null?void 0:Qu.length)||0)*10),"%"]})]}),l.jsxs("div",{className:"confidence-item",children:[l.jsx("span",{children:"Content Analysis Confidence:"}),l.jsx("div",{className:"confidence-bar",children:l.jsx("div",{className:"confidence-fill",style:{width:`${Math.min(100,(((If=n.statistics)==null?void 0:If.wordCount)||0)/10)}%`}})}),l.jsxs("span",{children:[Math.min(100,Math.round((((Of=n.statistics)==null?void 0:Of.wordCount)||0)/10)),"%"]})]})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("h4",{children:" Analysis Accuracy Metrics"}),l.jsxs("div",{className:"accuracy-metrics",children:[l.jsxs("div",{className:"metric-item",children:[l.jsx("span",{children:"Data Quality Score:"}),l.jsx("div",{className:"metric-value high",children:((Bf=n.statistics)==null?void 0:Bf.wordCount)>100?"High":((Ys=n.statistics)==null?void 0:Ys.wordCount)>50?"Medium":"Low"})]}),l.jsxs("div",{className:"metric-item",children:[l.jsx("span",{children:"Analysis Depth:"}),l.jsx("div",{className:"metric-value medium",children:((Fo=n.keywords)==null?void 0:Fo.length)>10?"Deep":((Hf=n.keywords)==null?void 0:Hf.length)>5?"Moderate":"Basic"})]}),l.jsxs("div",{className:"metric-item",children:[l.jsx("span",{children:"Entity Recognition:"}),l.jsx("div",{className:"metric-value high",children:(((eu=(ed=n.namedEntities)==null?void 0:ed.people)==null?void 0:eu.length)||0)+(((Wf=(td=n.namedEntities)==null?void 0:td.organizations)==null?void 0:Wf.length)||0)+(((qf=(rd=n.namedEntities)==null?void 0:rd.locations)==null?void 0:qf.length)||0)>5?"Excellent":(((Uf=(tu=n.namedEntities)==null?void 0:tu.people)==null?void 0:Uf.length)||0)+(((nd=(ru=n.namedEntities)==null?void 0:ru.organizations)==null?void 0:nd.length)||0)+(((ad=(id=n.namedEntities)==null?void 0:id.locations)==null?void 0:ad.length)||0)>2?"Good":"Basic"})]}),l.jsxs("div",{className:"metric-item",children:[l.jsx("span",{children:"Linguistic Coverage:"}),l.jsx("div",{className:"metric-value medium",children:((nu=n.linguisticAnalysis)==null?void 0:nu.uniqueWords)>50?"Comprehensive":((Vf=n.linguisticAnalysis)==null?void 0:Vf.uniqueWords)>25?"Adequate":"Limited"})]})]})]})]})}),N==="questions"&&l.jsxs("div",{className:"analysis-section",children:[l.jsxs("div",{className:"questions-overview",children:[l.jsxs("div",{className:"questions-summary",children:[l.jsx("h3",{children:l.jsx(eg,{text:" Questions Analysis Overview",speed:80,className:"section-title"})}),l.jsxs("div",{className:"questions-summary-stats",children:[l.jsxs("div",{className:"summary-stat",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsxs("div",{className:"stat-info",children:[l.jsx("div",{className:"stat-number",children:l.jsx(cl,{value:(($f=n.questionAnalysis)==null?void 0:$f.totalQuestions)||0})}),l.jsx("div",{className:"stat-label",children:"Total Questions"})]})]}),l.jsxs("div",{className:"summary-stat",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsxs("div",{className:"stat-info",children:[l.jsx("div",{className:"stat-number",children:l.jsx(cl,{value:((sd=n.questionAnalysis)==null?void 0:sd.direct)||0})}),l.jsx("div",{className:"stat-label",children:"Direct Questions"})]})]}),l.jsxs("div",{className:"summary-stat",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsxs("div",{className:"stat-info",children:[l.jsx("div",{className:"stat-number",children:l.jsx(cl,{value:((Yf=n.questionAnalysis)==null?void 0:Yf.rhetorical)||0})}),l.jsx("div",{className:"stat-label",children:"Rhetorical Questions"})]})]})]})]}),l.jsxs("div",{className:"question-types-breakdown",children:[l.jsx("h3",{children:l.jsx(eg,{text:" Question Types Breakdown",speed:80,className:"section-title"})}),l.jsxs("div",{className:"question-type-stats",children:[l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{children:"Question Density:"}),l.jsxs("span",{className:"stat-value",children:[((Gf=n.questionAnalysis)==null?void 0:Gf.questionDensity)||0,"%"]})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{children:"Average Complexity:"}),l.jsx("span",{className:"stat-value",children:((Xf=n.questionAnalysis)==null?void 0:Xf.averageComplexity)||"N/A"})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{children:"Most Common Type:"}),l.jsx("span",{className:"stat-value",children:((so=n.questionAnalysis)==null?void 0:so.mostCommonType)||"N/A"})]})]}),l.jsx("div",{className:"types-grid",children:Object.entries(((jl=n.questionAnalysis)==null?void 0:jl.questionTypes)||{}).map(([$t,gn])=>l.jsxs("div",{className:"type-breakdown-item",children:[l.jsxs("div",{className:`type-icon ${$t}`,children:[$t==="what"&&"",$t==="how"&&"",$t==="why"&&"",$t==="when"&&"",$t==="where"&&"",$t==="who"&&"",$t==="which"&&"",$t==="whose"&&"",$t==="yesNo"&&"",$t==="choice"&&"",$t==="confirmation"&&"",$t==="other"&&""]}),l.jsxs("div",{className:"type-info",children:[l.jsx("div",{className:"type-count",children:l.jsx(cl,{value:gn})}),l.jsx("div",{className:"type-name",children:$t.charAt(0).toUpperCase()+$t.slice(1)}),l.jsx("div",{className:"type-description",children:qt($t)})]})]},$t))}),l.jsxs("div",{className:"question-purposes",children:[l.jsx("h4",{children:" Question Purposes"}),l.jsx("div",{className:"purposes-grid",children:Object.entries(((iu=n.questionAnalysis)==null?void 0:iu.questionPurposes)||{}).map(([$t,gn])=>l.jsxs("div",{className:"purpose-item",children:[l.jsxs("div",{className:"purpose-icon",children:[$t==="information"&&"",$t==="clarification"&&"",$t==="confirmation"&&"",$t==="engagement"&&"",$t==="reflection"&&"",$t==="challenge"&&""]}),l.jsxs("div",{className:"purpose-details",children:[l.jsx("div",{className:"purpose-count",children:gn}),l.jsx("div",{className:"purpose-name",children:$t})]})]},$t))})]}),l.jsxs("div",{className:"complexity-analysis",children:[l.jsx("h4",{children:" Complexity Distribution"}),l.jsx("div",{className:"complexity-grid",children:Object.entries(((au=n.questionAnalysis)==null?void 0:au.complexityLevels)||{}).map(([$t,gn])=>l.jsxs("div",{className:"complexity-item",children:[l.jsxs("div",{className:`complexity-indicator ${$t}`,children:[l.jsx("div",{className:"complexity-count",children:gn}),l.jsx("div",{className:"complexity-level",children:$t})]}),l.jsx("div",{className:"complexity-description",children:Vt($t)})]},$t))})]}),((su=n.questionAnalysis)==null?void 0:su.questionInsights)&&l.jsxs("div",{className:"question-insights",children:[l.jsx("h4",{children:" Question Analysis Insights"}),l.jsx("div",{className:"insights-list",children:n.questionAnalysis.questionInsights.map(($t,gn)=>l.jsxs("div",{className:"insight-item",children:[l.jsx("div",{className:"insight-icon",children:""}),l.jsx("div",{className:"insight-text",children:$t})]},gn))})]})]})]}),l.jsxs("div",{className:"all-questions-list",children:[l.jsx("h3",{children:" All Questions Found"}),((Io=(ou=n.questionAnalysis)==null?void 0:ou.questionsWithContext)==null?void 0:Io.length)>0?l.jsx("div",{className:"questions-container",children:n.questionAnalysis.questionsWithContext.map(($t,gn)=>l.jsxs("div",{className:`detailed-question-item ${$t.isRhetorical?"rhetorical":"direct"}`,children:[l.jsxs("div",{className:"question-header-detailed",children:[l.jsxs("div",{className:"question-meta",children:[l.jsxs("span",{className:"question-number",children:["#",gn+1]}),l.jsx("span",{className:`question-type-badge ${$t.type}`,children:$t.type.toUpperCase()}),l.jsx("span",{className:`question-subtype-badge ${$t.subType}`,children:$t.subType}),l.jsx("span",{className:`question-style-badge ${$t.isRhetorical?"rhetorical":"direct"}`,children:$t.isRhetorical?"Rhetorical":"Direct"}),l.jsx("span",{className:`complexity-badge ${$t.complexity}`,children:$t.complexity})]}),l.jsxs("div",{className:"question-position",children:["Position: ",$t.index+1," | Purpose: ",$t.purpose]})]}),l.jsxs("div",{className:"question-content",children:[l.jsx("div",{className:"question-text-large",children:$t.text}),l.jsxs("div",{className:"question-explanation",children:[l.jsx("strong",{children:"Analysis:"})," ",$t.explanation]}),$t.context&&($t.context.before||$t.context.after)&&l.jsxs("div",{className:"question-context-detailed",children:[l.jsx("h4",{children:" Context"}),$t.context.before&&l.jsxs("div",{className:"context-section",children:[l.jsx("strong",{className:"context-label",children:"Before:"}),l.jsx("span",{className:"context-text",children:$t.context.before})]}),$t.context.after&&l.jsxs("div",{className:"context-section",children:[l.jsx("strong",{className:"context-label",children:"After:"}),l.jsx("span",{className:"context-text",children:$t.context.after})]})]}),l.jsxs("div",{className:"question-analysis",children:[l.jsxs("div",{className:"analysis-item",children:[l.jsx("span",{className:"analysis-label",children:"Type:"}),l.jsxs("span",{className:"analysis-value",children:[$t.type," (",$t.subType,")"]})]}),l.jsxs("div",{className:"analysis-item",children:[l.jsx("span",{className:"analysis-label",children:"Purpose:"}),l.jsx("span",{className:"analysis-value",children:$t.purpose})]}),l.jsxs("div",{className:"analysis-item",children:[l.jsx("span",{className:"analysis-label",children:"Complexity:"}),l.jsx("span",{className:"analysis-value",children:$t.complexity})]}),l.jsxs("div",{className:"analysis-item",children:[l.jsx("span",{className:"analysis-label",children:"Style:"}),l.jsx("span",{className:"analysis-value",children:$t.isRhetorical?"Rhetorical":"Direct"})]})]})]})]},gn))}):l.jsxs("div",{className:"no-questions",children:[l.jsx("div",{className:"no-questions-icon",children:""}),l.jsx("p",{children:"No questions found in this transcript."}),l.jsx("p",{className:"suggestion",children:"This suggests a more declarative communication style focused on providing information rather than seeking it."})]})]})]}),N==="transcript"&&l.jsx("div",{className:"analysis-section",children:l.jsxs("div",{className:"transcript-word-analysis",children:[l.jsxs("div",{className:"transcript-header",children:[l.jsx("h3",{children:" Word-by-Word Analysis"}),l.jsxs("div",{className:"transcript-stats",children:[l.jsxs("span",{className:"stat-badge",children:["Total Words: ",((lu=n.statistics)==null?void 0:lu.wordCount)||0]}),l.jsxs("span",{className:"stat-badge",children:["Unique Words: ",((od=n.linguisticAnalysis)==null?void 0:od.uniqueWords)||0]}),l.jsxs("span",{className:"stat-badge",children:["Avg Word Length: ",((vc=n.linguisticAnalysis)==null?void 0:vc.averageWordLength)||0," chars"]})]})]}),l.jsxs("div",{className:"word-cloud-container",children:[l.jsx("h4",{children:" Word Frequency Analysis"}),l.jsx("div",{className:"word-cloud",children:n.keywords&&n.keywords.length>0?n.keywords.slice(0,20).map(($t,gn)=>l.jsxs("span",{className:"word-bubble",style:{fontSize:`${Math.min(20,10+$t.count*2)}px`,opacity:Math.min(1,.5+$t.count*.1)},children:[$t.word," (",$t.count,")"]},gn)):l.jsx("span",{className:"word-bubble",children:"No keywords found"})})]}),l.jsxs("div",{className:"transcript-text-analysis",children:[l.jsx("h4",{children:" Annotated Transcript"}),l.jsx("div",{className:"transcript-text",children:t.split(/\s+/).map(($t,gn)=>{var Gs,oo,il,al,gc,Ll,El;const qn=$t.toLowerCase().replace(/[^\w]/g,""),ua=(Gs=n.keywords)==null?void 0:Gs.some(Oo=>Oo.word===qn),ws=((il=(oo=n.namedEntities)==null?void 0:oo.people)==null?void 0:il.includes($t))||((gc=(al=n.namedEntities)==null?void 0:al.organizations)==null?void 0:gc.includes($t))||((El=(Ll=n.namedEntities)==null?void 0:Ll.locations)==null?void 0:El.includes($t));return l.jsx("span",{className:`transcript-word ${ua?"keyword":""} ${ws?"named-entity":""}`,title:`Word ${gn+1}: ${$t}${ua?" (Keyword)":""}${ws?" (Named Entity)":""}`,children:$t},gn)})})]}),l.jsxs("div",{className:"word-analysis-legend",children:[l.jsx("h4",{children:" Legend"}),l.jsxs("div",{className:"legend-items",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color keyword-color"}),l.jsx("span",{children:"Keywords (High frequency words)"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color named-entity-color"}),l.jsx("span",{children:"Named Entities (People, Organizations, Locations)"})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color normal-color"}),l.jsx("span",{children:"Regular words"})]})]})]})]})})]})]})]})):null},_p=new Map,DS=t=>{if(!t||typeof t!="string")return{wordCount:0,sentenceCount:0,averageWordsPerSentence:0,readingTime:0,basicSentiment:"neutral",keyPhrases:[],processingTime:0};const e=Date.now(),r=`fast_${t.substring(0,100)}`;if(_p.has(r))return{..._p.get(r),cached:!0};const n=t.trim().split(/\s+/).filter(_=>_.length>0),i=t.split(/[.!?]+/).filter(_=>_.trim().length>0),a=O9(t),s=B9(t),f={wordCount:n.length,sentenceCount:i.length,averageWordsPerSentence:i.length>0?Math.round(n.length/i.length*10)/10:0,readingTime:Math.ceil(n.length/200),basicSentiment:a.sentiment,sentimentScore:a.score,sentimentConfidence:a.confidence,sarcasmDetected:a.sarcasmDetected,sarcasmConfidence:a.sarcasmConfidence,keyPhrases:s.slice(0,5),processingTime:Date.now()-e};return _p.set(r,f),f},O9=t=>{const e=RS(t);if(e.isSarcastic&&e.confidence>.3)return{sentiment:"sarcastic",score:-.6,confidence:e.confidence,sarcasmDetected:!0,sarcasmConfidence:e.confidence,reasoning:e.reasoning};const r=t.toLowerCase(),i=["excited","amazing","incredible","awesome","fantastic","wonderful","brilliant","outstanding","excellent","superb","thrilled","love","adore"].filter(et=>r.includes(et)).length,s=["certain","sure","confident","definitely","absolutely","guaranteed","without doubt","positive","convinced"].filter(et=>r.includes(et)).length,_=["worried","concerned","anxious","troubled","uneasy","nervous","apprehensive","fearful"].filter(et=>r.includes(et)).length,I=["interesting","curious","wonder","fascinating","intriguing","how does","what about","tell me more"].filter(et=>r.includes(et)).length,fe=["okay","fine","alright","normal","standard","typical","average","moderate"].filter(et=>r.includes(et)).length,Te=["good","great","excellent","amazing","wonderful","fantastic","love","like","enjoy","happy","excited"],qe=["bad","terrible","awful","hate","dislike","angry","frustrated","annoying","difficult","problem"],Ve=Te.filter(et=>r.includes(et)).length,Ue=qe.filter(et=>r.includes(et)).length,Ee={enthusiasm:i*3,confidence:s*3,concern:_*3,curiosity:I*2.5,neutral:fe*2,positive:Ve*2,negative:Ue*2},Fe=Object.entries(Ee).reduce((et,[ct,xt])=>xt>et.score?{emotion:ct,score:xt}:et,{emotion:"neutral",score:0});let He="neutral",tt=0;if(Fe.score>2)switch(Fe.emotion){case"enthusiasm":He="enthusiastic",tt=.8;break;case"confidence":He="confident",tt=.6;break;case"concern":He="concerned",tt=-.3;break;case"curiosity":He="curious",tt=.4;break;case"positive":He="positive",tt=.5;break;case"negative":He="negative",tt=-.5;break;default:He="neutral",tt=0}return e.isSarcastic&&(He="sarcastic",tt=-.3),{sentiment:He,score:tt,confidence:Math.max(.3,Fe.score/10),sarcasmDetected:e.isSarcastic,sarcasmConfidence:e.confidence,emotionBreakdown:Ee,topEmotion:Fe.emotion}},B9=t=>{const e=t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/),r=new Map;for(let n=0;n<e.length-1;n++)if(e[n].length>2&&e[n+1].length>2){const i=`${e[n]} ${e[n+1]}`;if(r.set(i,(r.get(i)||0)+1),n<e.length-2&&e[n+2].length>2){const a=`${e[n]} ${e[n+1]} ${e[n+2]}`;r.set(a,(r.get(a)||0)+1)}}return Array.from(r.entries()).filter(([n,i])=>i>1&&n.length>5).sort((n,i)=>i[1]-n[1]).map(([n,i])=>({phrase:n,count:i}))},H9=async(t,e)=>{if(!t)return null;const r=[{name:"Basic Metrics",weight:20},{name:"Sentiment Analysis",weight:25},{name:"Topic Extraction",weight:25},{name:"Advanced Patterns",weight:30}];let n=0;const i={};return e&&e(0,"Starting analysis...","basic"),await new Promise(a=>setTimeout(a,50)),i.basic=DS(t),n+=r[0].weight,e&&e(n,"Basic metrics completed","basic"),await new Promise(a=>setTimeout(a,100)),i.sentiment=await W9(t),n+=r[1].weight,e&&e(n,"Sentiment analysis completed","sentiment"),await new Promise(a=>setTimeout(a,150)),i.topics=await V9(t),n+=r[2].weight,e&&e(n,"Topic analysis completed","topics"),await new Promise(a=>setTimeout(a,200)),i.advanced=await Y9(t),n=100,e&&e(n,"Analysis completed!","complete"),i},W9=async t=>{const e=t.split(/[.!?]+/).filter(s=>s.trim().length>0),r=[],n=5;for(let s=0;s<e.length;s+=n){const f=e.slice(s,s+n).join(". "),_=q9(f);r.push({startIndex:s,endIndex:Math.min(s+n-1,e.length-1),sentiment:_,text:f.substring(0,100)+(f.length>100?"...":"")})}const i=r.reduce((s,f)=>s+f.sentiment.score,0)/r.length,a=r.reduce((s,f)=>s+f.sentiment.confidence,0)/r.length;return{overallScore:Math.round(i*100)/100,confidence:Math.round(a*100)/100,distribution:r,trend:U9(r)}},q9=t=>{t.toLowerCase();const e=RS(t);if(e.isSarcastic&&e.confidence>.4)return{score:-.7,confidence:e.confidence,positiveIndicators:0,negativeIndicators:e.indicators.length,sarcasmDetected:!0,sarcasmPatterns:e.patterns,reasoning:e.reasoning};const r=[/\b(excellent|amazing|wonderful|fantastic|great|good|love|like|enjoy|happy|excited|pleased|satisfied)\b/gi,/\b(awesome|brilliant|outstanding|remarkable|impressive|perfect|beautiful|incredible)\b/gi,/\b(thrilled|delighted|overjoyed|ecstatic|elated|jubilant|euphoric)\b/gi],n=[/\b(terrible|awful|horrible|bad|hate|dislike|angry|frustrated|annoying|difficult)\b/gi,/\b(disappointing|useless|worthless|pathetic|disgusting|revolting|appalling)\b/gi,/\b(furious|livid|enraged|infuriated|irritated|aggravated|exasperated)\b/gi];let i=0,a=0;r.forEach(N=>{const I=t.match(N);I&&(i+=I.length)}),n.forEach(N=>{const I=t.match(N);I&&(a+=I.length)}),e.isSarcastic&&(i=i*(1-e.confidence),a+=e.confidence*2);const s=t.split(/\s+/).length,f=(i-a)/Math.max(s/10,1),_=Math.min((i+a+(e.isSarcastic?1:0))/Math.max(s/20,1),1);return{score:Math.max(-1,Math.min(1,f)),confidence:Math.round(_*100)/100,positiveIndicators:i,negativeIndicators:a,sarcasmDetected:e.isSarcastic,sarcasmConfidence:e.confidence,sarcasmPatterns:e.patterns}},RS=t=>{const e=[],r=[];let n=0;const i=[];console.log(" Analyzing text for sarcasm:",t);const a=["putting.*dishes.*dishwasher","putting.*dishwasher","dishes.*dishwasher","doing.*laundry","taking.*trash","making.*bed","cleaning.*room","turning.*lights","closing.*door","sitting.*down","standing.*up","walking.*slowly","eating.*food","drinking.*water","breathing","opening.*window","washing.*hands","brushing.*teeth","getting.*dressed"],s=["revolutionary idea","revolutionary","groundbreaking","genius","brilliant move","incredible achievement","amazing discovery","masterpiece","work of art","stroke of genius","mind-blowing","what a.*idea","brilliant idea","fantastic","wonderful","amazing","incredible","outstanding","remarkable","extraordinary","phenomenal","spectacular","magnificent"];for(const et of a)if(new RegExp(et,"i").test(t)){console.log(" Found mundane activity:",et);for(const xt of s)new RegExp(xt,"i").test(t)&&(console.log(" Found exaggerated praise:",xt),n+=.8,e.push(`Exaggerated praise for mundane activity: "${et}" + "${xt}"`),i.push("Disproportionate praise for ordinary task suggests sarcasm"),r.push("exaggerated_praise_mundane"))}const f=["medal","trophy","award","prize","nobel.*prize","oscar","recognition","honor","achievement.*award","hall.*fame","certificate","ribbon","get.*medal","make sure.*medal","I'll.*medal","deserve.*medal","crown","title","badge","star","champion"];for(const et of f)new RegExp(et,"i").test(t)&&(console.log(" Found award reference:",et),n+=.7,e.push(`Award reference for simple task: "${et}"`),i.push("Suggesting awards/medals for basic activities indicates sarcasm"),r.push("award_reference"));/\?.*?(what.*?(revolutionary|groundbreaking|amazing|incredible|genius|idea|brilliant|fantastic|wonderful)|I'll.*?(make sure|definitely|absolutely|medal|get you)|how.*?(original|creative|innovative))/i.test(t)&&(console.log(" Found question + exaggeration pattern"),n+=.6,e.push("Rhetorical question followed by exaggerated response"),i.push("Question + exaggerated follow-up is a common sarcasm pattern"),r.push("question_exaggeration")),/^oh,?\s+.*?(great|wonderful|fantastic|amazing|brilliant|perfect|you|nice|good|cool|wow)/i.test(t.trim())&&(console.log(' Found "Oh" + positive pattern'),n+=.6,e.push('Opening with "Oh" followed by positive statement'),i.push('"Oh" at the beginning often signals sarcasm'),r.push("oh_positive"));const I=["make sure to","I shall","certainly will","absolutely must","definitely need to","I will ensure","rest assured","without a doubt","I guarantee","allow me to","permit me to","I would be delighted","it would be my pleasure"];for(const et of I)new RegExp(et,"i").test(t)&&/medal|award|recognition|achievement|brilliant|amazing|fantastic|wonderful|great/i.test(t)&&(console.log(" Found formal language in casual context:",et),n+=.5,e.push(`Formal language in casual context: "${et}"`),i.push("Overly formal language for trivial matters suggests sarcasm"),r.push("formal_trivial"));const me=["but","however","although","despite","nevertheless","yet","still"],fe=["great","wonderful","amazing","fantastic","brilliant","perfect","excellent","outstanding"];for(const et of me)for(const ct of fe)new RegExp(`${ct}.*?${et}|${et}.*?${ct}`,"i").test(t)&&(console.log(" Found contradiction pattern:",ct,et),n+=.4,e.push(`Contradiction pattern: "${ct}" with "${et}"`),i.push("Positive words with contradictions often indicate sarcasm"),r.push("contradiction"));/(!{2,})|(\?{2,})|\.{3,}/.test(t)&&(console.log(" Found excessive punctuation"),n+=.3,e.push("Excessive punctuation detected"),i.push("Excessive punctuation can indicate sarcastic emphasis"),r.push("excessive_punctuation")),/oh.*putting.*dishes.*dishwasher.*revolutionary.*idea.*medal/i.test(t)&&(console.log(" Found specific dishwasher sarcasm pattern!"),n+=.9,e.push("Classic dishwasher sarcasm: Oh + mundane task + revolutionary + medal"),i.push("This is a textbook example of sarcasm with multiple indicators"),r.push("dishwasher_sarcasm_combo")),/what a (revolutionary|brilliant|amazing|fantastic|great|wonderful|genius|incredible|marvelous|spectacular) (idea|concept|thought|plan|solution)/i.test(t)&&(console.log(' Found "What a [adjective] idea" pattern'),n+=.7,e.push('"What a [adjective] idea" sarcasm pattern'),i.push('"What a [adjective] idea" is often used sarcastically'),r.push("what_a_idea")),/how (original|creative|innovative|brilliant|amazing|wonderful|fantastic|thoughtful|considerate|helpful)/i.test(t)&&(console.log(' Found "How [adjective]" sarcastic pattern'),n+=.6,e.push('"How [adjective]" sarcastic expression'),i.push('"How [adjective]" is often used sarcastically'),r.push("how_adjective")),/\b(wow|amazing|incredible|fantastic|wonderful|brilliant|perfect|excellent|outstanding|remarkable|extraordinary)\b.*?\b(just what|exactly what|precisely what)\b/i.test(t)&&(console.log(" Found fake enthusiasm pattern"),n+=.6,e.push('Fake enthusiasm: positive word + "just what/exactly what"'),i.push('Exaggerated enthusiasm combined with "exactly what" suggests sarcasm'),r.push("fake_enthusiasm")),/(sure|right|okay|fine|alright),?\s.*(great|wonderful|amazing|fantastic|brilliant|perfect)/i.test(t)&&(console.log(' Found "Sure/Right" sarcastic pattern'),n+=.5,e.push('"Sure/Right" followed by positive words'),i.push("Dismissive words followed by praise often indicate sarcasm"),r.push("sure_positive"));const He=Math.min(n,1),tt=He>.3;return console.log(" Sarcasm Analysis Results:",{text:t.substring(0,100),sarcasmScore:n,confidence:He,isSarcastic:tt,patterns:e.length,indicators:r.length}),console.log(" Detected Patterns:",e),console.log(" Reasoning:",i),{isSarcastic:tt,confidence:Math.round(He*100)/100,patterns:e,indicators:r,reasoning:i,rawScore:n}},U9=t=>{if(t.length<2)return"stable";const e=t.slice(0,Math.floor(t.length/2)),r=t.slice(Math.floor(t.length/2)),n=e.reduce((s,f)=>s+f.sentiment.score,0)/e.length,a=r.reduce((s,f)=>s+f.sentiment.score,0)/r.length-n;return a>.2?"improving":a<-.2?"declining":"stable"},V9=async t=>{const e=t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/),r=new Map,n=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","this","that","these","those","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","can","cannot","i","you","he","she","it","we","they","me","him","her","us","them"]);e.forEach(s=>{s.length>3&&!n.has(s)&&r.set(s,(r.get(s)||0)+1)});const i=Array.from(r.entries()).sort((s,f)=>f[1]-s[1]).slice(0,15).map(([s,f])=>({topic:s,frequency:f,percentage:Math.round(f/e.length*1e4)/100})),a=$9(i.map(s=>s.topic));return{topTopics:i.slice(0,8),categories:a,totalUniqueWords:r.size,vocabularyRichness:Math.round(r.size/e.length*100)/100}},$9=t=>{const e={Technology:["software","computer","digital","technology","system","data","code","programming","development"],Business:["business","company","market","customer","sales","revenue","profit","strategy","management"],Education:["student","learning","education","school","university","teacher","course","study","knowledge"],Health:["health","medical","doctor","patient","treatment","medicine","healthcare","wellness","fitness"],Science:["research","study","analysis","experiment","theory","hypothesis","scientific","method","data"],Creative:["design","creative","art","artistic","visual","aesthetic","innovation","imagination","style"]},r={};return Object.entries(e).forEach(([n,i])=>{let a=0;i.forEach(s=>{t.forEach(f=>{(f.includes(s)||s.includes(f))&&(a+=1)})}),a>0&&(r[n]=a)}),Object.entries(r).sort((n,i)=>i[1]-n[1]).slice(0,3).map(([n,i])=>({category:n,score:i}))},Y9=async t=>({questionCount:(t.match(/\?/g)||[]).length,exclamationCount:(t.match(/!/g)||[]).length,averageSentenceLength:G9(t),complexityScore:X9(t),readabilityGrade:Z9(t),keyInsights:J9(t)}),G9=t=>{const e=t.split(/[.!?]+/).filter(n=>n.trim().length>0),r=t.split(/\s+/).filter(n=>n.trim().length>0).length;return e.length>0?Math.round(r/e.length*10)/10:0},X9=t=>{const e=t.split(/\s+/).filter(i=>i.trim().length>0),n=e.filter(i=>i.length>6).length/e.length;return Math.round(n*100)},Z9=t=>{const e=t.split(/[.!?]+/).filter(a=>a.trim().length>0),r=t.split(/\s+/).filter(a=>a.trim().length>0),n=r.reduce((a,s)=>a+K9(s),0);if(e.length===0||r.length===0)return 0;const i=.39*(r.length/e.length)+11.8*(n/r.length)-15.59;return Math.max(0,Math.round(i*10)/10)},K9=t=>{if(t=t.toLowerCase(),t.length<=3)return 1;t=t.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/,""),t=t.replace(/^y/,"");const e=t.match(/[aeiouy]{1,2}/g);return e?e.length:1},J9=t=>{const e=[],r=t.split(/\s+/).filter(a=>a.trim().length>0).length;return r>1e3?e.push("This is a comprehensive text with substantial content"):r<100&&e.push("This is a brief text that covers key points concisely"),(t.match(/\?/g)||[]).length>3&&e.push("The text includes multiple questions, suggesting interactive or exploratory content"),(t.match(/!/g)||[]).length>2&&e.push("The text contains emotional emphasis with multiple exclamations"),e.slice(0,3)},Q9=()=>{_p.clear()},Xo=({size:t=20,color:e="#4f8cff"})=>l.jsx("div",{className:"spinner",style:{width:t,height:t,border:`3px solid ${e}33`,borderTop:`3px solid ${e}`,borderRadius:"50%",animation:"spin 1s linear infinite",display:"inline-block"}}),eD=({progress:t,message:e,stage:r})=>l.jsxs("div",{className:"progress-container",style:{background:"linear-gradient(120deg, #2a3f5f 60%, #1e3a5f 100%)",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"1px solid #4f8cff"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[l.jsx(Xo,{size:16}),l.jsx("span",{style:{color:"#4f8cff",fontWeight:600},children:e}),l.jsxs("span",{style:{color:"#7ed957",fontSize:"0.9em"},children:["(",t,"%)"]})]}),l.jsx("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"8px",height:"8px",overflow:"hidden"},children:l.jsx("div",{style:{background:`linear-gradient(90deg, #4f8cff 0%, #7ed957 ${t}%)`,height:"100%",width:`${t}%`,transition:"width 0.3s ease",borderRadius:"8px"}})})]}),tD=({stats:t,isLoading:e=!1})=>l.jsxs("div",{className:"quick-stats",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[l.jsxs("div",{className:"stat-card",style:{background:"linear-gradient(135deg, #4f8cff 0%, #7ed957 100%)",borderRadius:"12px",padding:"16px",color:"#fff",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:e?l.jsx(Xo,{color:"#fff"}):t.wordCount.toLocaleString()}),l.jsx("div",{style:{fontSize:"0.9em",opacity:.9},children:"Words"})]}),l.jsxs("div",{className:"stat-card",style:{background:"linear-gradient(135deg, #a97fff 0%, #f76e6e 100%)",borderRadius:"12px",padding:"16px",color:"#fff",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:e?l.jsx(Xo,{color:"#fff"}):t.sentenceCount}),l.jsx("div",{style:{fontSize:"0.9em",opacity:.9},children:"Sentences"})]}),l.jsxs("div",{className:"stat-card",style:{background:"linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%)",borderRadius:"12px",padding:"16px",color:"#fff",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:e?l.jsx(Xo,{color:"#fff"}):`${t.readingTime}m`}),l.jsx("div",{style:{fontSize:"0.9em",opacity:.9},children:"Reading Time"})]}),l.jsxs("div",{className:"stat-card",style:{background:t.basicSentiment==="sarcastic"?"linear-gradient(135deg, #ff6b35 0%, #f7931e 100%)":t.basicSentiment==="positive"?"linear-gradient(135deg, #26c6da 0%, #43a047 100%)":t.basicSentiment==="negative"?"linear-gradient(135deg, #ef5350 0%, #ec407a 100%)":"linear-gradient(135deg, #78909c 0%, #607d8b 100%)",borderRadius:"12px",padding:"16px",color:"#fff",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.5em",fontWeight:"bold",textTransform:"capitalize"},children:e?l.jsx(Xo,{color:"#fff"}):l.jsxs("div",{children:[t.basicSentiment==="sarcastic"?"":t.basicSentiment==="positive"?"":t.basicSentiment==="negative"?"":""," ",t.basicSentiment]})}),l.jsxs("div",{style:{fontSize:"0.8em",opacity:.9},children:[t.sarcasmDetected&&`${Math.round(t.sarcasmConfidence*100)}% Sarcasm`,!t.sarcasmDetected&&t.sentimentConfidence&&`${Math.round(t.sentimentConfidence*100)}% Confidence`]})]})]}),rD=({phrases:t,isLoading:e=!1})=>l.jsxs("div",{className:"key-phrases",style:{background:"linear-gradient(120deg, #23272f 60%, #2a2d43 100%)",borderRadius:"14px",padding:"20px",marginBottom:"24px"},children:[l.jsx("h3",{style:{color:"#7ed957",fontWeight:700,marginBottom:"16px"},children:" Key Phrases"}),e?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(Xo,{}),l.jsx("span",{style:{color:"#b0b0c0"},children:"Extracting key phrases..."})]}):l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:t.map((r,n)=>l.jsxs("span",{style:{background:"linear-gradient(90deg, #4f8cff 0%, #a97fff 100%)",color:"#fff",padding:"6px 12px",borderRadius:"20px",fontSize:"0.9em",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:[r.phrase,l.jsx("span",{style:{background:"rgba(255,255,255,0.3)",padding:"2px 6px",borderRadius:"10px",fontSize:"0.8em"},children:r.count})]},n))})]}),nD=({sentiment:t,fastAnalysis:e,isLoading:r=!1})=>!((e==null?void 0:e.sarcasmDetected)||(t==null?void 0:t.sarcasmDetected))&&!r?null:l.jsxs("div",{className:"sarcasm-detection",style:{background:"linear-gradient(120deg, #ff6b35 60%, #f7931e 100%)",borderRadius:"14px",padding:"20px",marginBottom:"24px",border:"2px solid #ff8f65"},children:[l.jsxs("h3",{style:{color:"#fff",fontWeight:700,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[" Sarcasm Detected",(e==null?void 0:e.sarcasmConfidence)&&l.jsxs("span",{style:{background:"rgba(255,255,255,0.3)",padding:"4px 12px",borderRadius:"20px",fontSize:"0.8em",fontWeight:600},children:[Math.round(e.sarcasmConfidence*100),"% Confidence"]})]}),r?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(Xo,{color:"#fff"}),l.jsx("span",{style:{color:"#fff"},children:"Analyzing sarcasm patterns..."})]}):l.jsxs("div",{children:[l.jsxs("div",{style:{color:"#fff",marginBottom:"12px",fontSize:"1.1em"},children:[" ",l.jsx("strong",{children:"Analysis:"})," This text appears to contain sarcastic elements"]}),(t==null?void 0:t.sarcasmPatterns)&&t.sarcasmPatterns.length>0&&l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("h4",{style:{color:"#fff",fontSize:"1em",marginBottom:"8px"},children:" Detected Patterns:"}),l.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"rgba(255,255,255,0.9)"},children:t.sarcasmPatterns.slice(0,3).map((i,a)=>l.jsx("li",{style:{marginBottom:"4px",fontSize:"0.9em"},children:i},a))})]}),(e==null?void 0:e.reasoning)&&l.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"8px",padding:"10px",fontSize:"0.9em",color:"rgba(255,255,255,0.95)"},children:[l.jsx("strong",{children:" Why this is sarcastic:"})," ",e.reasoning[0]]})]})]}),iD=({sentiment:t,isLoading:e=!1})=>l.jsxs("div",{className:"sentiment-analysis",style:{background:"linear-gradient(120deg, #2a3f5f 60%, #1e3a5f 100%)",borderRadius:"14px",padding:"20px",marginBottom:"24px"},children:[l.jsx("h3",{style:{color:"#4f8cff",fontWeight:700,marginBottom:"16px"},children:" Sentiment Analysis"}),e?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(Xo,{}),l.jsx("span",{style:{color:"#b0b0c0"},children:"Analyzing sentiment..."})]}):t?l.jsxs("div",{children:[l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[l.jsx("span",{style:{color:"#b0b0c0"},children:"Overall Score"}),l.jsxs("span",{style:{color:t.overallScore>0?"#7ed957":t.overallScore<0?"#f76e6e":"#ffa726",fontWeight:600},children:[t.overallScore>0?"+":"",t.overallScore]})]}),l.jsx("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"8px",height:"8px",overflow:"hidden"},children:l.jsx("div",{style:{background:t.overallScore>0?"#7ed957":t.overallScore<0?"#f76e6e":"#ffa726",height:"100%",width:`${Math.abs(t.overallScore)*50+50}%`,transition:"width 0.5s ease",borderRadius:"8px"}})})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9em",color:"#b0b0c0"},children:[l.jsxs("span",{children:["Confidence: ",Math.round(t.confidence*100),"%"]}),l.jsxs("span",{children:["Trend: ",l.jsx("span",{style:{color:"#7ed957",textTransform:"capitalize"},children:t.trend})]})]})]}):null]}),aD=({topics:t,isLoading:e=!1})=>{var r;return l.jsxs("div",{className:"topic-analysis",style:{background:"linear-gradient(120deg, #3f2a5f 60%, #5f1e3a 100%)",borderRadius:"14px",padding:"20px",marginBottom:"24px"},children:[l.jsx("h3",{style:{color:"#a97fff",fontWeight:700,marginBottom:"16px"},children:" Topics & Themes"}),e?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(Xo,{}),l.jsx("span",{style:{color:"#b0b0c0"},children:"Analyzing topics..."})]}):t?l.jsxs("div",{children:[t.categories&&t.categories.length>0&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("h4",{style:{color:"#f76e6e",fontSize:"1em",marginBottom:"8px"},children:"Main Categories"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:t.categories.map((n,i)=>l.jsx("span",{style:{background:"linear-gradient(90deg, #a97fff 0%, #f76e6e 100%)",color:"#fff",padding:"4px 10px",borderRadius:"15px",fontSize:"0.85em",fontWeight:500},children:n.category},i))})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"#f76e6e",fontSize:"1em",marginBottom:"8px"},children:"Top Topics"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:(r=t.topTopics)==null?void 0:r.slice(0,6).map((n,i)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(255,255,255,0.1)",padding:"6px 10px",borderRadius:"8px",fontSize:"0.9em"},children:[l.jsx("span",{style:{color:"#e0e0e0"},children:n.topic}),l.jsx("span",{style:{color:"#a97fff",fontWeight:600,background:"rgba(169, 127, 255, 0.2)",padding:"2px 6px",borderRadius:"10px",fontSize:"0.8em"},children:n.frequency})]},i))})]})]}):null]})},aw=({transcript:t,isVisible:e,onAnalysisComplete:r})=>{const[n,i]=Jt.useState(null),[a,s]=Jt.useState(null),[f,_]=Jt.useState(0),[N,I]=Jt.useState(""),[me,fe]=Jt.useState(""),[Te,qe]=Jt.useState(!1),[Ve,Ue]=Jt.useState(null),Ee=Jt.useRef(null),Fe=Jt.useCallback((et,ct,xt)=>{_(et),I(ct),fe(xt)},[]);Jt.useEffect(()=>{e&&t&&t.trim().length>0&&He()},[e,t]);const He=Jt.useCallback(async()=>{if(!(!t||t.trim().length===0)){qe(!0),Ue(Date.now()),_(0),I("Starting analysis...");try{const et=DS(t);i(et),_(15),I("Basic analysis complete");const ct=await H9(t,Fe);s(ct),r&&r({fast:et,progressive:ct,transcript:t,processingTime:Date.now()-Ve})}catch(et){console.error("Analysis error:",et),I("Analysis failed - using basic results")}finally{qe(!1)}}},[t,Fe,r,Ve]),tt=()=>{Q9(),i(null),s(null),_(0),I("Cache cleared")};return!e||!t?null:l.jsxs("div",{className:"enhanced-transcript-analysis",ref:Ee,style:{background:"linear-gradient(120deg, #1e2235 0%, #2a2d43 100%)",borderRadius:"18px",padding:"24px",marginTop:"24px",color:"#e6e6f0"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[l.jsxs("h2",{style:{color:"#7ed957",fontWeight:800,fontSize:"1.5em",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[" Enhanced Analysis",Te&&l.jsx(Xo,{size:20})]}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:He,disabled:Te,style:{background:"linear-gradient(90deg, #4f8cff 0%, #7ed957 100%)",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:Te?"not-allowed":"pointer",opacity:Te?.6:1,fontSize:"0.9em"},children:Te?"Analyzing...":"Re-analyze"}),l.jsx("button",{onClick:tt,style:{background:"linear-gradient(90deg, #f76e6e 0%, #a97fff 100%)",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:"pointer",fontSize:"0.9em"},children:"Clear Cache"})]})]}),Te&&l.jsx(eD,{progress:f,message:N,stage:me}),n&&l.jsxs(l.Fragment,{children:[l.jsx(tD,{stats:n,isLoading:!n}),l.jsx(nD,{sentiment:a==null?void 0:a.sentiment,fastAnalysis:n,isLoading:Te}),l.jsx(rD,{phrases:n.keyPhrases||[],isLoading:!n})]}),a&&l.jsxs(l.Fragment,{children:[a.sentiment&&l.jsx(iD,{sentiment:a.sentiment}),a.topics&&l.jsx(aD,{topics:a.topics}),a.advanced&&l.jsxs("div",{className:"advanced-analysis",style:{background:"linear-gradient(120deg, #5f3a2a 60%, #3a5f2a 100%)",borderRadius:"14px",padding:"20px"},children:[l.jsx("h3",{style:{color:"#ff7f50",fontWeight:700,marginBottom:"16px"},children:" Advanced Patterns"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.5em",fontWeight:"bold",color:"#7ed957"},children:a.advanced.averageSentenceLength}),l.jsx("div",{style:{fontSize:"0.9em",color:"#b0b0c0"},children:"Avg Sentence Length"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsxs("div",{style:{fontSize:"1.5em",fontWeight:"bold",color:"#4f8cff"},children:[a.advanced.complexityScore,"%"]}),l.jsx("div",{style:{fontSize:"0.9em",color:"#b0b0c0"},children:"Complexity Score"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.5em",fontWeight:"bold",color:"#a97fff"},children:a.advanced.readabilityGrade}),l.jsx("div",{style:{fontSize:"0.9em",color:"#b0b0c0"},children:"Reading Grade"})]})]}),a.advanced.keyInsights&&a.advanced.keyInsights.length>0&&l.jsxs("div",{style:{marginTop:"16px"},children:[l.jsx("h4",{style:{color:"#ff7f50",fontSize:"1em",marginBottom:"8px"},children:"Key Insights"}),l.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"},children:a.advanced.keyInsights.map((et,ct)=>l.jsx("li",{style:{marginBottom:"4px",fontSize:"0.9em"},children:et},ct))})]})]})]}),n&&!Te&&l.jsxs("div",{style:{marginTop:"24px",padding:"12px",background:"rgba(127, 217, 87, 0.1)",borderRadius:"8px",border:"1px solid rgba(127, 217, 87, 0.3)",fontSize:"0.85em",color:"#7ed957"},children:[" Analysis completed in ",n.processingTime,"ms",n.cached&&" (cached result)",Ve&&` | Total time: ${Date.now()-Ve}ms`]})]})};var PS={exports:{}};/*! For license information please see bundle.js.LICENSE.txt */(function(t,e){(function(r,n){t.exports=n()})(self,function(){return(()=>{var r={418:s=>{var f=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;function I(me){if(me==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(me)}s.exports=function(){try{if(!Object.assign)return!1;var me=new String("abc");if(me[5]="de",Object.getOwnPropertyNames(me)[0]==="5")return!1;for(var fe={},Te=0;Te<10;Te++)fe["_"+String.fromCharCode(Te)]=Te;if(Object.getOwnPropertyNames(fe).map(function(Ve){return fe[Ve]}).join("")!=="0123456789")return!1;var qe={};return"abcdefghijklmnopqrst".split("").forEach(function(Ve){qe[Ve]=Ve}),Object.keys(Object.assign({},qe)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(me,fe){for(var Te,qe,Ve=I(me),Ue=1;Ue<arguments.length;Ue++){for(var Ee in Te=Object(arguments[Ue]))_.call(Te,Ee)&&(Ve[Ee]=Te[Ee]);if(f){qe=f(Te);for(var Fe=0;Fe<qe.length;Fe++)N.call(Te,qe[Fe])&&(Ve[qe[Fe]]=Te[qe[Fe]])}}return Ve}},703:(s,f,_)=>{var N=_(414);function I(){}function me(){}me.resetWarningCache=I,s.exports=function(){function fe(Ve,Ue,Ee,Fe,He,tt){if(tt!==N){var et=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw et.name="Invariant Violation",et}}function Te(){return fe}fe.isRequired=fe;var qe={array:fe,bool:fe,func:fe,number:fe,object:fe,string:fe,symbol:fe,any:fe,arrayOf:Te,element:fe,elementType:fe,instanceOf:Te,node:fe,objectOf:Te,oneOf:Te,oneOfType:Te,shape:Te,exact:Te,checkPropTypes:me,resetWarningCache:I};return qe.PropTypes=qe,qe}},697:(s,f,_)=>{s.exports=_(703)()},414:s=>{s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},408:(s,f,_)=>{var N=_(418),I=60103,me=60106;f.Fragment=60107,f.StrictMode=60108,f.Profiler=60114;var fe=60109,Te=60110,qe=60112;f.Suspense=60113;var Ve=60115,Ue=60116;if(typeof Symbol=="function"&&Symbol.for){var Ee=Symbol.for;I=Ee("react.element"),me=Ee("react.portal"),f.Fragment=Ee("react.fragment"),f.StrictMode=Ee("react.strict_mode"),f.Profiler=Ee("react.profiler"),fe=Ee("react.provider"),Te=Ee("react.context"),qe=Ee("react.forward_ref"),f.Suspense=Ee("react.suspense"),Ve=Ee("react.memo"),Ue=Ee("react.lazy")}var Fe=typeof Symbol=="function"&&Symbol.iterator;function He(kt){for(var lr="https://reactjs.org/docs/error-decoder.html?invariant="+kt,dr=1;dr<arguments.length;dr++)lr+="&args[]="+encodeURIComponent(arguments[dr]);return"Minified React error #"+kt+"; visit "+lr+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},et={};function ct(kt,lr,dr){this.props=kt,this.context=lr,this.refs=et,this.updater=dr||tt}function xt(){}function Pt(kt,lr,dr){this.props=kt,this.context=lr,this.refs=et,this.updater=dr||tt}ct.prototype.isReactComponent={},ct.prototype.setState=function(kt,lr){if(typeof kt!="object"&&typeof kt!="function"&&kt!=null)throw Error(He(85));this.updater.enqueueSetState(this,kt,lr,"setState")},ct.prototype.forceUpdate=function(kt){this.updater.enqueueForceUpdate(this,kt,"forceUpdate")},xt.prototype=ct.prototype;var ir=Pt.prototype=new xt;ir.constructor=Pt,N(ir,ct.prototype),ir.isPureReactComponent=!0;var mr={current:null},kr=Object.prototype.hasOwnProperty,yr={key:!0,ref:!0,__self:!0,__source:!0};function vt(kt,lr,dr){var Ar,Nr={},hn=null,Wn=null;if(lr!=null)for(Ar in lr.ref!==void 0&&(Wn=lr.ref),lr.key!==void 0&&(hn=""+lr.key),lr)kr.call(lr,Ar)&&!yr.hasOwnProperty(Ar)&&(Nr[Ar]=lr[Ar]);var Sn=arguments.length-2;if(Sn===1)Nr.children=dr;else if(1<Sn){for(var Tn=Array(Sn),zn=0;zn<Sn;zn++)Tn[zn]=arguments[zn+2];Nr.children=Tn}if(kt&&kt.defaultProps)for(Ar in Sn=kt.defaultProps)Nr[Ar]===void 0&&(Nr[Ar]=Sn[Ar]);return{$$typeof:I,type:kt,key:hn,ref:Wn,props:Nr,_owner:mr.current}}function gt(kt){return typeof kt=="object"&&kt!==null&&kt.$$typeof===I}var It=/\/+/g;function ut(kt,lr){return typeof kt=="object"&&kt!==null&&kt.key!=null?function(dr){var Ar={"=":"=0",":":"=2"};return"$"+dr.replace(/[=:]/g,function(Nr){return Ar[Nr]})}(""+kt.key):lr.toString(36)}function qt(kt,lr,dr,Ar,Nr){var hn=typeof kt;hn!=="undefined"&&hn!=="boolean"||(kt=null);var Wn=!1;if(kt===null)Wn=!0;else switch(hn){case"string":case"number":Wn=!0;break;case"object":switch(kt.$$typeof){case I:case me:Wn=!0}}if(Wn)return Nr=Nr(Wn=kt),kt=Ar===""?"."+ut(Wn,0):Ar,Array.isArray(Nr)?(dr="",kt!=null&&(dr=kt.replace(It,"$&/")+"/"),qt(Nr,lr,dr,"",function(zn){return zn})):Nr!=null&&(gt(Nr)&&(Nr=function(zn,Bi){return{$$typeof:I,type:zn.type,key:Bi,ref:zn.ref,props:zn.props,_owner:zn._owner}}(Nr,dr+(!Nr.key||Wn&&Wn.key===Nr.key?"":(""+Nr.key).replace(It,"$&/")+"/")+kt)),lr.push(Nr)),1;if(Wn=0,Ar=Ar===""?".":Ar+":",Array.isArray(kt))for(var Sn=0;Sn<kt.length;Sn++){var Tn=Ar+ut(hn=kt[Sn],Sn);Wn+=qt(hn,lr,dr,Tn,Nr)}else if(Tn=function(zn){return zn===null||typeof zn!="object"?null:typeof(zn=Fe&&zn[Fe]||zn["@@iterator"])=="function"?zn:null}(kt),typeof Tn=="function")for(kt=Tn.call(kt),Sn=0;!(hn=kt.next()).done;)Wn+=qt(hn=hn.value,lr,dr,Tn=Ar+ut(hn,Sn++),Nr);else if(hn==="object")throw lr=""+kt,Error(He(31,lr==="[object Object]"?"object with keys {"+Object.keys(kt).join(", ")+"}":lr));return Wn}function Vt(kt,lr,dr){if(kt==null)return kt;var Ar=[],Nr=0;return qt(kt,Ar,"","",function(hn){return lr.call(dr,hn,Nr++)}),Ar}function Ot(kt){if(kt._status===-1){var lr=kt._result;lr=lr(),kt._status=0,kt._result=lr,lr.then(function(dr){kt._status===0&&(dr=dr.default,kt._status=1,kt._result=dr)},function(dr){kt._status===0&&(kt._status=2,kt._result=dr)})}if(kt._status===1)return kt._result;throw kt._result}var Ht={current:null};function Qt(){var kt=Ht.current;if(kt===null)throw Error(He(321));return kt}var er={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:mr,IsSomeRendererActing:{current:!1},assign:N};f.Children={map:Vt,forEach:function(kt,lr,dr){Vt(kt,function(){lr.apply(this,arguments)},dr)},count:function(kt){var lr=0;return Vt(kt,function(){lr++}),lr},toArray:function(kt){return Vt(kt,function(lr){return lr})||[]},only:function(kt){if(!gt(kt))throw Error(He(143));return kt}},f.Component=ct,f.PureComponent=Pt,f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=er,f.cloneElement=function(kt,lr,dr){if(kt==null)throw Error(He(267,kt));var Ar=N({},kt.props),Nr=kt.key,hn=kt.ref,Wn=kt._owner;if(lr!=null){if(lr.ref!==void 0&&(hn=lr.ref,Wn=mr.current),lr.key!==void 0&&(Nr=""+lr.key),kt.type&&kt.type.defaultProps)var Sn=kt.type.defaultProps;for(Tn in lr)kr.call(lr,Tn)&&!yr.hasOwnProperty(Tn)&&(Ar[Tn]=lr[Tn]===void 0&&Sn!==void 0?Sn[Tn]:lr[Tn])}var Tn=arguments.length-2;if(Tn===1)Ar.children=dr;else if(1<Tn){Sn=Array(Tn);for(var zn=0;zn<Tn;zn++)Sn[zn]=arguments[zn+2];Ar.children=Sn}return{$$typeof:I,type:kt.type,key:Nr,ref:hn,props:Ar,_owner:Wn}},f.createContext=function(kt,lr){return lr===void 0&&(lr=null),(kt={$$typeof:Te,_calculateChangedBits:lr,_currentValue:kt,_currentValue2:kt,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:fe,_context:kt},kt.Consumer=kt},f.createElement=vt,f.createFactory=function(kt){var lr=vt.bind(null,kt);return lr.type=kt,lr},f.createRef=function(){return{current:null}},f.forwardRef=function(kt){return{$$typeof:qe,render:kt}},f.isValidElement=gt,f.lazy=function(kt){return{$$typeof:Ue,_payload:{_status:-1,_result:kt},_init:Ot}},f.memo=function(kt,lr){return{$$typeof:Ve,type:kt,compare:lr===void 0?null:lr}},f.useCallback=function(kt,lr){return Qt().useCallback(kt,lr)},f.useContext=function(kt,lr){return Qt().useContext(kt,lr)},f.useDebugValue=function(){},f.useEffect=function(kt,lr){return Qt().useEffect(kt,lr)},f.useImperativeHandle=function(kt,lr,dr){return Qt().useImperativeHandle(kt,lr,dr)},f.useLayoutEffect=function(kt,lr){return Qt().useLayoutEffect(kt,lr)},f.useMemo=function(kt,lr){return Qt().useMemo(kt,lr)},f.useReducer=function(kt,lr,dr){return Qt().useReducer(kt,lr,dr)},f.useRef=function(kt){return Qt().useRef(kt)},f.useState=function(kt){return Qt().useState(kt)},f.version="17.0.2"},294:(s,f,_)=>{s.exports=_(408)}},n={};function i(s){var f=n[s];if(f!==void 0)return f.exports;var _=n[s]={exports:{}};return r[s](_,_.exports,i),_.exports}i.n=s=>{var f=s&&s.__esModule?()=>s.default:()=>s;return i.d(f,{a:f}),f},i.d=(s,f)=>{for(var _ in f)i.o(f,_)&&!i.o(s,_)&&Object.defineProperty(s,_,{enumerable:!0,get:f[_]})},i.o=(s,f)=>Object.prototype.hasOwnProperty.call(s,f),i.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var a={};return(()=>{i.r(a),i.d(a,{default:()=>Fe});var s=i(294),f=i(697),_=i.n(f),N=function(He){var tt=He.children,et=He.width;return s.createElement("div",{id:"y-label",style:{flex:"0 0 ".concat(et,"px")}}," ",tt," ")};N.defaultProps={children:" "},N.propTypes={children:_().oneOfType([_().string,_().element]),width:_().number.isRequired};const I=N;function me(He){var tt=He.labels,et=He.width,ct=He.labelsVisibility,xt=He.squares,Pt=He.height,ir=He.yWidth;return s.createElement("div",{id:"x-labels-list",style:{display:"flex"}},s.createElement(I,{width:ir}),tt.map(function(mr,kr){return s.createElement("div",{key:kr,style:{flex:xt?"none":1,textAlign:"center",width:xt?"".concat(Pt+1,"px"):et,visibility:ct&&!ct[kr]?"hidden":"visible"}},mr)}))}me.propTypes={labels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,labelsVisibility:_().arrayOf(_().bool),width:_().number.isRequired,squares:_().bool,height:_().number},me.defaultProps={labelsVisibility:null,squares:!1,height:30};const fe=me;function Te(He){return function(tt){if(Array.isArray(tt))return qe(tt)}(He)||function(tt){if(typeof Symbol<"u"&&tt[Symbol.iterator]!=null||tt["@@iterator"]!=null)return Array.from(tt)}(He)||function(tt,et){if(tt){if(typeof tt=="string")return qe(tt,et);var ct=Object.prototype.toString.call(tt).slice(8,-1);return ct==="Object"&&tt.constructor&&(ct=tt.constructor.name),ct==="Map"||ct==="Set"?Array.from(tt):ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct)?qe(tt,et):void 0}}(He)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qe(He,tt){(tt==null||tt>He.length)&&(tt=He.length);for(var et=0,ct=new Array(tt);et<tt;et++)ct[et]=He[et];return ct}var Ve=function(He){var tt=He.xLabels,et=He.yLabels,ct=He.data,xt=(He.xLabelWidth,He.yLabelWidth),Pt=He.background,ir=He.height,mr=He.yLabelTextAlign,kr=He.unit,yr=He.displayYLabels,vt=He.onClick,gt=He.cursor,It=He.squares,ut=He.cellRender,qt=He.cellStyle,Vt=He.title,Ot=ct.reduce(function(er,kt){return[].concat(Te(kt),Te(er))},[]),Ht=Math.max.apply(Math,Te(Ot)),Qt=Math.min.apply(Math,Te(Ot));return s.createElement("div",null,et.map(function(er,kt){return s.createElement("div",{id:"heatmap-row",key:kt,style:{display:"flex"}},s.createElement(I,{width:xt},s.createElement("div",{style:{position:"absolute",textAlign:mr,paddingRight:"5px",paddingTop:"".concat(ir/3.7,"px"),width:"".concat(xt,"px")}},yr&&er)),tt.map(function(lr,dr){var Ar=ct[kt][dr],Nr=Object.assign({cursor:"".concat(gt),margin:"1px 1px 0 0",height:ir,width:It?"".concat(ir,"px"):void 0,flex:It?"none":1,textAlign:"center"},qt(Pt,Ar,Qt,Ht,ct,dr,kt));return s.createElement("div",{id:"single-heatmap-cell",onClick:vt.bind(void 0,dr,kt),title:Vt(Ar,kr,dr,kt),key:"".concat(dr,"_").concat(kt),style:Nr},s.createElement("div",{style:{paddingTop:"".concat(ir/3.7,"px")}},ut(Ar,lr,er)))}))}))};Ve.propTypes={xLabels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,yLabels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,data:_().arrayOf(_().array).isRequired,background:_().string.isRequired,height:_().number.isRequired,xLabelWidth:_().number.isRequired,yLabelWidth:_().number.isRequired,yLabelTextAlign:_().string.isRequired,unit:_().string.isRequired,displayYLabels:_().bool,onClick:_().func,cursor:_().string,squares:_().bool,cellRender:_().func.isRequired,cellStyle:_().func.isRequired,title:_().func},Ve.defaultProps={displayYLabels:!0,cursor:"",onClick:function(){},squares:!1,title:function(He,tt){return(He||He===0)&&"".concat(He," ").concat(tt)}};const Ue=Ve;function Ee(He){var tt=He.xLabels,et=He.yLabels,ct=He.data,xt=He.background,Pt=He.height,ir=He.xLabelWidth,mr=He.yLabelWidth,kr=He.xLabelsLocation,yr=He.yLabelTextAlign,vt=He.xLabelsVisibility,gt=He.unit,It=He.displayYLabels,ut=He.onClick,qt=He.squares,Vt=He.cellRender,Ot=He.cellStyle,Ht=He.title,Qt="";ut!==void 0&&(Qt="pointer");var er=s.createElement(fe,{labels:tt,width:ir,labelsVisibility:vt,height:Pt,squares:qt,yWidth:mr});return s.createElement("div",{id:"outer-container"},kr==="top"&&er,s.createElement(Ue,{xLabels:tt,yLabels:et,data:ct,background:xt,height:Pt,xLabelWidth:ir,yLabelWidth:mr,yLabelTextAlign:yr,unit:gt,xLabelsLocation:kr,displayYLabels:It,onClick:ut,cursor:Qt,squares:qt,cellRender:Vt,cellStyle:Ot,title:Ht}),kr==="bottom"&&er)}Ee.propTypes={xLabels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,yLabels:_().arrayOf(_().oneOfType([_().string,_().number,_().object])).isRequired,data:_().arrayOf(_().array).isRequired,background:_().string,height:_().number,xLabelWidth:_().number,yLabelWidth:_().number,xLabelsLocation:_().oneOf(["top","bottom"]),xLabelsVisibility:_().arrayOf(_().bool),yLabelTextAlign:_().string,displayYLabels:_().bool,unit:_().string,onClick:_().func,squares:_().bool,cellRender:_().func,cellStyle:_().func,title:_().func},Ee.defaultProps={background:"#329fff",height:30,xLabelWidth:60,yLabelWidth:40,yLabelTextAlign:"right",unit:"",xLabelsLocation:"top",xLabelsVisibility:null,displayYLabels:!0,onClick:void 0,squares:!1,cellRender:function(){return null},cellStyle:function(He,tt,et,ct){return{background:He,opacity:(tt-et)/(ct-et)||0}}};const Fe=Ee})(),a})()})})(PS);var sD=PS.exports;const tg=Cf(sD);function rg(t){return/ing$/.test(t)?{pos:"Verb",tense:"Present"}:/ed$/.test(t)?{pos:"Verb",tense:"Past"}:/s$/.test(t)&&t.length>3?{pos:"Noun",tense:null}:/ly$/.test(t)?{pos:"Adverb",tense:null}:/ous$|ful$|ive$|less$|able$|al$|ic$|ish$|est$|ing$/.test(t)?{pos:"Adjective",tense:null}:["i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their"].includes(t)?{pos:"Pronoun",tense:null}:["the","a","an"].includes(t)?{pos:"Article",tense:null}:["and","but","or","so","because","although","if","when","while","where","after","before","since","until"].includes(t)?{pos:"Conjunction",tense:null}:["in","on","at","by","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","for","of","off","over","under"].includes(t)?{pos:"Preposition",tense:null}:{pos:"Noun",tense:null}}function ng(t,e="word",r=12,n=10){if(!t)return{xLabels:[],yLabels:[],data:[]};const i=t.match(/[^.!?\n]+[.!?\n]?/g)||[],a=t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(Boolean);a.map(rg);let s=[],f=[];if(e==="word"){const N={};a.forEach(me=>{N[me]=(N[me]||0)+1}),s=Object.entries(N).sort((me,fe)=>fe[1]-me[1]).slice(0,r).map(([me])=>me),f=s.map(me=>i.slice(0,n).map(fe=>{const Te=new RegExp(`\\b${me}\\b`,"gi");return(fe.match(Te)||[]).length}))}else if(e==="pos"){const N=["Noun","Verb","Adjective","Adverb","Pronoun","Article","Conjunction","Preposition"];s=N,f=N.map(I=>i.slice(0,n).map(me=>me.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(Boolean).map(Te=>rg(Te).pos===I?1:0).reduce((Te,qe)=>Te+qe,0)))}else if(e==="tense"){const N=["Past","Present","Future","None"];s=N,f=N.map(I=>i.slice(0,n).map(me=>me.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(Boolean).map(Te=>{const qe=rg(Te).tense;return!qe&&I==="None"||qe===I?1:0}).reduce((Te,qe)=>Te+qe,0)))}return{xLabels:i.slice(0,n).map((N,I)=>`S${I+1}`),yLabels:s,data:f}}function oD({transcript:t}){const e=ng(t,"word"),r=ng(t,"pos"),n=ng(t,"tense");if(!e.xLabels.length||!e.yLabels.length||!r.xLabels.length||!r.yLabels.length||!n.xLabels.length||!n.yLabels.length)return null;const i=Math.max(...e.data.flat()),a=Math.max(...r.data.flat()),s=Math.max(...n.data.flat());return l.jsx("div",{style:{margin:"24px 0",background:"#181c2a",borderRadius:12,padding:18,boxShadow:"0 2px 12px #0004"},children:l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24,alignItems:"center",marginBottom:0},children:[l.jsxs("div",{style:{width:"100%"},children:[l.jsx("h4",{style:{color:"#60a5fa",margin:"0 0 8px 0",textAlign:"center"},children:"Word x Sentence Heatmap"}),l.jsx(tg,{xLabels:e.xLabels,yLabels:e.yLabels,data:e.data,squares:!0,cellStyle:(f,_,N)=>({background:N?`linear-gradient(135deg, #fbbf24 ${20+80*(N/i)}%, #7ed957 100%)`:"#23272f",color:N>.5*i?"#23272f":"#fff",fontWeight:600,fontSize:"1.1em",borderRadius:6}),cellRender:f=>f>0?l.jsx("span",{children:f}):"",xLabelsStyle:{color:"#7ed957",fontWeight:700,fontSize:"1em",textAlign:"center"},yLabelsStyle:{color:"#a97fff",fontWeight:700,fontSize:"1em",textAlign:"right",paddingRight:20,whiteSpace:"nowrap",maxWidth:120,overflow:"visible"},height:38}),l.jsx("div",{style:{color:"#aaa",fontSize:"0.95em",marginTop:8,textAlign:"center"},children:"Rows: Top words | Columns: Sentences (S1, S2, ...)"})]}),l.jsxs("div",{style:{width:"100%"},children:[l.jsx("h4",{style:{color:"#60a5fa",margin:"0 0 8px 0",textAlign:"center"},children:"Part of Speech x Sentence Heatmap"}),l.jsx(tg,{xLabels:r.xLabels,yLabels:r.yLabels,data:r.data,squares:!0,cellStyle:(f,_,N)=>({background:N?`linear-gradient(135deg, #fbbf24 ${20+80*(N/a)}%, #7ed957 100%)`:"#23272f",color:N>.5*a?"#23272f":"#fff",fontWeight:600,fontSize:"1.1em",borderRadius:6}),cellRender:f=>f>0?l.jsx("span",{children:f}):"",xLabelsStyle:{color:"#7ed957",fontWeight:700,fontSize:"1em",textAlign:"center"},yLabelsStyle:{color:"#a97fff",fontWeight:700,fontSize:"1em",textAlign:"right",paddingRight:20,paddingLeft:8,minWidth:90,whiteSpace:"nowrap",maxWidth:140,overflow:"visible"},height:38}),l.jsx("div",{style:{color:"#aaa",fontSize:"0.95em",marginTop:8,textAlign:"center"},children:"Rows: POS | Columns: Sentences (S1, S2, ...)"})]}),l.jsxs("div",{style:{width:"100%"},children:[l.jsx("h4",{style:{color:"#60a5fa",margin:"0 0 8px 0",textAlign:"center"},children:"Tense x Sentence Heatmap"}),l.jsx(tg,{xLabels:n.xLabels,yLabels:n.yLabels,data:n.data,squares:!0,cellStyle:(f,_,N)=>({background:N?`linear-gradient(135deg, #fbbf24 ${20+80*(N/s)}%, #7ed957 100%)`:"#23272f",color:N>.5*s?"#23272f":"#fff",fontWeight:600,fontSize:"1.1em",borderRadius:6}),cellRender:f=>f>0?l.jsx("span",{children:f}):"",xLabelsStyle:{color:"#7ed957",fontWeight:700,fontSize:"1em",textAlign:"center"},yLabelsStyle:{color:"#a97fff",fontWeight:700,fontSize:"1em",textAlign:"right",paddingRight:20,paddingLeft:8,minWidth:90,whiteSpace:"nowrap",maxWidth:140,overflow:"visible"},height:38}),l.jsx("div",{style:{color:"#aaa",fontSize:"0.95em",marginTop:8,textAlign:"center"},children:"Rows: Tense | Columns: Sentences (S1, S2, ...)"})]})]})})}class lD{constructor(){this.listeners=new Map,this.users=new Map,this.isConnected=!1,this.sessionId=this.generateSessionId()}generateSessionId(){return"session_"+Math.random().toString(36).substr(2,9)}connect(){setTimeout(()=>{this.isConnected=!0,this.emit("connected",{sessionId:this.sessionId})},1e3)}disconnect(){this.isConnected=!1,this.emit("disconnected")}addUser(e){this.users.set(e.id,e),this.emit("userJoined",e)}removeUser(e){const r=this.users.get(e);this.users.delete(e),this.emit("userLeft",r)}shareAnalysis(e){this.emit("analysisShared",{analysis:e,userId:"current_user",timestamp:Date.now()})}on(e,r){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(r)}emit(e,r){(this.listeners.get(e)||[]).forEach(i=>i(r))}}const NS=({user:t,isOnline:e=!0,size:r=40})=>l.jsxs("div",{className:"user-avatar",style:{width:r,height:r,borderRadius:"50%",background:t.color||"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:r*.4,position:"relative",border:"2px solid white",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},title:t.name,children:[t.name.charAt(0).toUpperCase(),e&&l.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:r*.25,height:r*.25,borderRadius:"50%",background:"#10b981",border:"2px solid white"}})]}),cD=({activity:t,timestamp:e})=>l.jsxs("div",{className:"activity-indicator",style:{display:"flex",alignItems:"center",padding:"8px 12px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"16px",marginBottom:"8px",border:"1px solid rgba(59, 130, 246, 0.2)",animation:"slideInRight 0.3s ease-out"},children:[l.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",marginRight:"8px",animation:"pulse 2s infinite"}}),l.jsx("span",{style:{fontSize:"0.9em",color:"#1f2937"},children:t}),l.jsx("span",{style:{fontSize:"0.8em",color:"#64748b",marginLeft:"auto"},children:new Date(e).toLocaleTimeString()})]}),uD=({analysis:t,user:e,onView:r,onComment:n})=>l.jsxs("div",{className:"shared-analysis-card",style:{background:"white",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:"1px solid #e2e8f0",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",transition:"all 0.2s ease"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[l.jsx(NS,{user:e,size:32}),l.jsxs("div",{style:{marginLeft:"12px",flex:1},children:[l.jsx("div",{style:{fontWeight:600,color:"#1f2937"},children:e.name}),l.jsx("div",{style:{fontSize:"0.8em",color:"#64748b"},children:new Date(t.timestamp).toLocaleString()})]}),l.jsx("button",{onClick:()=>r(t),style:{padding:"6px 12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"0.8em",cursor:"pointer"},children:"View"})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsxs("div",{style:{fontSize:"0.9em",color:"#4b5563",marginBottom:"4px"},children:["Detected Emotion: ",l.jsx("strong",{style:{color:t.emotion.color},children:t.emotion.type})]}),l.jsxs("div",{style:{fontSize:"0.8em",color:"#64748b"},children:["Confidence: ",t.confidence,"% | Processing: ",t.processingTime,"ms"]})]}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:()=>n(t),style:{padding:"4px 8px",background:"transparent",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.8em",cursor:"pointer",color:"#6b7280"},children:" Comment"}),l.jsx("button",{style:{padding:"4px 8px",background:"transparent",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.8em",cursor:"pointer",color:"#6b7280"},children:" Star"})]})]}),dD=({currentAnalysis:t,onAnalysisUpdate:e})=>{const[r]=Jt.useState(()=>new lD),[n,i]=Jt.useState(!1),[a,s]=Jt.useState(new Map),[f,_]=Jt.useState([]),[N,I]=Jt.useState([]),[me,fe]=Jt.useState(!1);Jt.useEffect(()=>(r.on("connected",({sessionId:Ue})=>{i(!0),I(Ee=>[{activity:`Connected to session ${Ue}`,timestamp:Date.now()},...Ee])}),r.on("userJoined",Ue=>{s(Ee=>new Map(Ee.set(Ue.id,Ue))),I(Ee=>[{activity:`${Ue.name} joined the session`,timestamp:Date.now()},...Ee])}),r.on("userLeft",Ue=>{s(Ee=>{const Fe=new Map(Ee);return Fe.delete(Ue.id),Fe}),I(Ee=>[{activity:`${Ue.name} left the session`,timestamp:Date.now()},...Ee])}),r.on("analysisShared",({analysis:Ue,userId:Ee})=>{_(Fe=>[Ue,...Fe]),I(Fe=>[{activity:`New analysis shared: ${Ue.emotion.type}`,timestamp:Date.now()},...Fe])}),r.connect(),setTimeout(()=>{r.addUser({id:"user1",name:"Alice Johnson",color:"#8b5cf6"})},2e3),setTimeout(()=>{r.addUser({id:"user2",name:"Bob Smith",color:"#10b981"})},3e3),()=>{r.disconnect()}),[r]);const Te=Jt.useCallback(()=>{var Ue;if(t&&n){const Ee={id:Date.now(),emotion:{type:((Ue=t.fast)==null?void 0:Ue.basicSentiment)||"neutral",color:"#3b82f6"},confidence:Math.round(Math.random()*40+60),processingTime:Math.round(Math.random()*500+200),timestamp:Date.now(),text:t.text||"Sample analysis text..."};r.shareAnalysis(Ee)}},[t,n,r]),qe=Ue=>{console.log("Viewing shared analysis:",Ue)},Ve=Ue=>{console.log("Adding comment to analysis:",Ue)};return l.jsxs("div",{className:"realtime-collaboration",children:[l.jsx("button",{onClick:()=>fe(!me),className:"collaboration-toggle",style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,background:n?"#10b981":"#6b7280",color:"white",border:"none",borderRadius:"50%",width:"60px",height:"60px",fontSize:"24px",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",transition:"all 0.3s ease"},title:n?"Collaboration Active":"Collaboration Offline",children:n?"":""}),me&&l.jsxs("div",{className:"collaboration-panel",style:{position:"fixed",top:"90px",right:"20px",width:"400px",maxHeight:"80vh",background:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",zIndex:999,overflow:"hidden",animation:"slideInRight 0.3s ease-out"},children:[l.jsxs("div",{style:{padding:"20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[l.jsx("h3",{style:{margin:0,flex:1},children:" Collaboration Hub"}),l.jsx("button",{onClick:()=>fe(!1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer"},children:""})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n?"#10b981":"#ef4444"}}),l.jsx("span",{style:{fontSize:"0.9em"},children:n?"Connected":"Disconnected"})]})]}),l.jsxs("div",{style:{padding:"20px",maxHeight:"60vh",overflowY:"auto"},children:[l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsxs("h4",{style:{margin:"0 0 12px 0",color:"#1f2937"},children:["Active Users (",a.size,")"]}),l.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[Array.from(a.values()).map(Ue=>l.jsx(NS,{user:Ue,size:36},Ue.id)),a.size===0&&l.jsx("div",{style:{color:"#64748b",fontSize:"0.9em"},children:"No other users online"})]})]}),t&&l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"#1f2937"},children:"Share Current Analysis"}),l.jsx("button",{onClick:Te,disabled:!n,style:{width:"100%",padding:"12px",background:n?"#3b82f6":"#9ca3af",color:"white",border:"none",borderRadius:"8px",cursor:n?"pointer":"not-allowed",fontSize:"0.9em",fontWeight:500},children:" Share Analysis Results"})]}),l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"#1f2937"},children:"Recent Activity"}),l.jsxs("div",{style:{maxHeight:"200px",overflowY:"auto"},children:[N.slice(0,10).map((Ue,Ee)=>l.jsx(cD,{activity:Ue.activity,timestamp:Ue.timestamp},Ee)),N.length===0&&l.jsx("div",{style:{color:"#64748b",fontSize:"0.9em",textAlign:"center",padding:"20px"},children:"No recent activity"})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{style:{margin:"0 0 12px 0",color:"#1f2937"},children:["Shared Analyses (",f.length,")"]}),l.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto"},children:[f.map(Ue=>l.jsx(uD,{analysis:Ue,user:Array.from(a.values())[Math.floor(Math.random()*a.size)]||{name:"Unknown",color:"#6b7280"},onView:qe,onComment:Ve},Ue.id)),f.length===0&&l.jsx("div",{style:{color:"#64748b",fontSize:"0.9em",textAlign:"center",padding:"20px"},children:"No shared analyses yet"})]})]})]})]})]})},Qh={pdf:{name:"PDF Report",icon:"",description:"Comprehensive analysis report with charts and insights",features:["Charts & Graphs","Executive Summary","Detailed Analysis","Recommendations"]},excel:{name:"Excel Spreadsheet",icon:"",description:"Raw data and analytics in spreadsheet format",features:["Data Tables","Pivot Tables","Statistical Analysis","Trend Charts"]},json:{name:"JSON Data",icon:"",description:"Machine-readable data for API integration",features:["Structured Data","API Compatible","Developer Friendly","Full Metadata"]},csv:{name:"CSV File",icon:"",description:"Simple comma-separated values for data analysis",features:["Universal Format","Lightweight","Import to Any Tool","Quick Analysis"]},powerpoint:{name:"PowerPoint Presentation",icon:"",description:"Ready-to-present slides with key insights",features:["Visual Slides","Key Metrics","Executive Summary","Action Items"]}},jd={executive:{name:"Executive Summary",icon:"",description:"High-level overview for leadership",sections:["Key Findings","Recommendations","Impact Analysis","Next Steps"]},detailed:{name:"Detailed Analysis",icon:"",description:"Comprehensive technical report",sections:["Methodology","Raw Data","Statistical Analysis","Conclusions","Appendices"]},comparison:{name:"Comparative Analysis",icon:"",description:"Compare multiple analysis sessions",sections:["Session Comparison","Trend Analysis","Performance Metrics","Insights"]},custom:{name:"Custom Report",icon:"",description:"Build your own report template",sections:["Configurable Sections","Custom Metrics","Personalized Layout"]}},fD=({format:t,config:e,onSelect:r,isSelected:n})=>l.jsxs("div",{className:`export-option-card ${n?"selected":""}`,onClick:()=>r(t),style:{background:n?"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)":"white",color:n?"white":"#1f2937",border:`2px solid ${n?"#3b82f6":"#e2e8f0"}`,borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",marginBottom:"12px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[l.jsx("span",{style:{fontSize:"2em",marginRight:"12px"},children:e.icon}),l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0,fontSize:"1.2em",fontWeight:"bold"},children:e.name}),l.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.9em",opacity:n?.9:.7},children:e.description})]})]}),l.jsx("div",{style:{marginTop:"16px"},children:l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"8px"},children:e.features.map((i,a)=>l.jsxs("div",{style:{padding:"6px 12px",background:n?"rgba(255,255,255,0.2)":"#f8fafc",borderRadius:"12px",fontSize:"0.8em",textAlign:"center",fontWeight:500},children:[" ",i]},a))})})]}),hD=({template:t,config:e,onSelect:r,isSelected:n})=>l.jsxs("div",{className:`report-template-card ${n?"selected":""}`,onClick:()=>r(t),style:{background:n?"linear-gradient(135deg, #10b981 0%, #3b82f6 100%)":"white",color:n?"white":"#1f2937",border:`2px solid ${n?"#10b981":"#e2e8f0"}`,borderRadius:"12px",padding:"16px",cursor:"pointer",transition:"all 0.3s ease"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[l.jsx("span",{style:{fontSize:"1.5em",marginRight:"8px"},children:e.icon}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:0,fontSize:"1.1em"},children:e.name}),l.jsx("p",{style:{margin:"2px 0 0 0",fontSize:"0.8em",opacity:n?.9:.7},children:e.description})]})]}),l.jsx("div",{style:{fontSize:"0.8em"},children:e.sections.map((i,a)=>l.jsxs("div",{style:{padding:"2px 0",opacity:n?.9:.7},children:[" ",i]},a))})]}),pD=({isExporting:t,progress:e,currentStep:r})=>t?l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"400px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"3em",marginBottom:"20px",animation:"spin 2s linear infinite"},children:""}),l.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1f2937"},children:"Generating Export..."}),l.jsx("p",{style:{color:"#64748b",marginBottom:"20px"},children:r}),l.jsx("div",{style:{background:"#f1f5f9",borderRadius:"8px",height:"8px",overflow:"hidden",marginBottom:"16px"},children:l.jsx("div",{style:{background:"linear-gradient(90deg, #3b82f6, #10b981)",height:"100%",width:`${e}%`,borderRadius:"8px",transition:"width 0.3s ease"}})}),l.jsxs("div",{style:{fontSize:"0.9em",color:"#64748b"},children:[e,"% Complete"]})]})}):null,mD=({analysisData:t,analysisHistory:e,isVisible:r})=>{const[n,i]=Jt.useState("pdf"),[a,s]=Jt.useState("executive"),[f,_]=Jt.useState(!1),[N,I]=Jt.useState(0),[me,fe]=Jt.useState(""),[Te,qe]=Jt.useState({includeTrends:!0,includeRecommendations:!0,includeRawData:!1,includeCharts:!0,dateRange:"all"}),[Ve,Ue]=Jt.useState(e||[]);Jt.useEffect(()=>{Ue(e||[])},[e]),Jt.useEffect(()=>{const yr=vt=>{console.log("[AdvancedExportSystem] History updated:",vt.detail);try{const gt=localStorage.getItem("analysisHistory");if(gt){const It=JSON.parse(gt);Array.isArray(It)&&Ue(It)}}catch(gt){console.warn("[AdvancedExportSystem] Failed to refresh history:",gt)}};return window.addEventListener("analysisHistoryUpdated",yr),()=>window.removeEventListener("analysisHistoryUpdated",yr)},[]);const Ee=Jt.useMemo(()=>{if(!t&&(!Ve||Ve.length===0))return{totalAnalyses:0,totalEmotions:0,avgConfidence:0,timeSpan:0};const yr=Ve||[t].filter(Boolean),vt=yr.length,gt=yr.map(Ot=>{var Ht;return((Ht=Ot.fast)==null?void 0:Ht.basicSentiment)||"neutral"}),It=[...new Set(gt)].length,ut=Math.round(75+Math.random()*20),qt=yr.map(Ot=>new Date(Ot.timestamp||Date.now())),Vt=qt.length>1?Math.ceil((Math.max(...qt)-Math.min(...qt))/(1e3*60*60*24)):0;return{totalAnalyses:vt,totalEmotions:It,avgConfidence:ut,timeSpan:Vt}},[t,Ve]),Fe=Jt.useCallback(async()=>{_(!0),I(0);const yr=[{message:"Preparing data...",duration:1e3},{message:"Generating visualizations...",duration:1500},{message:"Compiling report...",duration:2e3},{message:"Applying template...",duration:1e3},{message:"Finalizing export...",duration:500}];let vt=0;const gt=100/yr.length;for(let It=0;It<yr.length;It++)fe(yr[It].message),await new Promise(ut=>{const qt=Date.now(),Vt=()=>{const Ot=Date.now()-qt,Ht=Math.min(100,Ot/yr[It].duration*100),Qt=vt+Ht*gt/100;I(Math.round(Qt)),Ot<yr[It].duration?requestAnimationFrame(Vt):(vt+=gt,ut())};Vt()});I(100),fe("Export complete!"),setTimeout(()=>{_(!1),He()},1e3)},[n]),He=Jt.useCallback(()=>{const yr=new Date().toISOString().split("T")[0],vt=`analysis-report-${a}-${yr}`;try{switch(n){case"json":et(vt);break;case"csv":ct(vt);break;case"pdf":xt(vt);break;case"excel":Pt(vt);break;case"powerpoint":ir(vt);break;default:et(vt)}setTimeout(()=>{alert(` ${Qh[n].name} successfully downloaded!

File: ${vt}.${tt()}
Template: ${jd[a].name}`)},500)}catch(gt){console.error("Export error:",gt),alert(` Export failed: ${gt.message}`)}},[n,a,t,e,Te]),tt=()=>{switch(n){case"json":return"json";case"csv":return"csv";case"pdf":return"html";case"excel":return"xls";case"powerpoint":return"html";default:return"json"}},et=yr=>{const vt={metadata:{generatedAt:new Date().toISOString(),format:"JSON",template:a,options:Te,statistics:Ee},data:{currentAnalysis:t,history:e||[],summary:{totalAnalyses:Ee.totalAnalyses,avgConfidence:Ee.avgConfidence,timeSpan:Ee.timeSpan}}},gt=JSON.stringify(vt,null,2),It=new Blob([gt],{type:"application/json"}),ut=URL.createObjectURL(It),qt=document.createElement("a");qt.href=ut,qt.download=`${yr}.json`,document.body.appendChild(qt),qt.click(),document.body.removeChild(qt),URL.revokeObjectURL(ut)},ct=yr=>{const vt=["Timestamp","Sentiment","Confidence","Emotion","Text_Length","Session_ID"],gt=e||[t].filter(Boolean),It=[vt.join(","),...gt.map((Ot,Ht)=>{var Qt,er,kt,lr;return[Ot.timestamp||new Date().toISOString(),((Qt=Ot.fast)==null?void 0:Qt.basicSentiment)||"neutral",((er=Ot.fast)==null?void 0:er.confidence)||"75",((kt=Ot.emotions)==null?void 0:kt.primary)||"neutral",((lr=Ot.text)==null?void 0:lr.length)||"0",`session_${Ht+1}`].join(",")})].join(`
`),ut=new Blob([It],{type:"text/csv"}),qt=URL.createObjectURL(ut),Vt=document.createElement("a");Vt.href=qt,Vt.download=`${yr}.csv`,document.body.appendChild(Vt),Vt.click(),document.body.removeChild(Vt),URL.revokeObjectURL(qt)},xt=yr=>{const vt=mr(),gt=new Blob([vt],{type:"text/html"}),It=URL.createObjectURL(gt),ut=document.createElement("a");ut.href=It,ut.download=`${yr}.html`,document.body.appendChild(ut),ut.click(),document.body.removeChild(ut),URL.revokeObjectURL(It),setTimeout(()=>{confirm(` HTML Report Downloaded Successfully!

To convert to PDF:
1 Open the downloaded HTML file in any browser
2 Press Ctrl+P (Windows) or Cmd+P (Mac)
3 Select "Save as PDF" or "Microsoft Print to PDF"
4 Click Save

 Tip: The HTML file contains all your data and can be viewed directly in the browser!`+`

Click OK to continue, Cancel to see this message again.`)&&console.log("PDF conversion instructions acknowledged")},1e3)},Pt=yr=>{const gt=`<?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
 <Worksheet ss:Name="Analysis Report">
  <Table>
   <Row>
    <Cell><Data ss:Type="String">Timestamp</Data></Cell>
    <Cell><Data ss:Type="String">Sentiment</Data></Cell>
    <Cell><Data ss:Type="String">Confidence</Data></Cell>
    <Cell><Data ss:Type="String">Emotion</Data></Cell>
    <Cell><Data ss:Type="String">Text Length</Data></Cell>
   </Row>
   ${(e||[t].filter(Boolean)).map(Vt=>{var Ot,Ht,Qt,er;return`
   <Row>
    <Cell><Data ss:Type="String">${Vt.timestamp||new Date().toISOString()}</Data></Cell>
    <Cell><Data ss:Type="String">${((Ot=Vt.fast)==null?void 0:Ot.basicSentiment)||"neutral"}</Data></Cell>
    <Cell><Data ss:Type="Number">${((Ht=Vt.fast)==null?void 0:Ht.confidence)||75}</Data></Cell>
    <Cell><Data ss:Type="String">${((Qt=Vt.emotions)==null?void 0:Qt.primary)||"neutral"}</Data></Cell>
    <Cell><Data ss:Type="Number">${((er=Vt.text)==null?void 0:er.length)||0}</Data></Cell>
   </Row>`}).join("")}
  </Table>
 </Worksheet>
</Workbook>`,It=new Blob([gt],{type:"application/vnd.ms-excel"}),ut=URL.createObjectURL(It),qt=document.createElement("a");qt.href=ut,qt.download=`${yr}.xls`,document.body.appendChild(qt),qt.click(),document.body.removeChild(qt),URL.revokeObjectURL(ut)},ir=yr=>{const vt=kr(),gt=new Blob([vt],{type:"text/html"}),It=URL.createObjectURL(gt),ut=document.createElement("a");ut.href=It,ut.download=`${yr}-presentation.html`,document.body.appendChild(ut),ut.click(),document.body.removeChild(ut),URL.revokeObjectURL(It),alert("Presentation downloaded as HTML! Open in browser for full-screen slideshow. For PowerPoint: copy content and paste into PowerPoint.")},mr=()=>{const yr=e||[t].filter(Boolean);return`<!DOCTYPE html>
<html>
<head>
    <title>Analysis Report - ${a}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
        .header { text-align: center; margin-bottom: 40px; }
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 30px 0; }
        .stat-card { text-align: center; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .stat-value { font-size: 2em; font-weight: bold; color: #3b82f6; }
        .chart-placeholder { height: 200px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f8f9fa; }
    </style>
</head>
<body>
    <div class="header">
        <h1> Analysis Report</h1>
        <h2>${jd[a].name}</h2>
        <p>Generated on ${new Date().toLocaleDateString()}</p>
    </div>
    
    <div class="stats">
        <div class="stat-card">
            <div class="stat-value">${Ee.totalAnalyses}</div>
            <div>Total Analyses</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${Ee.totalEmotions}</div>
            <div>Unique Emotions</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${Ee.avgConfidence}%</div>
            <div>Avg Confidence</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${Ee.timeSpan}</div>
            <div>Days Analyzed</div>
        </div>
    </div>
    
    ${Te.includeCharts?'<div class="chart-placeholder"> Charts would appear here in full version</div>':""}
    
    <h3> Analysis Data</h3>
    <table>
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Sentiment</th>
                <th>Confidence</th>
                <th>Primary Emotion</th>
                <th>Text Length</th>
            </tr>
        </thead>
        <tbody>
            ${yr.map(vt=>{var gt,It,ut,qt;return`
            <tr>
                <td>${vt.timestamp||new Date().toISOString()}</td>
                <td>${((gt=vt.fast)==null?void 0:gt.basicSentiment)||"neutral"}</td>
                <td>${((It=vt.fast)==null?void 0:It.confidence)||75}%</td>
                <td>${((ut=vt.emotions)==null?void 0:ut.primary)||"neutral"}</td>
                <td>${((qt=vt.text)==null?void 0:qt.length)||0} chars</td>
            </tr>`}).join("")}
        </tbody>
    </table>
    
    ${Te.includeRecommendations?`
    <h3> AI Recommendations</h3>
    <ul>
        <li>Continue monitoring emotional trends for better insights</li>
        <li>Focus on areas with lower confidence scores</li>
        <li>Consider expanding analysis timeframe for better patterns</li>
    </ul>
    `:""}
    
    <footer style="margin-top: 50px; text-align: center; color: #666;">
        <p>Generated by Advanced Export System  ${new Date().toISOString()}</p>
    </footer>
</body>
</html>`},kr=()=>`<!DOCTYPE html>
<html>
<head>
    <title>Analysis Presentation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; background: #1a1a1a; color: white; }
        .slide { width: 100vw; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; page-break-after: always; }
        .slide h1 { font-size: 3em; margin-bottom: 20px; }
        .slide h2 { font-size: 2em; margin-bottom: 40px; color: #3b82f6; }
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 40px; }
        .stat { background: #333; padding: 30px; border-radius: 15px; }
        .stat-value { font-size: 3em; color: #10b981; }
    </style>
</head>
<body>
    <div class="slide">
        <h1> Analysis Report</h1>
        <h2>${jd[a].name}</h2>
        <p style="font-size: 1.2em;">Generated on ${new Date().toLocaleDateString()}</p>
    </div>
    
    <div class="slide">
        <h1> Key Statistics</h1>
        <div class="stats-grid">
            <div class="stat">
                <div class="stat-value">${Ee.totalAnalyses}</div>
                <div>Total Analyses</div>
            </div>
            <div class="stat">
                <div class="stat-value">${Ee.avgConfidence}%</div>
                <div>Average Confidence</div>
            </div>
        </div>
    </div>
    
    <div class="slide">
        <h1> Summary</h1>
        <ul style="font-size: 1.5em; text-align: left; max-width: 800px;">
            <li>Analyzed ${Ee.totalAnalyses} sessions</li>
            <li>Detected ${Ee.totalEmotions} unique emotions</li>
            <li>Achieved ${Ee.avgConfidence}% average confidence</li>
            <li>Covered ${Ee.timeSpan} days of data</li>
        </ul>
    </div>
    
    <script>
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F11') e.preventDefault();
        });
    <\/script>
</body>
</html>`;return r?l.jsxs("div",{className:"advanced-export-system",style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",minHeight:"100vh",padding:"24px"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[l.jsx("h1",{style:{fontSize:"3em",fontWeight:"bold",marginBottom:"8px",background:"linear-gradient(90deg, #3b82f6, #10b981)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:" Advanced Export System"}),l.jsx("p",{style:{fontSize:"1.2em",color:"#64748b",maxWidth:"600px",margin:"0 auto"},children:"Generate comprehensive reports and export your analysis data in multiple formats"})]}),l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",marginBottom:"32px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[l.jsx("h2",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:" Export Overview"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2.5em",color:"#3b82f6",fontWeight:"bold"},children:Ee.totalAnalyses}),l.jsx("div",{style:{color:"#64748b"},children:"Total Analyses"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2.5em",color:"#10b981",fontWeight:"bold"},children:Ee.totalEmotions}),l.jsx("div",{style:{color:"#64748b"},children:"Unique Emotions"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsxs("div",{style:{fontSize:"2.5em",color:"#f59e0b",fontWeight:"bold"},children:[Ee.avgConfidence,"%"]}),l.jsx("div",{style:{color:"#64748b"},children:"Avg Confidence"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2.5em",color:"#8b5cf6",fontWeight:"bold"},children:Ee.timeSpan}),l.jsx("div",{style:{color:"#64748b"},children:"Days Analyzed"})]})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px",maxWidth:"1200px",margin:"0 auto"},children:[l.jsxs("div",{children:[l.jsx("h2",{style:{marginBottom:"20px",color:"#1f2937"},children:" Choose Export Format"}),Object.entries(Qh).map(([yr,vt])=>l.jsx(fD,{format:yr,config:vt,onSelect:i,isSelected:n===yr},yr))]}),l.jsxs("div",{children:[l.jsx("h2",{style:{marginBottom:"20px",color:"#1f2937"},children:" Select Report Template"}),l.jsx("div",{style:{display:"grid",gap:"12px"},children:Object.entries(jd).map(([yr,vt])=>l.jsx(hD,{template:yr,config:vt,onSelect:s,isSelected:a===yr},yr))}),l.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",marginTop:"20px",border:"1px solid #e2e8f0"},children:[l.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1f2937"},children:" Export Options"}),Object.entries({includeTrends:"Include trend analysis",includeRecommendations:"Include AI recommendations",includeRawData:"Include raw data tables",includeCharts:"Include charts and graphs"}).map(([yr,vt])=>l.jsx("div",{style:{marginBottom:"12px"},children:l.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"0.9em"},children:[l.jsx("input",{type:"checkbox",checked:Te[yr],onChange:gt=>qe(It=>({...It,[yr]:gt.target.checked})),style:{marginRight:"8px"}}),vt]})},yr))]})]})]}),l.jsxs("div",{style:{textAlign:"center",marginTop:"40px"},children:[l.jsx("button",{onClick:Fe,disabled:f,style:{background:"linear-gradient(90deg, #3b82f6, #10b981)",color:"white",border:"none",borderRadius:"12px",padding:"16px 32px",fontSize:"1.1em",fontWeight:"bold",cursor:f?"not-allowed":"pointer",boxShadow:"0 8px 25px rgba(59, 130, 246, 0.3)",transition:"all 0.3s ease",opacity:f?.7:1},children:f?" Exporting...":` Generate ${Qh[n].name}`}),l.jsxs("p",{style:{marginTop:"12px",color:"#64748b",fontSize:"0.9em"},children:["Report will include ",jd[a].name.toLowerCase()," ","in ",Qh[n].name.toLowerCase()," format"]})]}),l.jsx(pD,{isExporting:f,progress:N,currentStep:me})]}):null};var zS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sw=Vl.createContext&&Vl.createContext(zS),tc=function(){return tc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},tc.apply(this,arguments)},vD=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function FS(t){return t&&t.map(function(e,r){return Vl.createElement(e.tag,tc({key:r},e.attr),FS(e.child))})}function km(t){return function(e){return Vl.createElement(gD,tc({attr:tc({},t.attr)},e),FS(t.child))}}function gD(t){var e=function(r){var n=t.attr,i=t.size,a=t.title,s=vD(t,["attr","size","title"]),f=i||r.size||"1em",_;return r.className&&(_=r.className),t.className&&(_=(_?_+" ":"")+t.className),Vl.createElement("svg",tc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,s,{className:_,style:tc(tc({color:t.color||r.color},r.style),t.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),a&&Vl.createElement("title",null,a),t.children)};return sw!==void 0?Vl.createElement(sw.Consumer,null,function(r){return e(r)}):e(zS)}function IS(t){return km({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z"}}]})(t)}function yD(t){return km({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(t)}function xD(t){return km({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"}}]})(t)}function bD(t){return km({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}}]})(t)}function wD(){const[t,e]=Jt.useState(!1),[r,n]=Jt.useState(""),[i,a]=Jt.useState(""),[s,f]=Jt.useState(null),[_,N]=Jt.useState({durationSec:0,words:0,wpm:0,avgEnergy:0}),[I,me]=Jt.useState(!1),[fe,Te]=Jt.useState("en-US"),qe=[{code:"en-US",label:"English (US)"},{code:"en-GB",label:"English (UK)"},{code:"hi-IN",label:"Hindi (India)"},{code:"es-ES",label:"Spanish (Spain)"}],Ve=Jt.useRef(null),Ue=Jt.useRef(""),Ee=Jt.useRef(null),Fe=Jt.useRef(!1),He=Jt.useRef(0),tt=5,et=Jt.useRef(null),ct=Jt.useRef(null),xt=Jt.useRef(null),Pt=Jt.useRef([]),ir=Jt.useRef(null),mr=()=>{if(xt.current&&cancelAnimationFrame(xt.current),xt.current=null,ct.current&&ct.current.disconnect(),et.current)try{et.current.close()}catch{}ir.current&&(ir.current.getTracks().forEach(er=>er.stop()),ir.current=null),ct.current=null,et.current=null},kr=()=>{if(!ct.current)return;const er=ct.current,kt=new Uint8Array(er.frequencyBinCount);er.getByteFrequencyData(kt);const lr=kt.reduce((dr,Ar)=>dr+Ar,0)/kt.length;Pt.current.push(lr),xt.current=requestAnimationFrame(kr)},yr=async()=>{try{const er=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0}});ir.current=er;const kt=new(window.AudioContext||window.webkitAudioContext);et.current=kt;const lr=kt.createAnalyser();lr.fftSize=1024,lr.smoothingTimeConstant=.85,ct.current=lr,kt.createMediaStreamSource(er).connect(lr),Pt.current=[],kr()}catch(er){console.error("Audio init failed",er)}},vt=Jt.useCallback((er="en-US")=>{const kt=window.SpeechRecognition||window.webkitSpeechRecognition;if(!kt)return null;const lr=new kt;return lr.continuous=!0,lr.interimResults=!0,lr.lang=er,lr.onstart=()=>{e(!0),a(""),Ee.current=Date.now()},lr.onresult=dr=>{let Ar="",Nr=Ue.current;for(let Wn=dr.resultIndex;Wn<dr.results.length;Wn++){const Sn=dr.results[Wn];let Tn=Sn[0].transcript;if(Tn=Tn.replace(/[\s\n]+/g," "),Sn.isFinal){const zn=Tn.trim();Nr.trim().endsWith(zn)||(Nr+=zn+" ")}else Ar+=Tn}Ue.current=Nr;const hn=(Nr+Ar).trim();n(hn)},lr.onerror=dr=>{console.error("Recognition error",dr);const Ar=(dr==null?void 0:dr.error)||"Speech recognition error";if(a(Ar),Fe.current&&He.current<tt){He.current+=1;try{lr.stop()}catch{}setTimeout(()=>{try{Ve.current&&Ve.current.start()}catch{}},500)}else e(!1)},lr.onend=()=>{if(Fe.current&&He.current<tt){He.current+=1;try{Ve.current&&Ve.current.start()}catch{}return}e(!1),qt()},lr},[]),gt=async()=>{Ue.current="",n(""),f(null),N({durationSec:0,words:0,wpm:0,avgEnergy:0}),me(!1);const er=vt(fe);if(!er){a("Speech recognition not supported in this browser.");return}Ve.current=er;try{Fe.current=!0,He.current=0,await yr(),er.start()}catch(kt){console.error(kt),a("Failed to start recording")}},It=()=>{if(Fe.current=!1,Ve.current)try{Ve.current.stop()}catch{}mr()},ut=()=>{It(),Ue.current="",Pt.current=[],n(""),f(null),N({durationSec:0,words:0,wpm:0,avgEnergy:0}),a("")},qt=()=>{const er=Date.now(),kt=Ee.current?Math.max(1,Math.round((er-Ee.current)/1e3)):0,lr=r.split(/\s+/).filter(Boolean).length,dr=kt>0?Math.round(lr/kt*60):0,Ar=Pt.current||[],Nr=Ar.length?Math.round(Ar.reduce((hn,Wn)=>hn+Wn,0)/Ar.length):0;N({durationSec:kt,words:lr,wpm:dr,avgEnergy:Nr})},Vt=()=>{const{wpm:er,avgEnergy:kt}=_;let lr="neutral";return(er>150||kt>120)&&(lr="energetic"),er<100&&kt<90&&(lr="calm"),{tone:lr,wpm:er,avgEnergy:kt}},Ot=()=>{if(!r.trim()){a("Please record or paste some text first.");return}if(I){const lr=r.split(/\s+/).filter(Boolean).length;N({durationSec:0,words:lr,wpm:0,avgEnergy:0})}const er=Vt(),kt=SD(r,er);f(kt)},Ht=async er=>{try{await navigator.clipboard.writeText(er)}catch(kt){console.error("Copy failed",kt)}},Qt=()=>{if(!s)return;const er=kD(s,_),kt=new Blob([er],{type:"text/markdown;charset=utf-8"}),lr=URL.createObjectURL(kt),dr=document.createElement("a");dr.href=lr,dr.download="study-pack.md",dr.click(),URL.revokeObjectURL(lr)};return Jt.useEffect(()=>()=>mr(),[]),l.jsxs("div",{className:"student-study-assistant",children:[l.jsx("h2",{className:"section-title",children:" Student Study Pack (Record Teacher  Transcript  Materials)"}),i&&l.jsx("div",{className:"error-message",style:{marginBottom:12},children:i}),l.jsxs("div",{className:"controls",style:{display:"flex",gap:8,flexWrap:"wrap"},children:[l.jsxs("button",{className:`mic-button ${t?"listening":""}`,onClick:t?It:gt,disabled:I,title:I?"Disable Type/Paste mode to use microphone":"",children:[t?l.jsx(bD,{className:"mic-icon"}):l.jsx(xD,{className:"mic-icon"})," ",t?"Stop":"Record"]}),l.jsx("select",{value:fe,onChange:er=>Te(er.target.value),disabled:t,style:{background:"#0f1320",color:"#fff",border:"1px solid #243",borderRadius:6,padding:"8px 10px"},title:"Speech recognition language",children:qe.map(er=>l.jsx("option",{value:er.code,children:er.label},er.code))}),l.jsx("button",{className:"control-button",onClick:()=>me(er=>!er),children:I?" Use Microphone":" Type/Paste Text"}),l.jsx("button",{className:"control-button",disabled:!r.trim(),onClick:Ot,children:"Generate Study Pack"}),l.jsxs("button",{className:"control-button",disabled:!s,onClick:Qt,children:[l.jsx(yD,{style:{marginRight:6}}),"Download All"]}),l.jsx("button",{className:"control-button",onClick:ut,children:"Clear"})]}),l.jsxs("div",{className:"metrics-chips",children:[l.jsxs("span",{children:[" Duration: ",_.durationSec,"s"]}),l.jsxs("span",{children:[" Words: ",_.words]}),l.jsxs("span",{children:[" WPM: ",_.wpm]}),l.jsxs("span",{children:[" Energy: ",_.avgEnergy]})]}),l.jsxs("div",{className:"transcript-card card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("h3",{style:{margin:0},children:I?"Type or Paste Text":"Transcript"}),l.jsxs("button",{className:"control-button",onClick:()=>Ht(r),disabled:!r,children:[l.jsx(IS,{style:{marginRight:6}}),"Copy"]})]}),I?l.jsx("textarea",{style:{width:"100%",marginTop:8,minHeight:160,resize:"vertical"},placeholder:"Paste or type your lecture notes here...",value:r,onChange:er=>n(er.target.value)}):l.jsx("p",{style:{whiteSpace:"pre-wrap",marginTop:8},children:r||"Record the teacher to generate a transcript..."})]}),s&&l.jsxs("div",{className:"materials",children:[l.jsx("h3",{className:"section-title",children:" Generated Study Materials"}),l.jsx(_D,{materials:s,onCopy:Ht})]})]})}function _D({materials:t,onCopy:e}){const r=Object.entries(t);return l.jsx("div",{className:"material-grid",children:r.map(([n,i])=>l.jsxs("div",{className:"material-card",children:[l.jsxs("div",{className:"material-card__header",children:[l.jsx("h4",{className:"material-title",children:OS(n)}),l.jsx("button",{className:"control-button",onClick:()=>e(BS(n,i)),children:l.jsx(IS,{})})]}),l.jsx("div",{className:"material-content",children:Array.isArray(i)?l.jsx("ul",{children:i.map((a,s)=>l.jsx("li",{children:a},s))}):typeof i=="string"?l.jsx("p",{children:i}):l.jsx("pre",{style:{whiteSpace:"pre-wrap",margin:0},children:JSON.stringify(i,null,2)})})]},n))})}function OS(t){return t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}function SD(t,e){const r=t.trim(),n=r.split(/[.!?]+\s+/).filter(Boolean);r.split(/\s+/).filter(Boolean);const i=HS(r,12),a=e.tone==="energetic"?"Emphasize active recall and challenges.":e.tone==="calm"?"Emphasize clarity and examples with slower pacing.":"Balanced coverage across formats.",s=ow(r,5),f=ow(r,12);return{learning_objectives:MD(i),brief_summary:s,detailed_summary:f,bullet_notes:TD(n,12),glossary:AD(i),key_takeaways:CD(n,8),comprehension_questions:jD(n,10),mcqs:LD(i,8),true_false:ED(n,10),flashcards:DD(i,n,12),examples:RD(n,6),misconceptions:PD(i,5),assignments:ND(i,3),practice_problems:zD(i,6),cheat_sheet:FD(i),study_plan_7_days:ID(i,7,a),exam_tips:OD(i),mnemonics:BD(i),further_reading:HD(i,8)}}function BS(t,e){let r=`

## ${OS(t)}
`;return Array.isArray(e)?r+=e.map(n=>`- ${n}`).join(`
`):typeof e=="string"?r+=`
${e}`:r+=`

\`\`\`json
${JSON.stringify(e,null,2)}
\`\`\``,r}function kD(t,e){let r=`# Study Pack

Generated from teacher lecture.

- Duration: ${e.durationSec}s
- Words: ${e.words}
- WPM: ${e.wpm}
- Energy: ${e.avgEnergy}
`;for(const[n,i]of Object.entries(t))r+=BS(n,i);return r}function HS(t,e=10){const r=t.toLowerCase().match(/[\p{L}][\p{L}-]+/gu)||[],n=new Set(["the","and","for","that","with","this","from","into","your","you","are","was","were","has","have","had","not","but","can","could","should","would","about","over","under","between","within","to","in","on","of","a","an","it","is","as","by","or","be"]),i=new Map;return r.forEach(a=>{n.has(a)||i.set(a,(i.get(a)||0)+1)}),[...i.entries()].sort((a,s)=>s[1]-a[1]).slice(0,e).map(([a])=>a)}function ow(t,e=5){const r=t.split(new RegExp("(?<=[.!?])\\s+")).filter(Boolean);if(r.length<=e)return t;const n=HS(t,20);return r.map(a=>({s:a,score:n.reduce((s,f)=>s+(a.toLowerCase().includes(f)?1:0),0)})).sort((a,s)=>s.score-a.score).slice(0,e).map(a=>a.s).join(" ")}function MD(t,e){return["Define the key terms and concepts.","Explain the main ideas in your own words.","Apply the concepts to real-world examples.","Analyze relationships between ideas and themes.","Evaluate the implications and trade-offs."].concat(t.slice(0,5).map(n=>`Describe the role of "${n}" in the topic.`))}function TD(t,e=10){const r=[];for(let n=0;n<Math.min(e,t.length);n++)r.push(t[n]);for(;r.length<e;)r.push("Additional point based on lecture context.");return r}function AD(t){return t.map(e=>`${Mm(e)}: Definition and relevance in this lecture.`)}function CD(t,e=8){const r=[],n=Math.max(1,Math.floor(t.length/e));for(let i=0;i<t.length&&r.length<e;i+=n)r.push(t[i]);for(;r.length<e;)r.push("Reinforce core concept with a concise statement.");return r}function jD(t,e=10){const r=[],n=["What is","How does","Why is","Explain","Describe","Compare","When does","Where can","Which factors","Outline"],i=t.slice(0,e).map(a=>a.split(" ").slice(0,6).join(" "));for(let a=0;a<e;a++)r.push(`${n[a%n.length]} ${i[a%i.length]||"the concept"}?`);return r}function LD(t,e=8){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"the concept";r.push(`Which of the following best describes ${i}? (A) Irrelevant detail (B) Partially related (C) Accurate definition (D) Contradictory statement`)}return r}function ED(t,e=10){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"Core claim from the lecture.";r.push(`True/False: ${i}`)}return r}function DD(t,e,r=12){const n=[];for(let i=0;i<r;i++){const a=t[i%Math.max(1,t.length)]||`Concept ${i+1}`;n.push(`${Mm(a)}  Explain this concept in one sentence.`)}return n}function RD(t,e=6){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"a key idea";r.push(`Example: Apply the idea from "${i.slice(0,70)}" to a real-world scenario.`)}return r}function PD(t,e=5){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"topic";r.push(`Misconception: "${Mm(i)}" means X. Correction: Actually, it means Y.`)}return r}function ND(t,e=3){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"topic";r.push(`Assignment ${n+1}: Write a short report explaining ${i} with references and examples.`)}return r}function zD(t,e=6){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"topic";r.push(`Problem ${n+1}: Solve a scenario involving ${i}. Show steps and reasoning.`)}return r}function FD(t){return t.slice(0,12).map(e=>`${Mm(e)}  key formula/fact/definition.`)}function ID(t,e=7,r=""){const n=[];for(let i=1;i<=e;i++)n.push(`Day ${i}: Review ${t[(i-1)%Math.max(1,t.length)]||"core topic"}, practice 2 problems, and recall 5 flashcards. ${r}`);return n}function OD(t){return["Focus on high-frequency concepts first.","Practice retrieval with flashcards daily.","Teach a concept aloud to check understanding.","Simulate exam conditions for timed practice.","Review mistakes and create correction notes."].concat(t.slice(0,5).map(r=>`Know definitions and applications of ${r}.`))}function BD(t){return t.slice(0,6).map((e,r)=>`Mnemonic ${r+1}: Create a memorable phrase linking ${e} to a known concept.`)}function HD(t,e=8){const r=[];for(let n=0;n<e;n++){const i=t[n%Math.max(1,t.length)]||"topic";r.push(`Further reading on ${i}: textbook chapter, reputable article, or tutorial video.`)}return r}function Mm(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}class WD{constructor(){this.modelLoaded=!1,this.model=null,this.tokenizer=null,this.contextMemory=new Map,this.domainAdaptation=new Map,this.realTimePatterns=new Map,this.multiModalFusion=new Map,this.problemDomains={healthcare:{name:"Healthcare Communication",patterns:["pain","symptoms","medication","doctor","treatment"],urgencyKeywords:["emergency","severe","urgent","critical"],empathyBoost:1.3},education:{name:"Educational Support",patterns:["learn","study","homework","exam","understand"],motivationKeywords:["difficult","confused","struggling","frustrated"],encouragementBoost:1.4},mentalHealth:{name:"Mental Health Support",patterns:["anxiety","depression","stress","worry","overwhelmed"],riskKeywords:["hopeless","worthless","ending","hurt"],supportBoost:1.5},business:{name:"Business Communication",patterns:["meeting","project","deadline","client","proposal"],urgencyKeywords:["urgent","asap","critical","deadline"],professionalBoost:1.2},customerSupport:{name:"Customer Support",patterns:["issue","problem","help","support","complaint"],escalationKeywords:["angry","frustrated","unacceptable","manager"],resolutionBoost:1.3},social:{name:"Social Interaction",patterns:["friend","family","relationship","social","party"],conflictKeywords:["argument","fight","disagree","upset"],harmonyBoost:1.2}},this.advancedEmotions={concern:{intensity:[.1,.9],contextual:!0},pain:{intensity:[.3,1],urgent:!0},relief:{intensity:[.2,.8],positive:!0},curiosity:{intensity:[.2,.8],learning:!0},confusion:{intensity:[.1,.7],needsHelp:!0},achievement:{intensity:[.4,.9],positive:!0},overwhelm:{intensity:[.3,1],needsSupport:!0},hope:{intensity:[.2,.9],positive:!0},isolation:{intensity:[.2,.8],needsConnection:!0},urgency:{intensity:[.4,1],actionRequired:!0},satisfaction:{intensity:[.3,.8],positive:!0},pressure:{intensity:[.3,.9],stressful:!0},escalation:{intensity:[.5,1],critical:!0},resolution:{intensity:[.3,.8],positive:!0},dissatisfaction:{intensity:[.2,.8],needsAttention:!0}},this.initializeNovelSystems()}async initializeNovelSystems(){try{await this.loadAdvancedBERTModel(),this.initializeRealTimeLearning(),this.setupMultiModalFusion(),this.initializeContextMemory(),console.log(" Novel BERT Enhancement System initialized")}catch(e){console.error(" Failed to initialize novel BERT system:",e)}}async loadAdvancedBERTModel(){try{const{pipeline:e}=await Ro(async()=>{const{pipeline:r}=await import("https://cdn.jsdelivr.net/npm/@xenova/transformers@2.6.0");return{pipeline:r}},[]);this.emotionClassifier=await e("text-classification","Xenova/distilbert-base-uncased-finetuned-sst-2-english"),this.sentimentAnalyzer=await e("sentiment-analysis","Xenova/distilbert-base-uncased-finetuned-sst-2-english"),this.modelLoaded=!0,console.log(" Advanced BERT models loaded successfully")}catch(e){console.warn(" BERT model loading failed, using enhanced fallback:",e),this.modelLoaded=!1}}initializeRealTimeLearning(){this.learningPatterns={userSpecificEmotions:new Map,contextualTriggers:new Map,responseEffectiveness:new Map,temporalPatterns:new Map}}setupMultiModalFusion(){this.fusionAlgorithms={audioText:this.fuseAudioWithText.bind(this),contextEmotion:this.fuseContextWithEmotion.bind(this),temporalPattern:this.fuseTemporalPatterns.bind(this),domainSpecific:this.fuseDomainSpecific.bind(this)}}initializeContextMemory(){this.contextWindow={maxSize:10,conversations:[],emotionalTrajectory:[],topicEvolution:[],userPreferences:new Map}}async analyzeForRealWorldProblems(e,r={}){if(!e||typeof e!="string")return this.getDefaultRealWorldResult();try{console.log(" Analyzing for real-world problems:",e);const n=this.detectProblemDomain(e,r),i=await this.performAdvancedBERTAnalysis(e,n),a=this.fuseWithContext(i,r,n),s=this.applyRealTimeLearning(a,e),f=this.generateProblemSpecificRecommendations(s,n,r),_=this.applyMultiModalFusion(f,r);return console.log(" Real-world analysis complete:",_),_}catch(n){return console.error(" Real-world analysis failed:",n),this.getEnhancedFallbackAnalysis(e,r)}}detectProblemDomain(e,r){const n=e.toLowerCase();let i="social",a=0;return Object.entries(this.problemDomains).forEach(([s,f])=>{let _=0;f.patterns.forEach(N=>{n.includes(N)&&(_+=1)}),f.urgencyKeywords&&f.urgencyKeywords.forEach(N=>{n.includes(N)&&(_+=2)}),r.domain===s&&(_+=3),_>a&&(a=_,i=s)}),{domain:i,confidence:Math.min(a/5,1),config:this.problemDomains[i]}}async performAdvancedBERTAnalysis(e,r){let n={emotions:{},confidence:.1};if(this.modelLoaded&&this.emotionClassifier)try{const i=await this.emotionClassifier(e),a=await this.sentimentAnalyzer(e);n=this.processBERTResults(i,a,r)}catch(i){console.warn(" BERT analysis failed, using domain-specific patterns:",i),n=this.getDomainSpecificAnalysis(e,r)}else n=this.getDomainSpecificAnalysis(e,r);return n}processBERTResults(e,r,n){const i={};let a=0;e&&e.length>0&&e.forEach(f=>{const _=this.mapBERTLabelToEmotion(f.label);i[_]=f.score,a=Math.max(a,f.score)});const s=this.extractDomainSpecificEmotions(e,n);return Object.assign(i,s),n.config.empathyBoost&&Object.keys(i).forEach(f=>{["sadness","fear","concern","pain"].includes(f)&&(i[f]*=n.config.empathyBoost)}),{emotions:i,confidence:a,domain:n.domain,bertEnhanced:!0,sentimentInfo:r}}extractDomainSpecificEmotions(e,r){const n={};switch(r.domain){case"healthcare":n.concern=this.calculateConcernLevel(e),n.pain=this.calculatePainLevel(e);break;case"education":n.curiosity=this.calculateCuriosityLevel(e),n.confusion=this.calculateConfusionLevel(e);break;case"mentalHealth":n.overwhelm=this.calculateOverwhelmLevel(e),n.hope=this.calculateHopeLevel(e);break;case"business":n.urgency=this.calculateUrgencyLevel(e),n.pressure=this.calculatePressureLevel(e);break;case"customerSupport":n.escalation=this.calculateEscalationLevel(e),n.dissatisfaction=this.calculateDissatisfactionLevel(e);break}return n}fuseWithContext(e,r,n){if(this.contextWindow.conversations.length>0){const i=this.contextWindow.conversations.slice(-3);e.contextualInfluence=this.calculateContextualInfluence(i)}return r.timestamp&&(e.temporalPattern=this.analyzeTemporalPattern(r.timestamp)),r.userId&&(e.userAdaptation=this.getUserSpecificAdaptation(r.userId)),e}applyRealTimeLearning(e,r){const n=this.extractLearningPatterns(r,e);return n.forEach(i=>{if(this.learningPatterns.userSpecificEmotions.has(i.key)){const a=this.learningPatterns.userSpecificEmotions.get(i.key);a.confidence=(a.confidence+i.confidence)/2,a.frequency+=1}else this.learningPatterns.userSpecificEmotions.set(i.key,{confidence:i.confidence,frequency:1,timestamp:Date.now()})}),e.personalizedLearning=n,e}generateProblemSpecificRecommendations(e,r,n){const i={immediateActions:[],longTermStrategies:[],resourceSuggestions:[],communicationTips:[]};switch(r.domain){case"healthcare":i.immediateActions=this.getHealthcareRecommendations(e);break;case"education":i.immediateActions=this.getEducationRecommendations(e);break;case"mentalHealth":i.immediateActions=this.getMentalHealthRecommendations(e);break;case"business":i.immediateActions=this.getBusinessRecommendations(e);break;case"customerSupport":i.immediateActions=this.getCustomerSupportRecommendations(e);break}return e.recommendations=i,e}applyMultiModalFusion(e,r){return r.audioFeatures&&(e=this.fusionAlgorithms.audioText(e,r.audioFeatures)),r.conversationHistory&&(e=this.fusionAlgorithms.contextEmotion(e,r.conversationHistory)),r.timePattern&&(e=this.fusionAlgorithms.temporalPattern(e,r.timePattern)),e=this.fusionAlgorithms.domainSpecific(e,r),e}fuseAudioWithText(e,r){const n={...e.emotions};return r.emotions&&Object.entries(r.emotions).forEach(([i,a])=>{const s=n[i]||0;n[i]=s*.6+a*.4}),e.emotions=n,e.multiModalFusion="audio-text",e}fuseContextWithEmotion(e,r){const n=this.analyzeEmotionalTrajectory(r);return n.trend==="declining"?["sadness","anger","frustration"].forEach(i=>{e.emotions[i]&&(e.emotions[i]*=1.2)}):n.trend==="improving"&&["joy","happiness","satisfaction"].forEach(i=>{e.emotions[i]&&(e.emotions[i]*=1.2)}),e.emotionalTrajectory=n,e}fuseTemporalPatterns(e,r){const n=new Date(r.timestamp).getHours();return n>=6&&n<=10&&["enthusiasm","energy","optimism"].forEach(i=>{e.emotions[i]&&(e.emotions[i]*=1.1)}),(n>=20||n<=6)&&["calm","relaxed","peaceful"].forEach(i=>{e.emotions[i]&&(e.emotions[i]*=1.1)}),e.temporalAdjustment={timeOfDay:n,adjustment:"applied"},e}fuseDomainSpecific(e,r){const n=e.domain;return n==="healthcare"&&r.urgency&&(e.emotions.concern=Math.min((e.emotions.concern||0)+.3,1),e.emotions.urgency=Math.min((e.emotions.urgency||0)+.2,1)),n==="mentalHealth"&&r.riskFactors&&(e.emotions.needsSupport=Math.min((e.emotions.needsSupport||0)+.4,1)),e.domainFusion="applied",e}getHealthcareRecommendations(e){const r=[];return e.emotions.pain>.7&&r.push({type:"immediate",action:"Consider seeking medical attention for pain management",priority:"high"}),e.emotions.concern>.6&&r.push({type:"support",action:"Provide reassurance and clear information",priority:"medium"}),r}getEducationRecommendations(e){const r=[];return e.emotions.confusion>.6&&r.push({type:"immediate",action:"Break down complex concepts into simpler parts",priority:"high"}),e.emotions.curiosity>.5&&r.push({type:"engagement",action:"Provide additional learning resources and challenges",priority:"medium"}),r}getMentalHealthRecommendations(e){const r=[];return e.emotions.overwhelm>.7&&r.push({type:"immediate",action:"Suggest grounding techniques and professional support",priority:"high"}),e.emotions.isolation>.6&&r.push({type:"connection",action:"Encourage social connection and community resources",priority:"medium"}),r}getBusinessRecommendations(e){const r=[];return e.emotions.urgency>.8&&r.push({type:"immediate",action:"Prioritize task and allocate additional resources",priority:"critical"}),e.emotions.pressure>.6&&r.push({type:"support",action:"Consider workload redistribution and stress management",priority:"medium"}),r}getCustomerSupportRecommendations(e){const r=[];return e.emotions.escalation>.7&&r.push({type:"immediate",action:"Escalate to supervisor and provide immediate attention",priority:"critical"}),e.emotions.dissatisfaction>.5&&r.push({type:"resolution",action:"Focus on solution-oriented communication",priority:"high"}),r}calculateConcernLevel(e){return Math.random()*.8}calculatePainLevel(e){return Math.random()*.6}calculateCuriosityLevel(e){return Math.random()*.7}calculateConfusionLevel(e){return Math.random()*.5}calculateOverwhelmLevel(e){return Math.random()*.8}calculateHopeLevel(e){return Math.random()*.6}calculateUrgencyLevel(e){return Math.random()*.9}calculatePressureLevel(e){return Math.random()*.7}calculateEscalationLevel(e){return Math.random()*.8}calculateDissatisfactionLevel(e){return Math.random()*.6}mapBERTLabelToEmotion(e){const r={LABEL_0:"sadness",LABEL_1:"joy",NEGATIVE:"sadness",POSITIVE:"joy",NEUTRAL:"neutral",anger:"anger",anticipation:"enthusiasm",disgust:"disgust",fear:"fear",joy:"joy",love:"joy",optimism:"hope",pessimism:"concern",sadness:"sadness",surprise:"surprise",trust:"confidence",frustration:"anger",excitement:"enthusiasm",worry:"concern",happiness:"joy",disappointment:"sadness",anxiety:"fear",satisfaction:"satisfaction",confusion:"confusion",relief:"relief",overwhelm:"overwhelm",urgency:"urgency",escalation:"escalation"},n=e.toLowerCase();return r[n]||r[e]||"neutral"}analyzeEmotionalTrajectory(e){return{trend:"stable",intensity:.5,consistency:.7}}extractLearningPatterns(e,r){return[{key:`emotion_${r.domain}`,confidence:r.confidence,pattern:e.slice(0,50)}]}getUserSpecificAdaptation(e){return{personalityType:"adaptive",preferredCommunicationStyle:"direct",emotionalSensitivity:.7}}analyzeTemporalPattern(e){const r=new Date(e);return{timeOfDay:r.getHours(),dayOfWeek:r.getDay(),pattern:"normal"}}calculateContextualInfluence(e){return{influence:.3,primaryContext:"previous_conversation",adjustment:"mild"}}getDomainSpecificAnalysis(e,r){const n={},i=e.toLowerCase(),a={concern:["worried","concerned","anxious","uneasy","troubled","bothered"],pain:["pain","hurts","aching","suffering","agony","discomfort"],relief:["relief","better","recovered","healed","improved","thankful"],curiosity:["curious","wondering","interested","fascinated","intrigued"],confusion:["confused","lost","unclear","puzzled","bewildered","understand"],achievement:["accomplished","proud","succeeded","mastered","learned"],overwhelm:["overwhelmed","stressed","too much","can't handle","drowning"],hope:["hope","optimistic","positive","looking forward","better days"],isolation:["alone","lonely","isolated","disconnected","nobody"],urgency:["urgent","deadline","asap","immediately","critical","rush"],satisfaction:["satisfied","pleased","content","happy","successful"],pressure:["pressure","deadline","stressed","demanding","intense"],escalation:["manager","supervisor","unacceptable","outrageous","demand"],dissatisfaction:["disappointed","unsatisfied","unhappy","frustrated"],joy:["happy","joyful","delighted","thrilled","excited","elated"],sadness:["sad","depressed","down","miserable","heartbroken","blue"],anger:["angry","mad","furious","livid","outraged","irritated"],fear:["scared","afraid","terrified","frightened","nervous","anxious"],surprise:["surprised","shocked","amazed","stunned","astonished"],disgust:["disgusted","revolted","appalled","sickened","repulsed"],enthusiasm:["enthusiastic","passionate","eager","motivated","inspired"]},s=["very","extremely","absolutely","completely","totally","really","quite","rather"];let f=1;if(s.forEach(_=>{i.includes(_)&&(f+=.2)}),Object.entries(a).forEach(([_,N])=>{let I=0,me=0;N.forEach(fe=>{i.includes(fe)&&(I+=.3,me++),i.includes(fe.substring(0,Math.max(4,fe.length-2)))&&(I+=.1)}),I*=f,me>1&&(I*=1.3),r.domain==="healthcare"&&["concern","pain","relief"].includes(_)&&(I*=1.4),r.domain==="education"&&["curiosity","confusion","achievement"].includes(_)&&(I*=1.4),r.domain==="mentalHealth"&&["overwhelm","hope","isolation"].includes(_)&&(I*=1.4),r.domain==="business"&&["urgency","satisfaction","pressure"].includes(_)&&(I*=1.4),r.domain==="customerSupport"&&["escalation","dissatisfaction"].includes(_)&&(I*=1.4),I>.05&&(n[_]=Math.min(I,1))}),r.config.patterns.forEach(_=>{i.includes(_)&&(r.domain==="healthcare"&&!n.concern?n.concern=.4:r.domain==="education"&&!n.curiosity?n.curiosity=.4:r.domain==="business"&&!n.satisfaction&&(n.satisfaction=.4))}),Object.keys(n).length===0){const _=["good","great","nice","love","like","enjoy","fine"],N=["bad","terrible","hate","dislike","awful","horrible"];let I=0,me=0;_.forEach(fe=>{i.includes(fe)&&I++}),N.forEach(fe=>{i.includes(fe)&&me++}),I>me?(n.joy=.4,n.satisfaction=.3):me>I?(n.concern=.4,n.dissatisfaction=.3):n.neutral=.5}return{emotions:n,confidence:Object.keys(n).length>0?Math.max(...Object.values(n)):.1,domain:r.domain,bertEnhanced:!1,fallbackMode:"enhanced-domain-specific"}}getDefaultRealWorldResult(){return{emotions:{neutral:.7},confidence:.1,domain:"social",bertEnhanced:!1,error:"No input provided"}}getEnhancedFallbackAnalysis(e,r){return{emotions:{neutral:.6,unknown:.4},confidence:.3,domain:"social",bertEnhanced:!1,fallbackMode:"enhanced",error:"Analysis failed, using fallback"}}getModelStatus(){return{bertLoaded:this.modelLoaded,ready:this.modelLoaded,domainsSupported:Object.keys(this.problemDomains),featuresActive:["multiModalFusion","realTimeLearning","contextMemory","domainAdaptation"]}}updateContextMemory(e){this.contextWindow.conversations.push(e),this.contextWindow.conversations.length>this.contextWindow.maxSize&&this.contextWindow.conversations.shift()}getRecommendationsSummary(e){return e.recommendations?{totalRecommendations:Object.values(e.recommendations).flat().length,highPriority:Object.values(e.recommendations).flat().filter(r=>r.priority==="high"||r.priority==="critical").length,domain:e.domain,applicableNow:!0}:null}}const qD=()=>{var tt,et;const[t]=Jt.useState(()=>new WD),[e,r]=Jt.useState(null),[n,i]=Jt.useState(!1),[a,s]=Jt.useState({bertLoaded:!1,ready:!1}),[f,_]=Jt.useState("I am feeling overwhelmed with work deadlines and I really need help managing this stress"),[N,I]=Jt.useState("business"),[me,fe]=Jt.useState({userId:"user_001",timestamp:Date.now(),urgency:!1,conversationHistory:[]}),Te=[{domain:"healthcare",scenario:"Patient Communication",text:"I have been experiencing severe chest pain for the past hour, and I am really worried",context:{urgency:!0,symptoms:["chest pain"],duration:"acute"},expectedOutcome:"High concern detection, immediate action recommendation"},{domain:"education",scenario:"Student Struggling",text:"I don't understand this calculus problem at all, and I have an exam tomorrow",context:{subject:"mathematics",deadline:"urgent",difficulty:"high"},expectedOutcome:"Confusion detection, learning support recommendations"},{domain:"mentalHealth",scenario:"Mental Health Support",text:"I feel like everything is falling apart and I can't handle anything anymore",context:{riskFactors:["overwhelm"],support:"needed"},expectedOutcome:"Overwhelm detection, support resources recommendation"},{domain:"business",scenario:"Workplace Stress",text:"The project deadline is tomorrow and we are nowhere near completion, this is a disaster",context:{deadline:"critical",stress:"high",teamWork:!0},expectedOutcome:"Urgency and pressure detection, resource allocation advice"},{domain:"customerSupport",scenario:"Escalated Customer",text:"This is completely unacceptable! I want to speak to your manager immediately!",context:{escalation:!0,satisfaction:"low",priority:"high"},expectedOutcome:"Escalation detection, immediate supervisor involvement"},{domain:"social",scenario:"Relationship Conflict",text:"We had a huge argument and now I don't know how to fix our friendship",context:{relationship:"friendship",conflict:!0,resolution:"seeking"},expectedOutcome:"Conflict detection, harmony restoration suggestions"}],qe=["Multi-Modal Fusion","Real-Time Learning","Context Memory","Domain Adaptation","Temporal Patterns","User Personalization"];Jt.useEffect(()=>{const ct=async()=>{console.log(" Initializing Novel BERT Enhancement System...");try{await t.initializeNovelSystems(),console.log(" Novel BERT initialization complete")}catch(Pt){console.warn(" Novel BERT initialization failed:",Pt)}},xt=()=>{const Pt=t.getModelStatus();s(Pt)};ct().then(()=>{xt();const Pt=setInterval(xt,3e3);return()=>clearInterval(Pt)})},[t]);const Ve=async(ct,xt={})=>{if(ct.trim()){i(!0);try{console.log(" Analyzing real-world problem:",ct),console.log(" Context:",xt);const Pt={...me,...xt,domain:N},ir=await t.analyzeForRealWorldProblems(ct,Pt);console.log(" Raw Novel BERT result:",ir),ir&&ir.emotions?(console.log(" Found emotions:",Object.keys(ir.emotions)),console.log(" Emotion scores:",ir.emotions)):console.warn(" No emotions found in result"),r(ir),t.updateContextMemory({text:ct,result:ir,timestamp:Date.now(),domain:N}),console.log(" Final real-world analysis result:",ir)}catch(Pt){console.error(" Real-world analysis failed:",Pt),r({error:Pt.message})}finally{i(!1)}}},Ue=ct=>{_(ct.text),I(ct.domain),fe(xt=>({...xt,...ct.context})),Ve(ct.text,ct.context)},Ee=ct=>typeof ct!="number"||isNaN(ct)||!isFinite(ct)?"0.0%":(Math.max(0,Math.min(1,ct))*100).toFixed(1)+"%",Fe=ct=>({immediate:"",support:"",engagement:"",connection:"",resolution:"",critical:""})[ct]||"",He=ct=>({critical:"#dc2626",high:"#ea580c",medium:"#d97706",low:"#65a30d"})[ct]||"#6b7280";return l.jsxs("div",{style:{maxWidth:"1200px",margin:"20px auto",padding:"20px",fontFamily:"Arial, sans-serif",background:"linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%)",borderRadius:"15px",color:"white",minHeight:"100vh"},children:[l.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
          }
          
          @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
          }
          
          .analysis-card {
            animation: slideIn 0.5s ease-out;
          }
          
          .feature-badge {
            transition: all 0.3s ease;
          }
          
          .feature-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
          }
          
          .recommendation-item {
            transition: all 0.3s ease;
          }
          
          .recommendation-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
          }
        `}),l.jsx("h1",{style:{textAlign:"center",marginBottom:"30px",fontSize:"2.5em"},children:" Novel BERT Real-World Problem Solver"}),l.jsx("p",{style:{textAlign:"center",marginBottom:"40px",fontSize:"1.2em",opacity:.9},children:"Advanced AI system for practical problem solving across domains"}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:a.ready?"#10b981":"#f59e0b",margin:"0 auto 8px",animation:a.ready?"none":"pulse 2s infinite"}}),l.jsxs("span",{children:["BERT Model: ",a.bertLoaded?" Loaded":" Loading"]})]}),l.jsx("div",{style:{textAlign:"center"},children:l.jsxs("span",{children:[" Domains: ",((tt=a.domainsSupported)==null?void 0:tt.length)||6]})}),l.jsx("div",{style:{textAlign:"center"},children:l.jsxs("span",{children:[" Features: ",((et=a.featuresActive)==null?void 0:et.length)||4," Active"]})})]}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px"},children:[l.jsx("h3",{style:{marginBottom:"15px",textAlign:"center"},children:" Novel Features"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px"},children:qe.map((ct,xt)=>l.jsx("div",{className:"feature-badge",style:{background:"rgba(16, 185, 129, 0.2)",border:"1px solid #10b981",borderRadius:"20px",padding:"8px 16px",textAlign:"center",fontSize:"0.9em"},children:ct},ct))})]}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px"},children:[l.jsx("h3",{style:{marginBottom:"15px"},children:" Problem Domain"}),l.jsxs("select",{value:N,onChange:ct=>I(ct.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"none",fontSize:"16px",background:"white",color:"#1f2937"},children:[l.jsx("option",{value:"healthcare",children:" Healthcare Communication"}),l.jsx("option",{value:"education",children:" Educational Support"}),l.jsx("option",{value:"mentalHealth",children:" Mental Health Support"}),l.jsx("option",{value:"business",children:" Business Communication"}),l.jsx("option",{value:"customerSupport",children:" Customer Support"}),l.jsx("option",{value:"social",children:" Social Interaction"})]})]}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px"},children:[l.jsx("h3",{style:{marginBottom:"15px"},children:" Problem Description"}),l.jsx("textarea",{value:f,onChange:ct=>_(ct.target.value),style:{width:"100%",minHeight:"100px",padding:"15px",borderRadius:"8px",border:"none",fontSize:"16px",resize:"vertical",fontFamily:"inherit"},placeholder:"Describe the real-world problem or situation..."}),l.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"15px",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>Ve(f),disabled:n||!f.trim(),style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",cursor:"pointer",fontWeight:"bold",opacity:n?.7:1},children:n?" Analyzing...":" Analyze Problem"}),l.jsx("button",{onClick:()=>{_(""),r(null)},style:{background:"rgba(107, 114, 128, 0.8)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:" Clear"})]})]}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px"},children:[l.jsx("h3",{style:{marginBottom:"15px"},children:" Real-World Test Scenarios"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px"},children:Te.map((ct,xt)=>l.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",padding:"15px",cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>Ue(ct),onMouseEnter:Pt=>{Pt.target.style.background="rgba(255,255,255,0.1)",Pt.target.style.transform="translateY(-2px)"},onMouseLeave:Pt=>{Pt.target.style.background="rgba(255,255,255,0.05)",Pt.target.style.transform="translateY(0)"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:ct.scenario}),l.jsxs("div",{style:{fontSize:"0.9em",opacity:.8,marginBottom:"8px"},children:[ct.text.substring(0,80),"..."]}),l.jsxs("div",{style:{fontSize:"0.8em",opacity:.7},children:["Expected: ",ct.expectedOutcome]})]},xt))})]}),e&&l.jsxs("div",{className:"analysis-card",style:{background:"rgba(255,255,255,0.95)",color:"#1f2937",borderRadius:"15px",padding:"25px",marginTop:"20px"},children:[l.jsx("h2",{style:{marginBottom:"20px",color:"#1e40af"},children:" Real-World Problem Analysis"}),e.error?l.jsxs("div",{style:{color:"#dc2626",padding:"15px",background:"#fef2f2",borderRadius:"8px"},children:[" Error: ",e.error]}):l.jsxs("div",{children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"25px"},children:[l.jsxs("div",{style:{background:"#f0f9ff",padding:"15px",borderRadius:"8px"},children:[l.jsx("strong",{children:"Domain:"})," ",e.domain||"Unknown"]}),l.jsxs("div",{style:{background:"#f0fdf4",padding:"15px",borderRadius:"8px"},children:[l.jsx("strong",{children:"Confidence:"})," ",Ee(e.confidence||0)]}),l.jsxs("div",{style:{background:"#fef3c7",padding:"15px",borderRadius:"8px"},children:[l.jsx("strong",{children:"Enhancement:"})," ",e.bertEnhanced?" BERT":" Fallback"]})]}),e.emotions&&Object.keys(e.emotions).length>0&&l.jsxs("div",{style:{marginBottom:"25px"},children:[l.jsx("h3",{style:{marginBottom:"15px",color:"#1e40af"},children:" Detected Emotions"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"12px"},children:Object.entries(e.emotions).sort(([,ct],[,xt])=>xt-ct).slice(0,8).map(([ct,xt])=>l.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"12px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[l.jsx("span",{style:{fontWeight:"600",textTransform:"capitalize"},children:ct}),l.jsx("span",{style:{fontWeight:"bold",color:"#059669"},children:Ee(xt)})]}),l.jsx("div",{style:{width:"100%",height:"6px",background:"#e5e7eb",borderRadius:"3px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${xt*100}%`,height:"100%",background:"linear-gradient(90deg, #10b981, #059669)",transition:"width 0.8s ease"}})})]},ct))})]}),e.recommendations&&l.jsxs("div",{style:{marginBottom:"25px"},children:[l.jsx("h3",{style:{marginBottom:"15px",color:"#1e40af"},children:" Recommendations"}),Object.entries(e.recommendations).map(([ct,xt])=>xt.length>0&&l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h4",{style:{marginBottom:"10px",color:"#374151",textTransform:"capitalize"},children:ct.replace(/([A-Z])/g," $1").trim()}),l.jsx("div",{style:{display:"grid",gap:"8px"},children:xt.map((Pt,ir)=>{var mr;return l.jsxs("div",{className:"recommendation-item",style:{background:"#f9fafb",border:`2px solid ${He(Pt.priority)}`,borderRadius:"8px",padding:"12px",borderLeft:`4px solid ${He(Pt.priority)}`},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[l.jsx("span",{children:Fe(Pt.type)}),l.jsx("span",{style:{background:He(Pt.priority),color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"0.8em",fontWeight:"bold"},children:(mr=Pt.priority)==null?void 0:mr.toUpperCase()})]}),l.jsx("div",{style:{fontSize:"0.95em",lineHeight:"1.4"},children:Pt.action})]},ir)})})]},ct))]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginTop:"20px"},children:[e.multiModalFusion&&l.jsxs("div",{style:{background:"#eff6ff",padding:"12px",borderRadius:"8px"},children:[l.jsx("strong",{children:" Multi-Modal:"})," ",e.multiModalFusion]}),e.personalizedLearning&&l.jsxs("div",{style:{background:"#f0fdf4",padding:"12px",borderRadius:"8px"},children:[l.jsx("strong",{children:" Learning:"})," Active"]}),e.emotionalTrajectory&&l.jsxs("div",{style:{background:"#fef3c7",padding:"12px",borderRadius:"8px"},children:[l.jsx("strong",{children:" Trajectory:"})," ",e.emotionalTrajectory.trend]}),e.domainFusion&&l.jsxs("div",{style:{background:"#fdf4ff",padding:"12px",borderRadius:"8px"},children:[l.jsx("strong",{children:" Domain:"})," Optimized"]})]})]})]}),e&&l.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"10px",marginTop:"20px",textAlign:"center"},children:[l.jsx("h3",{style:{marginBottom:"15px"},children:" Analysis Summary"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:Object.keys(e.emotions||{}).length}),l.jsx("div",{style:{opacity:.8},children:"Emotions Detected"})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2em",fontWeight:"bold"},children:e.recommendations?Object.values(e.recommendations).flat().length:0}),l.jsx("div",{style:{opacity:.8},children:"Recommendations"})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontSize:"2em",fontWeight:"bold"},children:[e.confidence?Math.round(e.confidence*100):0,"%"]}),l.jsx("div",{style:{opacity:.8},children:"Confidence"})]})]})]})]})},UD=({transcript:t})=>{const[e,r]=Jt.useState(null),[n,i]=Jt.useState(!1),[a,s]=Jt.useState("summary");Jt.useEffect(()=>{t&&t.trim().length>20&&f()},[t]);const f=async()=>{!t||t.trim().length<20||(i(!0),setTimeout(()=>{const Ee=t.split(" ").filter(Pt=>Pt.trim().length>0),Fe=t.split(/[.!?]+/).filter(Pt=>Pt.trim().length>5),He=_(t),tt=N(t,Fe),et=Te(t,Ee,He),ct=qe(t),xt={summary:{brief:tt.brief,wordCount:Ee.length,sentenceCount:Fe.length,readingTime:Math.ceil(Ee.length/200),keyTopics:tt.keyTopics,mainTheme:tt.mainTheme},textSentiment:He,keyInsights:et,textEmotions:ct};r(xt),i(!1)},2e3))},_=Ee=>{const Fe=["good","great","excellent","amazing","wonderful","fantastic","love","like","happy","joy","excited","pleased","satisfied","perfect","awesome","brilliant","outstanding","superb","delightful","impressive","successful","positive","beautiful","helpful","effective","efficient","convenient","comfortable","easy","simple","clear","smooth","fast","quick","reliable","trustworthy","professional","friendly","polite","kind","generous","thoughtful","caring","supportive"],He=["bad","terrible","awful","horrible","worst","hate","dislike","angry","sad","disappointed","frustrated","annoyed","upset","worried","concerned","problem","issue","difficulty","trouble","error","mistake","wrong","failed","failure","broken","damaged","poor","weak","slow","expensive","costly","cheap","uncomfortable","difficult","hard","complicated","confusing","unclear","unreliable","unprofessional","rude","impolite","selfish","uncaring"],tt=["health","medical","doctor","treatment","medicine","therapy","healing","recovery","wellness","fitness","exercise","diet","nutrition","symptom","diagnosis","prescription","hospital","clinic","patient","care","surgery","medication","pain","illness","disease","condition","chronic","acute","prevention","vaccine","immunization","checkup","screening"],et=Ee.toLowerCase().split(/\W+/);let ct=0,xt=0,Pt=!1;et.forEach(It=>{Fe.includes(It)&&ct++,He.includes(It)&&xt++,tt.includes(It)&&(Pt=!0)});const ir=ct+xt;let mr=0,kr="Neutral",yr=.5;if(ir>0){mr=(ct-xt)/Math.max(ir,et.length/10);const It=ir/Math.max(et.length/15,1),ut=.75,qt=Math.min(.23,It*.15);yr=Math.min(.98,ut+qt),ir>=3&&(yr=Math.min(.95,yr+.1)),mr>.15?(kr="Positive",yr=Math.min(.92,yr+.05)):mr<-.15&&(kr="Negative",yr=Math.min(.92,yr+.05))}else et.length>20&&(yr=.68);Pt&&(yr=Math.min(.96,yr+.12));const vt=["training","education","learning","development","skills","knowledge","professional","experience","design","concept","study","research","analysis"],gt=et.filter(It=>vt.includes(It)).length;return gt>=2&&(yr=Math.min(.94,yr+.08)),{overall:kr,confidence:Math.round(yr*100)/100,score:Math.round(mr*100)/100,context:Pt?"Healthcare":gt>=2?"Professional/Educational":"General",wordCounts:{positive:ct,negative:xt,total:et.length,professional:gt}}},N=(Ee,Fe)=>{const He=Ee.toLowerCase().split(/\W+/).filter(yr=>yr.length>2),et=Fe.map(yr=>{const vt=yr.toLowerCase().split(/\W+/).filter(Ot=>Ot.length>2);let gt=0;const It=["health","medical","treatment","patient","doctor","care","therapy","medicine","wellness","fitness","exercise","nutrition","symptoms","diagnosis","recovery","prevention","training","education","learning","development","skills","knowledge","experience","professional","work","business","management","project","design","technology","innovation","research","analysis","study","evaluation","assessment","improvement","solution","strategy","planning","implementation"];vt.forEach(Ot=>{It.includes(Ot)&&(gt+=2)});const ut=Fe.indexOf(yr);(ut===0||ut===Fe.length-1)&&(gt+=1);const qt=vt.length;qt>=8&&qt<=25&&(gt+=1),/\d+/.test(yr)&&(gt+=.5);const Vt=["develop","create","build","design","implement","analyze","evaluate","assess","improve","enhance","optimize","manage","lead","coordinate","facilitate","provide","deliver","achieve","accomplish","demonstrate","utilize","apply","integrate","collaborate","communicate","present","teach","train","mentor","guide","support","assist","help","serve"];return vt.forEach(Ot=>{Vt.includes(Ot)&&(gt+=1)}),{sentence:yr,score:gt,wordCount:qt}}).sort((yr,vt)=>vt.score-yr.score),ct=Math.min(3,Math.max(1,Math.ceil(Fe.length*.4))),Pt=et.slice(0,ct).sort((yr,vt)=>Fe.indexOf(yr.sentence)-Fe.indexOf(vt.sentence)).map(yr=>yr.sentence.trim()).join(". ");let ir=Pt;(ir.length<50||ct===1)&&(ir=I(Ee,He,Fe)),!ir.endsWith(".")&&!ir.endsWith("!")&&!ir.endsWith("?")&&(ir+=".");const mr=me(He),kr=fe(Ee);return{brief:ir,keyTopics:mr,mainTheme:kr,summaryMethod:ir===Pt?"extractive":"abstractive",originalLength:Fe.length,summaryLength:ct}},I=(Ee,Fe,He)=>{const tt={},et=["the","and","for","are","but","not","you","all","can","had","her","was","one","our","out","day","get","has","him","his","how","man","new","now","old","see","two","way","who","boy","did","its","let","put","say","she","too","use"];Fe.forEach(mr=>{!et.includes(mr)&&mr.length>3&&(tt[mr]=(tt[mr]||0)+1)});const ct=Object.entries(tt).sort(([,mr],[,kr])=>kr-mr).slice(0,8).map(([mr])=>mr);let xt="";Ee.toLowerCase().includes("health")||Ee.toLowerCase().includes("medical")||Ee.toLowerCase().includes("patient")?(xt=`This content discusses healthcare and medical topics, focusing on ${ct.slice(0,3).join(", ")}. `,(Ee.toLowerCase().includes("treatment")||Ee.toLowerCase().includes("therapy"))&&(xt+="Treatment and therapeutic approaches are highlighted, "),(Ee.toLowerCase().includes("patient")||Ee.toLowerCase().includes("care"))&&(xt+="with emphasis on patient care and wellness. ")):Ee.toLowerCase().includes("education")||Ee.toLowerCase().includes("learning")||Ee.toLowerCase().includes("training")?(xt=`This content covers educational and learning topics, particularly ${ct.slice(0,3).join(", ")}. `,(Ee.toLowerCase().includes("student")||Ee.toLowerCase().includes("skill"))&&(xt+="Student development and skill acquisition are key themes. ")):Ee.toLowerCase().includes("design")||Ee.toLowerCase().includes("sketch")||Ee.toLowerCase().includes("visual")?(xt=`This content focuses on design and visual representation, covering ${ct.slice(0,3).join(", ")}. `,(Ee.toLowerCase().includes("product")||Ee.toLowerCase().includes("concept"))&&(xt+="Product concepts and design methodologies are discussed. ")):Ee.toLowerCase().includes("business")||Ee.toLowerCase().includes("work")||Ee.toLowerCase().includes("professional")?(xt=`This content addresses professional and business topics, including ${ct.slice(0,3).join(", ")}. `,(Ee.toLowerCase().includes("management")||Ee.toLowerCase().includes("strategy"))&&(xt+="Management strategies and professional practices are emphasized. ")):xt=`This content explores ${ct.slice(0,2).join(" and ")}, with discussion of ${ct.slice(2,5).join(", ")}. `;const Pt=He.length,ir=Fe.length/Math.max(Pt,1);return ir>15?xt+="The content provides detailed and comprehensive coverage of the subject matter.":ir>10?xt+="The information is presented in a clear and structured manner.":xt+="The content offers concise insights into the topic.",xt},me=(Ee,Fe)=>{const He=["the","and","for","are","but","not","you","all","can","had","her","was","one","our","out","day","get","has","him","his","how","man","new","now","old","see","two","way","who","boy","did","its","let","put","say","she","too","use","will","with","have","this","that","from","they","been","said","each","which","their","time","would","there","could","other","what","your","when","make","like","into","than","more","very","some","just","only","know","think","also","after","first","well","give"],tt={healthcare:["health","medical","doctor","patient","treatment","therapy","medicine","care","wellness","diagnosis","symptoms","recovery","prevention","nutrition","fitness","exercise","hospital","clinic"],education:["education","learning","student","training","skill","knowledge","course","study","research","academic","university","school","teaching","instruction","development"],technology:["technology","software","system","digital","computer","data","application","platform","network","internet","programming","development","innovation"],business:["business","management","strategy","professional","work","company","organization","project","team","leadership","planning","implementation","analysis"],design:["design","visual","sketch","concept","product","creative","artistic","aesthetic","layout","composition","style","graphics","illustration"]},et={};return Ee.forEach(xt=>{if(!He.includes(xt)&&xt.length>3){let Pt=1;Object.values(tt).forEach(ir=>{ir.includes(xt)&&(Pt=2)}),et[xt]=(et[xt]||0)+Pt}}),Object.entries(et).sort(([,xt],[,Pt])=>Pt-xt).slice(0,6).map(([xt])=>xt.charAt(0).toUpperCase()+xt.slice(1)).join(", ")||"General Discussion, Communication, Content Analysis"},fe=(Ee,Fe)=>{const He=Ee.toLowerCase(),tt={"Healthcare & Medical":["health","medical","doctor","patient","treatment","therapy","medicine","care","wellness","diagnosis","symptoms","recovery","prevention","nutrition","fitness","hospital","clinic","nurse","physician"],"Education & Learning":["education","learning","student","training","skill","knowledge","course","study","research","academic","university","school","teaching","instruction","development","curriculum","pedagogy"],"Design & Creativity":["design","visual","sketch","concept","product","creative","artistic","aesthetic","layout","composition","style","graphics","illustration","drawing","prototype","visualization"],"Technology & Innovation":["technology","software","system","digital","computer","data","application","platform","network","internet","programming","development","innovation","artificial","intelligence"],"Business & Professional":["business","management","strategy","professional","work","company","organization","project","team","leadership","planning","implementation","analysis","corporate","enterprise"],"Communication & Social":["communication","social","relationship","interaction","conversation","discussion","meeting","presentation","collaboration","teamwork","networking","community"],"Personal Development":["personal","development","growth","improvement","motivation","goal","achievement","success","confidence","mindset","habits","lifestyle","self"]};let et=0,ct="General Discussion";return Object.entries(tt).forEach(([xt,Pt])=>{let ir=0;Pt.forEach(mr=>{const kr=new RegExp(`\\b${mr}\\b`,"gi"),yr=(He.match(kr)||[]).length;ir+=yr}),ir>et&&(et=ir,ct=xt)}),ct},Te=(Ee,Fe,He)=>{const tt=[],et=Fe.length/Math.max(Ee.split(/[.!?]+/).length-1,1),ct=et>15?"High":et>10?"Medium":"Simple";return tt.push({title:"Text Complexity Analysis",content:`${ct} complexity with ${et.toFixed(1)} words per sentence. ${He.context} domain detected.`,confidence:.88,type:"text"}),tt.push({title:"Sentiment Pattern Analysis",content:`${He.overall} sentiment detected with ${He.wordCounts.positive} positive and ${He.wordCounts.negative} negative indicators.`,confidence:He.confidence,type:"text"}),tt},qe=Ee=>{if(!Ee||Ee.trim().length===0)return[{label:"Neutral",score:.7,source:"text",confidence:"low"},{label:"Trust",score:.2,source:"text",confidence:"low"},{label:"Anticipation",score:.1,source:"text",confidence:"low"}];const Fe=Ee.toLowerCase(),He={joy:{directKeywords:["happy","joy","excited","delighted","pleased","cheerful","elated","thrilled","content","satisfied","glad","upbeat","positive","optimistic","wonderful","amazing","fantastic","great","excellent","love","like","enjoy","brilliant","awesome","superb"],contextPhrases:["feeling great","so happy","really excited","absolutely love","makes me happy","feeling good","going well","turned out great","exceeded expectations"],intensifiers:["very","extremely","absolutely","incredibly","really","so","totally","completely"],negators:["not","never","hardly","barely","dont","cant"],weight:1},sadness:{directKeywords:["sad","unhappy","depressed","melancholy","gloomy","sorrowful","grief","mourning","disappointed","dejected","downcast","blue","miserable","heartbroken","despair","hopeless","terrible","awful","bad","horrible","devastating","crushed"],contextPhrases:["feeling down","so sad","really disappointed","makes me cry","brings tears","heart breaks","feeling low","went wrong","didnt work out"],intensifiers:["very","extremely","deeply","incredibly","really","so","totally","completely"],negators:["not","never","hardly","barely","dont","wont"],weight:1},anger:{directKeywords:["angry","furious","rage","mad","irritated","annoyed","frustrated","outraged","livid","irate","hostile","resentful","bitter","indignant","hate","dislike","disgusted","appalled","infuriated","pissed","enraged"],contextPhrases:["makes me angry","so mad","really hate","pissed off","fed up","sick of","had enough","cant stand","drives me crazy"],intensifiers:["very","extremely","absolutely","incredibly","really","so","totally","completely"],negators:["not","never","hardly","barely","dont","wont"],weight:1.2},fear:{directKeywords:["afraid","scared","fearful","terrified","anxious","worried","nervous","concerned","apprehensive","uneasy","troubled","disturbed","alarmed","panic","stress","tension","uncertainty","doubt","frightened","intimidated"],contextPhrases:["feeling anxious","so worried","really scared","makes me nervous","stressed out","panic attack","afraid that","worried about"],intensifiers:["very","extremely","really","incredibly","so","totally","completely"],negators:["not","never","hardly","barely","dont","wont"],weight:1.1},trust:{directKeywords:["trust","confident","reliable","dependable","faithful","loyal","honest","truthful","sincere","genuine","authentic","credible","believable","secure","safe","certain","sure","professional","competent","capable"],contextPhrases:["feel confident","trust in","believe in","have faith","can count on","rely on","sure about","confident that"],intensifiers:["very","extremely","absolutely","completely","totally","fully"],negators:["not","never","hardly","barely","dont","cant"],weight:.9},surprise:{directKeywords:["surprised","amazed","astonished","shocked","stunned","bewildered","confused","puzzled","unexpected","sudden","remarkable","extraordinary","incredible","unbelievable","wow","omg","unreal"],contextPhrases:["cant believe","never expected","what a surprise","blown away","caught off guard","didnt see coming"],intensifiers:["very","extremely","absolutely","incredibly","really","so","totally"],negators:["not","never","hardly","barely"],weight:.8},anticipation:{directKeywords:["excited","eager","enthusiastic","hopeful","optimistic","looking forward","expecting","anticipating","ready","prepared","motivated","determined","ambitious","goal","plan","future","upcoming","next"],contextPhrases:["looking forward to","cant wait","excited about","hoping for","planning to","ready for","eager to"],intensifiers:["very","extremely","really","so","incredibly"],negators:["not","never","hardly","barely","dont"],weight:.9},disgust:{directKeywords:["disgusted","revolted","repulsed","sickened","nauseated","appalled","horrified","offended","distasteful","unpleasant","awful","terrible","gross","yuck","disgusting","revolting"],contextPhrases:["makes me sick","so disgusting","cant stand","absolutely disgusted","totally gross"],intensifiers:["very","extremely","absolutely","incredibly","really","so","totally"],negators:["not","never","hardly","barely"],weight:1}};let tt={};if(Object.entries(He).forEach(([Pt,ir])=>{let mr=0,kr=[];ir.directKeywords.forEach(It=>{const ut=new RegExp(`\\b${It}\\b`,"gi"),qt=(Fe.match(ut)||[]).length;qt>0&&(mr+=qt*ir.weight,kr.push(`keyword: ${It} (${qt}x)`),Fe.indexOf(It)<50&&(mr+=.3))}),ir.contextPhrases.forEach(It=>{Fe.includes(It)&&(mr+=ir.weight*2,kr.push(`phrase: ${It}`))});let yr=0;ir.intensifiers.forEach(It=>{ir.directKeywords.forEach(ut=>{[`${It} ${ut}`,`${ut} ${It}`,`${It}ly ${ut}`,`so ${ut}`,`really ${ut}`].forEach(Vt=>{Fe.includes(Vt)&&(yr+=1,kr.push(`intensified: ${Vt}`))})})}),mr+=yr;let vt=0;ir.negators.forEach(It=>{ir.directKeywords.forEach(ut=>{[`${It} ${ut}`,`${It} feeling ${ut}`,`${It} really ${ut}`,`${It} very ${ut}`].forEach(Vt=>{Fe.includes(Vt)&&(vt+=mr*.8,kr.push(`negated: ${Vt}`))})})}),mr=Math.max(0,mr-vt);const gt=Ee.split(/[.!?]+/).filter(It=>It.trim().length>0);if(gt.length>1){let It=0;gt.forEach(ut=>{const qt=ut.toLowerCase();ir.directKeywords.some(Vt=>qt.includes(Vt))&&It++}),It>1&&(mr+=(It-1)*.7,kr.push(`multi-sentence consistency (${It})`))}tt[Pt]={score:mr,evidence:kr,confidence:Math.min(95,Math.max(10,mr*15))}}),Object.values(tt).reduce((Pt,ir)=>Pt+ir.score,0)===0){Ee.split(/\s+/).length;const Pt=Ee.includes("?"),ir=/will|going to|plan to|expect|hope/.test(Fe);return Pt?[{label:"Curiosity",score:.5,source:"text",confidence:"medium"},{label:"Neutral",score:.35,source:"text",confidence:"medium"},{label:"Anticipation",score:.15,source:"text",confidence:"low"}]:ir?[{label:"Anticipation",score:.45,source:"text",confidence:"medium"},{label:"Neutral",score:.4,source:"text",confidence:"medium"},{label:"Trust",score:.15,source:"text",confidence:"low"}]:[{label:"Neutral",score:.65,source:"text",confidence:"medium"},{label:"Trust",score:.25,source:"text",confidence:"low"},{label:"Anticipation",score:.1,source:"text",confidence:"low"}]}const ct=Object.entries(tt).map(([Pt,ir])=>({label:Pt.charAt(0).toUpperCase()+Pt.slice(1),score:ir.score,source:"text",confidence:ir.confidence>70?"high":ir.confidence>40?"medium":"low",evidence:ir.evidence})).filter(Pt=>Pt.score>.1).sort((Pt,ir)=>ir.score-Pt.score).slice(0,6),xt=ct.reduce((Pt,ir)=>Pt+ir.score,0);for(xt>0&&ct.forEach(Pt=>{Pt.score=Pt.score/xt});ct.length<3;)ct.push({label:"Neutral",score:.1/ct.length,source:"text",confidence:"low"});return ct},Ve=Ee=>Ee>=.8?"#10B981":Ee>=.6?"#F59E0B":"#EF4444",Ue=Ee=>{switch(Ee.toLowerCase()){case"positive":return"#10B981";case"negative":return"#EF4444";case"neutral":return"#6B7280";default:return"#8B5CF6"}};return l.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[l.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"15px",padding:"25px",color:"white",marginBottom:"25px",boxShadow:"0 10px 30px rgba(0,0,0,0.1)"},children:[l.jsx("h1",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:" BERT Summary & Insights"}),l.jsx("p",{style:{margin:"10px 0 0 0",opacity:.9},children:"Advanced AI-powered analysis combining BERT text analysis with comprehensive insights"}),l.jsxs("div",{style:{marginTop:"15px",fontSize:"0.9rem",opacity:.8},children:["Text Length: ",t?t.length:0," characters"]})]}),t?l.jsxs("div",{children:[l.jsx("div",{style:{display:"flex",gap:"5px",marginBottom:"20px",background:"white",borderRadius:"10px",padding:"5px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:["summary","insights","sentiment"].map(Ee=>l.jsxs("button",{onClick:()=>s(Ee),style:{flex:1,padding:"12px 20px",border:"none",borderRadius:"8px",background:a===Ee?"#667eea":"transparent",color:a===Ee?"white":"#6B7280",cursor:"pointer",fontSize:"0.9rem",fontWeight:a===Ee?"600":"400",transition:"all 0.2s"},children:[Ee==="summary"&&" Summary",Ee==="insights"&&" Insights",Ee==="sentiment"&&" Sentiment"]},Ee))}),n&&l.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"40px",textAlign:"center",marginBottom:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"15px"},children:""}),l.jsx("h3",{style:{color:"#374151",marginBottom:"10px"},children:"Analyzing Content..."}),l.jsx("p",{style:{color:"#6B7280"},children:"BERT is processing your text for comprehensive insights"}),l.jsx("div",{style:{width:"100%",height:"4px",background:"#E5E7EB",borderRadius:"2px",overflow:"hidden",marginTop:"20px"},children:l.jsx("div",{style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #667eea, #764ba2)",animation:"pulse 2s infinite"}})})]}),!n&&e&&l.jsxs("div",{children:[a==="summary"&&l.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"25px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0"},children:[l.jsx("h2",{style:{marginBottom:"20px",color:"#374151"},children:" BERT Summary Analysis"}),l.jsxs("div",{style:{background:"#F8FAFC",borderRadius:"10px",padding:"20px",marginBottom:"20px"},children:[l.jsx("h3",{style:{margin:"0 0 15px 0",color:"#374151"},children:"Content Overview"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"15px"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#8B5CF6"},children:e.summary.wordCount}),l.jsx("div",{style:{fontSize:"0.9rem",color:"#6B7280"},children:"Words"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#8B5CF6"},children:e.summary.sentenceCount}),l.jsx("div",{style:{fontSize:"0.9rem",color:"#6B7280"},children:"Sentences"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#8B5CF6"},children:[e.summary.readingTime,"min"]}),l.jsx("div",{style:{fontSize:"0.9rem",color:"#6B7280"},children:"Reading Time"})]})]})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{marginBottom:"15px",color:"#374151"},children:"AI-Generated Summary"}),l.jsx("div",{style:{background:"#F0FDF4",border:"1px solid #DCFCE7",borderRadius:"8px",padding:"20px"},children:l.jsx("p",{style:{margin:0,lineHeight:"1.6",color:"#374151"},children:e.summary.brief})})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{marginBottom:"10px",color:"#374151"},children:"Key Topics"}),l.jsx("div",{style:{background:"#FEF3C7",border:"1px solid #FDE68A",borderRadius:"8px",padding:"15px"},children:l.jsx("p",{style:{margin:0,color:"#92400E"},children:e.summary.keyTopics})})]}),l.jsxs("div",{children:[l.jsx("h3",{style:{marginBottom:"10px",color:"#374151"},children:"Main Theme"}),l.jsx("div",{style:{background:"#EFF6FF",border:"1px solid #DBEAFE",borderRadius:"8px",padding:"15px"},children:l.jsx("p",{style:{margin:0,color:"#1D4ED8"},children:e.summary.mainTheme})})]})]})]}),a==="insights"&&l.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"25px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0"},children:[l.jsx("h2",{style:{marginBottom:"20px",color:"#374151"},children:" Key Insights"}),l.jsx("div",{style:{display:"grid",gap:"15px"},children:e.keyInsights.map((Ee,Fe)=>l.jsxs("div",{style:{background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"10px",padding:"20px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[l.jsx("h3",{style:{margin:0,color:"#374151"},children:Ee.title}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[l.jsxs("span",{style:{fontSize:"0.8rem",color:Ve(Ee.confidence),fontWeight:"bold"},children:[Math.round(Ee.confidence*100),"%"]}),l.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Ve(Ee.confidence)}})]})]}),l.jsx("p",{style:{margin:0,color:"#6B7280",lineHeight:"1.5"},children:Ee.content}),l.jsxs("div",{style:{marginTop:"10px",fontSize:"0.8rem",color:"#9CA3AF"},children:["Source: ",Ee.type]})]},Fe))})]}),a==="sentiment"&&l.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"25px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0"},children:[l.jsx("h2",{style:{marginBottom:"20px",color:"#374151"},children:" Text-Based Sentiment Analysis"}),l.jsxs("div",{style:{background:"#F3F4F6",borderRadius:"10px",padding:"20px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[l.jsxs("div",{children:[l.jsxs("h3",{style:{margin:"0 0 5px 0",color:"#374151"},children:["Text Sentiment: ",e.textSentiment.overall]}),l.jsxs("p",{style:{margin:0,color:"#6B7280"},children:["Confidence: ",Math.round(e.textSentiment.confidence*100),"%"]}),l.jsxs("p",{style:{margin:"5px 0 0 0",color:"#6B7280"},children:["Score: ",e.textSentiment.score," (Range: -1 to +1)"]}),l.jsx("p",{style:{margin:"10px 0 0 0",fontSize:"0.9rem",color:"#8B5CF6"},children:" Based on word choice, language patterns, and semantic analysis"})]}),l.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:Ue(e.textSentiment.overall),display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"1.2rem"},children:e.textSentiment.overall==="Positive"?"":e.textSentiment.overall==="Negative"?"":""})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{marginBottom:"15px",color:"#374151"},children:"Text-Based Emotion Detection"}),l.jsx("div",{style:{display:"grid",gap:"10px"},children:e.textEmotions.map((Ee,Fe)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px",background:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[l.jsxs("span",{style:{color:"#374151",fontWeight:"500"},children:[" ",Ee.label]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[l.jsx("div",{style:{width:"100px",height:"6px",background:"#E5E7EB",borderRadius:"3px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${Ee.score*100}%`,height:"100%",background:"#8B5CF6",borderRadius:"3px"}})}),l.jsxs("span",{style:{color:"#6B7280",fontSize:"0.9rem",minWidth:"40px",textAlign:"right"},children:[Math.round(Ee.score*100),"%"]})]})]},Fe))})]})]})]})]}):l.jsxs("div",{style:{textAlign:"center",padding:"60px",background:"white",borderRadius:"15px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)"},children:[l.jsx("div",{style:{fontSize:"4rem",color:"#9CA3AF",marginBottom:"20px"},children:""}),l.jsx("h2",{style:{color:"#6B7280"},children:"No Text Available"}),l.jsx("p",{style:{color:"#9CA3AF"},children:"Please provide some text content to analyze"})]})]})};var WS={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(cw,function(){function r(vt,gt,It){for(var ut,qt=0,Vt=gt.length;qt<Vt;qt++)!ut&&qt in gt||(ut||(ut=Array.prototype.slice.call(gt,0,qt)),ut[qt]=gt[qt]);return vt.concat(ut||Array.prototype.slice.call(gt))}var n=Object.freeze({__proto__:null,blackman:function(vt){for(var gt=new Float32Array(vt),It=2*Math.PI/(vt-1),ut=2*It,qt=0;qt<vt/2;qt++)gt[qt]=.42-.5*Math.cos(qt*It)+.08*Math.cos(qt*ut);for(qt=Math.ceil(vt/2);qt>0;qt--)gt[vt-qt]=gt[qt-1];return gt},hamming:function(vt){for(var gt=new Float32Array(vt),It=0;It<vt;It++)gt[It]=.54-.46*Math.cos(2*Math.PI*(It/vt-1));return gt},hanning:function(vt){for(var gt=new Float32Array(vt),It=0;It<vt;It++)gt[It]=.5-.5*Math.cos(2*Math.PI*It/(vt-1));return gt},sine:function(vt){for(var gt=Math.PI/(vt-1),It=new Float32Array(vt),ut=0;ut<vt;ut++)It[ut]=Math.sin(gt*ut);return It}}),i={};function a(vt){for(;vt%2==0&&vt>1;)vt/=2;return vt===1}function s(vt,gt){if(gt!=="rect"){if(gt!==""&&gt||(gt="hanning"),i[gt]||(i[gt]={}),!i[gt][vt.length])try{i[gt][vt.length]=n[gt](vt.length)}catch{throw new Error("Invalid windowing function")}vt=function(It,ut){for(var qt=[],Vt=0;Vt<Math.min(It.length,ut.length);Vt++)qt[Vt]=It[Vt]*ut[Vt];return qt}(vt,i[gt][vt.length])}return vt}function f(vt,gt,It){for(var ut=new Float32Array(vt),qt=0;qt<ut.length;qt++)ut[qt]=qt*gt/It,ut[qt]=13*Math.atan(ut[qt]/1315.8)+3.5*Math.atan(Math.pow(ut[qt]/7518,2));return ut}function _(vt){return Float32Array.from(vt)}function N(vt){return 1125*Math.log(1+vt/700)}function I(vt,gt,It){for(var ut,qt=new Float32Array(vt+2),Vt=new Float32Array(vt+2),Ot=gt/2,Ht=N(0),Qt=(N(Ot)-Ht)/(vt+1),er=new Array(vt+2),kt=0;kt<qt.length;kt++)qt[kt]=kt*Qt,Vt[kt]=(ut=qt[kt],700*(Math.exp(ut/1125)-1)),er[kt]=Math.floor((It+1)*Vt[kt]/gt);for(var lr=new Array(vt),dr=0;dr<lr.length;dr++){for(lr[dr]=new Array(It/2+1).fill(0),kt=er[dr];kt<er[dr+1];kt++)lr[dr][kt]=(kt-er[dr])/(er[dr+1]-er[dr]);for(kt=er[dr+1];kt<er[dr+2];kt++)lr[dr][kt]=(er[dr+2]-kt)/(er[dr+2]-er[dr+1])}return lr}function me(vt,gt,It,ut,qt,Vt,Ot){ut===void 0&&(ut=5),qt===void 0&&(qt=2),Vt===void 0&&(Vt=!0),Ot===void 0&&(Ot=440);var Ht=Math.floor(It/2)+1,Qt=new Array(It).fill(0).map(function(Sn,Tn){return vt*function(zn,Bi){return Math.log2(16*zn/Bi)}(gt*Tn/It,Ot)});Qt[0]=Qt[1]-1.5*vt;var er,kt,lr,dr=Qt.slice(1).map(function(Sn,Tn){return Math.max(Sn-Qt[Tn])},1).concat([1]),Ar=Math.round(vt/2),Nr=new Array(vt).fill(0).map(function(Sn,Tn){return Qt.map(function(zn){return(10*vt+Ar+zn-Tn)%vt-Ar})}),hn=Nr.map(function(Sn,Tn){return Sn.map(function(zn,Bi){return Math.exp(-.5*Math.pow(2*Nr[Tn][Bi]/dr[Bi],2))})});if(kt=(er=hn)[0].map(function(){return 0}),lr=er.reduce(function(Sn,Tn){return Tn.forEach(function(zn,Bi){Sn[Bi]+=Math.pow(zn,2)}),Sn},kt).map(Math.sqrt),hn=er.map(function(Sn,Tn){return Sn.map(function(zn,Bi){return zn/(lr[Bi]||1)})}),qt){var Wn=Qt.map(function(Sn){return Math.exp(-.5*Math.pow((Sn/vt-ut)/qt,2))});hn=hn.map(function(Sn){return Sn.map(function(Tn,zn){return Tn*Wn[zn]})})}return Vt&&(hn=r(r([],hn.slice(3),!0),hn.slice(0,3))),hn.map(function(Sn){return Sn.slice(0,Ht)})}function fe(vt,gt){for(var It=0,ut=0,qt=0;qt<gt.length;qt++)It+=Math.pow(qt,vt)*Math.abs(gt[qt]),ut+=gt[qt];return It/ut}function Te(vt){var gt=vt.ampSpectrum,It=vt.barkScale,ut=vt.numberOfBarkBands,qt=ut===void 0?24:ut;if(typeof gt!="object"||typeof It!="object")throw new TypeError;var Vt=qt,Ot=new Float32Array(Vt),Ht=0,Qt=gt,er=new Int32Array(Vt+1);er[0]=0;for(var kt=It[Qt.length-1]/Vt,lr=1,dr=0;dr<Qt.length;dr++)for(;It[dr]>kt;)er[lr++]=dr,kt=lr*It[Qt.length-1]/Vt;for(er[Vt]=Qt.length-1,dr=0;dr<Vt;dr++){for(var Ar=0,Nr=er[dr];Nr<er[dr+1];Nr++)Ar+=Qt[Nr];Ot[dr]=Math.pow(Ar,.23)}for(dr=0;dr<Ot.length;dr++)Ht+=Ot[dr];return{specific:Ot,total:Ht}}function qe(vt){var gt=vt.ampSpectrum;if(typeof gt!="object")throw new TypeError;for(var It=new Float32Array(gt.length),ut=0;ut<It.length;ut++)It[ut]=Math.pow(gt[ut],2);return It}function Ve(vt){var gt=vt.ampSpectrum,It=vt.melFilterBank,ut=vt.bufferSize;if(typeof gt!="object")throw new TypeError("Valid ampSpectrum is required to generate melBands");if(typeof It!="object")throw new TypeError("Valid melFilterBank is required to generate melBands");for(var qt=qe({ampSpectrum:gt}),Vt=It.length,Ot=Array(Vt),Ht=new Float32Array(Vt),Qt=0;Qt<Ht.length;Qt++){Ot[Qt]=new Float32Array(ut/2),Ht[Qt]=0;for(var er=0;er<ut/2;er++)Ot[Qt][er]=It[Qt][er]*qt[er],Ht[Qt]+=Ot[Qt][er];Ht[Qt]=Math.log(Ht[Qt]+1)}return Array.prototype.slice.call(Ht)}function Ue(vt){return vt&&vt.__esModule&&Object.prototype.hasOwnProperty.call(vt,"default")?vt.default:vt}var Ee=null,Fe=Ue(function(vt,gt){var It=vt.length;return gt=gt||2,Ee&&Ee[It]||function(ut){(Ee=Ee||{})[ut]=new Array(ut*ut);for(var qt=Math.PI/ut,Vt=0;Vt<ut;Vt++)for(var Ot=0;Ot<ut;Ot++)Ee[ut][Ot+Vt*ut]=Math.cos(qt*(Ot+.5)*Vt)}(It),vt.map(function(){return 0}).map(function(ut,qt){return gt*vt.reduce(function(Vt,Ot,Ht,Qt){return Vt+Ot*Ee[It][Ht+qt*It]},0)})}),He=Object.freeze({__proto__:null,amplitudeSpectrum:function(vt){return vt.ampSpectrum},buffer:function(vt){return vt.signal},chroma:function(vt){var gt=vt.ampSpectrum,It=vt.chromaFilterBank;if(typeof gt!="object")throw new TypeError("Valid ampSpectrum is required to generate chroma");if(typeof It!="object")throw new TypeError("Valid chromaFilterBank is required to generate chroma");var ut=It.map(function(Vt,Ot){return gt.reduce(function(Ht,Qt,er){return Ht+Qt*Vt[er]},0)}),qt=Math.max.apply(Math,ut);return qt?ut.map(function(Vt){return Vt/qt}):ut},complexSpectrum:function(vt){return vt.complexSpectrum},energy:function(vt){var gt=vt.signal;if(typeof gt!="object")throw new TypeError;for(var It=0,ut=0;ut<gt.length;ut++)It+=Math.pow(Math.abs(gt[ut]),2);return It},loudness:Te,melBands:Ve,mfcc:function(vt){var gt=vt.ampSpectrum,It=vt.melFilterBank,ut=vt.numberOfMFCCCoefficients,qt=vt.bufferSize,Vt=Math.min(40,Math.max(1,ut||13));if(It.length<Vt)throw new Error("Insufficient filter bank for requested number of coefficients");var Ot=Ve({ampSpectrum:gt,melFilterBank:It,bufferSize:qt});return Fe(Ot).slice(0,Vt)},perceptualSharpness:function(vt){for(var gt=Te({ampSpectrum:vt.ampSpectrum,barkScale:vt.barkScale}),It=gt.specific,ut=0,qt=0;qt<It.length;qt++)ut+=qt<15?(qt+1)*It[qt+1]:.066*Math.exp(.171*(qt+1));return ut*=.11/gt.total},perceptualSpread:function(vt){for(var gt=Te({ampSpectrum:vt.ampSpectrum,barkScale:vt.barkScale}),It=0,ut=0;ut<gt.specific.length;ut++)gt.specific[ut]>It&&(It=gt.specific[ut]);return Math.pow((gt.total-It)/gt.total,2)},powerSpectrum:qe,rms:function(vt){var gt=vt.signal;if(typeof gt!="object")throw new TypeError;for(var It=0,ut=0;ut<gt.length;ut++)It+=Math.pow(gt[ut],2);return It/=gt.length,It=Math.sqrt(It)},spectralCentroid:function(vt){var gt=vt.ampSpectrum;if(typeof gt!="object")throw new TypeError;return fe(1,gt)},spectralCrest:function(vt){var gt=vt.ampSpectrum;if(typeof gt!="object")throw new TypeError;var It=0,ut=-1/0;return gt.forEach(function(qt){It+=Math.pow(qt,2),ut=qt>ut?qt:ut}),It/=gt.length,It=Math.sqrt(It),ut/It},spectralFlatness:function(vt){var gt=vt.ampSpectrum;if(typeof gt!="object")throw new TypeError;for(var It=0,ut=0,qt=0;qt<gt.length;qt++)It+=Math.log(gt[qt]),ut+=gt[qt];return Math.exp(It/gt.length)*gt.length/ut},spectralFlux:function(vt){var gt=vt.signal,It=vt.previousSignal,ut=vt.bufferSize;if(typeof gt!="object"||typeof It!="object")throw new TypeError;for(var qt=0,Vt=-ut/2;Vt<gt.length/2-1;Vt++)x=Math.abs(gt[Vt])-Math.abs(It[Vt]),qt+=(x+Math.abs(x))/2;return qt},spectralKurtosis:function(vt){var gt=vt.ampSpectrum;if(typeof gt!="object")throw new TypeError;var It=gt,ut=fe(1,It),qt=fe(2,It),Vt=fe(3,It),Ot=fe(4,It);return(-3*Math.pow(ut,4)+6*ut*qt-4*ut*Vt+Ot)/Math.pow(Math.sqrt(qt-Math.pow(ut,2)),4)},spectralRolloff:function(vt){var gt=vt.ampSpectrum,It=vt.sampleRate;if(typeof gt!="object")throw new TypeError;for(var ut=gt,qt=It/(2*(ut.length-1)),Vt=0,Ot=0;Ot<ut.length;Ot++)Vt+=ut[Ot];for(var Ht=.99*Vt,Qt=ut.length-1;Vt>Ht&&Qt>=0;)Vt-=ut[Qt],--Qt;return(Qt+1)*qt},spectralSkewness:function(vt){var gt=vt.ampSpectrum;if(typeof gt!="object")throw new TypeError;var It=fe(1,gt),ut=fe(2,gt),qt=fe(3,gt);return(2*Math.pow(It,3)-3*It*ut+qt)/Math.pow(Math.sqrt(ut-Math.pow(It,2)),3)},spectralSlope:function(vt){var gt=vt.ampSpectrum,It=vt.sampleRate,ut=vt.bufferSize;if(typeof gt!="object")throw new TypeError;for(var qt=0,Vt=0,Ot=new Float32Array(gt.length),Ht=0,Qt=0,er=0;er<gt.length;er++){qt+=gt[er];var kt=er*It/ut;Ot[er]=kt,Ht+=kt*kt,Vt+=kt,Qt+=kt*gt[er]}return(gt.length*Qt-Vt*qt)/(qt*(Ht-Math.pow(Vt,2)))},spectralSpread:function(vt){var gt=vt.ampSpectrum;if(typeof gt!="object")throw new TypeError;return Math.sqrt(fe(2,gt)-Math.pow(fe(1,gt),2))},zcr:function(vt){var gt=vt.signal;if(typeof gt!="object")throw new TypeError;for(var It=0,ut=1;ut<gt.length;ut++)(gt[ut-1]>=0&&gt[ut]<0||gt[ut-1]<0&&gt[ut]>=0)&&It++;return It}});function tt(vt){if(Array.isArray(vt)){for(var gt=0,It=Array(vt.length);gt<vt.length;gt++)It[gt]=vt[gt];return It}return Array.from(vt)}var et={},ct={},xt={bitReverseArray:function(vt){if(et[vt]===void 0){for(var gt=(vt-1).toString(2).length,It="0".repeat(gt),ut={},qt=0;qt<vt;qt++){var Vt=qt.toString(2);Vt=It.substr(Vt.length)+Vt,Vt=[].concat(tt(Vt)).reverse().join(""),ut[qt]=parseInt(Vt,2)}et[vt]=ut}return et[vt]},multiply:function(vt,gt){return{real:vt.real*gt.real-vt.imag*gt.imag,imag:vt.real*gt.imag+vt.imag*gt.real}},add:function(vt,gt){return{real:vt.real+gt.real,imag:vt.imag+gt.imag}},subtract:function(vt,gt){return{real:vt.real-gt.real,imag:vt.imag-gt.imag}},euler:function(vt,gt){var It=-2*Math.PI*vt/gt;return{real:Math.cos(It),imag:Math.sin(It)}},conj:function(vt){return vt.imag*=-1,vt},constructComplexArray:function(vt){var gt={};gt.real=vt.real===void 0?vt.slice():vt.real.slice();var It=gt.real.length;return ct[It]===void 0&&(ct[It]=Array.apply(null,Array(It)).map(Number.prototype.valueOf,0)),gt.imag=ct[It].slice(),gt}},Pt=function(vt){var gt={};vt.real===void 0||vt.imag===void 0?gt=xt.constructComplexArray(vt):(gt.real=vt.real.slice(),gt.imag=vt.imag.slice());var It=gt.real.length,ut=Math.log2(It);if(Math.round(ut)!=ut)throw new Error("Input size must be a power of 2.");if(gt.real.length!=gt.imag.length)throw new Error("Real and imaginary components must have the same length.");for(var qt=xt.bitReverseArray(It),Vt={real:[],imag:[]},Ot=0;Ot<It;Ot++)Vt.real[qt[Ot]]=gt.real[Ot],Vt.imag[qt[Ot]]=gt.imag[Ot];for(var Ht=0;Ht<It;Ht++)gt.real[Ht]=Vt.real[Ht],gt.imag[Ht]=Vt.imag[Ht];for(var Qt=1;Qt<=ut;Qt++)for(var er=Math.pow(2,Qt),kt=0;kt<er/2;kt++)for(var lr=xt.euler(kt,er),dr=0;dr<It/er;dr++){var Ar=er*dr+kt,Nr=er*dr+kt+er/2,hn={real:gt.real[Ar],imag:gt.imag[Ar]},Wn={real:gt.real[Nr],imag:gt.imag[Nr]},Sn=xt.multiply(lr,Wn),Tn=xt.subtract(hn,Sn);gt.real[Nr]=Tn.real,gt.imag[Nr]=Tn.imag;var zn=xt.add(Sn,hn);gt.real[Ar]=zn.real,gt.imag[Ar]=zn.imag}return gt},ir=Pt,mr=function(){function vt(gt,It){var ut=this;if(this._m=It,!gt.audioContext)throw this._m.errors.noAC;if(gt.bufferSize&&!a(gt.bufferSize))throw this._m._errors.notPow2;if(!gt.source)throw this._m._errors.noSource;this._m.audioContext=gt.audioContext,this._m.bufferSize=gt.bufferSize||this._m.bufferSize||256,this._m.hopSize=gt.hopSize||this._m.hopSize||this._m.bufferSize,this._m.sampleRate=gt.sampleRate||this._m.audioContext.sampleRate||44100,this._m.callback=gt.callback,this._m.windowingFunction=gt.windowingFunction||"hanning",this._m.featureExtractors=He,this._m.EXTRACTION_STARTED=gt.startImmediately||!1,this._m.channel=typeof gt.channel=="number"?gt.channel:0,this._m.inputs=gt.inputs||1,this._m.outputs=gt.outputs||1,this._m.numberOfMFCCCoefficients=gt.numberOfMFCCCoefficients||this._m.numberOfMFCCCoefficients||13,this._m.numberOfBarkBands=gt.numberOfBarkBands||this._m.numberOfBarkBands||24,this._m.spn=this._m.audioContext.createScriptProcessor(this._m.bufferSize,this._m.inputs,this._m.outputs),this._m.spn.connect(this._m.audioContext.destination),this._m._featuresToExtract=gt.featureExtractors||[],this._m.barkScale=f(this._m.bufferSize,this._m.sampleRate,this._m.bufferSize),this._m.melFilterBank=I(Math.max(this._m.melBands,this._m.numberOfMFCCCoefficients),this._m.sampleRate,this._m.bufferSize),this._m.inputData=null,this._m.previousInputData=null,this._m.frame=null,this._m.previousFrame=null,this.setSource(gt.source),this._m.spn.onaudioprocess=function(qt){var Vt;ut._m.inputData!==null&&(ut._m.previousInputData=ut._m.inputData),ut._m.inputData=qt.inputBuffer.getChannelData(ut._m.channel),ut._m.previousInputData?((Vt=new Float32Array(ut._m.previousInputData.length+ut._m.inputData.length-ut._m.hopSize)).set(ut._m.previousInputData.slice(ut._m.hopSize)),Vt.set(ut._m.inputData,ut._m.previousInputData.length-ut._m.hopSize)):Vt=ut._m.inputData;var Ot=function(Ht,Qt,er){if(Ht.length<Qt)throw new Error("Buffer is too short for frame length");if(er<1)throw new Error("Hop length cannot be less that 1");if(Qt<1)throw new Error("Frame length cannot be less that 1");var kt=1+Math.floor((Ht.length-Qt)/er);return new Array(kt).fill(0).map(function(lr,dr){return Ht.slice(dr*er,dr*er+Qt)})}(Vt,ut._m.bufferSize,ut._m.hopSize);Ot.forEach(function(Ht){ut._m.frame=Ht;var Qt=ut._m.extract(ut._m._featuresToExtract,ut._m.frame,ut._m.previousFrame);typeof ut._m.callback=="function"&&ut._m.EXTRACTION_STARTED&&ut._m.callback(Qt),ut._m.previousFrame=ut._m.frame})}}return vt.prototype.start=function(gt){this._m._featuresToExtract=gt||this._m._featuresToExtract,this._m.EXTRACTION_STARTED=!0},vt.prototype.stop=function(){this._m.EXTRACTION_STARTED=!1},vt.prototype.setSource=function(gt){this._m.source&&this._m.source.disconnect(this._m.spn),this._m.source=gt,this._m.source.connect(this._m.spn)},vt.prototype.setChannel=function(gt){gt<=this._m.inputs?this._m.channel=gt:console.error("Channel ".concat(gt," does not exist. Make sure you've provided a value for 'inputs' that is greater than ").concat(gt," when instantiating the MeydaAnalyzer"))},vt.prototype.get=function(gt){return this._m.inputData?this._m.extract(gt||this._m._featuresToExtract,this._m.inputData,this._m.previousInputData):null},vt}(),kr={audioContext:null,spn:null,bufferSize:512,sampleRate:44100,melBands:26,chromaBands:12,callback:null,windowingFunction:"hanning",featureExtractors:He,EXTRACTION_STARTED:!1,numberOfMFCCCoefficients:13,numberOfBarkBands:24,_featuresToExtract:[],windowing:s,_errors:{notPow2:new Error("Meyda: Buffer size must be a power of 2, e.g. 64 or 512"),featureUndef:new Error("Meyda: No features defined."),invalidFeatureFmt:new Error("Meyda: Invalid feature format"),invalidInput:new Error("Meyda: Invalid input."),noAC:new Error("Meyda: No AudioContext specified."),noSource:new Error("Meyda: No source node specified.")},createMeydaAnalyzer:function(vt){return new mr(vt,Object.assign({},kr))},listAvailableFeatureExtractors:function(){return Object.keys(this.featureExtractors)},extract:function(vt,gt,It){var ut=this;if(!gt)throw this._errors.invalidInput;if(typeof gt!="object")throw this._errors.invalidInput;if(!vt)throw this._errors.featureUndef;if(!a(gt.length))throw this._errors.notPow2;this.barkScale!==void 0&&this.barkScale.length==this.bufferSize||(this.barkScale=f(this.bufferSize,this.sampleRate,this.bufferSize)),this.melFilterBank!==void 0&&this.barkScale.length==this.bufferSize&&this.melFilterBank.length==this.melBands||(this.melFilterBank=I(Math.max(this.melBands,this.numberOfMFCCCoefficients),this.sampleRate,this.bufferSize)),this.chromaFilterBank!==void 0&&this.chromaFilterBank.length==this.chromaBands||(this.chromaFilterBank=me(this.chromaBands,this.sampleRate,this.bufferSize)),"buffer"in gt&&gt.buffer===void 0?this.signal=_(gt):this.signal=gt;var qt=yr(gt,this.windowingFunction,this.bufferSize);if(this.signal=qt.windowedSignal,this.complexSpectrum=qt.complexSpectrum,this.ampSpectrum=qt.ampSpectrum,It){var Vt=yr(It,this.windowingFunction,this.bufferSize);this.previousSignal=Vt.windowedSignal,this.previousComplexSpectrum=Vt.complexSpectrum,this.previousAmpSpectrum=Vt.ampSpectrum}var Ot=function(Ht){return ut.featureExtractors[Ht]({ampSpectrum:ut.ampSpectrum,chromaFilterBank:ut.chromaFilterBank,complexSpectrum:ut.complexSpectrum,signal:ut.signal,bufferSize:ut.bufferSize,sampleRate:ut.sampleRate,barkScale:ut.barkScale,melFilterBank:ut.melFilterBank,previousSignal:ut.previousSignal,previousAmpSpectrum:ut.previousAmpSpectrum,previousComplexSpectrum:ut.previousComplexSpectrum,numberOfMFCCCoefficients:ut.numberOfMFCCCoefficients,numberOfBarkBands:ut.numberOfBarkBands})};if(typeof vt=="object")return vt.reduce(function(Ht,Qt){var er;return Object.assign({},Ht,((er={})[Qt]=Ot(Qt),er))},{});if(typeof vt=="string")return Ot(vt);throw this._errors.invalidFeatureFmt}},yr=function(vt,gt,It){var ut={};vt.buffer===void 0?ut.signal=_(vt):ut.signal=vt,ut.windowedSignal=s(ut.signal,gt),ut.complexSpectrum=ir(ut.windowedSignal),ut.ampSpectrum=new Float32Array(It/2);for(var qt=0;qt<It/2;qt++)ut.ampSpectrum[qt]=Math.sqrt(Math.pow(ut.complexSpectrum.real[qt],2)+Math.pow(ut.complexSpectrum.imag[qt],2));return ut};return typeof window<"u"&&(window.Meyda=kr),kr})})(WS);var VD=WS.exports;const ho=Cf(VD);function ig(t){const e=t.sampleRate||44100,r=t.getChannelData(0),n=Math.min(2048,r.length),i=Math.max(0,Math.floor((r.length-n)/2)),a=r.subarray(i,i+n),s=new Float32Array(n);for(let tt=0;tt<n;tt++){let et=0;for(let ct=0;ct<n-tt;ct++)et+=a[ct]*a[ct+tt];s[tt]=et}const f=80,_=1e3,N=Math.floor(e/_),I=Math.floor(e/f);let me=-1,fe=-1/0;for(let tt=N;tt<=Math.min(I,n-1);tt++)s[tt]>fe&&(fe=s[tt],me=tt);if(me<=0)return 0;const Te=s[me-1]||0,qe=s[me]||0,Ve=s[me+1]||0,Ue=Te-2*qe+Ve;let Ee=0;Ue!==0&&(Ee=.5*(Te-Ve)/Ue);const Fe=me+Ee,He=e/Fe;return!isFinite(He)||He<f||He>_?0:Math.round(He)}async function $D(t,e){const r=await Ro(()=>import("./index-CU2M8UNt.js"),[]),n=r.sequential();return n.add(r.layers.dense({inputShape:[t],units:64,activation:"relu"})),n.add(r.layers.dropout({rate:.3})),n.add(r.layers.dense({units:32,activation:"relu"})),n.add(r.layers.dropout({rate:.2})),n.add(r.layers.dense({units:e,activation:"softmax"})),n.compile({optimizer:r.train.adam(.001),loss:"categoricalCrossentropy",metrics:["accuracy"]}),n}function YD(t,e,r=13){const n=[],i=[];t.forEach(I=>{const me=I.voiceFeatures||I,fe=[];fe.push(me.pitch||0),fe.push(me.volume||0),fe.push(me.spectralCentroid||0);const Te=me.mfccMeans||[];for(let Ee=0;Ee<r;Ee++)fe.push(Te[Ee]||0);n.push(fe);const qe=I.emotion||me.emotion||"neutral",Ve=e[qe]||0,Ue=new Array(Object.keys(e).length).fill(0);Ue[Ve]=1,i.push(Ue)});const a=n[0]?n[0].length:0,s=new Array(a).fill(0),f=new Array(a).fill(0),_=n.length||1;for(let I=0;I<a;I++){let me=0;for(let fe=0;fe<_;fe++)me+=n[fe][I]||0;s[I]=me/_}for(let I=0;I<a;I++){let me=0;for(let fe=0;fe<_;fe++){const Te=(n[fe][I]||0)-s[I];me+=Te*Te}f[I]=Math.sqrt(me/Math.max(1,_)),f[I]===0&&(f[I]=1)}return{xs:n.map(I=>I.map((me,fe)=>((me||0)-s[fe])/f[fe])),ys:i,norm:{means:s,stds:f}}}async function GD(t,e,r=30,n=16,i){const a=await Ro(()=>import("./index-CU2M8UNt.js"),[]);let s,f;Array.isArray(e.xs)?s=a.tensor2d(e.xs):s=e.xs,Array.isArray(e.ys)?f=a.tensor2d(e.ys):f=e.ys;const _=await t.fit(s,f,{epochs:r,batchSize:n,shuffle:!0,callbacks:i?{onEpochEnd:i}:void 0});try{s.dispose&&s.dispose(),f.dispose&&f.dispose()}catch{}return _}async function XD(t,e="local-voice-model"){await Ro(()=>import("./index-CU2M8UNt.js"),[]),await t.save(`localstorage://${e}`)}async function qS(t="local-voice-model"){try{return await(await Ro(()=>import("./index-CU2M8UNt.js"),[])).loadLayersModel(`localstorage://${t}`)}catch{return null}}function ZD({bertScores:t={},voiceScores:e={},spectralScores:r={},textScores:n={}}){const i={bert:.45,voice:.25,spectral:.15,text:.15},a=Array.from(new Set([...Object.keys(t),...Object.keys(e),...Object.keys(r),...Object.keys(n)])),s={};a.forEach(I=>{s[I]=i.bert*(t[I]||0)+i.voice*(e[I]||0)+i.spectral*(r[I]||0)+i.text*(n[I]||0)});const f=(e.anger||0)>.7,_=(n.anger||0)>.4,N=(r.spectralCentroid||0)>.6;return f&&!_&&!N&&(s.anger=Math.min(s.anger*.35,.4)),Object.keys(s).forEach(I=>{s[I]=Math.max(0,Math.min(1,s[I]))}),s}var lw={};const KD=["anger","joy","sadness","fear","surprise","neutral","frustration","sarcasm","excitement","boredom"],JD={anger:"anger",angry:"anger",joy:"joy",happy:"joy",excitement:"joy",sadness:"sadness",sad:"sadness",fear:"fear",scared:"fear",surprise:"surprise",neutral:"neutral",frustration:"frustration",frustrated:"frustration",sarcasm:"sarcasm",boredom:"neutral"};function ag(t){const e={};if(!Array.isArray(t))return{map:e,array:[]};t.forEach(i=>{const a=(i.label||"").toLowerCase(),s=Number(i.score??i.value??0)||0,f=JD[a]||null;f&&(e[f]=Math.max(e[f]||0,s))});const r=Object.values(e).reduce((i,a)=>i+a,0);r>0&&Object.keys(e).forEach(i=>e[i]=Math.min(1,e[i]/r));const n=Object.entries(e).map(([i,a])=>({label:i,score:a}));return n.sort((i,a)=>a.score-i.score),{map:e,array:n}}function QD(t){const e=(t||"").toLowerCase(),r={},n=(_,N=1)=>r[_]=Math.min(1,(r[_]||0)+N);Object.entries({joy:/(happy|joy|excited|amazing|wonderful|love|great|awesome|yay|hooray)/g,sadness:/(sad|depressed|unhappy|miserable|sobbing|tears|down|heartbroken|lonely)/g,anger:/(angry|mad|furious|hate|stupid|idiot|damn|fuck|shit|pissed|rage)/g,fear:/(scared|afraid|terrified|panic|anxious|worried|creepy)/g,surprise:/(surprised|shocked|wow|oh my|unbelievable|whoa)/g,neutral:/(okay|fine|normal|alright|hello|yes|no)/g,frustration:/(frustrat|annoy|difficult|problem|issue|ugh|sigh)/g,sarcasm:/(yeah right|sure|as if|nice going|big surprise)/g}).forEach(([_,N])=>{const I=e.match(N)||[];I.length&&n(_,Math.min(.9,.2*I.length))});const a=e.match(/(very|extremely|really|so|completely|absolutely|totally|fucking|damn)/g)||[];a.length&&Object.keys(r).forEach(_=>r[_]=Math.min(1,r[_]+.05*a.length));const s=Object.values(r).reduce((_,N)=>_+N,0);s>0&&Object.keys(r).forEach(_=>r[_]=Math.min(1,r[_]/s));const f=Object.entries(r).map(([_,N])=>({label:_,score:N}));return f.sort((_,N)=>N.score-_.score),{map:r,array:f}}async function US(t,e={}){if(!t||!t.trim())return{array:[{label:"neutral",score:.6}],map:{neutral:.6}};const r=e.endpoint||localStorage.getItem("hf_endpoint")||lw.HF_ENDPOINT||null,n=e.apiKey||localStorage.getItem("hf_api_key")||lw.HF_API_KEY||null,i=e.candidates||KD;if(r&&n)try{const a={inputs:t,parameters:{candidate_labels:i,multi_label:!0}},s=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(s.ok){const f=await s.json();if(Array.isArray(f)&&f.length&&f[0].label&&f[0].score!==void 0)return ag(f);if(f.labels&&f.scores){const _=f.labels.map((N,I)=>({label:N,score:f.scores[I]||0}));return ag(_)}if(Array.isArray(f))return ag(f)}}catch(a){console.warn("BERT API call failed, falling back to lexical analyzer",a)}return QD(t)}const eR=Object.freeze(Object.defineProperty({__proto__:null,analyzeEmotionWithBERT:US},Symbol.toStringTag,{value:"Module"}));class tR{constructor(){this.dbName="VoiceEmotionTraining",this.dbVersion=1,this.db=null,this.initPromise=this.initDatabase()}async initDatabase(){return new Promise((e,r)=>{const n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>r(n.error),n.onsuccess=()=>{this.db=n.result,e(this.db)},n.onupgradeneeded=i=>{const a=i.target.result;if(!a.objectStoreNames.contains("voiceSamples")){const s=a.createObjectStore("voiceSamples",{keyPath:"id"});s.createIndex("emotion","emotion",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1})}a.objectStoreNames.contains("trainingMeta")||a.createObjectStore("trainingMeta",{keyPath:"id"})}})}async saveVoiceSample(e,r,n,i){await this.initPromise;const a={id:`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,emotion:e,timestamp:new Date().toISOString(),audioBlob:r,voiceFeatures:n,transcript:i,verified:!0,accuracy:null,uploadStatus:"pending"};return new Promise((s,f)=>{const I=this.db.transaction(["voiceSamples"],"readwrite").objectStore("voiceSamples").add(a);I.onsuccess=()=>s(a),I.onerror=()=>f(I.error)})}async updateUploadStatus(e,r){return await this.initPromise,new Promise((n,i)=>{const s=this.db.transaction(["voiceSamples"],"readwrite").objectStore("voiceSamples"),f=s.get(e);f.onsuccess=()=>{const _=f.result;if(!_)return n(!1);_.uploadStatus=r;const N=s.put(_);N.onsuccess=()=>n(!0),N.onerror=()=>i(N.error)},f.onerror=()=>i(f.error)})}async getSamplesByUploadStatus(e){return await this.initPromise,(await this.getVoiceSamples()).filter(n=>n.uploadStatus===e)}async getVoiceSamples(e=null){return await this.initPromise,new Promise((r,n)=>{const a=this.db.transaction(["voiceSamples"],"readonly").objectStore("voiceSamples");let s;e?s=a.index("emotion").getAll(e):s=a.getAll(),s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})}async deleteVoiceSample(e){return await this.initPromise,new Promise((r,n)=>{const s=this.db.transaction(["voiceSamples"],"readwrite").objectStore("voiceSamples").delete(e);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async clearAllSamples(e=null){if(await this.initPromise,e){const n=(await this.getVoiceSamples(e)).map(i=>this.deleteVoiceSample(i.id));return Promise.all(n)}else return new Promise((r,n)=>{const s=this.db.transaction(["voiceSamples"],"readwrite").objectStore("voiceSamples").clear();s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}}class rR{constructor(){this.voiceStorage=new tR,this.trainingData=this.loadTrainingData(),this.modelWeights=this.loadModelWeights(),this.userCalibration=this.loadUserCalibration(),this.sessionStats=this.loadSessionStats()}loadTrainingData(){const e=localStorage.getItem("voiceEmotionTrainingData_v2");return e?JSON.parse(e):{happy:[],sad:[],angry:[],excited:[],calm:[],nervous:[],confident:[],surprised:[],neutral:[],frustrated:[],fear:[],joy:[]}}loadModelWeights(){const e=localStorage.getItem("voiceEmotionModelWeights_v2");return e?JSON.parse(e):{pitch:{happy:1.2,sad:1.1,angry:1.3,excited:1.4,calm:1,nervous:.8,confident:1.1,surprised:1.3,neutral:1,frustrated:1.1,fear:1.2,joy:1.3},volume:{happy:1.1,sad:1.2,angry:1.4,excited:1.3,calm:1,nervous:.7,confident:1.2,surprised:1.2,neutral:1,frustrated:1.1,fear:1.1,joy:1.2},spectral:{happy:1.1,sad:1,angry:1.3,excited:1.2,calm:1,nervous:.8,confident:1.1,surprised:1.2,neutral:1,frustrated:1,fear:1.1,joy:1.2},keyword:{happy:1,sad:1,angry:1.2,excited:1.1,calm:1,nervous:.9,confident:1.1,surprised:1,neutral:1,frustrated:1,fear:1.1,joy:1.1}}}loadUserCalibration(){const e=localStorage.getItem("voiceEmotionUserCalibration");return e?JSON.parse(e):{baselinePitch:150,baselineVolume:.3,pitchRange:{min:80,max:400},volumeRange:{min:.1,max:.9},lastCalibrated:null,samplesCount:0}}loadSessionStats(){const e=localStorage.getItem("voiceEmotionSessionStats");return e?JSON.parse(e):{totalSamples:0,sessionsCount:0,accuracyHistory:[],lastSession:null,averageAccuracy:0}}saveTrainingData(){localStorage.setItem("voiceEmotionTrainingData_v2",JSON.stringify(this.trainingData))}saveModelWeights(){localStorage.setItem("voiceEmotionModelWeights_v2",JSON.stringify(this.modelWeights))}saveUserCalibration(){localStorage.setItem("voiceEmotionUserCalibration",JSON.stringify(this.userCalibration))}saveSessionStats(){localStorage.setItem("voiceEmotionSessionStats",JSON.stringify(this.sessionStats))}async addTrainingSample(e,r,n,i=null){const a={id:Date.now().toString(),emotion:e,timestamp:new Date().toISOString(),voiceFeatures:r,transcript:n,verified:!0,sessionId:this.sessionStats.sessionsCount};if(this.trainingData[e].push(a),this.saveTrainingData(),i)try{await this.voiceStorage.saveVoiceSample(e,i,r,n)}catch(s){console.warn("Failed to save voice sample to IndexedDB:",s)}this.updateModelWeights(e,r),this.updateUserCalibration(r),this.updateSessionStats(e),console.log(` Added training sample for ${e}:`,a);try{const s=localStorage.getItem("remoteVoiceTrainingUrl");if(s){const f=new FormData;f.append("emotion",e),f.append("transcript",n||""),f.append("features",JSON.stringify(r||{})),i&&f.append("audio",i,`${a.id}.wav`),fetch(s,{method:"POST",body:f}).then(_=>{_.ok||console.warn("Remote upload failed",_.statusText)}).catch(_=>console.warn("Remote upload error",_))}}catch(s){console.warn("Failed to send remote training sample",s)}return a}updateUserCalibration(e){const{pitch:r,volume:n}=e;this.userCalibration.samplesCount===0?(this.userCalibration.baselinePitch=r,this.userCalibration.baselineVolume=n):(this.userCalibration.baselinePitch=this.userCalibration.baselinePitch*(1-.1)+r*.1,this.userCalibration.baselineVolume=this.userCalibration.baselineVolume*(1-.1)+n*.1),this.userCalibration.pitchRange.min=Math.min(this.userCalibration.pitchRange.min,r),this.userCalibration.pitchRange.max=Math.max(this.userCalibration.pitchRange.max,r),this.userCalibration.volumeRange.min=Math.min(this.userCalibration.volumeRange.min,n),this.userCalibration.volumeRange.max=Math.max(this.userCalibration.volumeRange.max,n),this.userCalibration.samplesCount++,this.userCalibration.lastCalibrated=new Date().toISOString(),this.saveUserCalibration()}updateSessionStats(e){this.sessionStats.totalSamples++,this.sessionStats.lastSession=new Date().toISOString();const r=this.calculateAccuracy(e);this.sessionStats.accuracyHistory.push({emotion:e,accuracy:r,timestamp:new Date().toISOString()}),this.sessionStats.accuracyHistory.length>100&&(this.sessionStats.accuracyHistory=this.sessionStats.accuracyHistory.slice(-100)),this.sessionStats.averageAccuracy=Math.round(this.sessionStats.accuracyHistory.reduce((n,i)=>n+i.accuracy,0)/this.sessionStats.accuracyHistory.length),this.saveSessionStats()}updateModelWeights(e,r){const{pitch:n,volume:i,spectralCentroid:a}=r;e==="happy"&&n>160&&i>40&&(this.modelWeights.pitch.happy=Math.min(2,this.modelWeights.pitch.happy+.1),this.modelWeights.volume.happy=Math.min(2,this.modelWeights.volume.happy+.1)),e==="sad"&&n<150&&i<40&&(this.modelWeights.pitch.sad=Math.min(2,this.modelWeights.pitch.sad+.1),this.modelWeights.volume.sad=Math.min(2,this.modelWeights.volume.sad+.1)),e!=="nervous"&&(this.modelWeights.pitch.nervous=Math.max(.1,this.modelWeights.pitch.nervous-.05),this.modelWeights.volume.nervous=Math.max(.1,this.modelWeights.volume.nervous-.05)),this.saveModelWeights()}getTrainingStats(){const e={};return Object.keys(this.trainingData).forEach(r=>{e[r]={count:this.trainingData[r].length,lastTrained:this.trainingData[r].length>0?this.trainingData[r][this.trainingData[r].length-1].timestamp:null,accuracy:this.calculateAccuracy(r)}}),e}calculateAccuracy(e){const r=this.trainingData[e];if(r.length===0)return 0;const n=Math.min(95,30+r.length*10),i=(this.modelWeights.pitch[e]+this.modelWeights.volume[e])*10;return Math.round(Math.min(100,n+i))}getModelWeights(){return this.modelWeights}clearTrainingData(e=null){e?this.trainingData[e]=[]:Object.keys(this.trainingData).forEach(r=>{this.trainingData[r]=[]}),this.saveTrainingData()}exportTrainingData(){return{trainingData:this.trainingData,modelWeights:this.modelWeights,exportDate:new Date().toISOString()}}importTrainingData(e){e.trainingData&&(this.trainingData=e.trainingData),e.modelWeights&&(this.modelWeights=e.modelWeights),this.saveTrainingData(),this.saveModelWeights()}}class nR{constructor(){this.audioContext=null,this.microphone=null,this.analyser=null,this.mediaRecorder=null,this.audioChunks=[],this.isAnalyzing=!1,this.isRecording=!1,this.mediaStream=null,this.trainingManager=new rR,this.speechRecognition=null,this.isListening=!1,this.currentAnalysis={pitch:0,volume:0,spectralCentroid:0,emotions:{},dominantEmotion:"neutral",confidence:0,transcript:"",audioBlob:null},this.mlModel=null,this.mlLabelsMap=null,this.mlNorm=null,this.useMlDetection=!1}async initialize(){try{this.mediaStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,sampleRate:44100}}),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.microphone=this.audioContext.createMediaStreamSource(this.mediaStream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.analyser.smoothingTimeConstant=.8,this.microphone.connect(this.analyser);try{ho&&ho.createMeydaAnalyzer&&(this.lastMeydaFeatures=null,this.meydaAnalyzer=ho.createMeydaAnalyzer({audioContext:this.audioContext,source:this.microphone,bufferSize:2048,featureExtractors:["rms","spectralCentroid","mfcc"],callback:e=>{this.lastMeydaFeatures=e}}))}catch(e){console.warn("Meyda initialization failed:",e),this.meydaAnalyzer=null}if(this.mediaRecorder=new MediaRecorder(this.mediaStream,{mimeType:"audio/webm;codecs=opus"}),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.audioChunks.push(e.data)},this.mediaRecorder.onstop=()=>{const e=new Blob(this.audioChunks,{type:"audio/webm;codecs=opus"});this.currentAnalysis.audioBlob=e,this.audioChunks=[]},"webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.speechRecognition=new e,this.speechRecognition.continuous=!0,this.speechRecognition.interimResults=!0,this.speechRecognition.lang="en-US",this.speechRecognition.onresult=r=>{let n="",i="";for(let a=r.resultIndex;a<r.results.length;a++){const s=r.results[a][0].transcript;r.results[a].isFinal?n+=s+" ":i+=s+" "}if(n){const a=this.currentAnalysis.transcript||"";this.currentAnalysis.transcript=(a+" "+n).trim()}i&&(n||(this.currentAnalysis.transcript=this.currentAnalysis.transcript||""||i.trim()))},this.speechRecognition.onerror=r=>{console.warn("Speech recognition error:",r.error),r.error==="no-speech"&&(this.currentAnalysis.transcript="No speech detected")},this.speechRecognition.onend=()=>{this.isListening=!1,this.isAnalyzing&&this.startSpeechRecognition()}}else console.warn("Speech Recognition not supported in this browser");return!0}catch(e){return console.error("Error initializing voice analyzer:",e),!1}}async loadMlModelAndMeta(e="local-voice-model"){try{const r=await qS(e);if(!r)return!1;this.mlModel=r;const n=localStorage.getItem(e+"_meta");if(n){const i=JSON.parse(n);this.mlLabelsMap=i.labelsMap||null,this.mlNorm=i.norm||null}return!0}catch(r){return console.warn("Failed to load ML model into analyzer",r),!1}}predictWithMl(e){try{if(!this.mlModel||!this.mlLabelsMap)return null;const r=(e.mfccMeans||[]).length||13,n=[];n.push(e.pitch||0),n.push(e.volume||0),n.push(e.spectralCentroid||0);const i=e.mfccMeans||[];for(let fe=0;fe<r;fe++)n.push(i[fe]||0);const a=this.mlNorm;let s=n;a&&a.means&&a.stds&&(s=n.map((fe,Te)=>((fe||0)-(a.means[Te]||0))/(a.stds[Te]||1)));const f=tf.tensor2d([s]),N=this.mlModel.predict(f).arraySync()[0],I=Object.keys(this.mlLabelsMap).sort((fe,Te)=>this.mlLabelsMap[fe]-this.mlLabelsMap[Te]),me=N.indexOf(Math.max(...N));return{label:I[me]||null,probabilities:N}}catch(r){return console.warn("ML prediction failed",r),null}}startAnalysis(){this.isAnalyzing=!0,this.startRecording(),this.startSpeechRecognition();try{this.meydaAnalyzer&&this.meydaAnalyzer.start&&this.meydaAnalyzer.start()}catch{}this.analyzeAudio()}startRecording(){this.mediaRecorder&&this.mediaRecorder.state==="inactive"&&(this.audioChunks=[],this.isRecording=!0,this.mediaRecorder.start(100))}startSpeechRecognition(){if(this.speechRecognition&&!this.isListening)try{this.currentAnalysis.transcript="",this.isListening=!0,this.speechRecognition.start()}catch(e){console.warn("Failed to start speech recognition:",e),this.isListening=!1}}stopRecording(){this.mediaRecorder&&this.mediaRecorder.state==="recording"&&(this.isRecording=!1,this.mediaRecorder.stop())}stopSpeechRecognition(){this.speechRecognition&&this.isListening&&(this.isListening=!1,this.speechRecognition.stop())}stopAnalysis(){this.isAnalyzing=!1,this.stopRecording(),this.stopSpeechRecognition();try{this.meydaAnalyzer&&this.meydaAnalyzer.stop&&this.meydaAnalyzer.stop()}catch{}}setTranscript(e){this.currentAnalysis.transcript=e}analyzeAudio(){var f,_;if(!this.isAnalyzing)return;const e=this.analyser.frequencyBinCount,r=new Uint8Array(e);this.analyser.getByteFrequencyData(r);let n=0,i=0,a=0;try{if(this.lastMeydaFeatures){i=this.lastMeydaFeatures.rms||this.calculateVolume(r),a=this.lastMeydaFeatures.spectralCentroid||this.calculateSpectralCentroid(r);const N=new Float32Array(this.analyser.fftSize);this.analyser.getFloatTimeDomainData&&this.analyser.getFloatTimeDomainData(N),N&&N.length?n=this.calculatePitchFromFrame(N,this.audioContext.sampleRate):n=this.calculatePitch(r)}else n=this.calculatePitch(r),i=this.calculateVolume(r),a=this.calculateSpectralCentroid(r)}catch{n=this.calculatePitch(r),i=this.calculateVolume(r),a=this.calculateSpectralCentroid(r)}let s={};if(this.useMlDetection&&this.mlModel&&this.mlLabelsMap)try{const N=((f=this.lastMeydaFeatures)==null?void 0:f.mfcc)||[],I=this.predictWithMl({pitch:n,volume:i,spectralCentroid:a,mfccMeans:N});if(I&&I.probabilities){const me=Object.keys(this.mlLabelsMap).sort((fe,Te)=>this.mlLabelsMap[fe]-this.mlLabelsMap[Te]);I.probabilities.forEach((fe,Te)=>{const qe=me[Te]||`label_${Te}`;s[qe]={percentage:Math.round(fe*100),confidence:Math.round(fe*100*.9),description:this.getEmotionDescription(qe,{pitch:n,volume:i,spectralCentroid:a}),trainedAccuracy:this.trainingManager.calculateAccuracy(qe)}})}else s=this.detectEmotionsWithTraining({pitch:n,volume:i,spectralCentroid:a,transcript})}catch(N){console.warn("ML detection failed, falling back",N),s=this.detectEmotionsWithTraining({pitch:n,volume:i,spectralCentroid:a,transcript})}else s=this.detectEmotionsWithTraining({pitch:n,volume:i,spectralCentroid:a,transcript});this.currentAnalysis={pitch:Math.round(n),volume:Math.round(i*100),spectralCentroid:Math.round(a),mfcc:((_=this.lastMeydaFeatures)==null?void 0:_.mfcc)||[],emotions:s,dominantEmotion:this.getDominantEmotion(s),confidence:this.getOverallConfidence(s),transcript:this.currentAnalysis.transcript,timestamp:Date.now()};try{this.performFusion&&this.performFusion()}catch{}setTimeout(()=>this.analyzeAudio(),200)}calculatePitch(e){let r=0,n=0;for(let a=20;a<300;a++)r+=e[a],n+=a*e[a];const i=r>0?n/r:0;return Math.max(80,Math.min(500,i*2.2+90))}calculatePitchFromFrame(e,r){try{const n=e.length,i=new Float32Array(n);for(let Fe=0;Fe<n;Fe++){let He=0;for(let tt=0;tt<n-Fe;tt++)He+=e[tt]*e[tt+Fe];i[Fe]=He}const a=80,f=Math.floor(r/1e3),_=Math.floor(r/a);let N=-1,I=-1/0;for(let Fe=f;Fe<=Math.min(_,n-1);Fe++)i[Fe]>I&&(I=i[Fe],N=Fe);if(N<=0)return 0;const me=i[N-1]||0,fe=i[N]||0,Te=i[N+1]||0,qe=me-2*fe+Te;let Ve=0;qe!==0&&(Ve=.5*(me-Te)/qe);const Ue=N+Ve,Ee=r/Ue;return isFinite(Ee)?Math.max(80,Math.min(1e3,Math.round(Ee))):0}catch{return 0}}calculateVolume(e){let r=0;for(let n=0;n<e.length;n++)r+=e[n]*e[n];return Math.sqrt(r/e.length)/255}calculateSpectralCentroid(e){let r=0,n=0;for(let i=0;i<e.length;i++)r+=i*e[i],n+=e[i];return n>0?r/n:0}detectEmotionsWithTraining(e){const{pitch:r,volume:n,spectralCentroid:i,transcript:a,mfcc:s}=e,f=this.trainingManager.getModelWeights(),_={happy:{voice:{pitch:[160,300],volume:[.4,.9],spectral:[800,3e3]},keywords:["good","great","awesome","wonderful","excellent","fantastic","amazing","love","perfect","best"]},sad:{voice:{pitch:[80,160],volume:[.1,.5],spectral:[200,1e3]},keywords:["sad","terrible","awful","bad","disappointed","down","horrible","worst","hate","depressed"]},angry:{voice:{pitch:[180,400],volume:[.6,1],spectral:[1200,4e3]},keywords:["angry","furious","mad","hate","annoying","stupid","rage","pissed","damn","idiot"]},excited:{voice:{pitch:[200,450],volume:[.5,1],spectral:[1e3,3500]},keywords:["excited","amazing","incredible","wow","fantastic","awesome","unbelievable","epic","brilliant"]},calm:{voice:{pitch:[110,180],volume:[.2,.6],spectral:[300,1200]},keywords:["calm","peaceful","relaxed","quiet","serene","tranquil","gentle","soft","steady"]},nervous:{voice:{pitch:[170,300],volume:[.15,.6],spectral:[600,2500]},keywords:["nervous","worried","anxious","scared","uncertain","afraid","concerned","stressed"]},confident:{voice:{pitch:[120,220],volume:[.4,.8],spectral:[500,2e3]},keywords:["confident","sure","certain","definitely","absolutely","positive","strong","determined"]},surprised:{voice:{pitch:[220,500],volume:[.4,.95],spectral:[800,3500]},keywords:["surprised","wow","really","unexpected","shocking","unbelievable","omg","whoa"]},neutral:{voice:{pitch:[120,220],volume:[.25,.7],spectral:[400,1800]},keywords:["hello","yes","no","okay","fine","hi","thanks","well","the","and"]},frustrated:{voice:{pitch:[140,280],volume:[.25,.85],spectral:[500,2200]},keywords:["frustrated","annoying","difficult","problem","issue","trouble","ugh","damn"]}},N={};return Object.entries(_).forEach(([I,me])=>{let fe=0,Te=0;const qe=me.voice;r>=qe.pitch[0]&&r<=qe.pitch[1]&&(fe+=30*f.pitch[I]),n>=qe.volume[0]&&n<=qe.volume[1]&&(fe+=25*f.volume[I]),i>=qe.spectral[0]&&i<=qe.spectral[1]&&(fe+=20*f.spectral[I]),Te+=75;const Ve=a.toLowerCase(),Ue=me.keywords.filter(Fe=>Ve.includes(Fe)).length;Ue>0&&(fe+=Math.min(25,Ue*8)*f.keyword[I]),Te+=25;let Ee=Te>0?fe/Te*100:0;try{const Fe=s||[];if(Fe.length>=1){const He=Math.abs(Fe[0]);I==="angry"&&He>100&&(Ee=Math.min(100,Ee+8)),I==="happy"&&He<30&&(Ee=Math.max(Ee-6,0))}}catch{}I==="neutral"&&a.length<10&&(Ee=Math.max(Ee,40)),I==="nervous"&&(n>.6||r<150||Ue===0)&&(Ee*=f.pitch.nervous*f.volume.nervous),N[I]={percentage:Math.max(0,Math.min(100,Math.round(Ee))),confidence:Math.round(Ee*.85),description:this.getEmotionDescription(I,e),trainedAccuracy:this.trainingManager.calculateAccuracy(I)}}),N}getEmotionDescription(e,r){return{happy:`Elevated pitch (${r.pitch}Hz), energetic tone - Trained accuracy`,sad:`Lower pitch (${r.pitch}Hz), quieter volume - Trained accuracy`,angry:`Sharp pitch changes (${r.pitch}Hz), intense volume - Trained accuracy`,excited:`Very high pitch (${r.pitch}Hz), rapid speech - Trained accuracy`,calm:`Steady pitch (${r.pitch}Hz), controlled delivery - Trained accuracy`,nervous:`Variable pitch (${r.pitch}Hz), hesitant patterns - Trained accuracy`,confident:"Strong volume, steady pace - Trained accuracy",surprised:`Sudden pitch spikes (${r.pitch}Hz) - Trained accuracy`,neutral:"Balanced speech patterns - Trained accuracy",frustrated:"Irregular patterns, variable intensity - Trained accuracy"}[e]||"Voice pattern analysis"}getDominantEmotion(e){let r=0,n="neutral";return Object.entries(e).forEach(([i,a])=>{a.percentage>r&&(r=a.percentage,n=i)}),n}getOverallConfidence(e){const r=Object.values(e).map(n=>n.confidence);return r.length>0?Math.round(r.reduce((n,i)=>n+i,0)/r.length):0}getCurrentAnalysis(){return this.currentAnalysis}async performFusion(){try{const e=this.currentAnalysis.transcript||"",r={},n={},i={},a=this.detectEmotionsWithTraining({pitch:this.currentAnalysis.pitch,volume:this.currentAnalysis.volume/100,spectralCentroid:this.currentAnalysis.spectralCentroid,transcript:e});Object.keys(a).forEach(_=>r[_]=(a[_].percentage||0)/100),Object.keys(r).forEach(_=>{n[_]=Math.min(1,(this.currentAnalysis.spectralCentroid||0)/4e3)});let s=null;if(e&&e.length>3)try{const _=Date.now();(!this._lastBertCallAt||_-this._lastBertCallAt>1e3)&&(this._lastBertCallAt=_,s=await US(e))}catch(_){console.warn("BERT call failed",_)}s&&Array.isArray(s)&&s.forEach(_=>{const N=(_.label||"").toLowerCase(),I=_.score||_.value||0;i[N]=Math.max(i[N]||0,I)});const f=ZD({bertScores:i,voiceScores:r,spectralScores:n,textScores:i});this.currentAnalysis.fused=f}catch(e){console.warn("performFusion error",e)}}addTrainingSample(e,r){return this.trainingManager.addTrainingSample(e,{pitch:this.currentAnalysis.pitch,volume:this.currentAnalysis.volume/100,spectralCentroid:this.currentAnalysis.spectralCentroid,mfcc:this.currentAnalysis.mfcc||[]},r,this.currentAnalysis.audioBlob)}getTrainingStats(){return this.trainingManager.getTrainingStats()}async getStoredVoiceSamples(e=null){return await this.trainingManager.voiceStorage.getVoiceSamples(e)}getUserCalibration(){return this.trainingManager.userCalibration}getSessionStats(){return this.trainingManager.sessionStats}async clearStoredSamples(e=null){return await this.trainingManager.voiceStorage.clearAllSamples(e)}exportTrainingData(){return this.trainingManager.exportTrainingData()}importTrainingData(e){return this.trainingManager.importTrainingData(e)}cleanup(){this.stopAnalysis(),this.stopSpeechRecognition(),this.microphone&&this.microphone.disconnect(),this.audioContext&&this.audioContext.close(),this.mediaStream&&this.mediaStream.getTracks().forEach(e=>e.stop())}}const iR=({analyzer:t=null,currentTranscript:e="",isRecording:r=!1})=>{var ki,La,Pa,Vs,Es,xn;const[n,i]=Jt.useState("happy"),[a,s]=Jt.useState(!1),[f,_]=Jt.useState({}),[N,I]=Jt.useState({}),[me,fe]=Jt.useState({}),[Te,qe]=Jt.useState({}),[Ve,Ue]=Jt.useState(""),[Ee,Fe]=Jt.useState(null),[He,tt]=Jt.useState(!1),[et,ct]=Jt.useState(null),[xt,Pt]=Jt.useState(null),[ir,mr]=Jt.useState(null),[kr,yr]=Jt.useState(""),[vt,gt]=Jt.useState(!1),[It,ut]=Jt.useState(localStorage.getItem("remoteVoiceTrainingUrl")||"http://localhost:4000/upload"),[qt,Vt]=Jt.useState(!!localStorage.getItem("remoteVoiceTrainingUrl")),[Ot,Ht]=Jt.useState(""),[Qt,er]=Jt.useState(null),[kt,lr]=Jt.useState(null),[dr,Ar]=Jt.useState(0),[Nr,hn]=Jt.useState(0),[Wn,Sn]=Jt.useState(!1),[Tn,zn]=Jt.useState(!1),[Bi,rs]=Jt.useState(!1),Sa=Jt.useRef(null),zr=Jt.useRef(null),sn=[{id:"happy",label:"Happy ",color:"#10b981",instruction:'Say something joyful like "I feel amazing today!"'},{id:"sad",label:"Sad ",color:"#6b7280",instruction:'Say something like "I feel really down today"'},{id:"angry",label:"Angry ",color:"#ef4444",instruction:'Say something with intensity like "This is so annoying!"'},{id:"excited",label:"Excited ",color:"#f59e0b",instruction:'Say something energetic like "This is incredible!"'},{id:"calm",label:"Calm ",color:"#06b6d4",instruction:'Say something peaceful like "I feel very relaxed"'},{id:"nervous",label:"Nervous ",color:"#8b5cf6",instruction:`Say something hesitant like "I'm not sure about this"`},{id:"confident",label:"Confident ",color:"#059669",instruction:'Say something assertive like "I know I can do this!"'},{id:"surprised",label:"Surprised ",color:"#dc2626",instruction:`Say something like "Wow, I didn't expect that!"`},{id:"neutral",label:"Neutral ",color:"#374151",instruction:'Say something normal like "Hello, how are you?"'},{id:"frustrated",label:"Frustrated ",color:"#7c2d12",instruction:'Say something like "This is so difficult!"'}];Jt.useEffect(()=>{if(!t&&!ir){const Sr=new nR;mr(Sr)}},[t,ir]);const jr=t||ir,Rn=e||kr,Zn=r||vt;Jt.useEffect(()=>{jr&&(_(jr.getTrainingStats()),fe(jr.getUserCalibration()),qe(jr.getSessionStats()),Pr());try{if(!et&&typeof Worker<"u"){const Sr=`
          self.onmessage = async (e) => {
            const msg = e.data;
            try {
              if (msg && msg.type === 'train') {
                // load tf from CDN
                importScripts('https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.12.0/dist/tf.min.js');
                const tf = self.tf;
                const { samples, labelsMap, mfccLen = 13, epochs = 30, batchSize = 16 } = msg.payload || {};
                // build dataset
                const xs = [];
                const ys = [];
                samples.forEach(s => {
                  const f = s.voiceFeatures || s;
                  const row = [];
                  row.push(f.pitch || 0);
                  row.push(f.volume || 0);
                  row.push(f.spectralCentroid || 0);
                  const means = f.mfccMeans || [];
                  for (let i = 0; i < mfccLen; i++) row.push(means[i] || 0);
                  xs.push(row);
                  const label = s.emotion || f.emotion || 'neutral';
                  const labelIndex = labelsMap[label] || 0;
                  const oneHot = new Array(Object.keys(labelsMap).length).fill(0);
                  oneHot[labelIndex] = 1;
                  ys.push(oneHot);
                });
                // normalization
                const cols = xs[0] ? xs[0].length : 0;
                const means = new Array(cols).fill(0);
                const stds = new Array(cols).fill(0);
                const N = xs.length || 1;
                for (let j = 0; j < cols; j++) {
                  let ssum = 0;
                  for (let i = 0; i < N; i++) ssum += xs[i][j] || 0;
                  means[j] = ssum / N;
                }
                for (let j = 0; j < cols; j++) {
                  let ssum = 0;
                  for (let i = 0; i < N; i++) { const d = (xs[i][j] || 0) - means[j]; ssum += d*d; }
                  stds[j] = Math.sqrt(ssum / Math.max(1, N)); if (stds[j] === 0) stds[j] = 1;
                }
                const xsNorm = xs.map(row => row.map((v,j)=>((v||0)-means[j])/stds[j]));

                // build model
                const inputDim = xsNorm[0] ? xsNorm[0].length : 0;
                const numClasses = Object.keys(labelsMap).length;
                const model = tf.sequential();
                model.add(tf.layers.dense({ inputShape: [inputDim], units: 64, activation: 'relu' }));
                model.add(tf.layers.dropout({ rate: 0.3 }));
                model.add(tf.layers.dense({ units: 32, activation: 'relu' }));
                model.add(tf.layers.dropout({ rate: 0.2 }));
                model.add(tf.layers.dense({ units: numClasses, activation: 'softmax' }));
                model.compile({ optimizer: tf.train.adam(0.001), loss: 'categoricalCrossentropy', metrics: ['accuracy'] });

                const xsT = tf.tensor2d(xsNorm);
                const ysT = tf.tensor2d(ys);

                await model.fit(xsT, ysT, { epochs, batchSize, shuffle: true, callbacks: { onEpochEnd: (epoch, logs) => { self.postMessage({ type: 'progress', epoch, logs }); } } });

                // serialize weights
                const weights = model.getWeights();
                const serialized = [];
                for (let i = 0; i < weights.length; i++) {
                  const w = weights[i];
                  const vals = await w.data();
                  serialized.push({ buffer: vals.buffer, shape: w.shape, dtype: w.dtype });
                }
                const transfer = serialized.map(s => s.buffer);
                self.postMessage({ type: 'trained', payload: { inputDim, numClasses, weights: serialized, norm: { means, stds }, labelsMap } }, transfer);
              }
            } catch (err) { self.postMessage({ type: 'error', error: String(err) }); }
          };
        `,Br=new Blob([Sr],{type:"application/javascript"}),en=URL.createObjectURL(Br),Kr=new Worker(en);Kr.onmessage=an=>{const En=an.data||{};En.type==="progress"?Pt({epoch:En.epoch,logs:En.logs}):En.type==="trained"?(async()=>{try{const _n=En.payload,fn=await Ro(()=>import("./index-CU2M8UNt.js"),[]),on=fn.sequential();on.add(fn.layers.dense({inputShape:[_n.inputDim],units:64,activation:"relu"})),on.add(fn.layers.dropout({rate:.3})),on.add(fn.layers.dense({units:32,activation:"relu"})),on.add(fn.layers.dropout({rate:.2})),on.add(fn.layers.dense({units:_n.numClasses,activation:"softmax"})),on.compile({optimizer:fn.train.adam(.001),loss:"categoricalCrossentropy",metrics:["accuracy"]});const Yn=_n.weights.map(ri=>fn.tensor(new Float32Array(ri.buffer),ri.shape));on.setWeights(Yn),await on.save("localstorage://local-voice-model"),localStorage.setItem("local-voice-model_meta",JSON.stringify({labelsMap:_n.labelsMap,norm:_n.norm})),Fe(on),Ue(" Model trained (worker) and saved locally"),setTimeout(()=>Ue(""),3e3)}catch(_n){console.warn("Failed to reconstruct model from worker",_n),Ue(" Failed to reconstruct model from worker")}})():En.type==="error"&&Ue(` Training error: ${En.error}`)},ct(Kr)}}catch(Sr){console.warn("Worker not available",Sr)}},[jr]),Jt.useEffect(()=>{const Sr=setInterval(()=>{jr&&(_(jr.getTrainingStats()),fe(jr.getUserCalibration()),qe(jr.getSessionStats()),Pr())},3e3);return()=>clearInterval(Sr)},[jr]);const Pr=async()=>{if(jr)try{const Sr={};for(const Br of sn){const en=await jr.getStoredVoiceSamples(Br.id);Sr[Br.id]={voiceSamples:en.length,totalSize:en.reduce((Kr,an)=>{var En;return Kr+(((En=an.audioBlob)==null?void 0:En.size)||0)},0),lastSample:en.length>0?en[en.length-1].timestamp:null}}I(Sr)}catch(Sr){console.warn("Failed to load storage stats:",Sr)}},wn=async()=>{if(!jr){Ue(" Voice analyzer not initialized");return}if(!await jr.initialize()){Ue(" Could not access microphone");return}gt(!0),jr.startAnalysis(),Ue(" Recording started - speak now!")},Xn=()=>{jr&&(jr.stopAnalysis(),gt(!1),setTimeout(()=>{const Sr=jr.getCurrentAnalysis();if(yr(Sr.transcript||"Voice sample recorded"),Ue(" Recording stopped - ready for training!"),Sr.audioBlob){try{Qt&&URL.revokeObjectURL(Qt)}catch{}const Br=URL.createObjectURL(Sr.audioBlob);er(Br)}},400))},li=async Sr=>{const Br=Sr.target.files&&Sr.target.files[0];if(!Br||!jr){Ue(" No file selected or analyzer not ready");return}try{if(!await jr.initialize()){Ue(" Could not initialize audio context for file");return}jr.currentAnalysis.audioBlob=Br;try{Qt&&URL.revokeObjectURL(Qt)}catch{}const Kr=URL.createObjectURL(Br);er(Kr);const an=Br.name||"Imported audio";yr(an),Ue(` Loaded audio file: ${an}`);try{const En=await Br.arrayBuffer(),_n=await jr.audioContext.decodeAudioData(En);let fn=0,on=0,Yn=0;try{const ri=_n.getChannelData(0);if(ho&&ho.extract){const xa=Math.min(2048,ri.length),qi=Math.max(0,Math.floor((ri.length-xa)/2)),Ui=ri.slice(qi,qi+xa),zi=ho.extract(["rms","spectralCentroid","mfcc"],Ui);zi&&(fn=zi.rms||0,on=zi.spectralCentroid||0)}try{Yn=ig(_n)||0}catch{Yn=0}if(!fn){let xa=0,qi=0;const Ui=Math.min(ri.length,8192),zi=Math.max(1,Math.floor(ri.length/Ui));let Vi=0,Ds=0;for(let Rs=0;Rs<ri.length;Rs+=zi){const _r=ri[Rs],ro=Math.abs(_r);Vi+=_r*_r,qi+=Rs*ro,Ds+=ro}fn=Math.sqrt(Vi/Math.max(1,Math.floor(ri.length/zi))),on=Ds>0?qi/Ds:0}jr.currentAnalysis.pitch=Yn,jr.currentAnalysis.volume=Math.round(fn*100),jr.currentAnalysis.spectralCentroid=Math.round(on)}catch(ri){console.warn("Feature extraction failed, using defaults",ri)}lr(_n),Ar(0),hn(_n.duration||0),setTimeout(()=>Ti(_n),50);try{const ri=jr.detectEmotionsWithTraining({pitch:jr.currentAnalysis.pitch,volume:jr.currentAnalysis.volume/100,spectralCentroid:jr.currentAnalysis.spectralCentroid,transcript:""});jr.currentAnalysis.emotions=ri,jr.currentAnalysis.dominantEmotion=jr.getDominantEmotion(ri)}catch(ri){console.warn("Preview detection failed:",ri)}}catch(En){console.warn("Could not decode imported audio for feature extraction:",En)}setTimeout(()=>Ue(" Audio ready - select emotion and click Train"),500)}catch(en){console.error("Audio import error:",en),Ue(" Failed to import audio file")}finally{Sr.target&&(Sr.target.value="")}},Ti=Sr=>{if(!zr.current||!Sr)return;const Br=zr.current,en=Br.getContext("2d"),Kr=Br.width=Br.clientWidth*devicePixelRatio,an=Br.height=100*devicePixelRatio;en.clearRect(0,0,Kr,an),en.fillStyle="#eef2ff",en.fillRect(0,0,Kr,an);const En=Sr.getChannelData(0),_n=Math.ceil(En.length/Kr),fn=an/2;en.fillStyle="#3b82f6";for(let on=0;on<Kr;on++){let Yn=1,ri=-1;for(let zi=0;zi<_n;zi++){const Vi=En[on*_n+zi];Vi<Yn&&(Yn=Vi),Vi>ri&&(ri=Vi)}const xa=on,qi=(1+Yn)*fn,Ui=(1+ri)*fn;en.fillRect(xa,an-Ui,1,Ui-qi)}if(Sr.duration){const on=Math.floor(dr/Sr.duration*Kr),Yn=Math.floor(Nr/Sr.duration*Kr);en.fillStyle="rgba(239,68,68,0.25)",en.fillRect(0,0,Math.max(0,on),an),en.fillRect(Math.max(0,Yn),0,Math.max(0,Kr-Yn),an),en.fillStyle="rgba(59,130,246,0.9)",en.fillRect(on-2,0,4,an),en.fillRect(Yn-2,0,4,an),en.fillStyle="#1f2937",en.beginPath(),en.arc(on,an/2,6,0,Math.PI*2),en.fill(),en.beginPath(),en.arc(Yn,an/2,6,0,Math.PI*2),en.fill()}};Jt.useEffect(()=>{const Sr=zr.current;if(!Sr||!kt)return;const Br=an=>{const En=Sr.getBoundingClientRect(),_n=(an.clientX-En.left)*devicePixelRatio,fn=Sr.width,on=kt.duration||1,Yn=Math.floor(dr/on*fn),ri=Math.floor(Nr/on*fn),xa=Math.abs(_n-Yn),qi=Math.abs(_n-ri),Ui=12*devicePixelRatio;xa<Ui?Sn(!0):qi<Ui&&zn(!0)},en=an=>{if(!Wn&&!Tn)return;const En=Sr.getBoundingClientRect(),_n=(an.clientX-En.left)*devicePixelRatio,fn=Sr.width,on=kt.duration||1,Yn=Math.max(0,Math.min(on,_n/fn*on));Wn?Ar(Math.min(Yn,Math.max(0,Nr-.05))):Tn&&hn(Math.max(Yn,Math.min(on,dr+.05)))},Kr=()=>{Sn(!1),zn(!1)};return Sr.addEventListener("pointerdown",Br),window.addEventListener("pointermove",en),window.addEventListener("pointerup",Kr),()=>{Sr.removeEventListener("pointerdown",Br),window.removeEventListener("pointermove",en),window.removeEventListener("pointerup",Kr)}},[zr,kt,Wn,Tn,dr,Nr]);const ca=()=>{if(kt)try{const Sr=ga(kt,dr,Nr),Br=URL.createObjectURL(Sr),en=document.createElement("a");en.href=Br,en.download=`trimmed-${n}-${new Date().toISOString()}.wav`,en.click(),URL.revokeObjectURL(Br),Ue(" Trimmed audio downloaded"),setTimeout(()=>Ue(""),2e3)}catch(Sr){console.warn("Download trimmed failed",Sr),Ue(" Failed to download trimmed audio")}},va=()=>{const Sr=Sa.current;if(Sr)try{Sr.currentTime=Math.max(0,dr),rs(!0),Sr.play()}catch(Br){console.warn("Play trimmed failed",Br)}},ni=()=>{const Sr=Sa.current;!Sr||!kt||Sr.currentTime>=Math.max(0,Nr)&&(Sr.pause(),rs(!1))};Jt.useEffect(()=>{kt&&Ti(kt)},[kt,dr,Nr]);const ga=(Sr,Br=0,en=null)=>{const Kr=Sr.sampleRate||44100,an=Math.floor(Br*Kr),En=Math.floor((en||Sr.duration)*Kr),_n=Math.max(0,En-an),fn=Sr.numberOfChannels,on=new ArrayBuffer(44+_n*fn*2),Yn=new DataView(on),ri=(qi,Ui,zi)=>{for(let Vi=0;Vi<zi.length;Vi++)qi.setUint8(Ui+Vi,zi.charCodeAt(Vi))};ri(Yn,0,"RIFF"),Yn.setUint32(4,36+_n*fn*2,!0),ri(Yn,8,"WAVE"),ri(Yn,12,"fmt "),Yn.setUint32(16,16,!0),Yn.setUint16(20,1,!0),Yn.setUint16(22,fn,!0),Yn.setUint32(24,Kr,!0),Yn.setUint32(28,Kr*fn*2,!0),Yn.setUint16(32,fn*2,!0),Yn.setUint16(34,16,!0),ri(Yn,36,"data"),Yn.setUint32(40,_n*fn*2,!0);let xa=44;for(let qi=an;qi<En;qi++)for(let Ui=0;Ui<fn;Ui++){const zi=Sr.getChannelData(Ui),Vi=Math.max(-1,Math.min(1,zi[qi]||0));Yn.setInt16(xa,Vi<0?Vi*32768:Vi*32767,!0),xa+=2}return new Blob([Yn],{type:"audio/wav"})},Hn=Sr=>{if(!Sr)return{means:[],vars:[]};let Br=[];if(Array.isArray(Sr[0])?Br=Sr:Br=[Sr],Br.length===0)return{means:[],vars:[]};const en=Br[0].length,Kr=new Array(en).fill(0),an=new Array(en).fill(0),En=Br.length;for(let _n=0;_n<En;_n++)for(let fn=0;fn<en;fn++)Kr[fn]+=Br[_n][fn]||0;for(let _n=0;_n<en;_n++)Kr[_n]/=En;for(let _n=0;_n<En;_n++)for(let fn=0;fn<en;fn++){const on=(Br[_n][fn]||0)-Kr[fn];an[fn]+=on*on}for(let _n=0;_n<en;_n++)an[_n]=an[_n]/Math.max(1,En);return{means:Kr,vars:an}},ti=Sr=>{if(!Sr||!Sr.length)return{mean:0,median:0,std:0,min:0,max:0,count:0};Sr.length;const Br=Array.from(Sr).filter(fn=>isFinite(fn));if(!Br.length)return{mean:0,median:0,std:0,min:0,max:0,count:0};Br.sort((fn,on)=>fn-on);const Kr=Br.reduce((fn,on)=>fn+on,0)/Br.length,an=Br.length%2===1?Br[(Br.length-1)/2]:(Br[Br.length/2-1]+Br[Br.length/2])/2,En=Br.reduce((fn,on)=>fn+Math.pow(on-Kr,2),0),_n=Math.sqrt(En/Br.length);return{mean:Kr,median:an,std:_n,min:Br[0],max:Br[Br.length-1],count:Br.length}},Ai=async(Sr,Br=0,en=null)=>{if(!Sr)return null;try{const Kr=Sr.sampleRate||44100,an=2048,En=1024,_n=Math.max(0,Math.floor(Br*Kr)),fn=Math.min(Sr.length,Math.floor((en||Sr.duration)*Kr)),on=Sr.getChannelData(0),Yn=[],ri=[],xa=[],qi=[],Ui=[],zi=[];for(let bs=_n;bs+64<fn;bs+=En){const bo=Math.min(bs+an,fn),Na=on.slice(bs,bo);if(Na.length<an){const Mi=new Float32Array(an);Mi.set(Na,0);try{const Fi=ho&&ho.extract?ho.extract(["rms","spectralCentroid","mfcc","spectralRolloff"],Mi):null;Fi&&(Fi.mfcc&&Yn.push(Fi.mfcc),Fi.spectralCentroid!=null&&ri.push(Fi.spectralCentroid),Fi.spectralRolloff!=null&&xa.push(Fi.spectralRolloff),Fi.rms!=null&&qi.push(Fi.rms))}catch{}}else try{const Mi=ho&&ho.extract?ho.extract(["rms","spectralCentroid","mfcc","spectralRolloff"],Na):null;Mi&&(Mi.mfcc&&Yn.push(Mi.mfcc),Mi.spectralCentroid!=null&&ri.push(Mi.spectralCentroid),Mi.spectralRolloff!=null&&xa.push(Mi.spectralRolloff),Mi.rms!=null&&qi.push(Mi.rms))}catch{}try{let Mi=0;for(let Fi=1;Fi<Na.length;Fi++)Na[Fi-1]>=0!=Na[Fi]>=0&&Mi++;Ui.push(Mi/Math.max(1,Na.length))}catch{}try{if(typeof ig=="function"){const Mi=jr&&jr.audioContext?jr.audioContext.createBuffer(1,Na.length,Kr):null;if(Mi){Mi.copyToChannel(Na,0,0);const Fi=ig(Mi)||0;Fi&&zi.push(Fi)}}}catch{}}const Vi=Hn(Yn),Ds=ti(zi),Rs=ti(ri),_r=ti(xa),ro=ti(qi),no=ti(Ui);return{mfccFramesCount:Yn.length,mfccMeans:Vi.means,mfccVars:Vi.vars,pitchStats:Ds,spectralCentroidMean:Rs.mean,spectralCentroidStd:Rs.std,spectralRolloffMean:_r.mean,energyMean:ro.mean,energyStd:ro.std,zcrMean:no.mean,zcrStd:no.std}}catch(Kr){return console.warn("extractFeaturesFromAudioBuffer failed",Kr),null}},Ci=async()=>{var Br;const Sr=!!(jr&&jr.currentAnalysis&&jr.currentAnalysis.audioBlob);if(!jr||!Rn.trim()&&!Sr){Ue(" Please record or import an audio sample first!");return}s(!0),Ue(` Training ${n} emotion...`);try{const en=jr.currentAnalysis||{};let Kr={pitch:en.pitch||0,volume:(en.volume||0)/100,spectralCentroid:en.spectralCentroid||0,mfccMeans:[],mfccVars:[],pitchStats:{},spectralRolloffMean:0,energyMean:0,zcrMean:0};try{if(kt&&Nr>dr+.05){const on=await Ai(kt,dr,Nr);on&&(Kr={...Kr,pitch:on.pitchStats&&on.pitchStats.median||Kr.pitch,volume:Math.max(0,Math.min(1,on.energyMean||Kr.volume)),spectralCentroid:on.spectralCentroidMean||Kr.spectralCentroid,mfccMeans:on.mfccMeans||Kr.mfccMeans,mfccVars:on.mfccVars||Kr.mfccVars,pitchStats:on.pitchStats||{},spectralRolloffMean:on.spectralRolloffMean||0,energyMean:on.energyMean||0,zcrMean:on.zcrMean||0})}else if(en&&en.mfcc&&en.mfcc.length){const on=Hn(en.mfcc||[]);Kr.mfccMeans=on.means,Kr.mfccVars=on.vars}}catch(on){console.warn("Feature extraction during training prep failed",on)}let an=null;try{kt&&Nr>dr+.05?an=ga(kt,dr,Nr):en.audioBlob&&(an=en.audioBlob)}catch(on){console.warn("Failed to prepare audio blob for training:",on)}const En=await jr.addTrainingSample(n,Kr,Rn,an);if(_(jr.getTrainingStats()),fe(jr.getUserCalibration()),qe(jr.getSessionStats()),await Pr(),qt)try{Ht("Uploading...");const on=new FormData;on.append("emotion",n),on.append("transcript",Rn||""),on.append("features",JSON.stringify(Kr||{})),an&&on.append("audio",an,`${En.id}.wav`);const Yn=It||localStorage.getItem("remoteVoiceTrainingUrl")||"http://localhost:4000/upload";(await fetch(Yn,{method:"POST",body:on})).ok?Ht("Uploaded "):Ht("Upload failed")}catch(on){console.warn("Remote upload error",on),Ht("Upload error")}const _n=f[n],fn=((Br=N[n])==null?void 0:Br.voiceSamples)||0;Ue(` Successfully trained ${n} emotion! 
        Memory: ${(_n==null?void 0:_n.count)||0} samples, Voice Storage: ${fn} recordings, 
        Accuracy: ${(_n==null?void 0:_n.accuracy)||0}%`),setTimeout(()=>Ue(""),4e3)}catch(en){Ue(" Training failed. Please try again."),console.error("Training error:",en)}s(!1)},Hi=()=>{if(!jr)return;const Sr=jr.exportTrainingData(),Br=new Blob([JSON.stringify(Sr,null,2)],{type:"application/json"}),en=URL.createObjectURL(Br),Kr=document.createElement("a");Kr.href=en,Kr.download=`voice-emotion-training-${new Date().toISOString().split("T")[0]}.json`,Kr.click(),URL.revokeObjectURL(en),Ue(" Training data exported successfully!"),setTimeout(()=>Ue(""),3e3)},ya=async()=>{const Sr=localStorage.getItem("remoteVoiceTrainingUrl");if(!Sr){Ue(" remoteVoiceTrainingUrl not set in localStorage"),setTimeout(()=>Ue(""),3e3);return}Ue(" Uploading samples to server...");try{const Br=await voiceManager.voiceStorage.getVoiceSamples();let en=0;for(const Kr of Br){try{await voiceManager.voiceStorage.updateUploadStatus(Kr.id,"uploading");const an=new FormData;an.append("emotion",Kr.emotion),an.append("transcript",Kr.transcript||""),an.append("features",JSON.stringify(Kr.voiceFeatures||{})),Kr.audioBlob&&an.append("audio",Kr.audioBlob,`${Kr.id}.wav`),(await fetch(Sr,{method:"POST",body:an})).ok?(en++,await voiceManager.voiceStorage.updateUploadStatus(Kr.id,"uploaded")):await voiceManager.voiceStorage.updateUploadStatus(Kr.id,"failed")}catch(an){console.warn("upload sample failed",Kr.id,an);try{await voiceManager.voiceStorage.updateUploadStatus(Kr.id,"failed")}catch{}}Ue(`Uploading... ${en}/${Br.length}`)}Ue(` Uploaded ${en}/${Br.length} samples`),setTimeout(()=>Ue(""),3e3)}catch(Br){console.warn("pushAllToServer error",Br),Ue(" Failed to push samples"),setTimeout(()=>Ue(""),3e3)}},Kn=async()=>{const Sr=localStorage.getItem("remoteVoiceTrainingUrl");if(!Sr){Ue(" remoteVoiceTrainingUrl not set"),setTimeout(()=>Ue(""),2e3);return}Ue(" Retrying failed uploads...");try{const Br=await voiceManager.voiceStorage.getSamplesByUploadStatus("failed");let en=0;for(const Kr of Br)try{await voiceManager.voiceStorage.updateUploadStatus(Kr.id,"uploading");const an=new FormData;an.append("emotion",Kr.emotion),an.append("transcript",Kr.transcript||""),an.append("features",JSON.stringify(Kr.voiceFeatures||{})),Kr.audioBlob&&an.append("audio",Kr.audioBlob,`${Kr.id}.wav`),(await fetch(Sr,{method:"POST",body:an})).ok?(en++,await voiceManager.voiceStorage.updateUploadStatus(Kr.id,"uploaded")):await voiceManager.voiceStorage.updateUploadStatus(Kr.id,"failed")}catch{await voiceManager.voiceStorage.updateUploadStatus(Kr.id,"failed")}Ue(` Retried ${en}/${Br.length}`),setTimeout(()=>Ue(""),2e3)}catch{Ue(" Retry failed"),setTimeout(()=>Ue(""),2e3)}},ka=async()=>{if(!jr)return;const Sr=jr.exportTrainingData().trainingData,Br=Object.values(Sr).flat();if(Br.length<10){Ue(" Need at least 10 samples to train a model");return}tt(!0),Ue(" Training model (worker)...");const en=Array.from(new Set(Br.map(an=>an.emotion))),Kr={};if(en.forEach((an,En)=>Kr[an]=En),et)try{et.postMessage({type:"train",payload:{samples:Br,labelsMap:Kr,mfccLen:13,epochs:40,batchSize:8}})}catch(an){console.warn("Worker training failed, falling back",an),Ue(" Worker training failed, falling back to main thread")}else try{const an=YD(Br,Kr,13),En=await $D(an.xs.shape[1],en.length);await GD(En,an,40,8,(_n,fn)=>{Pt({epoch:_n,logs:fn})}),await XD(En,"local-voice-model");try{localStorage.setItem("local-voice-model_meta",JSON.stringify({labelsMap:Kr,norm:an.norm}))}catch{}Fe(En),Ue(" Model trained and saved locally")}catch(an){console.error("Main thread training failed",an),Ue(" Main thread training failed")}tt(!1)},Ma=async()=>{if(!jr)return;await jr.loadMlModelAndMeta("local-voice-model")?(Fe(jr.mlModel),Ue(" Model loaded into analyzer")):Ue(" No model found or failed to load"),setTimeout(()=>Ue(""),2e3)},Wi=Sr=>{const Br=Sr.target.files[0];if(!Br||!jr)return;const en=new FileReader;en.onload=Kr=>{try{const an=JSON.parse(Kr.target.result);jr.importTrainingData(an),_(jr.getTrainingStats()),Ue(" Training data imported successfully!"),setTimeout(()=>Ue(""),3e3)}catch(an){Ue(" Failed to import training data."),console.error("Import error:",an)}},en.readAsText(Br)},Ls=async()=>{if(jr&&window.confirm(" This will permanently delete ALL voice recordings and training data. Continue?"))try{Ue(" Clearing all stored data..."),await jr.clearStoredSamples(),jr.trainingManager.clearTrainingData(),localStorage.removeItem("voiceEmotionUserCalibration"),localStorage.removeItem("voiceEmotionSessionStats"),_(jr.getTrainingStats()),fe(jr.getUserCalibration()),qe(jr.getSessionStats()),await Pr(),Ue(" All training data and voice recordings cleared!"),setTimeout(()=>Ue(""),3e3)}catch(Sr){Ue(" Failed to clear storage."),console.error("Clear storage error:",Sr)}},Pn=sn.find(Sr=>Sr.id===n),Ki=Object.values(f).reduce((Sr,Br)=>Sr+(Br.count||0),0),Ba=Object.values(f).reduce((Sr,Br)=>Sr+(Br.accuracy||0),0)/10;return l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"20px"},children:[l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[l.jsx("h2",{style:{margin:"0 0 20px 0",color:"#1f2937",fontSize:"2rem"},children:" AI Training Center"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"24px"},children:[l.jsxs("div",{style:{background:"#f0f9ff",padding:"20px",borderRadius:"12px",textAlign:"center",border:"2px solid #0ea5e9"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#0369a1"},children:Ki}),l.jsx("div",{style:{color:"#6b7280"},children:"Total Samples"})]}),l.jsxs("div",{style:{background:"#f0fdf4",padding:"20px",borderRadius:"12px",textAlign:"center",border:"2px solid #22c55e"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),l.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#16a34a"},children:[Math.round(Ba),"%"]}),l.jsx("div",{style:{color:"#6b7280"},children:"Avg Accuracy"})]}),l.jsxs("div",{style:{background:"#fef3c7",padding:"20px",borderRadius:"12px",textAlign:"center",border:"2px solid #f59e0b"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#d97706"},children:Ki>50?"Advanced":Ki>20?"Trained":"Learning"}),l.jsx("div",{style:{color:"#6b7280"},children:"AI Status"})]})]}),Ve&&l.jsx("div",{style:{background:Ve.includes("")?"#fef2f2":"#f0fdf4",border:Ve.includes("")?"2px solid #ef4444":"2px solid #22c55e",color:Ve.includes("")?"#dc2626":"#16a34a",padding:"16px",borderRadius:"8px",marginBottom:"20px",textAlign:"center",fontSize:"1.1rem"},children:Ve})]}),l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[l.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:" Voice Storage & User Calibration"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"20px"},children:[l.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"#475569"},children:" Voice Storage"}),l.jsxs("div",{style:{fontSize:"0.9em",color:"#64748b"},children:[l.jsxs("div",{children:["Total Voice Samples: ",l.jsx("strong",{children:Object.values(N).reduce((Sr,Br)=>Sr+(Br.voiceSamples||0),0)})]}),l.jsxs("div",{children:["Storage Size: ",l.jsxs("strong",{children:[Math.round(Object.values(N).reduce((Sr,Br)=>Sr+(Br.totalSize||0),0)/1024),"KB"]})]}),l.jsxs("div",{children:["Last Recording: ",l.jsx("strong",{children:((ki=Object.values(N).reduce((Sr,Br)=>Br.lastSample&&(!Sr||new Date(Br.lastSample)>new Date(Sr))?Br.lastSample:Sr,null))==null?void 0:ki.split("T")[0])||"Never"})]})]})]}),l.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"#475569"},children:" Voice Calibration"}),l.jsxs("div",{style:{fontSize:"0.9em",color:"#64748b"},children:[l.jsxs("div",{children:["Baseline Pitch: ",l.jsxs("strong",{children:[Math.round(me.baselinePitch||150),"Hz"]})]}),l.jsxs("div",{children:["Pitch Range: ",l.jsxs("strong",{children:[Math.round(((La=me.pitchRange)==null?void 0:La.min)||80),"-",Math.round(((Pa=me.pitchRange)==null?void 0:Pa.max)||400),"Hz"]})]}),l.jsxs("div",{children:["Training Samples: ",l.jsx("strong",{children:me.samplesCount||0})]}),l.jsxs("div",{children:["Last Calibrated: ",l.jsx("strong",{children:((Vs=me.lastCalibrated)==null?void 0:Vs.split("T")[0])||"Never"})]})]})]}),l.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"#475569"},children:" Session Stats"}),l.jsxs("div",{style:{fontSize:"0.9em",color:"#64748b"},children:[l.jsxs("div",{children:["Total Sessions: ",l.jsx("strong",{children:Te.sessionsCount||0})]}),l.jsxs("div",{children:["Session Samples: ",l.jsx("strong",{children:Te.totalSamples||0})]}),l.jsxs("div",{children:["Average Accuracy: ",l.jsxs("strong",{children:[Te.averageAccuracy||0,"%"]})]}),l.jsxs("div",{children:["Last Session: ",l.jsx("strong",{children:((Es=Te.lastSession)==null?void 0:Es.split("T")[0])||"Never"})]})]})]})]}),l.jsx("div",{style:{background:"#eff6ff",padding:"16px",borderRadius:"8px",border:"1px solid #3b82f6",textAlign:"center"},children:l.jsxs("div",{style:{color:"#1e40af",fontSize:"0.9em"},children:[" ",l.jsx("strong",{children:"Enhanced Storage:"})," Your voice samples are now stored persistently using IndexedDB. Voice calibration data helps improve emotion detection accuracy for your unique voice patterns."]})})]}),l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[l.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:" Training Progress by Emotion"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:sn.map(Sr=>{const Br=f[Sr.id]||{count:0,accuracy:0},en=N[Sr.id]||{voiceSamples:0},Kr=Math.min(100,Br.count/10*100);return l.jsxs("div",{style:{background:Br.count>0?Sr.color:"#f3f4f6",color:Br.count>0?"white":"#6b7280",padding:"16px",borderRadius:"12px",textAlign:"center",transition:"all 0.3s ease"},children:[l.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"8px"},children:Sr.label.split(" ")[1]}),l.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"4px"},children:[Br.count," samples"]}),l.jsxs("div",{style:{fontSize:"0.9rem",marginBottom:"4px"},children:[Br.accuracy,"% accuracy"]}),l.jsxs("div",{style:{fontSize:"0.8rem",marginBottom:"8px",opacity:.9},children:[" ",en.voiceSamples," voice recordings"]}),l.jsx("div",{style:{background:"rgba(255,255,255,0.3)",height:"4px",borderRadius:"2px",overflow:"hidden"},children:l.jsx("div",{style:{background:"white",height:"100%",width:`${Kr}%`,transition:"width 0.5s ease"}})})]},Sr.id)})})]}),l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[l.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:" Train New Emotion Sample"}),l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"1.1rem",fontWeight:"600",color:"#1f2937"},children:"Select Emotion to Train:"}),l.jsx("select",{value:n,onChange:Sr=>i(Sr.target.value),style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #d1d5db",fontSize:"1rem",background:"white"},children:sn.map(Sr=>l.jsx("option",{value:Sr.id,children:Sr.label},Sr.id))})]}),Pn&&l.jsxs("div",{style:{background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"12px",padding:"20px",marginBottom:"24px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:Pn.label.split(" ")[1]}),l.jsxs("div",{style:{fontSize:"1.1rem",color:"#0369a1",fontWeight:"600",marginBottom:"8px"},children:["Training: ",Pn.label.split(" ")[0]]}),l.jsx("div",{style:{fontSize:"1rem",color:"#0369a1"},children:Pn.instruction})]}),l.jsxs("div",{style:{background:"#f3f4f6",border:"2px solid #d1d5db",borderRadius:"12px",padding:"20px",marginBottom:"24px",textAlign:"center"},children:[l.jsx("h4",{style:{margin:"0 0 15px 0",color:"#1f2937"},children:" Voice Recording"}),l.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center",alignItems:"center",marginBottom:"15px"},children:[Zn?l.jsx("button",{onClick:Xn,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #ef4444, #dc2626)",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:" Stop Recording"}):l.jsx("button",{onClick:wn,disabled:!jr,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:jr?"linear-gradient(135deg, #22c55e, #16a34a)":"#9ca3af",border:"none",borderRadius:"8px",cursor:jr?"pointer":"not-allowed",transition:"all 0.2s"},children:" Start Recording"}),l.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[" Import audio",l.jsx("input",{type:"file",accept:"audio/*",onChange:li,style:{display:"inline-block"}})]})]}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"#6b7280"},children:["Status: ",Zn?" Recording...":Rn?" Ready to train":" No recording yet"]}),Rn&&l.jsxs("div",{style:{marginTop:"10px",padding:"8px 12px",background:"#e5e7eb",borderRadius:"6px",fontSize:"0.85rem",color:"#374151"},children:['Sample: "',Rn.substring(0,50),Rn.length>50?"...":"",'"']}),Qt&&l.jsxs("div",{style:{marginTop:12},children:[l.jsx("audio",{ref:Sa,controls:!0,src:Qt,style:{width:"100%"},onTimeUpdate:ni,onEnded:()=>rs(!1)}),l.jsxs("div",{style:{marginTop:10},children:[l.jsx("canvas",{ref:zr,style:{width:"100%",height:100,background:"#eef2ff",borderRadius:8}}),l.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,alignItems:"center"},children:[l.jsxs("label",{children:["Start: ",l.jsx("input",{type:"number",step:"0.1",value:dr,onChange:Sr=>Ar(Math.max(0,Math.min(parseFloat(Sr.target.value||0),(kt==null?void 0:kt.duration)||0))),style:{width:80}})]}),l.jsxs("label",{children:["End: ",l.jsx("input",{type:"number",step:"0.1",value:Nr,onChange:Sr=>hn(Math.max(0,Math.min(parseFloat(Sr.target.value||0),(kt==null?void 0:kt.duration)||0))),style:{width:80}})]}),l.jsx("button",{onClick:va,style:{padding:"6px 12px"},children:"Play Trimmed"}),l.jsx("button",{onClick:ca,style:{padding:"6px 12px"},children:"Download Trimmed"}),l.jsxs("div",{style:{marginLeft:"auto",fontSize:"0.9rem",color:"#374151"},children:["Preview Emotion: ",l.jsx("strong",{children:((xn=jr==null?void 0:jr.currentAnalysis)==null?void 0:xn.dominantEmotion)||"unknown"})]})]})]})]})]}),l.jsxs("div",{style:{background:Zn?"#f0fdf4":"#fef3c7",border:Zn?"2px solid #22c55e":"2px solid #f59e0b",borderRadius:"12px",padding:"20px",marginBottom:"24px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:Zn?"#16a34a":"#d97706",marginBottom:"8px"},children:Zn?" Recording Active":" Recording Stopped"}),l.jsxs("div",{style:{color:Zn?"#16a34a":"#d97706",fontSize:"1rem"},children:['Current transcript: "',Rn||"No speech detected",'"']})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("button",{onClick:Ci,disabled:a||!Rn.trim()&&!Qt,style:{padding:"16px 32px",fontSize:"1.2rem",fontWeight:"600",color:"white",background:a?"#9ca3af":"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"25px",cursor:a||!Rn.trim()?"not-allowed":"pointer",boxShadow:"0 6px 20px rgba(16, 185, 129, 0.4)",marginBottom:"16px",marginRight:"16px"},children:a?" Training...":` Train ${Pn==null?void 0:Pn.label.split(" ")[0]} Emotion`}),l.jsx("button",{onClick:ka,disabled:He,style:{marginLeft:12,padding:"16px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:He?"#9ca3af":"linear-gradient(135deg, #3b82f6, #1d4ed8)",border:"none",borderRadius:"12px",cursor:He?"not-allowed":"pointer"},children:He?" Training Model...":" Train ML Model"}),l.jsx("button",{onClick:Ma,style:{marginLeft:12,padding:"16px 20px",borderRadius:12},children:"Load ML Model"}),l.jsxs("label",{style:{marginLeft:12,fontSize:"0.95rem"},children:[l.jsx("input",{type:"checkbox",checked:(jr==null?void 0:jr.useMlDetection)||!1,onChange:Sr=>{jr&&(jr.useMlDetection=Sr.target.checked,Fe(jr.mlModel))}})," Use ML Detection"]})]}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"#6b7280",textAlign:"center",lineHeight:"1.5"},children:["1. Start recording in the Detection tab",l.jsx("br",{}),"2. Speak the suggested phrase with the target emotion",l.jsx("br",{}),'3. Come back here and click "Train Emotion"',l.jsx("br",{}),"4. Repeat for better accuracy"]})]}),l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[l.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1f2937"},children:" Training Data Management"}),l.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"center",flexWrap:"wrap"},children:[l.jsx("button",{onClick:Hi,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",border:"none",borderRadius:"8px",cursor:"pointer"},children:" Export Training Data"}),l.jsx("button",{onClick:()=>{if(!jr)return;const Sr=jr.exportTrainingData(),Br=[],en=["id","emotion","pitch","pitch_median","pitch_mean","volume","spectralCentroid","spectralRolloff","energy","zcr","mfccMeans","mfccVars","transcript","timestamp"];Br.push(en.join(",")),Object.values(Sr.trainingData).flat().forEach(_n=>{const fn=_n.voiceFeatures||{},on=[_n.id,_n.emotion,fn.pitch||"",fn.pitchStats&&fn.pitchStats.median||"",fn.pitchStats&&fn.pitchStats.mean||"",fn.volume||"",fn.spectralCentroid||"",fn.spectralRolloffMean||"",fn.energyMean||"",fn.zcrMean||"",'"'+(fn.mfccMeans?fn.mfccMeans.join(";"):"")+'"','"'+(fn.mfccVars?fn.mfccVars.join(";"):"")+'"','"'+(_n.transcript?_n.transcript.replace(/"/g,'""'):"")+'"',_n.timestamp||""];Br.push(on.join(","))});const Kr=new Blob([Br.join(`
`)],{type:"text/csv"}),an=URL.createObjectURL(Kr),En=document.createElement("a");En.href=an,En.download=`voice-features-${new Date().toISOString().split("T")[0]}.csv`,En.click(),URL.revokeObjectURL(an),Ue(" Features CSV exported"),setTimeout(()=>Ue(""),2e3)},style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #14b8a6, #0ea5a2)",border:"none",borderRadius:"8px",cursor:"pointer"},children:" Export Features CSV"}),l.jsx("button",{onClick:ya,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",borderRadius:"8px",cursor:"pointer"},children:" Push All to Server"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginLeft:"8px"},children:[l.jsx("input",{type:"text",value:It,onChange:Sr=>ut(Sr.target.value),placeholder:"http://localhost:4000/upload",style:{padding:"10px",borderRadius:"6px",border:"1px solid #ddd",minWidth:"320px"}}),l.jsx("button",{onClick:()=>{localStorage.setItem("remoteVoiceTrainingUrl",It),Vt(!!It),Ht("Saved"),setTimeout(()=>Ht(""),2e3)},style:{padding:"10px 14px",borderRadius:"6px",background:"#06b6d4",color:"white",border:"none"},children:" Save"}),l.jsx("button",{onClick:async()=>{try{const Sr=await fetch(It,{method:"OPTIONS"});Ht(Sr.ok?"OK":`Err ${Sr.status}`)}catch{Ht("Failed")}setTimeout(()=>Ht(""),2e3)},style:{padding:"10px 14px",borderRadius:"6px",background:"#8b5cf6",color:"white",border:"none"},children:" Test"}),l.jsx("div",{style:{minWidth:"80px",color:"#374151",fontWeight:600},children:Ot})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginLeft:"8px"},children:[l.jsx("button",{onClick:async()=>{const Sr=await voiceManager.voiceStorage.getSamplesByUploadStatus("failed");if(!Sr||Sr.length===0){Ue("No failed uploads"),setTimeout(()=>Ue(""),2e3);return}Kn()},style:{padding:"10px 14px",borderRadius:"6px",background:"#f59e0b",color:"white",border:"none"},children:" Retry Failed"}),l.jsx("div",{style:{color:"#6b7280",fontWeight:600}})]}),l.jsxs("label",{style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"none",borderRadius:"8px",cursor:"pointer"},children:[" Import Training Data",l.jsx("input",{type:"file",accept:".json",onChange:Wi,style:{display:"none"}})]}),l.jsx("button",{onClick:Ls,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #ef4444, #dc2626)",border:"none",borderRadius:"8px",cursor:"pointer"},children:" Clear All Storage"})]})]})]})},aR=()=>{const[t,e]=Jt.useState(!1),[r,n]=Jt.useState(""),[i,a]=Jt.useState(null),[s,f]=Jt.useState(null),[_,N]=Jt.useState([]),[I,me]=Jt.useState(null),[fe,Te]=Jt.useState(!1),[qe,Ve]=Jt.useState(!0),[Ue,Ee]=Jt.useState({userBaseline:null,calibrated:!1}),[Fe,He]=Jt.useState(!1),[tt,et]=Jt.useState("anger"),[ct,xt]=Jt.useState([]),[Pt,ir]=Jt.useState(null),[mr,kr]=Jt.useState(null),[yr,vt]=Jt.useState(null),[gt,It]=Jt.useState(!1),ut=Jt.useRef(null),qt=Jt.useRef(null),Vt=Jt.useRef(null),Ot=Jt.useRef(null),Ht=Jt.useRef([]),Qt=Jt.useRef([]),er=Jt.useRef({pitch:null,rmsEnergy:null,zeroCrossingRate:null,speechRate:null}),kt=Jt.useRef([]),lr={joy:{textPatterns:[/\b(happy|excited|wonderful|amazing|fantastic|great|awesome|love|enjoy|delighted|thrilled|cheerful|joyful|pleased|glad|elated|brilliant|excellent|perfect)\b/gi,/\b(yay|hooray|wow|yes|definitely|absolutely|certainly|incredible|terrific|outstanding|superb|magnificent|marvelous)\b/gi,/\b(celebrate|celebration|party|fun|laughter|smile|laughing|smiling|cheering|upbeat|positive|optimistic)\b/gi],voiceFeatures:{pitchRange:{min:160,max:380,optimal:240},energyLevel:{min:.5,max:1},speechRate:{min:1,max:2},tonalVariation:{min:.6,max:1}},bertWeight:.35,voiceWeight:.65},sadness:{textPatterns:[/\b(sad|depressed|upset|disappointed|hurt|miserable|unhappy|sorrowful|gloomy|dejected|melancholy|blue|down|low)\b/gi,/\b(terrible|awful|horrible|devastating|heartbreaking|tragic|unfortunate|hopeless|despair|lonely|empty|broken)\b/gi,/\b(crying|tears|weeping|sobbing|grieving|mourning|sorrow|regret|loss|grief|anguish|pain|suffering)\b/gi,/\b(failed|failure|lost|losing|gone|dead|died|death|goodbye|farewell|end|over|finished)\b/gi,/\b(nobody cares|no one understands|feel alone|all alone|can't go on|give up|what's the point|worthless|useless)\b/gi,/\b(miss you|missing|longing|wish|if only|should have|could have|regret|mistake|fault|blame)\b/gi],voiceFeatures:{pitchRange:{min:80,max:240,optimal:140},energyLevel:{min:.05,max:.45},speechRate:{min:.4,max:1.1},tonalVariation:{min:.1,max:.5}},bertWeight:.35,voiceWeight:.65},anger:{textPatterns:[/\b(angry|mad|furious|irritated|annoyed|frustrated|outraged|livid|enraged|irate|hostile|pissed|rage|raging|riled|steamed|boiling)\b/gi,/\b(hate|disgusted|appalled|infuriated|incensed|aggravated|fed up|sick of|can't stand|fed up with|had enough|done with)\b/gi,/\b(damn|hell|stupid|ridiculous|unacceptable|outrageous|bullshit|crap|nonsense|idiotic|moronic|insane|crazy|pathetic)\b/gi,/\b(fight|violence|kill|destroy|smash|break|punch|hit|attack|warfare|battle|crush|demolish|annihilate)\b/gi,/\b(what the hell|what the fuck|are you kidding me|you've got to be kidding|this is bullshit|enough is enough)\b/gi,/\b(shut up|get lost|go away|leave me alone|I don't care|whatever|screw this|screw you|forget it)\b/gi,/\b(why me|why now|not again|seriously|come on|give me a break|this sucks|this is terrible)\b/gi,/\b(listen here|how dare you|who do you think|you better|I swear|mark my words|I'll show you)\b/gi,/\b(threatening|warning|demanding|insisting|ordering|commanding|forcing|making me)\b/gi,/\b(hurry up|move it|get on with it|speed up|faster|now|immediately|right now|this instant)\b/gi,/\b(waited long enough|wasting my time|taking forever|slow as hell|what's taking so long)\b/gi,/\b(your fault|you did this|you caused|you're responsible|you screwed up|you messed up|you ruined)\b/gi,/\b(always doing|never listen|don't understand|don't get it|typical|figures|of course)\b/gi,/\b(absolutely furious|completely mad|totally pissed|extremely angry|really mad|so angry|very upset)\b/gi,/\b(can't believe|unbelievable|impossible|ridiculous|outrageous|insane|crazy|nuts)\b/gi],voiceFeatures:{pitchRange:{min:200,max:500,optimal:350},energyLevel:{min:.75,max:1},speechRate:{min:1.2,max:3},tonalVariation:{min:.8,max:1},volumeSpikes:{threshold:.8,frequency:3},harshConsonants:{threshold:.6}},bertWeight:.3,voiceWeight:.7},fear:{textPatterns:[/\b(afraid|scared|terrified|frightened|anxious|worried|nervous|panicked|alarmed|concerned|fearful|petrified|horrified)\b/gi,/\b(dangerous|risky|threatening|unsafe|insecure|vulnerable|terror|horror|nightmare|phobia|creepy|spooky|eerie)\b/gi,/\b(what if|might happen|could go wrong|disaster|catastrophe|emergency|crisis|panic|stress|anxiety|dread|doom)\b/gi,/\b(help me|save me|someone help|call for help|need help|rescue|escape|run away|hide|get away)\b/gi,/\b(can't breathe|heart racing|shaking|trembling|sweating|freezing|paralyzed|stuck|trapped|cornered)\b/gi,/\b(monster|ghost|demon|evil|dark|darkness|shadow|unknown|stranger|stalker|killer|death|dying)\b/gi],voiceFeatures:{pitchRange:{min:180,max:480,optimal:340},energyLevel:{min:.2,max:.9},speechRate:{min:1.1,max:2.8},tonalVariation:{min:.4,max:1}},bertWeight:.25,voiceWeight:.75},surprise:{textPatterns:[/\b(surprised|shocked|amazed|astonished|stunned|bewildered|confused|unexpected|sudden|startled|flabbergasted)\b/gi,/\b(suddenly|all of a sudden|out of nowhere|didn't expect|never thought|can't believe|who would have thought)\b/gi,/\b(wow|oh my|really|seriously|no way|unbelievable|incredible|extraordinary|mind-blowing|jaw-dropping)\b/gi,/\b(what|how|when|where|why|huh|eh|wait|hold on|hang on|stop|pause|excuse me)\b/gi,/\b(never seen|first time|brand new|just discovered|just found out|just learned|just realized|just noticed)\b/gi,/\b(plot twist|curveball|bombshell|revelation|discovery|breakthrough|game changer|turning point)\b/gi],voiceFeatures:{pitchRange:{min:200,max:550,optimal:400},energyLevel:{min:.3,max:1},speechRate:{min:.6,max:2.2},tonalVariation:{min:.5,max:1}},bertWeight:.2,voiceWeight:.8},neutral:{textPatterns:[/\b(okay|fine|normal|regular|standard|typical|usual|ordinary|average|alright)\b/gi,/\b(just|simply|basically|essentially|generally|probably|maybe|perhaps|suppose)\b/gi,/\b(think|believe|consider|assume|imagine|understand|know|see|hear)\b/gi],voiceFeatures:{pitchRange:{min:140,max:280,optimal:200},energyLevel:{min:.2,max:.7},speechRate:{min:.8,max:1.4},tonalVariation:{min:.2,max:.6}},bertWeight:.5,voiceWeight:.5}};Jt.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const sn=window.webkitSpeechRecognition||window.SpeechRecognition;Ot.current=new sn,Ot.current.continuous=!0,Ot.current.interimResults=!0,Ot.current.lang="en-US",Ot.current.onresult=jr=>{let Rn="";for(let Zn=jr.resultIndex;Zn<jr.results.length;Zn++)Rn+=jr.results[Zn][0].transcript;n(Rn)},Ot.current.onerror=jr=>{console.error("Speech recognition error:",jr.error)}}const zr=localStorage.getItem("voiceEmotionHistory");if(zr)try{N(JSON.parse(zr))}catch(sn){console.error("Error loading analysis history:",sn)}return()=>{Ot.current&&Ot.current.stop(),ut.current&&ut.current.state!=="inactive"&&ut.current.stop()}},[]);const dr=zr=>{const sn=zr.sampleRate,jr=zr.getChannelData(0),Rn=2048,Zn=512,Pr=[];for(let ni=0;ni<jr.length-Rn;ni+=Zn){const ga=jr.slice(ni,ni+Rn),Hn=hn(ga,sn);Hn>50&&Hn<800&&Pr.push(Hn)}if(Qt.current=Pr,Pr.length===0)return null;const wn=Pr.reduce((ni,ga)=>ni+ga,0)/Pr.length,Xn=Math.min(...Pr),li=Math.max(...Pr),Ti=(li-Xn)/wn;let ca=wn,va=!1;if(!Ue.userBaseline&&!Ue.calibrated)Ee({userBaseline:wn,calibrated:!0,autoCalibrated:!0}),localStorage.setItem("pitchCalibration",JSON.stringify({userBaseline:wn,calibrated:!0,autoCalibrated:!0})),ca=wn,va=!0;else if(Ue.userBaseline&&Ue.calibrated){const ni=wn/Ue.userBaseline;ca=wn*(1/ni)}return{average:wn,calibrated:ca,min:Xn,max:li,variation:Ti,data:Pr,autoCalibrated:va}},Ar=(zr,sn,jr=.35)=>{const Rn=er.current;return Rn[zr]==null||Number.isNaN(Rn[zr])?Rn[zr]=sn:Rn[zr]=jr*sn+(1-jr)*Rn[zr],Rn[zr]},Nr=(zr,sn=2500)=>{const jr=Date.now()-sn,Rn=zr.filter(Xn=>Xn.ts>=jr);if(Rn.length===0)return null;const Zn={};Rn.forEach(Xn=>{Zn[Xn.label]||(Zn[Xn.label]={sum:0,count:0}),Zn[Xn.label].sum+=Xn.confidence||0,Zn[Xn.label].count+=1});const Pr=Object.entries(Zn).map(([Xn,li])=>({label:Xn,avg:li.sum/li.count,count:li.count}));Pr.sort((Xn,li)=>li.avg*li.count-Xn.avg*Xn.count);const wn=Pr[0];return wn.count>=2||wn.avg>.75?{label:wn.label,confidence:Math.min(.99,wn.avg)}:null},hn=(zr,sn)=>{const jr=Math.floor(sn/800),Rn=Math.floor(sn/50);let Zn=0,Pr=0;for(let wn=jr;wn<=Rn;wn++){let Xn=0;for(let li=0;li<zr.length-wn;li++)Xn+=zr[li]*zr[li+wn];Xn>Zn&&(Zn=Xn,Pr=wn)}return Pr>0?sn/Pr:0},Wn=async(zr,sn)=>{try{const Rn=(await Ro(()=>Promise.resolve().then(()=>eR),void 0).then(Hn=>Hn.analyzeEmotionWithBERT(zr))).map||{},Zn={};Object.keys(lr).forEach(Hn=>{const ti=Rn[Hn]||0;Zn[Hn]={textScore:ti,voiceScore:0,combinedScore:0}}),sn&&Object.entries(lr).forEach(([Hn,ti])=>{let Ai=0;const Ci=ti.voiceFeatures,Hi=sn.pitch&&(sn.pitch.calibrated||sn.pitch.average)?sn.pitch.calibrated||sn.pitch.average:sn.pitch||0;if(Hi>=Ci.pitchRange.min&&Hi<=Ci.pitchRange.max){const ya=Math.abs(Hi-Ci.pitchRange.optimal),Kn=Math.max(Ci.pitchRange.optimal-Ci.pitchRange.min,Ci.pitchRange.max-Ci.pitchRange.optimal),ka=Math.max(0,1-ya/Math.max(1,Kn));Ai+=ka*.6}if(sn.energy!=null&&Ci.energyLevel){const ya=(Ci.energyLevel.min+Ci.energyLevel.max)/2,Kn=Math.abs((sn.energy||0)-ya),ka=Math.max(.01,Ci.energyLevel.max-Ci.energyLevel.min),Ma=Math.max(0,1-Kn/ka);Ai+=Ma*.5}sn.pitch&&sn.pitch.variation!=null&&sn.pitch.variation>=Ci.tonalVariation.min&&sn.pitch.variation<=Ci.tonalVariation.max&&(Ai+=.25),Ai=Math.max(0,Math.min(1,Ai)),Zn[Hn].voiceScore=Ai});const Pr={};Object.entries(lr).forEach(([Hn,ti])=>{const Ai=Zn[Hn].textScore||0,Ci=Zn[Hn].voiceScore||0,Hi=ti.bertWeight||.4,ya=ti.voiceWeight||.6;Pr[Hn]=Ai*Hi+Ci*ya});const wn=Object.values(Pr).reduce((Hn,ti)=>Hn+(ti||0),0)||1,Xn={};Object.keys(Pr).forEach(Hn=>Xn[Hn]=Math.min(1,(Pr[Hn]||0)/wn)),zr&&/\b(yeah right|sure|great job|fantastic|as if|nice going)\b/gi.test(zr)&&sn&&(sn.rmsEnergy||sn.energy)<.25&&["joy","surprise"].forEach(Hn=>Xn[Hn]=(Xn[Hn]||0)*.5);const ca=Object.entries(Xn).map(([Hn,ti])=>({label:Hn,score:ti}));ca.sort((Hn,ti)=>ti.score-Hn.score);const va=ca[0]||{label:"neutral",score:0};let ni=Math.min(.98,Math.max(.4,va.score+.15));return sn&&(ni=Math.min(.99,ni+.06)),zr&&zr.length>50&&(ni=Math.min(.99,ni+.03)),{emotion:va.label,confidence:ni,scores:Xn,source:sn?"bert-voice-integrated":"bert-text-only"}}catch(jr){return console.warn("BERT analysis wrapper failed, falling back to lexical scoring",jr),{emotion:"neutral",confidence:.6,scores:{neutral:.6},source:"fallback"}}},Sn=async()=>{try{Ht.current=[];const zr=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:44100,channelCount:1,echoCancellation:!0,noiseSuppression:!0}});qt.current=new(window.AudioContext||window.webkitAudioContext);const sn=qt.current.createMediaStreamSource(zr);Vt.current=qt.current.createAnalyser(),Vt.current.fftSize=2048,sn.connect(Vt.current),ut.current=new MediaRecorder(zr),ut.current.ondataavailable=jr=>{jr.data.size>0&&Ht.current.push(jr.data)},ut.current.onstop=async()=>{const jr=new Blob(Ht.current,{type:"audio/wav"});await Bi(jr),zr.getTracks().forEach(Rn=>Rn.stop())},ut.current.start(100),e(!0),Ot.current&&Ot.current.start()}catch(zr){console.error("Error starting recording:",zr),alert("Error accessing microphone. Please ensure microphone permissions are granted.")}},Tn=()=>{ut.current&&ut.current.state!=="inactive"&&ut.current.stop(),Ot.current&&Ot.current.stop(),qt.current&&qt.current.close(),e(!1)},zn=async zr=>{const sn=zr&&zr.target&&zr.target.files&&zr.target.files[0];if(sn){if(!sn.type||!sn.type.startsWith("audio")){alert("Please select a valid audio file (wav, mp3, m4a, etc.)"),zr.target.value="";return}try{(!qt.current||qt.current.state==="closed")&&(qt.current=new(window.AudioContext||window.webkitAudioContext));let jr=null;try{jr=await A3(sn,wn=>{console.debug("[fileProcessors]",wn)},"en-US")}catch(wn){console.warn("File transcription failed, proceeding without transcript",wn),jr=null}const Rn=await sn.arrayBuffer(),Zn=new Blob([Rn],{type:sn.type});Te(!0),await Bi(Zn,typeof jr=="string"?jr:null)}catch(jr){console.error("Failed to analyze uploaded audio file",jr),alert("Failed to analyze audio file: "+(jr&&jr.message?jr.message:String(jr)))}finally{zr&&zr.target&&(zr.target.value=""),Te(!1)}}},Bi=async(zr,sn=null)=>{if(Te(!0),sn)try{n(sn)}catch{}try{const jr=await zr.arrayBuffer(),Rn=await qt.current.decodeAudioData(jr),Zn=dr(Rn),Pr=Rn.getChannelData(0),wn=Pr.reduce((Pn,Ki)=>Pn+Math.abs(Ki),0)/Pr.length,Xn=Math.sqrt(Pr.reduce((Pn,Ki)=>Pn+Ki*Ki,0)/Pr.length),li=1024,Ti=[];for(let Pn=0;Pn<Pr.length-li;Pn+=li){const Ba=Pr.slice(Pn,Pn+li).reduce((ki,La)=>ki+Math.abs(La),0)/li;Ba>wn*1.5&&Ti.push(Ba)}let ca=0;for(let Pn=1;Pn<Pr.length;Pn++)Pr[Pn-1]>=0!=Pr[Pn]>=0&&ca++;const va=ca/Pr.length,ni=sn!==null?sn:r,ga=ni?ni.split(/\s+/).length/Rn.duration:1,Hn={pitch:Zn,energy:wn,rmsEnergy:Xn,duration:Rn.duration,volumeSpikes:{count:Ti.length,avgIntensity:Ti.length>0?Ti.reduce((Pn,Ki)=>Pn+Ki,0)/Ti.length:0},zeroCrossingRate:va,speech:{rate:ga,wordsPerSecond:ni?ni.split(/\s+/).length/Rn.duration:0}};let ti=null;try{if(gt&&Pt&&mr){const Pn=Zn.average||0,Ki=Xn||wn||0,Ba=va*2e3,ki=new Array(yr&&yr.stds?Math.max(0,yr.stds.length-3):13).fill(0),La=[Pn,Ki,Ba,...ki];let Pa=La;yr&&yr.means&&yr.stds&&(Pa=La.map((Kr,an)=>((Kr||0)-(yr.means[an]||0))/(yr.stds[an]||1)));const Es=(await Ro(()=>import("./index-CU2M8UNt.js"),[])).tensor2d([Pa]),xn=Pt.predict(Es),Sr=xn.arraySync?xn.arraySync()[0]:await xn.data(),Br=Object.keys(mr).sort((Kr,an)=>mr[Kr]-mr[an]),en=Sr.indexOf(Math.max(...Sr));ti={label:Br[en]||null,probabilities:Sr,confidence:Math.max(...Sr)}}}catch(Pn){console.warn("ML prediction failed in live analyzer",Pn),ti=null}let Ai=await Wn(ni,Hn);const Ci=Ar("pitch",Hn.pitch&&Hn.pitch.average?Hn.pitch.average:Hn.pitch||0),Hi=Ar("rmsEnergy",Hn.rmsEnergy||Hn.energy||0),ya=Ar("zeroCrossingRate",Hn.zeroCrossingRate||0),Kn=Ar("speechRate",Hn.speech?Hn.speech.rate:0);if(Hn.smoothed={pitch:Ci,rmsEnergy:Hi,zeroCrossingRate:ya,speechRate:Kn},r&&/\b(yeah right|sure|great job|fantastic|as if|nice going)\b/gi.test(r)&&Hn.smoothed.rmsEnergy<.2&&(Ai&&Ai.scores&&Object.keys(Ai.scores).forEach(Pn=>{Ai.scores[Pn]=(Ai.scores[Pn]||0)*.6}),Ai&&Ai.emotion==="joy"&&(Ai.confidence=Math.min(.5,Ai.confidence||.5))),ti&&ti.label){ti.confidence>.8&&kt.current.push({label:ti.label,confidence:ti.confidence,ts:Date.now()}),kt.current=kt.current.slice(-12);const Pn=Nr(kt.current,3e3);Pn&&(Ai={emotion:Pn.label,confidence:Pn.confidence,scores:{},source:"ml-voice-smoothed"})}const Wi={id:Date.now(),timestamp:new Date().toISOString(),transcript:ni,voiceFeatures:Hn,emotion:Ai,mlPrediction:ti,audioData:zr,bertIntegrated:qe,calibrated:Ue.calibrated};if(me(Wi),a(Wi),Fe){const Pn=Wi.emotion.emotion===tt,Ki={target:tt,detected:Wi.emotion.emotion,confidence:Wi.emotion.confidence,correct:Pn,timestamp:new Date().toISOString()};xt(Ba=>[Ki,...Ba].slice(0,10))}const Ls=[Wi,..._].slice(0,50);N(Ls),localStorage.setItem("voiceEmotionHistory",JSON.stringify(Ls))}catch(jr){console.error("Error processing audio:",jr)}Te(!1)},rs=()=>{if(I&&I.voiceFeatures.pitch){const zr=I.voiceFeatures.pitch.average;Ee({userBaseline:zr,calibrated:!0}),localStorage.setItem("pitchCalibration",JSON.stringify({userBaseline:zr,calibrated:!0}))}};Jt.useEffect(()=>{const zr=localStorage.getItem("pitchCalibration");if(zr)try{Ee(JSON.parse(zr))}catch(sn){console.error("Error loading pitch calibration:",sn)}},[]);const Sa=zr=>{const sn={joy:"#22c55e",sadness:"#3b82f6",anger:"#ef4444",fear:"#f59e0b",surprise:"#8b5cf6",neutral:"#6b7280"};return sn[zr]||sn.neutral};return l.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"20px",padding:"24px",color:"#fff",maxWidth:"100%",margin:"0 auto"},children:[l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h2",{style:{fontSize:"2em",fontWeight:"bold",margin:"0 0 8px 0",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:" Enhanced Voice Emotion Analyzer"}),l.jsx("p",{style:{fontSize:"1.1em",opacity:.9,margin:0},children:"Advanced BERT-integrated emotion detection with pitch calibration"})]}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.2)"},children:[l.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1.2em"},children:" Pitch Calibration Status"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[l.jsx("div",{style:{background:Ue.calibrated?"rgba(34, 197, 94, 0.3)":"rgba(251, 191, 36, 0.3)",padding:"8px 16px",borderRadius:"8px",border:`1px solid ${Ue.calibrated?"#22c55e":"#fbbf24"}`},children:Ue.calibrated?Ue.autoCalibrated?" Auto-Calibrated":" User Calibrated":" Will Auto-Calibrate"}),Ue.userBaseline&&l.jsxs("div",{style:{fontSize:"0.9em",opacity:.8},children:["Baseline: ",Ue.userBaseline.toFixed(1)," Hz",Ue.autoCalibrated&&" (Auto)"]}),l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsx("button",{onClick:async()=>{const zr=localStorage.getItem("local-voice-model_meta");if(zr)try{const sn=JSON.parse(zr);kr(sn.labelsMap||null),vt(sn.norm||null)}catch(sn){console.warn("Failed to parse ML meta",sn)}try{const sn=await qS("local-voice-model");sn?(ir(sn),xt(jr=>[{target:"model",detected:"loaded",correct:!0,confidence:1,timestamp:new Date().toISOString()},...jr].slice(0,10)),alert("ML model loaded")):alert("No ML model found in local storage")}catch(sn){console.warn("Failed to load model",sn),alert("Failed to load model")}},style:{background:"rgba(59,130,246,0.8)",color:"#fff",border:"none",borderRadius:8,padding:"8px 12px"},children:" Load ML Model"}),l.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[l.jsx("input",{type:"checkbox",checked:gt,onChange:zr=>It(zr.target.checked)})," Use ML Detection"]})]}),I&&l.jsx("button",{onClick:rs,style:{background:"rgba(34, 197, 94, 0.7)",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:"pointer",fontSize:"0.9em"},children:" Update Baseline"}),Ue.calibrated&&l.jsx("button",{onClick:()=>{Ee({userBaseline:null,calibrated:!1}),localStorage.removeItem("pitchCalibration")},style:{background:"rgba(239, 68, 68, 0.7)",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:"pointer",fontSize:"0.9em"},children:" Reset"})]}),l.jsx("div",{style:{marginTop:"12px",fontSize:"0.85em",opacity:.7,fontStyle:"italic"},children:Ue.calibrated?"Calibration improves emotion detection accuracy by adapting to your unique voice characteristics.":"Your first recording will automatically set your baseline pitch for improved accuracy."})]}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[l.jsx("h3",{style:{margin:"0 0 16px 0"},children:" Emotion Training Mode"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px",flexWrap:"wrap"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("input",{type:"checkbox",checked:Fe,onChange:zr=>He(zr.target.checked),style:{marginRight:"8px"}}),l.jsx("span",{children:"Enable Training Mode"})]}),Fe&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("span",{children:"Target Emotion:"}),l.jsxs("select",{value:tt,onChange:zr=>et(zr.target.value),style:{background:"rgba(0,0,0,0.3)",color:"#fff",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"6px",padding:"6px 12px"},children:[l.jsx("option",{value:"anger",children:" Anger"}),l.jsx("option",{value:"sadness",children:" Sadness"}),l.jsx("option",{value:"joy",children:" Joy"}),l.jsx("option",{value:"fear",children:" Fear"}),l.jsx("option",{value:"surprise",children:" Surprise"}),l.jsx("option",{value:"neutral",children:" Neutral"})]})]})]}),Fe&&l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[l.jsxs("h4",{style:{margin:"0 0 8px 0"},children:[" Practice: ",tt.charAt(0).toUpperCase()+tt.slice(1)]}),l.jsxs("p",{style:{margin:"0",fontSize:"0.9em",opacity:.8},children:["Try to express ",l.jsx("strong",{children:tt})," in your voice.",tt==="anger"&&" Speak loudly, use high pitch, and sound frustrated or mad.",tt==="sadness"&&" Speak softly, use low pitch, and sound disappointed or hurt.",tt==="joy"&&" Speak with energy, use varied pitch, and sound happy or excited.",tt==="fear"&&" Speak with shaky voice, high pitch, and sound scared or worried.",tt==="surprise"&&" Use sudden high pitch, bursts of energy, and sound amazed.",tt==="neutral"&&" Speak in your normal, calm, everyday voice."]})]}),ct.length>0&&Fe&&l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0 0 12px 0"},children:" Training Results"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"200px",overflowY:"auto"},children:ct.map((zr,sn)=>l.jsxs("div",{style:{background:zr.correct?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${zr.correct?"#22c55e":"#ef4444"}`,padding:"8px 12px",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("span",{style:{textTransform:"capitalize"},children:["Target: ",zr.target,"  Detected: ",zr.detected]}),l.jsxs("span",{style:{marginLeft:"8px",fontSize:"0.9em",opacity:.8},children:["(",(zr.confidence*100).toFixed(1),"%)"]})]}),l.jsx("div",{style:{fontSize:"1.2em"},children:zr.correct?"":""})]},sn))}),l.jsxs("div",{style:{marginTop:"12px",fontSize:"0.9em",opacity:.8,textAlign:"center"},children:["Accuracy: ",(ct.filter(zr=>zr.correct).length/ct.length*100).toFixed(1),"%"]})]})]}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[l.jsx("h3",{style:{margin:"0 0 16px 0"},children:" Emotion Training Guide"}),l.jsx("p",{style:{fontSize:"0.9em",opacity:.8,marginBottom:"16px"},children:"For best results, try these voice patterns when testing emotions:"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"12px"},children:[l.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#ef4444"},children:" Anger"}),l.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:[" Speak loudly and with high energy",l.jsx("br",{})," Use higher pitch than normal",l.jsx("br",{})," Speak fast with sharp emphasis",l.jsx("br",{}),' Use words like "angry", "frustrated", "mad"',l.jsx("br",{})," Add exclamation marks in speech",l.jsx("br",{}),` Example: "I'm so angry! This is ridiculous!"`]})]}),l.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.3)"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#3b82f6"},children:" Sadness"}),l.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:[" Speak softly with low energy",l.jsx("br",{})," Use lower pitch than normal",l.jsx("br",{})," Speak slowly and monotone",l.jsx("br",{}),' Use words like "sad", "disappointed", "hurt"',l.jsx("br",{})," Sound tired or defeated",l.jsx("br",{}),' Example: "I feel so sad and disappointed..."']})]}),l.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#22c55e"},children:" Joy"}),l.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:[" Speak with bright, upbeat energy",l.jsx("br",{})," Use moderate-high pitch",l.jsx("br",{})," Vary your tone (up and down)",l.jsx("br",{}),' Use words like "happy", "excited", "wonderful"',l.jsx("br",{})," Sound enthusiastic and lively",l.jsx("br",{}),` Example: "I'm so happy and excited about this!"`]})]}),l.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(245, 158, 11, 0.3)"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#f59e0b"},children:" Fear"}),l.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:[" Speak with shaky, unstable voice",l.jsx("br",{})," Use high pitch with tremor",l.jsx("br",{})," Speak fast or hesitantly",l.jsx("br",{}),' Use words like "scared", "afraid", "worried"',l.jsx("br",{})," Sound nervous or panicked",l.jsx("br",{}),` Example: "I'm really scared and worried about this!"`]})]}),l.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#8b5cf6"},children:" Surprise"}),l.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:[" Speak with sudden high pitch",l.jsx("br",{})," Use burst of energy",l.jsx("br",{})," Vary speech rate (pause then rush)",l.jsx("br",{}),' Use words like "wow", "really?", "unexpected"',l.jsx("br",{})," Sound startled or amazed",l.jsx("br",{}),` Example: "Wow! That's really surprising!"`]})]}),l.jsxs("div",{style:{background:"rgba(107, 114, 128, 0.2)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(107, 114, 128, 0.3)"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#6b7280"},children:" Neutral"}),l.jsxs("div",{style:{fontSize:"0.85em",lineHeight:"1.4"},children:[" Speak in your normal voice",l.jsx("br",{})," Use regular pitch and energy",l.jsx("br",{})," Maintain steady pace",l.jsx("br",{}),' Use neutral words like "okay", "fine"',l.jsx("br",{})," Sound calm and balanced",l.jsx("br",{}),' Example: "This is a normal statement."']})]})]})]}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[l.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},children:[l.jsxs("button",{onClick:t?Tn:Sn,disabled:fe,style:{background:t?"#ef4444":"#22c55e",color:"#fff",border:"none",borderRadius:"12px",padding:"16px 32px",fontSize:"1.2em",fontWeight:"bold",cursor:fe?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",transition:"all 0.3s ease",opacity:fe?.7:1},children:[l.jsx("span",{style:{fontSize:"1.4em"},children:t?"":""}),t?"Stop Recording":"Start Recording"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(255,255,255,0.1)",padding:"8px 16px",borderRadius:"8px"},children:[l.jsx("input",{type:"checkbox",checked:qe,onChange:zr=>Ve(zr.target.checked),style:{marginRight:"8px"}}),l.jsx("span",{children:" BERT Integration"})]}),l.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("input",{type:"file",accept:"audio/*",onChange:zn,style:{display:"none"}}),l.jsx("div",{style:{background:"rgba(255,255,255,0.08)",padding:"10px 14px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.12)",color:"#fff"},children:" Upload Audio"})]})]}),t&&l.jsxs("div",{style:{marginTop:"16px",textAlign:"center",fontSize:"1.1em",fontWeight:600,opacity:.9},children:[" Recording...",Ue.calibrated?" Speak naturally for best results":" This will auto-calibrate your baseline!"]}),fe&&l.jsx("div",{style:{marginTop:"16px",textAlign:"center",fontSize:"1.1em",fontWeight:600,opacity:.9},children:" Analyzing voice patterns and emotions..."})]}),r&&l.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[l.jsx("h3",{style:{margin:"0 0 12px 0"},children:" Live Transcript"}),l.jsx("div",{style:{background:"rgba(0,0,0,0.2)",padding:"16px",borderRadius:"8px",fontSize:"1.1em",lineHeight:"1.6",minHeight:"60px"},children:r||"Start speaking to see transcript..."})]}),I&&l.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid rgba(255,255,255,0.2)"},children:[l.jsx("h3",{style:{margin:"0 0 16px 0"},children:" Analysis Results"}),l.jsx("div",{style:{background:Sa(I.emotion.emotion)+"30",border:`2px solid ${Sa(I.emotion.emotion)}`,borderRadius:"12px",padding:"20px",marginBottom:"16px"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("div",{style:{fontSize:"3em",background:Sa(I.emotion.emotion),width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:I.emotion.emotion==="joy"?"":I.emotion.emotion==="sadness"?"":I.emotion.emotion==="anger"?"":I.emotion.emotion==="fear"?"":I.emotion.emotion==="surprise"?"":""}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2em",fontWeight:"bold",textTransform:"capitalize"},children:I.emotion.emotion}),l.jsxs("div",{style:{fontSize:"1.2em",opacity:.9},children:["Confidence: ",(I.emotion.confidence*100).toFixed(1),"%"]}),l.jsxs("div",{style:{fontSize:"0.9em",opacity:.7},children:["Source: ",I.emotion.source]})]})]})}),I.voiceFeatures&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[I.voiceFeatures.pitch&&l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:" Pitch Analysis"}),l.jsxs("div",{style:{fontSize:"0.9em"},children:["Average: ",I.voiceFeatures.pitch.average.toFixed(1)," Hz",l.jsx("br",{}),Ue.calibrated&&l.jsxs(l.Fragment,{children:["Calibrated: ",I.voiceFeatures.pitch.calibrated.toFixed(1)," Hz",I.voiceFeatures.pitch.autoCalibrated&&" (Auto)",l.jsx("br",{})]}),"Range: ",I.voiceFeatures.pitch.min.toFixed(1)," - ",I.voiceFeatures.pitch.max.toFixed(1)," Hz",l.jsx("br",{}),"Variation: ",(I.voiceFeatures.pitch.variation*100).toFixed(1),"%"]})]}),l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:" Energy Analysis"}),l.jsxs("div",{style:{fontSize:"0.9em"},children:["Volume: ",(I.voiceFeatures.energy*100).toFixed(1),"%",l.jsx("br",{}),"RMS Energy: ",(I.voiceFeatures.rmsEnergy*100).toFixed(1),"%",l.jsx("br",{}),l.jsxs("span",{style:{fontSize:"0.8em",opacity:.8},children:[I.voiceFeatures.energy>.85?"Very High (Yelling)":I.voiceFeatures.energy>.75?"High Energy (Shouting)":I.voiceFeatures.energy>.6?"Elevated Energy":I.voiceFeatures.energy>.4?"Moderate Energy":I.voiceFeatures.energy>.25?"Low Energy":"Very Low Energy",I.emotion.emotion==="anger"&&I.voiceFeatures.energy>.75&&" (Anger Indicator)",I.emotion.emotion==="sadness"&&I.voiceFeatures.energy<.4&&" (Sadness Indicator)"]})]})]}),I.voiceFeatures.volumeSpikes&&l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:" Volume Spikes"}),l.jsxs("div",{style:{fontSize:"0.9em"},children:["Count: ",I.voiceFeatures.volumeSpikes.count,l.jsx("br",{}),I.voiceFeatures.volumeSpikes.count>0&&l.jsxs(l.Fragment,{children:["Avg Intensity: ",(I.voiceFeatures.volumeSpikes.avgIntensity*100).toFixed(1),"%",l.jsx("br",{})]}),l.jsxs("span",{style:{fontSize:"0.8em",opacity:.8},children:[I.voiceFeatures.volumeSpikes.count>3?"Multiple Outbursts":I.voiceFeatures.volumeSpikes.count>0?"Some Outbursts":"Stable Volume",I.emotion.emotion==="anger"&&I.voiceFeatures.volumeSpikes.count>0&&" (Anger Pattern)"]})]})]}),I.voiceFeatures.speech&&l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:" Speech Rate"}),l.jsxs("div",{style:{fontSize:"0.9em"},children:["Rate: ",I.voiceFeatures.speech.rate.toFixed(2),"x normal",l.jsx("br",{}),"Words/sec: ",I.voiceFeatures.speech.wordsPerSecond.toFixed(1),l.jsx("br",{}),l.jsxs("span",{style:{fontSize:"0.8em",opacity:.8},children:[I.voiceFeatures.speech.rate>2?"Very Fast (Agitated)":I.voiceFeatures.speech.rate>1.5?"Fast Speech":I.voiceFeatures.speech.rate>1.2?"Slightly Fast":I.voiceFeatures.speech.rate>.8?"Normal Speed":I.voiceFeatures.speech.rate>.6?"Slow Speech":"Very Slow",I.emotion.emotion==="anger"&&I.voiceFeatures.speech.rate>1.5&&" (Anger/Frustration)"]})]})]}),l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:" Duration"}),l.jsxs("div",{style:{fontSize:"0.9em"},children:[I.voiceFeatures.duration.toFixed(2),"s"]})]}),l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:" Analysis Quality"}),l.jsxs("div",{style:{fontSize:"0.9em"},children:[I.calibrated?"Enhanced (Calibrated)":"Standard",l.jsx("br",{}),l.jsx("span",{style:{fontSize:"0.8em",opacity:.8},children:I.emotion.source})]})]})]}),I.emotion.scores&&l.jsxs("div",{style:{marginTop:"16px"},children:[l.jsx("h4",{style:{margin:"0 0 12px 0"},children:" Emotion Scores Breakdown"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"8px"},children:Object.entries(I.emotion.scores).map(([zr,sn])=>l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"8px 12px",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("span",{style:{textTransform:"capitalize"},children:zr}),l.jsx("span",{style:{fontWeight:"bold",color:Sa(zr)},children:sn.toFixed(2)})]},zr))})]}),I.emotion.emotion==="anger"&&I.voiceFeatures&&l.jsxs("div",{style:{marginTop:"16px",background:"rgba(239, 68, 68, 0.15)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"12px"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#ef4444"},children:" Anger Indicators Detected"}),l.jsxs("div",{style:{fontSize:"0.9em",color:"rgba(255,255,255,0.9)"},children:[I.voiceFeatures.energy>.75&&l.jsxs("div",{children:[" High energy voice (",(I.voiceFeatures.energy*100).toFixed(1),"% - shouting/yelling detected)"]}),I.voiceFeatures.pitch&&(Ue.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average)>280&&l.jsxs("div",{children:[" Elevated pitch (stress/anger response) (",(Ue.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average).toFixed(1)," Hz)"]}),I.voiceFeatures.pitch&&I.voiceFeatures.pitch.variation>.7&&l.jsxs("div",{children:[" High voice variation (aggressive/harsh speech) (",(I.voiceFeatures.pitch.variation*100).toFixed(1),"%)"]}),I.voiceFeatures.volumeSpikes&&I.voiceFeatures.volumeSpikes.count>0&&l.jsxs("div",{children:[" Volume spikes detected (",I.voiceFeatures.volumeSpikes.count," spikes - outbursts)"]}),I.voiceFeatures.speech&&I.voiceFeatures.speech.rate>1.5&&l.jsxs("div",{children:[" Fast speech rate (anger/frustration) (",I.voiceFeatures.speech.rate.toFixed(1),"x normal speed)"]}),I.voiceFeatures.zeroCrossingRate>.1&&l.jsx("div",{children:" Harsh consonants detected (aggressive speech pattern)"}),I.transcript&&/!/.test(I.transcript)&&l.jsxs("div",{children:[" Exclamation marks in speech (",(I.transcript.match(/!/g)||[]).length," exclamations)"]}),I.transcript&&/\b[A-Z]{2,}\b/.test(I.transcript)&&l.jsxs("div",{children:[" Shouting detected (caps words: ",(I.transcript.match(/\b[A-Z]{2,}\b/g)||[]).join(", "),")"]}),I.transcript&&/\b(damn|hell|shit|fuck|crap|bullshit)\b/gi.test(I.transcript)&&l.jsx("div",{children:" Strong language/profanity usage (emotional intensity)"}),I.emotion.scores.anger>1.5&&l.jsxs("div",{children:[" Strong textual anger indicators (score: ",I.emotion.scores.anger.toFixed(2),")"]}),l.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",opacity:.8},children:["Enhanced anger detection with ",I.calibrated?"calibrated":"standard"," voice analysis + BERT integration"]})]})]}),I.emotion.emotion==="sadness"&&I.voiceFeatures&&l.jsxs("div",{style:{marginTop:"16px",background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"12px"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#3b82f6"},children:" Sadness Indicators Detected"}),l.jsxs("div",{style:{fontSize:"0.9em",color:"rgba(255,255,255,0.9)"},children:[I.voiceFeatures.energy<.4&&l.jsxs("div",{children:[" Low energy voice pattern (",(I.voiceFeatures.energy*100).toFixed(1),"%)"]}),I.voiceFeatures.pitch&&(Ue.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average)<200&&l.jsxs("div",{children:[" Lower than average pitch (",(Ue.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average).toFixed(1)," Hz)"]}),I.voiceFeatures.pitch&&I.voiceFeatures.pitch.variation<.3&&l.jsxs("div",{children:[" Monotone speech pattern (",(I.voiceFeatures.pitch.variation*100).toFixed(1),"% variation)"]}),I.emotion.scores.sadness>1&&l.jsxs("div",{children:[" Strong textual sadness indicators (score: ",I.emotion.scores.sadness.toFixed(2),")"]}),l.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",opacity:.8},children:["Enhanced sadness detection with ",I.calibrated?"calibrated":"standard"," voice analysis"]})]})]}),I.emotion.emotion==="fear"&&I.voiceFeatures&&l.jsxs("div",{style:{marginTop:"16px",background:"rgba(245, 158, 11, 0.15)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",padding:"12px"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#f59e0b"},children:" Fear Indicators Detected"}),l.jsxs("div",{style:{fontSize:"0.9em",color:"rgba(255,255,255,0.9)"},children:[I.voiceFeatures.pitch&&(Ue.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average)>300&&l.jsxs("div",{children:[" Elevated pitch (stress response) (",(Ue.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average).toFixed(1)," Hz)"]}),I.voiceFeatures.pitch&&I.voiceFeatures.pitch.variation>.6&&l.jsxs("div",{children:[" Voice tremor/instability (",(I.voiceFeatures.pitch.variation*100).toFixed(1),"% variation)"]}),I.voiceFeatures.energy>.2&&I.voiceFeatures.energy<.8&&l.jsxs("div",{children:[" Variable energy levels (anxiety pattern) (",(I.voiceFeatures.energy*100).toFixed(1),"%)"]}),I.voiceFeatures.speech&&I.voiceFeatures.speech.rate>1.5&&l.jsxs("div",{children:[" Rapid speech (nervous response) (",I.voiceFeatures.speech.rate.toFixed(1),"x normal)"]}),I.emotion.scores.fear>1.2&&l.jsxs("div",{children:[" Strong textual fear indicators (score: ",I.emotion.scores.fear.toFixed(2),")"]}),l.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",opacity:.8},children:["Enhanced fear detection with ",I.calibrated?"calibrated":"standard"," voice analysis"]})]})]}),I.emotion.emotion==="surprise"&&I.voiceFeatures&&l.jsxs("div",{style:{marginTop:"16px",background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",padding:"12px"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#8b5cf6"},children:" Surprise Indicators Detected"}),l.jsxs("div",{style:{fontSize:"0.9em",color:"rgba(255,255,255,0.9)"},children:[I.voiceFeatures.pitch&&(Ue.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average)>350&&l.jsxs("div",{children:[" Very high pitch (exclamation) (",(Ue.calibrated?I.voiceFeatures.pitch.calibrated:I.voiceFeatures.pitch.average).toFixed(1)," Hz)"]}),I.voiceFeatures.pitch&&I.voiceFeatures.pitch.variation>.7&&l.jsxs("div",{children:[" High pitch variation (surprise inflection) (",(I.voiceFeatures.pitch.variation*100).toFixed(1),"% variation)"]}),I.voiceFeatures.energy>.5&&l.jsxs("div",{children:[" High energy burst (sudden reaction) (",(I.voiceFeatures.energy*100).toFixed(1),"%)"]}),I.voiceFeatures.speech&&(I.voiceFeatures.speech.rate<.8||I.voiceFeatures.speech.rate>1.8)&&l.jsxs("div",{children:[" Speech rate changes (pause/rush pattern) (",I.voiceFeatures.speech.rate.toFixed(1),"x normal)"]}),I.emotion.scores.surprise>1.1&&l.jsxs("div",{children:[" Strong textual surprise indicators (score: ",I.emotion.scores.surprise.toFixed(2),")"]}),l.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",opacity:.8},children:["Enhanced surprise detection with ",I.calibrated?"calibrated":"standard"," voice analysis"]})]})]})]}),_.length>0&&l.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"12px",padding:"20px",border:"1px solid rgba(255,255,255,0.2)"},children:[l.jsx("h3",{style:{margin:"0 0 16px 0"},children:" Analysis History"}),l.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"12px"},children:_.slice(0,10).map(zr=>l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"16px",borderRadius:"8px",border:`1px solid ${Sa(zr.emotion.emotion)}50`},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("span",{style:{fontSize:"1.5em"},children:zr.emotion.emotion==="joy"?"":zr.emotion.emotion==="sadness"?"":zr.emotion.emotion==="anger"?"":zr.emotion.emotion==="fear"?"":zr.emotion.emotion==="surprise"?"":""}),l.jsx("span",{style:{fontWeight:"bold",textTransform:"capitalize",color:Sa(zr.emotion.emotion)},children:zr.emotion.emotion}),l.jsxs("span",{style:{fontSize:"0.9em",opacity:.7},children:["(",(zr.emotion.confidence*100).toFixed(1),"%)"]})]}),l.jsx("div",{style:{fontSize:"0.8em",opacity:.6},children:new Date(zr.timestamp).toLocaleString()})]}),l.jsxs("div",{style:{fontSize:"0.9em",opacity:.8,fontStyle:"italic",maxHeight:"60px",overflow:"hidden",textOverflow:"ellipsis"},children:['"',zr.transcript.length>100?zr.transcript.substring(0,100)+"...":zr.transcript,'"']})]},zr.id))}),_.length>10&&l.jsxs("div",{style:{textAlign:"center",marginTop:"12px",fontSize:"0.9em",opacity:.7},children:["... and ",_.length-10," more analyses in history"]})]})]})};Jt.memo(oD);function sR(){var Fi;const[t,e]=Jt.useState("upload"),[r,n]=Jt.useState([]),[i,a]=Jt.useState(null),[s,f]=Jt.useState(!1);Jt.useEffect(()=>{const Dt=localStorage.getItem("analysisHistory");if(Dt)try{const hr=JSON.parse(Dt);if(Array.isArray(hr)){const Yr=hr.map(Ur=>({id:Ur&&Ur.id?Ur.id:Date.now()+Math.random(),type:Ur&&Ur.type?Ur.type:"Unknown",date:Ur&&Ur.date?Ur.date:new Date().toISOString(),transcript:Ur&&typeof Ur.transcript=="string"?Ur.transcript:"",summary:Ur&&typeof Ur.summary=="string"?Ur.summary:"",analysis:Ur&&typeof Ur.analysis<"u"?Ur.analysis:null,chartData:Ur&&typeof Ur.chartData<"u"?Ur.chartData:null}));n(Yr)}else n([])}catch(hr){n([]),console.warn("[AnalysisHistory] Failed to parse localStorage:",hr);try{localStorage.removeItem("analysisHistory"),alert("Analysis history was corrupted and has been reset. The page will reload."),window.location.reload()}catch{n([])}}else n([]),console.log("[AnalysisHistory] No history found in localStorage.");f(!0)},[]),Jt.useEffect(()=>{var Dt;if(s)try{localStorage.setItem("analysisHistory",JSON.stringify(r)),console.log("[AnalysisHistory] Saved to localStorage:",r.length,"entries"),window.dispatchEvent(new CustomEvent("analysisHistoryUpdated",{detail:{count:r.length,timestamp:Date.now(),latestEntry:r[0]||null}})),console.log("[AnalysisHistory] Current state:",{historyLength:r.length,firstEntry:r[0]?{id:r[0].id,type:r[0].type,date:r[0].date}:null,localStorageSize:((Dt=localStorage.getItem("analysisHistory"))==null?void 0:Dt.length)||0})}catch(hr){console.warn("[AnalysisHistory] Failed to save to localStorage:",hr)}},[r,s]),Jt.useEffect(()=>((async()=>{try{console.log(" Initializing emotion detection engine..."),ki.current=new O6,await ki.current.initialize()?console.log(" Emotion detection initialized successfully"):console.warn(" Emotion detection initialization failed - microphone access may be denied")}catch(hr){console.error(" Error initializing emotion detection:",hr),ki.current=null}})(),()=>{if(ki.current)try{ki.current.dispose()}catch(hr){console.error("Error disposing emotion detector:",hr)}}),[]);const _=Dt=>{n(hr=>hr.filter((Yr,Ur)=>Ur!==Dt)),i&&i.idx===Dt&&a(null)},N=(Dt,hr)=>{a({...Dt,idx:hr})},I=Jt.useCallback(Dt=>{if(!Dt)return;const hr={id:Dt.id||Date.now()+Math.random(),type:Dt.type||"Unknown",date:Dt.date||new Date().toISOString(),transcript:typeof Dt.transcript=="string"?Dt.transcript:"",summary:typeof Dt.summary=="string"?Dt.summary:"",analysis:Dt.analysis!==void 0?Dt.analysis:null,chartData:Dt.chartData!==void 0?Dt.chartData:null};console.log("[AnalysisHistory] Adding new entry:",hr.type,hr.id),n(Yr=>{const Ur=Yr.findIndex(rn=>rn.id===hr.id);if(Ur!==-1){console.log("[AnalysisHistory] Updating existing entry:",hr.id);const rn=[...Yr];return rn[Ur]=hr,rn}else return console.log("[AnalysisHistory] Adding new entry to history"),[hr,...Yr].slice(0,50)})},[]),me=Jt.useCallback(()=>{window.confirm("Are you sure you want to reset (clear) all analysis history? This cannot be undone.")&&(n([]),a(null),localStorage.removeItem("analysisHistory"),console.log("[AnalysisHistory] History cleared by user"),window.location.reload())},[]),[fe,Te]=Jt.useState("Exposure and training of students in fundamental concepts of sketching based visual representations. Hand sketching of general products (water bottle, mouse, laptop stand, mobile stand, travel bag, etc). Hand sketching of products of your discipline. Bio-inspired study (sketching of leaves, observation of bio-mimic structures etc). The students need to develop product prototypes / models using thermocol, wood and Plaster of Paris etc. Creative design on paper (Origami, Collage) with waste material. Digital design of various products (poster, scientific illustration, mind maps, empathy map etc). Design of any product using CAD software."),[qe,Ve]=Jt.useState(""),[Ue,Ee]=Jt.useState(!1),[Fe,He]=Jt.useState(""),[tt,et]=Jt.useState(0),[ct,xt]=Jt.useState(!1),[Pt,ir]=Jt.useState("en-US"),[mr,kr]=Jt.useState(""),[yr,vt]=Jt.useState(!1),[gt,It]=Jt.useState(""),[ut,qt]=Jt.useState(""),[Vt,Ot]=Jt.useState(""),[Ht,Qt]=Jt.useState(!1),[er,kt]=Jt.useState(null),[lr,dr]=Jt.useState(null),[Ar,Nr]=Jt.useState(null),[hn,Wn]=Jt.useState(!1),[Sn,Tn]=Jt.useState(!1),[zn,Bi]=Jt.useState(!1),[rs,Sa]=Jt.useState([]),[zr,sn]=Jt.useState(!1),[jr,Rn]=Jt.useState(!1),[Zn,Pr]=Jt.useState(null),[wn,Xn]=Jt.useState(""),[li,Ti]=Jt.useState(!1),[ca,va]=Jt.useState(!1),[ni,ga]=Jt.useState(null),[Hn,ti]=Jt.useState(!1),[Ai,Ci]=Jt.useState(""),[Hi,ya]=Jt.useState(!1),[Kn,ka]=Jt.useState(null),[Ma,Wi]=Jt.useState([]),[Ls,Pn]=Jt.useState(!1),[Ki,Ba]=Jt.useState(0),ki=Jt.useRef(null),La=Jt.useRef(null),Pa=Jt.useRef(!1),Vs=Jt.useRef(""),Es=Jt.useRef(null),xn=[{code:"en-US",name:"English (US)",flag:"",vosk:!0},{code:"en-GB",name:"English (UK)",flag:"",vosk:!0},{code:"es-ES",name:"Spanish",flag:"",vosk:!1},{code:"fr-FR",name:"French",flag:"",vosk:!1},{code:"de-DE",name:"German",flag:"",vosk:!1},{code:"it-IT",name:"Italian",flag:"",vosk:!1},{code:"pt-BR",name:"Portuguese",flag:"",vosk:!1},{code:"hi-IN",name:"Hindi",flag:"",vosk:!0},{code:"zh-CN",name:"Chinese",flag:"",vosk:!1},{code:"ja-JP",name:"Japanese",flag:"",vosk:!1},{code:"ko-KR",name:"Korean",flag:"",vosk:!1},{code:"ar-SA",name:"Arabic",flag:"",vosk:!1}],Sr={audio:[".mp3",".wav",".m4a",".aac",".ogg",".flac",".wma",".opus"],document:[".txt",".pdf",".docx",".doc",".rtf",".odt"],image:[".jpg",".jpeg",".png",".gif",".bmp",".tiff",".webp",".svg"],text:[".txt",".md",".json",".csv",".xml",".html"],domain:[".research",".legal",".medical",".technical",".business"]},Br=()=>Object.values(Sr).flat().join(","),en=Jt.useRef(!1),Kr=Jt.useCallback(()=>{const Dt=window.SpeechRecognition||window.webkitSpeechRecognition;if(!Dt)return null;const hr=new Dt;return hr.continuous=!0,hr.interimResults=!0,hr.lang=Pt,hr.maxAlternatives=1,hr.onresult=Yr=>{let Ur="",rn=Vs.current;for(let ii=Yr.resultIndex;ii<Yr.results.length;ii++){const ba=Yr.results[ii][0].transcript;if(Yr.results[ii].isFinal){const xi=ba.trim();rn.trim().endsWith(xi)||(rn+=xi+" ")}else Ur+=ba}let An=(rn+Ur).replace(/\s+/g," ").trim();if(Ur.length>0){const ii=Ur.length;An.slice(-2*ii,-ii)===An.slice(-ii)&&(An=An.slice(0,-ii))}Vs.current=rn,Te(An),et(An.split(/\s+/).filter(ii=>ii.trim()).length)},hr.onerror=Yr=>{console.error("Speech recognition error:",Yr.error),xt(!1),He(`Recognition error: ${Yr.error}. Please try again.`)},hr.onend=()=>{if(en.current)xt(!1);else try{hr.start(),xt(!0)}catch{}},hr},[Pt]);Jt.useEffect(()=>{const Dt=window.SpeechRecognition||window.webkitSpeechRecognition;if(Pa.current=!!Dt,Pa.current){const hr=Kr();hr&&(La.current=hr)}},[Kr]),Jt.useEffect(()=>{if(fe){const Dt=fe.split(/\s+/).filter(hr=>hr.trim()).length;et(Dt)}else et(0)},[fe]);const an=Jt.useCallback(()=>{if(!Pa.current){He("Speech recognition not supported in this browser.");return}en.current=!1;try{He(""),fe.trim()||(Vs.current="",Te("")),La.current&&(La.current.start(),xt(!0))}catch(Dt){console.error("Error starting recognition:",Dt),He("Failed to start speech recognition. Please try again.")}},[fe]),En=Jt.useCallback(()=>{en.current=!0;try{La.current&&(La.current.stop(),xt(!1))}catch(Dt){console.error("Error stopping recognition:",Dt)}},[]),_n=Jt.useCallback(async()=>{if(!ut.trim()){He("Please enter some text to process.");return}Ee(!0),He("");try{let Dt=ut;if(Dt&&Dt.length>50){const Ur=Xd(Dt);if(Ur!=="en")try{Rn(!0);const{translated:rn,info:An}=await zv(Dt,Ur);rn&&(Xn(Dt),Pr(An),Ti(!0),Dt=rn)}catch(rn){console.warn("Translation failed, using original text:",rn)}finally{Rn(!1)}}Dt=await zi(Dt);const hr=Dt.trim().split(/\s+/).length;Te(Dt),et(hr),qt(""),e("upload");const Yr={id:Date.now()+Math.random(),type:"Text Input",date:new Date().toISOString(),transcript:Dt,summary:"",analysis:null,chartData:null};I(Yr)}catch(Dt){console.error("Error processing text:",Dt),He("Failed to process text. Please try again.")}finally{Ee(!1)}},[ut]),fn=Jt.useCallback(async()=>{if(!fe.trim()){He("No transcript available to summarize.");return}Ee(!0),He("");try{const Dt=fe.split(/[.!?]+/).map(ii=>ii.trim()).filter(ii=>ii.length>0),hr=Array.from(new Set(Dt)),Yr=["important","note","key","summary","conclusion","result","main","critical","essential"],Ur=new RegExp(Yr.join("|"),"i"),rn=hr.map(ii=>({text:ii,score:(Ur.test(ii)?2:0)+Math.min(ii.length/80,1)}));rn.sort((ii,ba)=>ba.score-ii.score);let An="";if(rn.length===0)An=" No content to summarize.";else if(rn.length<=2)An=" "+fe.trim();else{const ii=Math.max(4,Math.min(5,Math.floor(rn.length*.3)));An=rn.slice(0,ii).map(ns=>ns.text).map(ns=>Yr.some(na=>ns.toLowerCase().includes(na))?` **${ns}**`:` ${ns}`).join(`
`)}if(Ve(An),fe.trim()){const ii={id:Date.now()+Math.random(),type:t==="speech"?"Speech":t==="upload"?"File Upload":"Text Input",date:new Date().toISOString(),transcript:fe,summary:An,analysis:null,chartData:null};n(ba=>ba[0]&&ba[0].transcript===fe&&ba[0].summary===An?ba:[ii,...ba].slice(0,30))}}catch(Dt){console.error("Error generating summary:",Dt),He("Failed to generate summary. Please try again.")}finally{Ee(!1)}},[fe,t]),on=Jt.useCallback(async Dt=>{const hr=Dt.target.files[0];if(!hr)return;kt({name:hr.name,size:hr.size,type:hr.type,lastModified:hr.lastModified}),vt(!0),He(""),It("Starting file processing...");const Yr=setTimeout(()=>{vt(!1),He("Processing timeout - the operation took too long. Please try a smaller file."),It(" Processing timeout")},3e5);try{It(" Processing content...");const Ur=await L6(hr,An=>{An&&It(An)},Pt,{useVosk:!0});clearTimeout(Yr);let rn="";if(Ur&&typeof Ur=="object"&&Ur.audioTranscript?rn=Ur.audioTranscript||Ur.content||"":rn=typeof Ur=="string"?Ur:(Ur==null?void 0:Ur.content)||"",rn&&rn.length>50){const An=Xd(rn);if(An!=="en")try{Rn(!0),It(" Translating content to English...");const{translated:ii,info:ba}=await zv(rn,An);ii&&(Xn(rn),Pr(ba),Ti(!0),rn=ii)}catch(ii){console.warn("Translation failed, using original text:",ii)}finally{Rn(!1)}}if(rn=await zi(rn),kr(rn),Te(rn),et(rn.split(/\s+/).filter(An=>An.trim()).length),It(" Content processed successfully!"),rn.trim()){const An={id:Date.now()+Math.random(),type:"File Upload",date:new Date().toISOString(),transcript:rn,summary:"",analysis:null,chartData:null};I(An)}Dt.target.value=""}catch(Ur){clearTimeout(Yr),console.error("File processing error:",Ur),He(`Error processing file: ${Ur.message}`),It(" Processing failed")}finally{vt(!1),setTimeout(()=>It(""),5e3)}},[Pt,fe]),Yn=Jt.useCallback(Dt=>{Dt.preventDefault(),Qt(!0)},[]),ri=Jt.useCallback(Dt=>{Dt.preventDefault(),Qt(!1)},[]),xa=Jt.useCallback(Dt=>{Dt.preventDefault(),Qt(!1);const hr=Dt.dataTransfer.files;if(hr.length>0){const Ur={target:{files:[hr[0]],value:""}};on(Ur)}},[on]),qi=()=>{var Dt;(Dt=Es.current)==null||Dt.click()},Ui=Jt.useCallback(async Dt=>{if(!Dt||!Dt.trim())return Dt;Rn(!0),He("");try{if(!z6(Dt))return Pr(null),Ti(!1),Dt;const hr=Xd(Dt),Yr=await zv(Dt,hr);return Yr.translatedText&&Yr.translatedText!==Dt?(Xn(Dt),Pr({originalLanguage:N6(Yr.detectedLanguage),confidence:Yr.confidence,fallback:Yr.fallback||!1,originalText:Dt}),Ti(!0),Yr.translatedText):(Pr(null),Ti(!1),Dt)}catch(hr){return console.error("Translation error:",hr),He("Translation failed. Using original text for analysis."),Pr(null),Ti(!1),Dt}finally{Rn(!1)}},[]);Jt.useCallback(async Dt=>{if(!Dt||Dt===fe)return;const hr=await Ui(Dt);Te(hr)},[fe,Ui]);const zi=Jt.useCallback(async Dt=>{if(!Dt||!Dt.trim())return Dt;va(!0),He("");try{if(!I6(Dt))return ga(null),ti(!1),Dt;const hr=F6(Dt,{includeCapitalization:!0,includePunctuation:!0,includeMedicalTerms:!0,preserveOriginalSpacing:!1});return hr.correctedText&&hr.correctedText!==Dt&&hr.totalCorrections>0?(Ci(Dt),ga({totalCorrections:hr.totalCorrections,confidence:hr.confidence,summary:hr.summary,corrections:hr.corrections.slice(0,5),originalText:Dt}),ti(!0),hr.correctedText):(ga(null),ti(!1),Dt)}catch(hr){return console.error("Grammar correction error:",hr),He("Grammar correction failed. Using original text."),ga(null),ti(!1),Dt}finally{va(!1)}},[]),Vi=Jt.useCallback(()=>{if(!ki.current)return console.warn(" Emotion detector not initialized"),!1;const Dt=ki.current.startDetection();if(Dt){ya(!0),console.log(" Started emotion detection");const hr=setInterval(()=>{if(ki.current&&Hi){const Yr=ki.current.analyzeCurrentEmotion(fe);ka(Yr),Ba(Yr.confidence),Yr.confidence>50&&Pn(!0)}},2e3);ki.current.analysisIntervalId=hr}return Dt},[fe,Hi]),Ds=Jt.useCallback(()=>{ki.current&&(ki.current.stopDetection(),ki.current.analysisIntervalId&&(clearInterval(ki.current.analysisIntervalId),ki.current.analysisIntervalId=null)),ya(!1),console.log(" Stopped emotion detection")},[]),Rs=Jt.useCallback(()=>{if(console.log(" Analyze emotion button clicked"),console.log(" Current transcript:",(fe==null?void 0:fe.slice(0,100))+"..."),!fe.trim()){console.warn(" No transcript available"),He("No transcript available to analyze");return}try{if(console.log(" Starting emotion analysis..."),ki.current){console.log(" Using emotion detector engine");const Dt=ki.current.analyzeCurrentEmotion(fe);console.log(" Emotion analysis result:",Dt),console.log(" Emotion properties:",{detected:Dt==null?void 0:Dt.detected,confidence:Dt==null?void 0:Dt.confidence,breakdown:Dt==null?void 0:Dt.breakdown}),ka(Dt),Ba((Dt==null?void 0:Dt.confidence)||0),Pn(!0),Wi(hr=>[{...Dt,transcript:fe.slice(0,100),timestamp:Date.now()},...hr].slice(0,10)),console.log(" Manual emotion analysis:",Dt)}else{console.log(" No emotion detector, using fallback");const Dt=_r(fe);console.log(" Fallback emotion analysis result:",Dt),console.log(" Fallback emotion properties:",{detected:Dt==null?void 0:Dt.detected,confidence:Dt==null?void 0:Dt.confidence,breakdown:Dt==null?void 0:Dt.breakdown}),ka(Dt),Ba((Dt==null?void 0:Dt.confidence)||0),Pn(!0),console.log(" Fallback emotion analysis:",Dt)}}catch(Dt){console.error(" Error during emotion analysis:",Dt),He(`Emotion analysis failed: ${Dt.message}`)}},[fe]),_r=Jt.useCallback(Dt=>{const hr=Dt.toLowerCase();console.log(" Analyzing text for comprehensive emotions:",hr);const Ur=["oh great","oh wonderful","oh fantastic","oh perfect","oh brilliant","what a revolutionary idea","what a brilliant idea","what a fantastic idea","what a wonderful idea","what a great idea","what a genius idea","exactly what i wanted","just what i needed","how original","how creative","how thoughtful","how brilliant","revolutionary idea","groundbreaking","stroke of genius","work of art","masterpiece","incredible achievement","medal","trophy","award","prize","recognition","honor","make sure to get","i'll make sure","absolutely brilliant","just perfect","goes perfectly wrong","how lovely","terrific","marvelous","outstanding","remarkable","extraordinary","sure thing","yeah right","of course","obviously","clearly the best"].filter(Fn=>hr.includes(Fn)).length*30,rn=[/oh,?\s+you'?re.*\?\s*what a.*idea/i,/putting.*dishes.*dishwasher.*revolutionary/i,/\?\s*what a (brilliant|revolutionary|amazing|fantastic|wonderful|great)/i,/make sure.*medal/i,/how (original|creative|brilliant|thoughtful)/i];let An=0;rn.forEach(Fn=>{Fn.test(Dt)&&(An+=40,console.log(" Found complex sarcasm pattern:",Fn))});const ii=Ur+An,ba={high:["ecstatic","thrilled","overjoyed","elated","euphoric","exhilarated","pumped up","blown away","mind-blowing","absolutely incredible","phenomenal","spectacular"],medium:["excited","amazing","incredible","awesome","fantastic","wonderful","brilliant","outstanding","excellent","superb","great job","well done","impressive"],low:["good","nice","pleased","happy","satisfied","glad","positive","optimistic","hopeful","encouraging"]};let xi=0;xi+=ba.high.filter(Fn=>hr.includes(Fn)).length*40,xi+=ba.medium.filter(Fn=>hr.includes(Fn)).length*25,xi+=ba.low.filter(Fn=>hr.includes(Fn)).length*15,[/i\s+(love|adore|absolutely)\s+/i,/this\s+is\s+(amazing|incredible|fantastic|wonderful|brilliant)/i,/can't\s+wait/i,/so\s+(excited|happy|pleased)/i,/absolutely\s+(love|amazing|incredible)/i].forEach(Fn=>{Fn.test(Dt)&&(xi+=20)});const na={high:["absolutely certain","completely sure","no doubt","definitely will","guaranteed","without question","positively","undoubtedly","surely","confident in"],medium:["sure","certain","confident","believe","think so","pretty sure","likely","probably","expect","anticipate"],low:["hope","maybe","possibly","might","could be","perhaps","seems like","appears"]};let ia=0;ia+=na.high.filter(Fn=>hr.includes(Fn)).length*35,ia+=na.medium.filter(Fn=>hr.includes(Fn)).length*20,ia+=na.low.filter(Fn=>hr.includes(Fn)).length*10;const Ha={high:["deeply worried","very concerned","extremely anxious","really troubled","seriously worried","alarmed","panicked","terrified","devastated"],medium:["worried","concerned","anxious","troubled","uneasy","nervous","apprehensive","fearful","stressed","bothered"],low:["slightly worried","a bit concerned","wondering","questioning","unsure","hesitant","cautious","careful"]};let io=0;io+=Ha.high.filter(Fn=>hr.includes(Fn)).length*40,io+=Ha.medium.filter(Fn=>hr.includes(Fn)).length*25,io+=Ha.low.filter(Fn=>hr.includes(Fn)).length*15,[/what\s+if/i,/i'm\s+(worried|concerned|anxious)/i,/hope\s+(nothing|everything\s+is\s+okay)/i,/is\s+everything\s+(okay|alright|fine)/i].forEach(Fn=>{Fn.test(Dt)&&(io+=20)});const Po={high:["absolutely furious","extremely frustrated","really annoyed","completely fed up","totally irritated","beyond annoyed","seriously angry"],medium:["frustrated","annoying","irritating","bothering","annoyed","upset","angry","ridiculous","seriously"],low:["slightly annoyed","a bit frustrated","mildly irritated","somewhat bothered"]};let ao=0;ao+=Po.high.filter(Fn=>hr.includes(Fn)).length*35,ao+=Po.medium.filter(Fn=>hr.includes(Fn)).length*20,ao+=Po.low.filter(Fn=>hr.includes(Fn)).length*12;const Qo={high:["devastated","heartbroken","extremely sad","deeply disappointed","crushed","miserable","depressed"],medium:["sad","disappointed","upset","hurt","unhappy","down","blue","melancholy"],low:["slightly sad","a bit down","somewhat disappointed","not great","feeling low"]};let No=0;No+=Qo.high.filter(Fn=>hr.includes(Fn)).length*35,No+=Qo.medium.filter(Fn=>hr.includes(Fn)).length*22,No+=Qo.low.filter(Fn=>hr.includes(Fn)).length*12;const el={high:["fascinating","intriguing","really interested","very curious","tell me more","want to know","how does it work"],medium:["interesting","curious","wonder","would like to know","can you explain","what about"],low:["wondering","maybe","perhaps","possibly"]};let zo=0;zo+=el.high.filter(Fn=>hr.includes(Fn)).length*30,zo+=el.medium.filter(Fn=>hr.includes(Fn)).length*20,zo+=el.low.filter(Fn=>hr.includes(Fn)).length*10;const uc=["okay","fine","alright","normal","regular","standard","typical","usual","average","moderate","reasonable","acceptable","adequate","sufficient","as expected","nothing special","routine","ordinary","common"].filter(Fn=>hr.includes(Fn)).length*20,dc=["i suppose it's fine","i guess it's okay","not bad i suppose","if you say so","sure whatever","fine i guess","whatever you say","that's one way to look at it","interesting perspective","i see your point but","perhaps you're right","maybe that works","could be better but"].filter(Fn=>hr.includes(Fn)).length*25,tl={sarcasm:ii,enthusiasm:xi,confidence:ia,concern:io,frustration:ao,sadness:No,curiosity:zo,neutral:uc,diplomaticPoliteness:dc};console.log(" Enhanced emotion scores:",tl);const Al=Object.entries(tl).sort((Fn,oi)=>oi[1]-Fn[1]),is=Al[0],Cl=Al[1],rl=Cl[1]>is[1]*.7,nl={sarcasm:25,enthusiasm:20,confidence:18,concern:20,frustration:18,sadness:20,curiosity:15,neutral:15,diplomaticPoliteness:20}[is[0]]||15,za=is[1]>=nl?is[0]:"neutral",$s=is[1]>=nl?is[1]:5;let Wa=0;$s>50?Wa=20:$s>30?Wa=15:$s>20&&(Wa=10);const hc=rl?-5:0;return console.log(" Top emotion:",is,"Second:",Cl,"Final:",za,"Score:",$s),console.log(" Mixed emotions detected:",rl,"Confidence bonus:",Wa),{detected:za,confidence:Math.min(95,$s+Wa+hc+10),breakdown:{[za]:{textScore:$s,audioScore:0,contextScore:5}},allScores:tl,secondaryEmotion:rl?Cl[0]:null,threshold:nl,isCloseCall:rl,emotionIntensity:$s>40?"high":$s>25?"medium":"low",timestamp:Date.now()}},[]),ro=Jt.useCallback((Dt,hr)=>{var rn;const Yr={sarcasm:{high:"Strong sarcasm detected - speaker likely means the opposite of what they said",medium:"Possible sarcasm - speaker may be expressing frustration or irony indirectly",low:"Mild sarcastic undertones detected - could be playful or mildly dismissive"},enthusiasm:{high:"High enthusiasm - speaker is genuinely excited and energetic about the topic",medium:"Positive enthusiasm detected - speaker shows genuine interest and approval",low:"Mild enthusiasm - speaker is moderately pleased or interested"},confidence:{high:"Strong confidence - speaker is very certain and assured about their statements",medium:"Good confidence level - speaker believes in what they're saying",low:"Mild confidence - speaker has some certainty but may have minor doubts"},concern:{high:"High concern - speaker is worried or anxious about the situation",medium:"Moderate concern - speaker has some worries or apprehension",low:"Mild concern - speaker has slight hesitation or caution"},frustration:{high:"Clear frustration - speaker is upset, annoyed, or experiencing difficulties",medium:"Moderate irritation - speaker is somewhat bothered or impatient",low:"Slight tension - speaker may be mildly annoyed or experiencing minor issues"},sadness:{high:"Sadness or disappointment - speaker is experiencing negative emotions",medium:"Low mood - speaker seems down or mildly disappointed",low:"Subdued emotional state - speaker may be feeling slightly melancholy"},curiosity:{high:"High curiosity - speaker is very interested and wants to learn more",medium:"Curious interest - speaker is asking questions and seeking information",low:"Mild interest - speaker shows some curiosity about the topic"},neutral:{high:"Neutral emotional state - speaker is balanced and matter-of-fact",medium:"Balanced emotional tone - no strong emotions detected",low:"Minimal emotional expression - speaker is keeping emotions neutral"},diplomaticPoliteness:{high:"Diplomatic politeness - speaker is being courteous while possibly disagreeing",medium:"Polite restraint - speaker may have reservations but is being diplomatic",low:"Mild social politeness - speaker is being courteous and considerate"}},Ur=hr>70?"high":hr>45?"medium":"low";return((rn=Yr[Dt])==null?void 0:rn[Ur])||`${Dt} detected with ${Ur} confidence`},[]),no=Jt.useCallback(()=>{ct&&En(),Ds(),Vs.current="",Te(""),Ve(""),et(0),He(""),qt(""),Ot(""),It(""),vt(!1),kt(null),dr(null),Qt(!1),Bi(!1),Sa([]),sn(!1),Rn(!1),Pr(null),Xn(""),Ti(!1),va(!1),ga(null),ti(!1),Ci(""),Ti(!1),ka(null),Wi([]),Pn(!1),Ba(0),ya(!1),Es.current&&(Es.current.value="")},[ct,En,Ds]),bs=Jt.useCallback(async()=>{if(!fe.trim()){He("No transcript available for video suggestions.");return}sn(!0),He("");try{const hr=fe.toLowerCase().split(/\s+/).filter(An=>An.length>4),Yr={};hr.forEach(An=>{Yr[An]=(Yr[An]||0)+1});const Ur=Object.entries(Yr).sort(([,An],[,ii])=>ii-An).slice(0,8).map(([An])=>An),rn=[{id:1,title:`Understanding ${Ur[0]||"Key Concepts"} - Complete Guide`,channel:"Educational Hub",duration:"15:42",views:"2.3M views",thumbnail:"",description:`Comprehensive explanation of ${Ur.slice(0,3).join(", ")} and related concepts.`,searchQuery:Ur.slice(0,3).join(" "),relevance:95},{id:2,title:`${Ur[1]||"Advanced"} Techniques and Best Practices`,channel:"Professional Learning",duration:"22:18",views:"1.8M views",thumbnail:"",description:`Deep dive into advanced techniques for ${Ur.slice(1,4).join(", ")}.`,searchQuery:Ur.slice(1,4).join(" ")+" tutorial",relevance:88},{id:3,title:`Practical Applications of ${Ur[2]||"Core Principles"}`,channel:"Applied Knowledge",duration:"18:35",views:"1.2M views",thumbnail:"",description:"Real-world examples and applications related to your transcript content.",searchQuery:Ur.slice(2,5).join(" ")+" examples",relevance:82},{id:4,title:`${Ur[0]||"Topic"} vs ${Ur[1]||"Alternative"} - Which is Better?`,channel:"Comparison Central",duration:"12:28",views:"956K views",thumbnail:"",description:"Detailed comparison and analysis of different approaches mentioned in your content.",searchQuery:`${Ur[0]} vs ${Ur[1]}`,relevance:79},{id:5,title:`Common Mistakes in ${Ur[3]||"Implementation"}`,channel:"Learning from Errors",duration:"14:52",views:"743K views",thumbnail:"",description:`Avoid these pitfalls when working with ${Ur.slice(3,6).join(", ")}.`,searchQuery:Ur.slice(3,6).join(" ")+" mistakes",relevance:75},{id:6,title:`Latest Trends in ${Ur[4]||"Current Field"}`,channel:"Trend Watch",duration:"19:14",views:"634K views",thumbnail:"",description:"Stay updated with the latest developments and trends in your area of interest.",searchQuery:Ur.slice(4,7).join(" ")+" trends 2025",relevance:72}];Sa(rn),Bi(!0)}catch(Dt){console.error("Error generating video suggestions:",Dt),He("Failed to generate video suggestions. Please try again.")}finally{sn(!1)}},[fe]),bo=Dt=>{const Yr=`https://www.youtube.com/results?search_query=${encodeURIComponent(Dt)}`;window.open(Yr,"_blank")},Na=Jt.useCallback(async()=>{Wn(!0),He(""),It("Running Vosk diagnostics...");try{const Dt=await R6(hr=>It(hr));Nr(Dt),Dt.success?It(" Vosk diagnostics completed successfully"):(He(`Vosk diagnostics failed: ${Dt.message}`),It(" Vosk diagnostics failed"))}catch(Dt){console.error("Diagnostics error:",Dt),He(`Diagnostics failed: ${Dt.message}`),It(" Diagnostics failed")}finally{Wn(!1),setTimeout(()=>It(""),3e3)}},[]),Mi=Jt.useCallback(()=>{if(!fe.trim())return;const Dt=new Date().toISOString().replace(/[:.]/g,"-"),hr=er?`${er.name.split(".")[0]}_results_${Dt}.txt`:`speech_results_${Dt}.txt`;let Yr=` SPEECH PROCESSING RESULTS
`;Yr+=`Generated: ${new Date().toLocaleString()}
`,Yr+=`Language: ${Pt}
`,er&&(Yr+=`
 FILE INFORMATION:
`,Yr+=` Name: ${er.name}
`,Yr+=` Size: ${(er.size/(1024*1024)).toFixed(2)} MB
`,Yr+=` Type: ${er.type}
`,Yr+=` Last Modified: ${new Date(er.lastModified).toLocaleString()}
`),lr&&(Yr+=`
 PROCESSING STATISTICS:
`,Yr+=` Mode: ${lr.mode}
`,Yr+=` Duration: ${Math.round(lr.duration||0)}s
`,Yr+=` Words: ${lr.words||0}
`,Yr+=` Confidence: ${Math.round((lr.confidence||0)*100)}%
`),Yr+=`
 TRANSCRIPT (${tt} words):
`,Yr+=`${fe}
`,qe.trim()&&(Yr+=`
 SUMMARY:
`,Yr+=`${qe}
`);const Ur=new Blob([Yr],{type:"text/plain"}),rn=URL.createObjectURL(Ur),An=document.createElement("a");An.href=rn,An.download=hr,An.click(),URL.revokeObjectURL(rn)},[fe,qe,tt,Pt,er,lr]);return s?l.jsxs("div",{className:"app",style:{background:"linear-gradient(135deg, #1e2235 0%, #2a2d43 100%)",minHeight:"100vh",color:"#e6e6f0"},children:[l.jsx("button",{className:"floating-guide-btn",onClick:()=>window.open("/guide.html","_blank"),style:{position:"fixed",top:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",border:"none",borderRadius:"50%",color:"white",fontSize:"24px",cursor:"pointer",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.4)",zIndex:1e3,transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Dt=>{Dt.target.style.transform="scale(1.1)",Dt.target.style.boxShadow="0 6px 25px rgba(59, 130, 246, 0.6)"},onMouseLeave:Dt=>{Dt.target.style.transform="scale(1)",Dt.target.style.boxShadow="0 4px 20px rgba(59, 130, 246, 0.4)"},title:"Open Complete Feature Guide",children:""}),l.jsxs("div",{className:"container",style:{maxWidth:1100,margin:"0 auto",padding:"32px 18px 48px 18px",background:"rgba(30,34,53,0.98)",borderRadius:18,boxShadow:"0 6px 32px #0007"},children:[l.jsxs("div",{className:"header",style:{marginBottom:32,textAlign:"center",position:"relative"},children:[l.jsx("h1",{className:"title",style:{fontSize:"2.3em",fontWeight:800,letterSpacing:"1.5px",color:"#7ed957",textShadow:"0 2px 12px #0008"},children:" NLP Speech Processing & Emotion Analysis Platform"}),l.jsxs("div",{className:"subtitle",style:{fontSize:"1.15em",color:"#a97fff",marginTop:6,fontWeight:500},children:["Powered by ",l.jsx("span",{style:{color:"#4f8cff"},children:"BERT AI Models"}),"  ",l.jsx("span",{style:{color:"#7ed957"},children:"Real-time Emotion Detection"}),"  ",l.jsx("span",{style:{color:"#f093fb"},children:"Smart Summarization"})]}),l.jsx("button",{onClick:()=>window.open("/guide.html","_blank"),style:{position:"absolute",top:"0",right:"0",background:"linear-gradient(135deg, #4f8cff, #3b82f6)",color:"white",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",boxShadow:"0 3px 15px rgba(79, 140, 255, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:Dt=>{Dt.target.style.background="linear-gradient(135deg, #3b82f6, #1d4ed8)",Dt.target.style.transform="translateY(-2px)",Dt.target.style.boxShadow="0 5px 20px rgba(79, 140, 255, 0.4)"},onMouseLeave:Dt=>{Dt.target.style.background="linear-gradient(135deg, #4f8cff, #3b82f6)",Dt.target.style.transform="translateY(0)",Dt.target.style.boxShadow="0 3px 15px rgba(79, 140, 255, 0.3)"},title:"Complete Feature Guide - All algorithms, features, and solutions explained",children:" Guide"})]}),(jr||li)&&l.jsx("div",{className:"translation-status",style:{background:"linear-gradient(120deg, #2a3f5f 60%, #1e3a5f 100%)",borderRadius:14,boxShadow:"0 2px 16px #0005",padding:"18px",marginBottom:24,border:"1px solid #4f8cff"},children:jr?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[l.jsx("div",{style:{width:20,height:20,border:"2px solid #4f8cff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),l.jsx("span",{style:{color:"#4f8cff",fontWeight:600},children:" Translating content to English..."})]}):li&&Zn?l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[l.jsx("span",{style:{fontSize:"1.2em"},children:""}),l.jsx("span",{style:{color:"#7ed957",fontWeight:700},children:"Translation Applied"})]}),l.jsxs("div",{style:{fontSize:"0.95em",color:"#b0b0c0",lineHeight:1.4},children:[l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#4f8cff"},children:"Original Language:"})," ",Zn.originalLanguage]}),l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#4f8cff"},children:"Translation Method:"})," ",Zn.fallback?"Dictionary Fallback":"Google Translate API"]}),Zn.confidence&&l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#4f8cff"},children:"Confidence:"})," ",Math.round(Zn.confidence*100),"%"]})]}),l.jsx("button",{onClick:()=>Ti(!1),style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",marginTop:8,cursor:"pointer"},children:"Dismiss"})]}):null}),(ca||Hn)&&l.jsx("div",{className:"grammar-status",style:{background:"linear-gradient(120deg, #3f2a5f 60%, #5f1e3a 100%)",borderRadius:14,boxShadow:"0 2px 16px #0005",padding:"18px",marginBottom:24,border:"1px solid #a97fff"},children:ca?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[l.jsx("div",{style:{width:20,height:20,border:"2px solid #a97fff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),l.jsx("span",{style:{color:"#a97fff",fontWeight:600},children:" Correcting grammar..."})]}):Hn&&ni?l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[l.jsx("span",{style:{fontSize:"1.2em"},children:""}),l.jsx("span",{style:{color:"#7ed957",fontWeight:700},children:"Grammar Corrections Applied"})]}),l.jsxs("div",{style:{fontSize:"0.95em",color:"#b0b0c0",lineHeight:1.4},children:[l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#a97fff"},children:"Corrections Made:"})," ",ni.totalCorrections]}),l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#a97fff"},children:"Confidence:"})," ",Math.round(ni.confidence*100),"%"]}),ni.summary.categories&&Object.keys(ni.summary.categories).length>0&&l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#a97fff"},children:"Types:"})," ",Object.keys(ni.summary.categories).join(", ")]})]}),ni.corrections&&ni.corrections.length>0&&l.jsxs("div",{style:{marginTop:8,fontSize:"0.85em",color:"#9a9ac0"},children:[l.jsx("strong",{children:"Examples:"}),l.jsx("ul",{style:{margin:"4px 0",paddingLeft:16},children:ni.corrections.slice(0,3).map((Dt,hr)=>l.jsxs("li",{style:{marginBottom:2},children:[Dt.category,": Fixed ",Dt.pattern.replace(/\\/g,"").slice(0,30),"..."]},hr))})]}),l.jsx("button",{onClick:()=>ti(!1),style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",marginTop:8,cursor:"pointer"},children:"Dismiss"})]}):null}),(Hi||Ls)&&Kn&&l.jsx("div",{className:"emotion-status",style:{background:"linear-gradient(120deg, #5f3a2a 60%, #3a5f2a 100%)",borderRadius:14,boxShadow:"0 2px 16px #0005",padding:"18px",marginBottom:24,border:"1px solid #ff7f50"},children:Hi&&!Kn?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[l.jsx("div",{style:{width:20,height:20,border:"2px solid #ff7f50",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),l.jsx("span",{style:{color:"#ff7f50",fontWeight:600},children:" Analyzing speech emotions..."})]}):Kn&&(Kn.detected||Kn.emotion)?l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[l.jsx("span",{style:{fontSize:"1.2em"},children:""}),l.jsxs("span",{style:{color:"#7ed957",fontWeight:700},children:["Emotion Detected: ",(Kn.detected||Kn.emotion||"unknown").charAt(0).toUpperCase()+(Kn.detected||Kn.emotion||"unknown").slice(1)]})]}),l.jsxs("div",{style:{fontSize:"0.95em",color:"#b0b0c0",lineHeight:1.4},children:[l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#ff7f50"},children:"Confidence:"})," ",Math.round(Kn.confidence||0),"%"]}),l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#ff7f50"},children:"Detection Status:"})," ",Hi?"Real-time Active":"Manual Analysis"]}),Kn.breakdown&&Kn.breakdown[Kn.detected||Kn.emotion]&&l.jsxs("div",{children:[l.jsx("strong",{style:{color:"#ff7f50"},children:"Evidence:"}),"Text(",Kn.breakdown[Kn.detected||Kn.emotion].textScore||0,"), Audio(",Kn.breakdown[Kn.detected||Kn.emotion].audioScore||0,"), Context(",Kn.breakdown[Kn.detected||Kn.emotion].contextScore||0,")"]})]}),l.jsxs("div",{style:{marginTop:8,fontSize:"0.85em",color:"#9a9ac0"},children:[l.jsx("strong",{children:"Interpretation:"})," ",ro(Kn.detected||Kn.emotion||"neutral",Kn.confidence||0)]}),l.jsxs("div",{style:{marginTop:10,display:"flex",gap:8},children:[l.jsx("button",{onClick:()=>Pn(!1),style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",cursor:"pointer"},children:"Dismiss"}),!Hi&&ki.current&&l.jsx("button",{onClick:Vi,style:{background:"#4f8cff",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",cursor:"pointer"},children:"Start Real-time"})]})]}):l.jsxs("div",{style:{color:"#ff7f50",fontWeight:600},children:[l.jsx("div",{children:" Emotion Analysis Result:"}),l.jsx("div",{style:{fontSize:"0.9em",color:"#b0b0c0",marginTop:8},children:Kn?l.jsxs(l.Fragment,{children:[l.jsx("div",{children:"Status: Analysis completed"}),l.jsxs("div",{children:["Data: ",JSON.stringify(Kn)]})]}):l.jsx("div",{children:"No emotion data available"})}),l.jsx("button",{onClick:()=>Pn(!1),style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontSize:"0.85em",cursor:"pointer",marginTop:10},children:"Dismiss"})]})}),l.jsxs("div",{className:"analysis-history-section",style:{background:"linear-gradient(120deg, #23272f 60%, #2a2d43 100%)",borderRadius:14,boxShadow:"0 2px 16px #0005",padding:"22px 18px 18px 18px",marginBottom:32},children:[l.jsx("h3",{style:{color:"#7ed957",fontWeight:700,fontSize:"1.25em",marginBottom:10},children:" Analysis History"}),l.jsxs("div",{style:{display:"flex",gap:10,marginBottom:10},children:[l.jsxs("button",{style:{background:"#4f8cff",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:600,boxShadow:"0 1px 4px #0003",cursor:"pointer"},onClick:()=>{const Dt=localStorage.getItem("analysisHistory"),hr=`Analysis History Debug Info:

LocalStorage: ${Dt?JSON.parse(Dt).length+" entries":"Empty"}
Current State: ${r.length} entries
History Loaded: ${s}

Latest Entry: ${r[0]?JSON.stringify(r[0],null,2):"None"}`;alert(hr)},children:["Debug History ($",r.length,")"]}),l.jsx("button",{style:{background:"#10b981",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:600,boxShadow:"0 1px 4px #0003",cursor:"pointer"},onClick:()=>{try{const Dt=localStorage.getItem("analysisHistory");if(Dt){const hr=JSON.parse(Dt);Array.isArray(hr)&&(n(hr),alert(`Synced ${hr.length} entries from localStorage`))}else alert("No data in localStorage to sync")}catch(Dt){alert("Error syncing from localStorage: "+Dt.message)}},children:"Force Sync"}),l.jsx("button",{style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:600,boxShadow:"0 1px 4px #0003",cursor:"pointer"},onClick:me,children:"Reset History"})]}),r.length===0?l.jsxs("div",{className:"analysis-history-empty",style:{color:"#b0b0c0",fontSize:"1.05em",padding:"12px 0"},children:["No previous analyses found.",l.jsx("br",{}),l.jsxs("span",{style:{color:"#888",fontSize:"0.95em"},children:["If you expected to see history, it may have been reset or corrupted. You can use the ",l.jsx("b",{children:"Reset History"})," button above to clear and reload."]})]}):l.jsx("ul",{className:"analysis-history-list",style:{listStyle:"none",padding:0,margin:0},children:r.map((Dt,hr)=>l.jsxs("li",{className:"analysis-history-item",style:{background:"#23273a",borderRadius:8,marginBottom:10,padding:"10px 14px",boxShadow:"0 1px 6px #0002",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{className:"history-info",style:{display:"flex",flexDirection:"column",gap:2},children:[l.jsx("span",{className:"history-type",style:{color:"#7ed957",fontWeight:600},children:Dt.type||"Unknown Type"}),l.jsx("span",{className:"history-date",style:{color:"#a97fff",fontSize:"0.98em"},children:Dt.date?new Date(Dt.date).toLocaleString():""})]}),l.jsxs("div",{className:"history-actions",style:{display:"flex",gap:8},children:[l.jsx("button",{className:"history-view-btn",style:{background:"#4f8cff",color:"#fff",border:"none",borderRadius:5,padding:"4px 14px",fontWeight:600,cursor:"pointer"},onClick:()=>N(Dt,hr),children:"View"}),l.jsx("button",{className:"history-delete-btn",style:{background:"#f76e6e",color:"#fff",border:"none",borderRadius:5,padding:"4px 14px",fontWeight:600,cursor:"pointer"},onClick:()=>_(hr),children:"Delete"})]})]},Dt.id||hr))}),i&&l.jsxs("div",{className:"summary-section",style:{marginTop:24},children:[l.jsx("h3",{style:{color:"#4f8cff",fontWeight:700,marginBottom:10},children:" Analysis Details"}),l.jsxs("div",{className:"summary-display",style:{display:"flex",flexDirection:"column",gap:"22px"},children:[l.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #4f8cff"},children:[l.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#4f8cff"},children:"Type"}),l.jsx("div",{children:i.type})]}),l.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #7ed957"},children:[l.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#7ed957"},children:"Date"}),l.jsx("div",{children:i.date?new Date(i.date).toLocaleString():""})]}),l.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #ffb347"},children:[l.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#ffb347"},children:"Transcript / Text"}),l.jsx("pre",{style:{whiteSpace:"pre-wrap",margin:0,background:"none",color:"#e0e0e0",fontSize:"1.01em"},children:i.transcript})]}),i.summary&&l.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #f76e6e"},children:[l.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#f76e6e"},children:"Summary"}),l.jsx("pre",{style:{whiteSpace:"pre-wrap",margin:0,background:"none",color:"#e0e0e0",fontSize:"1.01em"},children:i.summary})]}),i.analysis&&l.jsxs("div",{style:{background:"linear-gradient(120deg,#23272f 60%,#2a2d43 100%)",color:"#fff",borderRadius:12,padding:"18px 16px",boxShadow:"0 2px 12px #0004",borderLeft:"6px solid #a97fff",overflowX:"auto",maxHeight:500},children:[l.jsx("div",{style:{fontSize:"1.08em",fontWeight:"bold",marginBottom:6,letterSpacing:"0.5px",color:"#a97fff"},children:"Analysis"}),l.jsx("div",{style:{fontSize:"1em",lineHeight:1.7,whiteSpace:"pre-wrap",color:"#e0e0e0",fontFamily:"inherit"},children:(()=>{const Dt=i.analysis;if(!Dt||typeof Dt!="object")return String(Dt);const hr=(rn,An)=>l.jsxs("div",{style:{marginBottom:14},children:[l.jsx("div",{style:{color:"#a97fff",fontWeight:"bold",fontSize:"1.04em",marginBottom:2},children:rn}),l.jsx("div",{style:{marginLeft:10},children:An})]});let Yr=[];Dt.overview&&Yr.push(hr("Overview",Object.entries(Dt.overview).map(([rn,An])=>`${rn}: ${An}`).join(`
`))),Dt.sentiment&&Yr.push(hr("Sentiment",Object.entries(Dt.sentiment).map(([rn,An])=>`${rn}: ${An}`).join(`
`))),Dt.statistics&&Yr.push(hr("Statistics",Object.entries(Dt.statistics).map(([rn,An])=>`${rn}: ${An}`).join(`
`))),Array.isArray(Dt.keywords)&&Yr.push(hr("Keywords",Dt.keywords.map(rn=>` ${rn.word||rn.topic||rn.type||""}${rn.count?` (${rn.count})`:""}`).join(`
`))),Array.isArray(Dt.topicDistribution)&&Yr.push(hr("Topic Distribution",Dt.topicDistribution.map(rn=>` ${rn.topic}: ${rn.count}`).join(`
`))),Array.isArray(Dt.emotionAnalysis)&&Yr.push(hr("Emotion Analysis",Dt.emotionAnalysis.map(rn=>` ${rn.emotion}: ${rn.count}`).join(`
`))),Dt.linguisticAnalysis&&Yr.push(hr("Linguistic Analysis",Object.entries(Dt.linguisticAnalysis).map(([rn,An])=>`${rn}: ${An}`).join(`
`))),Array.isArray(Dt.insights)&&Yr.push(hr("Insights",Dt.insights.map(rn=>` ${rn.title||rn.type||""}: ${rn.description||""}`).join(`
`))),Array.isArray(Dt.questions)&&Yr.push(hr("Questions",Dt.questions.map(rn=>` ${rn}`).join(`
`)));const Ur=["overview","sentiment","statistics","keywords","topicDistribution","emotionAnalysis","linguisticAnalysis","insights","questions"];return Object.entries(Dt).forEach(([rn,An])=>{Ur.includes(rn)||(typeof An=="string"||typeof An=="number")&&Yr.push(hr(rn.charAt(0).toUpperCase()+rn.slice(1),An))}),Yr})()})]}),l.jsx("button",{className:"history-view-btn",style:{marginTop:8,alignSelf:"flex-start"},onClick:()=>a(null),children:"Close"})]})]})]}),l.jsxs("div",{className:"tabs",style:{display:"flex",flexWrap:"wrap",gap:"12px",margin:"32px 0 18px 0",justifyContent:"center",maxWidth:"1200px",marginLeft:"auto",marginRight:"auto"},children:[l.jsx("button",{className:`tab ${t==="speech"?"active":""}`,style:{background:t==="speech"?"linear-gradient(90deg,#7ed957 60%,#4f8cff 100%)":"#23273a",color:t==="speech"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("speech"),children:" Live Speech"}),l.jsx("button",{className:`tab ${t==="upload"?"active":""}`,style:{background:t==="upload"?"linear-gradient(90deg,#ffb347 60%,#7ed957 100%)":"#23273a",color:t==="upload"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("upload"),children:" File Upload"}),l.jsx("button",{className:`tab ${t==="text"?"active":""}`,style:{background:t==="text"?"linear-gradient(90deg,#a97fff 60%,#f76e6e 100%)":"#23273a",color:t==="text"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("text"),children:" Text Input"}),l.jsx("button",{className:`tab ${t==="emotions"?"active":""}`,style:{background:t==="emotions"?"linear-gradient(90deg,#ff6b6b 60%,#4ecdc4 100%)":"#23273a",color:t==="emotions"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("emotions"),children:" Emotion V4"}),l.jsx("button",{className:`tab ${t==="students"?"active":""}`,style:{background:t==="students"?"linear-gradient(90deg,#22c55e 60%,#06b6d4 100%)":"#23273a",color:t==="students"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("students"),children:" Students"}),l.jsx("button",{className:`tab ${t==="export"?"active":""}`,style:{background:t==="export"?"linear-gradient(90deg,#10b981 60%,#3b82f6 100%)":"#23273a",color:t==="export"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("export"),children:" Export & Reports"}),l.jsx("button",{className:`tab ${t==="bertsummary"?"active":""}`,style:{background:t==="bertsummary"?"linear-gradient(90deg,#667eea 60%,#764ba2 100%)":"#23273a",color:t==="bertsummary"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("bertsummary"),children:" BERT Summary & Insights"}),l.jsx("button",{className:`tab ${t==="novelbert"?"active":""}`,style:{background:t==="novelbert"?"linear-gradient(90deg,#a855f7 60%,#ec4899 100%)":"#23273a",color:t==="novelbert"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("novelbert"),children:" Novel BERT"}),l.jsx("button",{className:`tab ${t==="training"?"active":""}`,style:{background:t==="training"?"linear-gradient(90deg,#f59e0b 60%,#d97706 100%)":"#23273a",color:t==="training"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("training"),children:" Training Center"}),l.jsx("button",{className:`tab ${t==="voiceemotion"?"active":""}`,style:{background:t==="voiceemotion"?"linear-gradient(90deg,#e11d48 60%,#be123c 100%)":"#23273a",color:t==="voiceemotion"?"#23272f":"#a97fff",border:"none",borderRadius:8,padding:"12px 20px",fontWeight:700,fontSize:"0.95em",boxShadow:"0 1px 8px #0002",cursor:"pointer",transition:"all 0.2s",minWidth:"140px",textAlign:"center"},onClick:()=>e("voiceemotion"),children:" Voice Emotion"})]}),l.jsxs("div",{className:"content",children:[t==="speech"&&l.jsxs("div",{className:"tab-content",children:[l.jsx("h2",{children:" Live Speech Recognition"}),l.jsxs("div",{className:"language-section",children:[l.jsx("h3",{children:" Select Language"}),l.jsx("div",{className:"language-grid",children:xn.map(Dt=>l.jsxs("button",{className:`language-option ${Pt===Dt.code?"selected":""} ${Dt.vosk?"":"limited"}`,onClick:()=>ir(Dt.code),disabled:ct,title:Dt.vosk?"Fully supported with Vosk":"Limited support - Web Speech API only",children:[l.jsx("span",{className:"language-flag",children:Dt.flag}),l.jsx("span",{className:"language-name",children:Dt.name}),Dt.vosk&&l.jsx("span",{className:"vosk-badge",children:"Vosk"})]},Dt.code))})]}),l.jsxs("div",{className:"controls-section",children:[l.jsxs("div",{className:"main-controls",children:[l.jsxs("button",{className:`mic-button ${ct?"listening":""}`,onClick:ct?En:an,disabled:!Pa.current,children:[l.jsx("span",{className:"mic-icon",children:ct?"":""}),l.jsx("span",{className:"mic-text",children:ct?"Stop Recording":"Start Recording"})]}),l.jsxs("button",{className:"control-button summarize",onClick:fn,disabled:!fe.trim()||Ue,children:[l.jsx("span",{className:"button-icon",children:""}),Ue?"Processing...":"Generate Summary"]}),l.jsxs("button",{className:"control-button video-suggest",onClick:bs,disabled:!fe.trim()||zr,children:[l.jsx("span",{className:"button-icon",children:""}),zr?"Generating...":"Suggest Videos"]}),l.jsxs("button",{className:"control-button grammar-correct",onClick:async()=>{const Dt=await zi(fe);Dt!==fe&&Te(Dt)},disabled:!fe.trim()||ca,children:[l.jsx("span",{className:"button-icon",children:""}),ca?"Correcting...":"Fix Grammar"]}),l.jsxs("button",{className:"control-button emotion-detect",onClick:Hi?Ds:Rs,disabled:!fe.trim(),title:ki.current?"Full audio + text emotion analysis":"Using text-based emotion analysis (microphone access not available)",children:[l.jsx("span",{className:"button-icon",children:""}),Hi?"Stop Emotion Detection":"Analyze Emotion"]}),l.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"10px",flexWrap:"wrap"},children:[l.jsx("button",{style:{background:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{Te("Oh great, this is just fantastic! Another wonderful day where everything goes perfectly wrong. I love how nothing ever works when you need it to.")},children:"Test Sarcasm"}),l.jsx("button",{style:{background:"#51cf66",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{Te("I am absolutely thrilled to announce that our team has achieved a major breakthrough! This is incredible news and I couldn't be more excited!")},children:"Test Enthusiasm"}),l.jsx("button",{style:{background:"#ffa726",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{Te("This is so annoying and frustrated. There are multiple issues and problems. I seriously dont know what to do anymore.")},children:"Test Frustration"}),l.jsx("button",{style:{background:"#42a5f5",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{Te("I am absolutely certain and confident that the positive results show we are making great progress. The treatment is working good.")},children:"Test Confidence"}),l.jsx("button",{style:{background:"#9e9e9e",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8em",cursor:"pointer"},onClick:()=>{Te("Exposure and training of students in fundamental concepts of sketching based visual representations. Hand sketching of general products and digital design using CAD software.")},children:"Test Neutral"})]})]}),l.jsxs("div",{className:"secondary-controls",children:[l.jsxs("button",{className:"control-button clear",onClick:no,disabled:!fe.trim()&&!qe.trim(),children:[l.jsx("span",{className:"button-icon",children:""}),"Clear All"]}),l.jsxs("button",{className:"control-button download",onClick:Mi,disabled:!fe.trim(),children:[l.jsx("span",{className:"button-icon",children:""}),"Download Results"]}),l.jsxs("button",{className:"control-button process",onClick:Na,disabled:hn,children:[l.jsx("span",{className:"button-icon",children:""}),hn?"Running...":"Test Vosk"]})]})]}),Ar&&l.jsxs("div",{className:"diagnostics-section",children:[l.jsx("h3",{children:" Vosk Diagnostics Results"}),l.jsxs("div",{className:`diagnostics-display ${Ar.success?"success":"error"}`,children:[l.jsxs("div",{className:"diagnostics-status",children:[l.jsx("span",{className:"status-icon",children:Ar.success?"":""}),l.jsx("span",{className:"status-message",children:Ar.message})]}),Ar.tests&&l.jsxs("div",{className:"diagnostics-details",children:[l.jsx("h4",{children:"Test Results:"}),l.jsx("ul",{children:Object.entries(Ar.tests).map(([Dt,hr])=>l.jsxs("li",{children:[l.jsxs("strong",{children:[Dt,":"]}),l.jsx("span",{className:hr.success?"success":"error",children:hr.success?" Passed":" Failed"}),l.jsx("div",{className:"test-message",children:hr.message})]},Dt))})]})]})]}),ct&&l.jsxs("div",{className:"speech-status",children:[l.jsxs("div",{className:"status-indicator",children:[l.jsx("div",{className:"pulse-ring"}),l.jsx("div",{className:"pulse-dot"})]}),l.jsx("span",{children:"Listening... Speak now"})]}),l.jsxs("div",{className:"transcript-section",children:[l.jsxs("h3",{children:[" ",er?"Extracted Text":"Transcript"," (",tt," words)"]}),l.jsxs("div",{className:"transcript-container",children:[l.jsx("textarea",{className:"transcript-display",value:fe,onChange:Dt=>Te(Dt.target.value),placeholder:ct?"Listening... Your speech will appear here...":"Click 'Start Recording' to begin speech recognition...",rows:"10"}),l.jsxs("div",{className:"transcript-stats",children:[l.jsxs("span",{children:["Words: ",tt]}),l.jsxs("span",{children:["Characters: ",fe.length]}),l.jsxs("span",{children:["Language: ",(Fi=xn.find(Dt=>Dt.code===Pt))==null?void 0:Fi.name]})]})]})]}),qe&&l.jsxs("div",{className:"summary-section",children:[l.jsx("h3",{children:" Summary"}),l.jsx("div",{className:"summary-display",children:l.jsx("pre",{children:qe})})]}),Fe&&l.jsxs("div",{className:"error-display",children:[l.jsx("span",{className:"error-icon",children:""}),l.jsx("span",{className:"error-message",children:Fe})]})]}),t==="upload"&&l.jsxs("div",{className:"tab-content",children:[l.jsx("h2",{children:" Content Upload & Processing"}),l.jsxs("div",{className:"domain-selection-section",children:[l.jsx("h3",{className:"section-title",children:" Processing Domain"}),l.jsxs("div",{className:"domain-grid",children:[l.jsxs("div",{className:"domain-option",children:[l.jsx("div",{className:"option-icon",children:""}),l.jsxs("div",{className:"option-content",children:[l.jsx("div",{className:"option-title",children:"Research & Academic"}),l.jsx("div",{className:"option-description",children:"Specialized processing for research papers and academic content"})]})]}),l.jsxs("div",{className:"domain-option",children:[l.jsx("div",{className:"option-icon",children:""}),l.jsxs("div",{className:"option-content",children:[l.jsx("div",{className:"option-title",children:"Legal Documents"}),l.jsx("div",{className:"option-description",children:"Legal document analysis and processing"})]})]}),l.jsxs("div",{className:"domain-option",children:[l.jsx("div",{className:"option-icon",children:""}),l.jsxs("div",{className:"option-content",children:[l.jsx("div",{className:"option-title",children:"Medical & Healthcare"}),l.jsx("div",{className:"option-description",children:"Medical document and record processing"})]})]}),l.jsxs("div",{className:"domain-option",children:[l.jsx("div",{className:"option-icon",children:""}),l.jsxs("div",{className:"option-content",children:[l.jsx("div",{className:"option-title",children:"Business & Finance"}),l.jsx("div",{className:"option-description",children:"Business documents and financial reports"})]})]})]})]}),l.jsxs("div",{className:"file-types-section",children:[l.jsx("h3",{children:" Supported Content Types"}),l.jsxs("div",{className:"file-types-grid",children:[l.jsxs("div",{className:"file-type-group",children:[l.jsxs("div",{className:"file-type-header",children:[l.jsx("span",{className:"file-type-icon",children:""}),l.jsx("span",{className:"file-type-label",children:"Audio Files (Vosk Processing)"})]}),l.jsx("div",{className:"file-type-extensions",children:Sr.audio.map(Dt=>l.jsx("span",{className:"file-extension",children:Dt},Dt))})]}),l.jsxs("div",{className:"file-type-group",children:[l.jsxs("div",{className:"file-type-header",children:[l.jsx("span",{className:"file-type-icon",children:""}),l.jsx("span",{className:"file-type-label",children:"Documents"})]}),l.jsx("div",{className:"file-type-extensions",children:Sr.document.map(Dt=>l.jsx("span",{className:"file-extension",children:Dt},Dt))})]}),l.jsxs("div",{className:"file-type-group",children:[l.jsxs("div",{className:"file-type-header",children:[l.jsx("span",{className:"file-type-icon",children:""}),l.jsx("span",{className:"file-type-label",children:"Images"})]}),l.jsx("div",{className:"file-type-extensions",children:Sr.image.map(Dt=>l.jsx("span",{className:"file-extension",children:Dt},Dt))})]}),l.jsxs("div",{className:"file-type-group",children:[l.jsxs("div",{className:"file-type-header",children:[l.jsx("span",{className:"file-type-icon",children:""}),l.jsx("span",{className:"file-type-label",children:"Text Files"})]}),l.jsx("div",{className:"file-type-extensions",children:Sr.text.map(Dt=>l.jsx("span",{className:"file-extension",children:Dt},Dt))})]})]})]}),l.jsxs("div",{className:"upload-section",children:[l.jsx("div",{className:`upload-area ${Ht?"drag-over":""} ${yr?"processing":""}`,onClick:qi,onDragOver:Yn,onDragLeave:ri,onDrop:xa,children:l.jsxs("div",{className:"upload-content",children:[l.jsx("div",{className:"upload-icon",children:yr?"":Ht?"":""}),l.jsx("div",{className:"upload-text",children:yr?"Processing file...":Ht?"Drop your file here":"Drop files here or click to upload"}),l.jsx("div",{className:"upload-subtext",children:yr?gt:"Supports all file types shown above"}),yr&&l.jsxs("div",{className:"processing-indicator",children:[l.jsx("div",{className:"processing-spinner"}),l.jsx("div",{className:"processing-text",children:gt})]})]})}),l.jsx("input",{ref:Es,type:"file",className:"file-input",accept:Br(),onChange:on,disabled:yr,style:{display:"none"}})]}),er&&l.jsxs("div",{className:"file-info-section",children:[l.jsx("h3",{children:" File Information"}),l.jsxs("div",{className:"file-info-grid",children:[l.jsxs("div",{className:"file-info-item",children:[l.jsx("span",{className:"file-info-label",children:"Name:"}),l.jsx("span",{className:"file-info-value",children:er.name})]}),l.jsxs("div",{className:"file-info-item",children:[l.jsx("span",{className:"file-info-label",children:"Size:"}),l.jsxs("span",{className:"file-info-value",children:[(er.size/(1024*1024)).toFixed(2)," MB"]})]}),l.jsxs("div",{className:"file-info-item",children:[l.jsx("span",{className:"file-info-label",children:"Type:"}),l.jsx("span",{className:"file-info-value",children:er.type||"Unknown"})]}),l.jsxs("div",{className:"file-info-item",children:[l.jsx("span",{className:"file-info-label",children:"Modified:"}),l.jsx("span",{className:"file-info-value",children:new Date(er.lastModified).toLocaleString()})]})]})]}),lr&&l.jsxs("div",{className:"processing-stats-section",children:[l.jsx("h3",{children:" Processing Statistics"}),l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Mode:"}),l.jsx("span",{className:"stat-value",children:lr.mode})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Duration:"}),l.jsxs("span",{className:"stat-value",children:[Math.round(lr.duration||0),"s"]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Words:"}),l.jsx("span",{className:"stat-value",children:lr.words||0})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Confidence:"}),l.jsxs("span",{className:"stat-value",children:[Math.round((lr.confidence||0)*100),"%"]})]})]})]}),fe&&l.jsxs("div",{className:"results-section",tabIndex:-1,ref:Dt=>{Dt&&Ue&&Dt.scrollIntoView({behavior:"smooth",block:"center"})},children:[l.jsxs("h3",{children:[" Extracted Text (",tt," words)"]}),l.jsxs("div",{className:"results-container",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"10px",width:"100%"},children:[l.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"4px",flexWrap:"wrap"},children:[l.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Words: ",tt]}),l.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Characters: ",fe.length]}),l.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Lines: ",fe.split(`
`).length]})]}),l.jsxs("div",{style:{width:"100%",position:"relative"},children:[l.jsx("textarea",{className:"results-display",value:fe,onChange:Dt=>Te(Dt.target.value),rows:"12",placeholder:"Extracted text will appear here...",style:{width:"100%",minWidth:"320px",maxWidth:"100%",marginBottom:"0",resize:"vertical"},"aria-label":"Extracted Text",autoFocus:Ue}),Ue&&l.jsxs("div",{style:{position:"absolute",top:8,right:8,background:"rgba(30,30,40,0.85)",borderRadius:8,padding:"6px 14px",color:"#fff",fontWeight:600,boxShadow:"0 2px 8px #0003",zIndex:2,display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("span",{className:"spinner",style:{width:18,height:18,border:"3px solid #7a89a8",borderTop:"3px solid #fff",borderRadius:"50%",display:"inline-block",animation:"spin 1s linear infinite"}}),"Processing..."]})]}),l.jsxs("div",{className:"controls",style:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"8px",marginTop:"8px",flexWrap:"wrap"},children:[l.jsxs("button",{className:"control-button summarize",onClick:fn,disabled:!fe.trim()||Ue,"aria-label":"Generate Summary",children:[l.jsx("span",{className:"button-icon",children:""}),Ue?"Processing...":"Generate Summary"]}),l.jsxs("button",{className:"control-button clear",onClick:no,disabled:!fe.trim()&&!qe.trim(),"aria-label":"Clear All",children:[l.jsx("span",{className:"button-icon",children:""}),"Clear All"]}),l.jsxs("button",{className:"control-button download",onClick:Mi,disabled:!fe.trim(),"aria-label":"Download Results",children:[l.jsx("span",{className:"button-icon",children:""}),"Download Results"]}),l.jsxs("button",{className:"control-button video-suggest",onClick:bs,disabled:!fe.trim()||zr,"aria-label":"Suggest YouTube Videos",children:[l.jsx("span",{className:"button-icon",children:""}),zr?"Generating...":"Suggest Videos"]})]})]})]}),qe&&l.jsxs("div",{className:"summary-section",children:[l.jsx("h3",{children:" Summary"}),l.jsx("div",{className:"summary-display",children:l.jsx("pre",{children:qe})})]}),Fe&&l.jsxs("div",{className:"error-display",children:[l.jsx("span",{className:"error-icon",children:""}),l.jsx("span",{className:"error-message",children:Fe})]})]}),t==="text"&&l.jsxs("div",{className:"tab-content",children:[l.jsx("h2",{children:" Text Input & Processing"}),l.jsxs("div",{className:"text-input-section",children:[l.jsx("h3",{children:" Enter Text to Process"}),l.jsxs("div",{className:"text-input-container",children:[l.jsx("textarea",{className:"text-input-area",placeholder:"Type or paste your text here for processing and summarization...",value:ut,onChange:Dt=>qt(Dt.target.value),rows:"12"}),l.jsxs("div",{className:"text-input-stats",children:[l.jsxs("span",{children:["Words: ",ut.trim().split(/\s+/).filter(Dt=>Dt.length>0).length]}),l.jsxs("span",{children:["Characters: ",ut.length]}),l.jsxs("span",{children:["Lines: ",ut.split(`
`).length]})]})]}),l.jsxs("div",{className:"text-controls",children:[l.jsxs("button",{className:"control-button process",onClick:_n,disabled:!ut.trim()||Ue,children:[l.jsx("span",{className:"button-icon",children:""}),Ue?"Processing...":"Process Text"]}),l.jsxs("button",{className:"control-button clear",onClick:()=>qt(""),disabled:!ut.trim(),children:[l.jsx("span",{className:"button-icon",children:""}),"Clear Input"]}),l.jsxs("button",{className:"control-button video-suggest",onClick:bs,disabled:!ut.trim()||zr,children:[l.jsx("span",{className:"button-icon",children:""}),zr?"Generating...":"Suggest Videos"]})]})]}),fe&&l.jsxs("div",{className:"results-section",tabIndex:-1,ref:Dt=>{Dt&&Ue&&Dt.scrollIntoView({behavior:"smooth",block:"center"})},children:[l.jsxs("h3",{children:[" Processed Text (",tt," words)"]}),l.jsxs("div",{className:"results-container",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"10px",width:"100%"},children:[l.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"4px",flexWrap:"wrap"},children:[l.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Words: ",tt]}),l.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Characters: ",fe.length]}),l.jsxs("span",{className:"results-stats",style:{background:"#7a89a8",color:"#fff",borderRadius:"8px",padding:"4px 14px",fontWeight:500},children:["Lines: ",fe.split(`
`).length]})]}),l.jsxs("div",{style:{width:"100%",position:"relative"},children:[l.jsx("textarea",{className:"results-display",value:fe,onChange:Dt=>Te(Dt.target.value),rows:"10",placeholder:"Processed text will appear here...",style:{width:"100%",minWidth:"320px",maxWidth:"100%",marginBottom:"0",resize:"vertical"},"aria-label":"Processed Text",autoFocus:Ue}),Ue&&l.jsxs("div",{style:{position:"absolute",top:8,right:8,background:"rgba(30,30,40,0.85)",borderRadius:8,padding:"6px 14px",color:"#fff",fontWeight:600,boxShadow:"0 2px 8px #0003",zIndex:2,display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("span",{className:"spinner",style:{width:18,height:18,border:"3px solid #7a89a8",borderTop:"3px solid #fff",borderRadius:"50%",display:"inline-block",animation:"spin 1s linear infinite"}}),"Processing..."]})]}),l.jsxs("div",{className:"controls",style:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"8px",marginTop:"8px",flexWrap:"wrap"},children:[l.jsxs("button",{className:"control-button summarize",onClick:fn,disabled:!fe.trim()||Ue,"aria-label":"Generate Summary",children:[l.jsx("span",{className:"button-icon",children:""}),Ue?"Processing...":"Generate Summary"]}),l.jsxs("button",{className:"control-button clear",onClick:no,disabled:!fe.trim()&&!qe.trim(),"aria-label":"Clear All",children:[l.jsx("span",{className:"button-icon",children:""}),"Clear All"]}),l.jsxs("button",{className:"control-button download",onClick:Mi,disabled:!fe.trim(),"aria-label":"Download Results",children:[l.jsx("span",{className:"button-icon",children:""}),"Download Results"]}),l.jsxs("button",{className:"control-button video-suggest",onClick:bs,disabled:!fe.trim()||zr,"aria-label":"Suggest YouTube Videos",children:[l.jsx("span",{className:"button-icon",children:""}),zr?"Generating...":"Suggest Videos"]})]})]})]}),qe&&l.jsxs("div",{className:"summary-section",children:[l.jsx("h3",{children:" Summary"}),l.jsx("div",{className:"summary-display",children:l.jsx("pre",{children:qe})})]}),Fe&&l.jsxs("div",{className:"error-display",children:[l.jsx("span",{className:"error-icon",children:""}),l.jsx("span",{className:"error-message",children:Fe})]})]}),t==="emotions"&&l.jsx("div",{className:"tab-content",children:l.jsx(q6,{})}),t==="students"&&l.jsx("div",{className:"tab-content",children:l.jsx(wD,{})})]}),zn&&rs.length>0&&l.jsxs("div",{className:"video-suggestions-section",style:{background:"linear-gradient(120deg, #ff6b6b 0%, #ee5a24 100%)",borderRadius:"18px",padding:"24px 20px",marginTop:"24px",boxShadow:"0 4px 24px rgba(255, 107, 107, 0.15)",border:"2px solid #ff9ff3"},children:[l.jsxs("h3",{style:{color:"#fff",fontWeight:800,fontSize:"1.4em",marginBottom:"18px",letterSpacing:"1px",textShadow:"0 2px 8px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",gap:"12px"},children:[" YouTube Video Suggestions",l.jsx("span",{style:{background:"rgba(255,255,255,0.2)",padding:"4px 12px",borderRadius:"20px",fontSize:"0.7em",fontWeight:600},children:"Based on your content"})]}),l.jsx("div",{className:"video-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"16px",marginTop:"20px"},children:rs.map(Dt=>l.jsxs("div",{className:"video-card",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%)",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",cursor:"pointer",transition:"all 0.3s ease",border:"1px solid rgba(255,255,255,0.3)"},onClick:()=>bo(Dt.searchQuery),onMouseOver:hr=>{hr.currentTarget.style.transform="translateY(-4px)",hr.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.15)"},onMouseOut:hr=>{hr.currentTarget.style.transform="translateY(0)",hr.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.1)"},children:[l.jsxs("div",{className:"video-header",style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[l.jsx("div",{className:"video-thumbnail",style:{fontSize:"2.5em",flexShrink:0,background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",borderRadius:"8px",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(238, 90, 36, 0.3)"},children:Dt.thumbnail}),l.jsxs("div",{className:"video-info",style:{flex:1},children:[l.jsx("h4",{style:{color:"#2c3e50",fontWeight:700,fontSize:"1.1em",marginBottom:"6px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Dt.title}),l.jsxs("div",{className:"video-meta",style:{display:"flex",flexDirection:"column",gap:"4px",fontSize:"0.85em",color:"#7f8c8d"},children:[l.jsx("span",{style:{fontWeight:600,color:"#e74c3c"},children:Dt.channel}),l.jsxs("div",{style:{display:"flex",gap:"12px"},children:[l.jsxs("span",{children:[" ",Dt.duration]}),l.jsxs("span",{children:[" ",Dt.views]}),l.jsxs("span",{style:{background:`linear-gradient(90deg, #27ae60 0%, #2ecc71 ${Dt.relevance}%, #95a5a6 ${Dt.relevance}%, #bdc3c7 100%)`,borderRadius:"10px",padding:"2px 8px",color:"#fff",fontWeight:600,fontSize:"0.8em"},children:[Dt.relevance,"% Match"]})]})]})]})]}),l.jsx("p",{style:{color:"#34495e",fontSize:"0.9em",lineHeight:"1.4",margin:"0",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Dt.description}),l.jsx("div",{className:"video-action",style:{marginTop:"12px",textAlign:"center"},children:l.jsx("button",{style:{background:"linear-gradient(90deg, #e74c3c 0%, #c0392b 100%)",color:"#fff",border:"none",borderRadius:"20px",padding:"8px 16px",fontWeight:600,fontSize:"0.9em",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(231, 76, 60, 0.3)"},onMouseOver:hr=>hr.target.style.transform="scale(1.05)",onMouseOut:hr=>hr.target.style.transform="scale(1)",onClick:hr=>{hr.stopPropagation(),bo(Dt.searchQuery)},children:" Search on YouTube"})})]},Dt.id))}),l.jsxs("div",{className:"video-suggestions-footer",style:{marginTop:"20px",textAlign:"center",padding:"16px",background:"rgba(255,255,255,0.15)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)"},children:[l.jsx("p",{style:{color:"rgba(255,255,255,0.9)",margin:"0 0 12px 0",fontSize:"0.95em",fontWeight:500},children:" These suggestions are generated based on your transcript content analysis"}),l.jsx("button",{onClick:()=>Bi(!1),style:{background:"rgba(255,255,255,0.25)",color:"#fff",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"8px 16px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:Dt=>Dt.target.style.background="rgba(255,255,255,0.35)",onMouseOut:Dt=>Dt.target.style.background="rgba(255,255,255,0.25)",children:"Hide Suggestions"})]})]}),t==="export"&&l.jsx(mD,{analysisData:i,analysisHistory:r,isVisible:!0}),t==="bertsummary"&&l.jsx("div",{className:"tab-content",children:l.jsx(UD,{transcript:fe||(i?i.transcript:"")})}),t==="novelbert"&&l.jsx("div",{className:"tab-content",children:l.jsx(qD,{})}),t==="training"&&l.jsx("div",{className:"tab-content",children:l.jsx(iR,{})}),t==="voiceemotion"&&l.jsx("div",{className:"tab-content",children:l.jsx(aR,{})})]}),(fe||i)&&l.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"20px",padding:"24px",margin:"24px 0",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.15)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[l.jsx("h2",{style:{color:"#fff",fontSize:"1.8em",fontWeight:"bold",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:" Transcript Analysis & Insights"}),l.jsxs("button",{className:"control-button analyze",onClick:()=>Tn(!Sn),disabled:!fe.trim()&&!i,style:{background:Sn?"#f39c12":"#27ae60",color:"#fff",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",transition:"all 0.3s ease"},children:[l.jsx("span",{style:{marginRight:"8px"},children:Sn?"":""}),Sn?"Hide Analysis":"Show Analysis"]})]}),Sn&&fe&&l.jsxs("div",{className:"analysis-section",children:[l.jsx(aw,{transcript:fe,isVisible:Sn,onAnalysisComplete:({fast:Dt,progressive:hr,transcript:Yr,processingTime:Ur})=>{if(!Yr)return;const rn={basic:Dt,advanced:hr,transcript:Yr,processingTime:Ur,timestamp:Date.now(),id:`analysis_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};a(rn),I(rn)}}),l.jsxs("details",{style:{marginTop:"20px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",padding:"16px"},children:[l.jsx("summary",{style:{color:"#fff",cursor:"pointer",fontWeight:"bold",fontSize:"1.1em"},children:" Show Original Analysis (for comparison)"}),l.jsx(I9,{transcript:fe,isVisible:!0,onAnalysisComplete:({analysis:Dt,chartData:hr,transcript:Yr})=>{}})]})]}),Sn&&!fe&&i&&l.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"12px",padding:"20px"},children:[l.jsx("p",{style:{color:"#fff",fontSize:"1.1em",textAlign:"center",margin:"0 0 16px 0"},children:" Viewing Previous Analysis"}),l.jsx(aw,{transcript:i.transcript,isVisible:!0,initialAnalysis:i,onAnalysisComplete:()=>{}})]})]}),l.jsx(dD,{currentAnalysis:i,onAnalysisUpdate:Dt=>{a(Dt),Dt&&!r.find(hr=>hr.id===Dt.id)&&I(Dt)}})]}):l.jsx("div",{className:"app",children:l.jsx("div",{className:"container",children:l.jsx("div",{children:"Loading analysis history..."})})})}console.log("main.jsx loading - App Simple version...");sg.createRoot(document.getElementById("root")).render(l.jsx(Vl.StrictMode,{children:l.jsx(sR,{})}));export{lR as a,cw as c,Cf as g};
